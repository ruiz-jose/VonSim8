var R7=Object.defineProperty;var NA=t=>{throw TypeError(t)};var T7=(t,e,n)=>e in t?R7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pe=(t,e,n)=>T7(t,typeof e!="symbol"?e+"":e,n),Zb=(t,e,n)=>e.has(t)||NA("Cannot "+n);var A=(t,e,n)=>(Zb(t,e,"read from private field"),n?n.call(t):e.get(t)),Ie=(t,e,n)=>e.has(t)?NA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ee=(t,e,n,i)=>(Zb(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Pt=(t,e,n)=>(Zb(t,e,"access private method"),n);function O7(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var I7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qT={exports:{}},_y={},YT={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=Symbol.for("react.element"),j7=Symbol.for("react.portal"),L7=Symbol.for("react.fragment"),D7=Symbol.for("react.strict_mode"),$7=Symbol.for("react.profiler"),F7=Symbol.for("react.provider"),B7=Symbol.for("react.context"),z7=Symbol.for("react.forward_ref"),U7=Symbol.for("react.suspense"),V7=Symbol.for("react.memo"),H7=Symbol.for("react.lazy"),PA=Symbol.iterator;function W7(t){return t===null||typeof t!="object"?null:(t=PA&&t[PA]||t["@@iterator"],typeof t=="function"?t:null)}var XT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JT=Object.assign,ZT={};function Zd(t,e,n){this.props=t,this.context=e,this.refs=ZT,this.updater=n||XT}Zd.prototype.isReactComponent={};Zd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function QT(){}QT.prototype=Zd.prototype;function Hk(t,e,n){this.props=t,this.context=e,this.refs=ZT,this.updater=n||XT}var Wk=Hk.prototype=new QT;Wk.constructor=Hk;JT(Wk,Zd.prototype);Wk.isPureReactComponent=!0;var MA=Array.isArray,eO=Object.prototype.hasOwnProperty,Gk={current:null},tO={key:!0,ref:!0,__self:!0,__source:!0};function nO(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)eO.call(e,i)&&!tO.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Zp,type:t,key:s,ref:o,props:r,_owner:Gk.current}}function G7(t,e){return{$$typeof:Zp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kk(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zp}function K7(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var RA=/\/+/g;function Qb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?K7(""+t.key):e.toString(36)}function Qg(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zp:case j7:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Qb(o,0):i,MA(r)?(n="",t!=null&&(n=t.replace(RA,"$&/")+"/"),Qg(r,e,n,"",function(c){return c})):r!=null&&(Kk(r)&&(r=G7(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(RA,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",MA(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Qb(s,a);o+=Qg(s,e,n,l,r)}else if(l=W7(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Qb(s,a++),o+=Qg(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rm(t,e,n){if(t==null)return t;var i=[],r=0;return Qg(t,i,"","",function(s){return e.call(n,s,r++)}),i}function q7(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _i={current:null},e0={transition:null},Y7={ReactCurrentDispatcher:_i,ReactCurrentBatchConfig:e0,ReactCurrentOwner:Gk};function iO(){throw Error("act(...) is not supported in production builds of React.")}lt.Children={map:Rm,forEach:function(t,e,n){Rm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rm(t,function(){e++}),e},toArray:function(t){return Rm(t,function(e){return e})||[]},only:function(t){if(!Kk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};lt.Component=Zd;lt.Fragment=L7;lt.Profiler=$7;lt.PureComponent=Hk;lt.StrictMode=D7;lt.Suspense=U7;lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y7;lt.act=iO;lt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=JT({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gk.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)eO.call(e,l)&&!tO.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Zp,type:t.type,key:r,ref:s,props:i,_owner:o}};lt.createContext=function(t){return t={$$typeof:B7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:F7,_context:t},t.Consumer=t};lt.createElement=nO;lt.createFactory=function(t){var e=nO.bind(null,t);return e.type=t,e};lt.createRef=function(){return{current:null}};lt.forwardRef=function(t){return{$$typeof:z7,render:t}};lt.isValidElement=Kk;lt.lazy=function(t){return{$$typeof:H7,_payload:{_status:-1,_result:t},_init:q7}};lt.memo=function(t,e){return{$$typeof:V7,type:t,compare:e===void 0?null:e}};lt.startTransition=function(t){var e=e0.transition;e0.transition={};try{t()}finally{e0.transition=e}};lt.unstable_act=iO;lt.useCallback=function(t,e){return _i.current.useCallback(t,e)};lt.useContext=function(t){return _i.current.useContext(t)};lt.useDebugValue=function(){};lt.useDeferredValue=function(t){return _i.current.useDeferredValue(t)};lt.useEffect=function(t,e){return _i.current.useEffect(t,e)};lt.useId=function(){return _i.current.useId()};lt.useImperativeHandle=function(t,e,n){return _i.current.useImperativeHandle(t,e,n)};lt.useInsertionEffect=function(t,e){return _i.current.useInsertionEffect(t,e)};lt.useLayoutEffect=function(t,e){return _i.current.useLayoutEffect(t,e)};lt.useMemo=function(t,e){return _i.current.useMemo(t,e)};lt.useReducer=function(t,e,n){return _i.current.useReducer(t,e,n)};lt.useRef=function(t){return _i.current.useRef(t)};lt.useState=function(t){return _i.current.useState(t)};lt.useSyncExternalStore=function(t,e,n){return _i.current.useSyncExternalStore(t,e,n)};lt.useTransition=function(){return _i.current.useTransition()};lt.version="18.3.1";YT.exports=lt;var b=YT.exports;const Ft=qc(b),Cy=O7({__proto__:null,default:Ft},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X7=b,J7=Symbol.for("react.element"),Z7=Symbol.for("react.fragment"),Q7=Object.prototype.hasOwnProperty,eU=X7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tU={key:!0,ref:!0,__self:!0,__source:!0};function rO(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Q7.call(e,i)&&!tU.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:J7,type:t,key:s,ref:o,props:r,_owner:eU.current}}_y.Fragment=Z7;_y.jsx=rO;_y.jsxs=rO;qT.exports=_y;var h=qT.exports,q=typeof window<"u"?window:void 0,Hi=typeof globalThis<"u"?globalThis:q,sO=Array.prototype,TA=sO.forEach,OA=sO.indexOf,cr=Hi==null?void 0:Hi.navigator,Ce=Hi==null?void 0:Hi.document,Bi=Hi==null?void 0:Hi.location,c1=Hi==null?void 0:Hi.fetch,u1=Hi!=null&&Hi.XMLHttpRequest&&"withCredentials"in new Hi.XMLHttpRequest?Hi.XMLHttpRequest:void 0,IA=Hi==null?void 0:Hi.AbortController,Di=cr==null?void 0:cr.userAgent,Ke=q??{},Eo={DEBUG:!1,LIB_VERSION:"1.256.2"},ex="$copy_autocapture",nU=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],Fo=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),iU=["fatal","error","warning","log","info","debug"];function at(t,e){return t.indexOf(e)!==-1}var Ey=function(t){return t.trim()},d1=function(t){return t.replace(/^\$/,"")},rU=Array.isArray,oO=Object.prototype,aO=oO.hasOwnProperty,Ay=oO.toString,Kt=rU||function(t){return Ay.call(t)==="[object Array]"},zr=t=>typeof t=="function",an=t=>t===Object(t)&&!Kt(t),Eu=t=>{if(an(t)){for(var e in t)if(aO.call(t,e))return!1;return!0}return!1},ve=t=>t===void 0,ln=t=>Ay.call(t)=="[object String]",f1=t=>ln(t)&&t.trim().length===0,El=t=>t===null,St=t=>ve(t)||El(t),li=t=>Ay.call(t)=="[object Number]",Ys=t=>Ay.call(t)==="[object Boolean]",sU=t=>t instanceof FormData,oU=t=>at(nU,t),lO=t=>{var e={t:function(n){if(q&&(Eo.DEBUG||Ke.POSTHOG_DEBUG)&&!ve(q.console)&&q.console){for(var i=("__rrweb_original__"in q.console[n])?q.console[n].__rrweb_original__:q.console[n],r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];i(t,...s)}},info:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("log",...i)},warn:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("warn",...i)},error:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("error",...i)},critical:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console.error(t,...i)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>lO(t+" "+n)};return e},Ae=lO("[PostHog.js]"),jn=Ae.createLogger,aU=jn("[ExternalScriptsLoader]"),jA=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return aU.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var i=Ce==null?void 0:Ce.querySelectorAll("script");if(i){for(var r=0;r<i.length;r++)if(i[r].src===e)return n()}var s=()=>{if(!Ce)return n("document not found");var o=Ce.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=Ce.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):Ce.body.appendChild(o)};Ce!=null&&Ce.body?s():Ce==null||Ce.addEventListener("DOMContentLoaded",s)};function Se(){return Se=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Se.apply(null,arguments)}function cO(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}Ke.__PosthogExtensions__=Ke.__PosthogExtensions__||{},Ke.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(i="/array/"+t.config.token+"/config.js"),e==="toolbar"){var r=3e5;i=i+"&t="+Math.floor(Date.now()/r)*r}var s=t.requestRouter.endpointFor("assets",i);jA(t,s,n)},Ke.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);jA(t,i,n)};var F0={};function qa(t,e,n){if(Kt(t)){if(TA&&t.forEach===TA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===F0)return}}}function At(t,e,n){if(!St(t)){if(Kt(t))return qa(t,e,n);if(sU(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===F0)return}else for(var r in t)if(aO.call(t,r)&&e.call(n,t[r],r)===F0)return}}var dn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return qa(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t},Ny=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return qa(n,function(r){qa(r,function(s){t.push(s)})}),t};function t0(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var LA=function(t){try{return t()}catch{return}},lU=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){Ae.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ae.critical(r)}}},qk=function(t){var e={};return At(t,function(n,i){(ln(n)&&n.length>0||li(n))&&(e[i]=n)}),e};function cU(t,e){return n=t,i=s=>ln(s)&&!El(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),Kt(o)?(l=[],qa(o,c=>{l.push(s(c))})):(l={},At(o,(c,u)=>{r.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,i,r}var uU=["herokuapp.com","vercel.app","netlify.app"];function dU(t){var e=t==null?void 0:t.hostname;if(!ln(e))return!1;var n=e.split(".").slice(-2).join(".");for(var i of uU)if(n===i)return!1;return!0}function uO(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function Qt(t,e,n,i){var{capture:r=!1,passive:s=!0}=i??{};t==null||t.addEventListener(e,n,{capture:r,passive:s})}var dO="$people_distinct_id",Vf="__alias",Hf="__timers",DA="$autocapture_disabled_server_side",h1="$heatmaps_enabled_server_side",$A="$exception_capture_enabled_server_side",p1="$error_tracking_suppression_rules",FA="$web_vitals_enabled_server_side",fO="$dead_clicks_enabled_server_side",BA="$web_vitals_allowed_metrics",m1="$session_recording_enabled_server_side",zA="$console_log_recording_enabled_server_side",UA="$session_recording_network_payload_capture",VA="$session_recording_masking",HA="$session_recording_canvas_recording",WA="$replay_sample_rate",GA="$replay_minimum_duration",KA="$replay_script_config",B0="$sesid",Wf="$session_is_sampled",g1="$session_recording_url_trigger_activated_session",v1="$session_recording_event_trigger_activated_session",Au="$enabled_feature_flags",n0="$early_access_features",y1="$feature_flag_details",Gf="$stored_person_properties",Zl="$stored_group_properties",b1="$surveys",Tm="$surveys_activated",z0="$flag_call_reported",wo="$user_state",x1="$client_session_props",w1="$capture_rate_limit",S1="$initial_campaign_params",k1="$initial_referrer_info",U0="$initial_person_info",V0="$epp",hO="__POSTHOG_TOOLBAR__",Om="$posthog_cookieless",fU=[dO,Vf,"__cmpns",Hf,m1,h1,B0,Au,p1,wo,n0,y1,Zl,Gf,b1,z0,x1,w1,S1,k1,V0,U0];function qA(t){return t instanceof Element&&(t.id===hO||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function Py(t){return!!t&&t.nodeType===1}function Ya(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function pO(t){return!!t&&t.nodeType===3}function mO(t){return!!t&&t.nodeType===11}function Yk(t){return t?Ey(t).split(/\s+/):[]}function YA(t){var e=q==null?void 0:q.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function H0(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return Yk(e)}function gO(t){return St(t)?null:Ey(t).split(/(\s+)/).filter(e=>xd(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function My(t){var e="";return C1(t)&&!bO(t)&&t.childNodes&&t.childNodes.length&&At(t.childNodes,function(n){var i;pO(n)&&n.textContent&&(e+=(i=gO(n.textContent))!==null&&i!==void 0?i:"")}),Ey(e)}function vO(t){return ve(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var _1=["a","button","form","input","select","textarea","label"];function yO(t){var e=t.parentNode;return!(!e||!Py(e))&&e}function hU(t,e,n,i,r){var s,o,a;if(n===void 0&&(n=void 0),!q||!t||Ya(t,"html")||!Py(t)||(s=n)!=null&&s.url_allowlist&&!YA(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&YA(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(v=>e.type===v))return!1}for(var c=!1,u=[t],d=!0,f=t;f.parentNode&&!Ya(f,"body");)if(mO(f.parentNode))u.push(f.parentNode.host),f=f.parentNode.host;else{if(!(d=yO(f)))break;if(i||_1.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var p=q.getComputedStyle(d);p&&p.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(d),f=d}if(!function(v,y){var x=y==null?void 0:y.element_allowlist;if(ve(x))return!0;var w,S=function(E){if(x.some(C=>E.tagName.toLowerCase()===C))return{v:!0}};for(var _ of v)if(w=S(_))return w.v;return!1}(u,n)||!function(v,y){var x=y==null?void 0:y.css_selector_allowlist;if(ve(x))return!0;var w,S=function(E){if(x.some(C=>E.matches(C)))return{v:!0}};for(var _ of v)if(w=S(_))return w.v;return!1}(u,n))return!1;var g=q.getComputedStyle(t);if(g&&g.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var m=t.tagName.toLowerCase();switch(m){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return c?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(_1.indexOf(m)>-1||t.getAttribute("contenteditable")==="true")}}function C1(t){for(var e=t;e.parentNode&&!Ya(e,"body");e=e.parentNode){var n=H0(e);if(at(n,"ph-sensitive")||at(n,"ph-no-capture"))return!1}if(at(H0(t),"ph-include"))return!0;var i=t.type||"";if(ln(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(ln(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function bO(t){return!!(Ya(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||Ya(t,"select")||Ya(t,"textarea")||t.getAttribute("contenteditable")==="true")}var xO="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",pU=new RegExp("^(?:"+xO+")$"),mU=new RegExp(xO),wO="\\d{3}-?\\d{2}-?\\d{4}",gU=new RegExp("^("+wO+")$"),vU=new RegExp("("+wO+")");function xd(t,e){return e===void 0&&(e=!0),!(St(t)||ln(t)&&(t=Ey(t),(e?pU:mU).test((t||"").replace(/[- ]/g,""))||(e?gU:vU).test(t)))}function SO(t){var e=My(t);return xd(e=(e+" "+kO(t)).trim())?e:""}function kO(t){var e="";return t&&t.childNodes&&t.childNodes.length&&At(t.childNodes,function(n){var i;if(n&&((i=n.tagName)==null?void 0:i.toLowerCase())==="span")try{var r=My(n);e=(e+" "+r).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+kO(n)).trim())}catch(s){Ae.error("[AutoCapture]",s)}}),e}function yU(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+="."+a.replace(/"/g,"");var l=Se({},i.text?{text:i.text}:{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{},i.attr_id?{attr_id:i.attr_id}:{},i.attributes),c={};return t0(l).sort((u,d)=>{var[f]=u,[p]=d;return f.localeCompare(p)}).forEach(u=>{var[d,f]=u;return c[XA(d.toString())]=XA(f.toString())}),o+=":",o+=t0(c).map(u=>{var[d,f]=u;return d+'="'+f+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)==null?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)==null?void 0:r.slice(0,2048),attr_class:bU(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return t0(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function XA(t){return t.replace(/"|\\"/g,'\\"')}function bU(t){var e=t.attr__class;return e?Kt(e)?e:Yk(e):void 0}let _O=class{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}};var xU=["localhost","127.0.0.1"],wd=t=>{var e=Ce==null?void 0:Ce.createElement("a");return ve(e)?null:(e.href=t,e)},wU=function(t,e){var n,i;e===void 0&&(e="&");var r=[];return At(t,function(s,o){ve(s)||ve(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),i=encodeURIComponent(o),r[r.length]=i+"="+n)}),r.join(e)},W0=function(t,e){for(var n,i=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!Kt(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Ae.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Xk=function(t,e,n){if(!t||!e||!e.length)return t;for(var i=t.split("#"),r=i[0]||"",s=i[1],o=r.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var f=c[d].split("=");Kt(f)&&(e.includes(f[0])?u.push(f[0]+"="+n):u.push(c[d]))}var p=l;return a!=null&&(p+="?"+u.join("&")),s!=null&&(p+="#"+s),p},G0=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},JA=jn("[AutoCapture]");function tx(t,e){return e.length>t?e.slice(0,t)+"...":e}function SU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!Py(e));return e}function kU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};_1.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=tx(1024,SO(t)):s.$el_text=tx(1024,My(t)));var o=H0(t);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),At(t.attributes,function(u){var d;if((!bO(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(i==null||!i.includes(u.name))&&!e&&xd(u.value)&&(d=u.name,!ln(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=u.value;u.name==="class"&&(f=Yk(f).join(" ")),s["attr__"+u.name]=tx(1024,f)}});for(var a=1,l=1,c=t;c=SU(c);)a++,c.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function _U(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!Ya(u,"body");)mO(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,f=[],p={},g=!1,m=!1;if(At(c,S=>{var _=C1(S);S.tagName.toLowerCase()==="a"&&(g=S.getAttribute("href"),g=_&&g&&xd(g)&&g),at(H0(S),"ph-no-capture")&&(m=!0),f.push(kU(S,s,o,a));var E=function(C){if(!C1(C))return{};var N={};return At(C.attributes,function(M){if(M.name&&M.name.indexOf("data-ph-capture-attribute")===0){var I=M.name.replace("data-ph-capture-attribute-",""),O=M.value;I&&O&&xd(O)&&(N[I]=O)}}),N}(S);dn(p,E)}),m)return{props:{},explicitNoCapture:m};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=SO(t):f[0].$el_text=My(t)),g){var v,y;f[0].attr__href=g;var x=(v=wd(g))==null?void 0:v.host,w=q==null||(y=q.location)==null?void 0:y.host;x&&w&&x!==w&&(d=g)}return{props:dn({$event_type:r.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:yU(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(i=f[0])==null?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},p)}}let CU=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new _O,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,i=an(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)==null?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)==null?void 0:n.map(r=>new RegExp(r)),i}$(){if(this.isBrowserSupported()){if(q&&Ce){var e=i=>{i=i||(q==null?void 0:q.event);try{this.k(i)}catch(r){JA.error("Failed to capture event",r)}};if(Qt(Ce,"submit",e,{capture:!0}),Qt(Ce,"change",e,{capture:!0}),Qt(Ce,"click",e,{capture:!0}),this.S.capture_copied_text){var n=i=>{i=i||(q==null?void 0:q.event),this.k(i,ex)};Qt(Ce,"copy",n,{capture:!0}),Qt(Ce,"cut",n,{capture:!0})}}}else JA.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[DA]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,i=[];return(n=this.m)==null||n.forEach(r=>{var s=Ce==null?void 0:Ce.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)==null?void 0:e.props[DA],r=this.o;if(El(r)&&!Ys(i)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var i,r=vO(e);pO(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===ex;if(r&&hU(r,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=_U(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===ex){var c,u=gO(q==null||(c=q.getSelection())==null?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return zr(Ce==null?void 0:Ce.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return li(t)&&isFinite(t)&&Math.floor(t)===t});var ZA="0123456789abcdef";let EU=class E1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new E1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+ZA.charAt(this.bytes[n]>>>4)+ZA.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new E1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},AU=class{constructor(){this.P=0,this.R=0,this.T=new NU}generate(){var e=this.generateOrAbort();if(ve(e)){this.P=0;var n=this.generateOrAbort();if(ve(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return EU.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var QA,CO=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};q&&!ve(q.crypto)&&crypto.getRandomValues&&(CO=t=>crypto.getRandomValues(t));let NU=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(CO(this.C),this.F=0),this.C[this.F++]}};var La=()=>PU().toString(),PU=()=>(QA||(QA=new AU)).generate(),mf="",MU=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function RU(t,e){if(e){var n=function(r,s){if(s===void 0&&(s=Ce),mf)return mf;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+La();!mf&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",mf=c)}return mf}(t);if(!n){var i=(r=>{var s=r.match(MU);return s?s[0]:""})(t);i!==n&&Ae.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var no={O:()=>!!Ce,A:function(t){Ae.error("cookieStore error: "+t)},D:function(t){if(Ce){try{for(var e=t+"=",n=Ce.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(no.D(t))||{}}catch{}return e},j:function(t,e,n,i,r){if(Ce)try{var s="",o="",a=RU(Ce.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Ae.warn("cookieStore warning: large cookie, len="+c.length),Ce.cookie=c,c}catch{return}},N:function(t,e){try{no.j(t,"",-1,e)}catch{return}}},nx=null,Sn={O:function(){if(!El(nx))return nx;var t=!0;if(ve(q))t=!1;else try{var e="__mplssupport__";Sn.j(e,"xyz"),Sn.D(e)!=='"xyz"'&&(t=!1),Sn.N(e)}catch{t=!1}return t||Ae.error("localStorage unsupported; falling back to cookie store"),nx=t,t},A:function(t){Ae.error("localStorage error: "+t)},D:function(t){try{return q==null?void 0:q.localStorage.getItem(t)}catch(e){Sn.A(e)}return null},L:function(t){try{return JSON.parse(Sn.D(t))||{}}catch{}return null},j:function(t,e){try{q==null||q.localStorage.setItem(t,JSON.stringify(e))}catch(n){Sn.A(n)}},N:function(t){try{q==null||q.localStorage.removeItem(t)}catch(e){Sn.A(e)}}},TU=["distinct_id",B0,Wf,V0,U0],Im=Se({},Sn,{L:function(t){try{var e={};try{e=no.L(t)||{}}catch{}var n=dn(e,JSON.parse(Sn.D(t)||"{}"));return Sn.j(t,n),n}catch{}return null},j:function(t,e,n,i,r,s){try{Sn.j(t,e,void 0,void 0,s);var o={};TU.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&no.j(t,o,n,i,r,s)}catch(a){Sn.A(a)}},N:function(t,e){try{q==null||q.localStorage.removeItem(t),no.N(t,e)}catch(n){Sn.A(n)}}}),jm={},OU={O:function(){return!0},A:function(t){Ae.error("memoryStorage error: "+t)},D:function(t){return jm[t]||null},L:function(t){return jm[t]||null},j:function(t,e){jm[t]=e},N:function(t){delete jm[t]}},zl=null,Un={O:function(){if(!El(zl))return zl;if(zl=!0,ve(q))zl=!1;else try{var t="__support__";Un.j(t,"xyz"),Un.D(t)!=='"xyz"'&&(zl=!1),Un.N(t)}catch{zl=!1}return zl},A:function(t){Ae.error("sessionStorage error: ",t)},D:function(t){try{return q==null?void 0:q.sessionStorage.getItem(t)}catch(e){Un.A(e)}return null},L:function(t){try{return JSON.parse(Un.D(t))||null}catch{}return null},j:function(t,e){try{q==null||q.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Un.A(n)}},N:function(t){try{q==null||q.sessionStorage.removeItem(t)}catch(e){Un.A(e)}}},tu=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let IU=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?tu.DENIED:this.q}isOptedOut(){return this.consent===tu.DENIED||this.consent===tu.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?tu.GRANTED:e==="0"?tu.DENIED:tu.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?Sn:no;var n=e==="localStorage"?no:Sn;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!uO([cr==null?void 0:cr.doNotTrack,cr==null?void 0:cr.msDoNotTrack,Ke.doNotTrack],e=>at([!0,1,"1","yes"],e))}};var Lm=jn("[Dead Clicks]"),jU=()=>!0,LU=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(fO)),i=t.instance.config.capture_dead_clicks;return Ys(i)?i:n};let EO=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[fO]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,i;(n=Ke.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(i=Ke.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",r=>{r?Lm.error("failed to load script",r):e()})}V(){var e;if(Ce){if(!this.G&&(e=Ke.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=an(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=Ke.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(Ce),Lm.info("starting...")}}else Lm.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,Lm.info("stopping..."))}};function ur(t,e,n,i,r){return e>n&&(Ae.warn("min cannot be greater than max."),e=n),li(t)?t>n?(i&&Ae.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&Ae.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&Ae.warn(i+" must be a number. using max or fallback. max: "+n+", fallback: "+r),ur(r||n,e,n,i))}let AO=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var i=this.X(n)+this.Z;i>=this.tt?delete this.K[n]:this.it(n,i)})},this.X=n=>this.K[String(n)],this.it=(n,i)=>{this.K[String(n)]=i},this.consumeRateLimit=n=>{var i,r=(i=this.X(n))!==null&&i!==void 0?i:this.tt;if((r=Math.max(r-1,0))===0)return!0;this.it(n,r);var s,o=r===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=ur(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=ur(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=ur(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var Dm=jn("[ExceptionAutocapture]");let DU=class{constructor(e){var n,i,r;this.nt=()=>{var s;if(q&&this.isEnabled&&(s=Ke.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=Ke.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=Ke.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=Ke.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(c){Dm.error("failed to start",c),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[$A]),this.S=this.vt(),this.ct=new AO({refillRate:(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&i!==void 0?i:1,bucketSize:(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&r!==void 0?r:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return an(e)?n=Se({},n,e):(ve(e)?this.dt:e)&&(n=Se({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Dm.info("enabled"),this.J(this.nt))}J(e){var n,i;(n=Ke.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(i=Ke.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"exception-autocapture",r=>{if(r)return Dm.error("failed to load script",r);e()})}ht(){var e,n,i;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(i=this.ut)==null||i.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[$A]:this.dt}),this.startIfEnabled()}captureException(e){var n,i=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=i+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var r=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(r)?Dm.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function NO(t){return!ve(Event)&&PO(t,Event)}function PO(t,e){try{return t instanceof e}catch{return!1}}function MO(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return PO(t,Error)}}function i0(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function ix(t){return i0(t,"DOMError")}var eN=/\(error: (.*)\)/,tN=50,Nu="?";function rx(t,e,n,i){var r={platform:"web:javascript",filename:t,function:e==="<anonymous>"?Nu:e,in_app:!0};return ve(n)||(r.lineno=n),ve(i)||(r.colno=i),r}var $U=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,FU=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,BU=/\((\S*)(?::(\d+))(?::(\d+))\)/,zU=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,UU=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,VU=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return function(r,s){s===void 0&&(s=0);for(var o=[],a=r.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=eN.test(c)?c.replace(eN,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of i){var f=d(u);if(f){o.push(f);break}}if(o.length>=tN)break}}}return function(p){if(!p.length)return[];var g=Array.from(p);return g.reverse(),g.slice(0,tN).map(m=>Se({},m,{filename:m.filename||HU(g).filename,function:m.function||Nu}))}(o)}}([30,t=>{var e=$U.exec(t);if(e){var[,n,i,r]=e;return rx(n,Nu,+i,+r)}var s=FU.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=BU.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=iN(s[1]||Nu,s[2]);return rx(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=zU.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=UU.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var i=e[3],r=e[1]||Nu;return[r,i]=iN(r,i),rx(i,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function HU(t){return t[t.length-1]||{}}var $m,nN,sx,iN=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,i=t.indexOf("safari-web-extension")!==-1;return n||i?[t.indexOf("@")!==-1?t.split("@")[0]:Nu,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},WU=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function Jk(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",i=function(o){return o&&GU.test(o.message)?1:0}(t);try{var r=VU,s=function(o,a){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var d=Object.keys(u);return sx&&d.length===nN||(nN=d.length,sx=d.reduce((f,p)=>{$m||($m={});var g=$m[p];if(g)f[g[0]]=g[1];else for(var m=c(p),v=m.length-1;v>=0;v--){var y=m[v],x=y==null?void 0:y.filename,w=u[p];if(x&&w){f[x]=w,$m[p]=[x,w];break}}return f},{})),sx}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(r(n,i),r);return s.slice(0,s.length-e)}catch{}return[]}var GU=/Minified React error #\d+;/i;function KU(t,e){var n,i,r=Jk(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)!==null&&i!==void 0&&i;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:r,type:"raw"},mechanism:{handled:s,synthetic:o}}}function RO(t,e){var n=KU(t,e);return t.cause&&MO(t.cause)&&t.cause!==t?[n,...RO(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function ox(t,e){return{$exception_list:RO(t,e),$exception_level:"error"}}function ax(t,e){var n,i,r,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(r=e==null?void 0:e.defaultExceptionType)!==null&&r!==void 0?r:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=Jk(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function qU(t){return ln(t)&&!f1(t)&&iU.indexOf(t)>=0}function YU(t,e){var n,i,r=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:NO(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(u,d){d===void 0&&(d=40);var f=Object.keys(u);if(f.sort(),!f.length)return"[object has no keys]";for(var p=f.length;p>0;p--){var g=f.slice(0,p).join(", ");if(!(g.length>d))return p===f.length||g.length<=d?g:g.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:r,synthetic:s}};if(e!=null&&e.syntheticException){var c=Jk(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:qU(t.level)?t.level:"error"}}function XU(t,e){var{error:n,event:i}=t,r={$exception_list:[]},s=n||i;if(ix(s)||function(f){return i0(f,"DOMException")}(s)){var o=s;if(function(f){return"stack"in f}(s))r=ox(s,e);else{var a=o.name||(ix(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;r=ax(l,Se({},e,{overrideExceptionType:ix(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(r.$exception_DOMException_code=""+o.code),r}if(function(f){return i0(f,"ErrorEvent")}(s)&&s.error)return ox(s.error,e);if(MO(s))return ox(s,e);if(function(f){return i0(f,"Object")}(s)||NO(s))return YU(s,e);if(ve(n)&&ln(i)){var c="Error",u=i,d=i.match(WU);return d&&(c=d[1],u=d[2]),ax(u,Se({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return ax(s,e)}function rN(t,e,n){try{if(!(e in t))return()=>{};var i=t[e],r=n(i);return zr(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=r,()=>{t[e]=i}}catch{return()=>{}}}let JU=class{constructor(e){var n;this._instance=e,this.ft=(q==null||(n=q.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Ae.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Ae.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(q&&q.history){var i=this;(e=q.history.pushState)!=null&&e.__posthog_wrapped__||rN(q.history,"pushState",r=>function(s,o,a){r.call(this,s,o,a),i._t("pushState")}),(n=q.history.replaceState)!=null&&n.__posthog_wrapped__||rN(q.history,"replaceState",r=>function(s,o,a){r.call(this,s,o,a),i._t("replaceState")}),this.bt()}}_t(e){try{var n,i=q==null||(n=q.location)==null?void 0:n.pathname;if(!i)return;i!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=i}catch(r){Ae.error("Error capturing "+e+" pageview",r)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};Qt(q,"popstate",e),this.gt=()=>{q&&q.removeEventListener("popstate",e)}}}};function K0(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(an(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))==null?void 0:e.length)||0}function A1(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[A1({size:K0(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),A1({size:K0(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var So=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(So||{}),rs=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(rs||{}),N1="[SessionRecording]",P1="redacted",Fm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},ZU=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],QU=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],eV=["/s/","/e/","/i/"];function sN(t,e,n,i){if(St(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return ln(r)&&(r=parseInt(r)),r>n?N1+" "+i+" body too large to record ("+r+" bytes)":t}function oN(t,e){if(St(t))return t;var n=t;return xd(n,!1)||(n=N1+" "+e+" body "+P1),At(QU,i=>{var r,s;(r=n)!=null&&r.length&&((s=n)==null?void 0:s.indexOf(i))!==-1&&(n=N1+" "+e+" body "+P1+" as might contain: "+i)}),n}var tV=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:Fm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...Fm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...Fm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),f=>(f!=null&&f.requestBody&&(f.requestBody=sN(f.requestBody,f.requestHeaders,r,"Request")),f!=null&&f.responseBody&&(f.responseBody=sN(f.responseBody,f.responseHeaders,r,"Response")),f)),u=f=>{return c(((m,v)=>{var y,x=wd(m.name),w=v.indexOf("http")===0?(y=wd(v))==null?void 0:y.pathname:v;w==="/"&&(w="");var S=x==null?void 0:x.pathname.replace(w||"","");if(!(x&&S&&eV.some(_=>S.indexOf(_)===0)))return m})((g=(p=f).requestHeaders,St(g)||At(Object.keys(g??{}),m=>{ZU.includes(m.toLowerCase())&&(g[m]=P1)}),p),t.api_host));var p,g},d=zr(t.session_recording.maskNetworkRequestFn);return d&&zr(t.session_recording.maskCapturedNetworkRequestFn)&&Ae.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=f=>{var p=t.session_recording.maskNetworkRequestFn({url:f.name});return Se({},f,{name:p==null?void 0:p.url})}),s.maskRequestFn=zr(t.session_recording.maskCapturedNetworkRequestFn)?f=>{var p,g=u(f);return g&&(p=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(g))!==null&&p!==void 0?p:void 0}:f=>function(p){if(!ve(p))return p.requestBody=oN(p.requestBody,"Request"),p.responseBody=oN(p.responseBody,"Response"),p}(u(f)),Se({},Fm,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let nV=class{constructor(e,n){var i,r;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,c,u,d,f,p;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=s.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=s.texts)==null?void 0:d.length)!==null&&u!==void 0?u:0)+((f=(p=s.adds)==null?void 0:p.length)!==null&&f!==void 0?f:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var[u]=this.$t(c.id);return!this.ct.consumeRateLimit(u)&&c}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new AO({bucketSize:(i=this.rt.bucketSize)!==null&&i!==void 0?i:100,refillRate:(r=this.rt.refillRate)!==null&&r!==void 0?r:10,refillInterval:1e3,et:this.wt})}};var Ur=Uint8Array,Wi=Uint16Array,Sd=Uint32Array,Zk=new Ur([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qk=new Ur([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),aN=new Ur([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),TO=function(t,e){for(var n=new Wi(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new Sd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},OO=TO(Zk,2),iV=OO[0],M1=OO[1];iV[28]=258,M1[258]=28;for(var lN=TO(Qk,0)[1],IO=new Wi(32768),Bt=0;Bt<32768;++Bt){var Ul=(43690&Bt)>>>1|(21845&Bt)<<1;Ul=(61680&(Ul=(52428&Ul)>>>2|(13107&Ul)<<2))>>>4|(3855&Ul)<<4,IO[Bt]=((65280&Ul)>>>8|(255&Ul)<<8)>>>1}var ph=function(t,e,n){for(var i=t.length,r=0,s=new Wi(e);r<i;++r)++s[t[r]-1];var o,a=new Wi(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new Wi(i),r=0;r<i;++r)o[r]=IO[a[t[r]-1]++]>>>15-t[r];return o},Ec=new Ur(288);for(Bt=0;Bt<144;++Bt)Ec[Bt]=8;for(Bt=144;Bt<256;++Bt)Ec[Bt]=9;for(Bt=256;Bt<280;++Bt)Ec[Bt]=7;for(Bt=280;Bt<288;++Bt)Ec[Bt]=8;var q0=new Ur(32);for(Bt=0;Bt<32;++Bt)q0[Bt]=5;var rV=ph(Ec,9),sV=ph(q0,5),jO=function(t){return(t/8>>0)+(7&t&&1)},LO=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Wi?Wi:t instanceof Sd?Sd:Ur)(n-e);return i.set(t.subarray(e,n)),i},yo=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},gf=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},lx=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Ur(0),0];if(r==1){var o=new Ur(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,E){return _.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var p=new Wi(f+1),g=R1(n[u-1],p,0);if(g>e){i=0;var m=0,v=g-e,y=1<<v;for(s.sort(function(_,E){return p[E.s]-p[_.s]||_.f-E.f});i<r;++i){var x=s[i].s;if(!(p[x]>e))break;m+=y-(1<<g-p[x]),p[x]=e}for(m>>>=v;m>0;){var w=s[i].s;p[w]<e?m-=1<<e-p[w]++-1:++i}for(;i>=0&&m;--i){var S=s[i].s;p[S]==e&&(--p[S],++m)}g=e}return[new Ur(p),g]},R1=function(t,e,n){return t.s==-1?Math.max(R1(t.l,e,n+1),R1(t.r,e,n+1)):e[t.s]=n},cN=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Wi(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},vf=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},T1=function(t,e,n){var i=n.length,r=jO(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},uN=function(t,e,n,i,r,s,o,a,l,c,u){yo(e,u++,n),++r[256];for(var d=lx(r,15),f=d[0],p=d[1],g=lx(s,15),m=g[0],v=g[1],y=cN(f),x=y[0],w=y[1],S=cN(m),_=S[0],E=S[1],C=new Wi(19),N=0;N<x.length;++N)C[31&x[N]]++;for(N=0;N<_.length;++N)C[31&_[N]]++;for(var M=lx(C,7),I=M[0],O=M[1],T=19;T>4&&!I[aN[T-1]];--T);var H,D,K,X,te=c+5<<3,U=vf(r,Ec)+vf(s,q0)+o,B=vf(r,f)+vf(s,m)+o+14+3*T+vf(C,I)+(2*C[16]+3*C[17]+7*C[18]);if(te<=U&&te<=B)return T1(e,u,t.subarray(l,l+c));if(yo(e,u,1+(B<U)),u+=2,B<U){H=ph(f,p),D=f,K=ph(m,v),X=m;var ie=ph(I,O);for(yo(e,u,w-257),yo(e,u+5,E-1),yo(e,u+10,T-4),u+=14,N=0;N<T;++N)yo(e,u+3*N,I[aN[N]]);u+=3*T;for(var be=[x,_],J=0;J<2;++J){var le=be[J];for(N=0;N<le.length;++N){var F=31&le[N];yo(e,u,ie[F]),u+=I[F],F>15&&(yo(e,u,le[N]>>>5&127),u+=le[N]>>>12)}}}else H=rV,D=Ec,K=sV,X=q0;for(N=0;N<a;++N)if(i[N]>255){F=i[N]>>>18&31,gf(e,u,H[F+257]),u+=D[F+257],F>7&&(yo(e,u,i[N]>>>23&31),u+=Zk[F]);var $=31&i[N];gf(e,u,K[$]),u+=X[$],$>3&&(gf(e,u,i[N]>>>5&8191),u+=Qk[$])}else gf(e,u,H[i[N]]),u+=D[i[N]];return gf(e,u,H[256]),u+D[256]},oV=new Sd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),aV=function(){for(var t=new Sd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),lV=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=aV[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},cV=function(t,e,n,i,r){return function(s,o,a,l,c,u){var d=s.length,f=new Ur(l+d+5*(1+Math.floor(d/7e3))+c),p=f.subarray(l,f.length-c),g=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var v=m+65535;v<d?g=T1(p,g,s.subarray(m,v)):(p[m]=u,g=T1(p,g,s.subarray(m,d)))}else{for(var y=oV[o-1],x=y>>>13,w=8191&y,S=(1<<a)-1,_=new Wi(32768),E=new Wi(S+1),C=Math.ceil(a/3),N=2*C,M=function(Ue){return(s[Ue]^s[Ue+1]<<C^s[Ue+2]<<N)&S},I=new Sd(25e3),O=new Wi(288),T=new Wi(32),H=0,D=0,K=(m=0,0),X=0,te=0;m<d;++m){var U=M(m),B=32767&m,ie=E[U];if(_[B]=ie,E[U]=B,X<=m){var be=d-m;if((H>7e3||K>24576)&&be>423){g=uN(s,p,0,I,O,T,D,K,te,m-te,g),K=H=D=0,te=m;for(var J=0;J<286;++J)O[J]=0;for(J=0;J<30;++J)T[J]=0}var le=2,F=0,$=w,V=B-ie&32767;if(be>2&&U==M(m-V))for(var k=Math.min(x,be)-1,P=Math.min(32767,m),j=Math.min(258,be);V<=P&&--$&&B!=ie;){if(s[m+le]==s[m+le-V]){for(var R=0;R<j&&s[m+R]==s[m+R-V];++R);if(R>le){if(le=R,F=V,R>k)break;var Y=Math.min(V,R-2),G=0;for(J=0;J<Y;++J){var ne=m-V+J+32768&32767,Z=ne-_[ne]+32768&32767;Z>G&&(G=Z,ie=ne)}}}V+=(B=ie)-(ie=_[B])+32768&32767}if(F){I[K++]=268435456|M1[le]<<18|lN[F];var Pe=31&M1[le],Be=31&lN[F];D+=Zk[Pe]+Qk[Be],++O[257+Pe],++T[Be],X=m+le,++H}else I[K++]=s[m],++O[s[m]]}}g=uN(s,p,u,I,O,T,D,K,te,m-te,g)}return LO(f,0,l+jO(g)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!0)},O1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},uV=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&O1(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},dV=function(t){return 10+(t.filename&&t.filename.length+1||0)};function DO(t,e){e===void 0&&(e={});var n=lV(),i=t.length;n.p(t);var r=cV(t,e,dV(e),8),s=r.length;return uV(r,e),O1(r,s-8,n.d()),O1(r,s-4,i),r}function $O(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Ur(t.length+(t.length>>>1)),r=0,s=function(c){i[r++]=c},o=0;o<n;++o){if(r+5>i.length){var a=new Ur(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return LO(i,0,r)}function fV(t,e){return function(n){for(var i=0,r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;return Math.abs(i)}(t)%100<ur(100*e,0,100)}var ll="disabled",e_="sampled",Y0="active",Ac="buffering",t_="paused",n_="trigger",io=n_+"_activated",di=n_+"_pending",uo=n_+"_"+ll;function dN(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class FO{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(i=>i.triggerStatus(e));return n.includes(io)?io:n.includes(di)?di:uo}stop(){this.xt.forEach(e=>e.stop())}}class BO{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var i of this.xt)n.add(i.triggerStatus(e));switch(n.delete(uo),n.size){case 0:return uo;case 1:return Array.from(n)[0];default:return di}}stop(){this.xt.forEach(e=>e.stop())}}class hV{triggerStatus(){return di}stop(){}}class pV{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,i;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((i=e.sessionRecording)==null?void 0:i.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?uo:((n=this._instance)==null?void 0:n.get_property(g1))===e?io:di}triggerStatus(e){var n=this.Pt(e),i=n===io?io:n===di?di:uo;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,n,i){if(q!==void 0&&q.location.href){var r=q.location.href,s=this.urlBlocked,o=dN(r,this.It);s&&o||(o&&!s?e():!o&&s&&n(),dN(r,this.Et)&&i("url"))}}stop(){}}class mV{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=di;return St(this.linkedFlag)&&(e=uo),this.linkedFlagSeen&&(e=io),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var i;if(this.linkedFlag=((i=e.sessionRecording)==null?void 0:i.linkedFlag)||null,!St(this.linkedFlag)&&!this.linkedFlagSeen){var r=ln(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=ln(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(an(a)&&r in a){var c=a[r];l=Ys(c)?c===!0:s?c===s:!!c}this.linkedFlagSeen=l,l&&n(r,s)})}}stop(){this.Rt()}}let gV=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?uo:((n=this._instance)==null?void 0:n.get_property(v1))===e?io:di}triggerStatus(e){var n=this.Mt(e),i=n===io?io:n===di?di:uo;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}};function vV(t){return t.isRecordingEnabled?Ac:ll}function yV(t){if(!t.receivedFlags)return Ac;if(!t.isRecordingEnabled)return ll;if(t.urlTriggerMatching.urlBlocked)return t_;var e=t.isSampled===!0,n=new FO([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?e_:n===io?Y0:n===di?Ac:t.isSampled===!1?ll:Y0}function bV(t){if(!t.receivedFlags)return Ac;if(!t.isRecordingEnabled)return ll;if(t.urlTriggerMatching.urlBlocked)return t_;var e=new BO([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==uo,i=Ys(t.isSampled);return n&&e===di?Ac:n&&e===uo||i&&!t.isSampled?ll:t.isSampled===!0?e_:Y0}var Kf="[SessionRecording]",ni=jn(Kf);function Bm(){var t;return Ke==null||(t=Ke.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var xV=3e5,wV=[rs.MouseMove,rs.MouseInteraction,rs.Scroll,rs.ViewportResize,rs.Input,rs.TouchMove,rs.MediaInteraction,rs.Drag],fN=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function Vl(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];i+=String.fromCharCode(s)}return i}(DO($O(JSON.stringify(t))))}function hN(t){return t.type===So.Custom&&t.data.tag==="sessionIdle"}class SV{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(Kf+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===di?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:xV}get jt(){var e=this._instance.get_property(Wf);return Ys(e)?e:null}get Nt(){var e,n,i=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.At.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get zt(){var e=!!this._instance.get_property(m1),n=!this._instance.config.disable_session_recording;return q&&e&&n}get Ut(){var e=!!this._instance.get_property(zA),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,i,r,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(HA),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var f=parseFloat(d);d=isNaN(f)?.4:f}return{enabled:c,fps:ur(u,0,12,"canvas recording fps",4),quality:ur(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,i=this._instance.get_property(UA),r={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=an(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(Ys(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,i,r,s,o,a=this._instance.get_property(VA),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(i=this._instance.config.session_recording)==null?void 0:i.blockSelector},c=(r=l==null?void 0:l.maskAllInputs)!==null&&r!==void 0?r:a==null?void 0:a.maskAllInputs,u=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return ve(c)&&ve(u)&&ve(d)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:d}}get Wt(){var e=this._instance.get_property(WA);return li(e)?e:null}get Gt(){var e=this._instance.get_property(GA);return li(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):Ac}constructor(e){if(this.Vt=vV,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new hV,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(Ce!=null&&Ce.visibilityState){var r="window "+Ce.visibilityState;this.ui(r,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw ni.error("started without valid sessionManager"),new Error(Kf+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Kf+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new mV(this._instance),this.Kt=new pV(this._instance),this.Yt=new gV(this._instance);var{sessionId:n,windowId:i}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=i,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&ni.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),Qt(q,"beforeunload",this.oi),Qt(q,"offline",this.li),Qt(q,"online",this.hi),Qt(q,"visibilitychange",this.di),this.mi(),this.bi(),St(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var i=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!i)return;this.ui("$pageview",{href:i})}}catch(r){ni.error("Could not add $pageview to rrweb session",r)}})),this.ei||(this.ei=this.At.onSessionId((n,i,r)=>{var s,o;r&&(this.ui("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(v1),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(g1))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,q==null||q.removeEventListener("beforeunload",this.oi),q==null||q.removeEventListener("offline",this.li),q==null||q.removeEventListener("online",this.hi),q==null||q.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(i=this.ei)==null||i.call(this),this.ei=void 0,(r=this.si)==null||r.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),ni.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(Wf)}$i(e){var n,i=this.Ct!==e,r=this.Wt;if(li(r)){var s=this.jt,o=i||!Ys(s),a=o?fV(e,r):s;o&&(a?this.ki(e_):ni.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:r,isSampled:a})),(n=this._instance.persistence)==null||n.register({[Wf]:a})}else this.Si()}onRemoteConfig(e){var n,i,r,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((i=e.sessionRecording)==null?void 0:i.triggerMatchType)==="any"?(this.Vt=yV,this.Lt=new FO([this.Yt,this.Kt])):(this.Vt=bV,this.Lt=new BO([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(r=e.sessionRecording)==null?void 0:r.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){li(this.Wt)&&St(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,i=this._instance.persistence,r=()=>{var s,o,a,l,c,u,d,f,p,g=(s=e.sessionRecording)==null?void 0:s.sampleRate,m=St(g)?null:parseFloat(g);St(m)&&this.Si();var v=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;i.register({[m1]:!!e.sessionRecording,[zA]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[UA]:Se({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[VA]:(c=e.sessionRecording)==null?void 0:c.masking,[HA]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(f=e.sessionRecording)==null?void 0:f.canvasQuality},[WA]:m,[GA]:ve(v)?null:v,[KA]:(p=e.sessionRecording)==null?void 0:p.scriptConfig})};r(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(r)}}log(e,n){var i;n===void 0&&(n="log"),(i=this._instance.sessionRecording)==null||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!ve(Object.assign)&&!ve(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),Bm()?this.Ei():(n=Ke.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,i=>{if(i)return ni.error("could not load recorder",i);this.Ei()}),ni.info("starting"),this.status===Y0&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(KA))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&wV.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var i=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var r=this.Zt==="unknown";this.Zt=!1,r||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):ni.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi(fN(()=>Bm().addCustomEvent(e,n)))}Ci(){return this.Mi(fN(()=>Bm().takeFullSnapshot()))}Ei(){var e,n,i,r,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=Se({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(i=this.Ht.maskTextSelector)!==null&&i!==void 0?i:void 0,s.blockSelector=(r=this.Ht.blockSelector)!==null&&r!==void 0?r:void 0);var c=Bm();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new nV(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,f)=>{var p="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";ni.info(p,{node:f}),this.log(Kf+" "+p,"warn")}});var u=this.Oi();this.ci=c(Se({emit:d=>{this.onRRwebEmit(d)},plugins:u},s)),this.ti=Date.now(),this.Zt=Ys(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:u.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else ni.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,i=[],r=(e=Ke.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;r&&this.Ut&&i.push(r());var s=(n=Ke.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&zr(s)&&(!xU.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(s(tV(this._instance.config,this.Bt))):ni.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var n;if(this.Ai(),e&&an(e)){if(e.type===So.Meta){var i=this.yi(e.data.href);if(this.Di=i,!i)return;e.data.href=i}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),f=>this.zi(f)),!this.Kt.urlBlocked||(r=e).type===So.Custom&&r.data.tag==="recording paused"){var r;e.type===So.FullSnapshot&&this.Ti(),e.type===So.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===di&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(f){var p=f;if(p&&an(p)&&p.type===6&&an(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var g=[],m=0;m<p.data.payload.payload.length;m++)p.data.payload.payload[m]&&p.data.payload.payload[m].length>2e3?g.push(p.data.payload.payload[m].slice(0,2e3)+"...[truncated]"):g.push(p.data.payload.payload[m]);return p.data.payload.payload=g,f}return f}(s);if(this.Ri(o),this.Zt!==!0||hN(o)){if(hN(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var u=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(f){if(K0(f)<1024)return f;try{if(f.type===So.FullSnapshot)return Se({},f,{data:Vl(f.data),cv:"2024-10"});if(f.type===So.IncrementalSnapshot&&f.data.source===rs.Mutation)return Se({},f,{cv:"2024-10",data:Se({},f.data,{texts:Vl(f.data.texts),attributes:Vl(f.data.attributes),removes:Vl(f.data.removes),adds:Vl(f.data.adds)})});if(f.type===So.IncrementalSnapshot&&f.data.source===rs.StyleSheetRule)return Se({},f,{cv:"2024-10",data:Se({},f.data,{adds:f.data.adds?Vl(f.data.adds):void 0,removes:f.data.removes?Vl(f.data.removes):void 0})})}catch(p){ni.error("could not compress event - will use uncompressed event",p)}return f}(o):o,d={$snapshot_bytes:K0(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==ll?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&q){var e=this.yi(q.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))==null?void 0:i.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,i=li(n)&&n>=0,r=li(e)&&i&&n<e;return this.status===Ac||this.status===t_||this.status===ll||r?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&A1(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:Eo.LIB_VERSION})}),this.pi())}Ui(e){var n,i=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+i>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===di&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?g1:v1]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),ni.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),ni.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&St(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){ni.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[Wf]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),ni.info(e.replace("_"," "),n),at(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var cx=jn("[SegmentIntegration]");function kV(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var c=()=>l.anonymousId()||La();i.config.get_device_id=c,l.id()&&(i.register({distinct_id:l.id(),$device_id:c()}),i.persistence.set_property(wo,"identified")),r()},a=s.user();"then"in a&&zr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||cx.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(cx.info("No userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(cx.info("UserId set, identifying with PostHog"),i.identify(s.event.userId));var a=i.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}var zO="posthog-js";function UO(t,e){var{organization:n,projectId:i,prefix:r,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,u,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var f=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=f,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((a=o.exception)==null?void 0:a.values)||[],g=p.map(v=>Se({},v,{stacktrace:v.stacktrace?Se({},v.stacktrace,{type:"raw",frames:(v.stacktrace.frames||[]).map(y=>Se({},y,{platform:"web:javascript"}))}):void 0})),m={$exception_message:((l=p[0])==null?void 0:l.value)||o.message,$exception_type:(c=p[0])==null?void 0:c.type,$exception_personURL:f,$exception_level:o.level,$exception_list:g,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&i&&(m.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+o.event_id),t.exceptions.sendExceptionEvent(m),o}}class _V{constructor(e,n,i,r,s){this.name=zO,this.setupOnce=function(o){o(UO(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var CV=q!=null&&q.location?G0(q.location.hash,"__posthog")||G0(location.hash,"state"):null,pN="_postHogToolbarParams",mN=jn("[Toolbar]"),ya=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(ya||{});class EV{constructor(e){this.instance=e}Hi(e){Ke.ph_toolbar_state=e}Wi(){var e;return(e=Ke.ph_toolbar_state)!==null&&e!==void 0?e:ya.UNINITIALIZED}maybeLoadToolbar(e,n,i){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),!q||!Ce)return!1;e=e??q.location,i=i??q.history;try{if(!n){try{q.localStorage.setItem("test","test"),q.localStorage.removeItem("test")}catch{return!1}n=q==null?void 0:q.localStorage}var r,s=CV||G0(e.hash,"__posthog")||G0(e.hash,"state"),o=s?LA(()=>JSON.parse(atob(decodeURIComponent(s))))||LA(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((r=o).source="url",r&&Object.keys(r).length>0&&(o.desiredHash?e.hash=o.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(n.getItem(pN)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch{return!1}}Gi(e){var n=Ke.ph_load_toolbar||Ke.ph_load_editor;!St(n)&&zr(n)?n(e,this.instance):mN.warn("No toolbar load function found")}loadToolbar(e){var n=!(Ce==null||!Ce.getElementById(hO));if(!q||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=Se({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(q.localStorage.setItem(pN,JSON.stringify(Se({},r,{source:void 0}))),this.Wi()===ya.LOADED)this.Gi(r);else if(this.Wi()===ya.UNINITIALIZED){var s;this.Hi(ya.LOADING),(s=Ke.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return mN.error("[Toolbar] Failed to load",o),void this.Hi(ya.UNINITIALIZED);this.Hi(ya.LOADED),this.Gi(r)}),Qt(q,"turbolinks:load",()=>{this.Hi(ya.UNINITIALIZED),this.loadToolbar(r)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,i){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),this.maybeLoadToolbar(e,n,i)}}var AV=jn("[TracingHeaders]");class NV{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,i;ve(this.Vi)&&((n=Ke.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),ve(this.Ki)&&((i=Ke.__PosthogExtensions__)==null||(i=i.tracingHeadersPatchFns)==null||i._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,i;(n=Ke.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(i=Ke.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"tracing-headers",r=>{if(r)return AV.error("failed to load script",r);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var da=jn("[Web Vitals]"),gN=9e5;class PV{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((i,r)=>Se({},i,{["$web_vitals_"+r.name+"_event"]:Se({},r),["$web_vitals_"+r.name+"_value"]:r.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=i=>{var r,s=(r=this._instance.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0);if(ve(s))da.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();ve(o)||(St(i==null?void 0:i.name)||St(i==null?void 0:i.value)?da.error("Invalid metric received",i):this.ie&&i.value>=this.ie?da.error("Ignoring metric with value >= "+this.ie,i):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),ve(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=ve(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.C.metrics.push(Se({},i,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var i,r,s,o,a=Ke.__PosthogExtensions__;ve(a)||ve(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):da.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[FA]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=an(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return ve(i)?((n=this._instance.persistence)==null?void 0:n.props[BA])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(an(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=an(this._instance.config.capture_performance)&&li(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:gN;return 0<e&&e<=6e4?gN:e}get isEnabled(){var e=Bi==null?void 0:Bi.protocol;if(e!=="http:"&&e!=="https:")return da.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=an(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Ys(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Ys(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(da.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=an(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=an(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[FA]:n}),this._instance.persistence.register({[BA]:i})),this.Yi=n,this.startIfEnabled()}J(e){var n,i;(n=Ke.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(i=Ke.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"web-vitals",r=>{r?da.error("failed to load script",r):e()})}te(){var e=q?q.location.href:void 0;return e||da.error("Could not determine current URL"),e}}var MV=jn("[Heatmaps]");function vN(t){return an(t)&&"clientX"in t&&"clientY"in t&&li(t.clientX)&&li(t.clientY)}class RV{constructor(e){var n;this.rageclicks=new _O,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[h1])}get flushIntervalMilliseconds(){var e=5e3;return an(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return ve(this.instance.config.capture_heatmaps)?ve(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;MV.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[h1]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){q&&Ce&&(Qt(q,"beforeunload",this.se.bind(this)),Qt(Ce,"click",e=>this.ae(e||(q==null?void 0:q.event)),{capture:!0}),Qt(Ce,"mousemove",e=>this.le(e||(q==null?void 0:q.event)),{capture:!0}),this.ne=new EO(this.instance,jU,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&Py(u)&&!Ya(u,"body");){if(u===c)return!1;if(at(l,q==null?void 0:q.getComputedStyle(u).position))return!0;u=yO(u)}return!1}(vO(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}ae(e,n){var i;if(n===void 0&&(n="click"),!qA(e.target)&&vN(e)){var r=this.ue(e,n);(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(Se({},r,{type:"rageclick"})),this.he(r)}}le(e){!qA(e.target)&&vN(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(q){var n=q.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!Eu(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class TV{constructor(e){this._instance=e}doPageView(e,n){var i,r=this.ve(e,n);return this.ce={pathname:(i=q==null?void 0:q.location.pathname)!==null&&i!==void 0?i:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var i=this.ce;if(!i)return{$pageview_id:n};var r={$pageview_id:n,$prev_pageview_id:i.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=s;if(!(ve(o)||ve(a)||ve(l)||ve(c)||ve(u)||ve(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d);var f=o<=1?1:ur(a/o,0,1),p=o<=1?1:ur(l/o,0,1),g=c<=1?1:ur(u/c,0,1),m=c<=1?1:ur(d/c,0,1);r=dn(r,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:g,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:m})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var OV=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),El(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},IV=!!u1||!!c1,yN="text/plain",X0=(t,e)=>{var[n,i]=t.split("?"),r=Se({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=wU(r);return n+"?"+(s=s?(i?i+"&":"")+s:i)},qf=(t,e)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,e),ux=t=>{var{data:e,compression:n}=t;if(e){if(n===Fo.GZipJS){var i=DO($O(qf(e)),{mtime:0}),r=new Blob([i],{type:yN});return{contentType:yN,body:r,estimatedSize:r.size}}if(n===Fo.Base64){var s=function(l){var c,u,d,f,p,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,v=0,y="",x=[];if(!l)return l;l=OV(l);do c=(p=l.charCodeAt(m++)<<16|l.charCodeAt(m++)<<8|l.charCodeAt(m++))>>18&63,u=p>>12&63,d=p>>6&63,f=63&p,x[v++]=g.charAt(c)+g.charAt(u)+g.charAt(d)+g.charAt(f);while(m<l.length);switch(y=x.join(""),l.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"="}return y}(qf(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:qf(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=qf(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},mh=[];c1&&mh.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=ux(t))!==null&&e!==void 0?e:{},o=new Headers;At(t.headers,function(u,d){o.append(d,u)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(IA){var c=new IA;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}c1(a,Se({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var f={statusCode:u.status,text:d};if(u.status===200)try{f.json=JSON.parse(d)}catch(p){Ae.error(p)}t.callback==null||t.callback(f)})).catch(u=>{Ae.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),u1&&mh.push({transport:"XHR",method:t=>{var e,n=new u1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=ux(t))!==null&&e!==void 0?e:{};At(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(r)}}),cr!=null&&cr.sendBeacon&&mh.push({transport:"sendBeacon",method:t=>{var e=X0(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=ux(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;cr.sendBeacon(e,s)}catch{}}});var kd=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function bN(t,e,n){return qf({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var jV={exact:(t,e)=>e.some(n=>t.some(i=>n===i)),is_not:(t,e)=>e.every(n=>t.every(i=>n!==i)),regex:(t,e)=>e.some(n=>t.some(i=>kd(n,i))),not_regex:(t,e)=>e.every(n=>t.every(i=>!kd(n,i))),icontains:(t,e)=>e.map(zm).some(n=>t.map(zm).some(i=>n.includes(i))),not_icontains:(t,e)=>e.map(zm).every(n=>t.map(zm).every(i=>!n.includes(i)))},zm=t=>t.toLowerCase(),LV=jn("[Error tracking]");class DV{constructor(e){var n,i;this.fe=[],this._instance=e,this.fe=(n=(i=this._instance.persistence)==null?void 0:i.get_property(p1))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,i,r=(n=(i=e.errorTracking)==null?void 0:i.suppressionRules)!==null&&n!==void 0?n:[];this.fe=r,this._instance.persistence&&this._instance.persistence.register({[p1]:this.fe})}sendExceptionEvent(e){this.pe(e)?LV.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!Kt(n)||n.length===0)return!1;var i=n.reduce((r,s)=>{var{type:o,value:a}=s;return ln(o)&&o.length>0&&r.$exception_types.push(o),ln(a)&&a.length>0&&r.$exception_values.push(a),r},{$exception_types:[],$exception_values:[]});return this.fe.some(r=>{var s=r.values.map(o=>{var a,l=jV[o.operator],c=Kt(o.value)?o.value:[o.value],u=(a=i[o.key])!==null&&a!==void 0?a:[];return c.length>0&&l(c,u)});return r.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var Vr="Mobile",J0="iOS",Xs="Android",Vh="Tablet",VO=Xs+" "+Vh,HO="iPad",WO="Apple",GO=WO+" Watch",Hh="Safari",_d="BlackBerry",KO="Samsung",qO=KO+"Browser",YO=KO+" Internet",Nc="Chrome",$V=Nc+" OS",XO=Nc+" "+J0,i_="Internet Explorer",JO=i_+" "+Vr,r_="Opera",FV=r_+" Mini",s_="Edge",ZO="Microsoft "+s_,qu="Firefox",QO=qu+" "+J0,Wh="Nintendo",Gh="PlayStation",Yu="Xbox",e5=Xs+" "+Vr,t5=Vr+" "+Hh,Yf="Windows",I1=Yf+" Phone",xN="Nokia",j1="Ouya",n5="Generic",BV=n5+" "+Vr.toLowerCase(),i5=n5+" "+Vh.toLowerCase(),L1="Konqueror",pi="(\\d+(\\.\\d+)?)",dx=new RegExp("Version/"+pi),zV=new RegExp(Yu,"i"),UV=new RegExp(Gh+" \\w+","i"),VV=new RegExp(Wh+" \\w+","i"),o_=new RegExp(_d+"|PlayBook|BB10","i"),HV={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},WV=(t,e)=>e&&at(e,WO)||function(n){return at(n,Hh)&&!at(n,Nc)&&!at(n,Xs)}(t),r5=function(t,e){return e=e||"",at(t," OPR/")&&at(t,"Mini")?FV:at(t," OPR/")?r_:o_.test(t)?_d:at(t,"IE"+Vr)||at(t,"WPDesktop")?JO:at(t,qO)?YO:at(t,s_)||at(t,"Edg/")?ZO:at(t,"FBIOS")?"Facebook "+Vr:at(t,"UCWEB")||at(t,"UCBrowser")?"UC Browser":at(t,"CriOS")?XO:at(t,"CrMo")||at(t,Nc)?Nc:at(t,Xs)&&at(t,Hh)?e5:at(t,"FxiOS")?QO:at(t.toLowerCase(),L1.toLowerCase())?L1:WV(t,e)?at(t,Vr)?t5:Hh:at(t,qu)?qu:at(t,"MSIE")||at(t,"Trident/")?i_:at(t,"Gecko")?qu:""},GV={[JO]:[new RegExp("rv:"+pi)],[ZO]:[new RegExp(s_+"?\\/"+pi)],[Nc]:[new RegExp("("+Nc+"|CrMo)\\/"+pi)],[XO]:[new RegExp("CriOS\\/"+pi)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+pi)],[Hh]:[dx],[t5]:[dx],[r_]:[new RegExp("(Opera|OPR)\\/"+pi)],[qu]:[new RegExp(qu+"\\/"+pi)],[QO]:[new RegExp("FxiOS\\/"+pi)],[L1]:[new RegExp("Konqueror[:/]?"+pi,"i")],[_d]:[new RegExp(_d+" "+pi),dx],[e5]:[new RegExp("android\\s"+pi,"i")],[YO]:[new RegExp(qO+"\\/"+pi)],[i_]:[new RegExp("(rv:|MSIE )"+pi)],Mozilla:[new RegExp("rv:"+pi)]},KV=function(t,e){var n=r5(t,e),i=GV[n];if(ve(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},wN=[[new RegExp(Yu+"; "+Yu+" (.*?)[);]","i"),t=>[Yu,t&&t[1]||""]],[new RegExp(Wh,"i"),[Wh,""]],[new RegExp(Gh,"i"),[Gh,""]],[o_,[_d,""]],[new RegExp(Yf,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[I1,""];if(new RegExp(Vr).test(e)&&!/IEMobile\b/.test(e))return[Yf+" "+Vr,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=HV[i]||"";return/arm/i.test(e)&&(r="RT"),[Yf,r]}return[Yf,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[J0,e.join(".")]}return[J0,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=ve(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Xs+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Xs+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Xs,e.join(".")]}return[Xs,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[$V,""]],[/Linux|debian/i,["Linux",""]]],SN=function(t){return VV.test(t)?Wh:UV.test(t)?Gh:zV.test(t)?Yu:new RegExp(j1,"i").test(t)?j1:new RegExp("("+I1+"|WPDesktop)","i").test(t)?I1:/iPad/.test(t)?HO:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?GO:o_.test(t)?_d:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(xN,"i").test(t)?xN:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Vr).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Xs:VO:Xs:new RegExp("(pda|"+Vr+")","i").test(t)?BV:new RegExp(Vh,"i").test(t)&&!new RegExp(Vh+" pc","i").test(t)?i5:""},Um="https?://(.*)",Ry=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],qV=Ny(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Ry),a_="<masked>",YV=["li_fat_id"];function s5(t,e,n){if(!Ce)return{};var i,r=e?Ny([],Ry,n||[]):[],s=o5(Xk(Ce.URL,r,a_),t),o=(i={},At(YV,function(a){var l=no.D(a);i[a]=l||null}),i);return dn(o,s)}function o5(t,e){var n=qV.concat(e||[]),i={};return At(n,function(r){var s=W0(t,r);i[r]=s||null}),i}function a5(t){var e=function(s){return s?s.search(Um+"google.([^/?]*)")===0?"google":s.search(Um+"bing.com")===0?"bing":s.search(Um+"yahoo.com")===0?"yahoo":s.search(Um+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",i={};if(!El(e)){i.$search_engine=e;var r=Ce?W0(Ce.referrer,n):"";r.length&&(i.ph_keyword=r)}return i}function kN(){return navigator.language||navigator.userLanguage}function l5(){return(Ce==null?void 0:Ce.referrer)||"$direct"}function c5(t,e){var n=t?Ny([],Ry,e||[]):[],i=Bi==null?void 0:Bi.href.substring(0,1e3);return{r:l5().substring(0,1e3),u:i?Xk(i,n,a_):void 0}}function u5(t){var e,{r:n,u:i}=t,r={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=wd(n))==null?void 0:e.host};if(i){r.$current_url=i;var s=wd(i);r.$host=s==null?void 0:s.host,r.$pathname=s==null?void 0:s.pathname;var o=o5(i);dn(r,o)}if(n){var a=a5(n);dn(r,a)}return r}function d5(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function XV(){try{return new Date().getTimezoneOffset()}catch{return}}function JV(t,e){if(!Di)return{};var n,i,r,s=t?Ny([],Ry,e||[]):[],[o,a]=function(l){for(var c=0;c<wN.length;c++){var[u,d]=wN[c],f=u.exec(l),p=f&&(zr(d)?d(f,l):d);if(p)return p}return["",""]}(Di);return dn(qk({$os:o,$os_version:a,$browser:r5(Di,navigator.vendor),$device:SN(Di),$device_type:(i=Di,r=SN(i),r===HO||r===VO||r==="Kobo"||r==="Kindle Fire"||r===i5?Vh:r===Wh||r===Yu||r===Gh||r===j1?"Console":r===GO?"Wearable":r?Vr:"Desktop"),$timezone:d5(),$timezone_offset:XV()}),{$current_url:Xk(Bi==null?void 0:Bi.href,s,a_),$host:Bi==null?void 0:Bi.host,$pathname:Bi==null?void 0:Bi.pathname,$raw_user_agent:Di.length>1e3?Di.substring(0,997)+"...":Di,$browser_version:KV(Di,navigator.vendor),$browser_language:kN(),$browser_language_prefix:(n=kN(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:q==null?void 0:q.screen.height,$screen_width:q==null?void 0:q.screen.width,$viewport_height:q==null?void 0:q.innerHeight,$viewport_width:q==null?void 0:q.innerWidth,$lib:"web",$lib_version:Eo.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Ts=jn("[FeatureFlags]"),fx="$active_feature_flags",nu="$override_feature_flags",_N="$feature_flag_payloads",yf="$override_feature_flag_payloads",CN="$feature_flag_request_id",EN=t=>{var e={};for(var[n,i]of t0(t||{}))i&&(e[n]=i);return e},ZV=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var i;return[n,(i=e[n].variant)!==null&&i!==void 0?i:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var i;return(i=e[n].metadata)==null?void 0:i.payload}).map(n=>{var i;return[n,(i=e[n].metadata)==null?void 0:i.payload]}))):Ts.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},QV=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),AN=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class eH{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(y1),n=this._instance.get_property(nu),i=this._instance.get_property(yf);if(!i&&!n)return e||{};var r=dn({},e||{}),s=[...new Set([...Object.keys(i||{}),...Object.keys(n||{})])];for(var o of s){var a,l,c=r[o],u=n==null?void 0:n[o],d=ve(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,f=ve(u)?c.variant:typeof u=="string"?u:void 0,p=i==null?void 0:i[o],g=Se({},c,{enabled:d,variant:d?f??(c==null?void 0:c.variant):void 0});d!==(c==null?void 0:c.enabled)&&(g.original_enabled=c==null?void 0:c.enabled),f!==(c==null?void 0:c.variant)&&(g.original_variant=c==null?void 0:c.variant),p&&(g.metadata=Se({},c==null?void 0:c.metadata,{payload:p,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),r[o]=g}return this.ge||(Ts.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this.ge=!0),r}getFlagVariants(){var e=this._instance.get_property(Au),n=this._instance.get_property(nu);if(!n)return e||{};for(var i=dn({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Ts.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this.ge=!0),i}getFlagPayloads(){var e=this._instance.get_property(_N),n=this._instance.get_property(yf);if(!n)return e||{};for(var i=dn({},e||{}),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Ts.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:i}),this.ge=!0),i}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:Se({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(Gf)||{}),group_properties:this._instance.get_property(Zl)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var r=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var c=function(u){for(var d=2166136261,f=0;f<u.length;f++)d^=u.charCodeAt(f),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return AN==null?void 0:AN.has(c)}(this._instance.config.token)?"/decide?v=4":r?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);r&&(i.timezone=d5()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:i,compression:this._instance.config.disable_compression?void 0:Fo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((u=l.json)!==null&&u!==void 0?u:{})),!i.disable_flags||this.ye)if(this.Se=!d,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(QV.FeatureFlags))Ts.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var f;i.disable_flags||this.receivedFeatureFlags((f=l.json)!==null&&f!==void 0?f:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,s=this._instance.get_property(CN)||void 0,o=this._instance.get_property(z0)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(r))){var a,l,c,u,d,f,p,g,m;Kt(o[e])?o[e].push(r):o[e]=[r],(a=this._instance.persistence)==null||a.register({[z0]:o});var v=this.getFeatureFlagDetails(e),y={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.Se};ve(v==null||(u=v.metadata)==null?void 0:u.version)||(y.$feature_flag_version=v.metadata.version);var x,w=(d=v==null||(f=v.reason)==null?void 0:f.description)!==null&&d!==void 0?d:v==null||(p=v.reason)==null?void 0:p.code;w&&(y.$feature_flag_reason=w),v!=null&&(g=v.metadata)!=null&&g.id&&(y.$feature_flag_id=v.metadata.id),ve(v==null?void 0:v.original_variant)&&ve(v==null?void 0:v.original_enabled)||(y.$feature_flag_original_response=ve(v.original_variant)?v.original_enabled:v.original_variant),v!=null&&(m=v.metadata)!=null&&m.original_payload&&(y.$feature_flag_original_payload=v==null||(x=v.metadata)==null?void 0:x.original_payload),this._instance.capture("$feature_flag_called",y)}return i}Ts.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var i=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:Fo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var s,o=(s=r.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);Ts.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var d=ZV(o),f=d.flags,p=d.featureFlags,g=d.featureFlagPayloads;if(p){var m=o.requestId;if(Kt(p)){Ts.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var v={};if(p)for(var y=0;y<p.length;y++)v[p[y]]=!0;a&&a.register({[fx]:p,[Au]:v})}else{var x=p,w=g,S=f;o.errorsWhileComputingFlags&&(x=Se({},l,x),w=Se({},c,w),S=Se({},u,S)),a&&a.register(Se({[fx]:Object.keys(EN(x)),[Au]:x||{},[_N]:w||{},[y1]:S||{}},m?{[CN]:m}:{}))}}})(e,this._instance.persistence,i,r,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),Ts.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Ts.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(nu),this._instance.persistence.unregister(yf),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,i=e;if(this.ge=!!((n=i.suppressWarning)!==null&&n!==void 0&&n),"flags"in i){if(i.flags===!1)this._instance.persistence.unregister(nu);else if(i.flags)if(Kt(i.flags)){for(var r={},s=0;s<i.flags.length;s++)r[i.flags[s]]=!0;this._instance.persistence.register({[nu]:r})}else this._instance.persistence.register({[nu]:i.flags})}return"payloads"in i&&(i.payloads===!1?this._instance.persistence.unregister(yf):i.payloads&&this._instance.persistence.register({[yf]:i.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:i}=this.Re();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r=(this._instance.get_property(n0)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};r&&(o.$early_access_feature_name=r.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=Se({},this.getFlagVariants(),{[e]:n});(i=this._instance.persistence)==null||i.register({[fx]:Object.keys(EN(a)),[Au]:a}),this.Pe()}getEarlyAccessFeatures(e,n,i){n===void 0&&(n=!1);var r=this._instance.get_property(n0),s=i?"&"+i.map(o=>"stage="+o).join("&"):"";if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[n0]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}Pe(e){var{flags:n,flagVariants:i}=this.Re();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(Gf)||{};this._instance.register({[Gf]:Se({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Gf)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(Zl)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=Se({},i[r],e[r]),delete e[r]}),this._instance.register({[Zl]:Se({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(Zl)||{};this._instance.register({[Zl]:Se({},n,{[e]:{}})})}else this._instance.unregister(Zl)}}var tH=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class hx{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Ae.info("Persistence loaded",e.persistence,Se({},this.props)),this.update_config(e,e),this.save()}Ce(e){tH.indexOf(e.persistence.toLowerCase())===-1&&(Ae.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&Sn.O()?Sn:n==="localstorage+cookie"&&Im.O()?Im:n==="sessionstorage"&&Un.O()?Un:n==="memory"?OU:n==="cookie"?no:Im.O()?Im:no}properties(){var e={};return At(this.props,function(n,i){if(i===Au&&an(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/"+r[s]]=n[r[s]];else a=i,l=!1,(El(o=fU)?l:OA&&o.indexOf===OA?o.indexOf(a)!=-1:(At(o,function(c){if(l||(l=c===a))return F0}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=dn({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(an(e)){ve(n)&&(n="None"),this.Oe=ve(i)?this.Le:i;var r=!1;if(At(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(an(e)){this.Oe=ve(n)?this.Le:n;var i=!1;if(At(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=s5(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);Eu(qk(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=Ce==null?void 0:Ce.referrer)?a5(e):{})}update_referrer_info(){var e;this.register_once({$referrer:l5(),$referring_domain:Ce!=null&&Ce.referrer&&((e=wd(Ce.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[S1]||this.props[k1]||this.register_once({[U0]:c5(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};At([k1,S1],o=>{var a=this.props[o];a&&At(a,function(l,c){e["$initial_"+d1(c)]=l})});var n,i,r=this.props[U0];if(r){var s=(n=u5(r),i={},At(n,function(o,a){i["$initial_"+d1(a)]=o}),i);dn(e,s)}return e}safe_merge(e){return At(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.Ce(e),r=this.props;this.clear(),this.B=i,this.props=r,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[Hf]||{};i[e]=n,this.props[Hf]=i,this.save()}remove_event_timer(e){var n=(this.props[Hf]||{})[e];return ve(n)||(delete this.props[Hf][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class f5{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.je[e]||[])i(n);for(var r of this.je["*"]||[])r(e,n)}}class ic{constructor(e){this.Ne=new f5,this.ze=(n,i)=>this.Ue(n,i)&&this.qe(n,i)&&this.Be(n,i),this.Ue=(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!ve((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!ve((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.He)==null||u.add((c==null?void 0:c.event)||"")})}),(i=this._instance)!=null&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this._instance)==null||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((i=this.We)==null?void 0:i.size)>0&&this.We.forEach(r=>{this.Je(n,r)&&this.Ne.emit("actionCaptured",r.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.ze(e,i))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)==null?void 0:i.$current_url;if(!r||typeof r!="string"||!ic.Ke(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,i){switch(i){case"regex":return!!q&&kd(e,n);case"exact":return n===e;case"contains":var r=ic.Ye(n).replace(/_/g,".").replace(/%/g,".*");return kd(e,r);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!ic.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!ic.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!ic.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)==null?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var Mn=jn("[Surveys]"),D1="seenSurvey_",nH=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class iH{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;ve((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.actions)&&((s=i.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new ic(this._instance),this.er.init(),this.er.Ve(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l;i.conditions&&(r=i.conditions)!=null&&r.actions&&(s=i.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=i.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(i.conditions.actions.values),(l=i.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.Ze.get(c.name);u&&u.push(i.id),this.Ze.set(c.name,u||[i.id])}}))}))}tr(e){var n;e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.events)&&((s=i.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r;(r=i.conditions)==null||(r=r.events)==null||(r=r.values)==null||r.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(i.id),this.Qe.set(s.name,o||[i.id])}})}))}onEvent(e,n){var i,r=((i=this._instance)==null||(i=i.persistence)==null?void 0:i.props[Tm])||[];if(e==="survey shown"&&n&&r.length>0){var s;Mn.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:r});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=r.indexOf(o);a>=0&&(r.splice(a,1),this.rr(r))}}else this.Qe.has(e)&&(Mn.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(r.concat(this.Qe.get(e)||[])))}onAction(e){var n,i=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[Tm])||[];this.Ze.has(e)&&this.rr(i.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[Tm]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[Tm];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class rH{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(St(n))return Mn.warn("Flags not loaded yet. Not loading surveys.");var i=Kt(n);this.nr=i?n.length>0:n,Mn.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var i=localStorage.key(n);(i!=null&&i.startsWith(D1)||i!=null&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(r=>localStorage.removeItem(r))}loadIfEnabled(){if(!this.ar)if(this.ur)Mn.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Mn.info("Disabled. Not loading surveys.");else{var e=Ke==null?void 0:Ke.__PosthogExtensions__;if(e){var n=this.nr;if(!ve(n)){this.ur=!0;try{var i=e.generateSurveys;if(i)return void this.dr(i,n);var r=e.loadExternalDependency;if(!r)return void this.vr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else Mn.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new iH(this._instance),Mn.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){Mn.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return Mn.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(b1);if(i&&!n)return e(i,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var s;this.lr=!1;var o=r.statusCode;if(o!==200||!r.json){var a="Surveys API could not be loaded, status: "+o;return Mn.error(a),e([],{isLoaded:!1,error:a})}var l,c=r.json.surveys||[],u=c.filter(d=>function(f){return!(!f.start_date||f.end_date)}(d)&&(function(f){var p;return!((p=f.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)}(d)||function(f){var p;return!((p=f.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)}(d)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[b1]:c}),e(c,{isLoaded:!0})}})}catch(r){throw this.lr=!1,r}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(i){Mn.error("Error in survey callback",i)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!St(this.ar))return this.ar.getActiveMatchingSurveys(e,n);Mn.warn("init was not called")}pr(e){var n=null;return this.getSurveys(i=>{var r;n=(r=i.find(s=>s.id===e))!==null&&r!==void 0?r:null}),n}gr(e){if(St(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(St(this.ar))return Mn.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return St(this.ar)?(Mn.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(r=>{var s,o=(s=r.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);i({visible:a.eligible,disabledReason:a.reason})}else i({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(St(this.ar))Mn.warn("init was not called");else{var i=this.pr(e),r=Ce==null?void 0:Ce.querySelector(n);i?r?this.ar.renderSurvey(i,r):Mn.warn("Survey element not found"):Mn.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var px=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),NN=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),PN=jn("[RateLimiter]");let sH=class{constructor(e){var n,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{PN.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void PN.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)==null?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,i,r;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(i=this.instance.persistence)==null?void 0:i.get_property(w1))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)==null||r.set_property(w1,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var Hl=jn("[RemoteConfig]");class oH{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=Ke._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,i;(n=Ke.__PosthogExtensions__)!=null&&n.loadExternalDependency?(i=Ke.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(Hl.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return Hl.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void Hl.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return Hl.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){Hl.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):Hl.info("__preview_remote_config is disabled. Logging config instead",e):Hl.error("Failed to fetch remote config from PostHog.")}}var $1=3e3;class aH{constructor(e,n){this.br=!0,this.yr=[],this.wr=ur((n==null?void 0:n.flush_interval_ms)||$1,250,5e3,"flush interval",$1),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(i=>i.url.indexOf("/e")===0),...n.filter(i=>i.url.indexOf("/e")!==0)].map(i=>{this.Sr(Se({},i,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),i=function(){var s=n[r],o=new Date().getTime();s.data&&Kt(s.data)&&At(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var r in n)i()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return At(this.yr,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;ve(e[s])&&(e[s]=Se({},r,{data:[]})),(i=e[s].data)==null||i.push(r.data)}),this.yr=[],e}}var lH=["retriesPerformedSoFar"];class cH{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!ve(q)&&"onLine"in q.navigator&&(this.Tr=q.navigator.onLine,Qt(q,"online",()=>{this.Tr=!0,this.se()}),Qt(q,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=cO(e,lH);li(n)&&n>0&&(i.url=X0(i.url,{retry_count:n})),this._instance.Ee(Se({},i,{callback:r=>{r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.Mr(Se({retriesPerformedSoFar:n},i)):i.callback==null||i.callback(r)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),r=Date.now()+i;this.yr.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in "+i;navigator.onLine||(s+=" (Browser is offline)"),Ae.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],i=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(Se({},e,{transport:"sendBeacon"}))}catch(n){Ae.error(n)}this.yr=[]}}class uH{constructor(e){this.Or=()=>{var n,i,r,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(i=this.Ar.maxScrollHeight)!==null&&i!==void 0?i:0),this.Ar.lastContentY=c,this.Ar.maxContentY=Math.max(c,(r=this.Ar.maxContentY)!==null&&r!==void 0?r:0),this.Ar.maxContentHeight=Math.max(u,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){Qt(q,"scroll",this.Or,{capture:!0}),Qt(q,"scrollend",this.Or,{capture:!0}),Qt(q,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return q==null?void 0:q.document.documentElement;var e=Kt(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var i=q==null?void 0:q.document.querySelector(n);if(i)return i}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return q&&(q.scrollY||q.pageYOffset||q.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return q&&(q.scrollX||q.pageXOffset||q.document.documentElement.scrollLeft)||0}}var dH=t=>c5(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class fH{constructor(e,n,i,r){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[x1]:a})}},this._instance=e,this.zr=n,this.Nr=i,this.jr=r||dH,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[x1]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?u5(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return At(qk(this.getSetOnceProps()),(n,i)=>{i==="$current_url"&&(i="url"),e["$session_entry_"+d1(i)]=n}),e}}var MN=jn("[SessionId]");class hH{constructor(e,n,i){var r;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||La,this.Br=i||La;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*ur(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=Un.L(this.Wr),l=Un.L(this.Gr);a&&!l?this.fi=a:Un.N(this.Wr),Un.j(this.Gr,!0)}if((r=this.S.bootstrap)!=null&&r.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(u){MN.error("Invalid sessionID in bootstrap",u)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return ve(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&Un.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&Un.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?Un.L(this.Wr):null}Vr(e,n,i){e===this.Ct&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[B0]:[n,e,i]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[B0];return Kt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){Qt(q,"beforeunload",()=>{this.Jr()&&Un.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=n||new Date().getTime(),[r,s,o]=this.Qr(),a=this.Xr(),l=li(o)&&o>0&&Math.abs(i-o)>864e5,c=!1,u=!s,d=!e&&Math.abs(i-r)>this.sessionTimeoutMs;u||d||l?(s=this.qr(),a=this.Br(),MN.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),o=i,c=!0):a||(a=this.Br(),c=!0);var f=r===0||!e||l?i:r,p=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,f,p),e||this.Hr(),c&&this.Ur.forEach(g=>g(s,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:p,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:r}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var pH=["$set_once","$set"],fa=jn("[SiteApps]");class mH{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var i=this.globalsForEvent(n);this.ts.push(i),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=Ke._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,p]of Object.entries(d))c[f]={id:u[f],type:f,properties:p};var{$set_once:g,$set:m}=e;return{event:Se({},cO(e,pH),{properties:Se({},e.properties,m?{$set:Se({},(n=(i=e.properties)==null?void 0:i.$set)!==null&&n!==void 0?n:{},m)}:{},g?{$set_once:Se({},(r=(s=e.properties)==null?void 0:s.$set_once)!==null&&r!==void 0?r:{},g)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],i=()=>{var a;!n.errored&&this.ts.length&&(fa.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},r=!1,s=a=>{n.errored=!a,n.loaded=!0,fa.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),r&&i()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),r=!0}catch(a){fa.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(r&&n.loaded)try{i()}catch(a){fa.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{i.processEvent==null||i.processEvent(n)}catch(r){fa.error("Error while processing event "+e.event+" for site app "+i.id,r)}}}onRemoteConfig(e){var n,i,r,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",c=>this.ns(c))):void fa.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((i=this.rs)==null||i.call(this),(r=e.siteApps)!=null&&r.length)if(this.isEnabled){var o=function(c){var u;Ke["__$$ph_site_app_"+c]=s._instance,(u=Ke.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,d=>{if(d)return fa.error("Error while initializing PostHog app with config id "+c,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else fa.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var gH=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],RN=function(t,e){if(!t)return!1;var n=t.toLowerCase();return gH.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},h5=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&RN(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>RN(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver},Xf=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),TN="i.posthog.com";class vH{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+TN,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Xf.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Xf.EU:this.os[this.apiHost]=Xf.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===Xf.CUSTOM)return this.apiHost+n;var i=TN+n;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var yH={icontains:(t,e)=>!!q&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!q&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!q&&kd(e.href,t),not_regex:(t,e)=>!!q&&!kd(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let bH=class mi{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(i){i===void 0&&(i=!1),n.getWebExperiments(r=>{mi.ls("retrieved web experiments from the server"),n.us=new Map,r.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(mi.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);ln(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];mi.ds(c)&&n.hs(s.name,l,c.transforms)}})},i)},this._instance=e,this._instance.onFeatureFlags(i=>{this.onFeatureFlags(i)})}onFeatureFlags(e){if(this._is_bot())mi.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(St(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();mi.ls("applying feature flags",e),e.forEach(n=>{var i;if(this.us&&(i=this.us)!=null&&i.has(n)){var r,s=this._instance.getFeatureFlag(n),o=(r=this.us)==null?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=mi.getWindowLocation();if(e!=null&&e.search){var n=W0(e==null?void 0:e.search,"__experiment_id"),i=W0(e==null?void 0:e.search,"__experiment_variant");n&&i&&(mi.ls("previewing web experiments "+n+" && "+i),this.getWebExperiments(r=>{this.vs(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(mi.ls("Previewing web experiment ["+r[0].name+"] with variant ["+n+"]"),this.hs(r[0].name,n,r[0].variants[n].transforms))}static ds(e){return!St(e.conditions)&&mi.cs(e)&&mi.fs(e)}static cs(e){var n;if(St(e.conditions)||St((n=e.conditions)==null?void 0:n.url))return!0;var i,r,s,o=mi.getWindowLocation();return!!o&&((i=e.conditions)==null||!i.url||yH[(r=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return q==null?void 0:q.location}static fs(e){var n;if(St(e.conditions)||St((n=e.conditions)==null?void 0:n.utm))return!0;var i=s5();if(i.utm_source){var r,s,o,a,l,c,u,d,f=(r=e.conditions)==null||(r=r.utm)==null||!r.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==i.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==i.utm_source,g=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==i.utm_medium,m=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==i.utm_term;return f&&g&&m&&p}return!1}static ls(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Ae.info("[WebExperiments] "+e,i)}hs(e,n,i){this._is_bot()?mi.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(r=>{if(r.selector){var s;mi.ls("applying transform of variant "+n+" for experiment "+e+" ",r);var o=(s=document)==null?void 0:s.querySelectorAll(r.selector);o==null||o.forEach(a=>{var l=a;r.html&&(l.innerHTML=r.html),r.css&&l.setAttribute("style",r.css)})}}):mi.ls("Control variants leave the page unmodified.")}_is_bot(){return cr&&this._instance?h5(cr,this._instance.config.custom_blocked_useragents):void 0}};var xH=jn("[PostHog ExternalIntegrations]"),wH={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let SH=class{constructor(e){this._instance=e}J(e,n){var i;(i=Ke.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,e,r=>{if(r)return xH.error("failed to load script",r);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,c;!r||(a=Ke.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(wH[o],()=>{var u;(u=Ke.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!r&&(l=Ke.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=Ke.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[i,r]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(i)}}};var gh={},F1=()=>{},gu="posthog",p5=!IV&&(Di==null?void 0:Di.indexOf("MSIE"))===-1&&(Di==null?void 0:Di.indexOf("Mozilla"))===-1,ON=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:dU(Ce==null?void 0:Ce.location),persistence:"localStorage+cookie",persistence_name:"",loaded:F1,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:Bi&&ln(Bi==null?void 0:Bi.search)&&Bi.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(q==null||(e=q.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var i="Bad HTTP status: "+n.statusCode+" "+n.text;Ae.error(i)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:$1},error_tracking:{},_onCapture:F1}},IN=t=>{var e={};ve(t.process_person)||(e.person_profiles=t.process_person),ve(t.xhr_headers)||(e.request_headers=t.xhr_headers),ve(t.cookie_name)||(e.persistence_name=t.cookie_name),ve(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),ve(t.store_google)||(e.save_campaign_params=t.store_google),ve(t.verbose)||(e.debug=t.verbose);var n=dn({},e,t);return Kt(t.property_blacklist)&&(ve(t.property_denylist)?n.property_denylist=t.property_blacklist:Kt(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Ae.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let kH=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Ae.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},m5=class g5{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new kH,this.gs=!1,this.version=Eo.LIB_VERSION,this._s=new f5,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=ON(),this.SentryIntegration=_V,this.sentryIntegration=e=>function(n,i){var r=UO(n,i);return{name:zO,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new eH(this),this.toolbar=new EV(this),this.scrollManager=new uH(this),this.pageViewManager=new TV(this),this.surveys=new rH(this),this.experiments=new bH(this),this.exceptions=new DV(this),this.rateLimiter=new sH(this),this.requestRouter=new vH(this),this.consent=new IU(this),this.externalIntegrations=new SH(this),this.people={set:(e,n,i)=>{var r=ln(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=ln(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>Ae.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,i){if(i&&i!==gu){var r,s=(r=gh[i])!==null&&r!==void 0?r:new g5;return s._init(e,n,i),gh[i]=s,gh[gu][i]=s,s}return this._init(e,n,i)}_init(e,n,i){var r,s;if(n===void 0&&(n={}),ve(e)||f1(e))return Ae.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ae.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(dn({},ON(n.defaults),IN(n),{name:i,token:e})),this.config.on_xhr_error&&Ae.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:Fo.GZipJS,this.persistence=new hx(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new hx(Se({},this.config,{persistence:"sessionStorage"}));var o=Se({},this.persistence.props),a=Se({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new aH(y=>this.Es(y),this.config.request_queue_config),this.Is=new cH(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new hH(this),this.sessionPropsManager=new fH(this,this.sessionManager,this.persistence)),new NV(this).startIfEnabledOrStop(),this.siteApps=new mH(this),(r=this.siteApps)==null||r.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new SV(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new CU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new RV(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new PV(this),this.exceptionObserver=new DU(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new EO(this,LU),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new JU(this),this.historyAutocapture.startIfEnabled(),Eo.DEBUG=Eo.DEBUG||this.config.debug,Eo.DEBUG&&Ae.info("Starting in debug mode",{this:this,config:n,thisC:Se({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,c,u=this.config.get_device_id(La()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?u:n.bootstrap.distinctID;this.persistence.set_property(wo,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var f,p,g=Object.keys(((f=n.bootstrap)==null?void 0:f.featureFlags)||{}).filter(y=>{var x;return!((x=n.bootstrap)==null||(x=x.featureFlags)==null||!x[y])}).reduce((y,x)=>{var w;return y[x]=((w=n.bootstrap)==null||(w=w.featureFlags)==null?void 0:w[x])||!1,y},{}),m=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(y=>g[y]).reduce((y,x)=>{var w,S;return(w=n.bootstrap)!=null&&(w=w.featureFlagPayloads)!=null&&w[x]&&(y[x]=(S=n.bootstrap)==null||(S=S.featureFlagPayloads)==null?void 0:S[x]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Om,$device_id:null},"");else if(!this.get_distinct_id()){var v=this.config.get_device_id(La());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(wo,"anonymous")}return Qt(q,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?kV(this,()=>this.Ts()):this.Ts(),zr(this.config._onCapture)&&this.config._onCapture!==F1&&(Ae.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this.config.ip&&Ae.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,i,r,s,o,a,l,c;if(!Ce||!Ce.body)return Ae.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=at(e.supportedCompression,Fo.GZipJS)?Fo.GZipJS:at(e.supportedCompression,Fo.Base64)?Fo.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(i=this.siteApps)==null||i.onRemoteConfig(e),(r=this.sessionRecording)==null||r.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Ae.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new oH(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||qa(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(p5?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=X0(e.url,{ip:this.config.ip?1:0}),e.headers=Se({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var i,r,s,o=Se({},n);o.timeout=o.timeout||6e4,o.url=X0(o.url,{_:new Date().getTime().toString(),ver:Eo.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"fetch",l=(r=(s=uO(mh,c=>c.transport===a))==null?void 0:s.method)!==null&&r!==void 0?r:mh[0].method;if(!l)throw new Error("No available transport method");l(o)})(Se({},e,{callback:n=>{var i,r;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((i=(r=this.config).on_request_error)==null||i.call(r,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,i=[],r=[],s=[];qa(e,a=>{a&&(n=a[0],Kt(n)?s.push(a):zr(a)?a.call(this):Kt(a)&&n==="alias"?i.push(a):Kt(a)&&n.indexOf("capture")!==-1&&zr(this[n])?s.push(a):r.push(a))});var o=function(a,l){qa(a,function(c){if(Kt(c[0])){var u=l;At(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(i,this),o(r,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!ve(e)&&ln(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!ln(n==null?void 0:n.$current_url)&&(Ae.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l=La(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(c.$set=i==null?void 0:i.$set);var u,d,f=this.Os(i==null?void 0:i.$set_once);if(f&&(c.$set_once=f),(c=cU(c,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,ve(i==null?void 0:i.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o),e===px.DISMISSED||e===px.SENT){var p=n==null?void 0:n[NN.SURVEY_ID],g=n==null?void 0:n[NN.SURVEY_ITERATION];localStorage.setItem((d=""+D1+(u={id:p,current_iteration:g}).id,u.current_iteration&&u.current_iteration>0&&(d=""+D1+u.id+"_"+u.current_iteration),d),"true"),c.$set=Se({},c.$set,{[nH({id:p,current_iteration:g},e===px.SENT?"responded":"dismissed")]:!0})}var m=Se({},c.properties.$set,c.$set);if(Eu(m)||this.setPersonPropertiesForFlags(m),!St(this.config.before_send)){var v=this.As(c);if(!v)return;c=v}this._s.emit("eventCaptured",c);var y={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this.Es(y):this.xs.enqueue(y),c}Ae.critical("This capture call is ignored due to client rate limiting.")}}else Ae.error("No event name provided to posthog.capture")}else Ae.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,i,r,s){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=Se({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=Se({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!ln(a.distinct_id)&&!li(a.distinct_id)||f1(a.distinct_id))&&Ae.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=JV(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,i.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&dn(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&dn(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.Is)==null?void 0:p.length}catch(y){a.$sdk_debug_error_capturing_properties=String(y)}if(this.requestRouter.region===Xf.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,r),a=dn(a,c),e==="$pageview"&&Ce&&(a.title=Ce.title),!ve(o)){var g=i.getTime()-o;a.$duration=parseFloat((g/1e3).toFixed(3))}Di&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=dn({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),Kt(this.config.property_denylist)?At(this.config.property_denylist,function(y){delete a[y]}):Ae.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var m=this.config.sanitize_properties;m&&(Ae.error("sanitize_properties is deprecated. Use before_send instead"),a=m(a,e));var v=this.Ds();return a.$process_person_profile=v,v&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var i=this.persistence.get_initial_props(),r=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=dn({},i,r||{},e||{}),o=this.config.sanitize_properties;return o&&(Ae.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,Eu(s)?void 0:s}register(e,n){var i;(i=this.persistence)==null||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)==null||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,i){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,i)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)==null?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,i){if(!this.__loaded||!this.persistence)return Ae.uninitializedWarning("posthog.identify");if(li(e)&&(e=e.toString(),Ae.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Ae.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==Om){if(this.Ls("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(Vf)&&(this.unregister(Vf),this.register({distinct_id:e}));var o=(this.persistence.get_property(wo)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(wo,"identified"),this.setPersonPropertiesForFlags(Se({},i||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.Ss=bN(e,n,i),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(z0))}}else Ae.critical('The string "'+Om+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Ae.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var i=bN(this.get_distinct_id(),e,n);this.Ss!==i?(this.setPersonPropertiesForFlags(Se({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=i):Ae.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,i){if(e&&n){if(this.Ls("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Se({},r,{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else Ae.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s;if(Ae.info("reset"),!this.__loaded)return Ae.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(i=this.sessionPersistence)==null||i.clear(),this.surveys.reset(),(r=this.persistence)==null||r.set_property(wo,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Om,$device_id:null},"");else{var a=this.config.get_device_id(La());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;r+="?t="+Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0)}return r}alias(e,n){return e===this.get_property(dO)?(Ae.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(ve(n)&&(n=this.get_distinct_id()),e!==n?(this.js(Vf,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Ae.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o,a=Se({},this.config);an(e)&&(dn(this.config,IN(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new hx(Se({},this.config,{persistence:"sessionStorage"})),Sn.O()&&Sn.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Eo.DEBUG=!0,Ae.info("set_config",{config:e,oldConfig:a,newConfig:Se({},this.config)})),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(r=this.autocapture)==null||r.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)==null||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var i=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(Se({},XU((r=>r instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:i}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:gu;return n!==gu&&(n=gu+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(wo))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(wo))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Eu(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Vf])&&((n=this.persistence)==null||(n=n.props)==null||!n[V0]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Ae.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(V0,!0),!0)}Ps(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((i=this.persistence)==null||i.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((r=this.sessionPersistence)==null||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(ve(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return cr?h5(cr,this.config.custom_blocked_useragents):void 0}Cs(){Ce&&(Ce.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:Ce.title},{send_instantly:!0}),this.ys&&(Ce.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),Qt(Ce,"visibilitychange",this.ys)))}debug(e){e===!1?(q==null||q.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(q==null||q.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,i,r,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Ae.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(i="advanced_disable_decide",r=!1,s=Ae,o=(n="advanced_disable_flags")in(e=l)&&!ve(e[n]),a=i in e&&!ve(e[i]),o?e[n]:a?(s&&s.warn("Config field '"+i+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[i]):r)}As(e){if(St(this.config.before_send))return e;var n=Kt(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),St(i)){var s="Event '"+e.event+"' was rejected in beforeSend function";return oU(e.event)?Ae.warn(s+". This can cause unexpected behavior."):Ae.info(s),null}i.properties&&!Eu(i.properties)||Ae.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(i)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=lU(t.prototype[e[n]])})(m5,["identify"]);var jN,Na=(jN=gh[gu]=new m5,function(){function t(){t.done||(t.done=!0,p5=!1,At(gh,function(e){e._dom_loaded()}))}Ce!=null&&Ce.addEventListener?Ce.readyState==="complete"?t():Qt(Ce,"DOMContentLoaded",t,{capture:!1}):q&&Ae.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),jN),v5=b.createContext({client:Na});function y5(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!r.includes(a)||!y5(t[a],e[a],n))return!1}return!0}function _H(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=b.useRef(null),o=b.useMemo(function(){return n?(i&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),r&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(i||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),Na)},[n,i,JSON.stringify(r)]);return b.useEffect(function(){if(!n){var a=s.current;a?(i!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),r&&!y5(r,a.options)&&Na.set_config(r),s.current={apiKey:i,options:r??{}}):(Na.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),Na.init(i,r),s.current={apiKey:i,options:r??{}})}},[n,i,JSON.stringify(r)]),Ft.createElement(v5.Provider,{value:{client:o}},e)}var B1=function(t,e){return B1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},B1(t,e)};function CH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");B1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var mx=function(t){return typeof t=="function"},EH={componentStack:null,error:null},AH={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){CH(e,t);function e(n){var i=t.call(this,n)||this;return i.state=EH,i}return e.prototype.componentDidCatch=function(n,i){var r=i.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:r});var o;mx(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,i=n.children,r=n.fallback,s=this.state;if(s.componentStack==null)return mx(i)?i():i;var o=mx(r)?Ft.createElement(r,{error:s.error,componentStack:s.componentStack}):r;return Ft.isValidElement(o)?o:(console.warn(AH.INVALID_FALLBACK),Ft.createElement(Ft.Fragment,null))},e.contextType=v5,e})(Ft.Component);var b5={exports:{}},kr={},x5={exports:{}},w5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,B){var ie=U.length;U.push(B);e:for(;0<ie;){var be=ie-1>>>1,J=U[be];if(0<r(J,B))U[be]=B,U[ie]=J,ie=be;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var B=U[0],ie=U.pop();if(ie!==B){U[0]=ie;e:for(var be=0,J=U.length,le=J>>>1;be<le;){var F=2*(be+1)-1,$=U[F],V=F+1,k=U[V];if(0>r($,ie))V<J&&0>r(k,$)?(U[be]=k,U[V]=ie,be=V):(U[be]=$,U[F]=ie,be=F);else if(V<J&&0>r(k,ie))U[be]=k,U[V]=ie,be=V;else break e}}return B}function r(U,B){var ie=U.sortIndex-B.sortIndex;return ie!==0?ie:U.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(U){for(var B=n(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=U)i(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function S(U){if(m=!1,w(U),!g)if(n(l)!==null)g=!0,X(_);else{var B=n(c);B!==null&&te(S,B.startTime-U)}}function _(U,B){g=!1,m&&(m=!1,y(N),N=-1),p=!0;var ie=f;try{for(w(B),d=n(l);d!==null&&(!(d.expirationTime>B)||U&&!O());){var be=d.callback;if(typeof be=="function"){d.callback=null,f=d.priorityLevel;var J=be(d.expirationTime<=B);B=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&i(l),w(B)}else i(l);d=n(l)}if(d!==null)var le=!0;else{var F=n(c);F!==null&&te(S,F.startTime-B),le=!1}return le}finally{d=null,f=ie,p=!1}}var E=!1,C=null,N=-1,M=5,I=-1;function O(){return!(t.unstable_now()-I<M)}function T(){if(C!==null){var U=t.unstable_now();I=U;var B=!0;try{B=C(!0,U)}finally{B?H():(E=!1,C=null)}}else E=!1}var H;if(typeof x=="function")H=function(){x(T)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,K=D.port2;D.port1.onmessage=T,H=function(){K.postMessage(null)}}else H=function(){v(T,0)};function X(U){C=U,E||(E=!0,H())}function te(U,B){N=v(function(){U(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,X(_))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var ie=f;f=B;try{return U()}finally{f=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,B){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ie=f;f=U;try{return B()}finally{f=ie}},t.unstable_scheduleCallback=function(U,B,ie){var be=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?be+ie:be):ie=be,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ie+J,U={id:u++,callback:B,priorityLevel:U,startTime:ie,expirationTime:J,sortIndex:-1},ie>be?(U.sortIndex=ie,e(c,U),n(l)===null&&U===n(c)&&(m?(y(N),N=-1):m=!0,te(S,ie-be))):(U.sortIndex=J,e(l,U),g||p||(g=!0,X(_))),U},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(U){var B=f;return function(){var ie=f;f=B;try{return U.apply(this,arguments)}finally{f=ie}}}})(w5);x5.exports=w5;var NH=x5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PH=b,br=NH;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var S5=new Set,Kh={};function Yc(t,e){Cd(t,e),Cd(t+"Capture",e)}function Cd(t,e){for(Kh[t]=e,t=0;t<e.length;t++)S5.add(e[t])}var Ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),z1=Object.prototype.hasOwnProperty,MH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LN={},DN={};function RH(t){return z1.call(DN,t)?!0:z1.call(LN,t)?!1:MH.test(t)?DN[t]=!0:(LN[t]=!0,!1)}function TH(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OH(t,e,n,i){if(e===null||typeof e>"u"||TH(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ci(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qn[t]=new Ci(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qn[e]=new Ci(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qn[t]=new Ci(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qn[t]=new Ci(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qn[t]=new Ci(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qn[t]=new Ci(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qn[t]=new Ci(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qn[t]=new Ci(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qn[t]=new Ci(t,5,!1,t.toLowerCase(),null,!1,!1)});var l_=/[\-:]([a-z])/g;function c_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(l_,c_);Qn[e]=new Ci(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(l_,c_);Qn[e]=new Ci(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(l_,c_);Qn[e]=new Ci(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qn[t]=new Ci(t,1,!1,t.toLowerCase(),null,!1,!1)});Qn.xlinkHref=new Ci("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qn[t]=new Ci(t,1,!1,t.toLowerCase(),null,!0,!0)});function u_(t,e,n,i){var r=Qn.hasOwnProperty(e)?Qn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OH(e,n,r,i)&&(n=null),i||r===null?RH(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ia=PH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vm=Symbol.for("react.element"),Pu=Symbol.for("react.portal"),Mu=Symbol.for("react.fragment"),d_=Symbol.for("react.strict_mode"),U1=Symbol.for("react.profiler"),k5=Symbol.for("react.provider"),_5=Symbol.for("react.context"),f_=Symbol.for("react.forward_ref"),V1=Symbol.for("react.suspense"),H1=Symbol.for("react.suspense_list"),h_=Symbol.for("react.memo"),xa=Symbol.for("react.lazy"),C5=Symbol.for("react.offscreen"),$N=Symbol.iterator;function bf(t){return t===null||typeof t!="object"?null:(t=$N&&t[$N]||t["@@iterator"],typeof t=="function"?t:null)}var rn=Object.assign,gx;function Jf(t){if(gx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gx=e&&e[1]||""}return`
`+gx+t}var vx=!1;function yx(t,e){if(!t||vx)return"";vx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{vx=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jf(t):""}function IH(t){switch(t.tag){case 5:return Jf(t.type);case 16:return Jf("Lazy");case 13:return Jf("Suspense");case 19:return Jf("SuspenseList");case 0:case 2:case 15:return t=yx(t.type,!1),t;case 11:return t=yx(t.type.render,!1),t;case 1:return t=yx(t.type,!0),t;default:return""}}function W1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mu:return"Fragment";case Pu:return"Portal";case U1:return"Profiler";case d_:return"StrictMode";case V1:return"Suspense";case H1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _5:return(t.displayName||"Context")+".Consumer";case k5:return(t._context.displayName||"Context")+".Provider";case f_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case h_:return e=t.displayName||null,e!==null?e:W1(t.type)||"Memo";case xa:e=t._payload,t=t._init;try{return W1(t(e))}catch{}}return null}function jH(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W1(e);case 8:return e===d_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function E5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LH(t){var e=E5(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hm(t){t._valueTracker||(t._valueTracker=LH(t))}function A5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=E5(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Z0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function G1(t,e){var n=e.checked;return rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function FN(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=cl(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function N5(t,e){e=e.checked,e!=null&&u_(t,"checked",e,!1)}function K1(t,e){N5(t,e);var n=cl(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?q1(t,e.type,n):e.hasOwnProperty("defaultValue")&&q1(t,e.type,cl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function BN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function q1(t,e,n){(e!=="number"||Z0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zf=Array.isArray;function Xu(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+cl(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Y1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return rn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Zf(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cl(n)}}function P5(t,e){var n=cl(e.value),i=cl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function UN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function M5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?M5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wm,R5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wm=Wm||document.createElement("div"),Wm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DH=["Webkit","ms","Moz","O"];Object.keys(vh).forEach(function(t){DH.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vh[e]=vh[t]})});function T5(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vh.hasOwnProperty(t)&&vh[t]?(""+e).trim():e+"px"}function O5(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=T5(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var $H=rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function J1(t,e){if(e){if($H[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function Z1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Q1=null;function p_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var eS=null,Ju=null,Zu=null;function VN(t){if(t=tm(t)){if(typeof eS!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=Ly(e),eS(t.stateNode,t.type,e))}}function I5(t){Ju?Zu?Zu.push(t):Zu=[t]:Ju=t}function j5(){if(Ju){var t=Ju,e=Zu;if(Zu=Ju=null,VN(t),e)for(t=0;t<e.length;t++)VN(e[t])}}function L5(t,e){return t(e)}function D5(){}var bx=!1;function $5(t,e,n){if(bx)return t(e,n);bx=!0;try{return L5(t,e,n)}finally{bx=!1,(Ju!==null||Zu!==null)&&(D5(),j5())}}function Yh(t,e){var n=t.stateNode;if(n===null)return null;var i=Ly(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var tS=!1;if(Ko)try{var xf={};Object.defineProperty(xf,"passive",{get:function(){tS=!0}}),window.addEventListener("test",xf,xf),window.removeEventListener("test",xf,xf)}catch{tS=!1}function FH(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var yh=!1,Q0=null,ev=!1,nS=null,BH={onError:function(t){yh=!0,Q0=t}};function zH(t,e,n,i,r,s,o,a,l){yh=!1,Q0=null,FH.apply(BH,arguments)}function UH(t,e,n,i,r,s,o,a,l){if(zH.apply(this,arguments),yh){if(yh){var c=Q0;yh=!1,Q0=null}else throw Error(ae(198));ev||(ev=!0,nS=c)}}function Xc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function F5(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function HN(t){if(Xc(t)!==t)throw Error(ae(188))}function VH(t){var e=t.alternate;if(!e){if(e=Xc(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return HN(r),t;if(s===i)return HN(r),e;s=s.sibling}throw Error(ae(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==i)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function B5(t){return t=VH(t),t!==null?z5(t):null}function z5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=z5(t);if(e!==null)return e;t=t.sibling}return null}var U5=br.unstable_scheduleCallback,WN=br.unstable_cancelCallback,HH=br.unstable_shouldYield,WH=br.unstable_requestPaint,fn=br.unstable_now,GH=br.unstable_getCurrentPriorityLevel,m_=br.unstable_ImmediatePriority,V5=br.unstable_UserBlockingPriority,tv=br.unstable_NormalPriority,KH=br.unstable_LowPriority,H5=br.unstable_IdlePriority,Ty=null,ro=null;function qH(t){if(ro&&typeof ro.onCommitFiberRoot=="function")try{ro.onCommitFiberRoot(Ty,t,void 0,(t.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:JH,YH=Math.log,XH=Math.LN2;function JH(t){return t>>>=0,t===0?32:31-(YH(t)/XH|0)|0}var Gm=64,Km=4194304;function Qf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Qf(a):(s&=o,s!==0&&(i=Qf(s)))}else o=n&~r,o!==0?i=Qf(o):s!==0&&(i=Qf(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-vs(e),r=1<<n,i|=t[n],e&=~r;return i}function ZH(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QH(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-vs(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=ZH(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function iS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function W5(){var t=Gm;return Gm<<=1,!(Gm&4194240)&&(Gm=64),t}function xx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vs(e),t[e]=n}function eW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-vs(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function g_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-vs(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ct=0;function G5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var K5,v_,q5,Y5,X5,rS=!1,qm=[],Xa=null,Ja=null,Za=null,Xh=new Map,Jh=new Map,Pa=[],tW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GN(t,e){switch(t){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":Xh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jh.delete(e.pointerId)}}function wf(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=tm(e),e!==null&&v_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function nW(t,e,n,i,r){switch(e){case"focusin":return Xa=wf(Xa,t,e,n,i,r),!0;case"dragenter":return Ja=wf(Ja,t,e,n,i,r),!0;case"mouseover":return Za=wf(Za,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Xh.set(s,wf(Xh.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Jh.set(s,wf(Jh.get(s)||null,t,e,n,i,r)),!0}return!1}function J5(t){var e=uc(t.target);if(e!==null){var n=Xc(e);if(n!==null){if(e=n.tag,e===13){if(e=F5(n),e!==null){t.blockedOn=e,X5(t.priority,function(){q5(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function r0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Q1=i,n.target.dispatchEvent(i),Q1=null}else return e=tm(n),e!==null&&v_(e),t.blockedOn=n,!1;e.shift()}return!0}function KN(t,e,n){r0(t)&&n.delete(e)}function iW(){rS=!1,Xa!==null&&r0(Xa)&&(Xa=null),Ja!==null&&r0(Ja)&&(Ja=null),Za!==null&&r0(Za)&&(Za=null),Xh.forEach(KN),Jh.forEach(KN)}function Sf(t,e){t.blockedOn===e&&(t.blockedOn=null,rS||(rS=!0,br.unstable_scheduleCallback(br.unstable_NormalPriority,iW)))}function Zh(t){function e(r){return Sf(r,t)}if(0<qm.length){Sf(qm[0],t);for(var n=1;n<qm.length;n++){var i=qm[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Xa!==null&&Sf(Xa,t),Ja!==null&&Sf(Ja,t),Za!==null&&Sf(Za,t),Xh.forEach(e),Jh.forEach(e),n=0;n<Pa.length;n++)i=Pa[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Pa.length&&(n=Pa[0],n.blockedOn===null);)J5(n),n.blockedOn===null&&Pa.shift()}var Qu=ia.ReactCurrentBatchConfig,iv=!0;function rW(t,e,n,i){var r=Ct,s=Qu.transition;Qu.transition=null;try{Ct=1,y_(t,e,n,i)}finally{Ct=r,Qu.transition=s}}function sW(t,e,n,i){var r=Ct,s=Qu.transition;Qu.transition=null;try{Ct=4,y_(t,e,n,i)}finally{Ct=r,Qu.transition=s}}function y_(t,e,n,i){if(iv){var r=sS(t,e,n,i);if(r===null)Mx(t,e,i,rv,n),GN(t,i);else if(nW(r,t,e,n,i))i.stopPropagation();else if(GN(t,i),e&4&&-1<tW.indexOf(t)){for(;r!==null;){var s=tm(r);if(s!==null&&K5(s),s=sS(t,e,n,i),s===null&&Mx(t,e,i,rv,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Mx(t,e,i,null,n)}}var rv=null;function sS(t,e,n,i){if(rv=null,t=p_(i),t=uc(t),t!==null)if(e=Xc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=F5(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rv=t,null}function Z5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GH()){case m_:return 1;case V5:return 4;case tv:case KH:return 16;case H5:return 536870912;default:return 16}default:return 16}}var Da=null,b_=null,s0=null;function Q5(){if(s0)return s0;var t,e=b_,n=e.length,i,r="value"in Da?Da.value:Da.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return s0=r.slice(t,1<i?1-i:void 0)}function o0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ym(){return!0}function qN(){return!1}function _r(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ym:qN,this.isPropagationStopped=qN,this}return rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ym)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ym)},persist:function(){},isPersistent:Ym}),e}var Qd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},x_=_r(Qd),em=rn({},Qd,{view:0,detail:0}),oW=_r(em),wx,Sx,kf,Oy=rn({},em,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:w_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kf&&(kf&&t.type==="mousemove"?(wx=t.screenX-kf.screenX,Sx=t.screenY-kf.screenY):Sx=wx=0,kf=t),wx)},movementY:function(t){return"movementY"in t?t.movementY:Sx}}),YN=_r(Oy),aW=rn({},Oy,{dataTransfer:0}),lW=_r(aW),cW=rn({},em,{relatedTarget:0}),kx=_r(cW),uW=rn({},Qd,{animationName:0,elapsedTime:0,pseudoElement:0}),dW=_r(uW),fW=rn({},Qd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hW=_r(fW),pW=rn({},Qd,{data:0}),XN=_r(pW),mW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vW[t])?!!e[t]:!1}function w_(){return yW}var bW=rn({},em,{key:function(t){if(t.key){var e=mW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=o0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:w_,charCode:function(t){return t.type==="keypress"?o0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?o0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xW=_r(bW),wW=rn({},Oy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JN=_r(wW),SW=rn({},em,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:w_}),kW=_r(SW),_W=rn({},Qd,{propertyName:0,elapsedTime:0,pseudoElement:0}),CW=_r(_W),EW=rn({},Oy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AW=_r(EW),NW=[9,13,27,32],S_=Ko&&"CompositionEvent"in window,bh=null;Ko&&"documentMode"in document&&(bh=document.documentMode);var PW=Ko&&"TextEvent"in window&&!bh,eI=Ko&&(!S_||bh&&8<bh&&11>=bh),ZN=" ",QN=!1;function tI(t,e){switch(t){case"keyup":return NW.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ru=!1;function MW(t,e){switch(t){case"compositionend":return nI(e);case"keypress":return e.which!==32?null:(QN=!0,ZN);case"textInput":return t=e.data,t===ZN&&QN?null:t;default:return null}}function RW(t,e){if(Ru)return t==="compositionend"||!S_&&tI(t,e)?(t=Q5(),s0=b_=Da=null,Ru=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eI&&e.locale!=="ko"?null:e.data;default:return null}}var TW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TW[t.type]:e==="textarea"}function iI(t,e,n,i){I5(i),e=sv(e,"onChange"),0<e.length&&(n=new x_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var xh=null,Qh=null;function OW(t){pI(t,0)}function Iy(t){var e=Iu(t);if(A5(e))return t}function IW(t,e){if(t==="change")return e}var rI=!1;if(Ko){var _x;if(Ko){var Cx="oninput"in document;if(!Cx){var tP=document.createElement("div");tP.setAttribute("oninput","return;"),Cx=typeof tP.oninput=="function"}_x=Cx}else _x=!1;rI=_x&&(!document.documentMode||9<document.documentMode)}function nP(){xh&&(xh.detachEvent("onpropertychange",sI),Qh=xh=null)}function sI(t){if(t.propertyName==="value"&&Iy(Qh)){var e=[];iI(e,Qh,t,p_(t)),$5(OW,e)}}function jW(t,e,n){t==="focusin"?(nP(),xh=e,Qh=n,xh.attachEvent("onpropertychange",sI)):t==="focusout"&&nP()}function LW(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Iy(Qh)}function DW(t,e){if(t==="click")return Iy(e)}function $W(t,e){if(t==="input"||t==="change")return Iy(e)}function FW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bs=typeof Object.is=="function"?Object.is:FW;function ep(t,e){if(bs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!z1.call(e,r)||!bs(t[r],e[r]))return!1}return!0}function iP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rP(t,e){var n=iP(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iP(n)}}function oI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aI(){for(var t=window,e=Z0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Z0(t.document)}return e}function k_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BW(t){var e=aI(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oI(n.ownerDocument.documentElement,n)){if(i!==null&&k_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=rP(n,s);var o=rP(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zW=Ko&&"documentMode"in document&&11>=document.documentMode,Tu=null,oS=null,wh=null,aS=!1;function sP(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;aS||Tu==null||Tu!==Z0(i)||(i=Tu,"selectionStart"in i&&k_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),wh&&ep(wh,i)||(wh=i,i=sv(oS,"onSelect"),0<i.length&&(e=new x_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Tu)))}function Xm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ou={animationend:Xm("Animation","AnimationEnd"),animationiteration:Xm("Animation","AnimationIteration"),animationstart:Xm("Animation","AnimationStart"),transitionend:Xm("Transition","TransitionEnd")},Ex={},lI={};Ko&&(lI=document.createElement("div").style,"AnimationEvent"in window||(delete Ou.animationend.animation,delete Ou.animationiteration.animation,delete Ou.animationstart.animation),"TransitionEvent"in window||delete Ou.transitionend.transition);function jy(t){if(Ex[t])return Ex[t];if(!Ou[t])return t;var e=Ou[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lI)return Ex[t]=e[n];return t}var cI=jy("animationend"),uI=jy("animationiteration"),dI=jy("animationstart"),fI=jy("transitionend"),hI=new Map,oP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Al(t,e){hI.set(t,e),Yc(e,[t])}for(var Ax=0;Ax<oP.length;Ax++){var Nx=oP[Ax],UW=Nx.toLowerCase(),VW=Nx[0].toUpperCase()+Nx.slice(1);Al(UW,"on"+VW)}Al(cI,"onAnimationEnd");Al(uI,"onAnimationIteration");Al(dI,"onAnimationStart");Al("dblclick","onDoubleClick");Al("focusin","onFocus");Al("focusout","onBlur");Al(fI,"onTransitionEnd");Cd("onMouseEnter",["mouseout","mouseover"]);Cd("onMouseLeave",["mouseout","mouseover"]);Cd("onPointerEnter",["pointerout","pointerover"]);Cd("onPointerLeave",["pointerout","pointerover"]);Yc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HW=new Set("cancel close invalid load scroll toggle".split(" ").concat(eh));function aP(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,UH(i,e,void 0,t),t.currentTarget=null}function pI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;aP(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;aP(r,a,c),s=l}}}if(ev)throw t=nS,ev=!1,nS=null,t}function Dt(t,e){var n=e[fS];n===void 0&&(n=e[fS]=new Set);var i=t+"__bubble";n.has(i)||(mI(e,t,2,!1),n.add(i))}function Px(t,e,n){var i=0;e&&(i|=4),mI(n,t,i,e)}var Jm="_reactListening"+Math.random().toString(36).slice(2);function tp(t){if(!t[Jm]){t[Jm]=!0,S5.forEach(function(n){n!=="selectionchange"&&(HW.has(n)||Px(n,!1,t),Px(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jm]||(e[Jm]=!0,Px("selectionchange",!1,e))}}function mI(t,e,n,i){switch(Z5(e)){case 1:var r=rW;break;case 4:r=sW;break;default:r=y_}n=r.bind(null,e,n,t),r=void 0,!tS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Mx(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=uc(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}$5(function(){var c=s,u=p_(n),d=[];e:{var f=hI.get(t);if(f!==void 0){var p=x_,g=t;switch(t){case"keypress":if(o0(n)===0)break e;case"keydown":case"keyup":p=xW;break;case"focusin":g="focus",p=kx;break;case"focusout":g="blur",p=kx;break;case"beforeblur":case"afterblur":p=kx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=YN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=lW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kW;break;case cI:case uI:case dI:p=dW;break;case fI:p=CW;break;case"scroll":p=oW;break;case"wheel":p=AW;break;case"copy":case"cut":case"paste":p=hW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=JN}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var x=c,w;x!==null;){w=x;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,y!==null&&(S=Yh(x,y),S!=null&&m.push(np(x,S,w)))),v)break;x=x.return}0<m.length&&(f=new p(f,g,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Q1&&(g=n.relatedTarget||n.fromElement)&&(uc(g)||g[qo]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?uc(g):null,g!==null&&(v=Xc(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=YN,S="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=JN,S="onPointerLeave",y="onPointerEnter",x="pointer"),v=p==null?f:Iu(p),w=g==null?f:Iu(g),f=new m(S,x+"leave",p,n,u),f.target=v,f.relatedTarget=w,S=null,uc(u)===c&&(m=new m(y,x+"enter",g,n,u),m.target=w,m.relatedTarget=v,S=m),v=S,p&&g)t:{for(m=p,y=g,x=0,w=m;w;w=iu(w))x++;for(w=0,S=y;S;S=iu(S))w++;for(;0<x-w;)m=iu(m),x--;for(;0<w-x;)y=iu(y),w--;for(;x--;){if(m===y||y!==null&&m===y.alternate)break t;m=iu(m),y=iu(y)}m=null}else m=null;p!==null&&lP(d,f,p,m,!1),g!==null&&v!==null&&lP(d,v,g,m,!0)}}e:{if(f=c?Iu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=IW;else if(eP(f))if(rI)_=$W;else{_=LW;var E=jW}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=DW);if(_&&(_=_(t,c))){iI(d,_,n,u);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&q1(f,"number",f.value)}switch(E=c?Iu(c):window,t){case"focusin":(eP(E)||E.contentEditable==="true")&&(Tu=E,oS=c,wh=null);break;case"focusout":wh=oS=Tu=null;break;case"mousedown":aS=!0;break;case"contextmenu":case"mouseup":case"dragend":aS=!1,sP(d,n,u);break;case"selectionchange":if(zW)break;case"keydown":case"keyup":sP(d,n,u)}var C;if(S_)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ru?tI(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(eI&&n.locale!=="ko"&&(Ru||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ru&&(C=Q5()):(Da=u,b_="value"in Da?Da.value:Da.textContent,Ru=!0)),E=sv(c,N),0<E.length&&(N=new XN(N,t,null,n,u),d.push({event:N,listeners:E}),C?N.data=C:(C=nI(n),C!==null&&(N.data=C)))),(C=PW?MW(t,n):RW(t,n))&&(c=sv(c,"onBeforeInput"),0<c.length&&(u=new XN("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}pI(d,e)})}function np(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Yh(t,n),s!=null&&i.unshift(np(t,s,r)),s=Yh(t,e),s!=null&&i.push(np(t,s,r))),t=t.return}return i}function iu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lP(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Yh(n,s),l!=null&&o.unshift(np(n,l,a))):r||(l=Yh(n,s),l!=null&&o.push(np(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var WW=/\r\n?/g,GW=/\u0000|\uFFFD/g;function cP(t){return(typeof t=="string"?t:""+t).replace(WW,`
`).replace(GW,"")}function Zm(t,e,n){if(e=cP(e),cP(t)!==e&&n)throw Error(ae(425))}function ov(){}var lS=null,cS=null;function uS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dS=typeof setTimeout=="function"?setTimeout:void 0,KW=typeof clearTimeout=="function"?clearTimeout:void 0,uP=typeof Promise=="function"?Promise:void 0,qW=typeof queueMicrotask=="function"?queueMicrotask:typeof uP<"u"?function(t){return uP.resolve(null).then(t).catch(YW)}:dS;function YW(t){setTimeout(function(){throw t})}function Rx(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Zh(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Zh(e)}function Qa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ef=Math.random().toString(36).slice(2),Hs="__reactFiber$"+ef,ip="__reactProps$"+ef,qo="__reactContainer$"+ef,fS="__reactEvents$"+ef,XW="__reactListeners$"+ef,JW="__reactHandles$"+ef;function uc(t){var e=t[Hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qo]||n[Hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dP(t);t!==null;){if(n=t[Hs])return n;t=dP(t)}return e}t=n,n=t.parentNode}return null}function tm(t){return t=t[Hs]||t[qo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Iu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function Ly(t){return t[ip]||null}var hS=[],ju=-1;function Nl(t){return{current:t}}function zt(t){0>ju||(t.current=hS[ju],hS[ju]=null,ju--)}function Lt(t,e){ju++,hS[ju]=t.current,t.current=e}var ul={},fi=Nl(ul),qi=Nl(!1),Pc=ul;function Ed(t,e){var n=t.type.contextTypes;if(!n)return ul;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Yi(t){return t=t.childContextTypes,t!=null}function av(){zt(qi),zt(fi)}function fP(t,e,n){if(fi.current!==ul)throw Error(ae(168));Lt(fi,e),Lt(qi,n)}function gI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ae(108,jH(t)||"Unknown",r));return rn({},n,i)}function lv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ul,Pc=fi.current,Lt(fi,t),Lt(qi,qi.current),!0}function hP(t,e,n){var i=t.stateNode;if(!i)throw Error(ae(169));n?(t=gI(t,e,Pc),i.__reactInternalMemoizedMergedChildContext=t,zt(qi),zt(fi),Lt(fi,t)):zt(qi),Lt(qi,n)}var Ao=null,Dy=!1,Tx=!1;function vI(t){Ao===null?Ao=[t]:Ao.push(t)}function ZW(t){Dy=!0,vI(t)}function Pl(){if(!Tx&&Ao!==null){Tx=!0;var t=0,e=Ct;try{var n=Ao;for(Ct=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ao=null,Dy=!1}catch(r){throw Ao!==null&&(Ao=Ao.slice(t+1)),U5(m_,Pl),r}finally{Ct=e,Tx=!1}}return null}var Lu=[],Du=0,cv=null,uv=0,Or=[],Ir=0,Mc=null,Uo=1,Vo="";function Ql(t,e){Lu[Du++]=uv,Lu[Du++]=cv,cv=t,uv=e}function yI(t,e,n){Or[Ir++]=Uo,Or[Ir++]=Vo,Or[Ir++]=Mc,Mc=t;var i=Uo;t=Vo;var r=32-vs(i)-1;i&=~(1<<r),n+=1;var s=32-vs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Uo=1<<32-vs(e)+r|n<<r|i,Vo=s+t}else Uo=1<<s|n<<r|i,Vo=t}function __(t){t.return!==null&&(Ql(t,1),yI(t,1,0))}function C_(t){for(;t===cv;)cv=Lu[--Du],Lu[Du]=null,uv=Lu[--Du],Lu[Du]=null;for(;t===Mc;)Mc=Or[--Ir],Or[Ir]=null,Vo=Or[--Ir],Or[Ir]=null,Uo=Or[--Ir],Or[Ir]=null}var gr=null,dr=null,qt=!1,us=null;function bI(t,e){var n=$r(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gr=t,dr=Qa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gr=t,dr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mc!==null?{id:Uo,overflow:Vo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$r(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gr=t,dr=null,!0):!1;default:return!1}}function pS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mS(t){if(qt){var e=dr;if(e){var n=e;if(!pP(t,e)){if(pS(t))throw Error(ae(418));e=Qa(n.nextSibling);var i=gr;e&&pP(t,e)?bI(i,n):(t.flags=t.flags&-4097|2,qt=!1,gr=t)}}else{if(pS(t))throw Error(ae(418));t.flags=t.flags&-4097|2,qt=!1,gr=t}}}function mP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gr=t}function Qm(t){if(t!==gr)return!1;if(!qt)return mP(t),qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uS(t.type,t.memoizedProps)),e&&(e=dr)){if(pS(t))throw xI(),Error(ae(418));for(;e;)bI(t,e),e=Qa(e.nextSibling)}if(mP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dr=Qa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dr=null}}else dr=gr?Qa(t.stateNode.nextSibling):null;return!0}function xI(){for(var t=dr;t;)t=Qa(t.nextSibling)}function Ad(){dr=gr=null,qt=!1}function E_(t){us===null?us=[t]:us.push(t)}var QW=ia.ReactCurrentBatchConfig;function _f(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var i=n.stateNode}if(!i)throw Error(ae(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function eg(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gP(t){var e=t._init;return e(t._payload)}function wI(t){function e(y,x){if(t){var w=y.deletions;w===null?(y.deletions=[x],y.flags|=16):w.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function i(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function r(y,x){return y=il(y,x),y.index=0,y.sibling=null,y}function s(y,x,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<x?(y.flags|=2,x):w):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,x,w,S){return x===null||x.tag!==6?(x=Fx(w,y.mode,S),x.return=y,x):(x=r(x,w),x.return=y,x)}function l(y,x,w,S){var _=w.type;return _===Mu?u(y,x,w.props.children,S,w.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===xa&&gP(_)===x.type)?(S=r(x,w.props),S.ref=_f(y,x,w),S.return=y,S):(S=h0(w.type,w.key,w.props,null,y.mode,S),S.ref=_f(y,x,w),S.return=y,S)}function c(y,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=Bx(w,y.mode,S),x.return=y,x):(x=r(x,w.children||[]),x.return=y,x)}function u(y,x,w,S,_){return x===null||x.tag!==7?(x=bc(w,y.mode,S,_),x.return=y,x):(x=r(x,w),x.return=y,x)}function d(y,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Fx(""+x,y.mode,w),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vm:return w=h0(x.type,x.key,x.props,null,y.mode,w),w.ref=_f(y,null,x),w.return=y,w;case Pu:return x=Bx(x,y.mode,w),x.return=y,x;case xa:var S=x._init;return d(y,S(x._payload),w)}if(Zf(x)||bf(x))return x=bc(x,y.mode,w,null),x.return=y,x;eg(y,x)}return null}function f(y,x,w,S){var _=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:a(y,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vm:return w.key===_?l(y,x,w,S):null;case Pu:return w.key===_?c(y,x,w,S):null;case xa:return _=w._init,f(y,x,_(w._payload),S)}if(Zf(w)||bf(w))return _!==null?null:u(y,x,w,S,null);eg(y,w)}return null}function p(y,x,w,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(w)||null,a(x,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Vm:return y=y.get(S.key===null?w:S.key)||null,l(x,y,S,_);case Pu:return y=y.get(S.key===null?w:S.key)||null,c(x,y,S,_);case xa:var E=S._init;return p(y,x,w,E(S._payload),_)}if(Zf(S)||bf(S))return y=y.get(w)||null,u(x,y,S,_,null);eg(x,S)}return null}function g(y,x,w,S){for(var _=null,E=null,C=x,N=x=0,M=null;C!==null&&N<w.length;N++){C.index>N?(M=C,C=null):M=C.sibling;var I=f(y,C,w[N],S);if(I===null){C===null&&(C=M);break}t&&C&&I.alternate===null&&e(y,C),x=s(I,x,N),E===null?_=I:E.sibling=I,E=I,C=M}if(N===w.length)return n(y,C),qt&&Ql(y,N),_;if(C===null){for(;N<w.length;N++)C=d(y,w[N],S),C!==null&&(x=s(C,x,N),E===null?_=C:E.sibling=C,E=C);return qt&&Ql(y,N),_}for(C=i(y,C);N<w.length;N++)M=p(C,y,N,w[N],S),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?N:M.key),x=s(M,x,N),E===null?_=M:E.sibling=M,E=M);return t&&C.forEach(function(O){return e(y,O)}),qt&&Ql(y,N),_}function m(y,x,w,S){var _=bf(w);if(typeof _!="function")throw Error(ae(150));if(w=_.call(w),w==null)throw Error(ae(151));for(var E=_=null,C=x,N=x=0,M=null,I=w.next();C!==null&&!I.done;N++,I=w.next()){C.index>N?(M=C,C=null):M=C.sibling;var O=f(y,C,I.value,S);if(O===null){C===null&&(C=M);break}t&&C&&O.alternate===null&&e(y,C),x=s(O,x,N),E===null?_=O:E.sibling=O,E=O,C=M}if(I.done)return n(y,C),qt&&Ql(y,N),_;if(C===null){for(;!I.done;N++,I=w.next())I=d(y,I.value,S),I!==null&&(x=s(I,x,N),E===null?_=I:E.sibling=I,E=I);return qt&&Ql(y,N),_}for(C=i(y,C);!I.done;N++,I=w.next())I=p(C,y,N,I.value,S),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?N:I.key),x=s(I,x,N),E===null?_=I:E.sibling=I,E=I);return t&&C.forEach(function(T){return e(y,T)}),qt&&Ql(y,N),_}function v(y,x,w,S){if(typeof w=="object"&&w!==null&&w.type===Mu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Vm:e:{for(var _=w.key,E=x;E!==null;){if(E.key===_){if(_=w.type,_===Mu){if(E.tag===7){n(y,E.sibling),x=r(E,w.props.children),x.return=y,y=x;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===xa&&gP(_)===E.type){n(y,E.sibling),x=r(E,w.props),x.ref=_f(y,E,w),x.return=y,y=x;break e}n(y,E);break}else e(y,E);E=E.sibling}w.type===Mu?(x=bc(w.props.children,y.mode,S,w.key),x.return=y,y=x):(S=h0(w.type,w.key,w.props,null,y.mode,S),S.ref=_f(y,x,w),S.return=y,y=S)}return o(y);case Pu:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(y,x.sibling),x=r(x,w.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=Bx(w,y.mode,S),x.return=y,y=x}return o(y);case xa:return E=w._init,v(y,x,E(w._payload),S)}if(Zf(w))return g(y,x,w,S);if(bf(w))return m(y,x,w,S);eg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(y,x.sibling),x=r(x,w),x.return=y,y=x):(n(y,x),x=Fx(w,y.mode,S),x.return=y,y=x),o(y)):n(y,x)}return v}var Nd=wI(!0),SI=wI(!1),dv=Nl(null),fv=null,$u=null,A_=null;function N_(){A_=$u=fv=null}function P_(t){var e=dv.current;zt(dv),t._currentValue=e}function gS(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ed(t,e){fv=t,A_=$u=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gi=!0),t.firstContext=null)}function Yr(t){var e=t._currentValue;if(A_!==t)if(t={context:t,memoizedValue:e,next:null},$u===null){if(fv===null)throw Error(ae(308));$u=t,fv.dependencies={lanes:0,firstContext:t}}else $u=$u.next=t;return e}var dc=null;function M_(t){dc===null?dc=[t]:dc.push(t)}function kI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,M_(e)):(n.next=r.next,r.next=n),e.interleaved=n,Yo(t,i)}function Yo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wa=!1;function R_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _I(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ho(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function el(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,vt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Yo(t,n)}return r=i.interleaved,r===null?(e.next=e,M_(i)):(e.next=r.next,r.next=e),i.interleaved=e,Yo(t,n)}function a0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,g_(t,n)}}function vP(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hv(t,e,n,i){var r=t.updateQueue;wa=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=rn({},d,f);break e;case 2:wa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Tc|=o,t.lanes=o,t.memoizedState=d}}function yP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ae(191,r));r.call(i)}}}var nm={},so=Nl(nm),rp=Nl(nm),sp=Nl(nm);function fc(t){if(t===nm)throw Error(ae(174));return t}function T_(t,e){switch(Lt(sp,e),Lt(rp,t),Lt(so,nm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:X1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=X1(e,t)}zt(so),Lt(so,e)}function Pd(){zt(so),zt(rp),zt(sp)}function CI(t){fc(sp.current);var e=fc(so.current),n=X1(e,t.type);e!==n&&(Lt(rp,t),Lt(so,n))}function O_(t){rp.current===t&&(zt(so),zt(rp))}var Zt=Nl(0);function pv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ox=[];function I_(){for(var t=0;t<Ox.length;t++)Ox[t]._workInProgressVersionPrimary=null;Ox.length=0}var l0=ia.ReactCurrentDispatcher,Ix=ia.ReactCurrentBatchConfig,Rc=0,nn=null,wn=null,Tn=null,mv=!1,Sh=!1,op=0,eG=0;function ii(){throw Error(ae(321))}function j_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bs(t[n],e[n]))return!1;return!0}function L_(t,e,n,i,r,s){if(Rc=s,nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,l0.current=t===null||t.memoizedState===null?rG:sG,t=n(i,r),Sh){s=0;do{if(Sh=!1,op=0,25<=s)throw Error(ae(301));s+=1,Tn=wn=null,e.updateQueue=null,l0.current=oG,t=n(i,r)}while(Sh)}if(l0.current=gv,e=wn!==null&&wn.next!==null,Rc=0,Tn=wn=nn=null,mv=!1,e)throw Error(ae(300));return t}function D_(){var t=op!==0;return op=0,t}function js(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?nn.memoizedState=Tn=t:Tn=Tn.next=t,Tn}function Xr(){if(wn===null){var t=nn.alternate;t=t!==null?t.memoizedState:null}else t=wn.next;var e=Tn===null?nn.memoizedState:Tn.next;if(e!==null)Tn=e,wn=t;else{if(t===null)throw Error(ae(310));wn=t,t={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},Tn===null?nn.memoizedState=Tn=t:Tn=Tn.next=t}return Tn}function ap(t,e){return typeof e=="function"?e(t):e}function jx(t){var e=Xr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=wn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Rc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,nn.lanes|=u,Tc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,bs(i,e.memoizedState)||(Gi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,nn.lanes|=s,Tc|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Lx(t){var e=Xr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);bs(s,e.memoizedState)||(Gi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function EI(){}function AI(t,e){var n=nn,i=Xr(),r=e(),s=!bs(i.memoizedState,r);if(s&&(i.memoizedState=r,Gi=!0),i=i.queue,$_(MI.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,lp(9,PI.bind(null,n,i,r,e),void 0,null),In===null)throw Error(ae(349));Rc&30||NI(n,e,r)}return r}function NI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nn.updateQueue,e===null?(e={lastEffect:null,stores:null},nn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function PI(t,e,n,i){e.value=n,e.getSnapshot=i,RI(e)&&TI(t)}function MI(t,e,n){return n(function(){RI(e)&&TI(t)})}function RI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bs(t,n)}catch{return!0}}function TI(t){var e=Yo(t,1);e!==null&&ys(e,t,1,-1)}function bP(t){var e=js();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ap,lastRenderedState:t},e.queue=t,t=t.dispatch=iG.bind(null,nn,t),[e.memoizedState,t]}function lp(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=nn.updateQueue,e===null?(e={lastEffect:null,stores:null},nn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function OI(){return Xr().memoizedState}function c0(t,e,n,i){var r=js();nn.flags|=t,r.memoizedState=lp(1|e,n,void 0,i===void 0?null:i)}function $y(t,e,n,i){var r=Xr();i=i===void 0?null:i;var s=void 0;if(wn!==null){var o=wn.memoizedState;if(s=o.destroy,i!==null&&j_(i,o.deps)){r.memoizedState=lp(e,n,s,i);return}}nn.flags|=t,r.memoizedState=lp(1|e,n,s,i)}function xP(t,e){return c0(8390656,8,t,e)}function $_(t,e){return $y(2048,8,t,e)}function II(t,e){return $y(4,2,t,e)}function jI(t,e){return $y(4,4,t,e)}function LI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DI(t,e,n){return n=n!=null?n.concat([t]):null,$y(4,4,LI.bind(null,e,t),n)}function F_(){}function $I(t,e){var n=Xr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&j_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function FI(t,e){var n=Xr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&j_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function BI(t,e,n){return Rc&21?(bs(n,e)||(n=W5(),nn.lanes|=n,Tc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gi=!0),t.memoizedState=n)}function tG(t,e){var n=Ct;Ct=n!==0&&4>n?n:4,t(!0);var i=Ix.transition;Ix.transition={};try{t(!1),e()}finally{Ct=n,Ix.transition=i}}function zI(){return Xr().memoizedState}function nG(t,e,n){var i=nl(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},UI(t))VI(e,n);else if(n=kI(t,e,n,i),n!==null){var r=xi();ys(n,t,i,r),HI(n,e,i)}}function iG(t,e,n){var i=nl(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(UI(t))VI(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,bs(a,o)){var l=e.interleaved;l===null?(r.next=r,M_(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=kI(t,e,r,i),n!==null&&(r=xi(),ys(n,t,i,r),HI(n,e,i))}}function UI(t){var e=t.alternate;return t===nn||e!==null&&e===nn}function VI(t,e){Sh=mv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function HI(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,g_(t,n)}}var gv={readContext:Yr,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},rG={readContext:Yr,useCallback:function(t,e){return js().memoizedState=[t,e===void 0?null:e],t},useContext:Yr,useEffect:xP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,c0(4194308,4,LI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return c0(4194308,4,t,e)},useInsertionEffect:function(t,e){return c0(4,2,t,e)},useMemo:function(t,e){var n=js();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=js();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=nG.bind(null,nn,t),[i.memoizedState,t]},useRef:function(t){var e=js();return t={current:t},e.memoizedState=t},useState:bP,useDebugValue:F_,useDeferredValue:function(t){return js().memoizedState=t},useTransition:function(){var t=bP(!1),e=t[0];return t=tG.bind(null,t[1]),js().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=nn,r=js();if(qt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),In===null)throw Error(ae(349));Rc&30||NI(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,xP(MI.bind(null,i,s,t),[t]),i.flags|=2048,lp(9,PI.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=js(),e=In.identifierPrefix;if(qt){var n=Vo,i=Uo;n=(i&~(1<<32-vs(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=op++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=eG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sG={readContext:Yr,useCallback:$I,useContext:Yr,useEffect:$_,useImperativeHandle:DI,useInsertionEffect:II,useLayoutEffect:jI,useMemo:FI,useReducer:jx,useRef:OI,useState:function(){return jx(ap)},useDebugValue:F_,useDeferredValue:function(t){var e=Xr();return BI(e,wn.memoizedState,t)},useTransition:function(){var t=jx(ap)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:EI,useSyncExternalStore:AI,useId:zI,unstable_isNewReconciler:!1},oG={readContext:Yr,useCallback:$I,useContext:Yr,useEffect:$_,useImperativeHandle:DI,useInsertionEffect:II,useLayoutEffect:jI,useMemo:FI,useReducer:Lx,useRef:OI,useState:function(){return Lx(ap)},useDebugValue:F_,useDeferredValue:function(t){var e=Xr();return wn===null?e.memoizedState=t:BI(e,wn.memoizedState,t)},useTransition:function(){var t=Lx(ap)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:EI,useSyncExternalStore:AI,useId:zI,unstable_isNewReconciler:!1};function ss(t,e){if(t&&t.defaultProps){e=rn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vS(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:rn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fy={isMounted:function(t){return(t=t._reactInternals)?Xc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=xi(),r=nl(t),s=Ho(i,r);s.payload=e,n!=null&&(s.callback=n),e=el(t,s,r),e!==null&&(ys(e,t,r,i),a0(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=xi(),r=nl(t),s=Ho(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=el(t,s,r),e!==null&&(ys(e,t,r,i),a0(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xi(),i=nl(t),r=Ho(n,i);r.tag=2,e!=null&&(r.callback=e),e=el(t,r,i),e!==null&&(ys(e,t,i,n),a0(e,t,i))}};function wP(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ep(n,i)||!ep(r,s):!0}function WI(t,e,n){var i=!1,r=ul,s=e.contextType;return typeof s=="object"&&s!==null?s=Yr(s):(r=Yi(e)?Pc:fi.current,i=e.contextTypes,s=(i=i!=null)?Ed(t,r):ul),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fy,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function SP(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Fy.enqueueReplaceState(e,e.state,null)}function yS(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},R_(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Yr(s):(s=Yi(e)?Pc:fi.current,r.context=Ed(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(vS(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Fy.enqueueReplaceState(r,r.state,null),hv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Md(t,e){try{var n="",i=e;do n+=IH(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Dx(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var aG=typeof WeakMap=="function"?WeakMap:Map;function GI(t,e,n){n=Ho(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){yv||(yv=!0,PS=i),bS(t,e)},n}function KI(t,e,n){n=Ho(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){bS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bS(t,e),typeof i!="function"&&(tl===null?tl=new Set([this]):tl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kP(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new aG;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=wG.bind(null,t,e,n),e.then(t,t))}function _P(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function CP(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ho(-1,1),e.tag=2,el(n,e,1))),n.lanes|=1),t)}var lG=ia.ReactCurrentOwner,Gi=!1;function bi(t,e,n,i){e.child=t===null?SI(e,null,n,i):Nd(e,t.child,n,i)}function EP(t,e,n,i,r){n=n.render;var s=e.ref;return ed(e,r),i=L_(t,e,n,i,s,r),n=D_(),t!==null&&!Gi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Xo(t,e,r)):(qt&&n&&__(e),e.flags|=1,bi(t,e,i,r),e.child)}function AP(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!K_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qI(t,e,s,i,r)):(t=h0(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ep,n(o,i)&&t.ref===e.ref)return Xo(t,e,r)}return e.flags|=1,t=il(s,i),t.ref=e.ref,t.return=e,e.child=t}function qI(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(ep(s,i)&&t.ref===e.ref)if(Gi=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Gi=!0);else return e.lanes=t.lanes,Xo(t,e,r)}return xS(t,e,n,i,r)}function YI(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Bu,sr),sr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Lt(Bu,sr),sr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Lt(Bu,sr),sr|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Lt(Bu,sr),sr|=i;return bi(t,e,r,n),e.child}function XI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xS(t,e,n,i,r){var s=Yi(n)?Pc:fi.current;return s=Ed(e,s),ed(e,r),n=L_(t,e,n,i,s,r),i=D_(),t!==null&&!Gi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Xo(t,e,r)):(qt&&i&&__(e),e.flags|=1,bi(t,e,n,r),e.child)}function NP(t,e,n,i,r){if(Yi(n)){var s=!0;lv(e)}else s=!1;if(ed(e,r),e.stateNode===null)u0(t,e),WI(e,n,i),yS(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Yr(c):(c=Yi(n)?Pc:fi.current,c=Ed(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&SP(e,o,i,c),wa=!1;var f=e.memoizedState;o.state=f,hv(e,i,o,r),l=e.memoizedState,a!==i||f!==l||qi.current||wa?(typeof u=="function"&&(vS(e,n,u,i),l=e.memoizedState),(a=wa||wP(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,_I(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ss(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Yr(l):(l=Yi(n)?Pc:fi.current,l=Ed(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&SP(e,o,i,l),wa=!1,f=e.memoizedState,o.state=f,hv(e,i,o,r);var g=e.memoizedState;a!==d||f!==g||qi.current||wa?(typeof p=="function"&&(vS(e,n,p,i),g=e.memoizedState),(c=wa||wP(e,n,c,i,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return wS(t,e,n,i,s,r)}function wS(t,e,n,i,r,s){XI(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&hP(e,n,!1),Xo(t,e,s);i=e.stateNode,lG.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Nd(e,t.child,null,s),e.child=Nd(e,null,a,s)):bi(t,e,a,s),e.memoizedState=i.state,r&&hP(e,n,!0),e.child}function JI(t){var e=t.stateNode;e.pendingContext?fP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fP(t,e.context,!1),T_(t,e.containerInfo)}function PP(t,e,n,i,r){return Ad(),E_(r),e.flags|=256,bi(t,e,n,i),e.child}var SS={dehydrated:null,treeContext:null,retryLane:0};function kS(t){return{baseLanes:t,cachePool:null,transitions:null}}function ZI(t,e,n){var i=e.pendingProps,r=Zt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Lt(Zt,r&1),t===null)return mS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Uy(o,i,0,null),t=bc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=kS(n),e.memoizedState=SS,t):B_(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return cG(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=il(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=il(a,s):(s=bc(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?kS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=SS,i}return s=t.child,t=s.sibling,i=il(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function B_(t,e){return e=Uy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tg(t,e,n,i){return i!==null&&E_(i),Nd(e,t.child,null,n),t=B_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cG(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Dx(Error(ae(422))),tg(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Uy({mode:"visible",children:i.children},r,0,null),s=bc(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Nd(e,t.child,null,o),e.child.memoizedState=kS(o),e.memoizedState=SS,s);if(!(e.mode&1))return tg(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ae(419)),i=Dx(s,i,void 0),tg(t,e,o,i)}if(a=(o&t.childLanes)!==0,Gi||a){if(i=In,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Yo(t,r),ys(i,t,r,-1))}return G_(),i=Dx(Error(ae(421))),tg(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=SG.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,dr=Qa(r.nextSibling),gr=e,qt=!0,us=null,t!==null&&(Or[Ir++]=Uo,Or[Ir++]=Vo,Or[Ir++]=Mc,Uo=t.id,Vo=t.overflow,Mc=e),e=B_(e,i.children),e.flags|=4096,e)}function MP(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),gS(t.return,e,n)}function $x(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function QI(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(bi(t,e,i.children,n),i=Zt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&MP(t,n,e);else if(t.tag===19)MP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Lt(Zt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&pv(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),$x(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&pv(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}$x(e,!0,n,null,s);break;case"together":$x(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function u0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Tc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=il(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=il(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uG(t,e,n){switch(e.tag){case 3:JI(e),Ad();break;case 5:CI(e);break;case 1:Yi(e.type)&&lv(e);break;case 4:T_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Lt(dv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Lt(Zt,Zt.current&1),e.flags|=128,null):n&e.child.childLanes?ZI(t,e,n):(Lt(Zt,Zt.current&1),t=Xo(t,e,n),t!==null?t.sibling:null);Lt(Zt,Zt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return QI(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Lt(Zt,Zt.current),i)break;return null;case 22:case 23:return e.lanes=0,YI(t,e,n)}return Xo(t,e,n)}var ej,_S,tj,nj;ej=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_S=function(){};tj=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,fc(so.current);var s=null;switch(n){case"input":r=G1(t,r),i=G1(t,i),s=[];break;case"select":r=rn({},r,{value:void 0}),i=rn({},i,{value:void 0}),s=[];break;case"textarea":r=Y1(t,r),i=Y1(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ov)}J1(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Kh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Kh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Dt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};nj=function(t,e,n,i){n!==i&&(e.flags|=4)};function Cf(t,e){if(!qt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ri(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function dG(t,e,n){var i=e.pendingProps;switch(C_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(e),null;case 1:return Yi(e.type)&&av(),ri(e),null;case 3:return i=e.stateNode,Pd(),zt(qi),zt(fi),I_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Qm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,us!==null&&(TS(us),us=null))),_S(t,e),ri(e),null;case 5:O_(e);var r=fc(sp.current);if(n=e.type,t!==null&&e.stateNode!=null)tj(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ae(166));return ri(e),null}if(t=fc(so.current),Qm(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Hs]=e,i[ip]=s,t=(e.mode&1)!==0,n){case"dialog":Dt("cancel",i),Dt("close",i);break;case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(r=0;r<eh.length;r++)Dt(eh[r],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"details":Dt("toggle",i);break;case"input":FN(i,s),Dt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Dt("invalid",i);break;case"textarea":zN(i,s),Dt("invalid",i)}J1(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Zm(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Zm(i.textContent,a,t),r=["children",""+a]):Kh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Dt("scroll",i)}switch(n){case"input":Hm(i),BN(i,s,!0);break;case"textarea":Hm(i),UN(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=ov)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=M5(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Hs]=e,t[ip]=i,ej(t,e,!1,!1),e.stateNode=t;e:{switch(o=Z1(n,i),n){case"dialog":Dt("cancel",t),Dt("close",t),r=i;break;case"iframe":case"object":case"embed":Dt("load",t),r=i;break;case"video":case"audio":for(r=0;r<eh.length;r++)Dt(eh[r],t);r=i;break;case"source":Dt("error",t),r=i;break;case"img":case"image":case"link":Dt("error",t),Dt("load",t),r=i;break;case"details":Dt("toggle",t),r=i;break;case"input":FN(t,i),r=G1(t,i),Dt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=rn({},i,{value:void 0}),Dt("invalid",t);break;case"textarea":zN(t,i),r=Y1(t,i),Dt("invalid",t);break;default:r=i}J1(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?O5(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&R5(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&qh(t,l):typeof l=="number"&&qh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Kh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Dt("scroll",t):l!=null&&u_(t,s,l,o))}switch(n){case"input":Hm(t),BN(t,i,!1);break;case"textarea":Hm(t),UN(t);break;case"option":i.value!=null&&t.setAttribute("value",""+cl(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Xu(t,!!i.multiple,s,!1):i.defaultValue!=null&&Xu(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ov)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ri(e),null;case 6:if(t&&e.stateNode!=null)nj(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ae(166));if(n=fc(sp.current),fc(so.current),Qm(e)){if(i=e.stateNode,n=e.memoizedProps,i[Hs]=e,(s=i.nodeValue!==n)&&(t=gr,t!==null))switch(t.tag){case 3:Zm(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zm(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Hs]=e,e.stateNode=i}return ri(e),null;case 13:if(zt(Zt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qt&&dr!==null&&e.mode&1&&!(e.flags&128))xI(),Ad(),e.flags|=98560,s=!1;else if(s=Qm(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Hs]=e}else Ad(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ri(e),s=!1}else us!==null&&(TS(us),us=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Zt.current&1?En===0&&(En=3):G_())),e.updateQueue!==null&&(e.flags|=4),ri(e),null);case 4:return Pd(),_S(t,e),t===null&&tp(e.stateNode.containerInfo),ri(e),null;case 10:return P_(e.type._context),ri(e),null;case 17:return Yi(e.type)&&av(),ri(e),null;case 19:if(zt(Zt),s=e.memoizedState,s===null)return ri(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Cf(s,!1);else{if(En!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pv(t),o!==null){for(e.flags|=128,Cf(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Lt(Zt,Zt.current&1|2),e.child}t=t.sibling}s.tail!==null&&fn()>Rd&&(e.flags|=128,i=!0,Cf(s,!1),e.lanes=4194304)}else{if(!i)if(t=pv(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Cf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!qt)return ri(e),null}else 2*fn()-s.renderingStartTime>Rd&&n!==1073741824&&(e.flags|=128,i=!0,Cf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fn(),e.sibling=null,n=Zt.current,Lt(Zt,i?n&1|2:n&1),e):(ri(e),null);case 22:case 23:return W_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?sr&1073741824&&(ri(e),e.subtreeFlags&6&&(e.flags|=8192)):ri(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function fG(t,e){switch(C_(e),e.tag){case 1:return Yi(e.type)&&av(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pd(),zt(qi),zt(fi),I_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return O_(e),null;case 13:if(zt(Zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Ad()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zt(Zt),null;case 4:return Pd(),null;case 10:return P_(e.type._context),null;case 22:case 23:return W_(),null;case 24:return null;default:return null}}var ng=!1,ci=!1,hG=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function Fu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){on(t,e,i)}else n.current=null}function CS(t,e,n){try{n()}catch(i){on(t,e,i)}}var RP=!1;function pG(t,e){if(lS=iv,t=aI(),k_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cS={focusedElem:t,selectionRange:n},iv=!1,Ne=e;Ne!==null;)if(e=Ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ne=t;else for(;Ne!==null;){e=Ne;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ss(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(S){on(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Ne=t;break}Ne=e.return}return g=RP,RP=!1,g}function kh(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&CS(e,n,s)}r=r.next}while(r!==i)}}function By(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ES(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ij(t){var e=t.alternate;e!==null&&(t.alternate=null,ij(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hs],delete e[ip],delete e[fS],delete e[XW],delete e[JW])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rj(t){return t.tag===5||t.tag===3||t.tag===4}function TP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function AS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ov));else if(i!==4&&(t=t.child,t!==null))for(AS(t,e,n),t=t.sibling;t!==null;)AS(t,e,n),t=t.sibling}function NS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(NS(t,e,n),t=t.sibling;t!==null;)NS(t,e,n),t=t.sibling}var Bn=null,cs=!1;function ha(t,e,n){for(n=n.child;n!==null;)sj(t,e,n),n=n.sibling}function sj(t,e,n){if(ro&&typeof ro.onCommitFiberUnmount=="function")try{ro.onCommitFiberUnmount(Ty,n)}catch{}switch(n.tag){case 5:ci||Fu(n,e);case 6:var i=Bn,r=cs;Bn=null,ha(t,e,n),Bn=i,cs=r,Bn!==null&&(cs?(t=Bn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bn.removeChild(n.stateNode));break;case 18:Bn!==null&&(cs?(t=Bn,n=n.stateNode,t.nodeType===8?Rx(t.parentNode,n):t.nodeType===1&&Rx(t,n),Zh(t)):Rx(Bn,n.stateNode));break;case 4:i=Bn,r=cs,Bn=n.stateNode.containerInfo,cs=!0,ha(t,e,n),Bn=i,cs=r;break;case 0:case 11:case 14:case 15:if(!ci&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&CS(n,e,o),r=r.next}while(r!==i)}ha(t,e,n);break;case 1:if(!ci&&(Fu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){on(n,e,a)}ha(t,e,n);break;case 21:ha(t,e,n);break;case 22:n.mode&1?(ci=(i=ci)||n.memoizedState!==null,ha(t,e,n),ci=i):ha(t,e,n);break;default:ha(t,e,n)}}function OP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hG),e.forEach(function(i){var r=kG.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ts(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bn=a.stateNode,cs=!1;break e;case 3:Bn=a.stateNode.containerInfo,cs=!0;break e;case 4:Bn=a.stateNode.containerInfo,cs=!0;break e}a=a.return}if(Bn===null)throw Error(ae(160));sj(s,o,r),Bn=null,cs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){on(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oj(e,t),e=e.sibling}function oj(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ts(e,t),Ns(t),i&4){try{kh(3,t,t.return),By(3,t)}catch(m){on(t,t.return,m)}try{kh(5,t,t.return)}catch(m){on(t,t.return,m)}}break;case 1:ts(e,t),Ns(t),i&512&&n!==null&&Fu(n,n.return);break;case 5:if(ts(e,t),Ns(t),i&512&&n!==null&&Fu(n,n.return),t.flags&32){var r=t.stateNode;try{qh(r,"")}catch(m){on(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&N5(r,s),Z1(a,o);var c=Z1(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?O5(r,d):u==="dangerouslySetInnerHTML"?R5(r,d):u==="children"?qh(r,d):u_(r,u,d,c)}switch(a){case"input":K1(r,s);break;case"textarea":P5(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Xu(r,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Xu(r,!!s.multiple,s.defaultValue,!0):Xu(r,!!s.multiple,s.multiple?[]:"",!1))}r[ip]=s}catch(m){on(t,t.return,m)}}break;case 6:if(ts(e,t),Ns(t),i&4){if(t.stateNode===null)throw Error(ae(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){on(t,t.return,m)}}break;case 3:if(ts(e,t),Ns(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Zh(e.containerInfo)}catch(m){on(t,t.return,m)}break;case 4:ts(e,t),Ns(t);break;case 13:ts(e,t),Ns(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(V_=fn())),i&4&&OP(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ci=(c=ci)||u,ts(e,t),ci=c):ts(e,t),Ns(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ne=t,u=t.child;u!==null;){for(d=Ne=u;Ne!==null;){switch(f=Ne,p=f.child,f.tag){case 0:case 11:case 14:case 15:kh(4,f,f.return);break;case 1:Fu(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){on(i,n,m)}}break;case 5:Fu(f,f.return);break;case 22:if(f.memoizedState!==null){jP(d);continue}}p!==null?(p.return=f,Ne=p):jP(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=T5("display",o))}catch(m){on(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){on(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ts(e,t),Ns(t),i&4&&OP(t);break;case 21:break;default:ts(e,t),Ns(t)}}function Ns(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rj(n)){var i=n;break e}n=n.return}throw Error(ae(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(qh(r,""),i.flags&=-33);var s=TP(t);NS(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=TP(t);AS(t,a,o);break;default:throw Error(ae(161))}}catch(l){on(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mG(t,e,n){Ne=t,aj(t)}function aj(t,e,n){for(var i=(t.mode&1)!==0;Ne!==null;){var r=Ne,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||ng;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||ci;a=ng;var c=ci;if(ng=o,(ci=l)&&!c)for(Ne=r;Ne!==null;)o=Ne,l=o.child,o.tag===22&&o.memoizedState!==null?LP(r):l!==null?(l.return=o,Ne=l):LP(r);for(;s!==null;)Ne=s,aj(s),s=s.sibling;Ne=r,ng=a,ci=c}IP(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ne=s):IP(t)}}function IP(t){for(;Ne!==null;){var e=Ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ci||By(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ci)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ss(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yP(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yP(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Zh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}ci||e.flags&512&&ES(e)}catch(f){on(e,e.return,f)}}if(e===t){Ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function jP(t){for(;Ne!==null;){var e=Ne;if(e===t){Ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function LP(t){for(;Ne!==null;){var e=Ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{By(4,e)}catch(l){on(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){on(e,r,l)}}var s=e.return;try{ES(e)}catch(l){on(e,s,l)}break;case 5:var o=e.return;try{ES(e)}catch(l){on(e,o,l)}}}catch(l){on(e,e.return,l)}if(e===t){Ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ne=a;break}Ne=e.return}}var gG=Math.ceil,vv=ia.ReactCurrentDispatcher,z_=ia.ReactCurrentOwner,Hr=ia.ReactCurrentBatchConfig,vt=0,In=null,yn=null,Zn=0,sr=0,Bu=Nl(0),En=0,cp=null,Tc=0,zy=0,U_=0,_h=null,zi=null,V_=0,Rd=1/0,ko=null,yv=!1,PS=null,tl=null,ig=!1,$a=null,bv=0,Ch=0,MS=null,d0=-1,f0=0;function xi(){return vt&6?fn():d0!==-1?d0:d0=fn()}function nl(t){return t.mode&1?vt&2&&Zn!==0?Zn&-Zn:QW.transition!==null?(f0===0&&(f0=W5()),f0):(t=Ct,t!==0||(t=window.event,t=t===void 0?16:Z5(t.type)),t):1}function ys(t,e,n,i){if(50<Ch)throw Ch=0,MS=null,Error(ae(185));Qp(t,n,i),(!(vt&2)||t!==In)&&(t===In&&(!(vt&2)&&(zy|=n),En===4&&Ma(t,Zn)),Xi(t,i),n===1&&vt===0&&!(e.mode&1)&&(Rd=fn()+500,Dy&&Pl()))}function Xi(t,e){var n=t.callbackNode;QH(t,e);var i=nv(t,t===In?Zn:0);if(i===0)n!==null&&WN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&WN(n),e===1)t.tag===0?ZW(DP.bind(null,t)):vI(DP.bind(null,t)),qW(function(){!(vt&6)&&Pl()}),n=null;else{switch(G5(i)){case 1:n=m_;break;case 4:n=V5;break;case 16:n=tv;break;case 536870912:n=H5;break;default:n=tv}n=mj(n,lj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lj(t,e){if(d0=-1,f0=0,vt&6)throw Error(ae(327));var n=t.callbackNode;if(td()&&t.callbackNode!==n)return null;var i=nv(t,t===In?Zn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=xv(t,i);else{e=i;var r=vt;vt|=2;var s=uj();(In!==t||Zn!==e)&&(ko=null,Rd=fn()+500,yc(t,e));do try{bG();break}catch(a){cj(t,a)}while(!0);N_(),vv.current=s,vt=r,yn!==null?e=0:(In=null,Zn=0,e=En)}if(e!==0){if(e===2&&(r=iS(t),r!==0&&(i=r,e=RS(t,r))),e===1)throw n=cp,yc(t,0),Ma(t,i),Xi(t,fn()),n;if(e===6)Ma(t,i);else{if(r=t.current.alternate,!(i&30)&&!vG(r)&&(e=xv(t,i),e===2&&(s=iS(t),s!==0&&(i=s,e=RS(t,s))),e===1))throw n=cp,yc(t,0),Ma(t,i),Xi(t,fn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ae(345));case 2:ec(t,zi,ko);break;case 3:if(Ma(t,i),(i&130023424)===i&&(e=V_+500-fn(),10<e)){if(nv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){xi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=dS(ec.bind(null,t,zi,ko),e);break}ec(t,zi,ko);break;case 4:if(Ma(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-vs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=fn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*gG(i/1960))-i,10<i){t.timeoutHandle=dS(ec.bind(null,t,zi,ko),i);break}ec(t,zi,ko);break;case 5:ec(t,zi,ko);break;default:throw Error(ae(329))}}}return Xi(t,fn()),t.callbackNode===n?lj.bind(null,t):null}function RS(t,e){var n=_h;return t.current.memoizedState.isDehydrated&&(yc(t,e).flags|=256),t=xv(t,e),t!==2&&(e=zi,zi=n,e!==null&&TS(e)),t}function TS(t){zi===null?zi=t:zi.push.apply(zi,t)}function vG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!bs(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ma(t,e){for(e&=~U_,e&=~zy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vs(e),i=1<<n;t[n]=-1,e&=~i}}function DP(t){if(vt&6)throw Error(ae(327));td();var e=nv(t,0);if(!(e&1))return Xi(t,fn()),null;var n=xv(t,e);if(t.tag!==0&&n===2){var i=iS(t);i!==0&&(e=i,n=RS(t,i))}if(n===1)throw n=cp,yc(t,0),Ma(t,e),Xi(t,fn()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ec(t,zi,ko),Xi(t,fn()),null}function H_(t,e){var n=vt;vt|=1;try{return t(e)}finally{vt=n,vt===0&&(Rd=fn()+500,Dy&&Pl())}}function Oc(t){$a!==null&&$a.tag===0&&!(vt&6)&&td();var e=vt;vt|=1;var n=Hr.transition,i=Ct;try{if(Hr.transition=null,Ct=1,t)return t()}finally{Ct=i,Hr.transition=n,vt=e,!(vt&6)&&Pl()}}function W_(){sr=Bu.current,zt(Bu)}function yc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,KW(n)),yn!==null)for(n=yn.return;n!==null;){var i=n;switch(C_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&av();break;case 3:Pd(),zt(qi),zt(fi),I_();break;case 5:O_(i);break;case 4:Pd();break;case 13:zt(Zt);break;case 19:zt(Zt);break;case 10:P_(i.type._context);break;case 22:case 23:W_()}n=n.return}if(In=t,yn=t=il(t.current,null),Zn=sr=e,En=0,cp=null,U_=zy=Tc=0,zi=_h=null,dc!==null){for(e=0;e<dc.length;e++)if(n=dc[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}dc=null}return t}function cj(t,e){do{var n=yn;try{if(N_(),l0.current=gv,mv){for(var i=nn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}mv=!1}if(Rc=0,Tn=wn=nn=null,Sh=!1,op=0,z_.current=null,n===null||n.return===null){En=1,cp=e,yn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Zn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=_P(o);if(p!==null){p.flags&=-257,CP(p,o,a,s,e),p.mode&1&&kP(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){kP(s,c,e),G_();break e}l=Error(ae(426))}}else if(qt&&a.mode&1){var v=_P(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),CP(v,o,a,s,e),E_(Md(l,a));break e}}s=l=Md(l,a),En!==4&&(En=2),_h===null?_h=[s]:_h.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=GI(s,l,e);vP(s,y);break e;case 1:a=l;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(tl===null||!tl.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=KI(s,a,e);vP(s,S);break e}}s=s.return}while(s!==null)}fj(n)}catch(_){e=_,yn===n&&n!==null&&(yn=n=n.return);continue}break}while(!0)}function uj(){var t=vv.current;return vv.current=gv,t===null?gv:t}function G_(){(En===0||En===3||En===2)&&(En=4),In===null||!(Tc&268435455)&&!(zy&268435455)||Ma(In,Zn)}function xv(t,e){var n=vt;vt|=2;var i=uj();(In!==t||Zn!==e)&&(ko=null,yc(t,e));do try{yG();break}catch(r){cj(t,r)}while(!0);if(N_(),vt=n,vv.current=i,yn!==null)throw Error(ae(261));return In=null,Zn=0,En}function yG(){for(;yn!==null;)dj(yn)}function bG(){for(;yn!==null&&!HH();)dj(yn)}function dj(t){var e=pj(t.alternate,t,sr);t.memoizedProps=t.pendingProps,e===null?fj(t):yn=e,z_.current=null}function fj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=fG(n,e),n!==null){n.flags&=32767,yn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{En=6,yn=null;return}}else if(n=dG(n,e,sr),n!==null){yn=n;return}if(e=e.sibling,e!==null){yn=e;return}yn=e=t}while(e!==null);En===0&&(En=5)}function ec(t,e,n){var i=Ct,r=Hr.transition;try{Hr.transition=null,Ct=1,xG(t,e,n,i)}finally{Hr.transition=r,Ct=i}return null}function xG(t,e,n,i){do td();while($a!==null);if(vt&6)throw Error(ae(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(eW(t,s),t===In&&(yn=In=null,Zn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ig||(ig=!0,mj(tv,function(){return td(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Hr.transition,Hr.transition=null;var o=Ct;Ct=1;var a=vt;vt|=4,z_.current=null,pG(t,n),oj(n,t),BW(cS),iv=!!lS,cS=lS=null,t.current=n,mG(n),WH(),vt=a,Ct=o,Hr.transition=s}else t.current=n;if(ig&&(ig=!1,$a=t,bv=r),s=t.pendingLanes,s===0&&(tl=null),qH(n.stateNode),Xi(t,fn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(yv)throw yv=!1,t=PS,PS=null,t;return bv&1&&t.tag!==0&&td(),s=t.pendingLanes,s&1?t===MS?Ch++:(Ch=0,MS=t):Ch=0,Pl(),null}function td(){if($a!==null){var t=G5(bv),e=Hr.transition,n=Ct;try{if(Hr.transition=null,Ct=16>t?16:t,$a===null)var i=!1;else{if(t=$a,$a=null,bv=0,vt&6)throw Error(ae(331));var r=vt;for(vt|=4,Ne=t.current;Ne!==null;){var s=Ne,o=s.child;if(Ne.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ne=c;Ne!==null;){var u=Ne;switch(u.tag){case 0:case 11:case 15:kh(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ne=d;else for(;Ne!==null;){u=Ne;var f=u.sibling,p=u.return;if(ij(u),u===c){Ne=null;break}if(f!==null){f.return=p,Ne=f;break}Ne=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ne=o;else e:for(;Ne!==null;){if(s=Ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:kh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ne=y;break e}Ne=s.return}}var x=t.current;for(Ne=x;Ne!==null;){o=Ne;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ne=w;else e:for(o=x;Ne!==null;){if(a=Ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:By(9,a)}}catch(_){on(a,a.return,_)}if(a===o){Ne=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Ne=S;break e}Ne=a.return}}if(vt=r,Pl(),ro&&typeof ro.onPostCommitFiberRoot=="function")try{ro.onPostCommitFiberRoot(Ty,t)}catch{}i=!0}return i}finally{Ct=n,Hr.transition=e}}return!1}function $P(t,e,n){e=Md(n,e),e=GI(t,e,1),t=el(t,e,1),e=xi(),t!==null&&(Qp(t,1,e),Xi(t,e))}function on(t,e,n){if(t.tag===3)$P(t,t,n);else for(;e!==null;){if(e.tag===3){$P(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(tl===null||!tl.has(i))){t=Md(n,t),t=KI(e,t,1),e=el(e,t,1),t=xi(),e!==null&&(Qp(e,1,t),Xi(e,t));break}}e=e.return}}function wG(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=xi(),t.pingedLanes|=t.suspendedLanes&n,In===t&&(Zn&n)===n&&(En===4||En===3&&(Zn&130023424)===Zn&&500>fn()-V_?yc(t,0):U_|=n),Xi(t,e)}function hj(t,e){e===0&&(t.mode&1?(e=Km,Km<<=1,!(Km&130023424)&&(Km=4194304)):e=1);var n=xi();t=Yo(t,e),t!==null&&(Qp(t,e,n),Xi(t,n))}function SG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hj(t,n)}function kG(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ae(314))}i!==null&&i.delete(e),hj(t,n)}var pj;pj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qi.current)Gi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Gi=!1,uG(t,e,n);Gi=!!(t.flags&131072)}else Gi=!1,qt&&e.flags&1048576&&yI(e,uv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;u0(t,e),t=e.pendingProps;var r=Ed(e,fi.current);ed(e,n),r=L_(null,e,i,t,r,n);var s=D_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yi(i)?(s=!0,lv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,R_(e),r.updater=Fy,e.stateNode=r,r._reactInternals=e,yS(e,i,t,n),e=wS(null,e,i,!0,s,n)):(e.tag=0,qt&&s&&__(e),bi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(u0(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=CG(i),t=ss(i,t),r){case 0:e=xS(null,e,i,t,n);break e;case 1:e=NP(null,e,i,t,n);break e;case 11:e=EP(null,e,i,t,n);break e;case 14:e=AP(null,e,i,ss(i.type,t),n);break e}throw Error(ae(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ss(i,r),xS(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ss(i,r),NP(t,e,i,r,n);case 3:e:{if(JI(e),t===null)throw Error(ae(387));i=e.pendingProps,s=e.memoizedState,r=s.element,_I(t,e),hv(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Md(Error(ae(423)),e),e=PP(t,e,i,n,r);break e}else if(i!==r){r=Md(Error(ae(424)),e),e=PP(t,e,i,n,r);break e}else for(dr=Qa(e.stateNode.containerInfo.firstChild),gr=e,qt=!0,us=null,n=SI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ad(),i===r){e=Xo(t,e,n);break e}bi(t,e,i,n)}e=e.child}return e;case 5:return CI(e),t===null&&mS(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,uS(i,r)?o=null:s!==null&&uS(i,s)&&(e.flags|=32),XI(t,e),bi(t,e,o,n),e.child;case 6:return t===null&&mS(e),null;case 13:return ZI(t,e,n);case 4:return T_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Nd(e,null,i,n):bi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ss(i,r),EP(t,e,i,r,n);case 7:return bi(t,e,e.pendingProps,n),e.child;case 8:return bi(t,e,e.pendingProps.children,n),e.child;case 12:return bi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Lt(dv,i._currentValue),i._currentValue=o,s!==null)if(bs(s.value,o)){if(s.children===r.children&&!qi.current){e=Xo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ho(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gS(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gS(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}bi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ed(e,n),r=Yr(r),i=i(r),e.flags|=1,bi(t,e,i,n),e.child;case 14:return i=e.type,r=ss(i,e.pendingProps),r=ss(i.type,r),AP(t,e,i,r,n);case 15:return qI(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ss(i,r),u0(t,e),e.tag=1,Yi(i)?(t=!0,lv(e)):t=!1,ed(e,n),WI(e,i,r),yS(e,i,r,n),wS(null,e,i,!0,t,n);case 19:return QI(t,e,n);case 22:return YI(t,e,n)}throw Error(ae(156,e.tag))};function mj(t,e){return U5(t,e)}function _G(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(t,e,n,i){return new _G(t,e,n,i)}function K_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CG(t){if(typeof t=="function")return K_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===f_)return 11;if(t===h_)return 14}return 2}function il(t,e){var n=t.alternate;return n===null?(n=$r(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function h0(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")K_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Mu:return bc(n.children,r,s,e);case d_:o=8,r|=8;break;case U1:return t=$r(12,n,e,r|2),t.elementType=U1,t.lanes=s,t;case V1:return t=$r(13,n,e,r),t.elementType=V1,t.lanes=s,t;case H1:return t=$r(19,n,e,r),t.elementType=H1,t.lanes=s,t;case C5:return Uy(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k5:o=10;break e;case _5:o=9;break e;case f_:o=11;break e;case h_:o=14;break e;case xa:o=16,i=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=$r(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function bc(t,e,n,i){return t=$r(7,t,i,e),t.lanes=n,t}function Uy(t,e,n,i){return t=$r(22,t,i,e),t.elementType=C5,t.lanes=n,t.stateNode={isHidden:!1},t}function Fx(t,e,n){return t=$r(6,t,null,e),t.lanes=n,t}function Bx(t,e,n){return e=$r(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function EG(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xx(0),this.expirationTimes=xx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xx(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function q_(t,e,n,i,r,s,o,a,l){return t=new EG(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$r(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},R_(s),t}function AG(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function gj(t){if(!t)return ul;t=t._reactInternals;e:{if(Xc(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Yi(n))return gI(t,n,e)}return e}function vj(t,e,n,i,r,s,o,a,l){return t=q_(n,i,!0,t,r,s,o,a,l),t.context=gj(null),n=t.current,i=xi(),r=nl(n),s=Ho(i,r),s.callback=e??null,el(n,s,r),t.current.lanes=r,Qp(t,r,i),Xi(t,i),t}function Vy(t,e,n,i){var r=e.current,s=xi(),o=nl(r);return n=gj(n),e.context===null?e.context=n:e.pendingContext=n,e=Ho(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=el(r,e,o),t!==null&&(ys(t,r,o,s),a0(t,r,o)),o}function wv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function FP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Y_(t,e){FP(t,e),(t=t.alternate)&&FP(t,e)}function NG(){return null}var yj=typeof reportError=="function"?reportError:function(t){console.error(t)};function X_(t){this._internalRoot=t}Hy.prototype.render=X_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Vy(t,e,null,null)};Hy.prototype.unmount=X_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oc(function(){Vy(null,t,null,null)}),e[qo]=null}};function Hy(t){this._internalRoot=t}Hy.prototype.unstable_scheduleHydration=function(t){if(t){var e=Y5();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pa.length&&e!==0&&e<Pa[n].priority;n++);Pa.splice(n,0,t),n===0&&J5(t)}};function J_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function BP(){}function PG(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=wv(o);s.call(c)}}var o=vj(e,i,t,0,null,!1,!1,"",BP);return t._reactRootContainer=o,t[qo]=o.current,tp(t.nodeType===8?t.parentNode:t),Oc(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=wv(l);a.call(c)}}var l=q_(t,0,!1,null,null,!1,!1,"",BP);return t._reactRootContainer=l,t[qo]=l.current,tp(t.nodeType===8?t.parentNode:t),Oc(function(){Vy(e,l,n,i)}),l}function Gy(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=wv(o);a.call(l)}}Vy(e,o,t,r)}else o=PG(n,e,t,r,i);return wv(o)}K5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qf(e.pendingLanes);n!==0&&(g_(e,n|1),Xi(e,fn()),!(vt&6)&&(Rd=fn()+500,Pl()))}break;case 13:Oc(function(){var i=Yo(t,1);if(i!==null){var r=xi();ys(i,t,1,r)}}),Y_(t,1)}};v_=function(t){if(t.tag===13){var e=Yo(t,134217728);if(e!==null){var n=xi();ys(e,t,134217728,n)}Y_(t,134217728)}};q5=function(t){if(t.tag===13){var e=nl(t),n=Yo(t,e);if(n!==null){var i=xi();ys(n,t,e,i)}Y_(t,e)}};Y5=function(){return Ct};X5=function(t,e){var n=Ct;try{return Ct=t,e()}finally{Ct=n}};eS=function(t,e,n){switch(e){case"input":if(K1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Ly(i);if(!r)throw Error(ae(90));A5(i),K1(i,r)}}}break;case"textarea":P5(t,n);break;case"select":e=n.value,e!=null&&Xu(t,!!n.multiple,e,!1)}};L5=H_;D5=Oc;var MG={usingClientEntryPoint:!1,Events:[tm,Iu,Ly,I5,j5,H_]},Ef={findFiberByHostInstance:uc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RG={bundleType:Ef.bundleType,version:Ef.version,rendererPackageName:Ef.rendererPackageName,rendererConfig:Ef.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=B5(t),t===null?null:t.stateNode},findFiberByHostInstance:Ef.findFiberByHostInstance||NG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rg.isDisabled&&rg.supportsFiber)try{Ty=rg.inject(RG),ro=rg}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MG;kr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!J_(e))throw Error(ae(200));return AG(t,e,null,n)};kr.createRoot=function(t,e){if(!J_(t))throw Error(ae(299));var n=!1,i="",r=yj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=q_(t,1,!1,null,null,n,!1,i,r),t[qo]=e.current,tp(t.nodeType===8?t.parentNode:t),new X_(e)};kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=B5(e),t=t===null?null:t.stateNode,t};kr.flushSync=function(t){return Oc(t)};kr.hydrate=function(t,e,n){if(!Wy(e))throw Error(ae(200));return Gy(null,t,e,!0,n)};kr.hydrateRoot=function(t,e,n){if(!J_(t))throw Error(ae(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=yj;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=vj(e,null,t,1,n??null,r,!1,s,o),t[qo]=e.current,tp(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Hy(e)};kr.render=function(t,e,n){if(!Wy(e))throw Error(ae(200));return Gy(null,t,e,!1,n)};kr.unmountComponentAtNode=function(t){if(!Wy(t))throw Error(ae(40));return t._reactRootContainer?(Oc(function(){Gy(null,null,t,!1,function(){t._reactRootContainer=null,t[qo]=null})}),!0):!1};kr.unstable_batchedUpdates=H_;kr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Wy(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Gy(t,e,n,!1,i)};kr.version="18.3.1-next-f1338f8080-20240426";function bj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bj)}catch(t){console.error(t)}}bj(),b5.exports=kr;var Ml=b5.exports;const TG=qc(Ml);var xj,zP=Ml;xj=zP.createRoot,zP.hydrateRoot;function ye(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function Cs(t,e=[]){let n=[];function i(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:p,...g}=d,m=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,v=b.useMemo(()=>g,Object.values(g));return h.jsx(m.Provider,{value:v,children:p})};c.displayName=s+"Provider";function u(d,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,g=b.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,OG(r,...e)]}function OG(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function UP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ky(...t){return e=>{let n=!1;const i=t.map(r=>{const s=UP(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():UP(t[r],null)}}}}function ct(...t){return b.useCallback(Ky(...t),t)}function Td(t){const e=IG(t),n=b.forwardRef((i,r)=>{const{children:s,...o}=i,a=b.Children.toArray(s),l=a.find(LG);if(l){const c=l.props.children,u=a.map(d=>d===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:r,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}function IG(t){const e=b.forwardRef((n,i)=>{const{children:r,...s}=n;if(b.isValidElement(r)){const o=$G(r),a=DG(s,r.props);return r.type!==b.Fragment&&(a.ref=i?Ky(i,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var jG=Symbol("radix.slottable");function LG(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===jG}function DG(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function $G(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function im(t){const e=t+"CollectionProvider",[n,i]=Cs(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,x=Ft.useRef(null),w=Ft.useRef(new Map).current;return h.jsx(r,{scope:v,itemMap:w,collectionRef:x,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=Td(a),c=Ft.forwardRef((m,v)=>{const{scope:y,children:x}=m,w=s(a,y),S=ct(v,w.collectionRef);return h.jsx(l,{ref:S,children:x})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Td(u),p=Ft.forwardRef((m,v)=>{const{scope:y,children:x,...w}=m,S=Ft.useRef(null),_=ct(v,S),E=s(u,y);return Ft.useEffect(()=>(E.itemMap.set(S,{ref:S,...w}),()=>void E.itemMap.delete(S))),h.jsx(f,{[d]:"",ref:_,children:x})});p.displayName=u;function g(m){const v=s(t+"CollectionConsumer",m);return Ft.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((E,C)=>w.indexOf(E.ref.current)-w.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},g,i]}var ei=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},FG=Cy[" useId ".trim().toString()]||(()=>{}),BG=0;function tf(t){const[e,n]=b.useState(FG());return ei(()=>{n(i=>i??String(BG++))},[t]),e?`radix-${e}`:""}var zG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],He=zG.reduce((t,e)=>{const n=Td(`Primitive.${e}`),i=b.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function Z_(t,e){t&&Ml.flushSync(()=>t.dispatchEvent(e))}function xr(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}var UG=Cy[" useInsertionEffect ".trim().toString()]||ei;function dl({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,o]=VG({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=b.useCallback(u=>{var d;if(a){const f=HG(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function VG({defaultProp:t,onChange:e}){const[n,i]=b.useState(t),r=b.useRef(n),s=b.useRef(e);return UG(()=>{s.current=e},[e]),b.useEffect(()=>{var o;r.current!==n&&((o=s.current)==null||o.call(s,n),r.current=n)},[n,r]),[n,i,s]}function HG(t){return typeof t=="function"}var WG=b.createContext(void 0);function qy(t){const e=b.useContext(WG);return t||e||"ltr"}var zx="rovingFocusGroup.onEntryFocus",GG={bubbles:!1,cancelable:!0},rm="RovingFocusGroup",[OS,wj,KG]=im(rm),[qG,Yy]=Cs(rm,[KG]),[YG,XG]=qG(rm),Sj=b.forwardRef((t,e)=>h.jsx(OS.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(OS.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(JG,{...t,ref:e})})}));Sj.displayName=rm;var JG=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=b.useRef(null),p=ct(e,f),g=qy(s),[m,v]=dl({prop:o,defaultProp:a??null,onChange:l,caller:rm}),[y,x]=b.useState(!1),w=xr(c),S=wj(n),_=b.useRef(!1),[E,C]=b.useState(0);return b.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(zx,w),()=>N.removeEventListener(zx,w)},[w]),h.jsx(YG,{scope:n,orientation:i,dir:g,loop:r,currentTabStopId:m,onItemFocus:b.useCallback(N=>v(N),[v]),onItemShiftTab:b.useCallback(()=>x(!0),[]),onFocusableItemAdd:b.useCallback(()=>C(N=>N+1),[]),onFocusableItemRemove:b.useCallback(()=>C(N=>N-1),[]),children:h.jsx(He.div,{tabIndex:y||E===0?-1:0,"data-orientation":i,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:ye(t.onMouseDown,()=>{_.current=!0}),onFocus:ye(t.onFocus,N=>{const M=!_.current;if(N.target===N.currentTarget&&M&&!y){const I=new CustomEvent(zx,GG);if(N.currentTarget.dispatchEvent(I),!I.defaultPrevented){const O=S().filter(X=>X.focusable),T=O.find(X=>X.active),H=O.find(X=>X.id===m),K=[T,H,...O].filter(Boolean).map(X=>X.ref.current);Cj(K,u)}}_.current=!1}),onBlur:ye(t.onBlur,()=>x(!1))})})}),kj="RovingFocusGroupItem",_j=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,children:o,...a}=t,l=tf(),c=s||l,u=XG(kj,n),d=u.currentTabStopId===c,f=wj(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:m}=u;return b.useEffect(()=>{if(i)return p(),()=>g()},[i,p,g]),h.jsx(OS.ItemSlot,{scope:n,id:c,focusable:i,active:r,children:h.jsx(He.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:ye(t.onMouseDown,v=>{i?u.onItemFocus(c):v.preventDefault()}),onFocus:ye(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ye(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=eK(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=f().filter(S=>S.focusable).map(S=>S.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const S=w.indexOf(v.currentTarget);w=u.loop?tK(w,S+1):w.slice(S+1)}setTimeout(()=>Cj(w))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:m!=null}):o})})});_j.displayName=kj;var ZG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function QG(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function eK(t,e,n){const i=QG(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return ZG[i]}function Cj(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function tK(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Ej=Sj,Aj=_j;function nK(t,e){return b.useReducer((n,i)=>e[n][i]??n,t)}var ra=t=>{const{present:e,children:n}=t,i=iK(e),r=typeof n=="function"?n({present:i.isPresent}):b.Children.only(n),s=ct(i.ref,rK(r));return typeof n=="function"||i.isPresent?b.cloneElement(r,{ref:s}):null};ra.displayName="Presence";function iK(t){const[e,n]=b.useState(),i=b.useRef(null),r=b.useRef(t),s=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=nK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=sg(i.current);s.current=a==="mounted"?c:"none"},[a]),ei(()=>{const c=i.current,u=r.current;if(u!==t){const f=s.current,p=sg(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),ei(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const m=sg(i.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!r.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(s.current=sg(i.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{i.current=c?getComputedStyle(c):null,n(c)},[])}}function sg(t){return(t==null?void 0:t.animationName)||"none"}function rK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Xy="Tabs",[sK,o0e]=Cs(Xy,[Yy]),Nj=Yy(),[oK,Q_]=sK(Xy),Pj=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=qy(a),[d,f]=dl({prop:i,onChange:r,defaultProp:s??"",caller:Xy});return h.jsx(oK,{scope:n,baseId:tf(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:h.jsx(He.div,{dir:u,"data-orientation":o,...c,ref:e})})});Pj.displayName=Xy;var Mj="TabsList",Rj=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=Q_(Mj,n),o=Nj(n);return h.jsx(Ej,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:h.jsx(He.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});Rj.displayName=Mj;var Tj="TabsTrigger",p0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=Q_(Tj,n),a=Nj(n),l=Ij(o.baseId,i),c=jj(o.baseId,i),u=i===o.value;return h.jsx(Aj,{asChild:!0,...a,focusable:!r,active:u,children:h.jsx(He.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:ye(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:ye(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:ye(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});p0.displayName=Tj;var Oj="TabsContent",m0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=Q_(Oj,n),l=Ij(a.baseId,i),c=jj(a.baseId,i),u=i===a.value,d=b.useRef(u);return b.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(ra,{present:r||u,children:({present:f})=>h.jsx(He.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});m0.displayName=Oj;function Ij(t,e){return`${t}-trigger-${e}`}function jj(t,e){return`${t}-content-${e}`}const th={},VP=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,HP=t=>"init"in t,Ux=t=>!!t.write,WP=t=>"v"in t||"e"in t,og=t=>{if("e"in t)throw t.e;if((th?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},Sv=new WeakMap,GP=t=>{var e;return kv(t)&&!!((e=Sv.get(t))!=null&&e[0])},aK=t=>{const e=Sv.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},Lj=(t,e)=>{let n=Sv.get(t);if(!n){n=[!0,new Set],Sv.set(t,n);const i=()=>{n[0]=!1};t.then(i,i)}n[1].add(e)},kv=t=>typeof(t==null?void 0:t.then)=="function",Dj=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},Vx=(t,e,n)=>{const i=n(t),r="v"in i,s=i.v;if(kv(e))for(const o of i.d.keys())Dj(t,e,n(o));i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,kv(s)&&aK(s))},KP=(t,e,n)=>{var i;const r=new Set;for(const s of((i=n.get(t))==null?void 0:i.t)||[])n.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},lK=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},Hx=()=>{const t={},e=new WeakMap,n=i=>{var r,s;(r=e.get(t))==null||r.forEach(o=>o(i)),(s=e.get(i))==null||s.forEach(o=>o())};return n.add=(i,r)=>{const s=i||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(r),()=>{o==null||o.delete(r),o.size||e.delete(s)}},n},cK=t=>(t.c||(t.c=Hx()),t.m||(t.m=Hx()),t.u||(t.u=Hx()),t.f||(t.f=lK()),t),uK=Symbol(),dK=(t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new Set,r=new Set,s=new Set,o={},a=(f,...p)=>f.read(...p),l=(f,...p)=>f.write(...p),c=(f,p)=>{var g;return(g=f.unstable_onInit)==null?void 0:g.call(f,p)},u=(f,p)=>{var g;return(g=f.onMount)==null?void 0:g.call(f,p)},...d)=>{const f=d[0]||(C=>{if((th?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let N=t.get(C);return N||(N={d:new Map,p:new Set,n:0},t.set(C,N),c==null||c(C,E)),N}),p=d[1]||(()=>{const C=[],N=M=>{try{M()}catch(I){C.push(I)}};do{o.f&&N(o.f);const M=new Set,I=M.add.bind(M);i.forEach(O=>{var T;return(T=e.get(O))==null?void 0:T.l.forEach(I)}),i.clear(),s.forEach(I),s.clear(),r.forEach(I),r.clear(),M.forEach(N),i.size&&g()}while(i.size||s.size||r.size);if(C.length)throw new AggregateError(C)}),g=d[2]||(()=>{const C=[],N=new WeakSet,M=new WeakSet,I=Array.from(i);for(;I.length;){const O=I[I.length-1],T=f(O);if(M.has(O)){I.pop();continue}if(N.has(O)){if(n.get(O)===T.n)C.push([O,T]);else if((th?"production":void 0)!=="production"&&n.has(O))throw new Error("[Bug] invalidated atom exists");M.add(O),I.pop();continue}N.add(O);for(const H of KP(O,T,e))N.has(H)||I.push(H)}for(let O=C.length-1;O>=0;--O){const[T,H]=C[O];let D=!1;for(const K of H.d.keys())if(K!==T&&i.has(K)){D=!0;break}D&&(m(T),x(T)),n.delete(T)}}),m=d[3]||(C=>{var N;const M=f(C);if(WP(M)&&(e.has(C)&&n.get(C)!==M.n||Array.from(M.d).every(([te,U])=>m(te).n===U)))return M;M.d.clear();let I=!0;const O=()=>{e.has(C)&&(x(C),g(),p())},T=te=>{var U;if(VP(C,te)){const ie=f(te);if(!WP(ie))if(HP(te))Vx(te,te.init,f);else throw new Error("no atom init");return og(ie)}const B=m(te);try{return og(B)}finally{M.d.set(te,B.n),GP(M.v)&&Dj(C,M.v,B),(U=e.get(te))==null||U.t.add(C),I||O()}};let H,D;const K={get signal(){return H||(H=new AbortController),H.signal},get setSelf(){return(th?"production":void 0)!=="production"&&!Ux(C)&&console.warn("setSelf function cannot be used with read-only atom"),!D&&Ux(C)&&(D=(...te)=>{if((th?"production":void 0)!=="production"&&I&&console.warn("setSelf function cannot be called in sync"),!I)try{return y(C,...te)}finally{g(),p()}}),D}},X=M.n;try{const te=a(C,T,K);return Vx(C,te,f),kv(te)&&(Lj(te,()=>H==null?void 0:H.abort()),te.then(O,O)),M}catch(te){return delete M.v,M.e=te,++M.n,M}finally{I=!1,X!==M.n&&n.get(C)===X&&(n.set(C,M.n),i.add(C),(N=o.c)==null||N.call(o,C))}}),v=d[4]||(C=>{const N=[C];for(;N.length;){const M=N.pop(),I=f(M);for(const O of KP(M,I,e)){const T=f(O);n.set(O,T.n),N.push(O)}}}),y=d[5]||((C,...N)=>{let M=!0;const I=T=>og(m(T)),O=(T,...H)=>{var D;const K=f(T);try{if(VP(C,T)){if(!HP(T))throw new Error("atom not writable");const X=K.n,te=H[0];Vx(T,te,f),x(T),X!==K.n&&(i.add(T),(D=o.c)==null||D.call(o,T),v(T));return}else return y(T,...H)}finally{M||(g(),p())}};try{return l(C,I,O,...N)}finally{M=!1}}),x=d[6]||(C=>{var N;const M=f(C),I=e.get(C);if(I&&!GP(M.v)){for(const[O,T]of M.d)if(!I.d.has(O)){const H=f(O);w(O).t.add(C),I.d.add(O),T!==H.n&&(i.add(O),(N=o.c)==null||N.call(o,O),v(O))}for(const O of I.d||[])if(!M.d.has(O)){I.d.delete(O);const T=S(O);T==null||T.t.delete(C)}}}),w=d[7]||(C=>{var N;const M=f(C);let I=e.get(C);if(!I){m(C);for(const O of M.d.keys())w(O).t.add(C);if(I={l:new Set,d:new Set(M.d.keys()),t:new Set},e.set(C,I),(N=o.m)==null||N.call(o,C),Ux(C)){const O=()=>{let T=!0;const H=(...D)=>{try{return y(C,...D)}finally{T||(g(),p())}};try{const D=u(C,H);D&&(I.u=()=>{T=!0;try{D()}finally{T=!1}})}finally{T=!1}};r.add(O)}}return I}),S=d[8]||(C=>{var N;const M=f(C);let I=e.get(C);if(I&&!I.l.size&&!Array.from(I.t).some(O=>{var T;return(T=e.get(O))==null?void 0:T.d.has(C)})){I.u&&s.add(I.u),I=void 0,e.delete(C),(N=o.u)==null||N.call(o,C);for(const O of M.d.keys()){const T=S(O);T==null||T.t.delete(C)}return}return I}),_=[t,e,n,i,r,s,o,a,l,c,u,f,p,g,m,v,y,x,w,S],E={get:C=>og(m(C)),set:(C,...N)=>{try{return y(C,...N)}finally{g(),p()}},sub:(C,N)=>{const I=w(C).l;return I.add(N),p(),()=>{I.delete(N),S(C),p()}}};return Object.defineProperty(E,uK,{value:_}),E},$j=dK,fK=cK,qP=Lj,eC={};let hK=0;function ue(t,e){const n=`atom${++hK}`,i={toString(){return(eC?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=pK,i.write=mK),e&&(i.write=e),i}function pK(t){return t(this)}function mK(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const gK=()=>{let t=0;const e=fK({}),n=new WeakMap,i=new WeakMap,r=$j(n,i,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>t?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=i.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++t;try{for(const[d,f]of a)"init"in d&&u(d,f)}finally{--t}}};r.set(l)}})};function tC(){return(eC?"production":void 0)!=="production"?gK():$j()}let Af;function vK(){return Af||(Af=tC(),(eC?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Af),globalThis.__JOTAI_DEFAULT_STORE__!==Af&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Af}const yK={},Fj=b.createContext(void 0);function Bj(t){return b.useContext(Fj)||vK()}function bK({children:t,store:e}){const n=b.useRef(void 0);return!e&&!n.current&&(n.current=tC()),b.createElement(Fj.Provider,{value:e||n.current},t)}const IS=t=>typeof(t==null?void 0:t.then)=="function",jS=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},xK=Ft.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(jS(t),t)}),Wx=new WeakMap,YP=(t,e)=>{let n=Wx.get(t);return n||(n=new Promise((i,r)=>{let s=t;const o=c=>u=>{s===c&&i(u)},a=c=>u=>{s===c&&r(u)},l=()=>{try{const c=e();IS(c)?(Wx.set(c,n),s=c,c.then(o(c),a(c)),qP(c,l)):i(c)}catch(c){r(c)}};t.then(o(t),a(t)),qP(t,l)}),Wx.set(t,n)),n};function rt(t,e){const{delay:n,unstable_promiseStatus:i=!Ft.use}={},r=Bj(),[[s,o,a],l]=b.useReducer(u=>{const d=r.get(t);return Object.is(u[0],d)&&u[1]===r&&u[2]===t?u:[d,r,t]},void 0,()=>[r.get(t),r,t]);let c=s;if((o!==r||a!==t)&&(l(),c=r.get(t)),b.useEffect(()=>{const u=r.sub(t,()=>{if(i)try{const d=r.get(t);IS(d)&&jS(YP(d,()=>r.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),u},[r,t,n,i]),b.useDebugValue(c),IS(c)){const u=YP(c,()=>r.get(t));return i&&jS(u),xK(u)}return c}function up(t,e){const n=Bj();return b.useCallback((...r)=>{if((yK?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function sm(t,e){return[rt(t),up(t)]}const{createElement:Od,createContext:wK,forwardRef:zj,useCallback:Ri,useContext:Uj,useEffect:xc,useImperativeHandle:Vj,useLayoutEffect:SK,useMemo:kK,useRef:ar,useState:_v}=Cy,XP=Cy.useId,Jy=wK(null);Jy.displayName="PanelGroupContext";const dp=SK,_K=typeof XP=="function"?XP:()=>null;let CK=0;function nC(t=null){const e=_K(),n=ar(t||e||null);return n.current===null&&(n.current=""+CK++),t??n.current}function Hj({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:p,tagName:g="div",...m}){const v=Uj(Jy);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:x,getPanelSize:w,getPanelStyle:S,groupId:_,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:N,resizePanel:M,unregisterPanel:I}=v,O=nC(o),T=ar({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:O,idIsFromProps:o!==void 0,order:f});ar({didLogMissingDefaultSizeWarning:!1}),dp(()=>{const{callbacks:D,constraints:K}=T.current,X={...K};T.current.id=O,T.current.idIsFromProps=o!==void 0,T.current.order=f,D.onCollapse=c,D.onExpand=u,D.onResize=d,K.collapsedSize=n,K.collapsible=i,K.defaultSize=r,K.maxSize=a,K.minSize=l,(X.collapsedSize!==K.collapsedSize||X.collapsible!==K.collapsible||X.maxSize!==K.maxSize||X.minSize!==K.minSize)&&C(T.current,X)}),dp(()=>{const D=T.current;return N(D),()=>{I(D)}},[f,O,N,I]),Vj(s,()=>({collapse:()=>{y(T.current)},expand:()=>{x(T.current)},getId(){return O},getSize(){return w(T.current)},isCollapsed(){return E(T.current)},isExpanded(){return!E(T.current)},resize:D=>{M(T.current,D)}}),[y,x,w,E,O,M]);const H=S(T.current,r);return Od(g,{...m,children:t,className:e,style:{...H,...p},"data-panel":"","data-panel-id":O,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const g0=zj((t,e)=>Od(Hj,{...t,forwardedRef:e}));Hj.displayName="Panel";g0.displayName="forwardRef(Panel)";function et(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const Wj=10;function fp(t,e,n=Wj){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function rr(t,e,n){return fp(t,e,n)===0}function zu({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];et(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(fp(n,a)<0)if(s){const l=(r+a)/2;fp(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(Wj)),n}function nh({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(rr(t,0))return e;const s=[...e],[o,a]=i;et(o!=null),et(a!=null);let l=0;if(r==="keyboard"){{const u=t<0?a:o,d=n[u];if(et(d),d.collapsible){const f=e[u];et(f!=null);const p=n[u];et(p);const{collapsedSize:g=0,minSize:m=0}=p;if(rr(f,g)){const v=m-f;fp(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}{const u=t<0?o:a,d=n[u];et(d);const{collapsible:f}=d;if(f){const p=e[u];et(p!=null);const g=n[u];et(g);const{collapsedSize:m=0,minSize:v=0}=g;if(rr(p,v)){const y=p-m;fp(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const g=e[d];et(g!=null);const v=zu({panelConstraints:n,panelIndex:d,size:100})-g;if(f+=v,d+=u,d<0||d>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-p:p}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),p=e[d];et(p!=null);const g=p-f,m=zu({panelConstraints:n,panelIndex:d,size:g});if(!rr(p,m)&&(l+=p-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(rr(l,0))return e;{const u=t<0?a:o,d=e[u];et(d!=null);const f=d+l,p=zu({panelConstraints:n,panelIndex:u,size:f});if(s[u]=p,!rr(p,f)){let g=f-p,v=t<0?a:o;for(;v>=0&&v<n.length;){const y=s[v];et(y!=null);const x=y+g,w=zu({panelConstraints:n,panelIndex:v,size:x});if(rr(y,w)||(g-=w-y,s[v]=w),rr(g,0))break;t>0?v--:v++}}}const c=s.reduce((u,d)=>d+u,0);return rr(c,100)?s:e}function EK({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];et(a!=null),e.forEach((d,f)=>{const{constraints:p}=d,{maxSize:g=100,minSize:m=0}=p;f===a?(i=m,r=g):(s+=m,o+=g)});const l=Math.min(r,100-s),c=Math.max(i,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function hp(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Gj(t,e,n=document){const r=hp(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function Kj(t,e,n){const i=Gj(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function qj(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function Zy(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function AK(t,e,n,i=document){var r,s,o,a;const l=Zy(e,i),c=hp(t,i),u=l?c.indexOf(l):-1,d=(r=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function NK({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){ar({didWarnAboutMissingResizeHandle:!1}),dp(()=>{if(!s)return;const a=hp(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=EK({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const p=r[l];et(p),f.setAttribute("aria-controls",p.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),xc(()=>{if(!s)return;const a=e.current;et(a);const{panelDataArray:l}=a,c=qj(n,s);et(c!=null,`No group found for id "${n}"`);const u=hp(n,s);et(u);const d=u.map(f=>{const p=f.getAttribute("data-panel-resize-handle-id");et(p);const[g,m]=AK(n,p,l,s);if(g==null||m==null)return()=>{};const v=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const x=l.findIndex(w=>w.id===g);if(x>=0){const w=l[x];et(w);const S=i[x],{collapsedSize:_=0,collapsible:E,minSize:C=0}=w.constraints;if(S!=null&&E){const N=nh({delta:rr(S,_)?C-_:_-S,layout:i,panelConstraints:l.map(M=>M.constraints),pivotIndices:Kj(n,p,s),trigger:"keyboard"});i!==N&&o(N)}}break}}};return f.addEventListener("keydown",v),()=>{f.removeEventListener("keydown",v)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,i,r,o])}function JP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Yj(t){return t.type==="keydown"}function Xj(t){return t.type.startsWith("mouse")}function Jj(t){return t.type.startsWith("touch")}function Zj(t,e){const n=t==="horizontal";if(Xj(e))return n?e.clientX:e.clientY;if(Jj(e)){const i=e.touches[0];return et(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function PK(t,e,n,i,r){const s=n==="horizontal",o=Zy(e,r);et(o);const a=o.getAttribute("data-panel-group-id");et(a);let{initialCursorPosition:l}=i;const c=Zj(n,t),u=qj(a,r);et(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function MK(t,e,n,i,r,s){if(Yj(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:PK(t,e,n,i,s)}function RK({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];et(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];et(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,c=r/l;i++,e[s]=c,r-=c}return e}function ru(t,e,n){e.forEach((i,r)=>{const s=t[r];et(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:f,onExpand:p,onResize:g}=o;g&&g(i,d),u&&(f||p)&&(p&&(d==null||d===c)&&i!==c&&p(),f&&(d==null||d!==c)&&i===c&&f())}})}function ag(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function TK({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let LS=null,hc=null;function Qj(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function OK(){hc!==null&&(document.head.removeChild(hc),LS=null,hc=null)}function Gx(t){if(LS===t)return;LS=t;const e=Qj(t);hc===null&&(hc=document.createElement("style"),document.head.appendChild(hc)),hc.innerHTML=`*{cursor: ${e}!important;}`}function IK(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function ZP(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function eL(t){return`react-resizable-panels:${t}`}function tL(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function nL(t,e){try{const n=eL(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function jK(t,e,n){var i,r;const s=(i=nL(t,n))!==null&&i!==void 0?i:{},o=tL(e);return(r=s[o])!==null&&r!==void 0?r:null}function LK(t,e,n,i,r){var s;const o=eL(t),a=tL(e),l=(s=nL(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function QP({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!rr(i,100))for(let s=0;s<e.length;s++){const o=n[s];et(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];et(o!=null);const a=zu({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!rr(r,0))for(let s=0;s<e.length;s++){const o=n[s];et(o!=null);const a=o+r,l=zu({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,rr(r,0)))break}return n}const DK=100,ih={getItem:t=>(ZP(ih),ih.getItem(t)),setItem:(t,e)=>{ZP(ih),ih.setItem(t,e)}},e3={};function iL({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=ih,style:c,tagName:u="div",...d}){const f=nC(s),p=ar(null),[g,m]=_v(null),[v,y]=_v([]),x=ar({}),w=ar(new Map),S=ar(0),_=ar({autoSaveId:t,direction:i,dragState:g,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),E=ar({layout:v,panelDataArray:[],panelDataArrayChanged:!1});ar({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),Vj(r,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:J}=E.current;return J},setLayout:J=>{const{onLayout:le}=_.current,{layout:F,panelDataArray:$}=E.current,V=QP({layout:J,panelConstraints:$.map(k=>k.constraints)});JP(F,V)||(y(V),E.current.layout=V,le&&le(V),ru($,V,x.current))}}),[]),dp(()=>{_.current.autoSaveId=t,_.current.direction=i,_.current.dragState=g,_.current.id=f,_.current.onLayout=o,_.current.storage=l}),NK({committedValuesRef:_,eagerValuesRef:E,groupId:f,layout:v,panelDataArray:E.current.panelDataArray,setLayout:y,panelGroupElement:p.current}),xc(()=>{const{panelDataArray:J}=E.current;if(t){if(v.length===0||v.length!==J.length)return;let le=e3[t];le==null&&(le=IK(LK,DK),e3[t]=le);const F=[...J],$=new Map(w.current);le(t,F,$,v,l)}},[t,v,l]),xc(()=>{});const C=Ri(J=>{const{onLayout:le}=_.current,{layout:F,panelDataArray:$}=E.current;if(J.constraints.collapsible){const V=$.map(R=>R.constraints),{collapsedSize:k=0,panelSize:P,pivotIndices:j}=Wl($,J,F);if(et(P!=null),P!==k){w.current.set(J.id,P);const Y=vu($,J)===$.length-1?P-k:k-P,G=nh({delta:Y,layout:F,panelConstraints:V,pivotIndices:j,trigger:"imperative-api"});ag(F,G)||(y(G),E.current.layout=G,le&&le(G),ru($,G,x.current))}}},[]),N=Ri(J=>{const{onLayout:le}=_.current,{layout:F,panelDataArray:$}=E.current;if(J.constraints.collapsible){const V=$.map(Y=>Y.constraints),{collapsedSize:k=0,panelSize:P,minSize:j=0,pivotIndices:R}=Wl($,J,F);if(P===k){const Y=w.current.get(J.id),G=Y!=null&&Y>=j?Y:j,Z=vu($,J)===$.length-1?P-G:G-P,Pe=nh({delta:Z,layout:F,panelConstraints:V,pivotIndices:R,trigger:"imperative-api"});ag(F,Pe)||(y(Pe),E.current.layout=Pe,le&&le(Pe),ru($,Pe,x.current))}}},[]),M=Ri(J=>{const{layout:le,panelDataArray:F}=E.current,{panelSize:$}=Wl(F,J,le);return et($!=null),$},[]),I=Ri((J,le)=>{const{panelDataArray:F}=E.current,$=vu(F,J);return TK({defaultSize:le,dragState:g,layout:v,panelData:F,panelIndex:$})},[g,v]),O=Ri(J=>{const{layout:le,panelDataArray:F}=E.current,{collapsedSize:$=0,collapsible:V,panelSize:k}=Wl(F,J,le);return V===!0&&k===$},[]),T=Ri(J=>{const{layout:le,panelDataArray:F}=E.current,{collapsedSize:$=0,collapsible:V,panelSize:k}=Wl(F,J,le);return et(k!=null),!V||k>$},[]),H=Ri(J=>{const{panelDataArray:le}=E.current;le.push(J),le.sort((F,$)=>{const V=F.order,k=$.order;return V==null&&k==null?0:V==null?-1:k==null?1:V-k}),E.current.panelDataArrayChanged=!0},[]);dp(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:J,onLayout:le,storage:F}=_.current,{layout:$,panelDataArray:V}=E.current;let k=null;if(J){const j=jK(J,V,F);j&&(w.current=new Map(Object.entries(j.expandToSizes)),k=j.layout)}k==null&&(k=RK({panelDataArray:V}));const P=QP({layout:k,panelConstraints:V.map(j=>j.constraints)});JP($,P)||(y(P),E.current.layout=P,le&&le(P),ru(V,P,x.current))}});const D=Ri(J=>function(F){F.preventDefault();const $=p.current;if(!$)return()=>null;const{direction:V,dragState:k,id:P,keyboardResizeBy:j,onLayout:R}=_.current,{layout:Y,panelDataArray:G}=E.current,{initialLayout:ne}=k??{},Z=Kj(P,J,$);let Pe=MK(F,J,V,k,j,$);if(Pe===0)return;const Be=V==="horizontal";document.dir==="rtl"&&Be&&(Pe=-Pe);const Ue=G.map(ge=>ge.constraints),Le=nh({delta:Pe,layout:ne??Y,panelConstraints:Ue,pivotIndices:Z,trigger:Yj(F)?"keyboard":"mouse-or-touch"}),Je=!ag(Y,Le);(Xj(F)||Jj(F))&&S.current!=Pe&&(S.current=Pe,Gx(Je?Be?"horizontal":"vertical":Be?Pe<0?"horizontal-min":"horizontal-max":Pe<0?"vertical-min":"vertical-max")),Je&&(y(Le),E.current.layout=Le,R&&R(Le),ru(G,Le,x.current))},[]),K=Ri((J,le)=>{const{onLayout:F}=_.current,{layout:$,panelDataArray:V}=E.current,k=V.map(ne=>ne.constraints),{panelSize:P,pivotIndices:j}=Wl(V,J,$);et(P!=null);const Y=vu(V,J)===V.length-1?P-le:le-P,G=nh({delta:Y,layout:$,panelConstraints:k,pivotIndices:j,trigger:"imperative-api"});ag($,G)||(y(G),E.current.layout=G,F&&F(G),ru(V,G,x.current))},[]),X=Ri((J,le)=>{const{layout:F,panelDataArray:$}=E.current,{collapsedSize:V=0,collapsible:k}=le,{collapsedSize:P=0,collapsible:j,maxSize:R=100,minSize:Y=0}=J.constraints,{panelSize:G}=Wl($,J,F);et(G!=null),k&&j&&G===V?V!==P&&K(J,P):G<Y?K(J,Y):G>R&&K(J,R)},[K]),te=Ri((J,le)=>{const{direction:F}=_.current,{layout:$}=E.current;if(!p.current)return;const V=Zy(J,p.current);et(V);const k=Zj(F,le);m({dragHandleId:J,dragHandleRect:V.getBoundingClientRect(),initialCursorPosition:k,initialLayout:$})},[]),U=Ri(()=>{OK(),m(null)},[]),B=Ri(J=>{const{panelDataArray:le}=E.current,F=vu(le,J);F>=0&&(le.splice(F,1),delete x.current[J.id],E.current.panelDataArrayChanged=!0)},[]),ie=kK(()=>({collapsePanel:C,direction:i,dragState:g,expandPanel:N,getPanelSize:M,getPanelStyle:I,groupId:f,isPanelCollapsed:O,isPanelExpanded:T,reevaluatePanelConstraints:X,registerPanel:H,registerResizeHandle:D,resizePanel:K,startDragging:te,stopDragging:U,unregisterPanel:B,panelGroupElement:p.current}),[C,g,i,N,M,I,f,O,T,X,H,D,K,te,U,B]),be={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Od(Jy.Provider,{value:ie},Od(u,{...d,children:e,className:n,style:{...be,...c},ref:p,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":f}))}const rL=zj((t,e)=>Od(iL,{...t,forwardedRef:e}));iL.displayName="PanelGroup";rL.displayName="forwardRef(PanelGroup)";function vu(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Wl(t,e,n){const i=vu(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function $K({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){xc(()=>{if(t||n==null||i==null)return;const r=Zy(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");et(a);const l=hp(a,i),c=Gj(a,e,i);et(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function DS({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=ar(null),u=ar({onDragging:r});xc(()=>{u.current.onDragging=r});const d=Uj(Jy);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:p,groupId:g,registerResizeHandle:m,startDragging:v,stopDragging:y,panelGroupElement:x}=d,w=nC(i),S=(p==null?void 0:p.dragHandleId)===w,[_,E]=_v(!1),[C,N]=_v(null),M=Ri(()=>{const O=c.current;et(O),O.blur(),y();const{onDragging:T}=u.current;T&&T(!1)},[y]);xc(()=>{if(n)N(null);else{const O=m(w);N(()=>O)}},[n,w,m]),xc(()=>{if(n||C==null||!S)return;const O=K=>{C(K)},T=K=>{C(K)},H=c.current;et(H);const D=H.ownerDocument;return D.body.addEventListener("contextmenu",M),D.body.addEventListener("mousemove",O),D.body.addEventListener("touchmove",O),D.body.addEventListener("mouseleave",T),window.addEventListener("mouseup",M),window.addEventListener("touchend",M),()=>{D.body.removeEventListener("contextmenu",M),D.body.removeEventListener("mousemove",O),D.body.removeEventListener("touchmove",O),D.body.removeEventListener("mouseleave",T),window.removeEventListener("mouseup",M),window.removeEventListener("touchend",M)}},[f,n,S,C,M]),$K({disabled:n,handleId:w,resizeHandler:C,panelGroupElement:x});const I={cursor:Qj(f),touchAction:"none",userSelect:"none"};return Od(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:O=>{v(w,O.nativeEvent);const T=u.current;et(T);const{onDragging:H}=T;H&&H(!0)},onMouseUp:M,onTouchCancel:M,onTouchEnd:M,onTouchStart:O=>{v(w,O.nativeEvent);const T=u.current;et(T);const{onDragging:H}=T;H&&H(!0)},ref:c,role:"separator",style:{...I,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":g,"data-resize-handle":"","data-resize-handle-active":S?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w})}DS.displayName="PanelResizeHandle";var Ws=function(){return Ws=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ws.apply(this,arguments)};function sL(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function FK(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var BK=function(){};function zK(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function UK(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var oL=typeof window<"u",VK=oL?window:null,t3=function(t){return!!t.addEventListener},n3=function(t){return!!t.on},HK=function(t,e,n,i){n===void 0&&(n=VK),b.useEffect(function(){if(e&&n)return t3(n)?zK(n,t,e,i):n3(n)&&n.on(t,e,i),function(){t3(n)?UK(n,t,e,i):n3(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},WK=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},yu=function(t,e,n,i){e===void 0&&(e=BK),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=b.useMemo(function(){var c=WK(t),u=function(d){if(c(d))return e(d)};return u},i);HK(s,l,o,a)},GK=function(t,e){return oL?window.matchMedia(t).matches:!1},KK=function(t,e){var n=b.useState(GK(t)),i=n[0],r=n[1];return b.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const qK={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function YK(t,e,n){return(e=JK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i3(Object(n),!0).forEach(function(i){YK(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function XK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JK(t){var e=XK(t,"string");return typeof e=="symbol"?e:e+""}const r3=()=>{};let iC={},aL={},lL=null,cL={mark:r3,measure:r3};try{typeof window<"u"&&(iC=window),typeof document<"u"&&(aL=document),typeof MutationObserver<"u"&&(lL=MutationObserver),typeof performance<"u"&&(cL=performance)}catch{}const{userAgent:s3=""}=iC.navigator||{},fl=iC,Ut=aL,o3=lL,lg=cL;fl.document;const sa=!!Ut.documentElement&&!!Ut.head&&typeof Ut.addEventListener=="function"&&typeof Ut.createElement=="function",uL=~s3.indexOf("MSIE")||~s3.indexOf("Trident/");var ZK=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,QK=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,dL={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},eq={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},fL=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],hi="classic",Qy="duotone",tq="sharp",nq="sharp-duotone",hL=[hi,Qy,tq,nq],iq={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},rq={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},sq=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),oq={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},aq=["fak","fa-kit","fakd","fa-kit-duotone"],a3={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},lq=["kit"],cq={kit:{"fa-kit":"fak"}},uq=["fak","fakd"],dq={kit:{fak:"fa-kit"}},l3={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},cg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},fq=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],hq=["fak","fa-kit","fakd","fa-kit-duotone"],pq={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},mq={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},gq={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},$S={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},vq=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],FS=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...fq,...vq],yq=["solid","regular","light","thin","duotone","brands"],pL=[1,2,3,4,5,6,7,8,9,10],bq=pL.concat([11,12,13,14,15,16,17,18,19,20]),xq=[...Object.keys(gq),...yq,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",cg.GROUP,cg.SWAP_OPACITY,cg.PRIMARY,cg.SECONDARY].concat(pL.map(t=>"".concat(t,"x"))).concat(bq.map(t=>"w-".concat(t))),wq={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Jo="___FONT_AWESOME___",BS=16,mL="fa",gL="svg-inline--fa",Ic="data-fa-i2svg",zS="data-fa-pseudo-element",Sq="data-fa-pseudo-element-pending",rC="data-prefix",sC="data-icon",c3="fontawesome-i2svg",kq="async",_q=["HTML","HEAD","STYLE","SCRIPT"],vL=(()=>{try{return!0}catch{return!1}})();function om(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[hi]}})}const yL=oe({},dL);yL[hi]=oe(oe(oe(oe({},{"fa-duotone":"duotone"}),dL[hi]),a3.kit),a3["kit-duotone"]);const Cq=om(yL),US=oe({},oq);US[hi]=oe(oe(oe(oe({},{duotone:"fad"}),US[hi]),l3.kit),l3["kit-duotone"]);const u3=om(US),VS=oe({},$S);VS[hi]=oe(oe({},VS[hi]),dq.kit);const oC=om(VS),HS=oe({},mq);HS[hi]=oe(oe({},HS[hi]),cq.kit);om(HS);const Eq=ZK,bL="fa-layers-text",Aq=QK,Nq=oe({},iq);om(Nq);const Pq=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Kx=eq,Mq=[...lq,...xq],Eh=fl.FontAwesomeConfig||{};function Rq(t){var e=Ut.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function Tq(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Ut&&typeof Ut.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=Tq(Rq(n));r!=null&&(Eh[i]=r)});const xL={styleDefault:"solid",familyDefault:hi,cssPrefix:mL,replacementClass:gL,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Eh.familyPrefix&&(Eh.cssPrefix=Eh.familyPrefix);const Id=oe(oe({},xL),Eh);Id.autoReplaceSvg||(Id.observeMutations=!1);const Oe={};Object.keys(xL).forEach(t=>{Object.defineProperty(Oe,t,{enumerable:!0,set:function(e){Id[t]=e,Ah.forEach(n=>n(Oe))},get:function(){return Id[t]}})});Object.defineProperty(Oe,"familyPrefix",{enumerable:!0,set:function(t){Id.cssPrefix=t,Ah.forEach(e=>e(Oe))},get:function(){return Id.cssPrefix}});fl.FontAwesomeConfig=Oe;const Ah=[];function Oq(t){return Ah.push(t),()=>{Ah.splice(Ah.indexOf(t),1)}}const pa=BS,Js={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Iq(t){if(!t||!sa)return;const e=Ut.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Ut.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Ut.head.insertBefore(e,i),t}const jq="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function pp(){let t=12,e="";for(;t-- >0;)e+=jq[Math.random()*62|0];return e}function nf(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function aC(t){return t.classList?nf(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function wL(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Lq(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(wL(t[n]),'" '),"").trim()}function eb(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function lC(t){return t.size!==Js.size||t.x!==Js.x||t.y!==Js.y||t.rotate!==Js.rotate||t.flipX||t.flipY}function Dq(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function $q(t){let{transform:e,width:n=BS,height:i=BS,startCentered:r=!1}=t,s="";return r&&uL?s+="translate(".concat(e.x/pa-n/2,"em, ").concat(e.y/pa-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/pa,"em), calc(-50% + ").concat(e.y/pa,"em)) "):s+="translate(".concat(e.x/pa,"em, ").concat(e.y/pa,"em) "),s+="scale(".concat(e.size/pa*(e.flipX?-1:1),", ").concat(e.size/pa*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var Fq=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function SL(){const t=mL,e=gL,n=Oe.cssPrefix,i=Oe.replacementClass;let r=Fq;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let d3=!1;function qx(){Oe.autoAddCss&&!d3&&(Iq(SL()),d3=!0)}var Bq={mixout(){return{dom:{css:SL,insertCss:qx}}},hooks(){return{beforeDOMElementCreation(){qx()},beforeI2svg(){qx()}}}};const Zo=fl||{};Zo[Jo]||(Zo[Jo]={});Zo[Jo].styles||(Zo[Jo].styles={});Zo[Jo].hooks||(Zo[Jo].hooks={});Zo[Jo].shims||(Zo[Jo].shims=[]);var Zs=Zo[Jo];const kL=[],_L=function(){Ut.removeEventListener("DOMContentLoaded",_L),Cv=1,kL.map(t=>t())};let Cv=!1;sa&&(Cv=(Ut.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ut.readyState),Cv||Ut.addEventListener("DOMContentLoaded",_L));function zq(t){sa&&(Cv?setTimeout(t,0):kL.push(t))}function am(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?wL(t):"<".concat(e," ").concat(Lq(n),">").concat(i.map(am).join(""),"</").concat(e,">")}function f3(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var Yx=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function Uq(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function WS(t){const e=Uq(t);return e.length===1?e[0].toString(16):null}function Vq(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function h3(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function GS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=h3(e);typeof Zs.hooks.addPack=="function"&&!i?Zs.hooks.addPack(t,h3(e)):Zs.styles[t]=oe(oe({},Zs.styles[t]||{}),r),t==="fas"&&GS("fa",e)}const{styles:mp,shims:Hq}=Zs,CL=Object.keys(oC),Wq=CL.reduce((t,e)=>(t[e]=Object.keys(oC[e]),t),{});let cC=null,EL={},AL={},NL={},PL={},ML={};function Gq(t){return~Mq.indexOf(t)}function Kq(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!Gq(r)?r:null}const RL=()=>{const t=i=>Yx(mp,(r,s,o)=>(r[o]=Yx(s,i,{}),r),{});EL=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),AL=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),ML=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in mp||Oe.autoFetchSvg,n=Yx(Hq,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});NL=n.names,PL=n.unicodes,cC=tb(Oe.styleDefault,{family:Oe.familyDefault})};Oq(t=>{cC=tb(t.styleDefault,{family:Oe.familyDefault})});RL();function uC(t,e){return(EL[t]||{})[e]}function qq(t,e){return(AL[t]||{})[e]}function pc(t,e){return(ML[t]||{})[e]}function TL(t){return NL[t]||{prefix:null,iconName:null}}function Yq(t){const e=PL[t],n=uC("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function hl(){return cC}const OL=()=>({prefix:null,iconName:null,rest:[]});function Xq(t){let e=hi;const n=CL.reduce((i,r)=>(i[r]="".concat(Oe.cssPrefix,"-").concat(r),i),{});return hL.forEach(i=>{(t.includes(n[i])||t.some(r=>Wq[i].includes(r)))&&(e=i)}),e}function tb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=hi}=e,i=Cq[n][t];if(n===Qy&&!t)return"fad";const r=u3[n][t]||u3[n][i],s=t in Zs.styles?t:null;return r||s||null}function Jq(t){let e=[],n=null;return t.forEach(i=>{const r=Kq(Oe.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function p3(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function nb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=FS.concat(hq),s=p3(t.filter(d=>r.includes(d))),o=p3(t.filter(d=>!FS.includes(d))),a=s.filter(d=>(i=d,!fL.includes(d))),[l=null]=a,c=Xq(s),u=oe(oe({},Jq(o)),{},{prefix:tb(l,{family:c})});return oe(oe(oe({},u),tY({values:t,family:c,styles:mp,config:Oe,canonical:u,givenPrefix:i})),Zq(n,i,u))}function Zq(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?TL(r):{},o=pc(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!mp.far&&mp.fas&&!Oe.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const Qq=hL.filter(t=>t!==hi||t!==Qy),eY=Object.keys($S).filter(t=>t!==hi).map(t=>Object.keys($S[t])).flat();function tY(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===Qy,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||c||u)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&Qq.includes(n)&&(Object.keys(s).find(f=>eY.includes(f))||o.autoFetchSvg)){const f=sq.get(n).defaultShortPrefixId;i.prefix=f,i.iconName=pc(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=hl()||"fas"),i}class nY{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=oe(oe({},this.definitions[s]||{}),r[s]),GS(s,r[s]);const o=oC[hi][s];o&&GS(o,r[s]),RL()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let m3=[],Uu={};const nd={},iY=Object.keys(nd);function rY(t,e){let{mixoutsTo:n}=e;return m3=t,Uu={},Object.keys(nd).forEach(i=>{iY.indexOf(i)===-1&&delete nd[i]}),m3.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{Uu[o]||(Uu[o]=[]),Uu[o].push(s[o])})}i.provides&&i.provides(nd)}),n}function KS(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Uu[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function jc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Uu[t]||[]).forEach(s=>{s.apply(null,n)})}function pl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return nd[t]?nd[t].apply(null,e):void 0}function qS(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||hl();if(e)return e=pc(n,e)||e,f3(IL.definitions,n,e)||f3(Zs.styles,n,e)}const IL=new nY,sY=()=>{Oe.autoReplaceSvg=!1,Oe.observeMutations=!1,jc("noAuto")},oY={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return sa?(jc("beforeI2svg",t),pl("pseudoElements2svg",t),pl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Oe.autoReplaceSvg===!1&&(Oe.autoReplaceSvg=!0),Oe.observeMutations=!0,zq(()=>{lY({autoReplaceSvgRoot:e}),jc("watch",t)})}},aY={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:pc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=tb(t[0]);return{prefix:n,iconName:pc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Oe.cssPrefix,"-"))>-1||t.match(Eq))){const e=nb(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||hl(),iconName:pc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=hl();return{prefix:e,iconName:pc(e,t)||t}}}},Cr={noAuto:sY,config:Oe,dom:oY,parse:aY,library:IL,findIconDefinition:qS,toHtml:am},lY=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Ut}=t;(Object.keys(Zs.styles).length>0||Oe.autoFetchSvg)&&sa&&Oe.autoReplaceSvg&&Cr.dom.i2svg({node:e})};function ib(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>am(n))}}),Object.defineProperty(t,"node",{get:function(){if(!sa)return;const n=Ut.createElement("div");return n.innerHTML=t.html,n.children}}),t}function cY(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(lC(o)&&n.found&&!i.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};r.style=eb(oe(oe({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function uY(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Oe.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:oe(oe({},r),{},{id:o}),children:i}]}]}function dC(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:f,height:p}=n.found?n:e,g=uq.includes(i),m=[Oe.replacementClass,r?"".concat(Oe.cssPrefix,"-").concat(r):""].filter(_=>u.classes.indexOf(_)===-1).filter(_=>_!==""||!!_).concat(u.classes).join(" ");let v={children:[],attributes:oe(oe({},u.attributes),{},{"data-prefix":i,"data-icon":r,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(p)})};const y=g&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/p*16*.0625,"em")}:{};d&&(v.attributes[Ic]=""),a&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(c||pp())},children:[a]}),delete v.attributes.title);const x=oe(oe({},v),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:oe(oe({},y),u.styles)}),{children:w,attributes:S}=n.found&&e.found?pl("generateAbstractMask",x)||{children:[],attributes:{}}:pl("generateAbstractIcon",x)||{children:[],attributes:{}};return x.children=w,x.attributes=S,o?uY(x):cY(x)}function g3(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=oe(oe(oe({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Ic]="");const c=oe({},o.styles);lC(r)&&(c.transform=$q({transform:r,startCentered:!0,width:n,height:i}),c["-webkit-transform"]=c.transform);const u=eb(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function dY(t){const{content:e,title:n,extra:i}=t,r=oe(oe(oe({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=eb(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:Xx}=Zs;function YS(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Kx.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Kx.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Kx.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const fY={found:!1,width:512,height:512};function hY(t,e){!vL&&!Oe.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function XS(t,e){let n=e;return e==="fa"&&Oe.styleDefault!==null&&(e=hl()),new Promise((i,r)=>{if(n==="fa"){const s=TL(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Xx[e]&&Xx[e][t]){const s=Xx[e][t];return i(YS(s))}hY(t,e),i(oe(oe({},fY),{},{icon:Oe.showMissingIcons&&t?pl("missingIconAbstract")||{}:{}}))})}const v3=()=>{},JS=Oe.measurePerformance&&lg&&lg.mark&&lg.measure?lg:{mark:v3,measure:v3},rh='FA "6.7.1"',pY=t=>(JS.mark("".concat(rh," ").concat(t," begins")),()=>jL(t)),jL=t=>{JS.mark("".concat(rh," ").concat(t," ends")),JS.measure("".concat(rh," ").concat(t),"".concat(rh," ").concat(t," begins"),"".concat(rh," ").concat(t," ends"))};var fC={begin:pY,end:jL};const v0=()=>{};function y3(t){return typeof(t.getAttribute?t.getAttribute(Ic):null)=="string"}function mY(t){const e=t.getAttribute?t.getAttribute(rC):null,n=t.getAttribute?t.getAttribute(sC):null;return e&&n}function gY(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Oe.replacementClass)}function vY(){return Oe.autoReplaceSvg===!0?y0.replace:y0[Oe.autoReplaceSvg]||y0.replace}function yY(t){return Ut.createElementNS("http://www.w3.org/2000/svg",t)}function bY(t){return Ut.createElement(t)}function LL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?yY:bY}=e;if(typeof t=="string")return Ut.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(LL(s,{ceFn:n}))}),i}function xY(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const y0={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(LL(n),e)}),e.getAttribute(Ic)===null&&Oe.keepOriginalSource){let n=Ut.createComment(xY(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~aC(e).indexOf(Oe.replacementClass))return y0.replace(t);const i=new RegExp("".concat(Oe.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Oe.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>am(s)).join(`
`);e.setAttribute(Ic,""),e.innerHTML=r}};function b3(t){t()}function DL(t,e){const n=typeof e=="function"?e:v0;if(t.length===0)n();else{let i=b3;Oe.mutateApproach===kq&&(i=fl.requestAnimationFrame||b3),i(()=>{const r=vY(),s=fC.begin("mutate");t.map(r),s(),n()})}}let hC=!1;function $L(){hC=!0}function ZS(){hC=!1}let Ev=null;function x3(t){if(!o3||!Oe.observeMutations)return;const{treeCallback:e=v0,nodeCallback:n=v0,pseudoElementsCallback:i=v0,observeMutationsRoot:r=Ut}=t;Ev=new o3(s=>{if(hC)return;const o=hl();nf(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!y3(a.addedNodes[0])&&(Oe.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Oe.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&y3(a.target)&&~Pq.indexOf(a.attributeName))if(a.attributeName==="class"&&mY(a.target)){const{prefix:l,iconName:c}=nb(aC(a.target));a.target.setAttribute(rC,l||o),c&&a.target.setAttribute(sC,c)}else gY(a.target)&&n(a.target)})}),sa&&Ev.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function wY(){Ev&&Ev.disconnect()}function SY(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function kY(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=nb(aC(t));return r.prefix||(r.prefix=hl()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=qq(r.prefix,t.innerText)||uC(r.prefix,WS(t.innerText))),!r.iconName&&Oe.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function _Y(t){const e=nf(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Oe.autoA11y&&(n?e["aria-labelledby"]="".concat(Oe.replacementClass,"-title-").concat(i||pp()):(e["aria-hidden"]="true",e.focusable="false")),e}function CY(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Js,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function w3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=kY(t),s=_Y(t),o=KS("parseNodeAttributes",{},t);let a=e.styleParser?SY(t):[];return oe({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:Js,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:EY}=Zs;function FL(t){const e=Oe.autoReplaceSvg==="nest"?w3(t,{styleParser:!1}):w3(t);return~e.extra.classes.indexOf(bL)?pl("generateLayersText",t,e):pl("generateSvgReplacementMutation",t,e)}function AY(){return[...aq,...FS]}function S3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!sa)return Promise.resolve();const n=Ut.documentElement.classList,i=u=>n.add("".concat(c3,"-").concat(u)),r=u=>n.remove("".concat(c3,"-").concat(u)),s=Oe.autoFetchSvg?AY():fL.concat(Object.keys(EY));s.includes("fa")||s.push("fa");const o=[".".concat(bL,":not([").concat(Ic,"])")].concat(s.map(u=>".".concat(u,":not([").concat(Ic,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=nf(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=fC.begin("onTree"),c=a.reduce((u,d)=>{try{const f=FL(d);f&&u.push(f)}catch(f){vL||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{DL(f,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function NY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;FL(t).then(n=>{n&&DL([n],e)})}function PY(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:qS(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:qS(r||{})),t(i,oe(oe({},n),{},{mask:r}))}}const MY=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Js,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:p}=t;return ib(oe({type:"icon"},t),()=>(jc("beforeDOMElementCreation",{iconDefinition:t,params:e}),Oe.autoA11y&&(o?c["aria-labelledby"]="".concat(Oe.replacementClass,"-title-").concat(a||pp()):(c["aria-hidden"]="true",c.focusable="false")),dC({icons:{main:YS(p),mask:r?YS(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:oe(oe({},Js),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var RY={mixout(){return{icon:PY(MY)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=S3,t.nodeCallback=NY,t}}},provides(t){t.i2svg=function(e){const{node:n=Ut,callback:i=()=>{}}=e;return S3(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((f,p)=>{Promise.all([XS(i,o),c.iconName?XS(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(g=>{let[m,v]=g;f([e,dC({icons:{main:m,mask:v},prefix:o,iconName:i,transform:a,symbol:l,maskId:u,title:r,titleId:s,extra:d,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=eb(o);a.length>0&&(i.style=a);let l;return lC(s)&&(l=pl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},TY={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return ib({type:"layer"},()=>{jc("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(Oe.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},OY={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return ib({type:"counter",content:t},()=>(jc("beforeDOMElementCreation",{content:t,params:e}),dY({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(Oe.cssPrefix,"-layers-counter"),...i]}})))}}}},IY={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Js,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return ib({type:"text",content:t},()=>(jc("beforeDOMElementCreation",{content:t,params:e}),g3({content:t,transform:oe(oe({},Js),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(Oe.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(uL){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return Oe.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,g3({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const jY=new RegExp('"',"ug"),k3=[1105920,1112319],_3=oe(oe(oe(oe({},{FontAwesome:{normal:"fas",400:"fas"}}),rq),wq),pq),QS=Object.keys(_3).reduce((t,e)=>(t[e.toLowerCase()]=_3[e],t),{}),LY=Object.keys(QS).reduce((t,e)=>{const n=QS[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function DY(t){const e=t.replace(jY,""),n=Vq(e,0),i=n>=k3[0]&&n<=k3[1],r=e.length===2?e[0]===e[1]:!1;return{value:WS(r?e[0]:e),isSecondary:i||r}}function $Y(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(QS[n]||{})[r]||LY[n]}function C3(t,e){const n="".concat(Sq).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=nf(t.children).filter(f=>f.getAttribute(zS)===e)[0],a=fl.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(Aq),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),i();if(c&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let p=$Y(l,u);const{value:g,isSecondary:m}=DY(f),v=c[0].startsWith("FontAwesome");let y=uC(p,g),x=y;if(v){const w=Yq(g);w.iconName&&w.prefix&&(y=w.iconName,p=w.prefix)}if(y&&!m&&(!o||o.getAttribute(rC)!==p||o.getAttribute(sC)!==x)){t.setAttribute(n,x),o&&t.removeChild(o);const w=CY(),{extra:S}=w;S.attributes[zS]=e,XS(y,p).then(_=>{const E=dC(oe(oe({},w),{},{icons:{main:_,mask:OL()},prefix:p,iconName:x,extra:S,watchable:!0})),C=Ut.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=E.map(N=>am(N)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function FY(t){return Promise.all([C3(t,"::before"),C3(t,"::after")])}function BY(t){return t.parentNode!==document.head&&!~_q.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(zS)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function E3(t){if(sa)return new Promise((e,n)=>{const i=nf(t.querySelectorAll("*")).filter(BY).map(FY),r=fC.begin("searchPseudoElements");$L(),Promise.all(i).then(()=>{r(),ZS(),e()}).catch(()=>{r(),ZS(),n()})})}var zY={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=E3,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Ut}=e;Oe.searchPseudoElements&&E3(n)}}};let A3=!1;var UY={mixout(){return{dom:{unwatch(){$L(),A3=!0}}}},hooks(){return{bootstrap(){x3(KS("mutationObserverCallbacks",{}))},noAuto(){wY()},watch(t){const{observeMutationsRoot:e}=t;A3?ZS():x3(KS("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const N3=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var VY={mixout(){return{parse:{transform:t=>N3(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=N3(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:u,path:d};return{tag:"g",attributes:oe({},f.outer),children:[{tag:"g",attributes:oe({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:oe(oe({},n.icon.attributes),f.path)}]}]}}}};const Jx={x:0,y:0,width:"100%",height:"100%"};function P3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function HY(t){return t.tag==="g"?t.children:[t]}var WY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?nb(n.split(" ").map(r=>r.trim())):OL();return i.prefix||(i.prefix=hl()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=r,{width:u,icon:d}=s,f=Dq({transform:a,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:oe(oe({},Jx),{},{fill:"white"})},g=c.children?{children:c.children.map(P3)}:{},m={tag:"g",attributes:oe({},f.inner),children:[P3(oe({tag:c.tag,attributes:oe(oe({},c.attributes),f.path)},g))]},v={tag:"g",attributes:oe({},f.outer),children:[m]},y="mask-".concat(o||pp()),x="clip-".concat(o||pp()),w={tag:"mask",attributes:oe(oe({},Jx),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},S={tag:"defs",children:[{tag:"clipPath",attributes:{id:x},children:HY(d)},w]};return n.push(S,{tag:"rect",attributes:oe({fill:"currentColor","clip-path":"url(#".concat(x,")"),mask:"url(#".concat(y,")")},Jx)}),{children:n,attributes:i}}}},GY={provides(t){let e=!1;fl.matchMedia&&(e=fl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:oe(oe({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=oe(oe({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:oe(oe({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:oe(oe({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:oe(oe({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:oe(oe({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:oe(oe({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},KY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},qY=[Bq,RY,TY,OY,IY,zY,UY,VY,WY,GY,KY];rY(qY,{mixoutsTo:Cr});Cr.noAuto;Cr.config;Cr.library;Cr.dom;const e2=Cr.parse;Cr.findIconDefinition;Cr.toHtml;const YY=Cr.icon;Cr.layer;Cr.text;Cr.counter;var BL={exports:{}},XY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",JY=XY,ZY=JY;function zL(){}function UL(){}UL.resetWarningCache=zL;var QY=function(){function t(i,r,s,o,a,l){if(l!==ZY){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:UL,resetWarningCache:zL};return n.PropTypes=n,n};BL.exports=QY();var eX=BL.exports;const ot=qc(eX);function M3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Vs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M3(Object(n),!0).forEach(function(i){Vu(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Av(t){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(t)}function Vu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tX(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function nX(t,e){if(t==null)return{};var n=tX(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function t2(t){return iX(t)||rX(t)||sX(t)||oX()}function iX(t){if(Array.isArray(t))return n2(t)}function rX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sX(t,e){if(t){if(typeof t=="string")return n2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n2(t,e)}}function n2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function oX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aX(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,f=t.fixedWidth,p=t.inverse,g=t.border,m=t.listItem,v=t.flip,y=t.size,x=t.rotation,w=t.pull,S=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":f,"fa-inverse":p,"fa-border":g,"fa-li":m,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},Vu(e,"fa-".concat(y),typeof y<"u"&&y!==null),Vu(e,"fa-rotate-".concat(x),typeof x<"u"&&x!==null&&x!==0),Vu(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),Vu(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(S).map(function(_){return S[_]?_:null}).filter(function(_){return _})}function lX(t){return t=t-0,t===t}function VL(t){return lX(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var cX=["style"];function uX(t){return t.charAt(0).toUpperCase()+t.slice(1)}function dX(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=VL(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[uX(r)]=s:e[r]=s,e},{})}function HL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return HL(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=dX(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[VL(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=nX(n,cX);return r.attrs.style=Vs(Vs({},r.attrs.style),o),t.apply(void 0,[e.tag,Vs(Vs({},r.attrs),a)].concat(t2(i)))}var WL=!1;try{WL=!0}catch{}function fX(){if(!WL&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function R3(t){if(t&&Av(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(e2.icon)return e2.icon(t);if(t===null)return null;if(t&&Av(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function Zx(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Vu({},t,e):{}}var T3={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},$e=Ft.forwardRef(function(t,e){var n=Vs(Vs({},T3),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=R3(i),d=Zx("classes",[].concat(t2(aX(n)),t2((o||"").split(" ")))),f=Zx("transform",typeof n.transform=="string"?e2.transform(n.transform):n.transform),p=Zx("mask",R3(r)),g=YY(u,Vs(Vs(Vs(Vs({},d),f),p),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!g)return fX("Could not find icon",u),null;var m=g.abstract,v={ref:e};return Object.keys(n).forEach(function(y){T3.hasOwnProperty(y)||(v[y]=n[y])}),hX(m[0],v)});$e.displayName="FontAwesomeIcon";$e.propTypes={beat:ot.bool,border:ot.bool,beatFade:ot.bool,bounce:ot.bool,className:ot.string,fade:ot.bool,flash:ot.bool,mask:ot.oneOfType([ot.object,ot.array,ot.string]),maskId:ot.string,fixedWidth:ot.bool,inverse:ot.bool,flip:ot.oneOf([!0,!1,"horizontal","vertical","both"]),icon:ot.oneOfType([ot.object,ot.array,ot.string]),listItem:ot.bool,pull:ot.oneOf(["right","left"]),pulse:ot.bool,rotation:ot.oneOf([0,90,180,270]),shake:ot.bool,size:ot.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:ot.bool,spinPulse:ot.bool,spinReverse:ot.bool,symbol:ot.oneOfType([ot.bool,ot.string]),title:ot.string,titleId:ot.string,transform:ot.oneOfType([ot.string,ot.object]),swapOpacity:ot.bool};var hX=HL.bind(null,Ft.createElement);function GL(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=GL(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Q(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=GL(t))&&(i&&(i+=" "),i+=e);return i}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const O3={prefix:"fas",iconName:"info",icon:[192,512,[],"f129","M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"]},pX={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},pC=pX,id={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},mX={prefix:"fas",iconName:"compress",icon:[448,512,[],"f066","M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"]},gX={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},vX={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},yX={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},bX={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"]},xX={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},wX=xX,Nh={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},SX={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},kX=SX,_X={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},CX={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},EX=CX,I3={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},AX={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},KL=AX,NX={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},qL=NX,PX={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M267.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160L64 241 64 96c0-17.7-14.3-32-32-32S0 78.3 0 96L0 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-145 11.5 9.6 192 160z"]},YL=PX,j3={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},L3={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},gp={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},MX={prefix:"fas",iconName:"expand",icon:[448,512,[],"f065","M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"]},RX={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},lm=RX,XL={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},TX={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},OX={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},mC={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},JL={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},IX={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},jX=IX,LX={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]},DX={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},ZL={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},$X={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},i2=$X,FX={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 80l0 48c0 44.2-100.3 80-224 80S0 172.2 0 128L0 80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6L448 288c0 44.2-100.3 80-224 80S0 332.2 0 288L0 186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6l0 85.9c0 44.2-100.3 80-224 80S0 476.2 0 432l0-85.9z"]},cm={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]},QL={default:"bg-stone-800 text-white hover:bg-stone-700 focus:ring-stone-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-stone-600 bg-transparent text-white hover:bg-stone-800 focus:ring-stone-500",secondary:"bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500",ghost:"bg-transparent text-stone-300 hover:bg-stone-800 hover:text-white focus:ring-stone-500",link:"bg-transparent text-mantis-400 hover:text-mantis-300 hover:underline focus:ring-mantis-500",primary:"bg-mantis-600 text-white hover:bg-mantis-700 focus:ring-mantis-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",error:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},BX={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"},mt=b.memo(b.forwardRef(({variant:t="default",size:e="md",isLoading:n=!1,loadingText:i,leftIcon:r,rightIcon:s,disabled:o=!1,fullWidth:a=!1,className:l,children:c,onClick:u,type:d="button","aria-label":f,title:p,...g},m)=>{const v=o||n;return h.jsxs("button",{ref:m,type:d,disabled:v,onClick:u,"aria-label":f,title:p,className:Q("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",QL[t],BX[e],a&&"w-full",l),...g,children:[n&&h.jsx($e,{icon:JL,className:"animate-spin","aria-hidden":"true"}),!n&&r&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:r}),h.jsx("span",{children:n&&i?i:c}),!n&&s&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:s})]})}));mt.displayName="Button";const b0=b.memo(b.forwardRef(({icon:t,variant:e="ghost",size:n="md",isLoading:i=!1,disabled:r=!1,className:s,onClick:o,"aria-label":a,title:l,...c},u)=>{const d=r||i,f={sm:"size-8",md:"size-10",lg:"size-12",xl:"size-14"};return h.jsx("button",{ref:u,disabled:d,onClick:o,"aria-label":a,title:l,className:Q("inline-flex items-center justify-center rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",QL[e],f[n],s),...c,children:i?h.jsx($e,{icon:JL,className:"animate-spin","aria-hidden":"true"}):h.jsx("span",{className:"flex items-center justify-center","aria-hidden":"true",children:t})})}));b0.displayName="IconButton";const zX=b.memo(({children:t,orientation:e="horizontal",className:n})=>h.jsx("div",{className:Q("inline-flex",e==="horizontal"?"flex-row":"flex-col",n),role:"group",children:t}));zX.displayName="ButtonGroup";const eD={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2","top-start":"bottom-full left-0 mb-2","top-end":"bottom-full right-0 mb-2","bottom-start":"top-full left-0 mt-2","bottom-end":"top-full right-0 mt-2"},tD={top:"top-full left-1/2 transform -translate-x-1/2 border-t-stone-800",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-stone-800",left:"left-full top-1/2 transform -translate-y-1/2 border-l-stone-800",right:"right-full top-1/2 transform -translate-y-1/2 border-r-stone-800","top-start":"top-full left-4 border-t-stone-800","top-end":"top-full right-4 border-t-stone-800","bottom-start":"bottom-full left-4 border-b-stone-800","bottom-end":"bottom-full right-4 border-b-stone-800"},vr=b.memo(({content:t,children:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),[u,d]=b.useState(n),f=b.useRef(null),p=b.useRef(null),g=b.useRef(),m=b.useCallback(()=>{a||(document.body.classList.add("tooltip-open"),g.current=setTimeout(()=>{c(!0)},i))},[a,i]),v=b.useCallback(()=>{g.current&&clearTimeout(g.current),document.body.classList.remove("tooltip-open"),c(!1)},[]);return b.useEffect(()=>{if(!l||!p.current||!f.current)return;const y=p.current,w=f.current.getBoundingClientRect(),S=y.getBoundingClientRect();let _=n;w.left+S.width>window.innerWidth&&(n.includes("right")?_="left":n.includes("top")?_="top-end":n.includes("bottom")&&(_="bottom-end")),w.left-S.width<0&&(n.includes("left")?_="right":n.includes("top")?_="top-start":n.includes("bottom")&&(_="bottom-start")),w.top-S.height<0&&n.includes("top")&&(_="bottom"),w.bottom+S.height>window.innerHeight&&n.includes("bottom")&&(_="top"),d(_)},[l,n]),h.jsxs("div",{ref:f,className:Q("relative inline-block",r),onMouseEnter:m,onMouseLeave:v,onFocus:m,onBlur:v,children:[e,l&&h.jsxs("div",{ref:p,className:Q("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",eD[u]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:Q("absolute size-0 border-4 border-transparent",tD[u])})]})]})});vr.displayName="Tooltip";const UX=b.memo(({content:t,className:e,size:n="md"})=>{const i={sm:"size-3",md:"size-4",lg:"size-5"};return h.jsx(vr,{content:t,className:e,children:h.jsx($e,{icon:qL,className:Q("cursor-help text-stone-400 transition-colors hover:text-stone-300",i[n])})})});UX.displayName="InfoTooltip";const VX=b.memo(({content:t,trigger:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),u=b.useRef(null),d=b.useRef(null),f=b.useRef(),p=b.useCallback(()=>{a||(f.current=setTimeout(()=>{c(!0)},i))},[a,i]),g=b.useCallback(()=>{f.current&&clearTimeout(f.current),c(!1)},[]);return h.jsxs("div",{ref:u,className:Q("relative inline-block",r),onMouseEnter:p,onMouseLeave:g,onFocus:p,onBlur:g,children:[e,l&&h.jsxs("div",{ref:d,className:Q("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",eD[n]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:Q("absolute size-0 border-4 border-transparent",tD[n])})]})]})});VX.displayName="CustomTooltip";function nD(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const iD=["en","es"];function gC(t){return function(n,i,...r){const s=nD(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const vC={},HX=Symbol((vC?"production":void 0)!=="production"?"RESET":""),rD=t=>typeof(t==null?void 0:t.then)=="function";function WX(t=()=>{try{return window.localStorage}catch(n){(vC?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,c)=>{var u,d;const f=g=>{if(g=g||"",i!==g){try{r=JSON.parse(g,e==null?void 0:e.reviver)}catch{return c}i=g}return r},p=(d=(u=t())==null?void 0:u.getItem(l))!=null?d:null;return rD(p)?p.then(f):f(p)},setItem:(l,c)=>{var u;return(u=t())==null?void 0:u.setItem(l,JSON.stringify(c,void 0))},removeItem:l=>{var c;return(c=t())==null?void 0:c.removeItem(l)}},o=l=>(c,u,d)=>l(c,f=>{let p;try{p=JSON.parse(f||"")}catch{p=d}u(p)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,c)=>{if(!(t()instanceof window.Storage))return()=>{};const u=d=>{d.storageArea===t()&&d.key===l&&c(d.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(s.subscribe=o(a)),s}const GX=WX();function sD(t,e,n=GX,i){const r=i==null?void 0:i.getOnInit,s=ue(r?n.getItem(t,e):e);return(vC?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},ue(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===HX?(l(s,e),n.removeItem(t)):rD(u)?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}const L=tC();function KX(t){return h.jsx(bK,{store:L,children:t.children})}var bt;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(bt||(bt={}));var D3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(D3||(D3={}));const Me=bt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Sa=t=>{switch(typeof t){case"undefined":return Me.undefined;case"string":return Me.string;case"number":return Number.isNaN(t)?Me.nan:Me.number;case"boolean":return Me.boolean;case"function":return Me.function;case"bigint":return Me.bigint;case"symbol":return Me.symbol;case"object":return Array.isArray(t)?Me.array:t===null?Me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Me.promise:typeof Map<"u"&&t instanceof Map?Me.map:typeof Set<"u"&&t instanceof Set?Me.set:typeof Date<"u"&&t instanceof Date?Me.date:Me.object;default:return Me.unknown}},ce=bt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Qo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),i}static assert(e){if(!(e instanceof Qo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,bt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];n[s]=n[s]||[],n[s].push(e(r))}else i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Qo.create=t=>new Qo(t);const r2=(t,e)=>{let n;switch(t.code){case ce.invalid_type:t.received===Me.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,bt.jsonStringifyReplacer)}`;break;case ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${bt.joinValues(t.keys,", ")}`;break;case ce.invalid_union:n="Invalid input";break;case ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${bt.joinValues(t.options)}`;break;case ce.invalid_enum_value:n=`Invalid enum value. Expected ${bt.joinValues(t.options)}, received '${t.received}'`;break;case ce.invalid_arguments:n="Invalid function arguments";break;case ce.invalid_return_type:n="Invalid function return type";break;case ce.invalid_date:n="Invalid date";break;case ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:bt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ce.custom:n="Invalid input";break;case ce.invalid_intersection_types:n="Intersection results could not be merged";break;case ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,bt.assertNever(t)}return{message:n}};let qX=r2;function YX(){return qX}const XX=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}};function we(t,e){const n=YX(),i=XX({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===r2?void 0:r2].filter(r=>!!r)});t.common.issues.push(i)}class wr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Ye;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return wr.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Ye;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Ye=Object.freeze({status:"aborted"}),sh=t=>({status:"dirty",value:t}),Qr=t=>({status:"valid",value:t}),$3=t=>t.status==="aborted",F3=t=>t.status==="dirty",jd=t=>t.status==="valid",Nv=t=>typeof Promise<"u"&&t instanceof Promise;var Te;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Te||(Te={}));class ml{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const B3=(t,e)=>{if(jd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Qo(t.common.issues);return this._error=n,this._error}}};function st(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class yt{get description(){return this._def.description}_getType(e){return Sa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Sa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new wr,ctx:{common:e.parent.common,data:e.data,parsedType:Sa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Nv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sa(e)},r=this._parseSync({data:e,path:i.path,parent:i});return B3(i,r)}"~validate"(e){var i,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sa(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return jd(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(r=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>jd(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sa(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Nv(r)?r:Promise.resolve(r));return B3(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ce.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new $d({schema:this,typeName:Xe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return rl.create(this,this._def)}nullable(){return Fd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oo.create(this)}promise(){return Tv.create(this,this._def)}or(e){return Mv.create([this,e],this._def)}and(e){return Rv.create(this,e,this._def)}transform(e){return new $d({...st(this._def),schema:this,typeName:Xe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new a2({...st(this._def),innerType:this,defaultValue:n,typeName:Xe.ZodDefault})}brand(){return new bJ({typeName:Xe.ZodBranded,type:this,...st(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new l2({...st(this._def),innerType:this,catchValue:n,typeName:Xe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return yC.create(this,e)}readonly(){return c2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const JX=/^c[^\s-]{8,}$/i,ZX=/^[0-9a-z]+$/,QX=/^[0-9A-HJKMNP-TV-Z]{26}$/i,eJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tJ=/^[a-z0-9_-]{21}$/i,nJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,iJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,sJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Qx;const oJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,aJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,lJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,cJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,uJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,oD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fJ=new RegExp(`^${oD}$`);function aD(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function hJ(t){return new RegExp(`^${aD(t)}$`)}function pJ(t){let e=`${oD}T${aD(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function mJ(t,e){return!!((e==="v4"||!e)&&oJ.test(t)||(e==="v6"||!e)&&lJ.test(t))}function gJ(t,e){if(!nJ.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function vJ(t,e){return!!((e==="v4"||!e)&&aJ.test(t)||(e==="v6"||!e)&&cJ.test(t))}class mc extends yt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Me.string){const s=this._getOrReturnCtx(e);return we(s,{code:ce.invalid_type,expected:Me.string,received:s.parsedType}),Ye}const i=new wr;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?we(r,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&we(r,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")rJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"email",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")Qx||(Qx=new RegExp(sJ,"u")),Qx.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"emoji",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")eJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"uuid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")tJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"nanoid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")JX.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cuid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")ZX.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cuid2",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")QX.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"ulid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),we(r,{validation:"url",code:ce.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"regex",code:ce.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?pJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?fJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?hJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?iJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"duration",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?mJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"ip",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?gJ(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"jwt",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?vJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cidr",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?uJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"base64",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?dJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"base64url",code:ce.invalid_string,message:s.message}),i.dirty()):bt.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ce.invalid_string,...Te.errToObj(i)})}_addCheck(e){return new mc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Te.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Te.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Te.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Te.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Te.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Te.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Te.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Te.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Te.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Te.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Te.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Te.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Te.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Te.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Te.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Te.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Te.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Te.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Te.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Te.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Te.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Te.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Te.errToObj(n)})}nonempty(e){return this.min(1,Te.errToObj(e))}trim(){return new mc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new mc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new mc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}mc.create=t=>new mc({checks:[],typeName:Xe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...st(t)});function yJ(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return s%o/10**r}class Ld extends yt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Me.number){const s=this._getOrReturnCtx(e);return we(s,{code:ce.invalid_type,expected:Me.number,received:s.parsedType}),Ye}let i;const r=new wr;for(const s of this._def.checks)s.kind==="int"?bt.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{code:ce.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?yJ(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{code:ce.not_finite,message:s.message}),r.dirty()):bt.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Te.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Te.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Te.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Te.toString(n))}setLimit(e,n,i,r){return new Ld({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Te.toString(r)}]})}_addCheck(e){return new Ld({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Te.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Te.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Te.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Te.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Te.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Te.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&bt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ld.create=t=>new Ld({checks:[],typeName:Xe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...st(t)});class vp extends yt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Me.bigint)return this._getInvalidInput(e);let i;const r=new wr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):bt.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return we(n,{code:ce.invalid_type,expected:Me.bigint,received:n.parsedType}),Ye}gte(e,n){return this.setLimit("min",e,!0,Te.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Te.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Te.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Te.toString(n))}setLimit(e,n,i,r){return new vp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Te.toString(r)}]})}_addCheck(e){return new vp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Te.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Te.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}vp.create=t=>new vp({checks:[],typeName:Xe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...st(t)});class s2 extends yt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Me.boolean){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.boolean,received:i.parsedType}),Ye}return Qr(e.data)}}s2.create=t=>new s2({typeName:Xe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...st(t)});class Pv extends yt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Me.date){const s=this._getOrReturnCtx(e);return we(s,{code:ce.invalid_type,expected:Me.date,received:s.parsedType}),Ye}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return we(s,{code:ce.invalid_date}),Ye}const i=new wr;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:ce.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:ce.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):bt.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Pv({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Te.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Te.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Pv.create=t=>new Pv({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Xe.ZodDate,...st(t)});class z3 extends yt{_parse(e){if(this._getType(e)!==Me.symbol){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.symbol,received:i.parsedType}),Ye}return Qr(e.data)}}z3.create=t=>new z3({typeName:Xe.ZodSymbol,...st(t)});class U3 extends yt{_parse(e){if(this._getType(e)!==Me.undefined){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.undefined,received:i.parsedType}),Ye}return Qr(e.data)}}U3.create=t=>new U3({typeName:Xe.ZodUndefined,...st(t)});class V3 extends yt{_parse(e){if(this._getType(e)!==Me.null){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.null,received:i.parsedType}),Ye}return Qr(e.data)}}V3.create=t=>new V3({typeName:Xe.ZodNull,...st(t)});class H3 extends yt{constructor(){super(...arguments),this._any=!0}_parse(e){return Qr(e.data)}}H3.create=t=>new H3({typeName:Xe.ZodAny,...st(t)});class W3 extends yt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Qr(e.data)}}W3.create=t=>new W3({typeName:Xe.ZodUnknown,...st(t)});class gl extends yt{_parse(e){const n=this._getOrReturnCtx(e);return we(n,{code:ce.invalid_type,expected:Me.never,received:n.parsedType}),Ye}}gl.create=t=>new gl({typeName:Xe.ZodNever,...st(t)});class G3 extends yt{_parse(e){if(this._getType(e)!==Me.undefined){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.void,received:i.parsedType}),Ye}return Qr(e.data)}}G3.create=t=>new G3({typeName:Xe.ZodVoid,...st(t)});class oo extends yt{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==Me.array)return we(n,{code:ce.invalid_type,expected:Me.array,received:n.parsedType}),Ye;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(we(n,{code:o?ce.too_big:ce.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(we(n,{code:ce.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(we(n,{code:ce.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new ml(n,o,n.path,a)))).then(o=>wr.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new ml(n,o,n.path,a)));return wr.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new oo({...this._def,minLength:{value:e,message:Te.toString(n)}})}max(e,n){return new oo({...this._def,maxLength:{value:e,message:Te.toString(n)}})}length(e,n){return new oo({...this._def,exactLength:{value:e,message:Te.toString(n)}})}nonempty(e){return this.min(1,e)}}oo.create=(t,e)=>new oo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Xe.ZodArray,...st(e)});function bu(t){if(t instanceof gn){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=rl.create(bu(i))}return new gn({...t._def,shape:()=>e})}else return t instanceof oo?new oo({...t._def,type:bu(t.element)}):t instanceof rl?rl.create(bu(t.unwrap())):t instanceof Fd?Fd.create(bu(t.unwrap())):t instanceof Lc?Lc.create(t.items.map(e=>bu(e))):t}class gn extends yt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=bt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Me.object){const c=this._getOrReturnCtx(e);return we(c,{code:ce.invalid_type,expected:Me.object,received:c.parsedType}),Ye}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof gl&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new ml(r,d,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof gl){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(we(r,{code:ce.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new ml(r,d,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,f=await u.value;c.push({key:d,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>wr.mergeObjectSync(i,c)):wr.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Te.errToObj,new gn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var s,o;const r=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:Te.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new gn({...this._def,unknownKeys:"strip"})}passthrough(){return new gn({...this._def,unknownKeys:"passthrough"})}extend(e){return new gn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new gn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Xe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new gn({...this._def,catchall:e})}pick(e){const n={};for(const i of bt.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new gn({...this._def,shape:()=>n})}omit(e){const n={};for(const i of bt.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new gn({...this._def,shape:()=>n})}deepPartial(){return bu(this)}partial(e){const n={};for(const i of bt.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new gn({...this._def,shape:()=>n})}required(e){const n={};for(const i of bt.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof rl;)s=s._def.innerType;n[i]=s}return new gn({...this._def,shape:()=>n})}keyof(){return lD(bt.objectKeys(this.shape))}}gn.create=(t,e)=>new gn({shape:()=>t,unknownKeys:"strip",catchall:gl.create(),typeName:Xe.ZodObject,...st(e)});gn.strictCreate=(t,e)=>new gn({shape:()=>t,unknownKeys:"strict",catchall:gl.create(),typeName:Xe.ZodObject,...st(e)});gn.lazycreate=(t,e)=>new gn({shape:t,unknownKeys:"strip",catchall:gl.create(),typeName:Xe.ZodObject,...st(e)});class Mv extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Qo(a.ctx.common.issues));return we(n,{code:ce.invalid_union,unionErrors:o}),Ye}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Qo(l));return we(n,{code:ce.invalid_union,unionErrors:a}),Ye}}get options(){return this._def.options}}Mv.create=(t,e)=>new Mv({options:t,typeName:Xe.ZodUnion,...st(e)});function o2(t,e){const n=Sa(t),i=Sa(e);if(t===e)return{valid:!0,data:t};if(n===Me.object&&i===Me.object){const r=bt.objectKeys(e),s=bt.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=o2(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Me.array&&i===Me.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=o2(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===Me.date&&i===Me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Rv extends yt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if($3(s)||$3(o))return Ye;const a=o2(s.value,o.value);return a.valid?((F3(s)||F3(o))&&n.dirty(),{status:n.value,value:a.data}):(we(i,{code:ce.invalid_intersection_types}),Ye)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Rv.create=(t,e,n)=>new Rv({left:t,right:e,typeName:Xe.ZodIntersection,...st(n)});class Lc extends yt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.array)return we(i,{code:ce.invalid_type,expected:Me.array,received:i.parsedType}),Ye;if(i.data.length<this._def.items.length)return we(i,{code:ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ye;!this._def.rest&&i.data.length>this._def.items.length&&(we(i,{code:ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new ml(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>wr.mergeArray(n,o)):wr.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Lc({...this._def,rest:e})}}Lc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Lc({items:t,typeName:Xe.ZodTuple,rest:null,...st(e)})};class K3 extends yt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.map)return we(i,{code:ce.invalid_type,expected:Me.map,received:i.parsedType}),Ye;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:r._parse(new ml(i,a,i.path,[c,"key"])),value:s._parse(new ml(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Ye;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Ye;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}K3.create=(t,e,n)=>new K3({valueType:e,keyType:t,typeName:Xe.ZodMap,...st(n)});class yp extends yt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.set)return we(i,{code:ce.invalid_type,expected:Me.set,received:i.parsedType}),Ye;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(we(i,{code:ce.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(we(i,{code:ce.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Ye;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...i.data.values()].map((l,c)=>s._parse(new ml(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new yp({...this._def,minSize:{value:e,message:Te.toString(n)}})}max(e,n){return new yp({...this._def,maxSize:{value:e,message:Te.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}yp.create=(t,e)=>new yp({valueType:t,minSize:null,maxSize:null,typeName:Xe.ZodSet,...st(e)});class q3 extends yt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}q3.create=(t,e)=>new q3({getter:t,typeName:Xe.ZodLazy,...st(e)});class Y3 extends yt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return we(n,{received:n.data,code:ce.invalid_literal,expected:this._def.value}),Ye}return{status:"valid",value:e.data}}get value(){return this._def.value}}Y3.create=(t,e)=>new Y3({value:t,typeName:Xe.ZodLiteral,...st(e)});function lD(t,e){return new Dd({values:t,typeName:Xe.ZodEnum,...st(e)})}class Dd extends yt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return we(n,{expected:bt.joinValues(i),received:n.parsedType,code:ce.invalid_type}),Ye}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return we(n,{received:n.data,code:ce.invalid_enum_value,options:i}),Ye}return Qr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Dd.create(e,{...this._def,...n})}exclude(e,n=this._def){return Dd.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Dd.create=lD;class X3 extends yt{_parse(e){const n=bt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Me.string&&i.parsedType!==Me.number){const r=bt.objectValues(n);return we(i,{expected:bt.joinValues(r),received:i.parsedType,code:ce.invalid_type}),Ye}if(this._cache||(this._cache=new Set(bt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=bt.objectValues(n);return we(i,{received:i.data,code:ce.invalid_enum_value,options:r}),Ye}return Qr(e.data)}get enum(){return this._def.values}}X3.create=(t,e)=>new X3({values:t,typeName:Xe.ZodNativeEnum,...st(e)});class Tv extends yt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.promise&&n.common.async===!1)return we(n,{code:ce.invalid_type,expected:Me.promise,received:n.parsedType}),Ye;const i=n.parsedType===Me.promise?n.data:Promise.resolve(n.data);return Qr(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Tv.create=(t,e)=>new Tv({type:t,typeName:Xe.ZodPromise,...st(e)});class $d extends yt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Xe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{we(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ye;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?Ye:l.status==="dirty"||n.value==="dirty"?sh(l.value):l});{if(n.value==="aborted")return Ye;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?Ye:a.status==="dirty"||n.value==="dirty"?sh(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Ye:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Ye:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!jd(o))return Ye;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>jd(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):Ye);bt.assertNever(r)}}$d.create=(t,e,n)=>new $d({schema:t,typeName:Xe.ZodEffects,effect:e,...st(n)});$d.createWithPreprocess=(t,e,n)=>new $d({schema:e,effect:{type:"preprocess",transform:t},typeName:Xe.ZodEffects,...st(n)});class rl extends yt{_parse(e){return this._getType(e)===Me.undefined?Qr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rl.create=(t,e)=>new rl({innerType:t,typeName:Xe.ZodOptional,...st(e)});class Fd extends yt{_parse(e){return this._getType(e)===Me.null?Qr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fd.create=(t,e)=>new Fd({innerType:t,typeName:Xe.ZodNullable,...st(e)});class a2 extends yt{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===Me.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}a2.create=(t,e)=>new a2({innerType:t,typeName:Xe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...st(e)});class l2 extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Nv(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Qo(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Qo(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}l2.create=(t,e)=>new l2({innerType:t,typeName:Xe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...st(e)});class J3 extends yt{_parse(e){if(this._getType(e)!==Me.nan){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.nan,received:i.parsedType}),Ye}return{status:"valid",value:e.data}}}J3.create=t=>new J3({typeName:Xe.ZodNaN,...st(t)});class bJ extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class yC extends yt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Ye:s.status==="dirty"?(n.dirty(),sh(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Ye:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new yC({in:e,out:n,typeName:Xe.ZodPipeline})}}class c2 extends yt{_parse(e){const n=this._def.innerType._parse(e),i=r=>(jd(r)&&(r.value=Object.freeze(r.value)),r);return Nv(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}c2.create=(t,e)=>new c2({innerType:t,typeName:Xe.ZodReadonly,...st(e)});var Xe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Xe||(Xe={}));const Gl=Ld.create,su=s2.create;gl.create;oo.create;const Z3=gn.create;Mv.create;Rv.create;Lc.create;const ou=Dd.create;Tv.create;rl.create;Fd.create;const xJ=["randomize","clean","unchanged"],wJ=["switches-and-leds","printer","null"],SJ=["printer","null"],u2=Z3({showInstructionCycle:su().catch(!1),showStatsCPU:su().catch(!0),language:ou(iD).catch(kJ),editorFontSize:Gl().int().min(8).max(64).catch(14),dataOnLoad:ou(xJ).catch("clean"),devices:Z3({keyboardAndScreen:su(),pic:su(),pio:ou(["switches-and-leds","printer"]).nullable(),handshake:ou(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:su().catch(!0),executionUnit:Gl().min(1).max(500).catch(150),clockSpeed:Gl().min(100).max(1e3).catch(1e3),cpuSpeed:ou(["1","2","4","10"]).catch("1"),printerSpeed:Gl().min(500).max(2e4).catch(5e3),flagsVisibility:ou(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:Gl().min(0).catch(1),filterContrast:Gl().min(0).catch(1),filterInvert:su().catch(!1),filterSaturation:Gl().min(0).catch(1)}),xu=u2.parse({});function kJ(){const t=navigator.language.toLowerCase();for(const e of iD)if(t.startsWith(e))return e;return"en"}const es=sD("vonsim-settings",xu,{getItem(t,e){try{const n=localStorage.getItem(t);return u2.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=u2.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),On=()=>L.get(es),rf=()=>sm(es);ue(t=>t(es).showInstructionCycle);ue(t=>t(es).showStatsCPU);const _J=ue(t=>t(es).language),bC=()=>rt(_J);ue(t=>t(es).flagsVisibility);const CJ=ue(t=>t(es).editorFontSize),EJ=()=>rt(CJ);ue(t=>t(es).dataOnLoad);const AJ=ue(t=>t(es).devices),cD=()=>rt(AJ);ue(t=>{const e=t(es);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});ue(t=>{const e=t(es);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")});function bp(t){const e=t.charCodeAt(0);return z.fitsUnsigned(e,8)?e:null}function xC(t){return z.fitsUnsigned(t,8)?String.fromCharCode(t):null}function uD(t){return NJ.at(t)??null}const NJ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","","","","","","","","","","","","","SHY","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var Ht,Jt;const ft=class ft{constructor(e,n){Ie(this,Ht);Ie(this,Jt);ee(this,Ht,e|0),ee(this,Jt,n)}get size(){return A(this,Jt)}is8bits(){return A(this,Jt)===8}is16bits(){return A(this,Jt)===16}get unsigned(){return A(this,Ht)}get signed(){return A(this,Ht)<=ft.maxSignedValue(A(this,Jt))?A(this,Ht):A(this,Ht)-(ft.maxValue(A(this,Jt))+1)}get low(){return this.is8bits()?this:ft.fromUnsigned(A(this,Ht)&ft.maxValue(8),8)}get high(){return this.is8bits()?new ft(0,8):ft.fromUnsigned(A(this,Ht)>>8&ft.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return ft.fromUnsigned(A(this,Ht)&~ft.maxValue(8)|e.unsigned,A(this,Jt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return ft.fromUnsigned(A(this,Ht)&ft.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Jt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Jt)}`);return(A(this,Ht)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Jt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Jt)}`);return n?ft.fromUnsigned(A(this,Ht)|1<<e,A(this,Jt)):ft.fromUnsigned(A(this,Ht)&~(1<<e),A(this,Jt))}add(e){return e=Number(e),ft.fromUnsigned(A(this,Ht)+e,A(this,Jt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,Ht)===A(e,Ht)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Jt));for(let n=0;n<A(this,Jt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,Ht).toString(16).padStart(A(this,Jt)/4,"0").toUpperCase();case"bin":return A(this,Ht).toString(2).padStart(A(this,Jt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Jt)===8?xC(A(this,Ht))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,Jt)===8?uD(A(this,Ht))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,Ht)}valueOf(){return A(this,Ht)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=ft.minSignedValue(n)&&e<=ft.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=ft.minValue()&&e<=ft.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=ft.minSignedValue(n)&&e<=ft.maxSignedValue(n)}static fromUnsigned(e,n){if(!ft.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new ft(e,n)}static fromSigned(e,n){if(!ft.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new ft(e+ft.maxValue(n)+1,n):new ft(e,n)}static fromNumber(e,n){return e<0?ft.fromSigned(e,n):ft.fromUnsigned(e,n)}static fromChar(e){const n=bp(e)??-1;return ft.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*ft.maxValue(e));return new ft(n,e)}static zero(e){return new ft(0,e)}};Ht=new WeakMap,Jt=new WeakMap;let z=ft;var No;const Ea=class Ea{constructor(e){Ie(this,No);ee(this,No,e)}get value(){return A(this,No).unsigned}get byte(){return A(this,No)}toString(e=!1){let n=A(this,No).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,No).toJSON()}valueOf(){return A(this,No).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ea.MIN_ADDRESS&&e<=Ea.MAX_ADDRESS}static from(e){if(e=Number(e),!Ea.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=z.fromUnsigned(e,16);return new Ea(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};No=new WeakMap,pe(Ea,"MIN_ADDRESS",0),pe(Ea,"MAX_ADDRESS",255);let ke=Ea;var Po;const Aa=class Aa{constructor(e){Ie(this,Po);ee(this,Po,e)}get value(){return A(this,Po).unsigned}get byte(){return A(this,Po)}toString(e=!0){let n=A(this,Po).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,Po).toJSON()}valueOf(){return A(this,Po).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Aa.MIN_ADDRESS&&e<=Aa.MAX_ADDRESS}static from(e){if(e=Number(e),!Aa.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=z.fromUnsigned(e,8);return new Aa(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};Po=new WeakMap,pe(Aa,"MIN_ADDRESS",0),pe(Aa,"MAX_ADDRESS",127);let Sr=Aa;function Q3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function e4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q3(Object(n),!0).forEach(function(i){PJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function PJ(t,e,n){return e=MJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MJ(t){var e=RJ(t,"string");return typeof e=="symbol"?e:String(e)}function RJ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Ov=dD({});function dD(t){return e.withOptions=n=>dD(e4(e4({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let u=0;u<r.length;u++){let d=r[u];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,u<i.length&&(a+=i[u])}const l=a.split(`
`);let c=null;for(const u of l){const d=u.match(/^(\s+)\S+/);if(d){const f=d[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){const u=c;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(u):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const TJ=ke.from(ke.MAX_ADDRESS).toString(),OJ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${Sr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!","new-version-available":"There's a new version available in the repository.","local-update":"A new local version has been detected.",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:Ov`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instruccin",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...","fetching-operands-completed":"Operands fetched",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."},"total-cycles":"Total cycles","instruction-count":"Instruction count",cpi:"Cycles per instruction (CPI)","cpi-help":"Average clock cycles per executed instruction (CPI = total cycles / total instructions)","cpu-time":"CPU time","cpu-time-help":"Total CPU time = total cycles  cycle time (current: {cycleTime} ms)"},memory:{name:"Memory",cell:t=>`Cell ${ke.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${TJ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>Ov`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"6b89bcf"}](https://github.com/ruiz-jose/VonSim8/commit/${"6b89bcf"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},IJ=ke.from(ke.MAX_ADDRESS).toString(),jJ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${Sr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"Hay una nueva versin disponible!","new-version-available":"Hay una nueva versin disponible en el repositorio.","local-update":"Se ha detectado una nueva versin local.",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la FileSystem API","no-file":"No hay ningn archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:Ov`
      ; Bienvenido a VonSim 8!
      ; Este es un ejemplo de cdigo que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instruccin",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadsticas CPU","instruction-cycle":"Ciclo de instruccin",status:{fetching:"Captacin instruccin...","fetching-operands":"Leyendo operandos...","fetching-operands-completed":"Operandos obtenidos",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupcin...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."},"total-cycles":"Total de ciclos","instruction-count":"Recuento de instrucciones",cpi:"Ciclos por instruccin (CPI)","cpi-help":"Promedio de ciclos de reloj por instruccin ejecutada (CPI = ciclos totales / instrucciones totales)","cpu-time":"Tiempo de CPU","cpu-time-help":"Tiempo total de CPU = ciclos totales  tiempo de ciclo (actual: {cycleTime} ms)"},memory:{name:"Memoria",cell:t=>`Celda ${ke.format(t)}`,"fix-address":"Fijar direccin","unfix-address":"Desfijar direccin","address-must-be-integer":"El valor de inicio debe ser un nmero entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${IJ}.`,"address-increment":"Incrementar direccin (Page Up)","address-decrement":"Decrementar direccin (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuracin",instructionCycle:{label:"Ciclo de Instruccin"},statsCPU:{label:"Estadsticas CPU"},flags:{label:"Banderas",description:"Selecciona qu banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamao de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qu hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qu dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"Tambin agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitacin de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulacin",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresin"},filters:{label:"Filtros",description:"Filtros aplicados a la pgina. til cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturacin"},reset:"Restablecer configuracin"},footer:{documentation:"Documentacin",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>Ov`
        <!-- Por favor, describa el problema que est teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Informacin extra (POR FAVOR, NO BORRAR)</summary>

          **Versin**: [${"6b89bcf"}](https://github.com/ruiz-jose/VonSim8/commit/${"6b89bcf"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuracin

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},rb=gC({en:OJ,es:jJ});function Xt(){const t=bC();return b.useCallback((e,...n)=>rb(t,e,...n),[t])}const LJ=[{name:"Documentacin",url:"https://ruiz-jose.github.io/VonSim8/docs/",icon:"icon-[lucide--book-open]"},{name:"GitHub",url:"https://github.com/ruiz-jose/VonSim8",icon:qK}],fD=b.memo(({name:t,url:e,icon:n})=>h.jsx(vr,{content:t,position:"top",children:h.jsx(mt,{variant:"ghost",size:"sm",onClick:()=>window.open(e,"_blank"),className:"hover-lift","aria-label":t,children:typeof n=="string"?h.jsx("span",{className:Q(n,"size-4")}):h.jsx($e,{icon:n,className:"size-4"})})}));fD.displayName="SocialLink";const hD=b.memo(()=>{const t=Xt(),[e]=rf(),n=b.useMemo(()=>{var s;const i=((s=window.codemirror)==null?void 0:s.state.doc.toString())||"",r=t("footer.issue.body",e,i);return`https://github.com/ruiz-jose/VonSim8/issues/new?body=${encodeURIComponent(r)}`},[t,e]);return h.jsx("footer",{className:"bg-black px-3 py-1.5 text-xs text-white","data-testid":"footer",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-stone-400",children:[" Copyright 2017-2025  III-LIDI, FI, UNLP, UNER  v","6b89bcf"]}),h.jsxs("div",{className:"flex items-center gap-1","data-testid":"footer-links",children:[LJ.map(i=>h.jsx(fD,{name:i.name,url:i.url,icon:i.icon},i.name)),h.jsx(vr,{content:t("footer.issue.report"),position:"top",children:h.jsx(mt,{variant:"ghost",size:"sm",onClick:()=>window.open(n,"_blank"),className:"hover-lift","aria-label":t("footer.issue.report"),children:h.jsx("span",{className:"icon-[lucide--bug] size-4"})})})]})]})})});hD.displayName="Footer";const DJ="modulepreload",$J=function(t){return"/VonSim8/"+t},t4={},pD=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=$J(l),l in t4)return;t4[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":DJ,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function xp(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class un{constructor(e,n){pe(this,"start");pe(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new un(i,r)}toJSON(){return this.range}}const n4=ke.from(ke.MAX_ADDRESS).toString(),FJ=Sr.from(Sr.MAX_ADDRESS).toString(),BJ={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${ke.format(t)} is out of range (max memory address: ${n4}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":`The program is empty or does not contain executable instructions.

Remember: a valid program must have at least one instruction and end with the END directive.

For example:

    org 1000h
    mov al, 3
    hlt
    end

See the documentation or examples for more help.`,"end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","instruction-out-of-range":t=>`This instruction would be placed in address ${ke.format(t)}, which is outside the memory range (max memory address: ${n4}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${FJ}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea."}},i4=ke.from(ke.MAX_ADDRESS).toString(),zJ=Sr.from(Sr.MAX_ADDRESS).toString(),UJ={"address-has-code":t=>`La direccin de memoria ${ke.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${ke.format(t)} est fuera de rango (direccin mxima de memoria: ${i4}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":`El programa est vaco o no contiene instrucciones ejecutables.

Recuerda que un programa vlido debe tener al menos una instruccin y finalizar con la directiva END.

Por ejemplo:

    org 1000h
    mov al, 3
    hlt
    end

Consulta la documentacin o los ejemplos para ms ayuda.`,"end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${ke.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${i4}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${zJ}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${ke.format(t)}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instruccin sera colocada en la direccin ${ke.format(t)}, la cual ya est reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carcter solo puede contener un carcter.","empty-character":"Los carcter no puede estar vaco.","invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-character":"Carcter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea."}},VJ=gC({en:BJ,es:UJ});class se extends Error{constructor(n,...i){super();pe(this,"code");pe(this,"context");pe(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof un?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return VJ(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof se?n:new se("unexpected-error",n)}}const wC=[[0,z.fromUnsigned(160,8)],[3,z.fromUnsigned(176,8)],[6,z.fromUnsigned(192,8)],[7,z.fromUnsigned(208,8)]],r4=new Set(...wC.map(([t])=>[t]));var Ta,hd;class HJ{constructor(){pe(this,"codeMemory",new Set);pe(this,"labels",new Map);pe(this,"hasORG",!1);Ie(this,Ta,!1);Ie(this,hd,!1)}loadStatements(e){if(A(this,Ta))throw new Error("Tried to load statements twice");ee(this,Ta,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new se("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:ke.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:ke.from(0)})}return n}computeAddresses(e){if(A(this,hd))throw new Error("Tried to compute addresses twice");ee(this,hd,!0),this.codeMemory.clear();const n=new Set,i=e.some(u=>u.isInstruction()&&u.instruction==="INT");if(this.hasORG=e.some(u=>u.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new se("missing-org").at(e[0].position);let r=i&&!this.hasORG?8:this.hasORG?32:0,s=null,o=r;const a=[],l=[],c=[];for(const u of e)u.isInstruction()?a.push(u):u.isOriginChange()?l.push(u):u.isDataDirective()&&c.push(u);if(this.hasORG){const u=[],d=[];return xp(e,f=>{if(f.isEnd()||f.isDataDirective()&&f.directive==="EQU")return;if(f.isOriginChange()){r=f.newAddress;return}const p=r;if(p===null)throw new se("missing-org").at(f);const g=f.length,m=p,v=p+g-1;for(const x of d)if(Math.max(m,x.start)<=Math.min(v,x.end)){u.push(new se("occupied-address",ke.from(m)).at(f));return}d.push({start:m,end:v,statement:f});for(let x=0;x<g;x++){if(!ke.inRange(p+x))throw new se("instruction-out-of-range",p+x).at(f);const w=ke.from(p+x);if(n.has(w.value))throw new se("occupied-address",w).at(f);if(i&&r4.has(w.value))throw new se("reserved-address",w).at(f);n.add(w.value),f.isInstruction()&&this.codeMemory.add(w.value)}const y=ke.from(p);f.setStart(y),f.label&&this.labels.set(f.label,{type:f.isInstruction()?"instruction":f.directive,address:y}),(f.isDataDirective()||f.isInstruction())&&(r+=g,o=Math.max(o,r))},se.from),u}else return xp([...a,...l,...c],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const m=d.newAddress;m<32?s=m:r=m;return}let f;if(d.isDataDirective())s===null&&(s=o),f=s;else if(d.isInstruction())f=r;else throw new se("missing-org").at(d);const p=d.length;for(let m=0;m<p;m++){if(!ke.inRange(f+m))throw new se("instruction-out-of-range",f+m).at(d);const v=ke.from(f+m);if(n.has(v.value))throw new se("occupied-address",v).at(d);if(i&&r4.has(v.value))throw new se("reserved-address",v).at(d);n.add(v.value),d.isInstruction()&&this.codeMemory.add(v.value)}const g=ke.from(f);if(d.setStart(g),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:g}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=p}else d.isInstruction()&&(r+=p,o=Math.max(o,r))},se.from)}labelExists(e){if(!A(this,Ta))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,Ta))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,Ta))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,hd))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof ke&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}Ta=new WeakMap,hd=new WeakMap;const WJ=["AL","BL","CL","DL","AH","BH","CH","DH"],mD=["AX","BX","CX","DX","SP"],Iv=[...WJ,...mD],SC=["DB","DW","EQU"],kC=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],GJ=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...Iv,...kC,...SC];class KJ{constructor(e,n,i){pe(this,"type");pe(this,"lexeme");pe(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class qJ{constructor(e){pe(this,"scanned",!1);pe(this,"tokens",[]);pe(this,"position",new un(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new un(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-character").at(this.position);if(bp(this.peek())===null)throw new se("lexer.only-ascii").at(new un(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new se("lexer.empty-character").at(this.position);if(n>=2)throw new se("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-string").at(this.position);if(bp(this.peek())===null)throw new se("lexer.only-ascii").at(new un(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()===".")throw new se("lexer.unexpected-character",".").at(new un(this.position.end,this.position.end+1));if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new se("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new se("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){if(e==="."&&this.isDigit(this.peek()))throw new se("lexer.unexpected-character",".").at(new un(this.position.start,this.position.start+1));for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();GJ.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new se("lexer.unexpected-character",e).at(this.position)}return this.position=new un(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new KJ(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new un(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Vn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}pe(Vn,"numberLiteral",(...e)=>new YJ(...e)),pe(Vn,"label",(...e)=>new XJ(...e)),pe(Vn,"unaryOperation",(...e)=>new JJ(...e)),pe(Vn,"binaryOperation",(...e)=>new ZJ(...e));class YJ extends Vn{constructor(n,i){super(i);pe(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let XJ=class extends Vn{constructor(n,i,r){super(r);pe(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new se("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new se("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new se("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class JJ extends Vn{constructor(n,i,r){super(r);pe(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class ZJ extends Vn{constructor(n,i,r,s){super(s);pe(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class sb{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var Mo;class gD extends sb{constructor(n,i,r){super(r);pe(this,"type","data-directive");pe(this,"label");pe(this,"values");Ie(this,Mo,null);this.values=n,this.label=i}get start(){if(A(this,Mo)===null)throw new Error("Start not set");return A(this,Mo)}setStart(n){if(A(this,Mo)!==null)throw new Error("Start already set");ee(this,Mo,n)}toJSON(){return{...super.toJSON(),...A(this,Mo)?{start:A(this,Mo).toJSON()}:{},directive:this.directive,label:this.label}}}Mo=new WeakMap;var vc,Oa,pd;class QJ extends gD{constructor(n,i,r){super(n,i,r);pe(this,"directive","EQU");Ie(this,vc,"not-processed");Ie(this,Oa,null);Ie(this,pd,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,pd)??((n=A(this,Oa))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,Oa))throw new Error("Constant already validated");if(!this.label)throw new se("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new se("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new se("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new se("cannot-be-unassinged","EQU").at(n);ee(this,Oa,n.value)}evaluateExpressions(n){if(!A(this,Oa))throw new Error("Constant not validated");if(A(this,vc)==="processed")return A(this,pd);if(A(this,vc)==="processing")throw new se("circular-reference").at(this.position);ee(this,vc,"processed");const i=A(this,Oa).evaluate(n);return ee(this,vc,"processed"),ee(this,pd,i),i}evaluate(n){return this.evaluateExpressions(n)}}vc=new WeakMap,Oa=new WeakMap,pd=new WeakMap;const oh=Symbol("unassigned");var Ii,os;class eZ extends gD{constructor(n,i,r,s){super(i,r,s);pe(this,"size");Ie(this,Ii,null);Ie(this,os,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,Ii))throw new Error("Data directive not validated");return A(this,Ii).length*(this.size/8)}getValues(){if(!A(this,os))throw new Error("Data directive not evaluated");return A(this,os)}toJSON(){return{...super.toJSON(),values:(A(this,os)??A(this,Ii)??this.values).map(n=>n===oh?"?":n.toJSON())}}validate(){if(A(this,Ii))throw new Error("Data directive already validated");ee(this,Ii,[]);for(const n of this.values)if(n.isUnassigned())A(this,Ii).push(oh);else if(n.isString()){if(this.directive!=="DB")throw new se("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=bp(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new un(n.position.start+r,n.position.start+r+1),a=Vn.numberLiteral(s,o);A(this,Ii).push(a)}}else A(this,Ii).push(n.value);if(A(this,Ii).length===0)throw new se("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,Ii))throw new Error("Data directive not validated");if(A(this,os))throw new Error("Data directive already evaluated");ee(this,os,[]);const i=xp(A(this,Ii),r=>{if(r===oh)A(this,os).push(oh);else{const s=r.evaluate(n);if(!z.fits(s,this.size))throw new se("value-out-of-range",s,this.size).at(this);const o=z.fromNumber(s,this.size);A(this,os).push(o)}},se.from);return i.length>0&&ee(this,os,null),i}}Ii=new WeakMap,os=new WeakMap;class _C{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class tZ extends _C{constructor(n,i){super(i);pe(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class nZ extends _C{constructor(n){super(n);pe(this,"type","unassigned")}}class iZ extends _C{constructor(n){super(n.position);pe(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function rZ(t,e,n){const i=un.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new eZ(t.type,e,n,i);case"EQU":return new QJ(e,n,i)}}class ew extends sb{constructor(n){super(n);pe(this,"type","end")}}function rc(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var Ro;class Jc extends sb{constructor(n,i,r){super(r);pe(this,"type","instruction");pe(this,"label");pe(this,"operands");Ie(this,Ro,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,Ro)===null)throw new Error("Start not set");return A(this,Ro)}setStart(n){if(A(this,Ro)!==null)throw new Error("Start already set");ee(this,Ro,n)}toJSON(){return{...super.toJSON(),...A(this,Ro)?{start:A(this,Ro).toJSON()}:{},instruction:this.instruction,label:this.label}}}Ro=new WeakMap;var si,Pr;class sZ extends Jc{constructor(n,i,r,s){super(i,r,s);Ie(this,si,null);Ie(this,Pr,null);this.instruction=n}get length(){if(!A(this,si))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,si);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,Pr))throw new Error("Instruction not evaluated");return A(this,Pr)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(rc(r)&3)<<2,o[0]|=(rc(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(rc(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(rc(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(rc(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,Pr)??A(this,si)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,si))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new se("size-mismatch",r.size,i.size).at(this);ee(this,si,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);ee(this,si,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);ee(this,si,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new se("size-mismatch",s.size,i.size).at(this);ee(this,si,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}ee(this,si,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new se("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new se("size-mismatch",s,r.size).at(this);ee(this,si,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new se("double-memory-access").at(this);s==="auto"&&(s=8),ee(this,si,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new se("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,si))throw new Error("Instruction not validated");if(A(this,Pr))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,si),a=l=>{const c=l.evaluate(n);if(!ke.inRange(c))throw new se("address-out-of-range",c).at(l);const u=ke.from(c);if(n.addressIsReserved(u))throw new se("address-has-code",u).at(l);return u};switch(i){case"reg<-reg":{ee(this,Pr,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{ee(this,Pr,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!z.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const c=z.fromNumber(l,r);ee(this,Pr,{mode:i,size:r,out:s,src:c});return}case"mem<-reg":{ee(this,Pr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!z.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const c=z.fromNumber(l,r);ee(this,Pr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return i}}}si=new WeakMap,Pr=new WeakMap;var $s,To;class oZ extends Jc{constructor(n,i,r,s){super(i,r,s);Ie(this,$s,null);Ie(this,To,null);pe(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,To))throw new Error("Instruction not evaluated");return A(this,To)}toJSON(){return{...super.toJSON(),...A(this,To)?{value:A(this,To).toJSON()}:A(this,$s)?{initialValue:A(this,$s).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,$s))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new se("expects-immediate").at(n);ee(this,$s,n.value)}evaluateExpressions(n){if(!A(this,$s))throw new Error("Instruction not validated");if(A(this,To))throw new Error("Instruction aready evaluated");const i=A(this,$s).evaluate(n);if(!z.fitsUnsigned(i,8))throw new se("invalid-interrupt",i).at(A(this,$s));ee(this,To,z.fromUnsigned(i,8))}}$s=new WeakMap,To=new WeakMap;var as,Oo,$T;let aZ=($T=class extends Jc{constructor(n,i,r,s){super(i,r,s);Ie(this,as,null);Ie(this,Oo,null);this.instruction=n}get length(){if(!A(this,as))throw new Error("Instruction not validated");return A(this,as).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,Oo)===null)throw new Error("Operation not set");return A(this,Oo)}toJSON(){return{...super.toJSON(),...A(this,Oo)??A(this,as)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,as))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new se("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new se("expects-dx").at(i);ee(this,as,{port:"variable",size:r});return}if(i.isNumberExpression()){ee(this,as,{port:"fixed",size:r,address:i.value});return}throw new se("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,as))throw new Error("Instruction not validated");if(A(this,Oo))throw new Error("Instruction aready evaluated");const i=A(this,as);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!Sr.inRange(r))throw new se("io-address-out-of-range",r).at(this);const s=Sr.from(r);ee(this,Oo,{port:"fixed",size:i.size,address:s})}else ee(this,Oo,{port:"variable",size:i.size})}},as=new WeakMap,Oo=new WeakMap,$T);var Io,Fs,FT;let lZ=(FT=class extends Jc{constructor(n,i,r,s){super(i,r,s);Ie(this,Io,null);Ie(this,Fs,null);pe(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Fs)===null)throw new Error("Instruction not evaluated");return A(this,Fs)}toJSON(){return{...super.toJSON(),...A(this,Fs)?{address:A(this,Fs).toJSON()}:A(this,Io)?{jumpTo:A(this,Io)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Io))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new se("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new se("label-not-found",r).at(i);if(s!=="instruction")throw new se("label-should-be-an-instruction",r).at(i);ee(this,Io,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!ke.inRange(r))throw new se("address-out-of-range",r).at(i);ee(this,Fs,ke.from(r))}}evaluateExpressions(n){if(!A(this,Fs)&&A(this,Io)){const i=n.getLabelValue(A(this,Io));if(!ke.inRange(i))throw new se("address-out-of-range",i).at(this);ee(this,Fs,ke.from(i))}}},Io=new WeakMap,Fs=new WeakMap,FT);var Bs,BT;let cZ=(BT=class extends Jc{constructor(n,i,r,s){super(i,r,s);Ie(this,Bs,null);pe(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=rc(this.register),new Uint8Array([i])}get register(){if(!A(this,Bs))throw new Error("Instruction not evaluated");return A(this,Bs)}toJSON(){return{...super.toJSON(),...A(this,Bs)?{register:A(this,Bs)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Bs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new se("expects-word-register").at(n);ee(this,Bs,n.value)}evaluateExpressions(){if(!A(this,Bs))throw new Error("Instruction not validated")}},Bs=new WeakMap,BT);var tr,zs;class uZ extends Jc{constructor(n,i,r,s){super(i,r,s);Ie(this,tr,null);Ie(this,zs,null);this.instruction=n}get length(){if(!A(this,tr))throw new Error("Instruction not validated");const{mode:n}=A(this,tr);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=rc(this.operation.reg);break}case"mem-direct":{const r=this.operation.address.byte;n.push(r.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,zs))throw new Error("Instruction not evaluated");return A(this,zs)}toJSON(){return{...super.toJSON(),...A(this,zs)??A(this,tr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,tr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){ee(this,tr,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);ee(this,tr,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);ee(this,tr,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){ee(this,tr,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new se("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,tr))throw new Error("Instruction not validated");if(A(this,zs))throw new Error("Instruction aready evaluated");const i=A(this,tr);switch(i.mode){case"reg":{ee(this,zs,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!ke.inRange(r))throw new se("address-out-of-range",r).at(i.address);const s=ke.from(r);if(n.addressIsReserved(s))throw new se("address-has-code",s).at(i.address);ee(this,zs,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{ee(this,zs,{mode:"mem-indirect",size:i.size});return}default:return i}}}tr=new WeakMap,zs=new WeakMap;var md;class dZ extends Jc{constructor(n,i,r,s){super(i,r,s);Ie(this,md,!1);pe(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,md))throw new Error("Instruction already validated");if(this.operands.length>0)throw new se("expects-no-operands").at(this);ee(this,md,!0)}evaluateExpressions(){if(!A(this,md))throw new Error("Instruction not validated")}}md=new WeakMap;class ob{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class fZ extends ob{constructor(n){super(n.position);pe(this,"type","register");pe(this,"value");this.value=n.type}get size(){return mD.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class hZ extends ob{constructor(n,i){super(i);pe(this,"type","indirect-address");pe(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class pZ extends ob{constructor(n,i,r){super(r);pe(this,"type","direct-address");pe(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class jv extends ob{constructor(n){super(n.position);pe(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return jv.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new se("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:Vn.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=jv.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:Vn.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function s4(t,e,n){const i=un.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new dZ(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new sZ(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new uZ(t.type,e,n,i);case"PUSH":case"POP":return new cZ(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new lZ(t.type,e,n,i);case"IN":case"OUT":return new aZ(t.type,e,n,i);case"INT":return new oZ(t.type,e,n,i)}}class mZ extends sb{constructor(n,i){super(i);pe(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let gZ=class{constructor(e){pe(this,"tokens");pe(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new se("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new se("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new mZ(i,un.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new se("end-must-be-the-last-statement").at(e);return new ew(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new ew(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new ew(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...SC);if(e&&!n)throw new se("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),rZ(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new tZ(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new nZ(e.position)}return new iZ(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...kC);if(e&&!n){const s=this.peek();throw new se("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return s4(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),s4(n,r,i)}instructionOperand(){if(this.match(...Iv)){const n=this.previous();return new fZ(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new se("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Iv)){if(!this.check("BX","BL"))throw new se("parser.indirect-addressing-must-be-bx");const i=this.advance(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-literal","]",i.lexeme));return new hZ(e==null?void 0:e.type,un.merge(e==null?void 0:e.position,n.position,r.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-expression","]"));return new pZ(i,e==null?void 0:e.type,un.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new se("parser.expected-literal-after-literal","[","PTR");return new jv(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new se("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new se("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Vn.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=bp(i.lexeme.slice(1,-1));return Vn.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new se("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new se("parser.expected-label-after-offset").at(this.peek());if(!n)throw new se("parser.expected-argument").at(this.peek());return Vn.label(n.lexeme.toUpperCase(),e!==null,un.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new se("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Vn.unaryOperation(e.type==="PLUS"?"+":"-",n,un.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Vn.binaryOperation(e,"*",n,un.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Vn.binaryOperation(e,n.type==="PLUS"?"+":"-",i,un.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function vD(t){try{const n=new qJ(t).scanTokens(),r=new gZ(n).parse();if(!r.at(-1))throw new se("empty-program");let o=[];const a=new HJ;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=xp(r,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},se.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=xp(r,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},se.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[se.from(e)]}}}class Es{constructor(e){pe(this,"computer");this.computer=e.computer}}const vZ=t=>ke.format(t).slice(-2),yZ=vZ(ke.MAX_ADDRESS),bZ={"address-has-instruction":t=>`Memory address ${ke.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${ke.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${ke.format(t)} is out of range (max memory address: ${yZ}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${Sr.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${ke.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},xZ=ke.from(ke.MAX_ADDRESS).toString(),wZ={"address-has-instruction":t=>`La direccin de memoria ${ke.format(t)} tiene una instruccin, y no se puede escribir.`,"address-is-reserved":t=>`La direccin de memoria ${ke.format(t)} est reservada, y no se puede escribir.`,"address-out-of-range":t=>`La direccin de memoria ${ke.format(t)} est fuera de rango (direccin mxima de memoria: ${xZ}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontr ningn mdulo conectado a la direccin de memoria E/S ${Sr.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${ke.format(t)} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},SZ=gC({en:bZ,es:wZ});class en extends Error{constructor(n,...i){super();pe(this,"code");pe(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return SZ(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof en?n:new en("unexpected-error",n)}}class oa{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new en("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var xy,yD;class kZ extends oa{constructor(){super(...arguments);Ie(this,xy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Pt(this,xy,yD).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct",ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"?r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"):(typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!0),typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!1));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("id.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}i==="mem<-imd"&&(yield*n.cpu.copyByteRegister("id.l","left.l")),yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=z.fromSigned(d,r),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>z.maxValue(r)?(u.CF=!0,c=z.fromUnsigned(f-z.maxValue(r)-1,r)):(u.CF=!1,c=z.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=z.fromUnsigned(f+z.maxValue(r)+1,r)):(u.CF=!1,c=z.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}xy=new WeakSet,yD=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var wy,bD;class _Z extends oa{constructor(){super(...arguments);Ie(this,wy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Pt(this,wy,bD).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=z.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=z.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===z.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",z.fromSigned(1,16));const o=i.unsigned+1;o>z.maxValue(this.operation.size)?(s.CF=!0,r=z.fromUnsigned(o-z.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=z.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",z.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=z.fromUnsigned(o+z.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=z.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}wy=new WeakSet,bD=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class CZ extends oa{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Sy,xD;class EZ extends oa{constructor(){super(...arguments);Ie(this,Sy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Pt(this,Sy,xD).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new en("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new en("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new en("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Sy=new WeakSet,xD=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class AZ extends oa{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l",!0),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.getMBR("ri.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class NZ extends oa{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"halting"},yield{type:"cpu:halt"},!1;return!0}}function d2(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function tw(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var ky,wD;class PZ extends oa{constructor(){super(...arguments);Ie(this,ky)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Pt(this,ky,wD).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":{if(r===8)yield{type:"cpu:register.buscopy",src:o,dest:s,size:8};else{const[a,l]=tw(o),[c,u]=tw(s);yield{type:"cpu:register.buscopy",src:a,dest:c,size:8},l&&u&&(yield{type:"cpu:register.buscopy",src:l,dest:u,size:8})}return!0}case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=tw(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}ky=new WeakSet,wD=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class MZ extends oa{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class RZ extends oa{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function TZ(t){switch(t.instruction){case"MOV":return new PZ(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new kZ(t);case"NOT":case"NEG":case"INC":case"DEC":return new _Z(t);case"IN":case"OUT":return new EZ(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new RZ(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new AZ(t);case"RET":case"IRET":return new MZ(t);case"INT":return new CZ(t);case"CLI":case"STI":case"NOP":case"HLT":return new NZ(t)}}function OZ(t){for(const[e,n]of wC)if(n.unsigned===t.unsigned)return e;return null}function*IZ(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new en("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new en("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new en("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",z.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new en("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",z.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",z.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===z.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var gd,Qe,Mr,ji,mn,wu,Ar,zT;let jZ=(zT=class extends Es{constructor(n){super(n);Ie(this,mn);Ie(this,gd);Ie(this,Qe);Ie(this,Mr);Ie(this,ji);n.data==="unchanged"?(ee(this,Qe,A(n.previous.cpu,Qe)),ee(this,Mr,A(n.previous.cpu,Mr)),ee(this,ji,A(n.previous.cpu,ji))):(ee(this,Qe,{AX:z.zero(16),BX:z.zero(16),CX:z.zero(16),DX:z.zero(16),SP:z.zero(16),IP:z.zero(16),IR:z.zero(8),ri:z.zero(16),id:z.zero(16),left:z.zero(16),right:z.zero(16),result:z.zero(16),FLAGS:z.zero(16)}),ee(this,Mr,z.zero(16)),ee(this,ji,z.zero(8))),A(this,Qe).SP=z.fromUnsigned(ke.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1;let s;r?s=32:i?s=8:s=0,A(this,Qe).IP=z.fromUnsigned(s,16),A(this,Qe).ri=z.fromUnsigned(0,16),A(this,Qe).id=z.fromUnsigned(0,16),Pt(this,mn,Ar).call(this,"IF",!0),ee(this,gd,new Map);for(const o of n.program.instructions){const a=TZ(o);A(this,gd).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,Qe).IP,r=OZ(i);if(r!==null){if(!(yield*IZ(this.computer,r)))return}else{const s=A(this,gd).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new en("no-instruction",A(this,Qe).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",z.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const i=z.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",i),yield*this.copyWordRegister("ri","IP"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,Qe)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,Mr).toJSON(),MBR:A(this,ji).toJSON()}}getRegister(n){const[i,r]=d2(n);return r==="low"?A(this,Qe)[i].low:r==="high"?A(this,Qe)[i].high:A(this,Qe)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Pt(this,mn,wu).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Pt(this,mn,wu).call(this,i,r.withHigh(z.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Pt(this,mn,wu).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Pt(this,mn,wu).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,Qe).FLAGS.bit(1);case"ZF":return A(this,Qe).FLAGS.bit(0);case"SF":return A(this,Qe).FLAGS.bit(3);case"IF":return A(this,Qe).FLAGS.bit(4);case"OF":return A(this,Qe).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Pt(this,mn,Ar).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Pt(this,mn,Ar).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Pt(this,mn,Ar).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Pt(this,mn,Ar).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Pt(this,mn,Ar).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,Qe).FLAGS}}*aluExecute(n,i,r){A(this,Qe).result=i.is8bits()?A(this,Qe).result.withLow(i):i,typeof r.CF=="boolean"&&Pt(this,mn,Ar).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Pt(this,mn,Ar).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Pt(this,mn,Ar).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Pt(this,mn,Ar).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Pt(this,mn,Ar).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,Qe).result,flags:A(this,Qe).FLAGS}}*setMAR(n){const i=this.getRegister(n);ee(this,Mr,i.withHigh(z.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Pt(this,mn,wu).call(this,n,A(this,ji)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);ee(this,ji,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,Mr));return i?(ee(this,ji,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,Mr),A(this,ji)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,Mr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(ee(this,ji,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,Mr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,ji))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return ee(this,ji,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return ke.inRange(i.unsigned-1)?(i=i.add(-1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?ke.inRange(i.unsigned-1)?!0:(yield{type:"cpu:error",error:new en("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new en("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return ke.inRange(i)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),i=i.add(1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new en("stack-underflow")},!1)}},gd=new WeakMap,Qe=new WeakMap,Mr=new WeakMap,ji=new WeakMap,mn=new WeakSet,wu=function(n,i){const[r,s]=d2(n);if(s===null){if(A(this,Qe)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,Qe)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,Qe)[r]=A(this,Qe)[r].withLow(i):A(this,Qe)[r]=A(this,Qe)[r].withHigh(i)}},Ar=function(n,i){switch(n){case"CF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(1,i);return;case"ZF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(0,i);return;case"SF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(3,i);return;case"IF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(4,i);return;case"OF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},zT);var Ga,nr,jo,Ia;let SD=(Ga=class extends Es{constructor(n){super(n);Ie(this,nr);Ie(this,jo);Ie(this,Ia,!1);n.data==="unchanged"&&n.previous.io.printer?(ee(this,nr,A(n.previous.io.printer,nr)),ee(this,jo,A(n.previous.io.printer,jo)),ee(this,Ia,A(n.previous.io.printer,Ia))):(ee(this,nr,[]),ee(this,jo,""),ee(this,Ia,!1))}get busy(){return A(this,nr).length>=Ga.BUFFER_SIZE}*setStrobe(n){const i=A(this,Ia);if(i===n)return;if(ee(this,Ia,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,nr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){ee(this,jo,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,nr).length===0)return;const[n,...i]=A(this,nr);if(ee(this,nr,i),yield{type:"printer:buffer.pop",char:n},i.length===Ga.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=xC(n.unsigned);ee(this,jo,A(this,jo)+r),yield{type:"printer:paper.print",char:r}}}get hasPending(){return A(this,nr).length>0}toJSON(){return{paper:A(this,jo),buffer:[...A(this,nr).map(n=>n.unsigned)]}}},nr=new WeakMap,jo=new WeakMap,Ia=new WeakMap,pe(Ga,"BUFFER_SIZE",5),Ga);class ab extends Es{}let kD=class extends ab{constructor(n){super(n);pe(this,"PA");pe(this,"PB");pe(this,"CA");pe(this,"CB");pe(this,"leds",null);pe(this,"printer",null);pe(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=z.random(8),this.PB=z.random(8),this.CA=z.random(8),this.CB=z.random(8)):(this.PA=z.zero(8),this.PB=z.zero(8),this.CA=z.zero(8),this.CB=z.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class o4 extends kD{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends SD{*readData(){const i=n.readData();return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return z.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=z.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var Lo,UT;let LZ=(UT=class extends Es{constructor(n){super(n);Ie(this,Lo);n.data==="unchanged"&&n.previous.io.leds?ee(this,Lo,A(n.previous.io.leds,Lo)):n.data==="randomize"?ee(this,Lo,z.random(8)):ee(this,Lo,z.zero(8))}get state(){return A(this,Lo)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,Lo).toJSON()}},Lo=new WeakMap,UT);var Rr,VT;let DZ=(VT=class extends Es{constructor(n){super(n);Ie(this,Rr);n.data==="unchanged"&&n.previous.io.switches?ee(this,Rr,A(n.previous.io.switches,Rr)):n.data==="randomize"?ee(this,Rr,z.random(8)):ee(this,Rr,z.zero(8))}get state(){return A(this,Rr)}*toggle(n){ee(this,Rr,A(this,Rr).withBit(n,!A(this,Rr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,Rr).toJSON()}},Rr=new WeakMap,VT);class $Z extends kD{constructor(e){super(e);const n=this;this.leds=new class extends LZ{}(e),this.switches=new class extends DZ{*toggle(i){yield*super.toggle(i),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=z.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.leds.update(z.fromUnsigned(n,8))}}}let FZ=class extends Es{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},BZ=class extends Es{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var vd,HT;let zZ=(HT=class extends Es{constructor(){super(...arguments);Ie(this,vd,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,vd);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},ee(this,vd,null),n}setLastCharRead(n){ee(this,vd,n)}toJSON(){return null}},vd=new WeakMap,HT);var ir,WT;let UZ=(WT=class extends Es{constructor(n){super(n);Ie(this,ir);n.data==="unchanged"&&n.previous.io.screen?ee(this,ir,A(n.previous.io.screen,ir)):ee(this,ir,"")}clear(){return this.sendChar(z.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:ee(this,ir,A(this,ir).slice(0,-1));break;case 10:ee(this,ir,A(this,ir)+`
`);break;case 12:ee(this,ir,"");break;default:ee(this,ir,A(this,ir)+xC(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,ir)}}toJSON(){return A(this,ir)}},ir=new WeakMap,WT);var Do,gi,GT;let VZ=(GT=class extends ab{constructor(n){super(n);Ie(this,Do);Ie(this,gi);pe(this,"printer");n.data==="randomize"?ee(this,Do,z.random(8)):ee(this,Do,z.zero(8)),ee(this,gi,z.zero(8));const i=this;this.printer=new class extends SD{*readData(){const r=A(i,Do);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,gi).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,Do);else if(n==="STATE")i=A(this,gi);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")ee(this,Do,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),ee(this,gi,i),yield{type:"handshake:register.update",register:n,value:i},A(this,gi).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),ee(this,gi,A(this,gi).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,gi)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){ee(this,gi,A(this,gi).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,gi)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Do).toJSON(),STATE:A(this,gi).toJSON()}}},Do=new WeakMap,gi=new WeakMap,GT);var hs,$o,Li,vi,ls,co,x0,w0;let HZ=(hs=class extends ab{constructor(n){super(n);Ie(this,co);Ie(this,$o);Ie(this,Li);Ie(this,vi);Ie(this,ls);ee(this,$o,z.fromUnsigned(255,8)),ee(this,Li,z.fromUnsigned(0,8)),ee(this,vi,z.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?ee(this,ls,A(n.previous.io.pic,ls)):n.data==="randomize"?ee(this,ls,new Array(hs.LINES).fill(z.zero(8)).map(()=>z.random(8))):ee(this,ls,new Array(hs.LINES).fill(z.zero(8)))}chipSelect(n){const r=4+hs.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=z.zero(8);else if(n==="IMR")i=A(this,$o);else if(n==="IRR")i=A(this,Li);else if(n==="ISR")i=A(this,vi);else{const r=Number(n.slice(3));i=A(this,ls)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,vi).isZero()||(yield{type:"pic:intr.off"},ee(this,vi,z.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,vi)},yield*Pt(this,co,w0).call(this));else if(n==="IMR")ee(this,$o,i),yield{type:"pic:register.update",register:"IMR",value:A(this,$o)},yield*Pt(this,co,w0).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,ls)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=hs.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Li).bit(n)||(ee(this,Li,A(this,Li).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Li)},yield*Pt(this,co,w0).call(this))}isINTRActive(){return A(this,vi).isZero()&&Pt(this,co,x0).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,vi).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Pt(this,co,x0).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");ee(this,vi,A(this,vi).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,vi)},ee(this,Li,A(this,Li).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Li)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,ls)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,$o).toJSON(),IRR:A(this,Li).toJSON(),ISR:A(this,vi).toJSON(),lines:A(this,ls).map(n=>n.toJSON())}}},$o=new WeakMap,Li=new WeakMap,vi=new WeakMap,ls=new WeakMap,co=new WeakSet,x0=function(){for(let n=0;n<hs.LINES;n++)if(A(this,Li).bit(n)&&!A(this,$o).bit(n))return n;return null},w0=function*(){A(this,vi).isZero()&&Pt(this,co,x0).call(this)!==null&&(yield{type:"pic:intr.on"})},pe(hs,"LINES",8),hs);var Us,ja,KT;let WZ=(KT=class extends ab{constructor(n){super(n);Ie(this,Us);Ie(this,ja);ee(this,Us,z.zero(8)),ee(this,ja,z.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Us);else if(n==="COMP")i=A(this,ja);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")ee(this,Us,i);else if(n==="COMP")ee(this,ja,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Us).unsigned===z.maxValue(8)?z.zero(8):A(this,Us).add(1);ee(this,Us,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,ja).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Us).toJSON(),COMP:A(this,ja).toJSON()}}},Us=new WeakMap,ja=new WeakMap,KT);class GZ extends Es{constructor(n){super(n);pe(this,"clock",null);pe(this,"f10",null);pe(this,"keyboard",null);pe(this,"screen",null);pe(this,"handshake",null);pe(this,"pic",null);pe(this,"pio",null);pe(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new zZ(n),this.screen=new UZ(n)),n.devices.pic&&(this.clock=new FZ(n),this.f10=new BZ(n),this.timer=new WZ(n),this.pic=new HZ(n)),this.pio=n.devices.pio==="switches-and-leds"?new $Z(n):n.devices.pio==="printer"?new o4(n):null,n.devices.handshake){if(this.pio instanceof o4)throw new en("io-printer-conflict");this.handshake=new VZ(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,c,u;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(c=this.pio)==null?void 0:c.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(u=this.timer)==null?void 0:u.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new en("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new en("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new en("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,c,u,d,f;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((c=this.handshake)==null?void 0:c.toJSON())??null,pic:((u=this.pic)==null?void 0:u.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((f=this.timer)==null?void 0:f.toJSON())??null}}}var Ka,yi,yd,bd;let KZ=(Ka=class extends Es{constructor(n){super(n);Ie(this,yi);Ie(this,yd);Ie(this,bd);n.data==="unchanged"?ee(this,yi,A(n.previous.memory,yi)):n.data==="randomize"?ee(this,yi,new Uint8Array(Ka.SIZE).map(()=>z.random(8).unsigned)):ee(this,yi,new Uint8Array(Ka.SIZE).fill(0)),A(this,yi)[255]=1;const i=n.program.instructions.some(r=>r.instruction==="INT");if(ee(this,bd,new Set),i)for(const[r,s]of wC){const o=r;if(A(this,yi)[o]=s.unsigned,A(this,bd).add(o),r===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let c=0;c<a.length;c++)A(this,yi)[l+c]=a[c],A(this,bd).add(l+c)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==oh&&A(this,yi).set(o.toUint8Array(),s),s+=r.size/8}ee(this,yd,new Set);for(const r of n.program.instructions){A(this,yi).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,yd).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!ke.inRange(n))return yield{type:"memory:read.error",error:new en("address-out-of-range",n)},null;const i=z.fromUnsigned(A(this,yi).at(n),8);return yield{type:"memory:read.ok",address:ke.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},ke.inRange(n)?(A(this,yd).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instruccin en la direccin ${ke.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instruccin en la direccin ${ke.format(n)}`)),A(this,yi).set([i.unsigned],n),yield{type:"memory:write.ok",address:ke.from(n),value:i},!0):(yield{type:"memory:write.error",error:new en("address-out-of-range",n)},!1)}toJSON(){return[...A(this,yi)]}},yi=new WeakMap,yd=new WeakMap,bd=new WeakMap,pe(Ka,"SIZE",ke.MAX_ADDRESS+1),Ka);class a4{constructor(e){pe(this,"cpu");pe(this,"memory");pe(this,"io");const n={computer:this,...e};this.cpu=new jZ(n),this.memory=new KZ(n),this.io=new GZ(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var wt;class qZ{constructor(){Ie(this,wt,new a4({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){ee(this,wt,new a4({...e,previous:A(this,wt)}))}getComputerState(){var e;return((e=A(this,wt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,wt))throw new en("no-program");return A(this,wt).cpu.run()}get devices(){if(!A(this,wt))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,wt).io.clock!==null,tick:()=>{if(A(this,wt).io.clock)return A(this,wt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,wt).io,press:()=>{if(A(this,wt).io.f10)return A(this,wt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,wt).io,readChar:e=>{if(A(this,wt).io.keyboard)return A(this,wt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,wt).io},printer:{connected:()=>A(this,wt).io.printer!==null,clear:()=>{if(A(this,wt).io.printer)return A(this,wt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,wt).io.printer)return A(this,wt).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,wt).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,wt).io,clear:()=>{if(A(this,wt).io.screen)return A(this,wt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,wt).io,toggle:e=>{if(A(this,wt).io.switches)return A(this,wt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}wt=new WeakMap;const nw=ue(z.zero(16)),iw=ue(z.zero(16)),YZ=ue(z.zero(8)),rw=ue(z.zero(16)),sw=ue(z.zero(16)),ow=ue(z.zero(16)),aw=ue(z.zero(16)),lw=ue(z.zero(16)),cw=ue(z.zero(16)),CC=ue(z.zero(16)),wc=ue(z.zero(8)),pt=ue(""),wp=ue(0),Rn=ue(0),EC=ue(!1),XZ=ue(!1),lb=ue(0),Ph=ue([]),_D=ue(!1);ue(!0);ue(!0);const f2=ue(!1),ma=t=>ue(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),ga=t=>ue(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),je={AL:ue(z.zero(8)),BL:ue(z.zero(8)),CL:ue(z.zero(8)),DL:ue(z.zero(8)),SP:nw,"SP.l":ma(nw),"SP.h":ga(nw),IP:iw,"IP.l":ma(iw),"IP.h":ga(iw),IR:YZ,ri:rw,"ri.l":ma(rw),"ri.h":ga(rw),id:sw,"id.l":ma(sw),"id.h":ga(sw),left:ow,"left.l":ma(ow),"left.h":ga(ow),right:aw,"right.l":ma(aw),"right.h":ga(aw),result:lw,"result.l":ma(lw),"result.h":ga(lw),FLAGS:cw,"FLAGS.l":ma(cw),"FLAGS.h":ga(cw),MAR:CC,MBR:wc},oi=ue({phase:"stopped"}),CD=ue("ADD");function JZ(t,e=!1){e?(L.set(je.AL,z.zero(8)),L.set(je.BL,z.zero(8)),L.set(je.CL,z.zero(8)),L.set(je.DL,z.zero(8)),L.set(je.SP,z.fromUnsigned(255,16)),L.set(je.IP,z.zero(16)),L.set(je.IR,z.zero(8)),L.set(je.ri,z.zero(16)),L.set(je.id,z.zero(16)),L.set(je.left,z.zero(16)),L.set(je.right,z.zero(16)),L.set(je.result,z.zero(16)),L.set(je.FLAGS,z.zero(16)),L.set(je.MAR,z.zero(16)),L.set(je.MBR,z.zero(8))):(L.set(je.AL,z.fromUnsigned(t.cpu.AX&255,8)),L.set(je.BL,z.fromUnsigned(t.cpu.BX&255,8)),L.set(je.CL,z.fromUnsigned(t.cpu.CX&255,8)),L.set(je.DL,z.fromUnsigned(t.cpu.DX&255,8)),L.set(je.SP,z.fromUnsigned(t.cpu.SP,16)),L.set(je.IP,z.fromUnsigned(t.cpu.IP,16)),L.set(je.IR,z.fromUnsigned(t.cpu.IR,8)),L.set(je.ri,z.fromUnsigned(t.cpu.ri,16)),L.set(je.id,z.fromUnsigned(t.cpu.id,16)),L.set(je.left,z.fromUnsigned(t.cpu.left,16)),L.set(je.right,z.fromUnsigned(t.cpu.right,16)),L.set(je.result,z.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,L.set(je.FLAGS,z.fromUnsigned(t.cpu.FLAGS,16)),L.set(je.MAR,z.fromUnsigned(t.cpu.MAR,16)),L.set(je.MBR,z.fromUnsigned(t.cpu.MBR,8))),L.set(oi,{phase:"stopped"})}const ED=ue([]),AD=ue([]),Lv=ue(new Array(ke.MAX_ADDRESS+1).fill(z.zero(8))),Sp=ue(ke.from(32)),ZZ=ue(null),ug=256,QZ=ue(t=>{const e=t(ZZ)??t(Sp);let n=e.value-e.value%ug,i=n+ug-1;i>ke.MAX_ADDRESS&&(i=ke.MAX_ADDRESS,n=i-ug+1);const r=t(Lv),s=[];for(let o=0;o<ug;o++)s.push({address:ke.from(n+o),value:r[n+o]});return s});function eQ(t,e=!1){e?L.set(Lv,new Array(ke.MAX_ADDRESS+1).fill(z.zero(8))):L.set(Lv,t.memory.map(n=>z.fromUnsigned(n,8))),L.set(Sp,ke.from(32))}let h2=[],ND=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?ND:h2).push(n=n+t[e])})();function tQ(t){if(t<768)return!1;for(let e=0,n=h2.length;;){let i=e+n>>1;if(t<h2[i])n=i;else if(t>=ND[i])e=i+1;else return!0;if(e==n)return!1}}function l4(t){return t>=127462&&t<=127487}const c4=8205;function nQ(t,e,n=!0,i=!0){return(n?PD:iQ)(t,e,i)}function PD(t,e,n){if(e==t.length)return e;e&&MD(t.charCodeAt(e))&&RD(t.charCodeAt(e-1))&&e--;let i=uw(t,e);for(e+=u4(i);e<t.length;){let r=uw(t,e);if(i==c4||r==c4||n&&tQ(r))e+=u4(r),i=r;else if(l4(r)){let s=0,o=e-2;for(;o>=0&&l4(uw(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function iQ(t,e,n){for(;e>0;){let i=PD(t,e-2,n);if(i<e)return i;e--}return 0}function uw(t,e){let n=t.charCodeAt(e);if(!RD(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return MD(i)?(n-55296<<10)+(i-56320)+65536:n}function MD(t){return t>=56320&&t<57344}function RD(t){return t>=55296&&t<56320}function u4(t){return t<65536?1:2}class gt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=Bd(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Gs.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Bd(this,e,n);let i=[];return this.decompose(e,n,i,0),Gs.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Mh(this),s=new Mh(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new Mh(this,e)}iterRange(e,n=this.length){return new TD(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new OD(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?gt.empty:e.length<=32?new cn(e):Gs.from(cn.split(e,[]))}}class cn extends gt{constructor(e,n=rQ(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new sQ(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new cn(d4(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=S0(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new cn(a,o.length+s.length));else{let l=a.length>>1;i.push(new cn(a.slice(0,l)),new cn(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof cn))return super.replace(e,n,i);[e,n]=Bd(this,e,n);let r=S0(this.text,S0(i.text,d4(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new cn(r,s):Gs.from(cn.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=Bd(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new cn(i,r)),i=[],r=-1);return r>-1&&n.push(new cn(i,r)),n}}class Gs extends gt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=Bd(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[r]=l,new Gs(u,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=Bd(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Gs))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let g of e)g.flatten(p);return new cn(p,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,u=[];function d(p){let g;if(p.lines>s&&p instanceof Gs)for(let m of p.children)d(m);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof cn&&l&&(g=u[u.length-1])instanceof cn&&p.lines+g.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new cn(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>r&&f(),l+=p.lines,c+=p.length+1,u.push(p))}function f(){l!=0&&(a.push(u.length==1?u[0]:Gs.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return f(),a.length==1?a[0]:new Gs(a,n)}}gt.empty=new cn([""],0);function rQ(t){let e=-1;for(let n of t)e+=n.length+1;return e}function S0(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function d4(t,e,n){return S0(t,[""],e,n)}class Mh{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof cn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof cn?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof cn){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof cn?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class TD{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Mh(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class OD{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(gt.prototype[Symbol.iterator]=function(){return this.iter()},Mh.prototype[Symbol.iterator]=TD.prototype[Symbol.iterator]=OD.prototype[Symbol.iterator]=function(){return this});class sQ{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function Bd(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Xn(t,e,n=!0,i=!0){return nQ(t,e,n,i)}function oQ(t){return t>=56320&&t<57344}function aQ(t){return t>=55296&&t<56320}function jr(t,e){let n=t.charCodeAt(e);if(!aQ(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return oQ(i)?(n-55296<<10)+(i-56320)+65536:n}function AC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Bo(t){return t<65536?1:2}const p2=/\r\n?|\n/;var Vi=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Vi||(Vi={}));class ao{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){m2(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new ao(e)}composeDesc(e){return this.empty?e:e.empty?this:ID(this,e)}mapDesc(e,n=!1){return e.empty?this:g2(this,e,n)}mapPos(e,n=-1,i=Vi.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=Vi.Simple&&c>=e&&(i==Vi.TrackDel&&r<e&&c>e||i==Vi.TrackBefore&&r<e||i==Vi.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ao(e)}static create(e){return new ao(e)}}class kn extends ao{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return m2(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return g2(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(gt.empty);i.push(o?e.slice(s,s+o):gt.empty)}s+=o}return new kn(n,i)}compose(e){return this.empty?e:e.empty?this:ID(this,e,!0)}map(e,n=!1){return e.empty?this:g2(this,e,n,!0)}iterChanges(e,n=!1){m2(this,e,n)}get desc(){return ao.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new kp(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);ai(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;ai(n,u,d),d>0&&Fa(i,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);ai(n,u,-1),ai(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new kn(n,i),filtered:ao.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<n&&ai(r,n-o,-1);let d=new kn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof kn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:p}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let g=p?typeof p=="string"?gt.of(p.split(i||p2)):p:gt.empty,m=g.length;if(d==f&&m==0)return;d<o&&l(),d>o&&ai(r,d-o,-1),ai(r,f-d,m),Fa(s,r,g),o=f}}return c(e),l(!a),a}static empty(e){return new kn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(gt.empty);i[r]=gt.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new kn(n,i)}static createSet(e,n){return new kn(e,n)}}function ai(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Fa(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(gt.empty);t.push(n)}}function m2(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,u=s,d=gt.empty;for(;c+=a,u+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,c,s,u,d),r=c,s=u}}}function g2(t,e,n,i=!1){let r=[],s=i?[]:null,o=new kp(t),a=new kp(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);ai(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(ai(r,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(ai(r,0,o.ins),s&&Fa(s,r,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;ai(r,c,l<o.i?o.ins:0),s&&l<o.i&&Fa(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?kn.createSet(r,s):ao.create(r);throw new Error("Mismatched change set lengths")}}}function ID(t,e,n=!1){let i=[],r=n?[]:null,s=new kp(t),o=new kp(e);for(let a=!1;;){if(s.done&&o.done)return r?kn.createSet(i,r):ao.create(i);if(s.ins==0)ai(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)ai(i,0,o.ins,a),r&&Fa(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;ai(i,l,u,a),r&&u&&Fa(r,i,o.text)}else o.ins==-1?(ai(i,s.off?0:s.len,l,a),r&&Fa(r,i,s.textBit(l))):(ai(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Fa(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class kp{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?gt.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?gt.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class gc{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new gc(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return re.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return re.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return re.range(e.anchor,e.head)}static create(e,n,i){return new gc(e,n,i)}}class re{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:re.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new re([this.main],0)}addRange(e,n=!0){return re.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,re.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new re(e.ranges.map(n=>gc.fromJSON(n)),e.main)}static single(e,n=e){return new re([re.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return re.normalized(e.slice(),n);i=s.to}return new re(e,n)}static cursor(e,n=0,i,r){return gc.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?gc.create(n,e,48|s):gc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?re.range(l,a):re.range(a,l))}}return new re(e,n)}}function jD(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let NC=0;class Ee{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=NC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ee(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:PC),!!e.static,e.enables)}of(e){return new k0([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new k0(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new k0(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function PC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class k0{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=NC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||v2(d,u)){let p=i(d);if(a?!f4(p,d.values[o],r):!r(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,g=f.config.address[s];if(g!=null){let m=$v(f,g);if(this.dependencies.every(v=>v instanceof Ee?f.facet(v)===d.facet(v):v instanceof Ei?f.field(v,!1)==d.field(v,!1):!0)||(a?f4(p=i(d),m,r):r(p=i(d),m)))return d.values[o]=m,0}else p=i(d);return d.values[o]=p,1}}}}function f4(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function v2(t,e){let n=!1;for(let i of e)Rh(t,i)&1&&(n=!0);return n}function lQ(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let d=$v(l,i[u]);if(r[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)Rh(l,c);return l.values[o]=a(l),1},update(l,c){if(!v2(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=v2(l,i),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&PC(n,d))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const dg=Ee.define({static:!0});class Ei{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new Ei(NC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(dg).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>{let s=i.facet(dg),o=r.facet(dg),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[n]=a.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,dg.of({field:this,create:e})]}get extension(){return this}}const sc={lowest:4,low:3,default:2,high:1,highest:0};function Nf(t){return e=>new LD(e,t)}const um={highest:Nf(sc.highest),high:Nf(sc.high),default:Nf(sc.default),low:Nf(sc.low),lowest:Nf(sc.lowest)};class LD{constructor(e,n){this.inner=e,this.prec=n}}class dm{of(e){return new y2(this,e)}reconfigure(e){return dm.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class y2{constructor(e,n){this.compartment=e,this.inner=n}}class Dv{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let f of cQ(e,n,o))f instanceof Ei?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of r)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let u=i==null?void 0:i.config.facets;for(let f in s){let p=s[f],g=p[0].facet,m=u&&u[f]||[];if(p.every(v=>v.type==0))if(a[g.id]=l.length<<1|1,PC(m,p))l.push(i.facet(g));else{let v=g.combine(p.map(y=>y.value));l.push(i&&g.compare(v,i.facet(g))?i.facet(g):v)}else{for(let v of p)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=c.length<<1,c.push(y=>v.dynamicSlot(y)));a[g.id]=c.length<<1,c.push(v=>lQ(v,g,p))}}let d=c.map(f=>f(a));return new Dv(e,o,d,a,l,s)}}function cQ(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof y2&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof y2){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof LD)s(o.inner,o.prec);else if(o instanceof Ei)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof k0)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,sc.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,sc.default),i.reduce((o,a)=>o.concat(a))}function Rh(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function $v(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const DD=Ee.define(),b2=Ee.define({combine:t=>t.some(e=>e),static:!0}),$D=Ee.define({combine:t=>t.length?t[0]:void 0,static:!0}),FD=Ee.define(),BD=Ee.define(),zD=Ee.define(),UD=Ee.define({combine:t=>t.length?t[0]:!1});class aa{constructor(e,n){this.type=e,this.value=n}static define(){return new uQ}}class uQ{of(e){return new aa(this,e)}}class dQ{constructor(e){this.map=e}of(e){return new tt(this,e)}}class tt{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new tt(this.type,n)}is(e){return this.type==e}static define(e={}){return new dQ(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}tt.reconfigure=tt.define();tt.appendConfig=tt.define();class An{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&jD(i,n.newLength),s.some(a=>a.type==An.time)||(this.annotations=s.concat(An.time.of(Date.now())))}static create(e,n,i,r,s,o){return new An(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(An.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}An.time=aa.define();An.userEvent=aa.define();An.addToHistory=aa.define();An.remote=aa.define();function fQ(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function VD(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=kn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:tt.mapEffects(t.effects,r).concat(tt.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function x2(t,e,n){let i=e.selection,r=rd(e.annotations);return e.userEvent&&(r=r.concat(An.userEvent.of(e.userEvent))),{changes:e.changes instanceof kn?e.changes:kn.of(e.changes||[],n,t.facet($D)),selection:i&&(i instanceof re?i:re.single(i.anchor,i.head)),effects:rd(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function HD(t,e,n){let i=x2(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=VD(i,x2(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=An.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return pQ(n?hQ(r):r)}function hQ(t){let e=t.startState,n=!0;for(let r of e.facet(FD)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:fQ(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=kn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=An.create(e,r,t.selection&&t.selection.map(s),tt.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(BD);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof An?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof An?t=s[0]:t=HD(e,rd(s),!1)}return t}function pQ(t){let e=t.startState,n=e.facet(zD),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=VD(i,x2(e,s,t.changes.newLength),!0))}return i==t?t:An.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const mQ=[];function rd(t){return t==null?mQ:Array.isArray(t)?t:[t]}var Jn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Jn||(Jn={}));const gQ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let w2;try{w2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function vQ(t){if(w2)return w2.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||gQ.test(n)))return!0}return!1}function yQ(t){return e=>{if(!/\S/.test(e))return Jn.Space;if(vQ(e))return Jn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Jn.Word;return Jn.Other}}class ut{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Rh(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return Rh(this,i),$v(this,i)}update(...e){return HD(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(dm.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,c)=>r.set(c,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(tt.reconfigure)?(n=null,i=a.value):a.is(tt.appendConfig)&&(n=null,i=rd(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=Dv.resolve(i,r,this),s=new ut(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(b2)?e.newSelection:e.newSelection.asSingle();new ut(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:re.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=rd(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(r);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),o=tt.mapEffects(o,u).concat(tt.mapEffects(rd(l.effects),d))}return{changes:r,selection:re.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof kn?e:kn.of(e,this.doc.length,this.facet(ut.lineSeparator))}toText(e){return gt.of(e.split(this.facet(ut.lineSeparator)||p2))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Rh(this,n),$v(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Ei&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return ut.create({doc:e.doc,selection:re.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Dv.resolve(e.extensions||[],new Map),i=e.doc instanceof gt?e.doc:gt.of((e.doc||"").split(n.staticFacet(ut.lineSeparator)||p2)),r=e.selection?e.selection instanceof re?e.selection:re.single(e.selection.anchor,e.selection.head):re.single(0);return jD(r,i.length),n.staticFacet(b2)||(r=r.asSingle()),new ut(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ut.tabSize)}get lineBreak(){return this.facet(ut.lineSeparator)||`
`}get readOnly(){return this.facet(UD)}phrase(e,...n){for(let i of this.facet(ut.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(DD))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return yQ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=Xn(n,o,!1);if(s(n.slice(l,o))!=Jn.Word)break;o=l}for(;a<r;){let l=Xn(n,a);if(s(n.slice(a,l))!=Jn.Word)break;a=l}return o==a?null:re.range(o+i,a+i)}}ut.allowMultipleSelections=b2;ut.tabSize=Ee.define({combine:t=>t.length?t[0]:4});ut.lineSeparator=$D;ut.readOnly=UD;ut.phrases=Ee.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});ut.languageData=DD;ut.changeFilter=FD;ut.transactionFilter=BD;ut.transactionExtender=zD;dm.reconfigure=tt.define();function Rl(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Dc{eq(e){return this==e}range(e,n=e){return S2.create(e,n,this)}}Dc.prototype.startSide=Dc.prototype.endSide=0;Dc.prototype.point=!1;Dc.prototype.mapMode=Vi.TrackDel;let S2=class WD{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new WD(e,n,i)}};function k2(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class MC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,p;if(u==d){let g=n.mapPos(u,c.startSide,c.mapMode);if(g==null||(f=p=g,c.startSide!=c.endSide&&(p=n.mapPos(u,c.endSide),p<f)))continue}else if(f=n.mapPos(u,c.startSide),p=n.mapPos(d,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),i.push(c),r.push(f-o),s.push(p-o))}return{mapped:i.length?new MC(r,s,i,a):null,pos:o}}}class kt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new kt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(k2)),this.isEmpty)return n.length?kt.of(n):this;let a=new GD(this,null,-1).goto(0),l=0,c=[],u=new vl;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(S2.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?kt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new kt(i,n,s||kt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return _p.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return _p.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=h4(o,a,i),c=new Pf(o,l,s),u=new Pf(a,l,s);i.iterGaps((d,f,p)=>p4(c,d,u,f,p,r)),i.empty&&i.length==0&&p4(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=h4(s,o),l=new Pf(s,a,0).goto(i),c=new Pf(o,a,0).goto(i);for(;;){if(l.to!=c.to||!_2(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new Pf(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);r.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new vl;for(let r of e instanceof S2?[e]:n?bQ(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return kt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=kt.empty;r=r.nextLayer)n=new kt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}kt.empty=new kt([],[],null,-1);function bQ(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(k2(e,i)>0)return t.slice().sort(k2);e=i}return t}kt.empty.nextLayer=kt.empty;class vl{finishChunk(e){this.chunks.push(new MC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new vl)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(kt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=kt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function h4(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class GD{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class _p{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new GD(o,n,i,s));return r.length==1?r[0]:new _p(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)dw(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)dw(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),dw(this.heap,0)}}}function dw(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Pf{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=_p.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){fg(this.active,e),fg(this.activeTo,e),fg(this.activeRank,e),this.minActive=m4(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;hg(this.active,n,i),hg(this.activeTo,n,r),hg(this.activeRank,n,s),e&&hg(e,n,this.cursor.from),this.minActive=m4(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&fg(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function p4(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,f=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&_2(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,f,t.point,n.point):f>a&&!_2(t.active,n.active)&&s.compareRange(a,f,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function _2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function fg(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function hg(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function m4(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function fm(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Xn(t,r));return i}function xQ(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Xn(t,r)}return t.length}const C2="",g4=typeof Symbol>"u"?"__"+C2:Symbol.for(C2),E2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),v4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class yl{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(v=>m.replace(/&/,v))).reduce((m,v)=>m.concat(v)),g,l);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),g,u,f)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+g+";")}(u.length||f)&&l.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=v4[g4]||1;return v4[g4]=e+1,C2+e.toString(36)}static mount(e,n,i){let r=e[E2],s=i&&i.nonce;r?s&&r.setNonce(s):r=new wQ(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let y4=new Map;class wQ{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=y4.get(i);if(s)return e[E2]=s;this.sheet=new r.CSSStyleSheet,y4.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[E2]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var bl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Cp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},SQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),kQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Hn=0;Hn<10;Hn++)bl[48+Hn]=bl[96+Hn]=String(Hn);for(var Hn=1;Hn<=24;Hn++)bl[Hn+111]="F"+Hn;for(var Hn=65;Hn<=90;Hn++)bl[Hn]=String.fromCharCode(Hn+32),Cp[Hn]=String.fromCharCode(Hn);for(var fw in bl)Cp.hasOwnProperty(fw)||(Cp[fw]=bl[fw]);function _Q(t){var e=SQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||kQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Cp:bl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Rt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)KD(t,arguments[e]);return t}function KD(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)KD(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Ep(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function A2(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function _0(t,e){if(!e.anchorNode)return!1;try{return A2(t,e.anchorNode)}catch{return!1}}function Ap(t){return t.nodeType==3?Fc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Th(t,e,n,i){return n?b4(t,e,n,i,-1)||b4(t,e,n,i,1):!1}function $c(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Fv(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function b4(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:fo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=$c(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?fo(t):0}else return!1}}function fo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function cb(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function CQ(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function qD(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function EQ(t,e,n,i,r,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,p=u==l.body,g=1,m=1;if(p)f=CQ(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let x=u.getBoundingClientRect();({scaleX:g,scaleY:m}=qD(u,x)),f={left:x.left,right:x.left+u.clientWidth*g,top:x.top,bottom:x.top+u.clientHeight*m}}let v=0,y=0;if(r=="nearest")e.top<f.top?(y=e.top-(f.top+o),n>0&&e.bottom>f.bottom+y&&(y=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(y=e.bottom-f.bottom+o,n<0&&e.top-y<f.top&&(y=e.top-(f.top+o)));else{let x=e.bottom-e.top,w=f.bottom-f.top;y=(r=="center"&&x<=w?e.top+x/2-w/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-w+o)-f.top}if(i=="nearest"?e.left<f.left?(v=e.left-(f.left+s),n>0&&e.right>f.right+v&&(v=e.right-f.right+s)):e.right>f.right&&(v=e.right-f.right+s,n<0&&e.left<f.left+v&&(v=e.left-(f.left+s))):v=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,v||y)if(p)c.scrollBy(v,y);else{let x=0,w=0;if(y){let S=u.scrollTop;u.scrollTop+=y/m,w=(u.scrollTop-S)*m}if(v){let S=u.scrollLeft;u.scrollLeft+=v/g,x=(u.scrollLeft-S)*g}e={left:e.left-x,top:e.top-w,right:e.right-x,bottom:e.bottom-w},x&&Math.abs(x-v)<1&&(i="nearest"),w&&Math.abs(w-y)<1&&(r="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function AQ(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class NQ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?fo(n):0),i,Math.min(e.focusOffset,i?fo(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let au=null;function YD(t){if(t.setActive)return t.setActive();if(au)return t.focus(au);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(au==null?{get preventScroll(){return au={preventScroll:!0},!0}}:void 0),!au){au=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let x4;function Fc(t,e,n=e){let i=x4||(x4=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function sd(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function PQ(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function XD(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function MQ(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,fo(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=fo(n))}else{if(n==t)return!0;i=$c(n),n=n.parentNode}}function JD(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function ZD(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=fo(n)}else if(n.parentNode&&!Fv(n))i=$c(n),n=n.parentNode;else return null}}function QD(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!Fv(n))i=$c(n)+1,n=n.parentNode;else return null}}class ui{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new ui(e.parentNode,$c(e),n)}static after(e,n){return new ui(e.parentNode,$c(e)+1,n)}}const RC=[];class Ot{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Ot.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=w4(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=w4(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=fo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ot.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&r==-1&&(r=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=RC){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new e8(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ot.prototype.breakAfter=0;function w4(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class e8{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function t8(t,e,n,i,r,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!f&&s.length<2&&u.merge(n,r,s.length?d:null,n==0,a,l))){if(i<c.length){let p=c[i];p&&(r<p.length||p.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(p=p.split(r),r=0),!f&&d&&p.merge(0,r,d,!0,0,l)?s[s.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function n8(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of i)d+=f.length;t.length+=d,t8(t,c,u,a,l,i,0,r,s)}let Ui=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},N2=typeof document<"u"?document:{documentElement:{style:{}}};const P2=/Edge\/(\d+)/.exec(Ui.userAgent),i8=/MSIE \d/.test(Ui.userAgent),M2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ui.userAgent),ub=!!(i8||M2||P2),S4=!ub&&/gecko\/(\d+)/i.test(Ui.userAgent),hw=!ub&&/Chrome\/(\d+)/.exec(Ui.userAgent),RQ="webkitFontSmoothing"in N2.documentElement.style,r8=!ub&&/Apple Computer/.test(Ui.vendor),k4=r8&&(/Mobile\/\w+/.test(Ui.userAgent)||Ui.maxTouchPoints>2);var _e={mac:k4||/Mac/.test(Ui.platform),windows:/Win/.test(Ui.platform),linux:/Linux|X11/.test(Ui.platform),ie:ub,ie_version:i8?N2.documentMode||6:M2?+M2[1]:P2?+P2[1]:0,gecko:S4,gecko_version:S4?+(/Firefox\/(\d+)/.exec(Ui.userAgent)||[0,0])[1]:0,chrome:!!hw,chrome_version:hw?+hw[1]:0,ios:k4,android:/Android\b/.test(Ui.userAgent),safari:r8,webkit_version:RQ?+(/\bAppleWebKit\/(\d+)/.exec(Ui.userAgent)||[0,0])[1]:0,tabSize:N2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const TQ=256;class xs extends Ot{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof xs)||this.length-(n-e)+i.length>TQ||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new xs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new ui(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return OQ(this.dom,e,n)}}class ea extends Ot{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(XD(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof ea&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(n8(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new ea(this.mark,n,o)}domAtPos(e){return s8(this,e)}coordsAt(e,n){return a8(this,e,n)}}function OQ(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?_e.chrome||_e.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Fc(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return _e.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?cb(l,o<0):l||null}class Ba extends Ot{static create(e,n,i){return new Ba(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Ba.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Ba)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Ba&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return gt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):gt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ui.before(this.dom):ui.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return cb(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class zd extends Ot{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof zd&&e.side==this.side}split(){return new zd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ui.before(this.dom):ui.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return gt.empty}get isHidden(){return!0}}xs.prototype.children=Ba.prototype.children=zd.prototype.children=RC;function s8(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new ui(n,0)}function o8(t,e,n){let i,{children:r}=t;n>0&&e instanceof ea&&r.length&&(i=r[r.length-1])instanceof ea&&i.mark.eq(e.mark)?o8(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function a8(t,e,n){let i=null,r=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let p=c.children[d],g=f+p.length;g>=u&&(p.children.length?a(p,u-f):(!s||s.isHidden&&(n>0||jQ(s,p)))&&(g>u||f==g&&p.getSide()>0)?(s=p,o=u-f):(f<u||f==g&&p.getSide()<0&&!p.isHidden)&&(i=p,r=u-f)),f=g}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):IQ(t)}function IQ(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Ap(e);return n[n.length-1]||null}function jQ(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function R2(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const _4=Object.create(null);function Bv(t,e,n){if(t==e)return!0;t||(t=_4),e||(e=_4);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function T2(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function LQ(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Tl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var wi=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(wi||(wi={}));class nt extends Dc{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new hm(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new xl(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=l8(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new xl(e,i,r,n,e.widget||null,!0)}static line(e){return new pm(e)}static set(e,n=!1){return kt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}nt.none=kt.empty;class hm extends nt{constructor(e){let{start:n,end:i}=l8(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof hm&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Bv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}hm.prototype.point=!1;class pm extends nt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof pm&&this.spec.class==e.spec.class&&Bv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}pm.prototype.mapMode=Vi.TrackBefore;pm.prototype.point=!0;class xl extends nt{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Vi.TrackBefore:Vi.TrackAfter:Vi.TrackDel}get type(){return this.startSide!=this.endSide?wi.WidgetRange:this.startSide<=0?wi.WidgetBefore:wi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof xl&&DQ(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}xl.prototype.point=!0;function l8(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function DQ(t,e){return t==e||!!(t&&e&&t.compare(e))}function C0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class vn extends Ot{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof vn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),n8(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new vn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Bv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){o8(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=R2(n,this.attrs||{})),i&&(this.attrs=R2({class:i},this.attrs||{}))}domAtPos(e){return s8(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(XD(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(T2(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Ot.get(r)instanceof ea;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Ot.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!_e.ios||!this.children.some(s=>s instanceof xs))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof xs)||/[^ -~]/.test(i.text))return null;let r=Ap(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=a8(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof vn&&this.children.length==0&&e.children.length==0&&Bv(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof vn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class Wo extends Ot{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof Wo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?ui.before(this.dom):ui.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Wo(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return RC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):gt.empty}domBoundsAround(){return null}become(e){return e instanceof Wo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof O2?null:cb(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class O2 extends Tl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Oh{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Wo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new vn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(pg(new zd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Wo)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(pg(new xs(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof xl){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof xl)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Wo(i.widget||Ud.block,a,i));else{let l=Ba.create(i.widget||Ud.inline,a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(pg(new zd(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(pg(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new Oh(e,n,i,s);return o.openEnd=kt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function pg(t,e){for(let n of e)t=new ea(n,[t],t.length);return t}class Ud extends Tl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ud.inline=new Ud("span");Ud.block=new Ud("div");var Vt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Vt||(Vt={}));const Bc=Vt.LTR,TC=Vt.RTL;function c8(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const $Q=c8("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),FQ=c8("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),I2=Object.create(null),Ps=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);I2[e]=n,I2[n]=-e}function u8(t){return t<=247?$Q[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?FQ[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const BQ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class za{get dir(){return this.level%2?TC:Bc}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function d8(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!d8(i.inner,r.inner))return!1}return!0}const Tt=[];function zQ(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let c=o,u=l,d=l;c<a;c++){let f=u8(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),Tt[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=Tt[c];if(f==128)c<a-1&&u==Tt[c+1]&&u&24?f=Tt[c]=u:Tt[c]=256;else if(f==64){let p=c+1;for(;p<a&&Tt[p]==64;)p++;let g=c&&u==8||p<n&&Tt[p]==8?d==1?1:8:256;for(let m=c;m<p;m++)Tt[m]=g;c=p-1}else f==8&&d==1&&(Tt[c]=1);u=f,f&7&&(d=f)}}}function UQ(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let d=c,f,p,g;d<u;d++)if(p=I2[f=t.charCodeAt(d)])if(p<0){for(let m=a-3;m>=0;m-=3)if(Ps[m+1]==-p){let v=Ps[m+2],y=v&2?r:v&4?v&1?s:r:0;y&&(Tt[d]=Tt[Ps[m]]=y),a=m;break}}else{if(Ps.length==189)break;Ps[a++]=d,Ps[a++]=f,Ps[a++]=l}else if((g=Tt[d])==2||g==1){let m=g==r;l=m?0:1;for(let v=a-3;v>=0;v-=3){let y=Ps[v+2];if(y&2)break;if(m)Ps[v+2]|=2;else{if(y&4)break;Ps[v+2]|=4}}}}}function VQ(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let c=Tt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(r==n.length)break;u=n[r++].to,a=r<n.length?n[r].from:e}else if(Tt[u]==256)u++;else break;let d=s==1,f=(u<e?Tt[u]:i)==1,p=d==f?d?1:2:i;for(let g=u,m=r,v=m?n[m-1].to:t;g>l;)g==v&&(g=n[--m].from,v=m?n[m-1].to:t),Tt[--g]=p;l=u}else s=c,l++}}}function j2(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=Tt[l];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c<s.length&&g==s[c].from){if(d)break e;let m=s[c];if(!u)for(let v=m.to,y=c+1;;){if(v==n)break e;if(y<s.length&&s[y].from==v)v=s[y++].to;else{if(Tt[v]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new za(l,m.from,p));let v=m.direction==Bc!=!(p%2);L2(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}g=m.to}else{if(g==n||(u?Tt[g]!=a:Tt[g]==a))break;g++}f?j2(t,l,g,i+1,r,f,o):l<g&&o.push(new za(l,g,p)),l=g}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=Tt[l-1];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c&&g==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let v=m.from,y=c;;){if(v==e)break e;if(y&&s[y-1].to==v)v=s[--y].from;else{if(Tt[v-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new za(m.to,l,p));let v=m.direction==Bc!=!(p%2);L2(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}g=m.from}else{if(g==e||(u?Tt[g-1]!=a:Tt[g-1]==a))break;g--}f?j2(t,g,l,i+1,r,f,o):g<l&&o.push(new za(g,l,p)),l=g}}function L2(t,e,n,i,r,s,o){let a=e%2?2:1;zQ(t,r,s,i,a),UQ(t,r,s,i,a),VQ(r,s,i,a),j2(t,r,s,e,n,i,o)}function HQ(t,e,n){if(!t)return[new za(0,0,e==TC?1:0)];if(e==Bc&&!n.length&&!BQ.test(t))return f8(t.length);if(n.length)for(;t.length>Tt.length;)Tt[Tt.length]=256;let i=[],r=e==Bc?0:1;return L2(t,r,r,n,0,t.length,i),i}function f8(t){return[new za(0,t,0)]}let h8="";function WQ(t,e,n,i,r){var s;let o=i.head-t.from,a=za.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],c=l.side(r,n);if(o==c){let f=a+=r?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!r,n),c=l.side(r,n)}let u=Xn(t.text,o,l.forward(r,n));(u<l.from||u>l.to)&&(u=c),h8=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?re.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):re.cursor(u+t.from,l.forward(r,n)?-1:1,l.level)}function GQ(t,e,n){for(let i=e;i<n;i++){let r=u8(t.charCodeAt(i));if(r==1)return Bc;if(r==2||r==4)return TC}return Bc}const p8=Ee.define(),m8=Ee.define(),g8=Ee.define(),v8=Ee.define(),D2=Ee.define(),y8=Ee.define(),b8=Ee.define(),OC=Ee.define(),IC=Ee.define(),x8=Ee.define({combine:t=>t.some(e=>e)}),w8=Ee.define({combine:t=>t.some(e=>e)}),S8=Ee.define();class od{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new od(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new od(re.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const mg=tt.define({map:(t,e)=>t.map(e)}),k8=tt.define();function fr(t,e,n){let i=t.facet(v8);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const zo=Ee.define({combine:t=>t.length?t[0]:!0});let KQ=0;const Hu=Ee.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class ti{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Hu.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Hu.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new ti(KQ++,e,i,r,a=>{let l=[];return o&&l.push(Np.of(c=>{let u=c.plugin(a);return u?o(u):nt.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return ti.define((i,r)=>new e(i,r),n)}}class pw{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(fr(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){fr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){fr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const _8=Ee.define(),jC=Ee.define(),Np=Ee.define(),C8=Ee.define(),LC=Ee.define(),E8=Ee.define();function C4(t,e){let n=t.state.facet(E8);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return kt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=r;for(let f=a.length-1;f>=0;f--,l--){let p=a[f].spec.bidiIsolate,g;if(p==null&&(p=GQ(e.text,c,u)),l>0&&d.length&&(g=d[d.length-1]).to==c&&g.direction==p)g.to=u,d=g.inner;else{let m={from:c,to:u,direction:p,inner:[]};d.push(m),d=m.inner}}}}),r}const A8=Ee.define();function DC(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(A8)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const ah=Ee.define();class Wr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Wr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],p=Math.max(a,d),g=Math.min(u,f);if(p<=g&&new Wr(p+c,g+c,p,g).addToSet(i),f>u)break;s+=2}if(!l)return i;new Wr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class zv{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=kn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Wr(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new zv(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class E4 extends Ot{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=nt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new vn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Wr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!eee(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?YQ(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Wr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(_e.ie||_e.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=ZQ(o,a,e.changes);return i=Wr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=_e.chrome||_e.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Wo&&o.widget instanceof O2&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,p,g,m;if(i&&i.range.fromB<d&&i.range.toB>u){let S=Oh.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=Oh.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=S.breakAtStart,g=S.openStart,m=_.openEnd;let E=this.compositionView(i);_.breakAtStart?E.breakAfter=1:_.content.length&&E.merge(E.length,E.length,_.content[0],!1,_.openStart,0)&&(E.breakAfter=_.content[0].breakAfter,_.content.shift()),S.content.length&&E.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),f=S.content.concat(E).concat(_.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:m}=Oh.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:y}=s.findPos(c,1),{i:x,off:w}=s.findPos(l,-1);t8(this,x,w,v,y,f,p,g,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(k8)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new xs(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new ea(r,[n],n.length);let i=new vn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Ot.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(zo)||this.dom.tabIndex>-1)&&_0(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(_e.gecko&&a.empty&&!this.hasComposition&&qQ(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new ui(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Th(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Th(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{_e.android&&_e.chrome&&this.dom.contains(u.focusNode)&&QQ(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Ep(this.view.root);if(d)if(a.empty){if(_e.gecko){let f=XQ(l.node,l.offset);if(f&&f!=3){let p=(f==1?ZD:QD)(l.node,l.offset);p&&(l=new ui(p.node,p.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new ui(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new ui(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Th(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Ep(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=vn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Ot.get(n.childNodes[r]);s instanceof vn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Ot.get(n.childNodes[r]);s instanceof vn&&(i=s.domAtPos(s.length))}return i?new ui(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Ot.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof vn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof vn&&!(i instanceof vn&&n>=0)))i=a,r=c;else if(i&&c==e&&l==e&&a instanceof Wo&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof vn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof xs))return null;let s=Xn(r.text,i);if(s==i)return null;let o=Fc(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Vt.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>r)break;if(c>=i){let p=d.dom.getBoundingClientRect();if(n.push(p.height),o){let g=d.dom.lastChild,m=g?Ap(g):[];if(m.length){let v=m[m.length-1],y=l?v.right-p.left:p.right-v.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Vt.RTL:Vt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof vn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Ap(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new e8(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(nt.replace({widget:new O2(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return nt.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Np).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(C8).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(kt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(S8))try{if(c(this.view,e.range,e))return!0}catch(u){fr(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=DC(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;EQ(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Vt.LTR)}}function qQ(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function N8(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=ZD(n.focusNode,n.focusOffset),r=QD(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=Ot.get(r.node);if(!a||a instanceof xs&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=Ot.get(i.node);!l||l instanceof xs&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function YQ(t,e,n){let i=N8(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new Wr(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=r.parentNode;;d=d.parentNode){let f=Ot.get(d);if(f instanceof ea)u.push({node:d,deco:f.mark});else{if(f instanceof vn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new hm({inclusive:!0,attributes:LQ(d),tagName:d.tagName.toLowerCase()})});else return null}}}function XQ(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let JQ=class{constructor(){this.changes=[]}compareRange(e,n){C0(e,n,this.changes)}comparePoint(e,n){C0(e,n,this.changes)}boundChange(e){C0(e,e,this.changes)}};function ZQ(t,e,n){let i=new JQ;return kt.compare(t,e,n,i),i.changes}function QQ(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function eee(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function tee(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return re.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Xn(r.text,s,!1):a=Xn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=Xn(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=Xn(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return re.range(o+r.from,a+r.from)}function nee(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function iee(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function mw(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function A4(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function N4(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function $2(t,e,n){let i,r,s,o,a=!1,l,c,u,d;for(let g=t.firstChild;g;g=g.nextSibling){let m=Ap(g);for(let v=0;v<m.length;v++){let y=m[v];r&&mw(r,y)&&(y=A4(N4(y,r.bottom),r.top));let x=nee(e,y),w=iee(n,y);if(x==0&&w==0)return g.nodeType==3?P4(g,e,n):$2(g,e,n);(!i||o>w||o==w&&s>x)&&(i=g,r=y,s=x,o=w,a=x?e<y.left?v>0:v<m.length-1:!0),x==0?n>y.bottom&&(!u||u.bottom<y.bottom)?(l=g,u=y):n<y.top&&(!d||d.top>y.top)&&(c=g,d=y):u&&mw(u,y)?u=N4(u,y.bottom):d&&mw(d,y)&&(d=A4(d,y.top))}}if(u&&u.bottom>=n?(i=l,r=u):d&&d.top<=n&&(i=c,r=d),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return P4(i,f,n);if(a&&i.contentEditable!="false")return $2(i,f,n);let p=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:p}}function P4(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Fc(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,p=f;if((_e.chrome||_e.gecko)&&Fc(t,a).getBoundingClientRect().left==u.right&&(p=!f),d<=0)return{node:t,offset:a+(p?1:0)};r=a+(p?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function P8(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(f),l.type!=wi.Text;)for(;f=i>0?l.bottom+S:l.top-S,!(f>=0&&f<=c);){if(_)return n?null:0;_=!0,i=-i}d=a+f;let p=l.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:M4(t,o,l,u,d);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:M4(t,o,l,u,d);let g=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:g,v=m.elementFromPoint(u,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(u=Math.max(o.left+1,Math.min(o.right-1,u)),v=m.elementFromPoint(u,d),v&&!t.contentDOM.contains(v)&&(v=null));let y,x=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(u,d);S&&({offsetNode:y,offset:x}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(u,d);S&&({startContainer:y,startOffset:x}=S,(!t.contentDOM.contains(y)||_e.safari&&ree(y,x,u)||_e.chrome&&see(y,x,u))&&(y=void 0))}y&&(x=Math.min(fo(y),x))}if(!y||!t.docView.dom.contains(y)){let S=vn.find(t.docView,p);if(!S)return f>l.top+l.height/2?l.to:l.from;({node:y,offset:x}=$2(S.dom,u,d))}let w=t.docView.nearest(y);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=w.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(y,x)+w.posAtStart}function M4(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+xQ(o,s,t.state.tabSize)}function ree(t,e,n){let i,r=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return Fc(t,i-1,i).getBoundingClientRect().right>n}function see(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Fc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function F2(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==wi.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function oee(t,e,n,i){let r=F2(t,e.head,e.assoc||-1),s=!i||r.type!=wi.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==Vt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return re.cursor(l,n?-1:1)}return re.cursor(n?r.to:r.from,n?-1:1)}function R4(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let c=WQ(r,s,o,a,n),u=h8;if(!c){if(r.number==(n?t.state.doc.lines:1))return a;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function aee(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Jn.Space&&(r=o),r==o}}function lee(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return re.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-p.from))),a=(s<0?p.top:p.bottom)+u}let d=l.left+o,f=i??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=a+(f+p)*s,m=P8(t,{x:d,y:g},!1,s);if(g<l.top||g>l.bottom||(s<0?m<r:m>r)){let v=t.docView.coordsForChar(m),y=!v||g<v.top?-1:1;return re.cursor(m,y,void 0,o)}}}function E0(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function gw(t,e,n){let i=E0(t.state.facet(LC).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:re.cursor(i,i<n.from?1:-1)}const lh="";class cee{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ut.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=lh}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=Ot.get(r),l=Ot.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Fv(r))||Fv(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Ot.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(uee(e,i.node,i.offset)?n:0))}}function uee(t,e,n){for(;;){if(!e||n<fo(e))return!1;if(e==t)return!0;n=$c(e)+1,e=e.parentNode}}class T4{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class dee{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:pee(e),l=new cee(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=mee(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!A2(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!A2(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((_e.ios||_e.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),f=Math.max(l,c),p=u.from-d,g=u.to-f;(p==0||p==1||d==0)&&(g==0||g==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=re.single(c,l)}}}function M8(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(s===8||_e.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=hee(t.state.doc.sliceString(o,a,lh),e.text,l-o,c);u&&(_e.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==lh+lh&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:gt.of(e.text.slice(u.from,u.toB).split(lh))})}else i&&(!t.hasFocus&&t.state.facet(zo)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(_e.mac||_e.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:gt.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:_e.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:gt.of([" "])}),n)return $C(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function $C(t,e,n,i=-1){if(_e.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(_e.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&sd(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&sd(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&sd(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=fee(t,e,n));return t.state.facet(y8).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function fee(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&N8(t,n.main.head);if(d){let g=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-g}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,p=s.to-s.from;i=r.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:a,range:l||g.map(a)};let m=g.to-f,v=m-c.length;if(g.to-g.from!=p||t.state.sliceDoc(v,m)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let y=r.changes({from:v,to:m,insert:e.insert}),x=g.to-s.to;return{changes:y,range:l?re.range(Math.max(0,l.anchor+x),Math.max(0,l.head+x)):g.map(y)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function hee(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function pee(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new T4(n,i)),(r!=n||s!=i)&&e.push(new T4(r,s))),e}function mee(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?re.single(n+e,i+e):null}class gee{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,_e.safari&&e.contentDOM.addEventListener("input",()=>null),_e.gecko&&Tee(e.contentDOM.ownerDocument)}handleEvent(e){!_ee(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=vee(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&T8.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),_e.android&&_e.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return _e.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=R8.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||yee.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,sd(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:_e.safari&&!_e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function O4(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){fr(n.state,r)}}}function vee(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(O4(i.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(O4(i.value,l))}}for(let i in ws)n(i).handlers.push(ws[i]);for(let i in Jr)n(i).observers.push(Jr[i]);return e}const R8=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],yee="dthko",T8=[16,17,18,20,91,92,224,225],gg=6;function vg(t){return Math.max(0,t)*.7+8}function bee(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class xee{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=AQ(e.contentDOM),this.atoms=e.state.facet(LC).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ut.allowMultipleSelections)&&wee(e,n),this.dragging=kee(e,n)&&j8(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&bee(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=DC(this.view);e.clientX-l.left<=r+gg?n=-vg(r-e.clientX):e.clientX+l.right>=o-gg&&(n=vg(e.clientX-o)),e.clientY-l.top<=s+gg?i=-vg(s-e.clientY):e.clientY+l.bottom>=a-gg&&(i=vg(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=E0(this.atoms,r.from,0);o!=r.from&&(s=re.cursor(o,-1))}else{let o=E0(this.atoms,r.from,-1),a=E0(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=re.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?re.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function wee(t,e){let n=t.state.facet(p8);return n.length?n[0](e):_e.mac?e.metaKey:e.ctrlKey}function See(t,e){let n=t.state.facet(m8);return n.length?n[0](e):_e.mac?!e.altKey:!e.ctrlKey}function kee(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Ep(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function _ee(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Ot.get(n))&&i.ignoreEvent(e))return!1;return!0}const ws=Object.create(null),Jr=Object.create(null),O8=_e.ie&&_e.ie_version<15||_e.ios&&_e.webkit_version<604;function Cee(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),I8(t,n.value)},50)}function db(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function I8(t,e){e=db(t.state,OC,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(B2!=null&&n.selection.ranges.every(l=>l.empty)&&B2==s.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:re.cursor(c.from+d.length)}})}else o?i=n.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:re.cursor(l.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Jr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};ws.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Jr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Jr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ws.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(g8))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=Nee(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new xee(t,e,n,i)),i&&t.observer.ignore(()=>{YD(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function I4(t,e,n,i){if(i==1)return re.cursor(e,n);if(i==2)return tee(t.state,e,n);{let r=vn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,re.range(o,a)}}let j4=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function Eee(t,e,n,i){let r=vn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&j4(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&j4(n,i,a)?1:o&&o.bottom>=i?-1:1}function L4(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Eee(t,n,e.clientX,e.clientY)}}const Aee=_e.ie&&_e.ie_version<=11;let D4=null,$4=0,F4=0;function j8(t){if(!Aee)return t.detail;let e=D4,n=F4;return D4=t,F4=Date.now(),$4=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?($4+1)%3:1}function Nee(t,e){let n=L4(t,e),i=j8(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=L4(t,s),c,u=I4(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=I4(t,n.pos,n.bias,i),f=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=f<u.from?re.range(f,p):re.range(p,f)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&i==1&&r.ranges.length>1&&(c=Pee(r,l.pos))?c:a?r.addRange(u):re.create([u])}}}function Pee(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return re.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}ws.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=re.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",db(t.state,IC,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ws.dragend=t=>(t.inputState.draggedContent=null,!1);function B4(t,e,n,i){if(n=db(t.state,OC,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&See(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}ws.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&B4(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return B4(t,e,i,!0),!0}return!1};ws.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=O8?null:e.clipboardData;return n?(I8(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Cee(t),!1)};function Mee(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function Ree(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:db(t,IC,e.join(t.lineBreak)),ranges:n,linewise:i}}let B2=null;ws.copy=ws.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=Ree(t.state);if(!n&&!r)return!1;B2=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=O8?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(Mee(t,n),!1)};const L8=aa.define();function D8(t,e){let n=[];for(let i of t.facet(b8)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:L8.of(!0)}):null}function $8(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=D8(t.state,e);n?t.dispatch(n):t.update([])}},10)}Jr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),$8(t)};Jr.blur=t=>{t.observer.clearSelectionRange(),$8(t)};Jr.compositionstart=Jr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Jr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,_e.chrome&&_e.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Jr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ws.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return $C(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let r;if(_e.chrome&&_e.android&&(r=R8.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return _e.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),_e.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Jr.compositionend(t,e),20),!1};const z4=new Set;function Tee(t){z4.has(t)||(z4.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const U4=["pre-wrap","normal","pre-line","break-spaces"];let Vd=!1;function V4(){Vd=!1}class Oee{constructor(e){this.lineWrapping=e,this.doc=gt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return U4.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=U4.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class Iee{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Ks{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?wi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof xl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ks(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var $t=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}($t||($t={}));const A0=.001;class Si{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>A0&&(Vd=!0),this.height=e)}replace(e,n,i){return Si.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=r[a],f=s.lineAt(l,$t.ByPosNoHeight,i.setDoc(n),0,0),p=f.to>=c?f:s.lineAt(c,$t.ByPosNoHeight,i,0,0);for(d+=p.to-c,c=p.to;a>0&&f.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,$t.ByPosNoHeight,i,0,0));u+=f.from-l,l=f.from;let g=FC.build(i.setDoc(o),e,u,d);s=Uv(s,s.replace(l,c,g))}return s.updateHeight(i,0)}static empty(){return new or(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new jee(Si.of(e.slice(0,n)),o,Si.of(e.slice(i)))}}function Uv(t,e){return t==e?t:(t.constructor!=e.constructor&&(Vd=!0),e)}Si.prototype.size=1;class F8 extends Si{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new Ks(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class or extends F8{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new Ks(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof or||r instanceof zn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof zn?r=new or(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Si.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class zn extends Si{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(i,e-d/2);return new Ks(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:u,length:d}=n.doc.line(s+c);return new Ks(u,d,i+a*c,a,0)}}lineAt(e,n,i,r,s){if(n==$t.ByHeight)return this.blockAt(e,i,r,s);if(n==$t.ByPosNoHeight){let{from:p,to:g}=i.doc.lineAt(e);return new Ks(p,g-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=r+a*d+l*(c.from-s-d);return new Ks(c.from,c.length,Math.max(r,Math.min(f,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=n;){let f=i.doc.lineAt(u);if(u==e){let g=f.number-a;d+=l*g+c*(e-s-g)}let p=l+c*f.length;o(new Ks(f.from,f.length,d,p,0)),d+=p,u=f.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof zn?i[i.length-1]=new zn(s.length+r):i.push(null,new zn(r-1))}if(e>0){let s=i[0];s instanceof zn?i[0]=new zn(e+s.length):i.unshift(new zn(e-1),null)}return Si.of(i)}decomposeLeft(e,n){n.push(new zn(e-1),null)}decomposeRight(e,n){n.push(null,new zn(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new zn(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=A0&&(l=-2);let f=new or(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new zn(s-a).updateHeight(e,a));let c=Si.of(o);return(l<0||Math.abs(c.height-this.height)>=A0||Math.abs(l-this.heightMetrics(e,n).perLine)>=A0)&&(Vd=!0),Uv(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class jee extends Si{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==$t.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==$t.ByPosNoHeight?$t.ByPosNoHeight:$t.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,$t.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&H4(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),H4(s,a)}return Si.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Si.of(this.break?[e,null,n]:[e,n]):(this.left=Uv(this.left,e),this.right=Uv(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function H4(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof zn&&(i=t[e+1])instanceof zn&&t.splice(e-1,3,new zn(n.length+1+i.length))}const Lee=5;class FC{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof or?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new or(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new F8(o,r,i)):(o||s||r>=Lee)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new or(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new zn(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof or)return e;let n=new or(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof or)&&!this.isCovered?this.nodes.push(new or(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof or&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new FC(i,e);return kt.spans(n,i,r,s,0),s.finish(i)}}function Dee(t,e,n){let i=new $ee;return kt.compare(t,e,n,i,0),i.changes}class $ee{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&C0(e,n,this.changes,5)}}function Fee(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?r.innerHeight:l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function Bee(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function zee(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class vw{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return nt.replace({widget:new Uee(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Uee extends Tl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class W4{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=G4,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Vt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(jC).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new Oee(n),this.stateDeco=e.facet(Np).filter(i=>typeof i!="function"),this.heightMap=Si.empty().applyChanges(this.stateDeco,gt.empty,this.heightOracle.setDoc(e.doc),[new Wr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=nt.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new yg(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?G4:new BC(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(ch(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Np).filter(u=>typeof u!="function");let r=e.changedRanges,s=Wr.extendWithRanges(r,Dee(i,this.stateDeco,e?e.changes:kn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);V4(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Vd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(w8)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Vt.RTL:Vt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:S,scaleY:_}=qD(n,a);(S>.005&&Math.abs(this.scaleX-S)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=S,this.scaleY=_,c|=16,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=JD(e.scrollDOM);let g=(this.printing?zee:Fee)(n,this.paddingTop),m=g.top-this.pixelViewport.top,v=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!Bee(e.dom))return 0;let x=a.width;if((this.contentDOMWidth!=x||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let S=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(S)&&(o=!0),o||r.lineWrapping&&Math.abs(x-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=_>0&&r.refresh(s,_,E,C,x/E,S),o&&(e.docView.minWidth=0,c|=16)}m>0&&v>0?u=Math.max(m,v):m<0&&v<0&&(u=Math.min(m,v)),V4();for(let _ of this.viewports){let E=_.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?Si.empty().applyChanges(this.stateDeco,gt.empty,this.heightOracle,[new Wr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new Iee(_.from,E))}Vd&&(c|=2)}let w=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new yg(r.lineAt(o-i*1e3,$t.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,$t.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,$t.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new yg(r.lineAt(f-1e3/2,$t.ByHeight,s,0,0).from,r.lineAt(f+u+1e3/2,$t.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new yg(this.heightMap.lineAt(i,$t.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,$t.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,$t.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,$t.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new vw(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Vt.LTR&&!i)return[];let a=[],l=(u,d,f,p)=>{if(d-u<s)return;let g=this.state.selection.main,m=[g.from];g.empty||m.push(g.to);for(let y of m)if(y>u&&y<d){l(u,y-10,f,p),l(y+10,d,f,p);return}let v=Hee(e,y=>y.from>=f.from&&y.to<=f.to&&Math.abs(y.from-u)<s&&Math.abs(y.to-d)<s&&!m.some(x=>y.from<x&&y.to>x));if(!v){if(d<f.to&&n&&i&&n.visibleRanges.some(w=>w.from<=d&&w.to>=d)){let w=n.moveToLineBoundary(re.cursor(d),!1,!0).head;w>u&&(d=w)}let y=this.gapSize(f,u,d,p),x=i||y<2e6?y:2e6;v=new vw(u,d,y,x)}a.push(v)},c=u=>{if(u.length<o||u.type!=wi.Text)return;let d=Vee(u.from,u.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,y;if(f!=null){let x=xg(d,f),w=((this.visibleBottom-this.visibleTop)/2+m)/u.height;v=x-w,y=x+w}else v=(this.visibleTop-u.top-m)/u.height,y=(this.visibleBottom-u.top+m)/u.height;p=bg(d,v),g=bg(d,y)}else{let m=d.total*this.heightOracle.charWidth,v=r*this.heightOracle.charWidth,y=0;if(m>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=E.size-E.displaySize);let x=this.pixelViewport.left+y,w=this.pixelViewport.right+y,S,_;if(f!=null){let E=xg(d,f),C=((w-x)/2+v)/m;S=E-C,_=E+C}else S=(x-v)/m,_=(w+v)/m;p=bg(d,S),g=bg(d,_)}p>u.from&&l(u.from,p,u,d),g<u.to&&l(g,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,i,r){let s=xg(r,i)-xg(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){vw.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=nt.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];kt.spans(n,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||ch(this.heightMap.lineAt(e,$t.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||ch(this.heightMap.lineAt(this.scaler.fromDOM(e),$t.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return ch(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let yg=class{constructor(e,n){this.from=e,this.to=n}};function Vee(t,e,n){let i=[],r=t,s=0;return kt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function bg({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function xg(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function Hee(t,e){for(let n of t)if(e(n))return n}const G4={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class BC{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,$t.ByPos,e,0,0).top,u=n.lineAt(l,$t.ByPos,e,0,0).bottom;return r+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof BC?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function ch(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Ks(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>ch(r,e)):t._content)}const wg=Ee.define({combine:t=>t.join(" ")}),z2=Ee.define({combine:t=>t.indexOf(!0)>-1}),U2=yl.newName(),B8=yl.newName(),z8=yl.newName(),U8={"&light":"."+B8,"&dark":"."+z8};function V2(t,e,n){return new yl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const Wee=V2("."+U2,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},U8),Gee={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},yw=_e.ie&&_e.ie_version<=11;class Kee{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new NQ,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(_e.ie&&_e.ie_version<=11||_e.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&_e.android&&e.constructor.EDIT_CONTEXT!==!1&&!(_e.chrome&&_e.chrome_version<126)&&(this.editContext=new Yee(e),e.state.facet(zo)&&(e.contentDOM.editContext=this.editContext.editContext)),yw&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(zo)?i.root.activeElement!=this.dom:!_0(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(_e.ie&&_e.ie_version<=11||_e.android&&_e.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Th(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ep(e.root);if(!n)return!1;let i=_e.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&qee(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=_0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&MQ(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Gee),yw&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),yw&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&sd(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&_0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new dee(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=M8(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=K4(n,e.previousSibling||e.target.previousSibling,-1),r=K4(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(zo)!=e.state.facet(zo)&&(e.view.contentDOM.editContext=e.state.facet(zo)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function K4(t,e,n){for(;e;){let i=Ot.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function q4(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return Th(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function qee(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return q4(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?q4(t,n):null}class Yee{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:gt.of(i.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=re.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(r)||e.dispatch({selection:u,userEvent:"select"});return}if((_e.mac||_e.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:gt.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);$C(e,c,re.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(nt.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:k8.of(nt.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Ep(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(i)return;let u=c.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(c)){r=this.pendingContextChange=null,n+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Re{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||PQ(e.parent)||document,this.viewState=new W4(e.state||ut.create(e)),e.scrollTo&&e.scrollTo.is(mg)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Hu).map(r=>new pw(r));for(let r of this.plugins)r.update(this);this.observer=new Kee(this),this.inputState=new gee(this),this.inputState.ensureHandlers(this.plugins),this.docView=new E4(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof An?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(L8))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=D8(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(ut.phrases)!=this.state.facet(ut.phrases))return this.setState(s);r=zv.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new od(p.empty?p:re.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(mg)&&(d=p.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=Vv.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(ah)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(wg)!=r.state.facet(wg)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(D2))try{f(r)}catch(p){fr(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!M8(this,u)&&c.force&&sd(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new W4(e),this.plugins=e.facet(Hu).map(i=>new pw(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new E4(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Hu),i=e.state.facet(Hu);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new pw(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){fr(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(JD(i))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return fr(this.state,g),Y4}}),d=zv.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=Y4)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){fr(this.state,g)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(g>1||g<-1){r=r+g,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(D2))a(n)}get themeClasses(){return U2+" "+(this.state.facet(z2)?z8:B8)+" "+this.state.facet(wg)}updateAttrs(){let e=X4(this,_8,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(zo)?"true":"false",class:"cm-content",style:`${_e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),X4(this,jC,n);let i=this.observer.ignore(()=>{let r=T2(this.contentDOM,this.contentAttrs,n),s=T2(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Re.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(ah);let e=this.state.facet(Re.cspNonce);yl.mount(this.root,this.styleModules.concat(Wee).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return gw(this,e,R4(this,e,n,i))}moveByGroup(e,n){return gw(this,e,R4(this,e,n,i=>aee(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return re.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return oee(this,e,n,i)}moveVertically(e,n,i){return gw(this,e,lee(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),P8(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[za.find(s,e-r.from,-1,n)];return cb(i,o.dir==Vt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(x8)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Xee)return f8(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||d8(s.isolates,i=C4(this,e))))return s.order;i||(i=C4(this,e));let r=HQ(e.text,n,i);return this.bidiCache.push(new Vv(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||_e.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{YD(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return mg.of(new od(typeof e=="number"?re.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return mg.of(new od(re.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ti.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ti.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=yl.newName(),r=[wg.of(i),ah.of(V2(`.${i}`,e))];return n&&n.dark&&r.push(z2.of(!0)),r}static baseTheme(e){return um.lowest(ah.of(V2("."+U2,e,U8)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Ot.get(i)||Ot.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Re.styleModule=ah;Re.inputHandler=y8;Re.clipboardInputFilter=OC;Re.clipboardOutputFilter=IC;Re.scrollHandler=S8;Re.focusChangeEffect=b8;Re.perLineTextDirection=x8;Re.exceptionSink=v8;Re.updateListener=D2;Re.editable=zo;Re.mouseSelectionStyle=g8;Re.dragMovesSelection=m8;Re.clickAddsSelectionRange=p8;Re.decorations=Np;Re.outerDecorations=C8;Re.atomicRanges=LC;Re.bidiIsolatedRanges=E8;Re.scrollMargins=A8;Re.darkTheme=z2;Re.cspNonce=Ee.define({combine:t=>t.length?t[0]:""});Re.contentAttributes=jC;Re.editorAttributes=_8;Re.lineWrapping=Re.contentAttributes.of({class:"cm-lineWrapping"});Re.announce=tt.define();const Xee=4096,Y4={};class Vv{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Vt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new Vv(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function X4(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&R2(o,n)}return n}const Jee=_e.mac?"mac":_e.windows?"win":_e.linux?"linux":"key";function Zee(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Sg(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Qee=um.default(Re.domEventHandlers({keydown(t,e){return W8(H8(e.state),t,e,"editor")}})),V8=Ee.define({enables:Qee}),J4=new WeakMap;function H8(t){let e=t.facet(V8),n=J4.get(e);return n||J4.set(e,n=nte(e.reduce((i,r)=>i.concat(r),[]))),n}function ete(t,e,n){return W8(H8(t.state),e,t,n)}let Ra=null;const tte=4e3;function nte(t,e=Jee){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let p=n[o]||(n[o]=Object.create(null)),g=a.split(/ (?!$)/).map(y=>Zee(y,e));for(let y=1;y<g.length;y++){let x=g.slice(0,y).join(" ");r(x,!0),p[x]||(p[x]={preventDefault:!0,stopPropagation:!1,run:[w=>{let S=Ra={view:w,prefix:x,scope:o};return setTimeout(()=>{Ra==S&&(Ra=null)},tte),!0}]})}let m=g.join(" ");r(m,!1);let v=p[m]||(p[m]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&v.run.push(l),c&&(v.preventDefault=!0),u&&(v.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in u)u[f].run.push(p=>d(p,H2))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let H2=null;function W8(t,e,n,i){H2=e;let r=_Q(e),s=jr(r,0),o=Bo(s)==r.length&&r!=" ",a="",l=!1,c=!1,u=!1;Ra&&Ra.view==n&&Ra.scope==i&&(a=Ra.prefix+" ",T8.indexOf(e.keyCode)<0&&(c=!0,Ra=null));let d=new Set,f=v=>{if(v){for(let y of v.run)if(!d.has(y)&&(d.add(y),y(n)))return v.stopPropagation&&(u=!0),!0;v.preventDefault&&(v.stopPropagation&&(u=!0),c=!0)}return!1},p=t[i],g,m;return p&&(f(p[a+Sg(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(_e.windows&&e.ctrlKey&&e.altKey)&&(g=bl[e.keyCode])&&g!=r?(f(p[a+Sg(g,e,!0)])||e.shiftKey&&(m=Cp[e.keyCode])!=r&&m!=g&&f(p[a+Sg(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(p[a+Sg(r,e,!0)])&&(l=!0),!l&&f(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),H2=null,l}class mm{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=G8(e);return[new mm(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return ite(e,n,i)}}function G8(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Vt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function Z4(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function ite(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Vt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=G8(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),p=F2(t,i,1),g=F2(t,r,-1),m=p.type==wi.Text?p:null,v=g.type==wi.Text?g:null;if(m&&(t.lineWrapping||p.widgetLineBreaks)&&(m=Z4(t,i,1,m)),v&&(t.lineWrapping||g.widgetLineBreaks)&&(v=Z4(t,r,-1,v)),m&&v&&m.from==v.from&&m.to==v.to)return x(w(n.from,n.to,m));{let _=m?w(n.from,null,m):S(p,!1),E=v?w(null,n.to,v):S(g,!0),C=[];return(m||p).to<(v||g).from-(m&&v?1:0)||p.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<E.top?C.push(y(d,_.bottom,f,E.top)):_.bottom<E.top&&t.elementAtHeight((_.bottom+E.top)/2).type==wi.Text&&(_.bottom=E.top=(_.bottom+E.top)/2),x(_).concat(C).concat(x(E))}function y(_,E,C,N){return new mm(e,_-l.left,E-l.top,C-_,N-E)}function x({top:_,bottom:E,horizontal:C}){let N=[];for(let M=0;M<C.length;M+=2)N.push(y(C[M],_,C[M+1],E));return N}function w(_,E,C){let N=1e9,M=-1e9,I=[];function O(D,K,X,te,U){let B=t.coordsAtPos(D,D==C.to?-2:2),ie=t.coordsAtPos(X,X==C.from?2:-2);!B||!ie||(N=Math.min(B.top,ie.top,N),M=Math.max(B.bottom,ie.bottom,M),U==Vt.LTR?I.push(s&&K?d:B.left,s&&te?f:ie.right):I.push(!s&&te?d:ie.left,!s&&K?f:B.right))}let T=_??C.from,H=E??C.to;for(let D of t.visibleRanges)if(D.to>T&&D.from<H)for(let K=Math.max(D.from,T),X=Math.min(D.to,H);;){let te=t.state.doc.lineAt(K);for(let U of t.bidiSpans(te)){let B=U.from+te.from,ie=U.to+te.from;if(B>=X)break;ie>K&&O(Math.max(B,K),_==null&&B<=T,Math.min(ie,X),E==null&&ie>=H,U.dir)}if(K=te.to+1,K>=X)break}return I.length==0&&O(T,_==null,H,E==null,t.textDirection),{top:N,bottom:M,horizontal:I}}function S(_,E){let C=a.top+(E?_.top:_.bottom);return{top:C,bottom:C,horizontal:[]}}}function rte(t,e){return t.constructor==e.constructor&&t.eq(e)}class ste{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(N0)!=e.state.facet(N0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(N0);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!rte(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const N0=Ee.define();function K8(t){return[ti.define(e=>new ste(e,t)),N0.of(t)]}const Pp=Ee.define({combine(t){return Rl(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function ote(t={}){return[Pp.of(t),ate,lte,cte,w8.of(!0)]}function q8(t){return t.startState.facet(Pp)!=t.state.facet(Pp)}const ate=K8({above:!0,markers(t){let{state:e}=t,n=e.facet(Pp),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:re.cursor(r.head,r.head>r.anchor?-1:1);for(let l of mm.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=q8(t);return n&&Q4(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){Q4(e.state,t)},class:"cm-cursorLayer"});function Q4(t,e){e.style.animationDuration=t.facet(Pp).cursorBlinkRate+"ms"}const lte=K8({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:mm.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||q8(t)},class:"cm-selectionLayer"}),cte=um.highest(Re.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function eM(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function ute(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class dte{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,c,u)=>r(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let d=i(a,l,c);d&&u(c,c+a[0].length,d)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new vl,i=n.add.bind(n);for(let{from:r,to:s}of ute(e,this.maxLength))eM(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],p,g=(m,v,y)=>f.push(y.range(m,v));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,g);else eM(e.state.doc,this.regexp,u,d,(m,v)=>this.addMatch(v,e,m,g));n=n.update({filterFrom:u,filterTo:d,filter:(m,v)=>m<u||v>d,add:f})}}return n}}const W2=/x/.unicode!=null?"gu":"g",fte=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,W2),hte={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let bw=null;function pte(){var t;if(bw==null&&typeof document<"u"&&document.body){let e=document.body.style;bw=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return bw||!1}const P0=Ee.define({combine(t){let e=Rl(t,{render:null,specialChars:fte,addSpecialChars:null});return(e.replaceTabs=!pte())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,W2)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,W2)),e}});function mte(t={}){return[P0.of(t),gte()]}let tM=null;function gte(){return tM||(tM=ti.fromClass(class{constructor(t){this.view=t,this.decorations=nt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(P0)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new dte({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=jr(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=fm(o.text,a,i-o.from);return nt.replace({widget:new xte((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=nt.replace({widget:new bte(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(P0);t.startState.facet(P0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const vte="";function yte(t){return t>=32?vte:t==10?"":String.fromCharCode(9216+t)}class bte extends Tl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=yte(this.code),i=e.state.phrase("Control character")+" "+(hte[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class xte extends Tl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function wte(){return kte}const Ste=nt.line({class:"cm-activeLine"}),kte=ti.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(Ste.range(r.from)),e=r.from)}return nt.set(n)}},{decorations:t=>t.decorations}),Mf="-10000px";class Y8{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function _te(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const xw=Ee.define({combine:t=>{var e,n,i;return{position:_e.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||_te}}}),nM=new WeakMap,zC=ti.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(xw);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Y8(t,UC,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(xw);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=Mf,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(_e.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Mf&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=DC(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(xw).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){u.style.top=Mf;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,m=f.right-f.left,v=(e=nM.get(c))!==null&&e!==void 0?e:f.bottom-f.top,y=c.offset||Ete,x=this.view.textDirection==Vt.LTR,w=f.width>i.right-i.left?x?i.left:i.right-f.width:x?Math.max(i.left,Math.min(d.left-(p?14:0)+y.x,i.right-m)):Math.min(Math.max(i.left,d.left-m+(p?14:0)-y.x),i.right-m),S=this.above[a];!l.strictSide&&(S?d.top-v-g-y.y<i.top:d.bottom+v+g+y.y>i.bottom)&&S==i.bottom-d.bottom>d.top-i.top&&(S=this.above[a]=!S);let _=(S?d.top-i.top:i.bottom-d.bottom)-g;if(_<v&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=Mf;continue}nM.set(c,v),u.style.height=(v=_)/s+"px"}else u.style.height&&(u.style.height="");let E=S?d.top-v-g-y.y:d.bottom+g+y.y,C=w+m;if(c.overlap!==!0)for(let N of o)N.left<C&&N.right>w&&N.top<E+v&&N.bottom>E&&(E=S?N.top-v-2-g:N.bottom+g+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/s+"px",iM(u,(w-t.parent.left)/r)):(u.style.top=E/s+"px",iM(u,w/r)),p){let N=d.left+(x?y.x:-y.x)-(w+14-7);p.style.left=N/r+"px"}c.overlap!==!0&&o.push({left:w,top:E,right:C,bottom:E+v}),u.classList.toggle("cm-tooltip-above",S),u.classList.toggle("cm-tooltip-below",!S),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Mf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function iM(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const Cte=Re.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Ete={x:0,y:0},UC=Ee.define({enables:[zC,Cte]}),Hv=Ee.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class fb{static create(e){return new fb(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Y8(e,Hv,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Ate=UC.compute([Hv],t=>{let e=t.facet(Hv);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:fb.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class Nte{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Ba)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==Vt.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>fr(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(zC),n=e?e.manager.tooltips.findIndex(i=>i.create==fb.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!Pte(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!Mte(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const kg=4;function Pte(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-kg&&e.clientX<=i+kg&&e.clientY>=r-kg&&e.clientY<=s+kg}function Mte(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function Rte(t,e={}){let n=tt.define(),i=Ei.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,Vi.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(Ote)&&(r=[]);return r},provide:r=>Hv.from(r)});return{active:i,extension:[i,ti.define(r=>new Nte(r,t,i,n,e.hoverTime||300)),Ate]}}function Tte(t,e){let n=t.plugin(zC);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const Ote=tt.define(),rM=Ee.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Mp(t,e){let n=t.plugin(X8),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const X8=ti.fromClass(class{constructor(t){this.input=t.state.facet(Rp),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(rM);this.top=new _g(t,!0,e.topContainer),this.bottom=new _g(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(rM);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new _g(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new _g(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Rp);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class _g{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=sM(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=sM(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function sM(t){let e=t.nextSibling;return t.remove(),e}const Rp=Ee.define({enables:X8});class wl extends Dc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}wl.prototype.elementClass="";wl.prototype.toDOM=void 0;wl.prototype.mapMode=Vi.TrackBefore;wl.prototype.startSide=wl.prototype.endSide=-1;wl.prototype.point=!0;const M0=Ee.define(),Ite=Ee.define(),R0=Ee.define(),oM=Ee.define({combine:t=>t.some(e=>e)});function jte(t){return[Lte]}const Lte=ti.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(R0).map(e=>new lM(t,e)),this.fixed=!t.state.facet(oM);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(oM)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=kt.iter(this.view.state.facet(M0),this.view.viewport.from),i=[],r=this.gutters.map(s=>new Dte(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==wi.Text&&o){G2(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==wi.Text){G2(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(R0),n=t.state.facet(R0),i=t.docChanged||t.heightChanged||t.viewportChanged||!kt.eq(t.startState.facet(M0),t.state.facet(M0),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new lM(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Vt.LTR?{left:i,right:r}:{right:i,left:r}})});function aM(t){return Array.isArray(t)?t:[t]}function G2(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Dte{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=kt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new J8(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];G2(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(Ite)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class lM{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=aM(n.markers(e)),n.initialSpacer&&(this.spacer=new J8(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=aM(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!kt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class J8{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),$te(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function $te(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const Fte=Ee.define(),Bte=Ee.define(),Wu=Ee.define({combine(t){return Rl(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class ww extends wl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Sw(t,e){return t.state.facet(Wu).formatNumber(e,t.state)}const zte=R0.compute([Wu],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Fte)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new ww(Sw(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(Bte)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Wu)!=e.state.facet(Wu),initialSpacer(e){return new ww(Sw(e,cM(e.state.doc.lines)))},updateSpacer(e,n){let i=Sw(n.view,cM(n.view.state.doc.lines));return i==e.number?e:new ww(i)},domEventHandlers:t.facet(Wu).domEventHandlers,side:"before"}));function Ute(t={}){return[Wu.of(t),jte(),zte]}function cM(t){let e=9;for(;e<t;)e=e*10+9;return e}const Vte=new class extends wl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Hte=M0.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(Vte.range(r)))}return kt.of(e)});function Wte(){return Hte}const Z8=new dm;function Gte(t){window.codemirror&&window.codemirror.dispatch({effects:Z8.reconfigure(ut.readOnly.of(t))})}const Q8=tt.define(),K2=tt.define(),Kte=Ei.define({create(){return nt.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(Q8)&&(n=nt.none,i.value!==null&&(n=n.update({add:[qte.range(i.value)]}))),i.is(K2)&&(n=nt.none,i.value!==null&&(n=n.update({add:[Yte.range(i.value)]})));return n},provide:t=>Re.decorations.from(t)}),qte=nt.line({class:"!bg-gradient-to-r !from-mantis-500/8 !via-mantis-500/5 !to-transparent !border-l-2 !border-mantis-400/40 !shadow-sm"}),Yte=nt.line({class:"cm-current-instruction"});function Xte(t){window.codemirror&&window.codemirror.dispatch({effects:Q8.of(null)})}function e6(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:K2.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:K2.of(e)})}}const Wv=ue(!1),t6=Na.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Na,Jte=1,uM=5e3,Ls=new Map,Ih=[];function Zte(){let t=0;for(const e of Ls.keys())e>t&&(t=e);return t+1}function Qte(){let t=1/0;for(const e of Ls.keys())e<t&&(t=e);return t}function Ua(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??uM,s=Number.isFinite(r)?setTimeout(()=>Ua({type:"DISMISS_TOAST",toastId:n}),r):null;Ls.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Ua({type:"DISMISS_TOAST",toastId:n})}}}),Ls.size>Jte&&Ua({type:"DISMISS_TOAST",toastId:Qte()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=Ls.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??uM,o=Number.isFinite(s)?setTimeout(()=>Ua({type:"DISMISS_TOAST",toastId:n}),s):null;Ls.set(n,{...r,...i,timeout:o})}else Ls.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=Ls.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),Ls.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&Ih.length>0){const n=Array.from(Ls.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of Ih)i(n)}}function $i(t){const e=Zte(),n=r=>Ua({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>Ua({type:"DISMISS_TOAST",toastId:e});return Ua({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function ene(){const[t,e]=b.useState([]);return b.useEffect(()=>(Ih.push(e),()=>{const n=Ih.indexOf(e);n>-1&&Ih.splice(n,1)}),[]),{toastList:t,toast:$i,dismiss:n=>Ua({type:"DISMISS_TOAST",toastId:n})}}var VC=vm(),Ze=t=>gm(t,VC),HC=vm();Ze.write=t=>gm(t,HC);var hb=vm();Ze.onStart=t=>gm(t,hb);var WC=vm();Ze.onFrame=t=>gm(t,WC);var GC=vm();Ze.onFinish=t=>gm(t,GC);var ad=[];Ze.setTimeout=(t,e)=>{const n=Ze.now()+e,i=()=>{const s=ad.findIndex(o=>o.cancel==i);~s&&ad.splice(s,1),Ha-=~s?1:0},r={time:n,handler:t,cancel:i};return ad.splice(n6(n),0,r),Ha+=1,i6(),r};var n6=t=>~(~ad.findIndex(e=>e.time>t)||~ad.length);Ze.cancel=t=>{hb.delete(t),WC.delete(t),GC.delete(t),VC.delete(t),HC.delete(t)};Ze.sync=t=>{q2=!0,Ze.batchedUpdates(t),q2=!1};Ze.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Ze.onStart(n)}return i.handler=t,i.cancel=()=>{hb.delete(n),e=null},i};var KC=typeof window<"u"?window.requestAnimationFrame:()=>{};Ze.use=t=>KC=t;Ze.now=typeof performance<"u"?()=>performance.now():Date.now;Ze.batchedUpdates=t=>t();Ze.catch=console.error;Ze.frameLoop="always";Ze.advance=()=>{Ze.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):s6()};var Va=-1,Ha=0,q2=!1;function gm(t,e){q2?(e.delete(t),t(0)):(e.add(t),i6())}function i6(){Va<0&&(Va=0,Ze.frameLoop!=="demand"&&KC(r6))}function tne(){Va=-1}function r6(){~Va&&(KC(r6),Ze.batchedUpdates(s6))}function s6(){const t=Va;Va=Ze.now();const e=n6(Va);if(e&&(o6(ad.splice(0,e),n=>n.handler()),Ha-=e),!Ha){tne();return}hb.flush(),VC.flush(t?Math.min(64,Va-t):16.667),WC.flush(),HC.flush(),GC.flush()}function vm(){let t=new Set,e=t;return{add(n){Ha+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Ha-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Ha-=e.size,o6(e,i=>i(n)&&t.add(i)),Ha+=t.size,e=t)}}}function o6(t,e){t.forEach(n=>{try{e(n)}catch(i){Ze.catch(i)}})}var nne=Object.defineProperty,ine=(t,e)=>{for(var n in e)nne(t,n,{get:e[n],enumerable:!0})},Ss={};ine(Ss,{assign:()=>sne,colors:()=>sl,createStringInterpolator:()=>YC,skipAnimation:()=>l6,to:()=>a6,willAdvance:()=>XC});function Y2(){}var rne=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),de={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function _o(t,e){if(de.arr(t)){if(!de.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var dt=(t,e)=>t.forEach(e);function ho(t,e,n){if(de.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var hr=t=>de.und(t)?[]:de.arr(t)?t:[t];function jh(t,e){if(t.size){const n=Array.from(t);t.clear(),dt(n,e)}}var uh=(t,...e)=>jh(t,n=>n(...e)),qC=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),YC,a6,sl=null,l6=!1,XC=Y2,sne=t=>{t.to&&(a6=t.to),t.now&&(Ze.now=t.now),t.colors!==void 0&&(sl=t.colors),t.skipAnimation!=null&&(l6=t.skipAnimation),t.createStringInterpolator&&(YC=t.createStringInterpolator),t.requestAnimationFrame&&Ze.use(t.requestAnimationFrame),t.batchedUpdates&&(Ze.batchedUpdates=t.batchedUpdates),t.willAdvance&&(XC=t.willAdvance),t.frameLoop&&(Ze.frameLoop=t.frameLoop)},Lh=new Set,Dr=[],kw=[],Gv=0,pb={get idle(){return!Lh.size&&!Dr.length},start(t){Gv>t.priority?(Lh.add(t),Ze.onStart(one)):(c6(t),Ze(X2))},advance:X2,sort(t){if(Gv)Ze.onFrame(()=>pb.sort(t));else{const e=Dr.indexOf(t);~e&&(Dr.splice(e,1),u6(t))}},clear(){Dr=[],Lh.clear()}};function one(){Lh.forEach(c6),Lh.clear(),Ze(X2)}function c6(t){Dr.includes(t)||u6(t)}function u6(t){Dr.splice(ane(Dr,e=>e.priority>t.priority),0,t)}function X2(t){const e=kw;for(let n=0;n<Dr.length;n++){const i=Dr[n];Gv=i.priority,i.idle||(XC(i),i.advance(t),i.idle||e.push(i))}return Gv=0,kw=Dr,kw.length=0,Dr=e,Dr.length>0}function ane(t,e){const n=t.findIndex(e);return n<0?t.length:n}var lne=(t,e,n)=>Math.min(Math.max(n,t),e),cne={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ps="[-+]?\\d*\\.?\\d+",Kv=ps+"%";function mb(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var une=new RegExp("rgb"+mb(ps,ps,ps)),dne=new RegExp("rgba"+mb(ps,ps,ps,ps)),fne=new RegExp("hsl"+mb(ps,Kv,Kv)),hne=new RegExp("hsla"+mb(ps,Kv,Kv,ps)),pne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,mne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,gne=/^#([0-9a-fA-F]{6})$/,vne=/^#([0-9a-fA-F]{8})$/;function yne(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=gne.exec(t))?parseInt(e[1]+"ff",16)>>>0:sl&&sl[t]!==void 0?sl[t]:(e=une.exec(t))?(lu(e[1])<<24|lu(e[2])<<16|lu(e[3])<<8|255)>>>0:(e=dne.exec(t))?(lu(e[1])<<24|lu(e[2])<<16|lu(e[3])<<8|hM(e[4]))>>>0:(e=pne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=vne.exec(t))?parseInt(e[1],16)>>>0:(e=mne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=fne.exec(t))?(dM(fM(e[1]),Cg(e[2]),Cg(e[3]))|255)>>>0:(e=hne.exec(t))?(dM(fM(e[1]),Cg(e[2]),Cg(e[3]))|hM(e[4]))>>>0:null}function _w(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function dM(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=_w(r,i,t+1/3),o=_w(r,i,t),a=_w(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function lu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function fM(t){return(parseFloat(t)%360+360)%360/360}function hM(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Cg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function pM(t){let e=yne(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Tp=(t,e,n)=>{if(de.fun(t))return t;if(de.arr(t))return Tp({range:t,output:e,extrapolate:n});if(de.str(t.output[0]))return YC(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=xne(c,s);return bne(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function bne(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function xne(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var wne=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return lne(0,1,r/t)},qv=1.70158,Eg=qv*1.525,mM=qv+1,gM=2*Math.PI/3,vM=2*Math.PI/4.5,Ag=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,d6={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>mM*t*t*t-qv*t*t,easeOutBack:t=>1+mM*Math.pow(t-1,3)+qv*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Eg+1)*2*t-Eg)/2:(Math.pow(2*t-2,2)*((Eg+1)*(t*2-2)+Eg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*gM),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*gM)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*vM))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*vM)/2+1,easeInBounce:t=>1-Ag(1-t),easeOutBounce:Ag,easeInOutBounce:t=>t<.5?(1-Ag(1-2*t))/2:(1+Ag(2*t-1))/2,steps:wne},Op=Symbol.for("FluidValue.get"),Hd=Symbol.for("FluidValue.observers"),Lr=t=>!!(t&&t[Op]),Fi=t=>t&&t[Op]?t[Op]():t,yM=t=>t[Hd]||null;function Sne(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Ip(t,e){const n=t[Hd];n&&n.forEach(i=>{Sne(i,e)})}var f6=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");kne(this,t)}},kne=(t,e)=>h6(t,Op,e);function sf(t,e){if(t[Op]){let n=t[Hd];n||h6(t,Hd,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function jp(t,e){const n=t[Hd];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Hd]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var h6=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),T0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_ne=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,bM=new RegExp(`(${T0.source})(%|[a-z]+)`,"i"),Cne=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,gb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,p6=t=>{const[e,n]=Ene(t);if(!e||qC())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&gb.test(n))return p6(n);if(n)return n}return t},Ene=t=>{const e=gb.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Cw,Ane=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,m6=t=>{Cw||(Cw=sl?new RegExp(`(${Object.keys(sl).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Fi(s).replace(gb,p6).replace(_ne,pM).replace(Cw,pM)),n=e.map(s=>s.match(T0).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Tp({...t,output:s}));return s=>{var l;const o=!bM.test(e[0])&&((l=e.find(c=>bM.test(c)))==null?void 0:l.replace(T0,""));let a=0;return e[0].replace(T0,()=>`${r[a++](s)}${o||""}`).replace(Cne,Ane)}},JC="react-spring: ",g6=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${JC}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Nne=g6(console.warn);function Pne(){Nne(`${JC}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Mne=g6(console.warn);function Rne(){Mne(`${JC}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function vb(t){return de.str(t)&&(t[0]=="#"||/\d/.test(t)||!qC()&&gb.test(t)||t in(sl||{}))}var ZC=qC()?b.useEffect:b.useLayoutEffect,Tne=()=>{const t=b.useRef(!1);return ZC(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function v6(){const t=b.useState()[1],e=Tne();return()=>{e.current&&t(Math.random())}}function One(t,e){const[n]=b.useState(()=>({inputs:e,result:t()})),i=b.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Ine(e,s.inputs)||(s={inputs:e,result:t()}):s=n,b.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Ine(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var y6=t=>b.useEffect(t,jne),jne=[];function xM(t){const e=b.useRef();return b.useEffect(()=>{e.current=t}),e.current}var Lp=Symbol.for("Animated:node"),Lne=t=>!!t&&t[Lp]===t,Ds=t=>t&&t[Lp],QC=(t,e)=>rne(t,Lp,e),yb=t=>t&&t[Lp]&&t[Lp].getPayload(),b6=class{constructor(){QC(this,this)}getPayload(){return this.payload||[]}},ym=class extends b6{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,de.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new ym(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return de.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,de.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Dp=class extends ym{constructor(t){super(0),this._string=null,this._toString=Tp({output:[t,t]})}static create(t){return new Dp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(de.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Tp({output:[this.getValue(),t]})),this._value=0,super.reset()}},Yv={dependencies:null},bb=class extends b6{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return ho(this.source,(n,i)=>{Lne(n)?e[i]=n.getValue(t):Lr(n)?e[i]=Fi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&dt(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return ho(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Yv.dependencies&&Lr(t)&&Yv.dependencies.add(t);const e=yb(t);e&&dt(e,n=>this.add(n))}},x6=class extends bb{constructor(t){super(t)}static create(t){return new x6(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(Dne)),!0)}};function Dne(t){return(vb(t)?Dp:ym).create(t)}function J2(t){const e=Ds(t);return e?e.constructor:de.arr(t)?x6:vb(t)?Dp:ym}var wM=(t,e)=>{const n=!de.fun(t)||t.prototype&&t.prototype.isReactComponent;return b.forwardRef((i,r)=>{const s=b.useRef(null),o=n&&b.useCallback(g=>{s.current=Bne(r,g)},[r]),[a,l]=Fne(i,e),c=v6(),u=()=>{const g=s.current;if(n&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&c()},d=new $ne(u,l),f=b.useRef();ZC(()=>(f.current=d,dt(l,g=>sf(g,d)),()=>{f.current&&(dt(f.current.deps,g=>jp(g,f.current)),Ze.cancel(f.current.update))})),b.useEffect(u,[]),y6(()=>()=>{const g=f.current;dt(g.deps,m=>jp(m,g))});const p=e.getComponentProps(a.getValue());return b.createElement(t,{...p,ref:o})})},$ne=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ze.write(this.update)}};function Fne(t,e){const n=new Set;return Yv.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new bb(t),Yv.dependencies=null,[t,n]}function Bne(t,e){return t&&(de.fun(t)?t(e):t.current=e),e}var SM=Symbol.for("AnimatedComponent"),zne=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new bb(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=kM(o)||"Anonymous";return de.str(o)?o=s[o]||(s[o]=wM(o,r)):o=o[SM]||(o[SM]=wM(o,r)),o.displayName=`Animated(${a})`,o};return ho(t,(o,a)=>{de.arr(t)&&(a=kM(o)),s[a]=s(o)}),{animated:s}},kM=t=>de.str(t)?t:t&&de.str(t.displayName)?t.displayName:de.fun(t)&&t.name||null;function oc(t,...e){return de.fun(t)?t(...e):t}var Dh=(t,e)=>t===!0||!!(e&&t&&(de.fun(t)?t(e):hr(t).includes(e))),w6=(t,e)=>de.obj(t)?e&&t[e]:t,S6=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Une=t=>t,eE=(t,e=Une)=>{let n=Vne;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);de.und(s)||(i[r]=s)}return i},Vne=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Hne={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Wne(t){const e={};let n=0;if(ho(t,(i,r)=>{Hne[r]||(e[r]=i,n++)}),n)return e}function k6(t){const e=Wne(t);if(e){const n={to:e};return ho(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function $p(t){return t=Fi(t),de.arr(t)?t.map($p):vb(t)?Ss.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Gne(t){for(const e in t)return!0;return!1}function Z2(t){return de.fun(t)||de.arr(t)&&de.obj(t[0])}function Kne(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function qne(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var Yne={default:{tension:170,friction:26}},Q2={...Yne.default,mass:1,damping:1,easing:d6.linear,clamp:!1},Xne=class{constructor(){this.velocity=0,Object.assign(this,Q2)}};function Jne(t,e,n){n&&(n={...n},_M(n,e),e={...n,...e}),_M(t,e),Object.assign(t,e);for(const o in Q2)t[o]==null&&(t[o]=Q2[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return de.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function _M(t,e){if(!de.und(e.decay))t.duration=void 0;else{const n=!de.und(e.tension)||!de.und(e.friction);(n||!de.und(e.frequency)||!de.und(e.damping)||!de.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var CM=[],Zne=class{constructor(){this.changed=!1,this.values=CM,this.toValues=null,this.fromValues=CM,this.config=new Xne,this.immediate=!1}};function _6(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=Dh(n.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{de.und(n.pause)||(r.paused=Dh(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||Dh(g,e)),l=oc(n.delay||0,e),g?(r.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){r.resumeQueue.add(f),r.timeouts.delete(c),c.cancel(),l=c.time-Ze.now()}function f(){l>0&&!Ss.skipAnimation?(r.delayed=!0,c=Ze.setTimeout(p,l),r.pauseQueue.add(d),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(g){a(g)}}})}var tE=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?ld(t.get()):e.every(n=>n.noop)?C6(t.get()):ds(t.get(),e.every(n=>n.finished)),C6=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),ds=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),ld=t=>({value:t,cancelled:!0,finished:!1});function E6(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=eE(e,(v,y)=>y==="onRest"?void 0:v);let u,d;const f=new Promise((v,y)=>(u=v,d=y)),p=v=>{const y=r<=(n.cancelId||0)&&ld(i)||r!==n.asyncId&&ds(i,!1);if(y)throw v.result=y,d(v),v},g=(v,y)=>{const x=new EM,w=new AM;return(async()=>{if(Ss.skipAnimation)throw Fp(n),w.result=ds(i,!1),d(w),w;p(x);const S=de.obj(v)?{...v}:{...y,to:v};S.parentId=r,ho(c,(E,C)=>{de.und(S[C])&&(S[C]=E)});const _=await i.start(S);return p(x),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),_})()};let m;if(Ss.skipAnimation)return Fp(n),ds(i,!1);try{let v;de.arr(t)?v=(async y=>{for(const x of y)await g(x)})(t):v=Promise.resolve(t(g,i.stop.bind(i))),await Promise.all([v.then(u),f]),m=ds(i.get(),!0,!1)}catch(v){if(v instanceof EM)m=v.result;else if(v instanceof AM)m=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return de.fun(o)&&Ze.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function Fp(t,e){jh(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var EM=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},AM=class extends Error{constructor(){super("SkipAnimationSignal")}},ek=t=>t instanceof nE,Qne=1,nE=class extends f6{constructor(){super(...arguments),this.id=Qne++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ds(this);return t&&t.getValue()}to(...t){return Ss.to(this,t)}interpolate(...t){return Pne(),Ss.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Ip(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||pb.sort(this),Ip(this,{type:"priority",parent:this,priority:t})}},zc=Symbol.for("SpringPhase"),A6=1,tk=2,nk=4,Ew=t=>(t[zc]&A6)>0,va=t=>(t[zc]&tk)>0,Rf=t=>(t[zc]&nk)>0,NM=(t,e)=>e?t[zc]|=tk|A6:t[zc]&=~tk,PM=(t,e)=>e?t[zc]|=nk:t[zc]&=~nk,We=class extends nE{constructor(t,e){if(super(),this.animation=new Zne,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!de.und(t)||!de.und(e)){const n=de.obj(t)?{...t}:{...e,from:t};de.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(va(this)||this._state.asyncTo)||Rf(this)}get goal(){return Fi(this.animation.to)}get velocity(){const t=Ds(this);return t instanceof ym?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Ew(this)}get isAnimating(){return va(this)}get isPaused(){return Rf(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=yb(i.to);!o&&Lr(i.to)&&(r=hr(Fi(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==Dp?1:o?o[u].lastPosition:r[u];let f=i.immediate,p=d;if(!f){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let g=c.elapsedTime+=t;const m=i.fromValues[u],v=c.v0!=null?c.v0:c.v0=de.arr(s.velocity)?s.velocity[u]:s.velocity;let y;const x=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(de.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,S=Math.exp(-(1-w)*g);p=m+v/(1-w)*(1-S),f=Math.abs(c.lastPosition-p)<=x,y=v*S}else{y=c.lastVelocity==null?v:c.lastVelocity;const w=s.restVelocity||x/10,S=s.clamp?0:s.bounce,_=!de.und(S),E=m==d?c.v0>0:m<d;let C,N=!1;const M=1,I=Math.ceil(t/M);for(let O=0;O<I&&(C=Math.abs(y)>w,!(!C&&(f=Math.abs(d-p)<=x,f)));++O){_&&(N=p==d||p>d==E,N&&(y=-y*S,p=d));const T=-s.tension*1e-6*(p-d),H=-s.friction*.001*y,D=(T+H)/s.mass;y=y+D*M,p=p+y*M}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,g=c.elapsedTime+=t)),w=(s.progress||0)+g/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),p=m+s.easing(w)*(d-m),y=(p-c.lastPosition)/t,f=w==1}c.lastVelocity=y,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(p,s.round)&&(n=!0)});const a=Ds(this),l=a.getValue();if(e){const c=Fi(i.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ze.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(va(this)){const{to:t,config:e}=this.animation;Ze.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return de.und(t)?(n=this.queue||[],this.queue=[]):n=[de.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>tE(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Fp(this._state,t&&this._lastCallId),Ze.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=de.obj(n)?n[e]:n,(n==null||Z2(n))&&(n=void 0),i=de.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return Ew(this)||(t.reverse&&([n,i]=[i,n]),i=Fi(i),de.und(i)?Ds(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,eE(t,(o,a)=>/^on/.test(a)?w6(o,n):o)),RM(this,t,"onProps"),Of(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return _6(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Rf(this)||(PM(this,!0),uh(s.pauseQueue),Of(this,"onPause",ds(this,Tf(this,this.animation.to)),this))},resume:()=>{Rf(this)&&(PM(this,!1),va(this)&&this._resume(),uh(s.resumeQueue),Of(this,"onResume",ds(this,Tf(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=N6(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(ld(this));const i=!de.und(t.to),r=!de.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(ld(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;r&&!i&&(!e.default||de.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!_o(d,c);f&&(a.from=d),d=Fi(d);const p=!_o(u,l);p&&this._focus(u);const g=Z2(e.to),{config:m}=a,{decay:v,velocity:y}=m;(i||r)&&(m.velocity=0),e.config&&!g&&Jne(m,oc(e.config,s),e.config!==o.config?oc(o.config,s):void 0);let x=Ds(this);if(!x||de.und(u))return n(ds(this,!0));const w=de.und(e.reset)?r&&!e.default:!de.und(d)&&Dh(e.reset,s),S=w?d:this.get(),_=$p(u),E=de.num(_)||de.arr(_)||vb(_),C=!g&&(!E||Dh(o.immediate||e.immediate,s));if(p){const O=J2(u);if(O!==x.constructor)if(C)x=this._set(_);else throw Error(`Cannot animate between ${x.constructor.name} and ${O.name}, as the "to" prop suggests`)}const N=x.constructor;let M=Lr(u),I=!1;if(!M){const O=w||!Ew(this)&&f;(p||O)&&(I=_o($p(S),_),M=!I),(!_o(a.immediate,C)&&!C||!_o(m.decay,v)||!_o(m.velocity,y))&&(M=!0)}if(I&&va(this)&&(a.changed&&!w?M=!0:M||this._stop(l)),!g&&((M||Lr(l))&&(a.values=x.getPayload(),a.toValues=Lr(u)?null:N==Dp?[1]:hr(_)),a.immediate!=C&&(a.immediate=C,!C&&!w&&this._set(l)),M)){const{onRest:O}=a;dt(tie,H=>RM(this,e,H));const T=ds(this,Tf(this,l));uh(this._pendingCalls,T),this._pendingCalls.add(n),a.changed&&Ze.batchedUpdates(()=>{var H;a.changed=!w,O==null||O(T,this),w?oc(o.onRest,T):(H=a.onStart)==null||H.call(a,T,this)})}w&&this._set(S),g?n(E6(e.to,e,this._state,this)):M?this._start():va(this)&&!p?this._pendingCalls.add(n):n(C6(S))}_focus(t){const e=this.animation;t!==e.to&&(yM(this)&&this._detach(),e.to=t,yM(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Lr(e)&&(sf(e,this),ek(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Lr(t)&&jp(t,this)}_set(t,e=!0){const n=Fi(t);if(!de.und(n)){const i=Ds(this);if(!i||!_o(n,i.getValue())){const r=J2(n);!i||i.constructor!=r?QC(this,r.create(n)):i.setValue(n),i&&Ze.batchedUpdates(()=>{this._onChange(n,e)})}}return Ds(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Of(this,"onStart",ds(this,Tf(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),oc(this.animation.onChange,t,this)),oc(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ds(this).reset(Fi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),va(this)||(NM(this,!0),Rf(this)||this._resume())}_resume(){Ss.skipAnimation?this.finish():pb.start(this)}_stop(t,e){if(va(this)){NM(this,!1);const n=this.animation;dt(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ip(this,{type:"idle",parent:this});const i=e?ld(this.get()):ds(this.get(),Tf(this,t??n.to));uh(this._pendingCalls,i),n.changed&&(n.changed=!1,Of(this,"onRest",i,this))}}};function Tf(t,e){const n=$p(e),i=$p(t.get());return _o(i,n)}function N6(t,e=t.loop,n=t.to){const i=oc(e);if(i){const r=i!==!0&&k6(i),s=(r||t).reverse,o=!r||r.reset;return Bp({...t,loop:e,default:!1,pause:void 0,to:!s||Z2(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function Bp(t){const{to:e,from:n}=t=k6(t),i=new Set;return de.obj(e)&&MM(e,i),de.obj(n)&&MM(n,i),t.keys=i.size?Array.from(i):null,t}function eie(t){const e=Bp(t);return de.und(e.default)&&(e.default=eE(e)),e}function MM(t,e){ho(t,(n,i)=>n!=null&&e.add(i))}var tie=["onStart","onRest","onChange","onPause","onResume"];function RM(t,e,n){t.animation[n]=e[n]!==S6(e,n)?w6(e[n],t.key):void 0}function Of(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var nie=["onStart","onChange","onRest"],iie=1,rie=class{constructor(t,e){this.id=iie++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];de.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Bp(t)),this}start(t){let{queue:e}=this;return t?e=hr(t).map(Bp):this.queue=[],this._flush?this._flush(this,e):(O6(this,e),ik(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;dt(hr(e),i=>n[i].stop(!!t))}else Fp(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(de.und(t))this.start({pause:!0});else{const e=this.springs;dt(hr(t),n=>e[n].pause())}return this}resume(t){if(de.und(t))this.start({pause:!1});else{const e=this.springs;dt(hr(t),n=>e[n].resume())}return this}each(t){ho(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,jh(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&jh(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,jh(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Ze.onFrame(this._onFrame)}};function ik(t,e){return Promise.all(e.map(n=>P6(t,n))).then(n=>tE(t,n))}async function P6(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=de.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=de.arr(r)||de.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):dt(nie,m=>{const v=e[m];if(de.fun(v)){const y=t._events[m];e[m]=({finished:x,cancelled:w})=>{const S=y.get(v);S?(x||(S.finished=!1),w&&(S.cancelled=!0)):y.set(v,{value:null,finished:x||!1,cancelled:w||!1})},c&&(c[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,uh(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const f=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),p=e.cancel===!0||S6(e,"cancel")===!0;(u||p&&d.asyncId)&&f.push(_6(++t._lastAsyncId,{props:e,state:d,actions:{pause:Y2,resume:Y2,start(m,v){p?(Fp(d,t._lastAsyncId),v(ld(t))):(m.onRest=a,v(E6(u,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const g=tE(t,await Promise.all(f));if(o&&g.finished&&!(n&&g.noop)){const m=N6(e,o,r);if(m)return O6(t,[m]),P6(t,m,!0)}return l&&Ze.batchedUpdates(()=>l(g,t,t.item)),g}function TM(t,e){const n={...t.springs};return e&&dt(hr(e),i=>{de.und(i.keys)&&(i=Bp(i)),de.obj(i.to)||(i={...i,to:void 0}),T6(n,i,r=>R6(r))}),M6(t,n),n}function M6(t,e){ho(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,sf(n,t))})}function R6(t,e){const n=new We;return n.key=t,e&&sf(n,e),n}function T6(t,e,n){e.keys&&dt(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function O6(t,e){dt(e,n=>{T6(t.springs,n,i=>R6(i,t))})}var xb=({children:t,...e})=>{const n=b.useContext(Xv),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=One(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=Xv;return b.createElement(s,{value:e},t)},Xv=sie(xb,{});xb.Provider=Xv.Provider;xb.Consumer=Xv.Consumer;function sie(t,e){return Object.assign(t,b.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var oie=()=>{const t=[],e=function(i){Rne();const r=[];return dt(t,(s,o)=>{if(de.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return dt(t,i=>i.pause(...arguments)),this},e.resume=function(){return dt(t,i=>i.resume(...arguments)),this},e.set=function(i){dt(t,(r,s)=>{const o=de.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return dt(t,(s,o)=>{if(de.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return dt(t,i=>i.stop(...arguments)),this},e.update=function(i){return dt(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return de.fun(i)?i(s,r):i};return e._getProps=n,e};function aie(t,e,n){const i=de.fun(e)&&e;i&&!n&&(n=[]);const r=b.useMemo(()=>i||arguments.length==3?oie():void 0,[]),s=b.useRef(0),o=v6(),a=b.useMemo(()=>({ctrls:[],queue:[],flush(y,x){const w=TM(y,x);return s.current>0&&!a.queue.length&&!Object.keys(w).some(_=>!y.springs[_])?ik(y,x):new Promise(_=>{M6(y,w),a.queue.push(()=>{_(ik(y,x))}),o()})}}),[]),l=b.useRef([...a.ctrls]),c=[],u=xM(t)||0;b.useMemo(()=>{dt(l.current.slice(t,u),y=>{Kne(y,r),y.stop(!0)}),l.current.length=t,d(u,t)},[t]),b.useMemo(()=>{d(0,Math.min(u,t))},n);function d(y,x){for(let w=y;w<x;w++){const S=l.current[w]||(l.current[w]=new rie(null,a.flush)),_=i?i(w,S):e[w];_&&(c[w]=eie(_))}}const f=l.current.map((y,x)=>TM(y,c[x])),p=b.useContext(xb),g=xM(p),m=p!==g&&Gne(p);ZC(()=>{s.current++,a.ctrls=l.current;const{queue:y}=a;y.length&&(a.queue=[],dt(y,x=>x())),dt(l.current,(x,w)=>{r==null||r.add(x),m&&x.start({default:p});const S=c[w];S&&(qne(x,S.ref),x.ref?x.queue.push(S):x.start(S))})}),y6(()=>()=>{dt(a.ctrls,y=>y.stop(!0))});const v=f.map(y=>({...y}));return r?[v,r]:v}function I6(t,e){const n=de.fun(t),[[i],r]=aie(1,n?t:[t],n?[]:e);return n||arguments.length==2?[i,r]:i}var lie=class extends nE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Tp(...e);const n=this._get(),i=J2(n);QC(this,i.create(n))}advance(t){const e=this._get(),n=this.get();_o(e,n)||(Ds(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&OM(this._active)&&Aw(this)}_get(){const t=de.arr(this.source)?this.source.map(Fi):hr(Fi(this.source));return this.calc(...t)}_start(){this.idle&&!OM(this._active)&&(this.idle=!1,dt(yb(this),t=>{t.done=!1}),Ss.skipAnimation?(Ze.batchedUpdates(()=>this.advance()),Aw(this)):pb.start(this))}_attach(){let t=1;dt(hr(this.source),e=>{Lr(e)&&sf(e,this),ek(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){dt(hr(this.source),t=>{Lr(t)&&jp(t,this)}),this._active.clear(),Aw(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=hr(this.source).reduce((e,n)=>Math.max(e,(ek(n)?n.priority:0)+1),0))}};function cie(t){return t.idle!==!1}function OM(t){return!t.size||Array.from(t).every(cie)}function Aw(t){t.idle||(t.idle=!0,dt(yb(t),e=>{e.done=!0}),Ip(t,{type:"idle",parent:t}))}Ss.assign({createStringInterpolator:m6,to:(t,e)=>new lie(t,e)});var j6=/^--/;function uie(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!j6.test(t)&&!($h.hasOwnProperty(t)&&$h[t])?e+"px":(""+e).trim()}var IM={};function die(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(f=>n||t.hasAttribute(f)?f:IM[f]||(IM[f]=f.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(t.textContent=s);for(const f in r)if(r.hasOwnProperty(f)){const p=uie(f,r[f]);j6.test(f)?t.style.setProperty(f,p):t.style[f]=p}d.forEach((f,p)=>{t.setAttribute(f,u[p])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var $h={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fie=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),hie=["Webkit","Ms","Moz","O"];$h=Object.keys($h).reduce((t,e)=>(hie.forEach(n=>t[fie(n,e)]=t[e]),t),$h);var pie=/^(matrix|translate|scale|rotate|skew)/,mie=/^(translate)/,gie=/^(rotate|skew)/,Nw=(t,e)=>de.num(t)&&t!==0?t+e:t,O0=(t,e)=>de.arr(t)?t.every(n=>O0(n,e)):de.num(t)?t===e:parseFloat(t)===e,vie=class extends bb{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Nw(a,"px")).join(",")})`,O0(o,0)])),ho(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(pie.test(a)){if(delete i[a],de.und(o))return;const l=mie.test(a)?"px":gie.test(a)?"deg":"";r.push(hr(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${Nw(f,l)})`,O0(f,0)]:c=>[`${a}(${c.map(u=>Nw(u,l)).join(",")})`,O0(c,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new yie(r,s)),super(i)}},yie=class extends f6{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return dt(this.inputs,(n,i)=>{const r=Fi(n[0]),[s,o]=this.transforms[i](de.arr(r)?r:n.map(Fi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&dt(this.inputs,e=>dt(e,n=>Lr(n)&&sf(n,this)))}observerRemoved(t){t==0&&dt(this.inputs,e=>dt(e,n=>Lr(n)&&jp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Ip(this,t)}},bie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Ss.assign({batchedUpdates:Ml.unstable_batchedUpdates,createStringInterpolator:m6,colors:cne});var xie=zne(bie,{applyAnimatedValues:die,createAnimatedStyle:t=>new vie(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),qe=xie.animated;const Yt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},De=(t=Yt.stone[800])=>({backgroundColor:new We(t),opacity:new We(1)}),Nn=()=>({strokeDashoffset:new We(1),opacity:new We(1)}),Ng=()=>({strokeDashoffset:new We(1),opacity:new We(1),path:new We("")}),Jv={bus:{address:Ng(),data:Ng(),rd:Ng(),wr:Ng(),iom:Nn(),mem:{stroke:new We(Yt.red[500])},handshake:Nn(),pic:Nn(),pio:Nn(),timer:Nn(),intr:Nn(),inta:Nn(),int0:Nn(),int1:Nn(),int2:Nn(),"switches->pio":Nn(),"pio->leds":Nn(),printer:{data:Nn(),strobe:Nn(),busy:Nn()}},clock:{angle:new We(0)},controlMemory:{overlay:{opacity:new We(0)},container:{opacity:new We(0),scale:new We(.8)},currentInstruction:{glow:new We(0)},microop:{0:{opacity:new We(0),translateX:new We(-20)},1:{opacity:new We(0),translateX:new We(-20)},2:{opacity:new We(0),translateX:new We(-20)},3:{opacity:new We(0),translateX:new We(-20)},4:{opacity:new We(0),translateX:new We(-20)}}},sequencer:{overlay:{opacity:new We(0)},container:{opacity:new We(0),scale:new We(.8)}},cpu:{internalBus:{address:{strokeDashoffset:new We(1),opacity:new We(1),path:new We("")},data:{strokeDashoffset:new We(1),opacity:new We(1),path:new We("")}},alu:{operands:Nn(),results:Nn(),cog:{rot:new We(0)},operation:{backgroundColor:new We(Yt.stone[800])}},decoder:{path:Nn(),progress:{progress:new We(0),opacity:new We(1)}},AX:De(),BX:De(),CX:De(),DX:De(),AL:De(),BL:De(),CL:De(),DL:De(),SP:De(),"SP.l":De(),"SP.h":De(),IP:De(),"IP.l":De(),"IP.h":De(),IR:De(),ri:{...De(),opacity:new We(0)},"ri.l":De(),"ri.h":De(),id:{...De(),opacity:new We(0)},"id.l":De(),"id.h":De(),left:De(),"left.l":De(),"left.h":De(),right:De(),"right.l":De(),"right.h":De(),result:De(),"result.l":De(),"result.h":De(),FLAGS:De(),"FLAGS.l":De(),"FLAGS.h":De(),MAR:De(),MBR:De()},handshake:{DATA:De(),STATE:De()},memory:{"operating-cell":{color:new We(Yt.white)}},pic:{IMR:De(),IRR:De(),ISR:De(),INT0:De(),INT1:De(),INT2:De(),INT3:De(),INT4:De(),INT5:De(),INT6:De(),INT7:De()},pio:{PA:De(),PB:De(),CA:De(),CB:De()},printer:{printing:{progress:new We(0),opacity:new We(1)}},timer:{CONT:De(),COMP:De()}};function Ge(t){try{return nD(Jv,t)}catch{const n=t.split(".");let i=Jv;for(const r of n)if(r in i)i=i[r];else return console.warn(`Path not found: ${t}`),{backgroundColor:new We(Yt.stone[800]),opacity:new We(1),stop(){},pause(){},resume(){},start:()=>Promise.resolve(),set(){},get:()=>Yt.stone[800],isPaused:!1};return i}}function L6(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof We?e[n]=i.get():e[n]=L6(i)}return e}const wie=L6(Jv);function D6(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof We?i.set(e[n]):D6(t[n],e[n])}}const Sie=()=>D6(Jv,wie),zp=new Set;async function Fe(t,e){const n=L.get(hn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=L.sub(hn,()=>{L.get(hn).type!=="paused"&&(o(),s())})}),await Fe(t,e);const i=On();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:i.animations?e.duration*i.executionUnit:1,easing:d6[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;try{const l=Ge(s);if(a===void 0)return l.set(o);{zp.add(s);const c=await Ge(s).start({from:o,to:a,config:r});return zp.delete(s),c}}catch(l){return console.warn(`Error animando la clave ${s}:`,l),null}}))}const $6=()=>zp.forEach(t=>{try{const e=Ge(t);e&&typeof e.pause=="function"&&e.pause()}catch(e){console.warn(`Error pausing animation for key ${t}:`,e)}}),F6=()=>zp.forEach(t=>{try{const e=Ge(t);e&&typeof e.resume=="function"&&e.resume()}catch(e){console.warn(`Error resuming animation for key ${t}:`,e)}});function iE(){zp.forEach(t=>{try{const e=Ge(t);e&&typeof e.stop=="function"&&(e.stop(!0),e.isPaused&&typeof e.resume=="function"&&e.resume())}catch(e){console.warn(`Error stopping animation for key ${t}:`,e)}}),setTimeout(()=>Sie(),10)}const kie={AX:Yt.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:Yt.red[500],SP:"#DC2626",MAR:Yt.blue[500],MBR:Yt.blue[500],IR:Yt.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#F97316",ri:"#06B6D4",left:"#22C55E",right:"#16A34A"};function B6(t){const e=t.replace("cpu.","").split(".")[0];return kie[e]||Yt.stone[600]}async function Wn(t,e){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP||t==="cpu.right.l"||t==="cpu.left.l")return;const n=e||B6(t);await Fe({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await Fe({key:`${t}.backgroundColor`,to:Yt.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function Gn(t){try{return t==="cpu.right.l"||t==="cpu.left.l"?void 0:await Fe({key:`${t}.backgroundColor`,to:Yt.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function Up(t){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP)return;const e=On(),n=B6(t);await Fe({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const i=e.animations?1e3:1;await new Promise(r=>setTimeout(r,i)),await Fe({key:`${t}.backgroundColor`,to:Yt.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function Wd(t){await Wn("cpu.MBR"),L.set(wc,t),await Gn("cpu.MBR")}function z6(){setTimeout(()=>{try{Ge("bus.rd.opacity").set(0)}catch{}try{Ge("bus.wr.opacity").set(0)}catch{}},0)}function rk(){try{Ge("bus.rd.opacity").start({to:1})}catch{}}function sk(){try{Ge("bus.rd.opacity").start({to:0})}catch{}}function U6(){try{Ge("bus.wr.opacity").start({to:1})}catch{}}function V6(){try{Ge("bus.wr.opacity").start({to:0})}catch{}}async function ki(t,e){return await Fe([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function qn(t){return await Fe({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}const _ie=Object.freeze(Object.defineProperty({__proto__:null,activateRegister:Wn,anim:Fe,deactivateRegister:Gn,hideControlBusTextsOnInit:z6,hideReadControlText:sk,hideWriteControlText:V6,pauseAllAnimations:$6,populateDataBus:Wd,resumeAllAnimations:F6,showReadControlText:rk,showWriteControlText:U6,stopAllAnimations:iE,turnLineOff:qn,turnLineOn:ki,updateRegisterWithGlow:Up},Symbol.toStringTag,{value:"Module"}));async function Cie(t){switch(t.type){case"bus:io.selected":{await Promise.all([Fe({key:"bus.mem.stroke",to:Yt.stone[700]},{duration:1,easing:"easeInSine"}),ki(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Vc(t.error);return}case"bus:reset":{await Promise.all([Fe([{key:"bus.address.strokeDashoffset",to:1},{key:"bus.data.strokeDashoffset",to:1},{key:"bus.rd.strokeDashoffset",to:1},{key:"bus.wr.strokeDashoffset",to:1}],{duration:1,easing:"easeInSine"}),Fe({key:"bus.mem.stroke",to:Yt.red[500]},{duration:1,easing:"easeOutSine"}),qn("bus.iom"),qn("bus.handshake"),qn("bus.pio"),qn("bus.pic"),qn("bus.timer")]);return}default:return t}}async function Eie(t){switch(t.type){case"clock:tick":return;default:return t.type}}function H6(t,e,n){switch(t){case"SP":return"M 460 309 H 550 V 349 H 659";case"IP":return"M 460 349 H 659";case"ri":return"";default:throw new Error(`Invalid register ${t}`)}}function Aie({showSP:t,showri:e}){const{path:n,...i}=Ge("cpu.internalBus.address"),r=[t?"M 400 309 H 550 V 250":"","M 400 349 H 550 V 255",e?"M 420 388 H 550 V 300":"","M 400 349 H 659"];return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-30",children:[r.map((s,o)=>h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:s},o)),h.jsx(qe.path,{d:n,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i}),h.jsx(qe.path,{d:n,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}var rE={exports:{}},cd=typeof Reflect=="object"?Reflect:null,jM=cd&&typeof cd.apply=="function"?cd.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},I0;cd&&typeof cd.ownKeys=="function"?I0=cd.ownKeys:Object.getOwnPropertySymbols?I0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:I0=function(e){return Object.getOwnPropertyNames(e)};function Nie(t){console&&console.warn&&console.warn(t)}var W6=Number.isNaN||function(e){return e!==e};function Nt(){Nt.init.call(this)}rE.exports=Nt;rE.exports.once=Tie;Nt.EventEmitter=Nt;Nt.prototype._events=void 0;Nt.prototype._eventsCount=0;Nt.prototype._maxListeners=void 0;var LM=10;function wb(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Nt,"defaultMaxListeners",{enumerable:!0,get:function(){return LM},set:function(t){if(typeof t!="number"||t<0||W6(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");LM=t}});Nt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Nt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||W6(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function G6(t){return t._maxListeners===void 0?Nt.defaultMaxListeners:t._maxListeners}Nt.prototype.getMaxListeners=function(){return G6(this)};Nt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")jM(l,this,n);else for(var c=l.length,u=J6(l,c),i=0;i<c;++i)jM(u[i],this,n);return!0};function K6(t,e,n,i){var r,s,o;if(wb(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=G6(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Nie(a)}return t}Nt.prototype.addListener=function(e,n){return K6(this,e,n,!1)};Nt.prototype.on=Nt.prototype.addListener;Nt.prototype.prependListener=function(e,n){return K6(this,e,n,!0)};function Pie(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function q6(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=Pie.bind(i);return r.listener=n,i.wrapFn=r,r}Nt.prototype.once=function(e,n){return wb(n),this.on(e,q6(this,e,n)),this};Nt.prototype.prependOnceListener=function(e,n){return wb(n),this.prependListener(e,q6(this,e,n)),this};Nt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(wb(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():Mie(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Nt.prototype.off=Nt.prototype.removeListener;Nt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function Y6(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?Rie(r):J6(r,r.length)}Nt.prototype.listeners=function(e){return Y6(this,e,!0)};Nt.prototype.rawListeners=function(e){return Y6(this,e,!1)};Nt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):X6.call(t,e)};Nt.prototype.listenerCount=X6;function X6(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Nt.prototype.eventNames=function(){return this._eventsCount>0?I0(this._events):[]};function J6(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function Mie(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Rie(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Tie(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}Z6(t,e,s,{once:!0}),e!=="error"&&Oie(t,r,{once:!0})})}function Oie(t,e,n){typeof t.on=="function"&&Z6(t,"error",e,n)}function Z6(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Iie=rE.exports;function po(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(po.prototype[Symbol.iterator]=function(){return this});po.of=function(){var t=arguments,e=t.length,n=0;return new po(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};po.empty=function(){var t=new po(function(){return{done:!0}});return t};po.fromSequence=function(t){var e=0,n=t.length;return new po(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};po.is=function(t){return t instanceof po?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Sb=po;const Zr=qc(Sb);var kb={};kb.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";kb.SYMBOL_SUPPORT=typeof Symbol<"u";var jie=Sb,Q6=kb,Lie=Q6.ARRAY_BUFFER_SUPPORT,Die=Q6.SYMBOL_SUPPORT;function $ie(t){return typeof t=="string"||Array.isArray(t)||Lie&&ArrayBuffer.isView(t)?jie.fromSequence(t):typeof t!="object"||t===null?null:Die&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var e$=function(e){var n=$ie(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Fie=e$,Bie=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=Fie(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const t$=qc(Bie);var zie=Sb,Uie=e$,Vie=function(){var e=arguments,n=null,i=-1;return new zie(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=Uie(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Go=qc(Vie);function Hie(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let _n=Hie;typeof Object.assign=="function"&&(_n=Object.assign);function Gr(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function Yn(t){return typeof t=="object"&&t!==null}function n$(t){let e;for(e in t)return!1;return!0}function Er(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function ns(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function DM(t){return!(!Yn(t)||t.attributes&&!Array.isArray(t.attributes))}function Wie(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class sE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class xe extends sE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,xe.prototype.constructor)}}class fe extends sE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,fe.prototype.constructor)}}class ze extends sE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ze.prototype.constructor)}}function i$(t,e){this.key=t,this.attributes=e,this.clear()}i$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function r$(t,e){this.key=t,this.attributes=e,this.clear()}r$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function s$(t,e){this.key=t,this.attributes=e,this.clear()}s$.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function of(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}of.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};of.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};of.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};of.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const o$=0,a$=1,Gie=2,l$=3;function la(t,e,n,i,r,s,o){let a,l,c,u;if(i=""+i,n===o$){if(a=t._nodes.get(i),!a)throw new fe(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(n===l$){if(r=""+r,l=t._edges.get(r),!l)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(i===d)a=l.target;else if(i===f)a=l.source;else throw new fe(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(i),!l)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===a$?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function Kie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=la(this,e,n,i,r,s);return o.attributes[a]}}function qie(t,e,n){t.prototype[e]=function(i,r){const[s]=la(this,e,n,i,r);return s.attributes}}function Yie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=la(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function Xie(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=la(this,e,n,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Jie(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=la(this,e,n,i,r,s,o);if(typeof c!="function")throw new xe(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Zie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=la(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Qie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=la(this,e,n,i,r,s);if(!Yn(a))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function ere(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=la(this,e,n,i,r,s);if(!Yn(a))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return _n(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function tre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=la(this,e,n,i,r,s);if(typeof a!="function")throw new xe(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const nre=[{name:t=>`get${t}Attribute`,attacher:Kie},{name:t=>`get${t}Attributes`,attacher:qie},{name:t=>`has${t}Attribute`,attacher:Yie},{name:t=>`set${t}Attribute`,attacher:Xie},{name:t=>`update${t}Attribute`,attacher:Jie},{name:t=>`remove${t}Attribute`,attacher:Zie},{name:t=>`replace${t}Attributes`,attacher:Qie},{name:t=>`merge${t}Attributes`,attacher:ere},{name:t=>`update${t}Attributes`,attacher:tre}];function ire(t){nre.forEach(function({name:e,attacher:n}){n(t,e("Node"),o$),n(t,e("Source"),a$),n(t,e("Target"),Gie),n(t,e("Opposite"),l$)})}function rre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ze(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ze(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Gr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ze(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function sre(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ze(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new ze(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=Gr(this,s,o,n),!r)throw new fe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new ze(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function ore(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ze(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ze(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Gr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ze(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function are(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ze(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ze(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Gr(this,a,l,n),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new ze(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function lre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ze(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ze(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Gr(this,a,l,n),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new ze(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new xe(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function cre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ze(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ze(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Gr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ze(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function ure(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ze(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ze(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Gr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ze(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Yn(r))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function dre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ze(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ze(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Gr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ze(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Yn(r))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return _n(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function fre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ze(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ze(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Gr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ze(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new xe(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const hre=[{name:t=>`get${t}Attribute`,attacher:rre},{name:t=>`get${t}Attributes`,attacher:sre},{name:t=>`has${t}Attribute`,attacher:ore},{name:t=>`set${t}Attribute`,attacher:are},{name:t=>`update${t}Attribute`,attacher:lre},{name:t=>`remove${t}Attribute`,attacher:cre},{name:t=>`replace${t}Attributes`,attacher:ure},{name:t=>`merge${t}Attributes`,attacher:dre},{name:t=>`update${t}Attributes`,attacher:fre}];function pre(t){hre.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const mre=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function gre(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function vre(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Pw(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Zr(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function yre(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function bre(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function Mw(t,e){let n=t[e];return n.next!==void 0?new Zr(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Zr.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function xre(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):t$(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function c$(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:p}=a;if(l=i(u,d,f.key,p.key,f.attributes,p.attributes,a.undirected),t&&l)return u}}function wre(t,e){if(t.size===0)return Zr.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Zr(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function oE(t,e,n,i,r,s){const o=e?vre:gre;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function Sre(t,e,n,i){const r=[];return oE(!1,t,e,n,i,function(s){r.push(s)}),r}function kre(t,e,n){let i=Zr.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Go(i,Pw(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Go(i,Pw(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Go(i,Pw(n.undirected))),i}function aE(t,e,n,i,r,s,o){const a=n?bre:yre;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function _re(t,e,n,i,r){const s=[];return aE(!1,t,e,n,i,r,function(o){s.push(o)}),s}function Cre(t,e,n,i){let r=Zr.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Go(r,Mw(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Go(r,Mw(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Go(r,Mw(n.undirected,i))),r}function Ere(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return xre(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new fe(`Graph.${n}: could not find the "${s}" node in the graph.`);return Sre(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new fe(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new fe(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return _re(i,this.multi,r,a,o)}throw new xe(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Are(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,c$(!1,this,i,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new fe(`Graph.${s}: could not find the "${c}" node in the graph.`);return oE(!1,this.multi,i==="mixed"?this.type:i,r,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new fe(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new fe(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return aE(!1,i,this.multi,r,f,u,d)}throw new xe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;i!=="directed"&&(f+=this.undirectedSize),i!=="undirected"&&(f+=this.directedSize),d=new Array(f);let p=0;c.push((g,m,v,y,x,w,S)=>{d[p++]=u(g,m,v,y,x,w,S)})}else d=[],c.push((f,p,g,m,v,y,x)=>{d.push(u(f,p,g,m,v,y,x))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,p,g,m,v,y,x)=>{u(f,p,g,m,v,y,x)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new xe(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new xe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((p,g,m,v,y,x,w)=>{f=u(f,p,g,m,v,y,x,w)}),this[s].apply(this,c),f}}function Nre(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,c$(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new fe(`Graph.${s}: could not find the "${l}" node in the graph.`);return oE(!0,this.multi,i==="mixed"?this.type:i,r,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new fe(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new fe(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return aE(!0,i,this.multi,r,d,c,u)}throw new xe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>c(d,f,p,g,m,v,y)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>!c(d,f,p,g,m,v,y)),!this[s].apply(this,l)}}function Pre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Zr.empty();if(!arguments.length)return wre(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new fe(`Graph.${s}: could not find the "${o}" node in the graph.`);return kre(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new fe(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new fe(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Cre(i,r,l,a)}throw new xe(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Mre(t){mre.forEach(e=>{Ere(t,e),Are(t,e),Nre(t,e),Pre(t,e)})}const Rre=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function _b(){this.A=null,this.B=null}_b.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};_b.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function If(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(t&&u)return c.key}}function lE(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return If(t,null,i,i.undirected,r);if(typeof n=="string")return If(t,null,i,i[n],r)}const s=new _b;let o;if(e!=="undirected"){if(n!=="out"){if(o=If(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=If(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=If(t,s,i,i.undirected,r),t&&o))return o}function Tre(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return lE(!1,t,e,n,function(r){i.push(r)}),i}function jf(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Zr(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function Ore(t,e,n){if(t!=="mixed"){if(t==="undirected")return jf(null,n,n.undirected);if(typeof e=="string")return jf(null,n,n[e])}let i=Zr.empty();const r=new _b;return t!=="undirected"&&(e!=="out"&&(i=Go(i,jf(r,n,n.in))),e!=="in"&&(i=Go(i,jf(r,n,n.out)))),t!=="directed"&&(i=Go(i,jf(r,n,n.undirected))),i}function Ire(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new fe(`Graph.${n}: could not find the "${s}" node in the graph.`);return Tre(i==="mixed"?this.type:i,r,o)}}function jre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new fe(`Graph.${s}: could not find the "${c}" node in the graph.`);lE(!1,i==="mixed"?this.type:i,r,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,p)=>{d.push(u(f,p))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,p)=>{u(f,p)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new xe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(p,g)=>{f=u(f,p,g)}),f}}function Lre(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new fe(`Graph.${o}: could not find the "${c}" node in the graph.`);return lE(!0,i==="mixed"?this.type:i,r,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,p)=>!u(f,p))}}function Dre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Zr.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new fe(`Graph.${s}: could not find the "${o}" node in the graph.`);return Ore(i==="mixed"?this.type:i,r,a)}}function $re(t){Rre.forEach(e=>{Ire(t,e),jre(t,e),Lre(t,e),Dre(t,e)})}function Pg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,d,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do f=d.target,p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do f=d.target,f.key!==c&&(f=d.source),p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!p&&r(l.key,null,l.attributes,null,null,null,null)}}function Fre(t,e){const n={key:t};return n$(e.attributes)||(n.attributes=_n({},e.attributes)),n}function Bre(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return n$(n.attributes)||(i.attributes=_n({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function zre(t){if(!Yn(t))throw new xe('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new xe("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Yn(t.attributes)||t.attributes===null))throw new xe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Ure(t){if(!Yn(t))throw new xe('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new xe("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new xe("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Yn(t.attributes)||t.attributes===null))throw new xe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new xe("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Vre=Wie(),Hre=new Set(["directed","undirected","mixed"]),$M=new Set(["domain","_events","_eventsCount","_maxListeners"]),Wre=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Gre={allowSelfLoops:!0,multi:!1,type:"mixed"};function Kre(t,e,n){if(n&&!Yn(n))throw new xe(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new ze(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function FM(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function u$(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new ze(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new ze(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Yn(a))throw new xe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new ze(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new fe(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new fe(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new ze(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new ze(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new of(i,r,l,c,a);t._edges.set(r,d);const f=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,u.key=r,t.emit("edgeAdded",u),r}function qre(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new ze(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new ze(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new xe(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Yn(a))throw new xe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new ze(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,p;if(!n&&(f=t._edges.get(r),f)){if((f.source.key!==s||f.target.key!==o)&&(!i||f.source.key!==o||f.target.key!==s))throw new ze(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);p=f}if(!p&&!t.multi&&u&&(p=i?u.undirected[o]:u.out[o]),p){const x=[p.key,!1,!1,!1];if(l?!c:!a)return x;if(l){const w=p.attributes;p.attributes=c(w),t.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else _n(p.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:a});return x}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new ze(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,v=!1;u||(u=FM(t,s,{}),m=!0,s===o&&(d=u,v=!0)),d||(d=FM(t,o,{}),v=!0),f=new of(i,r,u,d,a),t._edges.set(r,f);const y=s===o;return i?(u.undirectedDegree++,d.undirectedDegree++,y&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,y&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),i?t._undirectedSize++:t._directedSize++,g.key=r,t.emit("edgeAdded",g),[r,!0,m,v]}function cu(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class It extends Iie.EventEmitter{constructor(e){if(super(),e=_n({},Gre,e),typeof e.multi!="boolean")throw new xe(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Hre.has(e.type))throw new xe(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new xe(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?i$:e.type==="directed"?r$:s$;Er(this,"NodeDataClass",n);const i="geid_"+Vre()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};Er(this,"_attributes",{}),Er(this,"_nodes",new Map),Er(this,"_edges",new Map),Er(this,"_directedSize",0),Er(this,"_undirectedSize",0),Er(this,"_directedSelfLoopCount",0),Er(this,"_undirectedSelfLoopCount",0),Er(this,"_edgeKeyGenerator",s),Er(this,"_options",e),$M.forEach(o=>Er(this,o,this[o])),ns(this,"order",()=>this._nodes.size),ns(this,"size",()=>this._edges.size),ns(this,"directedSize",()=>this._directedSize),ns(this,"undirectedSize",()=>this._undirectedSize),ns(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ns(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ns(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ns(this,"multi",this._options.multi),ns(this,"type",this._options.type),ns(this,"allowSelfLoops",this._options.allowSelfLoops),ns(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new xe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new xe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new xe(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new ze("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new fe(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new fe(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new ze("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new fe(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new fe(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new ze("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new fe(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new fe(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new fe(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new fe(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Kre(this,e,n).key}mergeNode(e,n){if(n&&!Yn(n))throw new xe(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(_n(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new xe(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do cu(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do cu(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do cu(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=Gr(this,i,r,this.type),!n)throw new fe(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new fe(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return cu(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new ze("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ze("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=Gr(this,e,n,"directed");if(!i)throw new fe(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return cu(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new ze("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ze("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=Gr(this,e,n,"undirected");if(!i)throw new fe(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return cu(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new xe("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Yn(e))throw new xe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Yn(e))throw new xe("Graph.mergeAttributes: provided attributes are not a plain object.");return _n(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new xe("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new xe("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!DM(n))throw new xe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new xe("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!DM(n))throw new xe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new xe("Graph.forEachAdjacencyEntry: expecting a callback.");Pg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new xe("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Pg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new xe("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Pg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new xe("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Pg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):t$(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new xe("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new xe("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new xe("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new xe("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new xe("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new xe("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new xe("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new xe("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Zr(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=Fre(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=Bre(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof It)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,p,g)=>{n?g?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):g?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!Yn(e))throw new xe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Yn(e.attributes))throw new xe("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new xe("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],zre(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new xe("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],Ure(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let p;"key"in a?(p=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,p.call(this,a.key,c,u,d)):(p=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,p.call(this,c,u,d))}}return this}nullCopy(e){const n=new It(_n({},this._options,e));return n.replaceAttributes(_n({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=_n({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new ze(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new ze("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new ze("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,u$(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,_n({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[f]>"u"?i[f]=0:i[f]++,l+=`${i[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!$M.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,Er(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(It.prototype[Symbol.for("nodejs.util.inspect.custom")]=It.prototype.inspect);Wre.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?u$:qre;t.generateKey?It.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:It.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});ire(It);pre(It);Mre(It);$re(It);class d$ extends It{constructor(e){const n=_n({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new xe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new xe('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class cE extends It{constructor(e){const n=_n({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new xe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new xe('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class f$ extends It{constructor(e){const n=_n({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new xe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class h$ extends It{constructor(e){const n=_n({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new xe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new xe('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class p$ extends It{constructor(e){const n=_n({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new xe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new xe('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function af(t){t.from=function(e,n){const i=_n({},e.options,n),r=new t(i);return r.import(e),r}}af(It);af(d$);af(cE);af(f$);af(h$);af(p$);It.Graph=It;It.DirectedGraph=d$;It.UndirectedGraph=cE;It.MultiGraph=f$;It.MultiDirectedGraph=h$;It.MultiUndirectedGraph=p$;It.InvalidArgumentsGraphError=xe;It.NotFoundGraphError=fe;It.UsageGraphError=ze;var Yre=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},m$=kb,Xre=m$.ARRAY_BUFFER_SUPPORT,Jre=m$.SYMBOL_SUPPORT,Zre=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Xre&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(Jre&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},g$=Sb,Qre=Zre;function bn(){this.clear()}bn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};bn.prototype.enqueue=function(t){return this.items.push(t),++this.size};bn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};bn.prototype.peek=function(){if(this.size)return this.items[this.offset]};bn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};bn.prototype.toArray=function(){return this.items.slice(this.offset)};bn.prototype.values=function(){var t=this.items,e=this.offset;return new g$(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};bn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new g$(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(bn.prototype[Symbol.iterator]=bn.prototype.values);bn.prototype.toString=function(){return this.toArray().join(",")};bn.prototype.toJSON=function(){return this.toArray()};bn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:bn,enumerable:!1}),t};typeof Symbol<"u"&&(bn.prototype[Symbol.for("nodejs.util.inspect.custom")]=bn.prototype.inspect);bn.from=function(t){var e=new bn;return Qre(t,function(n){e.enqueue(n)}),e};bn.of=function(){return bn.from(arguments)};var ese=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},v$=Yre,tse=ese;function nse(t,e,n){if(!v$(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,p,g,m,v,y=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=r(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in s||(a.push(f),s[f]=u),f in o){y=!0;break e}}else for(c=l,l=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=i(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in o||(l.push(f),o[f]=u),f in s){y=!0;break e}if(!y)return null;for(var x=[];f;)x.unshift(f),f=s[f];for(f=o[x[x.length-1]];f;)x.push(f),f=o[f];return x.length?x:null}function y$(t,e,n){if(!v$(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!i.has(c)&&(i.add(c),tse(u,e[t](c)),r[c]=s);s++,o=u}return r}y$.bind(null,"outboundNeighbors");y$.bind(null,"neighbors");var ise=nse;const W=new cE({allowSelfLoops:!1});W.addNode("MBR",{position:[620,250]});W.addNode("AL",{position:[455,45]});W.addNode("BL",{position:[455,85]});W.addNode("CL",{position:[455,125]});W.addNode("DL",{position:[455,165]});W.addNode("id",{position:[451,205]});W.addNode("SP",{position:[451,309]});W.addNode("IP",{position:[455,349]});W.addNode("ri",{position:[455,388]});W.addNode("MAR",{position:[698,349]});W.addNode("result",{position:[272,115]});W.addNode("NodoRegIn",{position:[390,115]});W.addNode("NodoRegOut",{position:[550,115]});W.addNode("FLAGS",{position:[250,225]});W.addNode("IR",{position:[250,275]});W.addNode("IR mbr join",{position:[250,250]});W.addNode("left",{position:[130,85]});W.addNode("right",{position:[125,145]});W.addNode("left end",{position:[220,85]});W.addNode("right end",{position:[220,145]});W.addNode("result start",{position:[280,115]});W.addNode("rmbr",{position:[250,390]});W.addNode("bleft1",{position:[550,16]});W.addNode("bleft2",{position:[90,16]});W.addNode("bleft3",{position:[90,85]});W.addNode("AL join",{position:[425,45]});W.addNode("BL join",{position:[425,85]});W.addNode("CL join",{position:[425,125]});W.addNode("DL join",{position:[425,165]});W.addNode("id join",{position:[250,205]});W.addNode("data mbr join",{position:[390,250]});W.addNode("SP join",{position:[390,309]});W.addNode("IP join",{position:[390,349]});W.addNode("ri join",{position:[390,388]});W.addNode("MAR join1",{position:[550,388]});W.addNode("MAR join2",{position:[550,349]});W.addNode("result mbr join",{position:[370,250]});W.addNode("FLAGS mbr join",{position:[155,250]});W.addNode("left join",{position:[30,85]});W.addNode("right join",{position:[90,145]});W.addNode("operands mbr join",{position:[90,250]});W.addNode("outr mbr join",{position:[550,250]});W.addNode("mbr reg join",{position:[390,250]});W.addNode("AL out",{position:[483,45]});W.addNode("BL out",{position:[483,85]});W.addNode("CL out",{position:[483,125]});W.addNode("DL out",{position:[483,165]});W.addNode("id out",{position:[441,205]});W.addNode("MBR out",{position:[630,250]});W.addNode("MBR out join",{position:[550,250]});W.addNode("SP out",{position:[510,309]});W.addNode("IP out",{position:[510,349]});W.addNode("IP out join",{position:[550,349]});W.addNode("ri out join",{position:[550,388]});W.addNode("SP out join",{position:[550,309]});W.addNode("AL out join",{position:[525,45]});W.addNode("BL out join",{position:[525,85]});W.addNode("CL out join",{position:[525,125]});W.addNode("DL out join",{position:[525,165]});W.addNode("id out join",{position:[521,205]});W.addUndirectedEdge("AL","AL out");W.addUndirectedEdge("BL","BL out");W.addUndirectedEdge("CL","CL out");W.addUndirectedEdge("DL","DL out");W.addUndirectedEdge("id","id out");W.addUndirectedEdge("IP","IP out");W.addUndirectedEdge("SP","SP out");W.addUndirectedEdge("AL out","AL out join");W.addUndirectedEdge("BL out","BL out join");W.addUndirectedEdge("CL out","CL out join");W.addUndirectedEdge("DL out","DL out join");W.addUndirectedEdge("id out","id out join");W.addUndirectedEdge("AL out join","NodoRegOut");W.addUndirectedEdge("BL out join","NodoRegOut");W.addUndirectedEdge("CL out join","NodoRegOut");W.addUndirectedEdge("DL out join","NodoRegOut");W.addUndirectedEdge("id out join","NodoRegOut");W.addUndirectedEdge("NodoRegOut","outr mbr join");W.addUndirectedEdge("NodoRegOut","bleft1");W.addUndirectedEdge("bleft1","bleft2");W.addUndirectedEdge("bleft2","bleft3");W.addUndirectedEdge("bleft3","left");W.addUndirectedEdge("left","left end");W.addUndirectedEdge("IP out join","outr mbr join");W.addUndirectedEdge("ri out join","outr mbr join");W.addUndirectedEdge("SP out join","outr mbr join");W.addUndirectedEdge("SP out join","MAR join2");W.addUndirectedEdge("outr mbr join","mbr reg join");W.addUndirectedEdge("MBR","outr mbr join");W.addUndirectedEdge("MBR","MBR out");W.addUndirectedEdge("MBR out","outr mbr join");W.addUndirectedEdge("mbr reg join","NodoRegIn");W.addUndirectedEdge("NodoRegIn","AL join");W.addUndirectedEdge("NodoRegIn","BL join");W.addUndirectedEdge("NodoRegIn","CL join");W.addUndirectedEdge("NodoRegIn","DL join");W.addUndirectedEdge("NodoRegIn","id join");W.addUndirectedEdge("outr mbr join","operands mbr join");W.addUndirectedEdge("AL join","AL");W.addUndirectedEdge("BL join","BL");W.addUndirectedEdge("CL join","CL");W.addUndirectedEdge("DL join","DL");W.addUndirectedEdge("MBR","data mbr join");W.addUndirectedEdge("data mbr join","NodoRegIn");W.addUndirectedEdge("IP","IP join");W.addUndirectedEdge("SP","SP join");W.addUndirectedEdge("ri","ri join");W.addUndirectedEdge("MAR join1","ri");W.addUndirectedEdge("MAR join2","MAR join1");W.addUndirectedEdge("MAR","MAR join2");W.addUndirectedEdge("IP join","SP join");W.addUndirectedEdge("SP join","ri join");W.addUndirectedEdge("result start","result");W.addUndirectedEdge("result","NodoRegIn");W.addUndirectedEdge("FLAGS","FLAGS mbr join");W.addUndirectedEdge("FLAGS mbr join","data mbr join");W.addUndirectedEdge("IR","IR mbr join");W.addUndirectedEdge("IR mbr join","FLAGS mbr join");W.addUndirectedEdge("left","left join");W.addUndirectedEdge("right","right join");W.addUndirectedEdge("left join","right join");W.addUndirectedEdge("right join","operands mbr join");W.addUndirectedEdge("right","right end");W.addNode("NodoRegOutLeft",{position:[550,90]});W.addUndirectedEdge("MBR out join","NodoRegOutLeft");W.addUndirectedEdge("NodoRegOutLeft","bleft1");W.addNode("NodoRegOutRight",{position:[550,140]});W.addUndirectedEdge("MBR out join","NodoRegOutRight");W.addUndirectedEdge("NodoRegOutRight","outr mbr join");W.addNode("NodoRegOutToRight",{position:[540,115]});W.addUndirectedEdge("NodoRegOut","NodoRegOutToRight");W.addUndirectedEdge("NodoRegOutToRight","outr mbr join");W.addNode("outr mbr join left",{position:[560,250]});W.addNode("NodoRegOutToLeft",{position:[560,115]});W.addUndirectedEdge("outr mbr join left","NodoRegOutToLeft");W.addUndirectedEdge("NodoRegOutToLeft","NodoRegOut");function rse(t,e,n){const r=(a=>a.replace(/\.(l|h)$/,""))(t);if(!W.hasNode(r))return console.warn(`Nodo origen '${r}' no existe en el grafo`),"";const s=Tr(t,"left end",e,n,{separateMBRPaths:!0,direction:"left"}),o=Tr(t,"right end",e,n,{separateMBRPaths:!0,direction:"right"});return s&&o?`${s} ${o}`:s||o||""}function Tr(t,e,n,i,r){console.log(" generateDataPath llamado con:",{from:t,to:e,instruction:n,mode:i,options:r});const s=f=>f.replace(/\.(l|h)$/,""),o=s(t),a=s(e),l=["AL","BL","CL","DL","id","SP","IP","ri","MAR","left","right","left end","right end"];let c=[];if(console.log(" Evaluando condicin ri  MAR:",{normalizedFrom:o,normalizedTo:a,mode:i,condition:o==="ri"&&a==="MAR"&&i==="mem<-imd"}),o==="ri"&&a==="MAR"&&i==="mem<-imd")return console.log(" Usando ruta especial ri  MAR:","M 455 388 H 550 V 349 H 659"),"M 455 388 H 550 V 349 H 659";if(!W.hasNode(o))return console.warn(`Nodo origen '${o}' no existe en el grafo`),"";if(!W.hasNode(a))return console.warn(`Nodo destino '${a}' no existe en el grafo`),"";if(o==="MAR"||a==="MAR")return"";if(r!=null&&r.separateMBRPaths&&t==="MBR"&&(e==="left"||e==="right"))e==="left"?c=[o,`${o} out`,`${o} out join`,"outr mbr join left","NodoRegOutToLeft","NodoRegOut","bleft1","bleft2","bleft3","left","left end"]:e==="right"&&(c=[o,`${o} out`,`${o} out join`,"outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"]);else if(a==="left")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","bleft1","bleft2","bleft3","left","left end"];else if(a==="right")if(o==="MBR"){const f="MBR_down300";W.hasNode(f)||(W.addNode(f,{position:[620,300]}),W.addUndirectedEdge("MBR",f));const p="MBR_right125_300";W.hasNode(p)||(W.addNode(p,{position:[125,300]}),W.addUndirectedEdge(f,p)),c=["MBR",f,p,"right","right end"]}else c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"];else if(o==="BL"&&a==="ri")c=["BL","BL out","BL out join","NodoRegOut","outr mbr join","MAR join2","MAR"];else if(l.includes(o)&&l.includes(a))["SP","IP","ri"].includes(a)?c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegDir",`${a} join`,a]:c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a];else if(l.includes(o)&&a==="MBR")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","MBR"];else if(o==="MBR"&&a==="ri"){if(["JMP","JC","JZ"].includes(n??""))c=["MBR","mbr reg join","IP join","IP"];else if((n==="MOV"||n==="INT")&&i==="mem<-imd")c=["MBR","mbr reg join","ri join","ri"];else if(i==="mem<-imd"&&(n==="ADD"||n==="SUB"))c=["MBR","mbr reg join","ri join","ri"];else return"M 629 250 H 550 V 349 H 659";const f=W.getNodeAttribute(c[0],"position");let p=`M ${f[0]} ${f[1]}`;for(let g=1;g<c.length;g++){const[m,v]=W.getNodeAttribute(c[g],"position");p+=` L ${m} ${v}`}return p}else if(o==="MBR"&&a==="IR"){const f=W.getNodeAttribute("MBR","position"),p=W.getNodeAttribute("IR","position");return`M ${f[0]} ${f[1]} L ${p[0]} ${f[1]} L ${p[0]} ${p[1]}`}else try{c=ise(W,o,a)||[]}catch(f){return console.warn(`Error calculando ruta de ${o} a ${a}:`,f),""}if(o==="MBR"&&a==="IP"&&["JMP","JZ","JC"].includes(n??"")){const f=W.getNodeAttribute("MBR","position"),p=W.getNodeAttribute("mbr reg join","position"),g=W.getNodeAttribute("IP","position");return`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]} L ${p[0]} ${g[1]} L ${g[0]} ${g[1]}`}if(o==="ri"&&a==="IP")return"M 455 388 H 550 V 349 H 455";if(o==="ri"&&a==="IP"&&(c=["MBR","mbr reg join","NodoRegIn","IP join","IP"]),o==="ri"&&a==="IP"&&n==="CALL"&&(c=["ri","ri out join","NodoRegOut","outr mbr join","mbr reg join","NodoRegIn","IP join","IP"]),o==="MBR"&&a==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(o==="MBR"&&a==="ri"&&n==="CALL"&&(c=["MBR","mbr reg join","NodoRegIn","ri join","ri"]),o==="IP"&&a==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 250 H 620";if(c.length===0)return console.warn(`No se encontr ruta de ${o} a ${a}`),"";const u=W.getNodeAttribute(c[0],"position");let d=`M ${u[0]} ${u[1]}`;for(let f=1;f<c.length;f++){const[p,g]=W.getNodeAttribute(c[f],"position");d+=` L ${p} ${g}`}return console.log(" generateDataPath retornando:",d),d}function sse({showSP:t,showid:e,showri:n}){const{path:i,...r}=Ge("cpu.internalBus.data"),{path:s,...o}=Ge("cpu.internalBus.address");return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-20",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 390","M 250 225 V 250","M 250 145 v 46","M 250 250 V 272","M 250 300 V 320","M 451 349 H 390 V 250",t?"M 451 309 H 390":"M 451 309",n?"M 455 388 H 390 V 300":"","M 455 45 H 425","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"",n?"M 550 388 H 480":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220","M 390 250 V 115","M 390 115 L 425 45 L 455 45","M 390 115 L 425 85 L 455 85","M 390 115 L 425 125 L 455 125","M 390 115 L 425 165 L 455 165","M 550 115 L 525 45 L 445 45","M 550 115 L 525 85 L 445 85","M 550 115 L 525 125 L 445 125","M 550 115 L 525 165 L 445 165",e?"M 550 115 L 521 205 L 441 205":""].join(" ")}),h.jsx("circle",{cx:390,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:250,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:390,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:348,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx(qe.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(qe.path,{d:i,className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(qe.path,{d:s,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o}),h.jsx(qe.path,{d:s,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o})]})}console.log(" generateDataPath importado:",typeof Tr);const b$=5;let tc=null,nc=null,Nr="fetching";const Os=(t,e,n,i)=>{console.log(" drawDataPath llamado con:",{from:t,to:e,instruction:n,mode:i});try{console.log(" Antes de llamar generateDataPath"),console.log(" generateDataPath es:",typeof Tr);const r=Tr(t,e,n,i);return console.log(" Despus de llamar generateDataPath"),console.log(" Ruta generada en drawDataPath:",r),r?Fe([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:b$,easing:"easeInOutSine"}):(console.log(" No hay ruta, retornando Promise.resolve()"),Promise.resolve())}catch(r){return console.error(" Error en drawDataPath:",r),console.error(" Stack trace:",r instanceof Error?r.stack:"No stack trace"),Promise.resolve()}},ose=(t,e,n)=>{try{const i=rse(t,e,n);return i?Fe([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:b$,easing:"easeInOutSine"}):Promise.resolve()}catch(i){return console.warn("Error en drawSimultaneousLeftRightPath:",i),Promise.resolve()}},Co=()=>Fe({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"}),ase=async(t,e,n)=>{console.log(" Animacin simultnea detectada: left y right desde",t),Nr!=="fetching-operands"&&(console.log(" Esperando fase fetching-operands para animacin simultnea..."),await new Promise(i=>{const r=()=>{Nr==="fetching-operands"?i():setTimeout(r,50)};r()}),console.log(" Fase fetching-operands alcanzada, procediendo con animacin simultnea")),await ose(t,e,n),await Promise.all([Wn("cpu.left"),Wn("cpu.right")]),L.set(je.left,L.get(je[t])),L.set(je.right,L.get(je[t])),await Promise.all([Gn("cpu.left"),Gn("cpu.right")]),tc=null,nc=null,await Co()};let Mt="",Et="",Rw=null,dh=null,ok=null;const bo=t=>t.replace(/\.(l|h)$/,"");async function BM(){await Promise.all([Up("cpu.MBR"),Up("cpu.IP"),new Promise(t=>{window.dispatchEvent(new CustomEvent("ip-register-update")),t()})])}async function lse(){dh&&ok&&(console.log(" Ejecutando animaciones simultneas para modo mem<-imd"),await Promise.all([Os("MBR","ri",dh.instruction,dh.mode),Fe([{key:"cpu.internalBus.address.path",from:H6("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})]),L.set(je.ri,L.get(wc)),L.set(CC,L.get(je.IP)),await Promise.all([Wn("cpu.ri"),Wn("cpu.MAR")]),await Promise.all([Gn("cpu.ri"),Gn("cpu.MAR")]),await Promise.all([Co(),Fe({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),dh=null,ok=null)}async function cse(t){switch(console.log(" CPU Event:",t.type,t),window.VONSIM_PARALLEL_ANIMATIONS&&t.type==="cpu:mar.set"&&window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-read-visual")),t.type){case"cpu:alu.execute":{console.log(" Evento cpu:alu.execute recibido, fase actual:",Nr);const e={duration:3,easing:"easeInOutSine"};Nr!=="executing"?(console.log(" Esperando fase executing para animacin de la ALU..."),await new Promise(n=>{let i=0;const r=200,s=()=>{console.log(" Verificando fase actual:",Nr),i++,Nr==="executing"?n():i>=r?(console.warn(" Timeout esperando fase executing, procediendo de todas formas"),n()):setTimeout(s,50)};s()}),console.log(" Fase executing alcanzada, procediendo con animacin de la ALU")):console.log(" Ya estamos en fase executing, procediendo directamente"),await Fe([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),L.set(CD,t.operation),console.log(" Iniciando animacin del engranaje de la ALU..."),await Promise.all([Fe({key:"cpu.alu.operation.backgroundColor",to:Yt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Fe({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),console.log(" Animacin del engranaje completada"),await Fe({key:"cpu.alu.operation.backgroundColor",to:Yt.stone[800]},{duration:1,easing:"easeOutQuart"}),console.log(" Iniciando animacin del bus de resultado..."),await Fe([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e),await Promise.all([Wn("cpu.result"),Wn("cpu.FLAGS")]),L.set(je.FLAGS,t.flags),L.set(je.result,t.result),await Promise.all([Gn("cpu.result"),Gn("cpu.FLAGS")]),await Fe({key:"cpu.alu.results.opacity",to:0},{duration:1,easing:"easeInSine"}),await Fe({key:"cpu.alu.operands.opacity",to:0},{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":{tc=null,nc=null,Nr="fetching";return}case"cpu:cycle.interrupt":{L.set(oi,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await Fe([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{Mt=t.instruction.name,Et=t.instruction.willUse.ri?"mem<-imd":"",console.log("[cpu:cycle.start] instructionName:",Mt,"willUse.ri:",t.instruction.willUse.ri,"mode:",Et,"position:",t.instruction.position),t.instruction.willUse.ri,t.instruction.willUse.ri,tc=null,nc=null,Nr="fetching",e6(t.instruction.position.start),L.set(oi,{phase:"fetching",metadata:t.instruction}),await Fe([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{const e=t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":t.next==="halting"?"halting":"fetching";Nr=e,console.log(" Fase del ciclo actualizada:",Nr),L.set(oi,n=>"metadata"in n?{...n,phase:e}:n);return}case"cpu:decode":{await Fe([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Fe([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Fe([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{L.set(oi,{phase:"stopped",error:t.error}),Vc(t.error);return}case"cpu:halt":case"cpu:int.0":{if(t.type==="cpu:halt"){const e=L.get(oi);"metadata"in e&&(L.set(oi,{phase:"halting",metadata:e.metadata}),await new Promise(n=>setTimeout(n,1e3)))}L.set(oi,{phase:"stopped"}),Vc();return}case"cpu:int.6":{L.set(oi,{phase:"int6"});return}case"cpu:int.7":{L.set(oi,{phase:"int7"});return}case"cpu:inta.off":{await qn("bus.inta");return}case"cpu:inta.on":{await ki("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-write-visual")),await ki(`bus.${e}`,10);return}case"cpu:iom.on":{await ki("bus.iom",15);return}case"cpu:mar.set":{const e=bo(t.register),n=e==="MBR",i=n?"M 629 250 H 550 V 349 H 659":H6(e);if(console.log("[cpu:mar.set] event.register:",t.register,"| Animacin especial:",n,"| regNorm:",e,"| mode:",Et,"| instructionName:",Mt),e==="IP"&&Et==="mem<-imd"||(await Fe([{key:"cpu.internalBus.address.path",from:i},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await Wn("cpu.MAR",Yt.blue[500]),L.set(CC,L.get(je[e]))),e==="ri"){if(console.log("[cpu:mar.set] ri detectado, mode:",Et,"instructionName:",Mt),Et==="mem<-imd"){console.log(" Animando bus especial: ri  MAR (modo mem<-imd)",{instructionName:Mt,mode:Et}),console.log(" Llamando drawDataPath con:",{from:"ri",to:"MAR",instructionName:Mt,mode:Et});const r=await Os("ri","MAR",Mt,Et);console.log(" Ruta generada para ri  MAR:",r),await Co()}else console.log(" No es modo mem<-imd, usando lgica alternativa"),await Os(bo(Rw||"BL"),"MAR",Mt,Et),await Co();Rw=null}else e==="IP"&&Et==="mem<-imd"?(ok={instruction:Mt,mode:Et},console.log(" Marcando animacin IP  MAR como pendiente para modo mem<-imd"),await lse()):n||(await Os(e,"MAR",Mt,Et),await Co());e==="IP"&&Et==="mem<-imd"||await Promise.all([Gn("cpu.MAR"),Fe({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const e=bo(t.register);e==="IP"&&(window.__nextTransferMBRtoIP=!0);const i=["ADD","SUB","AND","OR","XOR","CMP"].some(s=>Mt.startsWith(s));let r=!1;if((e==="MAR"||e.startsWith("MAR."))&&!["ADD","SUB","CMP"].some(a=>Mt.startsWith(a))){const a=L.get(je.IP),l=L.get(wc);a===l&&(r=!0)}if(e==="IR")await Os("MBR","IR",Mt,Et);else if((e==="MAR"||e.startsWith("MAR."))&&!r)console.log("Animando bus de datos: MBR  MAR",{instructionName:Mt,mode:Et}),await Os("MBR","MAR",Mt,Et);else if(["AL","BL","CL","DL","ri"].includes(e)){const o=["ADD","SUB","CMP"].some(a=>Mt.startsWith(a));e==="ri"&&Et==="mem<-imd"?(dh={instruction:Mt,mode:Et},console.log(" Marcando animacin MBR  ri como pendiente para modo mem<-imd")):(!i||o)&&await Os("MBR",e,Mt,Et)}e==="ri"&&Et==="mem<-imd"||L.set(je[t.register],L.get(wc)),e==="IR"?await Up(`cpu.${e}`):e==="IP"||e==="ri"&&Et==="mem<-imd"||(await Wn(`cpu.${e}`),await Gn(`cpu.${e}`)),e==="ri"&&Et==="mem<-imd"||await Co(),Nr==="fetching-operands"&&e!=="IR"&&(Nr="fetching-operands-completed",console.log(" Fase 'fetch-operands' completada al escribir en MBR"),L.set(oi,s=>"metadata"in s?{...s,phase:"fetching-operands-completed"}:s));return}case"cpu:mbr.set":{if(bo(t.register)==="IP")await BM();else{const n=t.register.replace(/\.(l|h)$/,"");await Os(n,"MBR",Mt,Et),L.set(wc,L.get(je[t.register])),await Co()}return}case"cpu:register.copy":{const e=bo(t.src),n=bo(t.dest);if(n==="left"||n==="right"){const i={from:e,instruction:Mt,mode:Et};if(n==="left"?tc=i:n==="right"&&(nc=i),tc&&nc&&tc.from===nc.from&&tc.instruction===nc.instruction){await ase(e,Mt,Et);return}n==="left"?L.set(je.left,L.get(je[e])):L.set(je.right,L.get(je[e]));return}e==="ri"&&n==="IP"||await Os(e,n,Mt,Et),await Wn(`cpu.${n}`),L.set(je[n],L.get(je[e])),await Gn(`cpu.${n}`),await Co();return}case"cpu:register.update":{const[e]=d2(t.register),n=bo(e);n==="IP"||n==="MBR"?await BM():await Up(n==="ri"?"cpu.ri":`cpu.${n}`),L.set(je[n],t.value);return}case"cpu:register.buscopy":{const e=bo(t.src),n=bo(t.dest);n==="ri"&&(Rw=e),e==="ri"&&n.toLowerCase()==="mar"||e==="ri"&&n==="IP"||(await Os(e,n,Mt,Et),await new Promise(i=>setTimeout(i,150))),L.set(je[n],L.get(je[e])),await Wn(`cpu.${n}`),await Gn(`cpu.${n}`),n!=="ri"&&await Co();return}default:return t}}async function use(t){switch(t.type){case"f10:press":await ki("bus.int0",2),await qn("bus.int0");return;default:return t.type}}const uE=ue(z.zero(8)),dE=ue(z.zero(8));function dse(t){t.io.handshake&&(L.set(uE,z.fromUnsigned(t.io.handshake.DATA,8)),L.set(dE,z.fromUnsigned(t.io.handshake.STATE,8)))}async function fse(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await Wd(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await Wn(`handshake.${t.register}`),t.register){case"DATA":{L.set(uE,t.value);break}case"STATE":{L.set(dE,t.value);break}default:return t.register}await Gn(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await qn("bus.int2");return}case"handshake:int.on":{await ki("bus.int2",10);return}default:return t}}async function hse(t){switch(t.type){case"keyboard:listen-key":{L.set(hn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{L.sub(hn,()=>{const n=L.get(hn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const fE=ue(z.zero(8));function pse(t){t.io.leds!==null&&L.set(fE,z.fromUnsigned(t.io.leds,8))}async function mse(t){switch(t.type){case"leds:update":{await ki("bus.pio->leds",2),L.set(fE,t.state),await qn("bus.pio->leds");return}default:return t.type}}const Zv=ue(!1),Qv=ue(!1);function gse(t){return t==="memory-to-mbr"?"M 800 249 L 629 249":"M 629 249 L 800 249"}const Sc=5,zM=(t,e=Sc)=>{try{const n=gse(t);return n?Fe([{key:"bus.data.path",from:n},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:e,easing:"easeInOutSine"}):Promise.resolve()}catch(n){return console.warn("Error en drawExternalDataPath:",n),Promise.resolve()}},UM=()=>Fe({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function vse(){return"M 610 349 H 800"}const Tw=(t=Sc)=>{try{const e=vse();return Fe([{key:"bus.address.path",from:e},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:t,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawExternalAddressPath:",e),Promise.resolve()}},Ow=()=>Fe({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),VM=(t=Sc)=>{try{return Fe([{key:"bus.rd.path",from:"M 380 420 H 800"},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:t,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawRDControlPath:",e),Promise.resolve()}},yse=()=>{try{return Fe([{key:"bus.wr.path",from:"M 380 440 H 800"},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:Sc,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawWRControlPath:",t),Promise.resolve()}},HM=()=>Fe({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),WM=()=>Fe({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function bse(t){switch(typeof window<"u"&&window.VONSIM_PARALLEL_ANIMATIONS&&window.addEventListener("vonsim:parallel-memory-read-visual",()=>{L.set(Zv,!0),Fe([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{Fe([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),Promise.all([Tw(),(async()=>{rk(),await VM(),sk()})()])}),t.type){case"memory:read":{if(!window.VONSIM_PARALLEL_ANIMATIONS){L.set(Zv,!0),Fe([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{Fe([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})});const e=Sc;await Promise.all([Tw(e),(async()=>{rk(),await VM(e),sk()})()]),await Ow()}return}case"memory:read.ok":{L.set(Sp,ke.from(t.address)),await Fe({key:"memory.operating-cell.color",to:Yt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await zM("memory-to-mbr",Sc),L.set(wc,t.value),await Promise.all([Fe({key:"memory.operating-cell.color",to:Yt.white},{duration:1,easing:"easeOutQuart"}),UM(),Ow(),HM(),WM()]);return}case"memory:write":{L.set(Qv,!0),U6();const e=Sc;await Promise.all([Tw(e),yse()]),V6(),L.set(Qv,!1);return}case"memory:write.ok":{L.set(Sp,ke.from(t.address)),await Wn("cpu.MBR"),await zM("mbr-to-memory"),await Fe({key:"memory.operating-cell.color",to:Yt.mantis[400]},{duration:1,easing:"easeOutQuart"}),L.set(Lv,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([Gn("cpu.MBR"),Fe({key:"memory.operating-cell.color",to:Yt.white},{duration:1,easing:"easeOutQuart"}),UM(),Ow(),HM(),WM()]);return}case"memory:read.error":case"memory:write.error":{Vc(t.error);return}case"memory:write.warning":{jse("Advertencia de Memoria",`${t.warning}`);return}default:return t}}const hE=ue(z.fromUnsigned(255,8)),pE=ue(z.fromUnsigned(0,8)),mE=ue(z.fromUnsigned(0,8)),ey=[ue(z.zero(8)),ue(z.zero(8)),ue(z.zero(8)),ue(z.zero(8)),ue(z.zero(8)),ue(z.zero(8)),ue(z.zero(8)),ue(z.zero(8))];function xse(t){if(t.io.pic){L.set(hE,z.fromUnsigned(t.io.pic.IMR,8)),L.set(pE,z.fromUnsigned(t.io.pic.IRR,8)),L.set(mE,z.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<ey.length;e++)L.set(ey[e],z.fromUnsigned(t.io.pic.lines[e],8))}}async function wse(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await Wd(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await Wn(`pic.${t.register}`),t.register){case"IMR":{L.set(hE,t.value);break}case"IRR":{L.set(pE,t.value);break}case"ISR":{L.set(mE,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));L.set(ey[e],t.value);break}default:return t}await Gn(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await qn("bus.intr");return}case"pic:intr.on":{await ki("bus.intr",10);return}case"pic:int.send":{await Wd(t.number);return}default:return t}}const gE=ue(z.zero(8)),vE=ue(z.zero(8)),yE=ue(z.zero(8)),bE=ue(z.zero(8));function Sse(t){t.io.pio&&(L.set(gE,z.fromUnsigned(t.io.pio.PA,8)),L.set(vE,z.fromUnsigned(t.io.pio.PB,8)),L.set(yE,z.fromUnsigned(t.io.pio.CA,8)),L.set(bE,z.fromUnsigned(t.io.pio.CB,8)))}async function kse(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await Wd(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await Wn(`pio.${t.register}`),t.register){case"PA":{L.set(gE,t.value);break}case"PB":{L.set(vE,t.value);break}case"CA":{L.set(yE,t.value);break}case"CB":{L.set(bE,t.value);break}default:return t.register}await Gn(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const ty=ue([]),ny=ue("");function _se(t){t.io.printer&&(L.set(ty,t.io.printer.buffer.map(e=>z.fromUnsigned(e,8))),L.set(ny,t.io.printer.paper))}async function Cse(t){switch(t.type){case"printer:buffer.add":{L.set(ty,e=>[...e,t.char]);return}case"printer:buffer.pop":{L.set(ty,e=>e.slice(1));return}case"printer:busy.off":{await qn("bus.printer.busy");return}case"printer:busy.on":{await ki("bus.printer.busy",15);return}case"printer:data.read":{await ki("bus.printer.data",15),await qn("bus.printer.data");return}case"printer:paper.print":{L.set(ny,e=>e+t.char);return}case"printer:paper.replace":{L.set(ny,"");return}case"printer:strobe.off":{await qn("bus.printer.strobe");return}case"printer:strobe.on":{await ki("bus.printer.strobe",15);return}default:return t}}const xE=ue("");function Ese(t){"screen"in t.io&&t.io.screen!==null&&L.set(xE,t.io.screen)}async function Ase(t){switch(t.type){case"screen:send-char":{L.set(xE,t.output);return}default:return t.type}}const Cb=ue(z.zero(8));function Nse(t){t.io.switches!==null&&L.set(Cb,z.fromUnsigned(t.io.switches,8))}async function Pse(t){switch(t.type){case"switches:toggle":{L.set(Cb,e=>e.withBit(t.index,!e.bit(t.index))),await ki("bus.switches->pio",2),await qn("bus.switches->pio");return}default:return t}}const iy=ue(z.zero(8)),wE=ue(z.zero(8));function Mse(t){t.io.timer&&(L.set(iy,z.fromUnsigned(t.io.timer.CONT,8)),L.set(wE,z.fromUnsigned(t.io.timer.COMP,8)))}async function Rse(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await Wd(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await Wn(`timer.${t.register}`),t.register){case"CONT":{L.set(iy,t.value);break}case"COMP":{L.set(wE,t.value);break}default:return t.register}await Gn(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await qn("bus.int1");return}case"timer:int.on":{await ki("bus.int1",10);return}case"timer:tick":{L.set(iy,t.cont),await ki("bus.int1",2),await qn("bus.int1");return}default:return t}}const ak=new Set;async function x$(t){Ose(t);const[e]=t.type.split(":",2);switch(ak.add(t.type),e){case"bus":{await Cie(t);break}case"clock":{await Eie(t);break}case"cpu":{await cse(t);break}case"f10":{await use(t);break}case"handshake":{await fse(t);break}case"keyboard":{await hse(t);break}case"leds":{await mse(t);break}case"memory":{await bse(t);break}case"pic":{await wse(t);break}case"pio":{await kse(t);break}case"printer":{await Cse(t);break}case"screen":{await Ase(t);break}case"switches":{await Pse(t);break}case"timer":{await Rse(t);break}default:return e}ak.delete(t.type)}function GM(...t){for(const e of t)if(ak.has(e))return!0;return!1}const Tse={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function Ose(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${Tse[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof z?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof ke?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof Sr?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const pn=new qZ,hn=ue({type:"stopped"});let Uc=null;try{window.VonSimAddNotification&&(Uc=window.VonSimAddNotification)}catch{}function SE(t,e=10){window.VonSimAddNotification?window.VonSimAddNotification(t):e>0&&setTimeout(()=>SE(t,e-1),100)}function Ise(t){const e=t.translate(On().language);$i({title:e,variant:"error"}),Uc?Uc({type:"error",title:"Error de simulacin",message:e}):SE({type:"error",title:"Error de simulacin",message:e})}function jse(t,e){$i({title:t,description:e,variant:"info"}),Uc&&Uc({type:"warning",title:t,message:e})}function Vc(t){if(t&&(Ise(t),t.code==="no-instruction")){L.set(hn,{type:"paused"});return}Xte(),e6(null),Gte(!1),L.set(hn,{type:"stopped",error:t}),L.set(oi,{phase:"stopped",error:t}),iE()}function Fn(){L.set(hn,{type:"paused"}),$6()}function Lse(){const t=rb(On().language,"messages.assemble-error");$i({title:t,variant:"error"}),Uc?Uc({type:"error",title:"Error de ensamblado",message:t}):SE({type:"error",title:"Error de ensamblado",message:t})}function uu(){$i({title:rb(On().language,"messages.invalid-action"),variant:"error"})}function KM(t,e=!1){JZ(t,e),eQ(t,e),dse(t),xse(t),Sse(t),Mse(t),pse(t),_se(t),Ese(t),Nse(t),Wt=0,kc=0,L.set(wp,Wt),L.set(lb,kc),L.set(pt,""),e&&L.set(Ph,[])}let he=null,Kl=0,it=0,ql="",xo=!0,Iw=!1,$n=!1,Wt=0,xt=0,kc=0,Yl="",qM="",YM="",Lf=!1,Mg=!1,Rg="",XM="";async function ac(t){try{for(;;){const e=L.get(hn);if(L.get(Wv)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),L.set(Wv,!1),Vc();break}if(e.type==="stopped"){Kl=0,it=0,ql="";break}if(e.type==="paused"){await new Promise(s=>{const o=L.sub(hn,()=>{o(),s()})});continue}const i=t.next();if(i.done)break;if(i.value&&typeof i.value<"u")await x$(i.value);else continue;if(i.value.type==="cpu:cycle.start"&&(he=i.value.instruction.name,Iw=!!i.value.instruction.willUse.id,$n=!!i.value.instruction.willUse.ri,L.set(XZ,$n),xt=0,L.set(Rn,xt),console.log(" Nueva instruccin iniciada:",he,"- Contador reiniciado a 0"),Lf=!1,Mg=!1,Rg=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"||i.value.type==="cpu:halt"){Kl=0,it=0,xo=!0,ql="",kc++,console.log(`Instrucciones: ${kc}`),L.set(lb,kc),i.value.type==="cpu:halt"?(Wt++,L.set(wp,Wt),L.set(pt,"Ejecucin: Detenido")):(e.until==="cycle-change"||e.until==="end-of-instruction")&&Fn();continue}else i.value.type==="cpu:int.6"?L.set(pt,"Interrupcin: Rutina leer caracter del teclado"):i.value.type==="cpu:int.7"&&(L.set(pt,"Interrupcin: Rutina mostrar por pantalla"),e.until==="cycle-change"&&Fn());if(Kl<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(Kl=3,it=3,L.set(pt,"Ejecucin: MAR  SP")):(L.set(pt,"Captacin: MAR  IP"),it++),e.until==="cycle-change"&&Fn(),Kl++,Wt++,xt++,L.set(Rn,xt)):i.value.type==="cpu:register.update"?(L.set(pt,"Captacin: MBR  read(Memoria[MAR]); IP  IP + 1"),e.until==="cycle-change"&&Fn(),it++,Kl++,Wt++,xt++,L.set(Rn,xt)):i.value.type==="cpu:mbr.get"&&(L.set(pt,"Captacin: IR  MBR"),e.until==="cycle-change"&&Fn(),Kl++,Wt++,xt++,L.set(Rn,xt));else if(i.value.type==="cpu:rd.on"&&it>1?ql="Ejecucin: MBR  read(Memoria[MAR])":i.value.type==="cpu:wr.on"?ql="Ejecucin: write(Memoria[MAR])  MBR":i.value.type==="pio:write.ok"&&(L.set(pt,"Ejecucin: write(PIO[MAR])  MBR"),it++,Wt++,xt++,L.set(Rn,xt)),i.value.type==="cpu:mar.set"){const s=i.value.register,o=s==="ri"?"MBR":s;let a=!1,l=!1;$n&&it===5&&(he==="ADD"||he==="SUB")&&(a=!0),$n&&it===9&&(a=!0),$n&&it===2&&(he==="ADD"||he==="SUB")&&(l=!0),console.log("executeStageCounter:",it),console.log("mbridirmar:",Lf),console.log("resultmbrimar:",Mg),console.log("displayMessageresultmbr:",Rg),console.log("shouldDisplayMessage:",xo),(xo||s==="SP")&&(Mg?L.set(pt,Rg):a?L.set(pt,`Ejecucin: MAR  ${s}`):l?L.set(pt,"Ejecucin: ri  MBR; MAR  MBR"):it===2&&$n&&he==="MOV"?L.set(pt,"Ejecucin: ri  MBR; MAR  IP"):it===4&&$n&&he==="MOV"?L.set(pt,`Ejecucin: MAR  ${s}`):Lf?L.set(pt,"Ejecucin: id  MBR; MAR  IP"):it===2&&$n&&he==="INT"?L.set(pt,"Ejecucin: ri  MBR; MAR  SP"):L.set(pt,`Ejecucin: MAR  ${o}`)),e.until==="cycle-change"&&Fn(),it++,Wt++,xt++,L.set(Rn,xt)}else if(i.value.type==="cpu:register.update"){const s=i.value.register;let o="";xo=!0;let a=!0;s==="SP"?($n&&it===4&&he==="INT"&&(a=!1,xo=!1),he==="PUSH"&&(o="Ejecucin: SP = SP - 1"),(he==="RET"||he==="IRET")&&(o="Ejecucin: SP = SP + 1"),it===3&&he==="POP"&&(o=XM+"; SP = SP + 1")):s==="FLAGS"?(o="Ejecucin: IF = 0",$n&&it===5&&he==="INT"&&(o="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1; IF = 0")):s==="DL"&&he==="INT"?o="Interrupcin: AL  ASCII":s==="right.l"&&he==="INT"?o="Interrupcin: SUB AL, 1":s==="right"&&he==="INT"?o="Interrupcin: ADD BL, 1":s==="ri.l"&&he==="INT"?(o="Interrupcin: MAR  (video)",xo=!1):$n&&it===3&&he==="MOV"?(o="Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1; MAR  ri",a=!1,xo=!1):it===4&&he==="CALL"?a=!1:o=s==="IP"?"Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1":`Ejecucin: MBR  ${s}`,$n&&it===8&&he==="INT"&&(o="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1"),it===2&&he==="CALL"&&(o="Ejecucin: ri  MBR; SP  SP - 1"),it===4&&he==="CALL"&&(o="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1"),console.log("displayMessage:",o),console.log("currentInstructionName:",he),console.log("currentInstructionModeri:",$n),console.log("executeStageCounter:",it),console.log("pause:",a),it++,he!=="DEC"&&he!=="INC"&&he!=="NOT"&&he!=="NEG"&&!(he==="INT"&&it===5)&&(L.set(pt,o),Wt++,xt++,L.set(Rn,xt)),o!=="Interrupcin: MAR  (video)"&&e.until==="cycle-change"&&he!=="DEC"&&he!=="INC"&&he!=="NOT"&&he!=="NEG"&&a&&Fn()}else if(i.value.type==="cpu:alu.execute")he==="CMP"&&(L.set(pt,`Ejecucin: ${qM} ${he} ${Yl} ; write(FLAGS)`),Wt++,xt++,L.set(Rn,xt),e.until==="cycle-change"&&Fn());else if(i.value.type==="cpu:mbr.get"){const s=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register;(String(s)==="right.l"||String(s)==="left.l")&&(Yl="MBR"),($n&&it===3&&(he==="ADD"||he==="SUB"||he==="CMP")||it===3&&he==="POP")&&(Lf=!0),he==="POP"&&it===3&&(XM=`Ejecucin: ${s}  MBR`),Lf||String(s)!=="ri.l"&&String(s)!=="right.l"&&String(s)!=="left.l"&&(L.set(pt,`Ejecucin: ${s}  MBR`),Wt++,xt++,L.set(Rn,xt),e.until==="cycle-change"&&Fn())}else if(i.value.type==="cpu:register.buscopy"){console.log(" Evento cpu:register.buscopy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");if(he==="MOV"){const a=`Ejecucin: ${o}  ${s}`;L.set(pt,a),Wt++,xt++,L.set(Rn,xt),console.log(" Ciclo contabilizado para MOV register.buscopy - cycleCount:",Wt,"currentInstructionCycleCount:",xt)}}else if(i.value.type==="cpu:register.copy"){console.log(" Evento cpu:register.copy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");let a="";he==="DEC"||he==="INC"||he==="NOT"||he==="NEG"?a=s==="result"?`${he} ${Yl}`:s:(a=s==="result"?`${o} ${he} ${Yl}`:s,YM=`${s} ${he} ${Yl}; write(FLAGS)`),he==="CMP"&&String(o)==="right"&&(Yl=s),he==="CMP"&&String(o)==="left"&&(qM=s);let l=`Ejecucin: ${o}  ${a}`;(he==="ADD"||he==="SUB"||he==="CMP")&&(l+="; write(FLAGS)"),s==="ri"&&o==="IP"?(l="Ejecucin: IP  MBR",he==="CALL"&&(l="Ejecucin: IP  ri"),L.set(pt,l),e.until==="cycle-change"&&Fn()):o==="left"&&he==="INT"?l="ADD BL, 1":s==="result"&&he==="INT"?e.until==="cycle-change"&&Fn():s==="IP"&&o==="id"?(l="Ejecucin: id  IP",L.set(pt,l),e.until==="cycle-change"&&Fn()):s==="id"&&o==="ri"?(l="Ejecucin: MAR  id",xo=!1,L.set(pt,l)):s==="MBR"&&o==="ri"?(l="Ejecucin: MAR  MBR",L.set(pt,l)):s==="id"&&o==="IP"?(l="Ejecucin: IP  MBR",L.set(pt,l),e.until==="cycle-change"&&Fn()):s==="BL"&&o==="ri"||s==="BX"&&o==="ri"?(l="Ejecucin: MAR  BL",L.set(pt,l),xo=!1,it++):String(s)==="right.l"&&(Yl=s),console.log("cpu:register.copy - sourceRegister:",s,"destRegister:",o,"currentInstructionName:",he),he==="MOV"?(L.set(pt,l),Wt++,xt++,L.set(Rn,xt),console.log(" Ciclo contabilizado para MOV register.copy - cycleCount:",Wt,"currentInstructionCycleCount:",xt)):o!=="result"&&o!=="left"&&o!=="right"&&s!=="result"&&s!=="left"&&s!=="right"||s==="result"&&o!=="MBR"?(L.set(pt,l),Wt++,xt++,L.set(Rn,xt),console.log(" Ciclo contabilizado para register.copy - cycleCount:",Wt,"currentInstructionCycleCount:",xt)):console.log(" Ciclo NO contabilizado para register.copy - condicin no cumplida")}else if(i.value.type==="bus:reset"&&it>1&&(he==="MOV"||he==="ADD"||he==="SUB"||he==="CMP"||he==="CALL"||he==="INT"||he==="PUSH"||he==="POP"||he==="IN"||he==="RET")){he==="RET"&&(ql="Ejecucin: MBR  read(Memoria[MAR])"),he==="IN"&&(ql="Ejecucin: MBR  read(PIO[MAR])");let s=!1;($n&&(it===4||it===8)&&he==="INT"||it===3&&he==="MOV"||Iw&&it===4&&(he==="CALL"||he==="ADD"||he==="SUB"||he==="CMP"))&&(s=!0),console.log("executeStageCounter:",it),s||(L.set(pt,ql),Wt++,xt++,L.set(Rn,xt),e.until==="cycle-change"&&Fn())}else if(i.value.type==="cpu:mbr.set"){const s=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register==="result.l"?YM:i.value.register;$n&&it===5&&(he==="ADD"||he==="SUB")?(Mg=!0,Rg=`Ejecucin: MBR  ${s} ; MAR  ri`):(L.set(pt,`Ejecucin: MBR  ${s}`),e.until==="cycle-change"&&Fn(),it++,Wt++,xt++,L.set(Rn,xt))}}else L.set(pt,"");console.log(`Ciclos ejecutados: ${Wt}`),L.set(wp,Wt);const r=new CustomEvent("instructionChange",{detail:{instruction:he,modeid:Iw,moderi:$n}});window.dispatchEvent(r),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until:i.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction")&&Fn()}t.return()}catch(e){const n=en.from(e);Vc(n)}}async function Dse(...t){const e=t[0],n=L.get(hn);switch(e){case"cpu.run":{if(n.type==="running")return uu();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;Wt=0,kc=0,L.set(wp,Wt),L.set(lb,kc),L.set(Ph,[]);const r=window.codemirror.state.doc.toString(),s=vD(r);if(!s.success)return Lse();const o=s.instructions.map(w=>w.instruction),a=o.some(w=>["CALL","RET","INT","IRET","POP","PUSH"].includes(w));L.set(EC,a);const l=o.includes("INT");L.set(f2,l);const c=s.instructions.some(w=>w.instruction==="INT"?w.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===6||S.value.value===7:!1):!1),u=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===48||S.value.value===50:!1):!1),d=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value>=32&&S.value.value<=43;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _>=32&&_<=43}}catch(_){console.warn("No se pudo resolver operando PIC:",_)}}return!1}):!1),f=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===64||S.value.value===65;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===64||_===65}}catch(_){console.warn("No se pudo resolver operando Handshake:",_)}}return!1}):!1),p=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===16||S.value.value===17;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===16||_===17}}catch(_){console.warn("No se pudo resolver operando Timer:",_)}}return!1}):!1),g=On();L.set(es,w=>({...w,devices:{...w.devices,keyboardAndScreen:c,pio:u?"switches-and-leds":f?"printer":w.devices.pio,handshake:f?"printer":w.devices.handshake,pic:d||w.devices.pic,"switches-and-leds":u}})),L.set(_D,c);const m=l||d||f||p||c;L.set(f2,m),console.log("Detectado - PIC:",d,"Handshake:",f,"Timer:",p,"INT:",l),console.log("Habilitando vector de interrupciones:",m),pn.loadProgram({program:s,data:g.dataOnLoad,devices:{keyboardAndScreen:On().devices.keyboardAndScreen??!1,pic:On().devices.pic??!1,pio:On().devices.pio??null,handshake:On().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const v=s.instructions.filter(w=>w.type==="instruction").flatMap(w=>{const S=w.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h";if(N.isLabel())return N.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h"}}return""}).join(", "),_=`${w.instruction} ${S}`.trim(),E=[{address:w.start.value,name:_,length:w.length.toString().trim()}];if(w.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=w.start.value+1,N=w.operands.filter((M,I)=>w.length===3?I===0&&M.type==="number-expression":M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const I=M.value;if(I.isNumberLiteral())return I.value.toString(16)+"h";if(I.isLabel())return I.value}else if(M.type==="direct-address"){const I=M.value;if(I.isNumberLiteral())return I.value.toString(16)+"h"}return""}).join(", ");E.push({address:C,name:N,length:""})}if(w.length===3){const C=w.start.value+2,N=w.operands.filter(M=>M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const I=M.value;if(I.isNumberLiteral())return I.value.toString(16)+"h"}return""}).join(" ");E.push({address:C,name:N,length:""})}return E}),y=s.data.filter(w=>w.type==="data-directive").flatMap(w=>{const S=w.start.value;return w.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,C)=>({address:S+C,label:C===0&&w.label||null,value:E}))});console.log("Direcciones de las instrucciones:",v),console.log("Direcciones de los datos:",y),L.set(ED,v),L.set(AD,y.map(w=>({...w,length:""}))),KM(pn.getComputerState());const x=["Start CPU",{until:i,devices:On().devices,language:On().language,animations:On().animations?"yes":"no"}];t6.capture(...x),L.set(hn,{type:"running",until:i,waitingForInput:!1}),ac(pn.startCPU()),$se(),Fse()}else L.set(hn,{type:"running",until:i,waitingForInput:!1}),F6();return}case"cpu.stop":{const i=t[1];if(i){Vc(),KM(pn.getComputerState(),i);const{anim:r}=await pD(async()=>{const{anim:o}=await Promise.resolve().then(()=>_ie);return{anim:o}},void 0);await Promise.all([r({key:"cpu.internalBus.data.opacity",to:0},{duration:.1,easing:"easeInSine"}),r({key:"cpu.internalBus.address.opacity",to:0},{duration:.1,easing:"easeInSine"})]);const s=new CustomEvent("instructionChange",{detail:{instruction:"",modeid:!1,moderi:!1}});window.dispatchEvent(s)}else Fn();return}case"f10.press":{if(!pn.devices.f10.connected()||n.type!=="running")return uu();if(GM("f10:press"))return;ac(pn.devices.f10.press());return}case"switch.toggle":{if(!pn.devices.switches.connected())return uu();if(GM("switches:toggle"))return;const i=t[1];n.type==="running"?ac(pn.devices.switches.toggle(i)):L.set(Cb,r=>r.withBit(i,!r.bit(i)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return uu();pn.devices.keyboard.readChar(z.fromChar(t[1])),L.set(hn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!pn.devices.screen.connected())return uu();ac(pn.devices.screen.clear());return}case"printer.clean":{if(!pn.devices.printer.connected())return uu();ac(pn.devices.printer.clear());return}default:return e}}async function $se(){if(pn.devices.clock.connected())for(;L.get(hn).type!=="stopped";){const t=On().clockSpeed;await Fe({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),ac(pn.devices.clock.tick())}}async function Fse(){if(pn.devices.printer.connected()){for(;L.get(hn).type!=="stopped";){const t=On().printerSpeed;await Fe([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Fe({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await ac(pn.devices.printer.print())}if(L.get(hn).type==="stopped"&&pn.devices.printer.hasPending())for(;L.get(hn).type!=="stopped"||pn.devices.printer.hasPending();){const t=On().printerSpeed;await Fe([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Fe({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=pn.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await x$(n.value),n=e.next()}}}function Ln(){const t=rt(hn),e=cD(),n=b.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:Dse,devices:n}}function Bse({className:t}){const e=Xt(),{status:n,dispatch:i}=Ln(),[r,s]=b.useState(null),[o,a]=b.useState("desktop");b.useEffect(()=>{const m=()=>{const v=window.innerWidth;v<=480?a("mobile"):v<=768?a("compact"):v<=1024?a("tablet"):a("desktop")};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),b.useEffect(()=>{n.type!=="running"&&s(null)},[n.type]);const l=b.useCallback(()=>{n.type!=="running"&&(s("cycle-change"),i("cpu.run","cycle-change"))},[n.type,i]);yu("F7",m=>{m.preventDefault(),l()},void 0,[l]);const c=b.useCallback(()=>{n.type!=="running"&&(s("end-of-instruction"),i("cpu.run","end-of-instruction"))},[n.type,i]);yu("F8",m=>{m.preventDefault(),c()},void 0,[c]);const u=b.useCallback(()=>{n.type!=="running"&&(s("infinity"),i("cpu.run","infinity"))},[n.type,i]);yu("F4",m=>{m.preventDefault(),u()},void 0,[u]);const d=b.useCallback(()=>{n.type==="running"&&i("cpu.stop",!1)},[n.type,i]),f=b.useCallback(()=>{n.type!=="running"&&i("cpu.stop",!0)},[n.type,i]);yu("F9",m=>{m.preventDefault(),f()},void 0,[f]),yu(" ",m=>{const v=m.target;v.tagName==="INPUT"||v.tagName==="TEXTAREA"||v.contentEditable==="true"||(m.preventDefault(),n.type==="running"&&d())},{event:"keydown"},[n.type,d]);const p=o==="desktop"||o==="tablet",g=o==="desktop";return h.jsxs("div",{"data-testid":"controls",className:Q("flex items-center justify-center gap-4 rounded-xl border border-stone-700 bg-stone-900/80 shadow-lg",o==="mobile"?"gap-2 px-2 py-0.5":o==="compact"?"gap-3 px-2 py-1":"gap-4 px-3 py-1",t),children:[n.type==="running"&&r==="cycle-change"?h.jsxs("button",{"data-testid":"cycle-button",onClick:d,title:e("control.action.pause"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx($e,{icon:Nh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"cycle-button",disabled:n.type==="running",onClick:l,title:e("control.action.run.cycle-change"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",n.type==="running"&&n.until==="cycle-change"&&"animate-pulse-glow-mantis",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx($e,{icon:gp,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.cycle-change")})]}),n.type==="running"&&r==="end-of-instruction"?h.jsxs("button",{"data-testid":"new-button",onClick:d,title:e("control.action.pause"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx($e,{icon:Nh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"new-button",disabled:n.type==="running",onClick:c,title:e("control.action.run.end-of-instruction"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-blue-600/20 focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-50",n.type==="running"&&n.until==="end-of-instruction"&&"animate-pulse-glow-blue",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx($e,{icon:pC,size:"lg",className:"text-blue-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.end-of-instruction")})]}),n.type==="running"&&r==="infinity"?h.jsxs("button",{"data-testid":"open-button",onClick:d,title:e("control.action.pause"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx($e,{icon:Nh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"open-button",disabled:n.type==="running",onClick:u,title:e("control.action.run.infinity"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-orange-600/20 focus-visible:ring-2 focus-visible:ring-orange-400 disabled:opacity-50",n.type==="running"&&n.until==="infinity"&&"animate-pulse-glow-orange",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx($e,{icon:LX,size:"lg",className:"text-orange-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.infinity")})]}),h.jsxs("button",{"data-testid":"assemble-button",onClick:f,disabled:n.type==="stopped"||n.type==="running",title:e("control.action.reset"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx($e,{icon:KL,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.reset")})]})]})}const w$=b.memo(({currentPhase:t="idle",className:e})=>{const[n,i]=b.useState("idle"),[r,s]=b.useState(!1);b.useEffect(()=>{if(t!=="idle"){i(t);const a=setTimeout(()=>i("idle"),1e3);return()=>clearTimeout(a)}},[t]);const o=[{id:"captacion",label:"Captacin",color:"text-blue-400",icon:"",descripcion:"Captando instruccin desde memoria",pasos:["IP apunta a la direccin de memoria, el MAR recibe la direccin del IP","Se lee el contenido de memoria y se almacena en el MBR, IP se incrementa automticamente","La instruccin se transfiere al IR"]},{id:"ejecucion",label:"Ejecucin",color:"text-green-400",icon:"",descripcion:"Ejecutando instruccin",subfases:[{id:"operandos",label:"Obtencin de operandos",color:"text-yellow-400",icon:"",descripcion:"Obteniendo operandos de la instruccin",pasos:["Se identifican y preparan los operandos necesarios para la operacin."]},{id:"alu",label:"Procesar en ALU",color:"text-green-400",icon:"",descripcion:"Procesando en la ALU",pasos:["La ALU ejecuta la operacin aritmtica o lgica con los operandos."]},{id:"escritura",label:"Escribir resultado",color:"text-purple-400",icon:"",descripcion:"Escribiendo resultado en registros",pasos:["El resultado de la operacin se almacena en el registro destino."]}]}];return h.jsxs("div",{className:Q("flex flex-col gap-2 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 p-3 shadow-lg ring-1 ring-stone-300","min-w-[280px] max-w-[320px]",e),children:[h.jsx("div",{className:"mb-2 flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"CICLO CPU"}),h.jsx("button",{onClick:()=>s(!r),className:Q("rounded border px-2 py-1 text-[10px] font-bold transition-all duration-200",r?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300 hover:border-stone-400 hover:bg-stone-700"),children:r?"":"+"})]})}),h.jsx("div",{className:"mt-2 flex items-center justify-center gap-2",children:o.map((a,l)=>h.jsxs("div",{className:"flex items-center",children:[h.jsxs("div",{className:Q("flex cursor-pointer flex-col items-center gap-1 rounded border-2 px-2 py-1 transition-all duration-200","hover:border-stone-300 hover:bg-stone-700",t===a.id?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300",n===a.id&&"animate-pulse"),onClick:()=>{var c;if(r)if(a.subfases){let u="";a.subfases.forEach(d=>{u+=`${d.label}
${d.descripcion}
Pasos:
${d.pasos.map((f,p)=>`${p+1}. ${f}`).join(`
`)}`,u+=`

`}),alert(u)}else alert(`${a.label}

${a.descripcion}

Pasos:
${(c=a.pasos)==null?void 0:c.map((u,d)=>`${d+1}. ${u}`).join(`
`)}`)},children:[h.jsx("div",{className:Q("text-lg transition-transform duration-300",t===a.id&&"scale-110"),children:a.icon}),h.jsx("span",{className:Q("text-[10px] font-bold uppercase tracking-wide transition-colors",t===a.id?"text-stone-950":"text-stone-300"),children:a.label}),h.jsx("span",{className:"max-w-16 text-center text-[9px] leading-tight text-stone-500",children:a.descripcion})]}),l<o.length-1&&h.jsx("div",{className:"mx-1 font-bold text-stone-400",children:""})]},a.id))}),r&&h.jsx("div",{className:"mt-2 rounded border-2 border-stone-600 bg-stone-800/80 p-2",children:h.jsxs("div",{className:"text-xs text-stone-300",children:[h.jsx("div",{className:"mb-1 font-bold text-stone-200",children:"Estado actual:"}),t==="fetch"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Leyendo instruccin desde memoria"})]}),t==="decode"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Interpretando cdigo de operacin"})]}),t==="execute"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Ejecutando operacin en ALU"})]}),t==="idle"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-stone-400"}),h.jsx("span",{children:"CPU en espera de instrucciones"})]})]})}),h.jsx("div",{className:"text-center text-[8px] text-stone-500",children:"Haz clic en las fases para ver detalles"})]})});w$.displayName="ExecutionPhases";const zse=b.memo(({steps:t,onStepChange:e,onComplete:n,className:i})=>{const[r,s]=b.useState(0),[o,a]=b.useState(!1),[l,c]=b.useState(2e3),u=t[r],d=r===0,f=r===t.length-1,p=b.useCallback(x=>{const w=Math.max(0,Math.min(x,t.length-1));s(w),e==null||e(w)},[t.length,e]),g=b.useCallback(()=>{f?(a(!1),n==null||n()):p(r+1)},[r,f,p,n]),m=b.useCallback(()=>{d||p(r-1)},[r,d,p]),v=b.useCallback(()=>{p(0),a(!1)},[p]),y=b.useCallback(()=>{a(!o)},[o]);return o&&!f&&setTimeout(g,l),h.jsxs("div",{className:Q("rounded-lg border border-stone-600 bg-stone-900 p-4",i),children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:"Modo Paso a Paso"}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("span",{className:"text-sm text-stone-400",children:["Paso ",r+1," de ",t.length]})})]}),h.jsx(w$,{currentPhase:u==null?void 0:u.phase,className:"mb-4"}),h.jsxs("div",{className:"mb-4 rounded-lg bg-stone-800 p-4",children:[h.jsx("div",{className:"mb-2 flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-mantis-400",children:u==null?void 0:u.title})}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:u==null?void 0:u.description}),(u==null?void 0:u.instruction)&&h.jsxs("div",{className:"mb-3 rounded bg-stone-700 p-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Instruccin:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:u.instruction})]}),(u==null?void 0:u.registers)&&h.jsx("div",{className:"mb-3 grid grid-cols-2 gap-4",children:h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Registros:"}),h.jsx("div",{className:"mt-1 space-y-1",children:Object.entries(u.registers).map(([x,w])=>h.jsxs("div",{className:"flex justify-between text-xs",children:[h.jsxs("span",{className:"text-stone-300",children:[x,":"]}),h.jsx("span",{className:"font-mono text-mantis-400",children:w})]},x))})]})}),(u==null?void 0:u.memory)&&h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Memoria:"}),h.jsx("div",{className:"mt-1 grid grid-cols-4 gap-1",children:Object.entries(u.memory).map(([x,w])=>h.jsxs("div",{className:"text-center text-xs",children:[h.jsx("div",{className:"text-stone-500",children:x}),h.jsx("div",{className:"font-mono text-mantis-400",children:w})]},x))})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(mt,{variant:"outline",size:"sm",onClick:v,disabled:d&&!o,className:"flex items-center gap-1",children:[h.jsx($e,{icon:KL}),"Reiniciar"]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(mt,{variant:"outline",size:"sm",onClick:m,disabled:d,className:"flex items-center gap-1",children:[h.jsx($e,{icon:YL}),"Anterior"]}),h.jsxs(mt,{variant:o?"secondary":"default",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx($e,{icon:o?Nh:gp}),o?"Pausar":"Reproducir"]}),h.jsxs(mt,{variant:"outline",size:"sm",onClick:g,disabled:f,className:"flex items-center gap-1",children:["Siguiente",h.jsx($e,{icon:pC})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Velocidad:"}),h.jsxs("select",{value:l,onChange:x=>c(Number(x.target.value)),className:"rounded border border-stone-600 bg-stone-800 px-2 py-1 text-xs",children:[h.jsx("option",{value:1e3,children:"Rpida"}),h.jsx("option",{value:2e3,children:"Normal"}),h.jsx("option",{value:4e3,children:"Lenta"})]})]})]}),h.jsx("div",{className:"mt-4",children:h.jsx("div",{className:"h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(r+1)/t.length*100}%`}})})})]})});zse.displayName="StepByStepMode";const Use=b.memo(({from:t,to:e,data:n,duration:i=2e3,className:r,onComplete:s})=>{const[o,a]=b.useState(!1),[l,c]=b.useState(0);return b.useEffect(()=>{a(!0),c(0);const u=Date.now(),d=()=>{const f=Date.now()-u,p=Math.min(f/i,1);c(p),p<1?requestAnimationFrame(d):setTimeout(()=>{a(!1),s==null||s()},500)};requestAnimationFrame(d)},[t,e,n,i,s]),o?h.jsxs("div",{className:Q("pointer-events-none absolute inset-0",r),children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"dataFlowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${t} L ${e}`,stroke:"url(#dataFlowGradient)",strokeWidth:"3",strokeDasharray:"10,5",strokeDashoffset:20-l*20,fill:"none",className:"animate-pulse"})]}),["Read","Write"].includes(n)?(()=>{const[u,d]=t.split(" ").map(Number),[f,p]=e.split(" ").map(Number),g=u+(f-u)*l,m=d+(p-d)*l;return h.jsx("div",{className:`absolute z-[100] select-none text-lg font-extrabold ${n==="Read"?"text-red-500":"text-orange-400"}`,style:{left:g,top:m-32,textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:o?1:0,pointerEvents:"none"},children:n})})():h.jsxs("div",{className:Q("absolute rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white","border border-mantis-400 shadow-lg","transition-all duration-300 ease-out"),style:{left:`${l*100}%`,transform:"translateX(-50%)",top:"50%",marginTop:"-12px"},children:[n,h.jsx("div",{className:"absolute -top-1 left-1/2 size-0 -translate-x-1/2 border-x-4 border-b-4 border-transparent border-b-mantis-500"})]})]}):null});Use.displayName="DataFlowAnimation";const Vse={"fetch-decode-execute":{title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instruccin",steps:[{id:"fetch",title:"Fase Fetch",description:"La CPU lee la instruccin desde memoria",duration:2e3,animation:{type:"flow",targets:["IP","MAR","MBR"],data:{from:"IP",to:"MBR",value:"A1"}}},{id:"decode",title:"Fase Decode",description:"La CPU interpreta la instruccin",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{instruction:"MOV AL, 5"}}},{id:"execute",title:"Fase Execute",description:"La CPU ejecuta la operacin",duration:2e3,animation:{type:"transform",targets:["AL"],data:{newValue:"05"}}}]},"memory-access":{title:"Acceso a Memoria",description:"Cmo la CPU lee y escribe en memoria RAM",steps:[{id:"address-setup",title:"Configurar Direccin",description:"La CPU coloca la direccin en el MAR",duration:1500,animation:{type:"highlight",targets:["MAR"],data:{address:"A0"}}},{id:"memory-read",title:"Lectura de Memoria",description:"El contenido se transfiere al MBR",duration:1500,animation:{type:"flow",targets:["memory-cell-A0","MBR"],data:{from:"memory",to:"MBR",value:"42"}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se mueven al registro destino",duration:1500,animation:{type:"flow",targets:["MBR","AL"],data:{from:"MBR",to:"AL",value:"42"}}}]},"register-transfer":{title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU",steps:[{id:"source-read",title:"Leer Registro Origen",description:"El valor se lee del registro origen",duration:1e3,animation:{type:"highlight",targets:["AL"],data:{value:"25"}}},{id:"bus-transfer",title:"Transferencia por Bus",description:"Los datos viajan por el bus interno",duration:1500,animation:{type:"flow",targets:["AL","BL"],data:{from:"AL",to:"BL",value:"25"}}},{id:"destination-write",title:"Escribir Registro Destino",description:"El valor se almacena en el registro destino",duration:1e3,animation:{type:"transform",targets:["BL"],data:{newValue:"25"}}}]},"alu-operation":{title:"Operacin ALU",description:"Proceso de operacin aritmtica o lgica",steps:[{id:"operand-load",title:"Cargar Operandos",description:"Los operandos se cargan en la ALU",duration:1500,animation:{type:"highlight",targets:["AL","BL"],data:{operand1:"10",operand2:"05"}}},{id:"operation-execute",title:"Ejecutar Operacin",description:"La ALU realiza la operacin",duration:2e3,animation:{type:"sequence",targets:["ALU"],data:{operation:"ADD",result:"15"}}},{id:"result-store",title:"Almacenar Resultado",description:"El resultado se guarda en el registro destino",duration:1500,animation:{type:"transform",targets:["AL"],data:{newValue:"15"}}}]},"bus-communication":{title:"Comunicacin por Bus",description:"Cmo los componentes se comunican a travs del bus",steps:[{id:"bus-request",title:"Solicitud de Bus",description:"Un componente solicita acceso al bus",duration:1e3,animation:{type:"highlight",targets:["CPU"],data:{requesting:!0}}},{id:"bus-grant",title:"Concesin de Bus",description:"El bus se concede al componente solicitante",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{granted:!0}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se transfieren por el bus",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{data:"A1B2",direction:"CPU-to-Memory"}}},{id:"bus-release",title:"Liberacin de Bus",description:"El bus se libera para otros componentes",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{released:!0}}}]}},S$=b.memo(({concept:t,onClose:e,className:n})=>{const[i,r]=b.useState(0),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=Vse[t],f=d.steps[i],p=i===0,g=i===d.steps.length-1;b.useEffect(()=>{if(s){const _=setTimeout(()=>{g?o(!1):r(E=>E+1)},f.duration);return()=>clearTimeout(_)}},[s,i,g,f.duration]);const m=b.useCallback(()=>{g||r(_=>_+1)},[g]),v=b.useCallback(()=>{p||r(_=>_-1)},[p]),y=b.useCallback(()=>{r(0),o(!1)},[]),x=b.useCallback(()=>{o(!s)},[s]),w=b.useCallback(()=>{l(!a)},[a]),S=()=>{const{type:_,targets:E,data:C}=f.animation;switch(_){case"highlight":return h.jsxs("div",{className:"relative",children:[E.map((N,M)=>h.jsx("div",{className:"absolute inset-0 animate-pulse rounded border-2 border-mantis-400 bg-mantis-400/20",style:{animationDelay:`${M*200}ms`}},M)),C&&h.jsx("div",{className:"absolute right-2 top-2 rounded bg-mantis-500 px-2 py-1 text-xs text-white",children:Object.entries(C).map(([N,M])=>h.jsxs("div",{children:[N,": ",String(M)]},N))})]});case"flow":return h.jsxs("div",{className:"relative",children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${"from"in C&&C.from||"0,0"} L ${"to"in C&&C.to||"100,100"}`,stroke:"url(#flowGradient)",strokeWidth:"3",strokeDasharray:"10,5",className:"animate-pulse"})]}),"value"in C&&C.value&&h.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:h.jsx("div",{className:"rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:C.value})})]});case"transform":return h.jsxs("div",{className:"relative",children:[E.map((N,M)=>h.jsx("div",{className:"absolute inset-0 animate-ping rounded bg-mantis-400/30",style:{animationDelay:`${M*300}ms`}},M)),"newValue"in C&&C.newValue&&h.jsxs("div",{className:"absolute left-2 top-2 rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:["Nuevo: ",C.newValue]})]});case"sequence":return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"rounded-lg bg-mantis-500 px-4 py-2 font-mono text-sm text-white",children:"operation"in C&&C.operation?C.operation:"Operacin"})}),"result"in C&&C.result&&h.jsxs("div",{className:"absolute bottom-2 right-2 rounded bg-green-500 px-2 py-1 font-mono text-xs text-white",children:["= ",C.result]})]});default:return null}};return h.jsx("div",{className:Q("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",a&&"p-0",n),children:h.jsxs("div",{className:Q("rounded-lg border border-stone-600 bg-stone-900 shadow-xl",a?"size-full":"max-h-[90vh] w-full max-w-4xl"),children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:d.title}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(mt,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"text-stone-400 hover:text-mantis-400",children:h.jsx($e,{icon:qL})}),h.jsx(mt,{variant:"ghost",size:"sm",onClick:w,className:"text-stone-400 hover:text-mantis-400",children:h.jsx($e,{icon:a?mX:MX})}),h.jsx(mt,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:""})]})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-400",children:[h.jsxs("span",{children:["Paso ",i+1," de ",d.steps.length]}),h.jsx("span",{children:""}),h.jsxs("span",{children:[f.duration/1e3,"s"]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(i+1)/d.steps.length*100}%`}})})]}),h.jsxs("div",{className:"flex-1 p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:f.title}),h.jsx("p",{className:"text-sm text-stone-300",children:f.description})]}),h.jsxs("div",{className:"relative h-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:[S(),c&&h.jsxs("div",{className:"absolute left-2 top-2 max-w-xs rounded border border-stone-600 bg-stone-900/90 p-3",children:[h.jsx("h4",{className:"mb-2 font-medium text-mantis-400",children:"Informacin"}),h.jsx("p",{className:"text-xs text-stone-300",children:d.description}),h.jsxs("div",{className:"mt-2 text-xs text-stone-400",children:[h.jsxs("div",{children:["Tipo de animacin: ",f.animation.type]}),h.jsxs("div",{children:["Elementos: ",f.animation.targets.join(", ")]})]})]})]})]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(mt,{variant:"outline",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx($e,{icon:bX}),"Reiniciar"]}),h.jsx(mt,{variant:"outline",size:"sm",onClick:v,disabled:p,className:"flex items-center gap-1",children:"Anterior"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(mt,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-1",children:[h.jsx($e,{icon:s?Nh:gp}),s?"Pausar":"Reproducir"]}),h.jsx(mt,{variant:"outline",size:"sm",onClick:m,disabled:g,className:"flex items-center gap-1",children:"Siguiente"})]})]})})]})})});S$.displayName="ConceptVisualizer";const Hse=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Aprende cmo funciona una CPU y sus componentes principales",difficulty:"beginner",estimatedTime:10,steps:[{id:"intro",title:"Introduccin a la CPU",description:"Qu es una CPU y para qu sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos.",type:"explanation",completed:!1},{id:"registers",title:"Registros de la CPU",description:"Los registros son memoria rpida dentro de la CPU",content:"Los registros almacenan datos temporalmente durante la ejecucin. Son ms rpidos que la RAM pero tienen menos capacidad.",type:"explanation",completed:!1},{id:"program-counter",title:"Puntero de Instruccin",description:"El IP indica la siguiente instruccin a ejecutar",content:"El Puntero de Instruccin (IP) se incrementa automticamente despus de cada instruccin.",type:"explanation",completed:!1}]},{id:"memory-basics",title:"Memoria RAM",description:"Comprende cmo funciona la memoria principal",difficulty:"beginner",estimatedTime:8,steps:[{id:"memory-intro",title:"Qu es la Memoria RAM?",description:"La memoria de acceso aleatorio",content:"La RAM almacena programas y datos temporalmente. Cada ubicacin tiene una direccin nica.",type:"explanation",completed:!1},{id:"memory-access",title:"Acceso a Memoria",description:"Cmo la CPU lee y escribe en memoria",content:"La CPU usa el bus de direcciones para especificar qu celda de memoria acceder.",type:"explanation",completed:!1},{id:"memory-quiz",title:"Quiz: Direccionamiento",description:"Pon a prueba tu conocimiento",content:"Responde correctamente para continuar.",type:"quiz",exercise:{question:"Cuntas direcciones de memoria tiene VonSim8?",options:["128 bytes","256 bytes","512 bytes","1024 bytes"],correctAnswer:1,explanation:"VonSim8 tiene 256 bytes de memoria (direcciones 00-FF en hexadecimal)."},completed:!1}]},{id:"instruction-cycle",title:"Ciclo de Instruccin",description:"Ciclo bsico de ejecucin de instrucciones",difficulty:"intermediate",estimatedTime:15,steps:[{id:"cycle-intro",title:"El Ciclo de Instruccin",description:"Las dos fases principales",content:"Cada instruccin pasa por dos fases: Fetch (leer) y Execute (ejecutar). La decodificacin est incluida en la ejecucin.",type:"explanation",completed:!1},{id:"fetch-phase",title:"Fase Fetch",description:"Leer la instruccin de memoria",content:"La CPU lee la instruccin desde la direccin apuntada por el IP.",type:"explanation",completed:!1},{id:"execute-phase",title:"Fase Execute",description:"Ejecutar la operacin",content:"La CPU realiza la operacin especificada por la instruccin.",type:"explanation",completed:!1}]}],k$=b.memo(({tutorial:t,onComplete:e,onClose:n,className:i})=>{var T,H;const[r,s]=b.useState(0),[o,a]=b.useState(t.steps),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[f,p]=b.useState(""),[g,m]=b.useState(null),v=o[r],y=r===0,x=r===o.length-1,S=o.filter(D=>D.completed).length/o.length*100,_=b.useCallback(()=>{e==null||e(t.id)},[t.id,e]),E=b.useCallback(()=>{x?_():(s(D=>D+1),m(null),p(""))},[x,_]),C=b.useCallback(()=>{y||(s(D=>D-1),m(null),p(""))},[y]),N=b.useCallback(()=>{a(D=>D.map((K,X)=>X===r?{...K,completed:!0}:K))},[r]),M=b.useCallback(()=>{if(!v.exercise)return;const D=f===v.exercise.correctAnswer.toString();m({correct:D,message:D?"Correcto!":`Incorrecto. ${v.exercise.explanation}`}),D&&(N(),setTimeout(()=>{E()},2e3))},[v,f,N,E]);b.useEffect(()=>{if(l&&v.type==="explanation"){const D=setTimeout(()=>{x?c(!1):E()},5e3);return()=>clearTimeout(D)}},[l,r,x,v.type,E]);const I=D=>{switch(D){case"beginner":return"text-blue-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-purple-400";default:return"text-stone-400"}},O=D=>{switch(D){case"beginner":return id;case"intermediate":return cm;case"advanced":return XL;default:return id}};return h.jsx("div",{className:Q("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",i),children:h.jsxs("div",{className:"max-h-[90vh] w-full max-w-2xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:t.title}),h.jsx(mt,{variant:"ghost",size:"sm",onClick:n,className:"text-stone-400 hover:text-white",children:""})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx($e,{icon:O(t.difficulty),className:I(t.difficulty)}),h.jsx("span",{className:I(t.difficulty),children:t.difficulty==="beginner"?"Bsico":t.difficulty==="intermediate"?"Intermedio":"Avanzado"})]}),h.jsx("span",{className:"text-stone-400",children:""}),h.jsxs("span",{className:"text-stone-400",children:[t.estimatedTime," min"]}),h.jsx("span",{className:"text-stone-400",children:""}),h.jsxs("span",{className:"text-stone-400",children:["Paso ",r+1," de ",o.length]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${S}%`}})})]}),h.jsxs("div",{className:"max-h-96 overflow-y-auto p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:v.title}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:v.description}),h.jsx("div",{className:"text-sm leading-relaxed text-stone-400",children:v.content})]}),v.type==="exercise"||v.type==="quiz"?h.jsxs("div",{className:"rounded-lg border border-stone-600 bg-stone-800 p-4",children:[h.jsx("h4",{className:"mb-3 font-medium text-white",children:(T=v.exercise)==null?void 0:T.question}),(H=v.exercise)!=null&&H.options?h.jsx("div",{className:"space-y-2",children:v.exercise.options.map((D,K)=>h.jsxs("label",{className:Q("flex cursor-pointer items-center gap-3 rounded border p-3 transition-colors",f===K.toString()?"border-mantis-400 bg-mantis-400/20":"border-stone-600 bg-stone-700 hover:bg-stone-600"),children:[h.jsx("input",{type:"radio",name:"answer",value:K,checked:f===K.toString(),onChange:X=>p(X.target.value),className:"text-mantis-400"}),h.jsx("span",{className:"text-stone-300",children:D})]},K))}):h.jsx("input",{type:"text",value:f,onChange:D=>p(D.target.value),placeholder:"Escribe tu respuesta...",className:"w-full rounded border border-stone-600 bg-stone-700 p-2 text-white"}),g&&h.jsx("div",{className:Q("mt-3 rounded border p-3",g.correct?"border-green-400 bg-green-400/20 text-green-400":"border-red-400 bg-red-400/20 text-red-400"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx($e,{icon:g.correct?ZL:lm}),g.message]})}),v.hints&&v.hints.length>0&&h.jsxs("div",{className:"mt-3",children:[h.jsxs(mt,{variant:"ghost",size:"sm",onClick:()=>d(!u),className:"text-mantis-400 hover:text-mantis-300",children:[h.jsx($e,{icon:id,className:"mr-2"}),u?"Ocultar":"Mostrar"," Pistas"]}),u&&h.jsx("div",{className:"mt-2 rounded border border-stone-600 bg-stone-700 p-3",children:h.jsx("ul",{className:"space-y-1 text-sm text-stone-300",children:v.hints.map((D,K)=>h.jsxs("li",{children:[" ",D]},K))})})]})]}):null]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(mt,{variant:"outline",size:"sm",onClick:C,disabled:y,className:"flex items-center gap-1",children:[h.jsx($e,{icon:YL}),"Anterior"]})}),h.jsx("div",{className:"flex items-center gap-2",children:v.type==="exercise"||v.type==="quiz"?h.jsx(mt,{size:"sm",onClick:M,disabled:!f,className:"bg-mantis-600 hover:bg-mantis-700",children:"Verificar Respuesta"}):h.jsxs(mt,{size:"sm",onClick:E,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700",children:[x?"Completar Tutorial":"Siguiente",!x&&h.jsx($e,{icon:pC})]})})]})})]})})});k$.displayName="InteractiveTutorial";const _$=b.memo(({isOpen:t=!1,onShowProgress:e})=>{const[n,i]=b.useState(!1),[r]=b.useState(!1),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(null),[d,f]=b.useState(null),p=S=>{console.log("Tutorial seleccionado:",S),u(S),o(!0)},g=S=>{f(S),l(!0)},m=()=>{o(!1),u(null)},v=()=>{l(!1),f(null)},y=[{id:"progress",title:"Progreso Educativo",description:"Ver logros y estadsticas de aprendizaje",icon:mC,color:"text-yellow-400",action:()=>e==null?void 0:e()},{id:"tutorials",title:"Tutoriales Interactivos",description:"Aprende paso a paso con ejercicios",icon:DX,color:"text-blue-400",action:()=>i(!n)}],x=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Conceptos bsicos de CPU y registros",difficulty:"Bsico",duration:"10 min"},{id:"memory-basics",title:"Memoria RAM",description:"Funcionamiento de la memoria principal",difficulty:"Bsico",duration:"8 min"},{id:"instruction-cycle",title:"Ciclo de Instruccin",description:"Fases fetch-decode-execute",difficulty:"Intermedio",duration:"15 min"}],w=[{id:"fetch-decode-execute",title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instruccin"},{id:"memory-access",title:"Acceso a Memoria",description:"Cmo la CPU lee y escribe en memoria RAM"},{id:"register-transfer",title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU"},{id:"alu-operation",title:"Operacin ALU",description:"Proceso de operacin aritmtica o lgica"},{id:"bus-communication",title:"Comunicacin por Bus",description:"Cmo los componentes se comunican a travs del bus"}];return h.jsxs(h.Fragment,{children:[t&&h.jsx("div",{className:"fixed bottom-12 left-1/2 z-50 -translate-x-1/2",children:h.jsxs("div",{className:"min-w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 text-center",children:[h.jsx("h3",{className:"mb-1 text-lg font-semibold text-mantis-400",children:"Centro de Aprendizaje"}),h.jsx("p",{className:"text-sm text-stone-400",children:"Explora herramientas educativas interactivas"})]}),h.jsx("div",{className:"space-y-2",children:y.map(S=>h.jsx("div",{children:S.id==="tutorials"?h.jsxs("div",{children:[h.jsxs("button",{onClick:S.action,className:Q("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx($e,{icon:S.icon,className:Q("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),h.jsx($e,{icon:gp,className:Q("text-sm text-stone-400",n&&"text-blue-400")})]}),n&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:x.map(_=>h.jsx("button",{onClick:()=>p(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),h.jsx("div",{className:"text-xs text-stone-400",children:_.description})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-xs text-blue-400",children:_.difficulty}),h.jsx("div",{className:"text-xs text-stone-500",children:_.duration})]})]})},_.id))})]}):S.id==="visualizations"?h.jsxs("div",{children:[h.jsxs("button",{onClick:S.action,className:Q("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx($e,{icon:S.icon,className:Q("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),h.jsx($e,{icon:I3,className:Q("text-sm text-stone-400",r&&"text-green-400")})]}),r&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:w.map(_=>h.jsx("button",{onClick:()=>g(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),h.jsx("div",{className:"text-xs text-stone-400",children:_.description})]})},_.id))})]}):h.jsxs("button",{onClick:S.action,className:Q("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx($e,{icon:S.icon,className:Q("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]})]})},S.id))}),h.jsx("div",{className:"mt-4 border-t border-stone-600 pt-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsx("span",{children:"Herramientas educativas"}),h.jsx("span",{children:"VonSim8"})]})})]})}),s&&c&&(()=>{const S=Hse.find(_=>_.id===c);return console.log("Tutorial encontrado:",S),S?h.jsx(k$,{tutorial:S,onComplete:m,onClose:()=>{console.log("Cerrando tutorial"),o(!1),u(null)}}):(console.error("Tutorial no encontrado:",c),null)})(),a&&d&&h.jsx(S$,{concept:d,onClose:v})]})});_$.displayName="EducationalMenu";const JM=[{id:"first_program",type:"programs_written",title:"Primer Programa",description:"Escribe tu primer programa en ensamblador",icon:id,requirement:1,current:0,unlocked:!1,points:10},{id:"instruction_master",type:"instructions_executed",title:"Maestro de Instrucciones",description:"Ejecuta 100 instrucciones",icon:yX,requirement:100,current:0,unlocked:!1,points:25},{id:"memory_explorer",type:"concept_mastered",title:"Explorador de Memoria",description:"Comprende el funcionamiento de la memoria RAM",icon:FX,requirement:1,current:0,unlocked:!1,points:15},{id:"cpu_architect",type:"concept_mastered",title:"Arquitecto de CPU",description:"Domina los conceptos de arquitectura de CPU",icon:jX,requirement:1,current:0,unlocked:!1,points:30},{id:"persistent_learner",type:"time_spent",title:"Estudiante Persistente",description:"Pasa 30 minutos aprendiendo",icon:cm,requirement:30,current:0,unlocked:!1,points:20},{id:"tutorial_master",type:"tutorials_completed",title:"Maestro de Tutoriales",description:"Completa un tutorial interactivo educativo",icon:mC,requirement:1,current:0,unlocked:!1,points:40}],ZM=[{id:"beginner",name:"Principiante",description:"Conceptos bsicos de programacin y arquitectura",concepts:["register","memory","instruction"],requiredPoints:0,unlocked:!0,completed:!1},{id:"intermediate",name:"Intermedio",description:"Operaciones aritmticas y lgicas",concepts:["alu","bus","program-counter"],requiredPoints:50,unlocked:!1,completed:!1},{id:"advanced",name:"Avanzado",description:"Interrupciones y programacin compleja",concepts:["flags","stack","interrupts"],requiredPoints:100,unlocked:!1,completed:!1}],C$=b.memo(({className:t,isVisible:e=!1,onClose:n})=>{const[i,r]=b.useState(JM),[s,o]=b.useState(ZM),[a,l]=b.useState(0),[c,u]=b.useState(0);b.useEffect(()=>{const v=localStorage.getItem("vonsim8-educational-progress");if(v)try{const y=JSON.parse(v);r(y.achievements||JM),o(y.levels||ZM),l(y.totalPoints||0),u(y.sessionTime||0)}catch{}},[]);const d=b.useCallback(()=>{const v={achievements:i,levels:s,totalPoints:a,sessionTime:c,lastSaved:Date.now()};localStorage.setItem("vonsim8-educational-progress",JSON.stringify(v))},[i,s,a,c]),f=b.useCallback((v,y)=>{r(x=>{const w=x.map(_=>{if(_.type===v){const E=Math.min(_.current+y,_.requirement),C=_.unlocked,N=E>=_.requirement;return!C&&N&&p(_),{..._,current:E,unlocked:N}}return _}),S=w.filter(_=>_.unlocked).reduce((_,E)=>_+E.points,0);return l(S),o(_=>_.map(E=>({...E,unlocked:S>=E.requiredPoints}))),w})},[]),p=v=>{const y=document.createElement("div");y.className=Q("fixed right-4 top-4 z-50 rounded-lg border-2 p-4 shadow-lg","animate-slide-in-right bg-mantis-500 text-white"),y.innerHTML=`
      <div class="flex items-center gap-3">
        <FontAwesomeIcon icon="${v.icon}" class="text-2xl" />
        <div>
          <div class="font-bold">Logro Desbloqueado!</div>
          <div class="text-sm">${v.title}</div>
        </div>
      </div>
    `,document.body.appendChild(y),setTimeout(()=>{y.remove()},3e3)};if(b.useEffect(()=>{const v=y=>{const{type:x,value:w=1}=y.detail;f(x,w)};return window.addEventListener("educational-progress",v),()=>window.removeEventListener("educational-progress",v)},[f]),b.useEffect(()=>{const v=setInterval(()=>{u(y=>{const x=y+1;return x%60===0&&f("time_spent",1),x})},1e3);return()=>clearInterval(v)},[f]),b.useEffect(()=>{const v=setInterval(d,3e4);return()=>clearInterval(v)},[d]),!e)return null;const g=i.filter(v=>v.unlocked),m=s.filter(v=>v.unlocked);return h.jsxs("div",{className:Q("fixed bottom-20 right-4 z-50 h-80 w-96 rounded-lg border border-stone-600 bg-stone-900 shadow-xl",t),children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-3",children:[h.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-mantis-400",children:[h.jsx($e,{icon:mC}),"Progreso Educativo"]}),h.jsx(mt,{variant:"ghost",size:"sm",onClick:n,className:"text-xs text-stone-400 hover:text-white",children:""})]}),h.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto p-3",children:[h.jsxs("div",{className:"rounded-lg bg-stone-800 p-3 text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-mantis-400",children:a}),h.jsx("div",{className:"text-xs text-stone-400",children:"Puntos Totales"})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx($e,{icon:cm}),"Niveles de Aprendizaje"]}),h.jsx("div",{className:"space-y-1",children:s.map(v=>h.jsxs("div",{className:Q("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10 text-mantis-400":"border-stone-600 bg-stone-800 text-stone-500"),children:[h.jsx("div",{className:"font-medium",children:v.name}),h.jsx("div",{className:"text-stone-400",children:v.description}),!v.unlocked&&h.jsxs("div",{className:"mt-1 text-stone-500",children:["Requiere ",v.requiredPoints," puntos"]})]},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx($e,{icon:vX}),"Logros (",g.length,"/",i.length,")"]}),h.jsx("div",{className:"space-y-1",children:i.map(v=>h.jsx("div",{className:Q("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10":"border-stone-600 bg-stone-800"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx($e,{icon:v.icon,className:v.unlocked?"text-mantis-400":"text-stone-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:Q("font-medium",v.unlocked?"text-mantis-400":"text-stone-400"),children:v.title}),h.jsx("div",{className:"text-stone-500",children:v.description}),h.jsxs("div",{className:"mt-1",children:[h.jsx("div",{className:"h-1 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-1 rounded-full bg-mantis-400 transition-all duration-300",style:{width:`${v.current/v.requirement*100}%`}})}),h.jsxs("div",{className:"mt-1 text-stone-500",children:[v.current,"/",v.requirement]})]})]})]})},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx($e,{icon:_X}),"Estadsticas"]}),h.jsxs("div",{className:"text-xs text-stone-400",children:[h.jsxs("div",{children:["Tiempo de sesin: ",Math.floor(c/60),"m ",c%60,"s"]}),h.jsxs("div",{children:["Niveles completados: ",m.length,"/",s.length]})]})]})]})]})});C$.displayName="EducationalProgress";const E$=b.createContext(null),kE=()=>{const t=b.useContext(E$);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},A$=()=>{const[t,e]=b.useState([]),[n,i]=b.useState(!1);b.useEffect(()=>{const c=localStorage.getItem("vonsim8-notifications");if(c)try{const d=JSON.parse(c);if(Array.isArray(d)){const f=d.filter(p=>p&&typeof p=="object"&&"id"in p&&"type"in p&&"title"in p&&"message"in p&&"timestamp"in p&&"read"in p).map(p=>({id:String(p.id),type:p.type,title:String(p.title),message:String(p.message),timestamp:new Date(p.timestamp),read:!!p.read}));e(f)}}catch{e([])}if(!localStorage.getItem("vonsim8-welcome-notification")){const d={id:"welcome",type:"info",title:"Bienvenido a VonSim8!",message:"Gracias por usar nuestro simulador. Aqu encontrars notificaciones importantes sobre el funcionamiento de la aplicacin.",timestamp:new Date,read:!1};e(f=>[d,...f]),localStorage.setItem("vonsim8-welcome-notification","true")}},[]),b.useEffect(()=>{localStorage.setItem("vonsim8-notifications",JSON.stringify(t))},[t]);const r=b.useCallback(c=>{const u={...c,id:Date.now().toString(),timestamp:new Date,read:!1};e(d=>[u,...d])},[]),s=b.useCallback(c=>{e(u=>u.map(d=>d.id===c?{...d,read:!0}:d))},[]),o=b.useCallback(()=>{e(c=>c.map(u=>({...u,read:!0})))},[]),a=b.useCallback(c=>{e(u=>u.filter(d=>d.id!==c))},[]),l=b.useCallback(()=>{e([])},[]);return{notifications:t,isOpen:n,setIsOpen:i,addNotification:r,markAsRead:s,markAllAsRead:o,deleteNotification:a,clearAll:l}},Wse=t=>b.useMemo(()=>{const e=t.length,n=t.filter(r=>!r.read).length,i=t.reduce((r,s)=>(r[s.type]=(r[s.type]||0)+1,r),{});return{total:e,unread:n,byType:i}},[t]),N$=b.memo(({type:t})=>{const e=b.useMemo(()=>{switch(t){case"info":return{icon:O3,className:"text-blue-400"};case"success":return{icon:ZL,className:"text-green-400"};case"warning":return{icon:i2,className:"text-yellow-400"};case"error":return{icon:i2,className:"text-red-400"};default:return{icon:O3,className:"text-blue-400"}}},[t]);return h.jsx($e,{icon:e.icon,className:Q("size-4",e.className)})});N$.displayName="NotificationIcon";const lk=b.memo(({notification:t,onMarkAsRead:e,onDelete:n})=>{const i=b.useCallback(r=>{const o=new Date().getTime()-r.getTime(),a=Math.floor(o/6e4),l=Math.floor(o/36e5),c=Math.floor(o/864e5);return c>0?`${c}d`:l>0?`${l}h`:a>0?`${a}m`:"Ahora"},[]);return h.jsx("div",{className:Q("rounded-lg border p-3 transition-colors",t.read?"border-stone-600 bg-stone-800":"border-mantis-500 bg-stone-800/80"),children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(N$,{type:t.type}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsx("h4",{className:"font-medium text-white",children:t.title}),h.jsx("button",{onClick:()=>n(t.id),className:"ml-2 rounded p-1 text-stone-400 transition-colors hover:text-white",children:h.jsx($e,{icon:lm,size:"sm"})})]}),h.jsx("p",{className:"mt-1 text-sm text-stone-300",children:t.message}),h.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-500",children:i(t.timestamp)}),h.jsxs("div",{className:"flex gap-2",children:[t.title==="Nueva versin disponible"&&h.jsx("button",{onClick:()=>{window.updateVonSim8&&window.updateVonSim8(),e(t.id)},className:"rounded bg-mantis-600 px-2 py-1 text-xs text-white transition-colors hover:bg-mantis-500",children:"Actualizar"}),!t.read&&h.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-mantis-400 transition-colors hover:text-mantis-300",children:"Marcar como leda"})]})]})]})]})})});lk.displayName="NotificationItem";const P$=b.memo(()=>{const{notifications:t,isOpen:e,setIsOpen:n,markAsRead:i,markAllAsRead:r,deleteNotification:s,clearAll:o}=A$(),{total:a,unread:l}=Wse(t),c=b.useCallback(()=>{n(f=>!f)},[n]),u=b.useMemo(()=>t.filter(f=>!f.read),[t]),d=b.useMemo(()=>t.filter(f=>f.read),[t]);return e?h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx($e,{icon:L3,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]}),h.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Notificaciones (",a,")"]}),h.jsxs("div",{className:"flex gap-2",children:[l>0&&h.jsx(mt,{variant:"ghost",size:"sm",onClick:r,className:"text-xs text-stone-400 hover:text-white",children:"Marcar todas"}),a>0&&h.jsx(mt,{variant:"ghost",size:"sm",onClick:o,className:"text-xs text-red-400 hover:text-red-300",children:"Limpiar"})]})]}),h.jsx("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:t.length===0?h.jsx("p",{className:"text-center text-sm text-stone-500",children:"No hay notificaciones"}):h.jsxs(h.Fragment,{children:[u.length>0&&h.jsx("div",{className:"space-y-2",children:u.map(f=>h.jsx(lk,{notification:f,onMarkAsRead:i,onDelete:s},f.id))}),d.length>0&&u.length>0&&h.jsx("hr",{className:"border-stone-600"}),d.length>0&&h.jsx("div",{className:"space-y-2",children:d.map(f=>h.jsx(lk,{notification:f,onMarkAsRead:i,onDelete:s},f.id))})]})})]})]}):h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx($e,{icon:L3,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]})});P$.displayName="NotificationCenter";const Gse=({children:t})=>{const e=A$(),n=b.useMemo(()=>({addNotification:e.addNotification,markAsRead:e.markAsRead,markAllAsRead:e.markAllAsRead,deleteNotification:e.deleteNotification,clearAll:e.clearAll,notifications:e.notifications}),[e]);return h.jsx(E$.Provider,{value:n,children:t})};function ry(t,[e,n]){return Math.min(n,Math.max(e,t))}function Kse(t,e=globalThis==null?void 0:globalThis.document){const n=xr(t);b.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var qse="DismissableLayer",ck="dismissableLayer.update",Yse="dismissableLayer.pointerDownOutside",Xse="dismissableLayer.focusOutside",QM,M$=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bm=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(M$),[u,d]=b.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=b.useState({}),g=ct(e,C=>d(C)),m=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(v),x=u?m.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,S=x>=y,_=Zse(C=>{const N=C.target,M=[...c.branches].some(I=>I.contains(N));!S||M||(r==null||r(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),E=Qse(C=>{const N=C.target;[...c.branches].some(I=>I.contains(N))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return Kse(C=>{x===c.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),b.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(QM=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),eR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=QM)}},[u,f,n,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),eR())},[u,c]),b.useEffect(()=>{const C=()=>p({});return document.addEventListener(ck,C),()=>document.removeEventListener(ck,C)},[]),h.jsx(He.div,{...l,ref:g,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:ye(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ye(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ye(t.onPointerDownCapture,_.onPointerDownCapture)})});bm.displayName=qse;var Jse="DismissableLayerBranch",R$=b.forwardRef((t,e)=>{const n=b.useContext(M$),i=b.useRef(null),r=ct(e,i);return b.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(He.div,{...t,ref:r})});R$.displayName=Jse;function Zse(t,e=globalThis==null?void 0:globalThis.document){const n=xr(t),i=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){T$(Yse,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function Qse(t,e=globalThis==null?void 0:globalThis.document){const n=xr(t),i=b.useRef(!1);return b.useEffect(()=>{const r=s=>{s.target&&!i.current&&T$(Xse,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function eR(){const t=new CustomEvent(ck);document.dispatchEvent(t)}function T$(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?Z_(r,s):r.dispatchEvent(s)}var eoe=bm,toe=R$,jw=0;function _E(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??tR()),document.body.insertAdjacentElement("beforeend",t[1]??tR()),jw++,()=>{jw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),jw--}},[])}function tR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Lw="focusScope.autoFocusOnMount",Dw="focusScope.autoFocusOnUnmount",nR={bubbles:!1,cancelable:!0},noe="FocusScope",Eb=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=b.useState(null),c=xr(r),u=xr(s),d=b.useRef(null),f=ct(e,m=>l(m)),p=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(i){let m=function(w){if(p.paused||!a)return;const S=w.target;a.contains(S)?d.current=S:ba(d.current,{select:!0})},v=function(w){if(p.paused||!a)return;const S=w.relatedTarget;S!==null&&(a.contains(S)||ba(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&ba(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const x=new MutationObserver(y);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),x.disconnect()}}},[i,a,p.paused]),b.useEffect(()=>{if(a){rR.add(p);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(Lw,nR);a.addEventListener(Lw,c),a.dispatchEvent(y),y.defaultPrevented||(ioe(loe(O$(a)),{select:!0}),document.activeElement===m&&ba(a))}return()=>{a.removeEventListener(Lw,c),setTimeout(()=>{const y=new CustomEvent(Dw,nR);a.addEventListener(Dw,u),a.dispatchEvent(y),y.defaultPrevented||ba(m??document.body,{select:!0}),a.removeEventListener(Dw,u),rR.remove(p)},0)}}},[a,c,u,p]);const g=b.useCallback(m=>{if(!n&&!i||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(v&&y){const x=m.currentTarget,[w,S]=roe(x);w&&S?!m.shiftKey&&y===S?(m.preventDefault(),n&&ba(w,{select:!0})):m.shiftKey&&y===w&&(m.preventDefault(),n&&ba(S,{select:!0})):y===x&&m.preventDefault()}},[n,i,p.paused]);return h.jsx(He.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Eb.displayName=noe;function ioe(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(ba(i,{select:e}),document.activeElement!==n)return}function roe(t){const e=O$(t),n=iR(e,t),i=iR(e.reverse(),t);return[n,i]}function O$(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function iR(t,e){for(const n of t)if(!soe(n,{upTo:e}))return n}function soe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function ooe(t){return t instanceof HTMLInputElement&&"select"in t}function ba(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&ooe(t)&&e&&t.select()}}var rR=aoe();function aoe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=sR(t,e),t.unshift(e)},remove(e){var n;t=sR(t,e),(n=t[0])==null||n.resume()}}}function sR(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function loe(t){return t.filter(e=>e.tagName!=="A")}const coe=["top","right","bottom","left"],Sl=Math.min,lr=Math.max,sy=Math.round,Tg=Math.floor,lo=t=>({x:t,y:t}),uoe={left:"right",right:"left",bottom:"top",top:"bottom"},doe={start:"end",end:"start"};function uk(t,e,n){return lr(t,Sl(e,n))}function ta(t,e){return typeof t=="function"?t(e):t}function na(t){return t.split("-")[0]}function lf(t){return t.split("-")[1]}function CE(t){return t==="x"?"y":"x"}function EE(t){return t==="y"?"height":"width"}const foe=new Set(["top","bottom"]);function Qs(t){return foe.has(na(t))?"y":"x"}function AE(t){return CE(Qs(t))}function hoe(t,e,n){n===void 0&&(n=!1);const i=lf(t),r=AE(t),s=EE(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=oy(o)),[o,oy(o)]}function poe(t){const e=oy(t);return[dk(t),e,dk(e)]}function dk(t){return t.replace(/start|end/g,e=>doe[e])}const oR=["left","right"],aR=["right","left"],moe=["top","bottom"],goe=["bottom","top"];function voe(t,e,n){switch(t){case"top":case"bottom":return n?e?aR:oR:e?oR:aR;case"left":case"right":return e?moe:goe;default:return[]}}function yoe(t,e,n,i){const r=lf(t);let s=voe(na(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(dk)))),s}function oy(t){return t.replace(/left|right|bottom|top/g,e=>uoe[e])}function boe(t){return{top:0,right:0,bottom:0,left:0,...t}}function I$(t){return typeof t!="number"?boe(t):{top:t,right:t,bottom:t,left:t}}function ay(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function lR(t,e,n){let{reference:i,floating:r}=t;const s=Qs(e),o=AE(e),a=EE(o),l=na(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(lf(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const xoe=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=lR(c,i,l),f=i,p={},g=0;for(let m=0;m<a.length;m++){const{name:v,fn:y}=a[m],{x,y:w,data:S,reset:_}=await y({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=x??u,d=w??d,p={...p,[v]:{...p[v],...S}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:d}=lR(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:p}};async function Vp(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=ta(e,t),g=I$(p),v=a[f?d==="floating"?"reference":"floating":d],y=ay(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},_=ay(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:w,strategy:l}):x);return{top:(y.top-_.top+g.top)/S.y,bottom:(_.bottom-y.bottom+g.bottom)/S.y,left:(y.left-_.left+g.left)/S.x,right:(_.right-y.right+g.right)/S.x}}const woe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ta(t,e)||{};if(c==null)return{};const d=I$(u),f={x:n,y:i},p=AE(r),g=EE(p),m=await o.getDimensions(c),v=p==="y",y=v?"top":"left",x=v?"bottom":"right",w=v?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[p]-f[p]-s.floating[g],_=f[p]-s.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=E?E[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[w]||s.floating[g]);const N=S/2-_/2,M=C/2-m[g]/2-1,I=Sl(d[y],M),O=Sl(d[x],M),T=I,H=C-m[g]-O,D=C/2-m[g]/2+N,K=uk(T,D,H),X=!l.arrow&&lf(r)!=null&&D!==K&&s.reference[g]/2-(D<T?I:O)-m[g]/2<0,te=X?D<T?D-T:D-H:0;return{[p]:f[p]+te,data:{[p]:K,centerOffset:D-K-te,...X&&{alignmentOffset:te}},reset:X}}}),Soe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=ta(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=na(r),x=Qs(a),w=na(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(w||!m?[oy(a)]:poe(a)),E=g!=="none";!f&&E&&_.push(...yoe(a,m,g,S));const C=[a,..._],N=await Vp(e,v),M=[];let I=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&M.push(N[y]),d){const D=hoe(r,o,S);M.push(N[D[0]],N[D[1]])}if(I=[...I,{placement:r,overflows:M}],!M.every(D=>D<=0)){var O,T;const D=(((O=s.flip)==null?void 0:O.index)||0)+1,K=C[D];if(K&&(!(d==="alignment"?x!==Qs(K):!1)||I.every(U=>U.overflows[0]>0&&Qs(U.placement)===x)))return{data:{index:D,overflows:I},reset:{placement:K}};let X=(T=I.filter(te=>te.overflows[0]<=0).sort((te,U)=>te.overflows[1]-U.overflows[1])[0])==null?void 0:T.placement;if(!X)switch(p){case"bestFit":{var H;const te=(H=I.filter(U=>{if(E){const B=Qs(U.placement);return B===x||B==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(B=>B>0).reduce((B,ie)=>B+ie,0)]).sort((U,B)=>U[1]-B[1])[0])==null?void 0:H[0];te&&(X=te);break}case"initialPlacement":X=a;break}if(r!==X)return{reset:{placement:X}}}return{}}}};function cR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function uR(t){return coe.some(e=>t[e]>=0)}const koe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=ta(t,e);switch(i){case"referenceHidden":{const s=await Vp(e,{...r,elementContext:"reference"}),o=cR(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:uR(o)}}}case"escaped":{const s=await Vp(e,{...r,altBoundary:!0}),o=cR(s,n.floating);return{data:{escapedOffsets:o,escaped:uR(o)}}}default:return{}}}}},j$=new Set(["left","top"]);async function _oe(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=na(n),a=lf(n),l=Qs(n)==="y",c=j$.has(o)?-1:1,u=s&&l?-1:1,d=ta(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const Coe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await _oe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Eoe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:x}=v;return{x:y,y:x}}},...l}=ta(t,e),c={x:n,y:i},u=await Vp(e,l),d=Qs(na(r)),f=CE(d);let p=c[f],g=c[d];if(s){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",x=p+u[v],w=p-u[y];p=uk(x,p,w)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",x=g+u[v],w=g-u[y];g=uk(x,g,w)}const m=a.fn({...e,[f]:p,[d]:g});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[f]:s,[d]:o}}}}}},Aoe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ta(t,e),u={x:n,y:i},d=Qs(r),f=CE(d);let p=u[f],g=u[d];const m=ta(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=f==="y"?"height":"width",S=s.reference[f]-s.floating[w]+v.mainAxis,_=s.reference[f]+s.reference[w]-v.mainAxis;p<S?p=S:p>_&&(p=_)}if(c){var y,x;const w=f==="y"?"width":"height",S=j$.has(na(r)),_=s.reference[d]-s.floating[w]+(S&&((y=o.offset)==null?void 0:y[d])||0)+(S?0:v.crossAxis),E=s.reference[d]+s.reference[w]+(S?0:((x=o.offset)==null?void 0:x[d])||0)-(S?v.crossAxis:0);g<_?g=_:g>E&&(g=E)}return{[f]:p,[d]:g}}}},Noe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ta(t,e),u=await Vp(e,c),d=na(r),f=lf(r),p=Qs(r)==="y",{width:g,height:m}=s.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,v=f==="end"?"top":"bottom");const x=m-u.top-u.bottom,w=g-u.left-u.right,S=Sl(m-u[v],x),_=Sl(g-u[y],w),E=!e.middlewareData.shift;let C=S,N=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=w),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=x),E&&!f){const I=lr(u.left,0),O=lr(u.right,0),T=lr(u.top,0),H=lr(u.bottom,0);p?N=g-2*(I!==0||O!==0?I+O:lr(u.left,u.right)):C=m-2*(T!==0||H!==0?T+H:lr(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:C});const M=await o.getDimensions(a.floating);return g!==M.width||m!==M.height?{reset:{rects:!0}}:{}}}};function Ab(){return typeof window<"u"}function cf(t){return L$(t)?(t.nodeName||"").toLowerCase():"#document"}function yr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function vo(t){var e;return(e=(L$(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function L$(t){return Ab()?t instanceof Node||t instanceof yr(t).Node:!1}function ks(t){return Ab()?t instanceof Element||t instanceof yr(t).Element:!1}function mo(t){return Ab()?t instanceof HTMLElement||t instanceof yr(t).HTMLElement:!1}function dR(t){return!Ab()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof yr(t).ShadowRoot}const Poe=new Set(["inline","contents"]);function xm(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=_s(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!Poe.has(r)}const Moe=new Set(["table","td","th"]);function Roe(t){return Moe.has(cf(t))}const Toe=[":popover-open",":modal"];function Nb(t){return Toe.some(e=>{try{return t.matches(e)}catch{return!1}})}const Ooe=["transform","translate","scale","rotate","perspective"],Ioe=["transform","translate","scale","rotate","perspective","filter"],joe=["paint","layout","strict","content"];function NE(t){const e=PE(),n=ks(t)?_s(t):t;return Ooe.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Ioe.some(i=>(n.willChange||"").includes(i))||joe.some(i=>(n.contain||"").includes(i))}function Loe(t){let e=kl(t);for(;mo(e)&&!Gd(e);){if(NE(e))return e;if(Nb(e))return null;e=kl(e)}return null}function PE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Doe=new Set(["html","body","#document"]);function Gd(t){return Doe.has(cf(t))}function _s(t){return yr(t).getComputedStyle(t)}function Pb(t){return ks(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function kl(t){if(cf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||dR(t)&&t.host||vo(t);return dR(e)?e.host:e}function D$(t){const e=kl(t);return Gd(e)?t.ownerDocument?t.ownerDocument.body:t.body:mo(e)&&xm(e)?e:D$(e)}function Hp(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=D$(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=yr(r);if(s){const a=fk(o);return e.concat(o,o.visualViewport||[],xm(r)?r:[],a&&n?Hp(a):[])}return e.concat(r,Hp(r,[],n))}function fk(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function $$(t){const e=_s(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=mo(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=sy(n)!==s||sy(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function ME(t){return ks(t)?t:t.contextElement}function ud(t){const e=ME(t);if(!mo(e))return lo(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=$$(e);let o=(s?sy(n.width):n.width)/i,a=(s?sy(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const $oe=lo(0);function F$(t){const e=yr(t);return!PE()||!e.visualViewport?$oe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Foe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==yr(t)?!1:e}function Hc(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=ME(t);let o=lo(1);e&&(i?ks(i)&&(o=ud(i)):o=ud(t));const a=Foe(s,n,i)?F$(s):lo(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=yr(s),p=i&&ks(i)?yr(i):i;let g=f,m=fk(g);for(;m&&i&&p!==g;){const v=ud(m),y=m.getBoundingClientRect(),x=_s(m),w=y.left+(m.clientLeft+parseFloat(x.paddingLeft))*v.x,S=y.top+(m.clientTop+parseFloat(x.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=w,c+=S,g=yr(m),m=fk(g)}}return ay({width:u,height:d,x:l,y:c})}function RE(t,e){const n=Pb(t).scrollLeft;return e?e.left+n:Hc(vo(t)).left+n}function B$(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:RE(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function Boe(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=vo(i),a=e?Nb(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=lo(1);const u=lo(0),d=mo(i);if((d||!d&&!s)&&((cf(i)!=="body"||xm(o))&&(l=Pb(i)),mo(i))){const p=Hc(i);c=ud(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const f=o&&!d&&!s?B$(o,l,!0):lo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function zoe(t){return Array.from(t.getClientRects())}function Uoe(t){const e=vo(t),n=Pb(t),i=t.ownerDocument.body,r=lr(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=lr(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+RE(t);const a=-n.scrollTop;return _s(i).direction==="rtl"&&(o+=lr(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Voe(t,e){const n=yr(t),i=vo(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=PE();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}const Hoe=new Set(["absolute","fixed"]);function Woe(t,e){const n=Hc(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=mo(t)?ud(t):lo(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function fR(t,e,n){let i;if(e==="viewport")i=Voe(t,n);else if(e==="document")i=Uoe(vo(t));else if(ks(e))i=Woe(e,n);else{const r=F$(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return ay(i)}function z$(t,e){const n=kl(t);return n===e||!ks(n)||Gd(n)?!1:_s(n).position==="fixed"||z$(n,e)}function Goe(t,e){const n=e.get(t);if(n)return n;let i=Hp(t,[],!1).filter(a=>ks(a)&&cf(a)!=="body"),r=null;const s=_s(t).position==="fixed";let o=s?kl(t):t;for(;ks(o)&&!Gd(o);){const a=_s(o),l=NE(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&Hoe.has(r.position)||xm(o)&&!l&&z$(t,o))?i=i.filter(u=>u!==o):r=a,o=kl(o)}return e.set(t,i),i}function Koe(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?Nb(e)?[]:Goe(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=fR(e,u,r);return c.top=lr(d.top,c.top),c.right=Sl(d.right,c.right),c.bottom=Sl(d.bottom,c.bottom),c.left=lr(d.left,c.left),c},fR(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function qoe(t){const{width:e,height:n}=$$(t);return{width:e,height:n}}function Yoe(t,e,n){const i=mo(e),r=vo(e),s=n==="fixed",o=Hc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=lo(0);function c(){l.x=RE(r)}if(i||!i&&!s)if((cf(e)!=="body"||xm(r))&&(a=Pb(e)),i){const p=Hc(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=r&&!i&&!s?B$(r,a):lo(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function $w(t){return _s(t).position==="static"}function hR(t,e){if(!mo(t)||_s(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return vo(t)===n&&(n=n.ownerDocument.body),n}function U$(t,e){const n=yr(t);if(Nb(t))return n;if(!mo(t)){let r=kl(t);for(;r&&!Gd(r);){if(ks(r)&&!$w(r))return r;r=kl(r)}return n}let i=hR(t,e);for(;i&&Roe(i)&&$w(i);)i=hR(i,e);return i&&Gd(i)&&$w(i)&&!NE(i)?n:i||Loe(t)||n}const Xoe=async function(t){const e=this.getOffsetParent||U$,n=this.getDimensions,i=await n(t.floating);return{reference:Yoe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Joe(t){return _s(t).direction==="rtl"}const Zoe={convertOffsetParentRelativeRectToViewportRelativeRect:Boe,getDocumentElement:vo,getClippingRect:Koe,getOffsetParent:U$,getElementRects:Xoe,getClientRects:zoe,getDimensions:qoe,getScale:ud,isElement:ks,isRTL:Joe};function V$(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Qoe(t,e){let n=null,i;const r=vo(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||e(),!f||!p)return;const g=Tg(d),m=Tg(r.clientWidth-(u+f)),v=Tg(r.clientHeight-(d+p)),y=Tg(u),w={rootMargin:-g+"px "+-m+"px "+-v+"px "+-y+"px",threshold:lr(0,Sl(1,l))||1};let S=!0;function _(E){const C=E[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!V$(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(_,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,w)}n.observe(t)}return o(!0),s}function eae(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=ME(t),u=r||s?[...c?Hp(c):[],...Hp(e)]:[];u.forEach(y=>{r&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?Qoe(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[x]=y;x&&x.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?Hc(t):null;l&&v();function v(){const y=Hc(t);m&&!V$(m,y)&&n(),m=y,g=requestAnimationFrame(v)}return n(),()=>{var y;u.forEach(x=>{r&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const tae=Coe,nae=Eoe,iae=Soe,rae=Noe,sae=koe,pR=woe,oae=Aoe,aae=(t,e,n)=>{const i=new Map,r={platform:Zoe,...n},s={...r.platform,_c:i};return xoe(t,e,{...r,platform:s})};var lae=typeof document<"u",cae=function(){},j0=lae?b.useLayoutEffect:cae;function ly(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!ly(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!ly(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function H$(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function mR(t,e){const n=H$(t);return Math.round(e*n)/n}function Fw(t){const e=b.useRef(t);return j0(()=>{e.current=t}),e}function uae(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=b.useState(i);ly(f,i)||p(i);const[g,m]=b.useState(null),[v,y]=b.useState(null),x=b.useCallback(U=>{U!==E.current&&(E.current=U,m(U))},[]),w=b.useCallback(U=>{U!==C.current&&(C.current=U,y(U))},[]),S=s||g,_=o||v,E=b.useRef(null),C=b.useRef(null),N=b.useRef(u),M=l!=null,I=Fw(l),O=Fw(r),T=Fw(c),H=b.useCallback(()=>{if(!E.current||!C.current)return;const U={placement:e,strategy:n,middleware:f};O.current&&(U.platform=O.current),aae(E.current,C.current,U).then(B=>{const ie={...B,isPositioned:T.current!==!1};D.current&&!ly(N.current,ie)&&(N.current=ie,Ml.flushSync(()=>{d(ie)}))})},[f,e,n,O,T]);j0(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(U=>({...U,isPositioned:!1})))},[c]);const D=b.useRef(!1);j0(()=>(D.current=!0,()=>{D.current=!1}),[]),j0(()=>{if(S&&(E.current=S),_&&(C.current=_),S&&_){if(I.current)return I.current(S,_,H);H()}},[S,_,H,I,M]);const K=b.useMemo(()=>({reference:E,floating:C,setReference:x,setFloating:w}),[x,w]),X=b.useMemo(()=>({reference:S,floating:_}),[S,_]),te=b.useMemo(()=>{const U={position:n,left:0,top:0};if(!X.floating)return U;const B=mR(X.floating,u.x),ie=mR(X.floating,u.y);return a?{...U,transform:"translate("+B+"px, "+ie+"px)",...H$(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:ie}},[n,a,X.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:H,refs:K,elements:X,floatingStyles:te}),[u,H,K,X,te])}const dae=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?pR({element:i.current,padding:r}).fn(n):{}:i?pR({element:i,padding:r}).fn(n):{}}}},fae=(t,e)=>({...tae(t),options:[t,e]}),hae=(t,e)=>({...nae(t),options:[t,e]}),pae=(t,e)=>({...oae(t),options:[t,e]}),mae=(t,e)=>({...iae(t),options:[t,e]}),gae=(t,e)=>({...rae(t),options:[t,e]}),vae=(t,e)=>({...sae(t),options:[t,e]}),yae=(t,e)=>({...dae(t),options:[t,e]});var bae="Arrow",W$=b.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return h.jsx(He.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});W$.displayName=bae;var xae=W$;function TE(t){const[e,n]=b.useState(void 0);return ei(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var OE="Popper",[G$,uf]=Cs(OE),[wae,K$]=G$(OE),q$=t=>{const{__scopePopper:e,children:n}=t,[i,r]=b.useState(null);return h.jsx(wae,{scope:e,anchor:i,onAnchorChange:r,children:n})};q$.displayName=OE;var Y$="PopperAnchor",X$=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=K$(Y$,n),o=b.useRef(null),a=ct(e,o);return b.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:h.jsx(He.div,{...r,ref:a})});X$.displayName=Y$;var IE="PopperContent",[Sae,kae]=G$(IE),J$=b.forwardRef((t,e)=>{var k,P,j,R,Y,G;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,v=K$(IE,n),[y,x]=b.useState(null),w=ct(e,ne=>x(ne)),[S,_]=b.useState(null),E=TE(S),C=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,M=i+(s!=="center"?"-"+s:""),I=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(c)?c:[c],T=O.length>0,H={padding:I,boundary:O.filter(Cae),altBoundary:T},{refs:D,floatingStyles:K,placement:X,isPositioned:te,middlewareData:U}=uae({strategy:"fixed",placement:M,whileElementsMounted:(...ne)=>eae(...ne,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[fae({mainAxis:r+N,alignmentAxis:o}),l&&hae({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?pae():void 0,...H}),l&&mae({...H}),gae({...H,apply:({elements:ne,rects:Z,availableWidth:Pe,availableHeight:Be})=>{const{width:Ue,height:Le}=Z.reference,Je=ne.floating.style;Je.setProperty("--radix-popper-available-width",`${Pe}px`),Je.setProperty("--radix-popper-available-height",`${Be}px`),Je.setProperty("--radix-popper-anchor-width",`${Ue}px`),Je.setProperty("--radix-popper-anchor-height",`${Le}px`)}}),S&&yae({element:S,padding:a}),Eae({arrowWidth:C,arrowHeight:N}),f&&vae({strategy:"referenceHidden",...H})]}),[B,ie]=eF(X),be=xr(g);ei(()=>{te&&(be==null||be())},[te,be]);const J=(k=U.arrow)==null?void 0:k.x,le=(P=U.arrow)==null?void 0:P.y,F=((j=U.arrow)==null?void 0:j.centerOffset)!==0,[$,V]=b.useState();return ei(()=>{y&&V(window.getComputedStyle(y).zIndex)},[y]),h.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:te?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$,"--radix-popper-transform-origin":[(R=U.transformOrigin)==null?void 0:R.x,(Y=U.transformOrigin)==null?void 0:Y.y].join(" "),...((G=U.hide)==null?void 0:G.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(Sae,{scope:n,placedSide:B,onArrowChange:_,arrowX:J,arrowY:le,shouldHideArrow:F,children:h.jsx(He.div,{"data-side":B,"data-align":ie,...m,ref:w,style:{...m.style,animation:te?void 0:"none"}})})})});J$.displayName=IE;var Z$="PopperArrow",_ae={top:"bottom",right:"left",bottom:"top",left:"right"},Q$=b.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=kae(Z$,i),o=_ae[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(xae,{...r,ref:n,style:{...r.style,display:"block"}})})});Q$.displayName=Z$;function Cae(t){return t!==null}var Eae=t=>({name:"transformOrigin",options:t,fn(e){var v,y,x;const{placement:n,rects:i,middlewareData:r}=e,o=((v=r.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=eF(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=r.arrow)==null?void 0:y.x)??0)+a/2,p=(((x=r.arrow)==null?void 0:x.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=o?d:`${f}px`,m=`${-l}px`):c==="top"?(g=o?d:`${f}px`,m=`${i.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=o?d:`${p}px`):c==="left"&&(g=`${i.floating.width+l}px`,m=o?d:`${p}px`),{data:{x:g,y:m}}}});function eF(t){const[e,n="center"]=t.split("-");return[e,n]}var tF=q$,Mb=X$,jE=J$,LE=Q$,Aae="Portal",wm=b.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=b.useState(!1);ei(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?TG.createPortal(h.jsx(He.div,{...i,ref:e}),o):null});wm.displayName=Aae;function DE(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var nF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Nae="VisuallyHidden",$E=b.forwardRef((t,e)=>h.jsx(He.span,{...t,ref:e,style:{...nF,...t.style}}));$E.displayName=Nae;var Pae=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},du=new WeakMap,Og=new WeakMap,Ig={},Bw=0,iF=function(t){return t&&(t.host||iF(t.parentNode))},Mae=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=iF(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Rae=function(t,e,n,i){var r=Mae(e,Array.isArray(t)?t:[t]);Ig[n]||(Ig[n]=new WeakMap);var s=Ig[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(du.get(f)||0)+1,v=(s.get(f)||0)+1;du.set(f,m),s.set(f,v),o.push(f),m===1&&g&&Og.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),Bw++,function(){o.forEach(function(d){var f=du.get(d)-1,p=s.get(d)-1;du.set(d,f),s.set(d,p),f||(Og.has(d)||d.removeAttribute(i),Og.delete(d)),p||d.removeAttribute(n)}),Bw--,Bw||(du=new WeakMap,du=new WeakMap,Og=new WeakMap,Ig={})}},rF=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=Pae(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),Rae(i,r,n,"aria-hidden")):function(){return null}},L0="right-scroll-bar-position",D0="width-before-scroll-bar",Tae="with-scroll-bars-hidden",Oae="--removed-body-scroll-bar-size";function zw(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Iae(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var jae=typeof window<"u"?b.useLayoutEffect:b.useEffect,gR=new WeakMap;function Lae(t,e){var n=Iae(null,function(i){return t.forEach(function(r){return zw(r,i)})});return jae(function(){var i=gR.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||zw(a,null)}),s.forEach(function(a){r.has(a)||zw(a,o)})}gR.set(n,t)},[t]),n}function Dae(t){return t}function $ae(t,e){e===void 0&&(e=Dae);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function Fae(t){t===void 0&&(t={});var e=$ae(null);return e.options=Ws({async:!0,ssr:!1},t),e}var sF=function(t){var e=t.sideCar,n=sL(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return b.createElement(i,Ws({},n))};sF.isSideCarExport=!0;function Bae(t,e){return t.useMedium(e),sF}var oF=Fae(),Uw=function(){},Rb=b.forwardRef(function(t,e){var n=b.useRef(null),i=b.useState({onScrollCapture:Uw,onWheelCapture:Uw,onTouchMoveCapture:Uw}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noRelative,g=t.noIsolation,m=t.inert,v=t.allowPinchZoom,y=t.as,x=y===void 0?"div":y,w=t.gapMode,S=sL(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,E=Lae([n,e]),C=Ws(Ws({},S),r);return b.createElement(b.Fragment,null,u&&b.createElement(_,{sideCar:oF,removeScrollBar:c,shards:d,noRelative:p,noIsolation:g,inert:m,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:w}),o?b.cloneElement(b.Children.only(a),Ws(Ws({},C),{ref:E})):b.createElement(x,Ws({},C,{className:l,ref:E}),a))});Rb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rb.classNames={fullWidth:D0,zeroRight:L0};var zae=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Uae(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=zae();return e&&t.setAttribute("nonce",e),t}function Vae(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Hae(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Wae=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Uae())&&(Vae(e,n),Hae(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Gae=function(){var t=Wae();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},aF=function(){var t=Gae(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},Kae={left:0,top:0,right:0,gap:0},Vw=function(t){return parseInt(t||"",10)||0},qae=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Vw(n),Vw(i),Vw(r)]},Yae=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Kae;var e=qae(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},Xae=aF(),dd="data-scroll-locked",Jae=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Tae,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(dd,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(L0,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(D0,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(L0," .").concat(L0,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(D0," .").concat(D0,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(dd,`] {
    `).concat(Oae,": ").concat(a,`px;
  }
`)},vR=function(){var t=parseInt(document.body.getAttribute(dd)||"0",10);return isFinite(t)?t:0},Zae=function(){b.useEffect(function(){return document.body.setAttribute(dd,(vR()+1).toString()),function(){var t=vR()-1;t<=0?document.body.removeAttribute(dd):document.body.setAttribute(dd,t.toString())}},[])},Qae=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;Zae();var s=b.useMemo(function(){return Yae(r)},[r]);return b.createElement(Xae,{styles:Jae(s,!e,r,n?"":"!important")})},hk=!1;if(typeof window<"u")try{var jg=Object.defineProperty({},"passive",{get:function(){return hk=!0,!0}});window.addEventListener("test",jg,jg),window.removeEventListener("test",jg,jg)}catch{hk=!1}var fu=hk?{passive:!1}:!1,ele=function(t){return t.tagName==="TEXTAREA"},lF=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!ele(t)&&n[e]==="visible")},tle=function(t){return lF(t,"overflowY")},nle=function(t){return lF(t,"overflowX")},yR=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=cF(t,i);if(r){var s=uF(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},ile=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},rle=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},cF=function(t,e){return t==="v"?tle(e):nle(e)},uF=function(t,e){return t==="v"?ile(e):rle(e)},sle=function(t,e){return t==="h"&&e==="rtl"?-1:1},ole=function(t,e,n,i,r){var s=sle(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var p=uF(t,a),g=p[0],m=p[1],v=p[2],y=m-v-s*g;(g||y)&&cF(t,a)&&(d+=y,f+=g);var x=a.parentNode;a=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Lg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},bR=function(t){return[t.deltaX,t.deltaY]},xR=function(t){return t&&"current"in t?t.current:t},ale=function(t,e){return t[0]===e[0]&&t[1]===e[1]},lle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},cle=0,hu=[];function ule(t){var e=b.useRef([]),n=b.useRef([0,0]),i=b.useRef(),r=b.useState(cle++)[0],s=b.useState(aF)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=FK([t.lockRef.current],(t.shards||[]).map(xR),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=Lg(m),x=n.current,w="deltaX"in m?m.deltaX:x[0]-y[0],S="deltaY"in m?m.deltaY:x[1]-y[1],_,E=m.target,C=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in m&&C==="h"&&E.type==="range")return!1;var N=yR(C,E);if(!N)return!0;if(N?_=C:(_=C==="v"?"h":"v",N=yR(C,E)),!N)return!1;if(!i.current&&"changedTouches"in m&&(w||S)&&(i.current=_),!_)return!0;var M=i.current||_;return ole(M,v,m,M==="h"?w:S)},[]),l=b.useCallback(function(m){var v=m;if(!(!hu.length||hu[hu.length-1]!==s)){var y="deltaY"in v?bR(v):Lg(v),x=e.current.filter(function(_){return _.name===v.type&&(_.target===v.target||v.target===_.shadowParent)&&ale(_.delta,y)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var w=(o.current.shards||[]).map(xR).filter(Boolean).filter(function(_){return _.contains(v.target)}),S=w.length>0?a(v,w[0]):!o.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),c=b.useCallback(function(m,v,y,x){var w={name:m,delta:v,target:y,should:x,shadowParent:dle(y)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),u=b.useCallback(function(m){n.current=Lg(m),i.current=void 0},[]),d=b.useCallback(function(m){c(m.type,bR(m),m.target,a(m,t.lockRef.current))},[]),f=b.useCallback(function(m){c(m.type,Lg(m),m.target,a(m,t.lockRef.current))},[]);b.useEffect(function(){return hu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,fu),document.addEventListener("touchmove",l,fu),document.addEventListener("touchstart",u,fu),function(){hu=hu.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,fu),document.removeEventListener("touchmove",l,fu),document.removeEventListener("touchstart",u,fu)}},[]);var p=t.removeScrollBar,g=t.inert;return b.createElement(b.Fragment,null,g?b.createElement(s,{styles:lle(r)}):null,p?b.createElement(Qae,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function dle(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const fle=Bae(oF,ule);var Tb=b.forwardRef(function(t,e){return b.createElement(Rb,Ws({},t,{ref:e,sideCar:fle}))});Tb.classNames=Rb.classNames;var hle=[" ","Enter","ArrowUp","ArrowDown"],ple=[" ","Enter"],Wc="Select",[Ob,Ib,mle]=im(Wc),[df,_0e]=Cs(Wc,[mle,uf]),jb=uf(),[gle,Ol]=df(Wc),[vle,yle]=df(Wc),dF=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:g}=t,m=jb(e),[v,y]=b.useState(null),[x,w]=b.useState(null),[S,_]=b.useState(!1),E=qy(c),[C,N]=dl({prop:i,defaultProp:r??!1,onChange:s,caller:Wc}),[M,I]=dl({prop:o,defaultProp:a,onChange:l,caller:Wc}),O=b.useRef(null),T=v?g||!!v.closest("form"):!0,[H,D]=b.useState(new Set),K=Array.from(H).map(X=>X.props.value).join(";");return h.jsx(tF,{...m,children:h.jsxs(gle,{required:p,scope:e,trigger:v,onTriggerChange:y,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:_,contentId:tf(),value:M,onValueChange:I,open:C,onOpenChange:N,dir:E,triggerPointerDownPosRef:O,disabled:f,children:[h.jsx(Ob.Provider,{scope:e,children:h.jsx(vle,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(X=>{D(te=>new Set(te).add(X))},[]),onNativeOptionRemove:b.useCallback(X=>{D(te=>{const U=new Set(te);return U.delete(X),U})},[]),children:n})}),T?h.jsxs(MF,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:M,onChange:X=>I(X.target.value),disabled:f,form:g,children:[M===void 0?h.jsx("option",{value:""}):null,Array.from(H)]},K):null]})})};dF.displayName=Wc;var fF="SelectTrigger",hF=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=jb(n),o=Ol(fF,n),a=o.disabled||i,l=ct(e,o.onTriggerChange),c=Ib(n),u=b.useRef("touch"),[d,f,p]=TF(m=>{const v=c().filter(w=>!w.disabled),y=v.find(w=>w.value===o.value),x=OF(v,m,y);x!==void 0&&o.onValueChange(x.value)}),g=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(Mb,{asChild:!0,...s,children:h.jsx(He.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":RF(o.value)?"":void 0,...r,ref:l,onClick:ye(r.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:ye(r.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:ye(r.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(v&&m.key===" ")&&hle.includes(m.key)&&(g(),m.preventDefault())})})})});hF.displayName=fF;var pF="SelectValue",mF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=Ol(pF,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=ct(e,l.onValueNodeChange);return ei(()=>{c(u)},[c,u]),h.jsx(He.span,{...a,ref:d,style:{pointerEvents:"none"},children:RF(l.value)?h.jsx(h.Fragment,{children:o}):s})});mF.displayName=pF;var ble="SelectIcon",gF=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return h.jsx(He.span,{"aria-hidden":!0,...r,ref:e,children:i||""})});gF.displayName=ble;var xle="SelectPortal",vF=t=>h.jsx(wm,{asChild:!0,...t});vF.displayName=xle;var Gc="SelectContent",yF=b.forwardRef((t,e)=>{const n=Ol(Gc,t.__scopeSelect),[i,r]=b.useState();if(ei(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Ml.createPortal(h.jsx(bF,{scope:t.__scopeSelect,children:h.jsx(Ob.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(xF,{...t,ref:e})});yF.displayName=Gc;var is=10,[bF,Il]=df(Gc),wle="SelectContentImpl",Sle=Td("SelectContent.RemoveScroll"),xF=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v,...y}=t,x=Ol(Gc,n),[w,S]=b.useState(null),[_,E]=b.useState(null),C=ct(e,k=>S(k)),[N,M]=b.useState(null),[I,O]=b.useState(null),T=Ib(n),[H,D]=b.useState(!1),K=b.useRef(!1);b.useEffect(()=>{if(w)return rF(w)},[w]),_E();const X=b.useCallback(k=>{const[P,...j]=T().map(G=>G.ref.current),[R]=j.slice(-1),Y=document.activeElement;for(const G of k)if(G===Y||(G==null||G.scrollIntoView({block:"nearest"}),G===P&&_&&(_.scrollTop=0),G===R&&_&&(_.scrollTop=_.scrollHeight),G==null||G.focus(),document.activeElement!==Y))return},[T,_]),te=b.useCallback(()=>X([N,w]),[X,N,w]);b.useEffect(()=>{H&&te()},[H,te]);const{onOpenChange:U,triggerPointerDownPosRef:B}=x;b.useEffect(()=>{if(w){let k={x:0,y:0};const P=R=>{var Y,G;k={x:Math.abs(Math.round(R.pageX)-(((Y=B.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(R.pageY)-(((G=B.current)==null?void 0:G.y)??0))}},j=R=>{k.x<=10&&k.y<=10?R.preventDefault():w.contains(R.target)||U(!1),document.removeEventListener("pointermove",P),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",j,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",j,{capture:!0})}}},[w,U,B]),b.useEffect(()=>{const k=()=>U(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[U]);const[ie,be]=TF(k=>{const P=T().filter(Y=>!Y.disabled),j=P.find(Y=>Y.ref.current===document.activeElement),R=OF(P,k,j);R&&setTimeout(()=>R.ref.current.focus())}),J=b.useCallback((k,P,j)=>{const R=!K.current&&!j;(x.value!==void 0&&x.value===P||R)&&(M(k),R&&(K.current=!0))},[x.value]),le=b.useCallback(()=>w==null?void 0:w.focus(),[w]),F=b.useCallback((k,P,j)=>{const R=!K.current&&!j;(x.value!==void 0&&x.value===P||R)&&O(k)},[x.value]),$=i==="popper"?pk:wF,V=$===pk?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v}:{};return h.jsx(bF,{scope:n,content:w,viewport:_,onViewportChange:E,itemRefCallback:J,selectedItem:N,onItemLeave:le,itemTextRefCallback:F,focusSelectedItem:te,selectedItemText:I,position:i,isPositioned:H,searchRef:ie,children:h.jsx(Tb,{as:Sle,allowPinchZoom:!0,children:h.jsx(Eb,{asChild:!0,trapped:x.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:ye(r,k=>{var P;(P=x.trigger)==null||P.focus({preventScroll:!0}),k.preventDefault()}),children:h.jsx(bm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:h.jsx($,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:k=>k.preventDefault(),...y,...V,onPlaced:()=>D(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ye(y.onKeyDown,k=>{const P=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!P&&k.key.length===1&&be(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let R=T().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(k.key)&&(R=R.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const Y=k.target,G=R.indexOf(Y);R=R.slice(G+1)}setTimeout(()=>X(R)),k.preventDefault()}})})})})})})});xF.displayName=wle;var kle="SelectItemAlignedPosition",wF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Ol(Gc,n),o=Il(Gc,n),[a,l]=b.useState(null),[c,u]=b.useState(null),d=ct(e,C=>u(C)),f=Ib(n),p=b.useRef(!1),g=b.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:y,focusSelectedItem:x}=o,w=b.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&v&&y){const C=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),M=s.valueNode.getBoundingClientRect(),I=y.getBoundingClientRect();if(s.dir!=="rtl"){const Y=I.left-N.left,G=M.left-Y,ne=C.left-G,Z=C.width+ne,Pe=Math.max(Z,N.width),Be=window.innerWidth-is,Ue=ry(G,[is,Math.max(is,Be-Pe)]);a.style.minWidth=Z+"px",a.style.left=Ue+"px"}else{const Y=N.right-I.right,G=window.innerWidth-M.right-Y,ne=window.innerWidth-C.right-G,Z=C.width+ne,Pe=Math.max(Z,N.width),Be=window.innerWidth-is,Ue=ry(G,[is,Math.max(is,Be-Pe)]);a.style.minWidth=Z+"px",a.style.right=Ue+"px"}const O=f(),T=window.innerHeight-is*2,H=m.scrollHeight,D=window.getComputedStyle(c),K=parseInt(D.borderTopWidth,10),X=parseInt(D.paddingTop,10),te=parseInt(D.borderBottomWidth,10),U=parseInt(D.paddingBottom,10),B=K+X+H+U+te,ie=Math.min(v.offsetHeight*5,B),be=window.getComputedStyle(m),J=parseInt(be.paddingTop,10),le=parseInt(be.paddingBottom,10),F=C.top+C.height/2-is,$=T-F,V=v.offsetHeight/2,k=v.offsetTop+V,P=K+X+k,j=B-P;if(P<=F){const Y=O.length>0&&v===O[O.length-1].ref.current;a.style.bottom="0px";const G=c.clientHeight-m.offsetTop-m.offsetHeight,ne=Math.max($,V+(Y?le:0)+G+te),Z=P+ne;a.style.height=Z+"px"}else{const Y=O.length>0&&v===O[0].ref.current;a.style.top="0px";const ne=Math.max(F,K+m.offsetTop+(Y?J:0)+V)+j;a.style.height=ne+"px",m.scrollTop=P-F+m.offsetTop}a.style.margin=`${is}px 0`,a.style.minHeight=ie+"px",a.style.maxHeight=T+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,v,y,s.dir,i]);ei(()=>w(),[w]);const[S,_]=b.useState();ei(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const E=b.useCallback(C=>{C&&g.current===!0&&(w(),x==null||x(),g.current=!1)},[w,x]);return h.jsx(Cle,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:h.jsx(He.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});wF.displayName=kle;var _le="SelectPopperPosition",pk=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=is,...s}=t,o=jb(n);return h.jsx(jE,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});pk.displayName=_le;var[Cle,FE]=df(Gc,{}),mk="SelectViewport",SF=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=Il(mk,n),o=FE(mk,n),a=ct(e,s.onViewportChange),l=b.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),h.jsx(Ob.Slot,{scope:n,children:h.jsx(He.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ye(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-is*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),y=Math.max(m,v);if(y<g){const x=y+p,w=Math.min(g,x),S=x-w;d.style.height=w+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});SF.displayName=mk;var kF="SelectGroup",[Ele,Ale]=df(kF),Nle=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=tf();return h.jsx(Ele,{scope:n,id:r,children:h.jsx(He.div,{role:"group","aria-labelledby":r,...i,ref:e})})});Nle.displayName=kF;var _F="SelectLabel",Ple=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Ale(_F,n);return h.jsx(He.div,{id:r.id,...i,ref:e})});Ple.displayName=_F;var cy="SelectItem",[Mle,CF]=df(cy),EF=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Ol(cy,n),l=Il(cy,n),c=a.value===i,[u,d]=b.useState(s??""),[f,p]=b.useState(!1),g=ct(e,x=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,x,i,r)}),m=tf(),v=b.useRef("touch"),y=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(Mle,{scope:n,value:i,disabled:r,textId:m,isSelected:c,onItemTextChange:b.useCallback(x=>{d(w=>w||((x==null?void 0:x.textContent)??"").trim())},[]),children:h.jsx(Ob.ItemSlot,{scope:n,value:i,disabled:r,textValue:u,children:h.jsx(He.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:g,onFocus:ye(o.onFocus,()=>p(!0)),onBlur:ye(o.onBlur,()=>p(!1)),onClick:ye(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:ye(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:ye(o.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:ye(o.onPointerMove,x=>{var w;v.current=x.pointerType,r?(w=l.onItemLeave)==null||w.call(l):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ye(o.onPointerLeave,x=>{var w;x.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:ye(o.onKeyDown,x=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&x.key===" "||(ple.includes(x.key)&&y(),x.key===" "&&x.preventDefault())})})})})});EF.displayName=cy;var fh="SelectItemText",AF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Ol(fh,n),a=Il(fh,n),l=CF(fh,n),c=yle(fh,n),[u,d]=b.useState(null),f=ct(e,y=>d(y),l.onItemTextChange,y=>{var x;return(x=a.itemTextRefCallback)==null?void 0:x.call(a,y,l.value,l.disabled)}),p=u==null?void 0:u.textContent,g=b.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=c;return ei(()=>(m(g),()=>v(g)),[m,v,g]),h.jsxs(h.Fragment,{children:[h.jsx(He.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ml.createPortal(s.children,o.valueNode):null]})});AF.displayName=fh;var NF="SelectItemIndicator",Rle=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return CF(NF,n).isSelected?h.jsx(He.span,{"aria-hidden":!0,...i,ref:e}):null});Rle.displayName=NF;var gk="SelectScrollUpButton",Tle=b.forwardRef((t,e)=>{const n=Il(gk,t.__scopeSelect),i=FE(gk,t.__scopeSelect),[r,s]=b.useState(!1),o=ct(e,i.onScrollButtonChange);return ei(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(PF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});Tle.displayName=gk;var vk="SelectScrollDownButton",Ole=b.forwardRef((t,e)=>{const n=Il(vk,t.__scopeSelect),i=FE(vk,t.__scopeSelect),[r,s]=b.useState(!1),o=ct(e,i.onScrollButtonChange);return ei(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(PF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});Ole.displayName=vk;var PF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=Il("SelectScrollButton",n),o=b.useRef(null),a=Ib(n),l=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),ei(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(He.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ye(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:ye(r.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:ye(r.onPointerLeave,()=>{l()})})}),Ile="SelectSeparator",jle=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return h.jsx(He.div,{"aria-hidden":!0,...i,ref:e})});jle.displayName=Ile;var yk="SelectArrow",Lle=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=jb(n),s=Ol(yk,n),o=Il(yk,n);return s.open&&o.position==="popper"?h.jsx(LE,{...r,...i,ref:e}):null});Lle.displayName=yk;var Dle="SelectBubbleInput",MF=b.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=b.useRef(null),s=ct(i,r),o=DE(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(He.select,{...n,style:{...nF,...n.style},ref:s,defaultValue:e})});MF.displayName=Dle;function RF(t){return t===""||t===void 0}function TF(t){const e=xr(t),n=b.useRef(""),i=b.useRef(0),r=b.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=b.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function OF(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=$le(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function $le(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Fle=dF,IF=hF,Ble=mF,zle=gF,Ule=vF,jF=yF,Vle=SF,LF=EF,Hle=AF;const Df=Fle,$f=Ble,Su=b.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(IF,{ref:i,className:Q("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,h.jsx(zle,{asChild:!0,children:h.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));Su.displayName=IF.displayName;const ku=b.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>h.jsx(Ule,{children:h.jsx(jF,{ref:r,className:Q("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:h.jsx(Vle,{className:"p-1",children:e})})}));ku.displayName=jF.displayName;const Ti=b.forwardRef(({className:t,children:e,...n},i)=>h.jsx(LF,{ref:i,className:Q("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:h.jsx(Hle,{children:e})}));Ti.displayName=LF.displayName;var DF=["PageUp","PageDown"],$F=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],FF={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ff="Slider",[bk,Wle,Gle]=im(ff),[BF,C0e]=Cs(ff,[Gle]),[Kle,Lb]=BF(ff),zF=b.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:g,...m}=t,v=b.useRef(new Set),y=b.useRef(0),w=o==="horizontal"?qle:Yle,[S=[],_]=dl({prop:u,defaultProp:c,onChange:O=>{var H;(H=[...v.current][y.current])==null||H.focus(),d(O)}}),E=b.useRef(S);function C(O){const T=ece(S,O);I(O,T)}function N(O){I(O,y.current)}function M(){const O=E.current[y.current];S[y.current]!==O&&f(S)}function I(O,T,{commit:H}={commit:!1}){const D=rce(s),K=sce(Math.round((O-i)/s)*s+i,D),X=ry(K,[i,r]);_((te=[])=>{const U=Zle(te,X,T);if(ice(U,l*s)){y.current=U.indexOf(X);const B=String(U)!==String(te);return B&&H&&f(U),B?U:te}else return te})}return h.jsx(Kle,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:y,thumbs:v.current,values:S,orientation:o,form:g,children:h.jsx(bk.Provider,{scope:t.__scopeSlider,children:h.jsx(bk.Slot,{scope:t.__scopeSlider,children:h.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:e,onPointerDown:ye(m.onPointerDown,()=>{a||(E.current=S)}),min:i,max:r,inverted:p,onSlideStart:a?void 0:C,onSlideMove:a?void 0:N,onSlideEnd:a?void 0:M,onHomeKeyDown:()=>!a&&I(i,0,{commit:!0}),onEndKeyDown:()=>!a&&I(r,S.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:T})=>{if(!a){const K=DF.includes(O.key)||O.shiftKey&&$F.includes(O.key)?10:1,X=y.current,te=S[X],U=s*K*T;I(te+U,X,{commit:!0})}}})})})})});zF.displayName=ff;var[UF,VF]=BF(ff,{startEdge:"left",endEdge:"right",size:"width",direction:1}),qle=b.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=b.useState(null),p=ct(e,w=>f(w)),g=b.useRef(void 0),m=qy(r),v=m==="ltr",y=v&&!s||!v&&s;function x(w){const S=g.current||d.getBoundingClientRect(),_=[0,S.width],C=BE(_,y?[n,i]:[i,n]);return g.current=S,C(w-S.left)}return h.jsx(UF,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:h.jsx(HF,{dir:m,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const S=x(w.clientX);o==null||o(S)},onSlideMove:w=>{const S=x(w.clientX);a==null||a(S)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:w=>{const _=FF[y?"from-left":"from-right"].includes(w.key);c==null||c({event:w,direction:_?-1:1})}})})}),Yle=b.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=b.useRef(null),d=ct(e,u),f=b.useRef(void 0),p=!r;function g(m){const v=f.current||u.current.getBoundingClientRect(),y=[0,v.height],w=BE(y,p?[i,n]:[n,i]);return f.current=v,w(m-v.top)}return h.jsx(UF,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:h.jsx(HF,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const v=g(m.clientY);s==null||s(v)},onSlideMove:m=>{const v=g(m.clientY);o==null||o(v)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const y=FF[p?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:y?-1:1})}})})}),HF=b.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Lb(ff,n);return h.jsx(He.span,{...c,ref:e,onKeyDown:ye(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):DF.concat($F).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ye(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():i(d)}),onPointerMove:ye(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:ye(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),WF="SliderTrack",GF=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Lb(WF,n);return h.jsx(He.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});GF.displayName=WF;var xk="SliderRange",KF=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Lb(xk,n),s=VF(xk,n),o=b.useRef(null),a=ct(e,o),l=r.values.length,c=r.values.map(f=>XF(f,r.min,r.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(He.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});KF.displayName=xk;var wk="SliderThumb",qF=b.forwardRef((t,e)=>{const n=Wle(t.__scopeSlider),[i,r]=b.useState(null),s=ct(e,a=>r(a)),o=b.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return h.jsx(Xle,{...t,ref:s,index:o})}),Xle=b.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=Lb(wk,n),a=VF(wk,n),[l,c]=b.useState(null),u=ct(e,x=>c(x)),d=l?o.form||!!l.closest("form"):!0,f=TE(l),p=o.values[i],g=p===void 0?0:XF(p,o.min,o.max),m=Qle(i,o.values.length),v=f==null?void 0:f[a.size],y=v?tce(v,g,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${y}px)`},children:[h.jsx(bk.ItemSlot,{scope:t.__scopeSlider,children:h.jsx(He.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:ye(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&h.jsx(YF,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},i)]})});qF.displayName=wk;var Jle="RadioBubbleInput",YF=b.forwardRef(({__scopeSlider:t,value:e,...n},i)=>{const r=b.useRef(null),s=ct(r,i),o=DE(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(He.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});YF.displayName=Jle;function Zle(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function XF(t,e,n){const s=100/(n-e)*(t-e);return ry(s,[0,100])}function Qle(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function ece(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function tce(t,e,n){const i=t/2,s=BE([0,50],[0,i]);return(i-s(e)*n)*n}function nce(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function ice(t,e){if(e>0){const n=nce(t);return Math.min(...n)>=e}return!0}function BE(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function rce(t){return(String(t).split(".")[1]||"").length}function sce(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var JF=zF,oce=GF,ace=KF,lce=qF;const lc=b.forwardRef(({className:t,...e},n)=>h.jsxs(JF,{ref:n,className:Q("relative flex touch-none select-none items-center",t),...e,children:[h.jsx(oce,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:h.jsx(ace,{className:"absolute h-full bg-mantis-400"})}),h.jsx(lce,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));lc.displayName=JF.displayName;var Db="Switch",[cce,E0e]=Cs(Db),[uce,dce]=cce(Db),ZF=b.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,p]=b.useState(null),g=ct(e,w=>p(w)),m=b.useRef(!1),v=f?u||!!f.closest("form"):!0,[y,x]=dl({prop:r,defaultProp:s??!1,onChange:c,caller:Db});return h.jsxs(uce,{scope:n,checked:y,disabled:a,children:[h.jsx(He.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":n9(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:ye(t.onClick,w=>{x(S=>!S),v&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),v&&h.jsx(t9,{control:f,bubbles:!m.current,name:i,value:l,checked:y,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});ZF.displayName=Db;var QF="SwitchThumb",e9=b.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=dce(QF,n);return h.jsx(He.span,{"data-state":n9(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});e9.displayName=QF;var fce="SwitchBubbleInput",t9=b.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:i=!0,...r},s)=>{const o=b.useRef(null),a=ct(o,s),l=DE(n),c=TE(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:i});p.call(u,n),u.dispatchEvent(g)}},[l,n,i]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});t9.displayName=fce;function n9(t){return t?"checked":"unchecked"}var i9=ZF,hce=e9;const ka=b.forwardRef(({className:t,...e},n)=>h.jsx(i9,{className:Q("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:h.jsx(hce,{className:Q("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ka.displayName=i9.displayName;const $b=ue(!1);function pce(t){return(1e3/t).toFixed(1)}function r9({className:t}){const e=Xt(),[n,i]=rf(),{status:r}=Ln();return h.jsxs("div",{className:Q("overflow-auto scrollbar-stone-700",t),children:[h.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[h.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),h.jsxs(Ai,{children:[h.jsxs(Ni,{children:[h.jsxs(Pi,{children:[h.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),h.jsx(pu,{children:e("settings.animations.description")})]}),h.jsx(ka,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&iE()}})]}),h.jsxs(Ai,{children:[h.jsx(Ni,{children:h.jsxs(Pi,{children:[h.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),h.jsx(lc,{className:"w-44",...wR({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(Ai,{children:[h.jsx(Ni,{children:h.jsx(Pi,{children:e("settings.instructionCycle.label")})}),h.jsx(ka,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),h.jsxs(Ai,{children:[h.jsx(Ni,{children:h.jsx(Pi,{children:e("settings.statsCPU.label")})}),h.jsx(ka,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),h.jsxs(Ai,{children:[h.jsxs(Ni,{children:[h.jsxs(Pi,{children:[h.jsx("span",{className:"icon-[lucide--cpu] size-6"}),"Velocidad CPU (Hz)"]}),h.jsx(pu,{children:"Velocidad del procesador. Determina el tiempo de ciclo de la CPU."})]}),h.jsxs(Df,{value:n.cpuSpeed,onValueChange:s=>i(o=>({...o,cpuSpeed:s})),children:[h.jsx(Su,{className:"w-32",children:h.jsx($f,{})}),h.jsxs(ku,{children:[h.jsx(Ti,{value:"1",title:"1 Hz = 1 segundo por ciclo - Muy lenta",children:"1 Hz (1.0s)"}),h.jsx(Ti,{value:"2",title:"2 Hz = 0.5 segundos por ciclo - Lenta",children:"2 Hz (0.5s)"}),h.jsx(Ti,{value:"4",title:"4 Hz = 0.25 segundos por ciclo - Normal",children:"4 Hz (0.25s)"}),h.jsx(Ti,{value:"10",title:"10 Hz = 0.1 segundos por ciclo - Rpida",children:"10 Hz (0.1s)"})]})]})]}),h.jsxs(Ai,{children:[h.jsxs(Ni,{children:[h.jsxs(Pi,{children:[h.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),h.jsx(pu,{children:e("settings.flags.description")})]}),h.jsxs(Df,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[h.jsx(Su,{className:"w-32",children:h.jsx($f,{})}),h.jsxs(ku,{children:[h.jsx(Ti,{value:"CF_ZF",children:"C Z"}),h.jsx(Ti,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(Ai,{children:h.jsxs(Ni,{children:[h.jsxs(Pi,{children:[h.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),h.jsx(pu,{children:e("settings.devices.description")})]})}),h.jsxs(Ai,{children:[h.jsx(Ni,{children:h.jsx(Pi,{children:e("settings.devices.keyboard-and-screen")})}),h.jsx(ka,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),h.jsxs(Ai,{children:[h.jsxs(Ni,{children:[h.jsx(Pi,{children:e("settings.devices.pic.label")}),h.jsx(pu,{children:e("settings.devices.pic.description")})]}),h.jsx(ka,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),h.jsxs(Ai,{children:[h.jsx(Ni,{children:h.jsx(Pi,{children:e("settings.devices.pio.label")})}),h.jsxs(Df,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[h.jsx(Su,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx($f,{})}),h.jsx(ku,{children:wJ.map(s=>h.jsx(Ti,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),h.jsxs(Ai,{children:[h.jsx(Ni,{children:h.jsx(Pi,{children:e("settings.devices.handshake.label")})}),h.jsxs(Df,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[h.jsx(Su,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx($f,{})}),h.jsx(ku,{children:SJ.map(s=>h.jsx(Ti,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),(n.devices.pio==="printer"||n.devices.handshake==="printer")&&h.jsxs(Ai,{children:[h.jsx(Ni,{children:h.jsxs(Pi,{children:[h.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),h.jsx(lc,{className:"w-44",...wR({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),n.devices.pic&&h.jsxs(Ai,{children:[h.jsx(Ni,{children:h.jsxs(Pi,{children:[h.jsx("span",{className:"icon-[lucide--timer] size-6"}),"Frecuencia del Timer"]})}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs(Df,{value:n.clockSpeed.toString(),onValueChange:s=>i(o=>({...o,clockSpeed:parseInt(s)})),children:[h.jsx(Su,{className:"w-40",children:h.jsx($f,{})}),h.jsxs(ku,{children:[h.jsx(Ti,{value:"100",title:"Timer muy frecuente - Interrupciones cada 0.1 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.1s"})]})}),h.jsx(Ti,{value:"400",title:"Timer frecuente - Interrupciones cada 0.4 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.4s"})]})}),h.jsx(Ti,{value:"600",title:"Timer normal - Interrupciones cada 0.6 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Normal"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.6s"})]})}),h.jsx(Ti,{value:"800",title:"Timer lento - Interrupciones cada 0.8 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.8s"})]})}),h.jsx(Ti,{value:"1000",title:"Timer muy lento - Interrupciones cada 1 segundo",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"1.0s"})]})})]})]}),h.jsxs("div",{className:"flex items-center gap-1 text-xs text-stone-400",children:[h.jsx("span",{className:"icon-[lucide--info] size-4"}),h.jsxs("span",{children:["Frecuencia: ",pce(n.clockSpeed)," Hz"]})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(Ai,{children:[h.jsxs(Ni,{children:[h.jsxs(Pi,{children:[h.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),h.jsxs(pu,{children:[e("settings.filters.description"),h.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:xu.filterBightness,filterContrast:xu.filterContrast,filterInvert:xu.filterInvert,filterSaturation:xu.filterSaturation})),children:e("settings.filters.revert")})]})]}),h.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[h.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),h.jsx(lc,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),h.jsx(lc,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),h.jsx(ka,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),h.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),h.jsx(lc,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{className:"flex justify-end p-4",children:h.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...xu,language:s.language,devices:s.devices})),children:[h.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function Ai({children:t}){return h.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Ni({children:t}){return h.jsx("div",{className:"grow",children:t})}function Pi({children:t}){return h.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function pu({children:t}){return h.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function wR({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}const mce=()=>({handleShowTour:b.useCallback(()=>{window.startWelcomeTour?window.startWelcomeTour():(localStorage.removeItem("vonsim8-tour-completed"),window.location.reload())},[])}),Sk=b.memo(({status:t,isMobile:e,isCompact:n})=>{const i=rt(oi),[r,s]=b.useState(null),[o,a]=b.useState(!1),l=b.useMemo(()=>{switch(t.type){case"running":return"Ejecutando";case"paused":return"Pausado";default:return"Detenido"}},[t.type]),c=b.useMemo(()=>{switch(t.type){case"running":return"bg-green-600";case"paused":return"bg-yellow-600";default:return"bg-stone-600"}},[t.type]);b.useEffect(()=>{if(i&&i.phase&&i.phase!==r){s(i.phase),a(!0);const p=setTimeout(()=>{a(!1)},800);return()=>clearTimeout(p)}},[i,r]);const u=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"Captacin";case"fetching-operands":return"Obtencin de operandos";case"fetching-operands-completed":return"Operandos obtenidos";case"executing":return"Ejecucin";case"writeback":return"Escritura";case"interrupt":return"Interrupcin";case"int6":case"int7":return"Interrupcin";case"halting":return"Detener CPU";default:return""}},[i,t.type]),d=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"fetching-operands":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"fetching-operands-completed":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"executing":return"bg-green-500/20 text-green-400 border-green-500/30";case"writeback":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"interrupt":return"bg-red-500/20 text-red-400 border-red-500/30";case"int6":case"int7":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"halting":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-stone-500/20 text-stone-400 border-stone-500/30"}},[i,t.type]),f=b.useMemo(()=>{if(!o||!i)return"";switch(i.phase){case"fetching":return"animate-phase-pulse-blue";case"fetching-operands":return"animate-phase-pulse-yellow";case"fetching-operands-completed":return"animate-phase-pulse-yellow";case"executing":return"animate-phase-pulse-green";case"writeback":return"animate-phase-pulse-purple";case"interrupt":return"animate-phase-pulse-red";case"int6":case"int7":return"animate-phase-pulse-orange";case"halting":return"animate-phase-pulse-red";default:return"animate-phase-pulse-stone"}},[o,i]);return h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:Q("flex items-center gap-1.5 rounded-full px-2 py-1 font-medium text-white",c,t.type==="running"&&"animate-pulse-glow",e&&"px-1.5 py-0.5",n&&"px-1 py-0.5"),children:[h.jsx("div",{className:Q("size-2 rounded-full",t.type==="running"?"bg-green-300":t.type==="paused"?"bg-yellow-300":"bg-stone-300")}),!e&&!n&&l]}),(t.type==="running"||i&&i.phase==="halting")&&u&&h.jsxs("div",{className:Q("rounded-xl border text-[10px] font-semibold uppercase tracking-wider backdrop-blur-sm transition-all duration-200 ease-in-out",d,f,e?"flex min-h-[20px] items-center justify-center whitespace-nowrap px-2 py-0.5 text-[8px]":n?"flex min-h-[18px] items-center justify-center whitespace-nowrap px-1.5 py-0.5 text-[8px]":"px-2 py-1"),children:[u," "]})]})});Sk.displayName="SimulationStatus";const s9=b.memo(({onShowTour:t,onToggleSettings:e,settingsOpen:n,onToggleEducational:i,educationalOpen:r})=>{const s=Xt();return h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(P$,{}),h.jsx(vr,{content:"Centro de aprendizaje",position:"bottom",children:h.jsx(b0,{icon:h.jsx($e,{icon:cm,className:"size-4"}),onClick:i,variant:r?"secondary":"ghost",size:"md","aria-label":"Centro de aprendizaje",className:Q("hover-lift",r&&"animate-pulse-glow"),"data-testid":"educational-button"})}),h.jsx(vr,{content:"Mostrar tour de bienvenida",position:"bottom",children:h.jsx(b0,{icon:h.jsx($e,{icon:EX,className:"size-4"}),onClick:t,variant:"ghost",size:"md","aria-label":"Mostrar tour de bienvenida",className:"hover-lift"})}),h.jsx(vr,{content:s("settings.title"),position:"bottom",children:h.jsx(b0,{icon:h.jsx("span",{className:"icon-[lucide--settings] block size-5"}),onClick:e,variant:n?"secondary":"ghost",size:"md","aria-label":s("settings.title"),className:Q("hover-lift",n&&"animate-pulse-glow"),"data-testid":"settings-button"})})]})});s9.displayName="ActionButtons";const o9=b.memo(()=>{const[t,e]=sm($b),[n,i]=b.useState(!1),[r,s]=b.useState(!1),{status:o}=Ln(),{handleShowTour:a}=mce(),[l,c]=b.useState("desktop");b.useEffect(()=>{const v=()=>{const y=window.innerWidth;y<=480?c("mobile"):y<=768?c("compact"):y<=1024?c("tablet"):c("desktop")};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const u=b.useCallback(()=>{e(v=>!v)},[e]),d=b.useCallback(()=>{i(v=>!v)},[]),f=b.useCallback(()=>{s(v=>!v)},[]),p=b.useMemo(()=>h.jsxs("div",{className:"hover-scale flex select-none items-center justify-center",children:[h.jsxs("div",{className:"group relative flex size-10 items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-mantis-500 to-mantis-600 shadow-lg hover:scale-105",children:[h.jsx("div",{className:"absolute inset-0 opacity-10",children:h.jsx("div",{className:"size-full bg-[radial-gradient(circle_at_30%_30%,rgba(255,255,255,0.1)_1px,transparent_1px),radial-gradient(circle_at_70%_70%,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[length:8px_8px]"})}),h.jsx("div",{className:"relative z-10 flex items-center justify-center",children:h.jsx("span",{className:"text-lg font-bold tracking-tight text-white",children:"V8"})}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),h.jsx("div",{className:"absolute -right-0.5 -top-0.5 size-2 animate-pulse rounded-full bg-mantis-300"})]}),h.jsxs("div",{className:"ml-3 flex flex-col",children:[h.jsxs("h1",{className:"text-lg font-bold max-sm:hidden",children:["Von",h.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]}),h.jsx("span",{className:"text-xs text-stone-400 max-sm:hidden",children:"Simulador CPU 8-bit"})]})]}),[]),m=(()=>{switch(l){case"mobile":return{gridCols:"grid-cols-2",showStatusLeft:!0,showStatusCenter:!1,showActionButtons:!1,isCompact:!0,isMobile:!0};case"compact":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!1,isCompact:!0,isMobile:!1};case"tablet":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1};case"desktop":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1}}})();return h.jsxs(h.Fragment,{children:[h.jsx("header",{className:Q("relative bg-black text-sm text-white",l==="mobile"?"header-mobile p-2":l==="compact"?"header-compact p-2":l==="tablet"?"header-tablet p-2":"p-2"),"data-testid":"header",children:h.jsxs("div",{className:Q("grid items-center",m.gridCols),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[p,m.showStatusLeft&&h.jsx(Sk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})]}),m.showStatusCenter&&h.jsx("div",{className:"flex justify-center",children:h.jsx(Sk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})}),h.jsxs("div",{className:"flex items-center justify-end gap-6",children:[h.jsx("div",{className:"flex justify-end",children:h.jsx(Bse,{})}),m.showActionButtons&&h.jsx(s9,{onShowTour:a,onToggleSettings:u,settingsOpen:t,onToggleEducational:d,educationalOpen:n})]})]})}),!m.isMobile&&n&&h.jsx(_$,{isOpen:n,onClose:()=>i(!1),onShowProgress:f}),!m.isMobile&&r&&h.jsx(C$,{isVisible:r,onClose:()=>s(!1)})]})});o9.displayName="Header";const gce=[{key:"F7",description:"Ejecutar un ciclo",category:"Simulacin"},{key:"F8",description:"Ejecutar una instruccin completa",category:"Simulacin"},{key:"F4",description:"Ejecucin infinita",category:"Simulacin"},{key:"F9",description:"Resetear simulacin",category:"Simulacin"},{key:"Espacio",description:"Pausar/Reanudar (cuando est ejecutando)",category:"Simulacin"},{key:"Ctrl+S",description:"Guardar archivo",category:"Editor"},{key:"Ctrl+O",description:"Abrir archivo",category:"Editor"},{key:"Ctrl+N",description:"Nuevo archivo",category:"Editor"},{key:"Ctrl+Z",description:"Deshacer",category:"Editor"},{key:"Ctrl+Y",description:"Rehacer",category:"Editor"},{key:"Ctrl+F",description:"Buscar",category:"Editor"},{key:"Ctrl+H",description:"Reemplazar",category:"Editor"},{key:"Tab",description:"Indentar",category:"Editor"},{key:"Shift+Tab",description:"Desindentar",category:"Editor"},{key:"F1",description:"Mostrar atajos de teclado",category:"Navegacin"},{key:"F2",description:"Abrir configuracin",category:"Navegacin"},{key:"F3",description:"Buscar en el cdigo",category:"Navegacin"},{key:"F5",description:"Actualizar pgina",category:"Navegacin"},{key:"F6",description:"Cambiar foco al editor",category:"Navegacin"},{key:"Escape",description:"Cerrar dilogos",category:"Interfaz"},{key:"Ctrl+Shift+P",description:"Paleta de comandos",category:"Interfaz"},{key:"Ctrl+B",description:"Mostrar/ocultar barra lateral",category:"Interfaz"},{key:"Ctrl+J",description:"Mostrar/ocultar terminal",category:"Interfaz"},{key:"Ctrl++",description:"Zoom in",category:"Vista"},{key:"Ctrl+-",description:"Zoom out",category:"Vista"},{key:"Ctrl+0",description:"Resetear zoom",category:"Vista"},{key:"Ctrl+Shift+Z",description:"Zoom a la seleccin",category:"Vista"},{key:"F12",description:"Herramientas de desarrollador",category:"Desarrollo"},{key:"Ctrl+Shift+I",description:"Inspeccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+C",description:"Seleccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+J",description:"Consola",category:"Desarrollo"},{key:"Ctrl+Shift+M",description:"Vista mvil",category:"Desarrollo"}],vce=()=>{const[t,e]=b.useState(!1),n=b.useCallback(()=>{e(!0)},[]),i=b.useCallback(()=>{e(!1)},[]);return b.useEffect(()=>{const r=s=>{s.key==="F1"&&(s.preventDefault(),n())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n]),{isOpen:t,openModal:n,closeModal:i}},yce=()=>b.useMemo(()=>{const t=gce.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return Object.entries(t).sort(([e],[n])=>e.localeCompare(n))},[]),a9=b.memo(({shortcut:t})=>h.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-stone-800 p-3 transition-colors hover:bg-stone-700",children:[h.jsx("span",{className:"text-sm text-stone-300",children:t.description}),h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-2 py-1 font-mono text-xs text-white",children:t.key})]}));a9.displayName="ShortcutItem";const l9=b.memo(({category:t,shortcuts:e})=>h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"border-b border-stone-600 pb-2 text-lg font-semibold text-mantis-400",children:t}),h.jsx("div",{className:"space-y-2",children:e.map((n,i)=>h.jsx(a9,{shortcut:n},`${t}-${i}`))})]}));l9.displayName="ShortcutCategory";const c9=b.memo(()=>{const{isOpen:t,closeModal:e}=vce(),n=yce(),i=b.useCallback(s=>{s.target===s.currentTarget&&e()},[e]),r=b.useCallback(s=>{s.key==="Escape"&&e()},[e]);return b.useEffect(()=>{if(t)return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,r]),t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:i,children:h.jsxs("div",{className:"max-h-[80vh] w-full max-w-4xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"icon-[lucide--keyboard] size-6 text-mantis-400"}),h.jsx("h2",{className:"text-xl font-semibold text-white",children:"Atajos de Teclado"})]}),h.jsx("button",{onClick:e,className:"rounded p-2 text-stone-400 transition-colors hover:text-white",children:h.jsx($e,{icon:lm,size:"lg"})})]}),h.jsx("div",{className:"max-h-[calc(80vh-80px)] overflow-y-auto p-4",children:h.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:n.map(([s,o])=>h.jsx(l9,{category:s,shortcuts:o},s))})}),h.jsx("div",{className:"border-t border-stone-600 bg-stone-800 p-4",children:h.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-400",children:[h.jsxs("span",{children:["Presiona"," ",h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-1 py-0.5 font-mono text-xs",children:"F1"})," ","para abrir este dilogo"]}),h.jsx(mt,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"Cerrar"})]})})]})}):null});c9.displayName="KeyboardShortcuts";function bce(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await pD(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:e}).then(d=>{s?s("/VonSim8/sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const u9=()=>{const t=kE(),e=b.useMemo(()=>(t==null?void 0:t.addNotification)||(()=>{}),[t==null?void 0:t.addNotification]),[n,i]=b.useState({available:!1,updating:!1,lastUpdate:null}),r=b.useRef(null);return b.useEffect(()=>{const s=bce({onNeedRefresh(){i(c=>({...c,available:!0})),e({type:"info",title:"Nueva versin disponible",message:"Hay una nueva versin de VonSim8 disponible. Haz clic en 'Actualizar' para aplicar los cambios."}),typeof window<"u"&&window.VonSimAddNotification&&window.VonSimAddNotification({type:"info",title:"Actualizacin disponible",message:"Una nueva versin est lista para instalar."})},onOfflineReady(){e({type:"success",title:"Modo offline disponible",message:"VonSim8 ahora est disponible para uso offline."})},onRegistered(c){console.log("Service Worker registrado:",c),c.waiting&&i(u=>({...u,available:!0}))},onRegisterError(c){console.error("Error al registrar Service Worker:",c),e({type:"error",title:"Error de actualizacin",message:"No se pudo configurar la actualizacin automtica. Algunas funciones pueden no estar disponibles."})}});r.current=s;const o=async()=>{if(r.current){i(c=>({...c,updating:!0}));try{r.current(),i(c=>({...c,available:!1,updating:!1,lastUpdate:new Date})),e({type:"success",title:"Actualizacin aplicada",message:"La nueva versin se ha aplicado correctamente."})}catch(c){console.error("Error al actualizar:",c),i(u=>({...u,updating:!1})),e({type:"error",title:"Error al actualizar",message:"No se pudo aplicar la actualizacin. Intntalo de nuevo."})}}};window.updateVonSim8=o;const a=()=>{r.current&&r.current()};window.checkVonSim8Updates=a;const l=setInterval(a,5*60*1e3);return()=>{delete window.updateVonSim8,delete window.checkVonSim8Updates,clearInterval(l)}},[e]),{updateInfo:n,updateApp:()=>{r.current&&r.current()},checkForUpdates:()=>{r.current&&r.current()}}},SR="vonsim8-commit-hash",xce=5*60*1e3,d9=()=>{const t=kE(),e=b.useMemo(()=>(t==null?void 0:t.addNotification)||(()=>{}),[t==null?void 0:t.addNotification]),[n,i]=b.useState({currentHash:"6b89bcf",lastKnownHash:null,hasUpdate:!1,lastCheck:null}),r=b.useCallback(()=>{try{const a=localStorage.getItem(SR),l="6b89bcf";return i(c=>({...c,currentHash:l,lastKnownHash:a,lastCheck:new Date})),a&&a!==l?(i(c=>({...c,hasUpdate:!0})),e({type:"info",title:"Nueva versin detectada",message:`Se ha detectado una nueva versin de VonSim8 (${l.substring(0,7)}). Recarga la pgina para actualizar.`}),!0):!1}catch(a){return console.warn("Error checking version update:",a),!1}},[e]),s=b.useCallback(()=>{try{localStorage.setItem(SR,"6b89bcf")}catch(a){console.warn("Error saving version hash before reload:",a)}window.location.reload()},[]),o=b.useCallback(()=>{i(a=>({...a,hasUpdate:!1}))},[]);return b.useEffect(()=>{r()},[r]),b.useEffect(()=>{const a=setInterval(r,xce);return()=>clearInterval(a)},[r]),b.useEffect(()=>{const a=()=>{document.hidden||r()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[r]),b.useEffect(()=>{const a=()=>{r()};return window.addEventListener("online",a),()=>{window.removeEventListener("online",a)}},[r]),{versionInfo:n,checkForVersionUpdate:r,updateToNewVersion:s,dismissUpdate:o}},f9=b.memo(()=>{const{updateInfo:t,updateApp:e}=u9(),{versionInfo:n,updateToNewVersion:i}=d9(),[r,s]=b.useState(!0),[o,a]=b.useState(!1),l=t.available||n.hasUpdate,c=b.useCallback(async()=>{a(!0);try{t.available?await e():n.hasUpdate&&i(),s(!1)}catch(d){console.error("Error al actualizar:",d)}finally{a(!1)}},[e,t.available,i,n.hasUpdate]),u=b.useCallback(()=>{s(!1)},[]);return!l||!r?null:h.jsx("div",{className:"fixed inset-x-0 top-0 z-50 bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg",children:h.jsx("div",{className:"mx-auto max-w-7xl px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx($e,{icon:j3,className:"size-5 animate-pulse"}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold",children:"Nueva versin disponible"}),h.jsx("p",{className:"text-sm opacity-90",children:"Hay una nueva versin de VonSim8 lista para instalar"})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsxs(mt,{onClick:c,disabled:o,className:"bg-white text-blue-600 hover:bg-gray-100 disabled:opacity-50",size:"sm",children:[h.jsx($e,{icon:o?kX:j3,className:Q("mr-2",o&&"animate-spin")}),o?"Actualizando...":"Actualizar ahora"]}),h.jsx(mt,{onClick:u,variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:h.jsx($e,{icon:lm})})]})]})})})});f9.displayName="UpdateBanner";ue(!1);const Fh=[{id:"welcome",target:"app-container",title:"Bienvenido a VonSim8!",content:"Te acompaar en un recorrido por las funciones principales de la plataforma. VonSim8 es un simulador de computadora de 8 bits que te permite programar en lenguaje ensamblador y ver cmo funciona internamente una computadora.",icon:gX,position:"top"},{id:"header",target:"header",title:"Barra de Navegacin",content:"Aqu encontrars el logo, el estado de la simulacin, los controles principales y acceso a notificaciones, tour de ayuda y configuracin.",icon:"icon-[lucide--navigation]",position:"bottom"},{id:"controls",target:"controls-container",title:"Controles de Simulacin",content:"Controla la simulacin: F7 (ejecutar ciclo), F8 (ejecutar instruccin), F4 (ejecucin infinita), F9 (resetear). Tambin puedes usar los botones visuales.",icon:"icon-[lucide--cpu]",position:"bottom"},{id:"editor-buttons",target:"panel-editor",title:"Editor de Cdigo",content:"Aqu es donde escribirs tu cdigo ensamblador. El editor tiene resaltado de sintaxis, autocompletado y validacin en tiempo real. Usa los botones de arriba para crear, abrir, guardar y ensamblar tu programa.",icon:"icon-[lucide--file-terminal]",position:"right"},{id:"computer-view",target:"panel-computer",title:"Simulador de Computadora",content:"Aqu vers la computadora virtual con CPU, memoria RAM, registros, ALU, buses de datos y control, y todos los perifricos como pantalla, teclado, LEDs y switches.",icon:"icon-[lucide--monitor]",position:"left"},{id:"cpu-architecture",target:"cpu-component",title:"Arquitectura CPU",content:"Observa cmo la CPU ejecuta instrucciones paso a paso: fetch, decode, execute. Ve los valores en los registros, el contador de programa y el estado de las banderas.",icon:"icon-[lucide--microchip]",position:"left"},{id:"memory-ram",target:"memory-component",title:"Memoria RAM",content:"Explora la memoria RAM de 256 bytes. Ve cmo se almacenan datos e instrucciones, y cmo la CPU accede a diferentes direcciones de memoria. Cada celda muestra su direccin y valor en hexadecimal.",icon:"icon-[lucide--database]",position:"left"},{id:"settings-button",target:"settings-button",title:"Botn de Configuracin",content:"Haz clic en este engranaje para acceder a las configuraciones avanzadas. Aqu podrs ajustar la velocidad de simulacin, cambiar el tema visual, seleccionar el idioma y personalizar atajos de teclado.",icon:"icon-[lucide--settings]",position:"bottom"},{id:"settings-panel",target:"panel-settings",title:"Panel de Configuracin",content:"En este panel encontrars todas las opciones de configuracin organizadas por categoras: simulacin, interfaz, idioma y atajos de teclado. Los cambios se aplican automticamente.",icon:"icon-[lucide--settings]",position:"left"},{id:"footer",target:"footer-links",title:"Recursos y Soporte",content:"Encuentra documentacin completa, cdigo fuente en GitHub, reporta bugs y accede a recursos de aprendizaje para dominar la programacin en ensamblador.",icon:"icon-[lucide--help-circle]",position:"top"},{id:"final",target:"cycle-button",title:"Listo para Programar!",content:"Ya conoces las funciones principales de VonSim8. Comienza escribiendo cdigo en el editor, ejecuta la simulacin paso a paso con el botn 'Por Ciclo' y observa cmo funciona tu programa en la computadora virtual. Disfruta programando!",icon:"icon-[lucide--rocket]",position:"bottom"}],wce=()=>{const[t,e]=b.useState(0),[n,i]=b.useState(!1),[r,s]=b.useState(!0),[,o]=sm($b),a=b.useMemo(()=>t===Fh.length-1,[t]),l=b.useMemo(()=>t===0,[t]),c=b.useCallback(()=>{i(!1),localStorage.setItem("vonsim8-tour-completed","true")},[]),u=b.useCallback(()=>{e(g=>Math.min(g+1,Fh.length-1))},[]),d=b.useCallback(()=>{e(g=>Math.max(g-1,0))},[]),f=b.useCallback(()=>{c()},[c]),p=b.useCallback(()=>{i(!0),e(0)},[]);return b.useEffect(()=>{},[]),b.useEffect(()=>{const g=Fh[t],m=document.querySelector(`[data-testid="${g.target}"]`);s(!!m),g.id==="settings-button"?o(!0):g.id!=="settings-panel"&&g.id!=="settings-button"&&o(!1)},[t,o]),{currentStep:t,isVisible:n,isLastStep:a,isFirstStep:l,handleNext:u,handlePrev:d,handleSkip:f,completeTour:c,startTour:p,targetFound:r}},Sce=t=>b.useMemo(()=>{const e=document.querySelector(`[data-testid="${t.target}"]`);if(!e)return null;const n=e.getBoundingClientRect(),i=window.innerWidth,r=window.innerHeight;if(t.id==="welcome"&&t.position==="top")return{positionStyles:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},highlightStyles:{top:0,left:0,width:"100vw",height:"100vh"}};if(t.id==="footer"){let g=n.top-200-60,m=n.right+20;const v="translateX(0)";g<40&&(g=40),g+200>r-100&&(g=Math.max(40,r/2-200/2)),m+320>i&&(m=i-320-20);const y={top:g,left:m,transform:v},x={top:n.top-2,left:n.left-2,width:n.width+4,height:n.height+4};return{positionStyles:y,highlightStyles:x}}let s,o,a;switch(t.position){case"top":s=n.top-20,o=n.left+n.width/2,a="translateX(-50%)";break;case"bottom":s=n.bottom+20,o=n.left+n.width/2,a="translateX(-50%)";break;case"left":s=n.top+n.height/2,o=n.left-20,a="translateY(-50%)";break;case"right":s=n.top+n.height/2,o=n.right+20,a="translateY(-50%)";break}const l=320,c=200;o+l/2>i?o=i-l/2-20:o-l/2<0&&(o=l/2+20),s+c>r?s=r-c-20:s<0&&(s=20);const u={top:s,left:o,transform:a},d={top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16};return{positionStyles:u,highlightStyles:d}},[t]),h9=b.memo(({current:t,total:e})=>h.jsx("div",{className:"mb-2 h-2 w-full overflow-hidden rounded-full bg-stone-700",children:h.jsx("div",{className:"h-full bg-mantis-500 transition-all duration-300",style:{width:`${(t+1)/e*100}%`}})}));h9.displayName="ProgressBar";const p9=b.memo(({step:t,currentStep:e,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:l,targetFound:c})=>{const u=Sce(t),d=b.useRef(null);b.useEffect(()=>{var m;(m=d.current)==null||m.focus()},[e]);const f="animate-fade-in";if(!c||!u)return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:h.jsxs("div",{className:"max-w-sm rounded-lg border-2 border-mantis-400 bg-stone-900 p-8 text-center shadow-2xl",children:[h.jsx($e,{icon:i2,className:"mb-4 text-4xl text-yellow-400"}),h.jsx("h3",{className:"mb-2 text-lg font-semibold text-mantis-400",children:"Elemento no encontrado"}),h.jsx("p",{className:"mb-4 text-stone-300",children:"No se pudo encontrar el elemento de la interfaz para este paso del tour."}),h.jsx(mt,{onClick:o,className:"bg-mantis-600 hover:bg-mantis-700",children:"Saltar tour"})]})});const{positionStyles:p,highlightStyles:g}=u;return h.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",children:h.jsxs("div",{className:"relative size-full",children:[h.jsx("div",{className:"absolute rounded-lg border-2 border-mantis-400 bg-transparent shadow-2xl transition-all duration-300",style:g}),h.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true",className:`absolute max-w-sm rounded-lg border border-mantis-400 bg-stone-900 p-6 text-white shadow-xl focus:outline-none ${f}`,style:p,children:[h.jsx(h9,{current:e,total:l}),h.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[t.icon&&(typeof t.icon=="string"?h.jsx("span",{className:`${t.icon} text-2xl text-mantis-400`}):h.jsx($e,{icon:t.icon,className:"text-2xl text-mantis-400"})),h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:t.title})]}),h.jsx("p",{className:"mb-4 text-sm text-stone-300",children:t.content}),h.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[h.jsx(mt,{variant:"ghost",size:"sm",onClick:o,className:"text-stone-400 hover:text-white","aria-label":"Saltar tour",children:"Saltar"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(mt,{variant:"outline",size:"sm",onClick:s,disabled:i,className:"flex items-center gap-1","aria-label":"Anterior",children:[h.jsx($e,{icon:TX}),"Anterior"]}),n?h.jsxs(mt,{size:"sm",onClick:a,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Finalizar",children:["Finalizar",h.jsx($e,{icon:wX})]}):h.jsxs(mt,{size:"sm",onClick:r,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Siguiente",children:["Siguiente",h.jsx($e,{icon:OX})]})]})]}),h.jsxs("div",{className:"mt-2 text-right text-xs text-stone-500",children:["Paso ",e+1," de ",l]}),h.jsx("button",{onClick:o,className:"absolute right-2 top-2 rounded p-1 text-stone-400 hover:text-white focus:outline-none","aria-label":"Cerrar",children:h.jsx($e,{icon:lm,size:"sm"})})]})]})})});p9.displayName="TourTooltip";const m9=b.memo(()=>{const{currentStep:t,isVisible:e,isLastStep:n,isFirstStep:i,handleNext:r,handlePrev:s,handleSkip:o,completeTour:a,startTour:l,targetFound:c}=wce();b.useEffect(()=>(window.startWelcomeTour=l,()=>{delete window.startWelcomeTour}),[l]);const u=b.useMemo(()=>Fh[t],[t]);return b.useEffect(()=>{if(!e)return;const d=f=>{f.key==="Escape"&&o(),f.key==="ArrowRight"&&r(),f.key==="ArrowLeft"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,o,r,s]),!e||!u?null:h.jsx(p9,{step:u,currentStep:t,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:Fh.length,targetFound:c})});m9.displayName="WelcomeTour";var Fr=function(t,e){return Number(t.toFixed(e))},kce=function(t,e){return e},Gt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},_ce=function(t){return-Math.cos(t*Math.PI)/2+.5},Cce=function(t){return t},Ece=function(t){return t*t},Ace=function(t){return t*(2-t)},Nce=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},Pce=function(t){return t*t*t},Mce=function(t){return--t*t*t+1},Rce=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},Tce=function(t){return t*t*t*t},Oce=function(t){return 1- --t*t*t*t},Ice=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},jce=function(t){return t*t*t*t*t},Lce=function(t){return 1+--t*t*t*t*t},Dce=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},g9={easeOut:_ce,linear:Cce,easeInQuad:Ece,easeOutQuad:Ace,easeInOutQuad:Nce,easeInCubic:Pce,easeOutCubic:Mce,easeInOutCubic:Rce,easeInQuart:Tce,easeOutQuart:Oce,easeInOutQuart:Ice,easeInQuint:jce,easeOutQuint:Lce,easeInOutQuint:Dce},v9=function(t){typeof t=="number"&&cancelAnimationFrame(t)},fs=function(t){t.mounted&&(v9(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function y9(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;fs(t),t.animation=function(){if(!t.mounted)return v9(t.animation);var o=new Date().getTime()-r,a=o/n,l=g9[e],c=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function $ce(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function jl(t,e,n,i){var r=$ce(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):y9(t,i,n,function(p){var g=a+u*p,m=l+d*p,v=c+f*p;s(g,m,v)})}}function Fce(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=i-a,u=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var Bce=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,c=t-e-a,u=a,d=i-r-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},zE=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=Fce(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=Bce(o,l,c,a,u,d,!!r);return f},kk=function(t,e,n,i){return i?t<e?Fr(e,2):t>n?Fr(n,2):Fr(t,2):Fr(t,2)},_c=function(t,e){var n=zE(t,e);return t.bounds=n,n};function Sm(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=r,f=s);var p=kk(t,a-d,c+d,i),g=kk(e,l-f,u+f,i);return{x:p,y:g}}function Fb(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,p=Sm(d,f,r,s,0,0,null);return p}function km(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var kR=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var c=Bb(s,n);return!c},_R=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},zce=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},Uce=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function Vce(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,p=u.maxPositionY,g=u.minPositionY,m=n>d||n<f,v=i>p||i<g,y=n>d?c.offsetWidth:t.setup.minPositionX||0,x=i>p?c.offsetHeight:t.setup.minPositionY||0,w=Fb(t,y,x,r,t.bounds,a||l),S=w.x,_=w.y;return{scale:r,positionX:m?S:n,positionY:v?_:i}}}function b9(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=Sm(e,n,a,s,i,r,o),p=f.x,g=f.y;t.setTransformState(c,p,g)}}var Hce=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,c=r.positionY;if(!i)return{x:l,y:c};var u=e-i.x,d=n-i.y,f=o?l:u,p=a?c:d;return{x:f,y:p}},_l=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},Wce=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},Gce=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!i)};function Kce(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function CR(t,e,n,i,r,s,o,a,l,c){if(r){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return i?e:kk(t,s,o,r)}function qce(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function Yce(t,e){var n=Wce(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var c=qce(o,a),u=e.x-i.x,d=e.y-i.y,f=u/c,p=d/c,g=l-r,m=u*u+d*d,v=Math.sqrt(m)/g;t.velocity={velocityX:f,velocityY:p,total:v}}t.lastMousePosition=e,t.velocityTime=l}}function Xce(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=Gce(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,p=i.limitToBounds,g=i.alignmentAnimation,m=i.zoomAnimation,v=i.panning,y=v.lockAxisY,x=v.lockAxisX,w=m.animationType,S=g.sizeX,_=g.sizeY,E=g.velocityAlignmentTime,C=E,N=Kce(t,l),M=Math.max(N,C),I=_l(t,S),O=_l(t,_),T=I*r.offsetWidth/100,H=O*r.offsetHeight/100,D=c+T,K=u-T,X=d+H,te=f-H,U=t.transformState,B=new Date().getTime();y9(t,w,M,function(ie){var be=t.transformState,J=be.scale,le=be.positionX,F=be.positionY,$=new Date().getTime()-B,V=$/C,k=g9[g.animationType],P=1-k(Math.min(1,V)),j=1-ie,R=le+o*j,Y=F+a*j,G=CR(R,U.positionX,le,x,p,u,c,K,D,P),ne=CR(Y,U.positionY,F,y,p,f,d,te,X,P);(le!==R||F!==Y)&&t.setTransformState(J,G,ne)})}}function ER(t,e){var n=t.transformState.scale;fs(t),_c(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?Uce(t,e):zce(t,e)}function UE(t,e){var n=t.transformState.scale,i=t.setup,r=i.minScale,s=i.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,c=s.animationTime,u=s.animationType,d=o||n<r||!a&&!l;if(!d){var f=Vce(t);f&&jl(t,f,e??c,u)}}function AR(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=Hce(t,e,n),c=l.x,u=l.y,d=_l(t,o),f=_l(t,a);Yce(t,{x:c,y:u}),b9(t,c,u,d,f)}}function Jce(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?Xce(t):UE(t)}}function VE(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=km(Fr(e,2),s,o,0,!1),c=_c(t,l),u=Fb(t,n,i,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function x9(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||i>=o;if((i>=1||a)&&UE(t),!(f||!r||!t.mounted)){var p=e||r.offsetWidth/2,g=n||r.offsetHeight/2,m=VE(t,o,p,g);m&&jl(t,m,u,d)}}var ol=function(){return ol=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ol.apply(this,arguments)};function NR(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Dg={scale:1,positionX:0,positionY:0},Ff={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},_k={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},w9=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Dg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Dg.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:Dg.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:Dg.positionY}},PR=function(t){var e=ol({},Ff);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Ff[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Ff[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=ol(ol({},Ff[n]),t[n]):a?e[n]=NR(NR([],Ff[n],!0),t[n]):e[n]=t[n]}}),e},S9=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=c?i*Math.exp(e*n):i+e*n,f=km(Fr(d,3),a,o,u,!1);return f};function k9(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,p=(d/2-c)/a,g=S9(t,e,n),m=VE(t,g,f,p);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");jl(t,m,i,r)}function _9(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=w9(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=zE(t,a.scale),p=Sm(a.positionX,a.positionY,f,o,0,0,s),g={scale:a.scale,positionX:p.x,positionY:p.y};c===a.scale&&u===a.positionX&&d===a.positionY||(i==null||i(),jl(t,g,e,n))}}function Zce(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function Qce(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!i||!r)return s;var u=i.getBoundingClientRect(),d=e.getBoundingClientRect(),f=Zce(e,i,r,s),p=f.x,g=f.y,m=d.width/s.scale,v=d.height/s.scale,y=i.offsetWidth/m,x=i.offsetHeight/v,w=km(n||Math.min(y,x),l,c,0,!1),S=(u.width-m*w)/2,_=(u.height-v*w)/2,E=(u.left-p)*w+S,C=(u.top-g)*w+_,N=zE(t,w),M=Sm(E,C,N,a,0,0,i),I=M.x,O=M.y;return{positionX:I,positionY:O,scale:w}}var eue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),k9(t,1,e,n,i)}},tue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),k9(t,-1,e,n,i)}},nue=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var p={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?c:i};jl(t,p,r,s)}}},iue=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),_9(t,e,n)}},rue=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=C9(e||r.scale,s,o);jl(t,a,n,i)}}},sue=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),fs(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=Qce(t,o,n);jl(t,a,i,r)}}},Ck=function(t){return{instance:t,zoomIn:eue(t),zoomOut:tue(t),setTransform:nue(t),resetTransform:iue(t),centerView:rue(t),zoomToElement:sue(t)}},oue=function(t){return{instance:t,state:t.transformState}},jt=function(t){var e={};return Object.assign(e,oue(t)),Object.assign(e,Ck(t)),e},Hw=!1;function Ww(){try{var t={get passive(){return Hw=!0,!1}};return t}catch{return Hw=!1,Hw}}var $g=".".concat(_k.wrapperClass),Bb=function(t,e){return e.some(function(n){return t.matches("".concat($g," ").concat(n,", ").concat($g," .").concat(n,", ").concat($g," ").concat(n," *, ").concat($g," .").concat(n," *"))})},Ek=function(t){t&&clearTimeout(t)},aue=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},C9=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function lue(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var cue=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!i&&c;if(!u||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Bb(c,o);return!d},uue=function(t){return t?t.deltaY<0?1:-1:0};function due(t,e){var n=uue(t),i=kce(e,n);return i}function E9(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var fue=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,p=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var g=s+e*n,m=i?!1:!p,v=km(Fr(g,3),c,l,f,m&&!d);return v},hue=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},pue=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=Bb(o,r);return!l},mue=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},gue=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Fr(r[0].clientX-i.left,5),o=Fr(r[0].clientY-i.top,5),a=Fr(r[1].clientX-i.left,5),l=Fr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},A9=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},vue=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,c=a.size,u=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,f=d*n;return km(Fr(f,2),o,s,c,!u&&!l)},yue=160,bue=100,xue=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(fs(t),Gt(jt(t),e,i),Gt(jt(t),e,r))},wue=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,p=o.disablePadding,g=o.smooth,m=d.size,v=d.disabled,y=f.step,x=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=due(e,null),S=g?x*Math.abs(e.deltaY):y,_=fue(t,w,S,!e.ctrlKey);if(l!==_){var E=_c(t,_),C=E9(e,s,l),N=v||m===0||u||p,M=c&&N,I=Fb(t,C.x,C.y,_,E,M),O=I.x,T=I.y;t.previousWheelEvent=e,t.setTransformState(_,O,T),Gt(jt(t),e,i),Gt(jt(t),e,r)}},Sue=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;Ek(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(x9(t,e.x,e.y),t.wheelAnimationTimer=null)},bue);var s=hue(t,e);s&&(Ek(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Gt(jt(t),e,i),Gt(jt(t),e,r))},yue))},N9=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},kue=function(t,e){var n=A9(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=N9(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,fs(t)},_ue=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,f=c.size;if(!(i===null||!n)){var p=gue(e,s,n);if(!(!Number.isFinite(p.x)||!Number.isFinite(p.y))){var g=A9(e),m=vue(t,g),v=N9(e),y=v.x-(t.pinchLastCenterX||0),x=v.y-(t.pinchLastCenterY||0);if(!(m===s&&y===0&&x===0)){t.pinchLastCenterX=v.x,t.pinchLastCenterY=v.y;var w=_c(t,m),S=d||f===0||l,_=a&&S,E=Fb(t,p.x,p.y,m,w,_),C=E.x,N=E.y;t.pinchMidpoint=p,t.lastDistance=g;var M=u.sizeX,I=u.sizeY,O=_l(t,M),T=_l(t,I),H=C+y,D=N+x,K=Sm(H,D,w,a,O,T,r),X=K.x,te=K.y;t.setTransformState(m,X,te)}}}},Cue=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,x9(t,e==null?void 0:e.x,e==null?void 0:e.y)},P9=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;Ek(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Gt(jt(t),e,n)},i)},Eue=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Gt(jt(t),e,i),_9(t,o,a,function(){return Gt(jt(t),e,r)}),P9(t,e)};function Aue(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function Nue(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,p=u.step,g=u.animationTime,m=u.animationType;if(!d&&!i){if(f==="reset")return Eue(t,e);if(!s)return console.error("No ContentComponent found");var v=Aue(f,t.transformState.scale),y=S9(t,v,p);if(o!==y){Gt(jt(t),e,l);var x=E9(e,s,o),w=VE(t,y,x.x,x.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");Gt(jt(t),e,c),jl(t,w,g,m),P9(t,e)}}}var Pue=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=r==null?void 0:r.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=Bb(l,a);return!d},Mue=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,_c(n,n.transformState.scale),n.setup=PR(i)},this.initializeWindowEvents=function(){var i,r,s=Ww(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=Ww(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),fs(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=Ww();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i,r){var s=!1,o=n.setup.centerOnInit,a=function(l,c){for(var u=0,d=l;u<d.length;u++){var f=d[u];if(f.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(jt(n))}),n.observer=new ResizeObserver(function(l){if(a(l,i)||a(l,r))if(o&&!s){var c=r.offsetWidth,u=r.offsetHeight;(c>0||u>0)&&(s=!0,n.setCenter())}else fs(n),_c(n,n.transformState.scale),UE(n,0)}),n.observer.observe(i),n.observer.observe(r)},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=cue(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(xue(n,i),wue(n,i),Sue(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-i.deltaX,f=u-i.deltaY,p=a.lockAxisX?c:d,g=a.lockAxisY?u:f,m=n.setup.alignmentAnimation,v=m.sizeX,y=m.sizeY,x=_l(n,v),w=_l(n,y);p===c&&g===u||b9(n,p,g,x,w)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=kR(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),fs(n),ER(n,i),Gt(jt(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=_R(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),AR(n,i.clientX,i.clientY),Gt(jt(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(Jce(n),Gt(jt(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=pue(n,i);l&&(kue(n,i),fs(n),Gt(jt(n),i,o),Gt(jt(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=mue(n);l&&(i.preventDefault(),i.stopPropagation(),_ue(n,i),Gt(jt(n),i,o),Gt(jt(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(Cue(n),Gt(jt(n),i,s),Gt(jt(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=kR(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&i.touches.length===1;if(!a){n.lastTouch=+new Date,fs(n);var l=i.touches,c=l.length===1,u=l.length===2;c&&(fs(n),ER(n,i),Gt(jt(n),i,s)),u&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=_R(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];AR(n,a.clientX,a.clientY),Gt(jt(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=Pue(n,i);s&&Nue(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=jt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Gt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=C9(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):aue(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return jt(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,_c(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(i,r),n.initializeWindowEvents(),n.isInitialized=!0;var s=jt(n);Gt(s,void 0,n.props.onInit)},this.props=e,this.setup=PR(this.props),this.transformState=w9(this.props)}return t}(),HE=Ft.createContext(null),Rue=function(t,e){return typeof t=="function"?t(e):t},Tue=Ft.forwardRef(function(t,e){var n=b.useRef(new Mue(t)).current,i=Rue(t.children,Ck(n));return b.useImperativeHandle(e,function(){return Ck(n)},[n]),b.useEffect(function(){n.update(t)},[n,t]),Ft.createElement(HE.Provider,{value:n},i)});Ft.forwardRef(function(t,e){var n=b.useRef(null),i=b.useContext(HE);return b.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),Ft.createElement("div",ol({},t,{ref:lue([n,e])}))});function Oue(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var Iue=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,MR={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Oue(Iue);var jue=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=b.useContext(HE),p=f.init,g=f.cleanupWindowEvents,m=b.useRef(null),v=b.useRef(null);return b.useEffect(function(){var y=m.current,x=v.current;return y!==null&&x!==null&&p&&(p==null||p(y,x)),function(){g==null||g()}},[]),Ft.createElement("div",ol({},c,{ref:m,className:"".concat(_k.wrapperClass," ").concat(MR.wrapper," ").concat(i),style:o}),Ft.createElement("div",ol({},d,{ref:v,className:"".concat(_k.contentClass," ").concat(MR.content," ").concat(s),style:a}),e))};function Lue({wrapperRef:t}){const e=Xt();return h.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function Due(t){switch(t){case"Captacin":return"text-blue-400";case"Obtencin de operandos":return"text-yellow-400";case"Ejecucin":return"text-green-400";case"Escritura":return"text-purple-400";default:return"text-stone-400"}}function RR(t,e){if(t==="Ejecucin")return/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-400":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-400":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-400");switch(t){case"Captacin":return"text-blue-400";case"Obtencin de operandos":return"text-yellow-400";case"Ejecucin":return"text-green-400";case"Escritura":return"text-purple-400";default:return"text-stone-400"}}function $ue(t){switch(t){case"Captacin":return"";case"Obtencin de operandos":return"";case"Ejecucin":return"";case"Escritura":return"";case"Interrupcin":return"";default:return""}}function Fue(t){return/obten/i.test(t)||/operando/i.test(t)||/leer/i.test(t)||/cargar/i.test(t)?"bg-yellow-500/5 border-yellow-400/20":/escrib/i.test(t)||/guardar/i.test(t)||/almacenar/i.test(t)||/resultado/i.test(t)?"bg-purple-500/5 border-purple-400/20":(/procesar/i.test(t)||/alu/i.test(t)||/calcular/i.test(t)||/operar/i.test(t)||/ejecut/i.test(t),"bg-green-500/5 border-green-400/20")}const Bue=[{id:"captacion",label:"Captacin",color:"text-blue-400",icon:"",descripcion:"Captando instruccin desde memoria",pasos:["IP apunta a la direccin de memoria, el MAR recibe la direccin del IP","Se lee el contenido de memoria y se almacena en el MBR, IP se incrementa automticamente","La instruccin se transfiere al IR"]},{id:"ejecucion",label:"Ejecucin",color:"text-green-400",icon:"",descripcion:"Ejecutando instruccin",subfases:[{id:"operandos",label:"Obtencin de operandos",color:"text-yellow-400",icon:"",descripcion:"Obteniendo operandos de la instruccin",pasos:["Se identifican y preparan los operandos necesarios para la operacin."]},{id:"alu",label:"Procesar en ALU",color:"text-green-400",icon:"",descripcion:"Procesando en la ALU",pasos:["La ALU ejecuta la operacin aritmtica o lgica con los operandos."]},{id:"escritura",label:"Escribir resultado",color:"text-purple-400",icon:"",descripcion:"Escribiendo resultado en registros",pasos:["El resultado de la operacin se almacena en el registro destino."]}]}];function zue(t,e){return t==="Captacin"?"text-blue-400":t==="Ejecucin"?/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-400":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-400":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-400"):t==="Escritura"?"text-purple-400":t==="Obtencin de operandos"?"text-yellow-400":"text-stone-400"}function Uue(){const t=rt(pt),e=rt(Ph),n=rt(hn),i=rt(Wv),[r]=rf(),[s,o]=b.useState(!1),a=b.useRef(null),l=(c,u)=>{const[d,...f]=c.split(":"),p=f.join(":").trim();return{cycle:u,stage:d.trim(),action:p}};return b.useEffect(()=>{if(t){const c=L.get(Rn),u=l(t,c);L.set(Ph,d=>[...d,u])}},[t]),b.useEffect(()=>L.sub(Rn,()=>{L.get(Rn)===0&&L.set(Ph,[])}),[]),b.useEffect(()=>{n.type==="running"&&i&&$i({title:"El programa ha sido modificado",description:"La ejecucin se reiniciar desde el principio para aplicar los cambios.",variant:"info"})},[n,i]),b.useEffect(()=>{const c=a.current;c&&(c.scrollTop=c.scrollHeight)},[e]),r.showInstructionCycle?h.jsx("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[360px]",children:h.jsxs("div",{className:"rounded-lg border-2 border-stone-400 bg-stone-800 shadow-lg",children:[h.jsx("div",{className:"border-b-2 border-stone-600 bg-stone-700 px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-bold text-stone-200",children:"Ciclo de Instruccin"}),h.jsx("p",{className:"text-xs text-stone-400",children:"Seguimiento paso a paso"})]})]}),h.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-green-500/20 px-2 py-1",children:[h.jsx("div",{className:"size-2 animate-pulse rounded-full bg-green-400"}),h.jsx("span",{className:"text-xs font-medium text-green-300",children:"Activo"})]})]})}),h.jsxs("div",{ref:a,className:"max-h-80 overflow-y-auto p-3",children:[e.map((c,u)=>{var p;const d=u===0||e[u-1].stage!==c.stage,f=u===e.length-1;return h.jsxs("div",{className:"mb-3",children:[d&&h.jsx("div",{className:"mb-3",children:h.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-stone-700/50 p-2",children:[h.jsx("span",{className:"text-lg",children:$ue(c.stage)}),h.jsxs("div",{children:[h.jsx("h4",{className:`text-sm font-bold ${Due(c.stage)}`,children:c.stage}),h.jsxs("p",{className:"text-xs text-stone-400",children:[c.stage==="Captacin"&&h.jsxs(h.Fragment,{children:["Leer instruccin",h.jsx("button",{className:"ml-2 rounded bg-mantis-400/20 px-1 py-0.5 text-xs text-mantis-400 transition-colors hover:bg-mantis-400/40",onClick:()=>o(g=>!g),children:s?" Ocultar pasos":"+ Ver pasos"})]}),c.stage==="Obtencin de operandos"&&"Preparar datos",c.stage==="Ejecucin"&&"Procesar instruccin",c.stage==="Escritura"&&"Guardar resultado",c.stage==="Interrupcin"&&"Manejar interrupcin"]}),c.stage==="Captacin"&&s&&h.jsx("ul",{className:"ml-2 mt-2 list-decimal text-xs text-blue-300",children:(p=Bue.find(g=>g.id==="captacion"))==null?void 0:p.pasos.map((g,m)=>h.jsx("li",{children:g},m))})]})]})}),c.stage==="Interrupcin"?h.jsx("div",{className:`rounded-lg border-l-4 border-red-400 bg-red-900/20 p-3 ${f?"ring-2 ring-red-400/30":""}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm",children:""}),h.jsx("span",{className:`text-sm font-medium ${RR(c.stage,c.action)}`,children:c.action})]})}):h.jsxs("div",{className:`flex items-center gap-3 rounded-lg border p-3 ${c.stage==="Ejecucin"?`${Fue(c.action)} ${f?"ring-2 ring-stone-400/30":""}`:`border-stone-600 bg-stone-800/50 ${f?"bg-stone-700/50 ring-2 ring-stone-400/30":""}`}`,children:[h.jsx("div",{className:`flex size-8 items-center justify-center rounded-full bg-stone-700 text-sm font-bold ${zue(c.stage,c.action)}`,children:c.cycle}),h.jsx("div",{className:"flex-1",children:h.jsx("span",{className:`text-sm font-medium ${RR(c.stage,c.action)}`,children:c.action})}),f&&h.jsx("div",{className:"flex size-2 animate-pulse rounded-full bg-stone-400"})]})]},u)}),e.length===0&&h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mb-3 text-4xl",children:""}),h.jsx("h4",{className:"mb-1 text-sm font-bold text-stone-300",children:"Esperando instrucciones"}),h.jsx("p",{className:"text-xs text-stone-500",children:"Ejecuta un programa para ver el ciclo"})]})})]}),h.jsx("div",{className:"border-t border-stone-600 bg-stone-800/50 px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsxs("span",{children:["Ciclos de instruccin: ",L.get(Rn)]}),h.jsx("span",{children:"Monitor en tiempo real"})]})})]})}):null}function Vue(){const t=Xt(),{devices:e}=Ln();return e.hasIOBus?h.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function Hue(){const{devices:t}=Ln(),e=rt(Zv),n=rt(Qv),i=b.useRef(null),r=b.useRef(null),s=b.useRef(null),o=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),a=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),l="M 750 545 H 800",{path:c,strokeDashoffset:u,opacity:d}=Ge("bus.rd"),{path:f,strokeDashoffset:p,opacity:g}=Ge("bus.wr");return h.jsxs(h.Fragment,{children:[e&&h.jsx(Gue,{pathRef:r,progressSpring:u}),n&&h.jsx(Kue,{pathRef:s,progressSpring:p}),h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[h.jsx("path",{ref:i,className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:o}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:o}),e&&h.jsx(qe.path,{ref:r,d:c,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),e&&h.jsx(qe.path,{d:c,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:a}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:a}),n&&h.jsx(qe.path,{ref:s,d:f,className:"fill-none stroke-orange-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,146,60,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),n&&h.jsx(qe.path,{d:f,className:"fill-none stroke-orange-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),t.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(Pn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:l}),h.jsx(qe.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:l,style:Ge("bus.mem")})]}),t.pic&&h.jsx(Pn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&h.jsx(Pn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&h.jsx(Pn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&h.jsx(Pn,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&h.jsxs(h.Fragment,{children:[h.jsx(Pn,{springs:"bus.intr",d:"M 110 700 V 470"}),h.jsx(Pn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&h.jsx(Pn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&h.jsx(Pn,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&h.jsx(Pn,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio==="switches-and-leds"&&h.jsxs(h.Fragment,{children:[h.jsx(Pn,{springs:"bus.switches->pio",d:"M 1300 758 H 1120"}),h.jsx(Pn,{springs:"bus.pio->leds",d:"M 1120 868 H 1300"})]}),t.pio==="printer"&&h.jsxs(h.Fragment,{children:[h.jsx(Pn,{springs:"bus.printer.strobe",d:"M 1120 770 H 1225 V 992 H 1300"}),h.jsx(Pn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 782 H 1120"}),h.jsx(Pn,{springs:"bus.printer.data",d:"M 1120 850 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&h.jsxs(h.Fragment,{children:[h.jsx(Pn,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),h.jsx(Pn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),h.jsx(Pn,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]})]})]})}function Pn({d:t,springs:e}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[3px]",strokeLinejoin:"round",d:t}),h.jsx(qe.path,{d:t,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Ge(e)}),h.jsx(qe.path,{d:t,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Ge(e)})]})}function Wue(){const t=Xt(),{devices:e}=Ln();return h.jsxs(h.Fragment,{children:[h.jsx(Qi,{style:{left:385,top:405},children:"rd"}),h.jsx(Qi,{style:{left:385,top:425},children:"wr"}),e.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(Qi,{children:"io/m"}),h.jsx(Qi,{children:t("computer.chip-select.mem")})]}),e.pic&&h.jsx(Qi,{children:t("computer.chip-select.pic")}),e.timer&&h.jsx(Qi,{children:t("computer.chip-select.timer")}),e.pio&&h.jsx(Qi,{children:t("computer.chip-select.pio")}),e.handshake&&h.jsx(Qi,{children:t("computer.chip-select.handshake")}),e.pic&&h.jsxs(h.Fragment,{children:[h.jsx(Qi,{children:"intr"}),h.jsx(Qi,{children:"inta"})]}),e.printer&&h.jsxs(h.Fragment,{children:[h.jsx(Qi,{children:"strobe"}),h.jsx(Qi,{children:"busy"}),h.jsx(Qi,{children:"data"})]})]})}function Qi({children:t,style:e}){return h.jsx("span",{className:"pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",style:e,children:t})}function Gue({pathRef:t,progressSpring:e}){const[n,i]=b.useState(!0),r=up(Zv),[s,o]=b.useState(!1),[a,l]=b.useState(0);if(b.useEffect(()=>{if(!e||typeof e.get!="function")return;let d=!0;function f(){if(!d)return;const p=e.get();l(1-p),p>0&&requestAnimationFrame(f)}return f(),()=>{d=!1}},[e]),b.useEffect(()=>{if(!t.current){const d=setTimeout(()=>o(f=>!f),10);return()=>clearTimeout(d)}o(!0)},[t]),b.useEffect(()=>{s&&a>=1&&(i(!1),setTimeout(()=>r(!1),100))},[a,s,r]),!n||!s)return null;let c=0,u=0;if(t.current){const d=t.current,f=d.getTotalLength(),p=d.getPointAtLength(a*f);c=p.x+40,u=p.y}else c=380+420*a+40,u=420;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:c,top:u-32,color:"#ef4444",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:n?1:0},children:"Read"})}function Kue({pathRef:t,progressSpring:e}){const[n,i]=b.useState(!0),r=up(Qv),[s,o]=b.useState(!1),[a,l]=b.useState(0);if(b.useEffect(()=>{if(!e||typeof e.get!="function")return;let d=!0;function f(){if(!d)return;const p=e.get();l(1-p),p>0&&requestAnimationFrame(f)}return f(),()=>{d=!1}},[e]),b.useEffect(()=>{if(!t.current){const d=setTimeout(()=>o(f=>!f),10);return()=>clearTimeout(d)}o(!0)},[t]),b.useEffect(()=>{s&&a>=1&&(i(!1),setTimeout(()=>r(!1),100))},[a,s,r]),!n||!s)return null;let c=0,u=0;if(t.current){const d=t.current,f=d.getTotalLength(),p=d.getPointAtLength(a*f);c=p.x+40,u=p.y}else c=380+420*a+40,u=440;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:c,top:u+12,color:"#f59e42",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:n?1:0},children:"Write"})}function que(){const{devices:t}=Ln(),e=["M 610 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 629 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:i,strokeDashoffset:r,opacity:s}=Ge("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=Ge("bus.address");return h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] size-full",children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:n}),h.jsx(qe.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx(qe.path,{d:i,className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:e}),h.jsx(qe.path,{d:o,className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}}),h.jsx(qe.path,{d:o,className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function Yue(){return h.jsxs(h.Fragment,{children:[h.jsx(que,{}),h.jsx(Hue,{}),h.jsx(Wue,{}),h.jsx(Vue,{})]})}function Xue(){const{devices:t}=Ln();if(!t.clock)return null;const e=Ge("clock.angle");return h.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:h.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx(qe.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const Jue={register:{beginner:"Un registro es como una caja pequea donde la CPU guarda datos temporalmente. Es muy rpido de acceder.",intermediate:"Los registros son memoria de acceso rpido dentro de la CPU. Son ms rpidos que la RAM pero tienen menos capacidad.",advanced:"Registros de propsito general (AL, BL, CL, DL) para operaciones aritmticas. Cada uno puede almacenar 8 bits."},memory:{beginner:"La memoria RAM es como un gran almacn donde se guardan programas y datos. Cada ubicacin tiene una direccin nica.",intermediate:"Memoria de acceso aleatorio (RAM) de 256 bytes. La CPU puede leer y escribir en cualquier direccin.",advanced:"Memoria principal de 256 bytes con direccionamiento de 8 bits (00-FF). Organizada en celdas de 8 bits cada una."},alu:{beginner:'La ALU (Unidad Aritmtico-Lgica) es el "cerebro matemtico" de la CPU. Realiza sumas, restas y comparaciones.',intermediate:"Arithmetic Logic Unit procesa operaciones matemticas y lgicas. Recibe operandos y devuelve resultados.",advanced:"ALU de 8 bits que ejecuta operaciones: ADD, SUB, AND, OR, XOR, NOT, CMP. Incluye flags de estado (Z, N, C)."},bus:{beginner:'Los buses son como "carreteras" por donde viajan los datos entre los componentes de la computadora.',intermediate:"Buses de datos y control conectan CPU, memoria y perifricos. El bus de datos transporta informacin.",advanced:"Bus de datos de 8 bits bidireccional, bus de direcciones de 8 bits, y lneas de control para sincronizacin."},instruction:{beginner:"Una instruccin es un comando que le dice a la CPU qu operacin realizar, como sumar dos nmeros.",intermediate:"Cada instruccin tiene un cdigo de operacin (opcode) y operandos. La CPU las ejecuta secuencialmente.",advanced:"Formato de instruccin: opcode (1 byte) + operandos. Ejemplos: MOV, ADD, JMP, CALL. Ciclo fetch-decode-execute."},"program-counter":{beginner:"El contador de programa (IP) indica qu instruccin ejecutar a continuacin. Se incrementa automticamente.",intermediate:"Program Counter (IP) contiene la direccin de la siguiente instruccin. Se actualiza en cada ciclo.",advanced:"Instruction Pointer (IP) de 8 bits. Incrementa en 1-2 bytes segn el tamao de la instruccin actual."},flags:{beginner:"Las banderas son indicadores que muestran el resultado de operaciones, como si el resultado fue cero.",intermediate:"Flags de estado: Zero (Z), Negative (N), Carry (C). Se actualizan automticamente en operaciones.",advanced:"Flags de 1 bit: Z (resultado cero), N (resultado negativo), C (acarreo/overflow). Controlan saltos condicionales."},stack:{beginner:"La pila es como una pila de platos. Solo puedes agregar o quitar del tope. til para guardar direcciones de retorno.",intermediate:"Stack Pointer (SP) apunta al tope de la pila. PUSH agrega datos, POP los retira. LIFO (Last In, First Out).",advanced:"Pila de 256 bytes con SP de 8 bits. PUSH decrementa SP, POP lo incrementa. Usada para CALL/RET y variables locales."},interrupt:{beginner:"Una interrupcin es como un timbre que interrumpe lo que est haciendo la CPU para atender algo urgente.",intermediate:"Las interrupciones permiten que dispositivos externos notifiquen a la CPU eventos importantes.",advanced:"Sistema de interrupciones con PIC (Programmable Interrupt Controller). IRET retorna de la rutina de interrupcin."},peripheral:{beginner:"Los perifricos son dispositivos externos como teclado, pantalla y LEDs que se conectan a la computadora.",intermediate:"Perifricos se comunican con la CPU a travs de puertos de entrada/salida (I/O).",advanced:"Sistema de I/O con PIO (Programmable I/O) y mdulos especficos para cada perifrico."},assembly:{beginner:"El lenguaje ensamblador es un lenguaje de programacin que usa palabras en lugar de nmeros para las instrucciones.",intermediate:"Cada instruccin de ensamblador se traduce a cdigo de mquina. El ensamblador hace esta traduccin.",advanced:"Sintaxis: etiqueta, mnemnico, operandos, comentarios. Directivas como ORG, DB, DW para datos."},addressing:{beginner:"El direccionamiento es cmo la CPU encuentra los datos que necesita en la memoria.",intermediate:"Modos de direccionamiento: inmediato, directo, indirecto. Cada uno accede a datos de forma diferente.",advanced:"Direccionamiento inmediato (valor en instruccin), directo (direccin en instruccin), indirecto (direccin en registro)."}},Zue={beginner:id,intermediate:cm,advanced:XL},TR={beginner:"text-blue-400",intermediate:"text-yellow-400",advanced:"text-purple-400"},M9=b.memo(({concept:t,level:e="beginner",children:n,className:i})=>{const[r,s]=b.useState(e),o=Jue[t];if(!o)return console.warn(`No educational content found for concept: ${t}`),h.jsx(h.Fragment,{children:n});const a=o[r],l=Zue[r],c=h.jsxs("div",{className:"max-w-xs p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx($e,{icon:l,className:Q("text-sm",TR[r])}),h.jsxs("span",{className:Q("text-sm font-medium",TR[r]),children:["Nivel"," ",r==="beginner"?"Bsico":r==="intermediate"?"Intermedio":"Avanzado"]})]}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:a}),h.jsx("div",{className:"flex gap-1",children:["beginner","intermediate","advanced"].map(u=>h.jsx("button",{onClick:d=>{d.stopPropagation(),s(u)},className:Q("rounded px-2 py-1 text-xs transition-colors",r===u?"bg-mantis-600 text-white":"bg-stone-700 text-stone-400 hover:bg-stone-600"),children:u==="beginner"?"B":u==="intermediate"?"I":"A"},u))})]});return h.jsx(vr,{content:c,position:"top",children:h.jsxs("span",{className:Q("inline-flex cursor-help items-center gap-1",i),children:[n,h.jsx($e,{icon:id,className:"text-xs text-mantis-400 opacity-70 transition-opacity hover:opacity-100"})]})})});M9.displayName="EducationalTooltip";var zb="Popover",[R9,A0e]=Cs(zb,[uf]),_m=uf(),[Que,Ll]=R9(zb),T9=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=_m(e),l=b.useRef(null),[c,u]=b.useState(!1),[d,f]=dl({prop:i,defaultProp:r??!1,onChange:s,caller:zb});return h.jsx(tF,{...a,children:h.jsx(Que,{scope:e,contentId:tf(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:b.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:b.useCallback(()=>u(!0),[]),onCustomAnchorRemove:b.useCallback(()=>u(!1),[]),modal:o,children:n})})};T9.displayName=zb;var O9="PopoverAnchor",ede=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Ll(O9,n),s=_m(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return b.useEffect(()=>(o(),()=>a()),[o,a]),h.jsx(Mb,{...s,...i,ref:e})});ede.displayName=O9;var I9="PopoverTrigger",j9=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Ll(I9,n),s=_m(n),o=ct(e,r.triggerRef),a=h.jsx(He.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":B9(r.open),...i,ref:o,onClick:ye(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:h.jsx(Mb,{asChild:!0,...s,children:a})});j9.displayName=I9;var WE="PopoverPortal",[tde,nde]=R9(WE,{forceMount:void 0}),L9=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Ll(WE,e);return h.jsx(tde,{scope:e,forceMount:n,children:h.jsx(ra,{present:n||s.open,children:h.jsx(wm,{asChild:!0,container:r,children:i})})})};L9.displayName=WE;var Kd="PopoverContent",D9=b.forwardRef((t,e)=>{const n=nde(Kd,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Ll(Kd,t.__scopePopover);return h.jsx(ra,{present:i||s.open,children:s.modal?h.jsx(rde,{...r,ref:e}):h.jsx(sde,{...r,ref:e})})});D9.displayName=Kd;var ide=Td("PopoverContent.RemoveScroll"),rde=b.forwardRef((t,e)=>{const n=Ll(Kd,t.__scopePopover),i=b.useRef(null),r=ct(e,i),s=b.useRef(!1);return b.useEffect(()=>{const o=i.current;if(o)return rF(o)},[]),h.jsx(Tb,{as:ide,allowPinchZoom:!0,children:h.jsx($9,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ye(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ye(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),sde=b.forwardRef((t,e)=>{const n=Ll(Kd,t.__scopePopover),i=b.useRef(!1),r=b.useRef(!1);return h.jsx($9,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),$9=b.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=Ll(Kd,n),p=_m(n);return _E(),h.jsx(Eb,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:h.jsx(bm,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(jE,{"data-state":B9(f.open),role:"dialog",id:f.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),F9="PopoverClose",ode=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Ll(F9,n);return h.jsx(He.button,{type:"button",...i,ref:e,onClick:ye(t.onClick,()=>r.onOpenChange(!1))})});ode.displayName=F9;var ade="PopoverArrow",lde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=_m(n);return h.jsx(LE,{...r,...i,ref:e})});lde.displayName=ade;function B9(t){return t?"open":"closed"}var cde=T9,ude=j9,dde=L9,z9=D9;const GE=cde,KE=ude,Ub=b.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>h.jsx(dde,{children:h.jsx(z9,{ref:r,align:e,sideOffset:n,className:Q("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));Ub.displayName=z9.displayName;function pr({name:t,valueAtom:e,springs:n,emphasis:i=!1,className:r}){const s=Xt(),o=rt(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,u=["AL","BL","CL","DL"].includes(t),d=t==="IP",f=t==="SP",p=t==="MBR",g=t==="MAR",m=t==="IR",v=["id","ri"].includes(t),y=c==="FLAGS";return h.jsxs(GE,{children:[h.jsx(KE,{asChild:!0,children:h.jsxs(qe.button,{title:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c,className:Q("flex cursor-pointer items-center font-mono leading-none transition-opacity",u||d||f||p||g||m||v?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":y?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",u?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":f?"border-yellow-400 bg-stone-800 text-yellow-300":p||g||m?"border-indigo-400 bg-stone-800 text-indigo-300":v?"border-cyan-400 bg-stone-800 text-cyan-300":y?"":i?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:c==="left"||c==="right"||c==="result"?{backgroundColor:"transparent"}:Ge(n),children:[u||f||p||g||m||v?h.jsx(h.Fragment,{children:h.jsx("span",{className:Q(u||v||m||g||p?"mt-4":"mt-2","font-mono text-base font-bold"),children:a.toString("hex")})}):d?h.jsx(h.Fragment,{children:h.jsx("span",{className:Q("mt-4 font-mono text-base font-bold text-red-300"),children:a.toString("hex")})}):c==="left"||c==="right"||c==="result"?h.jsx("span",{className:"ml-12 font-mono text-xs font-bold",style:{color:c==="left"?"#34D399":c==="right"?"#60A5FA":"#F59E0B",fontSize:"12px",fontWeight:"bold",textShadow:c==="left"?"0 0 8px rgba(52, 211, 153, 0.6)":c==="right"?"0 0 8px rgba(96, 165, 250, 0.6)":"0 0 8px rgba(245, 158, 11, 0.6)"},children:a.toString("hex")}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:Q("mr-2 font-extrabold tracking-wide",u&&"text-mantis-300 drop-shadow",y&&"text-yellow-200",v&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),h.jsx("span",{className:Q("rounded px-1 py-0.5 font-light",u?"border border-mantis-400 bg-stone-950 text-mantis-300":y?"border border-yellow-400 bg-yellow-950 text-yellow-200":v?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),y&&h.jsxs("span",{className:"ml-2 flex gap-1",children:[h.jsx("span",{className:Q("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),h.jsx("span",{className:Q("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),h.jsxs(Ub,{className:"w-60",children:[h.jsx("div",{className:"px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"font-medium text-white",children:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c}),c!=="left"&&c!=="right"&&c!=="result"&&h.jsx(M9,{concept:"register",level:"beginner",children:h.jsx("span",{className:"text-xs text-mantis-400",children:""})})]})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(x=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${x}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(x)})]},x))})]})]})}function fde(){const t=rt(je.FLAGS),e=rt(CD),n=rt(oi),[i,r]=b.useState(!1),[s,o]=b.useState(""),[a,l]=b.useState(""),[c,u]=b.useState(""),[d,f]=b.useState(""),[p,g]=b.useState(""),[m,v]=b.useState(""),y=rt(_D),[x]=rf(),w=b.useCallback(()=>n&&"metadata"in n&&n.metadata?`${n.metadata.name}${n.metadata.operands.length?" "+n.metadata.operands.join(", "):""}`:"",[n]),S=O=>["ADD","SUB","CMP","AND","OR","XOR"].some(H=>O.startsWith(H)),_=O=>{let T="AL",H="BL",D="AL";const K=[/ADD\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/SUB\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/CMP\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/AND\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/OR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/XOR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/];for(const te of K){const U=O.match(te);if(U){T=U[1],H=U[2],/\[.*\]/.test(T)&&(T="MBR"),/\[.*\]/.test(H)&&(H="MBR"),D=U[1];break}}const X=["AL","BL","CL","DL","MBR"];return X.includes(T)||(T="AL"),X.includes(H)||(H="BL"),X.includes(D)||(D="AL"),{left:T,right:H,destination:D}};b.useEffect(()=>{const O=D=>{console.log(" handleInstruction llamado con:",D);const X=w()||D;if(console.log(" Instruccin completa a usar:",X),D)if(S(X)){r(!0);const{left:U,right:B,destination:ie}=_(X);console.log(" Registros detectados:",{left:U,right:B,destination:ie}),f(U),g(B),v(ie);let be,J;U==="MBR"&&B!=="MBR"?(be=Tr(U,"left",D,void 0,{separateMBRPaths:!0,direction:"left"}),J=Tr(B,"right",D)):B==="MBR"&&U!=="MBR"?(be=Tr(U,"left",D),J=Tr(B,"right",D,void 0,{separateMBRPaths:!0,direction:"right"})):(be=Tr(U,"left",D),J=Tr(B,"right",D));const le=Tr("result start",ie,D),F="M 455 45 L 465 45 L 550 45 L 550 16 L 90 16 L 90 85 L 130 85 L 220 85",$="M 455 85 L 465 85 L 550 85 L 550 250 L 90 250 L 90 145 L 125 145 L 220 145",V="M 280 115 L 272 115 L 370 115 L 370 250 L 421 250 L 425 45";o(be||F),l(J||$),u(le||V)}else r(!1),o(""),l(""),u(""),f(""),g(""),v("");else r(!1),o(""),l(""),u(""),f(""),g(""),v("")},T=D=>{const K=D,X=w();O(X||K.detail.instruction)},H=D=>{const K=D;if(K.detail&&K.detail.instruction){const X=w();O(X||K.detail.instruction)}};return window.addEventListener("instructionChange",T),window.addEventListener("cpu:alu.execute",H),()=>{window.removeEventListener("instructionChange",T),window.removeEventListener("cpu:alu.execute",H)}},[n,w]);const E=t.bit(1),C=t.bit(0),N=t.bit(3),M=t.bit(4),I=t.bit(2);return h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[s&&h.jsx(qe.path,{className:"fill-none stroke-green-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",d:s,pathLength:1,strokeDasharray:1,style:Ge("cpu.alu.operands")}),a&&h.jsx(qe.path,{className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",d:a,pathLength:1,strokeDasharray:1,style:Ge("cpu.alu.operands")}),c&&h.jsx(qe.path,{className:"fill-none stroke-amber-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,191,36,0.6)]",strokeLinejoin:"round",d:c,pathLength:1,strokeDasharray:1,style:Ge("cpu.alu.results")}),s&&h.jsx(qe.path,{className:"fill-none stroke-green-300 stroke-1 opacity-50",strokeLinejoin:"round",d:s,pathLength:1,strokeDasharray:1,style:Ge("cpu.alu.operands")}),a&&h.jsx(qe.path,{className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",d:a,pathLength:1,strokeDasharray:1,style:Ge("cpu.alu.operands")}),c&&h.jsx(qe.path,{className:"fill-none stroke-amber-300 stroke-1 opacity-50",strokeLinejoin:"round",d:c,pathLength:1,strokeDasharray:1,style:Ge("cpu.alu.results")}),d&&p&&i&&s&&a&&h.jsxs(qe.text,{x:"125",y:"65",fill:"#34D399",fontSize:"12",fontWeight:"bold",style:Ge("cpu.alu.cog"),children:[d,"="]}),d&&p&&i&&s&&a&&h.jsxs(qe.text,{x:"125",y:"168",fill:"#60A5FA",fontSize:"12",fontWeight:"bold",style:Ge("cpu.alu.cog"),children:[p,"="]}),m&&i&&c&&h.jsxs(qe.text,{x:"310",y:"95",fill:"#F59E0B",fontSize:"12",fontWeight:"bold",style:Ge("cpu.alu.cog"),children:[m,"="]}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#374151"}),h.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),h.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),h.jsx("filter",{id:"aluShadow",children:h.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),h.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),h.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),h.jsx(qe.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:Ge("cpu.alu.cog").rot.to(O=>`rotate(${O*60}deg)`)}}),i&&h.jsx(qe.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:Ge("cpu.alu.operation"),children:e}),h.jsxs(qe.div,{className:Q("absolute flex min-h-[30px] w-min min-w-[38px] items-center gap-0.5 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 px-0.5 py-1 font-bold text-stone-200 shadow-lg ring-1 ring-stone-300",x.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px]":"left-[230px] top-[190px]"),style:Ge("cpu.FLAGS"),children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"FLAGS"}),h.jsxs("div",{className:"mt-2 flex items-center gap-0.5",children:[y&&h.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",M?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),x.flagsVisibility==="SF_OF_CF_ZF"&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",N?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),h.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",I?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),h.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",E?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),h.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",C?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function hde({progress:t}){const{opacity:n,filterIntensity:i}=I6({opacity:t.to(r=>r===0?.4:r===1?1:.4),filterIntensity:t.to(r=>r===0?.25:r===1?.6:.25),config:{tension:280,friction:60,duration:300}});return h.jsx(qe.div,{style:{opacity:n,filter:i.to(r=>`drop-shadow(0 0 ${8*r}px rgba(56,189,248,${r}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"90",height:"42",viewBox:"0 0 90 42",children:[h.jsx("rect",{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"#0369a1",stroke:"#38bdf8",strokeWidth:"2.5"}),Array.from({length:4}).map((r,s)=>h.jsx("rect",{x:2,y:10+s*5,width:8,height:2.5,rx:1.2,fill:"#38bdf8"},s)),Array.from({length:8}).map((r,s)=>h.jsx(qe.rect,{x:60,y:8+s*3.2,width:24,height:2.5,rx:1.2,fill:t.to(o=>o===1?"#7dd3fc":"#0ea5e9"),style:{filter:t.to(o=>o===1?"drop-shadow(0 0 8px #38bdf8)":"none")}},s)),Array.from({length:5}).map((r,s)=>h.jsx(qe.rect,{x:15,y:t.to(()=>12+s*3.5),width:40,height:2.8,rx:1.4,fill:t.to(o=>o!==1?"#0c4a6e":o===1?"#7dd3fc":"#0c4a6e"),style:{filter:t.to(o=>o!==1?"none":o===1?"drop-shadow(0 0 6px #38bdf8)":"none"),transition:"fill 0.7s, filter 0.7s"}},s)),h.jsx(qe.rect,{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"none",stroke:"#7dd3fc",strokeWidth:"2.5",strokeDasharray:"160",strokeDashoffset:t.to(r=>r===1?0:160),style:{opacity:t.to(r=>r===1?.8:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})})}function pde({progress:t,phase:e}){return h.jsxs(h.Fragment,{children:[Array.from({length:5}).map((i,r)=>h.jsx(qe.rect,{x:16,y:t.to(()=>10+r*4),width:38,height:3,rx:1,fill:t.to(s=>e==="fetching"&&s===0||s===0?"#581c87":s>=(r+1)/5?"#f0abfc":Math.floor(s*5)===r&&s>0&&s<1?"#fff1fb":"#581c87"),style:{filter:t.to(s=>e==="fetching"&&s===0||s===0?"none":s>=(r+1)/5?"drop-shadow(0 0 6px #e879f9)":Math.floor(s*5)===r&&s>0&&s<1?"drop-shadow(0 0 12px #e879f9)":"none"),transition:"fill 0.7s, filter 0.7s"}},r)),h.jsx(qe.rect,{x:15,y:t.to(i=>10+Math.floor(i*5)*4-.5),width:40,height:3.5,rx:1.5,fill:"#e879f9",style:{opacity:t.to(i=>i>0&&i<1?.25+.25*Math.sin(i*Math.PI):0),transition:"y 0.3s, opacity 0.2s"}}),h.jsx(qe.rect,{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"none",stroke:"#f0abfc",strokeWidth:"2",strokeDasharray:"160",strokeDashoffset:t.to(i=>e==="fetching"&&i===0||i===0?160:160-160*i),style:{opacity:t.to(i=>i>0&&i<1&&e==="fetching-operands"?.7:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})}function mde({progress:t,phase:e,memAnimKey:n}){const{opacity:i,filterIntensity:r}=I6({opacity:t.to(s=>s===0?.4:s>0&&s<1?1:.8),filterIntensity:t.to(s=>s===0?.25:s>0&&s<1?.6:.4),config:{tension:280,friction:60,duration:300}});return h.jsx(qe.div,{style:{opacity:i,filter:r.to(s=>`drop-shadow(0 0 ${8*s}px rgba(232,121,249,${s}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"70",height:"38",viewBox:"0 0 70 38",className:"mb-0.5",children:[h.jsx("rect",{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"#a21caf",stroke:"#e879f9",strokeWidth:"2"}),Array.from({length:4}).map((s,o)=>h.jsx("rect",{x:2,y:9+o*6,width:6,height:2,rx:1,fill:"#e879f9"},o)),Array.from({length:4}).map((s,o)=>h.jsx("rect",{x:62,y:9+o*6,width:6,height:2,rx:1,fill:"#e879f9"},o)),h.jsx(pde,{progress:t,phase:e},n)]})})}function gde(){const[t,e]=b.useState(0);b.useEffect(()=>{let a=0;const l=Ge("cpu.decoder.progress.progress").to(c=>{a===0&&c>0&&e(u=>u+1),a=c});return()=>{typeof l=="function"&&l()}},[]);const n=Xt(),i=rt(oi),[r,s]=b.useState(!1),[,o]=b.useState(!1);return b.useEffect(()=>{let a=null;o(!1);let l;return r?l=Ge("cpu.decoder.progress.progress").to(c=>{c===1?a=setTimeout(()=>{o(!0)},1500):(a&&clearTimeout(a),o(!1))}):o(!1),()=>{a&&clearTimeout(a),typeof l=="function"&&l()}},[r]),h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[h.jsx(qe.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Ge("cpu.decoder.path")}),h.jsx(qe.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Ge("cpu.decoder.path")})]}),h.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:n("computer.cpu.control-unit")})}),h.jsxs("div",{className:"absolute bottom-[17px] left-[30px] flex h-[160px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[h.jsx("div",{className:"min-w-[180px] overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-3 py-1",children:h.jsxs("div",{style:{position:"relative",left:0},children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{style:{position:"relative",left:0,display:"flex",alignItems:"center"},children:[h.jsx("span",{className:"text-sm leading-none",children:n("computer.cpu.decoder")}),h.jsx("button",{type:"button","aria-label":r?"Ocultar memoria de control":"Mostrar memoria de control",className:"ml-2 flex size-6 items-center justify-center rounded-lg bg-gradient-to-r from-mantis-600 to-mantis-500 text-white shadow-lg transition-all duration-300 hover:from-mantis-500 hover:to-mantis-400 focus:outline-none focus:ring-2 focus:ring-mantis-400",style:{fontSize:"1.2em",lineHeight:1,padding:0,minWidth:0,minHeight:0,transform:r?"rotate(180deg)":"rotate(0deg)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:r?"0 4px 12px rgba(34,197,94,0.4)":"0 2px 8px rgba(34,197,94,0.2)"},onClick:()=>s(a=>!a),children:h.jsx("span",{style:{fontWeight:"bold",transform:r?"scale(0.8)":"scale(1)",transition:"transform 0.2s ease-out"},children:r?"":"+"})})]})}),h.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:h.jsx(qe.div,{className:"h-full bg-mantis-400",style:{width:Ge("cpu.decoder.progress.progress").to(a=>`${a*100}%`),opacity:Ge("cpu.decoder.progress.opacity")}})}),h.jsx("div",{className:"flex w-full justify-center",children:r&&h.jsx("div",{className:"flex min-w-[120px] flex-col items-center",children:h.jsxs("div",{className:"flex flex-row items-start gap-4",children:[h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-fuchsia-100 drop-shadow-[0_0_6px_rgba(232,121,249,0.6)]",style:{minHeight:"18px"},children:[h.jsx("span",{className:"flex size-4 animate-pulse items-center justify-center rounded-full bg-fuchsia-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(232,121,249,0.6)]",style:{fontVariantNumeric:"tabular-nums",fontFamily:"monospace"},title:"Lectura de microinstrucciones",children:"1"}),"Memoria de control"]}),h.jsx(mde,{progress:Ge("cpu.decoder.progress.progress"),phase:i==null?void 0:i.phase,memAnimKey:t})]}),h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-sky-100 drop-shadow-[0_0_6px_rgba(56,189,248,0.6)]",style:{minHeight:"18px"},children:[h.jsx("span",{className:"flex size-4 animate-pulse items-center justify-center rounded-full bg-sky-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(56,189,248,0.6)]",style:{fontVariantNumeric:"tabular-nums",fontFamily:"monospace"},title:"Envo de seales de control",children:"2"}),"Secuenciador"]}),h.jsx(hde,{progress:Ge("cpu.decoder.progress.progress"),phase:i==null?void 0:i.phase,memAnimKey:t})]})]})})}),h.jsx("div",{className:"flex w-full justify-center",style:{maxHeight:r?90:0,opacity:r?1:0,transform:r?"translateY(0)":"translateY(-10px)",transition:"max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease-out, transform 0.5s ease-out",overflow:"hidden"}})]})}),h.jsx("div",{className:"flex w-full flex-1 items-start justify-center p-1",children:h.jsxs("div",{className:"w-[220px] max-w-[220px]",children:[h.jsx("div",{className:"mb-1 flex items-center justify-between",children:h.jsx("span",{className:"w-16 whitespace-nowrap text-xs font-bold uppercase tracking-wide text-mantis-400",children:"Instruccin"})}),h.jsx("div",{className:"mb-0.5 rounded border border-stone-600 bg-stone-900/80 p-0.5",children:h.jsx("div",{className:"min-w-0 flex-1 text-center",children:i&&"metadata"in i&&i.metadata?h.jsxs("div",{className:"truncate text-xs text-stone-300",children:[h.jsx("span",{className:"font-mono text-mantis-300",children:i.metadata.name}),i.metadata.operands.length>0&&h.jsxs("span",{className:"text-white",children:[" ",i.metadata.operands.join(", ")]})]}):h.jsx("div",{className:"text-xs text-stone-500",children:(i==null?void 0:i.phase)==="stopped"?"CPU detenida":"Esperando..."})})})]})})]})]})}function vde(){const[t,e]=b.useState(!1),[n,i]=b.useState(0);return b.useEffect(()=>{const r=()=>{e(!0),i(s=>s+1),setTimeout(()=>{e(!1)},3e3)};return window.addEventListener("ip-register-update",r),()=>{window.removeEventListener("ip-register-update",r)}},[]),t?h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-30px);
          }
          70% {
            opacity: 1;
            transform: translateY(-30px);
          }
          100% {
            opacity: 0;
            transform: translateY(-50px);
          }
        }
      `}),h.jsx("div",{className:Q("pointer-events-none absolute left-[425px] top-[342px]","font-mono text-lg font-bold"),style:{color:"#ff6347",animation:"slideUpAndFade 3s ease-out forwards"},children:"+1"},n)]}):null}function yde(){const t=Xt(),e=rt(EC),[n,i]=b.useState(!1),[r,s]=b.useState(!1),[o,a]=b.useState(!1);return b.useEffect(()=>{const l=(u,d,f)=>{a(u==="ADD"||u==="SUB"||u==="CMP"||u==="AND"||u==="OR"||u==="XOR"||u==="NOT"||u==="NEG"||u==="DEC"||u==="INC"),i(!!(u==="IRET"||d)),s(!!f)},c=u=>{const d=u;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]),h.jsxs("div",{"data-testid":"cpu-component",className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),h.jsx(Aie,{showSP:e,showri:r}),h.jsx(sse,{showSP:e,showid:n,showri:r}),o&&h.jsxs(h.Fragment,{children:[h.jsx(Mi,{name:"left",className:Q("left-[96px] top-[49px]","border-transparent","bg-transparent")}),h.jsx(Mi,{name:"right",className:Q("left-[96px] top-[150px]","border-transparent","bg-transparent")}),h.jsx(Mi,{name:"result",className:Q("left-[280px] top-[79px]","border-transparent","bg-transparent")})]}),h.jsx(fde,{}),h.jsxs("div",{className:"absolute left-[450px] top-[30px] z-10",children:[h.jsx(Mi,{name:"AL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"AL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[70px] z-10",children:[h.jsx(Mi,{name:"BL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"BL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[110px] z-10",children:[h.jsx(Mi,{name:"CL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"CL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[150px] z-10",children:[h.jsx(Mi,{name:"DL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"DL"})]}),n&&h.jsx(Mi,{name:"id",className:Q("left-[450px] top-[190px]","border-cyan-400")}),h.jsxs("div",{className:"absolute left-[450px] top-[332px] z-10",children:[h.jsx(Mi,{name:"IP",emphasis:!0,className:"border-red-500"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-red-500 bg-red-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-red-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IP"})]}),h.jsxs("div",{className:"absolute left-[610px] top-[332px] z-10",children:[h.jsx(Mi,{name:"MAR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MAR"})]}),h.jsxs("div",{className:"absolute left-[610px] top-[233px] z-10",children:[h.jsx(Mi,{name:"MBR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MBR"})]}),h.jsxs("div",{className:"absolute left-[230px] top-[270px] z-10",children:[h.jsx(Mi,{name:"IR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IR"})]}),h.jsx(gde,{}),e&&h.jsx(Mi,{name:"SP",emphasis:!0,className:Q("left-[450px] top-[292px]","border-yellow-400")}),r&&h.jsxs("div",{className:"absolute left-[450px] top-[372px] z-10",children:[h.jsx(Mi,{name:"ri",emphasis:!0,className:"border-cyan-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"ri"})]}),h.jsx(vde,{})]})}function Mi({name:t,emphasis:e,className:n}){const i=r=>`cpu.${r}`;return h.jsx(pr,{name:t,valueAtom:je[t],springs:i(t),emphasis:e,className:Q("absolute",n)})}const U9=b.memo(({className:t})=>{const e=Xt(),n=rt(wp),i=rt(lb),[r]=rf(),[s,o]=b.useState(!1),l=1e3/parseInt(r.cpuSpeed);if(!r.showStatsCPU)return null;const c=i>0?(n/i).toFixed(2):"-",u=n*l,d=l/1e3,f=()=>n===0?"":i===0?"":"",p=()=>n===0?"text-stone-400":i===0?"text-yellow-400":"text-mantis-400",g=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"CPI (Ciclos por Instruccin):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Mtrica fundamental que indica la eficiencia del procesador. Calculada como el cociente entre ciclos totales e instrucciones ejecutadas. Un CPI ms bajo significa mejor rendimiento."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo de CPU:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Tiempo real transcurrido durante la ejecucin del programa. Se calcula multiplicando los ciclos totales por el tiempo de cada ciclo segn la velocidad configurada."})]}),h.jsxs("div",{className:"border-t border-stone-600 pt-2",children:[h.jsx("strong",{className:"text-mantis-300",children:"Interpretacin:"}),h.jsx("br",{}),h.jsxs("span",{className:"text-stone-300",children:[" CPI = 1: Instrucciones simples (ideal)",h.jsx("br",{})," CPI > 1: Instrucciones complejas o mltiples ciclos",h.jsx("br",{})," Menor tiempo = mejor rendimiento"]})]})]}),m=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Velocidad CPU (Hz):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Frecuencia del reloj del procesador que determina la velocidad de ejecucin. Cada ciclo de reloj ejecuta una microoperacin del procesador."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo por Ciclo:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Duracin de cada ciclo calculada como 1/velocidad. Por ejemplo, 1 MHz = 1 microsegundo por ciclo."})]}),h.jsxs("div",{className:"border-t border-stone-600 pt-2",children:[h.jsx("strong",{className:"text-mantis-300",children:"Impacto en Rendimiento:"}),h.jsx("br",{}),h.jsxs("span",{className:"text-stone-300",children:[" Mayor Hz = ciclos ms rpidos",h.jsx("br",{})," Menor tiempo total de ejecucin",h.jsx("br",{})," Mejor experiencia de simulacin"]})]})]});return h.jsxs("div",{className:Q("flex flex-col gap-2 rounded-lg border border-stone-600 bg-stone-900/95 p-3 shadow-lg","min-w-[300px] max-w-[350px]",t),children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-bold uppercase tracking-wide text-mantis-400",children:e("computer.cpu.stats")}),h.jsx("button",{onClick:()=>o(!s),className:Q("rounded px-2 py-1 text-xs transition-colors",s?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:bg-mantis-400/10 hover:text-mantis-400"),children:s?"":"+"})]})}),h.jsxs("div",{className:"flex items-center gap-3 rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:Q("text-2xl",p()),children:f()}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:Q("text-sm font-semibold",p()),children:n>0?"Ejecutando":"En espera"}),h.jsx("div",{className:"mt-1 text-xs text-stone-400",children:i>0?`${i} instrucciones ejecutadas`:"Sin instrucciones ejecutadas"})]})]}),s&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:"mb-2 text-xs font-bold text-mantis-400",children:"Mtricas principales:"}),h.jsx("div",{className:"mb-2 text-xs text-stone-400",children:"Estadsticas acumuladas del programa completo"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:"Ciclos totales del programa"}),h.jsx("div",{className:"font-mono text-lg text-white",children:n})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:e("computer.cpu.instruction-count")}),h.jsx("div",{className:"font-mono text-lg text-white",children:i})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Mtricas de Rendimiento:"}),h.jsx(vr,{content:g,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:""})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs text-stone-300",title:e("computer.cpu.cpi-help"),children:[e("computer.cpu.cpi"),":"]}),h.jsx("span",{className:"font-mono text-sm text-mantis-300",children:c})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-300",title:`${e("computer.cpu.cpu-time-help")} (${d.toFixed(1)} s)`,children:e("computer.cpu.cpu-time")}),h.jsxs("span",{className:"font-mono text-sm text-mantis-300",children:[(u/1e3).toFixed(1)," s"]})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Configuracin Actual:"}),h.jsx(vr,{content:m,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:""})})]}),h.jsx("div",{className:"space-y-1 text-xs text-stone-300",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-stone-300",children:h.jsx("strong",{children:"Velocidad CPU:"})}),h.jsxs("span",{className:"font-mono text-mantis-300",children:[r.cpuSpeed," Hz (",d.toFixed(1)," s/ciclo)"]})]})})]})]})]})});U9.displayName="CPUStats";const bde="_pushable_1q0ek_2",xde="_front_1q0ek_15",wde="_shadow_1q0ek_20",Sde="_edge_1q0ek_52",Fg={pushable:bde,front:xde,shadow:wde,edge:Sde};function kde(){const t=Xt(),{status:e,dispatch:n,devices:i}=Ln();return yu("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?h.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:h.jsxs("button",{className:Fg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[h.jsx("div",{className:Fg.shadow}),h.jsx("div",{className:Fg.edge}),h.jsx("span",{className:Fg.front,children:t("computer.f10")})]})}):null}function _de(){const t=Xt(),{devices:e}=Ln();return e.handshake?h.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),h.jsx(pr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:dE,springs:"handshake.STATE",className:"mx-auto my-4"}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(pr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:uE,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var V9={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(b)})(I7,function(n){return function(){var i={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(F,$){for(var V in $)l.o($,V)&&!l.o(F,V)&&Object.defineProperty(F,V,{enumerable:!0,get:$[V]})},o:function(F,$){return Object.prototype.hasOwnProperty.call(F,$)},r:function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})}},c={};function u(F){return function($){if(Array.isArray($))return f($)}(F)||function($){if(typeof Symbol<"u"&&$[Symbol.iterator]!=null||$["@@iterator"]!=null)return Array.from($)}(F)||d(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(F,$){if(F){if(typeof F=="string")return f(F,$);var V={}.toString.call(F).slice(8,-1);return V==="Object"&&F.constructor&&(V=F.constructor.name),V==="Map"||V==="Set"?Array.from(F):V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?f(F,$):void 0}}function f(F,$){($==null||$>F.length)&&($=F.length);for(var V=0,k=Array($);V<$;V++)k[V]=F[V];return k}function p(F){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},p(F)}function g(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,v(k.key),k)}}function m(F,$,V){return($=v($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function v(F){var $=function(V,k){if(p(V)!="object"||!V)return V;var P=V[Symbol.toPrimitive];if(P!==void 0){var j=P.call(V,k);if(p(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return p($)=="symbol"?$:$+""}l.r(c),l.d(c,{SimpleKeyboard:function(){return J},default:function(){return le}});var y=function(){return F=function k(P){var j=P.getOptions,R=P.getCaretPosition,Y=P.getCaretPositionEnd,G=P.dispatch;(function(ne,Z){if(!(ne instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,k),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(ne){return ne&&!(ne[0]==="{"&&ne[ne.length-1]==="}")}),this.getOptions=j,this.getCaretPosition=R,this.getCaretPositionEnd=Y,this.dispatch=G,k.bindMethods(k,this)},$=[{key:"getButtonType",value:function(k){return k.includes("{")&&k.includes("}")&&k!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(k){var P=this.getButtonType(k),j=k.replace("{","").replace("}",""),R="";return P!=="standardBtn"&&(R=" hg-button-".concat(j)),"hg-".concat(P).concat(R)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(k,P){return(P=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),P):P||this.getDefaultDiplay())[k]||k}},{key:"getUpdatedInput",value:function(k,P,j){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:j,Y=arguments.length>4&&arguments[4]!==void 0&&arguments[4],G=this.getOptions(),ne=[j,R,Y],Z=P;return(k==="{bksp}"||k==="{backspace}")&&Z.length>0?Z=this.removeAt.apply(this,[Z].concat(ne)):(k==="{delete}"||k==="{forwarddelete}")&&Z.length>0?Z=this.removeForwardsAt.apply(this,[Z].concat(ne)):k==="{space}"?Z=this.addStringAt.apply(this,[Z," "].concat(ne)):k!=="{tab}"||typeof G.tabCharOnTab=="boolean"&&G.tabCharOnTab===!1?k!=="{enter}"&&k!=="{numpadenter}"||!G.newLineOnEnter?k.includes("numpad")&&Number.isInteger(Number(k[k.length-2]))?Z=this.addStringAt.apply(this,[Z,k[k.length-2]].concat(ne)):k==="{numpaddivide}"?Z=this.addStringAt.apply(this,[Z,"/"].concat(ne)):k==="{numpadmultiply}"?Z=this.addStringAt.apply(this,[Z,"*"].concat(ne)):k==="{numpadsubtract}"?Z=this.addStringAt.apply(this,[Z,"-"].concat(ne)):k==="{numpadadd}"?Z=this.addStringAt.apply(this,[Z,"+"].concat(ne)):k==="{numpaddecimal}"?Z=this.addStringAt.apply(this,[Z,"."].concat(ne)):k==="{"||k==="}"?Z=this.addStringAt.apply(this,[Z,k].concat(ne)):k.includes("{")||k.includes("}")||(Z=this.addStringAt.apply(this,[Z,k].concat(ne))):Z=this.addStringAt.apply(this,[Z,`
`].concat(ne)):Z=this.addStringAt.apply(this,[Z,"	"].concat(ne)),G.debug&&console.log("Input will be: "+Z),Z}},{key:"updateCaretPos",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],j=this.updateCaretPosAction(k,P);this.dispatch(function(R){R.setCaretPosition(j)})}},{key:"updateCaretPosAction",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],j=this.getOptions(),R=this.getCaretPosition();return R!=null&&(P?R>0&&(R-=k):R+=k),j.debug&&console.log("Caret at:",R),R}},{key:"addStringAt",value:function(k,P){var j,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k.length,G=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return R||R===0?(j=[k.slice(0,R),P,k.slice(Y)].join(""),this.isMaxLengthReached()||G&&this.updateCaretPos(P.length)):j=k+P,j}},{key:"removeAt",value:function(k){var P,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(j===0&&R===0)return k;if(j===R){var G=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;j&&j>=0?k.substring(j-2,j).match(G)?(P=k.substr(0,j-2)+k.substr(j),Y&&this.updateCaretPos(2,!0)):(P=k.substr(0,j-1)+k.substr(j),Y&&this.updateCaretPos(1,!0)):k.slice(-2).match(G)?(P=k.slice(0,-2),Y&&this.updateCaretPos(2,!0)):(P=k.slice(0,-1),Y&&this.updateCaretPos(1,!0))}else P=k.slice(0,j)+k.slice(R),Y&&this.dispatch(function(ne){ne.setCaretPosition(j)});return P}},{key:"removeForwardsAt",value:function(k){var P,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return k!=null&&k.length&&j!==null?(j===R?P=k.substring(j,j+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?k.substr(0,j)+k.substr(j+2):k.substr(0,j)+k.substr(j+1):(P=k.slice(0,j)+k.slice(R),Y&&this.dispatch(function(G){G.setCaretPosition(j)})),P):k}},{key:"handleMaxLength",value:function(k,P){var j=this.getOptions(),R=j.maxLength,Y=k[j.inputName||"default"],G=P.length-1>=R;if(P.length<=Y.length)return!1;if(Number.isInteger(R))return j.debug&&console.log("maxLength (num) reached:",G),G?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(p(R)==="object"){var ne=P.length-1>=R[j.inputName||"default"];return j.debug&&console.log("maxLength (obj) reached:",ne),ne?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(k){return k?k.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(P,j){return j.length?P+j[0].toUpperCase()+j.slice(1):P}):""}},{key:"chunkArray",value:function(k,P){return u(Array(Math.ceil(k.length/P))).map(function(j,R){return k.slice(P*R,P+P*R)})}},{key:"escapeRegex",value:function(k){return k.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(k,P){var j=k,R=P.indexOf("");return R<k&&R!=-1&&j--,P.indexOf("")<k&&R!=-1&&j--,j<0?0:j}},{key:"isConstructor",value:function(k){try{Reflect.construct(String,[],k)}catch{return!1}return!0}}],V=[{key:"bindMethods",value:function(k,P){var j,R=function(G,ne){var Z=typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(!Z){if(Array.isArray(G)||(Z=d(G))||ne){Z&&(G=Z);var Pe=0,Be=function(){};return{s:Be,n:function(){return Pe>=G.length?{done:!0}:{done:!1,value:G[Pe++]}},e:function(ge){throw ge},f:Be}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ue,Le=!0,Je=!1;return{s:function(){Z=Z.call(G)},n:function(){var ge=Z.next();return Le=ge.done,ge},e:function(ge){Je=!0,Ue=ge},f:function(){try{Le||Z.return==null||Z.return()}finally{if(Je)throw Ue}}}}(Object.getOwnPropertyNames(k.prototype));try{for(R.s();!(j=R.n()).done;){var Y=j.value;Y==="constructor"||Y==="bindMethods"||(P[Y]=P[Y].bind(P))}}catch(G){R.e(G)}finally{R.f()}}}],$&&g(F.prototype,$),V&&g(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}();m(y,"noop",function(){});var x=y;function w(F){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},w(F)}function S(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,E(k.key),k)}}function _(F,$,V){return($=E($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function E(F){var $=function(V,k){if(w(V)!="object"||!V)return V;var P=V[Symbol.toPrimitive];if(P!==void 0){var j=P.call(V,k);if(w(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return w($)=="symbol"?$:$+""}var C=function(){return F=function k(P){var j=this,R=P.dispatch,Y=P.getOptions;(function(G,ne){if(!(G instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,k),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isModifierKey",function(G){return G.altKey||G.ctrlKey||G.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(G.code||G.key||j.keyCodeToKey(G==null?void 0:G.keyCode))}),this.dispatch=R,this.getOptions=Y,x.bindMethods(k,this)},$=[{key:"handleHighlightKeyDown",value:function(k){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var j=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(R){var Y,G,ne=R.getButtonElement(j),Z=R.getButtonElement("{".concat(j,"}"));if(ne)Y=ne,G=j;else{if(!Z)return;Y=Z,G="{".concat(j,"}")}var Pe,Be,Ue,Le,Je=function(_t){_t.style.background=P.physicalKeyboardHighlightBgColor||"#dadce4",_t.style.color=P.physicalKeyboardHighlightTextColor||"black"};if(Y)if(Array.isArray(Y)){if(Y.forEach(function(_t){return Je(_t)}),P.physicalKeyboardHighlightPress)if(P.physicalKeyboardHighlightPressUsePointerEvents)(Pe=Y[0])===null||Pe===void 0||(Be=Pe.onpointerdown)===null||Be===void 0||Be.call(Pe,k);else if(P.physicalKeyboardHighlightPressUseClick){var ge;(ge=Y[0])===null||ge===void 0||ge.click()}else R.handleButtonClicked(G,k)}else Je(Y),P.physicalKeyboardHighlightPress&&(P.physicalKeyboardHighlightPressUsePointerEvents?(Ue=Y)===null||Ue===void 0||(Le=Ue.onpointerdown)===null||Le===void 0||Le.call(Ue,k):P.physicalKeyboardHighlightPressUseClick?Y.click():R.handleButtonClicked(G,k))})}},{key:"handleHighlightKeyUp",value:function(k){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var j=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(R){var Y,G,ne,Z=R.getButtonElement(j)||R.getButtonElement("{".concat(j,"}")),Pe=function(Be){Be.removeAttribute&&Be.removeAttribute("style")};Z&&(Array.isArray(Z)?(Z.forEach(function(Be){return Pe(Be)}),P.physicalKeyboardHighlightPressUsePointerEvents&&((Y=Z[0])===null||Y===void 0||(G=Y.onpointerup)===null||G===void 0||G.call(Y,k))):(Pe(Z),P.physicalKeyboardHighlightPressUsePointerEvents&&(Z==null||(ne=Z.onpointerup)===null||ne===void 0||ne.call(Z,k))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(k){var P,j="",R=k.code||k.key||this.keyCodeToKey(k==null?void 0:k.keyCode);return(j=R!=null&&R.includes("Numpad")||R!=null&&R.includes("Shift")||R!=null&&R.includes("Space")||R!=null&&R.includes("Backspace")||R!=null&&R.includes("Control")||R!=null&&R.includes("Alt")||R!=null&&R.includes("Meta")?k.code||"":k.key||this.keyCodeToKey(k==null?void 0:k.keyCode)||"").length>1?(P=j)===null||P===void 0?void 0:P.toLowerCase():j}},{key:"keyCodeToKey",value:function(k){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[k]||""}}],$&&S(F.prototype,$),V&&S(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}();function N(F){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},N(F)}function M(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,O(k.key),k)}}function I(F,$,V){return($=O($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function O(F){var $=function(V,k){if(N(V)!="object"||!V)return V;var P=V[Symbol.toPrimitive];if(P!==void 0){var j=P.call(V,k);if(N(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return N($)=="symbol"?$:$+""}var T=function(){return F=function k(P){var j=P.utilities,R=P.options;(function(Y,G){if(!(Y instanceof G))throw new TypeError("Cannot call a class as a function")})(this,k),I(this,"utilities",void 0),I(this,"options",void 0),I(this,"candidateBoxElement",void 0),I(this,"pageIndex",0),I(this,"pageSize",void 0),this.utilities=j,this.options=R,x.bindMethods(k,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},$=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(k){var P=this,j=k.candidateValue,R=k.targetElement,Y=k.onSelect;if(j&&j.length){var G=this.utilities.chunkArray(j.split(" "),this.pageSize);this.renderPage({candidateListPages:G,targetElement:R,pageIndex:this.pageIndex,nbPages:G.length,onItemSelected:function(ne,Z){Y(ne,Z),P.destroy()}})}}},{key:"renderPage",value:function(k){var P,j=this,R=k.candidateListPages,Y=k.targetElement,G=k.pageIndex,ne=k.nbPages,Z=k.onItemSelected;(P=this.candidateBoxElement)===null||P===void 0||P.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Pe=document.createElement("ul");Pe.className="hg-candidate-box-list",R[G].forEach(function(xn){var Bl,As=document.createElement("li"),ca=function(){var ua=new(j.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(ua,"target",{value:As}),ua};As.className="hg-candidate-box-list-item",As.innerHTML=((Bl=j.options.display)===null||Bl===void 0?void 0:Bl[xn])||xn,j.options.useTouchEvents?As.ontouchstart=function(ua){return Z(xn,ua||ca())}:As.onclick=function(){var ua=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ca();return Z(xn,ua)},Pe.appendChild(As)});var Be=G>0,Ue=document.createElement("div");Ue.classList.add("hg-candidate-box-prev"),Be&&Ue.classList.add("hg-candidate-box-btn-active");var Le=function(){Be&&j.renderPage({candidateListPages:R,targetElement:Y,pageIndex:G-1,nbPages:ne,onItemSelected:Z})};this.options.useTouchEvents?Ue.ontouchstart=Le:Ue.onclick=Le,this.candidateBoxElement.appendChild(Ue),this.candidateBoxElement.appendChild(Pe);var Je=G<ne-1,ge=document.createElement("div");ge.classList.add("hg-candidate-box-next"),Je&&ge.classList.add("hg-candidate-box-btn-active");var _t=function(){Je&&j.renderPage({candidateListPages:R,targetElement:Y,pageIndex:G+1,nbPages:ne,onItemSelected:Z})};this.options.useTouchEvents?ge.ontouchstart=_t:ge.onclick=_t,this.candidateBoxElement.appendChild(ge),Y.prepend(this.candidateBoxElement)}}],$&&M(F.prototype,$),V&&M(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}(),H=T;function D(F){return function($){if(Array.isArray($))return K($)}(F)||function($){if(typeof Symbol<"u"&&$[Symbol.iterator]!=null||$["@@iterator"]!=null)return Array.from($)}(F)||function($,V){if($){if(typeof $=="string")return K($,V);var k={}.toString.call($).slice(8,-1);return k==="Object"&&$.constructor&&(k=$.constructor.name),k==="Map"||k==="Set"?Array.from($):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?K($,V):void 0}}(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function K(F,$){($==null||$>F.length)&&($=F.length);for(var V=0,k=Array($);V<$;V++)k[V]=F[V];return k}function X(F){return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},X(F)}function te(F,$){var V=Object.keys(F);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(F);$&&(k=k.filter(function(P){return Object.getOwnPropertyDescriptor(F,P).enumerable})),V.push.apply(V,k)}return V}function U(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,ie(k.key),k)}}function B(F,$,V){return($=ie($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function ie(F){var $=function(V,k){if(X(V)!="object"||!V)return V;var P=V[Symbol.toPrimitive];if(P!==void 0){var j=P.call(V,k);if(X(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return X($)=="symbol"?$:$+""}var be=function(){return F=function k(P,j){var R=this;if(function(Le,Je){if(!(Le instanceof Je))throw new TypeError("Cannot call a class as a function")}(this,k),B(this,"input",void 0),B(this,"options",void 0),B(this,"utilities",void 0),B(this,"caretPosition",void 0),B(this,"caretPositionEnd",void 0),B(this,"keyboardDOM",void 0),B(this,"keyboardPluginClasses",void 0),B(this,"keyboardDOMClass",void 0),B(this,"buttonElements",void 0),B(this,"currentInstanceName",void 0),B(this,"allKeyboardInstances",void 0),B(this,"keyboardInstanceNames",void 0),B(this,"isFirstKeyboardInstance",void 0),B(this,"physicalKeyboard",void 0),B(this,"modules",void 0),B(this,"activeButtonClass",void 0),B(this,"holdInteractionTimeout",void 0),B(this,"holdTimeout",void 0),B(this,"isMouseHold",void 0),B(this,"initialized",void 0),B(this,"candidateBox",void 0),B(this,"keyboardRowsDOM",void 0),B(this,"defaultName","default"),B(this,"activeInputElement",null),B(this,"handleParams",function(Le,Je){var ge,_t,xn;if(typeof Le=="string")ge=Le.split(".").join(""),_t=document.querySelector(".".concat(ge)),xn=Je;else if(Le instanceof HTMLDivElement){if(!Le.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ge=Le.className.split(" ")[0],_t=Le,xn=Je}else ge="simple-keyboard",_t=document.querySelector(".".concat(ge)),xn=Le;return{keyboardDOMClass:ge,keyboardDOM:_t,options:xn}}),B(this,"getOptions",function(){return R.options}),B(this,"getCaretPosition",function(){return R.caretPosition}),B(this,"getCaretPositionEnd",function(){return R.caretPositionEnd}),B(this,"registerModule",function(Le,Je){R.modules[Le]||(R.modules[Le]={}),Je(R.modules[Le])}),B(this,"getKeyboardClassString",function(){for(var Le=arguments.length,Je=new Array(Le),ge=0;ge<Le;ge++)Je[ge]=arguments[ge];return[R.keyboardDOMClass].concat(Je).filter(function(_t){return!!_t}).join(" ")}),typeof window<"u"){var Y=this.handleParams(P,j),G=Y.keyboardDOMClass,ne=Y.keyboardDOM,Z=Y.options,Pe=Z===void 0?{}:Z;this.utilities=new x({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ne,this.options=function(Le){for(var Je=1;Je<arguments.length;Je++){var ge=arguments[Je]!=null?arguments[Je]:{};Je%2?te(Object(ge),!0).forEach(function(_t){B(Le,_t,ge[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Le,Object.getOwnPropertyDescriptors(ge)):te(Object(ge)).forEach(function(_t){Object.defineProperty(Le,_t,Object.getOwnPropertyDescriptor(ge,_t))})}return Le}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Pe),this.keyboardPluginClasses="",x.bindMethods(k,this);var Be=this.options.inputName,Ue=Be===void 0?this.defaultName:Be;if(this.input={},this.input[Ue]="",this.keyboardDOMClass=G,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new H({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(G,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},$=[{key:"setCaretPosition",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k;this.caretPosition=k,this.caretPositionEnd=P}},{key:"getInputCandidates",value:function(k){var P=this,j=this.options,R=j.layoutCandidates,Y=j.layoutCandidatesCaseSensitiveMatch;if(!R||X(R)!=="object")return{};var G=Object.keys(R).filter(function(Pe){var Be=k.substring(0,P.getCaretPositionEnd()||0)||k,Ue=new RegExp("".concat(P.utilities.escapeRegex(Pe),"$"),Y?"g":"gi");return!!D(Be.matchAll(Ue)).length});if(G.length>1){var ne=G.sort(function(Pe,Be){return Be.length-Pe.length})[0];return{candidateKey:ne,candidateValue:R[ne]}}if(G.length){var Z=G[0];return{candidateKey:Z,candidateValue:R[Z]}}return{}}},{key:"showCandidatesBox",value:function(k,P,j){var R=this;this.candidateBox&&this.candidateBox.show({candidateValue:P,targetElement:j,onSelect:function(Y,G){var ne=R.options,Z=ne.layoutCandidatesCaseSensitiveMatch,Pe=ne.disableCandidateNormalization,Be=ne.enableLayoutCandidatesKeyPress,Ue=Y;Pe||(Ue=Y.normalize("NFD")),typeof R.options.beforeInputUpdate=="function"&&R.options.beforeInputUpdate(R);var Le=R.getInput(R.options.inputName,!0),Je=R.getCaretPositionEnd()||0,ge=Le.substring(0,Je||0)||Le,_t=new RegExp("".concat(R.utilities.escapeRegex(k),"$"),Z?"g":"gi"),xn=ge.replace(_t,Ue),Bl=Le.replace(ge,xn),As=xn.length-ge.length,ca=(Je||Le.length)+As;ca<0&&(ca=0),R.setInput(Bl,R.options.inputName,!0),R.setCaretPosition(ca),Be&&typeof R.options.onKeyPress=="function"&&R.options.onKeyPress(Y,G),typeof R.options.onChange=="function"&&R.options.onChange(R.getInput(R.options.inputName,!0),G),typeof R.options.onChangeAll=="function"&&R.options.onChangeAll(R.getAllInputs(),G)}})}},{key:"handleButtonClicked",value:function(k,P){var j=this.options,R=j.inputName,Y=R===void 0?this.defaultName:R,G=j.debug;if(k!=="{//}"){this.input[Y]||(this.input[Y]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ne=this.utilities.getUpdatedInput(k,this.input[Y],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(k)&&this.activeInputElement&&this.input[Y]&&this.input[Y]===ne&&this.caretPosition===0&&this.caretPositionEnd===ne.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(k,P);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(k,P),this.input[Y]!==ne&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ne))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ne))return;var Z=this.utilities.getUpdatedInput(k,this.input[Y],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(Z,this.options.inputName,!0),G&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),P==null?void 0:P.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),P),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),P),P!=null&&P.target&&this.options.enableLayoutCandidates){var Pe,Be=this.getInputCandidates(ne),Ue=Be.candidateKey,Le=Be.candidateValue;Ue&&Le?this.showCandidatesBox(Ue,Le,this.keyboardDOM):(Pe=this.candidateBox)===null||Pe===void 0||Pe.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),G&&console.log("Key pressed:",k)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(k){this.options.syncInstanceInputs?this.dispatch(function(P){P.isMouseHold=k}):this.isMouseHold=k}},{key:"handleButtonMouseDown",value:function(k,P){var j=this;P&&(this.options.preventMouseDownDefault&&P.preventDefault(),this.options.stopMouseDownPropagation&&P.stopPropagation(),P.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(j.getMouseHold()&&(!k.includes("{")&&!k.includes("}")||k==="{delete}"||k==="{backspace}"||k==="{bksp}"||k==="{space}"||k==="{tab}")||k==="{arrowright}"||k==="{arrowleft}"||k==="{arrowup}"||k==="{arrowdown}")&&(j.options.debug&&console.log("Button held:",k),j.handleButtonHold(k)),clearTimeout(j.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(k,P){var j=this;P&&(this.options.preventMouseUpDefault&&P.preventDefault&&P.preventDefault(),this.options.stopMouseUpPropagation&&P.stopPropagation&&P.stopPropagation(),!(P.target===this.keyboardDOM||P.target&&this.keyboardDOM.contains(P.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(P.target===this.candidateBox.candidateBoxElement||P.target&&this.candidateBox.candidateBoxElement.contains(P.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(R){R.classList.remove(j.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),k&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(k,P)}},{key:"handleKeyboardContainerMouseDown",value:function(k){this.options.preventMouseDownDefault&&k.preventDefault()}},{key:"handleButtonHold",value:function(k){var P=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){P.getMouseHold()?(P.handleButtonClicked(k),P.handleButtonHold(k)):clearTimeout(P.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var k=this;this.dispatch(function(P){P.replaceInput(k.input),P.setCaretPosition(k.caretPosition,k.caretPositionEnd)})}},{key:"clearInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[k]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,P=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!P&&this.syncInstanceInputs(),this.options.rtl?""+this.input[k].replace("","").replace("","")+"":this.input[k]}},{key:"getAllInputs",value:function(){var k=this,P={};return Object.keys(this.input).forEach(function(j){P[j]=k.getInput(j,!0)}),P}},{key:"setInput",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,j=arguments.length>2?arguments[2]:void 0;this.input[P]=k,!j&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(k){this.input=k}},{key:"setOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=this.changedOptions(k);this.options=Object.assign(this.options,k),P.length&&(this.options.debug&&console.log("changedOptions",P),this.onSetOptions(P),this.render())}},{key:"changedOptions",value:function(k){var P=this;return Object.keys(k).filter(function(j){return JSON.stringify(k[j])!==JSON.stringify(P.options[j])})}},{key:"onSetOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];k.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(k.includes("layoutCandidatesPageSize")||k.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new H({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(k){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(P){k(window.SimpleKeyboardInstances[P],P)})}},{key:"addButtonTheme",value:function(k,P){var j=this;P&&k&&(k.split(" ").forEach(function(R){P.split(" ").forEach(function(Y){j.options.buttonTheme||(j.options.buttonTheme=[]);var G=!1;j.options.buttonTheme.map(function(ne){if(ne!=null&&ne.class.split(" ").includes(Y)){G=!0;var Z=ne.buttons.split(" ");Z.includes(R)||(G=!0,Z.push(R),ne.buttons=Z.join(" "))}return ne}),G||j.options.buttonTheme.push({class:Y,buttons:k})})}),this.render())}},{key:"removeButtonTheme",value:function(k,P){var j=this;if(!k&&!P)return this.options.buttonTheme=[],void this.render();k&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(k.split(" ").forEach(function(R){var Y;(Y=j.options)===null||Y===void 0||(Y=Y.buttonTheme)===null||Y===void 0||Y.map(function(G,ne){if(G&&P&&P.includes(G.class)||!P){var Z,Pe,Be=(Z=G)===null||Z===void 0?void 0:Z.buttons.split(" ").filter(function(Ue){return Ue!==R});G&&Be!=null&&Be.length?G.buttons=Be.join(" "):((Pe=j.options.buttonTheme)===null||Pe===void 0||Pe.splice(ne,1),G=null)}return G})}),this.render())}},{key:"getButtonElement",value:function(k){var P,j=this.buttonElements[k];return j&&(P=j.length>1?j:j[0]),P}},{key:"inputPatternIsValid",value:function(k){var P,j=this.options.inputPattern;if((P=j instanceof RegExp?j:j[this.options.inputName||this.defaultName])&&k){var R=P.test(k);return this.options.debug&&console.log('inputPattern ("'.concat(P,'"): ').concat(R?"passed":"did not pass!")),R}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var k=this.options.physicalKeyboardHighlightPreventDefault,P=k!==void 0&&k;document.addEventListener("keyup",this.handleKeyUp,P),document.addEventListener("keydown",this.handleKeyDown,P),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(k){this.caretEventHandler(k),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(k)}},{key:"handleKeyDown",value:function(k){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(k)}},{key:"handleMouseUp",value:function(k){this.caretEventHandler(k)}},{key:"handleTouchEnd",value:function(k){this.caretEventHandler(k)}},{key:"handleSelect",value:function(k){this.caretEventHandler(k)}},{key:"handleSelectionChange",value:function(k){navigator.userAgent.includes("Firefox")||this.caretEventHandler(k)}},{key:"caretEventHandler",value:function(k){var P,j=this;k.target.tagName&&(P=k.target.tagName.toLowerCase()),this.dispatch(function(R){var Y=k.target===R.keyboardDOM||k.target&&R.keyboardDOM.contains(k.target);if(j.options.syncInstanceInputs&&Array.isArray(k.path)&&(Y=k.path.some(function(Z){var Pe;return Z==null||(Pe=Z.hasAttribute)===null||Pe===void 0?void 0:Pe.call(Z,"data-skInstance")})),(P==="textarea"||P==="input"&&["text","search","url","tel","password"].includes(k.target.type))&&!R.options.disableCaretPositioning){var G=k.target.selectionStart,ne=k.target.selectionEnd;R.options.rtl&&(G=R.utilities.getRtlOffset(G,R.getInput()),ne=R.utilities.getRtlOffset(ne,R.getInput())),R.setCaretPosition(G,ne),R.activeInputElement=k.target,R.options.debug&&console.log("Caret at: ",R.getCaretPosition(),R.getCaretPositionEnd(),k&&k.target.tagName.toLowerCase(),"(".concat(R.keyboardDOMClass,")"),k==null?void 0:k.type)}else!R.options.disableCaretPositioning&&Y||(k==null?void 0:k.type)==="selectionchange"||(R.setCaretPosition(null),R.activeInputElement=null,R.options.debug&&console.log('Caret position reset due to "'.concat(k==null?void 0:k.type,'" event'),k))})}},{key:"recurseButtons",value:function(k){var P=this;k&&Object.keys(this.buttonElements).forEach(function(j){return P.buttonElements[j].forEach(k)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var k=this.options.physicalKeyboardHighlightPreventDefault,P=k!==void 0&&k;document.removeEventListener("keyup",this.handleKeyUp,P),document.removeEventListener("keydown",this.handleKeyDown,P),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(j){j&&(j.onpointerdown=null,j.onpointerup=null,j.onpointercancel=null,j.ontouchstart=null,j.ontouchend=null,j.ontouchcancel=null,j.onclick=null,j.onmousedown=null,j.onmouseup=null,j.remove(),j=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(k){var P=this.options.buttonTheme,j=[];return Array.isArray(P)&&P.forEach(function(R){if(R&&R.class&&typeof R.class=="string"&&R.buttons&&typeof R.buttons=="string"){var Y=R.class.split(" ");R.buttons.split(" ").includes(k)&&(j=[].concat(D(j),D(Y)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',R)}),j}},{key:"setDOMButtonAttributes",value:function(k,P){var j=this.options.buttonAttributes;Array.isArray(j)&&j.forEach(function(R){R.attribute&&typeof R.attribute=="string"&&R.value&&typeof R.value=="string"&&R.buttons&&typeof R.buttons=="string"?R.buttons.split(" ").includes(k)&&P(R.attribute,R.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',R)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(k){var P;if((P=k.target.classList)!==null&&P!==void 0&&P.contains("hg-button"))return k.preventDefault(),k.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var k=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(P){var j=k.utilities.isConstructor(P)?new P(k):P(k);j.init&&j.init(k)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(k,P){return!!this.modules[k]&&this.modules[k][P]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(k,P,j,R){var Y=this,G=Array.from(k.children),ne=0;return G.length&&j.forEach(function(Z,Pe){var Be=R[Pe];if(!(Be&&Be>Z))return!1;var Ue=Z-ne,Le=Be-ne,Je=document.createElement("div");Je.className+="hg-button-container";var ge="".concat(Y.options.layoutName,"-r").concat(P,"c").concat(Pe);Je.setAttribute("data-skUID",ge);var _t=G.splice(Ue,Le-Ue+1);ne+=Le-Ue,_t.forEach(function(xn){return Je.appendChild(xn)}),G.splice(Ue,0,Je),k.innerHTML="",G.forEach(function(xn){return k.appendChild(xn)}),Y.options.debug&&console.log("rowDOMContainer",_t,Ue,Le,ne+1)}),k}},{key:"render",value:function(){var k=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var P="hg-layout-".concat(this.options.layoutName),j=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},R=this.options.useTouchEvents||!1,Y=R?"hg-touch-events":"",G=this.options.useMouseEvents||!1,ne=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,P,this.keyboardPluginClasses,Y),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",j[this.options.layoutName||this.defaultName].forEach(function(Z,Pe){var Be=Z.split(" ");k.options.excludeFromLayout&&k.options.excludeFromLayout[k.options.layoutName||k.defaultName]&&(Be=Be.filter(function(ge){return k.options.excludeFromLayout&&!k.options.excludeFromLayout[k.options.layoutName||k.defaultName].includes(ge)}));var Ue=document.createElement("div");Ue.className+="hg-row";var Le=[],Je=[];Be.forEach(function(ge,_t){var xn,Bl=!ne&&typeof ge=="string"&&ge.length>1&&ge.indexOf("[")===0,As=!ne&&typeof ge=="string"&&ge.length>1&&ge.indexOf("]")===ge.length-1;Bl&&(Le.push(_t),ge=ge.replace(/\[/g,"")),As&&(Je.push(_t),ge=ge.replace(/\]/g,""));var ca=k.utilities.getButtonClass(ge),ua=k.utilities.getButtonDisplayName(ge,k.options.display,k.options.mergeDisplay),N7=k.options.useButtonTag?"button":"div",Dn=document.createElement(N7);Dn.className+="hg-button ".concat(ca),(xn=Dn.classList).add.apply(xn,D(k.getButtonThemeClasses(ge))),k.setDOMButtonAttributes(ge,function(sn,M7){Dn.setAttribute(sn,M7)}),k.activeButtonClass="hg-activeButton",!k.utilities.pointerEventsSupported()||R||G?R?(Dn.ontouchstart=function(sn){k.handleButtonClicked(ge,sn),k.handleButtonMouseDown(ge,sn)},Dn.ontouchend=function(sn){k.handleButtonMouseUp(ge,sn)},Dn.ontouchcancel=function(sn){k.handleButtonMouseUp(ge,sn)}):(Dn.onclick=function(sn){k.setMouseHold(!1),typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown||k.handleButtonClicked(ge,sn)},Dn.onmousedown=function(sn){(typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown)&&!k.isMouseHold&&k.handleButtonClicked(ge,sn),k.handleButtonMouseDown(ge,sn)},Dn.onmouseup=function(sn){k.handleButtonMouseUp(ge,sn)}):(Dn.onpointerdown=function(sn){k.handleButtonClicked(ge,sn),k.handleButtonMouseDown(ge,sn)},Dn.onpointerup=function(sn){k.handleButtonMouseUp(ge,sn)},Dn.onpointercancel=function(sn){k.handleButtonMouseUp(ge,sn)}),Dn.setAttribute("data-skBtn",ge);var P7="".concat(k.options.layoutName,"-r").concat(Pe,"b").concat(_t);Dn.setAttribute("data-skBtnUID",P7);var AA=document.createElement("span");AA.innerHTML=ua,Dn.appendChild(AA),k.buttonElements[ge]||(k.buttonElements[ge]=[]),k.buttonElements[ge].push(Dn),Ue.appendChild(Dn)}),Ue=k.parseRowDOMContainers(Ue,Pe,Le,Je),k.keyboardRowsDOM.appendChild(Ue)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||R||G?R?(document.ontouchend=function(Z){return k.handleButtonMouseUp(void 0,Z)},document.ontouchcancel=function(Z){return k.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.ontouchstart=function(Z){return k.handleKeyboardContainerMouseDown(Z)}):R||(document.onmouseup=function(Z){return k.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.onmousedown=function(Z){return k.handleKeyboardContainerMouseDown(Z)}):(document.onpointerup=function(Z){return k.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.onpointerdown=function(Z){return k.handleKeyboardContainerMouseDown(Z)}),this.onInit())}}],$&&U(F.prototype,$),V&&U(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}(),J=be,le=J;return c}()}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return v}});var a=s(442);function l(y){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},l(y)}function c(y,x){var w=Object.keys(y);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(y);x&&(S=S.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),w.push.apply(w,S)}return w}function u(y){for(var x=1;x<arguments.length;x++){var w=arguments[x]!=null?arguments[x]:{};x%2?c(Object(w),!0).forEach(function(S){d(y,S,w[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(w)):c(Object(w)).forEach(function(S){Object.defineProperty(y,S,Object.getOwnPropertyDescriptor(w,S))})}return y}function d(y,x,w){return(x=function(S){var _=function(E,C){if(l(E)!="object"||!E)return E;var N=E[Symbol.toPrimitive];if(N!==void 0){var M=N.call(E,C);if(l(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(E)}(S,"string");return l(_)=="symbol"?_:_+""}(x))in y?Object.defineProperty(y,x,{value:w,enumerable:!0,configurable:!0,writable:!0}):y[x]=w,y}var f=function(y){return u(u({},y),{},{keyboardRef:null})},p=s(651),g=s.n(p),m=function(y){var x=y.baseClass||"react-simple-keyboard",w=a.useRef(null),S=a.useRef(null),_=a.useRef(null),E=a.useRef(y);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),w.current=!1}},[]),a.useEffect(function(){var C=function(T){return u(u({},T),{},{theme:"simple-keyboard ".concat(T.theme||"hg-theme-default")})}(y);if(!w.current){w.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var N=S.current,M=".".concat(x);_.current=new(g())(N||M,C),C.keyboardRef&&C.keyboardRef(_.current)}var I=function(T,H){var D=f(H),K=f(T);return Object.keys(D).filter(function(X){return D[X]!==K[X]})}(E.current,C);if(I.length){var O=_.current;E.current=C,O==null||O.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",I)}},[w,x,E,y]),a.createElement("div",{className:x,ref:S})},v=m}(),o}()})})(V9);var Cde=V9.exports;const Ede=qc(Cde),Ade={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w  r t y    p  +","{lock}  s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y    P  *","{lock}  S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y  i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y  I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},Nde={en:{"{bksp}":"Backspace ","{enter}":"Enter ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Caps Lock ","{space}":"Space"},es:{"{bksp}":"","{enter}":"Intro ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Bloq Mays ","{space}":"Espacio"}},OR="          ",IR="  ";function Pde(){const t=bC(),e=Xt(),{status:n,dispatch:i,devices:r}=Ln(),[s,o]=b.useState("none"),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=b.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=b.useCallback(p=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",p)},[n,i,r.keyboard]);return r.keyboard?h.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),h.jsx(Ede,{theme:Q("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:Ade,display:Nde[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:OR},{class:"hg-diaeresisDeadKeyButton",buttons:IR}],disableButtonHold:!0,onKeyPress:p=>{if(p==="{shiftleft}"||p==="{shiftright}"){o(g=>g==="none"?"once":"none");return}if(p==="{lock}"){o(g=>g==="none"?"lock":"none");return}if(t==="es"){if(a){OR.includes(p)&&(l(!1),s==="once"&&o("none"),f(p));return}else if(p===""){l(!0);return}if(c){IR.includes(p)&&(u(!1),s==="once"&&o("none"),f(p));return}else if(p===""){u(!0);return}}s==="once"&&o("none"),f(p==="{bksp}"?"\b":p==="{enter}"?`
`:p==="{tab}"?"	":p==="{space}"?" ":p)}})]}):null}function Mde(){const t=Xt(),{devices:e}=Ln(),n=rt(fE).toArray();return e.leds?h.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),h.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>h.jsxs("div",{className:"flex w-7 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:r}),h.jsx("div",{className:Q("relative size-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:h.jsx("div",{className:Q("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})})]},r))})]}):null}function Rde(){const t=Xt(),e=rt(QZ),n=rt(je.IP),i=rt(ED),r=rt(AD),s=rt(je.SP),o=rt(EC),a=rt(f2),l=cD(),c=a||l.pic||l.handshake!==null,u=()=>{const g=[];for(let m=0;m<256;m+=16){const v=e.slice(m,m+16);g.push(v)}return g},d=16,f=Math.floor(Number(n.valueOf())/d),p=Number(n.valueOf())%d;return h.jsxs("div",{className:"absolute left-[800px] top-[-160px] z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20","data-testid":"memory-component",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),h.jsx("div",{className:"m-4 overflow-x-auto",children:h.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{}),Array.from({length:16}).map((g,m)=>h.jsx("th",{className:Q("relative size-10 border border-gray-500 bg-mantis-500",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===p&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:""})]})},m))]})}),h.jsx("tbody",{children:u().map((g,m)=>h.jsxs("tr",{className:m%4===0&&m!==0?"border-t-4 border-mantis-600":"",children:[h.jsx("th",{className:"relative size-10 border border-gray-500 bg-mantis-500",children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===f&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:""})]})}),g.map((v,y)=>{var x,w,S;return h.jsx("td",{className:Q("size-10 border border-gray-500 p-0 transition-shadow duration-200",y%4===0&&y!==0?"border-l-4 border-mantis-600":""),children:h.jsx(Tde,{address:v.address,value:v.value,isIP:v.address.valueOf()===n.valueOf(),isSP:o&&v.address.valueOf()===s.valueOf(),isStackData:o&&v.address.valueOf()>s.valueOf(),isProgramAddress:!!i.find(_=>_.address===v.address.value),isDataAddress:!!r.find(_=>_.address===v.address.value),isInterruptVector:c&&v.address.valueOf()>=0&&v.address.valueOf()<=7,label:((x=i.find(_=>_.address===v.address.value))==null?void 0:x.name)||((w=r.find(_=>_.address===v.address.value))==null?void 0:w.label)||null,length:((S=i.find(_=>_.address===v.address.value))==null?void 0:S.length)??null})},y)})]},m))})]})})]})}function Tde({address:t,value:e,isIP:n,isSP:i,isStackData:r,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:c}){const u=Xt(),d=rt(Sp),[f,p]=b.useState(!1),g=b.useRef(e);b.useEffect(()=>{g.current!==e&&(p(!0),setTimeout(()=>p(!1),300),g.current=e)},[e]);const m=u("computer.memory.cell",t);return h.jsxs(GE,{children:[h.jsx(KE,{asChild:!0,children:h.jsxs(qe.div,{title:m,className:Q("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":i?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!i&&!r?"border-l-4 border-purple-500":"",s&&!i&&!r&&!a?"border-l-4 border-blue-500":"",o&&!i&&!r&&!s&&!a?"border-l-4 border-green-500":"",r&&!i?"border-l-4 border-yellow-500":"",i?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",f&&"animate-pulse"),style:t.value===d.value?Ge("memory.operating-cell"):void 0,children:[a&&!i&&!r&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupcin",style:{lineHeight:1},children:""}),s&&!i&&!r&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instruccin",style:{lineHeight:1},children:""}),o&&!i&&!r&&!s&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:""}),r&&!i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:""}),i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:""}),h.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:""}),i&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:""})]})}),h.jsxs(Ub,{className:"w-60",children:[h.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[m," ",l?h.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",c!==null&&c!==""&&h.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",c]})]}):""]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(v=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:u(`generics.byte-representation.${v}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(v)})]},v))})]})]})}function Ode(){const t=Xt(),{devices:e}=Ln();return e.pic?h.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),h.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[h.jsx(pr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:hE,springs:"pic.IMR",emphasis:!0}),h.jsx(pr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:pE,springs:"pic.IRR",emphasis:!0}),h.jsx(pr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:mE,springs:"pic.ISR",emphasis:!0})]})]}),h.jsx("hr",{className:"mb-2 border-stone-600"}),h.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:ey.map((n,i)=>h.jsx(pr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function Ide(){const t=Xt(),{devices:e}=Ln();return e.pio?h.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(pr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:gE,springs:"pio.PA"}),h.jsx(pr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:yE,springs:"pio.CA"})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(pr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:vE,springs:"pio.PB"}),h.jsx(pr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:bE,springs:"pio.CB"})]})]}):null}const jde="_printer_fbkny_2",Lde="_shadow_fbkny_6",Dde="_sides_fbkny_11",$de="_front_fbkny_22",Fde="_trailContainer_fbkny_27",Bde="_trail_fbkny_27",zde="_paper_fbkny_33",Xl={printer:jde,shadow:Lde,sides:Dde,front:$de,trailContainer:Fde,trail:Bde,paper:zde},Ude=Array.from({length:5},(t,e)=>e);function Vde(){const t=Xt(),{devices:e}=Ln(),n=rt(ty),i=rt(ny);return e.printer?h.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:h.jsxs("div",{className:Xl.printer,title:t("computer.printer.name"),children:[h.jsx("div",{className:Xl.shadow}),h.jsx("div",{className:Xl.sides}),h.jsxs("div",{className:Xl.front,children:[h.jsx("div",{className:Xl.trailContainer,children:h.jsx("div",{className:Xl.trail,children:h.jsx("pre",{className:Xl.paper,children:i})})}),h.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:Ude.map(r=>{const s=n[r]?uD(n[r].unsigned):null;return h.jsx("span",{className:Q("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),h.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:h.jsx(qe.div,{className:"h-full bg-mantis-400",style:{width:Ge("printer.printing.progress").to(r=>`${r*100}%`),opacity:Ge("printer.printing.opacity")}})})]})]})}):null}const Hde="_container_6nvz7_2",Wde="_text_6nvz7_22",jR={container:Hde,text:Wde};function Gde(){const t=Xt(),{devices:e}=Ln(),n=rt(xE);return e.screen?h.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),h.jsx("div",{className:jR.container,children:h.jsx("pre",{className:jR.text,children:n})})]}):null}function Kde(){const t=Xt(),{dispatch:e,devices:n}=Ln(),i=rt(Cb).toArray();return n.switches?h.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),h.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((r,s)=>h.jsxs("div",{className:"flex w-8 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),h.jsx(ka,{checked:r,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function qde(){const t=Xt(),{devices:e}=Ln();return e.timer?h.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),h.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[h.jsx(pr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:iy,springs:"timer.CONT"}),h.jsx(pr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:wE,springs:"timer.COMP"})]})]}):null}function H9(){const t=b.useRef(null);return b.useEffect(()=>{z6()},[]),h.jsx("div",{className:"relative size-full",children:h.jsxs(Tue,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[h.jsx(jue,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:h.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[h.jsx(Yue,{}),h.jsx("div",{className:"absolute left-[120px] top-[-120px] z-20",children:h.jsx(U9,{})}),h.jsx(yde,{}),h.jsx(Uue,{}),h.jsx(Rde,{}),h.jsx(_de,{}),h.jsx(Ode,{}),h.jsx(Ide,{}),h.jsx(qde,{}),h.jsx(Xue,{}),h.jsx(kde,{}),h.jsx(Pde,{}),h.jsx(Mde,{}),h.jsx(Vde,{}),h.jsx(Kde,{}),h.jsx(Gde,{})]})}),h.jsx(Lue,{wrapperRef:t})]})})}const Yde=1024;let Xde=0;class Gw{constructor(e,n){this.from=e,this.to=n}}class ht{constructor(e={}){this.id=Xde++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ji.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}ht.closedBy=new ht({deserialize:t=>t.split(" ")});ht.openedBy=new ht({deserialize:t=>t.split(" ")});ht.group=new ht({deserialize:t=>t.split(" ")});ht.isolate=new ht({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});ht.contextHash=new ht({perNode:!0});ht.lookAhead=new ht({perNode:!0});ht.mounted=new ht({perNode:!0});class uy{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[ht.mounted.id]}}const Jde=Object.create(null);class Ji{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):Jde,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Ji(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(ht.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(ht.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Ji.none=new Ji("",Object.create(null),0,8);class qE{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Ji(i.name,r,i.id,i.flags):i)}return new qE(n)}}const Bg=new WeakMap,LR=new WeakMap;var Kn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Kn||(Kn={}));class tn{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=uy.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Nk(this.topNode,e)}cursorAt(e,n=0,i=0){let r=Bg.get(this)||this.topNode,s=new Nk(r);return s.moveTo(e,n),Bg.set(this,s._tree),s}get topNode(){return new Kr(this,0,0,null)}resolve(e,n=0){let i=Wp(Bg.get(this)||this.topNode,e,n,!1);return Bg.set(this,i),i}resolveInner(e,n=0){let i=Wp(LR.get(this)||this.topNode,e,n,!0);return LR.set(this,i),i}resolveStack(e,n=0){return efe(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&Kn.IncludeAnonymous)>0;for(let l=this.cursor(o|Kn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:JE(Ji.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new tn(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new tn(Ji.none,n,i,r)))}static build(e){return tfe(e)}}tn.empty=new tn(Ji.none,[],[],0);class YE{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new YE(this.buffer,this.index)}}class Cl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Ji.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(W9(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let c=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,c)}return new Cl(s,o,this.set)}}function W9(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Wp(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Kr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Kn.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Kr&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class G9{cursor(e=0){return new Nk(this,e)}getChild(e,n=null,i=null){let r=DR(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return DR(this,e,n,i)}resolve(e,n=0){return Wp(this,e,n,!1)}resolveInner(e,n=0){return Wp(this,e,n,!0)}matchContext(e){return Ak(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class Kr extends G9{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(W9(r,i,d,d+u.length)){if(u instanceof Cl){if(s&Kn.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,i-d,r);if(f>-1)return new Wa(new Zde(o,u,e,d),null,f)}else if(s&Kn.IncludeAnonymous||!u.type.isAnonymous||XE(u)){let f;if(!(s&Kn.IgnoreMounts)&&(f=uy.get(u))&&!f.overlay)return new Kr(f.tree,d,e,o);let p=new Kr(u,d,e,o);return s&Kn.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&Kn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Kn.IgnoreOverlays)&&(r=uy.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Kr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function DR(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Ak(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class Zde{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class Wa extends G9{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new Wa(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Kn.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Wa(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Wa(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Wa(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new tn(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function K9(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof Kr&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new Qde(r,n)}class Qde{constructor(e,n){this.heads=e,this.node=n}get next(){return K9(this.heads)}}function efe(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof Kr?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=uy.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Kr(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Wp(a,e,n,!1))}}return r?K9(r):i}class Nk{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Kr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Kr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Kn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Kn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Kn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Kn.IncludeAnonymous||a instanceof Cl||!a.type.isAnonymous||XE(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new Wa(this.buffer,n,this.stack[r]);return this.bufferNode=new Wa(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Ak(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Ak(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function XE(t){return t.children.some(e=>e instanceof Cl||!e.type.isAnonymous||XE(e))}function tfe(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=Yde,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new YE(n,n.length):n,l=i.types,c=0,u=0;function d(_,E,C,N,M,I){let{id:O,start:T,end:H,size:D}=a,K=u,X=c;for(;D<0;)if(a.next(),D==-1){let be=s[O];C.push(be),N.push(T-_);return}else if(D==-3){c=O;return}else if(D==-4){u=O;return}else throw new RangeError(`Unrecognized record size: ${D}`);let te=l[O],U,B,ie=T-_;if(H-T<=r&&(B=v(a.pos-E,M))){let be=new Uint16Array(B.size-B.skip),J=a.pos-B.size,le=be.length;for(;a.pos>J;)le=y(B.start,be,le);U=new Cl(be,H-B.start,i),ie=B.start-_}else{let be=a.pos-D;a.next();let J=[],le=[],F=O>=o?O:-1,$=0,V=H;for(;a.pos>be;)F>=0&&a.id==F&&a.size>=0?(a.end<=V-r&&(g(J,le,T,$,a.end,V,F,K,X),$=J.length,V=a.end),a.next()):I>2500?f(T,be,J,le):d(T,be,J,le,F,I+1);if(F>=0&&$>0&&$<J.length&&g(J,le,T,$,T,V,F,K,X),J.reverse(),le.reverse(),F>-1&&$>0){let k=p(te,X);U=JE(te,J,le,0,J.length,0,H-T,k,k)}else U=m(te,J,le,H-T,K-H,X)}C.push(U),N.push(ie)}function f(_,E,C,N){let M=[],I=0,O=-1;for(;a.pos>E;){let{id:T,start:H,end:D,size:K}=a;if(K>4)a.next();else{if(O>-1&&H<O)break;O<0&&(O=D-r),M.push(T,H,D),I++,a.next()}}if(I){let T=new Uint16Array(I*4),H=M[M.length-2];for(let D=M.length-3,K=0;D>=0;D-=3)T[K++]=M[D],T[K++]=M[D+1]-H,T[K++]=M[D+2]-H,T[K++]=K;C.push(new Cl(T,M[2]-H,i)),N.push(H-_)}}function p(_,E){return(C,N,M)=>{let I=0,O=C.length-1,T,H;if(O>=0&&(T=C[O])instanceof tn){if(!O&&T.type==_&&T.length==M)return T;(H=T.prop(ht.lookAhead))&&(I=N[O]+T.length+H)}return m(_,C,N,M,I,E)}}function g(_,E,C,N,M,I,O,T,H){let D=[],K=[];for(;_.length>N;)D.push(_.pop()),K.push(E.pop()+C-M);_.push(m(i.types[O],D,K,I-M,T-I,H)),E.push(M-C)}function m(_,E,C,N,M,I,O){if(I){let T=[ht.contextHash,I];O=O?[T].concat(O):[T]}if(M>25){let T=[ht.lookAhead,M];O=O?[T].concat(O):[T]}return new tn(_,E,C,N,O)}function v(_,E){let C=a.fork(),N=0,M=0,I=0,O=C.end-r,T={size:0,start:0,skip:0};e:for(let H=C.pos-_;C.pos>H;){let D=C.size;if(C.id==E&&D>=0){T.size=N,T.start=M,T.skip=I,I+=4,N+=4,C.next();continue}let K=C.pos-D;if(D<0||K<H||C.start<O)break;let X=C.id>=o?4:0,te=C.start;for(C.next();C.pos>K;){if(C.size<0)if(C.size==-3)X+=4;else break e;else C.id>=o&&(X+=4);C.next()}M=te,N+=D,I+=X}return(E<0||N==_)&&(T.size=N,T.start=M,T.skip=I),T.size>4?T:void 0}function y(_,E,C){let{id:N,start:M,end:I,size:O}=a;if(a.next(),O>=0&&N<o){let T=C;if(O>4){let H=a.pos-(O-4);for(;a.pos>H;)C=y(_,E,C)}E[--C]=T,E[--C]=I-_,E[--C]=M-_,E[--C]=N}else O==-3?c=N:O==-4&&(u=N);return C}let x=[],w=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,x,w,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:x.length?w[0]+x[0].length:0;return new tn(l[t.topID],x.reverse(),w.reverse(),S)}const $R=new WeakMap;function $0(t,e){if(!t.isAnonymous||e instanceof Cl||e.type!=t)return 1;let n=$R.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof tn)){n=1;break}n+=$0(t,i)}$R.set(e,n)}return n}function JE(t,e,n,i,r,s,o,a,l){let c=0;for(let g=i;g<r;g++)c+=$0(t,e[g]);let u=Math.ceil(c*1.5/8),d=[],f=[];function p(g,m,v,y,x){for(let w=v;w<y;){let S=w,_=m[w],E=$0(t,g[w]);for(w++;w<y;w++){let C=$0(t,g[w]);if(E+C>=u)break;E+=C}if(w==S+1){if(E>u){let C=g[S];p(C.children,C.positions,0,C.children.length,m[S]+x);continue}d.push(g[S])}else{let C=m[w-1]+g[w-1].length-_;d.push(JE(t,g,m,S,w,_,C,null,l))}f.push(_+x-s)}}return p(e,n,i,r,0),(a||l)(d,f,o)}class Cc{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new Cc(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let p=Math.max(f.from,l)-c,g=Math.min(f.to,d)-c;f=p>=g?null:new Cc(p,g,f.tree,f.offset+c,a>0,!!u)}if(f&&r.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class q9{startParse(e,n,i){return typeof e=="string"&&(e=new nfe(e)),i=i?i.length?i.map(r=>new Gw(r.from,r.to)):[new Gw(0,0)]:[new Gw(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class nfe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new ht({perNode:!0});let ife=0;class Cn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=ife++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Cn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new Cn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new dy(e);return i=>i.modified.indexOf(n)>-1?i:dy.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let rfe=0;class dy{constructor(e){this.name=e,this.instances=[],this.id=rfe++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&sfe(n,a.modified));if(i)return i;let r=[],s=new Cn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=ofe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(dy.get(a,l));return s}}function sfe(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function ofe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function afe(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==r.length)break;let p=r[d++];if(d==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new fy(i,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return Y9.add(e)}const Y9=new ht;class fy{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}fy.empty=new fy([],2,null);function X9(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function lfe(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function cfe(t,e,n,i=0,r=t.length){let s=new ufe(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class ufe{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,u=dfe(e)||fy.empty,d=lfe(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(ht.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),g=this.highlighters.filter(v=>!v.scope||v.scope(f.tree.type)),m=e.firstChild();for(let v=0,y=a;;v++){let x=v<f.overlay.length?f.overlay[v]:null,w=x?x.from+a:l,S=Math.max(n,y),_=Math.min(i,w);if(S<_&&m)for(;e.from<_&&(this.highlightRange(e,S,_,r,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=w||!e.nextSibling())););if(!x||w>i)break;y=x.to+a,y>n&&(this.highlightRange(p.cursor(),Math.max(n,x.from+a),Math.min(i,y),"",g),this.startSpan(Math.min(i,y),c))}m&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function dfe(t){let e=t.type.prop(Y9);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const me=Cn.define,zg=me(),_a=me(),FR=me(_a),BR=me(_a),Ca=me(),Ug=me(Ca),Kw=me(Ca),Is=me(),Jl=me(Is),Ms=me(),Rs=me(),Pk=me(),Bf=me(Pk),Vg=me(),Ve={comment:zg,lineComment:me(zg),blockComment:me(zg),docComment:me(zg),name:_a,variableName:me(_a),typeName:FR,tagName:me(FR),propertyName:BR,attributeName:me(BR),className:me(_a),labelName:me(_a),namespace:me(_a),macroName:me(_a),literal:Ca,string:Ug,docString:me(Ug),character:me(Ug),attributeValue:me(Ug),number:Kw,integer:me(Kw),float:me(Kw),bool:me(Ca),regexp:me(Ca),escape:me(Ca),color:me(Ca),url:me(Ca),keyword:Ms,self:me(Ms),null:me(Ms),atom:me(Ms),unit:me(Ms),modifier:me(Ms),operatorKeyword:me(Ms),controlKeyword:me(Ms),definitionKeyword:me(Ms),moduleKeyword:me(Ms),operator:Rs,derefOperator:me(Rs),arithmeticOperator:me(Rs),logicOperator:me(Rs),bitwiseOperator:me(Rs),compareOperator:me(Rs),updateOperator:me(Rs),definitionOperator:me(Rs),typeOperator:me(Rs),controlOperator:me(Rs),punctuation:Pk,separator:me(Pk),bracket:Bf,angleBracket:me(Bf),squareBracket:me(Bf),paren:me(Bf),brace:me(Bf),content:Is,heading:Jl,heading1:me(Jl),heading2:me(Jl),heading3:me(Jl),heading4:me(Jl),heading5:me(Jl),heading6:me(Jl),contentSeparator:me(Is),list:me(Is),quote:me(Is),emphasis:me(Is),strong:me(Is),link:me(Is),monospace:me(Is),strikethrough:me(Is),inserted:me(),deleted:me(),changed:me(),invalid:me(),meta:Vg,documentMeta:me(Vg),annotation:me(Vg),processingInstruction:me(Vg),definition:Cn.defineModifier("definition"),constant:Cn.defineModifier("constant"),function:Cn.defineModifier("function"),standard:Cn.defineModifier("standard"),local:Cn.defineModifier("local"),special:Cn.defineModifier("special")};for(let t in Ve){let e=Ve[t];e instanceof Cn&&(e.name=t)}X9([{tag:Ve.link,class:"tok-link"},{tag:Ve.heading,class:"tok-heading"},{tag:Ve.emphasis,class:"tok-emphasis"},{tag:Ve.strong,class:"tok-strong"},{tag:Ve.keyword,class:"tok-keyword"},{tag:Ve.atom,class:"tok-atom"},{tag:Ve.bool,class:"tok-bool"},{tag:Ve.url,class:"tok-url"},{tag:Ve.labelName,class:"tok-labelName"},{tag:Ve.inserted,class:"tok-inserted"},{tag:Ve.deleted,class:"tok-deleted"},{tag:Ve.literal,class:"tok-literal"},{tag:Ve.string,class:"tok-string"},{tag:Ve.number,class:"tok-number"},{tag:[Ve.regexp,Ve.escape,Ve.special(Ve.string)],class:"tok-string2"},{tag:Ve.variableName,class:"tok-variableName"},{tag:Ve.local(Ve.variableName),class:"tok-variableName tok-local"},{tag:Ve.definition(Ve.variableName),class:"tok-variableName tok-definition"},{tag:Ve.special(Ve.variableName),class:"tok-variableName2"},{tag:Ve.definition(Ve.propertyName),class:"tok-propertyName tok-definition"},{tag:Ve.typeName,class:"tok-typeName"},{tag:Ve.namespace,class:"tok-namespace"},{tag:Ve.className,class:"tok-className"},{tag:Ve.macroName,class:"tok-macroName"},{tag:Ve.propertyName,class:"tok-propertyName"},{tag:Ve.operator,class:"tok-operator"},{tag:Ve.comment,class:"tok-comment"},{tag:Ve.meta,class:"tok-meta"},{tag:Ve.invalid,class:"tok-invalid"},{tag:Ve.punctuation,class:"tok-punctuation"}]);var qw;const Gu=new ht;function ffe(t){return Ee.define({combine:t?e=>e.concat(t):void 0})}const hfe=new ht;class ms{constructor(e,n,i=[],r=""){this.data=e,this.name=r,ut.prototype.hasOwnProperty("tree")||Object.defineProperty(ut.prototype,"tree",{get(){return go(this)}}),this.parser=n,this.extension=[Xd.of(this),ut.languageData.of((s,o,a)=>{let l=zR(s,o,a),c=l.type.prop(Gu);if(!c)return[];let u=s.facet(c),d=l.type.prop(hfe);if(d){let f=l.resolve(o-l.from,a);for(let p of d)if(p.test(f,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return zR(e,n,i).type.prop(Gu)==this.data}findRegions(e){let n=e.facet(Xd);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Gu)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(ht.mounted);if(a){if(a.tree.prop(Gu)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof tn&&r(c,s.positions[l]+o)}};return r(go(e),0),i}get allowsNesting(){return!0}}ms.setState=tt.define();function zR(t,e,n){let i=t.facet(Xd),r=go(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Kn.ExcludeBuffers))s.type.isTop&&(r=s);return r}function go(t){let e=t.field(ms.state,!1);return e?e.tree:tn.empty}class pfe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let zf=null;class qd{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new qd(e,n,[],tn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new pfe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=tn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Cc.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Cc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=zf;zf=this;try{return e()}finally{zf=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=UR(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),i=Cc.applyChanges(i,l),r=tn.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new qd(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=UR(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends q9{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=zf;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new tn(Ji.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return zf}}function UR(t,e,n){return Cc.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Yd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Yd(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=qd.create(e.facet(Xd).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Yd(i)}}ms.state=Ei.define({create:Yd.init,update(t,e){for(let n of e.effects)if(n.is(ms.setState))return n.value;return e.startState.facet(Xd)!=e.state.facet(Xd)?Yd.init(e.state):t.apply(e)}});let J9=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(J9=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Yw=typeof navigator<"u"&&(!((qw=navigator.scheduling)===null||qw===void 0)&&qw.isInputPending)?()=>navigator.scheduling.isInputPending():null,mfe=ti.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ms.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ms.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=J9(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(ms.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Yw?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>Yw&&Yw()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ms.setState.of(new Yd(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>fr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Xd=Ee.define({combine(t){return t.length?t[0]:null},enables:t=>[ms.state,mfe,Re.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class gfe{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const vfe=Ee.define(),ZE=Ee.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Kc(t){let e=t.facet(ZE);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Mk(t,e){let n="",i=t.tabSize,r=t.facet(ZE)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function yfe(t,e){t instanceof ut&&(t=new QE(t));for(let i of t.state.facet(vfe)){let r=i(t,e);if(r!==void 0)return r}let n=go(t.state);return n.length>=e?bfe(t,n,e):null}class QE{constructor(e,n={}){this.state=e,this.options=n,this.unit=Kc(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return fm(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Z9=new ht;function bfe(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return Q9(i,t,n)}function Q9(t,e,n){for(let i=t;i;i=i.next){let r=wfe(i.node);if(r)return r(eA.create(e,n,i))}return 0}function xfe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function wfe(t){let e=t.type.prop(Z9);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(ht.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>Cfe(o,!0,1,void 0,s&&!xfe(o)?r.from:void 0)}return t.parent==null?Sfe:null}function Sfe(){return 0}class eA extends QE{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new eA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(kfe(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return Q9(this.context.next,this.base,this.pos)}}function kfe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function _fe(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function Cfe(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=_fe(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Efe=Ee.define(),Afe=new ht;function Nfe(t,e,n){let i=go(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(Afe);if(l&&(a.to<i.length-50||i.length==t.doc.length||!Pfe(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function Pfe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function eB(t,e,n){for(let i of t.facet(Efe)){let r=i(t,e,n);if(r)return r}return Nfe(t,e,n)}function tB(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const tA=tt.define({map:tB}),Vb=tt.define({map:tB});function nB(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Cm=Ei.define({create(){return nt.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=VR(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(tA)&&!Mfe(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(oB),r=i?nt.replace({widget:new Dfe(i(e.state,n.value))}):HR;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(Vb)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=VR(t,e.selection.main.head)),t},provide:t=>Re.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(HR.range(i,r))}return nt.set(e,!0)}});function VR(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function iB(t,e,n){var i;let r=null;return(i=t.field(Cm,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function Mfe(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function rB(t,e){return t.field(Cm,!1)?e:e.concat(tt.appendConfig.of(Lfe()))}const Rfe=t=>{for(let e of nB(t)){let n=eB(t.state,e.from,e.to);if(n)return t.dispatch({effects:rB(t.state,[tA.of(n),sB(t,n)])}),!0}return!1},Tfe=t=>{if(!t.state.field(Cm,!1))return!1;let e=[];for(let n of nB(t)){let i=iB(t.state,n.from,n.to);i&&e.push(Vb.of(i),sB(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function sB(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Re.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const Ofe=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=eB(e,r.from,r.to);s&&n.push(tA.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:rB(t.state,n)}),!!n.length},Ife=t=>{let e=t.state.field(Cm,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(Vb.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},jfe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},oB=Ee.define({combine(t){return Rl(t,jfe)}});function Lfe(t){return[Cm,$fe]}function aB(t,e){let{state:n}=t,i=n.facet(oB),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=iB(t.state,a.from,a.to);l&&t.dispatch({effects:Vb.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const HR=nt.replace({widget:new class extends Tl{toDOM(t){return aB(t,null)}}});class Dfe extends Tl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return aB(e,this.value)}}const $fe=Re.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Hb{constructor(e,n){this.specs=e;let i;function r(a){let l=yl.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof ms?a=>a.prop(Gu)==o.data:o?a=>a==o:void 0,this.style=X9(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new yl(i):null,this.themeType=n.themeType}static define(e,n){return new Hb(e,n||{})}}const Rk=Ee.define(),Ffe=Ee.define({combine(t){return t.length?[t[0]]:null}});function Xw(t){let e=t.facet(Rk);return e.length?e:t.facet(Ffe)}function Bfe(t,e){let n=[Ufe],i;return t instanceof Hb&&(t.module&&n.push(Re.styleModule.of(t.module)),i=t.themeType),i?n.push(Rk.computeN([Re.darkTheme],r=>r.facet(Re.darkTheme)==(i=="dark")?[t]:[])):n.push(Rk.of(t)),n}class zfe{constructor(e){this.markCache=Object.create(null),this.tree=go(e.state),this.decorations=this.buildDeco(e,Xw(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=go(e.state),i=Xw(e.state),r=i!=Xw(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return nt.none;let i=new vl;for(let{from:r,to:s}of e.visibleRanges)cfe(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=nt.mark({class:l})))},r,s);return i.finish()}}const Ufe=um.high(ti.fromClass(zfe,{decorations:t=>t.decorations})),Vfe=1e4,Hfe="()[]{}",Wfe=new ht;function Tk(t,e,n){let i=t.prop(e<0?ht.openedBy:ht.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Ok(t){let e=t.type.prop(Wfe);return e?e(t.node):t}function Hg(t,e,n,i={}){let r=i.maxScanDistance||Vfe,s=i.brackets||Hfe,o=go(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=Tk(l.type,n,s);if(c&&l.from<l.to){let u=Ok(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return Gfe(t,e,n,l,u,c,s)}}return Kfe(t,e,n,o,a.type,r,s)}function Gfe(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=Ok(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Tk(u.type,n,o))c++;else if(Tk(u.type,-n,o)){if(c==0){let d=Ok(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function Kfe(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let p=u.value;n<0&&(f+=p.length);let g=e+f*n;for(let m=n>0?0:p.length-1,v=n>0?p.length:-1;m!=v;m+=n){let y=o.indexOf(p[m]);if(!(y<0||i.resolveInner(g+m,1).type!=r))if(y%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:g+m,to:g+m+1},matched:y>>1==l>>1};d--}}n>0&&(f+=p.length)}return u.done?{start:c,matched:!1}:null}function WR(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class lB{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=WR(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:WR(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function qfe(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||Yfe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||rA,mergeTokens:t.mergeTokens!==!1}}function Yfe(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const GR=new WeakMap;class nA extends ms{constructor(e){let n=ffe(e.languageData),i=qfe(e),r,s=new class extends q9{createParse(o,a,l){return new Jfe(r,o,a,l)}};super(n,s,[],e.name),this.topNode=ehe(n,this),r=this,this.streamParser=i,this.stateAfter=new ht({perNode:!0}),this.tokenTable=e.tokenTable?new fB(i.tokenTable):Qfe}static define(e){return new nA(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=GR.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=iA(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=i?i(l.from):-1,d=new lB(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-l.from;)uB(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&GR.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function iA(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof tn&&l<r&&iA(t,a,l,i,r);if(c)return c}return null}function cB(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof tn){if(!(l=cB(t,a,n-o,i-o,r)))break;return r?new tn(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function Xfe(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&iA(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=i&&(c=cB(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(r?Kc(r):4),tree:tn.empty}}class Jfe{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=qd.get(),o=r[0].from,{state:a,tree:l}=Xfe(e,i,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Kc(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=qd.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new lB(n,e?e.state.tabSize:4,e?Kc(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=uB(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=tn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Zfe,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new tn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new tn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function uB(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const rA=Object.create(null),Gp=[Ji.none],Zfe=new qE(Gp),KR=[],qR=Object.create(null),dB=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])dB[t]=hB(rA,e);class fB{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),dB)}resolve(e){return e?this.table[e]||(this.table[e]=hB(this.extra,e)):0}}const Qfe=new fB(rA);function Jw(t,e){KR.indexOf(t)>-1||(KR.push(t),console.warn(e))}function hB(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Ve[c];u?typeof u=="function"?l.length?l=l.map(u):Jw(c,`Modifier ${c} used at start of tag`):l.length?Jw(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:Jw(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=qR[r];if(s)return s.id;let o=qR[r]=Ji.define({id:Gp.length,name:i,props:[afe({[i]:n})]});return Gp.push(o),o.id}function ehe(t,e){let n=Ji.define({id:Gp.length,name:"Document",props:[Gu.add(()=>t),Z9.add(()=>i=>e.getIndent(i))],top:!0});return Gp.push(n),n}Vt.RTL,Vt.LTR;const the=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=sA(t.state,n.from);return i.line?nhe(t):i.block?ohe(t):!1};function Em(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const nhe=Em(oA,0),ihe=Em(oA,1),rhe=Em(oA,2),she=Em(pB,0),ohe=Em((t,e)=>pB(t,e,lhe(e)),0);function sA(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Uf=50;function ahe(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Uf,i),o=t.sliceDoc(r,r+Uf),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*Uf?u=d=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+Uf),d=t.sliceDoc(r-Uf,r));let f=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-n.length;return u.slice(f,f+e.length)==e&&d.slice(g,g+n.length)==n?{open:{pos:i+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:r-p-n.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function lhe(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function pB(t,e,n=e.selection.ranges){let i=n.map(s=>sA(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>ahe(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function oA(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,c=sA(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>r&&(s==o||o>d.from)){r=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,g=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),i.push({line:d,comment:g,token:c,indent:f,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const Ik=aa.define(),che=aa.define(),uhe=Ee.define(),mB=Ee.define({combine(t){return Rl(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),gB=Ei.define({create(){return eo.empty},update(t,e){let n=e.state.facet(mB),i=e.annotation(Ik);if(i){let l=Ki.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=hy(u,u.length,n.minDepth,l):u=bB(u,e.startState.selection),new eo(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(che);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(An.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Ki.fromTransaction(e),o=e.annotation(An.time),a=e.annotation(An.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new eo(t.done.map(Ki.fromJSON),t.undone.map(Ki.fromJSON))}});function dhe(t={}){return[gB,mB.of(t),Re.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?vB:e.inputType=="historyRedo"?jk:null;return i?(e.preventDefault(),i(n)):!1}})]}function aA(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(gB,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const vB=aA(0,!1),jk=aA(1,!1),fhe=aA(0,!0);class Ki{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Ki(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Ki(e.changes&&kn.fromJSON(e.changes),[],e.mapped&&ao.fromJSON(e.mapped),e.startSelection&&re.fromJSON(e.startSelection),e.selectionsAfter.map(re.fromJSON))}static fromTransaction(e,n){let i=Br;for(let r of e.startState.facet(uhe)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Ki(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Br)}static selection(e){return new Ki(void 0,Br,void 0,void 0,e)}}function hy(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function hhe(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function phe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function yB(t,e){return t.length?e.length?t.concat(e):t:e}const Br=[],mhe=200;function bB(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-mhe));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),hy(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Ki.selection([e])]}function ghe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Zw(t,e){if(!t.length)return t;let n=t.length,i=Br;for(;n;){let r=vhe(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Ki.selection(i)]:Br}function vhe(t,e,n){let i=yB(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Br,n);if(!t.changes)return Ki.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Ki(r,tt.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const yhe=/^(input\.type|delete)($|\.)/;class eo{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new eo(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||yhe.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,hhe(a.changes,e.changes))||i=="input.type.compose")?o=hy(o,o.length-1,r.minDepth,new Ki(e.changes.compose(a.changes),yB(tt.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Br)):o=hy(o,o.length,r.minDepth,e),new eo(o,Br,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Br;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&phe(s[s.length-1],e)?this:new eo(bB(this.done,e),this.undone,n,i)}addMapping(e){return new eo(Zw(this.done,e),Zw(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Ik.of({side:e,rest:ghe(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?Br:r.slice(0,r.length-1);return s.mapped&&(a=Zw(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Ik.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}eo.empty=new eo(Br,Br);function Am(t,e){return re.create(t.ranges.map(e),t.mainIndex)}function Dl(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Zc({state:t,dispatch:e},n){let i=Am(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Dl(t,i)),!0)}function Wb(t,e){return re.cursor(e?t.to:t.from)}function xB(t,e){return Zc(t,n=>n.empty?t.moveByChar(n,e):Wb(n,e))}function $l(t){return t.textDirectionAt(t.state.selection.main.head)==Vt.LTR}const YR=t=>xB(t,!$l(t)),XR=t=>xB(t,$l(t));function wB(t,e){return Zc(t,n=>n.empty?t.moveByGroup(n,e):Wb(n,e))}const bhe=t=>wB(t,!$l(t)),xhe=t=>wB(t,$l(t));function SB(t,e){return Zc(t,n=>{if(!n.empty)return Wb(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const JR=t=>SB(t,!1),ZR=t=>SB(t,!0);function kB(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Re.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function _B(t,e){let n=kB(t),{state:i}=t,r=Am(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):Wb(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Re.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Dl(i,r),{effects:s}),!0}const Qw=t=>_B(t,!1),e1=t=>_B(t,!0);function Gb(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=re.cursor(i.from+s))}return r}const QR=t=>Zc(t,e=>Gb(t,e,!0)),eT=t=>Zc(t,e=>Gb(t,e,!1)),whe=t=>Zc(t,e=>re.cursor(t.lineBlockAt(e.head).from,1)),She=t=>Zc(t,e=>re.cursor(t.lineBlockAt(e.head).to,-1));function khe(t,e,n){let i=!1,r=Am(t.selection,s=>{let o=Hg(t,s.head,-1)||Hg(t,s.head,1)||s.head>0&&Hg(t,s.head-1,1)||s.head<t.doc.length&&Hg(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return re.cursor(a)});return i?(e(Dl(t,r)),!0):!1}const _he=({state:t,dispatch:e})=>khe(t,e);function Fl(t,e){let n=Am(t.state.selection,i=>{let r=e(i);return re.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Dl(t.state,n)),!0)}function CB(t,e){return Fl(t,n=>t.moveByChar(n,e))}const tT=t=>CB(t,!$l(t)),nT=t=>CB(t,$l(t));function EB(t,e){return Fl(t,n=>t.moveByGroup(n,e))}const Che=t=>EB(t,!$l(t)),Ehe=t=>EB(t,$l(t));function AB(t,e){return Fl(t,n=>t.moveVertically(n,e))}const iT=t=>AB(t,!1),rT=t=>AB(t,!0);function NB(t,e){return Fl(t,n=>t.moveVertically(n,e,kB(t).height))}const sT=t=>NB(t,!1),oT=t=>NB(t,!0),aT=t=>Fl(t,e=>Gb(t,e,!0)),lT=t=>Fl(t,e=>Gb(t,e,!1)),Ahe=t=>Fl(t,e=>re.cursor(t.lineBlockAt(e.head).from)),Nhe=t=>Fl(t,e=>re.cursor(t.lineBlockAt(e.head).to)),cT=({state:t,dispatch:e})=>(e(Dl(t,{anchor:0})),!0),uT=({state:t,dispatch:e})=>(e(Dl(t,{anchor:t.doc.length})),!0),dT=({state:t,dispatch:e})=>(e(Dl(t,{anchor:t.selection.main.anchor,head:0})),!0),fT=({state:t,dispatch:e})=>(e(Dl(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Phe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Mhe=({state:t,dispatch:e})=>{let n=qb(t).map(({from:i,to:r})=>re.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:re.create(n),userEvent:"select"})),!0};function Kb(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Wg(t,l,!1)):l>o&&(n="delete.forward",l=Wg(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Wg(t,o,!1),a=Wg(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:re.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Re.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Wg(t,e,n){if(t instanceof Re)for(let i of t.state.facet(Re.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const PB=(t,e,n)=>Kb(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let c=fm(a,s.tabSize),u=c%Kc(s)||Kc(s);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)r--;l=r}else l=Xn(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=Xn(o.text,l-o.from,!1,!1)+o.from);return l}),t1=t=>PB(t,!1,!0),hT=t=>PB(t,!0,!1),MB=(t,e)=>Kb(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=Xn(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),pT=t=>MB(t,!1),Rhe=t=>MB(t,!0),mT=t=>Kb(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),The=t=>Kb(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),Ohe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:gt.of(["",""])},range:re.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Ihe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Xn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:Xn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:re.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function qb(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function RB(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of qb(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(re.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(re.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:re.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const jhe=({state:t,dispatch:e})=>RB(t,e,!1),Lhe=({state:t,dispatch:e})=>RB(t,e,!0);function TB(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of qb(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Dhe=({state:t,dispatch:e})=>TB(t,e,!1),$he=({state:t,dispatch:e})=>TB(t,e,!0),Fhe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(qb(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Am(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Bhe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=go(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(ht.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const gT=zhe(!1);function zhe(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&Bhe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new QE(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=yfe(c,s);for(u==null&&(u=fm(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",Mk(e,u)];return l&&d.push(Mk(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:gt.of(d)},range:re.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function OB(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:re.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const Lk=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(OB(t,(n,i)=>{i.push({from:n.from,insert:t.facet(ZE)})}),{userEvent:"input.indent"})),!0),vT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(OB(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=fm(r,t.tabSize),o=0,a=Mk(t,Math.max(0,s-Kc(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),yT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Kp{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(yT(a)):yT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return jr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=AC(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Bo(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Kp.prototype[Symbol.iterator]=function(){return this});const IB={from:-1,to:-1,match:/.*/.exec("")},lA="gm"+(/x/.unicode==null?"":"u");class jB{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=IB,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new LB(e,n,i,r,s);this.re=new RegExp(n,lA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=py(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=py(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const n1=new WeakMap;class fd{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=n1.get(e);if(!r||r.from>=i||r.to<=n){let a=new fd(n,e.sliceString(n,i));return n1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),n1.set(e,new fd(o,s)),new fd(n,s.slice(n-o,i-o))}}class LB{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=IB,this.matchPos=py(e,r),this.re=new RegExp(n,lA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=fd.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=py(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=fd.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(jB.prototype[Symbol.iterator]=LB.prototype[Symbol.iterator]=function(){return this});function Uhe(t){try{return new RegExp(t,lA),!0}catch{return!1}}function py(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function Dk(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Rt("input",{class:"cm-textfield",name:"line",value:e}),i=Rt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Bh.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Rt("label",t.state.phrase("Go to line"),": ",n)," ",Rt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Rt("button",{name:"close",onclick:()=>{t.dispatch({effects:Bh.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,p=c?+c:a.number;if(c&&d){let v=p/100;l&&(v=v*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*v)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),m=re.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[Bh.of(!1),Re.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const Bh=tt.define(),bT=Ei.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Bh)&&(t=n.value);return t},provide:t=>Rp.from(t,e=>e?Dk:null)}),Vhe=t=>{let e=Mp(t,Dk);if(!e){let n=[Bh.of(!0)];t.state.field(bT,!1)==null&&n.push(tt.appendConfig.of([bT,Hhe])),t.dispatch({effects:n}),e=Mp(t,Dk)}return e&&e.dom.querySelector("input").select(),!0},Hhe=Re.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Whe=({state:t,dispatch:e})=>{let{selection:n}=t,i=re.create(n.ranges.map(r=>t.wordAt(r.head)||re.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Ghe(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new Kp(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Kp(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Khe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Whe({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Ghe(t,i);return r?(e(t.update({selection:t.selection.addRange(re.range(r.from,r.to),!1),effects:Re.scrollIntoView(r.to)})),!0):!1},hf=Ee.define({combine(t){return Rl(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new npe(e),scrollToMatch:e=>Re.scrollIntoView(e)})}});class DB{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Uhe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Jhe(this):new Yhe(this)}getCursor(e,n=0,i){let r=e.doc?e:ut.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Cu(this,r,n,i):_u(this,r,n,i)}}class $B{constructor(e){this.spec=e}}function _u(t,e,n,i){return new Kp(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?qhe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function qhe(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(my(r,n-s))!=Jn.Word||e(gy(r,n-s))!=Jn.Word)&&(e(gy(r,i-s))!=Jn.Word||e(my(r,i-s))!=Jn.Word))}class Yhe extends $B{constructor(e){super(e)}nextMatch(e,n,i){let r=_u(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=_u(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=_u(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=_u(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=_u(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Cu(t,e,n,i){return new jB(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Xhe(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function my(t,e){return t.slice(Xn(t,e,!1),e)}function gy(t,e){return t.slice(e,Xn(t,e))}function Xhe(t){return(e,n,i)=>!i[0].length||(t(my(i.input,i.index))!=Jn.Word||t(gy(i.input,i.index))!=Jn.Word)&&(t(gy(i.input,i.index+i[0].length))!=Jn.Word||t(my(i.input,i.index+i[0].length))!=Jn.Word)}class Jhe extends $B{nextMatch(e,n,i){let r=Cu(this.spec,e,i,e.doc.length).next();return r.done&&(r=Cu(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Cu(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=Cu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Cu(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const qp=tt.define(),cA=tt.define(),al=Ei.define({create(t){return new i1($k(t).create(),null)},update(t,e){for(let n of e.effects)n.is(qp)?t=new i1(n.value.create(),t.panel):n.is(cA)&&(t=new i1(t.query,n.value?uA:null));return t},provide:t=>Rp.from(t,e=>e.panel)});class i1{constructor(e,n){this.query=e,this.panel=n}}const Zhe=nt.mark({class:"cm-searchMatch"}),Qhe=nt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),epe=ti.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(al))}update(t){let e=t.state.field(al);(e!=t.startState.field(al)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return nt.none;let{view:n}=this,i=new vl;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);i.add(c,u,d?Qhe:Zhe)})}return i.finish()}},{decorations:t=>t.decorations});function Nm(t){return e=>{let n=e.state.field(al,!1);return n&&n.query.spec.valid?t(e,n):VB(e)}}const xT=Nm((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=re.single(i.from,i.to),s=t.state.facet(hf);return t.dispatch({selection:r,effects:[dA(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),UB(t),!0}),wT=Nm((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=re.single(r.from,r.to),o=t.state.facet(hf);return t.dispatch({selection:s,effects:[dA(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),UB(t),!0}),FB=Nm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:re.create(n.map(i=>re.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),tpe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new Kp(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(re.range(a.value.from,a.value.to))}return e(t.update({selection:re.create(s,o),userEvent:"select.search.matches"})),!0},ST=Nm((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==i&&o.to==r&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Re.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let d=t.state.changes(a);return o&&(l=re.single(o.from,o.to).map(d),u.push(dA(t,o)),u.push(n.facet(hf).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),BB=Nm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Re.announce.of(i),userEvent:"input.replace.all"}),!0});function uA(t){return t.state.facet(hf).createPanel(t)}function $k(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(hf);return new DB({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function zB(t){let e=Mp(t,uA);return e&&e.dom.querySelector("[main-field]")}function UB(t){let e=zB(t);e&&e==t.root.activeElement&&e.select()}const VB=t=>{let e=t.state.field(al,!1);if(e&&e.panel){let n=zB(t);if(n&&n!=t.root.activeElement){let i=$k(t.state,e.query.spec);i.valid&&t.dispatch({effects:qp.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[cA.of(!0),e?qp.of($k(t.state,e.query.spec)):tt.appendConfig.of(rpe)]});return!0},HB=t=>{let e=t.state.field(al,!1);if(!e||!e.panel)return!1;let n=Mp(t,uA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:cA.of(!1)}),!0};class npe{constructor(e){this.view=e;let n=this.query=e.state.field(al).query.spec;this.commit=this.commit.bind(this),this.searchField=Rt("input",{value:n.search,placeholder:er(e,"Find"),"aria-label":er(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Rt("input",{value:n.replace,placeholder:er(e,"Replace"),"aria-label":er(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Rt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Rt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Rt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Rt("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Rt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>xT(e),[er(e,"next")]),i("prev",()=>wT(e),[er(e,"previous")]),i("select",()=>FB(e),[er(e,"all")]),Rt("label",null,[this.caseField,er(e,"match case")]),Rt("label",null,[this.reField,er(e,"regexp")]),Rt("label",null,[this.wordField,er(e,"by word")]),...e.state.readOnly?[]:[Rt("br"),this.replaceField,i("replace",()=>ST(e),[er(e,"replace")]),i("replaceAll",()=>BB(e),[er(e,"replace all")])],Rt("button",{name:"close",onclick:()=>HB(e),"aria-label":er(e,"close"),type:"button"},[""])])}commit(){let e=new DB({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:qp.of(e)}))}keydown(e){ete(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?wT:xT)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),ST(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(qp)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(hf).top}}function er(t,e){return t.state.phrase(e)}const Gg=30,Kg=/[\s\.,:;?!]/;function dA(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Gg),o=Math.min(r,n+Gg),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Gg;l++)if(!Kg.test(a[l+1])&&Kg.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Gg;l--)if(!Kg.test(a[l-1])&&Kg.test(a[l])){a=a.slice(0,l);break}}return Re.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const ipe=Re.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),rpe=[al,um.low(epe),ipe];class spe{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=go(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(WB(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function kT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function ope(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=kT(e)+kT(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function ape(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:ope(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class _T{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function zh(t){return t.selection.main.from}function WB(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const GB=aa.define();function lpe(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:re.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const CT=new WeakMap;function cpe(t){if(!Array.isArray(t))return t;let e=CT.get(t);return e||CT.set(t,e=ape(t)),e}const KB=tt.define(),fA=tt.define();class upe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=jr(e,n),r=Bo(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(jr(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let x=jr(e,0),w=Bo(x),S=w==e.length?0:-100;if(x!=n[0])if(x==i[0])S+=-200;else return null;return this.ret(S,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let x=0,w=Math.min(e.length,200);x<w&&c<l;){let S=jr(e,x);(S==n[c]||S==i[c])&&(r[c++]=x),x+=Bo(S)}if(c<l)return null}let u=0,d=0,f=!1,p=0,g=-1,m=-1,v=/[a-z]/.test(e),y=!0;for(let x=0,w=Math.min(e.length,200),S=0;x<w&&d<l;){let _=jr(e,x);a<0&&(u<l&&_==n[u]&&(s[u++]=x),p<l&&(_==n[p]||_==i[p]?(p==0&&(g=x),m=x+1,p++):p=0));let E,C=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(E=AC(_))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!x||C==1&&v||S==0&&C!=0)&&(n[d]==_||i[d]==_&&(f=!0)?o[d++]=x:o.length&&(y=!1)),S=C,x+=Bo(_)}return d==l&&o[0]==0&&y?this.result(-100+(f?-200:0),o,e):p==l&&g==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[g,m]):d==l?this.result(-100+(f?-200:0)+-700+(y?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?Bo(jr(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class dpe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const qs=Ee.define({combine(t){return Rl(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:fpe,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>ET(e(i),n(i)),optionClass:(e,n)=>i=>ET(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function ET(t,e){return t?e?t+" "+e:t:e}function fpe(t,e,n,i,r,s){let o=t.textDirection==Vt.RTL,a=o,l=!1,c="top",u,d,f=e.left-r.left,p=r.right-e.right,g=i.right-i.left,m=i.bottom-i.top;if(a&&f<Math.min(g,p)?a=!1:!a&&p<Math.min(g,f)&&(a=!0),g<=(a?f:p))u=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,d=Math.min(400,a?f:p);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let x=r.bottom-e.bottom;x>=m||x>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let v=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/v}px; max-width: ${d/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function hpe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function r1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class ppe{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(qs);this.optionContent=hpe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=r1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(qs).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:fA.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=r1(s.length,o,e.state.facet(qs).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=r1(n.options.length,n.selected,this.view.state.facet(qs).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>fr(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&gpe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(qs).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>i.from||i.from==0))if(s=f,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let p=r.appendChild(document.createElement("completion-section"));p.textContent=f}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let p=f(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function mpe(t,e){return n=>new ppe(n,t,e)}function gpe(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function AT(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function vpe(t,e){let n=[],i=null,r=c=>{n.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let d=typeof u=="string"?u:u.name;i.some(f=>f.name==d)||i.push(typeof u=="string"?{name:d}:u)}},s=e.facet(qs);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)r(new _T(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),f,p=s.filterStrict?new dpe(d):new upe(d);for(let g of c.result.options)if(f=p.match(g.label)){let m=g.displayLabel?u?u(g,f.matched):[]:f.matched;r(new _T(g,c.source,m,f.score+(g.boost||0)))}}}if(i){let c=Object.create(null),u=0,d=(f,p)=>{var g,m;return((g=f.rank)!==null&&g!==void 0?g:1e9)-((m=p.rank)!==null&&m!==void 0?m:1e9)||(f.name<p.name?-1:1)};for(let f of i.sort(d))u-=1e5,c[f.name]=u;for(let f of n){let{section:p}=f.completion;p&&(f.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):AT(c.completion)>AT(a)&&(o[o.length-1]=c),a=c.completion}return o}class Ku{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Ku(this.options,NT(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(c=>c.isPending))return r.setDisabled();let a=vpe(e,n);if(!a.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let l=n.facet(qs).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new Ku(a,NT(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:_pe,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Ku(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Ku(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class vy{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new vy(wpe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(qs),s=(i.override||n.languageDataAt("autocomplete",zh(n)).map(cpe)).map(l=>(this.active.find(u=>u.source==l)||new gs(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(qB));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!ype(s,this.active)||a?o=Ku.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new gs(l.source,0):l));for(let l of e.effects)l.is(YB)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new vy(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?bpe:xpe}}function ype(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const bpe={"aria-autocomplete":"list"},xpe={};function NT(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const wpe=[];function Spe(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(GB);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class gs{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=Spe(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new gs(r.source,0)),i&4&&r.state==0&&(r=new gs(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(KB))r=new gs(r.source,1,s.value);else if(s.is(fA))r=new gs(r.source,0);else if(s.is(qB))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(zh(e.state))}}class Uh extends gs{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=zh(e.state);if(a>o||!r||n&2&&(zh(e.startState)==this.from||a<this.limit))return new gs(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return kpe(r.validFor,e.state,s,o)?new Uh(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new spe(e.state,a,!1)))?new Uh(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:zh(e.state)):new gs(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Uh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new gs(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function kpe(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):WB(t,!0).test(r)}const qB=tt.define({map(t,e){return t.map(n=>n.map(e))}}),YB=tt.define(),pf=Ei.define({create(){return vy.start()},update(t,e){return t.update(e)},provide:t=>[UC.from(t,e=>e.tooltip),Re.contentAttributes.from(t,e=>e.attrs)]});function XB(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(pf).active.find(r=>r.source==e.source);return i instanceof Uh?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},lpe(t.state,n,i.from,i.to)),{annotations:GB.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const _pe=mpe(pf,XB);function qg(t,e="option"){return n=>{let i=n.state.field(pf,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(qs).interactionDelay)return!1;let r=1,s;e=="page"&&(s=Tte(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:YB.of(a)}),!0}}const PT=t=>{let e=t.state.field(pf,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(qs).interactionDelay?!1:XB(t,e.open.options[e.open.selected])},Cpe=t=>t.state.field(pf,!1)?(t.dispatch({effects:KB.of(!0)}),!0):!1,Epe=t=>{let e=t.state.field(pf,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:fA.of(null)}),!0)},JB={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},ZB=new class extends Dc{};ZB.startSide=1;ZB.endSide=-1;const s1="()[]{}<>";function Ape(t){for(let e=0;e<s1.length;e+=2)if(s1.charCodeAt(e)==t)return s1.charAt(e+1);return AC(t<128?t:t+1)}function Npe(t,e){return t.languageDataAt("closeBrackets",e)[0]||JB}const Ppe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Npe(t,t.selection.main.head).brackets||JB.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=Rpe(t.doc,o.head);for(let l of i)if(l==a&&Mpe(t.doc,o.head)==Ape(jr(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:re.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function Mpe(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Bo(jr(n,0)))}function Rpe(t,e){let n=t.sliceString(e-2,e);return Bo(jr(n,0))==n.length?n:n.slice(1)}class MT{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class cc{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=i.facet(to).markerFilter;r&&(e=r(e,i));let s=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new vl,a=[],l=0;for(let u=0;;){let d=u==s.length?null:s[u];if(!d&&!a.length)break;let f,p;for(a.length?(f=l,p=a.reduce((m,v)=>Math.min(m,v.to),d&&d.from>f?d.from:1e8)):(f=d.from,p=d.to,a.push(d),u++);u<s.length;){let m=s[u];if(m.from==f&&(m.to>m.from||m.to==f))a.push(m),u++,p=Math.min(m.to,p);else{p=Math.min(m.from,p);break}}let g=Gpe(a);if(a.some(m=>m.from==m.to||m.from==m.to-1&&i.doc.lineAt(m.from).to==m.from))o.add(f,f,nt.widget({widget:new Upe(g),diagnostics:a.slice()}));else{let m=a.reduce((v,y)=>y.markClass?v+" "+y.markClass:v,"");o.add(f,p,nt.mark({class:"cm-lintRange cm-lintRange-"+g+m,diagnostics:a.slice(),inclusiveEnd:a.some(v=>v.to>p)}))}l=p;for(let m=0;m<a.length;m++)a[m].to<=l&&a.splice(m--,1)}let c=o.finish();return new cc(c,n,Jd(c))}}function Jd(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new MT(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new MT(i.from,s,i.diagnostic)}}),i}function Tpe(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(to).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(hA))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function QB(t,e){return t.field(mr,!1)?e:e.concat(tt.appendConfig.of(iz))}function Ope(t,e){return{effects:QB(t,[hA.of(e)])}}const hA=tt.define(),pA=tt.define(),ez=tt.define(),mr=Ei.define({create(){return new cc(nt.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=Jd(n,t.selected.diagnostic,s)||Jd(n,null,s)}!n.size&&r&&e.state.facet(to).autoPanel&&(r=null),t=new cc(n,r,i)}for(let n of e.effects)if(n.is(hA)){let i=e.state.facet(to).autoPanel?n.value.length?Yp.open:null:t.panel;t=cc.init(n.value,i,e.state)}else n.is(pA)?t=new cc(t.diagnostics,n.value?Yp.open:null,t.selected):n.is(ez)&&(t=new cc(t.diagnostics,t.panel,n.value));return t},provide:t=>[Rp.from(t,e=>e.panel),Re.decorations.from(t,e=>e.diagnostics)]}),Ipe=nt.mark({class:"cm-lintRange cm-lintRange-active"});function jpe(t,e,n){let{diagnostics:i}=t.state.field(mr),r,s=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return r=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(to).tooltipFilter;return r&&a&&(r=a(r,t.state)),r?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Lpe(t,r)}}}:null}function Lpe(t,e){return Rt("ul",{class:"cm-tooltip-lint"},e.map(n=>nz(t,n,!1)))}const Dpe=t=>{let e=t.state.field(mr,!1);(!e||!e.panel)&&t.dispatch({effects:QB(t.state,[pA.of(!0)])});let n=Mp(t,Yp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},RT=t=>{let e=t.state.field(mr,!1);return!e||!e.panel?!1:(t.dispatch({effects:pA.of(!1)}),!0)},$pe=t=>{let e=t.state.field(mr,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Fpe=ti.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(to);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(to);n.length&&Bpe(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(Ope(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{fr(this.view.state,i)})}}update(t){let e=t.state.facet(to);(t.docChanged||e!=t.startState.facet(to)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Bpe(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):r=setTimeout(()=>e(i),200)},n)}const to=Ee.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Rl(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function zpe(t,e={}){return[to.of({source:t,config:e}),Fpe,iz]}function tz(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function nz(t,e,n){var i;let r=n?tz(e.actions):[];return Rt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Rt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let p=Jd(t.state.field(mr).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,d=u<0?c:[c.slice(0,u),Rt("u",c.slice(u,u+1)),c.slice(u+1)];return Rt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Rt("div",{class:"cm-diagnosticSource"},e.source))}class Upe extends Tl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Rt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class TT{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=nz(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Yp{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)RT(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=tz(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=Jd(this.view.state.field(mr).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Rt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Rt("div",{class:"cm-panel-lint"},this.list,Rt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>RT(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(mr).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(mr),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,f;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(f=new TT(this.view,u),this.items.splice(i,0,f),r=!0):(f=this.items[d],d>i&&(this.items.splice(i,d-i),r=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new TT(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(mr),i=Jd(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:ez.of(i)})}static open(e){return new Yp(e)}}function Vpe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Yg(t){return Vpe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Hpe=Re.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Yg("#d11")},".cm-lintRange-warning":{backgroundImage:Yg("orange")},".cm-lintRange-info":{backgroundImage:Yg("#999")},".cm-lintRange-hint":{backgroundImage:Yg("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Wpe(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function Gpe(t){let e="hint",n=1;for(let i of t){let r=Wpe(i.severity);r>n&&(n=r,e=i.severity)}return e}const iz=[mr,Re.decorations.compute([mr],t=>{let{selected:e,panel:n}=t.field(mr);return!e||!n||e.from==e.to?nt.none:nt.set([Ipe.range(e.from,e.to)])}),Rte(jpe,{hideOn:Tpe}),Hpe],rz=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},Kpe=rz("up"),qpe=rz("down"),Ype=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(re.range(s,s)):e=re.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},Xpe=[{key:"Ctrl-Space",run:Cpe},{key:"Escape",run:Epe},{key:"ArrowDown",run:qg(!0)},{key:"ArrowUp",run:qg(!1)},{key:"PageDown",run:qg(!0,"page")},{key:"PageUp",run:qg(!1,"page")},{key:"Enter",run:PT},{key:"Tab",run:PT},{key:"Mod-f",run:VB,scope:"editor search-panel"},{key:"Escape",run:HB,scope:"editor search-panel"},{key:"Alt-Enter",run:FB,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:BB,scope:"editor search-panel"},{key:"Ctrl-g",run:Vhe},{key:"Mod-d",run:Khe,preventDefault:!0},{key:"Shift-Mod-l",run:tpe},{key:"Enter",run:gT,shift:gT},{key:"ArrowLeft",run:YR,shift:tT,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:bhe,shift:Che},{key:"ArrowRight",run:XR,shift:nT,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:xhe,shift:Ehe},{key:"ArrowUp",run:JR,shift:iT,preventDefault:!0},{key:"ArrowDown",run:ZR,shift:rT,preventDefault:!0},{key:"Home",run:eT,shift:lT},{mac:"Cmd-ArrowLeft",run:eT,shift:lT},{key:"Mod-Home",run:cT,shift:dT},{mac:"Cmd-ArrowUp",run:cT,shift:dT},{key:"PageUp",run:Qw,shift:sT},{mac:"Ctrl-ArrowUp",run:Qw,shift:sT},{key:"PageDown",run:e1,shift:oT},{mac:"Ctrl-ArrowDown",run:e1,shift:oT},{key:"End",run:QR,shift:aT},{mac:"Cmd-ArrowRight",run:QR,shift:aT},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Kpe,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:qpe,preventDefault:!0},{key:"Shift-Alt-i",run:Ype},{key:"Mod-End",run:uT,shift:fT},{mac:"Cmd-ArrowDown",run:uT,shift:fT},{key:"Mod-a",run:Phe},{key:"Backspace",run:Ppe},{key:"Backspace",run:t1,shift:t1},{key:"Delete",run:hT},{key:"Mod-Backspace",mac:"Alt-Backspace",run:pT},{key:"Mod-Delete",mac:"Alt-Delete",run:Rhe},{mac:"Mod-Backspace",run:The},{mac:"Mod-Delete",run:mT},{mac:"Ctrl-b",run:YR,shift:tT,preventDefault:!0},{mac:"Ctrl-f",run:XR,shift:nT},{mac:"Ctrl-p",run:JR,shift:iT},{mac:"Ctrl-n",run:ZR,shift:rT},{mac:"Ctrl-a",run:whe,shift:Ahe},{mac:"Ctrl-e",run:She,shift:Nhe},{mac:"Ctrl-d",run:hT},{mac:"Ctrl-h",run:t1},{mac:"Ctrl-k",run:mT},{mac:"Ctrl-Alt-h",run:pT},{mac:"Ctrl-o",run:Ohe},{mac:"Ctrl-t",run:Ihe},{mac:"Ctrl-v",run:e1},{mac:"Alt-v",run:Qw},{key:"Shift-Mod-k",run:Fhe},{key:"Alt-ArrowDown",run:Lhe},{key:"Alt-ArrowUp",run:jhe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:$he},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Dhe},{key:"Mod-l",run:Mhe,preventDefault:!0},{key:"Shift-Mod-\\",run:_he},{key:"Tab",run:Lk,shift:vT,preventDefault:!0},{key:"Mod-[",run:vT},{key:"Mod-]",run:Lk},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Rfe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Tfe},{key:"Mod-k Mod-0",run:Ofe},{key:"Mod-k Mod-j",run:Ife},{key:"Mod-k Mod-c",run:ihe},{key:"Mod-k Mod-u",run:rhe},{key:"Mod-/",run:the},{key:"Shift-Alt-a",run:she},{key:"Mod-z",run:vB,preventDefault:!0},{key:"Mod-y",run:jk,preventDefault:!0},{key:"Mod-Shift-z",run:jk,preventDefault:!0},{key:"Mod-u",run:fhe,preventDefault:!0},{key:"Mod-Shift-m",run:Dpe},{key:"F8",run:$pe}];var Jpe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},mu=new WeakMap,Xg=new WeakMap,Jg={},o1=0,sz=function(t){return t&&(t.host||sz(t.parentNode))},Zpe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=sz(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Qpe=function(t,e,n,i){var r=Zpe(e,Array.isArray(t)?t:[t]);Jg[n]||(Jg[n]=new WeakMap);var s=Jg[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(mu.get(f)||0)+1,v=(s.get(f)||0)+1;mu.set(f,m),s.set(f,v),o.push(f),m===1&&g&&Xg.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),o1++,function(){o.forEach(function(d){var f=mu.get(d)-1,p=s.get(d)-1;mu.set(d,f),s.set(d,p),f||(Xg.has(d)||d.removeAttribute(i),Xg.delete(d)),p||d.removeAttribute(n)}),o1--,o1||(mu=new WeakMap,mu=new WeakMap,Xg=new WeakMap,Jg={})}},eme=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=Jpe(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),Qpe(i,r,n,"aria-hidden")):function(){return null}},Fk=["Enter"," "],tme=["ArrowDown","PageUp","Home"],oz=["ArrowUp","PageDown","End"],nme=[...tme,...oz],ime={ltr:[...Fk,"ArrowRight"],rtl:[...Fk,"ArrowLeft"]},rme={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Yb="Menu",[Xp,sme,ome]=im(Yb),[Qc,az]=Cs(Yb,[ome,uf,Yy]),mA=uf(),lz=Yy(),[P0e,eu]=Qc(Yb),[M0e,Pm]=Qc(Yb),ame="MenuAnchor",gA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=mA(n);return h.jsx(Mb,{...r,...i,ref:e})});gA.displayName=ame;var vA="MenuPortal",[lme,cz]=Qc(vA,{forceMount:void 0}),uz=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=eu(vA,e);return h.jsx(lme,{scope:e,forceMount:n,children:h.jsx(ra,{present:n||s.open,children:h.jsx(wm,{asChild:!0,container:r,children:i})})})};uz.displayName=vA;var qr="MenuContent",[cme,yA]=Qc(qr),dz=b.forwardRef((t,e)=>{const n=cz(qr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=eu(qr,t.__scopeMenu),o=Pm(qr,t.__scopeMenu);return h.jsx(Xp.Provider,{scope:t.__scopeMenu,children:h.jsx(ra,{present:i||s.open,children:h.jsx(Xp.Slot,{scope:t.__scopeMenu,children:o.modal?h.jsx(ume,{...r,ref:e}):h.jsx(dme,{...r,ref:e})})})})}),ume=b.forwardRef((t,e)=>{const n=eu(qr,t.__scopeMenu),i=b.useRef(null),r=ct(e,i);return b.useEffect(()=>{const s=i.current;if(s)return eme(s)},[]),h.jsx(bA,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ye(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),dme=b.forwardRef((t,e)=>{const n=eu(qr,t.__scopeMenu);return h.jsx(bA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),fme=Td("MenuContent.ScrollLock"),bA=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:g,...m}=t,v=eu(qr,n),y=Pm(qr,n),x=mA(n),w=lz(n),S=sme(n),[_,E]=b.useState(null),C=b.useRef(null),N=ct(e,C,v.onContentChange),M=b.useRef(0),I=b.useRef(""),O=b.useRef(0),T=b.useRef(null),H=b.useRef("right"),D=b.useRef(0),K=g?Tb:b.Fragment,X=g?{as:fme,allowPinchZoom:!0}:void 0,te=B=>{var k,P;const ie=I.current+B,be=S().filter(j=>!j.disabled),J=document.activeElement,le=(k=be.find(j=>j.ref.current===J))==null?void 0:k.textValue,F=be.map(j=>j.textValue),$=_me(F,ie,le),V=(P=be.find(j=>j.textValue===$))==null?void 0:P.ref.current;(function j(R){I.current=R,window.clearTimeout(M.current),R!==""&&(M.current=window.setTimeout(()=>j(""),1e3))})(ie),V&&setTimeout(()=>V.focus())};b.useEffect(()=>()=>window.clearTimeout(M.current),[]),_E();const U=b.useCallback(B=>{var be,J;return H.current===((be=T.current)==null?void 0:be.side)&&Eme(B,(J=T.current)==null?void 0:J.area)},[]);return h.jsx(cme,{scope:n,searchRef:I,onItemEnter:b.useCallback(B=>{U(B)&&B.preventDefault()},[U]),onItemLeave:b.useCallback(B=>{var ie;U(B)||((ie=C.current)==null||ie.focus(),E(null))},[U]),onTriggerLeave:b.useCallback(B=>{U(B)&&B.preventDefault()},[U]),pointerGraceTimerRef:O,onPointerGraceIntentChange:b.useCallback(B=>{T.current=B},[]),children:h.jsx(K,{...X,children:h.jsx(Eb,{asChild:!0,trapped:r,onMountAutoFocus:ye(s,B=>{var ie;B.preventDefault(),(ie=C.current)==null||ie.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(bm,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(Ej,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:i,currentTabStopId:_,onCurrentTabStopIdChange:E,onEntryFocus:ye(l,B=>{y.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(jE,{role:"menu","aria-orientation":"vertical","data-state":Az(v.open),"data-radix-menu-content":"",dir:y.dir,...x,...m,ref:N,style:{outline:"none",...m.style},onKeyDown:ye(m.onKeyDown,B=>{const be=B.target.closest("[data-radix-menu-content]")===B.currentTarget,J=B.ctrlKey||B.altKey||B.metaKey,le=B.key.length===1;be&&(B.key==="Tab"&&B.preventDefault(),!J&&le&&te(B.key));const F=C.current;if(B.target!==F||!nme.includes(B.key))return;B.preventDefault();const V=S().filter(k=>!k.disabled).map(k=>k.ref.current);oz.includes(B.key)&&V.reverse(),Sme(V)}),onBlur:ye(t.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(M.current),I.current="")}),onPointerMove:ye(t.onPointerMove,Jp(B=>{const ie=B.target,be=D.current!==B.clientX;if(B.currentTarget.contains(ie)&&be){const J=B.clientX>D.current?"right":"left";H.current=J,D.current=B.clientX}}))})})})})})})});dz.displayName=qr;var hme="MenuGroup",xA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(He.div,{role:"group",...i,ref:e})});xA.displayName=hme;var pme="MenuLabel",fz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(He.div,{...i,ref:e})});fz.displayName=pme;var yy="MenuItem",OT="menu.itemSelect",Xb=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=b.useRef(null),o=Pm(yy,t.__scopeMenu),a=yA(yy,t.__scopeMenu),l=ct(e,s),c=b.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(OT,{bubbles:!0,cancelable:!0});d.addEventListener(OT,p=>i==null?void 0:i(p),{once:!0}),Z_(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return h.jsx(hz,{...r,ref:l,disabled:n,onClick:ye(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:ye(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:ye(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||Fk.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Xb.displayName=yy;var hz=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=yA(yy,n),a=lz(n),l=b.useRef(null),c=ct(e,l),[u,d]=b.useState(!1),[f,p]=b.useState("");return b.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[s.children]),h.jsx(Xp.ItemSlot,{scope:n,disabled:i,textValue:r??f,children:h.jsx(Aj,{asChild:!0,...a,focusable:!i,children:h.jsx(He.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:c,onPointerMove:ye(t.onPointerMove,Jp(g=>{i?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ye(t.onPointerLeave,Jp(g=>o.onItemLeave(g))),onFocus:ye(t.onFocus,()=>d(!0)),onBlur:ye(t.onBlur,()=>d(!1))})})})}),mme="MenuCheckboxItem",pz=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return h.jsx(bz,{scope:t.__scopeMenu,checked:n,children:h.jsx(Xb,{role:"menuitemcheckbox","aria-checked":by(n)?"mixed":n,...r,ref:e,"data-state":SA(n),onSelect:ye(r.onSelect,()=>i==null?void 0:i(by(n)?!0:!n),{checkForDefaultPrevented:!1})})})});pz.displayName=mme;var mz="MenuRadioGroup",[gme,vme]=Qc(mz,{value:void 0,onValueChange:()=>{}}),gz=b.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=xr(i);return h.jsx(gme,{scope:t.__scopeMenu,value:n,onValueChange:s,children:h.jsx(xA,{...r,ref:e})})});gz.displayName=mz;var vz="MenuRadioItem",yz=b.forwardRef((t,e)=>{const{value:n,...i}=t,r=vme(vz,t.__scopeMenu),s=n===r.value;return h.jsx(bz,{scope:t.__scopeMenu,checked:s,children:h.jsx(Xb,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":SA(s),onSelect:ye(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});yz.displayName=vz;var wA="MenuItemIndicator",[bz,yme]=Qc(wA,{checked:!1}),xz=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=yme(wA,n);return h.jsx(ra,{present:i||by(s.checked)||s.checked===!0,children:h.jsx(He.span,{...r,ref:e,"data-state":SA(s.checked)})})});xz.displayName=wA;var bme="MenuSeparator",wz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(He.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});wz.displayName=bme;var xme="MenuArrow",Sz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=mA(n);return h.jsx(LE,{...r,...i,ref:e})});Sz.displayName=xme;var wme="MenuSub",[R0e,kz]=Qc(wme),hh="MenuSubTrigger",_z=b.forwardRef((t,e)=>{const n=eu(hh,t.__scopeMenu),i=Pm(hh,t.__scopeMenu),r=kz(hh,t.__scopeMenu),s=yA(hh,t.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(gA,{asChild:!0,...c,children:h.jsx(hz,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":Az(n.open),...t,ref:Ky(e,r.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ye(t.onPointerMove,Jp(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ye(t.onPointerLeave,Jp(d=>{var p,g;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(g=n.content)==null?void 0:g.dataset.side,v=m==="right",y=v?-5:5,x=f[v?"left":"right"],w=f[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x,y:f.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ye(t.onKeyDown,d=>{var p;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||ime[i.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});_z.displayName=hh;var Cz="MenuSubContent",Ez=b.forwardRef((t,e)=>{const n=cz(qr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=eu(qr,t.__scopeMenu),o=Pm(qr,t.__scopeMenu),a=kz(Cz,t.__scopeMenu),l=b.useRef(null),c=ct(e,l);return h.jsx(Xp.Provider,{scope:t.__scopeMenu,children:h.jsx(ra,{present:i||s.open,children:h.jsx(Xp.Slot,{scope:t.__scopeMenu,children:h.jsx(bA,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ye(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ye(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ye(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=rme[o.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});Ez.displayName=Cz;function Az(t){return t?"open":"closed"}function by(t){return t==="indeterminate"}function SA(t){return by(t)?"indeterminate":t?"checked":"unchecked"}function Sme(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function kme(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function _me(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=kme(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Cme(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>i!=f>i&&n<(d-c)*(i-u)/(f-u)+c&&(r=!r)}return r}function Eme(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Cme(n,e)}function Jp(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Ame=gA,Nme=uz,Pme=dz,Mme=xA,Rme=fz,Tme=Xb,Ome=pz,Ime=gz,jme=yz,Lme=xz,Dme=wz,$me=Sz,Fme=_z,Bme=Ez,Nz="DropdownMenu",[zme,T0e]=Cs(Nz,[az]),Zi=az(),[O0e,Pz]=zme(Nz),Mz="DropdownMenuTrigger",Ume=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=Pz(Mz,n),o=Zi(n);return h.jsx(Ame,{asChild:!0,...o,children:h.jsx(He.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:Ky(e,s.triggerRef),onPointerDown:ye(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ye(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Ume.displayName=Mz;var Vme="DropdownMenuPortal",Rz=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Zi(e);return h.jsx(Nme,{...i,...n})};Rz.displayName=Vme;var Tz="DropdownMenuContent",Oz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Pz(Tz,n),s=Zi(n),o=b.useRef(!1);return h.jsx(Pme,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:ye(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ye(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Oz.displayName=Tz;var Hme="DropdownMenuGroup",Wme=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return h.jsx(Mme,{...r,...i,ref:e})});Wme.displayName=Hme;var Gme="DropdownMenuLabel",Iz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return h.jsx(Rme,{...r,...i,ref:e})});Iz.displayName=Gme;var Kme="DropdownMenuItem",jz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return h.jsx(Tme,{...r,...i,ref:e})});jz.displayName=Kme;var qme="DropdownMenuCheckboxItem",Lz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return h.jsx(Ome,{...r,...i,ref:e})});Lz.displayName=qme;var Yme="DropdownMenuRadioGroup",Xme=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return h.jsx(Ime,{...r,...i,ref:e})});Xme.displayName=Yme;var Jme="DropdownMenuRadioItem",Dz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return h.jsx(jme,{...r,...i,ref:e})});Dz.displayName=Jme;var Zme="DropdownMenuItemIndicator",$z=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return h.jsx(Lme,{...r,...i,ref:e})});$z.displayName=Zme;var Qme="DropdownMenuSeparator",Fz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return h.jsx(Dme,{...r,...i,ref:e})});Fz.displayName=Qme;var ege="DropdownMenuArrow",tge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return h.jsx($me,{...r,...i,ref:e})});tge.displayName=ege;var nge="DropdownMenuSubTrigger",Bz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return h.jsx(Fme,{...r,...i,ref:e})});Bz.displayName=nge;var ige="DropdownMenuSubContent",zz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return h.jsx(Bme,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zz.displayName=ige;var rge=Rz,Uz=Oz,Vz=Iz,Hz=jz,Wz=Lz,Gz=Dz,Kz=$z,qz=Fz,Yz=Bz,Xz=zz;const sge=b.forwardRef(({className:t,inset:e,children:n,...i},r)=>h.jsxs(Yz,{ref:r,className:Q("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,h.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));sge.displayName=Yz.displayName;const oge=b.forwardRef(({className:t,...e},n)=>h.jsx(Xz,{ref:n,className:Q("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));oge.displayName=Xz.displayName;const age=b.forwardRef(({className:t,sideOffset:e=4,...n},i)=>h.jsx(rge,{children:h.jsx(Uz,{ref:i,sideOffset:e,className:Q("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));age.displayName=Uz.displayName;const lge=b.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(Hz,{ref:i,className:Q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));lge.displayName=Hz.displayName;const cge=b.forwardRef(({className:t,children:e,checked:n,...i},r)=>h.jsxs(Wz,{ref:r,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(Kz,{children:h.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));cge.displayName=Wz.displayName;const uge=b.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(Gz,{ref:i,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(Kz,{children:h.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));uge.displayName=Gz.displayName;const dge=b.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(Vz,{ref:i,className:Q("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));dge.displayName=Vz.displayName;const fge=b.forwardRef(({className:t,...e},n)=>h.jsx(qz,{ref:n,className:Q("-mx-1 my-1 h-px bg-stone-600",t),...e}));fge.displayName=qz.displayName;const kA=sD("vonsim-program",rb(On().language,"editor.example"),void 0,{getOnInit:!0}),Jz=()=>{const t=L.get(kA);return typeof t=="string"?t:""},hge=ti.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(L.set(kA,this.view.state.doc.toString()),L.set(Wv,!0))}}),IT=ue(null);ue(t=>t(IT),(t,e,n)=>{e(IT,n)});const pge=ue("");ue(t=>t(pge)!==t(kA));const Bk=ue(0),jT=ue(null),LT=ue(t=>t(jT),(t,e,n)=>{e(jT,n)}),Zz=ue(""),mge=ue(()=>typeof window<"u"&&window.codemirror?window.codemirror.state.doc.toString():Jz()||""),gge=ue(t=>t(Zz)!==t(mge)),a1="showSaveFilePicker"in window;function vge(){const[t,e]=rf(),n=rt(Bk),i=rt(LT),r=up(LT),s=up(Zz),o=rt(gge),a=i&&o;b.useEffect(()=>{if(window.codemirror){const d=()=>{};return window.codemirror.dom.addEventListener("input",d),()=>{window.codemirror.dom.removeEventListener("input",d)}}},[]);const l=b.useCallback(async()=>{if(!a1){$i({title:"editor.files.unsupported",variant:"error"});return}if(!(a&&!confirm("editor.files.unsaved")))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await d.requestPermission({mode:"readwrite"})==="granted"){r(d);const g=await(await d.getFile()).text();s(g),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:g}})}}catch(d){console.error(d),$i({title:"editor.files.open-error",variant:"error"})}},[a,r,s]),c=b.useCallback(async()=>{if(!a1){$i({title:"editor.files.unsupported",variant:"error"});return}if(!i){$i({title:"No hay archivo abierto para guardar",variant:"error"});return}if(a)try{const d=window.codemirror.state.doc.toString(),f=await i.createWritable({keepExistingData:!1});await f.write(d),await f.close(),s(d),$i({title:"Archivo guardado",variant:"info"})}catch(d){console.error(d),$i({title:"editor.files.save-error",variant:"error"})}},[i,a,s]),u=b.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),f=(i==null?void 0:i.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(a1)try{const p=await window.showSaveFilePicker({suggestedName:f,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await p.requestPermission({mode:"readwrite"})==="granted"){r(p);const m=await p.createWritable({keepExistingData:!1});await m.write(d),await m.close(),s(d),$i({title:"Archivo guardado",variant:"info"})}}catch(p){console.error(p),$i({title:"editor.files.save-error",variant:"error"})}else{const p=new Blob([d],{type:"text/plain"}),g=URL.createObjectURL(p),m=document.createElement("a");m.style.display="none",m.href=g,m.download=f,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(g)}},[i,r,s]);return h.jsxs("div",{"data-testid":"status-bar",className:"flex items-center justify-between border-t border-stone-700 bg-gradient-to-r from-stone-800 to-stone-900 px-4 py-0.5 font-sans text-xs text-stone-300 shadow-inner",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[i&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium text-white transition-colors",children:i.name}),a&&h.jsx("span",{className:"size-2 rounded-full bg-orange-400"})]}),i&&h.jsx("div",{className:"h-4 w-px bg-stone-600"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(vr,{content:"editor.files.open",position:"top",children:h.jsx(mt,{variant:"ghost",size:"sm",onClick:l,className:"hover-lift","aria-label":"editor.files.open",children:h.jsx("span",{className:"icon-[lucide--folder-open] size-4"})})}),h.jsx(vr,{content:"editor.files.save",position:"top",children:h.jsx(mt,{variant:"ghost",size:"sm",onClick:c,disabled:!i||!a,className:"hover-lift","aria-label":"editor.files.save",children:h.jsx("span",{className:"icon-[lucide--save] size-4"})})}),h.jsx(vr,{content:"editor.files.save-as",position:"top",children:h.jsx(mt,{variant:"ghost",size:"sm",onClick:u,className:"hover-lift","aria-label":"editor.files.save-as",children:h.jsx("span",{className:"icon-[lucide--save-all] size-4"})})})]})]}),h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsxs(GE,{children:[h.jsx(KE,{asChild:!0,children:h.jsx("button",{className:"flex items-center justify-center rounded-lg p-1 text-stone-300 hover:bg-stone-800 focus:outline-none focus:ring-2 focus:ring-mantis-500","aria-label":"Ajustar tamao de fuente del editor",title:"Ajustar tamao de fuente del editor",type:"button",children:h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5"})})}),h.jsxs(Ub,{align:"end",className:"w-56 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5 text-mantis-400"}),h.jsx("span",{className:"text-sm font-medium text-white",children:"Tamao de fuente del editor"}),h.jsxs("span",{className:"ml-auto text-xs text-stone-400",children:[t.editorFontSize,"px"]})]}),h.jsx(lc,{value:[t.editorFontSize],min:8,max:64,step:1,onValueChange:([d])=>e(f=>({...f,editorFontSize:d})),className:"w-full"}),h.jsxs("div",{className:"mt-2 flex justify-between text-xs text-stone-500",children:[h.jsx("span",{children:"8"}),h.jsx("span",{children:"64"})]})]})]}),h.jsxs("div",{className:Q("flex items-center gap-1.5 rounded-full px-2 py-0.5 font-medium transition-colors",n>0?"border border-red-500/30 bg-red-500/20 text-red-300":"border border-green-500/30 bg-green-500/20 text-green-300"),children:[h.jsx("div",{className:Q("size-2 rounded-full",n>0?"bg-red-400":"bg-green-400")}),h.jsx("span",{className:"font-mono",children:n>0?`${n} error${n>1?"es":""}`:"Sin errores"})]})]})]})}const Oi={character:Ve.character,comment:Ve.comment,"data-directive":Cn.define(),identifier:Ve.variableName,instruction:Cn.define(),label:Ve.labelName,number:Ve.number,operator:Ve.operator,offset:Cn.define(),"ptr-size":Cn.define(),punctuation:Ve.punctuation,register:Cn.define(),special:Cn.define(),string:Ve.string,unassigned:Cn.define()},yge=nA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":SC.includes(e)?"data-directive":kC.includes(e)?"instruction":Iv.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Oi}),bge=Bfe(Hb.define([{tag:Oi.character,class:"text-orange-300"},{tag:Oi.comment,class:"text-stone-500 italic"},{tag:Oi["data-directive"],class:"text-rose-400/80"},{tag:Oi.instruction,class:"text-mantis-400"},{tag:Oi.number,class:"text-cyan-300/60"},{tag:Oi.operator,class:"text-rose-300"},{tag:Oi.offset,class:"text-rose-400/80 italic"},{tag:Oi["ptr-size"],class:"text-rose-400/80 italic"},{tag:Oi.punctuation,class:"text-stone-600"},{tag:Oi.register,class:"text-emerald-400/80"},{tag:Oi.special,class:"text-yellow-300/80"},{tag:Oi.string,class:"text-orange-300"},{tag:Oi.unassigned,class:"text-rose-400/80"}])),xge=zpe(t=>{const e=t.state.doc.toString(),n=vD(e);if(n.success)return L.set(Bk,0),[];const i=n,r=On().language,s=i.errors.map(o=>{var c,u;const a=((c=o.position)==null?void 0:c.start)??0,l=((u=o.position)==null?void 0:u.end)??e.length;return{message:o.translate(r),severity:"error",from:a,to:l}});return L.set(Bk,s.length),s},{delay:200});function wge(){return new gfe(yge,[bge,xge])}function Qz({className:t}){const[e,n]=b.useState(),i=EJ(),r=b.useCallback(s=>{s&&n(s)},[]);return b.useEffect(()=>{if(e)return window.codemirror=new Re({state:ut.create({doc:Jz()||"",extensions:[ut.tabSize.of(2),Z8.of(ut.readOnly.of(!1)),hge,Ute(),Kte,Wte(),mte(),dhe(),ote(),Re.domEventHandlers({drop:s=>s.preventDefault()}),ut.allowMultipleSelections.of(!0),wte(),Re.updateListener.of(s=>{s.selectionSet}),V8.of([{key:"Escape",run:s=>(s.dispatch({selection:re.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?Lk(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...Xpe]),wge()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),h.jsxs("div",{className:Q("flex flex-col rounded-lg border border-stone-700 bg-gradient-to-br from-stone-900 to-stone-800 shadow-xl",t),children:[h.jsx("div",{ref:r,className:"grow overflow-auto rounded-t-lg font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),h.jsx(vge,{})]})}const e7=b.memo(()=>{const t=bC(),e=KK("(max-width: 640px)");u9(),d9();const n=b.useMemo(()=>({}),[]);return h.jsxs("div",{"data-testid":"app-container",className:"flex h-screen w-screen flex-col bg-black text-white",lang:t,style:n,children:[h.jsx(f9,{}),h.jsx(o9,{"data-testid":"header"}),e?h.jsx(n7,{}):h.jsx(t7,{}),h.jsx(hD,{"data-testid":"footer"}),h.jsx(m9,{}),h.jsx(c9,{})]})});e7.displayName="App";const t7=b.memo(()=>{const[t]=sm($b);return h.jsxs(rL,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[h.jsx(g0,{id:"panel-editor",order:1,minSize:30,defaultSize:50,tagName:"section",className:"rounded-lg border border-stone-600 bg-black","data-testid":"panel-editor",children:h.jsx(Qz,{className:"size-full"})}),h.jsx(DS,{className:"w-2"}),h.jsx(g0,{id:"panel-computer",order:2,minSize:20,defaultSize:50,tagName:"section",className:"computer-background rounded-lg border border-stone-600","data-testid":"panel-computer",children:h.jsx(H9,{})}),t&&h.jsxs(h.Fragment,{children:[h.jsx(DS,{className:"w-2"}),h.jsx(g0,{id:"panel-settings",order:3,minSize:30,defaultSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800","data-testid":"panel-settings",children:h.jsx(r9,{className:"size-full"})})]})]})});t7.displayName="DesktopLayout";const n7=b.memo(()=>{const t=Xt(),[e,n]=b.useState("editor"),[i,r]=sm($b),s=rt(oi),o=b.useMemo(()=>"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),a=b.useMemo(()=>i?"settings":e,[i,e]),l=b.useCallback(u=>{i&&r(!1),n(u)},[i,r]),c=b.useMemo(()=>{switch(a){case"editor":return"Editor";case"computer":return"Computadora";case"settings":return"Configuracin";default:return""}},[a]);return h.jsx(Pj,{value:a,onValueChange:l,asChild:!0,children:h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-500",children:"Pestaa:"}),h.jsx("span",{className:"text-sm font-medium text-white",children:c})]}),a==="computer"&&h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-stone-500",children:"Instruccin actual:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:o||h.jsx("span",{className:"italic text-stone-400",children:"Sin instruccin"})})]})]})}),h.jsx(m0,{value:"editor",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-black data-[state=inactive]:hidden","data-testid":"panel-editor",children:h.jsx(Qz,{className:"size-full"})})}),h.jsx(m0,{value:"computer",asChild:!0,children:h.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-computer",children:h.jsx(H9,{})})}),h.jsx(m0,{value:"settings",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-settings",children:h.jsx(r9,{className:"size-full"})})}),h.jsx("div",{className:"border-t border-stone-700 bg-stone-900 p-2",children:h.jsxs(Rj,{className:"grid grid-cols-3 gap-2",children:[h.jsxs(p0,{value:"editor",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--file-terminal] mb-1 size-5"}),t("control.tabs.editor")]}),h.jsxs(p0,{value:"computer",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--computer] mb-1 size-5"}),t("control.tabs.computer")]}),h.jsxs(p0,{value:"settings",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--settings] mb-1 size-5"}),"Configuracin"]})]})})]})})});n7.displayName="MobileLayout";var _A="ToastProvider",[CA,Sge,kge]=im("Toast"),[i7,I0e]=Cs("Toast",[kge]),[_ge,Jb]=i7(_A),r7=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=b.useState(null),[c,u]=b.useState(0),d=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${_A}\`. Expected non-empty \`string\`.`),h.jsx(CA.Provider,{scope:e,children:h.jsx(_ge,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(p=>p+1),[]),onToastRemove:b.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};r7.displayName=_A;var s7="ToastViewport",Cge=["F8"],zk="toast.viewportPause",Uk="toast.viewportResume",o7=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=Cge,label:r="Notifications ({hotkey})",...s}=t,o=Jb(s7,n),a=Sge(n),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),f=ct(e,d,o.onViewportChange),p=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;b.useEffect(()=>{const v=y=>{var w;i.length!==0&&i.every(S=>y[S]||y.code===S)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[i]),b.useEffect(()=>{const v=l.current,y=d.current;if(g&&v&&y){const x=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(zk);y.dispatchEvent(E),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(Uk);y.dispatchEvent(E),o.isClosePausedRef.current=!1}},S=E=>{!v.contains(E.relatedTarget)&&w()},_=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",x),v.addEventListener("focusout",S),v.addEventListener("pointermove",x),v.addEventListener("pointerleave",_),window.addEventListener("blur",x),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",x),v.removeEventListener("focusout",S),v.removeEventListener("pointermove",x),v.removeEventListener("pointerleave",_),window.removeEventListener("blur",x),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const m=b.useCallback(({tabbingDirection:v})=>{const x=a().map(w=>{const S=w.ref.current,_=[S,...$ge(S)];return v==="forwards"?_:_.reverse()});return(v==="forwards"?x.reverse():x).flat()},[a]);return b.useEffect(()=>{const v=d.current;if(v){const y=x=>{var _,E,C;const w=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!w){const N=document.activeElement,M=x.shiftKey;if(x.target===v&&M){(_=c.current)==null||_.focus();return}const T=m({tabbingDirection:M?"backwards":"forwards"}),H=T.findIndex(D=>D===N);l1(T.slice(H+1))?x.preventDefault():M?(E=c.current)==null||E.focus():(C=u.current)==null||C.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[a,m]),h.jsxs(toe,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&h.jsx(Vk,{ref:c,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});l1(v)}}),h.jsx(CA.Slot,{scope:n,children:h.jsx(He.ol,{tabIndex:-1,...s,ref:f})}),g&&h.jsx(Vk,{ref:u,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});l1(v)}})]})});o7.displayName=s7;var a7="ToastFocusProxy",Vk=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=Jb(a7,n);return h.jsx($E,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});Vk.displayName=a7;var Mm="Toast",Ege="toast.swipeStart",Age="toast.swipeMove",Nge="toast.swipeCancel",Pge="toast.swipeEnd",l7=b.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a,l]=dl({prop:i,defaultProp:r??!0,onChange:s,caller:Mm});return h.jsx(ra,{present:n||a,children:h.jsx(Tge,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:xr(t.onPause),onResume:xr(t.onResume),onSwipeStart:ye(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ye(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ye(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ye(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});l7.displayName=Mm;var[Mge,Rge]=i7(Mm,{onClose(){}}),Tge=b.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...g}=t,m=Jb(Mm,n),[v,y]=b.useState(null),x=ct(e,D=>y(D)),w=b.useRef(null),S=b.useRef(null),_=r||m.duration,E=b.useRef(0),C=b.useRef(_),N=b.useRef(0),{onToastAdd:M,onToastRemove:I}=m,O=xr(()=>{var K;(v==null?void 0:v.contains(document.activeElement))&&((K=m.viewport)==null||K.focus()),o()}),T=b.useCallback(D=>{!D||D===1/0||(window.clearTimeout(N.current),E.current=new Date().getTime(),N.current=window.setTimeout(O,D))},[O]);b.useEffect(()=>{const D=m.viewport;if(D){const K=()=>{T(C.current),c==null||c()},X=()=>{const te=new Date().getTime()-E.current;C.current=C.current-te,window.clearTimeout(N.current),l==null||l()};return D.addEventListener(zk,X),D.addEventListener(Uk,K),()=>{D.removeEventListener(zk,X),D.removeEventListener(Uk,K)}}},[m.viewport,_,l,c,T]),b.useEffect(()=>{s&&!m.isClosePausedRef.current&&T(_)},[s,_,m.isClosePausedRef,T]),b.useEffect(()=>(M(),()=>I()),[M,I]);const H=b.useMemo(()=>v?m7(v):null,[v]);return m.viewport?h.jsxs(h.Fragment,{children:[H&&h.jsx(Oge,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:H}),h.jsx(Mge,{scope:n,onClose:O,children:Ml.createPortal(h.jsx(CA.ItemSlot,{scope:n,children:h.jsx(eoe,{asChild:!0,onEscapeKeyDown:ye(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||O(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(He.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ye(t.onKeyDown,D=>{D.key==="Escape"&&(a==null||a(D.nativeEvent),D.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:ye(t.onPointerDown,D=>{D.button===0&&(w.current={x:D.clientX,y:D.clientY})}),onPointerMove:ye(t.onPointerMove,D=>{if(!w.current)return;const K=D.clientX-w.current.x,X=D.clientY-w.current.y,te=!!S.current,U=["left","right"].includes(m.swipeDirection),B=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,ie=U?B(0,K):0,be=U?0:B(0,X),J=D.pointerType==="touch"?10:2,le={x:ie,y:be},F={originalEvent:D,delta:le};te?(S.current=le,Zg(Age,d,F,{discrete:!1})):DT(le,m.swipeDirection,J)?(S.current=le,Zg(Ege,u,F,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(K)>J||Math.abs(X)>J)&&(w.current=null)}),onPointerUp:ye(t.onPointerUp,D=>{const K=S.current,X=D.target;if(X.hasPointerCapture(D.pointerId)&&X.releasePointerCapture(D.pointerId),S.current=null,w.current=null,K){const te=D.currentTarget,U={originalEvent:D,delta:K};DT(K,m.swipeDirection,m.swipeThreshold)?Zg(Pge,p,U,{discrete:!0}):Zg(Nge,f,U,{discrete:!0}),te.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),Oge=t=>{const{__scopeToast:e,children:n,...i}=t,r=Jb(Mm,e),[s,o]=b.useState(!1),[a,l]=b.useState(!1);return Lge(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(wm,{asChild:!0,children:h.jsx($E,{...i,children:s&&h.jsxs(h.Fragment,{children:[r.label," ",n]})})})},Ige="ToastTitle",c7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(He.div,{...i,ref:e})});c7.displayName=Ige;var jge="ToastDescription",u7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(He.div,{...i,ref:e})});u7.displayName=jge;var d7="ToastAction",f7=b.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?h.jsx(p7,{altText:n,asChild:!0,children:h.jsx(EA,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${d7}\`. Expected non-empty \`string\`.`),null)});f7.displayName=d7;var h7="ToastClose",EA=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=Rge(h7,n);return h.jsx(p7,{asChild:!0,children:h.jsx(He.button,{type:"button",...i,ref:e,onClick:ye(t.onClick,r.onClose)})})});EA.displayName=h7;var p7=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return h.jsx(He.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function m7(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),Dge(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...m7(i))}}),e}function Zg(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?Z_(r,s):r.dispatchEvent(s)}var DT=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function Lge(t=()=>{}){const e=xr(t);ei(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function Dge(t){return t.nodeType===t.ELEMENT_NODE}function $ge(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function l1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Fge=r7,g7=o7,v7=l7,y7=c7,b7=u7,x7=f7,w7=EA;const Bge=Fge,S7=b.forwardRef(({className:t,...e},n)=>h.jsx(g7,{ref:n,className:Q("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));S7.displayName=g7.displayName;const k7=b.forwardRef(({className:t,variant:e="default",...n},i)=>h.jsx(v7,{ref:i,"data-variant":e,className:Q("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));k7.displayName=v7.displayName;const zge=b.forwardRef(({className:t,...e},n)=>h.jsx(x7,{ref:n,className:Q("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));zge.displayName=x7.displayName;const _7=b.forwardRef(({className:t,...e},n)=>h.jsx(w7,{ref:n,className:Q("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:h.jsx("span",{className:"block size-4",children:""})}));_7.displayName=w7.displayName;const C7=b.forwardRef(({className:t,...e},n)=>h.jsx(y7,{ref:n,className:Q("text-sm font-semibold",t),...e}));C7.displayName=y7.displayName;const E7=b.forwardRef(({className:t,...e},n)=>h.jsx(b7,{ref:n,className:Q("text-sm opacity-90",t),...e}));E7.displayName=b7.displayName;function Uge(){const{toastList:t}=ene();return h.jsxs(Bge,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>h.jsxs(k7,{...o,variant:s,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(C7,{children:n}),i&&h.jsx(E7,{children:i})]}),r,h.jsx(_7,{})]},e)),h.jsx(S7,{})]})}window.codemirror=null;function Vge(){const{addNotification:t}=kE();return window.VonSimAddNotification=t,null}function A7(t,e){const n={type:"error",title:"Error inesperado",message:e?`${t}
${e}`:t};function i(r=10){window.VonSimAddNotification?window.VonSimAddNotification(n):r>0&&setTimeout(()=>i(r-1),100)}i()}window.onerror=function(t,e,n,i,r){return A7(typeof t=="string"?t:"Error de JavaScript",r&&r.stack?r.stack:void 0),!1};window.onunhandledrejection=function(t){const e=t.reason instanceof Error?t.reason.stack||t.reason.message:String(t.reason);return A7("Promesa no manejada",e),!1};const Hge=xj(document.getElementById("root"));Hge.render(h.jsx(b.StrictMode,{children:h.jsx(_H,{client:t6,children:h.jsxs(Gse,{children:[h.jsx(Vge,{}),h.jsx(KX,{children:h.jsx(e7,{})}),h.jsx(Uge,{})]})})}));
