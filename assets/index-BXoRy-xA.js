var Z7=Object.defineProperty;var zA=t=>{throw TypeError(t)};var Q7=(t,e,n)=>e in t?Z7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var me=(t,e,n)=>Q7(t,typeof e!="symbol"?e+"":e,n),ow=(t,e,n)=>e.has(t)||zA("Cannot "+n);var A=(t,e,n)=>(ow(t,e,"read from private field"),n?n.call(t):e.get(t)),De=(t,e,n)=>e.has(t)?zA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),te=(t,e,n,i)=>(ow(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Mt=(t,e,n)=>(ow(t,e,"access private method"),n);function eU(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var tU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d5={exports:{}},Ry={},f5={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em=Symbol.for("react.element"),nU=Symbol.for("react.portal"),iU=Symbol.for("react.fragment"),rU=Symbol.for("react.strict_mode"),sU=Symbol.for("react.profiler"),oU=Symbol.for("react.provider"),aU=Symbol.for("react.context"),lU=Symbol.for("react.forward_ref"),cU=Symbol.for("react.suspense"),uU=Symbol.for("react.memo"),dU=Symbol.for("react.lazy"),UA=Symbol.iterator;function fU(t){return t===null||typeof t!="object"?null:(t=UA&&t[UA]||t["@@iterator"],typeof t=="function"?t:null)}var h5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p5=Object.assign,m5={};function Qd(t,e,n){this.props=t,this.context=e,this.refs=m5,this.updater=n||h5}Qd.prototype.isReactComponent={};Qd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function g5(){}g5.prototype=Qd.prototype;function i_(t,e,n){this.props=t,this.context=e,this.refs=m5,this.updater=n||h5}var r_=i_.prototype=new g5;r_.constructor=i_;p5(r_,Qd.prototype);r_.isPureReactComponent=!0;var VA=Array.isArray,v5=Object.prototype.hasOwnProperty,s_={current:null},y5={key:!0,ref:!0,__self:!0,__source:!0};function b5(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)v5.call(e,i)&&!y5.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:em,type:t,key:s,ref:o,props:r,_owner:s_.current}}function hU(t,e){return{$$typeof:em,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function o_(t){return typeof t=="object"&&t!==null&&t.$$typeof===em}function pU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var HA=/\/+/g;function aw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pU(""+t.key):e.toString(36)}function s0(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case em:case nU:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+aw(o,0):i,VA(r)?(n="",t!=null&&(n=t.replace(HA,"$&/")+"/"),s0(r,e,n,"",function(c){return c})):r!=null&&(o_(r)&&(r=hU(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(HA,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",VA(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+aw(s,a);o+=s0(s,e,n,l,r)}else if(l=fU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+aw(s,a++),o+=s0(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Om(t,e,n){if(t==null)return t;var i=[],r=0;return s0(t,i,"","",function(s){return e.call(n,s,r++)}),i}function mU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Si={current:null},o0={transition:null},gU={ReactCurrentDispatcher:Si,ReactCurrentBatchConfig:o0,ReactCurrentOwner:s_};function w5(){throw Error("act(...) is not supported in production builds of React.")}lt.Children={map:Om,forEach:function(t,e,n){Om(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Om(t,function(){e++}),e},toArray:function(t){return Om(t,function(e){return e})||[]},only:function(t){if(!o_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};lt.Component=Qd;lt.Fragment=iU;lt.Profiler=sU;lt.PureComponent=i_;lt.StrictMode=rU;lt.Suspense=cU;lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gU;lt.act=w5;lt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=p5({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=s_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)v5.call(e,l)&&!y5.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:em,type:t.type,key:r,ref:s,props:i,_owner:o}};lt.createContext=function(t){return t={$$typeof:aU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oU,_context:t},t.Consumer=t};lt.createElement=b5;lt.createFactory=function(t){var e=b5.bind(null,t);return e.type=t,e};lt.createRef=function(){return{current:null}};lt.forwardRef=function(t){return{$$typeof:lU,render:t}};lt.isValidElement=o_;lt.lazy=function(t){return{$$typeof:dU,_payload:{_status:-1,_result:t},_init:mU}};lt.memo=function(t,e){return{$$typeof:uU,type:t,compare:e===void 0?null:e}};lt.startTransition=function(t){var e=o0.transition;o0.transition={};try{t()}finally{o0.transition=e}};lt.unstable_act=w5;lt.useCallback=function(t,e){return Si.current.useCallback(t,e)};lt.useContext=function(t){return Si.current.useContext(t)};lt.useDebugValue=function(){};lt.useDeferredValue=function(t){return Si.current.useDeferredValue(t)};lt.useEffect=function(t,e){return Si.current.useEffect(t,e)};lt.useId=function(){return Si.current.useId()};lt.useImperativeHandle=function(t,e,n){return Si.current.useImperativeHandle(t,e,n)};lt.useInsertionEffect=function(t,e){return Si.current.useInsertionEffect(t,e)};lt.useLayoutEffect=function(t,e){return Si.current.useLayoutEffect(t,e)};lt.useMemo=function(t,e){return Si.current.useMemo(t,e)};lt.useReducer=function(t,e,n){return Si.current.useReducer(t,e,n)};lt.useRef=function(t){return Si.current.useRef(t)};lt.useState=function(t){return Si.current.useState(t)};lt.useSyncExternalStore=function(t,e,n){return Si.current.useSyncExternalStore(t,e,n)};lt.useTransition=function(){return Si.current.useTransition()};lt.version="18.3.1";f5.exports=lt;var b=f5.exports;const Ft=Jc(b),Ty=eU({__proto__:null,default:Ft},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vU=b,yU=Symbol.for("react.element"),bU=Symbol.for("react.fragment"),wU=Object.prototype.hasOwnProperty,xU=vU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SU={key:!0,ref:!0,__self:!0,__source:!0};function x5(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)wU.call(e,i)&&!SU.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:yU,type:t,key:s,ref:o,props:r,_owner:xU.current}}Ry.Fragment=bU;Ry.jsx=x5;Ry.jsxs=x5;d5.exports=Ry;var h=d5.exports,q=typeof window<"u"?window:void 0,Ui=typeof globalThis<"u"?globalThis:q,S5=Array.prototype,WA=S5.forEach,GA=S5.indexOf,lr=Ui==null?void 0:Ui.navigator,Ce=Ui==null?void 0:Ui.document,$i=Ui==null?void 0:Ui.location,v1=Ui==null?void 0:Ui.fetch,y1=Ui!=null&&Ui.XMLHttpRequest&&"withCredentials"in new Ui.XMLHttpRequest?Ui.XMLHttpRequest:void 0,KA=Ui==null?void 0:Ui.AbortController,ji=lr==null?void 0:lr.userAgent,qe=q??{},No={DEBUG:!1,LIB_VERSION:"1.256.2"},lw="$copy_autocapture",kU=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],zo=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),_U=["fatal","error","warning","log","info","debug"];function at(t,e){return t.indexOf(e)!==-1}var Oy=function(t){return t.trim()},b1=function(t){return t.replace(/^\$/,"")},CU=Array.isArray,k5=Object.prototype,_5=k5.hasOwnProperty,Iy=k5.toString,Kt=CU||function(t){return Iy.call(t)==="[object Array]"},Fr=t=>typeof t=="function",ln=t=>t===Object(t)&&!Kt(t),Au=t=>{if(ln(t)){for(var e in t)if(_5.call(t,e))return!1;return!0}return!1},ye=t=>t===void 0,cn=t=>Iy.call(t)=="[object String]",w1=t=>cn(t)&&t.trim().length===0,Pl=t=>t===null,kt=t=>ye(t)||Pl(t),oi=t=>Iy.call(t)=="[object Number]",Xs=t=>Iy.call(t)==="[object Boolean]",EU=t=>t instanceof FormData,AU=t=>at(kU,t),C5=t=>{var e={t:function(n){if(q&&(No.DEBUG||qe.POSTHOG_DEBUG)&&!ye(q.console)&&q.console){for(var i=("__rrweb_original__"in q.console[n])?q.console[n].__rrweb_original__:q.console[n],r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];i(t,...s)}},info:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("log",...i)},warn:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("warn",...i)},error:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("error",...i)},critical:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console.error(t,...i)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>C5(t+" "+n)};return e},Ae=C5("[PostHog.js]"),Dn=Ae.createLogger,NU=Dn("[ExternalScriptsLoader]"),qA=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return NU.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var i=Ce==null?void 0:Ce.querySelectorAll("script");if(i){for(var r=0;r<i.length;r++)if(i[r].src===e)return n()}var s=()=>{if(!Ce)return n("document not found");var o=Ce.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=Ce.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):Ce.body.appendChild(o)};Ce!=null&&Ce.body?s():Ce==null||Ce.addEventListener("DOMContentLoaded",s)};function Se(){return Se=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Se.apply(null,arguments)}function E5(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}qe.__PosthogExtensions__=qe.__PosthogExtensions__||{},qe.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(i="/array/"+t.config.token+"/config.js"),e==="toolbar"){var r=3e5;i=i+"&t="+Math.floor(Date.now()/r)*r}var s=t.requestRouter.endpointFor("assets",i);qA(t,s,n)},qe.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);qA(t,i,n)};var W0={};function Ja(t,e,n){if(Kt(t)){if(WA&&t.forEach===WA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===W0)return}}}function Nt(t,e,n){if(!kt(t)){if(Kt(t))return Ja(t,e,n);if(EU(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===W0)return}else for(var r in t)if(_5.call(t,r)&&e.call(n,t[r],r)===W0)return}}var fn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Ja(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t},jy=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Ja(n,function(r){Ja(r,function(s){t.push(s)})}),t};function a0(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var YA=function(t){try{return t()}catch{return}},PU=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){Ae.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ae.critical(r)}}},a_=function(t){var e={};return Nt(t,function(n,i){(cn(n)&&n.length>0||oi(n))&&(e[i]=n)}),e};function MU(t,e){return n=t,i=s=>cn(s)&&!Pl(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),Kt(o)?(l=[],Ja(o,c=>{l.push(s(c))})):(l={},Nt(o,(c,u)=>{r.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,i,r}var RU=["herokuapp.com","vercel.app","netlify.app"];function TU(t){var e=t==null?void 0:t.hostname;if(!cn(e))return!1;var n=e.split(".").slice(-2).join(".");for(var i of RU)if(n===i)return!1;return!0}function A5(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function Qt(t,e,n,i){var{capture:r=!1,passive:s=!0}=i??{};t==null||t.addEventListener(e,n,{capture:r,passive:s})}var N5="$people_distinct_id",Vf="__alias",Hf="__timers",XA="$autocapture_disabled_server_side",x1="$heatmaps_enabled_server_side",JA="$exception_capture_enabled_server_side",S1="$error_tracking_suppression_rules",ZA="$web_vitals_enabled_server_side",P5="$dead_clicks_enabled_server_side",QA="$web_vitals_allowed_metrics",k1="$session_recording_enabled_server_side",eN="$console_log_recording_enabled_server_side",tN="$session_recording_network_payload_capture",nN="$session_recording_masking",iN="$session_recording_canvas_recording",rN="$replay_sample_rate",sN="$replay_minimum_duration",oN="$replay_script_config",G0="$sesid",Wf="$session_is_sampled",_1="$session_recording_url_trigger_activated_session",C1="$session_recording_event_trigger_activated_session",Nu="$enabled_feature_flags",l0="$early_access_features",E1="$feature_flag_details",Gf="$stored_person_properties",ec="$stored_group_properties",A1="$surveys",Im="$surveys_activated",K0="$flag_call_reported",ko="$user_state",N1="$client_session_props",P1="$capture_rate_limit",M1="$initial_campaign_params",R1="$initial_referrer_info",q0="$initial_person_info",Y0="$epp",M5="__POSTHOG_TOOLBAR__",jm="$posthog_cookieless",OU=[N5,Vf,"__cmpns",Hf,k1,x1,G0,Nu,S1,ko,l0,E1,ec,Gf,A1,K0,N1,P1,M1,R1,Y0,q0];function aN(t){return t instanceof Element&&(t.id===M5||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function Dy(t){return!!t&&t.nodeType===1}function Za(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function R5(t){return!!t&&t.nodeType===3}function T5(t){return!!t&&t.nodeType===11}function l_(t){return t?Oy(t).split(/\s+/):[]}function lN(t){var e=q==null?void 0:q.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function X0(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return l_(e)}function O5(t){return kt(t)?null:Oy(t).split(/(\s+)/).filter(e=>xd(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Ly(t){var e="";return O1(t)&&!D5(t)&&t.childNodes&&t.childNodes.length&&Nt(t.childNodes,function(n){var i;R5(n)&&n.textContent&&(e+=(i=O5(n.textContent))!==null&&i!==void 0?i:"")}),Oy(e)}function I5(t){return ye(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var T1=["a","button","form","input","select","textarea","label"];function j5(t){var e=t.parentNode;return!(!e||!Dy(e))&&e}function IU(t,e,n,i,r){var s,o,a;if(n===void 0&&(n=void 0),!q||!t||Za(t,"html")||!Dy(t)||(s=n)!=null&&s.url_allowlist&&!lN(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&lN(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(v=>e.type===v))return!1}for(var c=!1,u=[t],d=!0,f=t;f.parentNode&&!Za(f,"body");)if(T5(f.parentNode))u.push(f.parentNode.host),f=f.parentNode.host;else{if(!(d=j5(f)))break;if(i||T1.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var p=q.getComputedStyle(d);p&&p.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(d),f=d}if(!function(v,y){var w=y==null?void 0:y.element_allowlist;if(ye(w))return!0;var x,S=function(E){if(w.some(C=>E.tagName.toLowerCase()===C))return{v:!0}};for(var _ of v)if(x=S(_))return x.v;return!1}(u,n)||!function(v,y){var w=y==null?void 0:y.css_selector_allowlist;if(ye(w))return!0;var x,S=function(E){if(w.some(C=>E.matches(C)))return{v:!0}};for(var _ of v)if(x=S(_))return x.v;return!1}(u,n))return!1;var g=q.getComputedStyle(t);if(g&&g.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var m=t.tagName.toLowerCase();switch(m){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return c?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(T1.indexOf(m)>-1||t.getAttribute("contenteditable")==="true")}}function O1(t){for(var e=t;e.parentNode&&!Za(e,"body");e=e.parentNode){var n=X0(e);if(at(n,"ph-sensitive")||at(n,"ph-no-capture"))return!1}if(at(X0(t),"ph-include"))return!0;var i=t.type||"";if(cn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(cn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function D5(t){return!!(Za(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||Za(t,"select")||Za(t,"textarea")||t.getAttribute("contenteditable")==="true")}var L5="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",jU=new RegExp("^(?:"+L5+")$"),DU=new RegExp(L5),$5="\\d{3}-?\\d{2}-?\\d{4}",LU=new RegExp("^("+$5+")$"),$U=new RegExp("("+$5+")");function xd(t,e){return e===void 0&&(e=!0),!(kt(t)||cn(t)&&(t=Oy(t),(e?jU:DU).test((t||"").replace(/[- ]/g,""))||(e?LU:$U).test(t)))}function F5(t){var e=Ly(t);return xd(e=(e+" "+B5(t)).trim())?e:""}function B5(t){var e="";return t&&t.childNodes&&t.childNodes.length&&Nt(t.childNodes,function(n){var i;if(n&&((i=n.tagName)==null?void 0:i.toLowerCase())==="span")try{var r=Ly(n);e=(e+" "+r).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+B5(n)).trim())}catch(s){Ae.error("[AutoCapture]",s)}}),e}function FU(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+="."+a.replace(/"/g,"");var l=Se({},i.text?{text:i.text}:{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{},i.attr_id?{attr_id:i.attr_id}:{},i.attributes),c={};return a0(l).sort((u,d)=>{var[f]=u,[p]=d;return f.localeCompare(p)}).forEach(u=>{var[d,f]=u;return c[cN(d.toString())]=cN(f.toString())}),o+=":",o+=a0(c).map(u=>{var[d,f]=u;return d+'="'+f+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)==null?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)==null?void 0:r.slice(0,2048),attr_class:BU(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return a0(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function cN(t){return t.replace(/"|\\"/g,'\\"')}function BU(t){var e=t.attr__class;return e?Kt(e)?e:l_(e):void 0}let z5=class{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}};var zU=["localhost","127.0.0.1"],Sd=t=>{var e=Ce==null?void 0:Ce.createElement("a");return ye(e)?null:(e.href=t,e)},UU=function(t,e){var n,i;e===void 0&&(e="&");var r=[];return Nt(t,function(s,o){ye(s)||ye(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),i=encodeURIComponent(o),r[r.length]=i+"="+n)}),r.join(e)},J0=function(t,e){for(var n,i=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!Kt(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Ae.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},c_=function(t,e,n){if(!t||!e||!e.length)return t;for(var i=t.split("#"),r=i[0]||"",s=i[1],o=r.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var f=c[d].split("=");Kt(f)&&(e.includes(f[0])?u.push(f[0]+"="+n):u.push(c[d]))}var p=l;return a!=null&&(p+="?"+u.join("&")),s!=null&&(p+="#"+s),p},Z0=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},uN=Dn("[AutoCapture]");function cw(t,e){return e.length>t?e.slice(0,t)+"...":e}function VU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!Dy(e));return e}function HU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};T1.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=cw(1024,F5(t)):s.$el_text=cw(1024,Ly(t)));var o=X0(t);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),Nt(t.attributes,function(u){var d;if((!D5(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(i==null||!i.includes(u.name))&&!e&&xd(u.value)&&(d=u.name,!cn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=u.value;u.name==="class"&&(f=l_(f).join(" ")),s["attr__"+u.name]=cw(1024,f)}});for(var a=1,l=1,c=t;c=VU(c);)a++,c.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function WU(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!Za(u,"body");)T5(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,f=[],p={},g=!1,m=!1;if(Nt(c,S=>{var _=O1(S);S.tagName.toLowerCase()==="a"&&(g=S.getAttribute("href"),g=_&&g&&xd(g)&&g),at(X0(S),"ph-no-capture")&&(m=!0),f.push(HU(S,s,o,a));var E=function(C){if(!O1(C))return{};var N={};return Nt(C.attributes,function(M){if(M.name&&M.name.indexOf("data-ph-capture-attribute")===0){var O=M.name.replace("data-ph-capture-attribute-",""),D=M.value;O&&D&&xd(D)&&(N[O]=D)}}),N}(S);fn(p,E)}),m)return{props:{},explicitNoCapture:m};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=F5(t):f[0].$el_text=Ly(t)),g){var v,y;f[0].attr__href=g;var w=(v=Sd(g))==null?void 0:v.host,x=q==null||(y=q.location)==null?void 0:y.host;w&&x&&w!==x&&(d=g)}return{props:fn({$event_type:r.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:FU(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(i=f[0])==null?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},p)}}let GU=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new z5,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,i=ln(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)==null?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)==null?void 0:n.map(r=>new RegExp(r)),i}$(){if(this.isBrowserSupported()){if(q&&Ce){var e=i=>{i=i||(q==null?void 0:q.event);try{this.k(i)}catch(r){uN.error("Failed to capture event",r)}};if(Qt(Ce,"submit",e,{capture:!0}),Qt(Ce,"change",e,{capture:!0}),Qt(Ce,"click",e,{capture:!0}),this.S.capture_copied_text){var n=i=>{i=i||(q==null?void 0:q.event),this.k(i,lw)};Qt(Ce,"copy",n,{capture:!0}),Qt(Ce,"cut",n,{capture:!0})}}}else uN.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[XA]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,i=[];return(n=this.m)==null||n.forEach(r=>{var s=Ce==null?void 0:Ce.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)==null?void 0:e.props[XA],r=this.o;if(Pl(r)&&!Xs(i)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var i,r=I5(e);R5(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===lw;if(r&&IU(r,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=WU(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===lw){var c,u=O5(q==null||(c=q.getSelection())==null?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Fr(Ce==null?void 0:Ce.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return oi(t)&&isFinite(t)&&Math.floor(t)===t});var dN="0123456789abcdef";let KU=class I1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new I1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+dN.charAt(this.bytes[n]>>>4)+dN.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new I1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},qU=class{constructor(){this.P=0,this.R=0,this.T=new YU}generate(){var e=this.generateOrAbort();if(ye(e)){this.P=0;var n=this.generateOrAbort();if(ye(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return KU.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var fN,U5=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};q&&!ye(q.crypto)&&crypto.getRandomValues&&(U5=t=>crypto.getRandomValues(t));let YU=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(U5(this.C),this.F=0),this.C[this.F++]}};var Fa=()=>XU().toString(),XU=()=>(fN||(fN=new qU)).generate(),gf="",JU=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function ZU(t,e){if(e){var n=function(r,s){if(s===void 0&&(s=Ce),gf)return gf;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Fa();!gf&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",gf=c)}return gf}(t);if(!n){var i=(r=>{var s=r.match(JU);return s?s[0]:""})(t);i!==n&&Ae.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var io={O:()=>!!Ce,A:function(t){Ae.error("cookieStore error: "+t)},D:function(t){if(Ce){try{for(var e=t+"=",n=Ce.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(io.D(t))||{}}catch{}return e},j:function(t,e,n,i,r){if(Ce)try{var s="",o="",a=ZU(Ce.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Ae.warn("cookieStore warning: large cookie, len="+c.length),Ce.cookie=c,c}catch{return}},N:function(t,e){try{io.j(t,"",-1,e)}catch{return}}},uw=null,Sn={O:function(){if(!Pl(uw))return uw;var t=!0;if(ye(q))t=!1;else try{var e="__mplssupport__";Sn.j(e,"xyz"),Sn.D(e)!=='"xyz"'&&(t=!1),Sn.N(e)}catch{t=!1}return t||Ae.error("localStorage unsupported; falling back to cookie store"),uw=t,t},A:function(t){Ae.error("localStorage error: "+t)},D:function(t){try{return q==null?void 0:q.localStorage.getItem(t)}catch(e){Sn.A(e)}return null},L:function(t){try{return JSON.parse(Sn.D(t))||{}}catch{}return null},j:function(t,e){try{q==null||q.localStorage.setItem(t,JSON.stringify(e))}catch(n){Sn.A(n)}},N:function(t){try{q==null||q.localStorage.removeItem(t)}catch(e){Sn.A(e)}}},QU=["distinct_id",G0,Wf,Y0,q0],Dm=Se({},Sn,{L:function(t){try{var e={};try{e=io.L(t)||{}}catch{}var n=fn(e,JSON.parse(Sn.D(t)||"{}"));return Sn.j(t,n),n}catch{}return null},j:function(t,e,n,i,r,s){try{Sn.j(t,e,void 0,void 0,s);var o={};QU.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&io.j(t,o,n,i,r,s)}catch(a){Sn.A(a)}},N:function(t,e){try{q==null||q.localStorage.removeItem(t),io.N(t,e)}catch(n){Sn.A(n)}}}),Lm={},eV={O:function(){return!0},A:function(t){Ae.error("memoryStorage error: "+t)},D:function(t){return Lm[t]||null},L:function(t){return Lm[t]||null},j:function(t,e){Lm[t]=e},N:function(t){delete Lm[t]}},Hl=null,Vn={O:function(){if(!Pl(Hl))return Hl;if(Hl=!0,ye(q))Hl=!1;else try{var t="__support__";Vn.j(t,"xyz"),Vn.D(t)!=='"xyz"'&&(Hl=!1),Vn.N(t)}catch{Hl=!1}return Hl},A:function(t){Ae.error("sessionStorage error: ",t)},D:function(t){try{return q==null?void 0:q.sessionStorage.getItem(t)}catch(e){Vn.A(e)}return null},L:function(t){try{return JSON.parse(Vn.D(t))||null}catch{}return null},j:function(t,e){try{q==null||q.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Vn.A(n)}},N:function(t){try{q==null||q.sessionStorage.removeItem(t)}catch(e){Vn.A(e)}}},ru=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let tV=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?ru.DENIED:this.q}isOptedOut(){return this.consent===ru.DENIED||this.consent===ru.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?ru.GRANTED:e==="0"?ru.DENIED:ru.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?Sn:io;var n=e==="localStorage"?io:Sn;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!A5([lr==null?void 0:lr.doNotTrack,lr==null?void 0:lr.msDoNotTrack,qe.doNotTrack],e=>at([!0,1,"1","yes"],e))}};var $m=Dn("[Dead Clicks]"),nV=()=>!0,iV=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(P5)),i=t.instance.config.capture_dead_clicks;return Xs(i)?i:n};let V5=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[P5]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,i;(n=qe.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(i=qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",r=>{r?$m.error("failed to load script",r):e()})}V(){var e;if(Ce){if(!this.G&&(e=qe.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=ln(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=qe.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(Ce),$m.info("starting...")}}else $m.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,$m.info("stopping..."))}};function cr(t,e,n,i,r){return e>n&&(Ae.warn("min cannot be greater than max."),e=n),oi(t)?t>n?(i&&Ae.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&Ae.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&Ae.warn(i+" must be a number. using max or fallback. max: "+n+", fallback: "+r),cr(r||n,e,n,i))}let H5=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var i=this.X(n)+this.Z;i>=this.tt?delete this.K[n]:this.it(n,i)})},this.X=n=>this.K[String(n)],this.it=(n,i)=>{this.K[String(n)]=i},this.consumeRateLimit=n=>{var i,r=(i=this.X(n))!==null&&i!==void 0?i:this.tt;if((r=Math.max(r-1,0))===0)return!0;this.it(n,r);var s,o=r===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=cr(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=cr(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=cr(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var Fm=Dn("[ExceptionAutocapture]");let rV=class{constructor(e){var n,i,r;this.nt=()=>{var s;if(q&&this.isEnabled&&(s=qe.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=qe.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=qe.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=qe.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(c){Fm.error("failed to start",c),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[JA]),this.S=this.vt(),this.ct=new H5({refillRate:(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&i!==void 0?i:1,bucketSize:(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&r!==void 0?r:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return ln(e)?n=Se({},n,e):(ye(e)?this.dt:e)&&(n=Se({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Fm.info("enabled"),this.J(this.nt))}J(e){var n,i;(n=qe.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(i=qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"exception-autocapture",r=>{if(r)return Fm.error("failed to load script",r);e()})}ht(){var e,n,i;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(i=this.ut)==null||i.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[JA]:this.dt}),this.startIfEnabled()}captureException(e){var n,i=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=i+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var r=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(r)?Fm.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function W5(t){return!ye(Event)&&G5(t,Event)}function G5(t,e){try{return t instanceof e}catch{return!1}}function K5(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return G5(t,Error)}}function c0(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function dw(t){return c0(t,"DOMError")}var hN=/\(error: (.*)\)/,pN=50,Pu="?";function fw(t,e,n,i){var r={platform:"web:javascript",filename:t,function:e==="<anonymous>"?Pu:e,in_app:!0};return ye(n)||(r.lineno=n),ye(i)||(r.colno=i),r}var sV=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,oV=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,aV=/\((\S*)(?::(\d+))(?::(\d+))\)/,lV=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,cV=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,uV=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return function(r,s){s===void 0&&(s=0);for(var o=[],a=r.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=hN.test(c)?c.replace(hN,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of i){var f=d(u);if(f){o.push(f);break}}if(o.length>=pN)break}}}return function(p){if(!p.length)return[];var g=Array.from(p);return g.reverse(),g.slice(0,pN).map(m=>Se({},m,{filename:m.filename||dV(g).filename,function:m.function||Pu}))}(o)}}([30,t=>{var e=sV.exec(t);if(e){var[,n,i,r]=e;return fw(n,Pu,+i,+r)}var s=oV.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=aV.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=gN(s[1]||Pu,s[2]);return fw(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=lV.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=cV.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var i=e[3],r=e[1]||Pu;return[r,i]=gN(r,i),fw(i,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function dV(t){return t[t.length-1]||{}}var Bm,mN,hw,gN=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,i=t.indexOf("safari-web-extension")!==-1;return n||i?[t.indexOf("@")!==-1?t.split("@")[0]:Pu,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},fV=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function u_(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",i=function(o){return o&&hV.test(o.message)?1:0}(t);try{var r=uV,s=function(o,a){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var d=Object.keys(u);return hw&&d.length===mN||(mN=d.length,hw=d.reduce((f,p)=>{Bm||(Bm={});var g=Bm[p];if(g)f[g[0]]=g[1];else for(var m=c(p),v=m.length-1;v>=0;v--){var y=m[v],w=y==null?void 0:y.filename,x=u[p];if(w&&x){f[w]=x,Bm[p]=[w,x];break}}return f},{})),hw}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(r(n,i),r);return s.slice(0,s.length-e)}catch{}return[]}var hV=/Minified React error #\d+;/i;function pV(t,e){var n,i,r=u_(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)!==null&&i!==void 0&&i;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:r,type:"raw"},mechanism:{handled:s,synthetic:o}}}function q5(t,e){var n=pV(t,e);return t.cause&&K5(t.cause)&&t.cause!==t?[n,...q5(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function pw(t,e){return{$exception_list:q5(t,e),$exception_level:"error"}}function mw(t,e){var n,i,r,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(r=e==null?void 0:e.defaultExceptionType)!==null&&r!==void 0?r:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=u_(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function mV(t){return cn(t)&&!w1(t)&&_U.indexOf(t)>=0}function gV(t,e){var n,i,r=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:W5(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(u,d){d===void 0&&(d=40);var f=Object.keys(u);if(f.sort(),!f.length)return"[object has no keys]";for(var p=f.length;p>0;p--){var g=f.slice(0,p).join(", ");if(!(g.length>d))return p===f.length||g.length<=d?g:g.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:r,synthetic:s}};if(e!=null&&e.syntheticException){var c=u_(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:mV(t.level)?t.level:"error"}}function vV(t,e){var{error:n,event:i}=t,r={$exception_list:[]},s=n||i;if(dw(s)||function(f){return c0(f,"DOMException")}(s)){var o=s;if(function(f){return"stack"in f}(s))r=pw(s,e);else{var a=o.name||(dw(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;r=mw(l,Se({},e,{overrideExceptionType:dw(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(r.$exception_DOMException_code=""+o.code),r}if(function(f){return c0(f,"ErrorEvent")}(s)&&s.error)return pw(s.error,e);if(K5(s))return pw(s,e);if(function(f){return c0(f,"Object")}(s)||W5(s))return gV(s,e);if(ye(n)&&cn(i)){var c="Error",u=i,d=i.match(fV);return d&&(c=d[1],u=d[2]),mw(u,Se({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return mw(s,e)}function vN(t,e,n){try{if(!(e in t))return()=>{};var i=t[e],r=n(i);return Fr(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=r,()=>{t[e]=i}}catch{return()=>{}}}let yV=class{constructor(e){var n;this._instance=e,this.ft=(q==null||(n=q.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Ae.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Ae.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(q&&q.history){var i=this;(e=q.history.pushState)!=null&&e.__posthog_wrapped__||vN(q.history,"pushState",r=>function(s,o,a){r.call(this,s,o,a),i._t("pushState")}),(n=q.history.replaceState)!=null&&n.__posthog_wrapped__||vN(q.history,"replaceState",r=>function(s,o,a){r.call(this,s,o,a),i._t("replaceState")}),this.bt()}}_t(e){try{var n,i=q==null||(n=q.location)==null?void 0:n.pathname;if(!i)return;i!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=i}catch(r){Ae.error("Error capturing "+e+" pageview",r)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};Qt(q,"popstate",e),this.gt=()=>{q&&q.removeEventListener("popstate",e)}}}};function Q0(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(ln(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))==null?void 0:e.length)||0}function j1(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[j1({size:Q0(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),j1({size:Q0(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var _o=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(_o||{}),ns=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(ns||{}),D1="[SessionRecording]",L1="redacted",zm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},bV=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],wV=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],xV=["/s/","/e/","/i/"];function yN(t,e,n,i){if(kt(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return cn(r)&&(r=parseInt(r)),r>n?D1+" "+i+" body too large to record ("+r+" bytes)":t}function bN(t,e){if(kt(t))return t;var n=t;return xd(n,!1)||(n=D1+" "+e+" body "+L1),Nt(wV,i=>{var r,s;(r=n)!=null&&r.length&&((s=n)==null?void 0:s.indexOf(i))!==-1&&(n=D1+" "+e+" body "+L1+" as might contain: "+i)}),n}var SV=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:zm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...zm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...zm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),f=>(f!=null&&f.requestBody&&(f.requestBody=yN(f.requestBody,f.requestHeaders,r,"Request")),f!=null&&f.responseBody&&(f.responseBody=yN(f.responseBody,f.responseHeaders,r,"Response")),f)),u=f=>{return c(((m,v)=>{var y,w=Sd(m.name),x=v.indexOf("http")===0?(y=Sd(v))==null?void 0:y.pathname:v;x==="/"&&(x="");var S=w==null?void 0:w.pathname.replace(x||"","");if(!(w&&S&&xV.some(_=>S.indexOf(_)===0)))return m})((g=(p=f).requestHeaders,kt(g)||Nt(Object.keys(g??{}),m=>{bV.includes(m.toLowerCase())&&(g[m]=L1)}),p),t.api_host));var p,g},d=Fr(t.session_recording.maskNetworkRequestFn);return d&&Fr(t.session_recording.maskCapturedNetworkRequestFn)&&Ae.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=f=>{var p=t.session_recording.maskNetworkRequestFn({url:f.name});return Se({},f,{name:p==null?void 0:p.url})}),s.maskRequestFn=Fr(t.session_recording.maskCapturedNetworkRequestFn)?f=>{var p,g=u(f);return g&&(p=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(g))!==null&&p!==void 0?p:void 0}:f=>function(p){if(!ye(p))return p.requestBody=bN(p.requestBody,"Request"),p.responseBody=bN(p.responseBody,"Response"),p}(u(f)),Se({},zm,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let kV=class{constructor(e,n){var i,r;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,c,u,d,f,p;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=s.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=s.texts)==null?void 0:d.length)!==null&&u!==void 0?u:0)+((f=(p=s.adds)==null?void 0:p.length)!==null&&f!==void 0?f:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var[u]=this.$t(c.id);return!this.ct.consumeRateLimit(u)&&c}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new H5({bucketSize:(i=this.rt.bucketSize)!==null&&i!==void 0?i:100,refillRate:(r=this.rt.refillRate)!==null&&r!==void 0?r:10,refillInterval:1e3,et:this.wt})}};var Br=Uint8Array,Vi=Uint16Array,kd=Uint32Array,d_=new Br([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),f_=new Br([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wN=new Br([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Y5=function(t,e){for(var n=new Vi(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new kd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},X5=Y5(d_,2),_V=X5[0],$1=X5[1];_V[28]=258,$1[258]=28;for(var xN=Y5(f_,0)[1],J5=new Vi(32768),Bt=0;Bt<32768;++Bt){var Wl=(43690&Bt)>>>1|(21845&Bt)<<1;Wl=(61680&(Wl=(52428&Wl)>>>2|(13107&Wl)<<2))>>>4|(3855&Wl)<<4,J5[Bt]=((65280&Wl)>>>8|(255&Wl)<<8)>>>1}var vh=function(t,e,n){for(var i=t.length,r=0,s=new Vi(e);r<i;++r)++s[t[r]-1];var o,a=new Vi(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new Vi(i),r=0;r<i;++r)o[r]=J5[a[t[r]-1]++]>>>15-t[r];return o},Pc=new Br(288);for(Bt=0;Bt<144;++Bt)Pc[Bt]=8;for(Bt=144;Bt<256;++Bt)Pc[Bt]=9;for(Bt=256;Bt<280;++Bt)Pc[Bt]=7;for(Bt=280;Bt<288;++Bt)Pc[Bt]=8;var ev=new Br(32);for(Bt=0;Bt<32;++Bt)ev[Bt]=5;var CV=vh(Pc,9),EV=vh(ev,5),Z5=function(t){return(t/8>>0)+(7&t&&1)},Q5=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Vi?Vi:t instanceof kd?kd:Br)(n-e);return i.set(t.subarray(e,n)),i},bo=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},vf=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},gw=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Br(0),0];if(r==1){var o=new Br(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,E){return _.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var p=new Vi(f+1),g=F1(n[u-1],p,0);if(g>e){i=0;var m=0,v=g-e,y=1<<v;for(s.sort(function(_,E){return p[E.s]-p[_.s]||_.f-E.f});i<r;++i){var w=s[i].s;if(!(p[w]>e))break;m+=y-(1<<g-p[w]),p[w]=e}for(m>>>=v;m>0;){var x=s[i].s;p[x]<e?m-=1<<e-p[x]++-1:++i}for(;i>=0&&m;--i){var S=s[i].s;p[S]==e&&(--p[S],++m)}g=e}return[new Br(p),g]},F1=function(t,e,n){return t.s==-1?Math.max(F1(t.l,e,n+1),F1(t.r,e,n+1)):e[t.s]=n},SN=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Vi(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},yf=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},B1=function(t,e,n){var i=n.length,r=Z5(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},kN=function(t,e,n,i,r,s,o,a,l,c,u){bo(e,u++,n),++r[256];for(var d=gw(r,15),f=d[0],p=d[1],g=gw(s,15),m=g[0],v=g[1],y=SN(f),w=y[0],x=y[1],S=SN(m),_=S[0],E=S[1],C=new Vi(19),N=0;N<w.length;++N)C[31&w[N]]++;for(N=0;N<_.length;++N)C[31&_[N]]++;for(var M=gw(C,7),O=M[0],D=M[1],j=19;j>4&&!O[wN[j-1]];--j);var K,$,G,X,Z=c+5<<3,V=yf(r,Pc)+yf(s,ev)+o,B=yf(r,f)+yf(s,m)+o+14+3*j+yf(C,O)+(2*C[16]+3*C[17]+7*C[18]);if(Z<=V&&Z<=B)return B1(e,u,t.subarray(l,l+c));if(bo(e,u,1+(B<V)),u+=2,B<V){K=vh(f,p),$=f,G=vh(m,v),X=m;var ie=vh(O,D);for(bo(e,u,x-257),bo(e,u+5,E-1),bo(e,u+10,j-4),u+=14,N=0;N<j;++N)bo(e,u+3*N,O[wN[N]]);u+=3*j;for(var pe=[w,_],J=0;J<2;++J){var le=pe[J];for(N=0;N<le.length;++N){var F=31&le[N];bo(e,u,ie[F]),u+=O[F],F>15&&(bo(e,u,le[N]>>>5&127),u+=le[N]>>>12)}}}else K=CV,$=Pc,G=EV,X=ev;for(N=0;N<a;++N)if(i[N]>255){F=i[N]>>>18&31,vf(e,u,K[F+257]),u+=$[F+257],F>7&&(bo(e,u,i[N]>>>23&31),u+=d_[F]);var L=31&i[N];vf(e,u,G[L]),u+=X[L],L>3&&(vf(e,u,i[N]>>>5&8191),u+=f_[L])}else vf(e,u,K[i[N]]),u+=$[i[N]];return vf(e,u,K[256]),u+$[256]},AV=new kd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),NV=function(){for(var t=new kd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),PV=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=NV[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},MV=function(t,e,n,i,r){return function(s,o,a,l,c,u){var d=s.length,f=new Br(l+d+5*(1+Math.floor(d/7e3))+c),p=f.subarray(l,f.length-c),g=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var v=m+65535;v<d?g=B1(p,g,s.subarray(m,v)):(p[m]=u,g=B1(p,g,s.subarray(m,d)))}else{for(var y=AV[o-1],w=y>>>13,x=8191&y,S=(1<<a)-1,_=new Vi(32768),E=new Vi(S+1),C=Math.ceil(a/3),N=2*C,M=function(Ve){return(s[Ve]^s[Ve+1]<<C^s[Ve+2]<<N)&S},O=new kd(25e3),D=new Vi(288),j=new Vi(32),K=0,$=0,G=(m=0,0),X=0,Z=0;m<d;++m){var V=M(m),B=32767&m,ie=E[V];if(_[B]=ie,E[V]=B,X<=m){var pe=d-m;if((K>7e3||G>24576)&&pe>423){g=kN(s,p,0,O,D,j,$,G,Z,m-Z,g),G=K=$=0,Z=m;for(var J=0;J<286;++J)D[J]=0;for(J=0;J<30;++J)j[J]=0}var le=2,F=0,L=x,U=B-ie&32767;if(pe>2&&V==M(m-U))for(var k=Math.min(w,pe)-1,P=Math.min(32767,m),I=Math.min(258,pe);U<=P&&--L&&B!=ie;){if(s[m+le]==s[m+le-U]){for(var T=0;T<I&&s[m+T]==s[m+T-U];++T);if(T>le){if(le=T,F=U,T>k)break;var Y=Math.min(U,T-2),W=0;for(J=0;J<Y;++J){var ne=m-U+J+32768&32767,Q=ne-_[ne]+32768&32767;Q>W&&(W=Q,ie=ne)}}}U+=(B=ie)-(ie=_[B])+32768&32767}if(F){O[G++]=268435456|$1[le]<<18|xN[F];var Pe=31&$1[le],ze=31&xN[F];$+=d_[Pe]+f_[ze],++D[257+Pe],++j[ze],X=m+le,++K}else O[G++]=s[m],++D[s[m]]}}g=kN(s,p,u,O,D,j,$,G,Z,m-Z,g)}return Q5(f,0,l+Z5(g)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!0)},z1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},RV=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&z1(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},TV=function(t){return 10+(t.filename&&t.filename.length+1||0)};function eO(t,e){e===void 0&&(e={});var n=PV(),i=t.length;n.p(t);var r=MV(t,e,TV(e),8),s=r.length;return RV(r,e),z1(r,s-8,n.d()),z1(r,s-4,i),r}function tO(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Br(t.length+(t.length>>>1)),r=0,s=function(c){i[r++]=c},o=0;o<n;++o){if(r+5>i.length){var a=new Br(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return Q5(i,0,r)}function OV(t,e){return function(n){for(var i=0,r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;return Math.abs(i)}(t)%100<cr(100*e,0,100)}var dl="disabled",h_="sampled",tv="active",Mc="buffering",p_="paused",m_="trigger",ro=m_+"_activated",ci=m_+"_pending",fo=m_+"_"+dl;function _N(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class nO{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(i=>i.triggerStatus(e));return n.includes(ro)?ro:n.includes(ci)?ci:fo}stop(){this.xt.forEach(e=>e.stop())}}class iO{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var i of this.xt)n.add(i.triggerStatus(e));switch(n.delete(fo),n.size){case 0:return fo;case 1:return Array.from(n)[0];default:return ci}}stop(){this.xt.forEach(e=>e.stop())}}class IV{triggerStatus(){return ci}stop(){}}class jV{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,i;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((i=e.sessionRecording)==null?void 0:i.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?fo:((n=this._instance)==null?void 0:n.get_property(_1))===e?ro:ci}triggerStatus(e){var n=this.Pt(e),i=n===ro?ro:n===ci?ci:fo;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,n,i){if(q!==void 0&&q.location.href){var r=q.location.href,s=this.urlBlocked,o=_N(r,this.It);s&&o||(o&&!s?e():!o&&s&&n(),_N(r,this.Et)&&i("url"))}}stop(){}}class DV{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=ci;return kt(this.linkedFlag)&&(e=fo),this.linkedFlagSeen&&(e=ro),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var i;if(this.linkedFlag=((i=e.sessionRecording)==null?void 0:i.linkedFlag)||null,!kt(this.linkedFlag)&&!this.linkedFlagSeen){var r=cn(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=cn(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(ln(a)&&r in a){var c=a[r];l=Xs(c)?c===!0:s?c===s:!!c}this.linkedFlagSeen=l,l&&n(r,s)})}}stop(){this.Rt()}}let LV=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?fo:((n=this._instance)==null?void 0:n.get_property(C1))===e?ro:ci}triggerStatus(e){var n=this.Mt(e),i=n===ro?ro:n===ci?ci:fo;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}};function $V(t){return t.isRecordingEnabled?Mc:dl}function FV(t){if(!t.receivedFlags)return Mc;if(!t.isRecordingEnabled)return dl;if(t.urlTriggerMatching.urlBlocked)return p_;var e=t.isSampled===!0,n=new nO([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?h_:n===ro?tv:n===ci?Mc:t.isSampled===!1?dl:tv}function BV(t){if(!t.receivedFlags)return Mc;if(!t.isRecordingEnabled)return dl;if(t.urlTriggerMatching.urlBlocked)return p_;var e=new iO([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==fo,i=Xs(t.isSampled);return n&&e===ci?Mc:n&&e===fo||i&&!t.isSampled?dl:t.isSampled===!0?h_:tv}var Kf="[SessionRecording]",ti=Dn(Kf);function Um(){var t;return qe==null||(t=qe.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var zV=3e5,UV=[ns.MouseMove,ns.MouseInteraction,ns.Scroll,ns.ViewportResize,ns.Input,ns.TouchMove,ns.MediaInteraction,ns.Drag],CN=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function Gl(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];i+=String.fromCharCode(s)}return i}(eO(tO(JSON.stringify(t))))}function EN(t){return t.type===_o.Custom&&t.data.tag==="sessionIdle"}class VV{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(Kf+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===ci?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:zV}get jt(){var e=this._instance.get_property(Wf);return Xs(e)?e:null}get Nt(){var e,n,i=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.At.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get zt(){var e=!!this._instance.get_property(k1),n=!this._instance.config.disable_session_recording;return q&&e&&n}get Ut(){var e=!!this._instance.get_property(eN),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,i,r,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(iN),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var f=parseFloat(d);d=isNaN(f)?.4:f}return{enabled:c,fps:cr(u,0,12,"canvas recording fps",4),quality:cr(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,i=this._instance.get_property(tN),r={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=ln(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(Xs(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,i,r,s,o,a=this._instance.get_property(nN),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(i=this._instance.config.session_recording)==null?void 0:i.blockSelector},c=(r=l==null?void 0:l.maskAllInputs)!==null&&r!==void 0?r:a==null?void 0:a.maskAllInputs,u=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return ye(c)&&ye(u)&&ye(d)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:d}}get Wt(){var e=this._instance.get_property(rN);return oi(e)?e:null}get Gt(){var e=this._instance.get_property(sN);return oi(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):Mc}constructor(e){if(this.Vt=$V,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new IV,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(Ce!=null&&Ce.visibilityState){var r="window "+Ce.visibilityState;this.ui(r,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw ti.error("started without valid sessionManager"),new Error(Kf+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Kf+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new DV(this._instance),this.Kt=new jV(this._instance),this.Yt=new LV(this._instance);var{sessionId:n,windowId:i}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=i,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&ti.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),Qt(q,"beforeunload",this.oi),Qt(q,"offline",this.li),Qt(q,"online",this.hi),Qt(q,"visibilitychange",this.di),this.mi(),this.bi(),kt(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var i=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!i)return;this.ui("$pageview",{href:i})}}catch(r){ti.error("Could not add $pageview to rrweb session",r)}})),this.ei||(this.ei=this.At.onSessionId((n,i,r)=>{var s,o;r&&(this.ui("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(C1),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(_1))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,q==null||q.removeEventListener("beforeunload",this.oi),q==null||q.removeEventListener("offline",this.li),q==null||q.removeEventListener("online",this.hi),q==null||q.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(i=this.ei)==null||i.call(this),this.ei=void 0,(r=this.si)==null||r.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),ti.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(Wf)}$i(e){var n,i=this.Ct!==e,r=this.Wt;if(oi(r)){var s=this.jt,o=i||!Xs(s),a=o?OV(e,r):s;o&&(a?this.ki(h_):ti.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:r,isSampled:a})),(n=this._instance.persistence)==null||n.register({[Wf]:a})}else this.Si()}onRemoteConfig(e){var n,i,r,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((i=e.sessionRecording)==null?void 0:i.triggerMatchType)==="any"?(this.Vt=FV,this.Lt=new nO([this.Yt,this.Kt])):(this.Vt=BV,this.Lt=new iO([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(r=e.sessionRecording)==null?void 0:r.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){oi(this.Wt)&&kt(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,i=this._instance.persistence,r=()=>{var s,o,a,l,c,u,d,f,p,g=(s=e.sessionRecording)==null?void 0:s.sampleRate,m=kt(g)?null:parseFloat(g);kt(m)&&this.Si();var v=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;i.register({[k1]:!!e.sessionRecording,[eN]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[tN]:Se({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[nN]:(c=e.sessionRecording)==null?void 0:c.masking,[iN]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(f=e.sessionRecording)==null?void 0:f.canvasQuality},[rN]:m,[sN]:ye(v)?null:v,[oN]:(p=e.sessionRecording)==null?void 0:p.scriptConfig})};r(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(r)}}log(e,n){var i;n===void 0&&(n="log"),(i=this._instance.sessionRecording)==null||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!ye(Object.assign)&&!ye(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),Um()?this.Ei():(n=qe.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,i=>{if(i)return ti.error("could not load recorder",i);this.Ei()}),ti.info("starting"),this.status===tv&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(oN))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&UV.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var i=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var r=this.Zt==="unknown";this.Zt=!1,r||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):ti.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi(CN(()=>Um().addCustomEvent(e,n)))}Ci(){return this.Mi(CN(()=>Um().takeFullSnapshot()))}Ei(){var e,n,i,r,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=Se({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(i=this.Ht.maskTextSelector)!==null&&i!==void 0?i:void 0,s.blockSelector=(r=this.Ht.blockSelector)!==null&&r!==void 0?r:void 0);var c=Um();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new kV(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,f)=>{var p="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";ti.info(p,{node:f}),this.log(Kf+" "+p,"warn")}});var u=this.Oi();this.ci=c(Se({emit:d=>{this.onRRwebEmit(d)},plugins:u},s)),this.ti=Date.now(),this.Zt=Xs(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:u.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else ti.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,i=[],r=(e=qe.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;r&&this.Ut&&i.push(r());var s=(n=qe.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&Fr(s)&&(!zU.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(s(SV(this._instance.config,this.Bt))):ti.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var n;if(this.Ai(),e&&ln(e)){if(e.type===_o.Meta){var i=this.yi(e.data.href);if(this.Di=i,!i)return;e.data.href=i}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),f=>this.zi(f)),!this.Kt.urlBlocked||(r=e).type===_o.Custom&&r.data.tag==="recording paused"){var r;e.type===_o.FullSnapshot&&this.Ti(),e.type===_o.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===ci&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(f){var p=f;if(p&&ln(p)&&p.type===6&&ln(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var g=[],m=0;m<p.data.payload.payload.length;m++)p.data.payload.payload[m]&&p.data.payload.payload[m].length>2e3?g.push(p.data.payload.payload[m].slice(0,2e3)+"...[truncated]"):g.push(p.data.payload.payload[m]);return p.data.payload.payload=g,f}return f}(s);if(this.Ri(o),this.Zt!==!0||EN(o)){if(EN(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var u=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(f){if(Q0(f)<1024)return f;try{if(f.type===_o.FullSnapshot)return Se({},f,{data:Gl(f.data),cv:"2024-10"});if(f.type===_o.IncrementalSnapshot&&f.data.source===ns.Mutation)return Se({},f,{cv:"2024-10",data:Se({},f.data,{texts:Gl(f.data.texts),attributes:Gl(f.data.attributes),removes:Gl(f.data.removes),adds:Gl(f.data.adds)})});if(f.type===_o.IncrementalSnapshot&&f.data.source===ns.StyleSheetRule)return Se({},f,{cv:"2024-10",data:Se({},f.data,{adds:f.data.adds?Gl(f.data.adds):void 0,removes:f.data.removes?Gl(f.data.removes):void 0})})}catch(p){ti.error("could not compress event - will use uncompressed event",p)}return f}(o):o,d={$snapshot_bytes:Q0(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==dl?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&q){var e=this.yi(q.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))==null?void 0:i.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,i=oi(n)&&n>=0,r=oi(e)&&i&&n<e;return this.status===Mc||this.status===p_||this.status===dl||r?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&j1(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:No.LIB_VERSION})}),this.pi())}Ui(e){var n,i=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+i>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===ci&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?_1:C1]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),ti.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),ti.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&kt(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){ti.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[Wf]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),ti.info(e.replace("_"," "),n),at(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var vw=Dn("[SegmentIntegration]");function HV(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var c=()=>l.anonymousId()||Fa();i.config.get_device_id=c,l.id()&&(i.register({distinct_id:l.id(),$device_id:c()}),i.persistence.set_property(ko,"identified")),r()},a=s.user();"then"in a&&Fr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||vw.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(vw.info("No userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(vw.info("UserId set, identifying with PostHog"),i.identify(s.event.userId));var a=i.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}var rO="posthog-js";function sO(t,e){var{organization:n,projectId:i,prefix:r,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,u,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var f=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=f,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((a=o.exception)==null?void 0:a.values)||[],g=p.map(v=>Se({},v,{stacktrace:v.stacktrace?Se({},v.stacktrace,{type:"raw",frames:(v.stacktrace.frames||[]).map(y=>Se({},y,{platform:"web:javascript"}))}):void 0})),m={$exception_message:((l=p[0])==null?void 0:l.value)||o.message,$exception_type:(c=p[0])==null?void 0:c.type,$exception_personURL:f,$exception_level:o.level,$exception_list:g,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&i&&(m.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+o.event_id),t.exceptions.sendExceptionEvent(m),o}}class WV{constructor(e,n,i,r,s){this.name=rO,this.setupOnce=function(o){o(sO(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var GV=q!=null&&q.location?Z0(q.location.hash,"__posthog")||Z0(location.hash,"state"):null,AN="_postHogToolbarParams",NN=Dn("[Toolbar]"),wa=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(wa||{});class KV{constructor(e){this.instance=e}Hi(e){qe.ph_toolbar_state=e}Wi(){var e;return(e=qe.ph_toolbar_state)!==null&&e!==void 0?e:wa.UNINITIALIZED}maybeLoadToolbar(e,n,i){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),!q||!Ce)return!1;e=e??q.location,i=i??q.history;try{if(!n){try{q.localStorage.setItem("test","test"),q.localStorage.removeItem("test")}catch{return!1}n=q==null?void 0:q.localStorage}var r,s=GV||Z0(e.hash,"__posthog")||Z0(e.hash,"state"),o=s?YA(()=>JSON.parse(atob(decodeURIComponent(s))))||YA(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((r=o).source="url",r&&Object.keys(r).length>0&&(o.desiredHash?e.hash=o.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(n.getItem(AN)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch{return!1}}Gi(e){var n=qe.ph_load_toolbar||qe.ph_load_editor;!kt(n)&&Fr(n)?n(e,this.instance):NN.warn("No toolbar load function found")}loadToolbar(e){var n=!(Ce==null||!Ce.getElementById(M5));if(!q||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=Se({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(q.localStorage.setItem(AN,JSON.stringify(Se({},r,{source:void 0}))),this.Wi()===wa.LOADED)this.Gi(r);else if(this.Wi()===wa.UNINITIALIZED){var s;this.Hi(wa.LOADING),(s=qe.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return NN.error("[Toolbar] Failed to load",o),void this.Hi(wa.UNINITIALIZED);this.Hi(wa.LOADED),this.Gi(r)}),Qt(q,"turbolinks:load",()=>{this.Hi(wa.UNINITIALIZED),this.loadToolbar(r)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,i){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),this.maybeLoadToolbar(e,n,i)}}var qV=Dn("[TracingHeaders]");class YV{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,i;ye(this.Vi)&&((n=qe.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),ye(this.Ki)&&((i=qe.__PosthogExtensions__)==null||(i=i.tracingHeadersPatchFns)==null||i._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,i;(n=qe.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(i=qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"tracing-headers",r=>{if(r)return qV.error("failed to load script",r);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var ha=Dn("[Web Vitals]"),PN=9e5;class XV{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((i,r)=>Se({},i,{["$web_vitals_"+r.name+"_event"]:Se({},r),["$web_vitals_"+r.name+"_value"]:r.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=i=>{var r,s=(r=this._instance.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0);if(ye(s))ha.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();ye(o)||(kt(i==null?void 0:i.name)||kt(i==null?void 0:i.value)?ha.error("Invalid metric received",i):this.ie&&i.value>=this.ie?ha.error("Ignoring metric with value >= "+this.ie,i):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),ye(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=ye(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.C.metrics.push(Se({},i,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var i,r,s,o,a=qe.__PosthogExtensions__;ye(a)||ye(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):ha.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[ZA]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=ln(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return ye(i)?((n=this._instance.persistence)==null?void 0:n.props[QA])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(ln(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=ln(this._instance.config.capture_performance)&&oi(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:PN;return 0<e&&e<=6e4?PN:e}get isEnabled(){var e=$i==null?void 0:$i.protocol;if(e!=="http:"&&e!=="https:")return ha.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=ln(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Xs(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Xs(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(ha.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=ln(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=ln(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[ZA]:n}),this._instance.persistence.register({[QA]:i})),this.Yi=n,this.startIfEnabled()}J(e){var n,i;(n=qe.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(i=qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"web-vitals",r=>{r?ha.error("failed to load script",r):e()})}te(){var e=q?q.location.href:void 0;return e||ha.error("Could not determine current URL"),e}}var JV=Dn("[Heatmaps]");function MN(t){return ln(t)&&"clientX"in t&&"clientY"in t&&oi(t.clientX)&&oi(t.clientY)}class ZV{constructor(e){var n;this.rageclicks=new z5,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[x1])}get flushIntervalMilliseconds(){var e=5e3;return ln(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return ye(this.instance.config.capture_heatmaps)?ye(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;JV.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[x1]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){q&&Ce&&(Qt(q,"beforeunload",this.se.bind(this)),Qt(Ce,"click",e=>this.ae(e||(q==null?void 0:q.event)),{capture:!0}),Qt(Ce,"mousemove",e=>this.le(e||(q==null?void 0:q.event)),{capture:!0}),this.ne=new V5(this.instance,nV,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&Dy(u)&&!Za(u,"body");){if(u===c)return!1;if(at(l,q==null?void 0:q.getComputedStyle(u).position))return!0;u=j5(u)}return!1}(I5(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}ae(e,n){var i;if(n===void 0&&(n="click"),!aN(e.target)&&MN(e)){var r=this.ue(e,n);(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(Se({},r,{type:"rageclick"})),this.he(r)}}le(e){!aN(e.target)&&MN(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(q){var n=q.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!Au(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class QV{constructor(e){this._instance=e}doPageView(e,n){var i,r=this.ve(e,n);return this.ce={pathname:(i=q==null?void 0:q.location.pathname)!==null&&i!==void 0?i:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var i=this.ce;if(!i)return{$pageview_id:n};var r={$pageview_id:n,$prev_pageview_id:i.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=s;if(!(ye(o)||ye(a)||ye(l)||ye(c)||ye(u)||ye(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d);var f=o<=1?1:cr(a/o,0,1),p=o<=1?1:cr(l/o,0,1),g=c<=1?1:cr(u/c,0,1),m=c<=1?1:cr(d/c,0,1);r=fn(r,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:g,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:m})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var eH=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Pl(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},tH=!!y1||!!v1,RN="text/plain",nv=(t,e)=>{var[n,i]=t.split("?"),r=Se({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=UU(r);return n+"?"+(s=s?(i?i+"&":"")+s:i)},qf=(t,e)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,e),yw=t=>{var{data:e,compression:n}=t;if(e){if(n===zo.GZipJS){var i=eO(tO(qf(e)),{mtime:0}),r=new Blob([i],{type:RN});return{contentType:RN,body:r,estimatedSize:r.size}}if(n===zo.Base64){var s=function(l){var c,u,d,f,p,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,v=0,y="",w=[];if(!l)return l;l=eH(l);do c=(p=l.charCodeAt(m++)<<16|l.charCodeAt(m++)<<8|l.charCodeAt(m++))>>18&63,u=p>>12&63,d=p>>6&63,f=63&p,w[v++]=g.charAt(c)+g.charAt(u)+g.charAt(d)+g.charAt(f);while(m<l.length);switch(y=w.join(""),l.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"="}return y}(qf(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:qf(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=qf(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},yh=[];v1&&yh.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=yw(t))!==null&&e!==void 0?e:{},o=new Headers;Nt(t.headers,function(u,d){o.append(d,u)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(KA){var c=new KA;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}v1(a,Se({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var f={statusCode:u.status,text:d};if(u.status===200)try{f.json=JSON.parse(d)}catch(p){Ae.error(p)}t.callback==null||t.callback(f)})).catch(u=>{Ae.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),y1&&yh.push({transport:"XHR",method:t=>{var e,n=new y1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=yw(t))!==null&&e!==void 0?e:{};Nt(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(r)}}),lr!=null&&lr.sendBeacon&&yh.push({transport:"sendBeacon",method:t=>{var e=nv(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=yw(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;lr.sendBeacon(e,s)}catch{}}});var _d=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function TN(t,e,n){return qf({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var nH={exact:(t,e)=>e.some(n=>t.some(i=>n===i)),is_not:(t,e)=>e.every(n=>t.every(i=>n!==i)),regex:(t,e)=>e.some(n=>t.some(i=>_d(n,i))),not_regex:(t,e)=>e.every(n=>t.every(i=>!_d(n,i))),icontains:(t,e)=>e.map(Vm).some(n=>t.map(Vm).some(i=>n.includes(i))),not_icontains:(t,e)=>e.map(Vm).every(n=>t.map(Vm).every(i=>!n.includes(i)))},Vm=t=>t.toLowerCase(),iH=Dn("[Error tracking]");class rH{constructor(e){var n,i;this.fe=[],this._instance=e,this.fe=(n=(i=this._instance.persistence)==null?void 0:i.get_property(S1))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,i,r=(n=(i=e.errorTracking)==null?void 0:i.suppressionRules)!==null&&n!==void 0?n:[];this.fe=r,this._instance.persistence&&this._instance.persistence.register({[S1]:this.fe})}sendExceptionEvent(e){this.pe(e)?iH.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!Kt(n)||n.length===0)return!1;var i=n.reduce((r,s)=>{var{type:o,value:a}=s;return cn(o)&&o.length>0&&r.$exception_types.push(o),cn(a)&&a.length>0&&r.$exception_values.push(a),r},{$exception_types:[],$exception_values:[]});return this.fe.some(r=>{var s=r.values.map(o=>{var a,l=nH[o.operator],c=Kt(o.value)?o.value:[o.value],u=(a=i[o.key])!==null&&a!==void 0?a:[];return c.length>0&&l(c,u)});return r.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var zr="Mobile",iv="iOS",Js="Android",Wh="Tablet",oO=Js+" "+Wh,aO="iPad",lO="Apple",cO=lO+" Watch",Gh="Safari",Cd="BlackBerry",uO="Samsung",dO=uO+"Browser",fO=uO+" Internet",Rc="Chrome",sH=Rc+" OS",hO=Rc+" "+iv,g_="Internet Explorer",pO=g_+" "+zr,v_="Opera",oH=v_+" Mini",y_="Edge",mO="Microsoft "+y_,Yu="Firefox",gO=Yu+" "+iv,Kh="Nintendo",qh="PlayStation",Xu="Xbox",vO=Js+" "+zr,yO=zr+" "+Gh,Yf="Windows",U1=Yf+" Phone",ON="Nokia",V1="Ouya",bO="Generic",aH=bO+" "+zr.toLowerCase(),wO=bO+" "+Wh.toLowerCase(),H1="Konqueror",fi="(\\d+(\\.\\d+)?)",bw=new RegExp("Version/"+fi),lH=new RegExp(Xu,"i"),cH=new RegExp(qh+" \\w+","i"),uH=new RegExp(Kh+" \\w+","i"),b_=new RegExp(Cd+"|PlayBook|BB10","i"),dH={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},fH=(t,e)=>e&&at(e,lO)||function(n){return at(n,Gh)&&!at(n,Rc)&&!at(n,Js)}(t),xO=function(t,e){return e=e||"",at(t," OPR/")&&at(t,"Mini")?oH:at(t," OPR/")?v_:b_.test(t)?Cd:at(t,"IE"+zr)||at(t,"WPDesktop")?pO:at(t,dO)?fO:at(t,y_)||at(t,"Edg/")?mO:at(t,"FBIOS")?"Facebook "+zr:at(t,"UCWEB")||at(t,"UCBrowser")?"UC Browser":at(t,"CriOS")?hO:at(t,"CrMo")||at(t,Rc)?Rc:at(t,Js)&&at(t,Gh)?vO:at(t,"FxiOS")?gO:at(t.toLowerCase(),H1.toLowerCase())?H1:fH(t,e)?at(t,zr)?yO:Gh:at(t,Yu)?Yu:at(t,"MSIE")||at(t,"Trident/")?g_:at(t,"Gecko")?Yu:""},hH={[pO]:[new RegExp("rv:"+fi)],[mO]:[new RegExp(y_+"?\\/"+fi)],[Rc]:[new RegExp("("+Rc+"|CrMo)\\/"+fi)],[hO]:[new RegExp("CriOS\\/"+fi)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+fi)],[Gh]:[bw],[yO]:[bw],[v_]:[new RegExp("(Opera|OPR)\\/"+fi)],[Yu]:[new RegExp(Yu+"\\/"+fi)],[gO]:[new RegExp("FxiOS\\/"+fi)],[H1]:[new RegExp("Konqueror[:/]?"+fi,"i")],[Cd]:[new RegExp(Cd+" "+fi),bw],[vO]:[new RegExp("android\\s"+fi,"i")],[fO]:[new RegExp(dO+"\\/"+fi)],[g_]:[new RegExp("(rv:|MSIE )"+fi)],Mozilla:[new RegExp("rv:"+fi)]},pH=function(t,e){var n=xO(t,e),i=hH[n];if(ye(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},IN=[[new RegExp(Xu+"; "+Xu+" (.*?)[);]","i"),t=>[Xu,t&&t[1]||""]],[new RegExp(Kh,"i"),[Kh,""]],[new RegExp(qh,"i"),[qh,""]],[b_,[Cd,""]],[new RegExp(Yf,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[U1,""];if(new RegExp(zr).test(e)&&!/IEMobile\b/.test(e))return[Yf+" "+zr,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=dH[i]||"";return/arm/i.test(e)&&(r="RT"),[Yf,r]}return[Yf,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[iv,e.join(".")]}return[iv,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=ye(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Js+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Js+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Js,e.join(".")]}return[Js,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[sH,""]],[/Linux|debian/i,["Linux",""]]],jN=function(t){return uH.test(t)?Kh:cH.test(t)?qh:lH.test(t)?Xu:new RegExp(V1,"i").test(t)?V1:new RegExp("("+U1+"|WPDesktop)","i").test(t)?U1:/iPad/.test(t)?aO:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?cO:b_.test(t)?Cd:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(ON,"i").test(t)?ON:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(zr).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Js:oO:Js:new RegExp("(pda|"+zr+")","i").test(t)?aH:new RegExp(Wh,"i").test(t)&&!new RegExp(Wh+" pc","i").test(t)?wO:""},Hm="https?://(.*)",$y=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],mH=jy(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],$y),w_="<masked>",gH=["li_fat_id"];function SO(t,e,n){if(!Ce)return{};var i,r=e?jy([],$y,n||[]):[],s=kO(c_(Ce.URL,r,w_),t),o=(i={},Nt(gH,function(a){var l=io.D(a);i[a]=l||null}),i);return fn(o,s)}function kO(t,e){var n=mH.concat(e||[]),i={};return Nt(n,function(r){var s=J0(t,r);i[r]=s||null}),i}function _O(t){var e=function(s){return s?s.search(Hm+"google.([^/?]*)")===0?"google":s.search(Hm+"bing.com")===0?"bing":s.search(Hm+"yahoo.com")===0?"yahoo":s.search(Hm+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",i={};if(!Pl(e)){i.$search_engine=e;var r=Ce?J0(Ce.referrer,n):"";r.length&&(i.ph_keyword=r)}return i}function DN(){return navigator.language||navigator.userLanguage}function CO(){return(Ce==null?void 0:Ce.referrer)||"$direct"}function EO(t,e){var n=t?jy([],$y,e||[]):[],i=$i==null?void 0:$i.href.substring(0,1e3);return{r:CO().substring(0,1e3),u:i?c_(i,n,w_):void 0}}function AO(t){var e,{r:n,u:i}=t,r={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=Sd(n))==null?void 0:e.host};if(i){r.$current_url=i;var s=Sd(i);r.$host=s==null?void 0:s.host,r.$pathname=s==null?void 0:s.pathname;var o=kO(i);fn(r,o)}if(n){var a=_O(n);fn(r,a)}return r}function NO(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function vH(){try{return new Date().getTimezoneOffset()}catch{return}}function yH(t,e){if(!ji)return{};var n,i,r,s=t?jy([],$y,e||[]):[],[o,a]=function(l){for(var c=0;c<IN.length;c++){var[u,d]=IN[c],f=u.exec(l),p=f&&(Fr(d)?d(f,l):d);if(p)return p}return["",""]}(ji);return fn(a_({$os:o,$os_version:a,$browser:xO(ji,navigator.vendor),$device:jN(ji),$device_type:(i=ji,r=jN(i),r===aO||r===oO||r==="Kobo"||r==="Kindle Fire"||r===wO?Wh:r===Kh||r===Xu||r===qh||r===V1?"Console":r===cO?"Wearable":r?zr:"Desktop"),$timezone:NO(),$timezone_offset:vH()}),{$current_url:c_($i==null?void 0:$i.href,s,w_),$host:$i==null?void 0:$i.host,$pathname:$i==null?void 0:$i.pathname,$raw_user_agent:ji.length>1e3?ji.substring(0,997)+"...":ji,$browser_version:pH(ji,navigator.vendor),$browser_language:DN(),$browser_language_prefix:(n=DN(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:q==null?void 0:q.screen.height,$screen_width:q==null?void 0:q.screen.width,$viewport_height:q==null?void 0:q.innerHeight,$viewport_width:q==null?void 0:q.innerWidth,$lib:"web",$lib_version:No.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Rs=Dn("[FeatureFlags]"),ww="$active_feature_flags",su="$override_feature_flags",LN="$feature_flag_payloads",bf="$override_feature_flag_payloads",$N="$feature_flag_request_id",FN=t=>{var e={};for(var[n,i]of a0(t||{}))i&&(e[n]=i);return e},bH=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var i;return[n,(i=e[n].variant)!==null&&i!==void 0?i:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var i;return(i=e[n].metadata)==null?void 0:i.payload}).map(n=>{var i;return[n,(i=e[n].metadata)==null?void 0:i.payload]}))):Rs.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},wH=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),BN=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class xH{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(E1),n=this._instance.get_property(su),i=this._instance.get_property(bf);if(!i&&!n)return e||{};var r=fn({},e||{}),s=[...new Set([...Object.keys(i||{}),...Object.keys(n||{})])];for(var o of s){var a,l,c=r[o],u=n==null?void 0:n[o],d=ye(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,f=ye(u)?c.variant:typeof u=="string"?u:void 0,p=i==null?void 0:i[o],g=Se({},c,{enabled:d,variant:d?f??(c==null?void 0:c.variant):void 0});d!==(c==null?void 0:c.enabled)&&(g.original_enabled=c==null?void 0:c.enabled),f!==(c==null?void 0:c.variant)&&(g.original_variant=c==null?void 0:c.variant),p&&(g.metadata=Se({},c==null?void 0:c.metadata,{payload:p,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),r[o]=g}return this.ge||(Rs.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this.ge=!0),r}getFlagVariants(){var e=this._instance.get_property(Nu),n=this._instance.get_property(su);if(!n)return e||{};for(var i=fn({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Rs.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this.ge=!0),i}getFlagPayloads(){var e=this._instance.get_property(LN),n=this._instance.get_property(bf);if(!n)return e||{};for(var i=fn({},e||{}),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Rs.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:i}),this.ge=!0),i}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:Se({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(Gf)||{}),group_properties:this._instance.get_property(ec)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var r=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var c=function(u){for(var d=2166136261,f=0;f<u.length;f++)d^=u.charCodeAt(f),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return BN==null?void 0:BN.has(c)}(this._instance.config.token)?"/decide?v=4":r?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);r&&(i.timezone=NO()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:i,compression:this._instance.config.disable_compression?void 0:zo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((u=l.json)!==null&&u!==void 0?u:{})),!i.disable_flags||this.ye)if(this.Se=!d,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(wH.FeatureFlags))Rs.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var f;i.disable_flags||this.receivedFeatureFlags((f=l.json)!==null&&f!==void 0?f:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,s=this._instance.get_property($N)||void 0,o=this._instance.get_property(K0)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(r))){var a,l,c,u,d,f,p,g,m;Kt(o[e])?o[e].push(r):o[e]=[r],(a=this._instance.persistence)==null||a.register({[K0]:o});var v=this.getFeatureFlagDetails(e),y={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.Se};ye(v==null||(u=v.metadata)==null?void 0:u.version)||(y.$feature_flag_version=v.metadata.version);var w,x=(d=v==null||(f=v.reason)==null?void 0:f.description)!==null&&d!==void 0?d:v==null||(p=v.reason)==null?void 0:p.code;x&&(y.$feature_flag_reason=x),v!=null&&(g=v.metadata)!=null&&g.id&&(y.$feature_flag_id=v.metadata.id),ye(v==null?void 0:v.original_variant)&&ye(v==null?void 0:v.original_enabled)||(y.$feature_flag_original_response=ye(v.original_variant)?v.original_enabled:v.original_variant),v!=null&&(m=v.metadata)!=null&&m.original_payload&&(y.$feature_flag_original_payload=v==null||(w=v.metadata)==null?void 0:w.original_payload),this._instance.capture("$feature_flag_called",y)}return i}Rs.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var i=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:zo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var s,o=(s=r.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);Rs.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var d=bH(o),f=d.flags,p=d.featureFlags,g=d.featureFlagPayloads;if(p){var m=o.requestId;if(Kt(p)){Rs.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var v={};if(p)for(var y=0;y<p.length;y++)v[p[y]]=!0;a&&a.register({[ww]:p,[Nu]:v})}else{var w=p,x=g,S=f;o.errorsWhileComputingFlags&&(w=Se({},l,w),x=Se({},c,x),S=Se({},u,S)),a&&a.register(Se({[ww]:Object.keys(FN(w)),[Nu]:w||{},[LN]:x||{},[E1]:S||{}},m?{[$N]:m}:{}))}}})(e,this._instance.persistence,i,r,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),Rs.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Rs.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(su),this._instance.persistence.unregister(bf),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,i=e;if(this.ge=!!((n=i.suppressWarning)!==null&&n!==void 0&&n),"flags"in i){if(i.flags===!1)this._instance.persistence.unregister(su);else if(i.flags)if(Kt(i.flags)){for(var r={},s=0;s<i.flags.length;s++)r[i.flags[s]]=!0;this._instance.persistence.register({[su]:r})}else this._instance.persistence.register({[su]:i.flags})}return"payloads"in i&&(i.payloads===!1?this._instance.persistence.unregister(bf):i.payloads&&this._instance.persistence.register({[bf]:i.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:i}=this.Re();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r=(this._instance.get_property(l0)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};r&&(o.$early_access_feature_name=r.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=Se({},this.getFlagVariants(),{[e]:n});(i=this._instance.persistence)==null||i.register({[ww]:Object.keys(FN(a)),[Nu]:a}),this.Pe()}getEarlyAccessFeatures(e,n,i){n===void 0&&(n=!1);var r=this._instance.get_property(l0),s=i?"&"+i.map(o=>"stage="+o).join("&"):"";if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[l0]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}Pe(e){var{flags:n,flagVariants:i}=this.Re();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(Gf)||{};this._instance.register({[Gf]:Se({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Gf)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(ec)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=Se({},i[r],e[r]),delete e[r]}),this._instance.register({[ec]:Se({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(ec)||{};this._instance.register({[ec]:Se({},n,{[e]:{}})})}else this._instance.unregister(ec)}}var SH=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class xw{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Ae.info("Persistence loaded",e.persistence,Se({},this.props)),this.update_config(e,e),this.save()}Ce(e){SH.indexOf(e.persistence.toLowerCase())===-1&&(Ae.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&Sn.O()?Sn:n==="localstorage+cookie"&&Dm.O()?Dm:n==="sessionstorage"&&Vn.O()?Vn:n==="memory"?eV:n==="cookie"?io:Dm.O()?Dm:io}properties(){var e={};return Nt(this.props,function(n,i){if(i===Nu&&ln(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/"+r[s]]=n[r[s]];else a=i,l=!1,(Pl(o=OU)?l:GA&&o.indexOf===GA?o.indexOf(a)!=-1:(Nt(o,function(c){if(l||(l=c===a))return W0}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=fn({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(ln(e)){ye(n)&&(n="None"),this.Oe=ye(i)?this.Le:i;var r=!1;if(Nt(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(ln(e)){this.Oe=ye(n)?this.Le:n;var i=!1;if(Nt(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=SO(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);Au(a_(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=Ce==null?void 0:Ce.referrer)?_O(e):{})}update_referrer_info(){var e;this.register_once({$referrer:CO(),$referring_domain:Ce!=null&&Ce.referrer&&((e=Sd(Ce.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[M1]||this.props[R1]||this.register_once({[q0]:EO(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};Nt([R1,M1],o=>{var a=this.props[o];a&&Nt(a,function(l,c){e["$initial_"+b1(c)]=l})});var n,i,r=this.props[q0];if(r){var s=(n=AO(r),i={},Nt(n,function(o,a){i["$initial_"+b1(a)]=o}),i);fn(e,s)}return e}safe_merge(e){return Nt(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.Ce(e),r=this.props;this.clear(),this.B=i,this.props=r,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[Hf]||{};i[e]=n,this.props[Hf]=i,this.save()}remove_event_timer(e){var n=(this.props[Hf]||{})[e];return ye(n)||(delete this.props[Hf][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class PO{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.je[e]||[])i(n);for(var r of this.je["*"]||[])r(e,n)}}class sc{constructor(e){this.Ne=new PO,this.ze=(n,i)=>this.Ue(n,i)&&this.qe(n,i)&&this.Be(n,i),this.Ue=(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!ye((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!ye((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.He)==null||u.add((c==null?void 0:c.event)||"")})}),(i=this._instance)!=null&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this._instance)==null||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((i=this.We)==null?void 0:i.size)>0&&this.We.forEach(r=>{this.Je(n,r)&&this.Ne.emit("actionCaptured",r.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.ze(e,i))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)==null?void 0:i.$current_url;if(!r||typeof r!="string"||!sc.Ke(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,i){switch(i){case"regex":return!!q&&_d(e,n);case"exact":return n===e;case"contains":var r=sc.Ye(n).replace(/_/g,".").replace(/%/g,".*");return _d(e,r);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!sc.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!sc.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!sc.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)==null?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var Pn=Dn("[Surveys]"),W1="seenSurvey_",kH=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class _H{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;ye((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.actions)&&((s=i.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new sc(this._instance),this.er.init(),this.er.Ve(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l;i.conditions&&(r=i.conditions)!=null&&r.actions&&(s=i.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=i.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(i.conditions.actions.values),(l=i.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.Ze.get(c.name);u&&u.push(i.id),this.Ze.set(c.name,u||[i.id])}}))}))}tr(e){var n;e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.events)&&((s=i.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r;(r=i.conditions)==null||(r=r.events)==null||(r=r.values)==null||r.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(i.id),this.Qe.set(s.name,o||[i.id])}})}))}onEvent(e,n){var i,r=((i=this._instance)==null||(i=i.persistence)==null?void 0:i.props[Im])||[];if(e==="survey shown"&&n&&r.length>0){var s;Pn.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:r});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=r.indexOf(o);a>=0&&(r.splice(a,1),this.rr(r))}}else this.Qe.has(e)&&(Pn.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(r.concat(this.Qe.get(e)||[])))}onAction(e){var n,i=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[Im])||[];this.Ze.has(e)&&this.rr(i.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[Im]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[Im];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class CH{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(kt(n))return Pn.warn("Flags not loaded yet. Not loading surveys.");var i=Kt(n);this.nr=i?n.length>0:n,Pn.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var i=localStorage.key(n);(i!=null&&i.startsWith(W1)||i!=null&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(r=>localStorage.removeItem(r))}loadIfEnabled(){if(!this.ar)if(this.ur)Pn.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Pn.info("Disabled. Not loading surveys.");else{var e=qe==null?void 0:qe.__PosthogExtensions__;if(e){var n=this.nr;if(!ye(n)){this.ur=!0;try{var i=e.generateSurveys;if(i)return void this.dr(i,n);var r=e.loadExternalDependency;if(!r)return void this.vr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else Pn.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new _H(this._instance),Pn.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){Pn.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return Pn.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(A1);if(i&&!n)return e(i,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var s;this.lr=!1;var o=r.statusCode;if(o!==200||!r.json){var a="Surveys API could not be loaded, status: "+o;return Pn.error(a),e([],{isLoaded:!1,error:a})}var l,c=r.json.surveys||[],u=c.filter(d=>function(f){return!(!f.start_date||f.end_date)}(d)&&(function(f){var p;return!((p=f.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)}(d)||function(f){var p;return!((p=f.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)}(d)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[A1]:c}),e(c,{isLoaded:!0})}})}catch(r){throw this.lr=!1,r}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(i){Pn.error("Error in survey callback",i)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!kt(this.ar))return this.ar.getActiveMatchingSurveys(e,n);Pn.warn("init was not called")}pr(e){var n=null;return this.getSurveys(i=>{var r;n=(r=i.find(s=>s.id===e))!==null&&r!==void 0?r:null}),n}gr(e){if(kt(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(kt(this.ar))return Pn.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return kt(this.ar)?(Pn.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(r=>{var s,o=(s=r.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);i({visible:a.eligible,disabledReason:a.reason})}else i({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(kt(this.ar))Pn.warn("init was not called");else{var i=this.pr(e),r=Ce==null?void 0:Ce.querySelector(n);i?r?this.ar.renderSurvey(i,r):Pn.warn("Survey element not found"):Pn.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var Sw=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),zN=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),UN=Dn("[RateLimiter]");let EH=class{constructor(e){var n,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{UN.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void UN.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)==null?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,i,r;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(i=this.instance.persistence)==null?void 0:i.get_property(P1))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)==null||r.set_property(P1,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var Kl=Dn("[RemoteConfig]");class AH{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=qe._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,i;(n=qe.__PosthogExtensions__)!=null&&n.loadExternalDependency?(i=qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(Kl.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return Kl.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void Kl.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return Kl.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){Kl.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):Kl.info("__preview_remote_config is disabled. Logging config instead",e):Kl.error("Failed to fetch remote config from PostHog.")}}var G1=3e3;class NH{constructor(e,n){this.br=!0,this.yr=[],this.wr=cr((n==null?void 0:n.flush_interval_ms)||G1,250,5e3,"flush interval",G1),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(i=>i.url.indexOf("/e")===0),...n.filter(i=>i.url.indexOf("/e")!==0)].map(i=>{this.Sr(Se({},i,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),i=function(){var s=n[r],o=new Date().getTime();s.data&&Kt(s.data)&&Nt(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var r in n)i()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return Nt(this.yr,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;ye(e[s])&&(e[s]=Se({},r,{data:[]})),(i=e[s].data)==null||i.push(r.data)}),this.yr=[],e}}var PH=["retriesPerformedSoFar"];class MH{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!ye(q)&&"onLine"in q.navigator&&(this.Tr=q.navigator.onLine,Qt(q,"online",()=>{this.Tr=!0,this.se()}),Qt(q,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=E5(e,PH);oi(n)&&n>0&&(i.url=nv(i.url,{retry_count:n})),this._instance.Ee(Se({},i,{callback:r=>{r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.Mr(Se({retriesPerformedSoFar:n},i)):i.callback==null||i.callback(r)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),r=Date.now()+i;this.yr.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in "+i;navigator.onLine||(s+=" (Browser is offline)"),Ae.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],i=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(Se({},e,{transport:"sendBeacon"}))}catch(n){Ae.error(n)}this.yr=[]}}class RH{constructor(e){this.Or=()=>{var n,i,r,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(i=this.Ar.maxScrollHeight)!==null&&i!==void 0?i:0),this.Ar.lastContentY=c,this.Ar.maxContentY=Math.max(c,(r=this.Ar.maxContentY)!==null&&r!==void 0?r:0),this.Ar.maxContentHeight=Math.max(u,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){Qt(q,"scroll",this.Or,{capture:!0}),Qt(q,"scrollend",this.Or,{capture:!0}),Qt(q,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return q==null?void 0:q.document.documentElement;var e=Kt(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var i=q==null?void 0:q.document.querySelector(n);if(i)return i}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return q&&(q.scrollY||q.pageYOffset||q.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return q&&(q.scrollX||q.pageXOffset||q.document.documentElement.scrollLeft)||0}}var TH=t=>EO(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class OH{constructor(e,n,i,r){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[N1]:a})}},this._instance=e,this.zr=n,this.Nr=i,this.jr=r||TH,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[N1]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?AO(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return Nt(a_(this.getSetOnceProps()),(n,i)=>{i==="$current_url"&&(i="url"),e["$session_entry_"+b1(i)]=n}),e}}var VN=Dn("[SessionId]");class IH{constructor(e,n,i){var r;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||Fa,this.Br=i||Fa;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*cr(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=Vn.L(this.Wr),l=Vn.L(this.Gr);a&&!l?this.fi=a:Vn.N(this.Wr),Vn.j(this.Gr,!0)}if((r=this.S.bootstrap)!=null&&r.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(u){VN.error("Invalid sessionID in bootstrap",u)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return ye(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&Vn.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&Vn.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?Vn.L(this.Wr):null}Vr(e,n,i){e===this.Ct&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[G0]:[n,e,i]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[G0];return Kt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){Qt(q,"beforeunload",()=>{this.Jr()&&Vn.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=n||new Date().getTime(),[r,s,o]=this.Qr(),a=this.Xr(),l=oi(o)&&o>0&&Math.abs(i-o)>864e5,c=!1,u=!s,d=!e&&Math.abs(i-r)>this.sessionTimeoutMs;u||d||l?(s=this.qr(),a=this.Br(),VN.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),o=i,c=!0):a||(a=this.Br(),c=!0);var f=r===0||!e||l?i:r,p=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,f,p),e||this.Hr(),c&&this.Ur.forEach(g=>g(s,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:p,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:r}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var jH=["$set_once","$set"],pa=Dn("[SiteApps]");class DH{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var i=this.globalsForEvent(n);this.ts.push(i),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=qe._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,p]of Object.entries(d))c[f]={id:u[f],type:f,properties:p};var{$set_once:g,$set:m}=e;return{event:Se({},E5(e,jH),{properties:Se({},e.properties,m?{$set:Se({},(n=(i=e.properties)==null?void 0:i.$set)!==null&&n!==void 0?n:{},m)}:{},g?{$set_once:Se({},(r=(s=e.properties)==null?void 0:s.$set_once)!==null&&r!==void 0?r:{},g)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],i=()=>{var a;!n.errored&&this.ts.length&&(pa.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},r=!1,s=a=>{n.errored=!a,n.loaded=!0,pa.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),r&&i()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),r=!0}catch(a){pa.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(r&&n.loaded)try{i()}catch(a){pa.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{i.processEvent==null||i.processEvent(n)}catch(r){pa.error("Error while processing event "+e.event+" for site app "+i.id,r)}}}onRemoteConfig(e){var n,i,r,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",c=>this.ns(c))):void pa.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((i=this.rs)==null||i.call(this),(r=e.siteApps)!=null&&r.length)if(this.isEnabled){var o=function(c){var u;qe["__$$ph_site_app_"+c]=s._instance,(u=qe.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,d=>{if(d)return pa.error("Error while initializing PostHog app with config id "+c,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else pa.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var LH=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],HN=function(t,e){if(!t)return!1;var n=t.toLowerCase();return LH.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},MO=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&HN(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>HN(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver},Xf=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),WN="i.posthog.com";class $H{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+WN,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Xf.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Xf.EU:this.os[this.apiHost]=Xf.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===Xf.CUSTOM)return this.apiHost+n;var i=WN+n;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var FH={icontains:(t,e)=>!!q&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!q&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!q&&_d(e.href,t),not_regex:(t,e)=>!!q&&!_d(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let BH=class hi{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(i){i===void 0&&(i=!1),n.getWebExperiments(r=>{hi.ls("retrieved web experiments from the server"),n.us=new Map,r.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(hi.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);cn(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];hi.ds(c)&&n.hs(s.name,l,c.transforms)}})},i)},this._instance=e,this._instance.onFeatureFlags(i=>{this.onFeatureFlags(i)})}onFeatureFlags(e){if(this._is_bot())hi.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(kt(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();hi.ls("applying feature flags",e),e.forEach(n=>{var i;if(this.us&&(i=this.us)!=null&&i.has(n)){var r,s=this._instance.getFeatureFlag(n),o=(r=this.us)==null?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=hi.getWindowLocation();if(e!=null&&e.search){var n=J0(e==null?void 0:e.search,"__experiment_id"),i=J0(e==null?void 0:e.search,"__experiment_variant");n&&i&&(hi.ls("previewing web experiments "+n+" && "+i),this.getWebExperiments(r=>{this.vs(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(hi.ls("Previewing web experiment ["+r[0].name+"] with variant ["+n+"]"),this.hs(r[0].name,n,r[0].variants[n].transforms))}static ds(e){return!kt(e.conditions)&&hi.cs(e)&&hi.fs(e)}static cs(e){var n;if(kt(e.conditions)||kt((n=e.conditions)==null?void 0:n.url))return!0;var i,r,s,o=hi.getWindowLocation();return!!o&&((i=e.conditions)==null||!i.url||FH[(r=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return q==null?void 0:q.location}static fs(e){var n;if(kt(e.conditions)||kt((n=e.conditions)==null?void 0:n.utm))return!0;var i=SO();if(i.utm_source){var r,s,o,a,l,c,u,d,f=(r=e.conditions)==null||(r=r.utm)==null||!r.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==i.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==i.utm_source,g=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==i.utm_medium,m=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==i.utm_term;return f&&g&&m&&p}return!1}static ls(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Ae.info("[WebExperiments] "+e,i)}hs(e,n,i){this._is_bot()?hi.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(r=>{if(r.selector){var s;hi.ls("applying transform of variant "+n+" for experiment "+e+" ",r);var o=(s=document)==null?void 0:s.querySelectorAll(r.selector);o==null||o.forEach(a=>{var l=a;r.html&&(l.innerHTML=r.html),r.css&&l.setAttribute("style",r.css)})}}):hi.ls("Control variants leave the page unmodified.")}_is_bot(){return lr&&this._instance?MO(lr,this._instance.config.custom_blocked_useragents):void 0}};var zH=Dn("[PostHog ExternalIntegrations]"),UH={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let VH=class{constructor(e){this._instance=e}J(e,n){var i;(i=qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,e,r=>{if(r)return zH.error("failed to load script",r);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,c;!r||(a=qe.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(UH[o],()=>{var u;(u=qe.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!r&&(l=qe.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=qe.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[i,r]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(i)}}};var bh={},K1=()=>{},bu="posthog",RO=!tH&&(ji==null?void 0:ji.indexOf("MSIE"))===-1&&(ji==null?void 0:ji.indexOf("Mozilla"))===-1,GN=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:TU(Ce==null?void 0:Ce.location),persistence:"localStorage+cookie",persistence_name:"",loaded:K1,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:$i&&cn($i==null?void 0:$i.search)&&$i.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(q==null||(e=q.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var i="Bad HTTP status: "+n.statusCode+" "+n.text;Ae.error(i)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:G1},error_tracking:{},_onCapture:K1}},KN=t=>{var e={};ye(t.process_person)||(e.person_profiles=t.process_person),ye(t.xhr_headers)||(e.request_headers=t.xhr_headers),ye(t.cookie_name)||(e.persistence_name=t.cookie_name),ye(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),ye(t.store_google)||(e.save_campaign_params=t.store_google),ye(t.verbose)||(e.debug=t.verbose);var n=fn({},e,t);return Kt(t.property_blacklist)&&(ye(t.property_denylist)?n.property_denylist=t.property_blacklist:Kt(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Ae.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let HH=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Ae.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},TO=class OO{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new HH,this.gs=!1,this.version=No.LIB_VERSION,this._s=new PO,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=GN(),this.SentryIntegration=WV,this.sentryIntegration=e=>function(n,i){var r=sO(n,i);return{name:rO,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new xH(this),this.toolbar=new KV(this),this.scrollManager=new RH(this),this.pageViewManager=new QV(this),this.surveys=new CH(this),this.experiments=new BH(this),this.exceptions=new rH(this),this.rateLimiter=new EH(this),this.requestRouter=new $H(this),this.consent=new tV(this),this.externalIntegrations=new VH(this),this.people={set:(e,n,i)=>{var r=cn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=cn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>Ae.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,i){if(i&&i!==bu){var r,s=(r=bh[i])!==null&&r!==void 0?r:new OO;return s._init(e,n,i),bh[i]=s,bh[bu][i]=s,s}return this._init(e,n,i)}_init(e,n,i){var r,s;if(n===void 0&&(n={}),ye(e)||w1(e))return Ae.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ae.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(fn({},GN(n.defaults),KN(n),{name:i,token:e})),this.config.on_xhr_error&&Ae.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:zo.GZipJS,this.persistence=new xw(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new xw(Se({},this.config,{persistence:"sessionStorage"}));var o=Se({},this.persistence.props),a=Se({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new NH(y=>this.Es(y),this.config.request_queue_config),this.Is=new MH(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new IH(this),this.sessionPropsManager=new OH(this,this.sessionManager,this.persistence)),new YV(this).startIfEnabledOrStop(),this.siteApps=new DH(this),(r=this.siteApps)==null||r.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new VV(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new GU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new ZV(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new XV(this),this.exceptionObserver=new rV(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new V5(this,iV),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new yV(this),this.historyAutocapture.startIfEnabled(),No.DEBUG=No.DEBUG||this.config.debug,No.DEBUG&&Ae.info("Starting in debug mode",{this:this,config:n,thisC:Se({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,c,u=this.config.get_device_id(Fa()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?u:n.bootstrap.distinctID;this.persistence.set_property(ko,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var f,p,g=Object.keys(((f=n.bootstrap)==null?void 0:f.featureFlags)||{}).filter(y=>{var w;return!((w=n.bootstrap)==null||(w=w.featureFlags)==null||!w[y])}).reduce((y,w)=>{var x;return y[w]=((x=n.bootstrap)==null||(x=x.featureFlags)==null?void 0:x[w])||!1,y},{}),m=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(y=>g[y]).reduce((y,w)=>{var x,S;return(x=n.bootstrap)!=null&&(x=x.featureFlagPayloads)!=null&&x[w]&&(y[w]=(S=n.bootstrap)==null||(S=S.featureFlagPayloads)==null?void 0:S[w]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:jm,$device_id:null},"");else if(!this.get_distinct_id()){var v=this.config.get_device_id(Fa());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(ko,"anonymous")}return Qt(q,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?HV(this,()=>this.Ts()):this.Ts(),Fr(this.config._onCapture)&&this.config._onCapture!==K1&&(Ae.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this.config.ip&&Ae.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,i,r,s,o,a,l,c;if(!Ce||!Ce.body)return Ae.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=at(e.supportedCompression,zo.GZipJS)?zo.GZipJS:at(e.supportedCompression,zo.Base64)?zo.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(i=this.siteApps)==null||i.onRemoteConfig(e),(r=this.sessionRecording)==null||r.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Ae.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new AH(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||Ja(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(RO?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=nv(e.url,{ip:this.config.ip?1:0}),e.headers=Se({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var i,r,s,o=Se({},n);o.timeout=o.timeout||6e4,o.url=nv(o.url,{_:new Date().getTime().toString(),ver:No.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"fetch",l=(r=(s=A5(yh,c=>c.transport===a))==null?void 0:s.method)!==null&&r!==void 0?r:yh[0].method;if(!l)throw new Error("No available transport method");l(o)})(Se({},e,{callback:n=>{var i,r;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((i=(r=this.config).on_request_error)==null||i.call(r,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,i=[],r=[],s=[];Ja(e,a=>{a&&(n=a[0],Kt(n)?s.push(a):Fr(a)?a.call(this):Kt(a)&&n==="alias"?i.push(a):Kt(a)&&n.indexOf("capture")!==-1&&Fr(this[n])?s.push(a):r.push(a))});var o=function(a,l){Ja(a,function(c){if(Kt(c[0])){var u=l;Nt(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(i,this),o(r,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!ye(e)&&cn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!cn(n==null?void 0:n.$current_url)&&(Ae.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l=Fa(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(c.$set=i==null?void 0:i.$set);var u,d,f=this.Os(i==null?void 0:i.$set_once);if(f&&(c.$set_once=f),(c=MU(c,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,ye(i==null?void 0:i.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o),e===Sw.DISMISSED||e===Sw.SENT){var p=n==null?void 0:n[zN.SURVEY_ID],g=n==null?void 0:n[zN.SURVEY_ITERATION];localStorage.setItem((d=""+W1+(u={id:p,current_iteration:g}).id,u.current_iteration&&u.current_iteration>0&&(d=""+W1+u.id+"_"+u.current_iteration),d),"true"),c.$set=Se({},c.$set,{[kH({id:p,current_iteration:g},e===Sw.SENT?"responded":"dismissed")]:!0})}var m=Se({},c.properties.$set,c.$set);if(Au(m)||this.setPersonPropertiesForFlags(m),!kt(this.config.before_send)){var v=this.As(c);if(!v)return;c=v}this._s.emit("eventCaptured",c);var y={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this.Es(y):this.xs.enqueue(y),c}Ae.critical("This capture call is ignored due to client rate limiting.")}}else Ae.error("No event name provided to posthog.capture")}else Ae.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,i,r,s){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=Se({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=Se({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!cn(a.distinct_id)&&!oi(a.distinct_id)||w1(a.distinct_id))&&Ae.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=yH(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,i.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&fn(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&fn(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.Is)==null?void 0:p.length}catch(y){a.$sdk_debug_error_capturing_properties=String(y)}if(this.requestRouter.region===Xf.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,r),a=fn(a,c),e==="$pageview"&&Ce&&(a.title=Ce.title),!ye(o)){var g=i.getTime()-o;a.$duration=parseFloat((g/1e3).toFixed(3))}ji&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=fn({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),Kt(this.config.property_denylist)?Nt(this.config.property_denylist,function(y){delete a[y]}):Ae.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var m=this.config.sanitize_properties;m&&(Ae.error("sanitize_properties is deprecated. Use before_send instead"),a=m(a,e));var v=this.Ds();return a.$process_person_profile=v,v&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var i=this.persistence.get_initial_props(),r=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=fn({},i,r||{},e||{}),o=this.config.sanitize_properties;return o&&(Ae.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,Au(s)?void 0:s}register(e,n){var i;(i=this.persistence)==null||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)==null||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,i){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,i)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)==null?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,i){if(!this.__loaded||!this.persistence)return Ae.uninitializedWarning("posthog.identify");if(oi(e)&&(e=e.toString(),Ae.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Ae.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==jm){if(this.Ls("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(Vf)&&(this.unregister(Vf),this.register({distinct_id:e}));var o=(this.persistence.get_property(ko)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(ko,"identified"),this.setPersonPropertiesForFlags(Se({},i||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.Ss=TN(e,n,i),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(K0))}}else Ae.critical('The string "'+jm+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Ae.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var i=TN(this.get_distinct_id(),e,n);this.Ss!==i?(this.setPersonPropertiesForFlags(Se({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=i):Ae.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,i){if(e&&n){if(this.Ls("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Se({},r,{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else Ae.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s;if(Ae.info("reset"),!this.__loaded)return Ae.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(i=this.sessionPersistence)==null||i.clear(),this.surveys.reset(),(r=this.persistence)==null||r.set_property(ko,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:jm,$device_id:null},"");else{var a=this.config.get_device_id(Fa());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;r+="?t="+Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0)}return r}alias(e,n){return e===this.get_property(N5)?(Ae.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(ye(n)&&(n=this.get_distinct_id()),e!==n?(this.js(Vf,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Ae.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o,a=Se({},this.config);ln(e)&&(fn(this.config,KN(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new xw(Se({},this.config,{persistence:"sessionStorage"})),Sn.O()&&Sn.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(No.DEBUG=!0,Ae.info("set_config",{config:e,oldConfig:a,newConfig:Se({},this.config)})),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(r=this.autocapture)==null||r.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)==null||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var i=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(Se({},vV((r=>r instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:i}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:bu;return n!==bu&&(n=bu+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(ko))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(ko))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Au(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Vf])&&((n=this.persistence)==null||(n=n.props)==null||!n[Y0]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Ae.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(Y0,!0),!0)}Ps(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((i=this.persistence)==null||i.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((r=this.sessionPersistence)==null||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(ye(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return lr?MO(lr,this.config.custom_blocked_useragents):void 0}Cs(){Ce&&(Ce.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:Ce.title},{send_instantly:!0}),this.ys&&(Ce.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),Qt(Ce,"visibilitychange",this.ys)))}debug(e){e===!1?(q==null||q.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(q==null||q.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,i,r,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Ae.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(i="advanced_disable_decide",r=!1,s=Ae,o=(n="advanced_disable_flags")in(e=l)&&!ye(e[n]),a=i in e&&!ye(e[i]),o?e[n]:a?(s&&s.warn("Config field '"+i+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[i]):r)}As(e){if(kt(this.config.before_send))return e;var n=Kt(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),kt(i)){var s="Event '"+e.event+"' was rejected in beforeSend function";return AU(e.event)?Ae.warn(s+". This can cause unexpected behavior."):Ae.info(s),null}i.properties&&!Au(i.properties)||Ae.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(i)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=PU(t.prototype[e[n]])})(TO,["identify"]);var qN,Ra=(qN=bh[bu]=new TO,function(){function t(){t.done||(t.done=!0,RO=!1,Nt(bh,function(e){e._dom_loaded()}))}Ce!=null&&Ce.addEventListener?Ce.readyState==="complete"?t():Qt(Ce,"DOMContentLoaded",t,{capture:!1}):q&&Ae.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),qN),IO=b.createContext({client:Ra});function jO(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!r.includes(a)||!jO(t[a],e[a],n))return!1}return!0}function WH(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=b.useRef(null),o=b.useMemo(function(){return n?(i&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),r&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(i||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),Ra)},[n,i,JSON.stringify(r)]);return b.useEffect(function(){if(!n){var a=s.current;a?(i!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),r&&!jO(r,a.options)&&Ra.set_config(r),s.current={apiKey:i,options:r??{}}):(Ra.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),Ra.init(i,r),s.current={apiKey:i,options:r??{}})}},[n,i,JSON.stringify(r)]),Ft.createElement(IO.Provider,{value:{client:o}},e)}var q1=function(t,e){return q1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},q1(t,e)};function GH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");q1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var kw=function(t){return typeof t=="function"},KH={componentStack:null,error:null},qH={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){GH(e,t);function e(n){var i=t.call(this,n)||this;return i.state=KH,i}return e.prototype.componentDidCatch=function(n,i){var r=i.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:r});var o;kw(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,i=n.children,r=n.fallback,s=this.state;if(s.componentStack==null)return kw(i)?i():i;var o=kw(r)?Ft.createElement(r,{error:s.error,componentStack:s.componentStack}):r;return Ft.isValidElement(o)?o:(console.warn(qH.INVALID_FALLBACK),Ft.createElement(Ft.Fragment,null))},e.contextType=IO,e})(Ft.Component);var DO={exports:{}},Sr={},LO={exports:{}},$O={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,B){var ie=V.length;V.push(B);e:for(;0<ie;){var pe=ie-1>>>1,J=V[pe];if(0<r(J,B))V[pe]=B,V[ie]=J,ie=pe;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var B=V[0],ie=V.pop();if(ie!==B){V[0]=ie;e:for(var pe=0,J=V.length,le=J>>>1;pe<le;){var F=2*(pe+1)-1,L=V[F],U=F+1,k=V[U];if(0>r(L,ie))U<J&&0>r(k,L)?(V[pe]=k,V[U]=ie,pe=U):(V[pe]=L,V[F]=ie,pe=F);else if(U<J&&0>r(k,ie))V[pe]=k,V[U]=ie,pe=U;else break e}}return B}function r(V,B){var ie=V.sortIndex-B.sortIndex;return ie!==0?ie:V.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(V){for(var B=n(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=V)i(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function S(V){if(m=!1,x(V),!g)if(n(l)!==null)g=!0,X(_);else{var B=n(c);B!==null&&Z(S,B.startTime-V)}}function _(V,B){g=!1,m&&(m=!1,y(N),N=-1),p=!0;var ie=f;try{for(x(B),d=n(l);d!==null&&(!(d.expirationTime>B)||V&&!D());){var pe=d.callback;if(typeof pe=="function"){d.callback=null,f=d.priorityLevel;var J=pe(d.expirationTime<=B);B=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&i(l),x(B)}else i(l);d=n(l)}if(d!==null)var le=!0;else{var F=n(c);F!==null&&Z(S,F.startTime-B),le=!1}return le}finally{d=null,f=ie,p=!1}}var E=!1,C=null,N=-1,M=5,O=-1;function D(){return!(t.unstable_now()-O<M)}function j(){if(C!==null){var V=t.unstable_now();O=V;var B=!0;try{B=C(!0,V)}finally{B?K():(E=!1,C=null)}}else E=!1}var K;if(typeof w=="function")K=function(){w(j)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,G=$.port2;$.port1.onmessage=j,K=function(){G.postMessage(null)}}else K=function(){v(j,0)};function X(V){C=V,E||(E=!0,K())}function Z(V,B){N=v(function(){V(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,X(_))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var ie=f;f=B;try{return V()}finally{f=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,B){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ie=f;f=V;try{return B()}finally{f=ie}},t.unstable_scheduleCallback=function(V,B,ie){var pe=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?pe+ie:pe):ie=pe,V){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ie+J,V={id:u++,callback:B,priorityLevel:V,startTime:ie,expirationTime:J,sortIndex:-1},ie>pe?(V.sortIndex=ie,e(c,V),n(l)===null&&V===n(c)&&(m?(y(N),N=-1):m=!0,Z(S,ie-pe))):(V.sortIndex=J,e(l,V),g||p||(g=!0,X(_))),V},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(V){var B=f;return function(){var ie=f;f=B;try{return V.apply(this,arguments)}finally{f=ie}}}})($O);LO.exports=$O;var YH=LO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XH=b,yr=YH;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FO=new Set,Yh={};function Zc(t,e){Ed(t,e),Ed(t+"Capture",e)}function Ed(t,e){for(Yh[t]=e,t=0;t<e.length;t++)FO.add(e[t])}var Yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Y1=Object.prototype.hasOwnProperty,JH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,YN={},XN={};function ZH(t){return Y1.call(XN,t)?!0:Y1.call(YN,t)?!1:JH.test(t)?XN[t]=!0:(YN[t]=!0,!1)}function QH(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eW(t,e,n,i){if(e===null||typeof e>"u"||QH(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ki(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zn[t]=new ki(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zn[e]=new ki(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zn[t]=new ki(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zn[t]=new ki(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zn[t]=new ki(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zn[t]=new ki(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zn[t]=new ki(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zn[t]=new ki(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zn[t]=new ki(t,5,!1,t.toLowerCase(),null,!1,!1)});var x_=/[\-:]([a-z])/g;function S_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(x_,S_);Zn[e]=new ki(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(x_,S_);Zn[e]=new ki(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(x_,S_);Zn[e]=new ki(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zn[t]=new ki(t,1,!1,t.toLowerCase(),null,!1,!1)});Zn.xlinkHref=new ki("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zn[t]=new ki(t,1,!1,t.toLowerCase(),null,!0,!0)});function k_(t,e,n,i){var r=Zn.hasOwnProperty(e)?Zn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eW(e,n,r,i)&&(n=null),i||r===null?ZH(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var sa=XH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wm=Symbol.for("react.element"),Mu=Symbol.for("react.portal"),Ru=Symbol.for("react.fragment"),__=Symbol.for("react.strict_mode"),X1=Symbol.for("react.profiler"),BO=Symbol.for("react.provider"),zO=Symbol.for("react.context"),C_=Symbol.for("react.forward_ref"),J1=Symbol.for("react.suspense"),Z1=Symbol.for("react.suspense_list"),E_=Symbol.for("react.memo"),Sa=Symbol.for("react.lazy"),UO=Symbol.for("react.offscreen"),JN=Symbol.iterator;function wf(t){return t===null||typeof t!="object"?null:(t=JN&&t[JN]||t["@@iterator"],typeof t=="function"?t:null)}var sn=Object.assign,_w;function Jf(t){if(_w===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_w=e&&e[1]||""}return`
`+_w+t}var Cw=!1;function Ew(t,e){if(!t||Cw)return"";Cw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Cw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jf(t):""}function tW(t){switch(t.tag){case 5:return Jf(t.type);case 16:return Jf("Lazy");case 13:return Jf("Suspense");case 19:return Jf("SuspenseList");case 0:case 2:case 15:return t=Ew(t.type,!1),t;case 11:return t=Ew(t.type.render,!1),t;case 1:return t=Ew(t.type,!0),t;default:return""}}function Q1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ru:return"Fragment";case Mu:return"Portal";case X1:return"Profiler";case __:return"StrictMode";case J1:return"Suspense";case Z1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zO:return(t.displayName||"Context")+".Consumer";case BO:return(t._context.displayName||"Context")+".Provider";case C_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case E_:return e=t.displayName||null,e!==null?e:Q1(t.type)||"Memo";case Sa:e=t._payload,t=t._init;try{return Q1(t(e))}catch{}}return null}function nW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q1(e);case 8:return e===__?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function VO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iW(t){var e=VO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gm(t){t._valueTracker||(t._valueTracker=iW(t))}function HO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=VO(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function rv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eS(t,e){var n=e.checked;return sn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ZN(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=fl(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function WO(t,e){e=e.checked,e!=null&&k_(t,"checked",e,!1)}function tS(t,e){WO(t,e);var n=fl(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nS(t,e.type,n):e.hasOwnProperty("defaultValue")&&nS(t,e.type,fl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function QN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nS(t,e,n){(e!=="number"||rv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zf=Array.isArray;function Ju(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+fl(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function iS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return sn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Zf(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fl(n)}}function GO(t,e){var n=fl(e.value),i=fl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function tP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function KO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?KO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Km,qO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Km=Km||document.createElement("div"),Km.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Km.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rW=["Webkit","ms","Moz","O"];Object.keys(wh).forEach(function(t){rW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wh[e]=wh[t]})});function YO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wh.hasOwnProperty(t)&&wh[t]?(""+e).trim():e+"px"}function XO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=YO(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var sW=sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sS(t,e){if(e){if(sW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function oS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aS=null;function A_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lS=null,Zu=null,Qu=null;function nP(t){if(t=im(t)){if(typeof lS!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=Vy(e),lS(t.stateNode,t.type,e))}}function JO(t){Zu?Qu?Qu.push(t):Qu=[t]:Zu=t}function ZO(){if(Zu){var t=Zu,e=Qu;if(Qu=Zu=null,nP(t),e)for(t=0;t<e.length;t++)nP(e[t])}}function QO(t,e){return t(e)}function eI(){}var Aw=!1;function tI(t,e,n){if(Aw)return t(e,n);Aw=!0;try{return QO(t,e,n)}finally{Aw=!1,(Zu!==null||Qu!==null)&&(eI(),ZO())}}function Jh(t,e){var n=t.stateNode;if(n===null)return null;var i=Vy(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var cS=!1;if(Yo)try{var xf={};Object.defineProperty(xf,"passive",{get:function(){cS=!0}}),window.addEventListener("test",xf,xf),window.removeEventListener("test",xf,xf)}catch{cS=!1}function oW(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var xh=!1,sv=null,ov=!1,uS=null,aW={onError:function(t){xh=!0,sv=t}};function lW(t,e,n,i,r,s,o,a,l){xh=!1,sv=null,oW.apply(aW,arguments)}function cW(t,e,n,i,r,s,o,a,l){if(lW.apply(this,arguments),xh){if(xh){var c=sv;xh=!1,sv=null}else throw Error(ae(198));ov||(ov=!0,uS=c)}}function Qc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function iP(t){if(Qc(t)!==t)throw Error(ae(188))}function uW(t){var e=t.alternate;if(!e){if(e=Qc(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return iP(r),t;if(s===i)return iP(r),e;s=s.sibling}throw Error(ae(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==i)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function iI(t){return t=uW(t),t!==null?rI(t):null}function rI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rI(t);if(e!==null)return e;t=t.sibling}return null}var sI=yr.unstable_scheduleCallback,rP=yr.unstable_cancelCallback,dW=yr.unstable_shouldYield,fW=yr.unstable_requestPaint,hn=yr.unstable_now,hW=yr.unstable_getCurrentPriorityLevel,N_=yr.unstable_ImmediatePriority,oI=yr.unstable_UserBlockingPriority,av=yr.unstable_NormalPriority,pW=yr.unstable_LowPriority,aI=yr.unstable_IdlePriority,Fy=null,so=null;function mW(t){if(so&&typeof so.onCommitFiberRoot=="function")try{so.onCommitFiberRoot(Fy,t,void 0,(t.current.flags&128)===128)}catch{}}var gs=Math.clz32?Math.clz32:yW,gW=Math.log,vW=Math.LN2;function yW(t){return t>>>=0,t===0?32:31-(gW(t)/vW|0)|0}var qm=64,Ym=4194304;function Qf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Qf(a):(s&=o,s!==0&&(i=Qf(s)))}else o=n&~r,o!==0?i=Qf(o):s!==0&&(i=Qf(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-gs(e),r=1<<n,i|=t[n],e&=~r;return i}function bW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wW(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-gs(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=bW(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function dS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lI(){var t=qm;return qm<<=1,!(qm&4194240)&&(qm=64),t}function Nw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gs(e),t[e]=n}function xW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-gs(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function P_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-gs(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Et=0;function cI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uI,M_,dI,fI,hI,fS=!1,Xm=[],Qa=null,el=null,tl=null,Zh=new Map,Qh=new Map,Ta=[],SW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sP(t,e){switch(t){case"focusin":case"focusout":Qa=null;break;case"dragenter":case"dragleave":el=null;break;case"mouseover":case"mouseout":tl=null;break;case"pointerover":case"pointerout":Zh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qh.delete(e.pointerId)}}function Sf(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=im(e),e!==null&&M_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function kW(t,e,n,i,r){switch(e){case"focusin":return Qa=Sf(Qa,t,e,n,i,r),!0;case"dragenter":return el=Sf(el,t,e,n,i,r),!0;case"mouseover":return tl=Sf(tl,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Zh.set(s,Sf(Zh.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Qh.set(s,Sf(Qh.get(s)||null,t,e,n,i,r)),!0}return!1}function pI(t){var e=fc(t.target);if(e!==null){var n=Qc(e);if(n!==null){if(e=n.tag,e===13){if(e=nI(n),e!==null){t.blockedOn=e,hI(t.priority,function(){dI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function u0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);aS=i,n.target.dispatchEvent(i),aS=null}else return e=im(n),e!==null&&M_(e),t.blockedOn=n,!1;e.shift()}return!0}function oP(t,e,n){u0(t)&&n.delete(e)}function _W(){fS=!1,Qa!==null&&u0(Qa)&&(Qa=null),el!==null&&u0(el)&&(el=null),tl!==null&&u0(tl)&&(tl=null),Zh.forEach(oP),Qh.forEach(oP)}function kf(t,e){t.blockedOn===e&&(t.blockedOn=null,fS||(fS=!0,yr.unstable_scheduleCallback(yr.unstable_NormalPriority,_W)))}function ep(t){function e(r){return kf(r,t)}if(0<Xm.length){kf(Xm[0],t);for(var n=1;n<Xm.length;n++){var i=Xm[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Qa!==null&&kf(Qa,t),el!==null&&kf(el,t),tl!==null&&kf(tl,t),Zh.forEach(e),Qh.forEach(e),n=0;n<Ta.length;n++)i=Ta[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ta.length&&(n=Ta[0],n.blockedOn===null);)pI(n),n.blockedOn===null&&Ta.shift()}var ed=sa.ReactCurrentBatchConfig,cv=!0;function CW(t,e,n,i){var r=Et,s=ed.transition;ed.transition=null;try{Et=1,R_(t,e,n,i)}finally{Et=r,ed.transition=s}}function EW(t,e,n,i){var r=Et,s=ed.transition;ed.transition=null;try{Et=4,R_(t,e,n,i)}finally{Et=r,ed.transition=s}}function R_(t,e,n,i){if(cv){var r=hS(t,e,n,i);if(r===null)$w(t,e,i,uv,n),sP(t,i);else if(kW(r,t,e,n,i))i.stopPropagation();else if(sP(t,i),e&4&&-1<SW.indexOf(t)){for(;r!==null;){var s=im(r);if(s!==null&&uI(s),s=hS(t,e,n,i),s===null&&$w(t,e,i,uv,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else $w(t,e,i,null,n)}}var uv=null;function hS(t,e,n,i){if(uv=null,t=A_(i),t=fc(t),t!==null)if(e=Qc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=nI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uv=t,null}function mI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hW()){case N_:return 1;case oI:return 4;case av:case pW:return 16;case aI:return 536870912;default:return 16}default:return 16}}var Ba=null,T_=null,d0=null;function gI(){if(d0)return d0;var t,e=T_,n=e.length,i,r="value"in Ba?Ba.value:Ba.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return d0=r.slice(t,1<i?1-i:void 0)}function f0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jm(){return!0}function aP(){return!1}function kr(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Jm:aP,this.isPropagationStopped=aP,this}return sn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jm)},persist:function(){},isPersistent:Jm}),e}var ef={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},O_=kr(ef),nm=sn({},ef,{view:0,detail:0}),AW=kr(nm),Pw,Mw,_f,By=sn({},nm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:I_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_f&&(_f&&t.type==="mousemove"?(Pw=t.screenX-_f.screenX,Mw=t.screenY-_f.screenY):Mw=Pw=0,_f=t),Pw)},movementY:function(t){return"movementY"in t?t.movementY:Mw}}),lP=kr(By),NW=sn({},By,{dataTransfer:0}),PW=kr(NW),MW=sn({},nm,{relatedTarget:0}),Rw=kr(MW),RW=sn({},ef,{animationName:0,elapsedTime:0,pseudoElement:0}),TW=kr(RW),OW=sn({},ef,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IW=kr(OW),jW=sn({},ef,{data:0}),cP=kr(jW),DW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$W={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$W[t])?!!e[t]:!1}function I_(){return FW}var BW=sn({},nm,{key:function(t){if(t.key){var e=DW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=f0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:I_,charCode:function(t){return t.type==="keypress"?f0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?f0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zW=kr(BW),UW=sn({},By,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uP=kr(UW),VW=sn({},nm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:I_}),HW=kr(VW),WW=sn({},ef,{propertyName:0,elapsedTime:0,pseudoElement:0}),GW=kr(WW),KW=sn({},By,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qW=kr(KW),YW=[9,13,27,32],j_=Yo&&"CompositionEvent"in window,Sh=null;Yo&&"documentMode"in document&&(Sh=document.documentMode);var XW=Yo&&"TextEvent"in window&&!Sh,vI=Yo&&(!j_||Sh&&8<Sh&&11>=Sh),dP=" ",fP=!1;function yI(t,e){switch(t){case"keyup":return YW.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tu=!1;function JW(t,e){switch(t){case"compositionend":return bI(e);case"keypress":return e.which!==32?null:(fP=!0,dP);case"textInput":return t=e.data,t===dP&&fP?null:t;default:return null}}function ZW(t,e){if(Tu)return t==="compositionend"||!j_&&yI(t,e)?(t=gI(),d0=T_=Ba=null,Tu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vI&&e.locale!=="ko"?null:e.data;default:return null}}var QW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!QW[t.type]:e==="textarea"}function wI(t,e,n,i){JO(i),e=dv(e,"onChange"),0<e.length&&(n=new O_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var kh=null,tp=null;function eG(t){RI(t,0)}function zy(t){var e=ju(t);if(HO(e))return t}function tG(t,e){if(t==="change")return e}var xI=!1;if(Yo){var Tw;if(Yo){var Ow="oninput"in document;if(!Ow){var pP=document.createElement("div");pP.setAttribute("oninput","return;"),Ow=typeof pP.oninput=="function"}Tw=Ow}else Tw=!1;xI=Tw&&(!document.documentMode||9<document.documentMode)}function mP(){kh&&(kh.detachEvent("onpropertychange",SI),tp=kh=null)}function SI(t){if(t.propertyName==="value"&&zy(tp)){var e=[];wI(e,tp,t,A_(t)),tI(eG,e)}}function nG(t,e,n){t==="focusin"?(mP(),kh=e,tp=n,kh.attachEvent("onpropertychange",SI)):t==="focusout"&&mP()}function iG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zy(tp)}function rG(t,e){if(t==="click")return zy(e)}function sG(t,e){if(t==="input"||t==="change")return zy(e)}function oG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ys=typeof Object.is=="function"?Object.is:oG;function np(t,e){if(ys(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Y1.call(e,r)||!ys(t[r],e[r]))return!1}return!0}function gP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vP(t,e){var n=gP(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gP(n)}}function kI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _I(){for(var t=window,e=rv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rv(t.document)}return e}function D_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aG(t){var e=_I(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kI(n.ownerDocument.documentElement,n)){if(i!==null&&D_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=vP(n,s);var o=vP(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lG=Yo&&"documentMode"in document&&11>=document.documentMode,Ou=null,pS=null,_h=null,mS=!1;function yP(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mS||Ou==null||Ou!==rv(i)||(i=Ou,"selectionStart"in i&&D_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),_h&&np(_h,i)||(_h=i,i=dv(pS,"onSelect"),0<i.length&&(e=new O_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ou)))}function Zm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Iu={animationend:Zm("Animation","AnimationEnd"),animationiteration:Zm("Animation","AnimationIteration"),animationstart:Zm("Animation","AnimationStart"),transitionend:Zm("Transition","TransitionEnd")},Iw={},CI={};Yo&&(CI=document.createElement("div").style,"AnimationEvent"in window||(delete Iu.animationend.animation,delete Iu.animationiteration.animation,delete Iu.animationstart.animation),"TransitionEvent"in window||delete Iu.transitionend.transition);function Uy(t){if(Iw[t])return Iw[t];if(!Iu[t])return t;var e=Iu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in CI)return Iw[t]=e[n];return t}var EI=Uy("animationend"),AI=Uy("animationiteration"),NI=Uy("animationstart"),PI=Uy("transitionend"),MI=new Map,bP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ml(t,e){MI.set(t,e),Zc(e,[t])}for(var jw=0;jw<bP.length;jw++){var Dw=bP[jw],cG=Dw.toLowerCase(),uG=Dw[0].toUpperCase()+Dw.slice(1);Ml(cG,"on"+uG)}Ml(EI,"onAnimationEnd");Ml(AI,"onAnimationIteration");Ml(NI,"onAnimationStart");Ml("dblclick","onDoubleClick");Ml("focusin","onFocus");Ml("focusout","onBlur");Ml(PI,"onTransitionEnd");Ed("onMouseEnter",["mouseout","mouseover"]);Ed("onMouseLeave",["mouseout","mouseover"]);Ed("onPointerEnter",["pointerout","pointerover"]);Ed("onPointerLeave",["pointerout","pointerover"]);Zc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dG=new Set("cancel close invalid load scroll toggle".split(" ").concat(eh));function wP(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,cW(i,e,void 0,t),t.currentTarget=null}function RI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;wP(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;wP(r,a,c),s=l}}}if(ov)throw t=uS,ov=!1,uS=null,t}function Lt(t,e){var n=e[wS];n===void 0&&(n=e[wS]=new Set);var i=t+"__bubble";n.has(i)||(TI(e,t,2,!1),n.add(i))}function Lw(t,e,n){var i=0;e&&(i|=4),TI(n,t,i,e)}var Qm="_reactListening"+Math.random().toString(36).slice(2);function ip(t){if(!t[Qm]){t[Qm]=!0,FO.forEach(function(n){n!=="selectionchange"&&(dG.has(n)||Lw(n,!1,t),Lw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qm]||(e[Qm]=!0,Lw("selectionchange",!1,e))}}function TI(t,e,n,i){switch(mI(e)){case 1:var r=CW;break;case 4:r=EW;break;default:r=R_}n=r.bind(null,e,n,t),r=void 0,!cS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function $w(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=fc(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}tI(function(){var c=s,u=A_(n),d=[];e:{var f=MI.get(t);if(f!==void 0){var p=O_,g=t;switch(t){case"keypress":if(f0(n)===0)break e;case"keydown":case"keyup":p=zW;break;case"focusin":g="focus",p=Rw;break;case"focusout":g="blur",p=Rw;break;case"beforeblur":case"afterblur":p=Rw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=lP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=PW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=HW;break;case EI:case AI:case NI:p=TW;break;case PI:p=GW;break;case"scroll":p=AW;break;case"wheel":p=qW;break;case"copy":case"cut":case"paste":p=IW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=uP}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var w=c,x;w!==null;){x=w;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,y!==null&&(S=Jh(w,y),S!=null&&m.push(rp(w,S,x)))),v)break;w=w.return}0<m.length&&(f=new p(f,g,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==aS&&(g=n.relatedTarget||n.fromElement)&&(fc(g)||g[Xo]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?fc(g):null,g!==null&&(v=Qc(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=lP,S="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=uP,S="onPointerLeave",y="onPointerEnter",w="pointer"),v=p==null?f:ju(p),x=g==null?f:ju(g),f=new m(S,w+"leave",p,n,u),f.target=v,f.relatedTarget=x,S=null,fc(u)===c&&(m=new m(y,w+"enter",g,n,u),m.target=x,m.relatedTarget=v,S=m),v=S,p&&g)t:{for(m=p,y=g,w=0,x=m;x;x=ou(x))w++;for(x=0,S=y;S;S=ou(S))x++;for(;0<w-x;)m=ou(m),w--;for(;0<x-w;)y=ou(y),x--;for(;w--;){if(m===y||y!==null&&m===y.alternate)break t;m=ou(m),y=ou(y)}m=null}else m=null;p!==null&&xP(d,f,p,m,!1),g!==null&&v!==null&&xP(d,v,g,m,!0)}}e:{if(f=c?ju(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=tG;else if(hP(f))if(xI)_=sG;else{_=iG;var E=nG}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=rG);if(_&&(_=_(t,c))){wI(d,_,n,u);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&nS(f,"number",f.value)}switch(E=c?ju(c):window,t){case"focusin":(hP(E)||E.contentEditable==="true")&&(Ou=E,pS=c,_h=null);break;case"focusout":_h=pS=Ou=null;break;case"mousedown":mS=!0;break;case"contextmenu":case"mouseup":case"dragend":mS=!1,yP(d,n,u);break;case"selectionchange":if(lG)break;case"keydown":case"keyup":yP(d,n,u)}var C;if(j_)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Tu?yI(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(vI&&n.locale!=="ko"&&(Tu||N!=="onCompositionStart"?N==="onCompositionEnd"&&Tu&&(C=gI()):(Ba=u,T_="value"in Ba?Ba.value:Ba.textContent,Tu=!0)),E=dv(c,N),0<E.length&&(N=new cP(N,t,null,n,u),d.push({event:N,listeners:E}),C?N.data=C:(C=bI(n),C!==null&&(N.data=C)))),(C=XW?JW(t,n):ZW(t,n))&&(c=dv(c,"onBeforeInput"),0<c.length&&(u=new cP("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}RI(d,e)})}function rp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Jh(t,n),s!=null&&i.unshift(rp(t,s,r)),s=Jh(t,e),s!=null&&i.push(rp(t,s,r))),t=t.return}return i}function ou(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xP(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Jh(n,s),l!=null&&o.unshift(rp(n,l,a))):r||(l=Jh(n,s),l!=null&&o.push(rp(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fG=/\r\n?/g,hG=/\u0000|\uFFFD/g;function SP(t){return(typeof t=="string"?t:""+t).replace(fG,`
`).replace(hG,"")}function eg(t,e,n){if(e=SP(e),SP(t)!==e&&n)throw Error(ae(425))}function fv(){}var gS=null,vS=null;function yS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bS=typeof setTimeout=="function"?setTimeout:void 0,pG=typeof clearTimeout=="function"?clearTimeout:void 0,kP=typeof Promise=="function"?Promise:void 0,mG=typeof queueMicrotask=="function"?queueMicrotask:typeof kP<"u"?function(t){return kP.resolve(null).then(t).catch(gG)}:bS;function gG(t){setTimeout(function(){throw t})}function Fw(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ep(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ep(e)}function nl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _P(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var tf=Math.random().toString(36).slice(2),Ws="__reactFiber$"+tf,sp="__reactProps$"+tf,Xo="__reactContainer$"+tf,wS="__reactEvents$"+tf,vG="__reactListeners$"+tf,yG="__reactHandles$"+tf;function fc(t){var e=t[Ws];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xo]||n[Ws]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_P(t);t!==null;){if(n=t[Ws])return n;t=_P(t)}return e}t=n,n=t.parentNode}return null}function im(t){return t=t[Ws]||t[Xo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ju(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function Vy(t){return t[sp]||null}var xS=[],Du=-1;function Rl(t){return{current:t}}function zt(t){0>Du||(t.current=xS[Du],xS[Du]=null,Du--)}function Dt(t,e){Du++,xS[Du]=t.current,t.current=e}var hl={},ui=Rl(hl),Gi=Rl(!1),Tc=hl;function Ad(t,e){var n=t.type.contextTypes;if(!n)return hl;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ki(t){return t=t.childContextTypes,t!=null}function hv(){zt(Gi),zt(ui)}function CP(t,e,n){if(ui.current!==hl)throw Error(ae(168));Dt(ui,e),Dt(Gi,n)}function OI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ae(108,nW(t)||"Unknown",r));return sn({},n,i)}function pv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hl,Tc=ui.current,Dt(ui,t),Dt(Gi,Gi.current),!0}function EP(t,e,n){var i=t.stateNode;if(!i)throw Error(ae(169));n?(t=OI(t,e,Tc),i.__reactInternalMemoizedMergedChildContext=t,zt(Gi),zt(ui),Dt(ui,t)):zt(Gi),Dt(Gi,n)}var Po=null,Hy=!1,Bw=!1;function II(t){Po===null?Po=[t]:Po.push(t)}function bG(t){Hy=!0,II(t)}function Tl(){if(!Bw&&Po!==null){Bw=!0;var t=0,e=Et;try{var n=Po;for(Et=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Po=null,Hy=!1}catch(r){throw Po!==null&&(Po=Po.slice(t+1)),sI(N_,Tl),r}finally{Et=e,Bw=!1}}return null}var Lu=[],$u=0,mv=null,gv=0,Rr=[],Tr=0,Oc=null,Ho=1,Wo="";function tc(t,e){Lu[$u++]=gv,Lu[$u++]=mv,mv=t,gv=e}function jI(t,e,n){Rr[Tr++]=Ho,Rr[Tr++]=Wo,Rr[Tr++]=Oc,Oc=t;var i=Ho;t=Wo;var r=32-gs(i)-1;i&=~(1<<r),n+=1;var s=32-gs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ho=1<<32-gs(e)+r|n<<r|i,Wo=s+t}else Ho=1<<s|n<<r|i,Wo=t}function L_(t){t.return!==null&&(tc(t,1),jI(t,1,0))}function $_(t){for(;t===mv;)mv=Lu[--$u],Lu[$u]=null,gv=Lu[--$u],Lu[$u]=null;for(;t===Oc;)Oc=Rr[--Tr],Rr[Tr]=null,Wo=Rr[--Tr],Rr[Tr]=null,Ho=Rr[--Tr],Rr[Tr]=null}var mr=null,ur=null,qt=!1,ls=null;function DI(t,e){var n=Dr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function AP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mr=t,ur=nl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mr=t,ur=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Oc!==null?{id:Ho,overflow:Wo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mr=t,ur=null,!0):!1;default:return!1}}function SS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kS(t){if(qt){var e=ur;if(e){var n=e;if(!AP(t,e)){if(SS(t))throw Error(ae(418));e=nl(n.nextSibling);var i=mr;e&&AP(t,e)?DI(i,n):(t.flags=t.flags&-4097|2,qt=!1,mr=t)}}else{if(SS(t))throw Error(ae(418));t.flags=t.flags&-4097|2,qt=!1,mr=t}}}function NP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mr=t}function tg(t){if(t!==mr)return!1;if(!qt)return NP(t),qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yS(t.type,t.memoizedProps)),e&&(e=ur)){if(SS(t))throw LI(),Error(ae(418));for(;e;)DI(t,e),e=nl(e.nextSibling)}if(NP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ur=nl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ur=null}}else ur=mr?nl(t.stateNode.nextSibling):null;return!0}function LI(){for(var t=ur;t;)t=nl(t.nextSibling)}function Nd(){ur=mr=null,qt=!1}function F_(t){ls===null?ls=[t]:ls.push(t)}var wG=sa.ReactCurrentBatchConfig;function Cf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var i=n.stateNode}if(!i)throw Error(ae(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function ng(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function PP(t){var e=t._init;return e(t._payload)}function $I(t){function e(y,w){if(t){var x=y.deletions;x===null?(y.deletions=[w],y.flags|=16):x.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function i(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function r(y,w){return y=ol(y,w),y.index=0,y.sibling=null,y}function s(y,w,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<w?(y.flags|=2,w):x):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,x,S){return w===null||w.tag!==6?(w=Kw(x,y.mode,S),w.return=y,w):(w=r(w,x),w.return=y,w)}function l(y,w,x,S){var _=x.type;return _===Ru?u(y,w,x.props.children,S,x.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Sa&&PP(_)===w.type)?(S=r(w,x.props),S.ref=Cf(y,w,x),S.return=y,S):(S=b0(x.type,x.key,x.props,null,y.mode,S),S.ref=Cf(y,w,x),S.return=y,S)}function c(y,w,x,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=qw(x,y.mode,S),w.return=y,w):(w=r(w,x.children||[]),w.return=y,w)}function u(y,w,x,S,_){return w===null||w.tag!==7?(w=Sc(x,y.mode,S,_),w.return=y,w):(w=r(w,x),w.return=y,w)}function d(y,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Kw(""+w,y.mode,x),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wm:return x=b0(w.type,w.key,w.props,null,y.mode,x),x.ref=Cf(y,null,w),x.return=y,x;case Mu:return w=qw(w,y.mode,x),w.return=y,w;case Sa:var S=w._init;return d(y,S(w._payload),x)}if(Zf(w)||wf(w))return w=Sc(w,y.mode,x,null),w.return=y,w;ng(y,w)}return null}function f(y,w,x,S){var _=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(y,w,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Wm:return x.key===_?l(y,w,x,S):null;case Mu:return x.key===_?c(y,w,x,S):null;case Sa:return _=x._init,f(y,w,_(x._payload),S)}if(Zf(x)||wf(x))return _!==null?null:u(y,w,x,S,null);ng(y,x)}return null}function p(y,w,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(x)||null,a(w,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Wm:return y=y.get(S.key===null?x:S.key)||null,l(w,y,S,_);case Mu:return y=y.get(S.key===null?x:S.key)||null,c(w,y,S,_);case Sa:var E=S._init;return p(y,w,x,E(S._payload),_)}if(Zf(S)||wf(S))return y=y.get(x)||null,u(w,y,S,_,null);ng(w,S)}return null}function g(y,w,x,S){for(var _=null,E=null,C=w,N=w=0,M=null;C!==null&&N<x.length;N++){C.index>N?(M=C,C=null):M=C.sibling;var O=f(y,C,x[N],S);if(O===null){C===null&&(C=M);break}t&&C&&O.alternate===null&&e(y,C),w=s(O,w,N),E===null?_=O:E.sibling=O,E=O,C=M}if(N===x.length)return n(y,C),qt&&tc(y,N),_;if(C===null){for(;N<x.length;N++)C=d(y,x[N],S),C!==null&&(w=s(C,w,N),E===null?_=C:E.sibling=C,E=C);return qt&&tc(y,N),_}for(C=i(y,C);N<x.length;N++)M=p(C,y,N,x[N],S),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?N:M.key),w=s(M,w,N),E===null?_=M:E.sibling=M,E=M);return t&&C.forEach(function(D){return e(y,D)}),qt&&tc(y,N),_}function m(y,w,x,S){var _=wf(x);if(typeof _!="function")throw Error(ae(150));if(x=_.call(x),x==null)throw Error(ae(151));for(var E=_=null,C=w,N=w=0,M=null,O=x.next();C!==null&&!O.done;N++,O=x.next()){C.index>N?(M=C,C=null):M=C.sibling;var D=f(y,C,O.value,S);if(D===null){C===null&&(C=M);break}t&&C&&D.alternate===null&&e(y,C),w=s(D,w,N),E===null?_=D:E.sibling=D,E=D,C=M}if(O.done)return n(y,C),qt&&tc(y,N),_;if(C===null){for(;!O.done;N++,O=x.next())O=d(y,O.value,S),O!==null&&(w=s(O,w,N),E===null?_=O:E.sibling=O,E=O);return qt&&tc(y,N),_}for(C=i(y,C);!O.done;N++,O=x.next())O=p(C,y,N,O.value,S),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?N:O.key),w=s(O,w,N),E===null?_=O:E.sibling=O,E=O);return t&&C.forEach(function(j){return e(y,j)}),qt&&tc(y,N),_}function v(y,w,x,S){if(typeof x=="object"&&x!==null&&x.type===Ru&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Wm:e:{for(var _=x.key,E=w;E!==null;){if(E.key===_){if(_=x.type,_===Ru){if(E.tag===7){n(y,E.sibling),w=r(E,x.props.children),w.return=y,y=w;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Sa&&PP(_)===E.type){n(y,E.sibling),w=r(E,x.props),w.ref=Cf(y,E,x),w.return=y,y=w;break e}n(y,E);break}else e(y,E);E=E.sibling}x.type===Ru?(w=Sc(x.props.children,y.mode,S,x.key),w.return=y,y=w):(S=b0(x.type,x.key,x.props,null,y.mode,S),S.ref=Cf(y,w,x),S.return=y,y=S)}return o(y);case Mu:e:{for(E=x.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(y,w.sibling),w=r(w,x.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=qw(x,y.mode,S),w.return=y,y=w}return o(y);case Sa:return E=x._init,v(y,w,E(x._payload),S)}if(Zf(x))return g(y,w,x,S);if(wf(x))return m(y,w,x,S);ng(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(n(y,w.sibling),w=r(w,x),w.return=y,y=w):(n(y,w),w=Kw(x,y.mode,S),w.return=y,y=w),o(y)):n(y,w)}return v}var Pd=$I(!0),FI=$I(!1),vv=Rl(null),yv=null,Fu=null,B_=null;function z_(){B_=Fu=yv=null}function U_(t){var e=vv.current;zt(vv),t._currentValue=e}function _S(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function td(t,e){yv=t,B_=Fu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Hi=!0),t.firstContext=null)}function Kr(t){var e=t._currentValue;if(B_!==t)if(t={context:t,memoizedValue:e,next:null},Fu===null){if(yv===null)throw Error(ae(308));Fu=t,yv.dependencies={lanes:0,firstContext:t}}else Fu=Fu.next=t;return e}var hc=null;function V_(t){hc===null?hc=[t]:hc.push(t)}function BI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,V_(e)):(n.next=r.next,r.next=n),e.interleaved=n,Jo(t,i)}function Jo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ka=!1;function H_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Go(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function il(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,vt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Jo(t,n)}return r=i.interleaved,r===null?(e.next=e,V_(i)):(e.next=r.next,r.next=e),i.interleaved=e,Jo(t,n)}function h0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,P_(t,n)}}function MP(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bv(t,e,n,i){var r=t.updateQueue;ka=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=sn({},d,f);break e;case 2:ka=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);jc|=o,t.lanes=o,t.memoizedState=d}}function RP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ae(191,r));r.call(i)}}}var rm={},oo=Rl(rm),op=Rl(rm),ap=Rl(rm);function pc(t){if(t===rm)throw Error(ae(174));return t}function W_(t,e){switch(Dt(ap,e),Dt(op,t),Dt(oo,rm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rS(e,t)}zt(oo),Dt(oo,e)}function Md(){zt(oo),zt(op),zt(ap)}function UI(t){pc(ap.current);var e=pc(oo.current),n=rS(e,t.type);e!==n&&(Dt(op,t),Dt(oo,n))}function G_(t){op.current===t&&(zt(oo),zt(op))}var Zt=Rl(0);function wv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zw=[];function K_(){for(var t=0;t<zw.length;t++)zw[t]._workInProgressVersionPrimary=null;zw.length=0}var p0=sa.ReactCurrentDispatcher,Uw=sa.ReactCurrentBatchConfig,Ic=0,rn=null,xn=null,Rn=null,xv=!1,Ch=!1,lp=0,xG=0;function ni(){throw Error(ae(321))}function q_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ys(t[n],e[n]))return!1;return!0}function Y_(t,e,n,i,r,s){if(Ic=s,rn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,p0.current=t===null||t.memoizedState===null?CG:EG,t=n(i,r),Ch){s=0;do{if(Ch=!1,lp=0,25<=s)throw Error(ae(301));s+=1,Rn=xn=null,e.updateQueue=null,p0.current=AG,t=n(i,r)}while(Ch)}if(p0.current=Sv,e=xn!==null&&xn.next!==null,Ic=0,Rn=xn=rn=null,xv=!1,e)throw Error(ae(300));return t}function X_(){var t=lp!==0;return lp=0,t}function Ds(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?rn.memoizedState=Rn=t:Rn=Rn.next=t,Rn}function qr(){if(xn===null){var t=rn.alternate;t=t!==null?t.memoizedState:null}else t=xn.next;var e=Rn===null?rn.memoizedState:Rn.next;if(e!==null)Rn=e,xn=t;else{if(t===null)throw Error(ae(310));xn=t,t={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},Rn===null?rn.memoizedState=Rn=t:Rn=Rn.next=t}return Rn}function cp(t,e){return typeof e=="function"?e(t):e}function Vw(t){var e=qr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=xn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ic&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,rn.lanes|=u,jc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,ys(i,e.memoizedState)||(Hi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,rn.lanes|=s,jc|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hw(t){var e=qr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ys(s,e.memoizedState)||(Hi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function VI(){}function HI(t,e){var n=rn,i=qr(),r=e(),s=!ys(i.memoizedState,r);if(s&&(i.memoizedState=r,Hi=!0),i=i.queue,J_(KI.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Rn!==null&&Rn.memoizedState.tag&1){if(n.flags|=2048,up(9,GI.bind(null,n,i,r,e),void 0,null),jn===null)throw Error(ae(349));Ic&30||WI(n,e,r)}return r}function WI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rn.updateQueue,e===null?(e={lastEffect:null,stores:null},rn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function GI(t,e,n,i){e.value=n,e.getSnapshot=i,qI(e)&&YI(t)}function KI(t,e,n){return n(function(){qI(e)&&YI(t)})}function qI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ys(t,n)}catch{return!0}}function YI(t){var e=Jo(t,1);e!==null&&vs(e,t,1,-1)}function TP(t){var e=Ds();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cp,lastRenderedState:t},e.queue=t,t=t.dispatch=_G.bind(null,rn,t),[e.memoizedState,t]}function up(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=rn.updateQueue,e===null?(e={lastEffect:null,stores:null},rn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function XI(){return qr().memoizedState}function m0(t,e,n,i){var r=Ds();rn.flags|=t,r.memoizedState=up(1|e,n,void 0,i===void 0?null:i)}function Wy(t,e,n,i){var r=qr();i=i===void 0?null:i;var s=void 0;if(xn!==null){var o=xn.memoizedState;if(s=o.destroy,i!==null&&q_(i,o.deps)){r.memoizedState=up(e,n,s,i);return}}rn.flags|=t,r.memoizedState=up(1|e,n,s,i)}function OP(t,e){return m0(8390656,8,t,e)}function J_(t,e){return Wy(2048,8,t,e)}function JI(t,e){return Wy(4,2,t,e)}function ZI(t,e){return Wy(4,4,t,e)}function QI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ej(t,e,n){return n=n!=null?n.concat([t]):null,Wy(4,4,QI.bind(null,e,t),n)}function Z_(){}function tj(t,e){var n=qr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&q_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function nj(t,e){var n=qr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&q_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function ij(t,e,n){return Ic&21?(ys(n,e)||(n=lI(),rn.lanes|=n,jc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Hi=!0),t.memoizedState=n)}function SG(t,e){var n=Et;Et=n!==0&&4>n?n:4,t(!0);var i=Uw.transition;Uw.transition={};try{t(!1),e()}finally{Et=n,Uw.transition=i}}function rj(){return qr().memoizedState}function kG(t,e,n){var i=sl(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},sj(t))oj(e,n);else if(n=BI(t,e,n,i),n!==null){var r=yi();vs(n,t,i,r),aj(n,e,i)}}function _G(t,e,n){var i=sl(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(sj(t))oj(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ys(a,o)){var l=e.interleaved;l===null?(r.next=r,V_(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=BI(t,e,r,i),n!==null&&(r=yi(),vs(n,t,i,r),aj(n,e,i))}}function sj(t){var e=t.alternate;return t===rn||e!==null&&e===rn}function oj(t,e){Ch=xv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function aj(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,P_(t,n)}}var Sv={readContext:Kr,useCallback:ni,useContext:ni,useEffect:ni,useImperativeHandle:ni,useInsertionEffect:ni,useLayoutEffect:ni,useMemo:ni,useReducer:ni,useRef:ni,useState:ni,useDebugValue:ni,useDeferredValue:ni,useTransition:ni,useMutableSource:ni,useSyncExternalStore:ni,useId:ni,unstable_isNewReconciler:!1},CG={readContext:Kr,useCallback:function(t,e){return Ds().memoizedState=[t,e===void 0?null:e],t},useContext:Kr,useEffect:OP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,m0(4194308,4,QI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return m0(4194308,4,t,e)},useInsertionEffect:function(t,e){return m0(4,2,t,e)},useMemo:function(t,e){var n=Ds();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ds();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=kG.bind(null,rn,t),[i.memoizedState,t]},useRef:function(t){var e=Ds();return t={current:t},e.memoizedState=t},useState:TP,useDebugValue:Z_,useDeferredValue:function(t){return Ds().memoizedState=t},useTransition:function(){var t=TP(!1),e=t[0];return t=SG.bind(null,t[1]),Ds().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=rn,r=Ds();if(qt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),jn===null)throw Error(ae(349));Ic&30||WI(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,OP(KI.bind(null,i,s,t),[t]),i.flags|=2048,up(9,GI.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ds(),e=jn.identifierPrefix;if(qt){var n=Wo,i=Ho;n=(i&~(1<<32-gs(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=lp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EG={readContext:Kr,useCallback:tj,useContext:Kr,useEffect:J_,useImperativeHandle:ej,useInsertionEffect:JI,useLayoutEffect:ZI,useMemo:nj,useReducer:Vw,useRef:XI,useState:function(){return Vw(cp)},useDebugValue:Z_,useDeferredValue:function(t){var e=qr();return ij(e,xn.memoizedState,t)},useTransition:function(){var t=Vw(cp)[0],e=qr().memoizedState;return[t,e]},useMutableSource:VI,useSyncExternalStore:HI,useId:rj,unstable_isNewReconciler:!1},AG={readContext:Kr,useCallback:tj,useContext:Kr,useEffect:J_,useImperativeHandle:ej,useInsertionEffect:JI,useLayoutEffect:ZI,useMemo:nj,useReducer:Hw,useRef:XI,useState:function(){return Hw(cp)},useDebugValue:Z_,useDeferredValue:function(t){var e=qr();return xn===null?e.memoizedState=t:ij(e,xn.memoizedState,t)},useTransition:function(){var t=Hw(cp)[0],e=qr().memoizedState;return[t,e]},useMutableSource:VI,useSyncExternalStore:HI,useId:rj,unstable_isNewReconciler:!1};function is(t,e){if(t&&t.defaultProps){e=sn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function CS(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:sn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gy={isMounted:function(t){return(t=t._reactInternals)?Qc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=yi(),r=sl(t),s=Go(i,r);s.payload=e,n!=null&&(s.callback=n),e=il(t,s,r),e!==null&&(vs(e,t,r,i),h0(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=yi(),r=sl(t),s=Go(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=il(t,s,r),e!==null&&(vs(e,t,r,i),h0(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yi(),i=sl(t),r=Go(n,i);r.tag=2,e!=null&&(r.callback=e),e=il(t,r,i),e!==null&&(vs(e,t,i,n),h0(e,t,i))}};function IP(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!np(n,i)||!np(r,s):!0}function lj(t,e,n){var i=!1,r=hl,s=e.contextType;return typeof s=="object"&&s!==null?s=Kr(s):(r=Ki(e)?Tc:ui.current,i=e.contextTypes,s=(i=i!=null)?Ad(t,r):hl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gy,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function jP(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Gy.enqueueReplaceState(e,e.state,null)}function ES(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},H_(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Kr(s):(s=Ki(e)?Tc:ui.current,r.context=Ad(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(CS(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Gy.enqueueReplaceState(r,r.state,null),bv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Rd(t,e){try{var n="",i=e;do n+=tW(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Ww(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function AS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NG=typeof WeakMap=="function"?WeakMap:Map;function cj(t,e,n){n=Go(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){_v||(_v=!0,LS=i),AS(t,e)},n}function uj(t,e,n){n=Go(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){AS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){AS(t,e),typeof i!="function"&&(rl===null?rl=new Set([this]):rl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function DP(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new NG;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=UG.bind(null,t,e,n),e.then(t,t))}function LP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $P(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Go(-1,1),e.tag=2,il(n,e,1))),n.lanes|=1),t)}var PG=sa.ReactCurrentOwner,Hi=!1;function vi(t,e,n,i){e.child=t===null?FI(e,null,n,i):Pd(e,t.child,n,i)}function FP(t,e,n,i,r){n=n.render;var s=e.ref;return td(e,r),i=Y_(t,e,n,i,s,r),n=X_(),t!==null&&!Hi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Zo(t,e,r)):(qt&&n&&L_(e),e.flags|=1,vi(t,e,i,r),e.child)}function BP(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!oC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,dj(t,e,s,i,r)):(t=b0(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:np,n(o,i)&&t.ref===e.ref)return Zo(t,e,r)}return e.flags|=1,t=ol(s,i),t.ref=e.ref,t.return=e,e.child=t}function dj(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(np(s,i)&&t.ref===e.ref)if(Hi=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Hi=!0);else return e.lanes=t.lanes,Zo(t,e,r)}return NS(t,e,n,i,r)}function fj(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(zu,rr),rr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dt(zu,rr),rr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Dt(zu,rr),rr|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Dt(zu,rr),rr|=i;return vi(t,e,r,n),e.child}function hj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function NS(t,e,n,i,r){var s=Ki(n)?Tc:ui.current;return s=Ad(e,s),td(e,r),n=Y_(t,e,n,i,s,r),i=X_(),t!==null&&!Hi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Zo(t,e,r)):(qt&&i&&L_(e),e.flags|=1,vi(t,e,n,r),e.child)}function zP(t,e,n,i,r){if(Ki(n)){var s=!0;pv(e)}else s=!1;if(td(e,r),e.stateNode===null)g0(t,e),lj(e,n,i),ES(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Kr(c):(c=Ki(n)?Tc:ui.current,c=Ad(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&jP(e,o,i,c),ka=!1;var f=e.memoizedState;o.state=f,bv(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Gi.current||ka?(typeof u=="function"&&(CS(e,n,u,i),l=e.memoizedState),(a=ka||IP(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,zI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:is(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Kr(l):(l=Ki(n)?Tc:ui.current,l=Ad(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&jP(e,o,i,l),ka=!1,f=e.memoizedState,o.state=f,bv(e,i,o,r);var g=e.memoizedState;a!==d||f!==g||Gi.current||ka?(typeof p=="function"&&(CS(e,n,p,i),g=e.memoizedState),(c=ka||IP(e,n,c,i,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return PS(t,e,n,i,s,r)}function PS(t,e,n,i,r,s){hj(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&EP(e,n,!1),Zo(t,e,s);i=e.stateNode,PG.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Pd(e,t.child,null,s),e.child=Pd(e,null,a,s)):vi(t,e,a,s),e.memoizedState=i.state,r&&EP(e,n,!0),e.child}function pj(t){var e=t.stateNode;e.pendingContext?CP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&CP(t,e.context,!1),W_(t,e.containerInfo)}function UP(t,e,n,i,r){return Nd(),F_(r),e.flags|=256,vi(t,e,n,i),e.child}var MS={dehydrated:null,treeContext:null,retryLane:0};function RS(t){return{baseLanes:t,cachePool:null,transitions:null}}function mj(t,e,n){var i=e.pendingProps,r=Zt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Dt(Zt,r&1),t===null)return kS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yy(o,i,0,null),t=Sc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=RS(n),e.memoizedState=MS,t):Q_(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return MG(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ol(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=ol(a,s):(s=Sc(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?RS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=MS,i}return s=t.child,t=s.sibling,i=ol(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Q_(t,e){return e=Yy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ig(t,e,n,i){return i!==null&&F_(i),Pd(e,t.child,null,n),t=Q_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MG(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Ww(Error(ae(422))),ig(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Yy({mode:"visible",children:i.children},r,0,null),s=Sc(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Pd(e,t.child,null,o),e.child.memoizedState=RS(o),e.memoizedState=MS,s);if(!(e.mode&1))return ig(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ae(419)),i=Ww(s,i,void 0),ig(t,e,o,i)}if(a=(o&t.childLanes)!==0,Hi||a){if(i=jn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Jo(t,r),vs(i,t,r,-1))}return sC(),i=Ww(Error(ae(421))),ig(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=VG.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,ur=nl(r.nextSibling),mr=e,qt=!0,ls=null,t!==null&&(Rr[Tr++]=Ho,Rr[Tr++]=Wo,Rr[Tr++]=Oc,Ho=t.id,Wo=t.overflow,Oc=e),e=Q_(e,i.children),e.flags|=4096,e)}function VP(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),_S(t.return,e,n)}function Gw(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function gj(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(vi(t,e,i.children,n),i=Zt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&VP(t,n,e);else if(t.tag===19)VP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Dt(Zt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&wv(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Gw(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&wv(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Gw(e,!0,n,null,s);break;case"together":Gw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function g0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=ol(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ol(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RG(t,e,n){switch(e.tag){case 3:pj(e),Nd();break;case 5:UI(e);break;case 1:Ki(e.type)&&pv(e);break;case 4:W_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Dt(vv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Dt(Zt,Zt.current&1),e.flags|=128,null):n&e.child.childLanes?mj(t,e,n):(Dt(Zt,Zt.current&1),t=Zo(t,e,n),t!==null?t.sibling:null);Dt(Zt,Zt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return gj(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Dt(Zt,Zt.current),i)break;return null;case 22:case 23:return e.lanes=0,fj(t,e,n)}return Zo(t,e,n)}var vj,TS,yj,bj;vj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};TS=function(){};yj=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,pc(oo.current);var s=null;switch(n){case"input":r=eS(t,r),i=eS(t,i),s=[];break;case"select":r=sn({},r,{value:void 0}),i=sn({},i,{value:void 0}),s=[];break;case"textarea":r=iS(t,r),i=iS(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=fv)}sS(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Yh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Yh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Lt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};bj=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ef(t,e){if(!qt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ii(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function TG(t,e,n){var i=e.pendingProps;switch($_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ii(e),null;case 1:return Ki(e.type)&&hv(),ii(e),null;case 3:return i=e.stateNode,Md(),zt(Gi),zt(ui),K_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(tg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ls!==null&&(BS(ls),ls=null))),TS(t,e),ii(e),null;case 5:G_(e);var r=pc(ap.current);if(n=e.type,t!==null&&e.stateNode!=null)yj(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ae(166));return ii(e),null}if(t=pc(oo.current),tg(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Ws]=e,i[sp]=s,t=(e.mode&1)!==0,n){case"dialog":Lt("cancel",i),Lt("close",i);break;case"iframe":case"object":case"embed":Lt("load",i);break;case"video":case"audio":for(r=0;r<eh.length;r++)Lt(eh[r],i);break;case"source":Lt("error",i);break;case"img":case"image":case"link":Lt("error",i),Lt("load",i);break;case"details":Lt("toggle",i);break;case"input":ZN(i,s),Lt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Lt("invalid",i);break;case"textarea":eP(i,s),Lt("invalid",i)}sS(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&eg(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&eg(i.textContent,a,t),r=["children",""+a]):Yh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Lt("scroll",i)}switch(n){case"input":Gm(i),QN(i,s,!0);break;case"textarea":Gm(i),tP(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=fv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=KO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Ws]=e,t[sp]=i,vj(t,e,!1,!1),e.stateNode=t;e:{switch(o=oS(n,i),n){case"dialog":Lt("cancel",t),Lt("close",t),r=i;break;case"iframe":case"object":case"embed":Lt("load",t),r=i;break;case"video":case"audio":for(r=0;r<eh.length;r++)Lt(eh[r],t);r=i;break;case"source":Lt("error",t),r=i;break;case"img":case"image":case"link":Lt("error",t),Lt("load",t),r=i;break;case"details":Lt("toggle",t),r=i;break;case"input":ZN(t,i),r=eS(t,i),Lt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=sn({},i,{value:void 0}),Lt("invalid",t);break;case"textarea":eP(t,i),r=iS(t,i),Lt("invalid",t);break;default:r=i}sS(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?XO(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&qO(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Xh(t,l):typeof l=="number"&&Xh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Lt("scroll",t):l!=null&&k_(t,s,l,o))}switch(n){case"input":Gm(t),QN(t,i,!1);break;case"textarea":Gm(t),tP(t);break;case"option":i.value!=null&&t.setAttribute("value",""+fl(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Ju(t,!!i.multiple,s,!1):i.defaultValue!=null&&Ju(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=fv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ii(e),null;case 6:if(t&&e.stateNode!=null)bj(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ae(166));if(n=pc(ap.current),pc(oo.current),tg(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ws]=e,(s=i.nodeValue!==n)&&(t=mr,t!==null))switch(t.tag){case 3:eg(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&eg(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ws]=e,e.stateNode=i}return ii(e),null;case 13:if(zt(Zt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qt&&ur!==null&&e.mode&1&&!(e.flags&128))LI(),Nd(),e.flags|=98560,s=!1;else if(s=tg(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Ws]=e}else Nd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ii(e),s=!1}else ls!==null&&(BS(ls),ls=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Zt.current&1?En===0&&(En=3):sC())),e.updateQueue!==null&&(e.flags|=4),ii(e),null);case 4:return Md(),TS(t,e),t===null&&ip(e.stateNode.containerInfo),ii(e),null;case 10:return U_(e.type._context),ii(e),null;case 17:return Ki(e.type)&&hv(),ii(e),null;case 19:if(zt(Zt),s=e.memoizedState,s===null)return ii(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Ef(s,!1);else{if(En!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wv(t),o!==null){for(e.flags|=128,Ef(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Dt(Zt,Zt.current&1|2),e.child}t=t.sibling}s.tail!==null&&hn()>Td&&(e.flags|=128,i=!0,Ef(s,!1),e.lanes=4194304)}else{if(!i)if(t=wv(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ef(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!qt)return ii(e),null}else 2*hn()-s.renderingStartTime>Td&&n!==1073741824&&(e.flags|=128,i=!0,Ef(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=hn(),e.sibling=null,n=Zt.current,Dt(Zt,i?n&1|2:n&1),e):(ii(e),null);case 22:case 23:return rC(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?rr&1073741824&&(ii(e),e.subtreeFlags&6&&(e.flags|=8192)):ii(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function OG(t,e){switch($_(e),e.tag){case 1:return Ki(e.type)&&hv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Md(),zt(Gi),zt(ui),K_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return G_(e),null;case 13:if(zt(Zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Nd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zt(Zt),null;case 4:return Md(),null;case 10:return U_(e.type._context),null;case 22:case 23:return rC(),null;case 24:return null;default:return null}}var rg=!1,ai=!1,IG=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function Bu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){an(t,e,i)}else n.current=null}function OS(t,e,n){try{n()}catch(i){an(t,e,i)}}var HP=!1;function jG(t,e){if(gS=cv,t=_I(),D_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(vS={focusedElem:t,selectionRange:n},cv=!1,Ne=e;Ne!==null;)if(e=Ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ne=t;else for(;Ne!==null;){e=Ne;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:is(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(S){an(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Ne=t;break}Ne=e.return}return g=HP,HP=!1,g}function Eh(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&OS(e,n,s)}r=r.next}while(r!==i)}}function Ky(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function IS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wj(t){var e=t.alternate;e!==null&&(t.alternate=null,wj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ws],delete e[sp],delete e[wS],delete e[vG],delete e[yG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xj(t){return t.tag===5||t.tag===3||t.tag===4}function WP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fv));else if(i!==4&&(t=t.child,t!==null))for(jS(t,e,n),t=t.sibling;t!==null;)jS(t,e,n),t=t.sibling}function DS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(DS(t,e,n),t=t.sibling;t!==null;)DS(t,e,n),t=t.sibling}var Bn=null,as=!1;function ma(t,e,n){for(n=n.child;n!==null;)Sj(t,e,n),n=n.sibling}function Sj(t,e,n){if(so&&typeof so.onCommitFiberUnmount=="function")try{so.onCommitFiberUnmount(Fy,n)}catch{}switch(n.tag){case 5:ai||Bu(n,e);case 6:var i=Bn,r=as;Bn=null,ma(t,e,n),Bn=i,as=r,Bn!==null&&(as?(t=Bn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bn.removeChild(n.stateNode));break;case 18:Bn!==null&&(as?(t=Bn,n=n.stateNode,t.nodeType===8?Fw(t.parentNode,n):t.nodeType===1&&Fw(t,n),ep(t)):Fw(Bn,n.stateNode));break;case 4:i=Bn,r=as,Bn=n.stateNode.containerInfo,as=!0,ma(t,e,n),Bn=i,as=r;break;case 0:case 11:case 14:case 15:if(!ai&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&OS(n,e,o),r=r.next}while(r!==i)}ma(t,e,n);break;case 1:if(!ai&&(Bu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){an(n,e,a)}ma(t,e,n);break;case 21:ma(t,e,n);break;case 22:n.mode&1?(ai=(i=ai)||n.memoizedState!==null,ma(t,e,n),ai=i):ma(t,e,n);break;default:ma(t,e,n)}}function GP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new IG),e.forEach(function(i){var r=HG.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Qr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bn=a.stateNode,as=!1;break e;case 3:Bn=a.stateNode.containerInfo,as=!0;break e;case 4:Bn=a.stateNode.containerInfo,as=!0;break e}a=a.return}if(Bn===null)throw Error(ae(160));Sj(s,o,r),Bn=null,as=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){an(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kj(e,t),e=e.sibling}function kj(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qr(e,t),As(t),i&4){try{Eh(3,t,t.return),Ky(3,t)}catch(m){an(t,t.return,m)}try{Eh(5,t,t.return)}catch(m){an(t,t.return,m)}}break;case 1:Qr(e,t),As(t),i&512&&n!==null&&Bu(n,n.return);break;case 5:if(Qr(e,t),As(t),i&512&&n!==null&&Bu(n,n.return),t.flags&32){var r=t.stateNode;try{Xh(r,"")}catch(m){an(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&WO(r,s),oS(a,o);var c=oS(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?XO(r,d):u==="dangerouslySetInnerHTML"?qO(r,d):u==="children"?Xh(r,d):k_(r,u,d,c)}switch(a){case"input":tS(r,s);break;case"textarea":GO(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Ju(r,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ju(r,!!s.multiple,s.defaultValue,!0):Ju(r,!!s.multiple,s.multiple?[]:"",!1))}r[sp]=s}catch(m){an(t,t.return,m)}}break;case 6:if(Qr(e,t),As(t),i&4){if(t.stateNode===null)throw Error(ae(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){an(t,t.return,m)}}break;case 3:if(Qr(e,t),As(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ep(e.containerInfo)}catch(m){an(t,t.return,m)}break;case 4:Qr(e,t),As(t);break;case 13:Qr(e,t),As(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(nC=hn())),i&4&&GP(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ai=(c=ai)||u,Qr(e,t),ai=c):Qr(e,t),As(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ne=t,u=t.child;u!==null;){for(d=Ne=u;Ne!==null;){switch(f=Ne,p=f.child,f.tag){case 0:case 11:case 14:case 15:Eh(4,f,f.return);break;case 1:Bu(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){an(i,n,m)}}break;case 5:Bu(f,f.return);break;case 22:if(f.memoizedState!==null){qP(d);continue}}p!==null?(p.return=f,Ne=p):qP(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=YO("display",o))}catch(m){an(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){an(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qr(e,t),As(t),i&4&&GP(t);break;case 21:break;default:Qr(e,t),As(t)}}function As(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xj(n)){var i=n;break e}n=n.return}throw Error(ae(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Xh(r,""),i.flags&=-33);var s=WP(t);DS(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=WP(t);jS(t,a,o);break;default:throw Error(ae(161))}}catch(l){an(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DG(t,e,n){Ne=t,_j(t)}function _j(t,e,n){for(var i=(t.mode&1)!==0;Ne!==null;){var r=Ne,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||rg;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||ai;a=rg;var c=ai;if(rg=o,(ai=l)&&!c)for(Ne=r;Ne!==null;)o=Ne,l=o.child,o.tag===22&&o.memoizedState!==null?YP(r):l!==null?(l.return=o,Ne=l):YP(r);for(;s!==null;)Ne=s,_j(s),s=s.sibling;Ne=r,rg=a,ai=c}KP(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ne=s):KP(t)}}function KP(t){for(;Ne!==null;){var e=Ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ai||Ky(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ai)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:is(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&RP(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}RP(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ep(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}ai||e.flags&512&&IS(e)}catch(f){an(e,e.return,f)}}if(e===t){Ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function qP(t){for(;Ne!==null;){var e=Ne;if(e===t){Ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function YP(t){for(;Ne!==null;){var e=Ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ky(4,e)}catch(l){an(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){an(e,r,l)}}var s=e.return;try{IS(e)}catch(l){an(e,s,l)}break;case 5:var o=e.return;try{IS(e)}catch(l){an(e,o,l)}}}catch(l){an(e,e.return,l)}if(e===t){Ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ne=a;break}Ne=e.return}}var LG=Math.ceil,kv=sa.ReactCurrentDispatcher,eC=sa.ReactCurrentOwner,Ur=sa.ReactCurrentBatchConfig,vt=0,jn=null,yn=null,Jn=0,rr=0,zu=Rl(0),En=0,dp=null,jc=0,qy=0,tC=0,Ah=null,Fi=null,nC=0,Td=1/0,Co=null,_v=!1,LS=null,rl=null,sg=!1,za=null,Cv=0,Nh=0,$S=null,v0=-1,y0=0;function yi(){return vt&6?hn():v0!==-1?v0:v0=hn()}function sl(t){return t.mode&1?vt&2&&Jn!==0?Jn&-Jn:wG.transition!==null?(y0===0&&(y0=lI()),y0):(t=Et,t!==0||(t=window.event,t=t===void 0?16:mI(t.type)),t):1}function vs(t,e,n,i){if(50<Nh)throw Nh=0,$S=null,Error(ae(185));tm(t,n,i),(!(vt&2)||t!==jn)&&(t===jn&&(!(vt&2)&&(qy|=n),En===4&&Oa(t,Jn)),qi(t,i),n===1&&vt===0&&!(e.mode&1)&&(Td=hn()+500,Hy&&Tl()))}function qi(t,e){var n=t.callbackNode;wW(t,e);var i=lv(t,t===jn?Jn:0);if(i===0)n!==null&&rP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&rP(n),e===1)t.tag===0?bG(XP.bind(null,t)):II(XP.bind(null,t)),mG(function(){!(vt&6)&&Tl()}),n=null;else{switch(cI(i)){case 1:n=N_;break;case 4:n=oI;break;case 16:n=av;break;case 536870912:n=aI;break;default:n=av}n=Tj(n,Cj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Cj(t,e){if(v0=-1,y0=0,vt&6)throw Error(ae(327));var n=t.callbackNode;if(nd()&&t.callbackNode!==n)return null;var i=lv(t,t===jn?Jn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ev(t,i);else{e=i;var r=vt;vt|=2;var s=Aj();(jn!==t||Jn!==e)&&(Co=null,Td=hn()+500,xc(t,e));do try{BG();break}catch(a){Ej(t,a)}while(!0);z_(),kv.current=s,vt=r,yn!==null?e=0:(jn=null,Jn=0,e=En)}if(e!==0){if(e===2&&(r=dS(t),r!==0&&(i=r,e=FS(t,r))),e===1)throw n=dp,xc(t,0),Oa(t,i),qi(t,hn()),n;if(e===6)Oa(t,i);else{if(r=t.current.alternate,!(i&30)&&!$G(r)&&(e=Ev(t,i),e===2&&(s=dS(t),s!==0&&(i=s,e=FS(t,s))),e===1))throw n=dp,xc(t,0),Oa(t,i),qi(t,hn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ae(345));case 2:nc(t,Fi,Co);break;case 3:if(Oa(t,i),(i&130023424)===i&&(e=nC+500-hn(),10<e)){if(lv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){yi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=bS(nc.bind(null,t,Fi,Co),e);break}nc(t,Fi,Co);break;case 4:if(Oa(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-gs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=hn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*LG(i/1960))-i,10<i){t.timeoutHandle=bS(nc.bind(null,t,Fi,Co),i);break}nc(t,Fi,Co);break;case 5:nc(t,Fi,Co);break;default:throw Error(ae(329))}}}return qi(t,hn()),t.callbackNode===n?Cj.bind(null,t):null}function FS(t,e){var n=Ah;return t.current.memoizedState.isDehydrated&&(xc(t,e).flags|=256),t=Ev(t,e),t!==2&&(e=Fi,Fi=n,e!==null&&BS(e)),t}function BS(t){Fi===null?Fi=t:Fi.push.apply(Fi,t)}function $G(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ys(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oa(t,e){for(e&=~tC,e&=~qy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gs(e),i=1<<n;t[n]=-1,e&=~i}}function XP(t){if(vt&6)throw Error(ae(327));nd();var e=lv(t,0);if(!(e&1))return qi(t,hn()),null;var n=Ev(t,e);if(t.tag!==0&&n===2){var i=dS(t);i!==0&&(e=i,n=FS(t,i))}if(n===1)throw n=dp,xc(t,0),Oa(t,e),qi(t,hn()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,nc(t,Fi,Co),qi(t,hn()),null}function iC(t,e){var n=vt;vt|=1;try{return t(e)}finally{vt=n,vt===0&&(Td=hn()+500,Hy&&Tl())}}function Dc(t){za!==null&&za.tag===0&&!(vt&6)&&nd();var e=vt;vt|=1;var n=Ur.transition,i=Et;try{if(Ur.transition=null,Et=1,t)return t()}finally{Et=i,Ur.transition=n,vt=e,!(vt&6)&&Tl()}}function rC(){rr=zu.current,zt(zu)}function xc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pG(n)),yn!==null)for(n=yn.return;n!==null;){var i=n;switch($_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&hv();break;case 3:Md(),zt(Gi),zt(ui),K_();break;case 5:G_(i);break;case 4:Md();break;case 13:zt(Zt);break;case 19:zt(Zt);break;case 10:U_(i.type._context);break;case 22:case 23:rC()}n=n.return}if(jn=t,yn=t=ol(t.current,null),Jn=rr=e,En=0,dp=null,tC=qy=jc=0,Fi=Ah=null,hc!==null){for(e=0;e<hc.length;e++)if(n=hc[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}hc=null}return t}function Ej(t,e){do{var n=yn;try{if(z_(),p0.current=Sv,xv){for(var i=rn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}xv=!1}if(Ic=0,Rn=xn=rn=null,Ch=!1,lp=0,eC.current=null,n===null||n.return===null){En=1,dp=e,yn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Jn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=LP(o);if(p!==null){p.flags&=-257,$P(p,o,a,s,e),p.mode&1&&DP(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){DP(s,c,e),sC();break e}l=Error(ae(426))}}else if(qt&&a.mode&1){var v=LP(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),$P(v,o,a,s,e),F_(Rd(l,a));break e}}s=l=Rd(l,a),En!==4&&(En=2),Ah===null?Ah=[s]:Ah.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=cj(s,l,e);MP(s,y);break e;case 1:a=l;var w=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(rl===null||!rl.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=uj(s,a,e);MP(s,S);break e}}s=s.return}while(s!==null)}Pj(n)}catch(_){e=_,yn===n&&n!==null&&(yn=n=n.return);continue}break}while(!0)}function Aj(){var t=kv.current;return kv.current=Sv,t===null?Sv:t}function sC(){(En===0||En===3||En===2)&&(En=4),jn===null||!(jc&268435455)&&!(qy&268435455)||Oa(jn,Jn)}function Ev(t,e){var n=vt;vt|=2;var i=Aj();(jn!==t||Jn!==e)&&(Co=null,xc(t,e));do try{FG();break}catch(r){Ej(t,r)}while(!0);if(z_(),vt=n,kv.current=i,yn!==null)throw Error(ae(261));return jn=null,Jn=0,En}function FG(){for(;yn!==null;)Nj(yn)}function BG(){for(;yn!==null&&!dW();)Nj(yn)}function Nj(t){var e=Rj(t.alternate,t,rr);t.memoizedProps=t.pendingProps,e===null?Pj(t):yn=e,eC.current=null}function Pj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OG(n,e),n!==null){n.flags&=32767,yn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{En=6,yn=null;return}}else if(n=TG(n,e,rr),n!==null){yn=n;return}if(e=e.sibling,e!==null){yn=e;return}yn=e=t}while(e!==null);En===0&&(En=5)}function nc(t,e,n){var i=Et,r=Ur.transition;try{Ur.transition=null,Et=1,zG(t,e,n,i)}finally{Ur.transition=r,Et=i}return null}function zG(t,e,n,i){do nd();while(za!==null);if(vt&6)throw Error(ae(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(xW(t,s),t===jn&&(yn=jn=null,Jn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sg||(sg=!0,Tj(av,function(){return nd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ur.transition,Ur.transition=null;var o=Et;Et=1;var a=vt;vt|=4,eC.current=null,jG(t,n),kj(n,t),aG(vS),cv=!!gS,vS=gS=null,t.current=n,DG(n),fW(),vt=a,Et=o,Ur.transition=s}else t.current=n;if(sg&&(sg=!1,za=t,Cv=r),s=t.pendingLanes,s===0&&(rl=null),mW(n.stateNode),qi(t,hn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(_v)throw _v=!1,t=LS,LS=null,t;return Cv&1&&t.tag!==0&&nd(),s=t.pendingLanes,s&1?t===$S?Nh++:(Nh=0,$S=t):Nh=0,Tl(),null}function nd(){if(za!==null){var t=cI(Cv),e=Ur.transition,n=Et;try{if(Ur.transition=null,Et=16>t?16:t,za===null)var i=!1;else{if(t=za,za=null,Cv=0,vt&6)throw Error(ae(331));var r=vt;for(vt|=4,Ne=t.current;Ne!==null;){var s=Ne,o=s.child;if(Ne.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ne=c;Ne!==null;){var u=Ne;switch(u.tag){case 0:case 11:case 15:Eh(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ne=d;else for(;Ne!==null;){u=Ne;var f=u.sibling,p=u.return;if(wj(u),u===c){Ne=null;break}if(f!==null){f.return=p,Ne=f;break}Ne=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ne=o;else e:for(;Ne!==null;){if(s=Ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Eh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ne=y;break e}Ne=s.return}}var w=t.current;for(Ne=w;Ne!==null;){o=Ne;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Ne=x;else e:for(o=w;Ne!==null;){if(a=Ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ky(9,a)}}catch(_){an(a,a.return,_)}if(a===o){Ne=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Ne=S;break e}Ne=a.return}}if(vt=r,Tl(),so&&typeof so.onPostCommitFiberRoot=="function")try{so.onPostCommitFiberRoot(Fy,t)}catch{}i=!0}return i}finally{Et=n,Ur.transition=e}}return!1}function JP(t,e,n){e=Rd(n,e),e=cj(t,e,1),t=il(t,e,1),e=yi(),t!==null&&(tm(t,1,e),qi(t,e))}function an(t,e,n){if(t.tag===3)JP(t,t,n);else for(;e!==null;){if(e.tag===3){JP(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(rl===null||!rl.has(i))){t=Rd(n,t),t=uj(e,t,1),e=il(e,t,1),t=yi(),e!==null&&(tm(e,1,t),qi(e,t));break}}e=e.return}}function UG(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=yi(),t.pingedLanes|=t.suspendedLanes&n,jn===t&&(Jn&n)===n&&(En===4||En===3&&(Jn&130023424)===Jn&&500>hn()-nC?xc(t,0):tC|=n),qi(t,e)}function Mj(t,e){e===0&&(t.mode&1?(e=Ym,Ym<<=1,!(Ym&130023424)&&(Ym=4194304)):e=1);var n=yi();t=Jo(t,e),t!==null&&(tm(t,e,n),qi(t,n))}function VG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Mj(t,n)}function HG(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ae(314))}i!==null&&i.delete(e),Mj(t,n)}var Rj;Rj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gi.current)Hi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Hi=!1,RG(t,e,n);Hi=!!(t.flags&131072)}else Hi=!1,qt&&e.flags&1048576&&jI(e,gv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;g0(t,e),t=e.pendingProps;var r=Ad(e,ui.current);td(e,n),r=Y_(null,e,i,t,r,n);var s=X_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ki(i)?(s=!0,pv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,H_(e),r.updater=Gy,e.stateNode=r,r._reactInternals=e,ES(e,i,t,n),e=PS(null,e,i,!0,s,n)):(e.tag=0,qt&&s&&L_(e),vi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(g0(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=GG(i),t=is(i,t),r){case 0:e=NS(null,e,i,t,n);break e;case 1:e=zP(null,e,i,t,n);break e;case 11:e=FP(null,e,i,t,n);break e;case 14:e=BP(null,e,i,is(i.type,t),n);break e}throw Error(ae(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:is(i,r),NS(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:is(i,r),zP(t,e,i,r,n);case 3:e:{if(pj(e),t===null)throw Error(ae(387));i=e.pendingProps,s=e.memoizedState,r=s.element,zI(t,e),bv(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Rd(Error(ae(423)),e),e=UP(t,e,i,n,r);break e}else if(i!==r){r=Rd(Error(ae(424)),e),e=UP(t,e,i,n,r);break e}else for(ur=nl(e.stateNode.containerInfo.firstChild),mr=e,qt=!0,ls=null,n=FI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nd(),i===r){e=Zo(t,e,n);break e}vi(t,e,i,n)}e=e.child}return e;case 5:return UI(e),t===null&&kS(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,yS(i,r)?o=null:s!==null&&yS(i,s)&&(e.flags|=32),hj(t,e),vi(t,e,o,n),e.child;case 6:return t===null&&kS(e),null;case 13:return mj(t,e,n);case 4:return W_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Pd(e,null,i,n):vi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:is(i,r),FP(t,e,i,r,n);case 7:return vi(t,e,e.pendingProps,n),e.child;case 8:return vi(t,e,e.pendingProps.children,n),e.child;case 12:return vi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Dt(vv,i._currentValue),i._currentValue=o,s!==null)if(ys(s.value,o)){if(s.children===r.children&&!Gi.current){e=Zo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Go(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),_S(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_S(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}vi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,td(e,n),r=Kr(r),i=i(r),e.flags|=1,vi(t,e,i,n),e.child;case 14:return i=e.type,r=is(i,e.pendingProps),r=is(i.type,r),BP(t,e,i,r,n);case 15:return dj(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:is(i,r),g0(t,e),e.tag=1,Ki(i)?(t=!0,pv(e)):t=!1,td(e,n),lj(e,i,r),ES(e,i,r,n),PS(null,e,i,!0,t,n);case 19:return gj(t,e,n);case 22:return fj(t,e,n)}throw Error(ae(156,e.tag))};function Tj(t,e){return sI(t,e)}function WG(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(t,e,n,i){return new WG(t,e,n,i)}function oC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GG(t){if(typeof t=="function")return oC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===C_)return 11;if(t===E_)return 14}return 2}function ol(t,e){var n=t.alternate;return n===null?(n=Dr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function b0(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")oC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ru:return Sc(n.children,r,s,e);case __:o=8,r|=8;break;case X1:return t=Dr(12,n,e,r|2),t.elementType=X1,t.lanes=s,t;case J1:return t=Dr(13,n,e,r),t.elementType=J1,t.lanes=s,t;case Z1:return t=Dr(19,n,e,r),t.elementType=Z1,t.lanes=s,t;case UO:return Yy(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case BO:o=10;break e;case zO:o=9;break e;case C_:o=11;break e;case E_:o=14;break e;case Sa:o=16,i=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Dr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Sc(t,e,n,i){return t=Dr(7,t,i,e),t.lanes=n,t}function Yy(t,e,n,i){return t=Dr(22,t,i,e),t.elementType=UO,t.lanes=n,t.stateNode={isHidden:!1},t}function Kw(t,e,n){return t=Dr(6,t,null,e),t.lanes=n,t}function qw(t,e,n){return e=Dr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KG(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nw(0),this.expirationTimes=Nw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nw(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function aC(t,e,n,i,r,s,o,a,l){return t=new KG(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Dr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},H_(s),t}function qG(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Oj(t){if(!t)return hl;t=t._reactInternals;e:{if(Qc(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ki(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Ki(n))return OI(t,n,e)}return e}function Ij(t,e,n,i,r,s,o,a,l){return t=aC(n,i,!0,t,r,s,o,a,l),t.context=Oj(null),n=t.current,i=yi(),r=sl(n),s=Go(i,r),s.callback=e??null,il(n,s,r),t.current.lanes=r,tm(t,r,i),qi(t,i),t}function Xy(t,e,n,i){var r=e.current,s=yi(),o=sl(r);return n=Oj(n),e.context===null?e.context=n:e.pendingContext=n,e=Go(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=il(r,e,o),t!==null&&(vs(t,r,o,s),h0(t,r,o)),o}function Av(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ZP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lC(t,e){ZP(t,e),(t=t.alternate)&&ZP(t,e)}function YG(){return null}var jj=typeof reportError=="function"?reportError:function(t){console.error(t)};function cC(t){this._internalRoot=t}Jy.prototype.render=cC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Xy(t,e,null,null)};Jy.prototype.unmount=cC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dc(function(){Xy(null,t,null,null)}),e[Xo]=null}};function Jy(t){this._internalRoot=t}Jy.prototype.unstable_scheduleHydration=function(t){if(t){var e=fI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ta.length&&e!==0&&e<Ta[n].priority;n++);Ta.splice(n,0,t),n===0&&pI(t)}};function uC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function QP(){}function XG(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Av(o);s.call(c)}}var o=Ij(e,i,t,0,null,!1,!1,"",QP);return t._reactRootContainer=o,t[Xo]=o.current,ip(t.nodeType===8?t.parentNode:t),Dc(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Av(l);a.call(c)}}var l=aC(t,0,!1,null,null,!1,!1,"",QP);return t._reactRootContainer=l,t[Xo]=l.current,ip(t.nodeType===8?t.parentNode:t),Dc(function(){Xy(e,l,n,i)}),l}function Qy(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Av(o);a.call(l)}}Xy(e,o,t,r)}else o=XG(n,e,t,r,i);return Av(o)}uI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qf(e.pendingLanes);n!==0&&(P_(e,n|1),qi(e,hn()),!(vt&6)&&(Td=hn()+500,Tl()))}break;case 13:Dc(function(){var i=Jo(t,1);if(i!==null){var r=yi();vs(i,t,1,r)}}),lC(t,1)}};M_=function(t){if(t.tag===13){var e=Jo(t,134217728);if(e!==null){var n=yi();vs(e,t,134217728,n)}lC(t,134217728)}};dI=function(t){if(t.tag===13){var e=sl(t),n=Jo(t,e);if(n!==null){var i=yi();vs(n,t,e,i)}lC(t,e)}};fI=function(){return Et};hI=function(t,e){var n=Et;try{return Et=t,e()}finally{Et=n}};lS=function(t,e,n){switch(e){case"input":if(tS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Vy(i);if(!r)throw Error(ae(90));HO(i),tS(i,r)}}}break;case"textarea":GO(t,n);break;case"select":e=n.value,e!=null&&Ju(t,!!n.multiple,e,!1)}};QO=iC;eI=Dc;var JG={usingClientEntryPoint:!1,Events:[im,ju,Vy,JO,ZO,iC]},Af={findFiberByHostInstance:fc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZG={bundleType:Af.bundleType,version:Af.version,rendererPackageName:Af.rendererPackageName,rendererConfig:Af.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iI(t),t===null?null:t.stateNode},findFiberByHostInstance:Af.findFiberByHostInstance||YG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var og=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!og.isDisabled&&og.supportsFiber)try{Fy=og.inject(ZG),so=og}catch{}}Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JG;Sr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uC(e))throw Error(ae(200));return qG(t,e,null,n)};Sr.createRoot=function(t,e){if(!uC(t))throw Error(ae(299));var n=!1,i="",r=jj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=aC(t,1,!1,null,null,n,!1,i,r),t[Xo]=e.current,ip(t.nodeType===8?t.parentNode:t),new cC(e)};Sr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=iI(e),t=t===null?null:t.stateNode,t};Sr.flushSync=function(t){return Dc(t)};Sr.hydrate=function(t,e,n){if(!Zy(e))throw Error(ae(200));return Qy(null,t,e,!0,n)};Sr.hydrateRoot=function(t,e,n){if(!uC(t))throw Error(ae(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=jj;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ij(e,null,t,1,n??null,r,!1,s,o),t[Xo]=e.current,ip(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Jy(e)};Sr.render=function(t,e,n){if(!Zy(e))throw Error(ae(200));return Qy(null,t,e,!1,n)};Sr.unmountComponentAtNode=function(t){if(!Zy(t))throw Error(ae(40));return t._reactRootContainer?(Dc(function(){Qy(null,null,t,!1,function(){t._reactRootContainer=null,t[Xo]=null})}),!0):!1};Sr.unstable_batchedUpdates=iC;Sr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Zy(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Qy(t,e,n,!1,i)};Sr.version="18.3.1-next-f1338f8080-20240426";function Dj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dj)}catch(t){console.error(t)}}Dj(),DO.exports=Sr;var Ol=DO.exports;const QG=Jc(Ol);var Lj,e3=Ol;Lj=e3.createRoot,e3.hydrateRoot;function be(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function _s(t,e=[]){let n=[];function i(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:p,...g}=d,m=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,v=b.useMemo(()=>g,Object.values(g));return h.jsx(m.Provider,{value:v,children:p})};c.displayName=s+"Provider";function u(d,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,g=b.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,eK(r,...e)]}function eK(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function t3(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function eb(...t){return e=>{let n=!1;const i=t.map(r=>{const s=t3(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():t3(t[r],null)}}}}function ct(...t){return b.useCallback(eb(...t),t)}function Od(t){const e=tK(t),n=b.forwardRef((i,r)=>{const{children:s,...o}=i,a=b.Children.toArray(s),l=a.find(iK);if(l){const c=l.props.children,u=a.map(d=>d===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:r,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}function tK(t){const e=b.forwardRef((n,i)=>{const{children:r,...s}=n;if(b.isValidElement(r)){const o=sK(r),a=rK(s,r.props);return r.type!==b.Fragment&&(a.ref=i?eb(i,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var nK=Symbol("radix.slottable");function iK(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nK}function rK(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function sK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function sm(t){const e=t+"CollectionProvider",[n,i]=_s(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,w=Ft.useRef(null),x=Ft.useRef(new Map).current;return h.jsx(r,{scope:v,itemMap:x,collectionRef:w,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=Od(a),c=Ft.forwardRef((m,v)=>{const{scope:y,children:w}=m,x=s(a,y),S=ct(v,x.collectionRef);return h.jsx(l,{ref:S,children:w})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Od(u),p=Ft.forwardRef((m,v)=>{const{scope:y,children:w,...x}=m,S=Ft.useRef(null),_=ct(v,S),E=s(u,y);return Ft.useEffect(()=>(E.itemMap.set(S,{ref:S,...x}),()=>void E.itemMap.delete(S))),h.jsx(f,{[d]:"",ref:_,children:w})});p.displayName=u;function g(m){const v=s(t+"CollectionConsumer",m);return Ft.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const x=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((E,C)=>x.indexOf(E.ref.current)-x.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},g,i]}var Qn=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},oK=Ty[" useId ".trim().toString()]||(()=>{}),aK=0;function nf(t){const[e,n]=b.useState(oK());return Qn(()=>{n(i=>i??String(aK++))},[t]),e?`radix-${e}`:""}var lK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ke=lK.reduce((t,e)=>{const n=Od(`Primitive.${e}`),i=b.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function dC(t,e){t&&Ol.flushSync(()=>t.dispatchEvent(e))}function br(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}var cK=Ty[" useInsertionEffect ".trim().toString()]||Qn;function pl({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,o]=uK({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=b.useCallback(u=>{var d;if(a){const f=dK(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function uK({defaultProp:t,onChange:e}){const[n,i]=b.useState(t),r=b.useRef(n),s=b.useRef(e);return cK(()=>{s.current=e},[e]),b.useEffect(()=>{var o;r.current!==n&&((o=s.current)==null||o.call(s,n),r.current=n)},[n,r]),[n,i,s]}function dK(t){return typeof t=="function"}var fK=b.createContext(void 0);function tb(t){const e=b.useContext(fK);return t||e||"ltr"}var Yw="rovingFocusGroup.onEntryFocus",hK={bubbles:!1,cancelable:!0},om="RovingFocusGroup",[zS,$j,pK]=sm(om),[mK,nb]=_s(om,[pK]),[gK,vK]=mK(om),Fj=b.forwardRef((t,e)=>h.jsx(zS.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(zS.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(yK,{...t,ref:e})})}));Fj.displayName=om;var yK=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=b.useRef(null),p=ct(e,f),g=tb(s),[m,v]=pl({prop:o,defaultProp:a??null,onChange:l,caller:om}),[y,w]=b.useState(!1),x=br(c),S=$j(n),_=b.useRef(!1),[E,C]=b.useState(0);return b.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(Yw,x),()=>N.removeEventListener(Yw,x)},[x]),h.jsx(gK,{scope:n,orientation:i,dir:g,loop:r,currentTabStopId:m,onItemFocus:b.useCallback(N=>v(N),[v]),onItemShiftTab:b.useCallback(()=>w(!0),[]),onFocusableItemAdd:b.useCallback(()=>C(N=>N+1),[]),onFocusableItemRemove:b.useCallback(()=>C(N=>N-1),[]),children:h.jsx(Ke.div,{tabIndex:y||E===0?-1:0,"data-orientation":i,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:be(t.onMouseDown,()=>{_.current=!0}),onFocus:be(t.onFocus,N=>{const M=!_.current;if(N.target===N.currentTarget&&M&&!y){const O=new CustomEvent(Yw,hK);if(N.currentTarget.dispatchEvent(O),!O.defaultPrevented){const D=S().filter(X=>X.focusable),j=D.find(X=>X.active),K=D.find(X=>X.id===m),G=[j,K,...D].filter(Boolean).map(X=>X.ref.current);Uj(G,u)}}_.current=!1}),onBlur:be(t.onBlur,()=>w(!1))})})}),Bj="RovingFocusGroupItem",zj=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,children:o,...a}=t,l=nf(),c=s||l,u=vK(Bj,n),d=u.currentTabStopId===c,f=$j(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:m}=u;return b.useEffect(()=>{if(i)return p(),()=>g()},[i,p,g]),h.jsx(zS.ItemSlot,{scope:n,id:c,focusable:i,active:r,children:h.jsx(Ke.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:be(t.onMouseDown,v=>{i?u.onItemFocus(c):v.preventDefault()}),onFocus:be(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:be(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=xK(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let x=f().filter(S=>S.focusable).map(S=>S.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();const S=x.indexOf(v.currentTarget);x=u.loop?SK(x,S+1):x.slice(S+1)}setTimeout(()=>Uj(x))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:m!=null}):o})})});zj.displayName=Bj;var bK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function wK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function xK(t,e,n){const i=wK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return bK[i]}function Uj(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function SK(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Vj=Fj,Hj=zj;function kK(t,e){return b.useReducer((n,i)=>e[n][i]??n,t)}var oa=t=>{const{present:e,children:n}=t,i=_K(e),r=typeof n=="function"?n({present:i.isPresent}):b.Children.only(n),s=ct(i.ref,CK(r));return typeof n=="function"||i.isPresent?b.cloneElement(r,{ref:s}):null};oa.displayName="Presence";function _K(t){const[e,n]=b.useState(),i=b.useRef(null),r=b.useRef(t),s=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=kK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=ag(i.current);s.current=a==="mounted"?c:"none"},[a]),Qn(()=>{const c=i.current,u=r.current;if(u!==t){const f=s.current,p=ag(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),Qn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const m=ag(i.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!r.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(s.current=ag(i.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{i.current=c?getComputedStyle(c):null,n(c)},[])}}function ag(t){return(t==null?void 0:t.animationName)||"none"}function CK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ib="Tabs",[EK,B0e]=_s(ib,[nb]),Wj=nb(),[AK,fC]=EK(ib),Gj=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=tb(a),[d,f]=pl({prop:i,onChange:r,defaultProp:s??"",caller:ib});return h.jsx(AK,{scope:n,baseId:nf(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:h.jsx(Ke.div,{dir:u,"data-orientation":o,...c,ref:e})})});Gj.displayName=ib;var Kj="TabsList",qj=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=fC(Kj,n),o=Wj(n);return h.jsx(Vj,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:h.jsx(Ke.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});qj.displayName=Kj;var Yj="TabsTrigger",w0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=fC(Yj,n),a=Wj(n),l=Jj(o.baseId,i),c=Zj(o.baseId,i),u=i===o.value;return h.jsx(Hj,{asChild:!0,...a,focusable:!r,active:u,children:h.jsx(Ke.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:be(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:be(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:be(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});w0.displayName=Yj;var Xj="TabsContent",x0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=fC(Xj,n),l=Jj(a.baseId,i),c=Zj(a.baseId,i),u=i===a.value,d=b.useRef(u);return b.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(oa,{present:r||u,children:({present:f})=>h.jsx(Ke.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});x0.displayName=Xj;function Jj(t,e){return`${t}-trigger-${e}`}function Zj(t,e){return`${t}-content-${e}`}const th={},n3=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,i3=t=>"init"in t,Xw=t=>!!t.write,r3=t=>"v"in t||"e"in t,lg=t=>{if("e"in t)throw t.e;if((th?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},Nv=new WeakMap,s3=t=>{var e;return Pv(t)&&!!((e=Nv.get(t))!=null&&e[0])},NK=t=>{const e=Nv.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},Qj=(t,e)=>{let n=Nv.get(t);if(!n){n=[!0,new Set],Nv.set(t,n);const i=()=>{n[0]=!1};t.then(i,i)}n[1].add(e)},Pv=t=>typeof(t==null?void 0:t.then)=="function",eD=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},Jw=(t,e,n)=>{const i=n(t),r="v"in i,s=i.v;if(Pv(e))for(const o of i.d.keys())eD(t,e,n(o));i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,Pv(s)&&NK(s))},o3=(t,e,n)=>{var i;const r=new Set;for(const s of((i=n.get(t))==null?void 0:i.t)||[])n.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},PK=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},Zw=()=>{const t={},e=new WeakMap,n=i=>{var r,s;(r=e.get(t))==null||r.forEach(o=>o(i)),(s=e.get(i))==null||s.forEach(o=>o())};return n.add=(i,r)=>{const s=i||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(r),()=>{o==null||o.delete(r),o.size||e.delete(s)}},n},MK=t=>(t.c||(t.c=Zw()),t.m||(t.m=Zw()),t.u||(t.u=Zw()),t.f||(t.f=PK()),t),RK=Symbol(),TK=(t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new Set,r=new Set,s=new Set,o={},a=(f,...p)=>f.read(...p),l=(f,...p)=>f.write(...p),c=(f,p)=>{var g;return(g=f.unstable_onInit)==null?void 0:g.call(f,p)},u=(f,p)=>{var g;return(g=f.onMount)==null?void 0:g.call(f,p)},...d)=>{const f=d[0]||(C=>{if((th?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let N=t.get(C);return N||(N={d:new Map,p:new Set,n:0},t.set(C,N),c==null||c(C,E)),N}),p=d[1]||(()=>{const C=[],N=M=>{try{M()}catch(O){C.push(O)}};do{o.f&&N(o.f);const M=new Set,O=M.add.bind(M);i.forEach(D=>{var j;return(j=e.get(D))==null?void 0:j.l.forEach(O)}),i.clear(),s.forEach(O),s.clear(),r.forEach(O),r.clear(),M.forEach(N),i.size&&g()}while(i.size||s.size||r.size);if(C.length)throw new AggregateError(C)}),g=d[2]||(()=>{const C=[],N=new WeakSet,M=new WeakSet,O=Array.from(i);for(;O.length;){const D=O[O.length-1],j=f(D);if(M.has(D)){O.pop();continue}if(N.has(D)){if(n.get(D)===j.n)C.push([D,j]);else if((th?"production":void 0)!=="production"&&n.has(D))throw new Error("[Bug] invalidated atom exists");M.add(D),O.pop();continue}N.add(D);for(const K of o3(D,j,e))N.has(K)||O.push(K)}for(let D=C.length-1;D>=0;--D){const[j,K]=C[D];let $=!1;for(const G of K.d.keys())if(G!==j&&i.has(G)){$=!0;break}$&&(m(j),w(j)),n.delete(j)}}),m=d[3]||(C=>{var N;const M=f(C);if(r3(M)&&(e.has(C)&&n.get(C)!==M.n||Array.from(M.d).every(([Z,V])=>m(Z).n===V)))return M;M.d.clear();let O=!0;const D=()=>{e.has(C)&&(w(C),g(),p())},j=Z=>{var V;if(n3(C,Z)){const ie=f(Z);if(!r3(ie))if(i3(Z))Jw(Z,Z.init,f);else throw new Error("no atom init");return lg(ie)}const B=m(Z);try{return lg(B)}finally{M.d.set(Z,B.n),s3(M.v)&&eD(C,M.v,B),(V=e.get(Z))==null||V.t.add(C),O||D()}};let K,$;const G={get signal(){return K||(K=new AbortController),K.signal},get setSelf(){return(th?"production":void 0)!=="production"&&!Xw(C)&&console.warn("setSelf function cannot be used with read-only atom"),!$&&Xw(C)&&($=(...Z)=>{if((th?"production":void 0)!=="production"&&O&&console.warn("setSelf function cannot be called in sync"),!O)try{return y(C,...Z)}finally{g(),p()}}),$}},X=M.n;try{const Z=a(C,j,G);return Jw(C,Z,f),Pv(Z)&&(Qj(Z,()=>K==null?void 0:K.abort()),Z.then(D,D)),M}catch(Z){return delete M.v,M.e=Z,++M.n,M}finally{O=!1,X!==M.n&&n.get(C)===X&&(n.set(C,M.n),i.add(C),(N=o.c)==null||N.call(o,C))}}),v=d[4]||(C=>{const N=[C];for(;N.length;){const M=N.pop(),O=f(M);for(const D of o3(M,O,e)){const j=f(D);n.set(D,j.n),N.push(D)}}}),y=d[5]||((C,...N)=>{let M=!0;const O=j=>lg(m(j)),D=(j,...K)=>{var $;const G=f(j);try{if(n3(C,j)){if(!i3(j))throw new Error("atom not writable");const X=G.n,Z=K[0];Jw(j,Z,f),w(j),X!==G.n&&(i.add(j),($=o.c)==null||$.call(o,j),v(j));return}else return y(j,...K)}finally{M||(g(),p())}};try{return l(C,O,D,...N)}finally{M=!1}}),w=d[6]||(C=>{var N;const M=f(C),O=e.get(C);if(O&&!s3(M.v)){for(const[D,j]of M.d)if(!O.d.has(D)){const K=f(D);x(D).t.add(C),O.d.add(D),j!==K.n&&(i.add(D),(N=o.c)==null||N.call(o,D),v(D))}for(const D of O.d||[])if(!M.d.has(D)){O.d.delete(D);const j=S(D);j==null||j.t.delete(C)}}}),x=d[7]||(C=>{var N;const M=f(C);let O=e.get(C);if(!O){m(C);for(const D of M.d.keys())x(D).t.add(C);if(O={l:new Set,d:new Set(M.d.keys()),t:new Set},e.set(C,O),(N=o.m)==null||N.call(o,C),Xw(C)){const D=()=>{let j=!0;const K=(...$)=>{try{return y(C,...$)}finally{j||(g(),p())}};try{const $=u(C,K);$&&(O.u=()=>{j=!0;try{$()}finally{j=!1}})}finally{j=!1}};r.add(D)}}return O}),S=d[8]||(C=>{var N;const M=f(C);let O=e.get(C);if(O&&!O.l.size&&!Array.from(O.t).some(D=>{var j;return(j=e.get(D))==null?void 0:j.d.has(C)})){O.u&&s.add(O.u),O=void 0,e.delete(C),(N=o.u)==null||N.call(o,C);for(const D of M.d.keys()){const j=S(D);j==null||j.t.delete(C)}return}return O}),_=[t,e,n,i,r,s,o,a,l,c,u,f,p,g,m,v,y,w,x,S],E={get:C=>lg(m(C)),set:(C,...N)=>{try{return y(C,...N)}finally{g(),p()}},sub:(C,N)=>{const O=x(C).l;return O.add(N),p(),()=>{O.delete(N),S(C),p()}}};return Object.defineProperty(E,RK,{value:_}),E},tD=TK,OK=MK,a3=Qj,hC={};let IK=0;function de(t,e){const n=`atom${++IK}`,i={toString(){return(hC?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=jK,i.write=DK),e&&(i.write=e),i}function jK(t){return t(this)}function DK(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const LK=()=>{let t=0;const e=OK({}),n=new WeakMap,i=new WeakMap,r=tD(n,i,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>t?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=i.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++t;try{for(const[d,f]of a)"init"in d&&u(d,f)}finally{--t}}};r.set(l)}})};function pC(){return(hC?"production":void 0)!=="production"?LK():tD()}let Nf;function $K(){return Nf||(Nf=pC(),(hC?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Nf),globalThis.__JOTAI_DEFAULT_STORE__!==Nf&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Nf}const FK={},nD=b.createContext(void 0);function iD(t){return b.useContext(nD)||$K()}function BK({children:t,store:e}){const n=b.useRef(void 0);return!e&&!n.current&&(n.current=pC()),b.createElement(nD.Provider,{value:e||n.current},t)}const US=t=>typeof(t==null?void 0:t.then)=="function",VS=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},zK=Ft.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(VS(t),t)}),Qw=new WeakMap,l3=(t,e)=>{let n=Qw.get(t);return n||(n=new Promise((i,r)=>{let s=t;const o=c=>u=>{s===c&&i(u)},a=c=>u=>{s===c&&r(u)},l=()=>{try{const c=e();US(c)?(Qw.set(c,n),s=c,c.then(o(c),a(c)),a3(c,l)):i(c)}catch(c){r(c)}};t.then(o(t),a(t)),a3(t,l)}),Qw.set(t,n)),n};function tt(t,e){const{delay:n,unstable_promiseStatus:i=!Ft.use}={},r=iD(),[[s,o,a],l]=b.useReducer(u=>{const d=r.get(t);return Object.is(u[0],d)&&u[1]===r&&u[2]===t?u:[d,r,t]},void 0,()=>[r.get(t),r,t]);let c=s;if((o!==r||a!==t)&&(l(),c=r.get(t)),b.useEffect(()=>{const u=r.sub(t,()=>{if(i)try{const d=r.get(t);US(d)&&VS(l3(d,()=>r.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),u},[r,t,n,i]),b.useDebugValue(c),US(c)){const u=l3(c,()=>r.get(t));return i&&VS(u),zK(u)}return c}function fp(t,e){const n=iD();return b.useCallback((...r)=>{if((FK?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function am(t,e){return[tt(t),fp(t)]}const{createElement:Id,createContext:UK,forwardRef:rD,useCallback:Pi,useContext:sD,useEffect:kc,useImperativeHandle:oD,useLayoutEffect:VK,useMemo:HK,useRef:or,useState:Mv}=Ty,c3=Ty.useId,rb=UK(null);rb.displayName="PanelGroupContext";const hp=VK,WK=typeof c3=="function"?c3:()=>null;let GK=0;function mC(t=null){const e=WK(),n=or(t||e||null);return n.current===null&&(n.current=""+GK++),t??n.current}function aD({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:p,tagName:g="div",...m}){const v=sD(rb);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:w,getPanelSize:x,getPanelStyle:S,groupId:_,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:N,resizePanel:M,unregisterPanel:O}=v,D=mC(o),j=or({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:D,idIsFromProps:o!==void 0,order:f});or({didLogMissingDefaultSizeWarning:!1}),hp(()=>{const{callbacks:$,constraints:G}=j.current,X={...G};j.current.id=D,j.current.idIsFromProps=o!==void 0,j.current.order=f,$.onCollapse=c,$.onExpand=u,$.onResize=d,G.collapsedSize=n,G.collapsible=i,G.defaultSize=r,G.maxSize=a,G.minSize=l,(X.collapsedSize!==G.collapsedSize||X.collapsible!==G.collapsible||X.maxSize!==G.maxSize||X.minSize!==G.minSize)&&C(j.current,X)}),hp(()=>{const $=j.current;return N($),()=>{O($)}},[f,D,N,O]),oD(s,()=>({collapse:()=>{y(j.current)},expand:()=>{w(j.current)},getId(){return D},getSize(){return x(j.current)},isCollapsed(){return E(j.current)},isExpanded(){return!E(j.current)},resize:$=>{M(j.current,$)}}),[y,w,x,E,D,M]);const K=S(j.current,r);return Id(g,{...m,children:t,className:e,style:{...K,...p},"data-panel":"","data-panel-id":D,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const S0=rD((t,e)=>Id(aD,{...t,forwardedRef:e}));aD.displayName="Panel";S0.displayName="forwardRef(Panel)";function et(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const lD=10;function pp(t,e,n=lD){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function ir(t,e,n){return pp(t,e,n)===0}function Uu({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];et(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(pp(n,a)<0)if(s){const l=(r+a)/2;pp(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(lD)),n}function nh({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(ir(t,0))return e;const s=[...e],[o,a]=i;et(o!=null),et(a!=null);let l=0;if(r==="keyboard"){{const u=t<0?a:o,d=n[u];if(et(d),d.collapsible){const f=e[u];et(f!=null);const p=n[u];et(p);const{collapsedSize:g=0,minSize:m=0}=p;if(ir(f,g)){const v=m-f;pp(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}{const u=t<0?o:a,d=n[u];et(d);const{collapsible:f}=d;if(f){const p=e[u];et(p!=null);const g=n[u];et(g);const{collapsedSize:m=0,minSize:v=0}=g;if(ir(p,v)){const y=p-m;pp(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const g=e[d];et(g!=null);const v=Uu({panelConstraints:n,panelIndex:d,size:100})-g;if(f+=v,d+=u,d<0||d>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-p:p}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),p=e[d];et(p!=null);const g=p-f,m=Uu({panelConstraints:n,panelIndex:d,size:g});if(!ir(p,m)&&(l+=p-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(ir(l,0))return e;{const u=t<0?a:o,d=e[u];et(d!=null);const f=d+l,p=Uu({panelConstraints:n,panelIndex:u,size:f});if(s[u]=p,!ir(p,f)){let g=f-p,v=t<0?a:o;for(;v>=0&&v<n.length;){const y=s[v];et(y!=null);const w=y+g,x=Uu({panelConstraints:n,panelIndex:v,size:w});if(ir(y,x)||(g-=x-y,s[v]=x),ir(g,0))break;t>0?v--:v++}}}const c=s.reduce((u,d)=>d+u,0);return ir(c,100)?s:e}function KK({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];et(a!=null),e.forEach((d,f)=>{const{constraints:p}=d,{maxSize:g=100,minSize:m=0}=p;f===a?(i=m,r=g):(s+=m,o+=g)});const l=Math.min(r,100-s),c=Math.max(i,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function mp(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function cD(t,e,n=document){const r=mp(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function uD(t,e,n){const i=cD(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function dD(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function sb(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function qK(t,e,n,i=document){var r,s,o,a;const l=sb(e,i),c=mp(t,i),u=l?c.indexOf(l):-1,d=(r=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function YK({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){or({didWarnAboutMissingResizeHandle:!1}),hp(()=>{if(!s)return;const a=mp(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=KK({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const p=r[l];et(p),f.setAttribute("aria-controls",p.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),kc(()=>{if(!s)return;const a=e.current;et(a);const{panelDataArray:l}=a,c=dD(n,s);et(c!=null,`No group found for id "${n}"`);const u=mp(n,s);et(u);const d=u.map(f=>{const p=f.getAttribute("data-panel-resize-handle-id");et(p);const[g,m]=qK(n,p,l,s);if(g==null||m==null)return()=>{};const v=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const w=l.findIndex(x=>x.id===g);if(w>=0){const x=l[w];et(x);const S=i[w],{collapsedSize:_=0,collapsible:E,minSize:C=0}=x.constraints;if(S!=null&&E){const N=nh({delta:ir(S,_)?C-_:_-S,layout:i,panelConstraints:l.map(M=>M.constraints),pivotIndices:uD(n,p,s),trigger:"keyboard"});i!==N&&o(N)}}break}}};return f.addEventListener("keydown",v),()=>{f.removeEventListener("keydown",v)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,i,r,o])}function u3(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function fD(t){return t.type==="keydown"}function hD(t){return t.type.startsWith("mouse")}function pD(t){return t.type.startsWith("touch")}function mD(t,e){const n=t==="horizontal";if(hD(e))return n?e.clientX:e.clientY;if(pD(e)){const i=e.touches[0];return et(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function XK(t,e,n,i,r){const s=n==="horizontal",o=sb(e,r);et(o);const a=o.getAttribute("data-panel-group-id");et(a);let{initialCursorPosition:l}=i;const c=mD(n,t),u=dD(a,r);et(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function JK(t,e,n,i,r,s){if(fD(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:XK(t,e,n,i,s)}function ZK({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];et(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];et(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,c=r/l;i++,e[s]=c,r-=c}return e}function au(t,e,n){e.forEach((i,r)=>{const s=t[r];et(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:f,onExpand:p,onResize:g}=o;g&&g(i,d),u&&(f||p)&&(p&&(d==null||d===c)&&i!==c&&p(),f&&(d==null||d!==c)&&i===c&&f())}})}function cg(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function QK({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let HS=null,mc=null;function gD(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function eq(){mc!==null&&(document.head.removeChild(mc),HS=null,mc=null)}function ex(t){if(HS===t)return;HS=t;const e=gD(t);mc===null&&(mc=document.createElement("style"),document.head.appendChild(mc)),mc.innerHTML=`*{cursor: ${e}!important;}`}function tq(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function d3(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function vD(t){return`react-resizable-panels:${t}`}function yD(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function bD(t,e){try{const n=vD(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function nq(t,e,n){var i,r;const s=(i=bD(t,n))!==null&&i!==void 0?i:{},o=yD(e);return(r=s[o])!==null&&r!==void 0?r:null}function iq(t,e,n,i,r){var s;const o=vD(t),a=yD(e),l=(s=bD(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function f3({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!ir(i,100))for(let s=0;s<e.length;s++){const o=n[s];et(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];et(o!=null);const a=Uu({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!ir(r,0))for(let s=0;s<e.length;s++){const o=n[s];et(o!=null);const a=o+r,l=Uu({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,ir(r,0)))break}return n}const rq=100,ih={getItem:t=>(d3(ih),ih.getItem(t)),setItem:(t,e)=>{d3(ih),ih.setItem(t,e)}},h3={};function wD({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=ih,style:c,tagName:u="div",...d}){const f=mC(s),p=or(null),[g,m]=Mv(null),[v,y]=Mv([]),w=or({}),x=or(new Map),S=or(0),_=or({autoSaveId:t,direction:i,dragState:g,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),E=or({layout:v,panelDataArray:[],panelDataArrayChanged:!1});or({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),oD(r,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:J}=E.current;return J},setLayout:J=>{const{onLayout:le}=_.current,{layout:F,panelDataArray:L}=E.current,U=f3({layout:J,panelConstraints:L.map(k=>k.constraints)});u3(F,U)||(y(U),E.current.layout=U,le&&le(U),au(L,U,w.current))}}),[]),hp(()=>{_.current.autoSaveId=t,_.current.direction=i,_.current.dragState=g,_.current.id=f,_.current.onLayout=o,_.current.storage=l}),YK({committedValuesRef:_,eagerValuesRef:E,groupId:f,layout:v,panelDataArray:E.current.panelDataArray,setLayout:y,panelGroupElement:p.current}),kc(()=>{const{panelDataArray:J}=E.current;if(t){if(v.length===0||v.length!==J.length)return;let le=h3[t];le==null&&(le=tq(iq,rq),h3[t]=le);const F=[...J],L=new Map(x.current);le(t,F,L,v,l)}},[t,v,l]),kc(()=>{});const C=Pi(J=>{const{onLayout:le}=_.current,{layout:F,panelDataArray:L}=E.current;if(J.constraints.collapsible){const U=L.map(T=>T.constraints),{collapsedSize:k=0,panelSize:P,pivotIndices:I}=ql(L,J,F);if(et(P!=null),P!==k){x.current.set(J.id,P);const Y=wu(L,J)===L.length-1?P-k:k-P,W=nh({delta:Y,layout:F,panelConstraints:U,pivotIndices:I,trigger:"imperative-api"});cg(F,W)||(y(W),E.current.layout=W,le&&le(W),au(L,W,w.current))}}},[]),N=Pi(J=>{const{onLayout:le}=_.current,{layout:F,panelDataArray:L}=E.current;if(J.constraints.collapsible){const U=L.map(Y=>Y.constraints),{collapsedSize:k=0,panelSize:P,minSize:I=0,pivotIndices:T}=ql(L,J,F);if(P===k){const Y=x.current.get(J.id),W=Y!=null&&Y>=I?Y:I,Q=wu(L,J)===L.length-1?P-W:W-P,Pe=nh({delta:Q,layout:F,panelConstraints:U,pivotIndices:T,trigger:"imperative-api"});cg(F,Pe)||(y(Pe),E.current.layout=Pe,le&&le(Pe),au(L,Pe,w.current))}}},[]),M=Pi(J=>{const{layout:le,panelDataArray:F}=E.current,{panelSize:L}=ql(F,J,le);return et(L!=null),L},[]),O=Pi((J,le)=>{const{panelDataArray:F}=E.current,L=wu(F,J);return QK({defaultSize:le,dragState:g,layout:v,panelData:F,panelIndex:L})},[g,v]),D=Pi(J=>{const{layout:le,panelDataArray:F}=E.current,{collapsedSize:L=0,collapsible:U,panelSize:k}=ql(F,J,le);return U===!0&&k===L},[]),j=Pi(J=>{const{layout:le,panelDataArray:F}=E.current,{collapsedSize:L=0,collapsible:U,panelSize:k}=ql(F,J,le);return et(k!=null),!U||k>L},[]),K=Pi(J=>{const{panelDataArray:le}=E.current;le.push(J),le.sort((F,L)=>{const U=F.order,k=L.order;return U==null&&k==null?0:U==null?-1:k==null?1:U-k}),E.current.panelDataArrayChanged=!0},[]);hp(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:J,onLayout:le,storage:F}=_.current,{layout:L,panelDataArray:U}=E.current;let k=null;if(J){const I=nq(J,U,F);I&&(x.current=new Map(Object.entries(I.expandToSizes)),k=I.layout)}k==null&&(k=ZK({panelDataArray:U}));const P=f3({layout:k,panelConstraints:U.map(I=>I.constraints)});u3(L,P)||(y(P),E.current.layout=P,le&&le(P),au(U,P,w.current))}});const $=Pi(J=>function(F){F.preventDefault();const L=p.current;if(!L)return()=>null;const{direction:U,dragState:k,id:P,keyboardResizeBy:I,onLayout:T}=_.current,{layout:Y,panelDataArray:W}=E.current,{initialLayout:ne}=k??{},Q=uD(P,J,L);let Pe=JK(F,J,U,k,I,L);if(Pe===0)return;const ze=U==="horizontal";document.dir==="rtl"&&ze&&(Pe=-Pe);const Ve=W.map(ve=>ve.constraints),$e=nh({delta:Pe,layout:ne??Y,panelConstraints:Ve,pivotIndices:Q,trigger:fD(F)?"keyboard":"mouse-or-touch"}),Je=!cg(Y,$e);(hD(F)||pD(F))&&S.current!=Pe&&(S.current=Pe,ex(Je?ze?"horizontal":"vertical":ze?Pe<0?"horizontal-min":"horizontal-max":Pe<0?"vertical-min":"vertical-max")),Je&&(y($e),E.current.layout=$e,T&&T($e),au(W,$e,w.current))},[]),G=Pi((J,le)=>{const{onLayout:F}=_.current,{layout:L,panelDataArray:U}=E.current,k=U.map(ne=>ne.constraints),{panelSize:P,pivotIndices:I}=ql(U,J,L);et(P!=null);const Y=wu(U,J)===U.length-1?P-le:le-P,W=nh({delta:Y,layout:L,panelConstraints:k,pivotIndices:I,trigger:"imperative-api"});cg(L,W)||(y(W),E.current.layout=W,F&&F(W),au(U,W,w.current))},[]),X=Pi((J,le)=>{const{layout:F,panelDataArray:L}=E.current,{collapsedSize:U=0,collapsible:k}=le,{collapsedSize:P=0,collapsible:I,maxSize:T=100,minSize:Y=0}=J.constraints,{panelSize:W}=ql(L,J,F);et(W!=null),k&&I&&W===U?U!==P&&G(J,P):W<Y?G(J,Y):W>T&&G(J,T)},[G]),Z=Pi((J,le)=>{const{direction:F}=_.current,{layout:L}=E.current;if(!p.current)return;const U=sb(J,p.current);et(U);const k=mD(F,le);m({dragHandleId:J,dragHandleRect:U.getBoundingClientRect(),initialCursorPosition:k,initialLayout:L})},[]),V=Pi(()=>{eq(),m(null)},[]),B=Pi(J=>{const{panelDataArray:le}=E.current,F=wu(le,J);F>=0&&(le.splice(F,1),delete w.current[J.id],E.current.panelDataArrayChanged=!0)},[]),ie=HK(()=>({collapsePanel:C,direction:i,dragState:g,expandPanel:N,getPanelSize:M,getPanelStyle:O,groupId:f,isPanelCollapsed:D,isPanelExpanded:j,reevaluatePanelConstraints:X,registerPanel:K,registerResizeHandle:$,resizePanel:G,startDragging:Z,stopDragging:V,unregisterPanel:B,panelGroupElement:p.current}),[C,g,i,N,M,O,f,D,j,X,K,$,G,Z,V,B]),pe={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Id(rb.Provider,{value:ie},Id(u,{...d,children:e,className:n,style:{...pe,...c},ref:p,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":f}))}const xD=rD((t,e)=>Id(wD,{...t,forwardedRef:e}));wD.displayName="PanelGroup";xD.displayName="forwardRef(PanelGroup)";function wu(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function ql(t,e,n){const i=wu(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function sq({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){kc(()=>{if(t||n==null||i==null)return;const r=sb(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");et(a);const l=mp(a,i),c=cD(a,e,i);et(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function WS({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=or(null),u=or({onDragging:r});kc(()=>{u.current.onDragging=r});const d=sD(rb);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:p,groupId:g,registerResizeHandle:m,startDragging:v,stopDragging:y,panelGroupElement:w}=d,x=mC(i),S=(p==null?void 0:p.dragHandleId)===x,[_,E]=Mv(!1),[C,N]=Mv(null),M=Pi(()=>{const D=c.current;et(D),D.blur(),y();const{onDragging:j}=u.current;j&&j(!1)},[y]);kc(()=>{if(n)N(null);else{const D=m(x);N(()=>D)}},[n,x,m]),kc(()=>{if(n||C==null||!S)return;const D=G=>{C(G)},j=G=>{C(G)},K=c.current;et(K);const $=K.ownerDocument;return $.body.addEventListener("contextmenu",M),$.body.addEventListener("mousemove",D),$.body.addEventListener("touchmove",D),$.body.addEventListener("mouseleave",j),window.addEventListener("mouseup",M),window.addEventListener("touchend",M),()=>{$.body.removeEventListener("contextmenu",M),$.body.removeEventListener("mousemove",D),$.body.removeEventListener("touchmove",D),$.body.removeEventListener("mouseleave",j),window.removeEventListener("mouseup",M),window.removeEventListener("touchend",M)}},[f,n,S,C,M]),sq({disabled:n,handleId:x,resizeHandler:C,panelGroupElement:w});const O={cursor:gD(f),touchAction:"none",userSelect:"none"};return Id(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:D=>{v(x,D.nativeEvent);const j=u.current;et(j);const{onDragging:K}=j;K&&K(!0)},onMouseUp:M,onTouchCancel:M,onTouchEnd:M,onTouchStart:D=>{v(x,D.nativeEvent);const j=u.current;et(j);const{onDragging:K}=j;K&&K(!0)},ref:c,role:"separator",style:{...O,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":g,"data-resize-handle":"","data-resize-handle-active":S?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":x})}WS.displayName="PanelResizeHandle";var Gs=function(){return Gs=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Gs.apply(this,arguments)};function SD(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function oq(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var aq=function(){};function lq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function cq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var kD=typeof window<"u",uq=kD?window:null,p3=function(t){return!!t.addEventListener},m3=function(t){return!!t.on},dq=function(t,e,n,i){n===void 0&&(n=uq),b.useEffect(function(){if(e&&n)return p3(n)?lq(n,t,e,i):m3(n)&&n.on(t,e,i),function(){p3(n)?cq(n,t,e,i):m3(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},fq=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},xu=function(t,e,n,i){e===void 0&&(e=aq),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=b.useMemo(function(){var c=fq(t),u=function(d){if(c(d))return e(d)};return u},i);dq(s,l,o,a)},hq=function(t,e){return kD?window.matchMedia(t).matches:!1},pq=function(t,e){var n=b.useState(hq(t)),i=n[0],r=n[1];return b.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const mq={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function gq(t,e,n){return(e=yq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g3(Object(n),!0).forEach(function(i){gq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yq(t){var e=vq(t,"string");return typeof e=="symbol"?e:e+""}const v3=()=>{};let gC={},_D={},CD=null,ED={mark:v3,measure:v3};try{typeof window<"u"&&(gC=window),typeof document<"u"&&(_D=document),typeof MutationObserver<"u"&&(CD=MutationObserver),typeof performance<"u"&&(ED=performance)}catch{}const{userAgent:y3=""}=gC.navigator||{},ml=gC,Ut=_D,b3=CD,ug=ED;ml.document;const aa=!!Ut.documentElement&&!!Ut.head&&typeof Ut.addEventListener=="function"&&typeof Ut.createElement=="function",AD=~y3.indexOf("MSIE")||~y3.indexOf("Trident/");var bq=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,wq=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,ND={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},xq={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},PD=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],di="classic",ob="duotone",Sq="sharp",kq="sharp-duotone",MD=[di,ob,Sq,kq],_q={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},Cq={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},Eq=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),Aq={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},Nq=["fak","fa-kit","fakd","fa-kit-duotone"],w3={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},Pq=["kit"],Mq={kit:{"fa-kit":"fak"}},Rq=["fak","fakd"],Tq={kit:{fak:"fa-kit"}},x3={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},dg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Oq=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Iq=["fak","fa-kit","fakd","fa-kit-duotone"],jq={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},Dq={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},Lq={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},GS={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},$q=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],KS=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...Oq,...$q],Fq=["solid","regular","light","thin","duotone","brands"],RD=[1,2,3,4,5,6,7,8,9,10],Bq=RD.concat([11,12,13,14,15,16,17,18,19,20]),zq=[...Object.keys(Lq),...Fq,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",dg.GROUP,dg.SWAP_OPACITY,dg.PRIMARY,dg.SECONDARY].concat(RD.map(t=>"".concat(t,"x"))).concat(Bq.map(t=>"w-".concat(t))),Uq={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Qo="___FONT_AWESOME___",qS=16,TD="fa",OD="svg-inline--fa",Lc="data-fa-i2svg",YS="data-fa-pseudo-element",Vq="data-fa-pseudo-element-pending",vC="data-prefix",yC="data-icon",S3="fontawesome-i2svg",Hq="async",Wq=["HTML","HEAD","STYLE","SCRIPT"],ID=(()=>{try{return!0}catch{return!1}})();function lm(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[di]}})}const jD=oe({},ND);jD[di]=oe(oe(oe(oe({},{"fa-duotone":"duotone"}),ND[di]),w3.kit),w3["kit-duotone"]);const Gq=lm(jD),XS=oe({},Aq);XS[di]=oe(oe(oe(oe({},{duotone:"fad"}),XS[di]),x3.kit),x3["kit-duotone"]);const k3=lm(XS),JS=oe({},GS);JS[di]=oe(oe({},JS[di]),Tq.kit);const bC=lm(JS),ZS=oe({},Dq);ZS[di]=oe(oe({},ZS[di]),Mq.kit);lm(ZS);const Kq=bq,DD="fa-layers-text",qq=wq,Yq=oe({},_q);lm(Yq);const Xq=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],tx=xq,Jq=[...Pq,...zq],Ph=ml.FontAwesomeConfig||{};function Zq(t){var e=Ut.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function Qq(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Ut&&typeof Ut.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=Qq(Zq(n));r!=null&&(Ph[i]=r)});const LD={styleDefault:"solid",familyDefault:di,cssPrefix:TD,replacementClass:OD,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Ph.familyPrefix&&(Ph.cssPrefix=Ph.familyPrefix);const jd=oe(oe({},LD),Ph);jd.autoReplaceSvg||(jd.observeMutations=!1);const je={};Object.keys(LD).forEach(t=>{Object.defineProperty(je,t,{enumerable:!0,set:function(e){jd[t]=e,Mh.forEach(n=>n(je))},get:function(){return jd[t]}})});Object.defineProperty(je,"familyPrefix",{enumerable:!0,set:function(t){jd.cssPrefix=t,Mh.forEach(e=>e(je))},get:function(){return jd.cssPrefix}});ml.FontAwesomeConfig=je;const Mh=[];function eY(t){return Mh.push(t),()=>{Mh.splice(Mh.indexOf(t),1)}}const ga=qS,Zs={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function tY(t){if(!t||!aa)return;const e=Ut.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Ut.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Ut.head.insertBefore(e,i),t}const nY="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function gp(){let t=12,e="";for(;t-- >0;)e+=nY[Math.random()*62|0];return e}function rf(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function wC(t){return t.classList?rf(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function $D(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function iY(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat($D(t[n]),'" '),"").trim()}function ab(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function xC(t){return t.size!==Zs.size||t.x!==Zs.x||t.y!==Zs.y||t.rotate!==Zs.rotate||t.flipX||t.flipY}function rY(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function sY(t){let{transform:e,width:n=qS,height:i=qS,startCentered:r=!1}=t,s="";return r&&AD?s+="translate(".concat(e.x/ga-n/2,"em, ").concat(e.y/ga-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/ga,"em), calc(-50% + ").concat(e.y/ga,"em)) "):s+="translate(".concat(e.x/ga,"em, ").concat(e.y/ga,"em) "),s+="scale(".concat(e.size/ga*(e.flipX?-1:1),", ").concat(e.size/ga*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var oY=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function FD(){const t=TD,e=OD,n=je.cssPrefix,i=je.replacementClass;let r=oY;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let _3=!1;function nx(){je.autoAddCss&&!_3&&(tY(FD()),_3=!0)}var aY={mixout(){return{dom:{css:FD,insertCss:nx}}},hooks(){return{beforeDOMElementCreation(){nx()},beforeI2svg(){nx()}}}};const ea=ml||{};ea[Qo]||(ea[Qo]={});ea[Qo].styles||(ea[Qo].styles={});ea[Qo].hooks||(ea[Qo].hooks={});ea[Qo].shims||(ea[Qo].shims=[]);var Qs=ea[Qo];const BD=[],zD=function(){Ut.removeEventListener("DOMContentLoaded",zD),Rv=1,BD.map(t=>t())};let Rv=!1;aa&&(Rv=(Ut.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ut.readyState),Rv||Ut.addEventListener("DOMContentLoaded",zD));function lY(t){aa&&(Rv?setTimeout(t,0):BD.push(t))}function cm(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?$D(t):"<".concat(e," ").concat(iY(n),">").concat(i.map(cm).join(""),"</").concat(e,">")}function C3(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var ix=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function cY(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function QS(t){const e=cY(t);return e.length===1?e[0].toString(16):null}function uY(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function E3(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function e2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=E3(e);typeof Qs.hooks.addPack=="function"&&!i?Qs.hooks.addPack(t,E3(e)):Qs.styles[t]=oe(oe({},Qs.styles[t]||{}),r),t==="fas"&&e2("fa",e)}const{styles:vp,shims:dY}=Qs,UD=Object.keys(bC),fY=UD.reduce((t,e)=>(t[e]=Object.keys(bC[e]),t),{});let SC=null,VD={},HD={},WD={},GD={},KD={};function hY(t){return~Jq.indexOf(t)}function pY(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!hY(r)?r:null}const qD=()=>{const t=i=>ix(vp,(r,s,o)=>(r[o]=ix(s,i,{}),r),{});VD=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),HD=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),KD=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in vp||je.autoFetchSvg,n=ix(dY,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});WD=n.names,GD=n.unicodes,SC=lb(je.styleDefault,{family:je.familyDefault})};eY(t=>{SC=lb(t.styleDefault,{family:je.familyDefault})});qD();function kC(t,e){return(VD[t]||{})[e]}function mY(t,e){return(HD[t]||{})[e]}function gc(t,e){return(KD[t]||{})[e]}function YD(t){return WD[t]||{prefix:null,iconName:null}}function gY(t){const e=GD[t],n=kC("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function gl(){return SC}const XD=()=>({prefix:null,iconName:null,rest:[]});function vY(t){let e=di;const n=UD.reduce((i,r)=>(i[r]="".concat(je.cssPrefix,"-").concat(r),i),{});return MD.forEach(i=>{(t.includes(n[i])||t.some(r=>fY[i].includes(r)))&&(e=i)}),e}function lb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=di}=e,i=Gq[n][t];if(n===ob&&!t)return"fad";const r=k3[n][t]||k3[n][i],s=t in Qs.styles?t:null;return r||s||null}function yY(t){let e=[],n=null;return t.forEach(i=>{const r=pY(je.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function A3(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function cb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=KS.concat(Iq),s=A3(t.filter(d=>r.includes(d))),o=A3(t.filter(d=>!KS.includes(d))),a=s.filter(d=>(i=d,!PD.includes(d))),[l=null]=a,c=vY(s),u=oe(oe({},yY(o)),{},{prefix:lb(l,{family:c})});return oe(oe(oe({},u),SY({values:t,family:c,styles:vp,config:je,canonical:u,givenPrefix:i})),bY(n,i,u))}function bY(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?YD(r):{},o=gc(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!vp.far&&vp.fas&&!je.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const wY=MD.filter(t=>t!==di||t!==ob),xY=Object.keys(GS).filter(t=>t!==di).map(t=>Object.keys(GS[t])).flat();function SY(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===ob,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||c||u)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&wY.includes(n)&&(Object.keys(s).find(f=>xY.includes(f))||o.autoFetchSvg)){const f=Eq.get(n).defaultShortPrefixId;i.prefix=f,i.iconName=gc(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=gl()||"fas"),i}class kY{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=oe(oe({},this.definitions[s]||{}),r[s]),e2(s,r[s]);const o=bC[di][s];o&&e2(o,r[s]),qD()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let N3=[],Vu={};const id={},_Y=Object.keys(id);function CY(t,e){let{mixoutsTo:n}=e;return N3=t,Vu={},Object.keys(id).forEach(i=>{_Y.indexOf(i)===-1&&delete id[i]}),N3.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{Vu[o]||(Vu[o]=[]),Vu[o].push(s[o])})}i.provides&&i.provides(id)}),n}function t2(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Vu[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function $c(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Vu[t]||[]).forEach(s=>{s.apply(null,n)})}function vl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return id[t]?id[t].apply(null,e):void 0}function n2(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||gl();if(e)return e=gc(n,e)||e,C3(JD.definitions,n,e)||C3(Qs.styles,n,e)}const JD=new kY,EY=()=>{je.autoReplaceSvg=!1,je.observeMutations=!1,$c("noAuto")},AY={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return aa?($c("beforeI2svg",t),vl("pseudoElements2svg",t),vl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;je.autoReplaceSvg===!1&&(je.autoReplaceSvg=!0),je.observeMutations=!0,lY(()=>{PY({autoReplaceSvgRoot:e}),$c("watch",t)})}},NY={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:gc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=lb(t[0]);return{prefix:n,iconName:gc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(je.cssPrefix,"-"))>-1||t.match(Kq))){const e=cb(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||gl(),iconName:gc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=gl();return{prefix:e,iconName:gc(e,t)||t}}}},_r={noAuto:EY,config:je,dom:AY,parse:NY,library:JD,findIconDefinition:n2,toHtml:cm},PY=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Ut}=t;(Object.keys(Qs.styles).length>0||je.autoFetchSvg)&&aa&&je.autoReplaceSvg&&_r.dom.i2svg({node:e})};function ub(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>cm(n))}}),Object.defineProperty(t,"node",{get:function(){if(!aa)return;const n=Ut.createElement("div");return n.innerHTML=t.html,n.children}}),t}function MY(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(xC(o)&&n.found&&!i.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};r.style=ab(oe(oe({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function RY(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(je.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:oe(oe({},r),{},{id:o}),children:i}]}]}function _C(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:f,height:p}=n.found?n:e,g=Rq.includes(i),m=[je.replacementClass,r?"".concat(je.cssPrefix,"-").concat(r):""].filter(_=>u.classes.indexOf(_)===-1).filter(_=>_!==""||!!_).concat(u.classes).join(" ");let v={children:[],attributes:oe(oe({},u.attributes),{},{"data-prefix":i,"data-icon":r,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(p)})};const y=g&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/p*16*.0625,"em")}:{};d&&(v.attributes[Lc]=""),a&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(c||gp())},children:[a]}),delete v.attributes.title);const w=oe(oe({},v),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:oe(oe({},y),u.styles)}),{children:x,attributes:S}=n.found&&e.found?vl("generateAbstractMask",w)||{children:[],attributes:{}}:vl("generateAbstractIcon",w)||{children:[],attributes:{}};return w.children=x,w.attributes=S,o?RY(w):MY(w)}function P3(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=oe(oe(oe({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Lc]="");const c=oe({},o.styles);xC(r)&&(c.transform=sY({transform:r,startCentered:!0,width:n,height:i}),c["-webkit-transform"]=c.transform);const u=ab(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function TY(t){const{content:e,title:n,extra:i}=t,r=oe(oe(oe({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=ab(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:rx}=Qs;function i2(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(je.cssPrefix,"-").concat(tx.GROUP)},children:[{tag:"path",attributes:{class:"".concat(je.cssPrefix,"-").concat(tx.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(je.cssPrefix,"-").concat(tx.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const OY={found:!1,width:512,height:512};function IY(t,e){!ID&&!je.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function r2(t,e){let n=e;return e==="fa"&&je.styleDefault!==null&&(e=gl()),new Promise((i,r)=>{if(n==="fa"){const s=YD(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&rx[e]&&rx[e][t]){const s=rx[e][t];return i(i2(s))}IY(t,e),i(oe(oe({},OY),{},{icon:je.showMissingIcons&&t?vl("missingIconAbstract")||{}:{}}))})}const M3=()=>{},s2=je.measurePerformance&&ug&&ug.mark&&ug.measure?ug:{mark:M3,measure:M3},rh='FA "6.7.1"',jY=t=>(s2.mark("".concat(rh," ").concat(t," begins")),()=>ZD(t)),ZD=t=>{s2.mark("".concat(rh," ").concat(t," ends")),s2.measure("".concat(rh," ").concat(t),"".concat(rh," ").concat(t," begins"),"".concat(rh," ").concat(t," ends"))};var CC={begin:jY,end:ZD};const k0=()=>{};function R3(t){return typeof(t.getAttribute?t.getAttribute(Lc):null)=="string"}function DY(t){const e=t.getAttribute?t.getAttribute(vC):null,n=t.getAttribute?t.getAttribute(yC):null;return e&&n}function LY(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(je.replacementClass)}function $Y(){return je.autoReplaceSvg===!0?_0.replace:_0[je.autoReplaceSvg]||_0.replace}function FY(t){return Ut.createElementNS("http://www.w3.org/2000/svg",t)}function BY(t){return Ut.createElement(t)}function QD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?FY:BY}=e;if(typeof t=="string")return Ut.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(QD(s,{ceFn:n}))}),i}function zY(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const _0={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(QD(n),e)}),e.getAttribute(Lc)===null&&je.keepOriginalSource){let n=Ut.createComment(zY(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~wC(e).indexOf(je.replacementClass))return _0.replace(t);const i=new RegExp("".concat(je.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===je.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>cm(s)).join(`
`);e.setAttribute(Lc,""),e.innerHTML=r}};function T3(t){t()}function eL(t,e){const n=typeof e=="function"?e:k0;if(t.length===0)n();else{let i=T3;je.mutateApproach===Hq&&(i=ml.requestAnimationFrame||T3),i(()=>{const r=$Y(),s=CC.begin("mutate");t.map(r),s(),n()})}}let EC=!1;function tL(){EC=!0}function o2(){EC=!1}let Tv=null;function O3(t){if(!b3||!je.observeMutations)return;const{treeCallback:e=k0,nodeCallback:n=k0,pseudoElementsCallback:i=k0,observeMutationsRoot:r=Ut}=t;Tv=new b3(s=>{if(EC)return;const o=gl();rf(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!R3(a.addedNodes[0])&&(je.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&je.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&R3(a.target)&&~Xq.indexOf(a.attributeName))if(a.attributeName==="class"&&DY(a.target)){const{prefix:l,iconName:c}=cb(wC(a.target));a.target.setAttribute(vC,l||o),c&&a.target.setAttribute(yC,c)}else LY(a.target)&&n(a.target)})}),aa&&Tv.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function UY(){Tv&&Tv.disconnect()}function VY(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function HY(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=cb(wC(t));return r.prefix||(r.prefix=gl()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=mY(r.prefix,t.innerText)||kC(r.prefix,QS(t.innerText))),!r.iconName&&je.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function WY(t){const e=rf(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return je.autoA11y&&(n?e["aria-labelledby"]="".concat(je.replacementClass,"-title-").concat(i||gp()):(e["aria-hidden"]="true",e.focusable="false")),e}function GY(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Zs,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function I3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=HY(t),s=WY(t),o=t2("parseNodeAttributes",{},t);let a=e.styleParser?VY(t):[];return oe({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:Zs,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:KY}=Qs;function nL(t){const e=je.autoReplaceSvg==="nest"?I3(t,{styleParser:!1}):I3(t);return~e.extra.classes.indexOf(DD)?vl("generateLayersText",t,e):vl("generateSvgReplacementMutation",t,e)}function qY(){return[...Nq,...KS]}function j3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!aa)return Promise.resolve();const n=Ut.documentElement.classList,i=u=>n.add("".concat(S3,"-").concat(u)),r=u=>n.remove("".concat(S3,"-").concat(u)),s=je.autoFetchSvg?qY():PD.concat(Object.keys(KY));s.includes("fa")||s.push("fa");const o=[".".concat(DD,":not([").concat(Lc,"])")].concat(s.map(u=>".".concat(u,":not([").concat(Lc,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=rf(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=CC.begin("onTree"),c=a.reduce((u,d)=>{try{const f=nL(d);f&&u.push(f)}catch(f){ID||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{eL(f,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function YY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;nL(t).then(n=>{n&&eL([n],e)})}function XY(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:n2(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:n2(r||{})),t(i,oe(oe({},n),{},{mask:r}))}}const JY=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Zs,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:p}=t;return ub(oe({type:"icon"},t),()=>($c("beforeDOMElementCreation",{iconDefinition:t,params:e}),je.autoA11y&&(o?c["aria-labelledby"]="".concat(je.replacementClass,"-title-").concat(a||gp()):(c["aria-hidden"]="true",c.focusable="false")),_C({icons:{main:i2(p),mask:r?i2(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:oe(oe({},Zs),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var ZY={mixout(){return{icon:XY(JY)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=j3,t.nodeCallback=YY,t}}},provides(t){t.i2svg=function(e){const{node:n=Ut,callback:i=()=>{}}=e;return j3(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((f,p)=>{Promise.all([r2(i,o),c.iconName?r2(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(g=>{let[m,v]=g;f([e,_C({icons:{main:m,mask:v},prefix:o,iconName:i,transform:a,symbol:l,maskId:u,title:r,titleId:s,extra:d,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=ab(o);a.length>0&&(i.style=a);let l;return xC(s)&&(l=vl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},QY={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return ub({type:"layer"},()=>{$c("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(je.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},eX={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return ub({type:"counter",content:t},()=>($c("beforeDOMElementCreation",{content:t,params:e}),TY({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(je.cssPrefix,"-layers-counter"),...i]}})))}}}},tX={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Zs,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return ub({type:"text",content:t},()=>($c("beforeDOMElementCreation",{content:t,params:e}),P3({content:t,transform:oe(oe({},Zs),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(je.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(AD){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return je.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,P3({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const nX=new RegExp('"',"ug"),D3=[1105920,1112319],L3=oe(oe(oe(oe({},{FontAwesome:{normal:"fas",400:"fas"}}),Cq),Uq),jq),a2=Object.keys(L3).reduce((t,e)=>(t[e.toLowerCase()]=L3[e],t),{}),iX=Object.keys(a2).reduce((t,e)=>{const n=a2[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function rX(t){const e=t.replace(nX,""),n=uY(e,0),i=n>=D3[0]&&n<=D3[1],r=e.length===2?e[0]===e[1]:!1;return{value:QS(r?e[0]:e),isSecondary:i||r}}function sX(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(a2[n]||{})[r]||iX[n]}function $3(t,e){const n="".concat(Vq).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=rf(t.children).filter(f=>f.getAttribute(YS)===e)[0],a=ml.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(qq),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),i();if(c&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let p=sX(l,u);const{value:g,isSecondary:m}=rX(f),v=c[0].startsWith("FontAwesome");let y=kC(p,g),w=y;if(v){const x=gY(g);x.iconName&&x.prefix&&(y=x.iconName,p=x.prefix)}if(y&&!m&&(!o||o.getAttribute(vC)!==p||o.getAttribute(yC)!==w)){t.setAttribute(n,w),o&&t.removeChild(o);const x=GY(),{extra:S}=x;S.attributes[YS]=e,r2(y,p).then(_=>{const E=_C(oe(oe({},x),{},{icons:{main:_,mask:XD()},prefix:p,iconName:w,extra:S,watchable:!0})),C=Ut.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=E.map(N=>cm(N)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function oX(t){return Promise.all([$3(t,"::before"),$3(t,"::after")])}function aX(t){return t.parentNode!==document.head&&!~Wq.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(YS)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function F3(t){if(aa)return new Promise((e,n)=>{const i=rf(t.querySelectorAll("*")).filter(aX).map(oX),r=CC.begin("searchPseudoElements");tL(),Promise.all(i).then(()=>{r(),o2(),e()}).catch(()=>{r(),o2(),n()})})}var lX={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=F3,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Ut}=e;je.searchPseudoElements&&F3(n)}}};let B3=!1;var cX={mixout(){return{dom:{unwatch(){tL(),B3=!0}}}},hooks(){return{bootstrap(){O3(t2("mutationObserverCallbacks",{}))},noAuto(){UY()},watch(t){const{observeMutationsRoot:e}=t;B3?o2():O3(t2("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const z3=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var uX={mixout(){return{parse:{transform:t=>z3(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=z3(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:u,path:d};return{tag:"g",attributes:oe({},f.outer),children:[{tag:"g",attributes:oe({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:oe(oe({},n.icon.attributes),f.path)}]}]}}}};const sx={x:0,y:0,width:"100%",height:"100%"};function U3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function dX(t){return t.tag==="g"?t.children:[t]}var fX={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?cb(n.split(" ").map(r=>r.trim())):XD();return i.prefix||(i.prefix=gl()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=r,{width:u,icon:d}=s,f=rY({transform:a,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:oe(oe({},sx),{},{fill:"white"})},g=c.children?{children:c.children.map(U3)}:{},m={tag:"g",attributes:oe({},f.inner),children:[U3(oe({tag:c.tag,attributes:oe(oe({},c.attributes),f.path)},g))]},v={tag:"g",attributes:oe({},f.outer),children:[m]},y="mask-".concat(o||gp()),w="clip-".concat(o||gp()),x={tag:"mask",attributes:oe(oe({},sx),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},S={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:dX(d)},x]};return n.push(S,{tag:"rect",attributes:oe({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(y,")")},sx)}),{children:n,attributes:i}}}},hX={provides(t){let e=!1;ml.matchMedia&&(e=ml.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:oe(oe({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=oe(oe({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:oe(oe({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:oe(oe({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:oe(oe({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:oe(oe({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:oe(oe({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},pX={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},mX=[aY,ZY,QY,eX,tX,lX,cX,uX,fX,hX,pX];CY(mX,{mixoutsTo:_r});_r.noAuto;_r.config;_r.library;_r.dom;const l2=_r.parse;_r.findIconDefinition;_r.toHtml;const gX=_r.icon;_r.layer;_r.text;_r.counter;var iL={exports:{}},vX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yX=vX,bX=yX;function rL(){}function sL(){}sL.resetWarningCache=rL;var wX=function(){function t(i,r,s,o,a,l){if(l!==bX){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:sL,resetWarningCache:rL};return n.PropTypes=n,n};iL.exports=wX();var xX=iL.exports;const st=Jc(xX);function V3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Hs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V3(Object(n),!0).forEach(function(i){Hu(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ov(t){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ov(t)}function Hu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SX(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function kX(t,e){if(t==null)return{};var n=SX(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function c2(t){return _X(t)||CX(t)||EX(t)||AX()}function _X(t){if(Array.isArray(t))return u2(t)}function CX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function EX(t,e){if(t){if(typeof t=="string")return u2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u2(t,e)}}function u2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function AX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NX(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,f=t.fixedWidth,p=t.inverse,g=t.border,m=t.listItem,v=t.flip,y=t.size,w=t.rotation,x=t.pull,S=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":f,"fa-inverse":p,"fa-border":g,"fa-li":m,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},Hu(e,"fa-".concat(y),typeof y<"u"&&y!==null),Hu(e,"fa-rotate-".concat(w),typeof w<"u"&&w!==null&&w!==0),Hu(e,"fa-pull-".concat(x),typeof x<"u"&&x!==null),Hu(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(S).map(function(_){return S[_]?_:null}).filter(function(_){return _})}function PX(t){return t=t-0,t===t}function oL(t){return PX(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var MX=["style"];function RX(t){return t.charAt(0).toUpperCase()+t.slice(1)}function TX(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=oL(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[RX(r)]=s:e[r]=s,e},{})}function aL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return aL(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=TX(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[oL(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=kX(n,MX);return r.attrs.style=Hs(Hs({},r.attrs.style),o),t.apply(void 0,[e.tag,Hs(Hs({},r.attrs),a)].concat(c2(i)))}var lL=!1;try{lL=!0}catch{}function OX(){if(!lL&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function H3(t){if(t&&Ov(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(l2.icon)return l2.icon(t);if(t===null)return null;if(t&&Ov(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function ox(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Hu({},t,e):{}}var W3={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Le=Ft.forwardRef(function(t,e){var n=Hs(Hs({},W3),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=H3(i),d=ox("classes",[].concat(c2(NX(n)),c2((o||"").split(" ")))),f=ox("transform",typeof n.transform=="string"?l2.transform(n.transform):n.transform),p=ox("mask",H3(r)),g=gX(u,Hs(Hs(Hs(Hs({},d),f),p),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!g)return OX("Could not find icon",u),null;var m=g.abstract,v={ref:e};return Object.keys(n).forEach(function(y){W3.hasOwnProperty(y)||(v[y]=n[y])}),IX(m[0],v)});Le.displayName="FontAwesomeIcon";Le.propTypes={beat:st.bool,border:st.bool,beatFade:st.bool,bounce:st.bool,className:st.string,fade:st.bool,flash:st.bool,mask:st.oneOfType([st.object,st.array,st.string]),maskId:st.string,fixedWidth:st.bool,inverse:st.bool,flip:st.oneOf([!0,!1,"horizontal","vertical","both"]),icon:st.oneOfType([st.object,st.array,st.string]),listItem:st.bool,pull:st.oneOf(["right","left"]),pulse:st.bool,rotation:st.oneOf([0,90,180,270]),shake:st.bool,size:st.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:st.bool,spinPulse:st.bool,spinReverse:st.bool,symbol:st.oneOfType([st.bool,st.string]),title:st.string,titleId:st.string,transform:st.oneOfType([st.string,st.object]),swapOpacity:st.bool};var IX=aL.bind(null,Ft.createElement);function cL(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=cL(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function ee(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=cL(t))&&(i&&(i+=" "),i+=e);return i}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const G3={prefix:"fas",iconName:"info",icon:[192,512,[],"f129","M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"]},jX={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},AC=jX,rd={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},DX={prefix:"fas",iconName:"compress",icon:[448,512,[],"f066","M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"]},LX={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},$X={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},FX={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},BX={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"]},zX={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},uL=zX,Rh={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},UX={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},VX=UX,HX={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},WX={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},GX=WX,K3={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},KX={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},dL=KX,qX={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},fL=qX,YX={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M267.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160L64 241 64 96c0-17.7-14.3-32-32-32S0 78.3 0 96L0 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-145 11.5 9.6 192 160z"]},hL=YX,XX={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},q3={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},yp={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},JX={prefix:"fas",iconName:"expand",icon:[448,512,[],"f065","M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"]},ZX={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},um=ZX,NC={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},QX={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},eJ={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},PC={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},pL={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},tJ={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},nJ=tJ,iJ={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]},rJ={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},mL={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},sJ={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},d2=sJ,oJ={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 80l0 48c0 44.2-100.3 80-224 80S0 172.2 0 128L0 80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6L448 288c0 44.2-100.3 80-224 80S0 332.2 0 288L0 186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6l0 85.9c0 44.2-100.3 80-224 80S0 476.2 0 432l0-85.9z"]},dm={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]},gL={default:"bg-stone-800 text-white hover:bg-stone-700 focus:ring-stone-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-stone-600 bg-transparent text-white hover:bg-stone-800 focus:ring-stone-500",secondary:"bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500",ghost:"bg-transparent text-stone-300 hover:bg-stone-800 hover:text-white focus:ring-stone-500",link:"bg-transparent text-mantis-400 hover:text-mantis-300 hover:underline focus:ring-mantis-500",primary:"bg-mantis-600 text-white hover:bg-mantis-700 focus:ring-mantis-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",error:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},aJ={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"},mt=b.memo(b.forwardRef(({variant:t="default",size:e="md",isLoading:n=!1,loadingText:i,leftIcon:r,rightIcon:s,disabled:o=!1,fullWidth:a=!1,className:l,children:c,onClick:u,type:d="button","aria-label":f,title:p,...g},m)=>{const v=o||n;return h.jsxs("button",{ref:m,type:d,disabled:v,onClick:u,"aria-label":f,title:p,className:ee("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",gL[t],aJ[e],a&&"w-full",l),...g,children:[n&&h.jsx(Le,{icon:pL,className:"animate-spin","aria-hidden":"true"}),!n&&r&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:r}),h.jsx("span",{children:n&&i?i:c}),!n&&s&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:s})]})}));mt.displayName="Button";const C0=b.memo(b.forwardRef(({icon:t,variant:e="ghost",size:n="md",isLoading:i=!1,disabled:r=!1,className:s,onClick:o,"aria-label":a,title:l,...c},u)=>{const d=r||i,f={sm:"size-8",md:"size-10",lg:"size-12",xl:"size-14"};return h.jsx("button",{ref:u,disabled:d,onClick:o,"aria-label":a,title:l,className:ee("inline-flex items-center justify-center rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",gL[e],f[n],s),...c,children:i?h.jsx(Le,{icon:pL,className:"animate-spin","aria-hidden":"true"}):h.jsx("span",{className:"flex items-center justify-center","aria-hidden":"true",children:t})})}));C0.displayName="IconButton";const lJ=b.memo(({children:t,orientation:e="horizontal",className:n})=>h.jsx("div",{className:ee("inline-flex",e==="horizontal"?"flex-row":"flex-col",n),role:"group",children:t}));lJ.displayName="ButtonGroup";const vL={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2","top-start":"bottom-full left-0 mb-2","top-end":"bottom-full right-0 mb-2","bottom-start":"top-full left-0 mt-2","bottom-end":"top-full right-0 mt-2"},yL={top:"top-full left-1/2 transform -translate-x-1/2 border-t-stone-800",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-stone-800",left:"left-full top-1/2 transform -translate-y-1/2 border-l-stone-800",right:"right-full top-1/2 transform -translate-y-1/2 border-r-stone-800","top-start":"top-full left-4 border-t-stone-800","top-end":"top-full right-4 border-t-stone-800","bottom-start":"bottom-full left-4 border-b-stone-800","bottom-end":"bottom-full right-4 border-b-stone-800"},gr=b.memo(({content:t,children:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),[u,d]=b.useState(n),f=b.useRef(null),p=b.useRef(null),g=b.useRef(),m=b.useCallback(()=>{a||(document.body.classList.add("tooltip-open"),g.current=setTimeout(()=>{c(!0)},i))},[a,i]),v=b.useCallback(()=>{g.current&&clearTimeout(g.current),document.body.classList.remove("tooltip-open"),c(!1)},[]);return b.useEffect(()=>{if(!l||!p.current||!f.current)return;const y=p.current,x=f.current.getBoundingClientRect(),S=y.getBoundingClientRect();let _=n;x.left+S.width>window.innerWidth&&(n.includes("right")?_="left":n.includes("top")?_="top-end":n.includes("bottom")&&(_="bottom-end")),x.left-S.width<0&&(n.includes("left")?_="right":n.includes("top")?_="top-start":n.includes("bottom")&&(_="bottom-start")),x.top-S.height<0&&n.includes("top")&&(_="bottom"),x.bottom+S.height>window.innerHeight&&n.includes("bottom")&&(_="top"),d(_)},[l,n]),h.jsxs("div",{ref:f,className:ee("relative inline-block",r),onMouseEnter:m,onMouseLeave:v,onFocus:m,onBlur:v,children:[e,l&&h.jsxs("div",{ref:p,className:ee("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",vL[u]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:ee("absolute size-0 border-4 border-transparent",yL[u])})]})]})});gr.displayName="Tooltip";const cJ=b.memo(({content:t,className:e,size:n="md"})=>{const i={sm:"size-3",md:"size-4",lg:"size-5"};return h.jsx(gr,{content:t,className:e,children:h.jsx(Le,{icon:fL,className:ee("cursor-help text-stone-400 transition-colors hover:text-stone-300",i[n])})})});cJ.displayName="InfoTooltip";const uJ=b.memo(({content:t,trigger:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),u=b.useRef(null),d=b.useRef(null),f=b.useRef(),p=b.useCallback(()=>{a||(f.current=setTimeout(()=>{c(!0)},i))},[a,i]),g=b.useCallback(()=>{f.current&&clearTimeout(f.current),c(!1)},[]);return h.jsxs("div",{ref:u,className:ee("relative inline-block",r),onMouseEnter:p,onMouseLeave:g,onFocus:p,onBlur:g,children:[e,l&&h.jsxs("div",{ref:d,className:ee("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",vL[n]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:ee("absolute size-0 border-4 border-transparent",yL[n])})]})]})});uJ.displayName="CustomTooltip";function bL(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const wL=["en","es"];function MC(t){return function(n,i,...r){const s=bL(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const RC={},dJ=Symbol((RC?"production":void 0)!=="production"?"RESET":""),xL=t=>typeof(t==null?void 0:t.then)=="function";function fJ(t=()=>{try{return window.localStorage}catch(n){(RC?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,c)=>{var u,d;const f=g=>{if(g=g||"",i!==g){try{r=JSON.parse(g,e==null?void 0:e.reviver)}catch{return c}i=g}return r},p=(d=(u=t())==null?void 0:u.getItem(l))!=null?d:null;return xL(p)?p.then(f):f(p)},setItem:(l,c)=>{var u;return(u=t())==null?void 0:u.setItem(l,JSON.stringify(c,void 0))},removeItem:l=>{var c;return(c=t())==null?void 0:c.removeItem(l)}},o=l=>(c,u,d)=>l(c,f=>{let p;try{p=JSON.parse(f||"")}catch{p=d}u(p)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,c)=>{if(!(t()instanceof window.Storage))return()=>{};const u=d=>{d.storageArea===t()&&d.key===l&&c(d.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(s.subscribe=o(a)),s}const hJ=fJ();function SL(t,e,n=hJ,i){const r=i==null?void 0:i.getOnInit,s=de(r?n.getItem(t,e):e);return(RC?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},de(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===dJ?(l(s,e),n.removeItem(t)):xL(u)?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}const R=pC();function pJ(t){return h.jsx(BK,{store:R,children:t.children})}var wt;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(wt||(wt={}));var Y3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Y3||(Y3={}));const Me=wt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_a=t=>{switch(typeof t){case"undefined":return Me.undefined;case"string":return Me.string;case"number":return Number.isNaN(t)?Me.nan:Me.number;case"boolean":return Me.boolean;case"function":return Me.function;case"bigint":return Me.bigint;case"symbol":return Me.symbol;case"object":return Array.isArray(t)?Me.array:t===null?Me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Me.promise:typeof Map<"u"&&t instanceof Map?Me.map:typeof Set<"u"&&t instanceof Set?Me.set:typeof Date<"u"&&t instanceof Date?Me.date:Me.object;default:return Me.unknown}},ue=wt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ta extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),i}static assert(e){if(!(e instanceof ta))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,wt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];n[s]=n[s]||[],n[s].push(e(r))}else i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}ta.create=t=>new ta(t);const f2=(t,e)=>{let n;switch(t.code){case ue.invalid_type:t.received===Me.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,wt.jsonStringifyReplacer)}`;break;case ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${wt.joinValues(t.keys,", ")}`;break;case ue.invalid_union:n="Invalid input";break;case ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${wt.joinValues(t.options)}`;break;case ue.invalid_enum_value:n=`Invalid enum value. Expected ${wt.joinValues(t.options)}, received '${t.received}'`;break;case ue.invalid_arguments:n="Invalid function arguments";break;case ue.invalid_return_type:n="Invalid function return type";break;case ue.invalid_date:n="Invalid date";break;case ue.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:wt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ue.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ue.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ue.custom:n="Invalid input";break;case ue.invalid_intersection_types:n="Intersection results could not be merged";break;case ue.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ue.not_finite:n="Number must be finite";break;default:n=e.defaultError,wt.assertNever(t)}return{message:n}};let mJ=f2;function gJ(){return mJ}const vJ=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}};function xe(t,e){const n=gJ(),i=vJ({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===f2?void 0:f2].filter(r=>!!r)});t.common.issues.push(i)}class wr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Ye;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return wr.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Ye;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Ye=Object.freeze({status:"aborted"}),sh=t=>({status:"dirty",value:t}),Jr=t=>({status:"valid",value:t}),X3=t=>t.status==="aborted",J3=t=>t.status==="dirty",Dd=t=>t.status==="valid",Iv=t=>typeof Promise<"u"&&t instanceof Promise;var Te;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Te||(Te={}));class yl{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Z3=(t,e)=>{if(Dd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ta(t.common.issues);return this._error=n,this._error}}};function rt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class yt{get description(){return this._def.description}_getType(e){return _a(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:_a(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new wr,ctx:{common:e.parent.common,data:e.data,parsedType:_a(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Iv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_a(e)},r=this._parseSync({data:e,path:i.path,parent:i});return Z3(i,r)}"~validate"(e){var i,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_a(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return Dd(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(r=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>Dd(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_a(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Iv(r)?r:Promise.resolve(r));return Z3(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ue.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new Fd({schema:this,typeName:Xe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return al.create(this,this._def)}nullable(){return Bd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ao.create(this)}promise(){return $v.create(this,this._def)}or(e){return Dv.create([this,e],this._def)}and(e){return Lv.create(this,e,this._def)}transform(e){return new Fd({...rt(this._def),schema:this,typeName:Xe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new g2({...rt(this._def),innerType:this,defaultValue:n,typeName:Xe.ZodDefault})}brand(){return new BJ({typeName:Xe.ZodBranded,type:this,...rt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new v2({...rt(this._def),innerType:this,catchValue:n,typeName:Xe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return TC.create(this,e)}readonly(){return y2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const yJ=/^c[^\s-]{8,}$/i,bJ=/^[0-9a-z]+$/,wJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,xJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,SJ=/^[a-z0-9_-]{21}$/i,kJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_J=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,CJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,EJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ax;const AJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,NJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,PJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,MJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,RJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,TJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,kL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",OJ=new RegExp(`^${kL}$`);function _L(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function IJ(t){return new RegExp(`^${_L(t)}$`)}function jJ(t){let e=`${kL}T${_L(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function DJ(t,e){return!!((e==="v4"||!e)&&AJ.test(t)||(e==="v6"||!e)&&PJ.test(t))}function LJ(t,e){if(!kJ.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function $J(t,e){return!!((e==="v4"||!e)&&NJ.test(t)||(e==="v6"||!e)&&MJ.test(t))}class vc extends yt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Me.string){const s=this._getOrReturnCtx(e);return xe(s,{code:ue.invalid_type,expected:Me.string,received:s.parsedType}),Ye}const i=new wr;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?xe(r,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&xe(r,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")CJ.test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"email",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")ax||(ax=new RegExp(EJ,"u")),ax.test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"emoji",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")xJ.test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"uuid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")SJ.test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"nanoid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")yJ.test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"cuid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")bJ.test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"cuid2",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")wJ.test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"ulid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),xe(r,{validation:"url",code:ue.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"regex",code:ue.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?jJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?OJ.test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?IJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?_J.test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"duration",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?DJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"ip",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?LJ(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"jwt",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?$J(e.data,s.version)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"cidr",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?RJ.test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"base64",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?TJ.test(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{validation:"base64url",code:ue.invalid_string,message:s.message}),i.dirty()):wt.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ue.invalid_string,...Te.errToObj(i)})}_addCheck(e){return new vc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Te.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Te.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Te.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Te.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Te.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Te.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Te.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Te.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Te.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Te.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Te.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Te.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Te.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Te.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Te.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Te.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Te.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Te.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Te.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Te.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Te.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Te.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Te.errToObj(n)})}nonempty(e){return this.min(1,Te.errToObj(e))}trim(){return new vc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}vc.create=t=>new vc({checks:[],typeName:Xe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...rt(t)});function FJ(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return s%o/10**r}class Ld extends yt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Me.number){const s=this._getOrReturnCtx(e);return xe(s,{code:ue.invalid_type,expected:Me.number,received:s.parsedType}),Ye}let i;const r=new wr;for(const s of this._def.checks)s.kind==="int"?wt.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{code:ue.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),xe(i,{code:ue.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),xe(i,{code:ue.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?FJ(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),xe(i,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{code:ue.not_finite,message:s.message}),r.dirty()):wt.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Te.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Te.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Te.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Te.toString(n))}setLimit(e,n,i,r){return new Ld({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Te.toString(r)}]})}_addCheck(e){return new Ld({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Te.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Te.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Te.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Te.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Te.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Te.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&wt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ld.create=t=>new Ld({checks:[],typeName:Xe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...rt(t)});class bp extends yt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Me.bigint)return this._getInvalidInput(e);let i;const r=new wr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),xe(i,{code:ue.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),xe(i,{code:ue.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),xe(i,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):wt.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return xe(n,{code:ue.invalid_type,expected:Me.bigint,received:n.parsedType}),Ye}gte(e,n){return this.setLimit("min",e,!0,Te.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Te.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Te.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Te.toString(n))}setLimit(e,n,i,r){return new bp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Te.toString(r)}]})}_addCheck(e){return new bp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Te.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Te.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}bp.create=t=>new bp({checks:[],typeName:Xe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...rt(t)});class h2 extends yt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Me.boolean){const i=this._getOrReturnCtx(e);return xe(i,{code:ue.invalid_type,expected:Me.boolean,received:i.parsedType}),Ye}return Jr(e.data)}}h2.create=t=>new h2({typeName:Xe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...rt(t)});class jv extends yt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Me.date){const s=this._getOrReturnCtx(e);return xe(s,{code:ue.invalid_type,expected:Me.date,received:s.parsedType}),Ye}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return xe(s,{code:ue.invalid_date}),Ye}const i=new wr;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):wt.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new jv({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Te.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Te.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}jv.create=t=>new jv({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Xe.ZodDate,...rt(t)});class Q3 extends yt{_parse(e){if(this._getType(e)!==Me.symbol){const i=this._getOrReturnCtx(e);return xe(i,{code:ue.invalid_type,expected:Me.symbol,received:i.parsedType}),Ye}return Jr(e.data)}}Q3.create=t=>new Q3({typeName:Xe.ZodSymbol,...rt(t)});class e4 extends yt{_parse(e){if(this._getType(e)!==Me.undefined){const i=this._getOrReturnCtx(e);return xe(i,{code:ue.invalid_type,expected:Me.undefined,received:i.parsedType}),Ye}return Jr(e.data)}}e4.create=t=>new e4({typeName:Xe.ZodUndefined,...rt(t)});class t4 extends yt{_parse(e){if(this._getType(e)!==Me.null){const i=this._getOrReturnCtx(e);return xe(i,{code:ue.invalid_type,expected:Me.null,received:i.parsedType}),Ye}return Jr(e.data)}}t4.create=t=>new t4({typeName:Xe.ZodNull,...rt(t)});class n4 extends yt{constructor(){super(...arguments),this._any=!0}_parse(e){return Jr(e.data)}}n4.create=t=>new n4({typeName:Xe.ZodAny,...rt(t)});class i4 extends yt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Jr(e.data)}}i4.create=t=>new i4({typeName:Xe.ZodUnknown,...rt(t)});class bl extends yt{_parse(e){const n=this._getOrReturnCtx(e);return xe(n,{code:ue.invalid_type,expected:Me.never,received:n.parsedType}),Ye}}bl.create=t=>new bl({typeName:Xe.ZodNever,...rt(t)});class r4 extends yt{_parse(e){if(this._getType(e)!==Me.undefined){const i=this._getOrReturnCtx(e);return xe(i,{code:ue.invalid_type,expected:Me.void,received:i.parsedType}),Ye}return Jr(e.data)}}r4.create=t=>new r4({typeName:Xe.ZodVoid,...rt(t)});class ao extends yt{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==Me.array)return xe(n,{code:ue.invalid_type,expected:Me.array,received:n.parsedType}),Ye;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(xe(n,{code:o?ue.too_big:ue.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(xe(n,{code:ue.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(xe(n,{code:ue.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new yl(n,o,n.path,a)))).then(o=>wr.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new yl(n,o,n.path,a)));return wr.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new ao({...this._def,minLength:{value:e,message:Te.toString(n)}})}max(e,n){return new ao({...this._def,maxLength:{value:e,message:Te.toString(n)}})}length(e,n){return new ao({...this._def,exactLength:{value:e,message:Te.toString(n)}})}nonempty(e){return this.min(1,e)}}ao.create=(t,e)=>new ao({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Xe.ZodArray,...rt(e)});function Su(t){if(t instanceof gn){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=al.create(Su(i))}return new gn({...t._def,shape:()=>e})}else return t instanceof ao?new ao({...t._def,type:Su(t.element)}):t instanceof al?al.create(Su(t.unwrap())):t instanceof Bd?Bd.create(Su(t.unwrap())):t instanceof Fc?Fc.create(t.items.map(e=>Su(e))):t}class gn extends yt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=wt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Me.object){const c=this._getOrReturnCtx(e);return xe(c,{code:ue.invalid_type,expected:Me.object,received:c.parsedType}),Ye}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof bl&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new yl(r,d,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof bl){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(xe(r,{code:ue.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new yl(r,d,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,f=await u.value;c.push({key:d,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>wr.mergeObjectSync(i,c)):wr.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Te.errToObj,new gn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var s,o;const r=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:Te.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new gn({...this._def,unknownKeys:"strip"})}passthrough(){return new gn({...this._def,unknownKeys:"passthrough"})}extend(e){return new gn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new gn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Xe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new gn({...this._def,catchall:e})}pick(e){const n={};for(const i of wt.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new gn({...this._def,shape:()=>n})}omit(e){const n={};for(const i of wt.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new gn({...this._def,shape:()=>n})}deepPartial(){return Su(this)}partial(e){const n={};for(const i of wt.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new gn({...this._def,shape:()=>n})}required(e){const n={};for(const i of wt.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof al;)s=s._def.innerType;n[i]=s}return new gn({...this._def,shape:()=>n})}keyof(){return CL(wt.objectKeys(this.shape))}}gn.create=(t,e)=>new gn({shape:()=>t,unknownKeys:"strip",catchall:bl.create(),typeName:Xe.ZodObject,...rt(e)});gn.strictCreate=(t,e)=>new gn({shape:()=>t,unknownKeys:"strict",catchall:bl.create(),typeName:Xe.ZodObject,...rt(e)});gn.lazycreate=(t,e)=>new gn({shape:t,unknownKeys:"strip",catchall:bl.create(),typeName:Xe.ZodObject,...rt(e)});class Dv extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ta(a.ctx.common.issues));return xe(n,{code:ue.invalid_union,unionErrors:o}),Ye}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new ta(l));return xe(n,{code:ue.invalid_union,unionErrors:a}),Ye}}get options(){return this._def.options}}Dv.create=(t,e)=>new Dv({options:t,typeName:Xe.ZodUnion,...rt(e)});function p2(t,e){const n=_a(t),i=_a(e);if(t===e)return{valid:!0,data:t};if(n===Me.object&&i===Me.object){const r=wt.objectKeys(e),s=wt.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=p2(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Me.array&&i===Me.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=p2(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===Me.date&&i===Me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Lv extends yt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(X3(s)||X3(o))return Ye;const a=p2(s.value,o.value);return a.valid?((J3(s)||J3(o))&&n.dirty(),{status:n.value,value:a.data}):(xe(i,{code:ue.invalid_intersection_types}),Ye)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Lv.create=(t,e,n)=>new Lv({left:t,right:e,typeName:Xe.ZodIntersection,...rt(n)});class Fc extends yt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.array)return xe(i,{code:ue.invalid_type,expected:Me.array,received:i.parsedType}),Ye;if(i.data.length<this._def.items.length)return xe(i,{code:ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ye;!this._def.rest&&i.data.length>this._def.items.length&&(xe(i,{code:ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new yl(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>wr.mergeArray(n,o)):wr.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Fc({...this._def,rest:e})}}Fc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fc({items:t,typeName:Xe.ZodTuple,rest:null,...rt(e)})};class s4 extends yt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.map)return xe(i,{code:ue.invalid_type,expected:Me.map,received:i.parsedType}),Ye;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:r._parse(new yl(i,a,i.path,[c,"key"])),value:s._parse(new yl(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Ye;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Ye;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}s4.create=(t,e,n)=>new s4({valueType:e,keyType:t,typeName:Xe.ZodMap,...rt(n)});class wp extends yt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.set)return xe(i,{code:ue.invalid_type,expected:Me.set,received:i.parsedType}),Ye;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(xe(i,{code:ue.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(xe(i,{code:ue.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Ye;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...i.data.values()].map((l,c)=>s._parse(new yl(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new wp({...this._def,minSize:{value:e,message:Te.toString(n)}})}max(e,n){return new wp({...this._def,maxSize:{value:e,message:Te.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}wp.create=(t,e)=>new wp({valueType:t,minSize:null,maxSize:null,typeName:Xe.ZodSet,...rt(e)});class o4 extends yt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}o4.create=(t,e)=>new o4({getter:t,typeName:Xe.ZodLazy,...rt(e)});class m2 extends yt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return xe(n,{received:n.data,code:ue.invalid_literal,expected:this._def.value}),Ye}return{status:"valid",value:e.data}}get value(){return this._def.value}}m2.create=(t,e)=>new m2({value:t,typeName:Xe.ZodLiteral,...rt(e)});function CL(t,e){return new $d({values:t,typeName:Xe.ZodEnum,...rt(e)})}class $d extends yt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return xe(n,{expected:wt.joinValues(i),received:n.parsedType,code:ue.invalid_type}),Ye}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return xe(n,{received:n.data,code:ue.invalid_enum_value,options:i}),Ye}return Jr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return $d.create(e,{...this._def,...n})}exclude(e,n=this._def){return $d.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}$d.create=CL;class a4 extends yt{_parse(e){const n=wt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Me.string&&i.parsedType!==Me.number){const r=wt.objectValues(n);return xe(i,{expected:wt.joinValues(r),received:i.parsedType,code:ue.invalid_type}),Ye}if(this._cache||(this._cache=new Set(wt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=wt.objectValues(n);return xe(i,{received:i.data,code:ue.invalid_enum_value,options:r}),Ye}return Jr(e.data)}get enum(){return this._def.values}}a4.create=(t,e)=>new a4({values:t,typeName:Xe.ZodNativeEnum,...rt(e)});class $v extends yt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.promise&&n.common.async===!1)return xe(n,{code:ue.invalid_type,expected:Me.promise,received:n.parsedType}),Ye;const i=n.parsedType===Me.promise?n.data:Promise.resolve(n.data);return Jr(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}$v.create=(t,e)=>new $v({type:t,typeName:Xe.ZodPromise,...rt(e)});class Fd extends yt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Xe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{xe(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ye;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?Ye:l.status==="dirty"||n.value==="dirty"?sh(l.value):l});{if(n.value==="aborted")return Ye;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?Ye:a.status==="dirty"||n.value==="dirty"?sh(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Ye:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Ye:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Dd(o))return Ye;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Dd(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):Ye);wt.assertNever(r)}}Fd.create=(t,e,n)=>new Fd({schema:t,typeName:Xe.ZodEffects,effect:e,...rt(n)});Fd.createWithPreprocess=(t,e,n)=>new Fd({schema:e,effect:{type:"preprocess",transform:t},typeName:Xe.ZodEffects,...rt(n)});class al extends yt{_parse(e){return this._getType(e)===Me.undefined?Jr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}al.create=(t,e)=>new al({innerType:t,typeName:Xe.ZodOptional,...rt(e)});class Bd extends yt{_parse(e){return this._getType(e)===Me.null?Jr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Bd.create=(t,e)=>new Bd({innerType:t,typeName:Xe.ZodNullable,...rt(e)});class g2 extends yt{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===Me.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}g2.create=(t,e)=>new g2({innerType:t,typeName:Xe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...rt(e)});class v2 extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Iv(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ta(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new ta(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}v2.create=(t,e)=>new v2({innerType:t,typeName:Xe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...rt(e)});class l4 extends yt{_parse(e){if(this._getType(e)!==Me.nan){const i=this._getOrReturnCtx(e);return xe(i,{code:ue.invalid_type,expected:Me.nan,received:i.parsedType}),Ye}return{status:"valid",value:e.data}}}l4.create=t=>new l4({typeName:Xe.ZodNaN,...rt(t)});class BJ extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class TC extends yt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Ye:s.status==="dirty"?(n.dirty(),sh(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Ye:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new TC({in:e,out:n,typeName:Xe.ZodPipeline})}}class y2 extends yt{_parse(e){const n=this._def.innerType._parse(e),i=r=>(Dd(r)&&(r.value=Object.freeze(r.value)),r);return Iv(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}y2.create=(t,e)=>new y2({innerType:t,typeName:Xe.ZodReadonly,...rt(e)});var Xe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Xe||(Xe={}));const Yl=Ld.create,lu=h2.create;bl.create;ao.create;const c4=gn.create,zJ=Dv.create;Lv.create;Fc.create;const fg=m2.create,Pf=$d.create;$v.create;al.create;Bd.create;const UJ=["randomize","clean","unchanged"],VJ=["switches-and-leds","printer","null"],HJ=["printer","null"],b2=c4({showInstructionCycle:lu().catch(!1),showStatsCPU:lu().catch(!0),language:Pf(wL).catch(WJ),editorFontSize:Yl().int().min(8).max(64).catch(14),dataOnLoad:Pf(UJ).catch("clean"),devices:c4({keyboardAndScreen:lu(),pic:lu(),pio:Pf(["switches-and-leds","printer"]).nullable(),handshake:Pf(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:lu().catch(!0),executionUnit:Yl().min(1).max(500).catch(150),clockSpeed:Yl().min(100).max(1e3).catch(1e3),cpuSpeed:zJ([fg(1),fg(2),fg(4),fg(10)]).catch(1),printerSpeed:Yl().min(500).max(2e4).catch(5e3),flagsVisibility:Pf(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:Yl().min(0).catch(1),filterContrast:Yl().min(0).catch(1),filterInvert:lu().catch(!1),filterSaturation:Yl().min(0).catch(1)}),ku=b2.parse({});function WJ(){const t=navigator.language.toLowerCase();for(const e of wL)if(t.startsWith(e))return e;return"en"}const Zr=SL("vonsim-settings",ku,{getItem(t,e){try{const n=localStorage.getItem(t);return b2.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=b2.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),Tn=()=>R.get(Zr),sf=()=>am(Zr);de(t=>t(Zr).showInstructionCycle);de(t=>t(Zr).showStatsCPU);const GJ=de(t=>t(Zr).language),OC=()=>tt(GJ);de(t=>t(Zr).flagsVisibility);const KJ=de(t=>t(Zr).editorFontSize),qJ=()=>tt(KJ);de(t=>t(Zr).dataOnLoad);const YJ=de(t=>t(Zr).devices),EL=()=>tt(YJ);de(t=>{const e=t(Zr);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});de(t=>{const e=t(Zr);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")});function xp(t){const e=t.charCodeAt(0);return z.fitsUnsigned(e,8)?e:null}function IC(t){return z.fitsUnsigned(t,8)?String.fromCharCode(t):null}function AL(t){return XJ.at(t)??null}const XJ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","SHY","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ"];var Ht,Jt;const ht=class ht{constructor(e,n){De(this,Ht);De(this,Jt);te(this,Ht,e|0),te(this,Jt,n)}get size(){return A(this,Jt)}is8bits(){return A(this,Jt)===8}is16bits(){return A(this,Jt)===16}get unsigned(){return A(this,Ht)}get signed(){return A(this,Ht)<=ht.maxSignedValue(A(this,Jt))?A(this,Ht):A(this,Ht)-(ht.maxValue(A(this,Jt))+1)}get low(){return this.is8bits()?this:ht.fromUnsigned(A(this,Ht)&ht.maxValue(8),8)}get high(){return this.is8bits()?new ht(0,8):ht.fromUnsigned(A(this,Ht)>>8&ht.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return ht.fromUnsigned(A(this,Ht)&~ht.maxValue(8)|e.unsigned,A(this,Jt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return ht.fromUnsigned(A(this,Ht)&ht.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Jt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Jt)}`);return(A(this,Ht)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Jt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Jt)}`);return n?ht.fromUnsigned(A(this,Ht)|1<<e,A(this,Jt)):ht.fromUnsigned(A(this,Ht)&~(1<<e),A(this,Jt))}add(e){return e=Number(e),ht.fromUnsigned(A(this,Ht)+e,A(this,Jt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,Ht)===A(e,Ht)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Jt));for(let n=0;n<A(this,Jt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,Ht).toString(16).padStart(A(this,Jt)/4,"0").toUpperCase();case"bin":return A(this,Ht).toString(2).padStart(A(this,Jt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Jt)===8?IC(A(this,Ht))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,Jt)===8?AL(A(this,Ht))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,Ht)}valueOf(){return A(this,Ht)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=ht.minSignedValue(n)&&e<=ht.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=ht.minValue()&&e<=ht.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=ht.minSignedValue(n)&&e<=ht.maxSignedValue(n)}static fromUnsigned(e,n){if(!ht.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new ht(e,n)}static fromSigned(e,n){if(!ht.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new ht(e+ht.maxValue(n)+1,n):new ht(e,n)}static fromNumber(e,n){return e<0?ht.fromSigned(e,n):ht.fromUnsigned(e,n)}static fromChar(e){const n=xp(e)??-1;return ht.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*ht.maxValue(e));return new ht(n,e)}static zero(e){return new ht(0,e)}};Ht=new WeakMap,Jt=new WeakMap;let z=ht;var Mo;const Pa=class Pa{constructor(e){De(this,Mo);te(this,Mo,e)}get value(){return A(this,Mo).unsigned}get byte(){return A(this,Mo)}toString(e=!1){let n=A(this,Mo).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,Mo).toJSON()}valueOf(){return A(this,Mo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Pa.MIN_ADDRESS&&e<=Pa.MAX_ADDRESS}static from(e){if(e=Number(e),!Pa.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=z.fromUnsigned(e,16);return new Pa(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};Mo=new WeakMap,me(Pa,"MIN_ADDRESS",0),me(Pa,"MAX_ADDRESS",255);let ke=Pa;var Ro;const Ma=class Ma{constructor(e){De(this,Ro);te(this,Ro,e)}get value(){return A(this,Ro).unsigned}get byte(){return A(this,Ro)}toString(e=!0){let n=A(this,Ro).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,Ro).toJSON()}valueOf(){return A(this,Ro).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ma.MIN_ADDRESS&&e<=Ma.MAX_ADDRESS}static from(e){if(e=Number(e),!Ma.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=z.fromUnsigned(e,8);return new Ma(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};Ro=new WeakMap,me(Ma,"MIN_ADDRESS",0),me(Ma,"MAX_ADDRESS",127);let xr=Ma;function u4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function d4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u4(Object(n),!0).forEach(function(i){JJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function JJ(t,e,n){return e=ZJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZJ(t){var e=QJ(t,"string");return typeof e=="symbol"?e:String(e)}function QJ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Fv=NL({});function NL(t){return e.withOptions=n=>NL(d4(d4({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let u=0;u<r.length;u++){let d=r[u];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,u<i.length&&(a+=i[u])}const l=a.split(`
`);let c=null;for(const u of l){const d=u.match(/^(\s+)\S+/);if(d){const f=d[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){const u=c;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(u):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const eZ=ke.from(ke.MAX_ADDRESS).toString(),tZ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${xr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!","new-version-available":"There's a new version available in the repository.","local-update":"A new local version has been detected.",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:Fv`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...","fetching-operands-completed":"Operands fetched",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."},"total-cycles":"Total cycles","instruction-count":"Instruction count",cpi:"Cycles per instruction (CPI)","cpi-help":"Average clock cycles per executed instruction (CPI = total cycles / total instructions)","cpu-time":"CPU time","cpu-time-help":"Total CPU time = total cycles × cycle time (current: {cycleTime} ms)"},memory:{name:"Memory",cell:t=>`Cell ${ke.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${eZ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>Fv`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"0689468"}](https://github.com/ruiz-jose/VonSim8/commit/${"0689468"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},nZ=ke.from(ke.MAX_ADDRESS).toString(),iZ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${xr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"¡Hay una nueva versión disponible!","new-version-available":"Hay una nueva versión disponible en el repositorio.","local-update":"Se ha detectado una nueva versión local.",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la “FileSystem API”","no-file":"No hay ningún archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, ¿desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:Fv`
      ; ¡Bienvenido a VonSim 8!
      ; Este es un ejemplo de código que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instrucción",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadísticas CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Captación instrucción...","fetching-operands":"Leyendo operandos...","fetching-operands-completed":"Operandos obtenidos",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."},"total-cycles":"Total de ciclos","instruction-count":"Recuento de instrucciones",cpi:"Ciclos por instrucción (CPI)","cpi-help":"Promedio de ciclos de reloj por instrucción ejecutada (CPI = ciclos totales / instrucciones totales)","cpu-time":"Tiempo de CPU","cpu-time-help":"Tiempo total de CPU = ciclos totales × tiempo de ciclo (actual: {cycleTime} ms)"},memory:{name:"Memoria",cell:t=>`Celda ${ke.format(t)}`,"fix-address":"Fijar dirección","unfix-address":"Desfijar dirección","address-must-be-integer":"El valor de inicio debe ser un número entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${nZ}.`,"address-increment":"Incrementar dirección (Page Up)","address-decrement":"Decrementar dirección (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",instructionCycle:{label:"Ciclo de Instrucción"},statsCPU:{label:"Estadísticas CPU"},flags:{label:"Banderas",description:"Selecciona qué banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamaño de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"También agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitación de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"},filters:{label:"Filtros",description:"Filtros aplicados a la página. Útil cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturación"},reset:"Restablecer configuración"},footer:{documentation:"Documentación",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>Fv`
        <!-- Por favor, describa el problema que está teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Información extra (POR FAVOR, NO BORRAR)</summary>

          **Versión**: [${"0689468"}](https://github.com/ruiz-jose/VonSim8/commit/${"0689468"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuración

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},db=MC({en:tZ,es:iZ});function Xt(){const t=OC();return b.useCallback((e,...n)=>db(t,e,...n),[t])}const rZ=[{name:"Documentación",url:"https://ruiz-jose.github.io/VonSim8/docs/",icon:"icon-[lucide--book-open]"},{name:"GitHub",url:"https://github.com/ruiz-jose/VonSim8",icon:mq}],PL=b.memo(({name:t,url:e,icon:n})=>h.jsx(gr,{content:t,position:"top",children:h.jsx(mt,{variant:"ghost",size:"sm",onClick:()=>window.open(e,"_blank"),className:"hover-lift","aria-label":t,children:typeof n=="string"?h.jsx("span",{className:ee(n,"size-4")}):h.jsx(Le,{icon:n,className:"size-4"})})}));PL.displayName="SocialLink";const ML=b.memo(()=>{const t=Xt(),[e]=sf(),n=b.useMemo(()=>{var s;const i=((s=window.codemirror)==null?void 0:s.state.doc.toString())||"",r=t("footer.issue.body",e,i);return`https://github.com/ruiz-jose/VonSim8/issues/new?body=${encodeURIComponent(r)}`},[t,e]);return h.jsx("footer",{className:"bg-black px-3 py-1.5 text-xs text-white","data-testid":"footer",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-stone-400",children:["© Copyright 2017-2025 — III-LIDI, FI, UNLP, UNER — v","0689468"]}),h.jsxs("div",{className:"flex items-center gap-1","data-testid":"footer-links",children:[rZ.map(i=>h.jsx(PL,{name:i.name,url:i.url,icon:i.icon},i.name)),h.jsx(gr,{content:t("footer.issue.report"),position:"top",children:h.jsx(mt,{variant:"ghost",size:"sm",onClick:()=>window.open(n,"_blank"),className:"hover-lift","aria-label":t("footer.issue.report"),children:h.jsx("span",{className:"icon-[lucide--bug] size-4"})})})]})]})})});ML.displayName="Footer";const sZ="modulepreload",oZ=function(t){return"/VonSim8/"+t},f4={},RL=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=oZ(l),l in f4)return;f4[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":sZ,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Sp(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class dn{constructor(e,n){me(this,"start");me(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new dn(i,r)}toJSON(){return this.range}}const h4=ke.from(ke.MAX_ADDRESS).toString(),aZ=xr.from(xr.MAX_ADDRESS).toString(),lZ={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${ke.format(t)} is out of range (max memory address: ${h4}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":`The program is empty or does not contain executable instructions.

Remember: a valid program must have at least one instruction and end with the END directive.

For example:

    org 1000h
    mov al, 3
    hlt
    end

See the documentation or examples for more help.`,"end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`This instruction would be placed in address ${ke.format(t)}, which is outside the memory range (max memory address: ${h4}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${aZ}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},p4=ke.from(ke.MAX_ADDRESS).toString(),cZ=xr.from(xr.MAX_ADDRESS).toString(),uZ={"address-has-code":t=>`La dirección de memoria ${ke.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${ke.format(t)} está fuera de rango (dirección máxima de memoria: ${p4}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":`El programa está vacío o no contiene instrucciones ejecutables.

Recuerda que un programa válido debe tener al menos una instrucción y finalizar con la directiva END.

Por ejemplo:

    org 1000h
    mov al, 3
    hlt
    end

Consulta la documentación o los ejemplos para más ayuda.`,"end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${ke.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${p4}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${cZ}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${ke.format(t)}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instrucción sería colocada en la dirección ${ke.format(t)}, la cual ya está reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carácter solo puede contener un carácter.","empty-character":"Los carácter no puede estar vacío.","invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-character":"Carácter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},dZ=MC({en:lZ,es:uZ});class se extends Error{constructor(n,...i){super();me(this,"code");me(this,"context");me(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof dn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return dZ(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof se?n:new se("unexpected-error",n)}}const jC=[[0,z.fromUnsigned(160,8)],[3,z.fromUnsigned(176,8)],[6,z.fromUnsigned(192,8)],[7,z.fromUnsigned(208,8)]],m4=new Set(...jC.map(([t])=>[t]));var ja,pd;class fZ{constructor(){me(this,"codeMemory",new Set);me(this,"labels",new Map);me(this,"hasORG",!1);De(this,ja,!1);De(this,pd,!1)}loadStatements(e){if(A(this,ja))throw new Error("Tried to load statements twice");te(this,ja,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new se("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:ke.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:ke.from(0)})}return n}computeAddresses(e){if(A(this,pd))throw new Error("Tried to compute addresses twice");te(this,pd,!0),this.codeMemory.clear();const n=new Set,i=e.some(u=>u.isInstruction()&&u.instruction==="INT");if(this.hasORG=e.some(u=>u.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new se("missing-org").at(e[0].position);let r=i&&!this.hasORG?8:this.hasORG?32:0,s=null,o=r;const a=[],l=[],c=[];for(const u of e)u.isInstruction()?a.push(u):u.isOriginChange()?l.push(u):u.isDataDirective()&&c.push(u);if(this.hasORG){const u=[],d=[];return Sp(e,f=>{if(f.isEnd()||f.isDataDirective()&&f.directive==="EQU")return;if(f.isOriginChange()){r=f.newAddress;return}const p=r;if(p===null)throw new se("missing-org").at(f);const g=f.length,m=p,v=p+g-1;for(const w of d)if(Math.max(m,w.start)<=Math.min(v,w.end)){u.push(new se("occupied-address",ke.from(m)).at(f));return}d.push({start:m,end:v,statement:f});for(let w=0;w<g;w++){if(!ke.inRange(p+w))throw new se("instruction-out-of-range",p+w).at(f);const x=ke.from(p+w);if(n.has(x.value))throw new se("occupied-address",x).at(f);if(i&&m4.has(x.value))throw new se("reserved-address",x).at(f);n.add(x.value),f.isInstruction()&&this.codeMemory.add(x.value)}const y=ke.from(p);f.setStart(y),f.label&&this.labels.set(f.label,{type:f.isInstruction()?"instruction":f.directive,address:y}),(f.isDataDirective()||f.isInstruction())&&(r+=g,o=Math.max(o,r))},se.from),u}else return Sp([...a,...l,...c],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const m=d.newAddress;m<32?s=m:r=m;return}let f;if(d.isDataDirective())s===null&&(s=o),f=s;else if(d.isInstruction())f=r;else throw new se("missing-org").at(d);const p=d.length;for(let m=0;m<p;m++){if(!ke.inRange(f+m))throw new se("instruction-out-of-range",f+m).at(d);const v=ke.from(f+m);if(n.has(v.value))throw new se("occupied-address",v).at(d);if(i&&m4.has(v.value))throw new se("reserved-address",v).at(d);n.add(v.value),d.isInstruction()&&this.codeMemory.add(v.value)}const g=ke.from(f);if(d.setStart(g),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:g}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=p}else d.isInstruction()&&(r+=p,o=Math.max(o,r))},se.from)}labelExists(e){if(!A(this,ja))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,ja))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,ja))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,pd))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof ke&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}ja=new WeakMap,pd=new WeakMap;const hZ=["AL","BL","CL","DL","AH","BH","CH","DH"],TL=["AX","BX","CX","DX","SP"],Bv=[...hZ,...TL],DC=["DB","DW","EQU"],LC=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],pZ=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...Bv,...LC,...DC];class mZ{constructor(e,n,i){me(this,"type");me(this,"lexeme");me(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class gZ{constructor(e){me(this,"scanned",!1);me(this,"tokens",[]);me(this,"position",new dn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new dn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-character").at(this.position);if(xp(this.peek())===null)throw new se("lexer.only-ascii").at(new dn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new se("lexer.empty-character").at(this.position);if(n>=2)throw new se("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-string").at(this.position);if(xp(this.peek())===null)throw new se("lexer.only-ascii").at(new dn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()===".")throw new se("lexer.unexpected-character",".").at(new dn(this.position.end,this.position.end+1));if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new se("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new se("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){if(e==="."&&this.isDigit(this.peek()))throw new se("lexer.unexpected-character",".").at(new dn(this.position.start,this.position.start+1));for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();pZ.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new se("lexer.unexpected-character",e).at(this.position)}return this.position=new dn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new mZ(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new dn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Hn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}me(Hn,"numberLiteral",(...e)=>new vZ(...e)),me(Hn,"label",(...e)=>new yZ(...e)),me(Hn,"unaryOperation",(...e)=>new bZ(...e)),me(Hn,"binaryOperation",(...e)=>new wZ(...e));class vZ extends Hn{constructor(n,i){super(i);me(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let yZ=class extends Hn{constructor(n,i,r){super(r);me(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new se("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new se("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new se("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class bZ extends Hn{constructor(n,i,r){super(r);me(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class wZ extends Hn{constructor(n,i,r,s){super(s);me(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class fb{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var To;class OL extends fb{constructor(n,i,r){super(r);me(this,"type","data-directive");me(this,"label");me(this,"values");De(this,To,null);this.values=n,this.label=i}get start(){if(A(this,To)===null)throw new Error("Start not set");return A(this,To)}setStart(n){if(A(this,To)!==null)throw new Error("Start already set");te(this,To,n)}toJSON(){return{...super.toJSON(),...A(this,To)?{start:A(this,To).toJSON()}:{},directive:this.directive,label:this.label}}}To=new WeakMap;var wc,Da,md;class xZ extends OL{constructor(n,i,r){super(n,i,r);me(this,"directive","EQU");De(this,wc,"not-processed");De(this,Da,null);De(this,md,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,md)??((n=A(this,Da))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,Da))throw new Error("Constant already validated");if(!this.label)throw new se("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new se("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new se("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new se("cannot-be-unassinged","EQU").at(n);te(this,Da,n.value)}evaluateExpressions(n){if(!A(this,Da))throw new Error("Constant not validated");if(A(this,wc)==="processed")return A(this,md);if(A(this,wc)==="processing")throw new se("circular-reference").at(this.position);te(this,wc,"processed");const i=A(this,Da).evaluate(n);return te(this,wc,"processed"),te(this,md,i),i}evaluate(n){return this.evaluateExpressions(n)}}wc=new WeakMap,Da=new WeakMap,md=new WeakMap;const oh=Symbol("unassigned");var Ti,rs;class SZ extends OL{constructor(n,i,r,s){super(i,r,s);me(this,"size");De(this,Ti,null);De(this,rs,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,Ti))throw new Error("Data directive not validated");return A(this,Ti).length*(this.size/8)}getValues(){if(!A(this,rs))throw new Error("Data directive not evaluated");return A(this,rs)}toJSON(){return{...super.toJSON(),values:(A(this,rs)??A(this,Ti)??this.values).map(n=>n===oh?"?":n.toJSON())}}validate(){if(A(this,Ti))throw new Error("Data directive already validated");te(this,Ti,[]);for(const n of this.values)if(n.isUnassigned())A(this,Ti).push(oh);else if(n.isString()){if(this.directive!=="DB")throw new se("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=xp(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new dn(n.position.start+r,n.position.start+r+1),a=Hn.numberLiteral(s,o);A(this,Ti).push(a)}}else A(this,Ti).push(n.value);if(A(this,Ti).length===0)throw new se("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,Ti))throw new Error("Data directive not validated");if(A(this,rs))throw new Error("Data directive already evaluated");te(this,rs,[]);const i=Sp(A(this,Ti),r=>{if(r===oh)A(this,rs).push(oh);else{const s=r.evaluate(n);if(!z.fits(s,this.size))throw new se("value-out-of-range",s,this.size).at(this);const o=z.fromNumber(s,this.size);A(this,rs).push(o)}},se.from);return i.length>0&&te(this,rs,null),i}}Ti=new WeakMap,rs=new WeakMap;class $C{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class kZ extends $C{constructor(n,i){super(i);me(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class _Z extends $C{constructor(n){super(n);me(this,"type","unassigned")}}class CZ extends $C{constructor(n){super(n.position);me(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function EZ(t,e,n){const i=dn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new SZ(t.type,e,n,i);case"EQU":return new xZ(e,n,i)}}class lx extends fb{constructor(n){super(n);me(this,"type","end")}}function oc(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var Oo;class eu extends fb{constructor(n,i,r){super(r);me(this,"type","instruction");me(this,"label");me(this,"operands");De(this,Oo,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,Oo)===null)throw new Error("Start not set");return A(this,Oo)}setStart(n){if(A(this,Oo)!==null)throw new Error("Start already set");te(this,Oo,n)}toJSON(){return{...super.toJSON(),...A(this,Oo)?{start:A(this,Oo).toJSON()}:{},instruction:this.instruction,label:this.label}}}Oo=new WeakMap;var ri,Nr;class AZ extends eu{constructor(n,i,r,s){super(i,r,s);De(this,ri,null);De(this,Nr,null);this.instruction=n}get length(){if(!A(this,ri))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,ri);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,Nr))throw new Error("Instruction not evaluated");return A(this,Nr)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(oc(r)&3)<<2,o[0]|=(oc(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(oc(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(oc(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(oc(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,Nr)??A(this,ri)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,ri))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new se("size-mismatch",r.size,i.size).at(this);te(this,ri,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);te(this,ri,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);te(this,ri,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new se("size-mismatch",s.size,i.size).at(this);te(this,ri,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}te(this,ri,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new se("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new se("size-mismatch",s,r.size).at(this);te(this,ri,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new se("double-memory-access").at(this);s==="auto"&&(s=8),te(this,ri,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new se("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,ri))throw new Error("Instruction not validated");if(A(this,Nr))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,ri),a=l=>{const c=l.evaluate(n);if(!ke.inRange(c))throw new se("address-out-of-range",c).at(l);const u=ke.from(c);if(n.addressIsReserved(u))throw new se("address-has-code",u).at(l);return u};switch(i){case"reg<-reg":{te(this,Nr,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{te(this,Nr,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!z.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const c=z.fromNumber(l,r);te(this,Nr,{mode:i,size:r,out:s,src:c});return}case"mem<-reg":{te(this,Nr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!z.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const c=z.fromNumber(l,r);te(this,Nr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return i}}}ri=new WeakMap,Nr=new WeakMap;var Fs,Io;class NZ extends eu{constructor(n,i,r,s){super(i,r,s);De(this,Fs,null);De(this,Io,null);me(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,Io))throw new Error("Instruction not evaluated");return A(this,Io)}toJSON(){return{...super.toJSON(),...A(this,Io)?{value:A(this,Io).toJSON()}:A(this,Fs)?{initialValue:A(this,Fs).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Fs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new se("expects-immediate").at(n);te(this,Fs,n.value)}evaluateExpressions(n){if(!A(this,Fs))throw new Error("Instruction not validated");if(A(this,Io))throw new Error("Instruction aready evaluated");const i=A(this,Fs).evaluate(n);if(!z.fitsUnsigned(i,8))throw new se("invalid-interrupt",i).at(A(this,Fs));te(this,Io,z.fromUnsigned(i,8))}}Fs=new WeakMap,Io=new WeakMap;var ss,jo,t5;let PZ=(t5=class extends eu{constructor(n,i,r,s){super(i,r,s);De(this,ss,null);De(this,jo,null);this.instruction=n}get length(){if(!A(this,ss))throw new Error("Instruction not validated");return A(this,ss).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,jo)===null)throw new Error("Operation not set");return A(this,jo)}toJSON(){return{...super.toJSON(),...A(this,jo)??A(this,ss)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,ss))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new se("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new se("expects-dx").at(i);te(this,ss,{port:"variable",size:r});return}if(i.isNumberExpression()){te(this,ss,{port:"fixed",size:r,address:i.value});return}throw new se("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,ss))throw new Error("Instruction not validated");if(A(this,jo))throw new Error("Instruction aready evaluated");const i=A(this,ss);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!xr.inRange(r))throw new se("io-address-out-of-range",r).at(this);const s=xr.from(r);te(this,jo,{port:"fixed",size:i.size,address:s})}else te(this,jo,{port:"variable",size:i.size})}},ss=new WeakMap,jo=new WeakMap,t5);var Do,Bs,n5;let MZ=(n5=class extends eu{constructor(n,i,r,s){super(i,r,s);De(this,Do,null);De(this,Bs,null);me(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Bs)===null)throw new Error("Instruction not evaluated");return A(this,Bs)}toJSON(){return{...super.toJSON(),...A(this,Bs)?{address:A(this,Bs).toJSON()}:A(this,Do)?{jumpTo:A(this,Do)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Do))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new se("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new se("label-not-found",r).at(i);if(s!=="instruction")throw new se("label-should-be-an-instruction",r).at(i);te(this,Do,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!ke.inRange(r))throw new se("address-out-of-range",r).at(i);te(this,Bs,ke.from(r))}}evaluateExpressions(n){if(!A(this,Bs)&&A(this,Do)){const i=n.getLabelValue(A(this,Do));if(!ke.inRange(i))throw new se("address-out-of-range",i).at(this);te(this,Bs,ke.from(i))}}},Do=new WeakMap,Bs=new WeakMap,n5);var zs,i5;let RZ=(i5=class extends eu{constructor(n,i,r,s){super(i,r,s);De(this,zs,null);me(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=oc(this.register),new Uint8Array([i])}get register(){if(!A(this,zs))throw new Error("Instruction not evaluated");return A(this,zs)}toJSON(){return{...super.toJSON(),...A(this,zs)?{register:A(this,zs)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,zs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new se("expects-word-register").at(n);te(this,zs,n.value)}evaluateExpressions(){if(!A(this,zs))throw new Error("Instruction not validated")}},zs=new WeakMap,i5);var er,Us;class TZ extends eu{constructor(n,i,r,s){super(i,r,s);De(this,er,null);De(this,Us,null);this.instruction=n}get length(){if(!A(this,er))throw new Error("Instruction not validated");const{mode:n}=A(this,er);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=oc(this.operation.reg);break}case"mem-direct":{const r=this.operation.address.byte;n.push(r.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Us))throw new Error("Instruction not evaluated");return A(this,Us)}toJSON(){return{...super.toJSON(),...A(this,Us)??A(this,er)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,er))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){te(this,er,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);te(this,er,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);te(this,er,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){te(this,er,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new se("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,er))throw new Error("Instruction not validated");if(A(this,Us))throw new Error("Instruction aready evaluated");const i=A(this,er);switch(i.mode){case"reg":{te(this,Us,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!ke.inRange(r))throw new se("address-out-of-range",r).at(i.address);const s=ke.from(r);if(n.addressIsReserved(s))throw new se("address-has-code",s).at(i.address);te(this,Us,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{te(this,Us,{mode:"mem-indirect",size:i.size});return}default:return i}}}er=new WeakMap,Us=new WeakMap;var gd;class OZ extends eu{constructor(n,i,r,s){super(i,r,s);De(this,gd,!1);me(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,gd))throw new Error("Instruction already validated");if(this.operands.length>0)throw new se("expects-no-operands").at(this);te(this,gd,!0)}evaluateExpressions(){if(!A(this,gd))throw new Error("Instruction not validated")}}gd=new WeakMap;class hb{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class IZ extends hb{constructor(n){super(n.position);me(this,"type","register");me(this,"value");this.value=n.type}get size(){return TL.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class jZ extends hb{constructor(n,i){super(i);me(this,"type","indirect-address");me(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class DZ extends hb{constructor(n,i,r){super(r);me(this,"type","direct-address");me(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class zv extends hb{constructor(n){super(n.position);me(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return zv.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new se("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:Hn.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=zv.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:Hn.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function g4(t,e,n){const i=dn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new OZ(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new AZ(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new TZ(t.type,e,n,i);case"PUSH":case"POP":return new RZ(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new MZ(t.type,e,n,i);case"IN":case"OUT":return new PZ(t.type,e,n,i);case"INT":return new NZ(t.type,e,n,i)}}class LZ extends fb{constructor(n,i){super(i);me(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let $Z=class{constructor(e){me(this,"tokens");me(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new se("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new se("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new LZ(i,dn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new se("end-must-be-the-last-statement").at(e);return new lx(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new lx(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new lx(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...DC);if(e&&!n)throw new se("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),EZ(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new kZ(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new _Z(e.position)}return new CZ(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...LC);if(e&&!n){const s=this.peek();throw new se("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return g4(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),g4(n,r,i)}instructionOperand(){if(this.match(...Bv)){const n=this.previous();return new IZ(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new se("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Bv)){if(!this.check("BX","BL"))throw new se("parser.indirect-addressing-must-be-bx");const i=this.advance(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-literal","]",i.lexeme));return new jZ(e==null?void 0:e.type,dn.merge(e==null?void 0:e.position,n.position,r.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-expression","]"));return new DZ(i,e==null?void 0:e.type,dn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new se("parser.expected-literal-after-literal","[","PTR");return new zv(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new se("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new se("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Hn.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=xp(i.lexeme.slice(1,-1));return Hn.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new se("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new se("parser.expected-label-after-offset").at(this.peek());if(!n)throw new se("parser.expected-argument").at(this.peek());return Hn.label(n.lexeme.toUpperCase(),e!==null,dn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new se("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Hn.unaryOperation(e.type==="PLUS"?"+":"-",n,dn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Hn.binaryOperation(e,"*",n,dn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Hn.binaryOperation(e,n.type==="PLUS"?"+":"-",i,dn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function IL(t){try{const n=new gZ(t).scanTokens(),r=new $Z(n).parse();if(!r.at(-1))throw new se("empty-program");let o=[];const a=new fZ;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Sp(r,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},se.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=Sp(r,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},se.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[se.from(e)]}}}class Cs{constructor(e){me(this,"computer");this.computer=e.computer}}const FZ=t=>ke.format(t).slice(-2),BZ=FZ(ke.MAX_ADDRESS),zZ={"address-has-instruction":t=>`Memory address ${ke.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${ke.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${ke.format(t)} is out of range (max memory address: ${BZ}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${xr.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${ke.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},UZ=ke.from(ke.MAX_ADDRESS).toString(),VZ={"address-has-instruction":t=>`La dirección de memoria ${ke.format(t)} tiene una instrucción, y no se puede escribir.`,"address-is-reserved":t=>`La dirección de memoria ${ke.format(t)} está reservada, y no se puede escribir.`,"address-out-of-range":t=>`La dirección de memoria ${ke.format(t)} está fuera de rango (dirección máxima de memoria: ${UZ}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontró ningún módulo conectado a la dirección de memoria E/S ${xr.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${ke.format(t)} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},HZ=MC({en:zZ,es:VZ});class en extends Error{constructor(n,...i){super();me(this,"code");me(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return HZ(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof en?n:new en("unexpected-error",n)}}class la{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new en("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var Ay,jL;class WZ extends la{constructor(){super(...arguments);De(this,Ay)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Mt(this,Ay,jL).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct",ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"?r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"):(typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!0),typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!1));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("id.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}i==="mem<-imd"&&(yield*n.cpu.copyByteRegister("id.l","left.l")),yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=z.fromSigned(d,r),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>z.maxValue(r)?(u.CF=!0,c=z.fromUnsigned(f-z.maxValue(r)-1,r)):(u.CF=!1,c=z.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=z.fromUnsigned(f+z.maxValue(r)+1,r)):(u.CF=!1,c=z.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Ay=new WeakSet,jL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var Ny,DL;class GZ extends la{constructor(){super(...arguments);De(this,Ny)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Mt(this,Ny,DL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=z.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=z.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===z.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",z.fromSigned(1,16));const o=i.unsigned+1;o>z.maxValue(this.operation.size)?(s.CF=!0,r=z.fromUnsigned(o-z.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=z.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",z.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=z.fromUnsigned(o+z.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=z.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Ny=new WeakSet,DL=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class KZ extends la{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Py,LL;class qZ extends la{constructor(){super(...arguments);De(this,Py)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Mt(this,Py,LL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new en("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new en("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new en("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Py=new WeakSet,LL=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class YZ extends la{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l",!0),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.getMBR("ri.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class XZ extends la{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"halting"},yield{type:"cpu:halt"},!1;return!0}}function w2(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function cx(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var My,$L;class JZ extends la{constructor(){super(...arguments);De(this,My)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Mt(this,My,$L).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(yield{type:"cpu:cycle.update",phase:"writeback"},r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),i){case"reg<-reg":{if(yield{type:"cpu:cycle.update",phase:"writeback"},r===8)yield{type:"cpu:register.buscopy",src:o,dest:s,size:8};else{const[a,l]=cx(o),[c,u]=cx(s);yield{type:"cpu:register.buscopy",src:a,dest:c,size:8},l&&u&&(yield{type:"cpu:register.buscopy",src:l,dest:u,size:8})}return!0}case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(yield{type:"cpu:cycle.update",phase:"writeback"},r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=cx(o);return yield*n.cpu.setMAR("ri"),yield{type:"cpu:cycle.update",phase:"writeback"},yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),yield{type:"cpu:cycle.update",phase:"writeback"},!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}My=new WeakSet,$L=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class ZZ extends la{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class QZ extends la{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function eQ(t){switch(t.instruction){case"MOV":return new JZ(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new WZ(t);case"NOT":case"NEG":case"INC":case"DEC":return new GZ(t);case"IN":case"OUT":return new qZ(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new QZ(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new YZ(t);case"RET":case"IRET":return new ZZ(t);case"INT":return new KZ(t);case"CLI":case"STI":case"NOP":case"HLT":return new XZ(t)}}function tQ(t){for(const[e,n]of jC)if(n.unsigned===t.unsigned)return e;return null}function*nQ(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new en("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new en("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new en("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",z.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new en("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",z.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",z.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===z.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var vd,Qe,Pr,Oi,mn,_u,Er,r5;let iQ=(r5=class extends Cs{constructor(n){super(n);De(this,mn);De(this,vd);De(this,Qe);De(this,Pr);De(this,Oi);n.data==="unchanged"?(te(this,Qe,A(n.previous.cpu,Qe)),te(this,Pr,A(n.previous.cpu,Pr)),te(this,Oi,A(n.previous.cpu,Oi))):(te(this,Qe,{AX:z.zero(16),BX:z.zero(16),CX:z.zero(16),DX:z.zero(16),SP:z.zero(16),IP:z.zero(16),IR:z.zero(8),ri:z.zero(16),id:z.zero(16),left:z.zero(16),right:z.zero(16),result:z.zero(16),FLAGS:z.zero(16)}),te(this,Pr,z.zero(16)),te(this,Oi,z.zero(8))),A(this,Qe).SP=z.fromUnsigned(ke.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1;let s;r?s=32:i?s=8:s=0,A(this,Qe).IP=z.fromUnsigned(s,16),A(this,Qe).ri=z.fromUnsigned(0,16),A(this,Qe).id=z.fromUnsigned(0,16),Mt(this,mn,Er).call(this,"IF",!0),te(this,vd,new Map);for(const o of n.program.instructions){const a=eQ(o);A(this,vd).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,Qe).IP,r=tQ(i);if(r!==null){if(!(yield*nQ(this.computer,r)))return}else{const s=A(this,vd).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new en("no-instruction",A(this,Qe).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",z.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const i=z.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",i),yield*this.copyWordRegister("ri","IP"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,Qe)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,Pr).toJSON(),MBR:A(this,Oi).toJSON()}}getRegister(n){const[i,r]=w2(n);return r==="low"?A(this,Qe)[i].low:r==="high"?A(this,Qe)[i].high:A(this,Qe)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Mt(this,mn,_u).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Mt(this,mn,_u).call(this,i,r.withHigh(z.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Mt(this,mn,_u).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Mt(this,mn,_u).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,Qe).FLAGS.bit(1);case"ZF":return A(this,Qe).FLAGS.bit(0);case"SF":return A(this,Qe).FLAGS.bit(3);case"IF":return A(this,Qe).FLAGS.bit(4);case"OF":return A(this,Qe).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Mt(this,mn,Er).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Mt(this,mn,Er).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Mt(this,mn,Er).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Mt(this,mn,Er).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Mt(this,mn,Er).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,Qe).FLAGS}}*aluExecute(n,i,r){A(this,Qe).result=i.is8bits()?A(this,Qe).result.withLow(i):i,typeof r.CF=="boolean"&&Mt(this,mn,Er).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Mt(this,mn,Er).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Mt(this,mn,Er).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Mt(this,mn,Er).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Mt(this,mn,Er).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,Qe).result,flags:A(this,Qe).FLAGS}}*setMAR(n){const i=this.getRegister(n);te(this,Pr,i.withHigh(z.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Mt(this,mn,_u).call(this,n,A(this,Oi)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);te(this,Oi,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,Pr));return i?(te(this,Oi,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,Pr),A(this,Oi)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,Pr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(te(this,Oi,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,Pr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,Oi))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return te(this,Oi,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return ke.inRange(i.unsigned-1)?(i=i.add(-1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?ke.inRange(i.unsigned-1)?!0:(yield{type:"cpu:error",error:new en("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new en("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return ke.inRange(i)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),i=i.add(1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new en("stack-underflow")},!1)}},vd=new WeakMap,Qe=new WeakMap,Pr=new WeakMap,Oi=new WeakMap,mn=new WeakSet,_u=function(n,i){const[r,s]=w2(n);if(s===null){if(A(this,Qe)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,Qe)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,Qe)[r]=A(this,Qe)[r].withLow(i):A(this,Qe)[r]=A(this,Qe)[r].withHigh(i)}},Er=function(n,i){switch(n){case"CF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(1,i);return;case"ZF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(0,i);return;case"SF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(3,i);return;case"IF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(4,i);return;case"OF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},r5);var Ya,tr,Lo,La;let FL=(Ya=class extends Cs{constructor(n){super(n);De(this,tr);De(this,Lo);De(this,La,!1);n.data==="unchanged"&&n.previous.io.printer?(te(this,tr,A(n.previous.io.printer,tr)),te(this,Lo,A(n.previous.io.printer,Lo)),te(this,La,A(n.previous.io.printer,La))):(te(this,tr,[]),te(this,Lo,""),te(this,La,!1))}get busy(){return A(this,tr).length>=Ya.BUFFER_SIZE}*setStrobe(n){const i=A(this,La);if(i===n)return;if(te(this,La,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,tr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){te(this,Lo,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,tr).length===0)return;const[n,...i]=A(this,tr);if(te(this,tr,i),yield{type:"printer:buffer.pop",char:n},i.length===Ya.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=IC(n.unsigned);te(this,Lo,A(this,Lo)+r),yield{type:"printer:paper.print",char:r}}}get hasPending(){return A(this,tr).length>0}toJSON(){return{paper:A(this,Lo),buffer:[...A(this,tr).map(n=>n.unsigned)]}}},tr=new WeakMap,Lo=new WeakMap,La=new WeakMap,me(Ya,"BUFFER_SIZE",5),Ya);class pb extends Cs{}let BL=class extends pb{constructor(n){super(n);me(this,"PA");me(this,"PB");me(this,"CA");me(this,"CB");me(this,"leds",null);me(this,"printer",null);me(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=z.random(8),this.PB=z.random(8),this.CA=z.random(8),this.CB=z.random(8)):(this.PA=z.zero(8),this.PB=z.zero(8),this.CA=z.zero(8),this.CB=z.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class v4 extends BL{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends FL{*readData(){const i=n.readData();return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return z.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=z.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var $o,s5;let rQ=(s5=class extends Cs{constructor(n){super(n);De(this,$o);n.data==="unchanged"&&n.previous.io.leds?te(this,$o,A(n.previous.io.leds,$o)):n.data==="randomize"?te(this,$o,z.random(8)):te(this,$o,z.zero(8))}get state(){return A(this,$o)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,$o).toJSON()}},$o=new WeakMap,s5);var Mr,o5;let sQ=(o5=class extends Cs{constructor(n){super(n);De(this,Mr);n.data==="unchanged"&&n.previous.io.switches?te(this,Mr,A(n.previous.io.switches,Mr)):n.data==="randomize"?te(this,Mr,z.random(8)):te(this,Mr,z.zero(8))}get state(){return A(this,Mr)}*toggle(n){te(this,Mr,A(this,Mr).withBit(n,!A(this,Mr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,Mr).toJSON()}},Mr=new WeakMap,o5);class oQ extends BL{constructor(e){super(e);const n=this;this.leds=new class extends rQ{}(e),this.switches=new class extends sQ{*toggle(i){yield*super.toggle(i),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=z.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.leds.update(z.fromUnsigned(n,8))}}}let aQ=class extends Cs{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},lQ=class extends Cs{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var yd,a5;let cQ=(a5=class extends Cs{constructor(){super(...arguments);De(this,yd,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,yd);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},te(this,yd,null),n}setLastCharRead(n){te(this,yd,n)}toJSON(){return null}},yd=new WeakMap,a5);var nr,l5;let uQ=(l5=class extends Cs{constructor(n){super(n);De(this,nr);n.data==="unchanged"&&n.previous.io.screen?te(this,nr,A(n.previous.io.screen,nr)):te(this,nr,"")}clear(){return this.sendChar(z.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:te(this,nr,A(this,nr).slice(0,-1));break;case 10:te(this,nr,A(this,nr)+`
`);break;case 12:te(this,nr,"");break;default:te(this,nr,A(this,nr)+IC(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,nr)}}toJSON(){return A(this,nr)}},nr=new WeakMap,l5);var Fo,pi,c5;let dQ=(c5=class extends pb{constructor(n){super(n);De(this,Fo);De(this,pi);me(this,"printer");n.data==="randomize"?te(this,Fo,z.random(8)):te(this,Fo,z.zero(8)),te(this,pi,z.zero(8));const i=this;this.printer=new class extends FL{*readData(){const r=A(i,Fo);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,pi).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,Fo);else if(n==="STATE")i=A(this,pi);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")te(this,Fo,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),te(this,pi,i),yield{type:"handshake:register.update",register:n,value:i},A(this,pi).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),te(this,pi,A(this,pi).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,pi)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){te(this,pi,A(this,pi).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,pi)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Fo).toJSON(),STATE:A(this,pi).toJSON()}}},Fo=new WeakMap,pi=new WeakMap,c5);var fs,Bo,Ii,mi,os,uo,E0,A0;let fQ=(fs=class extends pb{constructor(n){super(n);De(this,uo);De(this,Bo);De(this,Ii);De(this,mi);De(this,os);te(this,Bo,z.fromUnsigned(255,8)),te(this,Ii,z.fromUnsigned(0,8)),te(this,mi,z.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?te(this,os,A(n.previous.io.pic,os)):n.data==="randomize"?te(this,os,new Array(fs.LINES).fill(z.zero(8)).map(()=>z.random(8))):te(this,os,new Array(fs.LINES).fill(z.zero(8)))}chipSelect(n){const r=4+fs.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=z.zero(8);else if(n==="IMR")i=A(this,Bo);else if(n==="IRR")i=A(this,Ii);else if(n==="ISR")i=A(this,mi);else{const r=Number(n.slice(3));i=A(this,os)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,mi).isZero()||(yield{type:"pic:intr.off"},te(this,mi,z.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,mi)},yield*Mt(this,uo,A0).call(this));else if(n==="IMR")te(this,Bo,i),yield{type:"pic:register.update",register:"IMR",value:A(this,Bo)},yield*Mt(this,uo,A0).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,os)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=fs.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Ii).bit(n)||(te(this,Ii,A(this,Ii).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ii)},yield*Mt(this,uo,A0).call(this))}isINTRActive(){return A(this,mi).isZero()&&Mt(this,uo,E0).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,mi).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Mt(this,uo,E0).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");te(this,mi,A(this,mi).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,mi)},te(this,Ii,A(this,Ii).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ii)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,os)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,Bo).toJSON(),IRR:A(this,Ii).toJSON(),ISR:A(this,mi).toJSON(),lines:A(this,os).map(n=>n.toJSON())}}},Bo=new WeakMap,Ii=new WeakMap,mi=new WeakMap,os=new WeakMap,uo=new WeakSet,E0=function(){for(let n=0;n<fs.LINES;n++)if(A(this,Ii).bit(n)&&!A(this,Bo).bit(n))return n;return null},A0=function*(){A(this,mi).isZero()&&Mt(this,uo,E0).call(this)!==null&&(yield{type:"pic:intr.on"})},me(fs,"LINES",8),fs);var Vs,$a,u5;let hQ=(u5=class extends pb{constructor(n){super(n);De(this,Vs);De(this,$a);te(this,Vs,z.zero(8)),te(this,$a,z.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Vs);else if(n==="COMP")i=A(this,$a);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")te(this,Vs,i);else if(n==="COMP")te(this,$a,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Vs).unsigned===z.maxValue(8)?z.zero(8):A(this,Vs).add(1);te(this,Vs,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,$a).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Vs).toJSON(),COMP:A(this,$a).toJSON()}}},Vs=new WeakMap,$a=new WeakMap,u5);class pQ extends Cs{constructor(n){super(n);me(this,"clock",null);me(this,"f10",null);me(this,"keyboard",null);me(this,"screen",null);me(this,"handshake",null);me(this,"pic",null);me(this,"pio",null);me(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new cQ(n),this.screen=new uQ(n)),n.devices.pic&&(this.clock=new aQ(n),this.f10=new lQ(n),this.timer=new hQ(n),this.pic=new fQ(n)),this.pio=n.devices.pio==="switches-and-leds"?new oQ(n):n.devices.pio==="printer"?new v4(n):null,n.devices.handshake){if(this.pio instanceof v4)throw new en("io-printer-conflict");this.handshake=new dQ(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,c,u;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(c=this.pio)==null?void 0:c.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(u=this.timer)==null?void 0:u.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new en("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new en("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new en("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,c,u,d,f;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((c=this.handshake)==null?void 0:c.toJSON())??null,pic:((u=this.pic)==null?void 0:u.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((f=this.timer)==null?void 0:f.toJSON())??null}}}var Xa,gi,bd,wd;let mQ=(Xa=class extends Cs{constructor(n){super(n);De(this,gi);De(this,bd);De(this,wd);n.data==="unchanged"?te(this,gi,A(n.previous.memory,gi)):n.data==="randomize"?te(this,gi,new Uint8Array(Xa.SIZE).map(()=>z.random(8).unsigned)):te(this,gi,new Uint8Array(Xa.SIZE).fill(0)),A(this,gi)[255]=1;const i=n.program.instructions.some(r=>r.instruction==="INT");if(te(this,wd,new Set),i)for(const[r,s]of jC){const o=r;if(A(this,gi)[o]=s.unsigned,A(this,wd).add(o),r===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let c=0;c<a.length;c++)A(this,gi)[l+c]=a[c],A(this,wd).add(l+c)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==oh&&A(this,gi).set(o.toUint8Array(),s),s+=r.size/8}te(this,bd,new Set);for(const r of n.program.instructions){A(this,gi).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,bd).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!ke.inRange(n))return yield{type:"memory:read.error",error:new en("address-out-of-range",n)},null;const i=z.fromUnsigned(A(this,gi).at(n),8);return yield{type:"memory:read.ok",address:ke.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},ke.inRange(n)?(A(this,bd).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instrucción en la dirección ${ke.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instrucción en la dirección ${ke.format(n)}`)),A(this,gi).set([i.unsigned],n),yield{type:"memory:write.ok",address:ke.from(n),value:i},!0):(yield{type:"memory:write.error",error:new en("address-out-of-range",n)},!1)}toJSON(){return[...A(this,gi)]}},gi=new WeakMap,bd=new WeakMap,wd=new WeakMap,me(Xa,"SIZE",ke.MAX_ADDRESS+1),Xa);class y4{constructor(e){me(this,"cpu");me(this,"memory");me(this,"io");const n={computer:this,...e};this.cpu=new iQ(n),this.memory=new mQ(n),this.io=new pQ(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var St;class gQ{constructor(){De(this,St,new y4({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){te(this,St,new y4({...e,previous:A(this,St)}))}getComputerState(){var e;return((e=A(this,St))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,St))throw new en("no-program");return A(this,St).cpu.run()}get devices(){if(!A(this,St))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,St).io.clock!==null,tick:()=>{if(A(this,St).io.clock)return A(this,St).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,St).io,press:()=>{if(A(this,St).io.f10)return A(this,St).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,St).io,readChar:e=>{if(A(this,St).io.keyboard)return A(this,St).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,St).io},printer:{connected:()=>A(this,St).io.printer!==null,clear:()=>{if(A(this,St).io.printer)return A(this,St).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,St).io.printer)return A(this,St).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,St).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,St).io,clear:()=>{if(A(this,St).io.screen)return A(this,St).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,St).io,toggle:e=>{if(A(this,St).io.switches)return A(this,St).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}St=new WeakMap;const ux=de(z.zero(16)),dx=de(z.zero(16)),vQ=de(z.zero(8)),fx=de(z.zero(16)),hx=de(z.zero(16)),px=de(z.zero(16)),mx=de(z.zero(16)),gx=de(z.zero(16)),vx=de(z.zero(16)),Uv=de(z.zero(16)),_c=de(z.zero(8)),xt=de(""),kp=de(0),Mn=de(0),FC=de(!1),yQ=de(!1),mb=de(0),ac=de([]),zL=de(!1);de(!0);de(!0);const x2=de(!1),yc=de({canAnimate:!0,pendingMessage:null}),va=t=>de(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),ya=t=>de(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),Oe={AL:de(z.zero(8)),BL:de(z.zero(8)),CL:de(z.zero(8)),DL:de(z.zero(8)),SP:ux,"SP.l":va(ux),"SP.h":ya(ux),IP:dx,"IP.l":va(dx),"IP.h":ya(dx),IR:vQ,ri:fx,"ri.l":va(fx),"ri.h":ya(fx),id:hx,"id.l":va(hx),"id.h":ya(hx),left:px,"left.l":va(px),"left.h":ya(px),right:mx,"right.l":va(mx),"right.h":ya(mx),result:gx,"result.l":va(gx),"result.h":ya(gx),FLAGS:vx,"FLAGS.l":va(vx),"FLAGS.h":ya(vx),MAR:Uv,MBR:_c},zn=de({phase:"stopped"}),UL=de("ADD");function bQ(t,e=!1){e?(R.set(Oe.AL,z.zero(8)),R.set(Oe.BL,z.zero(8)),R.set(Oe.CL,z.zero(8)),R.set(Oe.DL,z.zero(8)),R.set(Oe.SP,z.fromUnsigned(255,16)),R.set(Oe.IP,z.zero(16)),R.set(Oe.IR,z.zero(8)),R.set(Oe.ri,z.zero(16)),R.set(Oe.id,z.zero(16)),R.set(Oe.left,z.zero(16)),R.set(Oe.right,z.zero(16)),R.set(Oe.result,z.zero(16)),R.set(Oe.FLAGS,z.zero(16)),R.set(Oe.MAR,z.zero(16)),R.set(Oe.MBR,z.zero(8))):(R.set(Oe.AL,z.fromUnsigned(t.cpu.AX&255,8)),R.set(Oe.BL,z.fromUnsigned(t.cpu.BX&255,8)),R.set(Oe.CL,z.fromUnsigned(t.cpu.CX&255,8)),R.set(Oe.DL,z.fromUnsigned(t.cpu.DX&255,8)),R.set(Oe.SP,z.fromUnsigned(t.cpu.SP,16)),R.set(Oe.IP,z.fromUnsigned(t.cpu.IP,16)),R.set(Oe.IR,z.fromUnsigned(t.cpu.IR,8)),R.set(Oe.ri,z.fromUnsigned(t.cpu.ri,16)),R.set(Oe.id,z.fromUnsigned(t.cpu.id,16)),R.set(Oe.left,z.fromUnsigned(t.cpu.left,16)),R.set(Oe.right,z.fromUnsigned(t.cpu.right,16)),R.set(Oe.result,z.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,R.set(Oe.FLAGS,z.fromUnsigned(t.cpu.FLAGS,16)),R.set(Oe.MAR,z.fromUnsigned(t.cpu.MAR,16)),R.set(Oe.MBR,z.fromUnsigned(t.cpu.MBR,8))),R.set(zn,{phase:"stopped"})}const VL=de([]),HL=de([]),Vv=de(new Array(ke.MAX_ADDRESS+1).fill(z.zero(8))),_p=de(ke.from(32)),wQ=de(null),hg=256,xQ=de(t=>{const e=t(wQ)??t(_p);let n=e.value-e.value%hg,i=n+hg-1;i>ke.MAX_ADDRESS&&(i=ke.MAX_ADDRESS,n=i-hg+1);const r=t(Vv),s=[];for(let o=0;o<hg;o++)s.push({address:ke.from(n+o),value:r[n+o]});return s});function SQ(t,e=!1){e?R.set(Vv,new Array(ke.MAX_ADDRESS+1).fill(z.zero(8))):R.set(Vv,t.memory.map(n=>z.fromUnsigned(n,8))),R.set(_p,ke.from(32))}let S2=[],WL=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?WL:S2).push(n=n+t[e])})();function kQ(t){if(t<768)return!1;for(let e=0,n=S2.length;;){let i=e+n>>1;if(t<S2[i])n=i;else if(t>=WL[i])e=i+1;else return!0;if(e==n)return!1}}function b4(t){return t>=127462&&t<=127487}const w4=8205;function _Q(t,e,n=!0,i=!0){return(n?GL:CQ)(t,e,i)}function GL(t,e,n){if(e==t.length)return e;e&&KL(t.charCodeAt(e))&&qL(t.charCodeAt(e-1))&&e--;let i=yx(t,e);for(e+=x4(i);e<t.length;){let r=yx(t,e);if(i==w4||r==w4||n&&kQ(r))e+=x4(r),i=r;else if(b4(r)){let s=0,o=e-2;for(;o>=0&&b4(yx(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function CQ(t,e,n){for(;e>0;){let i=GL(t,e-2,n);if(i<e)return i;e--}return 0}function yx(t,e){let n=t.charCodeAt(e);if(!qL(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return KL(i)?(n-55296<<10)+(i-56320)+65536:n}function KL(t){return t>=56320&&t<57344}function qL(t){return t>=55296&&t<56320}function x4(t){return t<65536?1:2}class gt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=zd(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Ks.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=zd(this,e,n);let i=[];return this.decompose(e,n,i,0),Ks.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Th(this),s=new Th(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new Th(this,e)}iterRange(e,n=this.length){return new YL(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new XL(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?gt.empty:e.length<=32?new un(e):Ks.from(un.split(e,[]))}}class un extends gt{constructor(e,n=EQ(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new AQ(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new un(S4(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=N0(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new un(a,o.length+s.length));else{let l=a.length>>1;i.push(new un(a.slice(0,l)),new un(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof un))return super.replace(e,n,i);[e,n]=zd(this,e,n);let r=N0(this.text,N0(i.text,S4(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new un(r,s):Ks.from(un.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=zd(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new un(i,r)),i=[],r=-1);return r>-1&&n.push(new un(i,r)),n}}class Ks extends gt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=zd(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[r]=l,new Ks(u,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=zd(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Ks))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let g of e)g.flatten(p);return new un(p,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,u=[];function d(p){let g;if(p.lines>s&&p instanceof Ks)for(let m of p.children)d(m);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof un&&l&&(g=u[u.length-1])instanceof un&&p.lines+g.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new un(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>r&&f(),l+=p.lines,c+=p.length+1,u.push(p))}function f(){l!=0&&(a.push(u.length==1?u[0]:Ks.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return f(),a.length==1?a[0]:new Ks(a,n)}}gt.empty=new un([""],0);function EQ(t){let e=-1;for(let n of t)e+=n.length+1;return e}function N0(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function S4(t,e,n){return N0(t,[""],e,n)}class Th{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof un?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof un?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof un){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof un?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class YL{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Th(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class XL{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(gt.prototype[Symbol.iterator]=function(){return this.iter()},Th.prototype[Symbol.iterator]=YL.prototype[Symbol.iterator]=XL.prototype[Symbol.iterator]=function(){return this});class AQ{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function zd(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Yn(t,e,n=!0,i=!0){return _Q(t,e,n,i)}function NQ(t){return t>=56320&&t<57344}function PQ(t){return t>=55296&&t<56320}function Or(t,e){let n=t.charCodeAt(e);if(!PQ(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return NQ(i)?(n-55296<<10)+(i-56320)+65536:n}function BC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Uo(t){return t<65536?1:2}const k2=/\r\n?|\n/;var zi=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(zi||(zi={}));class lo{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){_2(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new lo(e)}composeDesc(e){return this.empty?e:e.empty?this:JL(this,e)}mapDesc(e,n=!1){return e.empty?this:C2(this,e,n)}mapPos(e,n=-1,i=zi.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=zi.Simple&&c>=e&&(i==zi.TrackDel&&r<e&&c>e||i==zi.TrackBefore&&r<e||i==zi.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new lo(e)}static create(e){return new lo(e)}}class kn extends lo{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return _2(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return C2(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(gt.empty);i.push(o?e.slice(s,s+o):gt.empty)}s+=o}return new kn(n,i)}compose(e){return this.empty?e:e.empty?this:JL(this,e,!0)}map(e,n=!1){return e.empty?this:C2(this,e,n,!0)}iterChanges(e,n=!1){_2(this,e,n)}get desc(){return lo.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Cp(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);si(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;si(n,u,d),d>0&&Ua(i,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);si(n,u,-1),si(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new kn(n,i),filtered:lo.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<n&&si(r,n-o,-1);let d=new kn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof kn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:p}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let g=p?typeof p=="string"?gt.of(p.split(i||k2)):p:gt.empty,m=g.length;if(d==f&&m==0)return;d<o&&l(),d>o&&si(r,d-o,-1),si(r,f-d,m),Ua(s,r,g),o=f}}return c(e),l(!a),a}static empty(e){return new kn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(gt.empty);i[r]=gt.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new kn(n,i)}static createSet(e,n){return new kn(e,n)}}function si(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Ua(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(gt.empty);t.push(n)}}function _2(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,u=s,d=gt.empty;for(;c+=a,u+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,c,s,u,d),r=c,s=u}}}function C2(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Cp(t),a=new Cp(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);si(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(si(r,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(si(r,0,o.ins),s&&Ua(s,r,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;si(r,c,l<o.i?o.ins:0),s&&l<o.i&&Ua(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?kn.createSet(r,s):lo.create(r);throw new Error("Mismatched change set lengths")}}}function JL(t,e,n=!1){let i=[],r=n?[]:null,s=new Cp(t),o=new Cp(e);for(let a=!1;;){if(s.done&&o.done)return r?kn.createSet(i,r):lo.create(i);if(s.ins==0)si(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)si(i,0,o.ins,a),r&&Ua(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;si(i,l,u,a),r&&u&&Ua(r,i,o.text)}else o.ins==-1?(si(i,s.off?0:s.len,l,a),r&&Ua(r,i,s.textBit(l))):(si(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Ua(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class Cp{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?gt.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?gt.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class bc{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new bc(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return re.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return re.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return re.range(e.anchor,e.head)}static create(e,n,i){return new bc(e,n,i)}}class re{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:re.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new re([this.main],0)}addRange(e,n=!0){return re.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,re.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new re(e.ranges.map(n=>bc.fromJSON(n)),e.main)}static single(e,n=e){return new re([re.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return re.normalized(e.slice(),n);i=s.to}return new re(e,n)}static cursor(e,n=0,i,r){return bc.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?bc.create(n,e,48|s):bc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?re.range(l,a):re.range(a,l))}}return new re(e,n)}}function ZL(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let zC=0;class Ee{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=zC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ee(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:UC),!!e.static,e.enables)}of(e){return new P0([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new P0(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new P0(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function UC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class P0{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=zC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||E2(d,u)){let p=i(d);if(a?!k4(p,d.values[o],r):!r(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,g=f.config.address[s];if(g!=null){let m=Wv(f,g);if(this.dependencies.every(v=>v instanceof Ee?f.facet(v)===d.facet(v):v instanceof _i?f.field(v,!1)==d.field(v,!1):!0)||(a?k4(p=i(d),m,r):r(p=i(d),m)))return d.values[o]=m,0}else p=i(d);return d.values[o]=p,1}}}}function k4(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function E2(t,e){let n=!1;for(let i of e)Oh(t,i)&1&&(n=!0);return n}function MQ(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let d=Wv(l,i[u]);if(r[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)Oh(l,c);return l.values[o]=a(l),1},update(l,c){if(!E2(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=E2(l,i),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&UC(n,d))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const pg=Ee.define({static:!0});class _i{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new _i(zC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(pg).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>{let s=i.facet(pg),o=r.facet(pg),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[n]=a.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,pg.of({field:this,create:e})]}get extension(){return this}}const lc={lowest:4,low:3,default:2,high:1,highest:0};function Mf(t){return e=>new QL(e,t)}const fm={highest:Mf(lc.highest),high:Mf(lc.high),default:Mf(lc.default),low:Mf(lc.low),lowest:Mf(lc.lowest)};class QL{constructor(e,n){this.inner=e,this.prec=n}}class hm{of(e){return new A2(this,e)}reconfigure(e){return hm.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class A2{constructor(e,n){this.compartment=e,this.inner=n}}class Hv{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let f of RQ(e,n,o))f instanceof _i?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of r)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let u=i==null?void 0:i.config.facets;for(let f in s){let p=s[f],g=p[0].facet,m=u&&u[f]||[];if(p.every(v=>v.type==0))if(a[g.id]=l.length<<1|1,UC(m,p))l.push(i.facet(g));else{let v=g.combine(p.map(y=>y.value));l.push(i&&g.compare(v,i.facet(g))?i.facet(g):v)}else{for(let v of p)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=c.length<<1,c.push(y=>v.dynamicSlot(y)));a[g.id]=c.length<<1,c.push(v=>MQ(v,g,p))}}let d=c.map(f=>f(a));return new Hv(e,o,d,a,l,s)}}function RQ(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof A2&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof A2){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof QL)s(o.inner,o.prec);else if(o instanceof _i)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof P0)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,lc.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,lc.default),i.reduce((o,a)=>o.concat(a))}function Oh(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function Wv(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const e8=Ee.define(),N2=Ee.define({combine:t=>t.some(e=>e),static:!0}),t8=Ee.define({combine:t=>t.length?t[0]:void 0,static:!0}),n8=Ee.define(),i8=Ee.define(),r8=Ee.define(),s8=Ee.define({combine:t=>t.length?t[0]:!1});class ca{constructor(e,n){this.type=e,this.value=n}static define(){return new TQ}}class TQ{of(e){return new ca(this,e)}}class OQ{constructor(e){this.map=e}of(e){return new nt(this,e)}}class nt{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new nt(this.type,n)}is(e){return this.type==e}static define(e={}){return new OQ(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}nt.reconfigure=nt.define();nt.appendConfig=nt.define();class An{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&ZL(i,n.newLength),s.some(a=>a.type==An.time)||(this.annotations=s.concat(An.time.of(Date.now())))}static create(e,n,i,r,s,o){return new An(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(An.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}An.time=ca.define();An.userEvent=ca.define();An.addToHistory=ca.define();An.remote=ca.define();function IQ(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function o8(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=kn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:nt.mapEffects(t.effects,r).concat(nt.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function P2(t,e,n){let i=e.selection,r=sd(e.annotations);return e.userEvent&&(r=r.concat(An.userEvent.of(e.userEvent))),{changes:e.changes instanceof kn?e.changes:kn.of(e.changes||[],n,t.facet(t8)),selection:i&&(i instanceof re?i:re.single(i.anchor,i.head)),effects:sd(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function a8(t,e,n){let i=P2(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=o8(i,P2(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=An.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return DQ(n?jQ(r):r)}function jQ(t){let e=t.startState,n=!0;for(let r of e.facet(n8)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:IQ(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=kn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=An.create(e,r,t.selection&&t.selection.map(s),nt.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(i8);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof An?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof An?t=s[0]:t=a8(e,sd(s),!1)}return t}function DQ(t){let e=t.startState,n=e.facet(r8),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=o8(i,P2(e,s,t.changes.newLength),!0))}return i==t?t:An.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const LQ=[];function sd(t){return t==null?LQ:Array.isArray(t)?t:[t]}var Xn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Xn||(Xn={}));const $Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let M2;try{M2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function FQ(t){if(M2)return M2.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||$Q.test(n)))return!0}return!1}function BQ(t){return e=>{if(!/\S/.test(e))return Xn.Space;if(FQ(e))return Xn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Xn.Word;return Xn.Other}}class dt{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Oh(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return Oh(this,i),Wv(this,i)}update(...e){return a8(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(hm.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,c)=>r.set(c,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(nt.reconfigure)?(n=null,i=a.value):a.is(nt.appendConfig)&&(n=null,i=sd(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=Hv.resolve(i,r,this),s=new dt(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(N2)?e.newSelection:e.newSelection.asSingle();new dt(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:re.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=sd(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(r);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),o=nt.mapEffects(o,u).concat(nt.mapEffects(sd(l.effects),d))}return{changes:r,selection:re.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof kn?e:kn.of(e,this.doc.length,this.facet(dt.lineSeparator))}toText(e){return gt.of(e.split(this.facet(dt.lineSeparator)||k2))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Oh(this,n),Wv(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof _i&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return dt.create({doc:e.doc,selection:re.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Hv.resolve(e.extensions||[],new Map),i=e.doc instanceof gt?e.doc:gt.of((e.doc||"").split(n.staticFacet(dt.lineSeparator)||k2)),r=e.selection?e.selection instanceof re?e.selection:re.single(e.selection.anchor,e.selection.head):re.single(0);return ZL(r,i.length),n.staticFacet(N2)||(r=r.asSingle()),new dt(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(dt.tabSize)}get lineBreak(){return this.facet(dt.lineSeparator)||`
`}get readOnly(){return this.facet(s8)}phrase(e,...n){for(let i of this.facet(dt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(e8))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return BQ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=Yn(n,o,!1);if(s(n.slice(l,o))!=Xn.Word)break;o=l}for(;a<r;){let l=Yn(n,a);if(s(n.slice(a,l))!=Xn.Word)break;a=l}return o==a?null:re.range(o+i,a+i)}}dt.allowMultipleSelections=N2;dt.tabSize=Ee.define({combine:t=>t.length?t[0]:4});dt.lineSeparator=t8;dt.readOnly=s8;dt.phrases=Ee.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});dt.languageData=e8;dt.changeFilter=n8;dt.transactionFilter=i8;dt.transactionExtender=r8;hm.reconfigure=nt.define();function Il(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Bc{eq(e){return this==e}range(e,n=e){return R2.create(e,n,this)}}Bc.prototype.startSide=Bc.prototype.endSide=0;Bc.prototype.point=!1;Bc.prototype.mapMode=zi.TrackDel;let R2=class l8{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new l8(e,n,i)}};function T2(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class VC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,p;if(u==d){let g=n.mapPos(u,c.startSide,c.mapMode);if(g==null||(f=p=g,c.startSide!=c.endSide&&(p=n.mapPos(u,c.endSide),p<f)))continue}else if(f=n.mapPos(u,c.startSide),p=n.mapPos(d,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),i.push(c),r.push(f-o),s.push(p-o))}return{mapped:i.length?new VC(r,s,i,a):null,pos:o}}}class _t{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new _t(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(T2)),this.isEmpty)return n.length?_t.of(n):this;let a=new c8(this,null,-1).goto(0),l=0,c=[],u=new wl;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(R2.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?_t.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new _t(i,n,s||_t.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Ep.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Ep.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=_4(o,a,i),c=new Rf(o,l,s),u=new Rf(a,l,s);i.iterGaps((d,f,p)=>C4(c,d,u,f,p,r)),i.empty&&i.length==0&&C4(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=_4(s,o),l=new Rf(s,a,0).goto(i),c=new Rf(o,a,0).goto(i);for(;;){if(l.to!=c.to||!O2(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new Rf(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);r.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new wl;for(let r of e instanceof R2?[e]:n?zQ(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return _t.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=_t.empty;r=r.nextLayer)n=new _t(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}_t.empty=new _t([],[],null,-1);function zQ(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(T2(e,i)>0)return t.slice().sort(T2);e=i}return t}_t.empty.nextLayer=_t.empty;class wl{finishChunk(e){this.chunks.push(new VC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new wl)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(_t.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=_t.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function _4(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class c8{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ep{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new c8(o,n,i,s));return r.length==1?r[0]:new Ep(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)bx(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)bx(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),bx(this.heap,0)}}}function bx(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Rf{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ep.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){mg(this.active,e),mg(this.activeTo,e),mg(this.activeRank,e),this.minActive=E4(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;gg(this.active,n,i),gg(this.activeTo,n,r),gg(this.activeRank,n,s),e&&gg(e,n,this.cursor.from),this.minActive=E4(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&mg(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function C4(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,f=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&O2(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,f,t.point,n.point):f>a&&!O2(t.active,n.active)&&s.compareRange(a,f,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function O2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function mg(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function gg(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function E4(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function pm(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Yn(t,r));return i}function UQ(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Yn(t,r)}return t.length}const I2="ͼ",A4=typeof Symbol>"u"?"__"+I2:Symbol.for(I2),j2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),N4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class xl{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(v=>m.replace(/&/,v))).reduce((m,v)=>m.concat(v)),g,l);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),g,u,f)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+g+";")}(u.length||f)&&l.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=N4[A4]||1;return N4[A4]=e+1,I2+e.toString(36)}static mount(e,n,i){let r=e[j2],s=i&&i.nonce;r?s&&r.setNonce(s):r=new VQ(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let P4=new Map;class VQ{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=P4.get(i);if(s)return e[j2]=s;this.sheet=new r.CSSStyleSheet,P4.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[j2]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Sl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ap={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},HQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),WQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Wn=0;Wn<10;Wn++)Sl[48+Wn]=Sl[96+Wn]=String(Wn);for(var Wn=1;Wn<=24;Wn++)Sl[Wn+111]="F"+Wn;for(var Wn=65;Wn<=90;Wn++)Sl[Wn]=String.fromCharCode(Wn+32),Ap[Wn]=String.fromCharCode(Wn);for(var wx in Sl)Ap.hasOwnProperty(wx)||(Ap[wx]=Sl[wx]);function GQ(t){var e=HQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||WQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ap:Sl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Rt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)u8(t,arguments[e]);return t}function u8(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)u8(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Np(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function D2(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function M0(t,e){if(!e.anchorNode)return!1;try{return D2(t,e.anchorNode)}catch{return!1}}function Pp(t){return t.nodeType==3?Uc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Ih(t,e,n,i){return n?M4(t,e,n,i,-1)||M4(t,e,n,i,1):!1}function zc(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Gv(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function M4(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:ho(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=zc(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?ho(t):0}else return!1}}function ho(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function gb(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function KQ(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function d8(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function qQ(t,e,n,i,r,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,p=u==l.body,g=1,m=1;if(p)f=KQ(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let w=u.getBoundingClientRect();({scaleX:g,scaleY:m}=d8(u,w)),f={left:w.left,right:w.left+u.clientWidth*g,top:w.top,bottom:w.top+u.clientHeight*m}}let v=0,y=0;if(r=="nearest")e.top<f.top?(y=e.top-(f.top+o),n>0&&e.bottom>f.bottom+y&&(y=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(y=e.bottom-f.bottom+o,n<0&&e.top-y<f.top&&(y=e.top-(f.top+o)));else{let w=e.bottom-e.top,x=f.bottom-f.top;y=(r=="center"&&w<=x?e.top+w/2-x/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-x+o)-f.top}if(i=="nearest"?e.left<f.left?(v=e.left-(f.left+s),n>0&&e.right>f.right+v&&(v=e.right-f.right+s)):e.right>f.right&&(v=e.right-f.right+s,n<0&&e.left<f.left+v&&(v=e.left-(f.left+s))):v=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,v||y)if(p)c.scrollBy(v,y);else{let w=0,x=0;if(y){let S=u.scrollTop;u.scrollTop+=y/m,x=(u.scrollTop-S)*m}if(v){let S=u.scrollLeft;u.scrollLeft+=v/g,w=(u.scrollLeft-S)*g}e={left:e.left-w,top:e.top-x,right:e.right-w,bottom:e.bottom-x},w&&Math.abs(w-v)<1&&(i="nearest"),x&&Math.abs(x-y)<1&&(r="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function YQ(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class XQ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?ho(n):0),i,Math.min(e.focusOffset,i?ho(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let cu=null;function f8(t){if(t.setActive)return t.setActive();if(cu)return t.focus(cu);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(cu==null?{get preventScroll(){return cu={preventScroll:!0},!0}}:void 0),!cu){cu=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let R4;function Uc(t,e,n=e){let i=R4||(R4=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function od(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function JQ(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function h8(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function ZQ(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,ho(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=ho(n))}else{if(n==t)return!0;i=zc(n),n=n.parentNode}}function p8(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function m8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=ho(n)}else if(n.parentNode&&!Gv(n))i=zc(n),n=n.parentNode;else return null}}function g8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!Gv(n))i=zc(n)+1,n=n.parentNode;else return null}}class li{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new li(e.parentNode,zc(e),n)}static after(e,n){return new li(e.parentNode,zc(e)+1,n)}}const HC=[];class Ot{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Ot.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=T4(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=T4(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=ho(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ot.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&r==-1&&(r=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=HC){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new v8(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ot.prototype.breakAfter=0;function T4(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class v8{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function y8(t,e,n,i,r,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!f&&s.length<2&&u.merge(n,r,s.length?d:null,n==0,a,l))){if(i<c.length){let p=c[i];p&&(r<p.length||p.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(p=p.split(r),r=0),!f&&d&&p.merge(0,r,d,!0,0,l)?s[s.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function b8(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of i)d+=f.length;t.length+=d,y8(t,c,u,a,l,i,0,r,s)}let Bi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},L2=typeof document<"u"?document:{documentElement:{style:{}}};const $2=/Edge\/(\d+)/.exec(Bi.userAgent),w8=/MSIE \d/.test(Bi.userAgent),F2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Bi.userAgent),vb=!!(w8||F2||$2),O4=!vb&&/gecko\/(\d+)/i.test(Bi.userAgent),xx=!vb&&/Chrome\/(\d+)/.exec(Bi.userAgent),QQ="webkitFontSmoothing"in L2.documentElement.style,x8=!vb&&/Apple Computer/.test(Bi.vendor),I4=x8&&(/Mobile\/\w+/.test(Bi.userAgent)||Bi.maxTouchPoints>2);var _e={mac:I4||/Mac/.test(Bi.platform),windows:/Win/.test(Bi.platform),linux:/Linux|X11/.test(Bi.platform),ie:vb,ie_version:w8?L2.documentMode||6:F2?+F2[1]:$2?+$2[1]:0,gecko:O4,gecko_version:O4?+(/Firefox\/(\d+)/.exec(Bi.userAgent)||[0,0])[1]:0,chrome:!!xx,chrome_version:xx?+xx[1]:0,ios:I4,android:/Android\b/.test(Bi.userAgent),safari:x8,webkit_version:QQ?+(/\bAppleWebKit\/(\d+)/.exec(Bi.userAgent)||[0,0])[1]:0,tabSize:L2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const eee=256;class bs extends Ot{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof bs)||this.length-(n-e)+i.length>eee||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new bs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new li(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return tee(this.dom,e,n)}}class na extends Ot{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(h8(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof na&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(b8(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new na(this.mark,n,o)}domAtPos(e){return S8(this,e)}coordsAt(e,n){return _8(this,e,n)}}function tee(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?_e.chrome||_e.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Uc(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return _e.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?gb(l,o<0):l||null}class Va extends Ot{static create(e,n,i){return new Va(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Va.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Va)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Va&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return gt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):gt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?li.before(this.dom):li.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return gb(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ud extends Ot{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Ud&&e.side==this.side}split(){return new Ud(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?li.before(this.dom):li.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return gt.empty}get isHidden(){return!0}}bs.prototype.children=Va.prototype.children=Ud.prototype.children=HC;function S8(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new li(n,0)}function k8(t,e,n){let i,{children:r}=t;n>0&&e instanceof na&&r.length&&(i=r[r.length-1])instanceof na&&i.mark.eq(e.mark)?k8(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function _8(t,e,n){let i=null,r=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let p=c.children[d],g=f+p.length;g>=u&&(p.children.length?a(p,u-f):(!s||s.isHidden&&(n>0||iee(s,p)))&&(g>u||f==g&&p.getSide()>0)?(s=p,o=u-f):(f<u||f==g&&p.getSide()<0&&!p.isHidden)&&(i=p,r=u-f)),f=g}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):nee(t)}function nee(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Pp(e);return n[n.length-1]||null}function iee(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function B2(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const j4=Object.create(null);function Kv(t,e,n){if(t==e)return!0;t||(t=j4),e||(e=j4);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function z2(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function ree(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class jl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var bi=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(bi||(bi={}));class it extends Bc{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new mm(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new kl(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=C8(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new kl(e,i,r,n,e.widget||null,!0)}static line(e){return new gm(e)}static set(e,n=!1){return _t.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}it.none=_t.empty;class mm extends it{constructor(e){let{start:n,end:i}=C8(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof mm&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Kv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}mm.prototype.point=!1;class gm extends it{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof gm&&this.spec.class==e.spec.class&&Kv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}gm.prototype.mapMode=zi.TrackBefore;gm.prototype.point=!0;class kl extends it{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?zi.TrackBefore:zi.TrackAfter:zi.TrackDel}get type(){return this.startSide!=this.endSide?bi.WidgetRange:this.startSide<=0?bi.WidgetBefore:bi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof kl&&see(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}kl.prototype.point=!0;function C8(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function see(t,e){return t==e||!!(t&&e&&t.compare(e))}function R0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class vn extends Ot{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof vn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),b8(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new vn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Kv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){k8(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=B2(n,this.attrs||{})),i&&(this.attrs=B2({class:i},this.attrs||{}))}domAtPos(e){return S8(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(h8(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(z2(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Ot.get(r)instanceof na;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Ot.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!_e.ios||!this.children.some(s=>s instanceof bs))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof bs)||/[^ -~]/.test(i.text))return null;let r=Pp(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=_8(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof vn&&this.children.length==0&&e.children.length==0&&Kv(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof vn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class Ko extends Ot{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof Ko)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?li.before(this.dom):li.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Ko(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return HC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):gt.empty}domBoundsAround(){return null}become(e){return e instanceof Ko&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof U2?null:gb(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class U2 extends jl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class jh{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ko&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new vn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(vg(new Ud(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Ko)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(vg(new bs(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof kl){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof kl)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ko(i.widget||Vd.block,a,i));else{let l=Va.create(i.widget||Vd.inline,a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(vg(new Ud(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(vg(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new jh(e,n,i,s);return o.openEnd=_t.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function vg(t,e){for(let n of e)t=new na(n,[t],t.length);return t}class Vd extends jl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Vd.inline=new Vd("span");Vd.block=new Vd("div");var Vt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Vt||(Vt={}));const Vc=Vt.LTR,WC=Vt.RTL;function E8(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const oee=E8("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),aee=E8("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),V2=Object.create(null),Ns=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);V2[e]=n,V2[n]=-e}function A8(t){return t<=247?oee[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?aee[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const lee=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ha{get dir(){return this.level%2?WC:Vc}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function N8(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!N8(i.inner,r.inner))return!1}return!0}const Tt=[];function cee(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let c=o,u=l,d=l;c<a;c++){let f=A8(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),Tt[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=Tt[c];if(f==128)c<a-1&&u==Tt[c+1]&&u&24?f=Tt[c]=u:Tt[c]=256;else if(f==64){let p=c+1;for(;p<a&&Tt[p]==64;)p++;let g=c&&u==8||p<n&&Tt[p]==8?d==1?1:8:256;for(let m=c;m<p;m++)Tt[m]=g;c=p-1}else f==8&&d==1&&(Tt[c]=1);u=f,f&7&&(d=f)}}}function uee(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let d=c,f,p,g;d<u;d++)if(p=V2[f=t.charCodeAt(d)])if(p<0){for(let m=a-3;m>=0;m-=3)if(Ns[m+1]==-p){let v=Ns[m+2],y=v&2?r:v&4?v&1?s:r:0;y&&(Tt[d]=Tt[Ns[m]]=y),a=m;break}}else{if(Ns.length==189)break;Ns[a++]=d,Ns[a++]=f,Ns[a++]=l}else if((g=Tt[d])==2||g==1){let m=g==r;l=m?0:1;for(let v=a-3;v>=0;v-=3){let y=Ns[v+2];if(y&2)break;if(m)Ns[v+2]|=2;else{if(y&4)break;Ns[v+2]|=4}}}}}function dee(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let c=Tt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(r==n.length)break;u=n[r++].to,a=r<n.length?n[r].from:e}else if(Tt[u]==256)u++;else break;let d=s==1,f=(u<e?Tt[u]:i)==1,p=d==f?d?1:2:i;for(let g=u,m=r,v=m?n[m-1].to:t;g>l;)g==v&&(g=n[--m].from,v=m?n[m-1].to:t),Tt[--g]=p;l=u}else s=c,l++}}}function H2(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=Tt[l];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c<s.length&&g==s[c].from){if(d)break e;let m=s[c];if(!u)for(let v=m.to,y=c+1;;){if(v==n)break e;if(y<s.length&&s[y].from==v)v=s[y++].to;else{if(Tt[v]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new Ha(l,m.from,p));let v=m.direction==Vc!=!(p%2);W2(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}g=m.to}else{if(g==n||(u?Tt[g]!=a:Tt[g]==a))break;g++}f?H2(t,l,g,i+1,r,f,o):l<g&&o.push(new Ha(l,g,p)),l=g}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=Tt[l-1];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c&&g==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let v=m.from,y=c;;){if(v==e)break e;if(y&&s[y-1].to==v)v=s[--y].from;else{if(Tt[v-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new Ha(m.to,l,p));let v=m.direction==Vc!=!(p%2);W2(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}g=m.from}else{if(g==e||(u?Tt[g-1]!=a:Tt[g-1]==a))break;g--}f?H2(t,g,l,i+1,r,f,o):g<l&&o.push(new Ha(g,l,p)),l=g}}function W2(t,e,n,i,r,s,o){let a=e%2?2:1;cee(t,r,s,i,a),uee(t,r,s,i,a),dee(r,s,i,a),H2(t,r,s,e,n,i,o)}function fee(t,e,n){if(!t)return[new Ha(0,0,e==WC?1:0)];if(e==Vc&&!n.length&&!lee.test(t))return P8(t.length);if(n.length)for(;t.length>Tt.length;)Tt[Tt.length]=256;let i=[],r=e==Vc?0:1;return W2(t,r,r,n,0,t.length,i),i}function P8(t){return[new Ha(0,t,0)]}let M8="";function hee(t,e,n,i,r){var s;let o=i.head-t.from,a=Ha.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],c=l.side(r,n);if(o==c){let f=a+=r?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!r,n),c=l.side(r,n)}let u=Yn(t.text,o,l.forward(r,n));(u<l.from||u>l.to)&&(u=c),M8=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?re.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):re.cursor(u+t.from,l.forward(r,n)?-1:1,l.level)}function pee(t,e,n){for(let i=e;i<n;i++){let r=A8(t.charCodeAt(i));if(r==1)return Vc;if(r==2||r==4)return WC}return Vc}const R8=Ee.define(),T8=Ee.define(),O8=Ee.define(),I8=Ee.define(),G2=Ee.define(),j8=Ee.define(),D8=Ee.define(),GC=Ee.define(),KC=Ee.define(),L8=Ee.define({combine:t=>t.some(e=>e)}),$8=Ee.define({combine:t=>t.some(e=>e)}),F8=Ee.define();class ad{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new ad(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ad(re.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const yg=nt.define({map:(t,e)=>t.map(e)}),B8=nt.define();function dr(t,e,n){let i=t.facet(I8);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Vo=Ee.define({combine:t=>t.length?t[0]:!0});let mee=0;const Wu=Ee.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class ei{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Wu.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Wu.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new ei(mee++,e,i,r,a=>{let l=[];return o&&l.push(Mp.of(c=>{let u=c.plugin(a);return u?o(u):it.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return ei.define((i,r)=>new e(i,r),n)}}class Sx{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(dr(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){dr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){dr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const z8=Ee.define(),qC=Ee.define(),Mp=Ee.define(),U8=Ee.define(),YC=Ee.define(),V8=Ee.define();function D4(t,e){let n=t.state.facet(V8);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return _t.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=r;for(let f=a.length-1;f>=0;f--,l--){let p=a[f].spec.bidiIsolate,g;if(p==null&&(p=pee(e.text,c,u)),l>0&&d.length&&(g=d[d.length-1]).to==c&&g.direction==p)g.to=u,d=g.inner;else{let m={from:c,to:u,direction:p,inner:[]};d.push(m),d=m.inner}}}}),r}const H8=Ee.define();function XC(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(H8)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const ah=Ee.define();class Vr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Vr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],p=Math.max(a,d),g=Math.min(u,f);if(p<=g&&new Vr(p+c,g+c,p,g).addToSet(i),f>u)break;s+=2}if(!l)return i;new Vr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class qv{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=kn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Vr(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new qv(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class L4 extends Ot{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=it.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new vn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Vr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!See(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?vee(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Vr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(_e.ie||_e.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=wee(o,a,e.changes);return i=Vr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=_e.chrome||_e.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ko&&o.widget instanceof U2&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,p,g,m;if(i&&i.range.fromB<d&&i.range.toB>u){let S=jh.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=jh.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=S.breakAtStart,g=S.openStart,m=_.openEnd;let E=this.compositionView(i);_.breakAtStart?E.breakAfter=1:_.content.length&&E.merge(E.length,E.length,_.content[0],!1,_.openStart,0)&&(E.breakAfter=_.content[0].breakAfter,_.content.shift()),S.content.length&&E.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),f=S.content.concat(E).concat(_.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:m}=jh.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:y}=s.findPos(c,1),{i:w,off:x}=s.findPos(l,-1);y8(this,w,x,v,y,f,p,g,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(B8)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new bs(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new na(r,[n],n.length);let i=new vn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Ot.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(Vo)||this.dom.tabIndex>-1)&&M0(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(_e.gecko&&a.empty&&!this.hasComposition&&gee(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new li(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Ih(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Ih(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{_e.android&&_e.chrome&&this.dom.contains(u.focusNode)&&xee(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Np(this.view.root);if(d)if(a.empty){if(_e.gecko){let f=yee(l.node,l.offset);if(f&&f!=3){let p=(f==1?m8:g8)(l.node,l.offset);p&&(l=new li(p.node,p.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new li(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new li(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Ih(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Np(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=vn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Ot.get(n.childNodes[r]);s instanceof vn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Ot.get(n.childNodes[r]);s instanceof vn&&(i=s.domAtPos(s.length))}return i?new li(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Ot.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof vn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof vn&&!(i instanceof vn&&n>=0)))i=a,r=c;else if(i&&c==e&&l==e&&a instanceof Ko&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof vn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof bs))return null;let s=Yn(r.text,i);if(s==i)return null;let o=Uc(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Vt.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>r)break;if(c>=i){let p=d.dom.getBoundingClientRect();if(n.push(p.height),o){let g=d.dom.lastChild,m=g?Pp(g):[];if(m.length){let v=m[m.length-1],y=l?v.right-p.left:p.right-v.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Vt.RTL:Vt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof vn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Pp(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new v8(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(it.replace({widget:new U2(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return it.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Mp).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(U8).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(_t.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(F8))try{if(c(this.view,e.range,e))return!0}catch(u){dr(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=XC(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;qQ(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Vt.LTR)}}function gee(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function W8(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=m8(n.focusNode,n.focusOffset),r=g8(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=Ot.get(r.node);if(!a||a instanceof bs&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=Ot.get(i.node);!l||l instanceof bs&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function vee(t,e,n){let i=W8(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new Vr(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=r.parentNode;;d=d.parentNode){let f=Ot.get(d);if(f instanceof na)u.push({node:d,deco:f.mark});else{if(f instanceof vn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new mm({inclusive:!0,attributes:ree(d),tagName:d.tagName.toLowerCase()})});else return null}}}function yee(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let bee=class{constructor(){this.changes=[]}compareRange(e,n){R0(e,n,this.changes)}comparePoint(e,n){R0(e,n,this.changes)}boundChange(e){R0(e,e,this.changes)}};function wee(t,e,n){let i=new bee;return _t.compare(t,e,n,i),i.changes}function xee(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function See(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function kee(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return re.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Yn(r.text,s,!1):a=Yn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=Yn(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=Yn(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return re.range(o+r.from,a+r.from)}function _ee(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Cee(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function kx(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function $4(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function F4(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function K2(t,e,n){let i,r,s,o,a=!1,l,c,u,d;for(let g=t.firstChild;g;g=g.nextSibling){let m=Pp(g);for(let v=0;v<m.length;v++){let y=m[v];r&&kx(r,y)&&(y=$4(F4(y,r.bottom),r.top));let w=_ee(e,y),x=Cee(n,y);if(w==0&&x==0)return g.nodeType==3?B4(g,e,n):K2(g,e,n);(!i||o>x||o==x&&s>w)&&(i=g,r=y,s=w,o=x,a=w?e<y.left?v>0:v<m.length-1:!0),w==0?n>y.bottom&&(!u||u.bottom<y.bottom)?(l=g,u=y):n<y.top&&(!d||d.top>y.top)&&(c=g,d=y):u&&kx(u,y)?u=F4(u,y.bottom):d&&kx(d,y)&&(d=$4(d,y.top))}}if(u&&u.bottom>=n?(i=l,r=u):d&&d.top<=n&&(i=c,r=d),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return B4(i,f,n);if(a&&i.contentEditable!="false")return K2(i,f,n);let p=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:p}}function B4(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Uc(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,p=f;if((_e.chrome||_e.gecko)&&Uc(t,a).getBoundingClientRect().left==u.right&&(p=!f),d<=0)return{node:t,offset:a+(p?1:0)};r=a+(p?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function G8(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(f),l.type!=bi.Text;)for(;f=i>0?l.bottom+S:l.top-S,!(f>=0&&f<=c);){if(_)return n?null:0;_=!0,i=-i}d=a+f;let p=l.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:z4(t,o,l,u,d);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:z4(t,o,l,u,d);let g=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:g,v=m.elementFromPoint(u,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(u=Math.max(o.left+1,Math.min(o.right-1,u)),v=m.elementFromPoint(u,d),v&&!t.contentDOM.contains(v)&&(v=null));let y,w=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(u,d);S&&({offsetNode:y,offset:w}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(u,d);S&&({startContainer:y,startOffset:w}=S,(!t.contentDOM.contains(y)||_e.safari&&Eee(y,w,u)||_e.chrome&&Aee(y,w,u))&&(y=void 0))}y&&(w=Math.min(ho(y),w))}if(!y||!t.docView.dom.contains(y)){let S=vn.find(t.docView,p);if(!S)return f>l.top+l.height/2?l.to:l.from;({node:y,offset:w}=K2(S.dom,u,d))}let x=t.docView.nearest(y);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=x.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(y,w)+x.posAtStart}function z4(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+UQ(o,s,t.state.tabSize)}function Eee(t,e,n){let i,r=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return Uc(t,i-1,i).getBoundingClientRect().right>n}function Aee(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Uc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function q2(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==bi.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function Nee(t,e,n,i){let r=q2(t,e.head,e.assoc||-1),s=!i||r.type!=bi.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==Vt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return re.cursor(l,n?-1:1)}return re.cursor(n?r.to:r.from,n?-1:1)}function U4(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let c=hee(r,s,o,a,n),u=M8;if(!c){if(r.number==(n?t.state.doc.lines:1))return a;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function Pee(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Xn.Space&&(r=o),r==o}}function Mee(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return re.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-p.from))),a=(s<0?p.top:p.bottom)+u}let d=l.left+o,f=i??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=a+(f+p)*s,m=G8(t,{x:d,y:g},!1,s);if(g<l.top||g>l.bottom||(s<0?m<r:m>r)){let v=t.docView.coordsForChar(m),y=!v||g<v.top?-1:1;return re.cursor(m,y,void 0,o)}}}function T0(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function _x(t,e,n){let i=T0(t.state.facet(YC).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:re.cursor(i,i<n.from?1:-1)}const lh="￿";class Ree{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(dt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=lh}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=Ot.get(r),l=Ot.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Gv(r))||Gv(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Ot.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Tee(e,i.node,i.offset)?n:0))}}function Tee(t,e,n){for(;;){if(!e||n<ho(e))return!1;if(e==t)return!0;n=zc(e)+1,e=e.parentNode}}class V4{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class Oee{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:Dee(e),l=new Ree(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Lee(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!D2(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!D2(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((_e.ios||_e.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),f=Math.max(l,c),p=u.from-d,g=u.to-f;(p==0||p==1||d==0)&&(g==0||g==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=re.single(c,l)}}}function K8(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(s===8||_e.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=jee(t.state.doc.sliceString(o,a,lh),e.text,l-o,c);u&&(_e.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==lh+lh&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:gt.of(e.text.slice(u.from,u.toB).split(lh))})}else i&&(!t.hasFocus&&t.state.facet(Vo)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(_e.mac||_e.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:gt.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:_e.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:gt.of([" "])}),n)return JC(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function JC(t,e,n,i=-1){if(_e.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(_e.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&od(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&od(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&od(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=Iee(t,e,n));return t.state.facet(j8).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function Iee(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&W8(t,n.main.head);if(d){let g=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-g}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,p=s.to-s.from;i=r.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:a,range:l||g.map(a)};let m=g.to-f,v=m-c.length;if(g.to-g.from!=p||t.state.sliceDoc(v,m)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let y=r.changes({from:v,to:m,insert:e.insert}),w=g.to-s.to;return{changes:y,range:l?re.range(Math.max(0,l.anchor+w),Math.max(0,l.head+w)):g.map(y)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function jee(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function Dee(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new V4(n,i)),(r!=n||s!=i)&&e.push(new V4(r,s))),e}function Lee(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?re.single(n+e,i+e):null}class $ee{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,_e.safari&&e.contentDOM.addEventListener("input",()=>null),_e.gecko&&ete(e.contentDOM.ownerDocument)}handleEvent(e){!Gee(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Fee(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Y8.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),_e.android&&_e.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return _e.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=q8.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Bee.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,od(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:_e.safari&&!_e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function H4(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){dr(n.state,r)}}}function Fee(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(H4(i.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(H4(i.value,l))}}for(let i in ws)n(i).handlers.push(ws[i]);for(let i in Yr)n(i).observers.push(Yr[i]);return e}const q8=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Bee="dthko",Y8=[16,17,18,20,91,92,224,225],bg=6;function wg(t){return Math.max(0,t)*.7+8}function zee(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Uee{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=YQ(e.contentDOM),this.atoms=e.state.facet(YC).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(dt.allowMultipleSelections)&&Vee(e,n),this.dragging=Wee(e,n)&&Z8(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&zee(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=XC(this.view);e.clientX-l.left<=r+bg?n=-wg(r-e.clientX):e.clientX+l.right>=o-bg&&(n=wg(e.clientX-o)),e.clientY-l.top<=s+bg?i=-wg(s-e.clientY):e.clientY+l.bottom>=a-bg&&(i=wg(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=T0(this.atoms,r.from,0);o!=r.from&&(s=re.cursor(o,-1))}else{let o=T0(this.atoms,r.from,-1),a=T0(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=re.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?re.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Vee(t,e){let n=t.state.facet(R8);return n.length?n[0](e):_e.mac?e.metaKey:e.ctrlKey}function Hee(t,e){let n=t.state.facet(T8);return n.length?n[0](e):_e.mac?!e.altKey:!e.ctrlKey}function Wee(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Np(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Gee(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Ot.get(n))&&i.ignoreEvent(e))return!1;return!0}const ws=Object.create(null),Yr=Object.create(null),X8=_e.ie&&_e.ie_version<15||_e.ios&&_e.webkit_version<604;function Kee(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),J8(t,n.value)},50)}function yb(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function J8(t,e){e=yb(t.state,GC,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(Y2!=null&&n.selection.ranges.every(l=>l.empty)&&Y2==s.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:re.cursor(c.from+d.length)}})}else o?i=n.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:re.cursor(l.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Yr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};ws.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Yr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Yr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ws.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(O8))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=Xee(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new Uee(t,e,n,i)),i&&t.observer.ignore(()=>{f8(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function W4(t,e,n,i){if(i==1)return re.cursor(e,n);if(i==2)return kee(t.state,e,n);{let r=vn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,re.range(o,a)}}let G4=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function qee(t,e,n,i){let r=vn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&G4(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&G4(n,i,a)?1:o&&o.bottom>=i?-1:1}function K4(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:qee(t,n,e.clientX,e.clientY)}}const Yee=_e.ie&&_e.ie_version<=11;let q4=null,Y4=0,X4=0;function Z8(t){if(!Yee)return t.detail;let e=q4,n=X4;return q4=t,X4=Date.now(),Y4=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Y4+1)%3:1}function Xee(t,e){let n=K4(t,e),i=Z8(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=K4(t,s),c,u=W4(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=W4(t,n.pos,n.bias,i),f=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=f<u.from?re.range(f,p):re.range(p,f)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&i==1&&r.ranges.length>1&&(c=Jee(r,l.pos))?c:a?r.addRange(u):re.create([u])}}}function Jee(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return re.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}ws.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=re.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",yb(t.state,KC,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ws.dragend=t=>(t.inputState.draggedContent=null,!1);function J4(t,e,n,i){if(n=yb(t.state,GC,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&Hee(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}ws.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&J4(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return J4(t,e,i,!0),!0}return!1};ws.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=X8?null:e.clipboardData;return n?(J8(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Kee(t),!1)};function Zee(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function Qee(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:yb(t,KC,e.join(t.lineBreak)),ranges:n,linewise:i}}let Y2=null;ws.copy=ws.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=Qee(t.state);if(!n&&!r)return!1;Y2=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=X8?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(Zee(t,n),!1)};const Q8=ca.define();function e6(t,e){let n=[];for(let i of t.facet(D8)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:Q8.of(!0)}):null}function t6(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=e6(t.state,e);n?t.dispatch(n):t.update([])}},10)}Yr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),t6(t)};Yr.blur=t=>{t.observer.clearSelectionRange(),t6(t)};Yr.compositionstart=Yr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Yr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,_e.chrome&&_e.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Yr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ws.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return JC(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let r;if(_e.chrome&&_e.android&&(r=q8.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return _e.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),_e.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Yr.compositionend(t,e),20),!1};const Z4=new Set;function ete(t){Z4.has(t)||(Z4.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const Q4=["pre-wrap","normal","pre-line","break-spaces"];let Hd=!1;function eM(){Hd=!1}class tte{constructor(e){this.lineWrapping=e,this.doc=gt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Q4.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=Q4.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class nte{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class qs{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?bi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof kl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new qs(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var $t=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}($t||($t={}));const O0=.001;class wi{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>O0&&(Hd=!0),this.height=e)}replace(e,n,i){return wi.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=r[a],f=s.lineAt(l,$t.ByPosNoHeight,i.setDoc(n),0,0),p=f.to>=c?f:s.lineAt(c,$t.ByPosNoHeight,i,0,0);for(d+=p.to-c,c=p.to;a>0&&f.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,$t.ByPosNoHeight,i,0,0));u+=f.from-l,l=f.from;let g=ZC.build(i.setDoc(o),e,u,d);s=Yv(s,s.replace(l,c,g))}return s.updateHeight(i,0)}static empty(){return new sr(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new ite(wi.of(e.slice(0,n)),o,wi.of(e.slice(i)))}}function Yv(t,e){return t==e?t:(t.constructor!=e.constructor&&(Hd=!0),e)}wi.prototype.size=1;class n6 extends wi{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new qs(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class sr extends n6{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new qs(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof sr||r instanceof Un&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Un?r=new sr(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):wi.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Un extends wi{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(i,e-d/2);return new qs(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:u,length:d}=n.doc.line(s+c);return new qs(u,d,i+a*c,a,0)}}lineAt(e,n,i,r,s){if(n==$t.ByHeight)return this.blockAt(e,i,r,s);if(n==$t.ByPosNoHeight){let{from:p,to:g}=i.doc.lineAt(e);return new qs(p,g-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=r+a*d+l*(c.from-s-d);return new qs(c.from,c.length,Math.max(r,Math.min(f,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=n;){let f=i.doc.lineAt(u);if(u==e){let g=f.number-a;d+=l*g+c*(e-s-g)}let p=l+c*f.length;o(new qs(f.from,f.length,d,p,0)),d+=p,u=f.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Un?i[i.length-1]=new Un(s.length+r):i.push(null,new Un(r-1))}if(e>0){let s=i[0];s instanceof Un?i[0]=new Un(e+s.length):i.unshift(new Un(e-1),null)}return wi.of(i)}decomposeLeft(e,n){n.push(new Un(e-1),null)}decomposeRight(e,n){n.push(null,new Un(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Un(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=O0&&(l=-2);let f=new sr(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new Un(s-a).updateHeight(e,a));let c=wi.of(o);return(l<0||Math.abs(c.height-this.height)>=O0||Math.abs(l-this.heightMetrics(e,n).perLine)>=O0)&&(Hd=!0),Yv(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class ite extends wi{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==$t.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==$t.ByPosNoHeight?$t.ByPosNoHeight:$t.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,$t.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&tM(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),tM(s,a)}return wi.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?wi.of(this.break?[e,null,n]:[e,n]):(this.left=Yv(this.left,e),this.right=Yv(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function tM(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Un&&(i=t[e+1])instanceof Un&&t.splice(e-1,3,new Un(n.length+1+i.length))}const rte=5;class ZC{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof sr?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new sr(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new n6(o,r,i)):(o||s||r>=rte)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new sr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Un(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof sr)return e;let n=new sr(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof sr)&&!this.isCovered?this.nodes.push(new sr(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof sr&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new ZC(i,e);return _t.spans(n,i,r,s,0),s.finish(i)}}function ste(t,e,n){let i=new ote;return _t.compare(t,e,n,i,0),i.changes}class ote{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&R0(e,n,this.changes,5)}}function ate(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?r.innerHeight:l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function lte(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function cte(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Cx{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return it.replace({widget:new ute(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class ute extends jl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class nM{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=iM,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Vt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(qC).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new tte(n),this.stateDeco=e.facet(Mp).filter(i=>typeof i!="function"),this.heightMap=wi.empty().applyChanges(this.stateDeco,gt.empty,this.heightOracle.setDoc(e.doc),[new Vr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=it.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new xg(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?iM:new QC(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(ch(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Mp).filter(u=>typeof u!="function");let r=e.changedRanges,s=Vr.extendWithRanges(r,ste(i,this.stateDeco,e?e.changes:kn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);eM(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Hd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet($8)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Vt.RTL:Vt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:S,scaleY:_}=d8(n,a);(S>.005&&Math.abs(this.scaleX-S)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=S,this.scaleY=_,c|=16,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=p8(e.scrollDOM);let g=(this.printing?cte:ate)(n,this.paddingTop),m=g.top-this.pixelViewport.top,v=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!lte(e.dom))return 0;let w=a.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let S=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(S)&&(o=!0),o||r.lineWrapping&&Math.abs(w-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=_>0&&r.refresh(s,_,E,C,w/E,S),o&&(e.docView.minWidth=0,c|=16)}m>0&&v>0?u=Math.max(m,v):m<0&&v<0&&(u=Math.min(m,v)),eM();for(let _ of this.viewports){let E=_.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?wi.empty().applyChanges(this.stateDeco,gt.empty,this.heightOracle,[new Vr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new nte(_.from,E))}Hd&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new xg(r.lineAt(o-i*1e3,$t.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,$t.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,$t.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new xg(r.lineAt(f-1e3/2,$t.ByHeight,s,0,0).from,r.lineAt(f+u+1e3/2,$t.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new xg(this.heightMap.lineAt(i,$t.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,$t.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,$t.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,$t.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Cx(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Vt.LTR&&!i)return[];let a=[],l=(u,d,f,p)=>{if(d-u<s)return;let g=this.state.selection.main,m=[g.from];g.empty||m.push(g.to);for(let y of m)if(y>u&&y<d){l(u,y-10,f,p),l(y+10,d,f,p);return}let v=fte(e,y=>y.from>=f.from&&y.to<=f.to&&Math.abs(y.from-u)<s&&Math.abs(y.to-d)<s&&!m.some(w=>y.from<w&&y.to>w));if(!v){if(d<f.to&&n&&i&&n.visibleRanges.some(x=>x.from<=d&&x.to>=d)){let x=n.moveToLineBoundary(re.cursor(d),!1,!0).head;x>u&&(d=x)}let y=this.gapSize(f,u,d,p),w=i||y<2e6?y:2e6;v=new Cx(u,d,y,w)}a.push(v)},c=u=>{if(u.length<o||u.type!=bi.Text)return;let d=dte(u.from,u.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,y;if(f!=null){let w=kg(d,f),x=((this.visibleBottom-this.visibleTop)/2+m)/u.height;v=w-x,y=w+x}else v=(this.visibleTop-u.top-m)/u.height,y=(this.visibleBottom-u.top+m)/u.height;p=Sg(d,v),g=Sg(d,y)}else{let m=d.total*this.heightOracle.charWidth,v=r*this.heightOracle.charWidth,y=0;if(m>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=E.size-E.displaySize);let w=this.pixelViewport.left+y,x=this.pixelViewport.right+y,S,_;if(f!=null){let E=kg(d,f),C=((x-w)/2+v)/m;S=E-C,_=E+C}else S=(w-v)/m,_=(x+v)/m;p=Sg(d,S),g=Sg(d,_)}p>u.from&&l(u.from,p,u,d),g<u.to&&l(g,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,i,r){let s=kg(r,i)-kg(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Cx.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=it.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];_t.spans(n,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||ch(this.heightMap.lineAt(e,$t.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||ch(this.heightMap.lineAt(this.scaler.fromDOM(e),$t.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return ch(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let xg=class{constructor(e,n){this.from=e,this.to=n}};function dte(t,e,n){let i=[],r=t,s=0;return _t.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Sg({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function kg(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function fte(t,e){for(let n of t)if(e(n))return n}const iM={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class QC{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,$t.ByPos,e,0,0).top,u=n.lineAt(l,$t.ByPos,e,0,0).bottom;return r+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof QC?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function ch(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new qs(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>ch(r,e)):t._content)}const _g=Ee.define({combine:t=>t.join(" ")}),X2=Ee.define({combine:t=>t.indexOf(!0)>-1}),J2=xl.newName(),i6=xl.newName(),r6=xl.newName(),s6={"&light":"."+i6,"&dark":"."+r6};function Z2(t,e,n){return new xl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const hte=Z2("."+J2,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},s6),pte={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ex=_e.ie&&_e.ie_version<=11;class mte{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new XQ,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(_e.ie&&_e.ie_version<=11||_e.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&_e.android&&e.constructor.EDIT_CONTEXT!==!1&&!(_e.chrome&&_e.chrome_version<126)&&(this.editContext=new vte(e),e.state.facet(Vo)&&(e.contentDOM.editContext=this.editContext.editContext)),Ex&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Vo)?i.root.activeElement!=this.dom:!M0(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(_e.ie&&_e.ie_version<=11||_e.android&&_e.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Ih(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Np(e.root);if(!n)return!1;let i=_e.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&gte(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=M0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&ZQ(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,pte),Ex&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Ex&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&od(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&M0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Oee(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=K8(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=rM(n,e.previousSibling||e.target.previousSibling,-1),r=rM(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Vo)!=e.state.facet(Vo)&&(e.view.contentDOM.editContext=e.state.facet(Vo)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function rM(t,e,n){for(;e;){let i=Ot.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function sM(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return Ih(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function gte(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return sM(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?sM(t,n):null}class vte{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:gt.of(i.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=re.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(r)||e.dispatch({selection:u,userEvent:"select"});return}if((_e.mac||_e.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:gt.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);JC(e,c,re.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(it.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:B8.of(it.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Np(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(i)return;let u=c.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(c)){r=this.pendingContextChange=null,n+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Re{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||JQ(e.parent)||document,this.viewState=new nM(e.state||dt.create(e)),e.scrollTo&&e.scrollTo.is(yg)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Wu).map(r=>new Sx(r));for(let r of this.plugins)r.update(this);this.observer=new mte(this),this.inputState=new $ee(this),this.inputState.ensureHandlers(this.plugins),this.docView=new L4(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof An?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(Q8))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=e6(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(dt.phrases)!=this.state.facet(dt.phrases))return this.setState(s);r=qv.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new ad(p.empty?p:re.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(yg)&&(d=p.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=Xv.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(ah)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(_g)!=r.state.facet(_g)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(G2))try{f(r)}catch(p){dr(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!K8(this,u)&&c.force&&od(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new nM(e),this.plugins=e.facet(Wu).map(i=>new Sx(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new L4(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Wu),i=e.state.facet(Wu);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new Sx(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){dr(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(p8(i))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return dr(this.state,g),oM}}),d=qv.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=oM)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){dr(this.state,g)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(g>1||g<-1){r=r+g,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(G2))a(n)}get themeClasses(){return J2+" "+(this.state.facet(X2)?r6:i6)+" "+this.state.facet(_g)}updateAttrs(){let e=aM(this,z8,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Vo)?"true":"false",class:"cm-content",style:`${_e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),aM(this,qC,n);let i=this.observer.ignore(()=>{let r=z2(this.contentDOM,this.contentAttrs,n),s=z2(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Re.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(ah);let e=this.state.facet(Re.cspNonce);xl.mount(this.root,this.styleModules.concat(hte).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return _x(this,e,U4(this,e,n,i))}moveByGroup(e,n){return _x(this,e,U4(this,e,n,i=>Pee(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return re.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return Nee(this,e,n,i)}moveVertically(e,n,i){return _x(this,e,Mee(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),G8(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Ha.find(s,e-r.from,-1,n)];return gb(i,o.dir==Vt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(L8)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>yte)return P8(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||N8(s.isolates,i=D4(this,e))))return s.order;i||(i=D4(this,e));let r=fee(e.text,n,i);return this.bidiCache.push(new Xv(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||_e.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{f8(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return yg.of(new ad(typeof e=="number"?re.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return yg.of(new ad(re.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ei.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ei.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=xl.newName(),r=[_g.of(i),ah.of(Z2(`.${i}`,e))];return n&&n.dark&&r.push(X2.of(!0)),r}static baseTheme(e){return fm.lowest(ah.of(Z2("."+J2,e,s6)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Ot.get(i)||Ot.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Re.styleModule=ah;Re.inputHandler=j8;Re.clipboardInputFilter=GC;Re.clipboardOutputFilter=KC;Re.scrollHandler=F8;Re.focusChangeEffect=D8;Re.perLineTextDirection=L8;Re.exceptionSink=I8;Re.updateListener=G2;Re.editable=Vo;Re.mouseSelectionStyle=O8;Re.dragMovesSelection=T8;Re.clickAddsSelectionRange=R8;Re.decorations=Mp;Re.outerDecorations=U8;Re.atomicRanges=YC;Re.bidiIsolatedRanges=V8;Re.scrollMargins=H8;Re.darkTheme=X2;Re.cspNonce=Ee.define({combine:t=>t.length?t[0]:""});Re.contentAttributes=qC;Re.editorAttributes=z8;Re.lineWrapping=Re.contentAttributes.of({class:"cm-lineWrapping"});Re.announce=nt.define();const yte=4096,oM={};class Xv{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Vt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new Xv(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function aM(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&B2(o,n)}return n}const bte=_e.mac?"mac":_e.windows?"win":_e.linux?"linux":"key";function wte(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Cg(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const xte=fm.default(Re.domEventHandlers({keydown(t,e){return l6(a6(e.state),t,e,"editor")}})),o6=Ee.define({enables:xte}),lM=new WeakMap;function a6(t){let e=t.facet(o6),n=lM.get(e);return n||lM.set(e,n=_te(e.reduce((i,r)=>i.concat(r),[]))),n}function Ste(t,e,n){return l6(a6(t.state),e,t,n)}let Ia=null;const kte=4e3;function _te(t,e=bte){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let p=n[o]||(n[o]=Object.create(null)),g=a.split(/ (?!$)/).map(y=>wte(y,e));for(let y=1;y<g.length;y++){let w=g.slice(0,y).join(" ");r(w,!0),p[w]||(p[w]={preventDefault:!0,stopPropagation:!1,run:[x=>{let S=Ia={view:x,prefix:w,scope:o};return setTimeout(()=>{Ia==S&&(Ia=null)},kte),!0}]})}let m=g.join(" ");r(m,!1);let v=p[m]||(p[m]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&v.run.push(l),c&&(v.preventDefault=!0),u&&(v.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in u)u[f].run.push(p=>d(p,Q2))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let Q2=null;function l6(t,e,n,i){Q2=e;let r=GQ(e),s=Or(r,0),o=Uo(s)==r.length&&r!=" ",a="",l=!1,c=!1,u=!1;Ia&&Ia.view==n&&Ia.scope==i&&(a=Ia.prefix+" ",Y8.indexOf(e.keyCode)<0&&(c=!0,Ia=null));let d=new Set,f=v=>{if(v){for(let y of v.run)if(!d.has(y)&&(d.add(y),y(n)))return v.stopPropagation&&(u=!0),!0;v.preventDefault&&(v.stopPropagation&&(u=!0),c=!0)}return!1},p=t[i],g,m;return p&&(f(p[a+Cg(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(_e.windows&&e.ctrlKey&&e.altKey)&&(g=Sl[e.keyCode])&&g!=r?(f(p[a+Cg(g,e,!0)])||e.shiftKey&&(m=Ap[e.keyCode])!=r&&m!=g&&f(p[a+Cg(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(p[a+Cg(r,e,!0)])&&(l=!0),!l&&f(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),Q2=null,l}class vm{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=c6(e);return[new vm(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return Cte(e,n,i)}}function c6(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Vt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function cM(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function Cte(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Vt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=c6(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),p=q2(t,i,1),g=q2(t,r,-1),m=p.type==bi.Text?p:null,v=g.type==bi.Text?g:null;if(m&&(t.lineWrapping||p.widgetLineBreaks)&&(m=cM(t,i,1,m)),v&&(t.lineWrapping||g.widgetLineBreaks)&&(v=cM(t,r,-1,v)),m&&v&&m.from==v.from&&m.to==v.to)return w(x(n.from,n.to,m));{let _=m?x(n.from,null,m):S(p,!1),E=v?x(null,n.to,v):S(g,!0),C=[];return(m||p).to<(v||g).from-(m&&v?1:0)||p.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<E.top?C.push(y(d,_.bottom,f,E.top)):_.bottom<E.top&&t.elementAtHeight((_.bottom+E.top)/2).type==bi.Text&&(_.bottom=E.top=(_.bottom+E.top)/2),w(_).concat(C).concat(w(E))}function y(_,E,C,N){return new vm(e,_-l.left,E-l.top,C-_,N-E)}function w({top:_,bottom:E,horizontal:C}){let N=[];for(let M=0;M<C.length;M+=2)N.push(y(C[M],_,C[M+1],E));return N}function x(_,E,C){let N=1e9,M=-1e9,O=[];function D($,G,X,Z,V){let B=t.coordsAtPos($,$==C.to?-2:2),ie=t.coordsAtPos(X,X==C.from?2:-2);!B||!ie||(N=Math.min(B.top,ie.top,N),M=Math.max(B.bottom,ie.bottom,M),V==Vt.LTR?O.push(s&&G?d:B.left,s&&Z?f:ie.right):O.push(!s&&Z?d:ie.left,!s&&G?f:B.right))}let j=_??C.from,K=E??C.to;for(let $ of t.visibleRanges)if($.to>j&&$.from<K)for(let G=Math.max($.from,j),X=Math.min($.to,K);;){let Z=t.state.doc.lineAt(G);for(let V of t.bidiSpans(Z)){let B=V.from+Z.from,ie=V.to+Z.from;if(B>=X)break;ie>G&&D(Math.max(B,G),_==null&&B<=j,Math.min(ie,X),E==null&&ie>=K,V.dir)}if(G=Z.to+1,G>=X)break}return O.length==0&&D(j,_==null,K,E==null,t.textDirection),{top:N,bottom:M,horizontal:O}}function S(_,E){let C=a.top+(E?_.top:_.bottom);return{top:C,bottom:C,horizontal:[]}}}function Ete(t,e){return t.constructor==e.constructor&&t.eq(e)}class Ate{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(I0)!=e.state.facet(I0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(I0);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!Ete(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const I0=Ee.define();function u6(t){return[ei.define(e=>new Ate(e,t)),I0.of(t)]}const Rp=Ee.define({combine(t){return Il(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Nte(t={}){return[Rp.of(t),Pte,Mte,Rte,$8.of(!0)]}function d6(t){return t.startState.facet(Rp)!=t.state.facet(Rp)}const Pte=u6({above:!0,markers(t){let{state:e}=t,n=e.facet(Rp),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:re.cursor(r.head,r.head>r.anchor?-1:1);for(let l of vm.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=d6(t);return n&&uM(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){uM(e.state,t)},class:"cm-cursorLayer"});function uM(t,e){e.style.animationDuration=t.facet(Rp).cursorBlinkRate+"ms"}const Mte=u6({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:vm.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||d6(t)},class:"cm-selectionLayer"}),Rte=fm.highest(Re.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function dM(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function Tte(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class Ote{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,c,u)=>r(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let d=i(a,l,c);d&&u(c,c+a[0].length,d)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new wl,i=n.add.bind(n);for(let{from:r,to:s}of Tte(e,this.maxLength))dM(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],p,g=(m,v,y)=>f.push(y.range(m,v));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,g);else dM(e.state.doc,this.regexp,u,d,(m,v)=>this.addMatch(v,e,m,g));n=n.update({filterFrom:u,filterTo:d,filter:(m,v)=>m<u||v>d,add:f})}}return n}}const ek=/x/.unicode!=null?"gu":"g",Ite=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,ek),jte={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Ax=null;function Dte(){var t;if(Ax==null&&typeof document<"u"&&document.body){let e=document.body.style;Ax=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Ax||!1}const j0=Ee.define({combine(t){let e=Il(t,{render:null,specialChars:Ite,addSpecialChars:null});return(e.replaceTabs=!Dte())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,ek)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,ek)),e}});function Lte(t={}){return[j0.of(t),$te()]}let fM=null;function $te(){return fM||(fM=ei.fromClass(class{constructor(t){this.view=t,this.decorations=it.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(j0)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Ote({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=Or(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=pm(o.text,a,i-o.from);return it.replace({widget:new Ute((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=it.replace({widget:new zte(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(j0);t.startState.facet(j0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Fte="•";function Bte(t){return t>=32?Fte:t==10?"␤":String.fromCharCode(9216+t)}class zte extends jl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Bte(this.code),i=e.state.phrase("Control character")+" "+(jte[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Ute extends jl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Vte(){return Wte}const Hte=it.line({class:"cm-activeLine"}),Wte=ei.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(Hte.range(r.from)),e=r.from)}return it.set(n)}},{decorations:t=>t.decorations}),Tf="-10000px";class f6{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function Gte(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Nx=Ee.define({combine:t=>{var e,n,i;return{position:_e.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Gte}}}),hM=new WeakMap,eE=ei.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Nx);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new f6(t,tE,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Nx);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=Tf,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(_e.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Tf&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=XC(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Nx).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){u.style.top=Tf;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,m=f.right-f.left,v=(e=hM.get(c))!==null&&e!==void 0?e:f.bottom-f.top,y=c.offset||qte,w=this.view.textDirection==Vt.LTR,x=f.width>i.right-i.left?w?i.left:i.right-f.width:w?Math.max(i.left,Math.min(d.left-(p?14:0)+y.x,i.right-m)):Math.min(Math.max(i.left,d.left-m+(p?14:0)-y.x),i.right-m),S=this.above[a];!l.strictSide&&(S?d.top-v-g-y.y<i.top:d.bottom+v+g+y.y>i.bottom)&&S==i.bottom-d.bottom>d.top-i.top&&(S=this.above[a]=!S);let _=(S?d.top-i.top:i.bottom-d.bottom)-g;if(_<v&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=Tf;continue}hM.set(c,v),u.style.height=(v=_)/s+"px"}else u.style.height&&(u.style.height="");let E=S?d.top-v-g-y.y:d.bottom+g+y.y,C=x+m;if(c.overlap!==!0)for(let N of o)N.left<C&&N.right>x&&N.top<E+v&&N.bottom>E&&(E=S?N.top-v-2-g:N.bottom+g+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/s+"px",pM(u,(x-t.parent.left)/r)):(u.style.top=E/s+"px",pM(u,x/r)),p){let N=d.left+(w?y.x:-y.x)-(x+14-7);p.style.left=N/r+"px"}c.overlap!==!0&&o.push({left:x,top:E,right:C,bottom:E+v}),u.classList.toggle("cm-tooltip-above",S),u.classList.toggle("cm-tooltip-below",!S),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Tf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function pM(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const Kte=Re.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),qte={x:0,y:0},tE=Ee.define({enables:[eE,Kte]}),Jv=Ee.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class bb{static create(e){return new bb(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new f6(e,Jv,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Yte=tE.compute([Jv],t=>{let e=t.facet(Jv);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:bb.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class Xte{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Va)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==Vt.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>dr(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(eE),n=e?e.manager.tooltips.findIndex(i=>i.create==bb.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!Jte(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!Zte(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Eg=4;function Jte(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-Eg&&e.clientX<=i+Eg&&e.clientY>=r-Eg&&e.clientY<=s+Eg}function Zte(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function Qte(t,e={}){let n=nt.define(),i=_i.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,zi.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(tne)&&(r=[]);return r},provide:r=>Jv.from(r)});return{active:i,extension:[i,ei.define(r=>new Xte(r,t,i,n,e.hoverTime||300)),Yte]}}function ene(t,e){let n=t.plugin(eE);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const tne=nt.define(),mM=Ee.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Tp(t,e){let n=t.plugin(h6),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const h6=ei.fromClass(class{constructor(t){this.input=t.state.facet(Op),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(mM);this.top=new Ag(t,!0,e.topContainer),this.bottom=new Ag(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(mM);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ag(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ag(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Op);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Ag{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=gM(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=gM(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function gM(t){let e=t.nextSibling;return t.remove(),e}const Op=Ee.define({enables:h6});class _l extends Bc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}_l.prototype.elementClass="";_l.prototype.toDOM=void 0;_l.prototype.mapMode=zi.TrackBefore;_l.prototype.startSide=_l.prototype.endSide=-1;_l.prototype.point=!0;const D0=Ee.define(),nne=Ee.define(),L0=Ee.define(),vM=Ee.define({combine:t=>t.some(e=>e)});function ine(t){return[rne]}const rne=ei.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(L0).map(e=>new bM(t,e)),this.fixed=!t.state.facet(vM);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(vM)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=_t.iter(this.view.state.facet(D0),this.view.viewport.from),i=[],r=this.gutters.map(s=>new sne(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==bi.Text&&o){tk(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==bi.Text){tk(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(L0),n=t.state.facet(L0),i=t.docChanged||t.heightChanged||t.viewportChanged||!_t.eq(t.startState.facet(D0),t.state.facet(D0),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new bM(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Vt.LTR?{left:i,right:r}:{right:i,left:r}})});function yM(t){return Array.isArray(t)?t:[t]}function tk(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class sne{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=_t.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new p6(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];tk(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(nne)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class bM{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=yM(n.markers(e)),n.initialSpacer&&(this.spacer=new p6(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=yM(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!_t.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class p6{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),one(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function one(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const ane=Ee.define(),lne=Ee.define(),Gu=Ee.define({combine(t){return Il(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class Px extends _l{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Mx(t,e){return t.state.facet(Gu).formatNumber(e,t.state)}const cne=L0.compute([Gu],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(ane)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Px(Mx(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(lne)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Gu)!=e.state.facet(Gu),initialSpacer(e){return new Px(Mx(e,wM(e.state.doc.lines)))},updateSpacer(e,n){let i=Mx(n.view,wM(n.view.state.doc.lines));return i==e.number?e:new Px(i)},domEventHandlers:t.facet(Gu).domEventHandlers,side:"before"}));function une(t={}){return[Gu.of(t),ine(),cne]}function wM(t){let e=9;for(;e<t;)e=e*10+9;return e}const dne=new class extends _l{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},fne=D0.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(dne.range(r)))}return _t.of(e)});function hne(){return fne}const m6=new hm;function pne(t){window.codemirror&&window.codemirror.dispatch({effects:m6.reconfigure(dt.readOnly.of(t))})}const g6=nt.define(),nk=nt.define(),mne=_i.define({create(){return it.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(g6)&&(n=it.none,i.value!==null&&(n=n.update({add:[gne.range(i.value)]}))),i.is(nk)&&(n=it.none,i.value!==null&&(n=n.update({add:[vne.range(i.value)]})));return n},provide:t=>Re.decorations.from(t)}),gne=it.line({class:"!bg-gradient-to-r !from-mantis-500/8 !via-mantis-500/5 !to-transparent !border-l-2 !border-mantis-400/40 !shadow-sm"}),vne=it.line({class:"cm-current-instruction"});function yne(t){window.codemirror&&window.codemirror.dispatch({effects:g6.of(null)})}function v6(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:nk.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:nk.of(e)})}}const Zv=de(!1),y6=Ra.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Ra,bne=1,xM=5e3,Ls=new Map,Dh=[];function wne(){let t=0;for(const e of Ls.keys())e>t&&(t=e);return t+1}function xne(){let t=1/0;for(const e of Ls.keys())e<t&&(t=e);return t}function Wa(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??xM,s=Number.isFinite(r)?setTimeout(()=>Wa({type:"DISMISS_TOAST",toastId:n}),r):null;Ls.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Wa({type:"DISMISS_TOAST",toastId:n})}}}),Ls.size>bne&&Wa({type:"DISMISS_TOAST",toastId:xne()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=Ls.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??xM,o=Number.isFinite(s)?setTimeout(()=>Wa({type:"DISMISS_TOAST",toastId:n}),s):null;Ls.set(n,{...r,...i,timeout:o})}else Ls.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=Ls.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),Ls.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&Dh.length>0){const n=Array.from(Ls.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of Dh)i(n)}}function Di(t){const e=wne(),n=r=>Wa({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>Wa({type:"DISMISS_TOAST",toastId:e});return Wa({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function Sne(){const[t,e]=b.useState([]);return b.useEffect(()=>(Dh.push(e),()=>{const n=Dh.indexOf(e);n>-1&&Dh.splice(n,1)}),[]),{toastList:t,toast:Di,dismiss:n=>Wa({type:"DISMISS_TOAST",toastId:n})}}var nE=bm(),Ze=t=>ym(t,nE),iE=bm();Ze.write=t=>ym(t,iE);var wb=bm();Ze.onStart=t=>ym(t,wb);var rE=bm();Ze.onFrame=t=>ym(t,rE);var sE=bm();Ze.onFinish=t=>ym(t,sE);var ld=[];Ze.setTimeout=(t,e)=>{const n=Ze.now()+e,i=()=>{const s=ld.findIndex(o=>o.cancel==i);~s&&ld.splice(s,1),Ka-=~s?1:0},r={time:n,handler:t,cancel:i};return ld.splice(b6(n),0,r),Ka+=1,w6(),r};var b6=t=>~(~ld.findIndex(e=>e.time>t)||~ld.length);Ze.cancel=t=>{wb.delete(t),rE.delete(t),sE.delete(t),nE.delete(t),iE.delete(t)};Ze.sync=t=>{ik=!0,Ze.batchedUpdates(t),ik=!1};Ze.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Ze.onStart(n)}return i.handler=t,i.cancel=()=>{wb.delete(n),e=null},i};var oE=typeof window<"u"?window.requestAnimationFrame:()=>{};Ze.use=t=>oE=t;Ze.now=typeof performance<"u"?()=>performance.now():Date.now;Ze.batchedUpdates=t=>t();Ze.catch=console.error;Ze.frameLoop="always";Ze.advance=()=>{Ze.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):S6()};var Ga=-1,Ka=0,ik=!1;function ym(t,e){ik?(e.delete(t),t(0)):(e.add(t),w6())}function w6(){Ga<0&&(Ga=0,Ze.frameLoop!=="demand"&&oE(x6))}function kne(){Ga=-1}function x6(){~Ga&&(oE(x6),Ze.batchedUpdates(S6))}function S6(){const t=Ga;Ga=Ze.now();const e=b6(Ga);if(e&&(k6(ld.splice(0,e),n=>n.handler()),Ka-=e),!Ka){kne();return}wb.flush(),nE.flush(t?Math.min(64,Ga-t):16.667),rE.flush(),iE.flush(),sE.flush()}function bm(){let t=new Set,e=t;return{add(n){Ka+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Ka-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Ka-=e.size,k6(e,i=>i(n)&&t.add(i)),Ka+=t.size,e=t)}}}function k6(t,e){t.forEach(n=>{try{e(n)}catch(i){Ze.catch(i)}})}var _ne=Object.defineProperty,Cne=(t,e)=>{for(var n in e)_ne(t,n,{get:e[n],enumerable:!0})},xs={};Cne(xs,{assign:()=>Ane,colors:()=>ll,createStringInterpolator:()=>lE,skipAnimation:()=>C6,to:()=>_6,willAdvance:()=>cE});function rk(){}var Ene=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),fe={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Eo(t,e){if(fe.arr(t)){if(!fe.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var ft=(t,e)=>t.forEach(e);function po(t,e,n){if(fe.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var fr=t=>fe.und(t)?[]:fe.arr(t)?t:[t];function Lh(t,e){if(t.size){const n=Array.from(t);t.clear(),ft(n,e)}}var uh=(t,...e)=>Lh(t,n=>n(...e)),aE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),lE,_6,ll=null,C6=!1,cE=rk,Ane=t=>{t.to&&(_6=t.to),t.now&&(Ze.now=t.now),t.colors!==void 0&&(ll=t.colors),t.skipAnimation!=null&&(C6=t.skipAnimation),t.createStringInterpolator&&(lE=t.createStringInterpolator),t.requestAnimationFrame&&Ze.use(t.requestAnimationFrame),t.batchedUpdates&&(Ze.batchedUpdates=t.batchedUpdates),t.willAdvance&&(cE=t.willAdvance),t.frameLoop&&(Ze.frameLoop=t.frameLoop)},$h=new Set,jr=[],Rx=[],Qv=0,xb={get idle(){return!$h.size&&!jr.length},start(t){Qv>t.priority?($h.add(t),Ze.onStart(Nne)):(E6(t),Ze(sk))},advance:sk,sort(t){if(Qv)Ze.onFrame(()=>xb.sort(t));else{const e=jr.indexOf(t);~e&&(jr.splice(e,1),A6(t))}},clear(){jr=[],$h.clear()}};function Nne(){$h.forEach(E6),$h.clear(),Ze(sk)}function E6(t){jr.includes(t)||A6(t)}function A6(t){jr.splice(Pne(jr,e=>e.priority>t.priority),0,t)}function sk(t){const e=Rx;for(let n=0;n<jr.length;n++){const i=jr[n];Qv=i.priority,i.idle||(cE(i),i.advance(t),i.idle||e.push(i))}return Qv=0,Rx=jr,Rx.length=0,jr=e,jr.length>0}function Pne(t,e){const n=t.findIndex(e);return n<0?t.length:n}var Mne=(t,e,n)=>Math.min(Math.max(n,t),e),Rne={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},hs="[-+]?\\d*\\.?\\d+",ey=hs+"%";function Sb(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Tne=new RegExp("rgb"+Sb(hs,hs,hs)),One=new RegExp("rgba"+Sb(hs,hs,hs,hs)),Ine=new RegExp("hsl"+Sb(hs,ey,ey)),jne=new RegExp("hsla"+Sb(hs,ey,ey,hs)),Dne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Lne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,$ne=/^#([0-9a-fA-F]{6})$/,Fne=/^#([0-9a-fA-F]{8})$/;function Bne(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=$ne.exec(t))?parseInt(e[1]+"ff",16)>>>0:ll&&ll[t]!==void 0?ll[t]:(e=Tne.exec(t))?(uu(e[1])<<24|uu(e[2])<<16|uu(e[3])<<8|255)>>>0:(e=One.exec(t))?(uu(e[1])<<24|uu(e[2])<<16|uu(e[3])<<8|_M(e[4]))>>>0:(e=Dne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Fne.exec(t))?parseInt(e[1],16)>>>0:(e=Lne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Ine.exec(t))?(SM(kM(e[1]),Ng(e[2]),Ng(e[3]))|255)>>>0:(e=jne.exec(t))?(SM(kM(e[1]),Ng(e[2]),Ng(e[3]))|_M(e[4]))>>>0:null}function Tx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function SM(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Tx(r,i,t+1/3),o=Tx(r,i,t),a=Tx(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function uu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function kM(t){return(parseFloat(t)%360+360)%360/360}function _M(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Ng(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function CM(t){let e=Bne(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Ip=(t,e,n)=>{if(fe.fun(t))return t;if(fe.arr(t))return Ip({range:t,output:e,extrapolate:n});if(fe.str(t.output[0]))return lE(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Une(c,s);return zne(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function zne(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Une(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Vne=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return Mne(0,1,r/t)},ty=1.70158,Pg=ty*1.525,EM=ty+1,AM=2*Math.PI/3,NM=2*Math.PI/4.5,Mg=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,N6={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>EM*t*t*t-ty*t*t,easeOutBack:t=>1+EM*Math.pow(t-1,3)+ty*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Pg+1)*2*t-Pg)/2:(Math.pow(2*t-2,2)*((Pg+1)*(t*2-2)+Pg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*AM),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*AM)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*NM))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*NM)/2+1,easeInBounce:t=>1-Mg(1-t),easeOutBounce:Mg,easeInOutBounce:t=>t<.5?(1-Mg(1-2*t))/2:(1+Mg(2*t-1))/2,steps:Vne},jp=Symbol.for("FluidValue.get"),Wd=Symbol.for("FluidValue.observers"),Ir=t=>!!(t&&t[jp]),Li=t=>t&&t[jp]?t[jp]():t,PM=t=>t[Wd]||null;function Hne(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Dp(t,e){const n=t[Wd];n&&n.forEach(i=>{Hne(i,e)})}var P6=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Wne(this,t)}},Wne=(t,e)=>M6(t,jp,e);function of(t,e){if(t[jp]){let n=t[Wd];n||M6(t,Wd,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Lp(t,e){const n=t[Wd];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Wd]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var M6=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),$0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Gne=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,MM=new RegExp(`(${$0.source})(%|[a-z]+)`,"i"),Kne=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,kb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,R6=t=>{const[e,n]=qne(t);if(!e||aE())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&kb.test(n))return R6(n);if(n)return n}return t},qne=t=>{const e=kb.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Ox,Yne=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,T6=t=>{Ox||(Ox=ll?new RegExp(`(${Object.keys(ll).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Li(s).replace(kb,R6).replace(Gne,CM).replace(Ox,CM)),n=e.map(s=>s.match($0).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Ip({...t,output:s}));return s=>{var l;const o=!MM.test(e[0])&&((l=e.find(c=>MM.test(c)))==null?void 0:l.replace($0,""));let a=0;return e[0].replace($0,()=>`${r[a++](s)}${o||""}`).replace(Kne,Yne)}},uE="react-spring: ",O6=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${uE}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Xne=O6(console.warn);function Jne(){Xne(`${uE}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Zne=O6(console.warn);function Qne(){Zne(`${uE}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function _b(t){return fe.str(t)&&(t[0]=="#"||/\d/.test(t)||!aE()&&kb.test(t)||t in(ll||{}))}var dE=aE()?b.useEffect:b.useLayoutEffect,eie=()=>{const t=b.useRef(!1);return dE(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function I6(){const t=b.useState()[1],e=eie();return()=>{e.current&&t(Math.random())}}function tie(t,e){const[n]=b.useState(()=>({inputs:e,result:t()})),i=b.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&nie(e,s.inputs)||(s={inputs:e,result:t()}):s=n,b.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function nie(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var j6=t=>b.useEffect(t,iie),iie=[];function RM(t){const e=b.useRef();return b.useEffect(()=>{e.current=t}),e.current}var $p=Symbol.for("Animated:node"),rie=t=>!!t&&t[$p]===t,$s=t=>t&&t[$p],fE=(t,e)=>Ene(t,$p,e),Cb=t=>t&&t[$p]&&t[$p].getPayload(),D6=class{constructor(){fE(this,this)}getPayload(){return this.payload||[]}},wm=class extends D6{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,fe.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new wm(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return fe.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,fe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Fp=class extends wm{constructor(t){super(0),this._string=null,this._toString=Ip({output:[t,t]})}static create(t){return new Fp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(fe.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Ip({output:[this.getValue(),t]})),this._value=0,super.reset()}},ny={dependencies:null},Eb=class extends D6{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return po(this.source,(n,i)=>{rie(n)?e[i]=n.getValue(t):Ir(n)?e[i]=Li(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&ft(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return po(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){ny.dependencies&&Ir(t)&&ny.dependencies.add(t);const e=Cb(t);e&&ft(e,n=>this.add(n))}},L6=class extends Eb{constructor(t){super(t)}static create(t){return new L6(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(sie)),!0)}};function sie(t){return(_b(t)?Fp:wm).create(t)}function ok(t){const e=$s(t);return e?e.constructor:fe.arr(t)?L6:_b(t)?Fp:wm}var TM=(t,e)=>{const n=!fe.fun(t)||t.prototype&&t.prototype.isReactComponent;return b.forwardRef((i,r)=>{const s=b.useRef(null),o=n&&b.useCallback(g=>{s.current=lie(r,g)},[r]),[a,l]=aie(i,e),c=I6(),u=()=>{const g=s.current;if(n&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&c()},d=new oie(u,l),f=b.useRef();dE(()=>(f.current=d,ft(l,g=>of(g,d)),()=>{f.current&&(ft(f.current.deps,g=>Lp(g,f.current)),Ze.cancel(f.current.update))})),b.useEffect(u,[]),j6(()=>()=>{const g=f.current;ft(g.deps,m=>Lp(m,g))});const p=e.getComponentProps(a.getValue());return b.createElement(t,{...p,ref:o})})},oie=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ze.write(this.update)}};function aie(t,e){const n=new Set;return ny.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Eb(t),ny.dependencies=null,[t,n]}function lie(t,e){return t&&(fe.fun(t)?t(e):t.current=e),e}var OM=Symbol.for("AnimatedComponent"),cie=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new Eb(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=IM(o)||"Anonymous";return fe.str(o)?o=s[o]||(s[o]=TM(o,r)):o=o[OM]||(o[OM]=TM(o,r)),o.displayName=`Animated(${a})`,o};return po(t,(o,a)=>{fe.arr(t)&&(a=IM(o)),s[a]=s(o)}),{animated:s}},IM=t=>fe.str(t)?t:t&&fe.str(t.displayName)?t.displayName:fe.fun(t)&&t.name||null;function cc(t,...e){return fe.fun(t)?t(...e):t}var Fh=(t,e)=>t===!0||!!(e&&t&&(fe.fun(t)?t(e):fr(t).includes(e))),$6=(t,e)=>fe.obj(t)?e&&t[e]:t,F6=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,uie=t=>t,hE=(t,e=uie)=>{let n=die;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);fe.und(s)||(i[r]=s)}return i},die=["config","onProps","onStart","onChange","onPause","onResume","onRest"],fie={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function hie(t){const e={};let n=0;if(po(t,(i,r)=>{fie[r]||(e[r]=i,n++)}),n)return e}function B6(t){const e=hie(t);if(e){const n={to:e};return po(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Bp(t){return t=Li(t),fe.arr(t)?t.map(Bp):_b(t)?xs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function pie(t){for(const e in t)return!0;return!1}function ak(t){return fe.fun(t)||fe.arr(t)&&fe.obj(t[0])}function mie(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function gie(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var vie={default:{tension:170,friction:26}},lk={...vie.default,mass:1,damping:1,easing:N6.linear,clamp:!1},yie=class{constructor(){this.velocity=0,Object.assign(this,lk)}};function bie(t,e,n){n&&(n={...n},jM(n,e),e={...n,...e}),jM(t,e),Object.assign(t,e);for(const o in lk)t[o]==null&&(t[o]=lk[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return fe.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function jM(t,e){if(!fe.und(e.decay))t.duration=void 0;else{const n=!fe.und(e.tension)||!fe.und(e.friction);(n||!fe.und(e.frequency)||!fe.und(e.damping)||!fe.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var DM=[],wie=class{constructor(){this.changed=!1,this.values=DM,this.toValues=null,this.fromValues=DM,this.config=new yie,this.immediate=!1}};function z6(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=Fh(n.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{fe.und(n.pause)||(r.paused=Fh(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||Fh(g,e)),l=cc(n.delay||0,e),g?(r.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){r.resumeQueue.add(f),r.timeouts.delete(c),c.cancel(),l=c.time-Ze.now()}function f(){l>0&&!xs.skipAnimation?(r.delayed=!0,c=Ze.setTimeout(p,l),r.pauseQueue.add(d),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(g){a(g)}}})}var pE=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?cd(t.get()):e.every(n=>n.noop)?U6(t.get()):cs(t.get(),e.every(n=>n.finished)),U6=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),cs=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),cd=t=>({value:t,cancelled:!0,finished:!1});function V6(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=hE(e,(v,y)=>y==="onRest"?void 0:v);let u,d;const f=new Promise((v,y)=>(u=v,d=y)),p=v=>{const y=r<=(n.cancelId||0)&&cd(i)||r!==n.asyncId&&cs(i,!1);if(y)throw v.result=y,d(v),v},g=(v,y)=>{const w=new LM,x=new $M;return(async()=>{if(xs.skipAnimation)throw zp(n),x.result=cs(i,!1),d(x),x;p(w);const S=fe.obj(v)?{...v}:{...y,to:v};S.parentId=r,po(c,(E,C)=>{fe.und(S[C])&&(S[C]=E)});const _=await i.start(S);return p(w),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),_})()};let m;if(xs.skipAnimation)return zp(n),cs(i,!1);try{let v;fe.arr(t)?v=(async y=>{for(const w of y)await g(w)})(t):v=Promise.resolve(t(g,i.stop.bind(i))),await Promise.all([v.then(u),f]),m=cs(i.get(),!0,!1)}catch(v){if(v instanceof LM)m=v.result;else if(v instanceof $M)m=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return fe.fun(o)&&Ze.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function zp(t,e){Lh(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var LM=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},$M=class extends Error{constructor(){super("SkipAnimationSignal")}},ck=t=>t instanceof mE,xie=1,mE=class extends P6{constructor(){super(...arguments),this.id=xie++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=$s(this);return t&&t.getValue()}to(...t){return xs.to(this,t)}interpolate(...t){return Jne(),xs.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Dp(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||xb.sort(this),Dp(this,{type:"priority",parent:this,priority:t})}},Hc=Symbol.for("SpringPhase"),H6=1,uk=2,dk=4,Ix=t=>(t[Hc]&H6)>0,ba=t=>(t[Hc]&uk)>0,Of=t=>(t[Hc]&dk)>0,FM=(t,e)=>e?t[Hc]|=uk|H6:t[Hc]&=~uk,BM=(t,e)=>e?t[Hc]|=dk:t[Hc]&=~dk,He=class extends mE{constructor(t,e){if(super(),this.animation=new wie,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!fe.und(t)||!fe.und(e)){const n=fe.obj(t)?{...t}:{...e,from:t};fe.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(ba(this)||this._state.asyncTo)||Of(this)}get goal(){return Li(this.animation.to)}get velocity(){const t=$s(this);return t instanceof wm?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Ix(this)}get isAnimating(){return ba(this)}get isPaused(){return Of(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Cb(i.to);!o&&Ir(i.to)&&(r=fr(Li(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==Fp?1:o?o[u].lastPosition:r[u];let f=i.immediate,p=d;if(!f){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let g=c.elapsedTime+=t;const m=i.fromValues[u],v=c.v0!=null?c.v0:c.v0=fe.arr(s.velocity)?s.velocity[u]:s.velocity;let y;const w=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(fe.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,S=Math.exp(-(1-x)*g);p=m+v/(1-x)*(1-S),f=Math.abs(c.lastPosition-p)<=w,y=v*S}else{y=c.lastVelocity==null?v:c.lastVelocity;const x=s.restVelocity||w/10,S=s.clamp?0:s.bounce,_=!fe.und(S),E=m==d?c.v0>0:m<d;let C,N=!1;const M=1,O=Math.ceil(t/M);for(let D=0;D<O&&(C=Math.abs(y)>x,!(!C&&(f=Math.abs(d-p)<=w,f)));++D){_&&(N=p==d||p>d==E,N&&(y=-y*S,p=d));const j=-s.tension*1e-6*(p-d),K=-s.friction*.001*y,$=(j+K)/s.mass;y=y+$*M,p=p+y*M}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,g=c.elapsedTime+=t)),x=(s.progress||0)+g/this._memoizedDuration,x=x>1?1:x<0?0:x,c.durationProgress=x),p=m+s.easing(x)*(d-m),y=(p-c.lastPosition)/t,f=x==1}c.lastVelocity=y,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(p,s.round)&&(n=!0)});const a=$s(this),l=a.getValue();if(e){const c=Li(i.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ze.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ba(this)){const{to:t,config:e}=this.animation;Ze.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return fe.und(t)?(n=this.queue||[],this.queue=[]):n=[fe.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>pE(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),zp(this._state,t&&this._lastCallId),Ze.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=fe.obj(n)?n[e]:n,(n==null||ak(n))&&(n=void 0),i=fe.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return Ix(this)||(t.reverse&&([n,i]=[i,n]),i=Li(i),fe.und(i)?$s(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,hE(t,(o,a)=>/^on/.test(a)?$6(o,n):o)),UM(this,t,"onProps"),jf(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return z6(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Of(this)||(BM(this,!0),uh(s.pauseQueue),jf(this,"onPause",cs(this,If(this,this.animation.to)),this))},resume:()=>{Of(this)&&(BM(this,!1),ba(this)&&this._resume(),uh(s.resumeQueue),jf(this,"onResume",cs(this,If(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=W6(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(cd(this));const i=!fe.und(t.to),r=!fe.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(cd(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;r&&!i&&(!e.default||fe.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!Eo(d,c);f&&(a.from=d),d=Li(d);const p=!Eo(u,l);p&&this._focus(u);const g=ak(e.to),{config:m}=a,{decay:v,velocity:y}=m;(i||r)&&(m.velocity=0),e.config&&!g&&bie(m,cc(e.config,s),e.config!==o.config?cc(o.config,s):void 0);let w=$s(this);if(!w||fe.und(u))return n(cs(this,!0));const x=fe.und(e.reset)?r&&!e.default:!fe.und(d)&&Fh(e.reset,s),S=x?d:this.get(),_=Bp(u),E=fe.num(_)||fe.arr(_)||_b(_),C=!g&&(!E||Fh(o.immediate||e.immediate,s));if(p){const D=ok(u);if(D!==w.constructor)if(C)w=this._set(_);else throw Error(`Cannot animate between ${w.constructor.name} and ${D.name}, as the "to" prop suggests`)}const N=w.constructor;let M=Ir(u),O=!1;if(!M){const D=x||!Ix(this)&&f;(p||D)&&(O=Eo(Bp(S),_),M=!O),(!Eo(a.immediate,C)&&!C||!Eo(m.decay,v)||!Eo(m.velocity,y))&&(M=!0)}if(O&&ba(this)&&(a.changed&&!x?M=!0:M||this._stop(l)),!g&&((M||Ir(l))&&(a.values=w.getPayload(),a.toValues=Ir(u)?null:N==Fp?[1]:fr(_)),a.immediate!=C&&(a.immediate=C,!C&&!x&&this._set(l)),M)){const{onRest:D}=a;ft(kie,K=>UM(this,e,K));const j=cs(this,If(this,l));uh(this._pendingCalls,j),this._pendingCalls.add(n),a.changed&&Ze.batchedUpdates(()=>{var K;a.changed=!x,D==null||D(j,this),x?cc(o.onRest,j):(K=a.onStart)==null||K.call(a,j,this)})}x&&this._set(S),g?n(V6(e.to,e,this._state,this)):M?this._start():ba(this)&&!p?this._pendingCalls.add(n):n(U6(S))}_focus(t){const e=this.animation;t!==e.to&&(PM(this)&&this._detach(),e.to=t,PM(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Ir(e)&&(of(e,this),ck(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Ir(t)&&Lp(t,this)}_set(t,e=!0){const n=Li(t);if(!fe.und(n)){const i=$s(this);if(!i||!Eo(n,i.getValue())){const r=ok(n);!i||i.constructor!=r?fE(this,r.create(n)):i.setValue(n),i&&Ze.batchedUpdates(()=>{this._onChange(n,e)})}}return $s(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,jf(this,"onStart",cs(this,If(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),cc(this.animation.onChange,t,this)),cc(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;$s(this).reset(Li(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),ba(this)||(FM(this,!0),Of(this)||this._resume())}_resume(){xs.skipAnimation?this.finish():xb.start(this)}_stop(t,e){if(ba(this)){FM(this,!1);const n=this.animation;ft(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Dp(this,{type:"idle",parent:this});const i=e?cd(this.get()):cs(this.get(),If(this,t??n.to));uh(this._pendingCalls,i),n.changed&&(n.changed=!1,jf(this,"onRest",i,this))}}};function If(t,e){const n=Bp(e),i=Bp(t.get());return Eo(i,n)}function W6(t,e=t.loop,n=t.to){const i=cc(e);if(i){const r=i!==!0&&B6(i),s=(r||t).reverse,o=!r||r.reset;return Up({...t,loop:e,default:!1,pause:void 0,to:!s||ak(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function Up(t){const{to:e,from:n}=t=B6(t),i=new Set;return fe.obj(e)&&zM(e,i),fe.obj(n)&&zM(n,i),t.keys=i.size?Array.from(i):null,t}function Sie(t){const e=Up(t);return fe.und(e.default)&&(e.default=hE(e)),e}function zM(t,e){po(t,(n,i)=>n!=null&&e.add(i))}var kie=["onStart","onRest","onChange","onPause","onResume"];function UM(t,e,n){t.animation[n]=e[n]!==F6(e,n)?$6(e[n],t.key):void 0}function jf(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var _ie=["onStart","onChange","onRest"],Cie=1,Eie=class{constructor(t,e){this.id=Cie++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];fe.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Up(t)),this}start(t){let{queue:e}=this;return t?e=fr(t).map(Up):this.queue=[],this._flush?this._flush(this,e):(X6(this,e),fk(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;ft(fr(e),i=>n[i].stop(!!t))}else zp(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(fe.und(t))this.start({pause:!0});else{const e=this.springs;ft(fr(t),n=>e[n].pause())}return this}resume(t){if(fe.und(t))this.start({pause:!1});else{const e=this.springs;ft(fr(t),n=>e[n].resume())}return this}each(t){po(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Lh(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&Lh(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,Lh(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Ze.onFrame(this._onFrame)}};function fk(t,e){return Promise.all(e.map(n=>G6(t,n))).then(n=>pE(t,n))}async function G6(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=fe.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=fe.arr(r)||fe.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):ft(_ie,m=>{const v=e[m];if(fe.fun(v)){const y=t._events[m];e[m]=({finished:w,cancelled:x})=>{const S=y.get(v);S?(w||(S.finished=!1),x&&(S.cancelled=!0)):y.set(v,{value:null,finished:w||!1,cancelled:x||!1})},c&&(c[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,uh(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const f=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),p=e.cancel===!0||F6(e,"cancel")===!0;(u||p&&d.asyncId)&&f.push(z6(++t._lastAsyncId,{props:e,state:d,actions:{pause:rk,resume:rk,start(m,v){p?(zp(d,t._lastAsyncId),v(cd(t))):(m.onRest=a,v(V6(u,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const g=pE(t,await Promise.all(f));if(o&&g.finished&&!(n&&g.noop)){const m=W6(e,o,r);if(m)return X6(t,[m]),G6(t,m,!0)}return l&&Ze.batchedUpdates(()=>l(g,t,t.item)),g}function VM(t,e){const n={...t.springs};return e&&ft(fr(e),i=>{fe.und(i.keys)&&(i=Up(i)),fe.obj(i.to)||(i={...i,to:void 0}),Y6(n,i,r=>q6(r))}),K6(t,n),n}function K6(t,e){po(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,of(n,t))})}function q6(t,e){const n=new He;return n.key=t,e&&of(n,e),n}function Y6(t,e,n){e.keys&&ft(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function X6(t,e){ft(e,n=>{Y6(t.springs,n,i=>q6(i,t))})}var Ab=({children:t,...e})=>{const n=b.useContext(iy),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=tie(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=iy;return b.createElement(s,{value:e},t)},iy=Aie(Ab,{});Ab.Provider=iy.Provider;Ab.Consumer=iy.Consumer;function Aie(t,e){return Object.assign(t,b.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var Nie=()=>{const t=[],e=function(i){Qne();const r=[];return ft(t,(s,o)=>{if(fe.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return ft(t,i=>i.pause(...arguments)),this},e.resume=function(){return ft(t,i=>i.resume(...arguments)),this},e.set=function(i){ft(t,(r,s)=>{const o=fe.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return ft(t,(s,o)=>{if(fe.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return ft(t,i=>i.stop(...arguments)),this},e.update=function(i){return ft(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return fe.fun(i)?i(s,r):i};return e._getProps=n,e};function Pie(t,e,n){const i=fe.fun(e)&&e;i&&!n&&(n=[]);const r=b.useMemo(()=>i||arguments.length==3?Nie():void 0,[]),s=b.useRef(0),o=I6(),a=b.useMemo(()=>({ctrls:[],queue:[],flush(y,w){const x=VM(y,w);return s.current>0&&!a.queue.length&&!Object.keys(x).some(_=>!y.springs[_])?fk(y,w):new Promise(_=>{K6(y,x),a.queue.push(()=>{_(fk(y,w))}),o()})}}),[]),l=b.useRef([...a.ctrls]),c=[],u=RM(t)||0;b.useMemo(()=>{ft(l.current.slice(t,u),y=>{mie(y,r),y.stop(!0)}),l.current.length=t,d(u,t)},[t]),b.useMemo(()=>{d(0,Math.min(u,t))},n);function d(y,w){for(let x=y;x<w;x++){const S=l.current[x]||(l.current[x]=new Eie(null,a.flush)),_=i?i(x,S):e[x];_&&(c[x]=Sie(_))}}const f=l.current.map((y,w)=>VM(y,c[w])),p=b.useContext(Ab),g=RM(p),m=p!==g&&pie(p);dE(()=>{s.current++,a.ctrls=l.current;const{queue:y}=a;y.length&&(a.queue=[],ft(y,w=>w())),ft(l.current,(w,x)=>{r==null||r.add(w),m&&w.start({default:p});const S=c[x];S&&(gie(w,S.ref),w.ref?w.queue.push(S):w.start(S))})}),j6(()=>()=>{ft(a.ctrls,y=>y.stop(!0))});const v=f.map(y=>({...y}));return r?[v,r]:v}function Nb(t,e){const n=fe.fun(t),[[i],r]=Pie(1,n?t:[t],n?[]:e);return n||arguments.length==2?[i,r]:i}var Mie=class extends mE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Ip(...e);const n=this._get(),i=ok(n);fE(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Eo(e,n)||($s(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&HM(this._active)&&jx(this)}_get(){const t=fe.arr(this.source)?this.source.map(Li):fr(Li(this.source));return this.calc(...t)}_start(){this.idle&&!HM(this._active)&&(this.idle=!1,ft(Cb(this),t=>{t.done=!1}),xs.skipAnimation?(Ze.batchedUpdates(()=>this.advance()),jx(this)):xb.start(this))}_attach(){let t=1;ft(fr(this.source),e=>{Ir(e)&&of(e,this),ck(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){ft(fr(this.source),t=>{Ir(t)&&Lp(t,this)}),this._active.clear(),jx(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=fr(this.source).reduce((e,n)=>Math.max(e,(ck(n)?n.priority:0)+1),0))}};function Rie(t){return t.idle!==!1}function HM(t){return!t.size||Array.from(t).every(Rie)}function jx(t){t.idle||(t.idle=!0,ft(Cb(t),e=>{e.done=!0}),Dp(t,{type:"idle",parent:t}))}xs.assign({createStringInterpolator:T6,to:(t,e)=>new Mie(t,e)});var J6=/^--/;function Tie(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!J6.test(t)&&!(Bh.hasOwnProperty(t)&&Bh[t])?e+"px":(""+e).trim()}var WM={};function Oie(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(f=>n||t.hasAttribute(f)?f:WM[f]||(WM[f]=f.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(t.textContent=s);for(const f in r)if(r.hasOwnProperty(f)){const p=Tie(f,r[f]);J6.test(f)?t.style.setProperty(f,p):t.style[f]=p}d.forEach((f,p)=>{t.setAttribute(f,u[p])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var Bh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Iie=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),jie=["Webkit","Ms","Moz","O"];Bh=Object.keys(Bh).reduce((t,e)=>(jie.forEach(n=>t[Iie(n,e)]=t[e]),t),Bh);var Die=/^(matrix|translate|scale|rotate|skew)/,Lie=/^(translate)/,$ie=/^(rotate|skew)/,Dx=(t,e)=>fe.num(t)&&t!==0?t+e:t,F0=(t,e)=>fe.arr(t)?t.every(n=>F0(n,e)):fe.num(t)?t===e:parseFloat(t)===e,Fie=class extends Eb{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Dx(a,"px")).join(",")})`,F0(o,0)])),po(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(Die.test(a)){if(delete i[a],fe.und(o))return;const l=Lie.test(a)?"px":$ie.test(a)?"deg":"";r.push(fr(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${Dx(f,l)})`,F0(f,0)]:c=>[`${a}(${c.map(u=>Dx(u,l)).join(",")})`,F0(c,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new Bie(r,s)),super(i)}},Bie=class extends P6{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return ft(this.inputs,(n,i)=>{const r=Li(n[0]),[s,o]=this.transforms[i](fe.arr(r)?r:n.map(Li));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&ft(this.inputs,e=>ft(e,n=>Ir(n)&&of(n,this)))}observerRemoved(t){t==0&&ft(this.inputs,e=>ft(e,n=>Ir(n)&&Lp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Dp(this,t)}},zie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];xs.assign({batchedUpdates:Ol.unstable_batchedUpdates,createStringInterpolator:T6,colors:Rne});var Uie=cie(zie,{applyAnimatedValues:Oie,createAnimatedStyle:t=>new Fie(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Ge=Uie.animated;const Yt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},Fe=(t=Yt.stone[800])=>({backgroundColor:new He(t),opacity:new He(1)}),Nn=()=>({strokeDashoffset:new He(1),opacity:new He(1)}),Rg=()=>({strokeDashoffset:new He(1),opacity:new He(1),path:new He("")}),ry={bus:{address:Rg(),data:Rg(),rd:Rg(),wr:Rg(),iom:Nn(),mem:{stroke:new He(Yt.red[500])},handshake:Nn(),pic:Nn(),pio:Nn(),timer:Nn(),intr:Nn(),inta:Nn(),int0:Nn(),int1:Nn(),int2:Nn(),"switches->pio":Nn(),"pio->leds":Nn(),printer:{data:Nn(),strobe:Nn(),busy:Nn()}},clock:{angle:new He(0)},controlMemory:{overlay:{opacity:new He(0)},container:{opacity:new He(0),scale:new He(.8)},currentInstruction:{glow:new He(0)},microop:{0:{opacity:new He(0),translateX:new He(-20)},1:{opacity:new He(0),translateX:new He(-20)},2:{opacity:new He(0),translateX:new He(-20)},3:{opacity:new He(0),translateX:new He(-20)},4:{opacity:new He(0),translateX:new He(-20)}}},sequencer:{overlay:{opacity:new He(0)},container:{opacity:new He(0),scale:new He(.8)}},cpu:{internalBus:{address:{strokeDashoffset:new He(1),opacity:new He(1),path:new He("")},data:{strokeDashoffset:new He(1),opacity:new He(1),path:new He("")}},alu:{operands:Nn(),results:Nn(),cog:{rot:new He(0)},operation:{backgroundColor:new He(Yt.stone[800])},resultText:{opacity:new He(0)},leftText:{opacity:new He(0)},rightText:{opacity:new He(0)}},decoder:{path:Nn(),progress:{progress:new He(0),opacity:new He(1)}},AX:Fe(),BX:Fe(),CX:Fe(),DX:Fe(),AL:Fe(),BL:Fe(),CL:Fe(),DL:Fe(),SP:Fe(),"SP.l":Fe(),"SP.h":Fe(),IP:Fe(),"IP.l":Fe(),"IP.h":Fe(),IR:Fe(),ri:{...Fe(),opacity:new He(0)},"ri.l":Fe(),"ri.h":Fe(),id:{...Fe(),opacity:new He(0)},"id.l":Fe(),"id.h":Fe(),left:Fe(),"left.l":Fe(),"left.h":Fe(),right:Fe(),"right.l":Fe(),"right.h":Fe(),result:Fe(),"result.l":Fe(),"result.h":Fe(),FLAGS:Fe(),"FLAGS.l":Fe(),"FLAGS.h":Fe(),MAR:Fe(),MBR:Fe()},handshake:{DATA:Fe(),STATE:Fe()},memory:{"operating-cell":{color:new He(Yt.white)}},pic:{IMR:Fe(),IRR:Fe(),ISR:Fe(),INT0:Fe(),INT1:Fe(),INT2:Fe(),INT3:Fe(),INT4:Fe(),INT5:Fe(),INT6:Fe(),INT7:Fe()},pio:{PA:Fe(),PB:Fe(),CA:Fe(),CB:Fe()},printer:{printing:{progress:new He(0),opacity:new He(1)}},timer:{CONT:Fe(),COMP:Fe()}};function Ie(t){try{return bL(ry,t)}catch{const n=t.split(".");let i=ry;for(const r of n)if(r in i)i=i[r];else return console.warn(`Path not found: ${t}`),{backgroundColor:new He(Yt.stone[800]),opacity:new He(1),stop(){},pause(){},resume(){},start:()=>Promise.resolve(),set(){},get:()=>Yt.stone[800],isPaused:!1};return i}}function Z6(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof He?e[n]=i.get():e[n]=Z6(i)}return e}const Vie=Z6(ry);function Q6(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof He?i.set(e[n]):Q6(t[n],e[n])}}const Hie=()=>Q6(ry,Vie),Vp=new Set;async function Be(t,e){const n=R.get(tn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=R.sub(tn,()=>{R.get(tn).type!=="paused"&&(o(),s())})}),await Be(t,e);const i=Tn();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:i.animations?e.duration*i.executionUnit:1,easing:N6[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;try{const l=Ie(s);if(a===void 0)return l.set(o);{Vp.add(s);const c=await Ie(s).start({from:o,to:a,config:r});return Vp.delete(s),c}}catch(l){return console.warn(`Error animando la clave ${s}:`,l),null}}))}const e$=()=>Vp.forEach(t=>{try{const e=Ie(t);e&&typeof e.pause=="function"&&e.pause()}catch(e){console.warn(`Error pausing animation for key ${t}:`,e)}}),t$=()=>Vp.forEach(t=>{try{const e=Ie(t);e&&typeof e.resume=="function"&&e.resume()}catch(e){console.warn(`Error resuming animation for key ${t}:`,e)}});function gE(){Vp.forEach(t=>{try{const e=Ie(t);e&&typeof e.stop=="function"&&(e.stop(!0),e.isPaused&&typeof e.resume=="function"&&e.resume())}catch(e){console.warn(`Error stopping animation for key ${t}:`,e)}}),setTimeout(()=>Hie(),10)}const Wie={AX:Yt.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:Yt.red[500],SP:"#DC2626",MAR:Yt.blue[500],MBR:Yt.blue[500],IR:Yt.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#F97316",ri:"#06B6D4",left:"#22C55E",right:"#16A34A"};function n$(t){const e=t.replace("cpu.","").split(".")[0];return Wie[e]||Yt.stone[600]}async function On(t,e){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP||t==="cpu.right.l"||t==="cpu.left.l")return;const n=e||n$(t);await Be({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await Be({key:`${t}.backgroundColor`,to:Yt.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function In(t){try{return t==="cpu.right.l"||t==="cpu.left.l"?void 0:await Be({key:`${t}.backgroundColor`,to:Yt.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function Hp(t){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP)return;const e=Tn(),n=n$(t);await Be({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const i=e.animations?1e3:1;await new Promise(r=>setTimeout(r,i)),await Be({key:`${t}.backgroundColor`,to:Yt.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function Gd(t){await On("cpu.MBR"),R.set(_c,t),await In("cpu.MBR")}function hk(){setTimeout(()=>{try{const t=Ie("bus.rd.opacity");t&&t.set(0)}catch{}try{const t=Ie("bus.wr.opacity");t&&t.set(0)}catch{}},0)}function pk(){try{const t=Ie("bus.rd.opacity");t&&t.start({to:1})}catch{}}function mk(){try{const t=Ie("bus.rd.opacity");t&&t.start({to:0})}catch{}}function i$(){try{const t=Ie("bus.wr.opacity");t&&t.start({to:1})}catch{}}function r$(){try{const t=Ie("bus.wr.opacity");t&&t.start({to:0})}catch{}}function s$(){try{const t=Ie("cpu.alu.resultText.opacity");t&&t.start({to:1})}catch{}}function o$(){try{const t=Ie("cpu.alu.resultText.opacity");t&&t.start({to:0})}catch{}}function gk(){setTimeout(()=>{try{const t=Ie("cpu.alu.resultText.opacity");t&&t.set(0)}catch{}},0)}function a$(){try{const t=Ie("cpu.alu.leftText.opacity");t&&t.start({to:1})}catch{}}function l$(){try{const t=Ie("cpu.alu.leftText.opacity");t&&t.start({to:0})}catch{}}function vk(){setTimeout(()=>{try{const t=Ie("cpu.alu.leftText.opacity");t&&t.set(0)}catch{}},0)}function c$(){try{const t=Ie("cpu.alu.rightText.opacity");t&&t.start({to:1})}catch{}}function u$(){try{const t=Ie("cpu.alu.rightText.opacity");t&&t.start({to:0})}catch{}}function yk(){setTimeout(()=>{try{const t=Ie("cpu.alu.rightText.opacity");t&&t.set(0)}catch{}},0)}async function xi(t,e){return await Be([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function Kn(t){return await Be({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}const Gie=Object.freeze(Object.defineProperty({__proto__:null,activateRegister:On,anim:Be,deactivateRegister:In,hideALULeftText:l$,hideALULeftTextOnInit:vk,hideALUResultText:o$,hideALUResultTextOnInit:gk,hideALURightText:u$,hideALURightTextOnInit:yk,hideControlBusTextsOnInit:hk,hideReadControlText:mk,hideWriteControlText:r$,pauseAllAnimations:e$,populateDataBus:Gd,resumeAllAnimations:t$,showALULeftText:a$,showALUResultText:s$,showALURightText:c$,showReadControlText:pk,showWriteControlText:i$,stopAllAnimations:gE,turnLineOff:Kn,turnLineOn:xi,updateRegisterWithGlow:Hp},Symbol.toStringTag,{value:"Module"}));async function GM(t){switch(t.type){case"bus:io.selected":{await Promise.all([Be({key:"bus.mem.stroke",to:Yt.stone[700]},{duration:1,easing:"easeInSine"}),xi(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Gc(t.error);return}case"bus:reset":{await Promise.all([Be([{key:"bus.address.strokeDashoffset",to:1},{key:"bus.data.strokeDashoffset",to:1},{key:"bus.rd.strokeDashoffset",to:1},{key:"bus.wr.strokeDashoffset",to:1}],{duration:1,easing:"easeInSine"}),Be({key:"bus.mem.stroke",to:Yt.red[500]},{duration:1,easing:"easeOutSine"}),Kn("bus.iom"),Kn("bus.handshake"),Kn("bus.pio"),Kn("bus.pic"),Kn("bus.timer")]);return}default:return t}}async function Kie(t){switch(t.type){case"clock:tick":return;default:return t.type}}function bk(t,e,n){switch(t){case"SP":return"M 460 309 H 550 V 349 H 659";case"IP":return"M 460 349 H 659";case"ri":return"";default:throw new Error(`Invalid register ${t}`)}}function qie({showSP:t,showri:e}){const{path:n,...i}=Ie("cpu.internalBus.address"),r=[t?"M 400 309 H 550 V 250":"","M 400 349 H 550 V 255",e?"M 420 388 H 550 V 300":"","M 400 349 H 659"];return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-30",children:[r.map((s,o)=>h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:s},o)),h.jsx(Ge.path,{d:n,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i}),h.jsx(Ge.path,{d:n,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}var vE={exports:{}},ud=typeof Reflect=="object"?Reflect:null,KM=ud&&typeof ud.apply=="function"?ud.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},B0;ud&&typeof ud.ownKeys=="function"?B0=ud.ownKeys:Object.getOwnPropertySymbols?B0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:B0=function(e){return Object.getOwnPropertyNames(e)};function Yie(t){console&&console.warn&&console.warn(t)}var d$=Number.isNaN||function(e){return e!==e};function Pt(){Pt.init.call(this)}vE.exports=Pt;vE.exports.once=Qie;Pt.EventEmitter=Pt;Pt.prototype._events=void 0;Pt.prototype._eventsCount=0;Pt.prototype._maxListeners=void 0;var qM=10;function Pb(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Pt,"defaultMaxListeners",{enumerable:!0,get:function(){return qM},set:function(t){if(typeof t!="number"||t<0||d$(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");qM=t}});Pt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Pt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||d$(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function f$(t){return t._maxListeners===void 0?Pt.defaultMaxListeners:t._maxListeners}Pt.prototype.getMaxListeners=function(){return f$(this)};Pt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")KM(l,this,n);else for(var c=l.length,u=v$(l,c),i=0;i<c;++i)KM(u[i],this,n);return!0};function h$(t,e,n,i){var r,s,o;if(Pb(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=f$(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Yie(a)}return t}Pt.prototype.addListener=function(e,n){return h$(this,e,n,!1)};Pt.prototype.on=Pt.prototype.addListener;Pt.prototype.prependListener=function(e,n){return h$(this,e,n,!0)};function Xie(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p$(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=Xie.bind(i);return r.listener=n,i.wrapFn=r,r}Pt.prototype.once=function(e,n){return Pb(n),this.on(e,p$(this,e,n)),this};Pt.prototype.prependOnceListener=function(e,n){return Pb(n),this.prependListener(e,p$(this,e,n)),this};Pt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(Pb(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():Jie(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Pt.prototype.off=Pt.prototype.removeListener;Pt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function m$(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?Zie(r):v$(r,r.length)}Pt.prototype.listeners=function(e){return m$(this,e,!0)};Pt.prototype.rawListeners=function(e){return m$(this,e,!1)};Pt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):g$.call(t,e)};Pt.prototype.listenerCount=g$;function g$(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Pt.prototype.eventNames=function(){return this._eventsCount>0?B0(this._events):[]};function v$(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function Jie(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Zie(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Qie(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}y$(t,e,s,{once:!0}),e!=="error"&&ere(t,r,{once:!0})})}function ere(t,e,n){typeof t.on=="function"&&y$(t,"error",e,n)}function y$(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var tre=vE.exports;function mo(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(mo.prototype[Symbol.iterator]=function(){return this});mo.of=function(){var t=arguments,e=t.length,n=0;return new mo(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};mo.empty=function(){var t=new mo(function(){return{done:!0}});return t};mo.fromSequence=function(t){var e=0,n=t.length;return new mo(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};mo.is=function(t){return t instanceof mo?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Mb=mo;const Xr=Jc(Mb);var Rb={};Rb.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Rb.SYMBOL_SUPPORT=typeof Symbol<"u";var nre=Mb,b$=Rb,ire=b$.ARRAY_BUFFER_SUPPORT,rre=b$.SYMBOL_SUPPORT;function sre(t){return typeof t=="string"||Array.isArray(t)||ire&&ArrayBuffer.isView(t)?nre.fromSequence(t):typeof t!="object"||t===null?null:rre&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var w$=function(e){var n=sre(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},ore=w$,are=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=ore(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const x$=Jc(are);var lre=Mb,cre=w$,ure=function(){var e=arguments,n=null,i=-1;return new lre(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=cre(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const qo=Jc(ure);function dre(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let _n=dre;typeof Object.assign=="function"&&(_n=Object.assign);function Hr(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function qn(t){return typeof t=="object"&&t!==null}function S$(t){let e;for(e in t)return!1;return!0}function Cr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function es(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function YM(t){return!(!qn(t)||t.attributes&&!Array.isArray(t.attributes))}function fre(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class yE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class we extends yE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,we.prototype.constructor)}}class he extends yE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,he.prototype.constructor)}}class Ue extends yE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ue.prototype.constructor)}}function k$(t,e){this.key=t,this.attributes=e,this.clear()}k$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function _$(t,e){this.key=t,this.attributes=e,this.clear()}_$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function C$(t,e){this.key=t,this.attributes=e,this.clear()}C$.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function af(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}af.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};af.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};af.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};af.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const E$=0,A$=1,hre=2,N$=3;function ua(t,e,n,i,r,s,o){let a,l,c,u;if(i=""+i,n===E$){if(a=t._nodes.get(i),!a)throw new he(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(n===N$){if(r=""+r,l=t._edges.get(r),!l)throw new he(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(i===d)a=l.target;else if(i===f)a=l.source;else throw new he(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(i),!l)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===A$?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function pre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ua(this,e,n,i,r,s);return o.attributes[a]}}function mre(t,e,n){t.prototype[e]=function(i,r){const[s]=ua(this,e,n,i,r);return s.attributes}}function gre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ua(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function vre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=ua(this,e,n,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function yre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=ua(this,e,n,i,r,s,o);if(typeof c!="function")throw new we(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function bre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ua(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function wre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ua(this,e,n,i,r,s);if(!qn(a))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function xre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ua(this,e,n,i,r,s);if(!qn(a))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return _n(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function Sre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ua(this,e,n,i,r,s);if(typeof a!="function")throw new we(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const kre=[{name:t=>`get${t}Attribute`,attacher:pre},{name:t=>`get${t}Attributes`,attacher:mre},{name:t=>`has${t}Attribute`,attacher:gre},{name:t=>`set${t}Attribute`,attacher:vre},{name:t=>`update${t}Attribute`,attacher:yre},{name:t=>`remove${t}Attribute`,attacher:bre},{name:t=>`replace${t}Attributes`,attacher:wre},{name:t=>`merge${t}Attributes`,attacher:xre},{name:t=>`update${t}Attributes`,attacher:Sre}];function _re(t){kre.forEach(function({name:e,attacher:n}){n(t,e("Node"),E$),n(t,e("Source"),A$),n(t,e("Target"),hre),n(t,e("Opposite"),N$)})}function Cre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ue(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ue(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Hr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Ue(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function Ere(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ue(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Ue(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=Hr(this,s,o,n),!r)throw new he(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new Ue(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function Are(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ue(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ue(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Hr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Ue(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function Nre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ue(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Ue(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Hr(this,a,l,n),!o)throw new he(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Ue(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Pre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ue(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Ue(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Hr(this,a,l,n),!o)throw new he(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Ue(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new we(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Mre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ue(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ue(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Hr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Ue(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function Rre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ue(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ue(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Hr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Ue(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!qn(r))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Tre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ue(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ue(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Hr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Ue(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!qn(r))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return _n(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function Ore(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ue(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ue(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Hr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Ue(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new we(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Ire=[{name:t=>`get${t}Attribute`,attacher:Cre},{name:t=>`get${t}Attributes`,attacher:Ere},{name:t=>`has${t}Attribute`,attacher:Are},{name:t=>`set${t}Attribute`,attacher:Nre},{name:t=>`update${t}Attribute`,attacher:Pre},{name:t=>`remove${t}Attribute`,attacher:Mre},{name:t=>`replace${t}Attributes`,attacher:Rre},{name:t=>`merge${t}Attributes`,attacher:Tre},{name:t=>`update${t}Attributes`,attacher:Ore}];function jre(t){Ire.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const Dre=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Lre(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function $re(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Lx(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Xr(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function Fre(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function Bre(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function $x(t,e){let n=t[e];return n.next!==void 0?new Xr(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Xr.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function zre(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):x$(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function P$(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:p}=a;if(l=i(u,d,f.key,p.key,f.attributes,p.attributes,a.undirected),t&&l)return u}}function Ure(t,e){if(t.size===0)return Xr.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Xr(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function bE(t,e,n,i,r,s){const o=e?$re:Lre;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function Vre(t,e,n,i){const r=[];return bE(!1,t,e,n,i,function(s){r.push(s)}),r}function Hre(t,e,n){let i=Xr.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=qo(i,Lx(n.in))),e!=="in"&&typeof n.out<"u"&&(i=qo(i,Lx(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=qo(i,Lx(n.undirected))),i}function wE(t,e,n,i,r,s,o){const a=n?Bre:Fre;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function Wre(t,e,n,i,r){const s=[];return wE(!1,t,e,n,i,r,function(o){s.push(o)}),s}function Gre(t,e,n,i){let r=Xr.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=qo(r,$x(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=qo(r,$x(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=qo(r,$x(n.undirected,i))),r}function Kre(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return zre(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new he(`Graph.${n}: could not find the "${s}" node in the graph.`);return Vre(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new he(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new he(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return Wre(i,this.multi,r,a,o)}throw new we(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function qre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,P$(!1,this,i,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new he(`Graph.${s}: could not find the "${c}" node in the graph.`);return bE(!1,this.multi,i==="mixed"?this.type:i,r,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new he(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new he(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return wE(!1,i,this.multi,r,f,u,d)}throw new we(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;i!=="directed"&&(f+=this.undirectedSize),i!=="undirected"&&(f+=this.directedSize),d=new Array(f);let p=0;c.push((g,m,v,y,w,x,S)=>{d[p++]=u(g,m,v,y,w,x,S)})}else d=[],c.push((f,p,g,m,v,y,w)=>{d.push(u(f,p,g,m,v,y,w))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,p,g,m,v,y,w)=>{u(f,p,g,m,v,y,w)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new we(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new we(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((p,g,m,v,y,w,x)=>{f=u(f,p,g,m,v,y,w,x)}),this[s].apply(this,c),f}}function Yre(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,P$(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new he(`Graph.${s}: could not find the "${l}" node in the graph.`);return bE(!0,this.multi,i==="mixed"?this.type:i,r,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new he(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new he(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return wE(!0,i,this.multi,r,d,c,u)}throw new we(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>c(d,f,p,g,m,v,y)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>!c(d,f,p,g,m,v,y)),!this[s].apply(this,l)}}function Xre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Xr.empty();if(!arguments.length)return Ure(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new he(`Graph.${s}: could not find the "${o}" node in the graph.`);return Hre(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new he(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new he(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Gre(i,r,l,a)}throw new we(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Jre(t){Dre.forEach(e=>{Kre(t,e),qre(t,e),Yre(t,e),Xre(t,e)})}const Zre=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Tb(){this.A=null,this.B=null}Tb.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Tb.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Df(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(t&&u)return c.key}}function xE(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return Df(t,null,i,i.undirected,r);if(typeof n=="string")return Df(t,null,i,i[n],r)}const s=new Tb;let o;if(e!=="undirected"){if(n!=="out"){if(o=Df(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=Df(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Df(t,s,i,i.undirected,r),t&&o))return o}function Qre(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return xE(!1,t,e,n,function(r){i.push(r)}),i}function Lf(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Xr(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function ese(t,e,n){if(t!=="mixed"){if(t==="undirected")return Lf(null,n,n.undirected);if(typeof e=="string")return Lf(null,n,n[e])}let i=Xr.empty();const r=new Tb;return t!=="undirected"&&(e!=="out"&&(i=qo(i,Lf(r,n,n.in))),e!=="in"&&(i=qo(i,Lf(r,n,n.out)))),t!=="directed"&&(i=qo(i,Lf(r,n,n.undirected))),i}function tse(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new he(`Graph.${n}: could not find the "${s}" node in the graph.`);return Qre(i==="mixed"?this.type:i,r,o)}}function nse(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new he(`Graph.${s}: could not find the "${c}" node in the graph.`);xE(!1,i==="mixed"?this.type:i,r,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,p)=>{d.push(u(f,p))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,p)=>{u(f,p)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new we(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(p,g)=>{f=u(f,p,g)}),f}}function ise(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new he(`Graph.${o}: could not find the "${c}" node in the graph.`);return xE(!0,i==="mixed"?this.type:i,r,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,p)=>!u(f,p))}}function rse(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Xr.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new he(`Graph.${s}: could not find the "${o}" node in the graph.`);return ese(i==="mixed"?this.type:i,r,a)}}function sse(t){Zre.forEach(e=>{tse(t,e),nse(t,e),ise(t,e),rse(t,e)})}function Tg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,d,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do f=d.target,p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do f=d.target,f.key!==c&&(f=d.source),p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!p&&r(l.key,null,l.attributes,null,null,null,null)}}function ose(t,e){const n={key:t};return S$(e.attributes)||(n.attributes=_n({},e.attributes)),n}function ase(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return S$(n.attributes)||(i.attributes=_n({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function lse(t){if(!qn(t))throw new we('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new we("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!qn(t.attributes)||t.attributes===null))throw new we("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function cse(t){if(!qn(t))throw new we('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new we("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new we("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!qn(t.attributes)||t.attributes===null))throw new we("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new we("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const use=fre(),dse=new Set(["directed","undirected","mixed"]),XM=new Set(["domain","_events","_eventsCount","_maxListeners"]),fse=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],hse={allowSelfLoops:!0,multi:!1,type:"mixed"};function pse(t,e,n){if(n&&!qn(n))throw new we(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Ue(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function JM(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function M$(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new Ue(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Ue(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!qn(a))throw new we(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new Ue(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new he(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new he(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Ue(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Ue(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new af(i,r,l,c,a);t._edges.set(r,d);const f=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,u.key=r,t.emit("edgeAdded",u),r}function mse(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new Ue(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Ue(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new we(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!qn(a))throw new we(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new Ue(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,p;if(!n&&(f=t._edges.get(r),f)){if((f.source.key!==s||f.target.key!==o)&&(!i||f.source.key!==o||f.target.key!==s))throw new Ue(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);p=f}if(!p&&!t.multi&&u&&(p=i?u.undirected[o]:u.out[o]),p){const w=[p.key,!1,!1,!1];if(l?!c:!a)return w;if(l){const x=p.attributes;p.attributes=c(x),t.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else _n(p.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:a});return w}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Ue(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,v=!1;u||(u=JM(t,s,{}),m=!0,s===o&&(d=u,v=!0)),d||(d=JM(t,o,{}),v=!0),f=new af(i,r,u,d,a),t._edges.set(r,f);const y=s===o;return i?(u.undirectedDegree++,d.undirectedDegree++,y&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,y&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),i?t._undirectedSize++:t._directedSize++,g.key=r,t.emit("edgeAdded",g),[r,!0,m,v]}function du(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class It extends tre.EventEmitter{constructor(e){if(super(),e=_n({},hse,e),typeof e.multi!="boolean")throw new we(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!dse.has(e.type))throw new we(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new we(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?k$:e.type==="directed"?_$:C$;Cr(this,"NodeDataClass",n);const i="geid_"+use()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};Cr(this,"_attributes",{}),Cr(this,"_nodes",new Map),Cr(this,"_edges",new Map),Cr(this,"_directedSize",0),Cr(this,"_undirectedSize",0),Cr(this,"_directedSelfLoopCount",0),Cr(this,"_undirectedSelfLoopCount",0),Cr(this,"_edgeKeyGenerator",s),Cr(this,"_options",e),XM.forEach(o=>Cr(this,o,this[o])),es(this,"order",()=>this._nodes.size),es(this,"size",()=>this._edges.size),es(this,"directedSize",()=>this._directedSize),es(this,"undirectedSize",()=>this._undirectedSize),es(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),es(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),es(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),es(this,"multi",this._options.multi),es(this,"type",this._options.type),es(this,"allowSelfLoops",this._options.allowSelfLoops),es(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new we(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new we(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new we(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Ue("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new he(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new he(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Ue("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new he(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new he(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new Ue("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new he(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new he(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new he(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new he(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return pse(this,e,n).key}mergeNode(e,n){if(n&&!qn(n))throw new we(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(_n(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new we(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do du(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do du(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do du(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=Hr(this,i,r,this.type),!n)throw new he(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new he(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return du(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Ue("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Ue("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=Hr(this,e,n,"directed");if(!i)throw new he(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return du(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Ue("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Ue("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=Hr(this,e,n,"undirected");if(!i)throw new he(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return du(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new we("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!qn(e))throw new we("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!qn(e))throw new we("Graph.mergeAttributes: provided attributes are not a plain object.");return _n(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new we("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new we("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!YM(n))throw new we("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new we("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!YM(n))throw new we("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new we("Graph.forEachAdjacencyEntry: expecting a callback.");Tg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new we("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Tg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new we("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Tg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new we("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Tg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):x$(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new we("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new we("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new we("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new we("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new we("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new we("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new we("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new we("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Xr(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=ose(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=ase(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof It)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,p,g)=>{n?g?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):g?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!qn(e))throw new we("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!qn(e.attributes))throw new we("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new we("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],lse(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new we("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],cse(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let p;"key"in a?(p=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,p.call(this,a.key,c,u,d)):(p=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,p.call(this,c,u,d))}}return this}nullCopy(e){const n=new It(_n({},this._options,e));return n.replaceAttributes(_n({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=_n({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Ue(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Ue("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Ue("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,M$(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,_n({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[f]>"u"?i[f]=0:i[f]++,l+=`${i[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!XM.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,Cr(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(It.prototype[Symbol.for("nodejs.util.inspect.custom")]=It.prototype.inspect);fse.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?M$:mse;t.generateKey?It.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:It.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});_re(It);jre(It);Jre(It);sse(It);class R$ extends It{constructor(e){const n=_n({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new we("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new we('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class SE extends It{constructor(e){const n=_n({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new we("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new we('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class T$ extends It{constructor(e){const n=_n({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new we("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class O$ extends It{constructor(e){const n=_n({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new we("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new we('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class I$ extends It{constructor(e){const n=_n({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new we("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new we('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function lf(t){t.from=function(e,n){const i=_n({},e.options,n),r=new t(i);return r.import(e),r}}lf(It);lf(R$);lf(SE);lf(T$);lf(O$);lf(I$);It.Graph=It;It.DirectedGraph=R$;It.UndirectedGraph=SE;It.MultiGraph=T$;It.MultiDirectedGraph=O$;It.MultiUndirectedGraph=I$;It.InvalidArgumentsGraphError=we;It.NotFoundGraphError=he;It.UsageGraphError=Ue;var gse=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},j$=Rb,vse=j$.ARRAY_BUFFER_SUPPORT,yse=j$.SYMBOL_SUPPORT,bse=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||vse&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(yse&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},D$=Mb,wse=bse;function bn(){this.clear()}bn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};bn.prototype.enqueue=function(t){return this.items.push(t),++this.size};bn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};bn.prototype.peek=function(){if(this.size)return this.items[this.offset]};bn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};bn.prototype.toArray=function(){return this.items.slice(this.offset)};bn.prototype.values=function(){var t=this.items,e=this.offset;return new D$(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};bn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new D$(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(bn.prototype[Symbol.iterator]=bn.prototype.values);bn.prototype.toString=function(){return this.toArray().join(",")};bn.prototype.toJSON=function(){return this.toArray()};bn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:bn,enumerable:!1}),t};typeof Symbol<"u"&&(bn.prototype[Symbol.for("nodejs.util.inspect.custom")]=bn.prototype.inspect);bn.from=function(t){var e=new bn;return wse(t,function(n){e.enqueue(n)}),e};bn.of=function(){return bn.from(arguments)};var xse=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},L$=gse,Sse=xse;function kse(t,e,n){if(!L$(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,p,g,m,v,y=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=r(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in s||(a.push(f),s[f]=u),f in o){y=!0;break e}}else for(c=l,l=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=i(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in o||(l.push(f),o[f]=u),f in s){y=!0;break e}if(!y)return null;for(var w=[];f;)w.unshift(f),f=s[f];for(f=o[w[w.length-1]];f;)w.push(f),f=o[f];return w.length?w:null}function $$(t,e,n){if(!L$(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!i.has(c)&&(i.add(c),Sse(u,e[t](c)),r[c]=s);s++,o=u}return r}$$.bind(null,"outboundNeighbors");$$.bind(null,"neighbors");var _se=kse;const H=new SE({allowSelfLoops:!1});H.addNode("MBR",{position:[620,250]});H.addNode("AL",{position:[455,45]});H.addNode("BL",{position:[455,85]});H.addNode("CL",{position:[455,125]});H.addNode("DL",{position:[455,165]});H.addNode("id",{position:[451,205]});H.addNode("SP",{position:[451,309]});H.addNode("IP",{position:[455,349]});H.addNode("ri",{position:[455,388]});H.addNode("MAR",{position:[698,349]});H.addNode("result",{position:[272,115]});H.addNode("NodoRegIn",{position:[390,115]});H.addNode("NodoRegOut",{position:[550,115]});H.addNode("FLAGS",{position:[250,225]});H.addNode("IR",{position:[250,275]});H.addNode("IR mbr join",{position:[250,250]});H.addNode("left",{position:[130,85]});H.addNode("right",{position:[125,145]});H.addNode("left end",{position:[220,85]});H.addNode("right end",{position:[220,145]});H.addNode("result start",{position:[280,115]});H.addNode("rmbr",{position:[250,390]});H.addNode("bleft1",{position:[550,16]});H.addNode("bleft2",{position:[90,16]});H.addNode("bleft3",{position:[90,85]});H.addNode("AL join",{position:[425,45]});H.addNode("BL join",{position:[425,85]});H.addNode("CL join",{position:[425,125]});H.addNode("DL join",{position:[425,165]});H.addNode("id join",{position:[250,205]});H.addNode("data mbr join",{position:[390,250]});H.addNode("SP join",{position:[390,309]});H.addNode("IP join",{position:[390,349]});H.addNode("ri join",{position:[390,388]});H.addNode("MAR join1",{position:[550,388]});H.addNode("MAR join2",{position:[550,349]});H.addNode("result mbr join",{position:[370,250]});H.addNode("FLAGS mbr join",{position:[155,250]});H.addNode("left join",{position:[30,85]});H.addNode("right join",{position:[90,145]});H.addNode("operands mbr join",{position:[90,250]});H.addNode("outr mbr join",{position:[550,250]});H.addNode("mbr reg join",{position:[390,250]});H.addNode("AL out",{position:[483,45]});H.addNode("BL out",{position:[483,85]});H.addNode("CL out",{position:[483,125]});H.addNode("DL out",{position:[483,165]});H.addNode("id out",{position:[441,205]});H.addNode("MBR out",{position:[630,250]});H.addNode("MBR out join",{position:[550,250]});H.addNode("SP out",{position:[510,309]});H.addNode("IP out",{position:[510,349]});H.addNode("IP out join",{position:[550,349]});H.addNode("ri out join",{position:[550,388]});H.addNode("SP out join",{position:[550,309]});H.addNode("AL out join",{position:[525,45]});H.addNode("BL out join",{position:[525,85]});H.addNode("CL out join",{position:[525,125]});H.addNode("DL out join",{position:[525,165]});H.addNode("id out join",{position:[521,205]});H.addUndirectedEdge("AL","AL out");H.addUndirectedEdge("BL","BL out");H.addUndirectedEdge("CL","CL out");H.addUndirectedEdge("DL","DL out");H.addUndirectedEdge("id","id out");H.addUndirectedEdge("IP","IP out");H.addUndirectedEdge("SP","SP out");H.addUndirectedEdge("AL out","AL out join");H.addUndirectedEdge("BL out","BL out join");H.addUndirectedEdge("CL out","CL out join");H.addUndirectedEdge("DL out","DL out join");H.addUndirectedEdge("id out","id out join");H.addUndirectedEdge("AL out join","NodoRegOut");H.addUndirectedEdge("BL out join","NodoRegOut");H.addUndirectedEdge("CL out join","NodoRegOut");H.addUndirectedEdge("DL out join","NodoRegOut");H.addUndirectedEdge("id out join","NodoRegOut");H.addUndirectedEdge("NodoRegOut","outr mbr join");H.addUndirectedEdge("NodoRegOut","bleft1");H.addUndirectedEdge("bleft1","bleft2");H.addUndirectedEdge("bleft2","bleft3");H.addUndirectedEdge("bleft3","left");H.addUndirectedEdge("left","left end");H.addUndirectedEdge("IP out join","outr mbr join");H.addUndirectedEdge("ri out join","outr mbr join");H.addUndirectedEdge("SP out join","outr mbr join");H.addUndirectedEdge("SP out join","MAR join2");H.addUndirectedEdge("outr mbr join","mbr reg join");H.addUndirectedEdge("MBR","outr mbr join");H.addUndirectedEdge("MBR","MBR out");H.addUndirectedEdge("MBR out","outr mbr join");H.addUndirectedEdge("mbr reg join","NodoRegIn");H.addUndirectedEdge("NodoRegIn","AL join");H.addUndirectedEdge("NodoRegIn","BL join");H.addUndirectedEdge("NodoRegIn","CL join");H.addUndirectedEdge("NodoRegIn","DL join");H.addUndirectedEdge("NodoRegIn","id join");H.addUndirectedEdge("outr mbr join","operands mbr join");H.addUndirectedEdge("AL join","AL");H.addUndirectedEdge("BL join","BL");H.addUndirectedEdge("CL join","CL");H.addUndirectedEdge("DL join","DL");H.addUndirectedEdge("MBR","data mbr join");H.addUndirectedEdge("data mbr join","NodoRegIn");H.addUndirectedEdge("IP","IP join");H.addUndirectedEdge("SP","SP join");H.addUndirectedEdge("ri","ri join");H.addUndirectedEdge("MAR join1","ri");H.addUndirectedEdge("MAR join2","MAR join1");H.addUndirectedEdge("MAR","MAR join2");H.addUndirectedEdge("IP join","SP join");H.addUndirectedEdge("SP join","ri join");H.addUndirectedEdge("result start","result");H.addUndirectedEdge("result","NodoRegIn");H.addUndirectedEdge("FLAGS","FLAGS mbr join");H.addUndirectedEdge("FLAGS mbr join","data mbr join");H.addUndirectedEdge("IR","IR mbr join");H.addUndirectedEdge("IR mbr join","FLAGS mbr join");H.addUndirectedEdge("left","left join");H.addUndirectedEdge("right","right join");H.addUndirectedEdge("left join","right join");H.addUndirectedEdge("right join","operands mbr join");H.addUndirectedEdge("right","right end");H.addNode("NodoRegOutLeft",{position:[550,90]});H.addUndirectedEdge("MBR out join","NodoRegOutLeft");H.addUndirectedEdge("NodoRegOutLeft","bleft1");H.addNode("NodoRegOutRight",{position:[550,140]});H.addUndirectedEdge("MBR out join","NodoRegOutRight");H.addUndirectedEdge("NodoRegOutRight","outr mbr join");H.addNode("NodoRegOutToRight",{position:[540,115]});H.addUndirectedEdge("NodoRegOut","NodoRegOutToRight");H.addUndirectedEdge("NodoRegOutToRight","outr mbr join");H.addNode("outr mbr join left",{position:[560,250]});H.addNode("NodoRegOutToLeft",{position:[560,115]});H.addUndirectedEdge("outr mbr join left","NodoRegOutToLeft");H.addUndirectedEdge("NodoRegOutToLeft","NodoRegOut");function Cse(t,e,n){const r=(a=>a.replace(/\.(l|h)$/,""))(t);if(!H.hasNode(r))return console.warn(`Nodo origen '${r}' no existe en el grafo`),"";const s=us(t,"left end",e,n,{separateMBRPaths:!0,direction:"left"}),o=us(t,"right end",e,n,{separateMBRPaths:!0,direction:"right"});return s&&o?`${s} ${o}`:s||o||""}function us(t,e,n,i,r){console.log("🔍 generateDataPath llamado con:",{from:t,to:e,instruction:n,mode:i,options:r});const s=f=>f.replace(/\.(l|h)$/,""),o=s(t),a=s(e),l=["AL","BL","CL","DL","id","SP","IP","ri","MAR","left","right","left end","right end"];let c=[];if(console.log("🔍 Evaluando condición ri → MAR:",{normalizedFrom:o,normalizedTo:a,mode:i,condition:o==="ri"&&a==="MAR"&&i==="mem<-imd"}),o==="ri"&&a==="MAR"&&i==="mem<-imd")return console.log("🎯 Usando ruta especial ri → MAR:","M 455 388 H 550 V 349 H 659"),"M 455 388 H 550 V 349 H 659";if(!H.hasNode(o))return console.warn(`Nodo origen '${o}' no existe en el grafo`),"";if(!H.hasNode(a))return console.warn(`Nodo destino '${a}' no existe en el grafo`),"";if(o==="MAR"||a==="MAR")return"";if(r!=null&&r.separateMBRPaths&&t==="MBR"&&(e==="left"||e==="right"))e==="left"?c=[o,`${o} out`,`${o} out join`,"outr mbr join left","NodoRegOutToLeft","NodoRegOut","bleft1","bleft2","bleft3","left","left end"]:e==="right"&&(c=[o,`${o} out`,`${o} out join`,"outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"]);else if(a==="left")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","bleft1","bleft2","bleft3","left","left end"];else if(a==="right")if(o==="MBR"){const f="MBR_down300";H.hasNode(f)||(H.addNode(f,{position:[620,300]}),H.addUndirectedEdge("MBR",f));const p="MBR_right125_300";H.hasNode(p)||(H.addNode(p,{position:[125,300]}),H.addUndirectedEdge(f,p)),c=["MBR",f,p,"right","right end"]}else c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"];else if(o==="BL"&&a==="ri")c=["BL","BL out","BL out join","NodoRegOut","outr mbr join","MAR join2","MAR"];else if(l.includes(o)&&l.includes(a))["SP","IP","ri"].includes(a)?c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegDir",`${a} join`,a]:c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a];else if(l.includes(o)&&a==="MBR")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","MBR"];else if(o==="MBR"&&a==="ri"){if(["JMP","JC","JZ"].includes(n??""))c=["MBR","mbr reg join","IP join","IP"];else if((n==="MOV"||n==="INT")&&i==="mem<-imd")c=["MBR","mbr reg join","ri join","ri"];else if(i==="mem<-imd"&&(n==="ADD"||n==="SUB"))c=["MBR","mbr reg join","ri join","ri"];else return"M 629 250 H 550 V 349 H 659";const f=H.getNodeAttribute(c[0],"position");let p=`M ${f[0]} ${f[1]}`;for(let g=1;g<c.length;g++){const[m,v]=H.getNodeAttribute(c[g],"position");p+=` L ${m} ${v}`}return p}else if(o==="MBR"&&a==="IR"){const f=H.getNodeAttribute("MBR","position"),p=H.getNodeAttribute("IR","position");return`M ${f[0]} ${f[1]} L ${p[0]} ${f[1]} L ${p[0]} ${p[1]}`}else try{c=_se(H,o,a)||[]}catch(f){return console.warn(`Error calculando ruta de ${o} a ${a}:`,f),""}if(o==="MBR"&&a==="IP"&&["JMP","JZ","JC"].includes(n??"")){const f=H.getNodeAttribute("MBR","position"),p=H.getNodeAttribute("mbr reg join","position"),g=H.getNodeAttribute("IP","position");return`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]} L ${p[0]} ${g[1]} L ${g[0]} ${g[1]}`}if(o==="ri"&&a==="IP")return"M 455 388 H 550 V 349 H 455";if(o==="ri"&&a==="IP"&&(c=["MBR","mbr reg join","NodoRegIn","IP join","IP"]),o==="ri"&&a==="IP"&&n==="CALL"&&(c=["ri","ri out join","NodoRegOut","outr mbr join","mbr reg join","NodoRegIn","IP join","IP"]),o==="MBR"&&a==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(o==="MBR"&&a==="ri"&&n==="CALL"&&(c=["MBR","mbr reg join","NodoRegIn","ri join","ri"]),o==="IP"&&a==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 250 H 620";if(c.length===0)return console.warn(`No se encontró ruta de ${o} a ${a}`),"";const u=H.getNodeAttribute(c[0],"position");let d=`M ${u[0]} ${u[1]}`;for(let f=1;f<c.length;f++){const[p,g]=H.getNodeAttribute(c[f],"position");d+=` L ${p} ${g}`}return console.log("🎯 generateDataPath retornando:",d),d}function Ese({showSP:t,showid:e,showri:n}){const{path:i,...r}=Ie("cpu.internalBus.data"),{path:s,...o}=Ie("cpu.internalBus.address"),a=tt(zn),l=(a==null?void 0:a.phase)==="writeback",c=()=>l?"stroke-purple-400 drop-shadow-[0_0_8px_rgba(168,85,247,0.6)]":"stroke-mantis-400 drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",u=()=>l?"stroke-purple-300":"stroke-mantis-300";return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-20",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 390","M 250 225 V 250","M 250 145 v 46","M 250 250 V 272","M 250 300 V 320","M 451 349 H 390 V 250",t?"M 451 309 H 390":"M 451 309",n?"M 455 388 H 390 V 300":"","M 455 45 H 425","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"",n?"M 550 388 H 480":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220","M 390 250 V 115","M 390 115 L 425 45 L 455 45","M 390 115 L 425 85 L 455 85","M 390 115 L 425 125 L 455 125","M 390 115 L 425 165 L 455 165","M 550 115 L 525 45 L 445 45","M 550 115 L 525 85 L 445 85","M 550 115 L 525 125 L 445 125","M 550 115 L 525 165 L 445 165",e?"M 550 115 L 521 205 L 441 205":""].join(" ")}),h.jsx("circle",{cx:390,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:250,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:390,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:348,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),n&&h.jsx("circle",{cx:390,cy:349,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx(Ge.path,{d:i,className:`fill-none stroke-[3px] ${c()}`,strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(Ge.path,{d:i,className:`fill-none stroke-1 opacity-50 ${u()}`,strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(Ge.path,{d:s,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o}),h.jsx(Ge.path,{d:s,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o})]})}console.log("🔧 generateDataPath importado:",typeof us);const F$=5;let ic=null,rc=null,Ar="fetching";const Ts=(t,e,n,i)=>{console.log("🎨 drawDataPath llamado con:",{from:t,to:e,instruction:n,mode:i});try{console.log("🔧 Antes de llamar generateDataPath"),console.log("🔧 generateDataPath es:",typeof us);const r=us(t,e,n,i);return console.log("🔧 Después de llamar generateDataPath"),console.log("🎯 Ruta generada en drawDataPath:",r),r?Be([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:F$,easing:"easeInOutSine"}):(console.log("❌ No hay ruta, retornando Promise.resolve()"),Promise.resolve())}catch(r){return console.error("❌ Error en drawDataPath:",r),console.error("❌ Stack trace:",r instanceof Error?r.stack:"No stack trace"),Promise.resolve()}},Ase=(t,e,n)=>{try{const i=Cse(t,e,n);return i?Be([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:F$,easing:"easeInOutSine"}):Promise.resolve()}catch(i){return console.warn("Error en drawSimultaneousLeftRightPath:",i),Promise.resolve()}},Ao=()=>Be({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"}),Nse=async(t,e,n)=>{console.log("🎯 Animación simultánea detectada: left y right desde",t),Ar!=="fetching-operands"&&(console.log("⏳ Esperando fase fetching-operands para animación simultánea..."),await new Promise(i=>{const r=()=>{Ar==="fetching-operands"?i():setTimeout(r,50)};r()}),console.log("✅ Fase fetching-operands alcanzada, procediendo con animación simultánea")),await Ase(t,e,n),await Promise.all([On("cpu.left"),On("cpu.right")]),R.set(Oe.left,R.get(Oe[t])),R.set(Oe.right,R.get(Oe[t])),await Promise.all([In("cpu.left"),In("cpu.right")]),ic=null,rc=null,await Ao()};let ut="",At="",Fx=null,dh=null,fh=null;const wo=t=>t.replace(/\.(l|h)$/,"");async function ZM(){await Promise.all([Hp("cpu.MBR"),Hp("cpu.IP"),new Promise(t=>{window.dispatchEvent(new CustomEvent("ip-register-update")),t()})])}async function Pse(){dh&&fh?(console.log("🎯 Ejecutando animaciones simultáneas para modo mem<-imd (MBR→ri + IP→MAR)"),await Promise.all([Ts("MBR","ri",dh.instruction,dh.mode),Be([{key:"cpu.internalBus.address.path",from:bk("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})]),R.set(Oe.ri,R.get(_c)),R.set(Uv,R.get(Oe.IP)),await Promise.all([On("cpu.ri"),On("cpu.MAR")]),await Promise.all([In("cpu.ri"),In("cpu.MAR")]),await Promise.all([Ao(),Be({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),dh=null,fh=null):fh&&(console.log("🎯 Ejecutando animación individual IP→MAR para modo mem<-imd"),await Be([{key:"cpu.internalBus.address.path",from:bk("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),R.set(Uv,R.get(Oe.IP)),await On("cpu.MAR"),await In("cpu.MAR"),await Be({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),fh=null)}async function QM(t){switch(console.log("🔍 CPU Event:",t.type,t),window.VONSIM_PARALLEL_ANIMATIONS&&t.type==="cpu:mar.set"&&window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-read-visual")),t.type){case"cpu:alu.execute":{console.log("🚀 Evento cpu:alu.execute recibido, fase actual:",Ar);const e={duration:3,easing:"easeInOutSine"};Ar!=="executing"?(console.log("⏳ Esperando fase executing para animación de la ALU..."),await new Promise(n=>{let i=0;const r=200,s=()=>{console.log("🔍 Verificando fase actual:",Ar),i++,Ar==="executing"?n():i>=r?(console.warn("⚠️ Timeout esperando fase executing, procediendo de todas formas"),n()):setTimeout(s,50)};s()}),console.log("✅ Fase executing alcanzada, procediendo con animación de la ALU")):console.log("✅ Ya estamos en fase executing, procediendo directamente"),await Promise.all([(async()=>{a$(),c$(),await Be([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),l$(),u$()})()]),R.set(UL,t.operation),console.log("⚙️ Iniciando animación del engranaje de la ALU..."),await Promise.all([Be({key:"cpu.alu.operation.backgroundColor",to:Yt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Be({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),console.log("✅ Animación del engranaje completada"),await Be({key:"cpu.alu.operation.backgroundColor",to:Yt.stone[800]},{duration:1,easing:"easeOutQuart"}),console.log("� Iniciando animación del bus de resultado..."),await Be([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e),await Promise.all([On("cpu.result"),On("cpu.FLAGS")]),R.set(Oe.FLAGS,t.flags),R.set(Oe.result,t.result),await Promise.all([In("cpu.result"),In("cpu.FLAGS")]),console.log("💜 Mostrando texto del resultado después de actualizar FLAGS..."),s$(),await new Promise(n=>setTimeout(n,1e3)),await Promise.all([Be({key:"cpu.alu.results.opacity",to:0},{duration:1,easing:"easeInSine"}),(async()=>{o$()})()]),await Be({key:"cpu.alu.operands.opacity",to:0},{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":{ic=null,rc=null,Ar="fetching";return}case"cpu:cycle.interrupt":{R.set(zn,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await Be([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{ut=t.instruction.name,At=t.instruction.willUse.ri?"mem<-imd":"",console.log("[cpu:cycle.start] instructionName:",ut,"willUse.ri:",t.instruction.willUse.ri,"mode:",At,"position:",t.instruction.position),t.instruction.willUse.ri,t.instruction.willUse.ri,ic=null,rc=null,Ar="fetching",v6(t.instruction.position.start),R.set(zn,{phase:"fetching",metadata:t.instruction}),await Be([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{const e=t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":t.next==="halting"?"halting":"fetching";Ar=e,console.log("🔄 Fase del ciclo actualizada:",Ar),R.set(zn,n=>"metadata"in n?{...n,phase:e}:n);return}case"cpu:decode":{await Be([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Be([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Be([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{R.set(zn,{phase:"stopped",error:t.error}),Gc(t.error);return}case"cpu:halt":case"cpu:int.0":{if(t.type==="cpu:halt"){const e=R.get(zn);"metadata"in e&&(R.set(zn,{phase:"halting",metadata:e.metadata}),await new Promise(n=>setTimeout(n,1e3)))}R.set(zn,{phase:"stopped"}),Gc();return}case"cpu:int.6":{R.set(zn,{phase:"int6"});return}case"cpu:int.7":{R.set(zn,{phase:"int7"});return}case"cpu:inta.off":{await Kn("bus.inta");return}case"cpu:inta.on":{await xi("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-write-visual")),await xi(`bus.${e}`,10);return}case"cpu:iom.on":{await xi("bus.iom",15);return}case"cpu:mar.set":{const e=wo(t.register),n=e==="MBR",i=n?"M 629 250 H 550 V 349 H 659":bk(e);if(console.log("[cpu:mar.set] event.register:",t.register,"| Animación especial:",n,"| regNorm:",e,"| mode:",At,"| instructionName:",ut),e==="IP"&&At==="mem<-imd"||(await Be([{key:"cpu.internalBus.address.path",from:i},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await On("cpu.MAR",Yt.blue[500]),R.set(Uv,R.get(Oe[e]))),e==="ri"){if(console.log("[cpu:mar.set] ri detectado, mode:",At,"instructionName:",ut),At==="mem<-imd"){console.log("✅ Animando bus especial: ri → MAR (modo mem<-imd)",{instructionName:ut,mode:At}),console.log("🔧 Llamando drawDataPath con:",{from:"ri",to:"MAR",instructionName:ut,mode:At});const r=await Ts("ri","MAR",ut,At);console.log("🎯 Ruta generada para ri → MAR:",r),await Ao()}else console.log("❌ No es modo mem<-imd, usando lógica alternativa"),await Ts(wo(Fx||"BL"),"MAR",ut,At),await Ao();Fx=null}else e==="IP"&&At==="mem<-imd"?(fh={instruction:ut,mode:At},console.log("📝 Marcando animación IP → MAR como pendiente para modo mem<-imd"),await Pse()):n||(await Ts(e,"MAR",ut,At),await Ao());e==="IP"&&At==="mem<-imd"||await Promise.all([In("cpu.MAR"),Be({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const e=wo(t.register);e==="IP"&&(window.__nextTransferMBRtoIP=!0);const i=["ADD","SUB","AND","OR","XOR","CMP"].some(s=>ut.startsWith(s));let r=!1;if((e==="MAR"||e.startsWith("MAR."))&&!["ADD","SUB","CMP"].some(a=>ut.startsWith(a))){const a=R.get(Oe.IP),l=R.get(_c);a===l&&(r=!0)}if(e==="IR")await Ts("MBR","IR",ut,At);else if((e==="MAR"||e.startsWith("MAR."))&&!r)console.log("Animando bus de datos: MBR → MAR",{instructionName:ut,mode:At}),await Ts("MBR","MAR",ut,At);else if(["AL","BL","CL","DL","ri"].includes(e)){const o=["ADD","SUB","CMP"].some(a=>ut.startsWith(a));e==="ri"&&At==="mem<-imd"?(dh={instruction:ut,mode:At},console.log("📝 Marcando animación MBR → ri como pendiente para modo mem<-imd")):(!i||o)&&await Ts("MBR",e,ut,At)}if(e==="ri"&&At==="mem<-imd"||R.set(Oe[t.register],R.get(_c)),e==="IR"?await Hp(`cpu.${e}`):e==="IP"||e==="ri"&&At==="mem<-imd"||(await On(`cpu.${e}`),await In(`cpu.${e}`)),e==="ri"&&At==="mem<-imd"||await Ao(),Ar==="fetching-operands"&&e!=="IR"){const s=ut&&(ut==="MOV"||ut==="ADD"||ut==="SUB"||ut==="CMP"||ut==="AND"||ut==="OR"||ut==="XOR");(s&&e==="MBR"||!s&&e!=="MBR")&&(Ar="fetching-operands-completed",console.log("✅ Fase 'fetch-operands' completada al escribir en",e),R.set(zn,a=>"metadata"in a?{...a,phase:"fetching-operands-completed"}:a))}return}case"cpu:mbr.set":{if(wo(t.register)==="IP")await ZM();else{const n=t.register.replace(/\.(l|h)$/,"");await Ts(n,"MBR",ut,At),R.set(_c,R.get(Oe[t.register])),await Ao()}return}case"cpu:register.copy":{const e=wo(t.src),n=wo(t.dest);if(n==="left"||n==="right"){const i={from:e,instruction:ut,mode:At};if(n==="left"?ic=i:n==="right"&&(rc=i),ic&&rc&&ic.from===rc.from&&ic.instruction===rc.instruction){await Nse(e,ut,At);return}n==="left"?R.set(Oe.left,R.get(Oe[e])):R.set(Oe.right,R.get(Oe[e]));return}e==="ri"&&n==="IP"||await Ts(e,n,ut,At),await On(`cpu.${n}`),R.set(Oe[n],R.get(Oe[e])),await In(`cpu.${n}`),await Ao();return}case"cpu:register.update":{const[e]=w2(t.register),n=wo(e);n==="IP"||n==="MBR"?await ZM():await Hp(n==="ri"?"cpu.ri":`cpu.${n}`),R.set(Oe[n],t.value);return}case"cpu:register.buscopy":{const e=wo(t.src),n=wo(t.dest);n==="ri"&&(Fx=e),e==="ri"&&n.toLowerCase()==="mar"||e==="ri"&&n==="IP"||(await Ts(e,n,ut,At),await new Promise(i=>setTimeout(i,150))),R.set(Oe[n],R.get(Oe[e])),await On(`cpu.${n}`),await In(`cpu.${n}`),n!=="ri"&&await Ao();return}default:return t}}async function Mse(t){switch(t.type){case"f10:press":await xi("bus.int0",2),await Kn("bus.int0");return;default:return t.type}}const kE=de(z.zero(8)),_E=de(z.zero(8));function Rse(t){t.io.handshake&&(R.set(kE,z.fromUnsigned(t.io.handshake.DATA,8)),R.set(_E,z.fromUnsigned(t.io.handshake.STATE,8)))}async function Tse(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await Gd(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await On(`handshake.${t.register}`),t.register){case"DATA":{R.set(kE,t.value);break}case"STATE":{R.set(_E,t.value);break}default:return t.register}await In(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await Kn("bus.int2");return}case"handshake:int.on":{await xi("bus.int2",10);return}default:return t}}async function Ose(t){switch(t.type){case"keyboard:listen-key":{R.set(tn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{R.sub(tn,()=>{const n=R.get(tn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const CE=de(z.zero(8));function Ise(t){t.io.leds!==null&&R.set(CE,z.fromUnsigned(t.io.leds,8))}async function jse(t){switch(t.type){case"leds:update":{await xi("bus.pio->leds",2),R.set(CE,t.state),await Kn("bus.pio->leds");return}default:return t.type}}const sy=de(!1),oy=de(!1);function Dse(t){return t==="memory-to-mbr"?"M 800 249 L 629 249":"M 629 249 L 800 249"}const Cc=5,eR=(t,e=Cc)=>{try{const n=Dse(t);return n?Be([{key:"bus.data.path",from:n},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:e,easing:"easeInOutSine"}):Promise.resolve()}catch(n){return console.warn("Error en drawExternalDataPath:",n),Promise.resolve()}},tR=()=>Be({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function Lse(){return"M 610 349 H 800"}const Bx=(t=Cc)=>{try{const e=Lse();return Be([{key:"bus.address.path",from:e},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:t,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawExternalAddressPath:",e),Promise.resolve()}},zx=()=>Be({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),nR=(t=Cc)=>{try{return Be([{key:"bus.rd.path",from:"M 380 420 H 800"},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:t,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawRDControlPath:",e),Promise.resolve()}},$se=()=>{try{return Be([{key:"bus.wr.path",from:"M 380 440 H 800"},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:Cc,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawWRControlPath:",t),Promise.resolve()}},iR=()=>Be({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),rR=()=>Be({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function sR(t){switch(typeof window<"u"&&window.VONSIM_PARALLEL_ANIMATIONS&&window.addEventListener("vonsim:parallel-memory-read-visual",()=>{R.set(sy,!0),Be([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{Be([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),Promise.all([Bx(),(async()=>{pk(),await nR(),mk()})()])}),t.type){case"memory:read":{if(!window.VONSIM_PARALLEL_ANIMATIONS){R.set(sy,!0),Be([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{Be([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})});const e=Cc;await Promise.all([Bx(e),(async()=>{pk(),await nR(e),mk()})()]),await zx()}return}case"memory:read.ok":{R.set(_p,ke.from(t.address)),await Be({key:"memory.operating-cell.color",to:Yt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await eR("memory-to-mbr",Cc),R.set(_c,t.value),await Promise.all([Be({key:"memory.operating-cell.color",to:Yt.white},{duration:1,easing:"easeOutQuart"}),tR(),zx(),iR(),rR()]);return}case"memory:write":{R.set(oy,!0),i$();const e=Cc;await Promise.all([Bx(e),$se()]),r$(),R.set(oy,!1);return}case"memory:write.ok":{R.set(_p,ke.from(t.address)),await On("cpu.MBR"),await eR("mbr-to-memory"),await Be({key:"memory.operating-cell.color",to:Yt.mantis[400]},{duration:1,easing:"easeOutQuart"}),R.set(Vv,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([In("cpu.MBR"),Be({key:"memory.operating-cell.color",to:Yt.white},{duration:1,easing:"easeOutQuart"}),tR(),zx(),iR(),rR()]);return}case"memory:read.error":case"memory:write.error":{Gc(t.error);return}case"memory:write.warning":{eoe("Advertencia de Memoria",`${t.warning}`);return}default:return t}}const EE=de(z.fromUnsigned(255,8)),AE=de(z.fromUnsigned(0,8)),NE=de(z.fromUnsigned(0,8)),ay=[de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8))];function Fse(t){if(t.io.pic){R.set(EE,z.fromUnsigned(t.io.pic.IMR,8)),R.set(AE,z.fromUnsigned(t.io.pic.IRR,8)),R.set(NE,z.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<ay.length;e++)R.set(ay[e],z.fromUnsigned(t.io.pic.lines[e],8))}}async function Bse(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await Gd(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await On(`pic.${t.register}`),t.register){case"IMR":{R.set(EE,t.value);break}case"IRR":{R.set(AE,t.value);break}case"ISR":{R.set(NE,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));R.set(ay[e],t.value);break}default:return t}await In(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await Kn("bus.intr");return}case"pic:intr.on":{await xi("bus.intr",10);return}case"pic:int.send":{await Gd(t.number);return}default:return t}}const PE=de(z.zero(8)),ME=de(z.zero(8)),RE=de(z.zero(8)),TE=de(z.zero(8));function zse(t){t.io.pio&&(R.set(PE,z.fromUnsigned(t.io.pio.PA,8)),R.set(ME,z.fromUnsigned(t.io.pio.PB,8)),R.set(RE,z.fromUnsigned(t.io.pio.CA,8)),R.set(TE,z.fromUnsigned(t.io.pio.CB,8)))}async function Use(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await Gd(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await On(`pio.${t.register}`),t.register){case"PA":{R.set(PE,t.value);break}case"PB":{R.set(ME,t.value);break}case"CA":{R.set(RE,t.value);break}case"CB":{R.set(TE,t.value);break}default:return t.register}await In(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const ly=de([]),cy=de("");function Vse(t){t.io.printer&&(R.set(ly,t.io.printer.buffer.map(e=>z.fromUnsigned(e,8))),R.set(cy,t.io.printer.paper))}async function Hse(t){switch(t.type){case"printer:buffer.add":{R.set(ly,e=>[...e,t.char]);return}case"printer:buffer.pop":{R.set(ly,e=>e.slice(1));return}case"printer:busy.off":{await Kn("bus.printer.busy");return}case"printer:busy.on":{await xi("bus.printer.busy",15);return}case"printer:data.read":{await xi("bus.printer.data",15),await Kn("bus.printer.data");return}case"printer:paper.print":{R.set(cy,e=>e+t.char);return}case"printer:paper.replace":{R.set(cy,"");return}case"printer:strobe.off":{await Kn("bus.printer.strobe");return}case"printer:strobe.on":{await xi("bus.printer.strobe",15);return}default:return t}}const OE=de("");function Wse(t){"screen"in t.io&&t.io.screen!==null&&R.set(OE,t.io.screen)}async function Gse(t){switch(t.type){case"screen:send-char":{R.set(OE,t.output);return}default:return t.type}}const Ob=de(z.zero(8));function Kse(t){t.io.switches!==null&&R.set(Ob,z.fromUnsigned(t.io.switches,8))}async function qse(t){switch(t.type){case"switches:toggle":{R.set(Ob,e=>e.withBit(t.index,!e.bit(t.index))),await xi("bus.switches->pio",2),await Kn("bus.switches->pio");return}default:return t}}const uy=de(z.zero(8)),IE=de(z.zero(8));function Yse(t){t.io.timer&&(R.set(uy,z.fromUnsigned(t.io.timer.CONT,8)),R.set(IE,z.fromUnsigned(t.io.timer.COMP,8)))}async function Xse(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await Gd(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await On(`timer.${t.register}`),t.register){case"CONT":{R.set(uy,t.value);break}case"COMP":{R.set(IE,t.value);break}default:return t.register}await In(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await Kn("bus.int1");return}case"timer:int.on":{await xi("bus.int1",10);return}case"timer:tick":{R.set(uy,t.cont),await xi("bus.int1",2),await Kn("bus.int1");return}default:return t}}const wk=new Set;async function Ux(t){R.get(yc).canAnimate||await new Promise(n=>{const i=R.sub(yc,()=>{R.get(yc).canAnimate&&(i(),n())})}),await t()}async function B$(t){Zse(t);const[e]=t.type.split(":",2);wk.add(t.type);const i=["cpu:mar.set","cpu:register.update","cpu:mbr.get","cpu:mbr.set","cpu:register.buscopy","cpu:register.copy","memory:read","memory:write"].includes(t.type);try{switch(e){case"bus":{i?await Ux(()=>GM(t)):await GM(t);break}case"clock":{await Kie(t);break}case"cpu":{i?await Ux(()=>QM(t)):await QM(t);break}case"f10":{await Mse(t);break}case"handshake":{await Tse(t);break}case"keyboard":{await Ose(t);break}case"leds":{await jse(t);break}case"memory":{i?await Ux(()=>sR(t)):await sR(t);break}case"pic":{await Bse(t);break}case"pio":{await Use(t);break}case"printer":{await Hse(t);break}case"screen":{await Gse(t);break}case"switches":{await qse(t);break}case"timer":{await Xse(t);break}default:return e}}finally{wk.delete(t.type)}}function oR(...t){for(const e of t)if(wk.has(e))return!0;return!1}const Jse={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function Zse(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${Jse[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof z?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof ke?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof xr?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const pn=new gQ,tn=de({type:"stopped"});let Wc=null;try{window.VonSimAddNotification&&(Wc=window.VonSimAddNotification)}catch{}function jE(t,e=10){window.VonSimAddNotification?window.VonSimAddNotification(t):e>0&&setTimeout(()=>jE(t,e-1),100)}function Qse(t){const e=t.translate(Tn().language);Di({title:e,variant:"error"}),Wc?Wc({type:"error",title:"Error de simulación",message:e}):jE({type:"error",title:"Error de simulación",message:e})}function eoe(t,e){Di({title:t,description:e,variant:"info"}),Wc&&Wc({type:"warning",title:t,message:e})}function Gc(t){if(t&&(Qse(t),t.code==="no-instruction")){R.set(tn,{type:"paused"});return}yne(),v6(null),pne(!1),R.set(tn,{type:"stopped",error:t}),R.set(zn,{phase:"stopped",error:t}),gE()}function Fn(){R.set(tn,{type:"paused"}),e$()}function toe(){const t=db(Tn().language,"messages.assemble-error");Di({title:t,variant:"error"}),Wc?Wc({type:"error",title:"Error de ensamblado",message:t}):jE({type:"error",title:"Error de ensamblado",message:t})}function fu(){Di({title:db(Tn().language,"messages.invalid-action"),variant:"error"})}function aR(t,e=!1){bQ(t,e),SQ(t,e),Rse(t),Fse(t),zse(t),Yse(t),Ise(t),Vse(t),Wse(t),Kse(t),Wt=0,Ec=0,R.set(kp,Wt),R.set(mb,Ec),R.set(xt,""),e&&R.set(ac,[])}let ce=null,xo=0,ot=0,So="",hu=!0,Os=!1,Mi=!1,Xl=[],Wt=0,bt=0,Ec=0,Jl="",lR="",cR="",$f=!1,Og=!1,Ig="",z$="";function noe(t){return t.modeId&&t.modeRi?"directo-inmediato":t.modeId?"inmediato":t.modeRi?"directo":"registro"}function jg(t){if(t.length!==2)return!1;const[e,n]=t,i=/^[ABCD][LH]$/.test(e)||/^[ABCD]X$/.test(e),r=n.startsWith("[")&&n.endsWith("]");return i&&r}function ioe(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return n==="MOV"&&i&&r?roe(t,s):n==="MOV"&&r&&!i?soe(t,s):n==="MOV"&&i&&!r?ooe(t):n==="INT"?aoe(t,s,r):n==="CALL"?loe(t):["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function roe(t,e){switch(e){case 2:return{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0};case 4:return{message:"Ejecución: ri ← MBR; MAR ← IP",shouldDisplay:!0,shouldPause:!0};default:return{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}}function soe(t,e){return e===2?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:e===4&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function ooe(t){return t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:t==="IP"?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function aoe(t,e,n){return e===2&&n?{message:"Ejecución: ri ← MBR; MAR ← SP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function loe(t){return{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function coe(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return t==="SP"?uoe(n,s,r):t==="FLAGS"?doe(n,s,r):n==="INT"?foe(t):n==="MOV"&&i&&r?hoe():n==="MOV"&&r&&!i?poe():n==="CALL"?moe(t):t==="IP"&&r&&!i&&s===3?{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function uoe(t,e,n){if(n&&e===4&&t==="INT")return{message:"",shouldDisplay:!1,shouldPause:!1};switch(t){case"PUSH":return{message:"Ejecución: SP = SP - 1",shouldDisplay:!0,shouldPause:!0};case"RET":case"IRET":return{message:"Ejecución: SP = SP + 1",shouldDisplay:!0,shouldPause:!0};case"POP":if(e===3)return{message:`${z$}; SP = SP + 1`,shouldDisplay:!0,shouldPause:!0};break}return{message:"",shouldDisplay:!1,shouldPause:!1}}function doe(t,e,n){return n&&e===5&&t==="INT"?{message:"Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1; IF = 0",shouldDisplay:!0,shouldPause:!0}:{message:"Ejecución: IF = 0",shouldDisplay:!0,shouldPause:!0}}function foe(t){switch(t){case"DL":return{message:"Interrupción: AL ← ASCII",shouldDisplay:!0,shouldPause:!0};case"right.l":return{message:"Interrupción: SUB AL, 1",shouldDisplay:!0,shouldPause:!0};case"right":return{message:"Interrupción: ADD BL, 1",shouldDisplay:!0,shouldPause:!0};case"ri.l":return{message:"Interrupción: MAR ← (video)",shouldDisplay:!1,shouldPause:!0}}return{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function hoe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function poe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function moe(t){return{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function uR(){return{name:ce||"",modeId:Os,modeRi:Mi,executeStage:ot,cycleCount:bt}}function dR(t,e,n,i){const r=noe(n);console.log(`🔍 [${t}] Registro: ${e}`),console.log(`   Instrucción: ${n.name}`),console.log(`   Modo de direccionamiento: ${r}`),console.log(`   Etapa de ejecución: ${n.executeStage}`),console.log(`   Ciclo: ${n.cycleCount}`),console.log(`   Mensaje: ${i.message}`),console.log(`   Mostrar: ${i.shouldDisplay}`),console.log(`   Pausar: ${i.shouldPause}`),console.log("---")}function fR(t){return t.name?t.executeStage<0?(console.warn("⚠️ Etapa de ejecución inválida:",t.executeStage),!1):!0:(console.warn("⚠️ Contexto de instrucción sin nombre"),!1)}async function uc(t){try{for(;;){const e=R.get(tn);if(R.get(Zv)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),R.set(Zv,!1),Gc();break}if(e.type==="stopped"){xo=0,ot=0,So="";break}if(e.type==="paused"){await new Promise(s=>{const o=R.sub(tn,()=>{o(),s()})});continue}const i=t.next();if(i.done)break;if(i.value&&typeof i.value<"u")await B$(i.value);else continue;if(i.value.type==="cpu:cycle.start"&&(ce=i.value.instruction.name,Os=!!i.value.instruction.willUse.id,Mi=!!i.value.instruction.willUse.ri,Xl=i.value.instruction.operands,R.set(yQ,Mi),bt=0,R.set(Mn,bt),console.log("🔄 Nueva instrucción iniciada:",ce,"- Contador reiniciado a 0"),console.log("🔍 Detalles de la instrucción:","willUse.id:",i.value.instruction.willUse.id,"willUse.ri:",i.value.instruction.willUse.ri,"modeId:",Os,"modeRi:",Mi),console.log("🔍 Instrucción completa:",JSON.stringify(i.value.instruction,null,2)),$f=!1,Og=!1,Ig=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"||i.value.type==="cpu:halt"){xo=0,ot=0,hu=!0,So="",Ec++,console.log(`Instrucciones: ${Ec}`),R.set(mb,Ec),i.value.type==="cpu:halt"?(Wt++,R.set(kp,Wt),R.set(xt,"Ejecución: Detenido")):(e.until==="cycle-change"||e.until==="end-of-instruction")&&Fn();continue}else i.value.type==="cpu:int.6"?R.set(xt,"Interrupción: Rutina leer caracter del teclado"):i.value.type==="cpu:int.7"&&(R.set(xt,"Interrupción: Rutina mostrar por pantalla"),e.until==="cycle-change"&&Fn());if(xo<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(xo=3,ot=3,R.set(xt,"Ejecución: MAR ← SP")):(R.set(xt,"Captación: MAR ← IP"),Wt++,bt++,R.set(Mn,bt),ot++),e.until==="cycle-change"&&Fn(),xo++):i.value.type==="cpu:register.update"?(console.log("🔍 Debug: Captación register.update - fetchStageCounter:",xo,"executeStageCounter:",ot),R.set(xt,"Captación: MBR ← read(Memoria[MAR]); IP ← IP + 1"),Wt++,bt++,R.set(Mn,bt),e.until==="cycle-change"&&Fn(),ot++,xo++):i.value.type==="cpu:mbr.get"&&(R.set(xt,"Captación: IR ← MBR"),Wt++,bt++,R.set(Mn,bt),e.until==="cycle-change"&&Fn(),xo++);else if(i.value.type==="cpu:rd.on"&&ot>1?So="Ejecución: MBR ← read(Memoria[MAR])":i.value.type==="cpu:wr.on"?(So="Ejecución: write(Memoria[MAR]) ← MBR",ce==="MOV"&&!jg(Xl)&&(console.log("🔍 MOV Debug - Escritura en memoria detectada"),console.log("🔍 MOV Debug - Operandos:",Xl),console.log("🔍 MOV Debug - Es lectura:",jg(Xl)))):i.value.type==="pio:write.ok"&&(R.set(xt,"Ejecución: write(PIO[MAR]) ← MBR"),Wt++,bt++,R.set(Mn,bt),ot++),i.value.type==="cpu:mar.set"){const s=i.value.register;console.log("executeStageCounter:",ot),console.log("mbridirmar:",$f),console.log("resultmbrimar:",Og),console.log("displayMessageresultmbr:",Ig),console.log("shouldDisplayMessage:",hu);const o=ce==="MOV"&&s==="ri"&&ot===3&&!Os&&!Mi,a=uR();if(fR(a)){const l=ioe(s,a);dR("MAR.set",s,a,l),Og?R.set(xt,Ig):$f?ce==="MOV"&&Mi&&Os?R.set(xt,"Ejecución: MAR ← IP; MBR→MBR"):R.set(xt,"Ejecución: id ← MBR; MAR ← IP"):s==="ri"&&ce==="MOV"&&ot===4?R.set(xt,"Ejecución: MAR ← MBR"):(hu||s==="SP"||Os&&s==="IP"||l.shouldDisplay)&&(o||R.set(xt,l.message))}o||(Wt++,bt++,R.set(Mn,bt)),e.until==="cycle-change"&&Fn(),ot++}else if(i.value.type==="cpu:register.update"){const s=i.value.register;console.log("🔍 Debug register.update - fetchStageCounter:",xo,"executeStageCounter:",ot),console.log("🔍 Debug register.update - currentInstructionModeri:",Mi,"currentInstructionModeid:",Os);const o=uR();if(fR(o)){const a=coe(s,o);dR("register.update",s,o,a);let l=a.message;hu=a.shouldDisplay;const c=a.shouldPause;Mi&&ot===8&&ce==="INT"&&(l="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),ot===2&&ce==="CALL"&&(l="Ejecución: ri ← MBR; SP ← SP - 1"),ot===4&&ce==="CALL"&&(l="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),ot===3&&s==="IP"&&(ce==="MOV"||ce==="ADD"||ce==="SUB"||ce==="CMP"||ce==="AND"||ce==="OR"||ce==="XOR")&&(l="Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1"),console.log("displayMessage:",l),console.log("currentInstructionName:",ce),console.log("currentInstructionModeri:",Mi),console.log("executeStageCounter:",ot),console.log("pause:",c),ce!=="DEC"&&ce!=="INC"&&ce!=="NOT"&&ce!=="NEG"&&!(ce==="INT"&&ot===5)&&(R.set(xt,l),Wt++,bt++,R.set(Mn,bt)),ot++,l!=="Interrupción: MAR ← (video)"&&e.until==="cycle-change"&&ce!=="DEC"&&ce!=="INC"&&ce!=="NOT"&&ce!=="NEG"&&c&&Fn()}}else if(i.value.type==="cpu:alu.execute")ce==="CMP"&&(R.set(xt,`Ejecución: ${lR} ${ce} ${Jl} ; write(FLAGS)`),Wt++,bt++,R.set(Mn,bt),e.until==="cycle-change"&&Fn());else if(i.value.type==="cpu:mbr.get"){const s=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="ri.l"?"MBR":i.value.register;if((String(s)==="right.l"||String(s)==="left.l")&&(Jl="MBR"),(Mi&&ot===3&&(ce==="ADD"||ce==="SUB"||ce==="CMP")||ot===3&&(ce==="ADD"||ce==="SUB"||ce==="CMP")||ot===3&&ce==="POP"||Mi&&Os&&ot===4&&ce==="MOV")&&($f=!0),ce==="POP"&&ot===3&&(z$=`Ejecución: ${s} ← MBR`),!$f&&String(s)!=="MBR"&&String(s)!=="right.l"&&String(s)!=="left.l"){R.set(xt,`Ejecución: ${s} ← MBR`),Wt++,bt++,R.set(Mn,bt);const o=ce==="MOV"&&(s==="AL"||s==="AH"||s==="BL"||s==="BH"||s==="CL"||s==="CH"||s==="DL"||s==="DH");e.until==="cycle-change"&&!o&&Fn()}}else if(i.value.type==="cpu:register.buscopy"){console.log("📋 Evento cpu:register.buscopy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");if(ce==="MOV"){const a=`Ejecución: ${o} ← ${s}`;R.set(xt,a),Wt++,bt++,R.set(Mn,bt),console.log("✅ Ciclo contabilizado para MOV register.buscopy - cycleCount:",Wt,"currentInstructionCycleCount:",bt)}}else if(i.value.type==="cpu:register.copy"){console.log("📋 Evento cpu:register.copy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");let a="";ce==="DEC"||ce==="INC"||ce==="NOT"||ce==="NEG"?a=s==="result"?`${ce} ${Jl}`:s:(a=s==="result"?`${o} ${ce} ${Jl}`:s==="ri"?"MBR":s,cR=`${s} ${ce} ${Jl}; write(FLAGS)`),ce==="CMP"&&String(o)==="right"&&(Jl=s),ce==="CMP"&&String(o)==="left"&&(lR=s);let l=`Ejecución: ${o==="ri"?"MAR":o} ← ${a}`;(ce==="ADD"||ce==="SUB"||ce==="CMP")&&(l+="; write(FLAGS)"),s==="ri"&&o==="IP"?(l="Ejecución: IP ← MBR",ce==="CALL"&&(l="Ejecución: IP ← MBR"),R.set(xt,l),e.until==="cycle-change"&&Fn()):o==="left"&&ce==="INT"?l="ADD BL, 1":s==="result"&&ce==="INT"?e.until==="cycle-change"&&Fn():s==="IP"&&o==="id"?(l="Ejecución: id ← IP",R.set(xt,l),e.until==="cycle-change"&&Fn()):s==="id"&&o==="ri"?(l="Ejecución: MAR ← id",hu=!1,R.set(xt,l)):s==="MBR"&&o==="ri"?(l="Ejecución: MAR ← MBR",R.set(xt,l)):s==="id"&&o==="IP"?(l="Ejecución: IP ← MBR",R.set(xt,l),e.until==="cycle-change"&&Fn()):s==="BL"&&o==="ri"||s==="BX"&&o==="ri"?(l="Ejecución: MAR ← BL",R.set(xt,l),hu=!1,ot++):String(s)==="right.l"&&(Jl=s),console.log("cpu:register.copy - sourceRegister:",s,"destRegister:",o,"currentInstructionName:",ce),ce==="MOV"?(R.set(xt,l),Wt++,bt++,R.set(Mn,bt),console.log("✅ Ciclo contabilizado para MOV register.copy - cycleCount:",Wt,"currentInstructionCycleCount:",bt)):o!=="result"&&o!=="left"&&o!=="right"&&s!=="result"&&s!=="left"&&s!=="right"||s==="result"&&o!=="MBR"?(R.set(xt,l),Wt++,bt++,R.set(Mn,bt),console.log("✅ Ciclo contabilizado para register.copy - cycleCount:",Wt,"currentInstructionCycleCount:",bt)):console.log("❌ Ciclo NO contabilizado para register.copy - condición no cumplida")}else if(i.value.type==="bus:reset"&&ot>1&&(ce==="MOV"||ce==="ADD"||ce==="SUB"||ce==="CMP"||ce==="AND"||ce==="OR"||ce==="XOR"||ce==="CALL"||ce==="INT"||ce==="PUSH"||ce==="POP"||ce==="IN"||ce==="RET")){ce==="RET"&&(So="Ejecución: MBR ← read(Memoria[MAR])"),ce==="IN"&&(So="Ejecución: MBR ← read(PIO[MAR])"),ce==="MOV"&&ot===5&&(console.log("🔍 MOV Debug - Operandos:",Xl),console.log("🔍 MOV Debug - Es lectura:",jg(Xl)),jg(Xl)?So="Ejecución: MBR ← read(Memoria[MAR])":So="Ejecución: write(Memoria[MAR]) ← MBR");let s=!1;(Mi&&(ot===4||ot===8)&&ce==="INT"||ot===3&&ce==="MOV"||Os&&ot===4&&(ce==="CALL"||ce==="ADD"||ce==="SUB"||ce==="CMP")||ot===3&&(ce==="ADD"||ce==="SUB"||ce==="CMP"||ce==="AND"||ce==="OR"||ce==="XOR"))&&(s=!0),console.log("ContinuarSinGuarda:",s),console.log("executeStageCounter:",ot),s||(R.set(xt,So),Wt++,bt++,R.set(Mn,bt),e.until==="cycle-change"&&Fn())}else if(i.value.type==="cpu:mbr.set"){const s=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register==="result.l"?cR:i.value.register;Mi&&ot===5&&(ce==="ADD"||ce==="SUB")?(Og=!0,Ig=`Ejecución: MBR ← ${s} ; MAR ← MBR`):(R.set(xt,`Ejecución: MBR ← ${s}`),e.until==="cycle-change"&&Fn(),ot++,Wt++,bt++,R.set(Mn,bt))}}else R.set(xt,"");console.log(`Ciclos ejecutados: ${Wt}`),R.set(kp,Wt);const r=new CustomEvent("instructionChange",{detail:{instruction:ce,modeid:Os,moderi:Mi}});window.dispatchEvent(r),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until:i.value.type==="cpu:cycle.end"&&e.until==="end-of-instruction"&&Fn()}t.return()}catch(e){const n=en.from(e);Gc(n)}}async function goe(...t){const e=t[0],n=R.get(tn);switch(e){case"cpu.run":{if(n.type==="running")return fu();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;Wt=0,Ec=0,R.set(kp,Wt),R.set(mb,Ec),R.set(ac,[]);const r=window.codemirror.state.doc.toString(),s=IL(r);if(!s.success)return toe();const o=s.instructions.map(x=>x.instruction),a=o.some(x=>["CALL","RET","INT","IRET","POP","PUSH"].includes(x));R.set(FC,a);const l=o.includes("INT");R.set(x2,l);const c=s.instructions.some(x=>x.instruction==="INT"?x.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===6||S.value.value===7:!1):!1),u=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===48||S.value.value===50:!1):!1),d=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value>=32&&S.value.value<=43;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _>=32&&_<=43}}catch(_){console.warn("No se pudo resolver operando PIC:",_)}}return!1}):!1),f=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===64||S.value.value===65;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===64||_===65}}catch(_){console.warn("No se pudo resolver operando Handshake:",_)}}return!1}):!1),p=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===16||S.value.value===17;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===16||_===17}}catch(_){console.warn("No se pudo resolver operando Timer:",_)}}return!1}):!1),g=Tn();R.set(Zr,x=>({...x,devices:{...x.devices,keyboardAndScreen:c,pio:u?"switches-and-leds":f?"printer":x.devices.pio,handshake:f?"printer":x.devices.handshake,pic:d||x.devices.pic,"switches-and-leds":u}})),R.set(zL,c);const m=l||d||f||p||c;R.set(x2,m),console.log("Detectado - PIC:",d,"Handshake:",f,"Timer:",p,"INT:",l),console.log("Habilitando vector de interrupciones:",m),pn.loadProgram({program:s,data:g.dataOnLoad,devices:{keyboardAndScreen:Tn().devices.keyboardAndScreen??!1,pic:Tn().devices.pic??!1,pio:Tn().devices.pio??null,handshake:Tn().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const v=s.instructions.filter(x=>x.type==="instruction").flatMap(x=>{const S=x.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h";if(N.isLabel())return N.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h"}}return""}).join(", "),_=`${x.instruction} ${S}`.trim(),E=[{address:x.start.value,name:_,length:x.length.toString().trim()}];if(x.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=x.start.value+1,N=x.operands.filter((M,O)=>x.length===3?O===0&&M.type==="number-expression":M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const O=M.value;if(O.isNumberLiteral())return O.value.toString(16)+"h";if(O.isLabel())return O.value}else if(M.type==="direct-address"){const O=M.value;if(O.isNumberLiteral())return O.value.toString(16)+"h"}return""}).join(", ");E.push({address:C,name:N,length:""})}if(x.length===3){const C=x.start.value+2,N=x.operands.filter(M=>M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const O=M.value;if(O.isNumberLiteral())return O.value.toString(16)+"h"}return""}).join(" ");E.push({address:C,name:N,length:""})}return E}),y=s.data.filter(x=>x.type==="data-directive").flatMap(x=>{const S=x.start.value;return x.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,C)=>({address:S+C,label:C===0&&x.label||null,value:E}))});console.log("Direcciones de las instrucciones:",v),console.log("Direcciones de los datos:",y),R.set(VL,v),R.set(HL,y.map(x=>({...x,length:""}))),aR(pn.getComputerState());const w=["Start CPU",{until:i,devices:Tn().devices,language:Tn().language,animations:Tn().animations?"yes":"no"}];y6.capture(...w),R.set(tn,{type:"running",until:i,waitingForInput:!1}),uc(pn.startCPU()),voe(),yoe()}else R.set(tn,{type:"running",until:i,waitingForInput:!1}),t$();return}case"cpu.stop":{const i=t[1];if(i){Gc(),aR(pn.getComputerState(),i);const{anim:r}=await RL(async()=>{const{anim:o}=await Promise.resolve().then(()=>Gie);return{anim:o}},void 0);await Promise.all([r({key:"cpu.internalBus.data.opacity",to:0},{duration:.1,easing:"easeInSine"}),r({key:"cpu.internalBus.address.opacity",to:0},{duration:.1,easing:"easeInSine"})]);const s=new CustomEvent("instructionChange",{detail:{instruction:"",modeid:!1,moderi:!1}});window.dispatchEvent(s)}else Fn();return}case"f10.press":{if(!pn.devices.f10.connected()||n.type!=="running")return fu();if(oR("f10:press"))return;uc(pn.devices.f10.press());return}case"switch.toggle":{if(!pn.devices.switches.connected())return fu();if(oR("switches:toggle"))return;const i=t[1];n.type==="running"?uc(pn.devices.switches.toggle(i)):R.set(Ob,r=>r.withBit(i,!r.bit(i)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return fu();pn.devices.keyboard.readChar(z.fromChar(t[1])),R.set(tn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!pn.devices.screen.connected())return fu();uc(pn.devices.screen.clear());return}case"printer.clean":{if(!pn.devices.printer.connected())return fu();uc(pn.devices.printer.clear());return}default:return e}}async function voe(){if(pn.devices.clock.connected())for(;R.get(tn).type!=="stopped";){const t=Tn().clockSpeed;await Be({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),uc(pn.devices.clock.tick())}}async function yoe(){if(pn.devices.printer.connected()){for(;R.get(tn).type!=="stopped";){const t=Tn().printerSpeed;await Be([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Be({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await uc(pn.devices.printer.print())}if(R.get(tn).type==="stopped"&&pn.devices.printer.hasPending())for(;R.get(tn).type!=="stopped"||pn.devices.printer.hasPending();){const t=Tn().printerSpeed;await Be([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Be({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=pn.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await B$(n.value),n=e.next()}}}function Ln(){const t=tt(tn),e=EL(),n=b.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:goe,devices:n}}function boe({className:t}){const e=Xt(),{status:n,dispatch:i}=Ln(),[r,s]=b.useState(null),[o,a]=b.useState("desktop");b.useEffect(()=>{const m=()=>{const v=window.innerWidth;v<=480?a("mobile"):v<=768?a("compact"):v<=1024?a("tablet"):a("desktop")};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),b.useEffect(()=>{n.type!=="running"&&s(null)},[n.type]);const l=b.useCallback(()=>{n.type!=="running"&&(s("cycle-change"),i("cpu.run","cycle-change"))},[n.type,i]);xu("F7",m=>{m.preventDefault(),l()},void 0,[l]);const c=b.useCallback(()=>{n.type!=="running"&&(s("end-of-instruction"),i("cpu.run","end-of-instruction"))},[n.type,i]);xu("F8",m=>{m.preventDefault(),c()},void 0,[c]);const u=b.useCallback(()=>{n.type!=="running"&&(s("infinity"),i("cpu.run","infinity"))},[n.type,i]);xu("F4",m=>{m.preventDefault(),u()},void 0,[u]);const d=b.useCallback(()=>{n.type==="running"&&i("cpu.stop",!1)},[n.type,i]),f=b.useCallback(()=>{n.type!=="running"&&i("cpu.stop",!0)},[n.type,i]);xu("F9",m=>{m.preventDefault(),f()},void 0,[f]),xu(" ",m=>{const v=m.target;v.tagName==="INPUT"||v.tagName==="TEXTAREA"||v.contentEditable==="true"||(m.preventDefault(),n.type==="running"&&d())},{event:"keydown"},[n.type,d]);const p=o==="desktop"||o==="tablet",g=o==="desktop";return h.jsxs("div",{"data-testid":"controls",className:ee("flex items-center justify-center gap-4 rounded-xl border border-stone-700 bg-stone-900/80 shadow-lg",o==="mobile"?"gap-2 px-2 py-0.5":o==="compact"?"gap-3 px-2 py-1":"gap-4 px-3 py-1",t),children:[n.type==="running"&&r==="cycle-change"?h.jsxs("button",{"data-testid":"cycle-button",onClick:d,title:e("control.action.pause"),className:ee("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:Rh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"cycle-button",disabled:n.type==="running",onClick:l,title:e("control.action.run.cycle-change"),className:ee("group relative flex flex-col items-center rounded-lg transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",n.type==="running"&&n.until==="cycle-change"&&"animate-pulse-glow-mantis",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:yp,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.cycle-change")})]}),n.type==="running"&&r==="end-of-instruction"?h.jsxs("button",{"data-testid":"new-button",onClick:d,title:e("control.action.pause"),className:ee("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:Rh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"new-button",disabled:n.type==="running",onClick:c,title:e("control.action.run.end-of-instruction"),className:ee("group relative flex flex-col items-center rounded-lg transition hover:bg-blue-600/20 focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-50",n.type==="running"&&n.until==="end-of-instruction"&&"animate-pulse-glow-blue",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:AC,size:"lg",className:"text-blue-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.end-of-instruction")})]}),n.type==="running"&&r==="infinity"?h.jsxs("button",{"data-testid":"open-button",onClick:d,title:e("control.action.pause"),className:ee("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:Rh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"open-button",disabled:n.type==="running",onClick:u,title:e("control.action.run.infinity"),className:ee("group relative flex flex-col items-center rounded-lg transition hover:bg-orange-600/20 focus-visible:ring-2 focus-visible:ring-orange-400 disabled:opacity-50",n.type==="running"&&n.until==="infinity"&&"animate-pulse-glow-orange",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:iJ,size:"lg",className:"text-orange-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.infinity")})]}),h.jsxs("button",{"data-testid":"assemble-button",onClick:f,disabled:n.type==="stopped"||n.type==="running",title:e("control.action.reset"),className:ee("group relative flex flex-col items-center rounded-lg transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:dL,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.reset")})]})]})}const U$=b.memo(({currentPhase:t="idle",className:e})=>{const[n,i]=b.useState("idle"),[r,s]=b.useState(!1);b.useEffect(()=>{if(t!=="idle"){i(t);const a=setTimeout(()=>i("idle"),1e3);return()=>clearTimeout(a)}},[t]);const o=[{id:"captacion",label:"Captación",color:"text-blue-400",icon:"📥",descripcion:"Captando instrucción desde memoria",pasos:["IP apunta a la dirección de memoria, el MAR recibe la dirección del IP","Se lee el contenido de memoria y se almacena en el MBR, IP se incrementa automáticamente","La instrucción se transfiere al IR"]},{id:"ejecucion",label:"Ejecución",color:"text-green-400",icon:"⚡",descripcion:"Ejecutando instrucción",subfases:[{id:"operandos",label:"Obtención de operandos",color:"text-yellow-400",icon:"🔍",descripcion:"Obteniendo operandos de la instrucción",pasos:["Se identifican y preparan los operandos necesarios para la operación."]},{id:"alu",label:"Procesar en ALU",color:"text-green-400",icon:"⚡",descripcion:"Procesando en la ALU",pasos:["La ALU ejecuta la operación aritmética o lógica con los operandos."]},{id:"escritura",label:"Escribir resultado",color:"text-purple-400",icon:"💾",descripcion:"Escribiendo resultado en registros",pasos:["El resultado de la operación se almacena en el registro destino."]}]}];return h.jsxs("div",{className:ee("flex flex-col gap-2 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 p-3 shadow-lg ring-1 ring-stone-300","min-w-[280px] max-w-[320px]",e),children:[h.jsx("div",{className:"mb-2 flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"CICLO CPU"}),h.jsx("button",{onClick:()=>s(!r),className:ee("rounded border px-2 py-1 text-[10px] font-bold transition-all duration-200",r?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300 hover:border-stone-400 hover:bg-stone-700"),children:r?"−":"+"})]})}),h.jsx("div",{className:"mt-2 flex items-center justify-center gap-2",children:o.map((a,l)=>h.jsxs("div",{className:"flex items-center",children:[h.jsxs("div",{className:ee("flex cursor-pointer flex-col items-center gap-1 rounded border-2 px-2 py-1 transition-all duration-200","hover:border-stone-300 hover:bg-stone-700",t===a.id?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300",n===a.id&&"animate-pulse"),onClick:()=>{var c;if(r)if(a.subfases){let u="";a.subfases.forEach(d=>{u+=`${d.label}
${d.descripcion}
Pasos:
${d.pasos.map((f,p)=>`${p+1}. ${f}`).join(`
`)}`,u+=`

`}),alert(u)}else alert(`${a.label}

${a.descripcion}

Pasos:
${(c=a.pasos)==null?void 0:c.map((u,d)=>`${d+1}. ${u}`).join(`
`)}`)},children:[h.jsx("div",{className:ee("text-lg transition-transform duration-300",t===a.id&&"scale-110"),children:a.icon}),h.jsx("span",{className:ee("text-[10px] font-bold uppercase tracking-wide transition-colors",t===a.id?"text-stone-950":"text-stone-300"),children:a.label}),h.jsx("span",{className:"max-w-16 text-center text-[9px] leading-tight text-stone-500",children:a.descripcion})]}),l<o.length-1&&h.jsx("div",{className:"mx-1 font-bold text-stone-400",children:"→"})]},a.id))}),r&&h.jsx("div",{className:"mt-2 rounded border-2 border-stone-600 bg-stone-800/80 p-2",children:h.jsxs("div",{className:"text-xs text-stone-300",children:[h.jsx("div",{className:"mb-1 font-bold text-stone-200",children:"Estado actual:"}),t==="fetch"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Leyendo instrucción desde memoria"})]}),t==="decode"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Interpretando código de operación"})]}),t==="execute"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Ejecutando operación en ALU"})]}),t==="idle"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-stone-400"}),h.jsx("span",{children:"CPU en espera de instrucciones"})]})]})}),h.jsx("div",{className:"text-center text-[8px] text-stone-500",children:"Haz clic en las fases para ver detalles"})]})});U$.displayName="ExecutionPhases";const woe=b.memo(({steps:t,onStepChange:e,onComplete:n,className:i})=>{const[r,s]=b.useState(0),[o,a]=b.useState(!1),[l,c]=b.useState(2e3),u=t[r],d=r===0,f=r===t.length-1,p=b.useCallback(w=>{const x=Math.max(0,Math.min(w,t.length-1));s(x),e==null||e(x)},[t.length,e]),g=b.useCallback(()=>{f?(a(!1),n==null||n()):p(r+1)},[r,f,p,n]),m=b.useCallback(()=>{d||p(r-1)},[r,d,p]),v=b.useCallback(()=>{p(0),a(!1)},[p]),y=b.useCallback(()=>{a(!o)},[o]);return o&&!f&&setTimeout(g,l),h.jsxs("div",{className:ee("rounded-lg border border-stone-600 bg-stone-900 p-4",i),children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:"Modo Paso a Paso"}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("span",{className:"text-sm text-stone-400",children:["Paso ",r+1," de ",t.length]})})]}),h.jsx(U$,{currentPhase:u==null?void 0:u.phase,className:"mb-4"}),h.jsxs("div",{className:"mb-4 rounded-lg bg-stone-800 p-4",children:[h.jsx("div",{className:"mb-2 flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-mantis-400",children:u==null?void 0:u.title})}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:u==null?void 0:u.description}),(u==null?void 0:u.instruction)&&h.jsxs("div",{className:"mb-3 rounded bg-stone-700 p-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Instrucción:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:u.instruction})]}),(u==null?void 0:u.registers)&&h.jsx("div",{className:"mb-3 grid grid-cols-2 gap-4",children:h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Registros:"}),h.jsx("div",{className:"mt-1 space-y-1",children:Object.entries(u.registers).map(([w,x])=>h.jsxs("div",{className:"flex justify-between text-xs",children:[h.jsxs("span",{className:"text-stone-300",children:[w,":"]}),h.jsx("span",{className:"font-mono text-mantis-400",children:x})]},w))})]})}),(u==null?void 0:u.memory)&&h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Memoria:"}),h.jsx("div",{className:"mt-1 grid grid-cols-4 gap-1",children:Object.entries(u.memory).map(([w,x])=>h.jsxs("div",{className:"text-center text-xs",children:[h.jsx("div",{className:"text-stone-500",children:w}),h.jsx("div",{className:"font-mono text-mantis-400",children:x})]},w))})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(mt,{variant:"outline",size:"sm",onClick:v,disabled:d&&!o,className:"flex items-center gap-1",children:[h.jsx(Le,{icon:dL}),"Reiniciar"]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(mt,{variant:"outline",size:"sm",onClick:m,disabled:d,className:"flex items-center gap-1",children:[h.jsx(Le,{icon:hL}),"Anterior"]}),h.jsxs(mt,{variant:o?"secondary":"default",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx(Le,{icon:o?Rh:yp}),o?"Pausar":"Reproducir"]}),h.jsxs(mt,{variant:"outline",size:"sm",onClick:g,disabled:f,className:"flex items-center gap-1",children:["Siguiente",h.jsx(Le,{icon:AC})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Velocidad:"}),h.jsxs("select",{value:l,onChange:w=>c(Number(w.target.value)),className:"rounded border border-stone-600 bg-stone-800 px-2 py-1 text-xs",children:[h.jsx("option",{value:1e3,children:"Rápida"}),h.jsx("option",{value:2e3,children:"Normal"}),h.jsx("option",{value:4e3,children:"Lenta"})]})]})]}),h.jsx("div",{className:"mt-4",children:h.jsx("div",{className:"h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(r+1)/t.length*100}%`}})})})]})});woe.displayName="StepByStepMode";const xoe=b.memo(({from:t,to:e,data:n,duration:i=2e3,className:r,onComplete:s})=>{const[o,a]=b.useState(!1),[l,c]=b.useState(0);return b.useEffect(()=>{a(!0),c(0);const u=Date.now(),d=()=>{const f=Date.now()-u,p=Math.min(f/i,1);c(p),p<1?requestAnimationFrame(d):setTimeout(()=>{a(!1),s==null||s()},500)};requestAnimationFrame(d)},[t,e,n,i,s]),o?h.jsxs("div",{className:ee("pointer-events-none absolute inset-0",r),children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"dataFlowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${t} L ${e}`,stroke:"url(#dataFlowGradient)",strokeWidth:"3",strokeDasharray:"10,5",strokeDashoffset:20-l*20,fill:"none",className:"animate-pulse"})]}),["Read","Write"].includes(n)?(()=>{const[u,d]=t.split(" ").map(Number),[f,p]=e.split(" ").map(Number),g=u+(f-u)*l,m=d+(p-d)*l;return h.jsx("div",{className:`absolute z-[100] select-none text-lg font-extrabold ${n==="Read"?"text-red-500":"text-orange-400"}`,style:{left:g,top:m-32,textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:o?1:0,pointerEvents:"none"},children:n})})():h.jsxs("div",{className:ee("absolute rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white","border border-mantis-400 shadow-lg","transition-all duration-300 ease-out"),style:{left:`${l*100}%`,transform:"translateX(-50%)",top:"50%",marginTop:"-12px"},children:[n,h.jsx("div",{className:"absolute -top-1 left-1/2 size-0 -translate-x-1/2 border-x-4 border-b-4 border-transparent border-b-mantis-500"})]})]}):null});xoe.displayName="DataFlowAnimation";const Soe={"fetch-decode-execute":{title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción",steps:[{id:"fetch",title:"Fase Fetch",description:"La CPU lee la instrucción desde memoria",duration:2e3,animation:{type:"flow",targets:["IP","MAR","MBR"],data:{from:"IP",to:"MBR",value:"A1"}}},{id:"decode",title:"Fase Decode",description:"La CPU interpreta la instrucción",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{instruction:"MOV AL, 5"}}},{id:"execute",title:"Fase Execute",description:"La CPU ejecuta la operación",duration:2e3,animation:{type:"transform",targets:["AL"],data:{newValue:"05"}}}]},"memory-access":{title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM",steps:[{id:"address-setup",title:"Configurar Dirección",description:"La CPU coloca la dirección en el MAR",duration:1500,animation:{type:"highlight",targets:["MAR"],data:{address:"A0"}}},{id:"memory-read",title:"Lectura de Memoria",description:"El contenido se transfiere al MBR",duration:1500,animation:{type:"flow",targets:["memory-cell-A0","MBR"],data:{from:"memory",to:"MBR",value:"42"}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se mueven al registro destino",duration:1500,animation:{type:"flow",targets:["MBR","AL"],data:{from:"MBR",to:"AL",value:"42"}}}]},"register-transfer":{title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU",steps:[{id:"source-read",title:"Leer Registro Origen",description:"El valor se lee del registro origen",duration:1e3,animation:{type:"highlight",targets:["AL"],data:{value:"25"}}},{id:"bus-transfer",title:"Transferencia por Bus",description:"Los datos viajan por el bus interno",duration:1500,animation:{type:"flow",targets:["AL","BL"],data:{from:"AL",to:"BL",value:"25"}}},{id:"destination-write",title:"Escribir Registro Destino",description:"El valor se almacena en el registro destino",duration:1e3,animation:{type:"transform",targets:["BL"],data:{newValue:"25"}}}]},"alu-operation":{title:"Operación ALU",description:"Proceso de operación aritmética o lógica",steps:[{id:"operand-load",title:"Cargar Operandos",description:"Los operandos se cargan en la ALU",duration:1500,animation:{type:"highlight",targets:["AL","BL"],data:{operand1:"10",operand2:"05"}}},{id:"operation-execute",title:"Ejecutar Operación",description:"La ALU realiza la operación",duration:2e3,animation:{type:"sequence",targets:["ALU"],data:{operation:"ADD",result:"15"}}},{id:"result-store",title:"Almacenar Resultado",description:"El resultado se guarda en el registro destino",duration:1500,animation:{type:"transform",targets:["AL"],data:{newValue:"15"}}}]},"bus-communication":{title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus",steps:[{id:"bus-request",title:"Solicitud de Bus",description:"Un componente solicita acceso al bus",duration:1e3,animation:{type:"highlight",targets:["CPU"],data:{requesting:!0}}},{id:"bus-grant",title:"Concesión de Bus",description:"El bus se concede al componente solicitante",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{granted:!0}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se transfieren por el bus",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{data:"A1B2",direction:"CPU-to-Memory"}}},{id:"bus-release",title:"Liberación de Bus",description:"El bus se libera para otros componentes",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{released:!0}}}]}},V$=b.memo(({concept:t,onClose:e,className:n})=>{const[i,r]=b.useState(0),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=Soe[t],f=d.steps[i],p=i===0,g=i===d.steps.length-1;b.useEffect(()=>{if(s){const _=setTimeout(()=>{g?o(!1):r(E=>E+1)},f.duration);return()=>clearTimeout(_)}},[s,i,g,f.duration]);const m=b.useCallback(()=>{g||r(_=>_+1)},[g]),v=b.useCallback(()=>{p||r(_=>_-1)},[p]),y=b.useCallback(()=>{r(0),o(!1)},[]),w=b.useCallback(()=>{o(!s)},[s]),x=b.useCallback(()=>{l(!a)},[a]),S=()=>{const{type:_,targets:E,data:C}=f.animation;switch(_){case"highlight":return h.jsxs("div",{className:"relative",children:[E.map((N,M)=>h.jsx("div",{className:"absolute inset-0 animate-pulse rounded border-2 border-mantis-400 bg-mantis-400/20",style:{animationDelay:`${M*200}ms`}},M)),C&&h.jsx("div",{className:"absolute right-2 top-2 rounded bg-mantis-500 px-2 py-1 text-xs text-white",children:Object.entries(C).map(([N,M])=>h.jsxs("div",{children:[N,": ",String(M)]},N))})]});case"flow":return h.jsxs("div",{className:"relative",children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${"from"in C&&C.from||"0,0"} L ${"to"in C&&C.to||"100,100"}`,stroke:"url(#flowGradient)",strokeWidth:"3",strokeDasharray:"10,5",className:"animate-pulse"})]}),"value"in C&&C.value&&h.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:h.jsx("div",{className:"rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:C.value})})]});case"transform":return h.jsxs("div",{className:"relative",children:[E.map((N,M)=>h.jsx("div",{className:"absolute inset-0 animate-ping rounded bg-mantis-400/30",style:{animationDelay:`${M*300}ms`}},M)),"newValue"in C&&C.newValue&&h.jsxs("div",{className:"absolute left-2 top-2 rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:["Nuevo: ",C.newValue]})]});case"sequence":return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"rounded-lg bg-mantis-500 px-4 py-2 font-mono text-sm text-white",children:"operation"in C&&C.operation?C.operation:"Operación"})}),"result"in C&&C.result&&h.jsxs("div",{className:"absolute bottom-2 right-2 rounded bg-green-500 px-2 py-1 font-mono text-xs text-white",children:["= ",C.result]})]});default:return null}};return h.jsx("div",{className:ee("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",a&&"p-0",n),children:h.jsxs("div",{className:ee("rounded-lg border border-stone-600 bg-stone-900 shadow-xl",a?"size-full":"max-h-[90vh] w-full max-w-4xl"),children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:d.title}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(mt,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"text-stone-400 hover:text-mantis-400",children:h.jsx(Le,{icon:fL})}),h.jsx(mt,{variant:"ghost",size:"sm",onClick:x,className:"text-stone-400 hover:text-mantis-400",children:h.jsx(Le,{icon:a?DX:JX})}),h.jsx(mt,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"×"})]})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-400",children:[h.jsxs("span",{children:["Paso ",i+1," de ",d.steps.length]}),h.jsx("span",{children:"•"}),h.jsxs("span",{children:[f.duration/1e3,"s"]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(i+1)/d.steps.length*100}%`}})})]}),h.jsxs("div",{className:"flex-1 p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:f.title}),h.jsx("p",{className:"text-sm text-stone-300",children:f.description})]}),h.jsxs("div",{className:"relative h-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:[S(),c&&h.jsxs("div",{className:"absolute left-2 top-2 max-w-xs rounded border border-stone-600 bg-stone-900/90 p-3",children:[h.jsx("h4",{className:"mb-2 font-medium text-mantis-400",children:"Información"}),h.jsx("p",{className:"text-xs text-stone-300",children:d.description}),h.jsxs("div",{className:"mt-2 text-xs text-stone-400",children:[h.jsxs("div",{children:["Tipo de animación: ",f.animation.type]}),h.jsxs("div",{children:["Elementos: ",f.animation.targets.join(", ")]})]})]})]})]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(mt,{variant:"outline",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx(Le,{icon:BX}),"Reiniciar"]}),h.jsx(mt,{variant:"outline",size:"sm",onClick:v,disabled:p,className:"flex items-center gap-1",children:"Anterior"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(mt,{variant:"outline",size:"sm",onClick:w,className:"flex items-center gap-1",children:[h.jsx(Le,{icon:s?Rh:yp}),s?"Pausar":"Reproducir"]}),h.jsx(mt,{variant:"outline",size:"sm",onClick:m,disabled:g,className:"flex items-center gap-1",children:"Siguiente"})]})]})})]})})});V$.displayName="ConceptVisualizer";const koe=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Aprende cómo funciona una CPU y sus componentes principales",difficulty:"beginner",estimatedTime:10,steps:[{id:"intro",title:"Introducción a la CPU",description:"¿Qué es una CPU y para qué sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos.",type:"explanation",completed:!1},{id:"registers",title:"Registros de la CPU",description:"Los registros son memoria rápida dentro de la CPU",content:"Los registros almacenan datos temporalmente durante la ejecución. Son más rápidos que la RAM pero tienen menos capacidad.",type:"explanation",completed:!1},{id:"program-counter",title:"Puntero de Instrucción",description:"El IP indica la siguiente instrucción a ejecutar",content:"El Puntero de Instrucción (IP) se incrementa automáticamente después de cada instrucción.",type:"explanation",completed:!1}]},{id:"memory-basics",title:"Memoria RAM",description:"Comprende cómo funciona la memoria principal",difficulty:"beginner",estimatedTime:8,steps:[{id:"memory-intro",title:"¿Qué es la Memoria RAM?",description:"La memoria de acceso aleatorio",content:"La RAM almacena programas y datos temporalmente. Cada ubicación tiene una dirección única.",type:"explanation",completed:!1},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria",content:"La CPU usa el bus de direcciones para especificar qué celda de memoria acceder.",type:"explanation",completed:!1},{id:"memory-quiz",title:"Quiz: Direccionamiento",description:"Pon a prueba tu conocimiento",content:"Responde correctamente para continuar.",type:"quiz",exercise:{question:"¿Cuántas direcciones de memoria tiene VonSim8?",options:["128 bytes","256 bytes","512 bytes","1024 bytes"],correctAnswer:1,explanation:"VonSim8 tiene 256 bytes de memoria (direcciones 00-FF en hexadecimal)."},completed:!1}]},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Ciclo básico de ejecución de instrucciones",difficulty:"intermediate",estimatedTime:15,steps:[{id:"cycle-intro",title:"El Ciclo de Instrucción",description:"Las dos fases principales",content:"Cada instrucción pasa por dos fases: Fetch (leer) y Execute (ejecutar). La decodificación está incluida en la ejecución.",type:"explanation",completed:!1},{id:"fetch-phase",title:"Fase Fetch",description:"Leer la instrucción de memoria",content:"La CPU lee la instrucción desde la dirección apuntada por el IP.",type:"explanation",completed:!1},{id:"execute-phase",title:"Fase Execute",description:"Ejecutar la operación",content:"La CPU realiza la operación especificada por la instrucción.",type:"explanation",completed:!1}]}],H$=b.memo(({tutorial:t,onComplete:e,onClose:n,className:i})=>{var j,K;const[r,s]=b.useState(0),[o,a]=b.useState(t.steps),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[f,p]=b.useState(""),[g,m]=b.useState(null),v=o[r],y=r===0,w=r===o.length-1,S=o.filter($=>$.completed).length/o.length*100,_=b.useCallback(()=>{e==null||e(t.id)},[t.id,e]),E=b.useCallback(()=>{w?_():(s($=>$+1),m(null),p(""))},[w,_]),C=b.useCallback(()=>{y||(s($=>$-1),m(null),p(""))},[y]),N=b.useCallback(()=>{a($=>$.map((G,X)=>X===r?{...G,completed:!0}:G))},[r]),M=b.useCallback(()=>{if(!v.exercise)return;const $=f===v.exercise.correctAnswer.toString();m({correct:$,message:$?"¡Correcto!":`Incorrecto. ${v.exercise.explanation}`}),$&&(N(),setTimeout(()=>{E()},2e3))},[v,f,N,E]);b.useEffect(()=>{if(l&&v.type==="explanation"){const $=setTimeout(()=>{w?c(!1):E()},5e3);return()=>clearTimeout($)}},[l,r,w,v.type,E]);const O=$=>{switch($){case"beginner":return"text-blue-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-purple-400";default:return"text-stone-400"}},D=$=>{switch($){case"beginner":return rd;case"intermediate":return dm;case"advanced":return NC;default:return rd}};return h.jsx("div",{className:ee("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",i),children:h.jsxs("div",{className:"max-h-[90vh] w-full max-w-2xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:t.title}),h.jsx(mt,{variant:"ghost",size:"sm",onClick:n,className:"text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Le,{icon:D(t.difficulty),className:O(t.difficulty)}),h.jsx("span",{className:O(t.difficulty),children:t.difficulty==="beginner"?"Básico":t.difficulty==="intermediate"?"Intermedio":"Avanzado"})]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:[t.estimatedTime," min"]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:["Paso ",r+1," de ",o.length]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${S}%`}})})]}),h.jsxs("div",{className:"max-h-96 overflow-y-auto p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:v.title}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:v.description}),h.jsx("div",{className:"text-sm leading-relaxed text-stone-400",children:v.content})]}),v.type==="exercise"||v.type==="quiz"?h.jsxs("div",{className:"rounded-lg border border-stone-600 bg-stone-800 p-4",children:[h.jsx("h4",{className:"mb-3 font-medium text-white",children:(j=v.exercise)==null?void 0:j.question}),(K=v.exercise)!=null&&K.options?h.jsx("div",{className:"space-y-2",children:v.exercise.options.map(($,G)=>h.jsxs("label",{className:ee("flex cursor-pointer items-center gap-3 rounded border p-3 transition-colors",f===G.toString()?"border-mantis-400 bg-mantis-400/20":"border-stone-600 bg-stone-700 hover:bg-stone-600"),children:[h.jsx("input",{type:"radio",name:"answer",value:G,checked:f===G.toString(),onChange:X=>p(X.target.value),className:"text-mantis-400"}),h.jsx("span",{className:"text-stone-300",children:$})]},G))}):h.jsx("input",{type:"text",value:f,onChange:$=>p($.target.value),placeholder:"Escribe tu respuesta...",className:"w-full rounded border border-stone-600 bg-stone-700 p-2 text-white"}),g&&h.jsx("div",{className:ee("mt-3 rounded border p-3",g.correct?"border-green-400 bg-green-400/20 text-green-400":"border-red-400 bg-red-400/20 text-red-400"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Le,{icon:g.correct?mL:um}),g.message]})}),v.hints&&v.hints.length>0&&h.jsxs("div",{className:"mt-3",children:[h.jsxs(mt,{variant:"ghost",size:"sm",onClick:()=>d(!u),className:"text-mantis-400 hover:text-mantis-300",children:[h.jsx(Le,{icon:rd,className:"mr-2"}),u?"Ocultar":"Mostrar"," Pistas"]}),u&&h.jsx("div",{className:"mt-2 rounded border border-stone-600 bg-stone-700 p-3",children:h.jsx("ul",{className:"space-y-1 text-sm text-stone-300",children:v.hints.map(($,G)=>h.jsxs("li",{children:["• ",$]},G))})})]})]}):null]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(mt,{variant:"outline",size:"sm",onClick:C,disabled:y,className:"flex items-center gap-1",children:[h.jsx(Le,{icon:hL}),"Anterior"]})}),h.jsx("div",{className:"flex items-center gap-2",children:v.type==="exercise"||v.type==="quiz"?h.jsx(mt,{size:"sm",onClick:M,disabled:!f,className:"bg-mantis-600 hover:bg-mantis-700",children:"Verificar Respuesta"}):h.jsxs(mt,{size:"sm",onClick:E,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700",children:[w?"Completar Tutorial":"Siguiente",!w&&h.jsx(Le,{icon:AC})]})})]})})]})})});H$.displayName="InteractiveTutorial";const W$=b.memo(({isOpen:t=!1,onShowProgress:e})=>{const[n,i]=b.useState(!1),[r]=b.useState(!1),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(null),[d,f]=b.useState(null),p=S=>{console.log("Tutorial seleccionado:",S),u(S),o(!0)},g=S=>{f(S),l(!0)},m=()=>{o(!1),u(null)},v=()=>{l(!1),f(null)},y=[{id:"progress",title:"Progreso Educativo",description:"Ver logros y estadísticas de aprendizaje",icon:PC,color:"text-yellow-400",action:()=>e==null?void 0:e()},{id:"tutorials",title:"Tutoriales Interactivos",description:"Aprende paso a paso con ejercicios",icon:rJ,color:"text-blue-400",action:()=>i(!n)}],w=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Conceptos básicos de CPU y registros",difficulty:"Básico",duration:"10 min"},{id:"memory-basics",title:"Memoria RAM",description:"Funcionamiento de la memoria principal",difficulty:"Básico",duration:"8 min"},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Fases fetch-decode-execute",difficulty:"Intermedio",duration:"15 min"}],x=[{id:"fetch-decode-execute",title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción"},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM"},{id:"register-transfer",title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU"},{id:"alu-operation",title:"Operación ALU",description:"Proceso de operación aritmética o lógica"},{id:"bus-communication",title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus"}];return h.jsxs(h.Fragment,{children:[t&&h.jsx("div",{className:"fixed bottom-12 left-1/2 z-50 -translate-x-1/2",children:h.jsxs("div",{className:"min-w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 text-center",children:[h.jsx("h3",{className:"mb-1 text-lg font-semibold text-mantis-400",children:"Centro de Aprendizaje"}),h.jsx("p",{className:"text-sm text-stone-400",children:"Explora herramientas educativas interactivas"})]}),h.jsx("div",{className:"space-y-2",children:y.map(S=>h.jsx("div",{children:S.id==="tutorials"?h.jsxs("div",{children:[h.jsxs("button",{onClick:S.action,className:ee("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Le,{icon:S.icon,className:ee("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),h.jsx(Le,{icon:yp,className:ee("text-sm text-stone-400",n&&"text-blue-400")})]}),n&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:w.map(_=>h.jsx("button",{onClick:()=>p(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),h.jsx("div",{className:"text-xs text-stone-400",children:_.description})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-xs text-blue-400",children:_.difficulty}),h.jsx("div",{className:"text-xs text-stone-500",children:_.duration})]})]})},_.id))})]}):S.id==="visualizations"?h.jsxs("div",{children:[h.jsxs("button",{onClick:S.action,className:ee("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Le,{icon:S.icon,className:ee("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),h.jsx(Le,{icon:K3,className:ee("text-sm text-stone-400",r&&"text-green-400")})]}),r&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:x.map(_=>h.jsx("button",{onClick:()=>g(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),h.jsx("div",{className:"text-xs text-stone-400",children:_.description})]})},_.id))})]}):h.jsxs("button",{onClick:S.action,className:ee("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Le,{icon:S.icon,className:ee("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]})]})},S.id))}),h.jsx("div",{className:"mt-4 border-t border-stone-600 pt-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsx("span",{children:"Herramientas educativas"}),h.jsx("span",{children:"VonSim8"})]})})]})}),s&&c&&(()=>{const S=koe.find(_=>_.id===c);return console.log("Tutorial encontrado:",S),S?h.jsx(H$,{tutorial:S,onComplete:m,onClose:()=>{console.log("Cerrando tutorial"),o(!1),u(null)}}):(console.error("Tutorial no encontrado:",c),null)})(),a&&d&&h.jsx(V$,{concept:d,onClose:v})]})});W$.displayName="EducationalMenu";const hR=[{id:"first_program",type:"programs_written",title:"Primer Programa",description:"Escribe tu primer programa en ensamblador",icon:rd,requirement:1,current:0,unlocked:!1,points:10},{id:"instruction_master",type:"instructions_executed",title:"Maestro de Instrucciones",description:"Ejecuta 100 instrucciones",icon:FX,requirement:100,current:0,unlocked:!1,points:25},{id:"memory_explorer",type:"concept_mastered",title:"Explorador de Memoria",description:"Comprende el funcionamiento de la memoria RAM",icon:oJ,requirement:1,current:0,unlocked:!1,points:15},{id:"cpu_architect",type:"concept_mastered",title:"Arquitecto de CPU",description:"Domina los conceptos de arquitectura de CPU",icon:nJ,requirement:1,current:0,unlocked:!1,points:30},{id:"persistent_learner",type:"time_spent",title:"Estudiante Persistente",description:"Pasa 30 minutos aprendiendo",icon:dm,requirement:30,current:0,unlocked:!1,points:20},{id:"tutorial_master",type:"tutorials_completed",title:"Maestro de Tutoriales",description:"Completa un tutorial interactivo educativo",icon:PC,requirement:1,current:0,unlocked:!1,points:40}],pR=[{id:"beginner",name:"Principiante",description:"Conceptos básicos de programación y arquitectura",concepts:["register","memory","instruction"],requiredPoints:0,unlocked:!0,completed:!1},{id:"intermediate",name:"Intermedio",description:"Operaciones aritméticas y lógicas",concepts:["alu","bus","program-counter"],requiredPoints:50,unlocked:!1,completed:!1},{id:"advanced",name:"Avanzado",description:"Interrupciones y programación compleja",concepts:["flags","stack","interrupts"],requiredPoints:100,unlocked:!1,completed:!1}],G$=b.memo(({className:t,isVisible:e=!1,onClose:n})=>{const[i,r]=b.useState(hR),[s,o]=b.useState(pR),[a,l]=b.useState(0),[c,u]=b.useState(0);b.useEffect(()=>{const v=localStorage.getItem("vonsim8-educational-progress");if(v)try{const y=JSON.parse(v);r(y.achievements||hR),o(y.levels||pR),l(y.totalPoints||0),u(y.sessionTime||0)}catch{}},[]);const d=b.useCallback(()=>{const v={achievements:i,levels:s,totalPoints:a,sessionTime:c,lastSaved:Date.now()};localStorage.setItem("vonsim8-educational-progress",JSON.stringify(v))},[i,s,a,c]),f=b.useCallback((v,y)=>{r(w=>{const x=w.map(_=>{if(_.type===v){const E=Math.min(_.current+y,_.requirement),C=_.unlocked,N=E>=_.requirement;return!C&&N&&p(_),{..._,current:E,unlocked:N}}return _}),S=x.filter(_=>_.unlocked).reduce((_,E)=>_+E.points,0);return l(S),o(_=>_.map(E=>({...E,unlocked:S>=E.requiredPoints}))),x})},[]),p=v=>{const y=document.createElement("div");y.className=ee("fixed right-4 top-4 z-50 rounded-lg border-2 p-4 shadow-lg","animate-slide-in-right bg-mantis-500 text-white"),y.innerHTML=`
      <div class="flex items-center gap-3">
        <FontAwesomeIcon icon="${v.icon}" class="text-2xl" />
        <div>
          <div class="font-bold">¡Logro Desbloqueado!</div>
          <div class="text-sm">${v.title}</div>
        </div>
      </div>
    `,document.body.appendChild(y),setTimeout(()=>{y.remove()},3e3)};if(b.useEffect(()=>{const v=y=>{const{type:w,value:x=1}=y.detail;f(w,x)};return window.addEventListener("educational-progress",v),()=>window.removeEventListener("educational-progress",v)},[f]),b.useEffect(()=>{const v=setInterval(()=>{u(y=>{const w=y+1;return w%60===0&&f("time_spent",1),w})},1e3);return()=>clearInterval(v)},[f]),b.useEffect(()=>{const v=setInterval(d,3e4);return()=>clearInterval(v)},[d]),!e)return null;const g=i.filter(v=>v.unlocked),m=s.filter(v=>v.unlocked);return h.jsxs("div",{className:ee("fixed bottom-20 right-4 z-50 h-80 w-96 rounded-lg border border-stone-600 bg-stone-900 shadow-xl",t),children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-3",children:[h.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-mantis-400",children:[h.jsx(Le,{icon:PC}),"Progreso Educativo"]}),h.jsx(mt,{variant:"ghost",size:"sm",onClick:n,className:"text-xs text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto p-3",children:[h.jsxs("div",{className:"rounded-lg bg-stone-800 p-3 text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-mantis-400",children:a}),h.jsx("div",{className:"text-xs text-stone-400",children:"Puntos Totales"})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Le,{icon:dm}),"Niveles de Aprendizaje"]}),h.jsx("div",{className:"space-y-1",children:s.map(v=>h.jsxs("div",{className:ee("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10 text-mantis-400":"border-stone-600 bg-stone-800 text-stone-500"),children:[h.jsx("div",{className:"font-medium",children:v.name}),h.jsx("div",{className:"text-stone-400",children:v.description}),!v.unlocked&&h.jsxs("div",{className:"mt-1 text-stone-500",children:["Requiere ",v.requiredPoints," puntos"]})]},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Le,{icon:$X}),"Logros (",g.length,"/",i.length,")"]}),h.jsx("div",{className:"space-y-1",children:i.map(v=>h.jsx("div",{className:ee("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10":"border-stone-600 bg-stone-800"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Le,{icon:v.icon,className:v.unlocked?"text-mantis-400":"text-stone-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:ee("font-medium",v.unlocked?"text-mantis-400":"text-stone-400"),children:v.title}),h.jsx("div",{className:"text-stone-500",children:v.description}),h.jsxs("div",{className:"mt-1",children:[h.jsx("div",{className:"h-1 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-1 rounded-full bg-mantis-400 transition-all duration-300",style:{width:`${v.current/v.requirement*100}%`}})}),h.jsxs("div",{className:"mt-1 text-stone-500",children:[v.current,"/",v.requirement]})]})]})]})},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Le,{icon:HX}),"Estadísticas"]}),h.jsxs("div",{className:"text-xs text-stone-400",children:[h.jsxs("div",{children:["Tiempo de sesión: ",Math.floor(c/60),"m ",c%60,"s"]}),h.jsxs("div",{children:["Niveles completados: ",m.length,"/",s.length]})]})]})]})]})});G$.displayName="EducationalProgress";const K$=b.createContext(null),DE=()=>{const t=b.useContext(K$);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},q$=()=>{const[t,e]=b.useState([]),[n,i]=b.useState(!1);b.useEffect(()=>{const c=localStorage.getItem("vonsim8-notifications");if(c)try{const d=JSON.parse(c);if(Array.isArray(d)){const f=d.filter(p=>p&&typeof p=="object"&&"id"in p&&"type"in p&&"title"in p&&"message"in p&&"timestamp"in p&&"read"in p).map(p=>({id:String(p.id),type:p.type,title:String(p.title),message:String(p.message),timestamp:new Date(p.timestamp),read:!!p.read}));e(f)}}catch{e([])}if(!localStorage.getItem("vonsim8-welcome-notification")){const d={id:"welcome",type:"info",title:"¡Bienvenido a VonSim8!",message:"Gracias por usar nuestro simulador. Aquí encontrarás notificaciones importantes sobre el funcionamiento de la aplicación.",timestamp:new Date,read:!1};e(f=>[d,...f]),localStorage.setItem("vonsim8-welcome-notification","true")}},[]),b.useEffect(()=>{localStorage.setItem("vonsim8-notifications",JSON.stringify(t))},[t]);const r=b.useCallback(c=>{const u={...c,id:Date.now().toString(),timestamp:new Date,read:!1};e(d=>[u,...d])},[]),s=b.useCallback(c=>{e(u=>u.map(d=>d.id===c?{...d,read:!0}:d))},[]),o=b.useCallback(()=>{e(c=>c.map(u=>({...u,read:!0})))},[]),a=b.useCallback(c=>{e(u=>u.filter(d=>d.id!==c))},[]),l=b.useCallback(()=>{e([])},[]);return{notifications:t,isOpen:n,setIsOpen:i,addNotification:r,markAsRead:s,markAllAsRead:o,deleteNotification:a,clearAll:l}},_oe=t=>b.useMemo(()=>{const e=t.length,n=t.filter(r=>!r.read).length,i=t.reduce((r,s)=>(r[s.type]=(r[s.type]||0)+1,r),{});return{total:e,unread:n,byType:i}},[t]),Y$=b.memo(({type:t})=>{const e=b.useMemo(()=>{switch(t){case"info":return{icon:G3,className:"text-blue-400"};case"success":return{icon:mL,className:"text-green-400"};case"warning":return{icon:d2,className:"text-yellow-400"};case"error":return{icon:d2,className:"text-red-400"};default:return{icon:G3,className:"text-blue-400"}}},[t]);return h.jsx(Le,{icon:e.icon,className:ee("size-4",e.className)})});Y$.displayName="NotificationIcon";const xk=b.memo(({notification:t,onMarkAsRead:e,onDelete:n})=>{const i=b.useCallback(r=>{const o=new Date().getTime()-r.getTime(),a=Math.floor(o/6e4),l=Math.floor(o/36e5),c=Math.floor(o/864e5);return c>0?`${c}d`:l>0?`${l}h`:a>0?`${a}m`:"Ahora"},[]);return h.jsx("div",{className:ee("rounded-lg border p-3 transition-colors",t.read?"border-stone-600 bg-stone-800":"border-mantis-500 bg-stone-800/80"),children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Y$,{type:t.type}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsx("h4",{className:"font-medium text-white",children:t.title}),h.jsx("button",{onClick:()=>n(t.id),className:"ml-2 rounded p-1 text-stone-400 transition-colors hover:text-white",children:h.jsx(Le,{icon:um,size:"sm"})})]}),h.jsx("p",{className:"mt-1 text-sm text-stone-300",children:t.message}),h.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-500",children:i(t.timestamp)}),h.jsxs("div",{className:"flex gap-2",children:[t.title==="Nueva versión disponible"&&h.jsx("button",{onClick:()=>{window.updateVonSim8&&window.updateVonSim8(),e(t.id)},className:"rounded bg-mantis-600 px-2 py-1 text-xs text-white transition-colors hover:bg-mantis-500",children:"Actualizar"}),!t.read&&h.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-mantis-400 transition-colors hover:text-mantis-300",children:"Marcar como leída"})]})]})]})]})})});xk.displayName="NotificationItem";const X$=b.memo(()=>{const{notifications:t,isOpen:e,setIsOpen:n,markAsRead:i,markAllAsRead:r,deleteNotification:s,clearAll:o}=q$(),{total:a,unread:l}=_oe(t),c=b.useCallback(()=>{n(f=>!f)},[n]),u=b.useMemo(()=>t.filter(f=>!f.read),[t]),d=b.useMemo(()=>t.filter(f=>f.read),[t]);return e?h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx(Le,{icon:q3,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]}),h.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Notificaciones (",a,")"]}),h.jsxs("div",{className:"flex gap-2",children:[l>0&&h.jsx(mt,{variant:"ghost",size:"sm",onClick:r,className:"text-xs text-stone-400 hover:text-white",children:"Marcar todas"}),a>0&&h.jsx(mt,{variant:"ghost",size:"sm",onClick:o,className:"text-xs text-red-400 hover:text-red-300",children:"Limpiar"})]})]}),h.jsx("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:t.length===0?h.jsx("p",{className:"text-center text-sm text-stone-500",children:"No hay notificaciones"}):h.jsxs(h.Fragment,{children:[u.length>0&&h.jsx("div",{className:"space-y-2",children:u.map(f=>h.jsx(xk,{notification:f,onMarkAsRead:i,onDelete:s},f.id))}),d.length>0&&u.length>0&&h.jsx("hr",{className:"border-stone-600"}),d.length>0&&h.jsx("div",{className:"space-y-2",children:d.map(f=>h.jsx(xk,{notification:f,onMarkAsRead:i,onDelete:s},f.id))})]})})]})]}):h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx(Le,{icon:q3,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]})});X$.displayName="NotificationCenter";const Coe=({children:t})=>{const e=q$(),n=b.useMemo(()=>({addNotification:e.addNotification,markAsRead:e.markAsRead,markAllAsRead:e.markAllAsRead,deleteNotification:e.deleteNotification,clearAll:e.clearAll,notifications:e.notifications}),[e]);return h.jsx(K$.Provider,{value:n,children:t})};function dy(t,[e,n]){return Math.min(n,Math.max(e,t))}function Eoe(t,e=globalThis==null?void 0:globalThis.document){const n=br(t);b.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var Aoe="DismissableLayer",Sk="dismissableLayer.update",Noe="dismissableLayer.pointerDownOutside",Poe="dismissableLayer.focusOutside",mR,J$=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xm=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(J$),[u,d]=b.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=b.useState({}),g=ct(e,C=>d(C)),m=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(v),w=u?m.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,_=Roe(C=>{const N=C.target,M=[...c.branches].some(O=>O.contains(N));!S||M||(r==null||r(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),E=Toe(C=>{const N=C.target;[...c.branches].some(O=>O.contains(N))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return Eoe(C=>{w===c.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),b.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(mR=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),gR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=mR)}},[u,f,n,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),gR())},[u,c]),b.useEffect(()=>{const C=()=>p({});return document.addEventListener(Sk,C),()=>document.removeEventListener(Sk,C)},[]),h.jsx(Ke.div,{...l,ref:g,style:{pointerEvents:x?S?"auto":"none":void 0,...t.style},onFocusCapture:be(t.onFocusCapture,E.onFocusCapture),onBlurCapture:be(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:be(t.onPointerDownCapture,_.onPointerDownCapture)})});xm.displayName=Aoe;var Moe="DismissableLayerBranch",Z$=b.forwardRef((t,e)=>{const n=b.useContext(J$),i=b.useRef(null),r=ct(e,i);return b.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(Ke.div,{...t,ref:r})});Z$.displayName=Moe;function Roe(t,e=globalThis==null?void 0:globalThis.document){const n=br(t),i=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){Q$(Noe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function Toe(t,e=globalThis==null?void 0:globalThis.document){const n=br(t),i=b.useRef(!1);return b.useEffect(()=>{const r=s=>{s.target&&!i.current&&Q$(Poe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function gR(){const t=new CustomEvent(Sk);document.dispatchEvent(t)}function Q$(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?dC(r,s):r.dispatchEvent(s)}var Ooe=xm,Ioe=Z$,Vx=0;function LE(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??vR()),document.body.insertAdjacentElement("beforeend",t[1]??vR()),Vx++,()=>{Vx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Vx--}},[])}function vR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Hx="focusScope.autoFocusOnMount",Wx="focusScope.autoFocusOnUnmount",yR={bubbles:!1,cancelable:!0},joe="FocusScope",Ib=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=b.useState(null),c=br(r),u=br(s),d=b.useRef(null),f=ct(e,m=>l(m)),p=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(i){let m=function(x){if(p.paused||!a)return;const S=x.target;a.contains(S)?d.current=S:xa(d.current,{select:!0})},v=function(x){if(p.paused||!a)return;const S=x.relatedTarget;S!==null&&(a.contains(S)||xa(d.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const _ of x)_.removedNodes.length>0&&xa(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),w.disconnect()}}},[i,a,p.paused]),b.useEffect(()=>{if(a){wR.add(p);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(Hx,yR);a.addEventListener(Hx,c),a.dispatchEvent(y),y.defaultPrevented||(Doe(zoe(eF(a)),{select:!0}),document.activeElement===m&&xa(a))}return()=>{a.removeEventListener(Hx,c),setTimeout(()=>{const y=new CustomEvent(Wx,yR);a.addEventListener(Wx,u),a.dispatchEvent(y),y.defaultPrevented||xa(m??document.body,{select:!0}),a.removeEventListener(Wx,u),wR.remove(p)},0)}}},[a,c,u,p]);const g=b.useCallback(m=>{if(!n&&!i||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(v&&y){const w=m.currentTarget,[x,S]=Loe(w);x&&S?!m.shiftKey&&y===S?(m.preventDefault(),n&&xa(x,{select:!0})):m.shiftKey&&y===x&&(m.preventDefault(),n&&xa(S,{select:!0})):y===w&&m.preventDefault()}},[n,i,p.paused]);return h.jsx(Ke.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Ib.displayName=joe;function Doe(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(xa(i,{select:e}),document.activeElement!==n)return}function Loe(t){const e=eF(t),n=bR(e,t),i=bR(e.reverse(),t);return[n,i]}function eF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function bR(t,e){for(const n of t)if(!$oe(n,{upTo:e}))return n}function $oe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Foe(t){return t instanceof HTMLInputElement&&"select"in t}function xa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Foe(t)&&e&&t.select()}}var wR=Boe();function Boe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=xR(t,e),t.unshift(e)},remove(e){var n;t=xR(t,e),(n=t[0])==null||n.resume()}}}function xR(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function zoe(t){return t.filter(e=>e.tagName!=="A")}const Uoe=["top","right","bottom","left"],Cl=Math.min,ar=Math.max,fy=Math.round,Dg=Math.floor,co=t=>({x:t,y:t}),Voe={left:"right",right:"left",bottom:"top",top:"bottom"},Hoe={start:"end",end:"start"};function kk(t,e,n){return ar(t,Cl(e,n))}function ia(t,e){return typeof t=="function"?t(e):t}function ra(t){return t.split("-")[0]}function cf(t){return t.split("-")[1]}function $E(t){return t==="x"?"y":"x"}function FE(t){return t==="y"?"height":"width"}const Woe=new Set(["top","bottom"]);function eo(t){return Woe.has(ra(t))?"y":"x"}function BE(t){return $E(eo(t))}function Goe(t,e,n){n===void 0&&(n=!1);const i=cf(t),r=BE(t),s=FE(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=hy(o)),[o,hy(o)]}function Koe(t){const e=hy(t);return[_k(t),e,_k(e)]}function _k(t){return t.replace(/start|end/g,e=>Hoe[e])}const SR=["left","right"],kR=["right","left"],qoe=["top","bottom"],Yoe=["bottom","top"];function Xoe(t,e,n){switch(t){case"top":case"bottom":return n?e?kR:SR:e?SR:kR;case"left":case"right":return e?qoe:Yoe;default:return[]}}function Joe(t,e,n,i){const r=cf(t);let s=Xoe(ra(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(_k)))),s}function hy(t){return t.replace(/left|right|bottom|top/g,e=>Voe[e])}function Zoe(t){return{top:0,right:0,bottom:0,left:0,...t}}function tF(t){return typeof t!="number"?Zoe(t):{top:t,right:t,bottom:t,left:t}}function py(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function _R(t,e,n){let{reference:i,floating:r}=t;const s=eo(e),o=BE(e),a=FE(o),l=ra(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(cf(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const Qoe=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=_R(c,i,l),f=i,p={},g=0;for(let m=0;m<a.length;m++){const{name:v,fn:y}=a[m],{x:w,y:x,data:S,reset:_}=await y({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=w??u,d=x??d,p={...p,[v]:{...p[v],...S}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:d}=_R(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:p}};async function Wp(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=ia(e,t),g=tF(p),v=a[f?d==="floating"?"reference":"floating":d],y=py(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},_=py(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:x,strategy:l}):w);return{top:(y.top-_.top+g.top)/S.y,bottom:(_.bottom-y.bottom+g.bottom)/S.y,left:(y.left-_.left+g.left)/S.x,right:(_.right-y.right+g.right)/S.x}}const eae=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ia(t,e)||{};if(c==null)return{};const d=tF(u),f={x:n,y:i},p=BE(r),g=FE(p),m=await o.getDimensions(c),v=p==="y",y=v?"top":"left",w=v?"bottom":"right",x=v?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[p]-f[p]-s.floating[g],_=f[p]-s.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=E?E[x]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[x]||s.floating[g]);const N=S/2-_/2,M=C/2-m[g]/2-1,O=Cl(d[y],M),D=Cl(d[w],M),j=O,K=C-m[g]-D,$=C/2-m[g]/2+N,G=kk(j,$,K),X=!l.arrow&&cf(r)!=null&&$!==G&&s.reference[g]/2-($<j?O:D)-m[g]/2<0,Z=X?$<j?$-j:$-K:0;return{[p]:f[p]+Z,data:{[p]:G,centerOffset:$-G-Z,...X&&{alignmentOffset:Z}},reset:X}}}),tae=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=ia(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ra(r),w=eo(a),x=ra(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(x||!m?[hy(a)]:Koe(a)),E=g!=="none";!f&&E&&_.push(...Joe(a,m,g,S));const C=[a,..._],N=await Wp(e,v),M=[];let O=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&M.push(N[y]),d){const $=Goe(r,o,S);M.push(N[$[0]],N[$[1]])}if(O=[...O,{placement:r,overflows:M}],!M.every($=>$<=0)){var D,j;const $=(((D=s.flip)==null?void 0:D.index)||0)+1,G=C[$];if(G&&(!(d==="alignment"?w!==eo(G):!1)||O.every(V=>V.overflows[0]>0&&eo(V.placement)===w)))return{data:{index:$,overflows:O},reset:{placement:G}};let X=(j=O.filter(Z=>Z.overflows[0]<=0).sort((Z,V)=>Z.overflows[1]-V.overflows[1])[0])==null?void 0:j.placement;if(!X)switch(p){case"bestFit":{var K;const Z=(K=O.filter(V=>{if(E){const B=eo(V.placement);return B===w||B==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(B=>B>0).reduce((B,ie)=>B+ie,0)]).sort((V,B)=>V[1]-B[1])[0])==null?void 0:K[0];Z&&(X=Z);break}case"initialPlacement":X=a;break}if(r!==X)return{reset:{placement:X}}}return{}}}};function CR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ER(t){return Uoe.some(e=>t[e]>=0)}const nae=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=ia(t,e);switch(i){case"referenceHidden":{const s=await Wp(e,{...r,elementContext:"reference"}),o=CR(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ER(o)}}}case"escaped":{const s=await Wp(e,{...r,altBoundary:!0}),o=CR(s,n.floating);return{data:{escapedOffsets:o,escaped:ER(o)}}}default:return{}}}}},nF=new Set(["left","top"]);async function iae(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=ra(n),a=cf(n),l=eo(n)==="y",c=nF.has(o)?-1:1,u=s&&l?-1:1,d=ia(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const rae=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await iae(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},sae=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:w}=v;return{x:y,y:w}}},...l}=ia(t,e),c={x:n,y:i},u=await Wp(e,l),d=eo(ra(r)),f=$E(d);let p=c[f],g=c[d];if(s){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=p+u[v],x=p-u[y];p=kk(w,p,x)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=g+u[v],x=g-u[y];g=kk(w,g,x)}const m=a.fn({...e,[f]:p,[d]:g});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[f]:s,[d]:o}}}}}},oae=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ia(t,e),u={x:n,y:i},d=eo(r),f=$E(d);let p=u[f],g=u[d];const m=ia(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",S=s.reference[f]-s.floating[x]+v.mainAxis,_=s.reference[f]+s.reference[x]-v.mainAxis;p<S?p=S:p>_&&(p=_)}if(c){var y,w;const x=f==="y"?"width":"height",S=nF.has(ra(r)),_=s.reference[d]-s.floating[x]+(S&&((y=o.offset)==null?void 0:y[d])||0)+(S?0:v.crossAxis),E=s.reference[d]+s.reference[x]+(S?0:((w=o.offset)==null?void 0:w[d])||0)-(S?v.crossAxis:0);g<_?g=_:g>E&&(g=E)}return{[f]:p,[d]:g}}}},aae=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ia(t,e),u=await Wp(e,c),d=ra(r),f=cf(r),p=eo(r)==="y",{width:g,height:m}=s.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,v=f==="end"?"top":"bottom");const w=m-u.top-u.bottom,x=g-u.left-u.right,S=Cl(m-u[v],w),_=Cl(g-u[y],x),E=!e.middlewareData.shift;let C=S,N=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=x),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=w),E&&!f){const O=ar(u.left,0),D=ar(u.right,0),j=ar(u.top,0),K=ar(u.bottom,0);p?N=g-2*(O!==0||D!==0?O+D:ar(u.left,u.right)):C=m-2*(j!==0||K!==0?j+K:ar(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:C});const M=await o.getDimensions(a.floating);return g!==M.width||m!==M.height?{reset:{rects:!0}}:{}}}};function jb(){return typeof window<"u"}function uf(t){return iF(t)?(t.nodeName||"").toLowerCase():"#document"}function vr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function yo(t){var e;return(e=(iF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function iF(t){return jb()?t instanceof Node||t instanceof vr(t).Node:!1}function Ss(t){return jb()?t instanceof Element||t instanceof vr(t).Element:!1}function go(t){return jb()?t instanceof HTMLElement||t instanceof vr(t).HTMLElement:!1}function AR(t){return!jb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof vr(t).ShadowRoot}const lae=new Set(["inline","contents"]);function Sm(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=ks(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!lae.has(r)}const cae=new Set(["table","td","th"]);function uae(t){return cae.has(uf(t))}const dae=[":popover-open",":modal"];function Db(t){return dae.some(e=>{try{return t.matches(e)}catch{return!1}})}const fae=["transform","translate","scale","rotate","perspective"],hae=["transform","translate","scale","rotate","perspective","filter"],pae=["paint","layout","strict","content"];function zE(t){const e=UE(),n=Ss(t)?ks(t):t;return fae.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||hae.some(i=>(n.willChange||"").includes(i))||pae.some(i=>(n.contain||"").includes(i))}function mae(t){let e=El(t);for(;go(e)&&!Kd(e);){if(zE(e))return e;if(Db(e))return null;e=El(e)}return null}function UE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const gae=new Set(["html","body","#document"]);function Kd(t){return gae.has(uf(t))}function ks(t){return vr(t).getComputedStyle(t)}function Lb(t){return Ss(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function El(t){if(uf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||AR(t)&&t.host||yo(t);return AR(e)?e.host:e}function rF(t){const e=El(t);return Kd(e)?t.ownerDocument?t.ownerDocument.body:t.body:go(e)&&Sm(e)?e:rF(e)}function Gp(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=rF(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=vr(r);if(s){const a=Ck(o);return e.concat(o,o.visualViewport||[],Sm(r)?r:[],a&&n?Gp(a):[])}return e.concat(r,Gp(r,[],n))}function Ck(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function sF(t){const e=ks(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=go(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=fy(n)!==s||fy(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function VE(t){return Ss(t)?t:t.contextElement}function dd(t){const e=VE(t);if(!go(e))return co(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=sF(e);let o=(s?fy(n.width):n.width)/i,a=(s?fy(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const vae=co(0);function oF(t){const e=vr(t);return!UE()||!e.visualViewport?vae:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yae(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==vr(t)?!1:e}function Kc(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=VE(t);let o=co(1);e&&(i?Ss(i)&&(o=dd(i)):o=dd(t));const a=yae(s,n,i)?oF(s):co(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=vr(s),p=i&&Ss(i)?vr(i):i;let g=f,m=Ck(g);for(;m&&i&&p!==g;){const v=dd(m),y=m.getBoundingClientRect(),w=ks(m),x=y.left+(m.clientLeft+parseFloat(w.paddingLeft))*v.x,S=y.top+(m.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=x,c+=S,g=vr(m),m=Ck(g)}}return py({width:u,height:d,x:l,y:c})}function HE(t,e){const n=Lb(t).scrollLeft;return e?e.left+n:Kc(yo(t)).left+n}function aF(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:HE(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function bae(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=yo(i),a=e?Db(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=co(1);const u=co(0),d=go(i);if((d||!d&&!s)&&((uf(i)!=="body"||Sm(o))&&(l=Lb(i)),go(i))){const p=Kc(i);c=dd(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const f=o&&!d&&!s?aF(o,l,!0):co(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function wae(t){return Array.from(t.getClientRects())}function xae(t){const e=yo(t),n=Lb(t),i=t.ownerDocument.body,r=ar(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=ar(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+HE(t);const a=-n.scrollTop;return ks(i).direction==="rtl"&&(o+=ar(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Sae(t,e){const n=vr(t),i=yo(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=UE();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}const kae=new Set(["absolute","fixed"]);function _ae(t,e){const n=Kc(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=go(t)?dd(t):co(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function NR(t,e,n){let i;if(e==="viewport")i=Sae(t,n);else if(e==="document")i=xae(yo(t));else if(Ss(e))i=_ae(e,n);else{const r=oF(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return py(i)}function lF(t,e){const n=El(t);return n===e||!Ss(n)||Kd(n)?!1:ks(n).position==="fixed"||lF(n,e)}function Cae(t,e){const n=e.get(t);if(n)return n;let i=Gp(t,[],!1).filter(a=>Ss(a)&&uf(a)!=="body"),r=null;const s=ks(t).position==="fixed";let o=s?El(t):t;for(;Ss(o)&&!Kd(o);){const a=ks(o),l=zE(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&kae.has(r.position)||Sm(o)&&!l&&lF(t,o))?i=i.filter(u=>u!==o):r=a,o=El(o)}return e.set(t,i),i}function Eae(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?Db(e)?[]:Cae(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=NR(e,u,r);return c.top=ar(d.top,c.top),c.right=Cl(d.right,c.right),c.bottom=Cl(d.bottom,c.bottom),c.left=ar(d.left,c.left),c},NR(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Aae(t){const{width:e,height:n}=sF(t);return{width:e,height:n}}function Nae(t,e,n){const i=go(e),r=yo(e),s=n==="fixed",o=Kc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=co(0);function c(){l.x=HE(r)}if(i||!i&&!s)if((uf(e)!=="body"||Sm(r))&&(a=Lb(e)),i){const p=Kc(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=r&&!i&&!s?aF(r,a):co(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function Gx(t){return ks(t).position==="static"}function PR(t,e){if(!go(t)||ks(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return yo(t)===n&&(n=n.ownerDocument.body),n}function cF(t,e){const n=vr(t);if(Db(t))return n;if(!go(t)){let r=El(t);for(;r&&!Kd(r);){if(Ss(r)&&!Gx(r))return r;r=El(r)}return n}let i=PR(t,e);for(;i&&uae(i)&&Gx(i);)i=PR(i,e);return i&&Kd(i)&&Gx(i)&&!zE(i)?n:i||mae(t)||n}const Pae=async function(t){const e=this.getOffsetParent||cF,n=this.getDimensions,i=await n(t.floating);return{reference:Nae(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Mae(t){return ks(t).direction==="rtl"}const Rae={convertOffsetParentRelativeRectToViewportRelativeRect:bae,getDocumentElement:yo,getClippingRect:Eae,getOffsetParent:cF,getElementRects:Pae,getClientRects:wae,getDimensions:Aae,getScale:dd,isElement:Ss,isRTL:Mae};function uF(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Tae(t,e){let n=null,i;const r=yo(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||e(),!f||!p)return;const g=Dg(d),m=Dg(r.clientWidth-(u+f)),v=Dg(r.clientHeight-(d+p)),y=Dg(u),x={rootMargin:-g+"px "+-m+"px "+-v+"px "+-y+"px",threshold:ar(0,Cl(1,l))||1};let S=!0;function _(E){const C=E[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!uF(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(_,{...x,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,x)}n.observe(t)}return o(!0),s}function Oae(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=VE(t),u=r||s?[...c?Gp(c):[],...Gp(e)]:[];u.forEach(y=>{r&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?Tae(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[w]=y;w&&w.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?Kc(t):null;l&&v();function v(){const y=Kc(t);m&&!uF(m,y)&&n(),m=y,g=requestAnimationFrame(v)}return n(),()=>{var y;u.forEach(w=>{r&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const Iae=rae,jae=sae,Dae=tae,Lae=aae,$ae=nae,MR=eae,Fae=oae,Bae=(t,e,n)=>{const i=new Map,r={platform:Rae,...n},s={...r.platform,_c:i};return Qoe(t,e,{...r,platform:s})};var zae=typeof document<"u",Uae=function(){},z0=zae?b.useLayoutEffect:Uae;function my(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!my(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!my(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function dF(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function RR(t,e){const n=dF(t);return Math.round(e*n)/n}function Kx(t){const e=b.useRef(t);return z0(()=>{e.current=t}),e}function Vae(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=b.useState(i);my(f,i)||p(i);const[g,m]=b.useState(null),[v,y]=b.useState(null),w=b.useCallback(V=>{V!==E.current&&(E.current=V,m(V))},[]),x=b.useCallback(V=>{V!==C.current&&(C.current=V,y(V))},[]),S=s||g,_=o||v,E=b.useRef(null),C=b.useRef(null),N=b.useRef(u),M=l!=null,O=Kx(l),D=Kx(r),j=Kx(c),K=b.useCallback(()=>{if(!E.current||!C.current)return;const V={placement:e,strategy:n,middleware:f};D.current&&(V.platform=D.current),Bae(E.current,C.current,V).then(B=>{const ie={...B,isPositioned:j.current!==!1};$.current&&!my(N.current,ie)&&(N.current=ie,Ol.flushSync(()=>{d(ie)}))})},[f,e,n,D,j]);z0(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(V=>({...V,isPositioned:!1})))},[c]);const $=b.useRef(!1);z0(()=>($.current=!0,()=>{$.current=!1}),[]),z0(()=>{if(S&&(E.current=S),_&&(C.current=_),S&&_){if(O.current)return O.current(S,_,K);K()}},[S,_,K,O,M]);const G=b.useMemo(()=>({reference:E,floating:C,setReference:w,setFloating:x}),[w,x]),X=b.useMemo(()=>({reference:S,floating:_}),[S,_]),Z=b.useMemo(()=>{const V={position:n,left:0,top:0};if(!X.floating)return V;const B=RR(X.floating,u.x),ie=RR(X.floating,u.y);return a?{...V,transform:"translate("+B+"px, "+ie+"px)",...dF(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:ie}},[n,a,X.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:K,refs:G,elements:X,floatingStyles:Z}),[u,K,G,X,Z])}const Hae=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?MR({element:i.current,padding:r}).fn(n):{}:i?MR({element:i,padding:r}).fn(n):{}}}},Wae=(t,e)=>({...Iae(t),options:[t,e]}),Gae=(t,e)=>({...jae(t),options:[t,e]}),Kae=(t,e)=>({...Fae(t),options:[t,e]}),qae=(t,e)=>({...Dae(t),options:[t,e]}),Yae=(t,e)=>({...Lae(t),options:[t,e]}),Xae=(t,e)=>({...$ae(t),options:[t,e]}),Jae=(t,e)=>({...Hae(t),options:[t,e]});var Zae="Arrow",fF=b.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return h.jsx(Ke.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});fF.displayName=Zae;var Qae=fF;function WE(t){const[e,n]=b.useState(void 0);return Qn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var GE="Popper",[hF,df]=_s(GE),[ele,pF]=hF(GE),mF=t=>{const{__scopePopper:e,children:n}=t,[i,r]=b.useState(null);return h.jsx(ele,{scope:e,anchor:i,onAnchorChange:r,children:n})};mF.displayName=GE;var gF="PopperAnchor",vF=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=pF(gF,n),o=b.useRef(null),a=ct(e,o);return b.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:h.jsx(Ke.div,{...r,ref:a})});vF.displayName=gF;var KE="PopperContent",[tle,nle]=hF(KE),yF=b.forwardRef((t,e)=>{var k,P,I,T,Y,W;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,v=pF(KE,n),[y,w]=b.useState(null),x=ct(e,ne=>w(ne)),[S,_]=b.useState(null),E=WE(S),C=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,M=i+(s!=="center"?"-"+s:""),O=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(c)?c:[c],j=D.length>0,K={padding:O,boundary:D.filter(rle),altBoundary:j},{refs:$,floatingStyles:G,placement:X,isPositioned:Z,middlewareData:V}=Vae({strategy:"fixed",placement:M,whileElementsMounted:(...ne)=>Oae(...ne,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[Wae({mainAxis:r+N,alignmentAxis:o}),l&&Gae({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Kae():void 0,...K}),l&&qae({...K}),Yae({...K,apply:({elements:ne,rects:Q,availableWidth:Pe,availableHeight:ze})=>{const{width:Ve,height:$e}=Q.reference,Je=ne.floating.style;Je.setProperty("--radix-popper-available-width",`${Pe}px`),Je.setProperty("--radix-popper-available-height",`${ze}px`),Je.setProperty("--radix-popper-anchor-width",`${Ve}px`),Je.setProperty("--radix-popper-anchor-height",`${$e}px`)}}),S&&Jae({element:S,padding:a}),sle({arrowWidth:C,arrowHeight:N}),f&&Xae({strategy:"referenceHidden",...K})]}),[B,ie]=xF(X),pe=br(g);Qn(()=>{Z&&(pe==null||pe())},[Z,pe]);const J=(k=V.arrow)==null?void 0:k.x,le=(P=V.arrow)==null?void 0:P.y,F=((I=V.arrow)==null?void 0:I.centerOffset)!==0,[L,U]=b.useState();return Qn(()=>{y&&U(window.getComputedStyle(y).zIndex)},[y]),h.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:Z?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:L,"--radix-popper-transform-origin":[(T=V.transformOrigin)==null?void 0:T.x,(Y=V.transformOrigin)==null?void 0:Y.y].join(" "),...((W=V.hide)==null?void 0:W.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(tle,{scope:n,placedSide:B,onArrowChange:_,arrowX:J,arrowY:le,shouldHideArrow:F,children:h.jsx(Ke.div,{"data-side":B,"data-align":ie,...m,ref:x,style:{...m.style,animation:Z?void 0:"none"}})})})});yF.displayName=KE;var bF="PopperArrow",ile={top:"bottom",right:"left",bottom:"top",left:"right"},wF=b.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=nle(bF,i),o=ile[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(Qae,{...r,ref:n,style:{...r.style,display:"block"}})})});wF.displayName=bF;function rle(t){return t!==null}var sle=t=>({name:"transformOrigin",options:t,fn(e){var v,y,w;const{placement:n,rects:i,middlewareData:r}=e,o=((v=r.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=xF(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=r.arrow)==null?void 0:y.x)??0)+a/2,p=(((w=r.arrow)==null?void 0:w.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=o?d:`${f}px`,m=`${-l}px`):c==="top"?(g=o?d:`${f}px`,m=`${i.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=o?d:`${p}px`):c==="left"&&(g=`${i.floating.width+l}px`,m=o?d:`${p}px`),{data:{x:g,y:m}}}});function xF(t){const[e,n="center"]=t.split("-");return[e,n]}var SF=mF,$b=vF,qE=yF,YE=wF,ole="Portal",km=b.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=b.useState(!1);Qn(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?QG.createPortal(h.jsx(Ke.div,{...i,ref:e}),o):null});km.displayName=ole;function XE(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var kF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ale="VisuallyHidden",JE=b.forwardRef((t,e)=>h.jsx(Ke.span,{...t,ref:e,style:{...kF,...t.style}}));JE.displayName=ale;var lle=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},pu=new WeakMap,Lg=new WeakMap,$g={},qx=0,_F=function(t){return t&&(t.host||_F(t.parentNode))},cle=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=_F(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},ule=function(t,e,n,i){var r=cle(e,Array.isArray(t)?t:[t]);$g[n]||($g[n]=new WeakMap);var s=$g[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(pu.get(f)||0)+1,v=(s.get(f)||0)+1;pu.set(f,m),s.set(f,v),o.push(f),m===1&&g&&Lg.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),qx++,function(){o.forEach(function(d){var f=pu.get(d)-1,p=s.get(d)-1;pu.set(d,f),s.set(d,p),f||(Lg.has(d)||d.removeAttribute(i),Lg.delete(d)),p||d.removeAttribute(n)}),qx--,qx||(pu=new WeakMap,pu=new WeakMap,Lg=new WeakMap,$g={})}},CF=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=lle(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),ule(i,r,n,"aria-hidden")):function(){return null}},U0="right-scroll-bar-position",V0="width-before-scroll-bar",dle="with-scroll-bars-hidden",fle="--removed-body-scroll-bar-size";function Yx(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function hle(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var ple=typeof window<"u"?b.useLayoutEffect:b.useEffect,TR=new WeakMap;function mle(t,e){var n=hle(null,function(i){return t.forEach(function(r){return Yx(r,i)})});return ple(function(){var i=TR.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||Yx(a,null)}),s.forEach(function(a){r.has(a)||Yx(a,o)})}TR.set(n,t)},[t]),n}function gle(t){return t}function vle(t,e){e===void 0&&(e=gle);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function yle(t){t===void 0&&(t={});var e=vle(null);return e.options=Gs({async:!0,ssr:!1},t),e}var EF=function(t){var e=t.sideCar,n=SD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return b.createElement(i,Gs({},n))};EF.isSideCarExport=!0;function ble(t,e){return t.useMedium(e),EF}var AF=yle(),Xx=function(){},Fb=b.forwardRef(function(t,e){var n=b.useRef(null),i=b.useState({onScrollCapture:Xx,onWheelCapture:Xx,onTouchMoveCapture:Xx}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noRelative,g=t.noIsolation,m=t.inert,v=t.allowPinchZoom,y=t.as,w=y===void 0?"div":y,x=t.gapMode,S=SD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,E=mle([n,e]),C=Gs(Gs({},S),r);return b.createElement(b.Fragment,null,u&&b.createElement(_,{sideCar:AF,removeScrollBar:c,shards:d,noRelative:p,noIsolation:g,inert:m,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:x}),o?b.cloneElement(b.Children.only(a),Gs(Gs({},C),{ref:E})):b.createElement(w,Gs({},C,{className:l,ref:E}),a))});Fb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fb.classNames={fullWidth:V0,zeroRight:U0};var wle=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xle(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wle();return e&&t.setAttribute("nonce",e),t}function Sle(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function kle(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var _le=function(){var t=0,e=null;return{add:function(n){t==0&&(e=xle())&&(Sle(e,n),kle(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Cle=function(){var t=_le();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},NF=function(){var t=Cle(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},Ele={left:0,top:0,right:0,gap:0},Jx=function(t){return parseInt(t||"",10)||0},Ale=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Jx(n),Jx(i),Jx(r)]},Nle=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Ele;var e=Ale(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},Ple=NF(),fd="data-scroll-locked",Mle=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(dle,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(fd,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(U0,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(V0,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(U0," .").concat(U0,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(V0," .").concat(V0,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(fd,`] {
    `).concat(fle,": ").concat(a,`px;
  }
`)},OR=function(){var t=parseInt(document.body.getAttribute(fd)||"0",10);return isFinite(t)?t:0},Rle=function(){b.useEffect(function(){return document.body.setAttribute(fd,(OR()+1).toString()),function(){var t=OR()-1;t<=0?document.body.removeAttribute(fd):document.body.setAttribute(fd,t.toString())}},[])},Tle=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;Rle();var s=b.useMemo(function(){return Nle(r)},[r]);return b.createElement(Ple,{styles:Mle(s,!e,r,n?"":"!important")})},Ek=!1;if(typeof window<"u")try{var Fg=Object.defineProperty({},"passive",{get:function(){return Ek=!0,!0}});window.addEventListener("test",Fg,Fg),window.removeEventListener("test",Fg,Fg)}catch{Ek=!1}var mu=Ek?{passive:!1}:!1,Ole=function(t){return t.tagName==="TEXTAREA"},PF=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Ole(t)&&n[e]==="visible")},Ile=function(t){return PF(t,"overflowY")},jle=function(t){return PF(t,"overflowX")},IR=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=MF(t,i);if(r){var s=RF(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},Dle=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},Lle=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},MF=function(t,e){return t==="v"?Ile(e):jle(e)},RF=function(t,e){return t==="v"?Dle(e):Lle(e)},$le=function(t,e){return t==="h"&&e==="rtl"?-1:1},Fle=function(t,e,n,i,r){var s=$le(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var p=RF(t,a),g=p[0],m=p[1],v=p[2],y=m-v-s*g;(g||y)&&MF(t,a)&&(d+=y,f+=g);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Bg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},jR=function(t){return[t.deltaX,t.deltaY]},DR=function(t){return t&&"current"in t?t.current:t},Ble=function(t,e){return t[0]===e[0]&&t[1]===e[1]},zle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Ule=0,gu=[];function Vle(t){var e=b.useRef([]),n=b.useRef([0,0]),i=b.useRef(),r=b.useState(Ule++)[0],s=b.useState(NF)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=oq([t.lockRef.current],(t.shards||[]).map(DR),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=Bg(m),w=n.current,x="deltaX"in m?m.deltaX:w[0]-y[0],S="deltaY"in m?m.deltaY:w[1]-y[1],_,E=m.target,C=Math.abs(x)>Math.abs(S)?"h":"v";if("touches"in m&&C==="h"&&E.type==="range")return!1;var N=IR(C,E);if(!N)return!0;if(N?_=C:(_=C==="v"?"h":"v",N=IR(C,E)),!N)return!1;if(!i.current&&"changedTouches"in m&&(x||S)&&(i.current=_),!_)return!0;var M=i.current||_;return Fle(M,v,m,M==="h"?x:S)},[]),l=b.useCallback(function(m){var v=m;if(!(!gu.length||gu[gu.length-1]!==s)){var y="deltaY"in v?jR(v):Bg(v),w=e.current.filter(function(_){return _.name===v.type&&(_.target===v.target||v.target===_.shadowParent)&&Ble(_.delta,y)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var x=(o.current.shards||[]).map(DR).filter(Boolean).filter(function(_){return _.contains(v.target)}),S=x.length>0?a(v,x[0]):!o.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),c=b.useCallback(function(m,v,y,w){var x={name:m,delta:v,target:y,should:w,shadowParent:Hle(y)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(S){return S!==x})},1)},[]),u=b.useCallback(function(m){n.current=Bg(m),i.current=void 0},[]),d=b.useCallback(function(m){c(m.type,jR(m),m.target,a(m,t.lockRef.current))},[]),f=b.useCallback(function(m){c(m.type,Bg(m),m.target,a(m,t.lockRef.current))},[]);b.useEffect(function(){return gu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,mu),document.addEventListener("touchmove",l,mu),document.addEventListener("touchstart",u,mu),function(){gu=gu.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,mu),document.removeEventListener("touchmove",l,mu),document.removeEventListener("touchstart",u,mu)}},[]);var p=t.removeScrollBar,g=t.inert;return b.createElement(b.Fragment,null,g?b.createElement(s,{styles:zle(r)}):null,p?b.createElement(Tle,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Hle(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Wle=ble(AF,Vle);var Bb=b.forwardRef(function(t,e){return b.createElement(Fb,Gs({},t,{ref:e,sideCar:Wle}))});Bb.classNames=Fb.classNames;var Gle=[" ","Enter","ArrowUp","ArrowDown"],Kle=[" ","Enter"],qc="Select",[zb,Ub,qle]=sm(qc),[ff,rve]=_s(qc,[qle,df]),Vb=df(),[Yle,Dl]=ff(qc),[Xle,Jle]=ff(qc),TF=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:g}=t,m=Vb(e),[v,y]=b.useState(null),[w,x]=b.useState(null),[S,_]=b.useState(!1),E=tb(c),[C,N]=pl({prop:i,defaultProp:r??!1,onChange:s,caller:qc}),[M,O]=pl({prop:o,defaultProp:a,onChange:l,caller:qc}),D=b.useRef(null),j=v?g||!!v.closest("form"):!0,[K,$]=b.useState(new Set),G=Array.from(K).map(X=>X.props.value).join(";");return h.jsx(SF,{...m,children:h.jsxs(Yle,{required:p,scope:e,trigger:v,onTriggerChange:y,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:S,onValueNodeHasChildrenChange:_,contentId:nf(),value:M,onValueChange:O,open:C,onOpenChange:N,dir:E,triggerPointerDownPosRef:D,disabled:f,children:[h.jsx(zb.Provider,{scope:e,children:h.jsx(Xle,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(X=>{$(Z=>new Set(Z).add(X))},[]),onNativeOptionRemove:b.useCallback(X=>{$(Z=>{const V=new Set(Z);return V.delete(X),V})},[]),children:n})}),j?h.jsxs(JF,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:M,onChange:X=>O(X.target.value),disabled:f,form:g,children:[M===void 0?h.jsx("option",{value:""}):null,Array.from(K)]},G):null]})})};TF.displayName=qc;var OF="SelectTrigger",IF=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=Vb(n),o=Dl(OF,n),a=o.disabled||i,l=ct(e,o.onTriggerChange),c=Ub(n),u=b.useRef("touch"),[d,f,p]=QF(m=>{const v=c().filter(x=>!x.disabled),y=v.find(x=>x.value===o.value),w=e9(v,m,y);w!==void 0&&o.onValueChange(w.value)}),g=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx($b,{asChild:!0,...s,children:h.jsx(Ke.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":ZF(o.value)?"":void 0,...r,ref:l,onClick:be(r.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:be(r.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:be(r.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(v&&m.key===" ")&&Gle.includes(m.key)&&(g(),m.preventDefault())})})})});IF.displayName=OF;var jF="SelectValue",DF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=Dl(jF,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=ct(e,l.onValueNodeChange);return Qn(()=>{c(u)},[c,u]),h.jsx(Ke.span,{...a,ref:d,style:{pointerEvents:"none"},children:ZF(l.value)?h.jsx(h.Fragment,{children:o}):s})});DF.displayName=jF;var Zle="SelectIcon",LF=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return h.jsx(Ke.span,{"aria-hidden":!0,...r,ref:e,children:i||"▼"})});LF.displayName=Zle;var Qle="SelectPortal",$F=t=>h.jsx(km,{asChild:!0,...t});$F.displayName=Qle;var Yc="SelectContent",FF=b.forwardRef((t,e)=>{const n=Dl(Yc,t.__scopeSelect),[i,r]=b.useState();if(Qn(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Ol.createPortal(h.jsx(BF,{scope:t.__scopeSelect,children:h.jsx(zb.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(zF,{...t,ref:e})});FF.displayName=Yc;var ts=10,[BF,Ll]=ff(Yc),ece="SelectContentImpl",tce=Od("SelectContent.RemoveScroll"),zF=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v,...y}=t,w=Dl(Yc,n),[x,S]=b.useState(null),[_,E]=b.useState(null),C=ct(e,k=>S(k)),[N,M]=b.useState(null),[O,D]=b.useState(null),j=Ub(n),[K,$]=b.useState(!1),G=b.useRef(!1);b.useEffect(()=>{if(x)return CF(x)},[x]),LE();const X=b.useCallback(k=>{const[P,...I]=j().map(W=>W.ref.current),[T]=I.slice(-1),Y=document.activeElement;for(const W of k)if(W===Y||(W==null||W.scrollIntoView({block:"nearest"}),W===P&&_&&(_.scrollTop=0),W===T&&_&&(_.scrollTop=_.scrollHeight),W==null||W.focus(),document.activeElement!==Y))return},[j,_]),Z=b.useCallback(()=>X([N,x]),[X,N,x]);b.useEffect(()=>{K&&Z()},[K,Z]);const{onOpenChange:V,triggerPointerDownPosRef:B}=w;b.useEffect(()=>{if(x){let k={x:0,y:0};const P=T=>{var Y,W;k={x:Math.abs(Math.round(T.pageX)-(((Y=B.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(T.pageY)-(((W=B.current)==null?void 0:W.y)??0))}},I=T=>{k.x<=10&&k.y<=10?T.preventDefault():x.contains(T.target)||V(!1),document.removeEventListener("pointermove",P),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",I,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",I,{capture:!0})}}},[x,V,B]),b.useEffect(()=>{const k=()=>V(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[V]);const[ie,pe]=QF(k=>{const P=j().filter(Y=>!Y.disabled),I=P.find(Y=>Y.ref.current===document.activeElement),T=e9(P,k,I);T&&setTimeout(()=>T.ref.current.focus())}),J=b.useCallback((k,P,I)=>{const T=!G.current&&!I;(w.value!==void 0&&w.value===P||T)&&(M(k),T&&(G.current=!0))},[w.value]),le=b.useCallback(()=>x==null?void 0:x.focus(),[x]),F=b.useCallback((k,P,I)=>{const T=!G.current&&!I;(w.value!==void 0&&w.value===P||T)&&D(k)},[w.value]),L=i==="popper"?Ak:UF,U=L===Ak?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v}:{};return h.jsx(BF,{scope:n,content:x,viewport:_,onViewportChange:E,itemRefCallback:J,selectedItem:N,onItemLeave:le,itemTextRefCallback:F,focusSelectedItem:Z,selectedItemText:O,position:i,isPositioned:K,searchRef:ie,children:h.jsx(Bb,{as:tce,allowPinchZoom:!0,children:h.jsx(Ib,{asChild:!0,trapped:w.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:be(r,k=>{var P;(P=w.trigger)==null||P.focus({preventScroll:!0}),k.preventDefault()}),children:h.jsx(xm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:h.jsx(L,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:k=>k.preventDefault(),...y,...U,onPlaced:()=>$(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:be(y.onKeyDown,k=>{const P=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!P&&k.key.length===1&&pe(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let T=j().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(k.key)&&(T=T.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const Y=k.target,W=T.indexOf(Y);T=T.slice(W+1)}setTimeout(()=>X(T)),k.preventDefault()}})})})})})})});zF.displayName=ece;var nce="SelectItemAlignedPosition",UF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Dl(Yc,n),o=Ll(Yc,n),[a,l]=b.useState(null),[c,u]=b.useState(null),d=ct(e,C=>u(C)),f=Ub(n),p=b.useRef(!1),g=b.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:y,focusSelectedItem:w}=o,x=b.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&v&&y){const C=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),M=s.valueNode.getBoundingClientRect(),O=y.getBoundingClientRect();if(s.dir!=="rtl"){const Y=O.left-N.left,W=M.left-Y,ne=C.left-W,Q=C.width+ne,Pe=Math.max(Q,N.width),ze=window.innerWidth-ts,Ve=dy(W,[ts,Math.max(ts,ze-Pe)]);a.style.minWidth=Q+"px",a.style.left=Ve+"px"}else{const Y=N.right-O.right,W=window.innerWidth-M.right-Y,ne=window.innerWidth-C.right-W,Q=C.width+ne,Pe=Math.max(Q,N.width),ze=window.innerWidth-ts,Ve=dy(W,[ts,Math.max(ts,ze-Pe)]);a.style.minWidth=Q+"px",a.style.right=Ve+"px"}const D=f(),j=window.innerHeight-ts*2,K=m.scrollHeight,$=window.getComputedStyle(c),G=parseInt($.borderTopWidth,10),X=parseInt($.paddingTop,10),Z=parseInt($.borderBottomWidth,10),V=parseInt($.paddingBottom,10),B=G+X+K+V+Z,ie=Math.min(v.offsetHeight*5,B),pe=window.getComputedStyle(m),J=parseInt(pe.paddingTop,10),le=parseInt(pe.paddingBottom,10),F=C.top+C.height/2-ts,L=j-F,U=v.offsetHeight/2,k=v.offsetTop+U,P=G+X+k,I=B-P;if(P<=F){const Y=D.length>0&&v===D[D.length-1].ref.current;a.style.bottom="0px";const W=c.clientHeight-m.offsetTop-m.offsetHeight,ne=Math.max(L,U+(Y?le:0)+W+Z),Q=P+ne;a.style.height=Q+"px"}else{const Y=D.length>0&&v===D[0].ref.current;a.style.top="0px";const ne=Math.max(F,G+m.offsetTop+(Y?J:0)+U)+I;a.style.height=ne+"px",m.scrollTop=P-F+m.offsetTop}a.style.margin=`${ts}px 0`,a.style.minHeight=ie+"px",a.style.maxHeight=j+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,v,y,s.dir,i]);Qn(()=>x(),[x]);const[S,_]=b.useState();Qn(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const E=b.useCallback(C=>{C&&g.current===!0&&(x(),w==null||w(),g.current=!1)},[x,w]);return h.jsx(rce,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:h.jsx(Ke.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});UF.displayName=nce;var ice="SelectPopperPosition",Ak=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=ts,...s}=t,o=Vb(n);return h.jsx(qE,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ak.displayName=ice;var[rce,ZE]=ff(Yc,{}),Nk="SelectViewport",VF=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=Ll(Nk,n),o=ZE(Nk,n),a=ct(e,s.onViewportChange),l=b.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),h.jsx(zb.Slot,{scope:n,children:h.jsx(Ke.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:be(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-ts*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),y=Math.max(m,v);if(y<g){const w=y+p,x=Math.min(g,w),S=w-x;d.style.height=x+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});VF.displayName=Nk;var HF="SelectGroup",[sce,oce]=ff(HF),ace=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=nf();return h.jsx(sce,{scope:n,id:r,children:h.jsx(Ke.div,{role:"group","aria-labelledby":r,...i,ref:e})})});ace.displayName=HF;var WF="SelectLabel",lce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=oce(WF,n);return h.jsx(Ke.div,{id:r.id,...i,ref:e})});lce.displayName=WF;var gy="SelectItem",[cce,GF]=ff(gy),KF=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Dl(gy,n),l=Ll(gy,n),c=a.value===i,[u,d]=b.useState(s??""),[f,p]=b.useState(!1),g=ct(e,w=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,w,i,r)}),m=nf(),v=b.useRef("touch"),y=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(cce,{scope:n,value:i,disabled:r,textId:m,isSelected:c,onItemTextChange:b.useCallback(w=>{d(x=>x||((w==null?void 0:w.textContent)??"").trim())},[]),children:h.jsx(zb.ItemSlot,{scope:n,value:i,disabled:r,textValue:u,children:h.jsx(Ke.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:g,onFocus:be(o.onFocus,()=>p(!0)),onBlur:be(o.onBlur,()=>p(!1)),onClick:be(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:be(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:be(o.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:be(o.onPointerMove,w=>{var x;v.current=w.pointerType,r?(x=l.onItemLeave)==null||x.call(l):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:be(o.onPointerLeave,w=>{var x;w.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:be(o.onKeyDown,w=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&w.key===" "||(Kle.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});KF.displayName=gy;var hh="SelectItemText",qF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Dl(hh,n),a=Ll(hh,n),l=GF(hh,n),c=Jle(hh,n),[u,d]=b.useState(null),f=ct(e,y=>d(y),l.onItemTextChange,y=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,y,l.value,l.disabled)}),p=u==null?void 0:u.textContent,g=b.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=c;return Qn(()=>(m(g),()=>v(g)),[m,v,g]),h.jsxs(h.Fragment,{children:[h.jsx(Ke.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ol.createPortal(s.children,o.valueNode):null]})});qF.displayName=hh;var YF="SelectItemIndicator",uce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return GF(YF,n).isSelected?h.jsx(Ke.span,{"aria-hidden":!0,...i,ref:e}):null});uce.displayName=YF;var Pk="SelectScrollUpButton",dce=b.forwardRef((t,e)=>{const n=Ll(Pk,t.__scopeSelect),i=ZE(Pk,t.__scopeSelect),[r,s]=b.useState(!1),o=ct(e,i.onScrollButtonChange);return Qn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(XF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});dce.displayName=Pk;var Mk="SelectScrollDownButton",fce=b.forwardRef((t,e)=>{const n=Ll(Mk,t.__scopeSelect),i=ZE(Mk,t.__scopeSelect),[r,s]=b.useState(!1),o=ct(e,i.onScrollButtonChange);return Qn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(XF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});fce.displayName=Mk;var XF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=Ll("SelectScrollButton",n),o=b.useRef(null),a=Ub(n),l=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),Qn(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Ke.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:be(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:be(r.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:be(r.onPointerLeave,()=>{l()})})}),hce="SelectSeparator",pce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return h.jsx(Ke.div,{"aria-hidden":!0,...i,ref:e})});pce.displayName=hce;var Rk="SelectArrow",mce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Vb(n),s=Dl(Rk,n),o=Ll(Rk,n);return s.open&&o.position==="popper"?h.jsx(YE,{...r,...i,ref:e}):null});mce.displayName=Rk;var gce="SelectBubbleInput",JF=b.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=b.useRef(null),s=ct(i,r),o=XE(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Ke.select,{...n,style:{...kF,...n.style},ref:s,defaultValue:e})});JF.displayName=gce;function ZF(t){return t===""||t===void 0}function QF(t){const e=br(t),n=b.useRef(""),i=b.useRef(0),r=b.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=b.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function e9(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=vce(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function vce(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var yce=TF,t9=IF,bce=DF,wce=LF,xce=$F,n9=FF,Sce=VF,i9=KF,kce=qF;const zg=yce,Ug=bce,ph=b.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(t9,{ref:i,className:ee("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,h.jsx(wce,{asChild:!0,children:h.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));ph.displayName=t9.displayName;const mh=b.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>h.jsx(xce,{children:h.jsx(n9,{ref:r,className:ee("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:h.jsx(Sce,{className:"p-1",children:e})})}));mh.displayName=n9.displayName;const Is=b.forwardRef(({className:t,children:e,...n},i)=>h.jsx(i9,{ref:i,className:ee("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:h.jsx(kce,{children:e})}));Is.displayName=i9.displayName;var r9=["PageUp","PageDown"],s9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],o9={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},hf="Slider",[Tk,_ce,Cce]=sm(hf),[a9,sve]=_s(hf,[Cce]),[Ece,Hb]=a9(hf),l9=b.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:g,...m}=t,v=b.useRef(new Set),y=b.useRef(0),x=o==="horizontal"?Ace:Nce,[S=[],_]=pl({prop:u,defaultProp:c,onChange:D=>{var K;(K=[...v.current][y.current])==null||K.focus(),d(D)}}),E=b.useRef(S);function C(D){const j=Oce(S,D);O(D,j)}function N(D){O(D,y.current)}function M(){const D=E.current[y.current];S[y.current]!==D&&f(S)}function O(D,j,{commit:K}={commit:!1}){const $=Lce(s),G=$ce(Math.round((D-i)/s)*s+i,$),X=dy(G,[i,r]);_((Z=[])=>{const V=Rce(Z,X,j);if(Dce(V,l*s)){y.current=V.indexOf(X);const B=String(V)!==String(Z);return B&&K&&f(V),B?V:Z}else return Z})}return h.jsx(Ece,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:y,thumbs:v.current,values:S,orientation:o,form:g,children:h.jsx(Tk.Provider,{scope:t.__scopeSlider,children:h.jsx(Tk.Slot,{scope:t.__scopeSlider,children:h.jsx(x,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:e,onPointerDown:be(m.onPointerDown,()=>{a||(E.current=S)}),min:i,max:r,inverted:p,onSlideStart:a?void 0:C,onSlideMove:a?void 0:N,onSlideEnd:a?void 0:M,onHomeKeyDown:()=>!a&&O(i,0,{commit:!0}),onEndKeyDown:()=>!a&&O(r,S.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:j})=>{if(!a){const G=r9.includes(D.key)||D.shiftKey&&s9.includes(D.key)?10:1,X=y.current,Z=S[X],V=s*G*j;O(Z+V,X,{commit:!0})}}})})})})});l9.displayName=hf;var[c9,u9]=a9(hf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ace=b.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=b.useState(null),p=ct(e,x=>f(x)),g=b.useRef(void 0),m=tb(r),v=m==="ltr",y=v&&!s||!v&&s;function w(x){const S=g.current||d.getBoundingClientRect(),_=[0,S.width],C=QE(_,y?[n,i]:[i,n]);return g.current=S,C(x-S.left)}return h.jsx(c9,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:h.jsx(d9,{dir:m,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const S=w(x.clientX);o==null||o(S)},onSlideMove:x=>{const S=w(x.clientX);a==null||a(S)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:x=>{const _=o9[y?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:_?-1:1})}})})}),Nce=b.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=b.useRef(null),d=ct(e,u),f=b.useRef(void 0),p=!r;function g(m){const v=f.current||u.current.getBoundingClientRect(),y=[0,v.height],x=QE(y,p?[i,n]:[n,i]);return f.current=v,x(m-v.top)}return h.jsx(c9,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:h.jsx(d9,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const v=g(m.clientY);s==null||s(v)},onSlideMove:m=>{const v=g(m.clientY);o==null||o(v)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const y=o9[p?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:y?-1:1})}})})}),d9=b.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Hb(hf,n);return h.jsx(Ke.span,{...c,ref:e,onKeyDown:be(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):r9.concat(s9).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:be(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():i(d)}),onPointerMove:be(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:be(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),f9="SliderTrack",h9=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Hb(f9,n);return h.jsx(Ke.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});h9.displayName=f9;var Ok="SliderRange",p9=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Hb(Ok,n),s=u9(Ok,n),o=b.useRef(null),a=ct(e,o),l=r.values.length,c=r.values.map(f=>v9(f,r.min,r.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(Ke.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});p9.displayName=Ok;var Ik="SliderThumb",m9=b.forwardRef((t,e)=>{const n=_ce(t.__scopeSlider),[i,r]=b.useState(null),s=ct(e,a=>r(a)),o=b.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return h.jsx(Pce,{...t,ref:s,index:o})}),Pce=b.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=Hb(Ik,n),a=u9(Ik,n),[l,c]=b.useState(null),u=ct(e,w=>c(w)),d=l?o.form||!!l.closest("form"):!0,f=WE(l),p=o.values[i],g=p===void 0?0:v9(p,o.min,o.max),m=Tce(i,o.values.length),v=f==null?void 0:f[a.size],y=v?Ice(v,g,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${y}px)`},children:[h.jsx(Tk.ItemSlot,{scope:t.__scopeSlider,children:h.jsx(Ke.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:be(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&h.jsx(g9,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},i)]})});m9.displayName=Ik;var Mce="RadioBubbleInput",g9=b.forwardRef(({__scopeSlider:t,value:e,...n},i)=>{const r=b.useRef(null),s=ct(r,i),o=XE(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Ke.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});g9.displayName=Mce;function Rce(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function v9(t,e,n){const s=100/(n-e)*(t-e);return dy(s,[0,100])}function Tce(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Oce(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function Ice(t,e,n){const i=t/2,s=QE([0,50],[0,i]);return(i-s(e)*n)*n}function jce(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Dce(t,e){if(e>0){const n=jce(t);return Math.min(...n)>=e}return!0}function QE(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function Lce(t){return(String(t).split(".")[1]||"").length}function $ce(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var y9=l9,Fce=h9,Bce=p9,zce=m9;const Ca=b.forwardRef(({className:t,...e},n)=>h.jsxs(y9,{ref:n,className:ee("relative flex touch-none select-none items-center",t),...e,children:[h.jsx(Fce,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:h.jsx(Bce,{className:"absolute h-full bg-mantis-400"})}),h.jsx(zce,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ca.displayName=y9.displayName;var Wb="Switch",[Uce,ove]=_s(Wb),[Vce,Hce]=Uce(Wb),b9=b.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,p]=b.useState(null),g=ct(e,x=>p(x)),m=b.useRef(!1),v=f?u||!!f.closest("form"):!0,[y,w]=pl({prop:r,defaultProp:s??!1,onChange:c,caller:Wb});return h.jsxs(Vce,{scope:n,checked:y,disabled:a,children:[h.jsx(Ke.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":k9(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:be(t.onClick,x=>{w(S=>!S),v&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})}),v&&h.jsx(S9,{control:f,bubbles:!m.current,name:i,value:l,checked:y,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});b9.displayName=Wb;var w9="SwitchThumb",x9=b.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=Hce(w9,n);return h.jsx(Ke.span,{"data-state":k9(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});x9.displayName=w9;var Wce="SwitchBubbleInput",S9=b.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:i=!0,...r},s)=>{const o=b.useRef(null),a=ct(o,s),l=XE(n),c=WE(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:i});p.call(u,n),u.dispatchEvent(g)}},[l,n,i]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});S9.displayName=Wce;function k9(t){return t?"checked":"unchecked"}var _9=b9,Gce=x9;const Ea=b.forwardRef(({className:t,...e},n)=>h.jsx(_9,{className:ee("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:h.jsx(Gce,{className:ee("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ea.displayName=_9.displayName;const Gb=de(!1);function Kce(t){return(1e3/t).toFixed(1)}function C9({className:t}){const e=Xt(),[n,i]=sf(),{status:r}=Ln();return h.jsxs("div",{className:ee("overflow-auto scrollbar-stone-700",t),children:[h.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[h.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),h.jsxs(Ci,{children:[h.jsxs(Ei,{children:[h.jsxs(Ai,{children:[h.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),h.jsx(vu,{children:e("settings.animations.description")})]}),h.jsx(Ea,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&gE()}})]}),h.jsxs(Ci,{children:[h.jsx(Ei,{children:h.jsxs(Ai,{children:[h.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),h.jsx(Ca,{className:"w-44",...LR({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(Ci,{children:[h.jsx(Ei,{children:h.jsx(Ai,{children:e("settings.instructionCycle.label")})}),h.jsx(Ea,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),h.jsxs(Ci,{children:[h.jsx(Ei,{children:h.jsx(Ai,{children:e("settings.statsCPU.label")})}),h.jsx(Ea,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),h.jsxs(Ci,{children:[h.jsxs(Ei,{children:[h.jsxs(Ai,{children:[h.jsx("span",{className:"icon-[lucide--cpu] size-6"}),"Velocidad CPU (Hz)"]}),h.jsxs(vu,{children:[h.jsxs("span",{className:"font-medium text-stone-300",children:[n.cpuSpeed," Hz"]})," ","(",(1/n.cpuSpeed).toFixed(2),"s por ciclo)",n.cpuSpeed===1&&" - Muy lenta",n.cpuSpeed===2&&" - Lenta",n.cpuSpeed===4&&" - Normal",n.cpuSpeed===10&&" - Rápida"]})]}),h.jsxs("div",{className:"flex flex-col items-end gap-2",children:[h.jsx(Ca,{className:"w-44",value:[n.cpuSpeed===1?0:n.cpuSpeed===2?1:n.cpuSpeed===4?2:3],onValueChange:([s])=>{const o=[1,2,4,10];i(a=>({...a,cpuSpeed:o[s]}))},min:0,max:3,step:1}),h.jsxs("div",{className:"flex w-44 justify-between text-xs text-stone-500",children:[h.jsx("span",{children:"1 Hz"}),h.jsx("span",{children:"2 Hz"}),h.jsx("span",{children:"4 Hz"}),h.jsx("span",{children:"10 Hz"})]})]})]}),h.jsxs(Ci,{children:[h.jsxs(Ei,{children:[h.jsxs(Ai,{children:[h.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),h.jsx(vu,{children:e("settings.flags.description")})]}),h.jsxs(zg,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[h.jsx(ph,{className:"w-32",children:h.jsx(Ug,{})}),h.jsxs(mh,{children:[h.jsx(Is,{value:"CF_ZF",children:"C Z"}),h.jsx(Is,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(Ci,{children:h.jsxs(Ei,{children:[h.jsxs(Ai,{children:[h.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),h.jsx(vu,{children:e("settings.devices.description")})]})}),h.jsxs(Ci,{children:[h.jsx(Ei,{children:h.jsx(Ai,{children:e("settings.devices.keyboard-and-screen")})}),h.jsx(Ea,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),h.jsxs(Ci,{children:[h.jsxs(Ei,{children:[h.jsx(Ai,{children:e("settings.devices.pic.label")}),h.jsx(vu,{children:e("settings.devices.pic.description")})]}),h.jsx(Ea,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),h.jsxs(Ci,{children:[h.jsx(Ei,{children:h.jsx(Ai,{children:e("settings.devices.pio.label")})}),h.jsxs(zg,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[h.jsx(ph,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(Ug,{})}),h.jsx(mh,{children:VJ.map(s=>h.jsx(Is,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),h.jsxs(Ci,{children:[h.jsx(Ei,{children:h.jsx(Ai,{children:e("settings.devices.handshake.label")})}),h.jsxs(zg,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[h.jsx(ph,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(Ug,{})}),h.jsx(mh,{children:HJ.map(s=>h.jsx(Is,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),(n.devices.pio==="printer"||n.devices.handshake==="printer")&&h.jsxs(Ci,{children:[h.jsx(Ei,{children:h.jsxs(Ai,{children:[h.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),h.jsx(Ca,{className:"w-44",...LR({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),n.devices.pic&&h.jsxs(Ci,{children:[h.jsx(Ei,{children:h.jsxs(Ai,{children:[h.jsx("span",{className:"icon-[lucide--timer] size-6"}),"Frecuencia del Timer"]})}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs(zg,{value:n.clockSpeed.toString(),onValueChange:s=>i(o=>({...o,clockSpeed:parseInt(s)})),children:[h.jsx(ph,{className:"w-40",children:h.jsx(Ug,{})}),h.jsxs(mh,{children:[h.jsx(Is,{value:"100",title:"Timer muy frecuente - Interrupciones cada 0.1 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.1s"})]})}),h.jsx(Is,{value:"400",title:"Timer frecuente - Interrupciones cada 0.4 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.4s"})]})}),h.jsx(Is,{value:"600",title:"Timer normal - Interrupciones cada 0.6 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Normal"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.6s"})]})}),h.jsx(Is,{value:"800",title:"Timer lento - Interrupciones cada 0.8 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.8s"})]})}),h.jsx(Is,{value:"1000",title:"Timer muy lento - Interrupciones cada 1 segundo",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"1.0s"})]})})]})]}),h.jsxs("div",{className:"flex items-center gap-1 text-xs text-stone-400",children:[h.jsx("span",{className:"icon-[lucide--info] size-4"}),h.jsxs("span",{children:["Frecuencia: ",Kce(n.clockSpeed)," Hz"]})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(Ci,{children:[h.jsxs(Ei,{children:[h.jsxs(Ai,{children:[h.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),h.jsxs(vu,{children:[e("settings.filters.description"),h.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:ku.filterBightness,filterContrast:ku.filterContrast,filterInvert:ku.filterInvert,filterSaturation:ku.filterSaturation})),children:e("settings.filters.revert")})]})]}),h.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[h.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),h.jsx(Ca,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),h.jsx(Ca,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),h.jsx(Ea,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),h.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),h.jsx(Ca,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{className:"flex justify-end p-4",children:h.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...ku,language:s.language,devices:s.devices})),children:[h.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function Ci({children:t}){return h.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Ei({children:t}){return h.jsx("div",{className:"grow",children:t})}function Ai({children:t}){return h.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function vu({children:t}){return h.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function LR({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}const qce=()=>({handleShowTour:b.useCallback(()=>{window.startWelcomeTour?window.startWelcomeTour():(localStorage.removeItem("vonsim8-tour-completed"),window.location.reload())},[])}),jk=b.memo(({status:t,isMobile:e,isCompact:n})=>{const i=tt(zn),[r,s]=b.useState(null),[o,a]=b.useState(!1),l=b.useMemo(()=>{switch(t.type){case"running":return"Ejecutando";case"paused":return"Pausado";default:return"Detenido"}},[t.type]),c=b.useMemo(()=>{switch(t.type){case"running":return"bg-green-600";case"paused":return"bg-yellow-600";default:return"bg-stone-600"}},[t.type]);b.useEffect(()=>{if(i&&i.phase&&i.phase!==r){s(i.phase),a(!0);const p=setTimeout(()=>{a(!1)},800);return()=>clearTimeout(p)}},[i,r]);const u=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"Captación";case"fetching-operands":return"Obtención de operandos";case"fetching-operands-completed":return"Operandos obtenidos";case"executing":return"Ejecución";case"writeback":return"Escritura";case"interrupt":return"Interrupción";case"int6":case"int7":return"Interrupción";case"halting":return"Detener CPU";default:return""}},[i,t.type]),d=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"fetching-operands":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"fetching-operands-completed":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"executing":return"bg-green-500/20 text-green-400 border-green-500/30";case"writeback":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"interrupt":return"bg-red-500/20 text-red-400 border-red-500/30";case"int6":case"int7":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"halting":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-stone-500/20 text-stone-400 border-stone-500/30"}},[i,t.type]),f=b.useMemo(()=>{if(!o||!i)return"";switch(i.phase){case"fetching":return"animate-phase-pulse-blue";case"fetching-operands":return"animate-phase-pulse-yellow";case"fetching-operands-completed":return"animate-phase-pulse-yellow";case"executing":return"animate-phase-pulse-green";case"writeback":return"animate-phase-pulse-purple";case"interrupt":return"animate-phase-pulse-red";case"int6":case"int7":return"animate-phase-pulse-orange";case"halting":return"animate-phase-pulse-red";default:return"animate-phase-pulse-stone"}},[o,i]);return h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:ee("flex items-center gap-1.5 rounded-full px-2 py-1 font-medium text-white",c,t.type==="running"&&"animate-pulse-glow",e&&"px-1.5 py-0.5",n&&"px-1 py-0.5"),children:[h.jsx("div",{className:ee("size-2 rounded-full",t.type==="running"?"bg-green-300":t.type==="paused"?"bg-yellow-300":"bg-stone-300")}),!e&&!n&&l]}),(t.type==="running"||i&&i.phase==="halting")&&u&&h.jsxs("div",{className:ee("rounded-xl border text-[10px] font-semibold uppercase tracking-wider backdrop-blur-sm transition-all duration-200 ease-in-out",d,f,e?"flex min-h-[20px] items-center justify-center whitespace-nowrap px-2 py-0.5 text-[8px]":n?"flex min-h-[18px] items-center justify-center whitespace-nowrap px-1.5 py-0.5 text-[8px]":"px-2 py-1"),children:[u," "]})]})});jk.displayName="SimulationStatus";const E9=b.memo(({onShowTour:t,onToggleSettings:e,settingsOpen:n,onToggleEducational:i,educationalOpen:r})=>{const s=Xt();return h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(X$,{}),h.jsx(gr,{content:"Centro de aprendizaje",position:"bottom",children:h.jsx(C0,{icon:h.jsx(Le,{icon:dm,className:"size-4"}),onClick:i,variant:r?"secondary":"ghost",size:"md","aria-label":"Centro de aprendizaje",className:ee("hover-lift",r&&"animate-pulse-glow"),"data-testid":"educational-button"})}),h.jsx(gr,{content:"Mostrar tour de bienvenida",position:"bottom",children:h.jsx(C0,{icon:h.jsx(Le,{icon:GX,className:"size-4"}),onClick:t,variant:"ghost",size:"md","aria-label":"Mostrar tour de bienvenida",className:"hover-lift"})}),h.jsx(gr,{content:s("settings.title"),position:"bottom",children:h.jsx(C0,{icon:h.jsx("span",{className:"icon-[lucide--settings] block size-5"}),onClick:e,variant:n?"secondary":"ghost",size:"md","aria-label":s("settings.title"),className:ee("hover-lift",n&&"animate-pulse-glow"),"data-testid":"settings-button"})})]})});E9.displayName="ActionButtons";const A9=b.memo(()=>{const[t,e]=am(Gb),[n,i]=b.useState(!1),[r,s]=b.useState(!1),{status:o}=Ln(),{handleShowTour:a}=qce(),[l,c]=b.useState("desktop");b.useEffect(()=>{const v=()=>{const y=window.innerWidth;y<=480?c("mobile"):y<=768?c("compact"):y<=1024?c("tablet"):c("desktop")};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const u=b.useCallback(()=>{e(v=>!v)},[e]),d=b.useCallback(()=>{i(v=>!v)},[]),f=b.useCallback(()=>{s(v=>!v)},[]),p=b.useMemo(()=>h.jsxs("div",{className:"hover-scale flex select-none items-center justify-center",children:[h.jsxs("div",{className:"group relative flex size-10 items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-mantis-500 to-mantis-600 shadow-lg hover:scale-105",children:[h.jsx("div",{className:"absolute inset-0 opacity-10",children:h.jsx("div",{className:"size-full bg-[radial-gradient(circle_at_30%_30%,rgba(255,255,255,0.1)_1px,transparent_1px),radial-gradient(circle_at_70%_70%,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[length:8px_8px]"})}),h.jsx("div",{className:"relative z-10 flex items-center justify-center",children:h.jsx("span",{className:"text-lg font-bold tracking-tight text-white",children:"V8"})}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),h.jsx("div",{className:"absolute -right-0.5 -top-0.5 size-2 animate-pulse rounded-full bg-mantis-300"})]}),h.jsxs("div",{className:"ml-3 flex flex-col",children:[h.jsxs("h1",{className:"text-lg font-bold max-sm:hidden",children:["Von",h.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]}),h.jsx("span",{className:"text-xs text-stone-400 max-sm:hidden",children:"Simulador CPU 8-bit"})]})]}),[]),m=(()=>{switch(l){case"mobile":return{gridCols:"grid-cols-2",showStatusLeft:!0,showStatusCenter:!1,showActionButtons:!1,isCompact:!0,isMobile:!0};case"compact":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!1,isCompact:!0,isMobile:!1};case"tablet":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1};case"desktop":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1}}})();return h.jsxs(h.Fragment,{children:[h.jsx("header",{className:ee("relative bg-black text-sm text-white",l==="mobile"?"header-mobile p-2":l==="compact"?"header-compact p-2":l==="tablet"?"header-tablet p-2":"p-2"),"data-testid":"header",children:h.jsxs("div",{className:ee("grid items-center",m.gridCols),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[p,m.showStatusLeft&&h.jsx(jk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})]}),m.showStatusCenter&&h.jsx("div",{className:"flex justify-center",children:h.jsx(jk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})}),h.jsxs("div",{className:"flex items-center justify-end gap-6",children:[h.jsx("div",{className:"flex justify-end",children:h.jsx(boe,{})}),m.showActionButtons&&h.jsx(E9,{onShowTour:a,onToggleSettings:u,settingsOpen:t,onToggleEducational:d,educationalOpen:n})]})]})}),!m.isMobile&&n&&h.jsx(W$,{isOpen:n,onClose:()=>i(!1),onShowProgress:f}),!m.isMobile&&r&&h.jsx(G$,{isVisible:r,onClose:()=>s(!1)})]})});A9.displayName="Header";const Yce=[{key:"F7",description:"Ejecutar un ciclo",category:"Simulación"},{key:"F8",description:"Ejecutar una instrucción completa",category:"Simulación"},{key:"F4",description:"Ejecución infinita",category:"Simulación"},{key:"F9",description:"Resetear simulación",category:"Simulación"},{key:"Espacio",description:"Pausar/Reanudar (cuando está ejecutando)",category:"Simulación"},{key:"Ctrl+S",description:"Guardar archivo",category:"Editor"},{key:"Ctrl+O",description:"Abrir archivo",category:"Editor"},{key:"Ctrl+N",description:"Nuevo archivo",category:"Editor"},{key:"Ctrl+Z",description:"Deshacer",category:"Editor"},{key:"Ctrl+Y",description:"Rehacer",category:"Editor"},{key:"Ctrl+F",description:"Buscar",category:"Editor"},{key:"Ctrl+H",description:"Reemplazar",category:"Editor"},{key:"Tab",description:"Indentar",category:"Editor"},{key:"Shift+Tab",description:"Desindentar",category:"Editor"},{key:"F1",description:"Mostrar atajos de teclado",category:"Navegación"},{key:"F2",description:"Abrir configuración",category:"Navegación"},{key:"F3",description:"Buscar en el código",category:"Navegación"},{key:"F5",description:"Actualizar página",category:"Navegación"},{key:"F6",description:"Cambiar foco al editor",category:"Navegación"},{key:"Escape",description:"Cerrar diálogos",category:"Interfaz"},{key:"Ctrl+Shift+P",description:"Paleta de comandos",category:"Interfaz"},{key:"Ctrl+B",description:"Mostrar/ocultar barra lateral",category:"Interfaz"},{key:"Ctrl+J",description:"Mostrar/ocultar terminal",category:"Interfaz"},{key:"Ctrl++",description:"Zoom in",category:"Vista"},{key:"Ctrl+-",description:"Zoom out",category:"Vista"},{key:"Ctrl+0",description:"Resetear zoom",category:"Vista"},{key:"Ctrl+Shift+Z",description:"Zoom a la selección",category:"Vista"},{key:"F12",description:"Herramientas de desarrollador",category:"Desarrollo"},{key:"Ctrl+Shift+I",description:"Inspeccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+C",description:"Seleccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+J",description:"Consola",category:"Desarrollo"},{key:"Ctrl+Shift+M",description:"Vista móvil",category:"Desarrollo"}],Xce=()=>{const[t,e]=b.useState(!1),n=b.useCallback(()=>{e(!0)},[]),i=b.useCallback(()=>{e(!1)},[]);return b.useEffect(()=>{const r=s=>{s.key==="F1"&&(s.preventDefault(),n())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n]),{isOpen:t,openModal:n,closeModal:i}},Jce=()=>b.useMemo(()=>{const t=Yce.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return Object.entries(t).sort(([e],[n])=>e.localeCompare(n))},[]),N9=b.memo(({shortcut:t})=>h.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-stone-800 p-3 transition-colors hover:bg-stone-700",children:[h.jsx("span",{className:"text-sm text-stone-300",children:t.description}),h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-2 py-1 font-mono text-xs text-white",children:t.key})]}));N9.displayName="ShortcutItem";const P9=b.memo(({category:t,shortcuts:e})=>h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"border-b border-stone-600 pb-2 text-lg font-semibold text-mantis-400",children:t}),h.jsx("div",{className:"space-y-2",children:e.map((n,i)=>h.jsx(N9,{shortcut:n},`${t}-${i}`))})]}));P9.displayName="ShortcutCategory";const M9=b.memo(()=>{const{isOpen:t,closeModal:e}=Xce(),n=Jce(),i=b.useCallback(s=>{s.target===s.currentTarget&&e()},[e]),r=b.useCallback(s=>{s.key==="Escape"&&e()},[e]);return b.useEffect(()=>{if(t)return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,r]),t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:i,children:h.jsxs("div",{className:"max-h-[80vh] w-full max-w-4xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"icon-[lucide--keyboard] size-6 text-mantis-400"}),h.jsx("h2",{className:"text-xl font-semibold text-white",children:"Atajos de Teclado"})]}),h.jsx("button",{onClick:e,className:"rounded p-2 text-stone-400 transition-colors hover:text-white",children:h.jsx(Le,{icon:um,size:"lg"})})]}),h.jsx("div",{className:"max-h-[calc(80vh-80px)] overflow-y-auto p-4",children:h.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:n.map(([s,o])=>h.jsx(P9,{category:s,shortcuts:o},s))})}),h.jsx("div",{className:"border-t border-stone-600 bg-stone-800 p-4",children:h.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-400",children:[h.jsxs("span",{children:["Presiona"," ",h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-1 py-0.5 font-mono text-xs",children:"F1"})," ","para abrir este diálogo"]}),h.jsx(mt,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"Cerrar"})]})})]})}):null});M9.displayName="KeyboardShortcuts";function Zce(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await RL(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:e}).then(d=>{s?s("/VonSim8/sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const R9=()=>{const t=DE(),e=b.useMemo(()=>(t==null?void 0:t.addNotification)||(()=>{}),[t==null?void 0:t.addNotification]),[n,i]=b.useState({available:!1,updating:!1,lastUpdate:null}),r=b.useRef(null);return b.useEffect(()=>{const s=Zce({onNeedRefresh(){i(c=>({...c,available:!0})),e({type:"info",title:"Nueva versión disponible",message:"Hay una nueva versión de VonSim8 disponible. Haz clic en 'Actualizar' para aplicar los cambios."}),typeof window<"u"&&window.VonSimAddNotification&&window.VonSimAddNotification({type:"info",title:"Actualización disponible",message:"Una nueva versión está lista para instalar."})},onOfflineReady(){e({type:"success",title:"Modo offline disponible",message:"VonSim8 ahora está disponible para uso offline."})},onRegistered(c){console.log("Service Worker registrado:",c),c.waiting&&i(u=>({...u,available:!0}))},onRegisterError(c){console.error("Error al registrar Service Worker:",c),e({type:"error",title:"Error de actualización",message:"No se pudo configurar la actualización automática. Algunas funciones pueden no estar disponibles."})}});r.current=s;const o=async()=>{if(r.current){i(c=>({...c,updating:!0}));try{r.current(),i(c=>({...c,available:!1,updating:!1,lastUpdate:new Date})),e({type:"success",title:"Actualización aplicada",message:"La nueva versión se ha aplicado correctamente."})}catch(c){console.error("Error al actualizar:",c),i(u=>({...u,updating:!1})),e({type:"error",title:"Error al actualizar",message:"No se pudo aplicar la actualización. Inténtalo de nuevo."})}}};window.updateVonSim8=o;const a=()=>{r.current&&r.current()};window.checkVonSim8Updates=a;const l=setInterval(a,5*60*1e3);return()=>{delete window.updateVonSim8,delete window.checkVonSim8Updates,clearInterval(l)}},[e]),{updateInfo:n,updateApp:()=>{r.current&&r.current()},checkForUpdates:()=>{r.current&&r.current()}}},$R="vonsim8-commit-hash",Qce=5*60*1e3,T9=()=>{const t=DE(),e=b.useMemo(()=>(t==null?void 0:t.addNotification)||(()=>{}),[t==null?void 0:t.addNotification]),[n,i]=b.useState({currentHash:"0689468",lastKnownHash:null,hasUpdate:!1,lastCheck:null}),r=b.useCallback(()=>{try{const a=localStorage.getItem($R),l="0689468";return i(c=>({...c,currentHash:l,lastKnownHash:a,lastCheck:new Date})),a&&a!==l?(i(c=>({...c,hasUpdate:!0})),e({type:"info",title:"Nueva versión detectada",message:`Se ha detectado una nueva versión de VonSim8 (${l.substring(0,7)}). Recarga la página para actualizar.`}),!0):!1}catch(a){return console.warn("Error checking version update:",a),!1}},[e]),s=b.useCallback(()=>{try{localStorage.setItem($R,"0689468")}catch(a){console.warn("Error saving version hash before reload:",a)}window.location.reload()},[]),o=b.useCallback(()=>{i(a=>({...a,hasUpdate:!1}))},[]);return b.useEffect(()=>{r()},[r]),b.useEffect(()=>{const a=setInterval(r,Qce);return()=>clearInterval(a)},[r]),b.useEffect(()=>{const a=()=>{document.hidden||r()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[r]),b.useEffect(()=>{const a=()=>{r()};return window.addEventListener("online",a),()=>{window.removeEventListener("online",a)}},[r]),{versionInfo:n,checkForVersionUpdate:r,updateToNewVersion:s,dismissUpdate:o}},O9=b.memo(()=>{const{updateInfo:t,updateApp:e}=R9(),{versionInfo:n,updateToNewVersion:i}=T9(),[r,s]=b.useState(!0),[o,a]=b.useState(!1),[l,c]=b.useState(!1),u=t.available||n.hasUpdate,d=b.useCallback(async()=>{a(!0);try{t.available?await e():n.hasUpdate&&i(),s(!1)}catch(p){console.error("Error al actualizar:",p)}finally{a(!1)}},[e,t.available,i,n.hasUpdate]),f=b.useCallback(()=>{c(!0),setTimeout(()=>{s(!1)},300)},[]);return!u||!r?null:h.jsxs("div",{className:ee("fixed inset-x-0 top-0 z-50 transition-all duration-300 ease-out",l?"-translate-y-full opacity-0":"translate-y-0 opacity-100"),children:[h.jsx("div",{className:"border-b border-stone-700/50 bg-gradient-to-r from-stone-900/95 via-stone-800/95 to-stone-900/95 shadow-2xl backdrop-blur-md",children:h.jsx("div",{className:"mx-auto max-w-7xl p-4",children:h.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"relative shrink-0",children:[h.jsx("div",{className:"absolute inset-0 animate-ping rounded-full bg-mantis-500/20"}),h.jsx("div",{className:"relative rounded-full bg-gradient-to-br from-mantis-500 to-mantis-600 p-2 shadow-lg sm:p-3",children:h.jsx(Le,{icon:NC,className:"size-4 animate-bounce text-white sm:size-5"})})]}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"mb-1 flex flex-col space-y-1 sm:flex-row sm:items-center sm:space-x-2 sm:space-y-0",children:[h.jsx("h3",{className:"text-base font-bold text-white sm:text-lg",children:"Nueva versión disponible"}),h.jsxs("div",{className:"flex w-fit items-center space-x-1 rounded-full bg-mantis-500/20 px-2 py-1",children:[h.jsx(Le,{icon:uL,className:"size-3 text-mantis-400"}),h.jsx("span",{className:"text-xs font-medium text-mantis-300",children:"Actualización"})]})]}),h.jsx("p",{className:"text-xs leading-relaxed text-stone-300 sm:text-sm",children:"Hay una nueva versión de VonSim8 con mejoras y correcciones. Te recomendamos actualizar para obtener la mejor experiencia."})]})]}),h.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[h.jsx(mt,{onClick:d,disabled:o,variant:"primary",size:"sm",className:ee("relative overflow-hidden transition-all duration-300","bg-gradient-to-r from-mantis-600 to-mantis-700","hover:from-mantis-700 hover:to-mantis-800","shadow-lg hover:shadow-xl","border border-mantis-500/30","text-xs sm:text-sm",o&&"animate-pulse"),leftIcon:h.jsx(Le,{icon:o?VX:XX,className:ee("size-3 transition-transform duration-200 sm:size-4",o&&"animate-spin")}),children:o?"Actualizando...":"Actualizar ahora"}),h.jsx(mt,{onClick:f,variant:"ghost",size:"sm",className:"shrink-0 text-stone-400 transition-all duration-200 hover:bg-stone-700/50 hover:text-white","aria-label":"Cerrar banner de actualización",children:h.jsx(Le,{icon:um,className:"size-3 sm:size-4"})})]})]})})}),o&&h.jsx("div",{className:"h-1 animate-pulse bg-gradient-to-r from-mantis-500 to-mantis-600",children:h.jsx("div",{className:"animate-shimmer h-full bg-white/30"})})]})});O9.displayName="UpdateBanner";de(!1);const zh=[{id:"welcome",target:"app-container",title:"¡Bienvenido a VonSim8!",content:"Te acompañaré en un recorrido por las funciones principales de la plataforma. VonSim8 es un simulador de computadora de 8 bits que te permite programar en lenguaje ensamblador y ver cómo funciona internamente una computadora.",icon:LX,position:"top"},{id:"header",target:"header",title:"Barra de Navegación",content:"Aquí encontrarás el logo, el estado de la simulación, los controles principales y acceso a notificaciones, tour de ayuda y configuración.",icon:"icon-[lucide--navigation]",position:"bottom"},{id:"controls",target:"controls-container",title:"Controles de Simulación",content:"Controla la simulación: F7 (ejecutar ciclo), F8 (ejecutar instrucción), F4 (ejecución infinita), F9 (resetear). También puedes usar los botones visuales.",icon:"icon-[lucide--cpu]",position:"bottom"},{id:"editor-buttons",target:"panel-editor",title:"Editor de Código",content:"Aquí es donde escribirás tu código ensamblador. El editor tiene resaltado de sintaxis, autocompletado y validación en tiempo real. Usa los botones de arriba para crear, abrir, guardar y ensamblar tu programa.",icon:"icon-[lucide--file-terminal]",position:"right"},{id:"computer-view",target:"panel-computer",title:"Simulador de Computadora",content:"Aquí verás la computadora virtual con CPU, memoria RAM, registros, ALU, buses de datos y control, y todos los periféricos como pantalla, teclado, LEDs y switches.",icon:"icon-[lucide--monitor]",position:"left"},{id:"cpu-architecture",target:"cpu-component",title:"Arquitectura CPU",content:"Observa cómo la CPU ejecuta instrucciones paso a paso: fetch, decode, execute. Ve los valores en los registros, el contador de programa y el estado de las banderas.",icon:"icon-[lucide--microchip]",position:"left"},{id:"memory-ram",target:"memory-component",title:"Memoria RAM",content:"Explora la memoria RAM de 256 bytes. Ve cómo se almacenan datos e instrucciones, y cómo la CPU accede a diferentes direcciones de memoria. Cada celda muestra su dirección y valor en hexadecimal.",icon:"icon-[lucide--database]",position:"left"},{id:"settings-button",target:"settings-button",title:"Botón de Configuración",content:"Haz clic en este engranaje para acceder a las configuraciones avanzadas. Aquí podrás ajustar la velocidad de simulación, cambiar el tema visual, seleccionar el idioma y personalizar atajos de teclado.",icon:"icon-[lucide--settings]",position:"bottom"},{id:"settings-panel",target:"panel-settings",title:"Panel de Configuración",content:"En este panel encontrarás todas las opciones de configuración organizadas por categorías: simulación, interfaz, idioma y atajos de teclado. Los cambios se aplican automáticamente.",icon:"icon-[lucide--settings]",position:"left"},{id:"footer",target:"footer-links",title:"Recursos y Soporte",content:"Encuentra documentación completa, código fuente en GitHub, reporta bugs y accede a recursos de aprendizaje para dominar la programación en ensamblador.",icon:"icon-[lucide--help-circle]",position:"top"},{id:"final",target:"cycle-button",title:"¡Listo para Programar!",content:"Ya conoces las funciones principales de VonSim8. Comienza escribiendo código en el editor, ejecuta la simulación paso a paso con el botón 'Por Ciclo' y observa cómo funciona tu programa en la computadora virtual. ¡Disfruta programando!",icon:"icon-[lucide--rocket]",position:"bottom"}],eue=()=>{const[t,e]=b.useState(0),[n,i]=b.useState(!1),[r,s]=b.useState(!0),[,o]=am(Gb),a=b.useMemo(()=>t===zh.length-1,[t]),l=b.useMemo(()=>t===0,[t]),c=b.useCallback(()=>{i(!1),localStorage.setItem("vonsim8-tour-completed","true")},[]),u=b.useCallback(()=>{e(g=>Math.min(g+1,zh.length-1))},[]),d=b.useCallback(()=>{e(g=>Math.max(g-1,0))},[]),f=b.useCallback(()=>{c()},[c]),p=b.useCallback(()=>{i(!0),e(0)},[]);return b.useEffect(()=>{},[]),b.useEffect(()=>{const g=zh[t],m=document.querySelector(`[data-testid="${g.target}"]`);s(!!m),g.id==="settings-button"?o(!0):g.id!=="settings-panel"&&g.id!=="settings-button"&&o(!1)},[t,o]),{currentStep:t,isVisible:n,isLastStep:a,isFirstStep:l,handleNext:u,handlePrev:d,handleSkip:f,completeTour:c,startTour:p,targetFound:r}},tue=t=>b.useMemo(()=>{const e=document.querySelector(`[data-testid="${t.target}"]`);if(!e)return null;const n=e.getBoundingClientRect(),i=window.innerWidth,r=window.innerHeight;if(t.id==="welcome"&&t.position==="top")return{positionStyles:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},highlightStyles:{top:0,left:0,width:"100vw",height:"100vh"}};if(t.id==="footer"){let g=n.top-200-60,m=n.right+20;const v="translateX(0)";g<40&&(g=40),g+200>r-100&&(g=Math.max(40,r/2-200/2)),m+320>i&&(m=i-320-20);const y={top:g,left:m,transform:v},w={top:n.top-2,left:n.left-2,width:n.width+4,height:n.height+4};return{positionStyles:y,highlightStyles:w}}let s,o,a;switch(t.position){case"top":s=n.top-20,o=n.left+n.width/2,a="translateX(-50%)";break;case"bottom":s=n.bottom+20,o=n.left+n.width/2,a="translateX(-50%)";break;case"left":s=n.top+n.height/2,o=n.left-20,a="translateY(-50%)";break;case"right":s=n.top+n.height/2,o=n.right+20,a="translateY(-50%)";break}const l=320,c=200;o+l/2>i?o=i-l/2-20:o-l/2<0&&(o=l/2+20),s+c>r?s=r-c-20:s<0&&(s=20);const u={top:s,left:o,transform:a},d={top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16};return{positionStyles:u,highlightStyles:d}},[t]),I9=b.memo(({current:t,total:e})=>h.jsx("div",{className:"mb-2 h-2 w-full overflow-hidden rounded-full bg-stone-700",children:h.jsx("div",{className:"h-full bg-mantis-500 transition-all duration-300",style:{width:`${(t+1)/e*100}%`}})}));I9.displayName="ProgressBar";const j9=b.memo(({step:t,currentStep:e,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:l,targetFound:c})=>{const u=tue(t),d=b.useRef(null);b.useEffect(()=>{var m;(m=d.current)==null||m.focus()},[e]);const f="animate-fade-in";if(!c||!u)return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:h.jsxs("div",{className:"max-w-sm rounded-lg border-2 border-mantis-400 bg-stone-900 p-8 text-center shadow-2xl",children:[h.jsx(Le,{icon:d2,className:"mb-4 text-4xl text-yellow-400"}),h.jsx("h3",{className:"mb-2 text-lg font-semibold text-mantis-400",children:"Elemento no encontrado"}),h.jsx("p",{className:"mb-4 text-stone-300",children:"No se pudo encontrar el elemento de la interfaz para este paso del tour."}),h.jsx(mt,{onClick:o,className:"bg-mantis-600 hover:bg-mantis-700",children:"Saltar tour"})]})});const{positionStyles:p,highlightStyles:g}=u;return h.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",children:h.jsxs("div",{className:"relative size-full",children:[h.jsx("div",{className:"absolute rounded-lg border-2 border-mantis-400 bg-transparent shadow-2xl transition-all duration-300",style:g}),h.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true",className:`absolute max-w-sm rounded-lg border border-mantis-400 bg-stone-900 p-6 text-white shadow-xl focus:outline-none ${f}`,style:p,children:[h.jsx(I9,{current:e,total:l}),h.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[t.icon&&(typeof t.icon=="string"?h.jsx("span",{className:`${t.icon} text-2xl text-mantis-400`}):h.jsx(Le,{icon:t.icon,className:"text-2xl text-mantis-400"})),h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:t.title})]}),h.jsx("p",{className:"mb-4 text-sm text-stone-300",children:t.content}),h.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[h.jsx(mt,{variant:"ghost",size:"sm",onClick:o,className:"text-stone-400 hover:text-white","aria-label":"Saltar tour",children:"Saltar"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(mt,{variant:"outline",size:"sm",onClick:s,disabled:i,className:"flex items-center gap-1","aria-label":"Anterior",children:[h.jsx(Le,{icon:QX}),"Anterior"]}),n?h.jsxs(mt,{size:"sm",onClick:a,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Finalizar",children:["Finalizar",h.jsx(Le,{icon:uL})]}):h.jsxs(mt,{size:"sm",onClick:r,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Siguiente",children:["Siguiente",h.jsx(Le,{icon:eJ})]})]})]}),h.jsxs("div",{className:"mt-2 text-right text-xs text-stone-500",children:["Paso ",e+1," de ",l]}),h.jsx("button",{onClick:o,className:"absolute right-2 top-2 rounded p-1 text-stone-400 hover:text-white focus:outline-none","aria-label":"Cerrar",children:h.jsx(Le,{icon:um,size:"sm"})})]})]})})});j9.displayName="TourTooltip";const D9=b.memo(()=>{const{currentStep:t,isVisible:e,isLastStep:n,isFirstStep:i,handleNext:r,handlePrev:s,handleSkip:o,completeTour:a,startTour:l,targetFound:c}=eue();b.useEffect(()=>(window.startWelcomeTour=l,()=>{delete window.startWelcomeTour}),[l]);const u=b.useMemo(()=>zh[t],[t]);return b.useEffect(()=>{if(!e)return;const d=f=>{f.key==="Escape"&&o(),f.key==="ArrowRight"&&r(),f.key==="ArrowLeft"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,o,r,s]),!e||!u?null:h.jsx(j9,{step:u,currentStep:t,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:zh.length,targetFound:c})});D9.displayName="WelcomeTour";var Lr=function(t,e){return Number(t.toFixed(e))},nue=function(t,e){return e},Gt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},iue=function(t){return-Math.cos(t*Math.PI)/2+.5},rue=function(t){return t},sue=function(t){return t*t},oue=function(t){return t*(2-t)},aue=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},lue=function(t){return t*t*t},cue=function(t){return--t*t*t+1},uue=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},due=function(t){return t*t*t*t},fue=function(t){return 1- --t*t*t*t},hue=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},pue=function(t){return t*t*t*t*t},mue=function(t){return 1+--t*t*t*t*t},gue=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},L9={easeOut:iue,linear:rue,easeInQuad:sue,easeOutQuad:oue,easeInOutQuad:aue,easeInCubic:lue,easeOutCubic:cue,easeInOutCubic:uue,easeInQuart:due,easeOutQuart:fue,easeInOutQuart:hue,easeInQuint:pue,easeOutQuint:mue,easeInOutQuint:gue},$9=function(t){typeof t=="number"&&cancelAnimationFrame(t)},ds=function(t){t.mounted&&($9(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function F9(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;ds(t),t.animation=function(){if(!t.mounted)return $9(t.animation);var o=new Date().getTime()-r,a=o/n,l=L9[e],c=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function vue(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function $l(t,e,n,i){var r=vue(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):F9(t,i,n,function(p){var g=a+u*p,m=l+d*p,v=c+f*p;s(g,m,v)})}}function yue(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=i-a,u=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var bue=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,c=t-e-a,u=a,d=i-r-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},eA=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=yue(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=bue(o,l,c,a,u,d,!!r);return f},Dk=function(t,e,n,i){return i?t<e?Lr(e,2):t>n?Lr(n,2):Lr(t,2):Lr(t,2)},Ac=function(t,e){var n=eA(t,e);return t.bounds=n,n};function _m(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=r,f=s);var p=Dk(t,a-d,c+d,i),g=Dk(e,l-f,u+f,i);return{x:p,y:g}}function Kb(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,p=_m(d,f,r,s,0,0,null);return p}function Cm(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var FR=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var c=qb(s,n);return!c},BR=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},wue=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},xue=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function Sue(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,p=u.maxPositionY,g=u.minPositionY,m=n>d||n<f,v=i>p||i<g,y=n>d?c.offsetWidth:t.setup.minPositionX||0,w=i>p?c.offsetHeight:t.setup.minPositionY||0,x=Kb(t,y,w,r,t.bounds,a||l),S=x.x,_=x.y;return{scale:r,positionX:m?S:n,positionY:v?_:i}}}function B9(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=_m(e,n,a,s,i,r,o),p=f.x,g=f.y;t.setTransformState(c,p,g)}}var kue=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,c=r.positionY;if(!i)return{x:l,y:c};var u=e-i.x,d=n-i.y,f=o?l:u,p=a?c:d;return{x:f,y:p}},Al=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},_ue=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},Cue=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!i)};function Eue(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function zR(t,e,n,i,r,s,o,a,l,c){if(r){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return i?e:Dk(t,s,o,r)}function Aue(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function Nue(t,e){var n=_ue(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var c=Aue(o,a),u=e.x-i.x,d=e.y-i.y,f=u/c,p=d/c,g=l-r,m=u*u+d*d,v=Math.sqrt(m)/g;t.velocity={velocityX:f,velocityY:p,total:v}}t.lastMousePosition=e,t.velocityTime=l}}function Pue(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=Cue(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,p=i.limitToBounds,g=i.alignmentAnimation,m=i.zoomAnimation,v=i.panning,y=v.lockAxisY,w=v.lockAxisX,x=m.animationType,S=g.sizeX,_=g.sizeY,E=g.velocityAlignmentTime,C=E,N=Eue(t,l),M=Math.max(N,C),O=Al(t,S),D=Al(t,_),j=O*r.offsetWidth/100,K=D*r.offsetHeight/100,$=c+j,G=u-j,X=d+K,Z=f-K,V=t.transformState,B=new Date().getTime();F9(t,x,M,function(ie){var pe=t.transformState,J=pe.scale,le=pe.positionX,F=pe.positionY,L=new Date().getTime()-B,U=L/C,k=L9[g.animationType],P=1-k(Math.min(1,U)),I=1-ie,T=le+o*I,Y=F+a*I,W=zR(T,V.positionX,le,w,p,u,c,G,$,P),ne=zR(Y,V.positionY,F,y,p,f,d,Z,X,P);(le!==T||F!==Y)&&t.setTransformState(J,W,ne)})}}function UR(t,e){var n=t.transformState.scale;ds(t),Ac(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?xue(t,e):wue(t,e)}function tA(t,e){var n=t.transformState.scale,i=t.setup,r=i.minScale,s=i.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,c=s.animationTime,u=s.animationType,d=o||n<r||!a&&!l;if(!d){var f=Sue(t);f&&$l(t,f,e??c,u)}}function VR(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=kue(t,e,n),c=l.x,u=l.y,d=Al(t,o),f=Al(t,a);Nue(t,{x:c,y:u}),B9(t,c,u,d,f)}}function Mue(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?Pue(t):tA(t)}}function nA(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=Cm(Lr(e,2),s,o,0,!1),c=Ac(t,l),u=Kb(t,n,i,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function z9(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||i>=o;if((i>=1||a)&&tA(t),!(f||!r||!t.mounted)){var p=e||r.offsetWidth/2,g=n||r.offsetHeight/2,m=nA(t,o,p,g);m&&$l(t,m,u,d)}}var cl=function(){return cl=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cl.apply(this,arguments)};function HR(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Vg={scale:1,positionX:0,positionY:0},Ff={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Lk={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},U9=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Vg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Vg.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:Vg.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:Vg.positionY}},WR=function(t){var e=cl({},Ff);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Ff[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Ff[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=cl(cl({},Ff[n]),t[n]):a?e[n]=HR(HR([],Ff[n],!0),t[n]):e[n]=t[n]}}),e},V9=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=c?i*Math.exp(e*n):i+e*n,f=Cm(Lr(d,3),a,o,u,!1);return f};function H9(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,p=(d/2-c)/a,g=V9(t,e,n),m=nA(t,g,f,p);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");$l(t,m,i,r)}function W9(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=U9(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=eA(t,a.scale),p=_m(a.positionX,a.positionY,f,o,0,0,s),g={scale:a.scale,positionX:p.x,positionY:p.y};c===a.scale&&u===a.positionX&&d===a.positionY||(i==null||i(),$l(t,g,e,n))}}function Rue(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function Tue(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!i||!r)return s;var u=i.getBoundingClientRect(),d=e.getBoundingClientRect(),f=Rue(e,i,r,s),p=f.x,g=f.y,m=d.width/s.scale,v=d.height/s.scale,y=i.offsetWidth/m,w=i.offsetHeight/v,x=Cm(n||Math.min(y,w),l,c,0,!1),S=(u.width-m*x)/2,_=(u.height-v*x)/2,E=(u.left-p)*x+S,C=(u.top-g)*x+_,N=eA(t,x),M=_m(E,C,N,a,0,0,i),O=M.x,D=M.y;return{positionX:O,positionY:D,scale:x}}var Oue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),H9(t,1,e,n,i)}},Iue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),H9(t,-1,e,n,i)}},jue=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var p={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?c:i};$l(t,p,r,s)}}},Due=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),W9(t,e,n)}},Lue=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=G9(e||r.scale,s,o);$l(t,a,n,i)}}},$ue=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),ds(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=Tue(t,o,n);$l(t,a,i,r)}}},$k=function(t){return{instance:t,zoomIn:Oue(t),zoomOut:Iue(t),setTransform:jue(t),resetTransform:Due(t),centerView:Lue(t),zoomToElement:$ue(t)}},Fue=function(t){return{instance:t,state:t.transformState}},jt=function(t){var e={};return Object.assign(e,Fue(t)),Object.assign(e,$k(t)),e},Zx=!1;function Qx(){try{var t={get passive(){return Zx=!0,!1}};return t}catch{return Zx=!1,Zx}}var Hg=".".concat(Lk.wrapperClass),qb=function(t,e){return e.some(function(n){return t.matches("".concat(Hg," ").concat(n,", ").concat(Hg," .").concat(n,", ").concat(Hg," ").concat(n," *, ").concat(Hg," .").concat(n," *"))})},Fk=function(t){t&&clearTimeout(t)},Bue=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},G9=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function zue(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Uue=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!i&&c;if(!u||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=qb(c,o);return!d},Vue=function(t){return t?t.deltaY<0?1:-1:0};function Hue(t,e){var n=Vue(t),i=nue(e,n);return i}function K9(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var Wue=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,p=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var g=s+e*n,m=i?!1:!p,v=Cm(Lr(g,3),c,l,f,m&&!d);return v},Gue=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Kue=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=qb(o,r);return!l},que=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},Yue=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Lr(r[0].clientX-i.left,5),o=Lr(r[0].clientY-i.top,5),a=Lr(r[1].clientX-i.left,5),l=Lr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},q9=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},Xue=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,c=a.size,u=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,f=d*n;return Cm(Lr(f,2),o,s,c,!u&&!l)},Jue=160,Zue=100,Que=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(ds(t),Gt(jt(t),e,i),Gt(jt(t),e,r))},ede=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,p=o.disablePadding,g=o.smooth,m=d.size,v=d.disabled,y=f.step,w=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var x=Hue(e,null),S=g?w*Math.abs(e.deltaY):y,_=Wue(t,x,S,!e.ctrlKey);if(l!==_){var E=Ac(t,_),C=K9(e,s,l),N=v||m===0||u||p,M=c&&N,O=Kb(t,C.x,C.y,_,E,M),D=O.x,j=O.y;t.previousWheelEvent=e,t.setTransformState(_,D,j),Gt(jt(t),e,i),Gt(jt(t),e,r)}},tde=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;Fk(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(z9(t,e.x,e.y),t.wheelAnimationTimer=null)},Zue);var s=Gue(t,e);s&&(Fk(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Gt(jt(t),e,i),Gt(jt(t),e,r))},Jue))},Y9=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},nde=function(t,e){var n=q9(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=Y9(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,ds(t)},ide=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,f=c.size;if(!(i===null||!n)){var p=Yue(e,s,n);if(!(!Number.isFinite(p.x)||!Number.isFinite(p.y))){var g=q9(e),m=Xue(t,g),v=Y9(e),y=v.x-(t.pinchLastCenterX||0),w=v.y-(t.pinchLastCenterY||0);if(!(m===s&&y===0&&w===0)){t.pinchLastCenterX=v.x,t.pinchLastCenterY=v.y;var x=Ac(t,m),S=d||f===0||l,_=a&&S,E=Kb(t,p.x,p.y,m,x,_),C=E.x,N=E.y;t.pinchMidpoint=p,t.lastDistance=g;var M=u.sizeX,O=u.sizeY,D=Al(t,M),j=Al(t,O),K=C+y,$=N+w,G=_m(K,$,x,a,D,j,r),X=G.x,Z=G.y;t.setTransformState(m,X,Z)}}}},rde=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,z9(t,e==null?void 0:e.x,e==null?void 0:e.y)},X9=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;Fk(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Gt(jt(t),e,n)},i)},sde=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Gt(jt(t),e,i),W9(t,o,a,function(){return Gt(jt(t),e,r)}),X9(t,e)};function ode(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function ade(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,p=u.step,g=u.animationTime,m=u.animationType;if(!d&&!i){if(f==="reset")return sde(t,e);if(!s)return console.error("No ContentComponent found");var v=ode(f,t.transformState.scale),y=V9(t,v,p);if(o!==y){Gt(jt(t),e,l);var w=K9(e,s,o),x=nA(t,y,w.x,w.y);if(!x)return console.error("Error during zoom event. New transformation state was not calculated.");Gt(jt(t),e,c),$l(t,x,g,m),X9(t,e)}}}var lde=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=r==null?void 0:r.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=qb(l,a);return!d},cde=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,Ac(n,n.transformState.scale),n.setup=WR(i)},this.initializeWindowEvents=function(){var i,r,s=Qx(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=Qx(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),ds(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=Qx();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i,r){var s=!1,o=n.setup.centerOnInit,a=function(l,c){for(var u=0,d=l;u<d.length;u++){var f=d[u];if(f.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(jt(n))}),n.observer=new ResizeObserver(function(l){if(a(l,i)||a(l,r))if(o&&!s){var c=r.offsetWidth,u=r.offsetHeight;(c>0||u>0)&&(s=!0,n.setCenter())}else ds(n),Ac(n,n.transformState.scale),tA(n,0)}),n.observer.observe(i),n.observer.observe(r)},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=Uue(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(Que(n,i),ede(n,i),tde(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-i.deltaX,f=u-i.deltaY,p=a.lockAxisX?c:d,g=a.lockAxisY?u:f,m=n.setup.alignmentAnimation,v=m.sizeX,y=m.sizeY,w=Al(n,v),x=Al(n,y);p===c&&g===u||B9(n,p,g,w,x)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=FR(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),ds(n),UR(n,i),Gt(jt(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=BR(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),VR(n,i.clientX,i.clientY),Gt(jt(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(Mue(n),Gt(jt(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=Kue(n,i);l&&(nde(n,i),ds(n),Gt(jt(n),i,o),Gt(jt(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=que(n);l&&(i.preventDefault(),i.stopPropagation(),ide(n,i),Gt(jt(n),i,o),Gt(jt(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(rde(n),Gt(jt(n),i,s),Gt(jt(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=FR(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&i.touches.length===1;if(!a){n.lastTouch=+new Date,ds(n);var l=i.touches,c=l.length===1,u=l.length===2;c&&(ds(n),UR(n,i),Gt(jt(n),i,s)),u&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=BR(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];VR(n,a.clientX,a.clientY),Gt(jt(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=lde(n,i);s&&ade(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=jt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Gt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=G9(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Bue(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return jt(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Ac(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(i,r),n.initializeWindowEvents(),n.isInitialized=!0;var s=jt(n);Gt(s,void 0,n.props.onInit)},this.props=e,this.setup=WR(this.props),this.transformState=U9(this.props)}return t}(),iA=Ft.createContext(null),ude=function(t,e){return typeof t=="function"?t(e):t},dde=Ft.forwardRef(function(t,e){var n=b.useRef(new cde(t)).current,i=ude(t.children,$k(n));return b.useImperativeHandle(e,function(){return $k(n)},[n]),b.useEffect(function(){n.update(t)},[n,t]),Ft.createElement(iA.Provider,{value:n},i)});Ft.forwardRef(function(t,e){var n=b.useRef(null),i=b.useContext(iA);return b.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),Ft.createElement("div",cl({},t,{ref:zue([n,e])}))});function fde(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var hde=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,GR={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};fde(hde);var pde=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=b.useContext(iA),p=f.init,g=f.cleanupWindowEvents,m=b.useRef(null),v=b.useRef(null);return b.useEffect(function(){var y=m.current,w=v.current;return y!==null&&w!==null&&p&&(p==null||p(y,w)),function(){g==null||g()}},[]),Ft.createElement("div",cl({},c,{ref:m,className:"".concat(Lk.wrapperClass," ").concat(GR.wrapper," ").concat(i),style:o}),Ft.createElement("div",cl({},d,{ref:v,className:"".concat(Lk.contentClass," ").concat(GR.content," ").concat(s),style:a}),e))};function mde({wrapperRef:t}){const e=Xt();return h.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function KR(t){switch(t){case"Captación":return"text-blue-300 bg-gradient-to-r from-blue-500/10 to-cyan-500/10";case"Obtención de operandos":return"text-yellow-300 bg-gradient-to-r from-yellow-500/10 to-orange-500/10";case"Ejecución":return"text-green-300 bg-gradient-to-r from-green-500/10 to-emerald-500/10";case"Escritura":return"text-purple-300 bg-gradient-to-r from-purple-500/10 to-violet-500/10";default:return"text-stone-300 bg-gradient-to-r from-stone-500/10 to-gray-500/10"}}function gde(t,e){if(t==="Ejecución")return/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-300 bg-green-500/5 border-green-400/30 shadow-green-400/20");switch(t){case"Captación":return"text-blue-300 bg-blue-500/5 border-blue-400/30 shadow-blue-400/20";case"Obtención de operandos":return"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20";case"Escritura":return"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20";default:return"text-stone-300 bg-stone-500/5 border-stone-400/30 shadow-stone-400/20"}}function vde(t,e=!1){const n=(()=>{switch(t){case"Captación":return"📥";case"Obtención de operandos":return"🔍";case"Ejecución":return"⚡";case"Escritura":return"💾";case"Interrupción":return"🚨";default:return"⚙️"}})();return e?h.jsx("span",{className:"inline-block animate-bounce",children:n}):n}function yde(t){return/obten/i.test(t)||/operando/i.test(t)||/leer/i.test(t)||/cargar/i.test(t)?"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-yellow-400/30 shadow-lg shadow-yellow-400/10":/escrib/i.test(t)||/guardar/i.test(t)||/almacenar/i.test(t)||/resultado/i.test(t)?"bg-gradient-to-r from-purple-500/10 to-violet-500/10 border-purple-400/30 shadow-lg shadow-purple-400/10":(/procesar/i.test(t)||/alu/i.test(t)||/calcular/i.test(t)||/operar/i.test(t)||/ejecut/i.test(t),"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-400/30 shadow-lg shadow-green-400/10")}function qR(t,e){if(!t)return"";switch(e){case"Captación":return"ring-2 ring-blue-400/50 ring-offset-2 ring-offset-stone-800";case"Obtención de operandos":return"ring-2 ring-yellow-400/50 ring-offset-2 ring-offset-stone-800";case"Ejecución":return"ring-2 ring-green-400/50 ring-offset-2 ring-offset-stone-800";case"Escritura":return"ring-2 ring-purple-400/50 ring-offset-2 ring-offset-stone-800";default:return"ring-2 ring-stone-400/50 ring-offset-2 ring-offset-stone-800"}}function bde(t,e){return t==="Captación"?"text-blue-400":t==="Ejecución"?/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-400":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-400":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-400"):t==="Escritura"?"text-purple-400":t==="Obtención de operandos"?"text-yellow-400":"text-stone-400"}function wde(){const t=tt(xt),e=tt(ac),n=tt(tn),i=tt(Zv),[r]=sf(),s=b.useRef(null),o=(a,l)=>{const[c,...u]=a.split(":"),d=u.join(":").trim();return{cycle:l,stage:c.trim(),action:d}};return b.useEffect(()=>{if(t){const a=R.get(Mn),l=o(t,a);R.set(ac,c=>{const u=c[c.length-1];return u&&u.cycle===a&&u.action===l.action?c:[...c,l]})}},[t]),b.useEffect(()=>{const a=R.sub(Mn,()=>{const l=R.get(Mn),c=R.get(xt);if(c&&l>0){const u=o(c,l);R.set(yc,{canAnimate:!1,pendingMessage:c}),R.set(ac,d=>{const f=d[d.length-1];return f&&f.cycle===l&&f.action===u.action?d:[...d,u]}),setTimeout(()=>{R.set(yc,{canAnimate:!0,pendingMessage:null})},100)}l===0&&(R.set(ac,[]),R.set(yc,{canAnimate:!0,pendingMessage:null}))});return()=>{a()}},[]),b.useEffect(()=>{const a=R.sub(tn,()=>{R.get(tn).type==="stopped"&&(R.set(ac,[]),R.set(yc,{canAnimate:!0,pendingMessage:null}))});return()=>{a()}},[]),b.useEffect(()=>{n.type==="running"&&i&&Di({title:"El programa ha sido modificado",description:"La ejecución se reiniciará desde el principio para aplicar los cambios.",variant:"info"})},[n,i]),b.useEffect(()=>{const a=s.current;a&&(a.scrollTop=a.scrollHeight)},[e]),r.showInstructionCycle?h.jsx("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[420px]",children:h.jsxs("div",{className:"rounded-xl border-2 border-stone-400/50 bg-gradient-to-br from-stone-800 to-stone-900 shadow-2xl backdrop-blur-sm",children:[h.jsx("div",{className:"rounded-t-xl border-b-2 border-stone-600/50 bg-gradient-to-r from-stone-700 to-stone-800 px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"animate-spin-slow text-xl",children:"🔄"}),h.jsx("div",{className:"absolute -right-1 -top-1 size-2 rounded-full bg-green-400"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"bg-gradient-to-r from-stone-200 to-stone-300 bg-clip-text text-sm font-bold text-transparent",children:"Ciclo de Instrucción"}),h.jsx("p",{className:"text-xs text-stone-400",children:"Seguimiento paso a paso"})]})]}),h.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-green-400/30 bg-gradient-to-r from-green-500/20 to-emerald-500/20 px-3 py-1.5",children:[h.jsx("div",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"}),h.jsx("span",{className:"text-xs font-medium text-green-300",children:"Activo"})]})]})}),h.jsxs("div",{ref:s,className:"scrollbar-thin max-h-80 overflow-y-auto p-4",children:[e.map((a,l)=>{const c=l===0||e[l-1].stage!==a.stage,u=l===e.length-1;return h.jsxs("div",{className:"mb-3 transition-all duration-300 ease-in-out",children:[c&&h.jsx("div",{className:"animate-fade-in mb-3",children:h.jsxs("div",{className:`flex items-center gap-3 rounded-xl border border-stone-600/50 bg-gradient-to-r from-stone-700/80 to-stone-800/80 p-4 shadow-lg ${KR(a.stage)}`,children:[h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"text-xl",children:vde(a.stage,u)}),u&&h.jsx("div",{className:"absolute -right-1 -top-1 size-3 rounded-full bg-green-400"})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:`text-sm font-bold ${KR(a.stage).split(" ")[0]}`,children:a.stage}),h.jsxs("p",{className:"text-xs text-stone-400",children:[a.stage==="Captación"&&"Leer instrucción",a.stage==="Obtención de operandos"&&"Preparar datos",a.stage==="Ejecución"&&"Procesar instrucción",a.stage==="Escritura"&&"Guardar resultado",a.stage==="Interrupción"&&"Manejar interrupción"]})]})]})}),a.stage==="Interrupción"?h.jsx("div",{className:`rounded-xl border-l-4 border-red-400 bg-gradient-to-r from-red-900/30 to-red-800/20 p-4 shadow-lg transition-all duration-300 ${u?"ring-2 ring-red-400/50 ring-offset-2 ring-offset-stone-800":""}`,children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-lg",children:"🚨"}),h.jsx("span",{className:"text-sm font-medium text-red-300",children:a.action})]})}):h.jsxs("div",{className:`flex items-center gap-3 rounded-xl border p-4 transition-all duration-300 hover:scale-[1.02] ${a.stage==="Ejecución"?`${yde(a.action)} ${u?qR(u,a.stage):""}`:`border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 ${u?"bg-stone-700/80 "+qR(u,a.stage):""}`}`,children:[h.jsx("div",{className:`flex size-8 items-center justify-center rounded-full text-sm font-bold transition-all duration-300 ${u?"scale-110 bg-gradient-to-r from-green-600 to-emerald-700 shadow-lg shadow-green-400/30 ring-2 ring-green-400/50":"bg-stone-700"} ${u?"text-white":bde(a.stage,a.action)}`,children:a.cycle}),h.jsx("div",{className:"flex-1",children:h.jsx("span",{className:`text-sm font-medium transition-all duration-200 ${gde(a.stage,a.action).split(" ")[0]}`,children:a.action})}),u&&h.jsx("div",{className:"flex items-center gap-1",children:h.jsx("div",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"})})]})]},l)}),e.length===0&&h.jsx("div",{className:"animate-fade-in flex items-center justify-center py-12",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mb-4 text-5xl",children:"⏳"}),h.jsx("h4",{className:"mb-2 bg-gradient-to-r from-stone-300 to-stone-400 bg-clip-text text-sm font-bold text-transparent",children:"Esperando instrucciones"}),h.jsx("p",{className:"text-xs text-stone-500",children:"Ejecuta un programa para ver el ciclo"})]})})]}),h.jsx("div",{className:"rounded-b-xl border-t border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-blue-400"}),"Ciclos: ",R.get(Mn)]}),h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-green-400"}),"Monitor en tiempo real"]})]})})]})}):null}function xde(){const t=Xt(),{devices:e}=Ln();return e.hasIOBus?h.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function Sde(){const{devices:t}=Ln(),e=tt(sy),n=tt(oy),i=b.useRef(null),r=b.useRef(null),s=b.useRef(null),o=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),a=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),l="M 750 545 H 800",{path:c,strokeDashoffset:u,opacity:d}=Ie("bus.rd"),{path:f,strokeDashoffset:p,opacity:g}=Ie("bus.wr");return h.jsxs(h.Fragment,{children:[e&&h.jsx(_de,{pathRef:r}),n&&h.jsx(Cde,{pathRef:s}),h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[h.jsx("path",{ref:i,className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:o}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:o}),e&&h.jsx(Ge.path,{ref:r,d:c,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),e&&h.jsx(Ge.path,{d:c,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:a}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:a}),n&&h.jsx(Ge.path,{ref:s,d:f,className:"fill-none stroke-orange-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,146,60,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),n&&h.jsx(Ge.path,{d:f,className:"fill-none stroke-orange-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),t.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(Ji,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:l}),h.jsx(Ge.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:l,style:Ie("bus.mem")})]}),t.pic&&h.jsxs(h.Fragment,{children:[h.jsx(Ji,{springs:"bus.intr",d:"M 450 805 V 1015 H 900"}),h.jsx(Ji,{springs:"bus.inta",d:"M 470 805 V 1015 H 900"})]}),t.pio&&h.jsxs(h.Fragment,{children:[h.jsx(Ji,{springs:"bus.int0",d:"M 900 815 V 1015 H 900"}),h.jsx(Ji,{springs:"bus.int1",d:"M 920 815 V 1015 H 900"}),h.jsx(Ji,{springs:"bus.int2",d:"M 940 815 V 1015 H 900"})]}),t.timer&&h.jsx(Ji,{springs:"bus.int0",d:"M 583 875 V 1015 H 900"}),t.handshake&&h.jsx(Ji,{springs:"bus.int0",d:"M 900 1015 H 900"}),t.printer&&h.jsxs(h.Fragment,{children:[h.jsx(Ji,{springs:"bus.printer.strobe",d:"M 900 1015 H 900"}),h.jsx(Ji,{springs:"bus.printer.busy",d:"M 920 1015 H 900"}),h.jsx(Ji,{springs:"bus.printer.data",d:"M 940 1015 H 900"})]}),t.pio&&t.switches&&h.jsx(Ji,{springs:"bus.switches->pio",d:"M 900 815 V 1015 H 900"}),t.pio&&t.leds&&h.jsx(Ji,{springs:"bus.pio->leds",d:"M 900 815 V 1015 H 900"})]})]})}function Ji({d:t,springs:e}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[3px]",strokeLinejoin:"round",d:t}),h.jsx(Ge.path,{d:t,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Ie(e)}),h.jsx(Ge.path,{d:t,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Ie(e)})]})}function kde(){const t=Xt(),{devices:e}=Ln();return h.jsxs(h.Fragment,{children:[h.jsx(Zi,{style:{left:385,top:405},children:"rd"}),h.jsx(Zi,{style:{left:385,top:425},children:"wr"}),e.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(Zi,{children:"io/m"}),h.jsx(Zi,{children:t("computer.chip-select.mem")})]}),e.pic&&h.jsx(Zi,{children:t("computer.chip-select.pic")}),e.timer&&h.jsx(Zi,{children:t("computer.chip-select.timer")}),e.pio&&h.jsx(Zi,{children:t("computer.chip-select.pio")}),e.handshake&&h.jsx(Zi,{children:t("computer.chip-select.handshake")}),e.pic&&h.jsxs(h.Fragment,{children:[h.jsx(Zi,{children:"intr"}),h.jsx(Zi,{children:"inta"})]}),e.printer&&h.jsxs(h.Fragment,{children:[h.jsx(Zi,{children:"strobe"}),h.jsx(Zi,{children:"busy"}),h.jsx(Zi,{children:"data"})]})]})}function Zi({children:t,style:e}){return h.jsx("span",{className:"pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",style:e,children:t})}function _de({pathRef:t}){const[e,n]=b.useState(!0),i=fp(sy),[r,s]=b.useState(!1),[o,a]=b.useState(0);if(b.useEffect(()=>{if(e&&r){const f=Date.now(),p=2e3,g=()=>{const m=Date.now()-f,v=Math.min(m/p,1);a(v),v<1?requestAnimationFrame(g):(n(!1),setTimeout(()=>i(!1),100))};g()}},[e,r,i]),b.useEffect(()=>{let f=0;const p=50,g=()=>{if(t.current){s(!0);return}f++,f<p?setTimeout(g,10):s(!1)};g()},[t]),!e||!r)return null;const l=380,c=800,u=420,d=l+(c-l)*o+40;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:d,top:u-32,color:"#ef4444",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:e?1:0},children:"Read"})}function Cde({pathRef:t}){const[e,n]=b.useState(!0),i=fp(oy),[r,s]=b.useState(!1),[o,a]=b.useState(0);if(b.useEffect(()=>{if(e&&r){const f=Date.now(),p=2e3,g=()=>{const m=Date.now()-f,v=Math.min(m/p,1);a(v),v<1?requestAnimationFrame(g):(n(!1),setTimeout(()=>i(!1),100))};g()}},[e,r,i]),b.useEffect(()=>{let f=0;const p=50,g=()=>{if(t.current){s(!0);return}f++,f<p?setTimeout(g,10):s(!1)};g()},[t]),!e||!r)return null;const l=380,c=800,u=440,d=l+(c-l)*o+40;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:d,top:u+12,color:"#f59e42",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:e?1:0},children:"Write"})}function Ede(){const{devices:t}=Ln(),e=["M 610 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 629 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:i,strokeDashoffset:r,opacity:s}=Ie("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=Ie("bus.address");return h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] size-full",children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:n}),h.jsx(Ge.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx(Ge.path,{d:i,className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:e}),h.jsx(Ge.path,{d:o,className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}}),h.jsx(Ge.path,{d:o,className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function Ade(){return h.jsxs(h.Fragment,{children:[h.jsx(Ede,{}),h.jsx(Sde,{}),h.jsx(kde,{}),h.jsx(xde,{})]})}function Nde(){const{devices:t}=Ln();if(!t.clock)return null;const e=Ie("clock.angle");return h.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:h.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx(Ge.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const Pde={register:{beginner:"Un registro es como una caja pequeña donde la CPU guarda datos temporalmente. Es muy rápido de acceder.",intermediate:"Los registros son memoria de acceso rápido dentro de la CPU. Son más rápidos que la RAM pero tienen menos capacidad.",advanced:"Registros de propósito general (AL, BL, CL, DL) para operaciones aritméticas. Cada uno puede almacenar 8 bits."},memory:{beginner:"La memoria RAM es como un gran almacén donde se guardan programas y datos. Cada ubicación tiene una dirección única.",intermediate:"Memoria de acceso aleatorio (RAM) de 256 bytes. La CPU puede leer y escribir en cualquier dirección.",advanced:"Memoria principal de 256 bytes con direccionamiento de 8 bits (00-FF). Organizada en celdas de 8 bits cada una."},alu:{beginner:'La ALU (Unidad Aritmético-Lógica) es el "cerebro matemático" de la CPU. Realiza sumas, restas y comparaciones.',intermediate:"Arithmetic Logic Unit procesa operaciones matemáticas y lógicas. Recibe operandos y devuelve resultados.",advanced:"ALU de 8 bits que ejecuta operaciones: ADD, SUB, AND, OR, XOR, NOT, CMP. Incluye flags de estado (Z, N, C)."},bus:{beginner:'Los buses son como "carreteras" por donde viajan los datos entre los componentes de la computadora.',intermediate:"Buses de datos y control conectan CPU, memoria y periféricos. El bus de datos transporta información.",advanced:"Bus de datos de 8 bits bidireccional, bus de direcciones de 8 bits, y líneas de control para sincronización."},instruction:{beginner:"Una instrucción es un comando que le dice a la CPU qué operación realizar, como sumar dos números.",intermediate:"Cada instrucción tiene un código de operación (opcode) y operandos. La CPU las ejecuta secuencialmente.",advanced:"Formato de instrucción: opcode (1 byte) + operandos. Ejemplos: MOV, ADD, JMP, CALL. Ciclo fetch-decode-execute."},"program-counter":{beginner:"El contador de programa (IP) indica qué instrucción ejecutar a continuación. Se incrementa automáticamente.",intermediate:"Program Counter (IP) contiene la dirección de la siguiente instrucción. Se actualiza en cada ciclo.",advanced:"Instruction Pointer (IP) de 8 bits. Incrementa en 1-2 bytes según el tamaño de la instrucción actual."},flags:{beginner:"Las banderas son indicadores que muestran el resultado de operaciones, como si el resultado fue cero.",intermediate:"Flags de estado: Zero (Z), Negative (N), Carry (C). Se actualizan automáticamente en operaciones.",advanced:"Flags de 1 bit: Z (resultado cero), N (resultado negativo), C (acarreo/overflow). Controlan saltos condicionales."},stack:{beginner:"La pila es como una pila de platos. Solo puedes agregar o quitar del tope. Útil para guardar direcciones de retorno.",intermediate:"Stack Pointer (SP) apunta al tope de la pila. PUSH agrega datos, POP los retira. LIFO (Last In, First Out).",advanced:"Pila de 256 bytes con SP de 8 bits. PUSH decrementa SP, POP lo incrementa. Usada para CALL/RET y variables locales."},interrupt:{beginner:"Una interrupción es como un timbre que interrumpe lo que está haciendo la CPU para atender algo urgente.",intermediate:"Las interrupciones permiten que dispositivos externos notifiquen a la CPU eventos importantes.",advanced:"Sistema de interrupciones con PIC (Programmable Interrupt Controller). IRET retorna de la rutina de interrupción."},peripheral:{beginner:"Los periféricos son dispositivos externos como teclado, pantalla y LEDs que se conectan a la computadora.",intermediate:"Periféricos se comunican con la CPU a través de puertos de entrada/salida (I/O).",advanced:"Sistema de I/O con PIO (Programmable I/O) y módulos específicos para cada periférico."},assembly:{beginner:"El lenguaje ensamblador es un lenguaje de programación que usa palabras en lugar de números para las instrucciones.",intermediate:"Cada instrucción de ensamblador se traduce a código de máquina. El ensamblador hace esta traducción.",advanced:"Sintaxis: etiqueta, mnemónico, operandos, comentarios. Directivas como ORG, DB, DW para datos."},addressing:{beginner:"El direccionamiento es cómo la CPU encuentra los datos que necesita en la memoria.",intermediate:"Modos de direccionamiento: inmediato, directo, indirecto. Cada uno accede a datos de forma diferente.",advanced:"Direccionamiento inmediato (valor en instrucción), directo (dirección en instrucción), indirecto (dirección en registro)."}},Mde={beginner:rd,intermediate:dm,advanced:NC},YR={beginner:"text-blue-400",intermediate:"text-yellow-400",advanced:"text-purple-400"},J9=b.memo(({concept:t,level:e="beginner",children:n,className:i})=>{const[r,s]=b.useState(e),o=Pde[t];if(!o)return console.warn(`No educational content found for concept: ${t}`),h.jsx(h.Fragment,{children:n});const a=o[r],l=Mde[r],c=h.jsxs("div",{className:"max-w-xs p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx(Le,{icon:l,className:ee("text-sm",YR[r])}),h.jsxs("span",{className:ee("text-sm font-medium",YR[r]),children:["Nivel"," ",r==="beginner"?"Básico":r==="intermediate"?"Intermedio":"Avanzado"]})]}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:a}),h.jsx("div",{className:"flex gap-1",children:["beginner","intermediate","advanced"].map(u=>h.jsx("button",{onClick:d=>{d.stopPropagation(),s(u)},className:ee("rounded px-2 py-1 text-xs transition-colors",r===u?"bg-mantis-600 text-white":"bg-stone-700 text-stone-400 hover:bg-stone-600"),children:u==="beginner"?"B":u==="intermediate"?"I":"A"},u))})]});return h.jsx(gr,{content:c,position:"top",children:h.jsxs("span",{className:ee("inline-flex cursor-help items-center gap-1",i),children:[n,h.jsx(Le,{icon:rd,className:"text-xs text-mantis-400 opacity-70 transition-opacity hover:opacity-100"})]})})});J9.displayName="EducationalTooltip";var Yb="Popover",[Z9,ave]=_s(Yb,[df]),Em=df(),[Rde,Fl]=Z9(Yb),Q9=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=Em(e),l=b.useRef(null),[c,u]=b.useState(!1),[d,f]=pl({prop:i,defaultProp:r??!1,onChange:s,caller:Yb});return h.jsx(SF,{...a,children:h.jsx(Rde,{scope:e,contentId:nf(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:b.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:b.useCallback(()=>u(!0),[]),onCustomAnchorRemove:b.useCallback(()=>u(!1),[]),modal:o,children:n})})};Q9.displayName=Yb;var eB="PopoverAnchor",Tde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Fl(eB,n),s=Em(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return b.useEffect(()=>(o(),()=>a()),[o,a]),h.jsx($b,{...s,...i,ref:e})});Tde.displayName=eB;var tB="PopoverTrigger",nB=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Fl(tB,n),s=Em(n),o=ct(e,r.triggerRef),a=h.jsx(Ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":aB(r.open),...i,ref:o,onClick:be(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:h.jsx($b,{asChild:!0,...s,children:a})});nB.displayName=tB;var rA="PopoverPortal",[Ode,Ide]=Z9(rA,{forceMount:void 0}),iB=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Fl(rA,e);return h.jsx(Ode,{scope:e,forceMount:n,children:h.jsx(oa,{present:n||s.open,children:h.jsx(km,{asChild:!0,container:r,children:i})})})};iB.displayName=rA;var qd="PopoverContent",rB=b.forwardRef((t,e)=>{const n=Ide(qd,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Fl(qd,t.__scopePopover);return h.jsx(oa,{present:i||s.open,children:s.modal?h.jsx(Dde,{...r,ref:e}):h.jsx(Lde,{...r,ref:e})})});rB.displayName=qd;var jde=Od("PopoverContent.RemoveScroll"),Dde=b.forwardRef((t,e)=>{const n=Fl(qd,t.__scopePopover),i=b.useRef(null),r=ct(e,i),s=b.useRef(!1);return b.useEffect(()=>{const o=i.current;if(o)return CF(o)},[]),h.jsx(Bb,{as:jde,allowPinchZoom:!0,children:h.jsx(sB,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:be(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:be(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:be(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Lde=b.forwardRef((t,e)=>{const n=Fl(qd,t.__scopePopover),i=b.useRef(!1),r=b.useRef(!1);return h.jsx(sB,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),sB=b.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=Fl(qd,n),p=Em(n);return LE(),h.jsx(Ib,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:h.jsx(xm,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(qE,{"data-state":aB(f.open),role:"dialog",id:f.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),oB="PopoverClose",$de=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Fl(oB,n);return h.jsx(Ke.button,{type:"button",...i,ref:e,onClick:be(t.onClick,()=>r.onOpenChange(!1))})});$de.displayName=oB;var Fde="PopoverArrow",Bde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Em(n);return h.jsx(YE,{...r,...i,ref:e})});Bde.displayName=Fde;function aB(t){return t?"open":"closed"}var zde=Q9,Ude=nB,Vde=iB,lB=rB;const sA=zde,oA=Ude,Xb=b.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>h.jsx(Vde,{children:h.jsx(lB,{ref:r,align:e,sideOffset:n,className:ee("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));Xb.displayName=lB.displayName;function hr({name:t,valueAtom:e,springs:n,emphasis:i=!1,className:r}){const s=Xt(),o=tt(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,u=["AL","BL","CL","DL"].includes(t),d=t==="IP",f=t==="SP",p=t==="MBR",g=t==="MAR",m=t==="IR",v=["id","ri"].includes(t),y=c==="FLAGS";return h.jsxs(sA,{children:[h.jsx(oA,{asChild:!0,children:h.jsxs(Ge.button,{title:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c,className:ee("flex cursor-pointer items-center font-mono leading-none transition-opacity",u||d||f||p||g||m||v?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":y?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",u?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":f?"border-yellow-400 bg-stone-800 text-yellow-300":p||g||m?"border-indigo-400 bg-stone-800 text-indigo-300":v?"border-cyan-400 bg-stone-800 text-cyan-300":y?"":i?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:c==="left"||c==="right"||c==="result"?{backgroundColor:"transparent"}:Ie(n),children:[u||f||p||g||m||v?h.jsx(h.Fragment,{children:h.jsx("span",{className:ee(u||v||m||g||p?"mt-4":"mt-2","font-mono text-base font-bold"),children:a.toString("hex")})}):d?h.jsx(h.Fragment,{children:h.jsx("span",{className:ee("mt-4 font-mono text-base font-bold text-red-300"),children:a.toString("hex")})}):c==="left"?h.jsx("span",{className:"opacity-0"}):c==="right"?h.jsx("span",{className:"opacity-0"}):c==="result"?h.jsx("span",{className:"opacity-0"}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:ee("mr-2 font-extrabold tracking-wide",u&&"text-mantis-300 drop-shadow",y&&"text-yellow-200",v&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),h.jsx("span",{className:ee("rounded px-1 py-0.5 font-light",u?"border border-mantis-400 bg-stone-950 text-mantis-300":y?"border border-yellow-400 bg-yellow-950 text-yellow-200":v?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),y&&h.jsxs("span",{className:"ml-2 flex gap-1",children:[h.jsx("span",{className:ee("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),h.jsx("span",{className:ee("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),h.jsxs(Xb,{className:"w-60",children:[h.jsx("div",{className:"px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"font-medium text-white",children:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c}),c!=="left"&&c!=="right"&&c!=="result"&&h.jsx(J9,{concept:"register",level:"beginner",children:h.jsx("span",{className:"text-xs text-mantis-400",children:"💡"})})]})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(w=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${w}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(w)})]},w))})]})]})}function Hde(){const t=tt(Oe.FLAGS),e=tt(Oe.result),n=tt(Oe.left),i=tt(Oe.right),r=tt(UL),s=tt(zn),[o,a]=b.useState(!1),[l,c]=b.useState(""),[u,d]=b.useState(""),[f,p]=b.useState(""),[g,m]=b.useState(""),[v,y]=b.useState(""),[w,x]=b.useState(""),S=tt(zL),[_]=sf(),E=b.useCallback(()=>s&&"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),C=$=>["ADD","SUB","CMP","AND","OR","XOR"].some(X=>$.startsWith(X)),N=$=>{let G="AL",X="BL",Z="AL";const V=[/ADD\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/SUB\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/CMP\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/AND\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/OR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/XOR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/];for(const ie of V){const pe=$.match(ie);if(pe){G=pe[1],X=pe[2],/\[.*\]/.test(G)&&(G="MBR"),/\[.*\]/.test(X)&&(X="MBR"),Z=pe[1];break}}const B=["AL","BL","CL","DL","MBR"];return B.includes(G)||(G="AL"),B.includes(X)||(X="BL"),B.includes(Z)||(Z="AL"),{left:G,right:X,destination:Z}};b.useEffect(()=>{const $=Z=>{console.log("🎯 handleInstruction llamado con:",Z);const B=E()||Z;if(console.log("🎯 Instrucción completa a usar:",B),Z)if(C(B)){a(!0);const{left:pe,right:J,destination:le}=N(B);console.log("🎯 Registros detectados:",{left:pe,right:J,destination:le}),m(pe),y(J),x(le);let F,L;pe==="MBR"&&J!=="MBR"?(F=us(pe,"left",Z,void 0,{separateMBRPaths:!0,direction:"left"}),L=us(J,"right",Z)):J==="MBR"&&pe!=="MBR"?(F=us(pe,"left",Z),L=us(J,"right",Z,void 0,{separateMBRPaths:!0,direction:"right"})):(F=us(pe,"left",Z),L=us(J,"right",Z));const U="M 455 45 L 465 45 L 550 45 L 550 16 L 90 16 L 90 85 L 130 85 L 220 85",k="M 455 85 L 465 85 L 550 85 L 550 250 L 90 250 L 90 145 L 125 145 L 220 145";c(F||U),d(L||k),p("")}else a(!1),c(""),d(""),p(""),m(""),y(""),x("");else a(!1),c(""),d(""),p(""),m(""),y(""),x("")},G=Z=>{const V=Z,B=E();$(B||V.detail.instruction)},X=Z=>{const V=Z;if(V.detail&&V.detail.instruction){const B=E();$(B||V.detail.instruction)}};return window.addEventListener("instructionChange",G),window.addEventListener("cpu:alu.execute",X),()=>{window.removeEventListener("instructionChange",G),window.removeEventListener("cpu:alu.execute",X)}},[s,E]);const M=t.bit(1),O=t.bit(0),D=t.bit(3),j=t.bit(4),K=t.bit(2);return h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[l&&h.jsx(Ge.path,{className:"fill-none stroke-green-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",d:l,pathLength:1,strokeDasharray:1,style:Ie("cpu.alu.operands")}),u&&h.jsx(Ge.path,{className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",d:u,pathLength:1,strokeDasharray:1,style:Ie("cpu.alu.operands")}),f&&h.jsx(Ge.path,{className:"fill-none stroke-amber-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,191,36,0.6)]",strokeLinejoin:"round",d:f,pathLength:1,strokeDasharray:1,style:Ie("cpu.alu.results")}),l&&h.jsx(Ge.path,{className:"fill-none stroke-green-300 stroke-1 opacity-50",strokeLinejoin:"round",d:l,pathLength:1,strokeDasharray:1,style:Ie("cpu.alu.operands")}),u&&h.jsx(Ge.path,{className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",d:u,pathLength:1,strokeDasharray:1,style:Ie("cpu.alu.operands")}),f&&h.jsx(Ge.path,{className:"fill-none stroke-amber-300 stroke-1 opacity-50",strokeLinejoin:"round",d:f,pathLength:1,strokeDasharray:1,style:Ie("cpu.alu.results")}),g&&v&&o&&l&&u&&h.jsxs(Ge.text,{x:"125",y:"65",fill:"#34D399",fontSize:"12",fontWeight:"bold",style:{opacity:Ie("cpu.alu.leftText").opacity},children:[g," = ",n.low.toString("hex")]}),g&&v&&o&&l&&u&&h.jsxs(Ge.text,{x:"125",y:"168",fill:"#60A5FA",fontSize:"12",fontWeight:"bold",style:{opacity:Ie("cpu.alu.rightText").opacity},children:[v," = ",i.low.toString("hex")]}),w&&o&&h.jsxs(Ge.text,{x:"310",y:"95",fill:"#A855F7",fontSize:"12",fontWeight:"bold",style:{...Ie("cpu.alu.cog"),opacity:Ie("cpu.alu.resultText").opacity},children:[w," = ",e.low.toString("hex")]}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#374151"}),h.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),h.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),h.jsx("filter",{id:"aluShadow",children:h.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),h.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),h.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),h.jsx(Ge.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:Ie("cpu.alu.cog").rot.to($=>`rotate(${$*60}deg)`)}}),o&&h.jsx(Ge.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:Ie("cpu.alu.operation"),children:r}),h.jsxs(Ge.div,{className:ee("absolute flex items-center justify-center gap-0.5 rounded border-2 border-amber-400 bg-transparent font-bold text-stone-200 shadow-lg ring-1 ring-amber-300",_.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px] min-h-[40px] min-w-[60px] px-2":"left-[230px] top-[190px] min-h-[40px] min-w-[40px] px-1"),style:Ie("cpu.FLAGS"),children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[7px] font-bold text-stone-300",children:"FLAGS"}),h.jsxs("div",{className:"mt-3 flex items-center gap-0.5",children:[S&&h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",j?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),_.flagsVisibility==="SF_OF_CF_ZF"&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",D?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",K?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",M?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",O?"border-yellow-400 bg-yellow-400 text-stone-950 shadow-[0_0_4px_rgba(250,204,21,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function Wde({progress:t,resetAnimations:e,returnToOriginal:n}){const{opacity:r,filterIntensity:s}=Nb({opacity:t.to(o=>n||e||o===0||o>0&&o<1?.4:o===1?1:.4),filterIntensity:t.to(o=>n||e||o===0||o>0&&o<1?.25:o===1?.6:.25),config:{tension:280,friction:60,duration:300}});return h.jsx(Ge.div,{style:{opacity:r,filter:s.to(o=>`drop-shadow(0 0 ${8*o}px rgba(56,189,248,${o}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"90",height:"42",viewBox:"0 0 90 42",children:[h.jsx("rect",{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"#0369a1",stroke:"#38bdf8",strokeWidth:"2.5"}),Array.from({length:4}).map((o,a)=>h.jsx("rect",{x:2,y:10+a*5,width:8,height:2.5,rx:1.2,fill:"#38bdf8"},a)),Array.from({length:8}).map((o,a)=>h.jsx(Ge.rect,{x:60,y:8+a*3.2,width:24,height:2.5,rx:1.2,fill:t.to(l=>n||e||l>0&&l<1?"#0ea5e9":l===1?"#7dd3fc":"#0ea5e9"),style:{filter:t.to(l=>n||e||l>0&&l<1?"none":l===1?"drop-shadow(0 0 8px #38bdf8)":"none")}},a)),Array.from({length:5}).map((o,a)=>h.jsx(Ge.rect,{x:15,y:t.to(()=>12+a*3.5),width:40,height:2.8,rx:1.4,fill:t.to(l=>n||e||l===0||l>0&&l<1?"#0c4a6e":l===1?"#7dd3fc":"#0c4a6e"),style:{filter:t.to(l=>n||e||l===0||l>0&&l<1?"none":l===1?"drop-shadow(0 0 6px #38bdf8)":"none"),transition:"fill 0.7s, filter 0.7s"}},a)),h.jsx(Ge.rect,{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"none",stroke:"#7dd3fc",strokeWidth:"2.5",strokeDasharray:"160",strokeDashoffset:t.to(o=>n||e||o>0&&o<1?160:o===1?0:160),style:{opacity:t.to(o=>n||e||o>0&&o<1?0:o===1?.8:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})})}function Gde({progress:t,phase:e,resetAnimations:n,returnToOriginal:i}){return h.jsxs(h.Fragment,{children:[Array.from({length:5}).map((s,o)=>h.jsx(Ge.rect,{x:16,y:t.to(()=>10+o*4),width:38,height:3,rx:1,fill:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"#581c87":a>=(o+1)/5?"#f0abfc":Math.floor(a*5)===o&&a>0&&a<1?"#fff1fb":"#581c87"),style:{filter:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"none":a>=(o+1)/5?"drop-shadow(0 0 6px #e879f9)":Math.floor(a*5)===o&&a>0&&a<1?"drop-shadow(0 0 12px #e879f9)":"none"),transition:"fill 0.7s, filter 0.7s"}},o)),h.jsx(Ge.rect,{x:15,y:t.to(s=>10+Math.floor(s*5)*4-.5),width:40,height:3.5,rx:1.5,fill:"#e879f9",style:{opacity:t.to(s=>i||n?0:s>0&&s<1?.25+.25*Math.sin(s*Math.PI):0),transition:"y 0.3s, opacity 0.2s"}}),h.jsx(Ge.rect,{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"none",stroke:"#f0abfc",strokeWidth:"2",strokeDasharray:"160",strokeDashoffset:t.to(s=>i||n||e==="fetching"&&s===0||s===0?160:160-160*s),style:{opacity:t.to(s=>i||n?0:s>0&&s<1&&e==="fetching-operands"?.7:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})}function Kde({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=Nb({opacity:t.to(s=>n||s===0?.4:s>0&&s<1?1:.4),pulseActive:t.to(s=>n?!1:e&&s>0&&s<1),config:{tension:280,friction:60,duration:300}});return h.jsx(Ge.span,{className:"flex size-4 items-center justify-center rounded-full bg-fuchsia-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(232,121,249,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Lectura de microinstrucciones",children:h.jsx(Ge.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"1"})})}function qde({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=Nb({opacity:t.to(s=>n||s===0||s>0&&s<1?.4:s===1?1:.4),pulseActive:t.to(s=>n?!1:e&&s===1),config:{tension:280,friction:60,duration:300}});return h.jsx(Ge.span,{className:"flex size-4 items-center justify-center rounded-full bg-sky-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(56,189,248,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Envío de señales de control",children:h.jsx(Ge.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"2"})})}function Yde({progress:t,phase:e,memAnimKey:n,resetAnimations:i,returnToOriginal:r}){const{opacity:s,filterIntensity:o}=Nb({opacity:t.to(a=>r||a===0?.4:a>0&&a<1?1:.4),filterIntensity:t.to(a=>r||a===0?.25:a>0&&a<1?.6:.25),config:{tension:280,friction:60,duration:300}});return h.jsx(Ge.div,{style:{opacity:s,filter:o.to(a=>`drop-shadow(0 0 ${8*a}px rgba(232,121,249,${a}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"70",height:"38",viewBox:"0 0 70 38",className:"mb-0.5",children:[h.jsx("rect",{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"#a21caf",stroke:"#e879f9",strokeWidth:"2"}),Array.from({length:4}).map((a,l)=>h.jsx("rect",{x:2,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),Array.from({length:4}).map((a,l)=>h.jsx("rect",{x:62,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),h.jsx(Gde,{progress:t,phase:e,resetAnimations:i,returnToOriginal:r},n)]})})}function Xde(){const[t,e]=b.useState(0),[n,i]=b.useState(!1),[r,s]=b.useState(!1);b.useEffect(()=>{let d=0;const f=Ie("cpu.decoder.progress.progress").to(p=>{d===0&&p>0&&(e(g=>g+1),i(!1),s(!1)),d>0&&p===0&&(e(g=>g+1),i(!0),setTimeout(()=>{s(!0)},100),setTimeout(()=>i(!1),100)),d=p});return()=>{typeof f=="function"&&f()}},[]);const o=Xt(),a=tt(zn),[l,c]=b.useState(!1),[,u]=b.useState(!1);return b.useEffect(()=>{let d=null;u(!1);let f;return l?f=Ie("cpu.decoder.progress.progress").to(p=>{p===1?d=setTimeout(()=>{u(!0)},1500):(d&&clearTimeout(d),u(!1))}):u(!1),()=>{d&&clearTimeout(d),typeof f=="function"&&f()}},[l]),h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[h.jsx(Ge.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Ie("cpu.decoder.path")}),h.jsx(Ge.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Ie("cpu.decoder.path")})]}),h.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:o("computer.cpu.control-unit")})}),h.jsxs("div",{className:"absolute bottom-[17px] left-[30px] flex h-[160px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[h.jsx("div",{className:"min-w-[180px] overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-3 py-1",children:h.jsxs("div",{style:{position:"relative",left:0},children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{style:{position:"relative",left:0,display:"flex",alignItems:"center"},children:[h.jsx("span",{className:"text-sm leading-none",children:o("computer.cpu.decoder")}),h.jsx("button",{type:"button","aria-label":l?"Ocultar memoria de control":"Mostrar memoria de control",className:"ml-2 flex size-6 items-center justify-center rounded-lg bg-gradient-to-r from-mantis-600 to-mantis-500 text-white shadow-lg transition-all duration-300 hover:from-mantis-500 hover:to-mantis-400 focus:outline-none focus:ring-2 focus:ring-mantis-400",style:{fontSize:"1.2em",lineHeight:1,padding:0,minWidth:0,minHeight:0,transform:l?"rotate(180deg)":"rotate(0deg)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:l?"0 4px 12px rgba(34,197,94,0.4)":"0 2px 8px rgba(34,197,94,0.2)"},onClick:()=>c(d=>!d),children:h.jsx("span",{style:{fontWeight:"bold",transform:l?"scale(0.8)":"scale(1)",transition:"transform 0.2s ease-out"},children:l?"−":"+"})})]})}),h.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:h.jsx(Ge.div,{className:"h-full bg-mantis-400",style:{width:Ie("cpu.decoder.progress.progress").to(d=>`${d*100}%`),opacity:Ie("cpu.decoder.progress.opacity")}})}),h.jsx("div",{className:"flex w-full justify-center",children:l&&h.jsx("div",{className:"flex min-w-[120px] flex-col items-center",children:h.jsxs("div",{className:"flex flex-row items-start gap-4",children:[h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-fuchsia-100 drop-shadow-[0_0_6px_rgba(232,121,249,0.6)]",style:{minHeight:"18px"},children:[h.jsx(Kde,{progress:Ie("cpu.decoder.progress.progress"),showControlMem:l,returnToOriginal:r}),"Memoria de control"]}),h.jsx(Yde,{progress:Ie("cpu.decoder.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]}),h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-sky-100 drop-shadow-[0_0_6px_rgba(56,189,248,0.6)]",style:{minHeight:"18px"},children:[h.jsx(qde,{progress:Ie("cpu.decoder.progress.progress"),showControlMem:l,returnToOriginal:r}),"Secuenciador"]}),h.jsx(Wde,{progress:Ie("cpu.decoder.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]})]})})}),h.jsx("div",{className:"flex w-full justify-center",style:{maxHeight:l?90:0,opacity:l?1:0,transform:l?"translateY(0)":"translateY(-10px)",transition:"max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease-out, transform 0.5s ease-out",overflow:"hidden"}})]})}),h.jsx("div",{className:"flex w-full flex-1 items-start justify-center p-1",children:h.jsxs("div",{className:"w-[220px] max-w-[220px]",children:[h.jsx("div",{className:"mb-1 flex items-center justify-between",children:h.jsx("span",{className:"w-16 whitespace-nowrap text-xs font-bold uppercase tracking-wide text-mantis-400",children:"Instrucción"})}),h.jsx("div",{className:"mb-0.5 rounded border border-stone-600 bg-stone-900/80 p-0.5",children:h.jsx("div",{className:"min-w-0 flex-1 text-center",children:a&&"metadata"in a&&a.metadata?h.jsxs("div",{className:"truncate text-xs text-stone-300",children:[h.jsx("span",{className:"font-mono text-mantis-300",children:a.metadata.name}),a.metadata.operands.length>0&&h.jsxs("span",{className:"text-white",children:[" ",a.metadata.operands.join(", ")]})]}):h.jsx("div",{className:"text-xs text-stone-500",children:(a==null?void 0:a.phase)==="stopped"?"CPU detenida":"Esperando..."})})})]})})]})]})}function Jde(){const[t,e]=b.useState(!1),[n,i]=b.useState(0);return b.useEffect(()=>{const r=()=>{e(!0),i(s=>s+1),setTimeout(()=>{e(!1)},3e3)};return window.addEventListener("ip-register-update",r),()=>{window.removeEventListener("ip-register-update",r)}},[]),t?h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-30px);
          }
          70% {
            opacity: 1;
            transform: translateY(-30px);
          }
          100% {
            opacity: 0;
            transform: translateY(-50px);
          }
        }
      `}),h.jsx("div",{className:ee("pointer-events-none absolute left-[425px] top-[342px]","font-mono text-lg font-bold"),style:{color:"#ff6347",animation:"slideUpAndFade 3s ease-out forwards"},children:"+1"},n)]}):null}function Zde(){const t=Xt(),e=tt(FC),[n,i]=b.useState(!1),[r,s]=b.useState(!1),[o,a]=b.useState(!1);return b.useEffect(()=>{const l=(u,d,f)=>{a(u==="ADD"||u==="SUB"||u==="CMP"||u==="AND"||u==="OR"||u==="XOR"||u==="NOT"||u==="NEG"||u==="DEC"||u==="INC"),i(!!(u==="IRET"||d)),s(!!f)},c=u=>{const d=u;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]),h.jsxs("div",{"data-testid":"cpu-component",className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),h.jsx(qie,{showSP:e,showri:r}),h.jsx(Ese,{showSP:e,showid:n,showri:r}),o&&h.jsxs(h.Fragment,{children:[h.jsx(Ni,{name:"left",className:ee("left-[96px] top-[49px]","border-transparent","bg-transparent")}),h.jsx(Ni,{name:"right",className:ee("left-[96px] top-[150px]","border-transparent","bg-transparent")}),h.jsx(Ni,{name:"result",className:ee("left-[280px] top-[79px]","border-transparent","bg-transparent")})]}),h.jsx(Hde,{}),h.jsxs("div",{className:"absolute left-[450px] top-[30px] z-10",children:[h.jsx(Ni,{name:"AL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"AL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[70px] z-10",children:[h.jsx(Ni,{name:"BL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"BL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[110px] z-10",children:[h.jsx(Ni,{name:"CL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"CL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[150px] z-10",children:[h.jsx(Ni,{name:"DL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"DL"})]}),n&&h.jsx(Ni,{name:"id",className:ee("left-[450px] top-[190px]","border-cyan-400")}),h.jsxs("div",{className:"absolute left-[450px] top-[332px] z-10",children:[h.jsx(Ni,{name:"IP",emphasis:!0,className:"border-red-500"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-red-500 bg-red-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-red-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IP"})]}),h.jsxs("div",{className:"absolute left-[610px] top-[332px] z-10",children:[h.jsx(Ni,{name:"MAR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MAR"})]}),h.jsxs("div",{className:"absolute left-[610px] top-[233px] z-10",children:[h.jsx(Ni,{name:"MBR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MBR"})]}),h.jsxs("div",{className:"absolute left-[230px] top-[270px] z-10",children:[h.jsx(Ni,{name:"IR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IR"})]}),h.jsx(Xde,{}),e&&h.jsx(Ni,{name:"SP",emphasis:!0,className:ee("left-[450px] top-[292px]","border-yellow-400")}),r&&h.jsxs("div",{className:"absolute left-[450px] top-[372px] z-10",children:[h.jsx(Ni,{name:"ri",emphasis:!0,className:"border-cyan-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"ri"})]}),h.jsx(Jde,{})]})}function Ni({name:t,emphasis:e,className:n}){const i=r=>`cpu.${r}`;return h.jsx(hr,{name:t,valueAtom:Oe[t],springs:i(t),emphasis:e,className:ee("absolute",n)})}const cB=b.memo(({className:t})=>{const e=Xt(),n=tt(kp),i=tt(mb),[r]=sf(),[s,o]=b.useState(!1),l=1e3/r.cpuSpeed;if(!r.showStatsCPU)return null;const c=i>0?(n/i).toFixed(2):"-",u=n*l,d=l/1e3,f=()=>n===0?"📊":i===0?"⏸️":"⚡",p=()=>n===0?"text-stone-400":i===0?"text-yellow-400":"text-mantis-400",g=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"CPI (Ciclos por Instrucción):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Métrica fundamental que indica la eficiencia del procesador. Calculada como el cociente entre ciclos totales e instrucciones ejecutadas. Un CPI más bajo significa mejor rendimiento."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo de CPU:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Tiempo real transcurrido durante la ejecución del programa. Se calcula multiplicando los ciclos totales por el tiempo de cada ciclo según la velocidad configurada."})]})]}),m=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Velocidad CPU (Hz):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Frecuencia del reloj del procesador que determina la velocidad de ejecución. Cada ciclo de reloj ejecuta una microoperación del procesador."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo por Ciclo:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Duración de cada ciclo calculada como 1/velocidad. Por ejemplo, 1 MHz = 1 microsegundo por ciclo."})]})]});return h.jsxs("div",{className:ee("flex flex-col gap-2 rounded-lg border border-stone-600 bg-stone-900/95 p-3 shadow-lg","min-w-[300px] max-w-[350px]",t),children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-bold uppercase tracking-wide text-mantis-400",children:e("computer.cpu.stats")}),h.jsx("button",{onClick:()=>o(!s),className:ee("rounded px-2 py-1 text-xs transition-colors",s?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:bg-mantis-400/10 hover:text-mantis-400"),children:s?"−":"+"})]})}),h.jsxs("div",{className:"flex items-center gap-3 rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:ee("text-2xl",p()),children:f()}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:ee("text-sm font-semibold",p()),children:n>0?"Ejecutando":"En espera"}),h.jsx("div",{className:"mt-1 text-xs text-stone-400",children:i>0?`${i} instrucciones ejecutadas`:"Sin instrucciones ejecutadas"})]})]}),s&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:"mb-2 text-xs font-bold text-mantis-400",children:"Métricas principales:"}),h.jsx("div",{className:"mb-2 text-xs text-stone-400",children:"Estadísticas acumuladas del programa completo"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:"Ciclos totales del programa"}),h.jsx("div",{className:"font-mono text-lg text-white",children:n})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:e("computer.cpu.instruction-count")}),h.jsx("div",{className:"font-mono text-lg text-white",children:i})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Métricas de Rendimiento:"}),h.jsx(gr,{content:g,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:"💡"})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs text-stone-300",title:e("computer.cpu.cpi-help"),children:[e("computer.cpu.cpi"),":"]}),h.jsx("span",{className:"font-mono text-sm text-mantis-300",children:c})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-300",title:`${e("computer.cpu.cpu-time-help")} (${d.toFixed(1)} s)`,children:e("computer.cpu.cpu-time")}),h.jsxs("span",{className:"font-mono text-sm text-mantis-300",children:[(u/1e3).toFixed(1)," s"]})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Configuración Actual:"}),h.jsx(gr,{content:m,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:"⚙️"})})]}),h.jsx("div",{className:"space-y-1 text-xs text-stone-300",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-stone-300",children:h.jsx("strong",{children:"Velocidad CPU:"})}),h.jsxs("span",{className:"font-mono text-mantis-300",children:[r.cpuSpeed," Hz (",d.toFixed(1)," s/ciclo)"]})]})})]})]})]})});cB.displayName="CPUStats";const Qde="_pushable_1q0ek_2",efe="_front_1q0ek_15",tfe="_shadow_1q0ek_20",nfe="_edge_1q0ek_52",Wg={pushable:Qde,front:efe,shadow:tfe,edge:nfe};function ife(){const t=Xt(),{status:e,dispatch:n,devices:i}=Ln();return xu("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?h.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:h.jsxs("button",{className:Wg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[h.jsx("div",{className:Wg.shadow}),h.jsx("div",{className:Wg.edge}),h.jsx("span",{className:Wg.front,children:t("computer.f10")})]})}):null}function rfe(){const t=Xt(),{devices:e}=Ln();return e.handshake?h.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),h.jsx(hr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:_E,springs:"handshake.STATE",className:"mx-auto my-4"}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(hr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:kE,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var uB={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(b)})(tU,function(n){return function(){var i={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(F,L){for(var U in L)l.o(L,U)&&!l.o(F,U)&&Object.defineProperty(F,U,{enumerable:!0,get:L[U]})},o:function(F,L){return Object.prototype.hasOwnProperty.call(F,L)},r:function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})}},c={};function u(F){return function(L){if(Array.isArray(L))return f(L)}(F)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(F)||d(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(F,L){if(F){if(typeof F=="string")return f(F,L);var U={}.toString.call(F).slice(8,-1);return U==="Object"&&F.constructor&&(U=F.constructor.name),U==="Map"||U==="Set"?Array.from(F):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?f(F,L):void 0}}function f(F,L){(L==null||L>F.length)&&(L=F.length);for(var U=0,k=Array(L);U<L;U++)k[U]=F[U];return k}function p(F){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},p(F)}function g(F,L){for(var U=0;U<L.length;U++){var k=L[U];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,v(k.key),k)}}function m(F,L,U){return(L=v(L))in F?Object.defineProperty(F,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):F[L]=U,F}function v(F){var L=function(U,k){if(p(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var I=P.call(U,k);if(p(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(U)}(F,"string");return p(L)=="symbol"?L:L+""}l.r(c),l.d(c,{SimpleKeyboard:function(){return J},default:function(){return le}});var y=function(){return F=function k(P){var I=P.getOptions,T=P.getCaretPosition,Y=P.getCaretPositionEnd,W=P.dispatch;(function(ne,Q){if(!(ne instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,k),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(ne){return ne&&!(ne[0]==="{"&&ne[ne.length-1]==="}")}),this.getOptions=I,this.getCaretPosition=T,this.getCaretPositionEnd=Y,this.dispatch=W,k.bindMethods(k,this)},L=[{key:"getButtonType",value:function(k){return k.includes("{")&&k.includes("}")&&k!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(k){var P=this.getButtonType(k),I=k.replace("{","").replace("}",""),T="";return P!=="standardBtn"&&(T=" hg-button-".concat(I)),"hg-".concat(P).concat(T)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(k,P){return(P=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),P):P||this.getDefaultDiplay())[k]||k}},{key:"getUpdatedInput",value:function(k,P,I){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:I,Y=arguments.length>4&&arguments[4]!==void 0&&arguments[4],W=this.getOptions(),ne=[I,T,Y],Q=P;return(k==="{bksp}"||k==="{backspace}")&&Q.length>0?Q=this.removeAt.apply(this,[Q].concat(ne)):(k==="{delete}"||k==="{forwarddelete}")&&Q.length>0?Q=this.removeForwardsAt.apply(this,[Q].concat(ne)):k==="{space}"?Q=this.addStringAt.apply(this,[Q," "].concat(ne)):k!=="{tab}"||typeof W.tabCharOnTab=="boolean"&&W.tabCharOnTab===!1?k!=="{enter}"&&k!=="{numpadenter}"||!W.newLineOnEnter?k.includes("numpad")&&Number.isInteger(Number(k[k.length-2]))?Q=this.addStringAt.apply(this,[Q,k[k.length-2]].concat(ne)):k==="{numpaddivide}"?Q=this.addStringAt.apply(this,[Q,"/"].concat(ne)):k==="{numpadmultiply}"?Q=this.addStringAt.apply(this,[Q,"*"].concat(ne)):k==="{numpadsubtract}"?Q=this.addStringAt.apply(this,[Q,"-"].concat(ne)):k==="{numpadadd}"?Q=this.addStringAt.apply(this,[Q,"+"].concat(ne)):k==="{numpaddecimal}"?Q=this.addStringAt.apply(this,[Q,"."].concat(ne)):k==="{"||k==="}"?Q=this.addStringAt.apply(this,[Q,k].concat(ne)):k.includes("{")||k.includes("}")||(Q=this.addStringAt.apply(this,[Q,k].concat(ne))):Q=this.addStringAt.apply(this,[Q,`
`].concat(ne)):Q=this.addStringAt.apply(this,[Q,"	"].concat(ne)),W.debug&&console.log("Input will be: "+Q),Q}},{key:"updateCaretPos",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],I=this.updateCaretPosAction(k,P);this.dispatch(function(T){T.setCaretPosition(I)})}},{key:"updateCaretPosAction",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],I=this.getOptions(),T=this.getCaretPosition();return T!=null&&(P?T>0&&(T-=k):T+=k),I.debug&&console.log("Caret at:",T),T}},{key:"addStringAt",value:function(k,P){var I,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k.length,W=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return T||T===0?(I=[k.slice(0,T),P,k.slice(Y)].join(""),this.isMaxLengthReached()||W&&this.updateCaretPos(P.length)):I=k+P,I}},{key:"removeAt",value:function(k){var P,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(I===0&&T===0)return k;if(I===T){var W=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;I&&I>=0?k.substring(I-2,I).match(W)?(P=k.substr(0,I-2)+k.substr(I),Y&&this.updateCaretPos(2,!0)):(P=k.substr(0,I-1)+k.substr(I),Y&&this.updateCaretPos(1,!0)):k.slice(-2).match(W)?(P=k.slice(0,-2),Y&&this.updateCaretPos(2,!0)):(P=k.slice(0,-1),Y&&this.updateCaretPos(1,!0))}else P=k.slice(0,I)+k.slice(T),Y&&this.dispatch(function(ne){ne.setCaretPosition(I)});return P}},{key:"removeForwardsAt",value:function(k){var P,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return k!=null&&k.length&&I!==null?(I===T?P=k.substring(I,I+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?k.substr(0,I)+k.substr(I+2):k.substr(0,I)+k.substr(I+1):(P=k.slice(0,I)+k.slice(T),Y&&this.dispatch(function(W){W.setCaretPosition(I)})),P):k}},{key:"handleMaxLength",value:function(k,P){var I=this.getOptions(),T=I.maxLength,Y=k[I.inputName||"default"],W=P.length-1>=T;if(P.length<=Y.length)return!1;if(Number.isInteger(T))return I.debug&&console.log("maxLength (num) reached:",W),W?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(p(T)==="object"){var ne=P.length-1>=T[I.inputName||"default"];return I.debug&&console.log("maxLength (obj) reached:",ne),ne?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(k){return k?k.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(P,I){return I.length?P+I[0].toUpperCase()+I.slice(1):P}):""}},{key:"chunkArray",value:function(k,P){return u(Array(Math.ceil(k.length/P))).map(function(I,T){return k.slice(P*T,P+P*T)})}},{key:"escapeRegex",value:function(k){return k.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(k,P){var I=k,T=P.indexOf("‫");return T<k&&T!=-1&&I--,P.indexOf("‬")<k&&T!=-1&&I--,I<0?0:I}},{key:"isConstructor",value:function(k){try{Reflect.construct(String,[],k)}catch{return!1}return!0}}],U=[{key:"bindMethods",value:function(k,P){var I,T=function(W,ne){var Q=typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(!Q){if(Array.isArray(W)||(Q=d(W))||ne){Q&&(W=Q);var Pe=0,ze=function(){};return{s:ze,n:function(){return Pe>=W.length?{done:!0}:{done:!1,value:W[Pe++]}},e:function(ve){throw ve},f:ze}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ve,$e=!0,Je=!1;return{s:function(){Q=Q.call(W)},n:function(){var ve=Q.next();return $e=ve.done,ve},e:function(ve){Je=!0,Ve=ve},f:function(){try{$e||Q.return==null||Q.return()}finally{if(Je)throw Ve}}}}(Object.getOwnPropertyNames(k.prototype));try{for(T.s();!(I=T.n()).done;){var Y=I.value;Y==="constructor"||Y==="bindMethods"||(P[Y]=P[Y].bind(P))}}catch(W){T.e(W)}finally{T.f()}}}],L&&g(F.prototype,L),U&&g(F,U),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,L,U}();m(y,"noop",function(){});var w=y;function x(F){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},x(F)}function S(F,L){for(var U=0;U<L.length;U++){var k=L[U];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,E(k.key),k)}}function _(F,L,U){return(L=E(L))in F?Object.defineProperty(F,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):F[L]=U,F}function E(F){var L=function(U,k){if(x(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var I=P.call(U,k);if(x(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(U)}(F,"string");return x(L)=="symbol"?L:L+""}var C=function(){return F=function k(P){var I=this,T=P.dispatch,Y=P.getOptions;(function(W,ne){if(!(W instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,k),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isModifierKey",function(W){return W.altKey||W.ctrlKey||W.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(W.code||W.key||I.keyCodeToKey(W==null?void 0:W.keyCode))}),this.dispatch=T,this.getOptions=Y,w.bindMethods(k,this)},L=[{key:"handleHighlightKeyDown",value:function(k){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var I=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(T){var Y,W,ne=T.getButtonElement(I),Q=T.getButtonElement("{".concat(I,"}"));if(ne)Y=ne,W=I;else{if(!Q)return;Y=Q,W="{".concat(I,"}")}var Pe,ze,Ve,$e,Je=function(Ct){Ct.style.background=P.physicalKeyboardHighlightBgColor||"#dadce4",Ct.style.color=P.physicalKeyboardHighlightTextColor||"black"};if(Y)if(Array.isArray(Y)){if(Y.forEach(function(Ct){return Je(Ct)}),P.physicalKeyboardHighlightPress)if(P.physicalKeyboardHighlightPressUsePointerEvents)(Pe=Y[0])===null||Pe===void 0||(ze=Pe.onpointerdown)===null||ze===void 0||ze.call(Pe,k);else if(P.physicalKeyboardHighlightPressUseClick){var ve;(ve=Y[0])===null||ve===void 0||ve.click()}else T.handleButtonClicked(W,k)}else Je(Y),P.physicalKeyboardHighlightPress&&(P.physicalKeyboardHighlightPressUsePointerEvents?(Ve=Y)===null||Ve===void 0||($e=Ve.onpointerdown)===null||$e===void 0||$e.call(Ve,k):P.physicalKeyboardHighlightPressUseClick?Y.click():T.handleButtonClicked(W,k))})}},{key:"handleHighlightKeyUp",value:function(k){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var I=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(T){var Y,W,ne,Q=T.getButtonElement(I)||T.getButtonElement("{".concat(I,"}")),Pe=function(ze){ze.removeAttribute&&ze.removeAttribute("style")};Q&&(Array.isArray(Q)?(Q.forEach(function(ze){return Pe(ze)}),P.physicalKeyboardHighlightPressUsePointerEvents&&((Y=Q[0])===null||Y===void 0||(W=Y.onpointerup)===null||W===void 0||W.call(Y,k))):(Pe(Q),P.physicalKeyboardHighlightPressUsePointerEvents&&(Q==null||(ne=Q.onpointerup)===null||ne===void 0||ne.call(Q,k))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(k){var P,I="",T=k.code||k.key||this.keyCodeToKey(k==null?void 0:k.keyCode);return(I=T!=null&&T.includes("Numpad")||T!=null&&T.includes("Shift")||T!=null&&T.includes("Space")||T!=null&&T.includes("Backspace")||T!=null&&T.includes("Control")||T!=null&&T.includes("Alt")||T!=null&&T.includes("Meta")?k.code||"":k.key||this.keyCodeToKey(k==null?void 0:k.keyCode)||"").length>1?(P=I)===null||P===void 0?void 0:P.toLowerCase():I}},{key:"keyCodeToKey",value:function(k){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[k]||""}}],L&&S(F.prototype,L),U&&S(F,U),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,L,U}();function N(F){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},N(F)}function M(F,L){for(var U=0;U<L.length;U++){var k=L[U];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,D(k.key),k)}}function O(F,L,U){return(L=D(L))in F?Object.defineProperty(F,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):F[L]=U,F}function D(F){var L=function(U,k){if(N(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var I=P.call(U,k);if(N(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(U)}(F,"string");return N(L)=="symbol"?L:L+""}var j=function(){return F=function k(P){var I=P.utilities,T=P.options;(function(Y,W){if(!(Y instanceof W))throw new TypeError("Cannot call a class as a function")})(this,k),O(this,"utilities",void 0),O(this,"options",void 0),O(this,"candidateBoxElement",void 0),O(this,"pageIndex",0),O(this,"pageSize",void 0),this.utilities=I,this.options=T,w.bindMethods(k,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},L=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(k){var P=this,I=k.candidateValue,T=k.targetElement,Y=k.onSelect;if(I&&I.length){var W=this.utilities.chunkArray(I.split(" "),this.pageSize);this.renderPage({candidateListPages:W,targetElement:T,pageIndex:this.pageIndex,nbPages:W.length,onItemSelected:function(ne,Q){Y(ne,Q),P.destroy()}})}}},{key:"renderPage",value:function(k){var P,I=this,T=k.candidateListPages,Y=k.targetElement,W=k.pageIndex,ne=k.nbPages,Q=k.onItemSelected;(P=this.candidateBoxElement)===null||P===void 0||P.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Pe=document.createElement("ul");Pe.className="hg-candidate-box-list",T[W].forEach(function(wn){var Vl,Es=document.createElement("li"),da=function(){var fa=new(I.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(fa,"target",{value:Es}),fa};Es.className="hg-candidate-box-list-item",Es.innerHTML=((Vl=I.options.display)===null||Vl===void 0?void 0:Vl[wn])||wn,I.options.useTouchEvents?Es.ontouchstart=function(fa){return Q(wn,fa||da())}:Es.onclick=function(){var fa=arguments.length>0&&arguments[0]!==void 0?arguments[0]:da();return Q(wn,fa)},Pe.appendChild(Es)});var ze=W>0,Ve=document.createElement("div");Ve.classList.add("hg-candidate-box-prev"),ze&&Ve.classList.add("hg-candidate-box-btn-active");var $e=function(){ze&&I.renderPage({candidateListPages:T,targetElement:Y,pageIndex:W-1,nbPages:ne,onItemSelected:Q})};this.options.useTouchEvents?Ve.ontouchstart=$e:Ve.onclick=$e,this.candidateBoxElement.appendChild(Ve),this.candidateBoxElement.appendChild(Pe);var Je=W<ne-1,ve=document.createElement("div");ve.classList.add("hg-candidate-box-next"),Je&&ve.classList.add("hg-candidate-box-btn-active");var Ct=function(){Je&&I.renderPage({candidateListPages:T,targetElement:Y,pageIndex:W+1,nbPages:ne,onItemSelected:Q})};this.options.useTouchEvents?ve.ontouchstart=Ct:ve.onclick=Ct,this.candidateBoxElement.appendChild(ve),Y.prepend(this.candidateBoxElement)}}],L&&M(F.prototype,L),U&&M(F,U),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,L,U}(),K=j;function $(F){return function(L){if(Array.isArray(L))return G(L)}(F)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(F)||function(L,U){if(L){if(typeof L=="string")return G(L,U);var k={}.toString.call(L).slice(8,-1);return k==="Object"&&L.constructor&&(k=L.constructor.name),k==="Map"||k==="Set"?Array.from(L):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?G(L,U):void 0}}(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function G(F,L){(L==null||L>F.length)&&(L=F.length);for(var U=0,k=Array(L);U<L;U++)k[U]=F[U];return k}function X(F){return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},X(F)}function Z(F,L){var U=Object.keys(F);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(F);L&&(k=k.filter(function(P){return Object.getOwnPropertyDescriptor(F,P).enumerable})),U.push.apply(U,k)}return U}function V(F,L){for(var U=0;U<L.length;U++){var k=L[U];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,ie(k.key),k)}}function B(F,L,U){return(L=ie(L))in F?Object.defineProperty(F,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):F[L]=U,F}function ie(F){var L=function(U,k){if(X(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var I=P.call(U,k);if(X(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(U)}(F,"string");return X(L)=="symbol"?L:L+""}var pe=function(){return F=function k(P,I){var T=this;if(function($e,Je){if(!($e instanceof Je))throw new TypeError("Cannot call a class as a function")}(this,k),B(this,"input",void 0),B(this,"options",void 0),B(this,"utilities",void 0),B(this,"caretPosition",void 0),B(this,"caretPositionEnd",void 0),B(this,"keyboardDOM",void 0),B(this,"keyboardPluginClasses",void 0),B(this,"keyboardDOMClass",void 0),B(this,"buttonElements",void 0),B(this,"currentInstanceName",void 0),B(this,"allKeyboardInstances",void 0),B(this,"keyboardInstanceNames",void 0),B(this,"isFirstKeyboardInstance",void 0),B(this,"physicalKeyboard",void 0),B(this,"modules",void 0),B(this,"activeButtonClass",void 0),B(this,"holdInteractionTimeout",void 0),B(this,"holdTimeout",void 0),B(this,"isMouseHold",void 0),B(this,"initialized",void 0),B(this,"candidateBox",void 0),B(this,"keyboardRowsDOM",void 0),B(this,"defaultName","default"),B(this,"activeInputElement",null),B(this,"handleParams",function($e,Je){var ve,Ct,wn;if(typeof $e=="string")ve=$e.split(".").join(""),Ct=document.querySelector(".".concat(ve)),wn=Je;else if($e instanceof HTMLDivElement){if(!$e.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ve=$e.className.split(" ")[0],Ct=$e,wn=Je}else ve="simple-keyboard",Ct=document.querySelector(".".concat(ve)),wn=$e;return{keyboardDOMClass:ve,keyboardDOM:Ct,options:wn}}),B(this,"getOptions",function(){return T.options}),B(this,"getCaretPosition",function(){return T.caretPosition}),B(this,"getCaretPositionEnd",function(){return T.caretPositionEnd}),B(this,"registerModule",function($e,Je){T.modules[$e]||(T.modules[$e]={}),Je(T.modules[$e])}),B(this,"getKeyboardClassString",function(){for(var $e=arguments.length,Je=new Array($e),ve=0;ve<$e;ve++)Je[ve]=arguments[ve];return[T.keyboardDOMClass].concat(Je).filter(function(Ct){return!!Ct}).join(" ")}),typeof window<"u"){var Y=this.handleParams(P,I),W=Y.keyboardDOMClass,ne=Y.keyboardDOM,Q=Y.options,Pe=Q===void 0?{}:Q;this.utilities=new w({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ne,this.options=function($e){for(var Je=1;Je<arguments.length;Je++){var ve=arguments[Je]!=null?arguments[Je]:{};Je%2?Z(Object(ve),!0).forEach(function(Ct){B($e,Ct,ve[Ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties($e,Object.getOwnPropertyDescriptors(ve)):Z(Object(ve)).forEach(function(Ct){Object.defineProperty($e,Ct,Object.getOwnPropertyDescriptor(ve,Ct))})}return $e}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Pe),this.keyboardPluginClasses="",w.bindMethods(k,this);var ze=this.options.inputName,Ve=ze===void 0?this.defaultName:ze;if(this.input={},this.input[Ve]="",this.keyboardDOMClass=W,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new K({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(W,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},L=[{key:"setCaretPosition",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k;this.caretPosition=k,this.caretPositionEnd=P}},{key:"getInputCandidates",value:function(k){var P=this,I=this.options,T=I.layoutCandidates,Y=I.layoutCandidatesCaseSensitiveMatch;if(!T||X(T)!=="object")return{};var W=Object.keys(T).filter(function(Pe){var ze=k.substring(0,P.getCaretPositionEnd()||0)||k,Ve=new RegExp("".concat(P.utilities.escapeRegex(Pe),"$"),Y?"g":"gi");return!!$(ze.matchAll(Ve)).length});if(W.length>1){var ne=W.sort(function(Pe,ze){return ze.length-Pe.length})[0];return{candidateKey:ne,candidateValue:T[ne]}}if(W.length){var Q=W[0];return{candidateKey:Q,candidateValue:T[Q]}}return{}}},{key:"showCandidatesBox",value:function(k,P,I){var T=this;this.candidateBox&&this.candidateBox.show({candidateValue:P,targetElement:I,onSelect:function(Y,W){var ne=T.options,Q=ne.layoutCandidatesCaseSensitiveMatch,Pe=ne.disableCandidateNormalization,ze=ne.enableLayoutCandidatesKeyPress,Ve=Y;Pe||(Ve=Y.normalize("NFD")),typeof T.options.beforeInputUpdate=="function"&&T.options.beforeInputUpdate(T);var $e=T.getInput(T.options.inputName,!0),Je=T.getCaretPositionEnd()||0,ve=$e.substring(0,Je||0)||$e,Ct=new RegExp("".concat(T.utilities.escapeRegex(k),"$"),Q?"g":"gi"),wn=ve.replace(Ct,Ve),Vl=$e.replace(ve,wn),Es=wn.length-ve.length,da=(Je||$e.length)+Es;da<0&&(da=0),T.setInput(Vl,T.options.inputName,!0),T.setCaretPosition(da),ze&&typeof T.options.onKeyPress=="function"&&T.options.onKeyPress(Y,W),typeof T.options.onChange=="function"&&T.options.onChange(T.getInput(T.options.inputName,!0),W),typeof T.options.onChangeAll=="function"&&T.options.onChangeAll(T.getAllInputs(),W)}})}},{key:"handleButtonClicked",value:function(k,P){var I=this.options,T=I.inputName,Y=T===void 0?this.defaultName:T,W=I.debug;if(k!=="{//}"){this.input[Y]||(this.input[Y]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ne=this.utilities.getUpdatedInput(k,this.input[Y],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(k)&&this.activeInputElement&&this.input[Y]&&this.input[Y]===ne&&this.caretPosition===0&&this.caretPositionEnd===ne.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(k,P);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(k,P),this.input[Y]!==ne&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ne))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ne))return;var Q=this.utilities.getUpdatedInput(k,this.input[Y],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(Q,this.options.inputName,!0),W&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),P==null?void 0:P.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),P),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),P),P!=null&&P.target&&this.options.enableLayoutCandidates){var Pe,ze=this.getInputCandidates(ne),Ve=ze.candidateKey,$e=ze.candidateValue;Ve&&$e?this.showCandidatesBox(Ve,$e,this.keyboardDOM):(Pe=this.candidateBox)===null||Pe===void 0||Pe.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),W&&console.log("Key pressed:",k)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(k){this.options.syncInstanceInputs?this.dispatch(function(P){P.isMouseHold=k}):this.isMouseHold=k}},{key:"handleButtonMouseDown",value:function(k,P){var I=this;P&&(this.options.preventMouseDownDefault&&P.preventDefault(),this.options.stopMouseDownPropagation&&P.stopPropagation(),P.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(I.getMouseHold()&&(!k.includes("{")&&!k.includes("}")||k==="{delete}"||k==="{backspace}"||k==="{bksp}"||k==="{space}"||k==="{tab}")||k==="{arrowright}"||k==="{arrowleft}"||k==="{arrowup}"||k==="{arrowdown}")&&(I.options.debug&&console.log("Button held:",k),I.handleButtonHold(k)),clearTimeout(I.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(k,P){var I=this;P&&(this.options.preventMouseUpDefault&&P.preventDefault&&P.preventDefault(),this.options.stopMouseUpPropagation&&P.stopPropagation&&P.stopPropagation(),!(P.target===this.keyboardDOM||P.target&&this.keyboardDOM.contains(P.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(P.target===this.candidateBox.candidateBoxElement||P.target&&this.candidateBox.candidateBoxElement.contains(P.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(T){T.classList.remove(I.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),k&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(k,P)}},{key:"handleKeyboardContainerMouseDown",value:function(k){this.options.preventMouseDownDefault&&k.preventDefault()}},{key:"handleButtonHold",value:function(k){var P=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){P.getMouseHold()?(P.handleButtonClicked(k),P.handleButtonHold(k)):clearTimeout(P.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var k=this;this.dispatch(function(P){P.replaceInput(k.input),P.setCaretPosition(k.caretPosition,k.caretPositionEnd)})}},{key:"clearInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[k]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,P=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!P&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[k].replace("‫","").replace("‬","")+"‬":this.input[k]}},{key:"getAllInputs",value:function(){var k=this,P={};return Object.keys(this.input).forEach(function(I){P[I]=k.getInput(I,!0)}),P}},{key:"setInput",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,I=arguments.length>2?arguments[2]:void 0;this.input[P]=k,!I&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(k){this.input=k}},{key:"setOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=this.changedOptions(k);this.options=Object.assign(this.options,k),P.length&&(this.options.debug&&console.log("changedOptions",P),this.onSetOptions(P),this.render())}},{key:"changedOptions",value:function(k){var P=this;return Object.keys(k).filter(function(I){return JSON.stringify(k[I])!==JSON.stringify(P.options[I])})}},{key:"onSetOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];k.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(k.includes("layoutCandidatesPageSize")||k.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new K({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(k){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(P){k(window.SimpleKeyboardInstances[P],P)})}},{key:"addButtonTheme",value:function(k,P){var I=this;P&&k&&(k.split(" ").forEach(function(T){P.split(" ").forEach(function(Y){I.options.buttonTheme||(I.options.buttonTheme=[]);var W=!1;I.options.buttonTheme.map(function(ne){if(ne!=null&&ne.class.split(" ").includes(Y)){W=!0;var Q=ne.buttons.split(" ");Q.includes(T)||(W=!0,Q.push(T),ne.buttons=Q.join(" "))}return ne}),W||I.options.buttonTheme.push({class:Y,buttons:k})})}),this.render())}},{key:"removeButtonTheme",value:function(k,P){var I=this;if(!k&&!P)return this.options.buttonTheme=[],void this.render();k&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(k.split(" ").forEach(function(T){var Y;(Y=I.options)===null||Y===void 0||(Y=Y.buttonTheme)===null||Y===void 0||Y.map(function(W,ne){if(W&&P&&P.includes(W.class)||!P){var Q,Pe,ze=(Q=W)===null||Q===void 0?void 0:Q.buttons.split(" ").filter(function(Ve){return Ve!==T});W&&ze!=null&&ze.length?W.buttons=ze.join(" "):((Pe=I.options.buttonTheme)===null||Pe===void 0||Pe.splice(ne,1),W=null)}return W})}),this.render())}},{key:"getButtonElement",value:function(k){var P,I=this.buttonElements[k];return I&&(P=I.length>1?I:I[0]),P}},{key:"inputPatternIsValid",value:function(k){var P,I=this.options.inputPattern;if((P=I instanceof RegExp?I:I[this.options.inputName||this.defaultName])&&k){var T=P.test(k);return this.options.debug&&console.log('inputPattern ("'.concat(P,'"): ').concat(T?"passed":"did not pass!")),T}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var k=this.options.physicalKeyboardHighlightPreventDefault,P=k!==void 0&&k;document.addEventListener("keyup",this.handleKeyUp,P),document.addEventListener("keydown",this.handleKeyDown,P),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(k){this.caretEventHandler(k),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(k)}},{key:"handleKeyDown",value:function(k){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(k)}},{key:"handleMouseUp",value:function(k){this.caretEventHandler(k)}},{key:"handleTouchEnd",value:function(k){this.caretEventHandler(k)}},{key:"handleSelect",value:function(k){this.caretEventHandler(k)}},{key:"handleSelectionChange",value:function(k){navigator.userAgent.includes("Firefox")||this.caretEventHandler(k)}},{key:"caretEventHandler",value:function(k){var P,I=this;k.target.tagName&&(P=k.target.tagName.toLowerCase()),this.dispatch(function(T){var Y=k.target===T.keyboardDOM||k.target&&T.keyboardDOM.contains(k.target);if(I.options.syncInstanceInputs&&Array.isArray(k.path)&&(Y=k.path.some(function(Q){var Pe;return Q==null||(Pe=Q.hasAttribute)===null||Pe===void 0?void 0:Pe.call(Q,"data-skInstance")})),(P==="textarea"||P==="input"&&["text","search","url","tel","password"].includes(k.target.type))&&!T.options.disableCaretPositioning){var W=k.target.selectionStart,ne=k.target.selectionEnd;T.options.rtl&&(W=T.utilities.getRtlOffset(W,T.getInput()),ne=T.utilities.getRtlOffset(ne,T.getInput())),T.setCaretPosition(W,ne),T.activeInputElement=k.target,T.options.debug&&console.log("Caret at: ",T.getCaretPosition(),T.getCaretPositionEnd(),k&&k.target.tagName.toLowerCase(),"(".concat(T.keyboardDOMClass,")"),k==null?void 0:k.type)}else!T.options.disableCaretPositioning&&Y||(k==null?void 0:k.type)==="selectionchange"||(T.setCaretPosition(null),T.activeInputElement=null,T.options.debug&&console.log('Caret position reset due to "'.concat(k==null?void 0:k.type,'" event'),k))})}},{key:"recurseButtons",value:function(k){var P=this;k&&Object.keys(this.buttonElements).forEach(function(I){return P.buttonElements[I].forEach(k)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var k=this.options.physicalKeyboardHighlightPreventDefault,P=k!==void 0&&k;document.removeEventListener("keyup",this.handleKeyUp,P),document.removeEventListener("keydown",this.handleKeyDown,P),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(I){I&&(I.onpointerdown=null,I.onpointerup=null,I.onpointercancel=null,I.ontouchstart=null,I.ontouchend=null,I.ontouchcancel=null,I.onclick=null,I.onmousedown=null,I.onmouseup=null,I.remove(),I=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(k){var P=this.options.buttonTheme,I=[];return Array.isArray(P)&&P.forEach(function(T){if(T&&T.class&&typeof T.class=="string"&&T.buttons&&typeof T.buttons=="string"){var Y=T.class.split(" ");T.buttons.split(" ").includes(k)&&(I=[].concat($(I),$(Y)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',T)}),I}},{key:"setDOMButtonAttributes",value:function(k,P){var I=this.options.buttonAttributes;Array.isArray(I)&&I.forEach(function(T){T.attribute&&typeof T.attribute=="string"&&T.value&&typeof T.value=="string"&&T.buttons&&typeof T.buttons=="string"?T.buttons.split(" ").includes(k)&&P(T.attribute,T.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',T)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(k){var P;if((P=k.target.classList)!==null&&P!==void 0&&P.contains("hg-button"))return k.preventDefault(),k.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var k=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(P){var I=k.utilities.isConstructor(P)?new P(k):P(k);I.init&&I.init(k)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(k,P){return!!this.modules[k]&&this.modules[k][P]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(k,P,I,T){var Y=this,W=Array.from(k.children),ne=0;return W.length&&I.forEach(function(Q,Pe){var ze=T[Pe];if(!(ze&&ze>Q))return!1;var Ve=Q-ne,$e=ze-ne,Je=document.createElement("div");Je.className+="hg-button-container";var ve="".concat(Y.options.layoutName,"-r").concat(P,"c").concat(Pe);Je.setAttribute("data-skUID",ve);var Ct=W.splice(Ve,$e-Ve+1);ne+=$e-Ve,Ct.forEach(function(wn){return Je.appendChild(wn)}),W.splice(Ve,0,Je),k.innerHTML="",W.forEach(function(wn){return k.appendChild(wn)}),Y.options.debug&&console.log("rowDOMContainer",Ct,Ve,$e,ne+1)}),k}},{key:"render",value:function(){var k=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var P="hg-layout-".concat(this.options.layoutName),I=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},T=this.options.useTouchEvents||!1,Y=T?"hg-touch-events":"",W=this.options.useMouseEvents||!1,ne=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,P,this.keyboardPluginClasses,Y),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",I[this.options.layoutName||this.defaultName].forEach(function(Q,Pe){var ze=Q.split(" ");k.options.excludeFromLayout&&k.options.excludeFromLayout[k.options.layoutName||k.defaultName]&&(ze=ze.filter(function(ve){return k.options.excludeFromLayout&&!k.options.excludeFromLayout[k.options.layoutName||k.defaultName].includes(ve)}));var Ve=document.createElement("div");Ve.className+="hg-row";var $e=[],Je=[];ze.forEach(function(ve,Ct){var wn,Vl=!ne&&typeof ve=="string"&&ve.length>1&&ve.indexOf("[")===0,Es=!ne&&typeof ve=="string"&&ve.length>1&&ve.indexOf("]")===ve.length-1;Vl&&($e.push(Ct),ve=ve.replace(/\[/g,"")),Es&&(Je.push(Ct),ve=ve.replace(/\]/g,""));var da=k.utilities.getButtonClass(ve),fa=k.utilities.getButtonDisplayName(ve,k.options.display,k.options.mergeDisplay),Y7=k.options.useButtonTag?"button":"div",$n=document.createElement(Y7);$n.className+="hg-button ".concat(da),(wn=$n.classList).add.apply(wn,$(k.getButtonThemeClasses(ve))),k.setDOMButtonAttributes(ve,function(on,J7){$n.setAttribute(on,J7)}),k.activeButtonClass="hg-activeButton",!k.utilities.pointerEventsSupported()||T||W?T?($n.ontouchstart=function(on){k.handleButtonClicked(ve,on),k.handleButtonMouseDown(ve,on)},$n.ontouchend=function(on){k.handleButtonMouseUp(ve,on)},$n.ontouchcancel=function(on){k.handleButtonMouseUp(ve,on)}):($n.onclick=function(on){k.setMouseHold(!1),typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown||k.handleButtonClicked(ve,on)},$n.onmousedown=function(on){(typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown)&&!k.isMouseHold&&k.handleButtonClicked(ve,on),k.handleButtonMouseDown(ve,on)},$n.onmouseup=function(on){k.handleButtonMouseUp(ve,on)}):($n.onpointerdown=function(on){k.handleButtonClicked(ve,on),k.handleButtonMouseDown(ve,on)},$n.onpointerup=function(on){k.handleButtonMouseUp(ve,on)},$n.onpointercancel=function(on){k.handleButtonMouseUp(ve,on)}),$n.setAttribute("data-skBtn",ve);var X7="".concat(k.options.layoutName,"-r").concat(Pe,"b").concat(Ct);$n.setAttribute("data-skBtnUID",X7);var BA=document.createElement("span");BA.innerHTML=fa,$n.appendChild(BA),k.buttonElements[ve]||(k.buttonElements[ve]=[]),k.buttonElements[ve].push($n),Ve.appendChild($n)}),Ve=k.parseRowDOMContainers(Ve,Pe,$e,Je),k.keyboardRowsDOM.appendChild(Ve)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||T||W?T?(document.ontouchend=function(Q){return k.handleButtonMouseUp(void 0,Q)},document.ontouchcancel=function(Q){return k.handleButtonMouseUp(void 0,Q)},this.keyboardDOM.ontouchstart=function(Q){return k.handleKeyboardContainerMouseDown(Q)}):T||(document.onmouseup=function(Q){return k.handleButtonMouseUp(void 0,Q)},this.keyboardDOM.onmousedown=function(Q){return k.handleKeyboardContainerMouseDown(Q)}):(document.onpointerup=function(Q){return k.handleButtonMouseUp(void 0,Q)},this.keyboardDOM.onpointerdown=function(Q){return k.handleKeyboardContainerMouseDown(Q)}),this.onInit())}}],L&&V(F.prototype,L),U&&V(F,U),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,L,U}(),J=pe,le=J;return c}()}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return v}});var a=s(442);function l(y){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},l(y)}function c(y,w){var x=Object.keys(y);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(y);w&&(S=S.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),x.push.apply(x,S)}return x}function u(y){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?c(Object(x),!0).forEach(function(S){d(y,S,x[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(x)):c(Object(x)).forEach(function(S){Object.defineProperty(y,S,Object.getOwnPropertyDescriptor(x,S))})}return y}function d(y,w,x){return(w=function(S){var _=function(E,C){if(l(E)!="object"||!E)return E;var N=E[Symbol.toPrimitive];if(N!==void 0){var M=N.call(E,C);if(l(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(E)}(S,"string");return l(_)=="symbol"?_:_+""}(w))in y?Object.defineProperty(y,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):y[w]=x,y}var f=function(y){return u(u({},y),{},{keyboardRef:null})},p=s(651),g=s.n(p),m=function(y){var w=y.baseClass||"react-simple-keyboard",x=a.useRef(null),S=a.useRef(null),_=a.useRef(null),E=a.useRef(y);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),x.current=!1}},[]),a.useEffect(function(){var C=function(j){return u(u({},j),{},{theme:"simple-keyboard ".concat(j.theme||"hg-theme-default")})}(y);if(!x.current){x.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var N=S.current,M=".".concat(w);_.current=new(g())(N||M,C),C.keyboardRef&&C.keyboardRef(_.current)}var O=function(j,K){var $=f(K),G=f(j);return Object.keys($).filter(function(X){return $[X]!==G[X]})}(E.current,C);if(O.length){var D=_.current;E.current=C,D==null||D.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",O)}},[x,w,E,y]),a.createElement("div",{className:w,ref:S})},v=m}(),o}()})})(uB);var sfe=uB.exports;const ofe=Jc(sfe),afe={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},lfe={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},XR="Á É Í Ó Ú á é í ó ú ́",JR="Ü ü ̈";function cfe(){const t=OC(),e=Xt(),{status:n,dispatch:i,devices:r}=Ln(),[s,o]=b.useState("none"),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=b.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=b.useCallback(p=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",p)},[n,i,r.keyboard]);return r.keyboard?h.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),h.jsx(ofe,{theme:ee("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:afe,display:lfe[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:XR},{class:"hg-diaeresisDeadKeyButton",buttons:JR}],disableButtonHold:!0,onKeyPress:p=>{if(p==="{shiftleft}"||p==="{shiftright}"){o(g=>g==="none"?"once":"none");return}if(p==="{lock}"){o(g=>g==="none"?"lock":"none");return}if(t==="es"){if(a){XR.includes(p)&&(l(!1),s==="once"&&o("none"),f(p));return}else if(p==="́"){l(!0);return}if(c){JR.includes(p)&&(u(!1),s==="once"&&o("none"),f(p));return}else if(p==="̈"){u(!0);return}}s==="once"&&o("none"),f(p==="{bksp}"?"\b":p==="{enter}"?`
`:p==="{tab}"?"	":p==="{space}"?" ":p)}})]}):null}function ufe(){const t=Xt(),{devices:e}=Ln(),n=tt(CE).toArray();return e.leds?h.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),h.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>h.jsxs("div",{className:"flex w-7 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:r}),h.jsx("div",{className:ee("relative size-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:h.jsx("div",{className:ee("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})})]},r))})]}):null}function dfe(){const t=Xt(),e=tt(xQ),n=tt(Oe.IP),i=tt(VL),r=tt(HL),s=tt(Oe.SP),o=tt(FC),a=tt(x2),l=EL(),c=a||l.pic||l.handshake!==null,u=()=>{const g=[];for(let m=0;m<256;m+=16){const v=e.slice(m,m+16);g.push(v)}return g},d=16,f=Math.floor(Number(n.valueOf())/d),p=Number(n.valueOf())%d;return h.jsxs("div",{className:"absolute left-[800px] top-[-160px] z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20","data-testid":"memory-component",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),h.jsx("div",{className:"m-4 overflow-x-auto",children:h.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{}),Array.from({length:16}).map((g,m)=>h.jsx("th",{className:ee("relative size-10 border border-gray-500 bg-mantis-500",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===p&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:"↓"})]})},m))]})}),h.jsx("tbody",{children:u().map((g,m)=>h.jsxs("tr",{className:m%4===0&&m!==0?"border-t-4 border-mantis-600":"",children:[h.jsx("th",{className:"relative size-10 border border-gray-500 bg-mantis-500",children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===f&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:"→"})]})}),g.map((v,y)=>{var w,x,S;return h.jsx("td",{className:ee("size-10 border border-gray-500 p-0 transition-shadow duration-200",y%4===0&&y!==0?"border-l-4 border-mantis-600":""),children:h.jsx(ffe,{address:v.address,value:v.value,isIP:v.address.valueOf()===n.valueOf(),isSP:o&&v.address.valueOf()===s.valueOf(),isStackData:o&&v.address.valueOf()>s.valueOf(),isProgramAddress:!!i.find(_=>_.address===v.address.value),isDataAddress:!!r.find(_=>_.address===v.address.value),isInterruptVector:c&&v.address.valueOf()>=0&&v.address.valueOf()<=7,label:((w=i.find(_=>_.address===v.address.value))==null?void 0:w.name)||((x=r.find(_=>_.address===v.address.value))==null?void 0:x.label)||null,length:((S=i.find(_=>_.address===v.address.value))==null?void 0:S.length)??null})},y)})]},m))})]})})]})}function ffe({address:t,value:e,isIP:n,isSP:i,isStackData:r,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:c}){const u=Xt(),d=tt(_p),[f,p]=b.useState(!1),g=b.useRef(e);b.useEffect(()=>{g.current!==e&&(p(!0),setTimeout(()=>p(!1),300),g.current=e)},[e]);const m=u("computer.memory.cell",t);return h.jsxs(sA,{children:[h.jsx(oA,{asChild:!0,children:h.jsxs(Ge.div,{title:m,className:ee("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":i?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!i&&!r?"border-l-4 border-purple-500":"",s&&!i&&!r&&!a?"border-l-4 border-blue-500":"",o&&!i&&!r&&!s&&!a?"border-l-4 border-green-500":"",r&&!i?"border-l-4 border-yellow-500":"",i?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",f&&"animate-pulse"),style:t.value===d.value?Ie("memory.operating-cell"):void 0,children:[a&&!i&&!r&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupción",style:{lineHeight:1},children:"⚡"}),s&&!i&&!r&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instrucción",style:{lineHeight:1},children:"📘"}),o&&!i&&!r&&!s&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:"📦"}),r&&!i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:"📚"}),i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:"📍"}),h.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:"▲"}),i&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:"▲"})]})}),h.jsxs(Xb,{className:"w-60",children:[h.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[m," ",l?h.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",c!==null&&c!==""&&h.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",c]})]}):""]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(v=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:u(`generics.byte-representation.${v}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(v)})]},v))})]})]})}function hfe(){const t=Xt(),{devices:e}=Ln();return e.pic?h.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),h.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[h.jsx(hr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:EE,springs:"pic.IMR",emphasis:!0}),h.jsx(hr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:AE,springs:"pic.IRR",emphasis:!0}),h.jsx(hr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:NE,springs:"pic.ISR",emphasis:!0})]})]}),h.jsx("hr",{className:"mb-2 border-stone-600"}),h.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:ay.map((n,i)=>h.jsx(hr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function pfe(){const t=Xt(),{devices:e}=Ln();return e.pio?h.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(hr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:PE,springs:"pio.PA"}),h.jsx(hr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:RE,springs:"pio.CA"})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(hr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:ME,springs:"pio.PB"}),h.jsx(hr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:TE,springs:"pio.CB"})]})]}):null}const mfe="_printer_fbkny_2",gfe="_shadow_fbkny_6",vfe="_sides_fbkny_11",yfe="_front_fbkny_22",bfe="_trailContainer_fbkny_27",wfe="_trail_fbkny_27",xfe="_paper_fbkny_33",Zl={printer:mfe,shadow:gfe,sides:vfe,front:yfe,trailContainer:bfe,trail:wfe,paper:xfe},Sfe=Array.from({length:5},(t,e)=>e);function kfe(){const t=Xt(),{devices:e}=Ln(),n=tt(ly),i=tt(cy);return e.printer?h.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:h.jsxs("div",{className:Zl.printer,title:t("computer.printer.name"),children:[h.jsx("div",{className:Zl.shadow}),h.jsx("div",{className:Zl.sides}),h.jsxs("div",{className:Zl.front,children:[h.jsx("div",{className:Zl.trailContainer,children:h.jsx("div",{className:Zl.trail,children:h.jsx("pre",{className:Zl.paper,children:i})})}),h.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:Sfe.map(r=>{const s=n[r]?AL(n[r].unsigned):null;return h.jsx("span",{className:ee("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),h.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:h.jsx(Ge.div,{className:"h-full bg-mantis-400",style:{width:Ie("printer.printing.progress").to(r=>`${r*100}%`),opacity:Ie("printer.printing.opacity")}})})]})]})}):null}const _fe="_container_6nvz7_2",Cfe="_text_6nvz7_22",ZR={container:_fe,text:Cfe};function Efe(){const t=Xt(),{devices:e}=Ln(),n=tt(OE);return e.screen?h.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),h.jsx("div",{className:ZR.container,children:h.jsx("pre",{className:ZR.text,children:n})})]}):null}function Afe(){const t=Xt(),{dispatch:e,devices:n}=Ln(),i=tt(Ob).toArray();return n.switches?h.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),h.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((r,s)=>h.jsxs("div",{className:"flex w-8 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),h.jsx(Ea,{checked:r,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function Nfe(){const t=Xt(),{devices:e}=Ln();return e.timer?h.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),h.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[h.jsx(hr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:uy,springs:"timer.CONT"}),h.jsx(hr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:IE,springs:"timer.COMP"})]})]}):null}function dB(){const t=b.useRef(null);return b.useEffect(()=>{hk(),gk(),vk(),yk();const e=setTimeout(()=>{hk(),gk(),vk(),yk()},100);return()=>clearTimeout(e)},[]),h.jsx("div",{className:"relative size-full",children:h.jsxs(dde,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[h.jsx(pde,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:h.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[h.jsx(Ade,{}),h.jsx("div",{className:"absolute left-[120px] top-[-120px] z-20",children:h.jsx(cB,{})}),h.jsx(Zde,{}),h.jsx(wde,{}),h.jsx(dfe,{}),h.jsx(rfe,{}),h.jsx(hfe,{}),h.jsx(pfe,{}),h.jsx(Nfe,{}),h.jsx(Nde,{}),h.jsx(ife,{}),h.jsx(cfe,{}),h.jsx(ufe,{}),h.jsx(kfe,{}),h.jsx(Afe,{}),h.jsx(Efe,{})]})}),h.jsx(mde,{wrapperRef:t})]})})}const Pfe=1024;let Mfe=0;class e1{constructor(e,n){this.from=e,this.to=n}}class pt{constructor(e={}){this.id=Mfe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Yi.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}pt.closedBy=new pt({deserialize:t=>t.split(" ")});pt.openedBy=new pt({deserialize:t=>t.split(" ")});pt.group=new pt({deserialize:t=>t.split(" ")});pt.isolate=new pt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});pt.contextHash=new pt({perNode:!0});pt.lookAhead=new pt({perNode:!0});pt.mounted=new pt({perNode:!0});class vy{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[pt.mounted.id]}}const Rfe=Object.create(null);class Yi{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):Rfe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Yi(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(pt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(pt.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Yi.none=new Yi("",Object.create(null),0,8);class aA{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Yi(i.name,r,i.id,i.flags):i)}return new aA(n)}}const Gg=new WeakMap,QR=new WeakMap;var Gn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Gn||(Gn={}));class nn{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=vy.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new zk(this.topNode,e)}cursorAt(e,n=0,i=0){let r=Gg.get(this)||this.topNode,s=new zk(r);return s.moveTo(e,n),Gg.set(this,s._tree),s}get topNode(){return new Wr(this,0,0,null)}resolve(e,n=0){let i=Kp(Gg.get(this)||this.topNode,e,n,!1);return Gg.set(this,i),i}resolveInner(e,n=0){let i=Kp(QR.get(this)||this.topNode,e,n,!0);return QR.set(this,i),i}resolveStack(e,n=0){return Ife(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&Gn.IncludeAnonymous)>0;for(let l=this.cursor(o|Gn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:uA(Yi.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new nn(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new nn(Yi.none,n,i,r)))}static build(e){return jfe(e)}}nn.empty=new nn(Yi.none,[],[],0);class lA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new lA(this.buffer,this.index)}}class Nl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Yi.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(fB(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let c=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,c)}return new Nl(s,o,this.set)}}function fB(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Kp(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Wr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Gn.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Wr&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class hB{cursor(e=0){return new zk(this,e)}getChild(e,n=null,i=null){let r=eT(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return eT(this,e,n,i)}resolve(e,n=0){return Kp(this,e,n,!1)}resolveInner(e,n=0){return Kp(this,e,n,!0)}matchContext(e){return Bk(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class Wr extends hB{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(fB(r,i,d,d+u.length)){if(u instanceof Nl){if(s&Gn.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,i-d,r);if(f>-1)return new qa(new Tfe(o,u,e,d),null,f)}else if(s&Gn.IncludeAnonymous||!u.type.isAnonymous||cA(u)){let f;if(!(s&Gn.IgnoreMounts)&&(f=vy.get(u))&&!f.overlay)return new Wr(f.tree,d,e,o);let p=new Wr(u,d,e,o);return s&Gn.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&Gn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Gn.IgnoreOverlays)&&(r=vy.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Wr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function eT(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Bk(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class Tfe{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class qa extends hB{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new qa(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Gn.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new qa(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new qa(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new qa(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new nn(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function pB(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof Wr&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new Ofe(r,n)}class Ofe{constructor(e,n){this.heads=e,this.node=n}get next(){return pB(this.heads)}}function Ife(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof Wr?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=vy.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Wr(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Kp(a,e,n,!1))}}return r?pB(r):i}class zk{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Wr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Wr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Gn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Gn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Gn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Gn.IncludeAnonymous||a instanceof Nl||!a.type.isAnonymous||cA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new qa(this.buffer,n,this.stack[r]);return this.bufferNode=new qa(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Bk(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Bk(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function cA(t){return t.children.some(e=>e instanceof Nl||!e.type.isAnonymous||cA(e))}function jfe(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=Pfe,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new lA(n,n.length):n,l=i.types,c=0,u=0;function d(_,E,C,N,M,O){let{id:D,start:j,end:K,size:$}=a,G=u,X=c;for(;$<0;)if(a.next(),$==-1){let pe=s[D];C.push(pe),N.push(j-_);return}else if($==-3){c=D;return}else if($==-4){u=D;return}else throw new RangeError(`Unrecognized record size: ${$}`);let Z=l[D],V,B,ie=j-_;if(K-j<=r&&(B=v(a.pos-E,M))){let pe=new Uint16Array(B.size-B.skip),J=a.pos-B.size,le=pe.length;for(;a.pos>J;)le=y(B.start,pe,le);V=new Nl(pe,K-B.start,i),ie=B.start-_}else{let pe=a.pos-$;a.next();let J=[],le=[],F=D>=o?D:-1,L=0,U=K;for(;a.pos>pe;)F>=0&&a.id==F&&a.size>=0?(a.end<=U-r&&(g(J,le,j,L,a.end,U,F,G,X),L=J.length,U=a.end),a.next()):O>2500?f(j,pe,J,le):d(j,pe,J,le,F,O+1);if(F>=0&&L>0&&L<J.length&&g(J,le,j,L,j,U,F,G,X),J.reverse(),le.reverse(),F>-1&&L>0){let k=p(Z,X);V=uA(Z,J,le,0,J.length,0,K-j,k,k)}else V=m(Z,J,le,K-j,G-K,X)}C.push(V),N.push(ie)}function f(_,E,C,N){let M=[],O=0,D=-1;for(;a.pos>E;){let{id:j,start:K,end:$,size:G}=a;if(G>4)a.next();else{if(D>-1&&K<D)break;D<0&&(D=$-r),M.push(j,K,$),O++,a.next()}}if(O){let j=new Uint16Array(O*4),K=M[M.length-2];for(let $=M.length-3,G=0;$>=0;$-=3)j[G++]=M[$],j[G++]=M[$+1]-K,j[G++]=M[$+2]-K,j[G++]=G;C.push(new Nl(j,M[2]-K,i)),N.push(K-_)}}function p(_,E){return(C,N,M)=>{let O=0,D=C.length-1,j,K;if(D>=0&&(j=C[D])instanceof nn){if(!D&&j.type==_&&j.length==M)return j;(K=j.prop(pt.lookAhead))&&(O=N[D]+j.length+K)}return m(_,C,N,M,O,E)}}function g(_,E,C,N,M,O,D,j,K){let $=[],G=[];for(;_.length>N;)$.push(_.pop()),G.push(E.pop()+C-M);_.push(m(i.types[D],$,G,O-M,j-O,K)),E.push(M-C)}function m(_,E,C,N,M,O,D){if(O){let j=[pt.contextHash,O];D=D?[j].concat(D):[j]}if(M>25){let j=[pt.lookAhead,M];D=D?[j].concat(D):[j]}return new nn(_,E,C,N,D)}function v(_,E){let C=a.fork(),N=0,M=0,O=0,D=C.end-r,j={size:0,start:0,skip:0};e:for(let K=C.pos-_;C.pos>K;){let $=C.size;if(C.id==E&&$>=0){j.size=N,j.start=M,j.skip=O,O+=4,N+=4,C.next();continue}let G=C.pos-$;if($<0||G<K||C.start<D)break;let X=C.id>=o?4:0,Z=C.start;for(C.next();C.pos>G;){if(C.size<0)if(C.size==-3)X+=4;else break e;else C.id>=o&&(X+=4);C.next()}M=Z,N+=$,O+=X}return(E<0||N==_)&&(j.size=N,j.start=M,j.skip=O),j.size>4?j:void 0}function y(_,E,C){let{id:N,start:M,end:O,size:D}=a;if(a.next(),D>=0&&N<o){let j=C;if(D>4){let K=a.pos-(D-4);for(;a.pos>K;)C=y(_,E,C)}E[--C]=j,E[--C]=O-_,E[--C]=M-_,E[--C]=N}else D==-3?c=N:D==-4&&(u=N);return C}let w=[],x=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,w,x,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:w.length?x[0]+w[0].length:0;return new nn(l[t.topID],w.reverse(),x.reverse(),S)}const tT=new WeakMap;function H0(t,e){if(!t.isAnonymous||e instanceof Nl||e.type!=t)return 1;let n=tT.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof nn)){n=1;break}n+=H0(t,i)}tT.set(e,n)}return n}function uA(t,e,n,i,r,s,o,a,l){let c=0;for(let g=i;g<r;g++)c+=H0(t,e[g]);let u=Math.ceil(c*1.5/8),d=[],f=[];function p(g,m,v,y,w){for(let x=v;x<y;){let S=x,_=m[x],E=H0(t,g[x]);for(x++;x<y;x++){let C=H0(t,g[x]);if(E+C>=u)break;E+=C}if(x==S+1){if(E>u){let C=g[S];p(C.children,C.positions,0,C.children.length,m[S]+w);continue}d.push(g[S])}else{let C=m[x-1]+g[x-1].length-_;d.push(uA(t,g,m,S,x,_,C,null,l))}f.push(_+w-s)}}return p(e,n,i,r,0),(a||l)(d,f,o)}class Nc{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new Nc(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let p=Math.max(f.from,l)-c,g=Math.min(f.to,d)-c;f=p>=g?null:new Nc(p,g,f.tree,f.offset+c,a>0,!!u)}if(f&&r.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class mB{startParse(e,n,i){return typeof e=="string"&&(e=new Dfe(e)),i=i?i.length?i.map(r=>new e1(r.from,r.to)):[new e1(0,0)]:[new e1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class Dfe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new pt({perNode:!0});let Lfe=0;class Cn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=Lfe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Cn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new Cn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new yy(e);return i=>i.modified.indexOf(n)>-1?i:yy.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let $fe=0;class yy{constructor(e){this.name=e,this.instances=[],this.id=$fe++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&Ffe(n,a.modified));if(i)return i;let r=[],s=new Cn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=Bfe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(yy.get(a,l));return s}}function Ffe(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function Bfe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function zfe(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==r.length)break;let p=r[d++];if(d==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new by(i,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return gB.add(e)}const gB=new pt;class by{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}by.empty=new by([],2,null);function vB(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function Ufe(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function Vfe(t,e,n,i=0,r=t.length){let s=new Hfe(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class Hfe{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,u=Wfe(e)||by.empty,d=Ufe(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(pt.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),g=this.highlighters.filter(v=>!v.scope||v.scope(f.tree.type)),m=e.firstChild();for(let v=0,y=a;;v++){let w=v<f.overlay.length?f.overlay[v]:null,x=w?w.from+a:l,S=Math.max(n,y),_=Math.min(i,x);if(S<_&&m)for(;e.from<_&&(this.highlightRange(e,S,_,r,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=x||!e.nextSibling())););if(!w||x>i)break;y=w.to+a,y>n&&(this.highlightRange(p.cursor(),Math.max(n,w.from+a),Math.min(i,y),"",g),this.startSpan(Math.min(i,y),c))}m&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function Wfe(t){let e=t.type.prop(gB);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const ge=Cn.define,Kg=ge(),Aa=ge(),nT=ge(Aa),iT=ge(Aa),Na=ge(),qg=ge(Na),t1=ge(Na),js=ge(),Ql=ge(js),Ps=ge(),Ms=ge(),Uk=ge(),Bf=ge(Uk),Yg=ge(),We={comment:Kg,lineComment:ge(Kg),blockComment:ge(Kg),docComment:ge(Kg),name:Aa,variableName:ge(Aa),typeName:nT,tagName:ge(nT),propertyName:iT,attributeName:ge(iT),className:ge(Aa),labelName:ge(Aa),namespace:ge(Aa),macroName:ge(Aa),literal:Na,string:qg,docString:ge(qg),character:ge(qg),attributeValue:ge(qg),number:t1,integer:ge(t1),float:ge(t1),bool:ge(Na),regexp:ge(Na),escape:ge(Na),color:ge(Na),url:ge(Na),keyword:Ps,self:ge(Ps),null:ge(Ps),atom:ge(Ps),unit:ge(Ps),modifier:ge(Ps),operatorKeyword:ge(Ps),controlKeyword:ge(Ps),definitionKeyword:ge(Ps),moduleKeyword:ge(Ps),operator:Ms,derefOperator:ge(Ms),arithmeticOperator:ge(Ms),logicOperator:ge(Ms),bitwiseOperator:ge(Ms),compareOperator:ge(Ms),updateOperator:ge(Ms),definitionOperator:ge(Ms),typeOperator:ge(Ms),controlOperator:ge(Ms),punctuation:Uk,separator:ge(Uk),bracket:Bf,angleBracket:ge(Bf),squareBracket:ge(Bf),paren:ge(Bf),brace:ge(Bf),content:js,heading:Ql,heading1:ge(Ql),heading2:ge(Ql),heading3:ge(Ql),heading4:ge(Ql),heading5:ge(Ql),heading6:ge(Ql),contentSeparator:ge(js),list:ge(js),quote:ge(js),emphasis:ge(js),strong:ge(js),link:ge(js),monospace:ge(js),strikethrough:ge(js),inserted:ge(),deleted:ge(),changed:ge(),invalid:ge(),meta:Yg,documentMeta:ge(Yg),annotation:ge(Yg),processingInstruction:ge(Yg),definition:Cn.defineModifier("definition"),constant:Cn.defineModifier("constant"),function:Cn.defineModifier("function"),standard:Cn.defineModifier("standard"),local:Cn.defineModifier("local"),special:Cn.defineModifier("special")};for(let t in We){let e=We[t];e instanceof Cn&&(e.name=t)}vB([{tag:We.link,class:"tok-link"},{tag:We.heading,class:"tok-heading"},{tag:We.emphasis,class:"tok-emphasis"},{tag:We.strong,class:"tok-strong"},{tag:We.keyword,class:"tok-keyword"},{tag:We.atom,class:"tok-atom"},{tag:We.bool,class:"tok-bool"},{tag:We.url,class:"tok-url"},{tag:We.labelName,class:"tok-labelName"},{tag:We.inserted,class:"tok-inserted"},{tag:We.deleted,class:"tok-deleted"},{tag:We.literal,class:"tok-literal"},{tag:We.string,class:"tok-string"},{tag:We.number,class:"tok-number"},{tag:[We.regexp,We.escape,We.special(We.string)],class:"tok-string2"},{tag:We.variableName,class:"tok-variableName"},{tag:We.local(We.variableName),class:"tok-variableName tok-local"},{tag:We.definition(We.variableName),class:"tok-variableName tok-definition"},{tag:We.special(We.variableName),class:"tok-variableName2"},{tag:We.definition(We.propertyName),class:"tok-propertyName tok-definition"},{tag:We.typeName,class:"tok-typeName"},{tag:We.namespace,class:"tok-namespace"},{tag:We.className,class:"tok-className"},{tag:We.macroName,class:"tok-macroName"},{tag:We.propertyName,class:"tok-propertyName"},{tag:We.operator,class:"tok-operator"},{tag:We.comment,class:"tok-comment"},{tag:We.meta,class:"tok-meta"},{tag:We.invalid,class:"tok-invalid"},{tag:We.punctuation,class:"tok-punctuation"}]);var n1;const Ku=new pt;function Gfe(t){return Ee.define({combine:t?e=>e.concat(t):void 0})}const Kfe=new pt;class ps{constructor(e,n,i=[],r=""){this.data=e,this.name=r,dt.prototype.hasOwnProperty("tree")||Object.defineProperty(dt.prototype,"tree",{get(){return vo(this)}}),this.parser=n,this.extension=[Jd.of(this),dt.languageData.of((s,o,a)=>{let l=rT(s,o,a),c=l.type.prop(Ku);if(!c)return[];let u=s.facet(c),d=l.type.prop(Kfe);if(d){let f=l.resolve(o-l.from,a);for(let p of d)if(p.test(f,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return rT(e,n,i).type.prop(Ku)==this.data}findRegions(e){let n=e.facet(Jd);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Ku)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(pt.mounted);if(a){if(a.tree.prop(Ku)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof nn&&r(c,s.positions[l]+o)}};return r(vo(e),0),i}get allowsNesting(){return!0}}ps.setState=nt.define();function rT(t,e,n){let i=t.facet(Jd),r=vo(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Gn.ExcludeBuffers))s.type.isTop&&(r=s);return r}function vo(t){let e=t.field(ps.state,!1);return e?e.tree:nn.empty}class qfe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let zf=null;class Yd{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Yd(e,n,[],nn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new qfe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=nn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Nc.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Nc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=zf;zf=this;try{return e()}finally{zf=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=sT(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),i=Nc.applyChanges(i,l),r=nn.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new Yd(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=sT(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends mB{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=zf;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new nn(Yi.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return zf}}function sT(t,e,n){return Nc.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Xd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Xd(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Yd.create(e.facet(Jd).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Xd(i)}}ps.state=_i.define({create:Xd.init,update(t,e){for(let n of e.effects)if(n.is(ps.setState))return n.value;return e.startState.facet(Jd)!=e.state.facet(Jd)?Xd.init(e.state):t.apply(e)}});let yB=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(yB=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const i1=typeof navigator<"u"&&(!((n1=navigator.scheduling)===null||n1===void 0)&&n1.isInputPending)?()=>navigator.scheduling.isInputPending():null,Yfe=ei.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ps.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ps.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=yB(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(ps.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!i1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>i1&&i1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ps.setState.of(new Xd(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>dr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Jd=Ee.define({combine(t){return t.length?t[0]:null},enables:t=>[ps.state,Yfe,Re.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Xfe{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const Jfe=Ee.define(),dA=Ee.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Xc(t){let e=t.facet(dA);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Vk(t,e){let n="",i=t.tabSize,r=t.facet(dA)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function Zfe(t,e){t instanceof dt&&(t=new fA(t));for(let i of t.state.facet(Jfe)){let r=i(t,e);if(r!==void 0)return r}let n=vo(t.state);return n.length>=e?Qfe(t,n,e):null}class fA{constructor(e,n={}){this.state=e,this.options=n,this.unit=Xc(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return pm(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const bB=new pt;function Qfe(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return wB(i,t,n)}function wB(t,e,n){for(let i=t;i;i=i.next){let r=the(i.node);if(r)return r(hA.create(e,n,i))}return 0}function ehe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function the(t){let e=t.type.prop(bB);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(pt.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>she(o,!0,1,void 0,s&&!ehe(o)?r.from:void 0)}return t.parent==null?nhe:null}function nhe(){return 0}class hA extends fA{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new hA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(ihe(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return wB(this.context.next,this.base,this.pos)}}function ihe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function rhe(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function she(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=rhe(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const ohe=Ee.define(),ahe=new pt;function lhe(t,e,n){let i=vo(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(ahe);if(l&&(a.to<i.length-50||i.length==t.doc.length||!che(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function che(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function xB(t,e,n){for(let i of t.facet(ohe)){let r=i(t,e,n);if(r)return r}return lhe(t,e,n)}function SB(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const pA=nt.define({map:SB}),Jb=nt.define({map:SB});function kB(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Am=_i.define({create(){return it.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=oT(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(pA)&&!uhe(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(AB),r=i?it.replace({widget:new vhe(i(e.state,n.value))}):aT;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(Jb)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=oT(t,e.selection.main.head)),t},provide:t=>Re.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(aT.range(i,r))}return it.set(e,!0)}});function oT(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function _B(t,e,n){var i;let r=null;return(i=t.field(Am,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function uhe(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function CB(t,e){return t.field(Am,!1)?e:e.concat(nt.appendConfig.of(ghe()))}const dhe=t=>{for(let e of kB(t)){let n=xB(t.state,e.from,e.to);if(n)return t.dispatch({effects:CB(t.state,[pA.of(n),EB(t,n)])}),!0}return!1},fhe=t=>{if(!t.state.field(Am,!1))return!1;let e=[];for(let n of kB(t)){let i=_B(t.state,n.from,n.to);i&&e.push(Jb.of(i),EB(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function EB(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Re.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const hhe=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=xB(e,r.from,r.to);s&&n.push(pA.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:CB(t.state,n)}),!!n.length},phe=t=>{let e=t.state.field(Am,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(Jb.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},mhe={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},AB=Ee.define({combine(t){return Il(t,mhe)}});function ghe(t){return[Am,yhe]}function NB(t,e){let{state:n}=t,i=n.facet(AB),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=_B(t.state,a.from,a.to);l&&t.dispatch({effects:Jb.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const aT=it.replace({widget:new class extends jl{toDOM(t){return NB(t,null)}}});class vhe extends jl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return NB(e,this.value)}}const yhe=Re.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Zb{constructor(e,n){this.specs=e;let i;function r(a){let l=xl.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof ps?a=>a.prop(Ku)==o.data:o?a=>a==o:void 0,this.style=vB(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new xl(i):null,this.themeType=n.themeType}static define(e,n){return new Zb(e,n||{})}}const Hk=Ee.define(),bhe=Ee.define({combine(t){return t.length?[t[0]]:null}});function r1(t){let e=t.facet(Hk);return e.length?e:t.facet(bhe)}function whe(t,e){let n=[She],i;return t instanceof Zb&&(t.module&&n.push(Re.styleModule.of(t.module)),i=t.themeType),i?n.push(Hk.computeN([Re.darkTheme],r=>r.facet(Re.darkTheme)==(i=="dark")?[t]:[])):n.push(Hk.of(t)),n}class xhe{constructor(e){this.markCache=Object.create(null),this.tree=vo(e.state),this.decorations=this.buildDeco(e,r1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=vo(e.state),i=r1(e.state),r=i!=r1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return it.none;let i=new wl;for(let{from:r,to:s}of e.visibleRanges)Vfe(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=it.mark({class:l})))},r,s);return i.finish()}}const She=fm.high(ei.fromClass(xhe,{decorations:t=>t.decorations})),khe=1e4,_he="()[]{}",Che=new pt;function Wk(t,e,n){let i=t.prop(e<0?pt.openedBy:pt.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Gk(t){let e=t.type.prop(Che);return e?e(t.node):t}function Xg(t,e,n,i={}){let r=i.maxScanDistance||khe,s=i.brackets||_he,o=vo(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=Wk(l.type,n,s);if(c&&l.from<l.to){let u=Gk(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return Ehe(t,e,n,l,u,c,s)}}return Ahe(t,e,n,o,a.type,r,s)}function Ehe(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=Gk(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Wk(u.type,n,o))c++;else if(Wk(u.type,-n,o)){if(c==0){let d=Gk(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function Ahe(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let p=u.value;n<0&&(f+=p.length);let g=e+f*n;for(let m=n>0?0:p.length-1,v=n>0?p.length:-1;m!=v;m+=n){let y=o.indexOf(p[m]);if(!(y<0||i.resolveInner(g+m,1).type!=r))if(y%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:g+m,to:g+m+1},matched:y>>1==l>>1};d--}}n>0&&(f+=p.length)}return u.done?{start:c,matched:!1}:null}function lT(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class PB{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=lT(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:lT(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function Nhe(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||Phe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||vA,mergeTokens:t.mergeTokens!==!1}}function Phe(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const cT=new WeakMap;class mA extends ps{constructor(e){let n=Gfe(e.languageData),i=Nhe(e),r,s=new class extends mB{createParse(o,a,l){return new Rhe(r,o,a,l)}};super(n,s,[],e.name),this.topNode=Ihe(n,this),r=this,this.streamParser=i,this.stateAfter=new pt({perNode:!0}),this.tokenTable=e.tokenTable?new OB(i.tokenTable):Ohe}static define(e){return new mA(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=cT.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=gA(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=i?i(l.from):-1,d=new PB(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-l.from;)RB(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&cT.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function gA(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof nn&&l<r&&gA(t,a,l,i,r);if(c)return c}return null}function MB(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof nn){if(!(l=MB(t,a,n-o,i-o,r)))break;return r?new nn(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function Mhe(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&gA(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=i&&(c=MB(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(r?Xc(r):4),tree:nn.empty}}class Rhe{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Yd.get(),o=r[0].from,{state:a,tree:l}=Mhe(e,i,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Xc(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Yd.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new PB(n,e?e.state.tabSize:4,e?Xc(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=RB(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=nn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:The,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new nn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new nn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function RB(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const vA=Object.create(null),qp=[Yi.none],The=new aA(qp),uT=[],dT=Object.create(null),TB=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])TB[t]=IB(vA,e);class OB{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),TB)}resolve(e){return e?this.table[e]||(this.table[e]=IB(this.extra,e)):0}}const Ohe=new OB(vA);function s1(t,e){uT.indexOf(t)>-1||(uT.push(t),console.warn(e))}function IB(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||We[c];u?typeof u=="function"?l.length?l=l.map(u):s1(c,`Modifier ${c} used at start of tag`):l.length?s1(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:s1(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=dT[r];if(s)return s.id;let o=dT[r]=Yi.define({id:qp.length,name:i,props:[zfe({[i]:n})]});return qp.push(o),o.id}function Ihe(t,e){let n=Yi.define({id:qp.length,name:"Document",props:[Ku.add(()=>t),bB.add(()=>i=>e.getIndent(i))],top:!0});return qp.push(n),n}Vt.RTL,Vt.LTR;const jhe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=yA(t.state,n.from);return i.line?Dhe(t):i.block?Bhe(t):!1};function Nm(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const Dhe=Nm(bA,0),Lhe=Nm(bA,1),$he=Nm(bA,2),Fhe=Nm(jB,0),Bhe=Nm((t,e)=>jB(t,e,Uhe(e)),0);function yA(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Uf=50;function zhe(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Uf,i),o=t.sliceDoc(r,r+Uf),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*Uf?u=d=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+Uf),d=t.sliceDoc(r-Uf,r));let f=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-n.length;return u.slice(f,f+e.length)==e&&d.slice(g,g+n.length)==n?{open:{pos:i+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:r-p-n.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function Uhe(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function jB(t,e,n=e.selection.ranges){let i=n.map(s=>yA(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>zhe(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function bA(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,c=yA(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>r&&(s==o||o>d.from)){r=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,g=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),i.push({line:d,comment:g,token:c,indent:f,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const Kk=ca.define(),Vhe=ca.define(),Hhe=Ee.define(),DB=Ee.define({combine(t){return Il(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),LB=_i.define({create(){return to.empty},update(t,e){let n=e.state.facet(DB),i=e.annotation(Kk);if(i){let l=Wi.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=wy(u,u.length,n.minDepth,l):u=BB(u,e.startState.selection),new to(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(Vhe);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(An.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Wi.fromTransaction(e),o=e.annotation(An.time),a=e.annotation(An.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new to(t.done.map(Wi.fromJSON),t.undone.map(Wi.fromJSON))}});function Whe(t={}){return[LB,DB.of(t),Re.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?$B:e.inputType=="historyRedo"?qk:null;return i?(e.preventDefault(),i(n)):!1}})]}function wA(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(LB,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const $B=wA(0,!1),qk=wA(1,!1),Ghe=wA(0,!0);class Wi{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Wi(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Wi(e.changes&&kn.fromJSON(e.changes),[],e.mapped&&lo.fromJSON(e.mapped),e.startSelection&&re.fromJSON(e.startSelection),e.selectionsAfter.map(re.fromJSON))}static fromTransaction(e,n){let i=$r;for(let r of e.startState.facet(Hhe)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Wi(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,$r)}static selection(e){return new Wi(void 0,$r,void 0,void 0,e)}}function wy(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function Khe(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function qhe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function FB(t,e){return t.length?e.length?t.concat(e):t:e}const $r=[],Yhe=200;function BB(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Yhe));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),wy(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Wi.selection([e])]}function Xhe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function o1(t,e){if(!t.length)return t;let n=t.length,i=$r;for(;n;){let r=Jhe(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Wi.selection(i)]:$r}function Jhe(t,e,n){let i=FB(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):$r,n);if(!t.changes)return Wi.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Wi(r,nt.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const Zhe=/^(input\.type|delete)($|\.)/;class to{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new to(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||Zhe.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,Khe(a.changes,e.changes))||i=="input.type.compose")?o=wy(o,o.length-1,r.minDepth,new Wi(e.changes.compose(a.changes),FB(nt.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,$r)):o=wy(o,o.length,r.minDepth,e),new to(o,$r,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:$r;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&qhe(s[s.length-1],e)?this:new to(BB(this.done,e),this.undone,n,i)}addMapping(e){return new to(o1(this.done,e),o1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Kk.of({side:e,rest:Xhe(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?$r:r.slice(0,r.length-1);return s.mapped&&(a=o1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Kk.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}to.empty=new to($r,$r);function Pm(t,e){return re.create(t.ranges.map(e),t.mainIndex)}function Bl(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function tu({state:t,dispatch:e},n){let i=Pm(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Bl(t,i)),!0)}function Qb(t,e){return re.cursor(e?t.to:t.from)}function zB(t,e){return tu(t,n=>n.empty?t.moveByChar(n,e):Qb(n,e))}function zl(t){return t.textDirectionAt(t.state.selection.main.head)==Vt.LTR}const fT=t=>zB(t,!zl(t)),hT=t=>zB(t,zl(t));function UB(t,e){return tu(t,n=>n.empty?t.moveByGroup(n,e):Qb(n,e))}const Qhe=t=>UB(t,!zl(t)),epe=t=>UB(t,zl(t));function VB(t,e){return tu(t,n=>{if(!n.empty)return Qb(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const pT=t=>VB(t,!1),mT=t=>VB(t,!0);function HB(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Re.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function WB(t,e){let n=HB(t),{state:i}=t,r=Pm(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):Qb(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Re.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Bl(i,r),{effects:s}),!0}const a1=t=>WB(t,!1),l1=t=>WB(t,!0);function ew(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=re.cursor(i.from+s))}return r}const gT=t=>tu(t,e=>ew(t,e,!0)),vT=t=>tu(t,e=>ew(t,e,!1)),tpe=t=>tu(t,e=>re.cursor(t.lineBlockAt(e.head).from,1)),npe=t=>tu(t,e=>re.cursor(t.lineBlockAt(e.head).to,-1));function ipe(t,e,n){let i=!1,r=Pm(t.selection,s=>{let o=Xg(t,s.head,-1)||Xg(t,s.head,1)||s.head>0&&Xg(t,s.head-1,1)||s.head<t.doc.length&&Xg(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return re.cursor(a)});return i?(e(Bl(t,r)),!0):!1}const rpe=({state:t,dispatch:e})=>ipe(t,e);function Ul(t,e){let n=Pm(t.state.selection,i=>{let r=e(i);return re.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Bl(t.state,n)),!0)}function GB(t,e){return Ul(t,n=>t.moveByChar(n,e))}const yT=t=>GB(t,!zl(t)),bT=t=>GB(t,zl(t));function KB(t,e){return Ul(t,n=>t.moveByGroup(n,e))}const spe=t=>KB(t,!zl(t)),ope=t=>KB(t,zl(t));function qB(t,e){return Ul(t,n=>t.moveVertically(n,e))}const wT=t=>qB(t,!1),xT=t=>qB(t,!0);function YB(t,e){return Ul(t,n=>t.moveVertically(n,e,HB(t).height))}const ST=t=>YB(t,!1),kT=t=>YB(t,!0),_T=t=>Ul(t,e=>ew(t,e,!0)),CT=t=>Ul(t,e=>ew(t,e,!1)),ape=t=>Ul(t,e=>re.cursor(t.lineBlockAt(e.head).from)),lpe=t=>Ul(t,e=>re.cursor(t.lineBlockAt(e.head).to)),ET=({state:t,dispatch:e})=>(e(Bl(t,{anchor:0})),!0),AT=({state:t,dispatch:e})=>(e(Bl(t,{anchor:t.doc.length})),!0),NT=({state:t,dispatch:e})=>(e(Bl(t,{anchor:t.selection.main.anchor,head:0})),!0),PT=({state:t,dispatch:e})=>(e(Bl(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),cpe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),upe=({state:t,dispatch:e})=>{let n=nw(t).map(({from:i,to:r})=>re.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:re.create(n),userEvent:"select"})),!0};function tw(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Jg(t,l,!1)):l>o&&(n="delete.forward",l=Jg(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Jg(t,o,!1),a=Jg(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:re.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Re.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Jg(t,e,n){if(t instanceof Re)for(let i of t.state.facet(Re.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const XB=(t,e,n)=>tw(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let c=pm(a,s.tabSize),u=c%Xc(s)||Xc(s);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)r--;l=r}else l=Yn(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=Yn(o.text,l-o.from,!1,!1)+o.from);return l}),c1=t=>XB(t,!1,!0),MT=t=>XB(t,!0,!1),JB=(t,e)=>tw(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=Yn(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),RT=t=>JB(t,!1),dpe=t=>JB(t,!0),TT=t=>tw(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),fpe=t=>tw(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),hpe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:gt.of(["",""])},range:re.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},ppe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Yn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:Yn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:re.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function nw(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function ZB(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of nw(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(re.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(re.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:re.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const mpe=({state:t,dispatch:e})=>ZB(t,e,!1),gpe=({state:t,dispatch:e})=>ZB(t,e,!0);function QB(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of nw(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const vpe=({state:t,dispatch:e})=>QB(t,e,!1),ype=({state:t,dispatch:e})=>QB(t,e,!0),bpe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(nw(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Pm(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function wpe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=vo(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(pt.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const OT=xpe(!1);function xpe(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&wpe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new fA(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=Zfe(c,s);for(u==null&&(u=pm(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",Vk(e,u)];return l&&d.push(Vk(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:gt.of(d)},range:re.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function ez(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:re.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const Yk=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(ez(t,(n,i)=>{i.push({from:n.from,insert:t.facet(dA)})}),{userEvent:"input.indent"})),!0),IT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(ez(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=pm(r,t.tabSize),o=0,a=Vk(t,Math.max(0,s-Xc(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),jT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Yp{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(jT(a)):jT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Or(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=BC(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Uo(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Yp.prototype[Symbol.iterator]=function(){return this});const tz={from:-1,to:-1,match:/.*/.exec("")},xA="gm"+(/x/.unicode==null?"":"u");class nz{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=tz,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new iz(e,n,i,r,s);this.re=new RegExp(n,xA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=xy(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=xy(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const u1=new WeakMap;class hd{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=u1.get(e);if(!r||r.from>=i||r.to<=n){let a=new hd(n,e.sliceString(n,i));return u1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),u1.set(e,new hd(o,s)),new hd(n,s.slice(n-o,i-o))}}class iz{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=tz,this.matchPos=xy(e,r),this.re=new RegExp(n,xA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=hd.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=xy(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=hd.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(nz.prototype[Symbol.iterator]=iz.prototype[Symbol.iterator]=function(){return this});function Spe(t){try{return new RegExp(t,xA),!0}catch{return!1}}function xy(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function Xk(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Rt("input",{class:"cm-textfield",name:"line",value:e}),i=Rt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Uh.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Rt("label",t.state.phrase("Go to line"),": ",n)," ",Rt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Rt("button",{name:"close",onclick:()=>{t.dispatch({effects:Uh.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,p=c?+c:a.number;if(c&&d){let v=p/100;l&&(v=v*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*v)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),m=re.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[Uh.of(!1),Re.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const Uh=nt.define(),DT=_i.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Uh)&&(t=n.value);return t},provide:t=>Op.from(t,e=>e?Xk:null)}),kpe=t=>{let e=Tp(t,Xk);if(!e){let n=[Uh.of(!0)];t.state.field(DT,!1)==null&&n.push(nt.appendConfig.of([DT,_pe])),t.dispatch({effects:n}),e=Tp(t,Xk)}return e&&e.dom.querySelector("input").select(),!0},_pe=Re.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Cpe=({state:t,dispatch:e})=>{let{selection:n}=t,i=re.create(n.ranges.map(r=>t.wordAt(r.head)||re.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Epe(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new Yp(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Yp(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Ape=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Cpe({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Epe(t,i);return r?(e(t.update({selection:t.selection.addRange(re.range(r.from,r.to),!1),effects:Re.scrollIntoView(r.to)})),!0):!1},pf=Ee.define({combine(t){return Il(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Dpe(e),scrollToMatch:e=>Re.scrollIntoView(e)})}});class rz{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Spe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Rpe(this):new Ppe(this)}getCursor(e,n=0,i){let r=e.doc?e:dt.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Eu(this,r,n,i):Cu(this,r,n,i)}}class sz{constructor(e){this.spec=e}}function Cu(t,e,n,i){return new Yp(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?Npe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Npe(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(Sy(r,n-s))!=Xn.Word||e(ky(r,n-s))!=Xn.Word)&&(e(ky(r,i-s))!=Xn.Word||e(Sy(r,i-s))!=Xn.Word))}class Ppe extends sz{constructor(e){super(e)}nextMatch(e,n,i){let r=Cu(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=Cu(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Cu(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Cu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Cu(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Eu(t,e,n,i){return new nz(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Mpe(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function Sy(t,e){return t.slice(Yn(t,e,!1),e)}function ky(t,e){return t.slice(e,Yn(t,e))}function Mpe(t){return(e,n,i)=>!i[0].length||(t(Sy(i.input,i.index))!=Xn.Word||t(ky(i.input,i.index))!=Xn.Word)&&(t(ky(i.input,i.index+i[0].length))!=Xn.Word||t(Sy(i.input,i.index+i[0].length))!=Xn.Word)}class Rpe extends sz{nextMatch(e,n,i){let r=Eu(this.spec,e,i,e.doc.length).next();return r.done&&(r=Eu(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Eu(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=Eu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Eu(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Xp=nt.define(),SA=nt.define(),ul=_i.define({create(t){return new d1(Jk(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Xp)?t=new d1(n.value.create(),t.panel):n.is(SA)&&(t=new d1(t.query,n.value?kA:null));return t},provide:t=>Op.from(t,e=>e.panel)});class d1{constructor(e,n){this.query=e,this.panel=n}}const Tpe=it.mark({class:"cm-searchMatch"}),Ope=it.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Ipe=ei.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ul))}update(t){let e=t.state.field(ul);(e!=t.startState.field(ul)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return it.none;let{view:n}=this,i=new wl;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);i.add(c,u,d?Ope:Tpe)})}return i.finish()}},{decorations:t=>t.decorations});function Mm(t){return e=>{let n=e.state.field(ul,!1);return n&&n.query.spec.valid?t(e,n):uz(e)}}const LT=Mm((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=re.single(i.from,i.to),s=t.state.facet(pf);return t.dispatch({selection:r,effects:[_A(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),cz(t),!0}),$T=Mm((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=re.single(r.from,r.to),o=t.state.facet(pf);return t.dispatch({selection:s,effects:[_A(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),cz(t),!0}),oz=Mm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:re.create(n.map(i=>re.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),jpe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new Yp(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(re.range(a.value.from,a.value.to))}return e(t.update({selection:re.create(s,o),userEvent:"select.search.matches"})),!0},FT=Mm((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==i&&o.to==r&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Re.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let d=t.state.changes(a);return o&&(l=re.single(o.from,o.to).map(d),u.push(_A(t,o)),u.push(n.facet(pf).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),az=Mm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Re.announce.of(i),userEvent:"input.replace.all"}),!0});function kA(t){return t.state.facet(pf).createPanel(t)}function Jk(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(pf);return new rz({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function lz(t){let e=Tp(t,kA);return e&&e.dom.querySelector("[main-field]")}function cz(t){let e=lz(t);e&&e==t.root.activeElement&&e.select()}const uz=t=>{let e=t.state.field(ul,!1);if(e&&e.panel){let n=lz(t);if(n&&n!=t.root.activeElement){let i=Jk(t.state,e.query.spec);i.valid&&t.dispatch({effects:Xp.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[SA.of(!0),e?Xp.of(Jk(t.state,e.query.spec)):nt.appendConfig.of($pe)]});return!0},dz=t=>{let e=t.state.field(ul,!1);if(!e||!e.panel)return!1;let n=Tp(t,kA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:SA.of(!1)}),!0};class Dpe{constructor(e){this.view=e;let n=this.query=e.state.field(ul).query.spec;this.commit=this.commit.bind(this),this.searchField=Rt("input",{value:n.search,placeholder:Qi(e,"Find"),"aria-label":Qi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Rt("input",{value:n.replace,placeholder:Qi(e,"Replace"),"aria-label":Qi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Rt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Rt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Rt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Rt("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Rt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>LT(e),[Qi(e,"next")]),i("prev",()=>$T(e),[Qi(e,"previous")]),i("select",()=>oz(e),[Qi(e,"all")]),Rt("label",null,[this.caseField,Qi(e,"match case")]),Rt("label",null,[this.reField,Qi(e,"regexp")]),Rt("label",null,[this.wordField,Qi(e,"by word")]),...e.state.readOnly?[]:[Rt("br"),this.replaceField,i("replace",()=>FT(e),[Qi(e,"replace")]),i("replaceAll",()=>az(e),[Qi(e,"replace all")])],Rt("button",{name:"close",onclick:()=>dz(e),"aria-label":Qi(e,"close"),type:"button"},["×"])])}commit(){let e=new rz({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Xp.of(e)}))}keydown(e){Ste(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?$T:LT)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),FT(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Xp)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(pf).top}}function Qi(t,e){return t.state.phrase(e)}const Zg=30,Qg=/[\s\.,:;?!]/;function _A(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Zg),o=Math.min(r,n+Zg),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Zg;l++)if(!Qg.test(a[l+1])&&Qg.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Zg;l--)if(!Qg.test(a[l-1])&&Qg.test(a[l])){a=a.slice(0,l);break}}return Re.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const Lpe=Re.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),$pe=[ul,fm.low(Ipe),Lpe];class Fpe{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=vo(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(fz(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function BT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Bpe(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=BT(e)+BT(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function zpe(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Bpe(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class zT{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Vh(t){return t.selection.main.from}function fz(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const hz=ca.define();function Upe(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:re.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const UT=new WeakMap;function Vpe(t){if(!Array.isArray(t))return t;let e=UT.get(t);return e||UT.set(t,e=zpe(t)),e}const pz=nt.define(),CA=nt.define();class Hpe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Or(e,n),r=Uo(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(Or(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let w=Or(e,0),x=Uo(w),S=x==e.length?0:-100;if(w!=n[0])if(w==i[0])S+=-200;else return null;return this.ret(S,[0,x])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let w=0,x=Math.min(e.length,200);w<x&&c<l;){let S=Or(e,w);(S==n[c]||S==i[c])&&(r[c++]=w),w+=Uo(S)}if(c<l)return null}let u=0,d=0,f=!1,p=0,g=-1,m=-1,v=/[a-z]/.test(e),y=!0;for(let w=0,x=Math.min(e.length,200),S=0;w<x&&d<l;){let _=Or(e,w);a<0&&(u<l&&_==n[u]&&(s[u++]=w),p<l&&(_==n[p]||_==i[p]?(p==0&&(g=w),m=w+1,p++):p=0));let E,C=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(E=BC(_))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!w||C==1&&v||S==0&&C!=0)&&(n[d]==_||i[d]==_&&(f=!0)?o[d++]=w:o.length&&(y=!1)),S=C,w+=Uo(_)}return d==l&&o[0]==0&&y?this.result(-100+(f?-200:0),o,e):p==l&&g==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[g,m]):d==l?this.result(-100+(f?-200:0)+-700+(y?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?Uo(Or(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class Wpe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Ys=Ee.define({combine(t){return Il(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Gpe,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>VT(e(i),n(i)),optionClass:(e,n)=>i=>VT(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function VT(t,e){return t?e?t+" "+e:t:e}function Gpe(t,e,n,i,r,s){let o=t.textDirection==Vt.RTL,a=o,l=!1,c="top",u,d,f=e.left-r.left,p=r.right-e.right,g=i.right-i.left,m=i.bottom-i.top;if(a&&f<Math.min(g,p)?a=!1:!a&&p<Math.min(g,f)&&(a=!0),g<=(a?f:p))u=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,d=Math.min(400,a?f:p);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let w=r.bottom-e.bottom;w>=m||w>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let v=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/v}px; max-width: ${d/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function Kpe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function f1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class qpe{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(Ys);this.optionContent=Kpe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=f1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Ys).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:CA.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=f1(s.length,o,e.state.facet(Ys).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=f1(n.options.length,n.selected,this.view.state.facet(Ys).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>dr(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&Xpe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Ys).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>i.from||i.from==0))if(s=f,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let p=r.appendChild(document.createElement("completion-section"));p.textContent=f}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let p=f(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Ype(t,e){return n=>new qpe(n,t,e)}function Xpe(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function HT(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Jpe(t,e){let n=[],i=null,r=c=>{n.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let d=typeof u=="string"?u:u.name;i.some(f=>f.name==d)||i.push(typeof u=="string"?{name:d}:u)}},s=e.facet(Ys);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)r(new zT(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),f,p=s.filterStrict?new Wpe(d):new Hpe(d);for(let g of c.result.options)if(f=p.match(g.label)){let m=g.displayLabel?u?u(g,f.matched):[]:f.matched;r(new zT(g,c.source,m,f.score+(g.boost||0)))}}}if(i){let c=Object.create(null),u=0,d=(f,p)=>{var g,m;return((g=f.rank)!==null&&g!==void 0?g:1e9)-((m=p.rank)!==null&&m!==void 0?m:1e9)||(f.name<p.name?-1:1)};for(let f of i.sort(d))u-=1e5,c[f.name]=u;for(let f of n){let{section:p}=f.completion;p&&(f.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):HT(c.completion)>HT(a)&&(o[o.length-1]=c),a=c.completion}return o}class qu{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new qu(this.options,WT(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(c=>c.isPending))return r.setDisabled();let a=Jpe(e,n);if(!a.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let l=n.facet(Ys).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new qu(a,WT(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:rme,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new qu(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new qu(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class _y{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new _y(tme,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Ys),s=(i.override||n.languageDataAt("autocomplete",Vh(n)).map(Vpe)).map(l=>(this.active.find(u=>u.source==l)||new ms(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(mz));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Zpe(s,this.active)||a?o=qu.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new ms(l.source,0):l));for(let l of e.effects)l.is(gz)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new _y(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Qpe:eme}}function Zpe(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const Qpe={"aria-autocomplete":"list"},eme={};function WT(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const tme=[];function nme(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(hz);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class ms{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=nme(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new ms(r.source,0)),i&4&&r.state==0&&(r=new ms(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(pz))r=new ms(r.source,1,s.value);else if(s.is(CA))r=new ms(r.source,0);else if(s.is(mz))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Vh(e.state))}}class Hh extends ms{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Vh(e.state);if(a>o||!r||n&2&&(Vh(e.startState)==this.from||a<this.limit))return new ms(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return ime(r.validFor,e.state,s,o)?new Hh(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new Fpe(e.state,a,!1)))?new Hh(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:Vh(e.state)):new ms(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Hh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ms(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function ime(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):fz(t,!0).test(r)}const mz=nt.define({map(t,e){return t.map(n=>n.map(e))}}),gz=nt.define(),mf=_i.define({create(){return _y.start()},update(t,e){return t.update(e)},provide:t=>[tE.from(t,e=>e.tooltip),Re.contentAttributes.from(t,e=>e.attrs)]});function vz(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(mf).active.find(r=>r.source==e.source);return i instanceof Hh?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},Upe(t.state,n,i.from,i.to)),{annotations:hz.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const rme=Ype(mf,vz);function e0(t,e="option"){return n=>{let i=n.state.field(mf,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Ys).interactionDelay)return!1;let r=1,s;e=="page"&&(s=ene(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:gz.of(a)}),!0}}const GT=t=>{let e=t.state.field(mf,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Ys).interactionDelay?!1:vz(t,e.open.options[e.open.selected])},sme=t=>t.state.field(mf,!1)?(t.dispatch({effects:pz.of(!0)}),!0):!1,ome=t=>{let e=t.state.field(mf,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:CA.of(null)}),!0)},yz={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},bz=new class extends Bc{};bz.startSide=1;bz.endSide=-1;const h1="()[]{}<>«»»«［］｛｝";function ame(t){for(let e=0;e<h1.length;e+=2)if(h1.charCodeAt(e)==t)return h1.charAt(e+1);return BC(t<128?t:t+1)}function lme(t,e){return t.languageDataAt("closeBrackets",e)[0]||yz}const cme=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=lme(t,t.selection.main.head).brackets||yz.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=dme(t.doc,o.head);for(let l of i)if(l==a&&ume(t.doc,o.head)==ame(Or(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:re.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function ume(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Uo(Or(n,0)))}function dme(t,e){let n=t.sliceString(e-2,e);return Uo(Or(n,0))==n.length?n:n.slice(1)}class KT{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class dc{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=i.facet(no).markerFilter;r&&(e=r(e,i));let s=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new wl,a=[],l=0;for(let u=0;;){let d=u==s.length?null:s[u];if(!d&&!a.length)break;let f,p;for(a.length?(f=l,p=a.reduce((m,v)=>Math.min(m,v.to),d&&d.from>f?d.from:1e8)):(f=d.from,p=d.to,a.push(d),u++);u<s.length;){let m=s[u];if(m.from==f&&(m.to>m.from||m.to==f))a.push(m),u++,p=Math.min(m.to,p);else{p=Math.min(m.from,p);break}}let g=Eme(a);if(a.some(m=>m.from==m.to||m.from==m.to-1&&i.doc.lineAt(m.from).to==m.from))o.add(f,f,it.widget({widget:new Sme(g),diagnostics:a.slice()}));else{let m=a.reduce((v,y)=>y.markClass?v+" "+y.markClass:v,"");o.add(f,p,it.mark({class:"cm-lintRange cm-lintRange-"+g+m,diagnostics:a.slice(),inclusiveEnd:a.some(v=>v.to>p)}))}l=p;for(let m=0;m<a.length;m++)a[m].to<=l&&a.splice(m--,1)}let c=o.finish();return new dc(c,n,Zd(c))}}function Zd(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new KT(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new KT(i.from,s,i.diagnostic)}}),i}function fme(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(no).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(EA))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function wz(t,e){return t.field(pr,!1)?e:e.concat(nt.appendConfig.of(_z))}function hme(t,e){return{effects:wz(t,[EA.of(e)])}}const EA=nt.define(),AA=nt.define(),xz=nt.define(),pr=_i.define({create(){return new dc(it.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=Zd(n,t.selected.diagnostic,s)||Zd(n,null,s)}!n.size&&r&&e.state.facet(no).autoPanel&&(r=null),t=new dc(n,r,i)}for(let n of e.effects)if(n.is(EA)){let i=e.state.facet(no).autoPanel?n.value.length?Jp.open:null:t.panel;t=dc.init(n.value,i,e.state)}else n.is(AA)?t=new dc(t.diagnostics,n.value?Jp.open:null,t.selected):n.is(xz)&&(t=new dc(t.diagnostics,t.panel,n.value));return t},provide:t=>[Op.from(t,e=>e.panel),Re.decorations.from(t,e=>e.diagnostics)]}),pme=it.mark({class:"cm-lintRange cm-lintRange-active"});function mme(t,e,n){let{diagnostics:i}=t.state.field(pr),r,s=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return r=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(no).tooltipFilter;return r&&a&&(r=a(r,t.state)),r?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:gme(t,r)}}}:null}function gme(t,e){return Rt("ul",{class:"cm-tooltip-lint"},e.map(n=>kz(t,n,!1)))}const vme=t=>{let e=t.state.field(pr,!1);(!e||!e.panel)&&t.dispatch({effects:wz(t.state,[AA.of(!0)])});let n=Tp(t,Jp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},qT=t=>{let e=t.state.field(pr,!1);return!e||!e.panel?!1:(t.dispatch({effects:AA.of(!1)}),!0)},yme=t=>{let e=t.state.field(pr,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},bme=ei.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(no);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(no);n.length&&wme(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(hme(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{dr(this.view.state,i)})}}update(t){let e=t.state.facet(no);(t.docChanged||e!=t.startState.facet(no)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function wme(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):r=setTimeout(()=>e(i),200)},n)}const no=Ee.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Il(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function xme(t,e={}){return[no.of({source:t,config:e}),bme,_z]}function Sz(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function kz(t,e,n){var i;let r=n?Sz(e.actions):[];return Rt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Rt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let p=Zd(t.state.field(pr).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,d=u<0?c:[c.slice(0,u),Rt("u",c.slice(u,u+1)),c.slice(u+1)];return Rt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Rt("div",{class:"cm-diagnosticSource"},e.source))}class Sme extends jl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Rt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class YT{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=kz(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Jp{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)qT(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Sz(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=Zd(this.view.state.field(pr).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Rt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Rt("div",{class:"cm-panel-lint"},this.list,Rt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>qT(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(pr).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(pr),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,f;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(f=new YT(this.view,u),this.items.splice(i,0,f),r=!0):(f=this.items[d],d>i&&(this.items.splice(i,d-i),r=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new YT(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(pr),i=Zd(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:xz.of(i)})}static open(e){return new Jp(e)}}function kme(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function t0(t){return kme(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const _me=Re.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:t0("#d11")},".cm-lintRange-warning":{backgroundImage:t0("orange")},".cm-lintRange-info":{backgroundImage:t0("#999")},".cm-lintRange-hint":{backgroundImage:t0("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Cme(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function Eme(t){let e="hint",n=1;for(let i of t){let r=Cme(i.severity);r>n&&(n=r,e=i.severity)}return e}const _z=[pr,Re.decorations.compute([pr],t=>{let{selected:e,panel:n}=t.field(pr);return!e||!n||e.from==e.to?it.none:it.set([pme.range(e.from,e.to)])}),Qte(mme,{hideOn:fme}),_me],Cz=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},Ame=Cz("up"),Nme=Cz("down"),Pme=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(re.range(s,s)):e=re.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},Mme=[{key:"Ctrl-Space",run:sme},{key:"Escape",run:ome},{key:"ArrowDown",run:e0(!0)},{key:"ArrowUp",run:e0(!1)},{key:"PageDown",run:e0(!0,"page")},{key:"PageUp",run:e0(!1,"page")},{key:"Enter",run:GT},{key:"Tab",run:GT},{key:"Mod-f",run:uz,scope:"editor search-panel"},{key:"Escape",run:dz,scope:"editor search-panel"},{key:"Alt-Enter",run:oz,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:az,scope:"editor search-panel"},{key:"Ctrl-g",run:kpe},{key:"Mod-d",run:Ape,preventDefault:!0},{key:"Shift-Mod-l",run:jpe},{key:"Enter",run:OT,shift:OT},{key:"ArrowLeft",run:fT,shift:yT,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Qhe,shift:spe},{key:"ArrowRight",run:hT,shift:bT,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:epe,shift:ope},{key:"ArrowUp",run:pT,shift:wT,preventDefault:!0},{key:"ArrowDown",run:mT,shift:xT,preventDefault:!0},{key:"Home",run:vT,shift:CT},{mac:"Cmd-ArrowLeft",run:vT,shift:CT},{key:"Mod-Home",run:ET,shift:NT},{mac:"Cmd-ArrowUp",run:ET,shift:NT},{key:"PageUp",run:a1,shift:ST},{mac:"Ctrl-ArrowUp",run:a1,shift:ST},{key:"PageDown",run:l1,shift:kT},{mac:"Ctrl-ArrowDown",run:l1,shift:kT},{key:"End",run:gT,shift:_T},{mac:"Cmd-ArrowRight",run:gT,shift:_T},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Ame,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Nme,preventDefault:!0},{key:"Shift-Alt-i",run:Pme},{key:"Mod-End",run:AT,shift:PT},{mac:"Cmd-ArrowDown",run:AT,shift:PT},{key:"Mod-a",run:cpe},{key:"Backspace",run:cme},{key:"Backspace",run:c1,shift:c1},{key:"Delete",run:MT},{key:"Mod-Backspace",mac:"Alt-Backspace",run:RT},{key:"Mod-Delete",mac:"Alt-Delete",run:dpe},{mac:"Mod-Backspace",run:fpe},{mac:"Mod-Delete",run:TT},{mac:"Ctrl-b",run:fT,shift:yT,preventDefault:!0},{mac:"Ctrl-f",run:hT,shift:bT},{mac:"Ctrl-p",run:pT,shift:wT},{mac:"Ctrl-n",run:mT,shift:xT},{mac:"Ctrl-a",run:tpe,shift:ape},{mac:"Ctrl-e",run:npe,shift:lpe},{mac:"Ctrl-d",run:MT},{mac:"Ctrl-h",run:c1},{mac:"Ctrl-k",run:TT},{mac:"Ctrl-Alt-h",run:RT},{mac:"Ctrl-o",run:hpe},{mac:"Ctrl-t",run:ppe},{mac:"Ctrl-v",run:l1},{mac:"Alt-v",run:a1},{key:"Shift-Mod-k",run:bpe},{key:"Alt-ArrowDown",run:gpe},{key:"Alt-ArrowUp",run:mpe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:ype},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:vpe},{key:"Mod-l",run:upe,preventDefault:!0},{key:"Shift-Mod-\\",run:rpe},{key:"Tab",run:Yk,shift:IT,preventDefault:!0},{key:"Mod-[",run:IT},{key:"Mod-]",run:Yk},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:dhe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:fhe},{key:"Mod-k Mod-0",run:hhe},{key:"Mod-k Mod-j",run:phe},{key:"Mod-k Mod-c",run:Lhe},{key:"Mod-k Mod-u",run:$he},{key:"Mod-/",run:jhe},{key:"Shift-Alt-a",run:Fhe},{key:"Mod-z",run:$B,preventDefault:!0},{key:"Mod-y",run:qk,preventDefault:!0},{key:"Mod-Shift-z",run:qk,preventDefault:!0},{key:"Mod-u",run:Ghe,preventDefault:!0},{key:"Mod-Shift-m",run:vme},{key:"F8",run:yme}];var Rme=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},yu=new WeakMap,n0=new WeakMap,i0={},p1=0,Ez=function(t){return t&&(t.host||Ez(t.parentNode))},Tme=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=Ez(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Ome=function(t,e,n,i){var r=Tme(e,Array.isArray(t)?t:[t]);i0[n]||(i0[n]=new WeakMap);var s=i0[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(yu.get(f)||0)+1,v=(s.get(f)||0)+1;yu.set(f,m),s.set(f,v),o.push(f),m===1&&g&&n0.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),p1++,function(){o.forEach(function(d){var f=yu.get(d)-1,p=s.get(d)-1;yu.set(d,f),s.set(d,p),f||(n0.has(d)||d.removeAttribute(i),n0.delete(d)),p||d.removeAttribute(n)}),p1--,p1||(yu=new WeakMap,yu=new WeakMap,n0=new WeakMap,i0={})}},Ime=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=Rme(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),Ome(i,r,n,"aria-hidden")):function(){return null}},Zk=["Enter"," "],jme=["ArrowDown","PageUp","Home"],Az=["ArrowUp","PageDown","End"],Dme=[...jme,...Az],Lme={ltr:[...Zk,"ArrowRight"],rtl:[...Zk,"ArrowLeft"]},$me={ltr:["ArrowLeft"],rtl:["ArrowRight"]},iw="Menu",[Zp,Fme,Bme]=sm(iw),[nu,Nz]=_s(iw,[Bme,df,nb]),NA=df(),Pz=nb(),[cve,iu]=nu(iw),[uve,Rm]=nu(iw),zme="MenuAnchor",PA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=NA(n);return h.jsx($b,{...r,...i,ref:e})});PA.displayName=zme;var MA="MenuPortal",[Ume,Mz]=nu(MA,{forceMount:void 0}),Rz=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=iu(MA,e);return h.jsx(Ume,{scope:e,forceMount:n,children:h.jsx(oa,{present:n||s.open,children:h.jsx(km,{asChild:!0,container:r,children:i})})})};Rz.displayName=MA;var Gr="MenuContent",[Vme,RA]=nu(Gr),Tz=b.forwardRef((t,e)=>{const n=Mz(Gr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=iu(Gr,t.__scopeMenu),o=Rm(Gr,t.__scopeMenu);return h.jsx(Zp.Provider,{scope:t.__scopeMenu,children:h.jsx(oa,{present:i||s.open,children:h.jsx(Zp.Slot,{scope:t.__scopeMenu,children:o.modal?h.jsx(Hme,{...r,ref:e}):h.jsx(Wme,{...r,ref:e})})})})}),Hme=b.forwardRef((t,e)=>{const n=iu(Gr,t.__scopeMenu),i=b.useRef(null),r=ct(e,i);return b.useEffect(()=>{const s=i.current;if(s)return Ime(s)},[]),h.jsx(TA,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:be(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Wme=b.forwardRef((t,e)=>{const n=iu(Gr,t.__scopeMenu);return h.jsx(TA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Gme=Od("MenuContent.ScrollLock"),TA=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:g,...m}=t,v=iu(Gr,n),y=Rm(Gr,n),w=NA(n),x=Pz(n),S=Fme(n),[_,E]=b.useState(null),C=b.useRef(null),N=ct(e,C,v.onContentChange),M=b.useRef(0),O=b.useRef(""),D=b.useRef(0),j=b.useRef(null),K=b.useRef("right"),$=b.useRef(0),G=g?Bb:b.Fragment,X=g?{as:Gme,allowPinchZoom:!0}:void 0,Z=B=>{var k,P;const ie=O.current+B,pe=S().filter(I=>!I.disabled),J=document.activeElement,le=(k=pe.find(I=>I.ref.current===J))==null?void 0:k.textValue,F=pe.map(I=>I.textValue),L=rge(F,ie,le),U=(P=pe.find(I=>I.textValue===L))==null?void 0:P.ref.current;(function I(T){O.current=T,window.clearTimeout(M.current),T!==""&&(M.current=window.setTimeout(()=>I(""),1e3))})(ie),U&&setTimeout(()=>U.focus())};b.useEffect(()=>()=>window.clearTimeout(M.current),[]),LE();const V=b.useCallback(B=>{var pe,J;return K.current===((pe=j.current)==null?void 0:pe.side)&&oge(B,(J=j.current)==null?void 0:J.area)},[]);return h.jsx(Vme,{scope:n,searchRef:O,onItemEnter:b.useCallback(B=>{V(B)&&B.preventDefault()},[V]),onItemLeave:b.useCallback(B=>{var ie;V(B)||((ie=C.current)==null||ie.focus(),E(null))},[V]),onTriggerLeave:b.useCallback(B=>{V(B)&&B.preventDefault()},[V]),pointerGraceTimerRef:D,onPointerGraceIntentChange:b.useCallback(B=>{j.current=B},[]),children:h.jsx(G,{...X,children:h.jsx(Ib,{asChild:!0,trapped:r,onMountAutoFocus:be(s,B=>{var ie;B.preventDefault(),(ie=C.current)==null||ie.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(xm,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(Vj,{asChild:!0,...x,dir:y.dir,orientation:"vertical",loop:i,currentTabStopId:_,onCurrentTabStopIdChange:E,onEntryFocus:be(l,B=>{y.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(qE,{role:"menu","aria-orientation":"vertical","data-state":qz(v.open),"data-radix-menu-content":"",dir:y.dir,...w,...m,ref:N,style:{outline:"none",...m.style},onKeyDown:be(m.onKeyDown,B=>{const pe=B.target.closest("[data-radix-menu-content]")===B.currentTarget,J=B.ctrlKey||B.altKey||B.metaKey,le=B.key.length===1;pe&&(B.key==="Tab"&&B.preventDefault(),!J&&le&&Z(B.key));const F=C.current;if(B.target!==F||!Dme.includes(B.key))return;B.preventDefault();const U=S().filter(k=>!k.disabled).map(k=>k.ref.current);Az.includes(B.key)&&U.reverse(),nge(U)}),onBlur:be(t.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(M.current),O.current="")}),onPointerMove:be(t.onPointerMove,Qp(B=>{const ie=B.target,pe=$.current!==B.clientX;if(B.currentTarget.contains(ie)&&pe){const J=B.clientX>$.current?"right":"left";K.current=J,$.current=B.clientX}}))})})})})})})});Tz.displayName=Gr;var Kme="MenuGroup",OA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ke.div,{role:"group",...i,ref:e})});OA.displayName=Kme;var qme="MenuLabel",Oz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ke.div,{...i,ref:e})});Oz.displayName=qme;var Cy="MenuItem",XT="menu.itemSelect",rw=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=b.useRef(null),o=Rm(Cy,t.__scopeMenu),a=RA(Cy,t.__scopeMenu),l=ct(e,s),c=b.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(XT,{bubbles:!0,cancelable:!0});d.addEventListener(XT,p=>i==null?void 0:i(p),{once:!0}),dC(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return h.jsx(Iz,{...r,ref:l,disabled:n,onClick:be(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:be(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:be(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||Zk.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});rw.displayName=Cy;var Iz=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=RA(Cy,n),a=Pz(n),l=b.useRef(null),c=ct(e,l),[u,d]=b.useState(!1),[f,p]=b.useState("");return b.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[s.children]),h.jsx(Zp.ItemSlot,{scope:n,disabled:i,textValue:r??f,children:h.jsx(Hj,{asChild:!0,...a,focusable:!i,children:h.jsx(Ke.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:c,onPointerMove:be(t.onPointerMove,Qp(g=>{i?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:be(t.onPointerLeave,Qp(g=>o.onItemLeave(g))),onFocus:be(t.onFocus,()=>d(!0)),onBlur:be(t.onBlur,()=>d(!1))})})})}),Yme="MenuCheckboxItem",jz=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return h.jsx(Bz,{scope:t.__scopeMenu,checked:n,children:h.jsx(rw,{role:"menuitemcheckbox","aria-checked":Ey(n)?"mixed":n,...r,ref:e,"data-state":jA(n),onSelect:be(r.onSelect,()=>i==null?void 0:i(Ey(n)?!0:!n),{checkForDefaultPrevented:!1})})})});jz.displayName=Yme;var Dz="MenuRadioGroup",[Xme,Jme]=nu(Dz,{value:void 0,onValueChange:()=>{}}),Lz=b.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=br(i);return h.jsx(Xme,{scope:t.__scopeMenu,value:n,onValueChange:s,children:h.jsx(OA,{...r,ref:e})})});Lz.displayName=Dz;var $z="MenuRadioItem",Fz=b.forwardRef((t,e)=>{const{value:n,...i}=t,r=Jme($z,t.__scopeMenu),s=n===r.value;return h.jsx(Bz,{scope:t.__scopeMenu,checked:s,children:h.jsx(rw,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":jA(s),onSelect:be(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});Fz.displayName=$z;var IA="MenuItemIndicator",[Bz,Zme]=nu(IA,{checked:!1}),zz=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=Zme(IA,n);return h.jsx(oa,{present:i||Ey(s.checked)||s.checked===!0,children:h.jsx(Ke.span,{...r,ref:e,"data-state":jA(s.checked)})})});zz.displayName=IA;var Qme="MenuSeparator",Uz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ke.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});Uz.displayName=Qme;var ege="MenuArrow",Vz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=NA(n);return h.jsx(YE,{...r,...i,ref:e})});Vz.displayName=ege;var tge="MenuSub",[dve,Hz]=nu(tge),gh="MenuSubTrigger",Wz=b.forwardRef((t,e)=>{const n=iu(gh,t.__scopeMenu),i=Rm(gh,t.__scopeMenu),r=Hz(gh,t.__scopeMenu),s=RA(gh,t.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(PA,{asChild:!0,...c,children:h.jsx(Iz,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":qz(n.open),...t,ref:eb(e,r.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:be(t.onPointerMove,Qp(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:be(t.onPointerLeave,Qp(d=>{var p,g;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(g=n.content)==null?void 0:g.dataset.side,v=m==="right",y=v?-5:5,w=f[v?"left":"right"],x=f[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:w,y:f.top},{x,y:f.top},{x,y:f.bottom},{x:w,y:f.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:be(t.onKeyDown,d=>{var p;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||Lme[i.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});Wz.displayName=gh;var Gz="MenuSubContent",Kz=b.forwardRef((t,e)=>{const n=Mz(Gr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=iu(Gr,t.__scopeMenu),o=Rm(Gr,t.__scopeMenu),a=Hz(Gz,t.__scopeMenu),l=b.useRef(null),c=ct(e,l);return h.jsx(Zp.Provider,{scope:t.__scopeMenu,children:h.jsx(oa,{present:i||s.open,children:h.jsx(Zp.Slot,{scope:t.__scopeMenu,children:h.jsx(TA,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:be(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:be(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:be(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=$me[o.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});Kz.displayName=Gz;function qz(t){return t?"open":"closed"}function Ey(t){return t==="indeterminate"}function jA(t){return Ey(t)?"indeterminate":t?"checked":"unchecked"}function nge(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function ige(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function rge(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=ige(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function sge(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>i!=f>i&&n<(d-c)*(i-u)/(f-u)+c&&(r=!r)}return r}function oge(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return sge(n,e)}function Qp(t){return e=>e.pointerType==="mouse"?t(e):void 0}var age=PA,lge=Rz,cge=Tz,uge=OA,dge=Oz,fge=rw,hge=jz,pge=Lz,mge=Fz,gge=zz,vge=Uz,yge=Vz,bge=Wz,wge=Kz,Yz="DropdownMenu",[xge,fve]=_s(Yz,[Nz]),Xi=Nz(),[hve,Xz]=xge(Yz),Jz="DropdownMenuTrigger",Sge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=Xz(Jz,n),o=Xi(n);return h.jsx(age,{asChild:!0,...o,children:h.jsx(Ke.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:eb(e,s.triggerRef),onPointerDown:be(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:be(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Sge.displayName=Jz;var kge="DropdownMenuPortal",Zz=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Xi(e);return h.jsx(lge,{...i,...n})};Zz.displayName=kge;var Qz="DropdownMenuContent",e7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Xz(Qz,n),s=Xi(n),o=b.useRef(!1);return h.jsx(cge,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:be(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:be(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});e7.displayName=Qz;var _ge="DropdownMenuGroup",Cge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Xi(n);return h.jsx(uge,{...r,...i,ref:e})});Cge.displayName=_ge;var Ege="DropdownMenuLabel",t7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Xi(n);return h.jsx(dge,{...r,...i,ref:e})});t7.displayName=Ege;var Age="DropdownMenuItem",n7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Xi(n);return h.jsx(fge,{...r,...i,ref:e})});n7.displayName=Age;var Nge="DropdownMenuCheckboxItem",i7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Xi(n);return h.jsx(hge,{...r,...i,ref:e})});i7.displayName=Nge;var Pge="DropdownMenuRadioGroup",Mge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Xi(n);return h.jsx(pge,{...r,...i,ref:e})});Mge.displayName=Pge;var Rge="DropdownMenuRadioItem",r7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Xi(n);return h.jsx(mge,{...r,...i,ref:e})});r7.displayName=Rge;var Tge="DropdownMenuItemIndicator",s7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Xi(n);return h.jsx(gge,{...r,...i,ref:e})});s7.displayName=Tge;var Oge="DropdownMenuSeparator",o7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Xi(n);return h.jsx(vge,{...r,...i,ref:e})});o7.displayName=Oge;var Ige="DropdownMenuArrow",jge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Xi(n);return h.jsx(yge,{...r,...i,ref:e})});jge.displayName=Ige;var Dge="DropdownMenuSubTrigger",a7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Xi(n);return h.jsx(bge,{...r,...i,ref:e})});a7.displayName=Dge;var Lge="DropdownMenuSubContent",l7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Xi(n);return h.jsx(wge,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});l7.displayName=Lge;var $ge=Zz,c7=e7,u7=t7,d7=n7,f7=i7,h7=r7,p7=s7,m7=o7,g7=a7,v7=l7;const Fge=b.forwardRef(({className:t,inset:e,children:n,...i},r)=>h.jsxs(g7,{ref:r,className:ee("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,h.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));Fge.displayName=g7.displayName;const Bge=b.forwardRef(({className:t,...e},n)=>h.jsx(v7,{ref:n,className:ee("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));Bge.displayName=v7.displayName;const zge=b.forwardRef(({className:t,sideOffset:e=4,...n},i)=>h.jsx($ge,{children:h.jsx(c7,{ref:i,sideOffset:e,className:ee("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));zge.displayName=c7.displayName;const Uge=b.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(d7,{ref:i,className:ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Uge.displayName=d7.displayName;const Vge=b.forwardRef(({className:t,children:e,checked:n,...i},r)=>h.jsxs(f7,{ref:r,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(p7,{children:h.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));Vge.displayName=f7.displayName;const Hge=b.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(h7,{ref:i,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(p7,{children:h.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));Hge.displayName=h7.displayName;const Wge=b.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(u7,{ref:i,className:ee("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Wge.displayName=u7.displayName;const Gge=b.forwardRef(({className:t,...e},n)=>h.jsx(m7,{ref:n,className:ee("-mx-1 my-1 h-px bg-stone-600",t),...e}));Gge.displayName=m7.displayName;const DA=SL("vonsim-program",db(Tn().language,"editor.example"),void 0,{getOnInit:!0}),y7=()=>{const t=R.get(DA);return typeof t=="string"?t:""},Kge=ei.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(R.set(DA,this.view.state.doc.toString()),R.set(Zv,!0))}}),JT=de(null);de(t=>t(JT),(t,e,n)=>{e(JT,n)});const qge=de("");de(t=>t(qge)!==t(DA));const Qk=de(0),ZT=de(null),QT=de(t=>t(ZT),(t,e,n)=>{e(ZT,n)}),b7=de(""),Yge=de(()=>typeof window<"u"&&window.codemirror?window.codemirror.state.doc.toString():y7()||""),Xge=de(t=>t(b7)!==t(Yge)),m1="showSaveFilePicker"in window;function Jge(){const[t,e]=sf(),n=tt(Qk),i=tt(QT),r=fp(QT),s=fp(b7),o=tt(Xge),a=i&&o;b.useEffect(()=>{if(window.codemirror){const d=()=>{};return window.codemirror.dom.addEventListener("input",d),()=>{window.codemirror.dom.removeEventListener("input",d)}}},[]);const l=b.useCallback(async()=>{if(!m1){Di({title:"editor.files.unsupported",variant:"error"});return}if(!(a&&!confirm("editor.files.unsaved")))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await d.requestPermission({mode:"readwrite"})==="granted"){r(d);const g=await(await d.getFile()).text();s(g),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:g}})}}catch(d){console.error(d),Di({title:"editor.files.open-error",variant:"error"})}},[a,r,s]),c=b.useCallback(async()=>{if(!m1){Di({title:"editor.files.unsupported",variant:"error"});return}if(!i){Di({title:"No hay archivo abierto para guardar",variant:"error"});return}if(a)try{const d=window.codemirror.state.doc.toString(),f=await i.createWritable({keepExistingData:!1});await f.write(d),await f.close(),s(d),Di({title:"Archivo guardado",variant:"info"})}catch(d){console.error(d),Di({title:"editor.files.save-error",variant:"error"})}},[i,a,s]),u=b.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),f=(i==null?void 0:i.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(m1)try{const p=await window.showSaveFilePicker({suggestedName:f,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await p.requestPermission({mode:"readwrite"})==="granted"){r(p);const m=await p.createWritable({keepExistingData:!1});await m.write(d),await m.close(),s(d),Di({title:"Archivo guardado",variant:"info"})}}catch(p){console.error(p),Di({title:"editor.files.save-error",variant:"error"})}else{const p=new Blob([d],{type:"text/plain"}),g=URL.createObjectURL(p),m=document.createElement("a");m.style.display="none",m.href=g,m.download=f,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(g)}},[i,r,s]);return h.jsxs("div",{"data-testid":"status-bar",className:"flex items-center justify-between border-t border-stone-700 bg-gradient-to-r from-stone-800 to-stone-900 px-4 py-0.5 font-sans text-xs text-stone-300 shadow-inner",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[i&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium text-white transition-colors",children:i.name}),a&&h.jsx("span",{className:"size-2 rounded-full bg-orange-400"})]}),i&&h.jsx("div",{className:"h-4 w-px bg-stone-600"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(gr,{content:"editor.files.open",position:"top",children:h.jsx(mt,{variant:"ghost",size:"sm",onClick:l,className:"hover-lift","aria-label":"editor.files.open",children:h.jsx("span",{className:"icon-[lucide--folder-open] size-4"})})}),h.jsx(gr,{content:"editor.files.save",position:"top",children:h.jsx(mt,{variant:"ghost",size:"sm",onClick:c,disabled:!i||!a,className:"hover-lift","aria-label":"editor.files.save",children:h.jsx("span",{className:"icon-[lucide--save] size-4"})})}),h.jsx(gr,{content:"editor.files.save-as",position:"top",children:h.jsx(mt,{variant:"ghost",size:"sm",onClick:u,className:"hover-lift","aria-label":"editor.files.save-as",children:h.jsx("span",{className:"icon-[lucide--save-all] size-4"})})})]})]}),h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsxs(sA,{children:[h.jsx(oA,{asChild:!0,children:h.jsx("button",{className:"flex items-center justify-center rounded-lg p-1 text-stone-300 hover:bg-stone-800 focus:outline-none focus:ring-2 focus:ring-mantis-500","aria-label":"Ajustar tamaño de fuente del editor",title:"Ajustar tamaño de fuente del editor",type:"button",children:h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5"})})}),h.jsxs(Xb,{align:"end",className:"w-56 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5 text-mantis-400"}),h.jsx("span",{className:"text-sm font-medium text-white",children:"Tamaño de fuente del editor"}),h.jsxs("span",{className:"ml-auto text-xs text-stone-400",children:[t.editorFontSize,"px"]})]}),h.jsx(Ca,{value:[t.editorFontSize],min:8,max:64,step:1,onValueChange:([d])=>e(f=>({...f,editorFontSize:d})),className:"w-full"}),h.jsxs("div",{className:"mt-2 flex justify-between text-xs text-stone-500",children:[h.jsx("span",{children:"8"}),h.jsx("span",{children:"64"})]})]})]}),h.jsxs("div",{className:ee("flex items-center gap-1.5 rounded-full px-2 py-0.5 font-medium transition-colors",n>0?"border border-red-500/30 bg-red-500/20 text-red-300":"border border-green-500/30 bg-green-500/20 text-green-300"),children:[h.jsx("div",{className:ee("size-2 rounded-full",n>0?"bg-red-400":"bg-green-400")}),h.jsx("span",{className:"font-mono",children:n>0?`${n} error${n>1?"es":""}`:"Sin errores"})]})]})]})}const Ri={character:We.character,comment:We.comment,"data-directive":Cn.define(),identifier:We.variableName,instruction:Cn.define(),label:We.labelName,number:We.number,operator:We.operator,offset:Cn.define(),"ptr-size":Cn.define(),punctuation:We.punctuation,register:Cn.define(),special:Cn.define(),string:We.string,unassigned:Cn.define()},Zge=mA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":DC.includes(e)?"data-directive":LC.includes(e)?"instruction":Bv.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Ri}),Qge=whe(Zb.define([{tag:Ri.character,class:"text-orange-300"},{tag:Ri.comment,class:"text-stone-500 italic"},{tag:Ri["data-directive"],class:"text-rose-400/80"},{tag:Ri.instruction,class:"text-mantis-400"},{tag:Ri.number,class:"text-cyan-300/60"},{tag:Ri.operator,class:"text-rose-300"},{tag:Ri.offset,class:"text-rose-400/80 italic"},{tag:Ri["ptr-size"],class:"text-rose-400/80 italic"},{tag:Ri.punctuation,class:"text-stone-600"},{tag:Ri.register,class:"text-emerald-400/80"},{tag:Ri.special,class:"text-yellow-300/80"},{tag:Ri.string,class:"text-orange-300"},{tag:Ri.unassigned,class:"text-rose-400/80"}])),e0e=xme(t=>{const e=t.state.doc.toString(),n=IL(e);if(n.success)return R.set(Qk,0),[];const i=n,r=Tn().language,s=i.errors.map(o=>{var c,u;const a=((c=o.position)==null?void 0:c.start)??0,l=((u=o.position)==null?void 0:u.end)??e.length;return{message:o.translate(r),severity:"error",from:a,to:l}});return R.set(Qk,s.length),s},{delay:200});function t0e(){return new Xfe(Zge,[Qge,e0e])}function w7({className:t}){const[e,n]=b.useState(),i=qJ(),r=b.useCallback(s=>{s&&n(s)},[]);return b.useEffect(()=>{if(e)return window.codemirror=new Re({state:dt.create({doc:y7()||"",extensions:[dt.tabSize.of(2),m6.of(dt.readOnly.of(!1)),Kge,une(),mne,hne(),Lte(),Whe(),Nte(),Re.domEventHandlers({drop:s=>s.preventDefault()}),dt.allowMultipleSelections.of(!0),Vte(),Re.updateListener.of(s=>{s.selectionSet}),o6.of([{key:"Escape",run:s=>(s.dispatch({selection:re.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?Yk(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...Mme]),t0e()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),h.jsxs("div",{className:ee("flex flex-col rounded-lg border border-stone-700 bg-gradient-to-br from-stone-900 to-stone-800 shadow-xl",t),children:[h.jsx("div",{ref:r,className:"grow overflow-auto rounded-t-lg font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),h.jsx(Jge,{})]})}const x7=b.memo(()=>{const t=OC(),e=pq("(max-width: 640px)");R9(),T9();const n=b.useMemo(()=>({}),[]);return h.jsxs("div",{"data-testid":"app-container",className:"flex h-screen w-screen flex-col bg-black text-white",lang:t,style:n,children:[h.jsx(O9,{}),h.jsx(A9,{"data-testid":"header"}),e?h.jsx(k7,{}):h.jsx(S7,{}),h.jsx(ML,{"data-testid":"footer"}),h.jsx(D9,{}),h.jsx(M9,{})]})});x7.displayName="App";const S7=b.memo(()=>{const[t]=am(Gb);return h.jsxs(xD,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[h.jsx(S0,{id:"panel-editor",order:1,minSize:30,defaultSize:50,tagName:"section",className:"rounded-lg border border-stone-600 bg-black","data-testid":"panel-editor",children:h.jsx(w7,{className:"size-full"})}),h.jsx(WS,{className:"w-2"}),h.jsx(S0,{id:"panel-computer",order:2,minSize:20,defaultSize:50,tagName:"section",className:"computer-background rounded-lg border border-stone-600","data-testid":"panel-computer",children:h.jsx(dB,{})}),t&&h.jsxs(h.Fragment,{children:[h.jsx(WS,{className:"w-2"}),h.jsx(S0,{id:"panel-settings",order:3,minSize:30,defaultSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800","data-testid":"panel-settings",children:h.jsx(C9,{className:"size-full"})})]})]})});S7.displayName="DesktopLayout";const k7=b.memo(()=>{const t=Xt(),[e,n]=b.useState("editor"),[i,r]=am(Gb),s=tt(zn),o=b.useMemo(()=>"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),a=b.useMemo(()=>i?"settings":e,[i,e]),l=b.useCallback(u=>{i&&r(!1),n(u)},[i,r]),c=b.useMemo(()=>{switch(a){case"editor":return"Editor";case"computer":return"Computadora";case"settings":return"Configuración";default:return""}},[a]);return h.jsx(Gj,{value:a,onValueChange:l,asChild:!0,children:h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-500",children:"Pestaña:"}),h.jsx("span",{className:"text-sm font-medium text-white",children:c})]}),a==="computer"&&h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-stone-500",children:"Instrucción actual:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:o||h.jsx("span",{className:"italic text-stone-400",children:"Sin instrucción"})})]})]})}),h.jsx(x0,{value:"editor",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-black data-[state=inactive]:hidden","data-testid":"panel-editor",children:h.jsx(w7,{className:"size-full"})})}),h.jsx(x0,{value:"computer",asChild:!0,children:h.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-computer",children:h.jsx(dB,{})})}),h.jsx(x0,{value:"settings",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-settings",children:h.jsx(C9,{className:"size-full"})})}),h.jsx("div",{className:"border-t border-stone-700 bg-stone-900 p-2",children:h.jsxs(qj,{className:"grid grid-cols-3 gap-2",children:[h.jsxs(w0,{value:"editor",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--file-terminal] mb-1 size-5"}),t("control.tabs.editor")]}),h.jsxs(w0,{value:"computer",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--computer] mb-1 size-5"}),t("control.tabs.computer")]}),h.jsxs(w0,{value:"settings",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--settings] mb-1 size-5"}),"Configuración"]})]})})]})})});k7.displayName="MobileLayout";var LA="ToastProvider",[$A,n0e,i0e]=sm("Toast"),[_7,pve]=_s("Toast",[i0e]),[r0e,sw]=_7(LA),C7=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=b.useState(null),[c,u]=b.useState(0),d=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${LA}\`. Expected non-empty \`string\`.`),h.jsx($A.Provider,{scope:e,children:h.jsx(r0e,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(p=>p+1),[]),onToastRemove:b.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};C7.displayName=LA;var E7="ToastViewport",s0e=["F8"],e_="toast.viewportPause",t_="toast.viewportResume",A7=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=s0e,label:r="Notifications ({hotkey})",...s}=t,o=sw(E7,n),a=n0e(n),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),f=ct(e,d,o.onViewportChange),p=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;b.useEffect(()=>{const v=y=>{var x;i.length!==0&&i.every(S=>y[S]||y.code===S)&&((x=d.current)==null||x.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[i]),b.useEffect(()=>{const v=l.current,y=d.current;if(g&&v&&y){const w=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(e_);y.dispatchEvent(E),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(t_);y.dispatchEvent(E),o.isClosePausedRef.current=!1}},S=E=>{!v.contains(E.relatedTarget)&&x()},_=()=>{v.contains(document.activeElement)||x()};return v.addEventListener("focusin",w),v.addEventListener("focusout",S),v.addEventListener("pointermove",w),v.addEventListener("pointerleave",_),window.addEventListener("blur",w),window.addEventListener("focus",x),()=>{v.removeEventListener("focusin",w),v.removeEventListener("focusout",S),v.removeEventListener("pointermove",w),v.removeEventListener("pointerleave",_),window.removeEventListener("blur",w),window.removeEventListener("focus",x)}}},[g,o.isClosePausedRef]);const m=b.useCallback(({tabbingDirection:v})=>{const w=a().map(x=>{const S=x.ref.current,_=[S,...y0e(S)];return v==="forwards"?_:_.reverse()});return(v==="forwards"?w.reverse():w).flat()},[a]);return b.useEffect(()=>{const v=d.current;if(v){const y=w=>{var _,E,C;const x=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!x){const N=document.activeElement,M=w.shiftKey;if(w.target===v&&M){(_=c.current)==null||_.focus();return}const j=m({tabbingDirection:M?"backwards":"forwards"}),K=j.findIndex($=>$===N);g1(j.slice(K+1))?w.preventDefault():M?(E=c.current)==null||E.focus():(C=u.current)==null||C.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[a,m]),h.jsxs(Ioe,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&h.jsx(n_,{ref:c,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});g1(v)}}),h.jsx($A.Slot,{scope:n,children:h.jsx(Ke.ol,{tabIndex:-1,...s,ref:f})}),g&&h.jsx(n_,{ref:u,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});g1(v)}})]})});A7.displayName=E7;var N7="ToastFocusProxy",n_=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=sw(N7,n);return h.jsx(JE,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});n_.displayName=N7;var Tm="Toast",o0e="toast.swipeStart",a0e="toast.swipeMove",l0e="toast.swipeCancel",c0e="toast.swipeEnd",P7=b.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a,l]=pl({prop:i,defaultProp:r??!0,onChange:s,caller:Tm});return h.jsx(oa,{present:n||a,children:h.jsx(f0e,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:br(t.onPause),onResume:br(t.onResume),onSwipeStart:be(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:be(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:be(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:be(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});P7.displayName=Tm;var[u0e,d0e]=_7(Tm,{onClose(){}}),f0e=b.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...g}=t,m=sw(Tm,n),[v,y]=b.useState(null),w=ct(e,$=>y($)),x=b.useRef(null),S=b.useRef(null),_=r||m.duration,E=b.useRef(0),C=b.useRef(_),N=b.useRef(0),{onToastAdd:M,onToastRemove:O}=m,D=br(()=>{var G;(v==null?void 0:v.contains(document.activeElement))&&((G=m.viewport)==null||G.focus()),o()}),j=b.useCallback($=>{!$||$===1/0||(window.clearTimeout(N.current),E.current=new Date().getTime(),N.current=window.setTimeout(D,$))},[D]);b.useEffect(()=>{const $=m.viewport;if($){const G=()=>{j(C.current),c==null||c()},X=()=>{const Z=new Date().getTime()-E.current;C.current=C.current-Z,window.clearTimeout(N.current),l==null||l()};return $.addEventListener(e_,X),$.addEventListener(t_,G),()=>{$.removeEventListener(e_,X),$.removeEventListener(t_,G)}}},[m.viewport,_,l,c,j]),b.useEffect(()=>{s&&!m.isClosePausedRef.current&&j(_)},[s,_,m.isClosePausedRef,j]),b.useEffect(()=>(M(),()=>O()),[M,O]);const K=b.useMemo(()=>v?D7(v):null,[v]);return m.viewport?h.jsxs(h.Fragment,{children:[K&&h.jsx(h0e,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:K}),h.jsx(u0e,{scope:n,onClose:D,children:Ol.createPortal(h.jsx($A.ItemSlot,{scope:n,children:h.jsx(Ooe,{asChild:!0,onEscapeKeyDown:be(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||D(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(Ke.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:be(t.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:be(t.onPointerDown,$=>{$.button===0&&(x.current={x:$.clientX,y:$.clientY})}),onPointerMove:be(t.onPointerMove,$=>{if(!x.current)return;const G=$.clientX-x.current.x,X=$.clientY-x.current.y,Z=!!S.current,V=["left","right"].includes(m.swipeDirection),B=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,ie=V?B(0,G):0,pe=V?0:B(0,X),J=$.pointerType==="touch"?10:2,le={x:ie,y:pe},F={originalEvent:$,delta:le};Z?(S.current=le,r0(a0e,d,F,{discrete:!1})):e5(le,m.swipeDirection,J)?(S.current=le,r0(o0e,u,F,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(G)>J||Math.abs(X)>J)&&(x.current=null)}),onPointerUp:be(t.onPointerUp,$=>{const G=S.current,X=$.target;if(X.hasPointerCapture($.pointerId)&&X.releasePointerCapture($.pointerId),S.current=null,x.current=null,G){const Z=$.currentTarget,V={originalEvent:$,delta:G};e5(G,m.swipeDirection,m.swipeThreshold)?r0(c0e,p,V,{discrete:!0}):r0(l0e,f,V,{discrete:!0}),Z.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),h0e=t=>{const{__scopeToast:e,children:n,...i}=t,r=sw(Tm,e),[s,o]=b.useState(!1),[a,l]=b.useState(!1);return g0e(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(km,{asChild:!0,children:h.jsx(JE,{...i,children:s&&h.jsxs(h.Fragment,{children:[r.label," ",n]})})})},p0e="ToastTitle",M7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Ke.div,{...i,ref:e})});M7.displayName=p0e;var m0e="ToastDescription",R7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Ke.div,{...i,ref:e})});R7.displayName=m0e;var T7="ToastAction",O7=b.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?h.jsx(j7,{altText:n,asChild:!0,children:h.jsx(FA,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${T7}\`. Expected non-empty \`string\`.`),null)});O7.displayName=T7;var I7="ToastClose",FA=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=d0e(I7,n);return h.jsx(j7,{asChild:!0,children:h.jsx(Ke.button,{type:"button",...i,ref:e,onClick:be(t.onClick,r.onClose)})})});FA.displayName=I7;var j7=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return h.jsx(Ke.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function D7(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),v0e(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...D7(i))}}),e}function r0(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?dC(r,s):r.dispatchEvent(s)}var e5=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function g0e(t=()=>{}){const e=br(t);Qn(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function v0e(t){return t.nodeType===t.ELEMENT_NODE}function y0e(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function g1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var b0e=C7,L7=A7,$7=P7,F7=M7,B7=R7,z7=O7,U7=FA;const w0e=b0e,V7=b.forwardRef(({className:t,...e},n)=>h.jsx(L7,{ref:n,className:ee("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));V7.displayName=L7.displayName;const H7=b.forwardRef(({className:t,variant:e="default",...n},i)=>h.jsx($7,{ref:i,"data-variant":e,className:ee("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));H7.displayName=$7.displayName;const x0e=b.forwardRef(({className:t,...e},n)=>h.jsx(z7,{ref:n,className:ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));x0e.displayName=z7.displayName;const W7=b.forwardRef(({className:t,...e},n)=>h.jsx(U7,{ref:n,className:ee("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:h.jsx("span",{className:"block size-4",children:"✕"})}));W7.displayName=U7.displayName;const G7=b.forwardRef(({className:t,...e},n)=>h.jsx(F7,{ref:n,className:ee("text-sm font-semibold",t),...e}));G7.displayName=F7.displayName;const K7=b.forwardRef(({className:t,...e},n)=>h.jsx(B7,{ref:n,className:ee("text-sm opacity-90",t),...e}));K7.displayName=B7.displayName;function S0e(){const{toastList:t}=Sne();return h.jsxs(w0e,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>h.jsxs(H7,{...o,variant:s,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(G7,{children:n}),i&&h.jsx(K7,{children:i})]}),r,h.jsx(W7,{})]},e)),h.jsx(V7,{})]})}window.codemirror=null;function k0e(){const{addNotification:t}=DE();return window.VonSimAddNotification=t,null}function q7(t,e){const n={type:"error",title:"Error inesperado",message:e?`${t}
${e}`:t};function i(r=10){window.VonSimAddNotification?window.VonSimAddNotification(n):r>0&&setTimeout(()=>i(r-1),100)}i()}window.onerror=function(t,e,n,i,r){return q7(typeof t=="string"?t:"Error de JavaScript",r&&r.stack?r.stack:void 0),!1};window.onunhandledrejection=function(t){const e=t.reason instanceof Error?t.reason.stack||t.reason.message:String(t.reason);return q7("Promesa no manejada",e),!1};const _0e=Lj(document.getElementById("root"));_0e.render(h.jsx(b.StrictMode,{children:h.jsx(WH,{client:y6,children:h.jsxs(Coe,{children:[h.jsx(k0e,{}),h.jsx(pJ,{children:h.jsx(x7,{})}),h.jsx(S0e,{})]})})}));
