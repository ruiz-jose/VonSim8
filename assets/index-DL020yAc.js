var G8=Object.defineProperty;var VA=t=>{throw TypeError(t)};var K8=(t,e,n)=>e in t?G8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>K8(t,typeof e!="symbol"?e+"":e,n),Iw=(t,e,n)=>e.has(t)||VA("Cannot "+n);var A=(t,e,n)=>(Iw(t,e,"read from private field"),n?n.call(t):e.get(t)),Le=(t,e,n)=>e.has(t)?VA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Q=(t,e,n,i)=>(Iw(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),xt=(t,e,n)=>(Iw(t,e,"access private method"),n);function X8(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var q8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fO={exports:{}},cy={},pO={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp=Symbol.for("react.element"),Y8=Symbol.for("react.portal"),Z8=Symbol.for("react.fragment"),J8=Symbol.for("react.strict_mode"),Q8=Symbol.for("react.profiler"),e6=Symbol.for("react.provider"),t6=Symbol.for("react.context"),n6=Symbol.for("react.forward_ref"),i6=Symbol.for("react.suspense"),r6=Symbol.for("react.memo"),s6=Symbol.for("react.lazy"),WA=Symbol.iterator;function o6(t){return t===null||typeof t!="object"?null:(t=WA&&t[WA]||t["@@iterator"],typeof t=="function"?t:null)}var mO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gO=Object.assign,vO={};function Bd(t,e,n){this.props=t,this.context=e,this.refs=vO,this.updater=n||mO}Bd.prototype.isReactComponent={};Bd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yO(){}yO.prototype=Bd.prototype;function pk(t,e,n){this.props=t,this.context=e,this.refs=vO,this.updater=n||mO}var mk=pk.prototype=new yO;mk.constructor=pk;gO(mk,Bd.prototype);mk.isPureReactComponent=!0;var GA=Array.isArray,wO=Object.prototype.hasOwnProperty,gk={current:null},bO={key:!0,ref:!0,__self:!0,__source:!0};function xO(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wO.call(e,i)&&!bO.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:jp,type:t,key:s,ref:o,props:r,_owner:gk.current}}function a6(t,e){return{$$typeof:jp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vk(t){return typeof t=="object"&&t!==null&&t.$$typeof===jp}function l6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var KA=/\/+/g;function Dw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?l6(""+t.key):e.toString(36)}function Bg(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case jp:case Y8:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Dw(o,0):i,GA(r)?(n="",t!=null&&(n=t.replace(KA,"$&/")+"/"),Bg(r,e,n,"",function(u){return u})):r!=null&&(vk(r)&&(r=a6(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(KA,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",GA(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Dw(s,a);o+=Bg(s,e,n,l,r)}else if(l=o6(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Dw(s,a++),o+=Bg(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ym(t,e,n){if(t==null)return t;var i=[],r=0;return Bg(t,i,"","",function(s){return e.call(n,s,r++)}),i}function u6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xi={current:null},zg={transition:null},c6={ReactCurrentDispatcher:xi,ReactCurrentBatchConfig:zg,ReactCurrentOwner:gk};function SO(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:ym,forEach:function(t,e,n){ym(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ym(t,function(){e++}),e},toArray:function(t){return ym(t,function(e){return e})||[]},only:function(t){if(!vk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};rt.Component=Bd;rt.Fragment=Z8;rt.Profiler=Q8;rt.PureComponent=pk;rt.StrictMode=J8;rt.Suspense=i6;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c6;rt.act=SO;rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=gO({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gk.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)wO.call(e,l)&&!bO.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:jp,type:t.type,key:r,ref:s,props:i,_owner:o}};rt.createContext=function(t){return t={$$typeof:t6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:e6,_context:t},t.Consumer=t};rt.createElement=xO;rt.createFactory=function(t){var e=xO.bind(null,t);return e.type=t,e};rt.createRef=function(){return{current:null}};rt.forwardRef=function(t){return{$$typeof:n6,render:t}};rt.isValidElement=vk;rt.lazy=function(t){return{$$typeof:s6,_payload:{_status:-1,_result:t},_init:u6}};rt.memo=function(t,e){return{$$typeof:r6,type:t,compare:e===void 0?null:e}};rt.startTransition=function(t){var e=zg.transition;zg.transition={};try{t()}finally{zg.transition=e}};rt.unstable_act=SO;rt.useCallback=function(t,e){return xi.current.useCallback(t,e)};rt.useContext=function(t){return xi.current.useContext(t)};rt.useDebugValue=function(){};rt.useDeferredValue=function(t){return xi.current.useDeferredValue(t)};rt.useEffect=function(t,e){return xi.current.useEffect(t,e)};rt.useId=function(){return xi.current.useId()};rt.useImperativeHandle=function(t,e,n){return xi.current.useImperativeHandle(t,e,n)};rt.useInsertionEffect=function(t,e){return xi.current.useInsertionEffect(t,e)};rt.useLayoutEffect=function(t,e){return xi.current.useLayoutEffect(t,e)};rt.useMemo=function(t,e){return xi.current.useMemo(t,e)};rt.useReducer=function(t,e,n){return xi.current.useReducer(t,e,n)};rt.useRef=function(t){return xi.current.useRef(t)};rt.useState=function(t){return xi.current.useState(t)};rt.useSyncExternalStore=function(t,e,n){return xi.current.useSyncExternalStore(t,e,n)};rt.useTransition=function(){return xi.current.useTransition()};rt.version="18.3.1";pO.exports=rt;var S=pO.exports;const ln=Hu(S),yk=X8({__proto__:null,default:ln},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d6=S,h6=Symbol.for("react.element"),f6=Symbol.for("react.fragment"),p6=Object.prototype.hasOwnProperty,m6=d6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g6={key:!0,ref:!0,__self:!0,__source:!0};function _O(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)p6.call(e,i)&&!g6.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:h6,type:t,key:s,ref:o,props:r,_owner:m6.current}}cy.Fragment=f6;cy.jsx=_O;cy.jsxs=_O;fO.exports=cy;var m=fO.exports,H=typeof window<"u"?window:void 0,Li=typeof globalThis<"u"?globalThis:H,kO=Array.prototype,XA=kO.forEach,qA=kO.indexOf,nr=Li==null?void 0:Li.navigator,Ee=Li==null?void 0:Li.document,Ni=Li==null?void 0:Li.location,z1=Li==null?void 0:Li.fetch,U1=Li!=null&&Li.XMLHttpRequest&&"withCredentials"in new Li.XMLHttpRequest?Li.XMLHttpRequest:void 0,YA=Li==null?void 0:Li.AbortController,Pn=nr==null?void 0:nr.userAgent,Xe=H??{},ua={DEBUG:!1,LIB_VERSION:"1.190.2"},kv={},dy=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function Dc(t,e,n){if(Qt(t)){if(XA&&t.forEach===XA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===kv)return}}}function Ct(t,e,n){if(!Nt(t)){if(Qt(t))return Dc(t,e,n);if(S6(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===kv)return}else for(var r in t)if(AO.call(t,r)&&e.call(n,t[r],r)===kv)return}}var fi=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Dc(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t};function it(t,e){return t.indexOf(e)!==-1}function Ug(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var ZA=function(t){try{return t()}catch{return}},v6=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){J.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),J.critical(r)}}},Cv=function(t){var e={};return Ct(t,function(n,i){Qn(n)&&n.length>0&&(e[i]=n)}),e},H1=function(t){return t.replace(/^\$/,"")};function y6(t,e){return n=t,i=s=>Qn(s)&&!xl(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),Qt(o)?(l=[],Dc(o,u=>{l.push(s(u))})):(l={},Ct(o,(u,c)=>{r.has(u)||(l[c]=s(u,c))})),l);var l}(n);var n,i,r}var w6=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),xl(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},To=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,i,r,s){if(e)if(e.addEventListener&&!r)e.addEventListener(n,i,!!s);else{var o="on"+n,a=e[o];e[o]=function(l,u,c){return function(d){if(d=d||t(H==null?void 0:H.event)){var h,f=!0;Tr(c)&&(h=c(d));var p=u.call(l,d);return h!==!1&&p!==!1||(f=!1),f}}}(e,i,a)}else J.error("No valid element provided to register_event")}}();function CO(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}var ss,Lw="$copy_autocapture",b6=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];(function(t){t.GZipJS="gzip-js",t.Base64="base64"})(ss||(ss={}));var x6=Array.isArray,EO=Object.prototype,AO=EO.hasOwnProperty,hy=EO.toString,Qt=x6||function(t){return hy.call(t)==="[object Array]"},Tr=t=>typeof t=="function",un=t=>t===Object(t)&&!Qt(t),fc=t=>{if(un(t)){for(var e in t)if(AO.call(t,e))return!1;return!0}return!1},De=t=>t===void 0,Qn=t=>hy.call(t)=="[object String]",JA=t=>Qn(t)&&t.trim().length===0,xl=t=>t===null,Nt=t=>De(t)||xl(t),er=t=>hy.call(t)=="[object Number]",ou=t=>hy.call(t)==="[object Boolean]",S6=t=>t instanceof FormData,_6=t=>it(b6,t),QA="[PostHog.js]",J={_log:function(t){if(H&&(ua.DEBUG||Xe.POSTHOG_DEBUG)&&!De(H.console)&&H.console){for(var e=("__rrweb_original__"in H.console[t])?H.console[t].__rrweb_original__:H.console[t],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e(QA,...i)}},info:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];J._log("log",...e)},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];J._log("warn",...e)},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];J._log("error",...e)},critical:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];console.error(QA,...e)},uninitializedWarning:t=>{J.error("You must initialize PostHog before calling ".concat(t))}},eP=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return J.warn("".concat(e," was requested but loading of external scripts is disabled.")),n("Loading of external scripts is disabled");var i=()=>{if(!Ee)return n("document not found");var r=Ee.createElement("script");r.type="text/javascript",r.crossOrigin="anonymous",r.src=e,r.onload=a=>n(void 0,a),r.onerror=a=>n(a);var s,o=Ee.querySelectorAll("body > script");o.length>0?(s=o[0].parentNode)===null||s===void 0||s.insertBefore(r,o[0]):Ee.body.appendChild(r)};Ee!=null&&Ee.body?i():Ee==null||Ee.addEventListener("DOMContentLoaded",i)};function tP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tP(Object(n),!0).forEach(function(i){we(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function we(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PO(t,e){if(t==null)return{};var n,i,r=function(o,a){if(o==null)return{};var l,u,c={},d=Object.keys(o);for(u=0;u<d.length;u++)l=d[u],a.indexOf(l)>=0||(c[l]=o[l]);return c}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}Xe.__PosthogExtensions__=Xe.__PosthogExtensions__||{},Xe.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/".concat(e,".js")+"?v=".concat(t.version);if(e==="toolbar"){var r=3e5,s=Math.floor(Date.now()/r)*r;i="".concat(i,"&t=").concat(s)}var o=t.requestRouter.endpointFor("assets",i);eP(t,o,n)},Xe.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);eP(t,i,n)};var TO="$people_distinct_id",Ah="__alias",Ph="__timers",nP="$autocapture_disabled_server_side",V1="$heatmaps_enabled_server_side",iP="$exception_capture_enabled_server_side",rP="$web_vitals_enabled_server_side",NO="$dead_clicks_enabled_server_side",sP="$web_vitals_allowed_metrics",W1="$session_recording_enabled_server_side",oP="$console_log_recording_enabled_server_side",aP="$session_recording_network_payload_capture",lP="$session_recording_canvas_recording",uP="$replay_sample_rate",cP="$replay_minimum_duration",Ev="$sesid",Th="$session_is_sampled",jw="$session_recording_url_trigger_activated_session",Fw="$session_recording_event_trigger_activated_session",pc="$enabled_feature_flags",G1="$early_access_features",mc="$stored_person_properties",ca="$stored_group_properties",K1="$surveys",wm="$surveys_activated",Av="$flag_call_reported",ho="$user_state",X1="$client_session_props",q1="$capture_rate_limit",Y1="$initial_campaign_params",Z1="$initial_referrer_info",J1="$initial_person_info",Pv="$epp",RO="__POSTHOG_TOOLBAR__",k6=[TO,Ah,"__cmpns",Ph,W1,V1,Ev,pc,ho,G1,ca,mc,K1,Av,X1,q1,Y1,Z1,Pv],$w="$active_feature_flags",bm="$override_feature_flags",dP="$feature_flag_payloads",hP=t=>{var e={};for(var[n,i]of Ug(t||{}))i&&(e[n]=i);return e};let C6=class{constructor(e){this.instance=e,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}getFlags(){return Object.keys(this.getFlagVariants())}getFlagVariants(){var e=this.instance.get_property(pc),n=this.instance.get_property(bm);if(!n)return e||{};for(var i=fi({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this._override_warning||(J.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this._override_warning=!0),i}getFlagPayloads(){return this.instance.get_property(dP)||{}}reloadFeatureFlags(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.reloadFeatureFlagsInAction=e}resetRequestQueue(){this.reloadFeatureFlagsQueued=!1}_startReloadTimer(){this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(()=>{!this.reloadFeatureFlagsInAction&&this.reloadFeatureFlagsQueued&&(this.reloadFeatureFlagsQueued=!1,this._reloadFeatureFlagsRequest())},5)}_reloadFeatureFlagsRequest(){if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var e=this.instance.config.token,n=this.instance.get_property(mc),i=this.instance.get_property(ca),r={token:e,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:n,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:r,compression:this.instance.config.disable_compression?void 0:ss.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:s=>{var o;this.setReloadingPaused(!1);var a=!0;s.statusCode===200&&(this.$anon_distinct_id=void 0,a=!1),this.receivedFeatureFlags((o=s.json)!==null&&o!==void 0?o:{},a),this._startReloadTimer()}})}}getFeatureFlag(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var i,r=this.getFlagVariants()[e],s="".concat(r),o=this.instance.get_property(Av)||{};return(n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(s))&&(Qt(o[e])?o[e].push(s):o[e]=[s],(i=this.instance.persistence)===null||i===void 0||i.register({[Av]:o}),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:r})),r}J.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}isFeatureEnabled(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);J.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads();(function(s,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=s.featureFlags,c=s.featureFlagPayloads;if(u)if(Qt(u)){var d={};if(u)for(var h=0;h<u.length;h++)d[u[h]]=!0;o&&o.register({[$w]:u,[pc]:d})}else{var f=u,p=c;s.errorsWhileComputingFlags&&(f=le(le({},a),f),p=le(le({},l),p)),o&&o.register({[$w]:Object.keys(hP(f)),[pc]:f||{},[dP]:p||{}})}})(e,this.instance.persistence,i,r),this._fireFeatureFlagsCallbacks(n)}}override(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return J.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=n,e===!1)this.instance.persistence.unregister(bm);else if(Qt(e)){for(var i={},r=0;r<e.length;r++)i[e[r]]=!0;this.instance.persistence.register({[bm]:i})}else this.instance.persistence.register({[bm]:e})}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var{flags:n,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r={["$feature_enrollment/".concat(e)]:n};this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:n,$set:r}),this.setPersonPropertiesForFlags(r,!1);var s=le(le({},this.getFlagVariants()),{},{[e]:n});(i=this.instance.persistence)===null||i===void 0||i.register({[$w]:Object.keys(hP(s)),[pc]:s}),this._fireFeatureFlagsCallbacks()}getEarlyAccessFeatures(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.instance.get_property(G1);if(i&&!n)return e(i);this.instance._send_request({transport:"XHR",url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:r=>{var s;if(r.json){var o=r.json.earlyAccessFeatures;return(s=this.instance.persistence)===null||s===void 0||s.register({[G1]:o}),e(o)}}})}_prepareFeatureFlagsForCallbacks(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}_fireFeatureFlagsCallbacks(e){var{flags:n,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this.instance.get_property(mc)||{};this.instance.register({[mc]:le(le({},i),e)}),n&&this.instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this.instance.unregister(mc)}setGroupPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this.instance.get_property(ca)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=le(le({},i[r]),e[r]),delete e[r]}),this.instance.register({[ca]:le(le({},i),e)}),n&&this.instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this.instance.get_property(ca)||{};this.instance.register({[ca]:le(le({},n),{},{[e]:{}})})}else this.instance.unregister(ca)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return er(t)&&isFinite(t)&&Math.floor(t)===t});var fP="0123456789abcdef";let E6=class Q1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new Q1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+fP.charAt(this.bytes[n]>>>4)+fP.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new Q1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},A6=class{constructor(){we(this,"timestamp",0),we(this,"counter",0),we(this,"random",new P6)}generate(){var e=this.generateOrAbort();if(De(e)){this.timestamp=0;var n=this.generateOrAbort();if(De(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return E6.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}};var pP,MO=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};H&&!De(H.crypto)&&crypto.getRandomValues&&(MO=t=>crypto.getRandomValues(t));let P6=class{constructor(){we(this,"buffer",new Uint32Array(8)),we(this,"cursor",1/0)}nextUint32(){return this.cursor>=this.buffer.length&&(MO(this.buffer),this.cursor=0),this.buffer[this.cursor++]}};var Pa=()=>T6().toString(),T6=()=>(pP||(pP=new A6)).generate(),N6="Thu, 01 Jan 1970 00:00:00 GMT",Qd="",R6=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function M6(t,e){if(e){var n=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ee;if(Qd)return Qd;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Pa(),u=new RegExp("(^|;)\\s*"+l+"=1");!Qd&&a--;){var c=o.slice(a).join("."),d=l+"=1;domain=."+c;s.cookie=d,u.test(s.cookie)&&(s.cookie=d+";expires="+N6,Qd=c)}return Qd}(t);if(!n){var i=(r=>{var s=r.match(R6);return s?s[0]:""})(t);i!==n&&J.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var Io={is_supported:()=>!!Ee,error:function(t){J.error("cookieStore error: "+t)},get:function(t){if(Ee){try{for(var e=t+"=",n=Ee.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},parse:function(t){var e;try{e=JSON.parse(Io.get(t))||{}}catch{}return e},set:function(t,e,n,i,r){if(Ee)try{var s="",o="",a=M6(Ee.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var u=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return u.length>3686.4&&J.warn("cookieStore warning: large cookie, len="+u.length),Ee.cookie=u,u}catch{return}},remove:function(t,e){try{Io.set(t,"",-1,e)}catch{return}}},Bw=null,mn={is_supported:function(){if(!xl(Bw))return Bw;var t=!0;if(De(H))t=!1;else try{var e="__mplssupport__";mn.set(e,"xyz"),mn.get(e)!=='"xyz"'&&(t=!1),mn.remove(e)}catch{t=!1}return t||J.error("localStorage unsupported; falling back to cookie store"),Bw=t,t},error:function(t){J.error("localStorage error: "+t)},get:function(t){try{return H==null?void 0:H.localStorage.getItem(t)}catch(e){mn.error(e)}return null},parse:function(t){try{return JSON.parse(mn.get(t))||{}}catch{}return null},set:function(t,e){try{H==null||H.localStorage.setItem(t,JSON.stringify(e))}catch(n){mn.error(n)}},remove:function(t){try{H==null||H.localStorage.removeItem(t)}catch(e){mn.error(e)}}},O6=["distinct_id",Ev,Th,Pv,J1],xm=le(le({},mn),{},{parse:function(t){try{var e={};try{e=Io.parse(t)||{}}catch{}var n=fi(e,JSON.parse(mn.get(t)||"{}"));return mn.set(t,n),n}catch{}return null},set:function(t,e,n,i,r,s){try{mn.set(t,e,void 0,void 0,s);var o={};O6.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&Io.set(t,o,n,i,r,s)}catch(a){mn.error(a)}},remove:function(t,e){try{H==null||H.localStorage.removeItem(t),Io.remove(t,e)}catch(n){mn.error(n)}}}),Sm={},I6={is_supported:function(){return!0},error:function(t){J.error("memoryStorage error: "+t)},get:function(t){return Sm[t]||null},parse:function(t){return Sm[t]||null},set:function(t,e){Sm[t]=e},remove:function(t){delete Sm[t]}},jl=null,Ln={is_supported:function(){if(!xl(jl))return jl;if(jl=!0,De(H))jl=!1;else try{var t="__support__";Ln.set(t,"xyz"),Ln.get(t)!=='"xyz"'&&(jl=!1),Ln.remove(t)}catch{jl=!1}return jl},error:function(t){J.error("sessionStorage error: ",t)},get:function(t){try{return H==null?void 0:H.sessionStorage.getItem(t)}catch(e){Ln.error(e)}return null},parse:function(t){try{return JSON.parse(Ln.get(t))||null}catch{}return null},set:function(t,e){try{H==null||H.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Ln.error(n)}},remove:function(t){try{H==null||H.sessionStorage.removeItem(t)}catch(e){Ln.error(e)}}},D6=["localhost","127.0.0.1"],Lc=t=>{var e=Ee==null?void 0:Ee.createElement("a");return De(e)?null:(e.href=t,e)},cd=function(t,e){return!!function(n){try{new RegExp(n)}catch{return!1}return!0}(e)&&new RegExp(e).test(t)},L6=function(t){var e,n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",r=[];return Ct(t,function(s,o){De(s)||De(o)||o==="undefined"||(e=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),n=encodeURIComponent(o),r[r.length]=n+"="+e)}),r.join(i)},Tv=function(t,e){for(var n,i=((t.split("#")[0]||"").split("?")[1]||"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!Qt(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{J.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Nv=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},Or="Mobile",Rv="iOS",Vs="Android",xf="Tablet",OO=Vs+" "+xf,IO="iPad",DO="Apple",LO=DO+" Watch",Sf="Safari",dd="BlackBerry",jO="Samsung",FO=jO+"Browser",$O=jO+" Internet",Ua="Chrome",j6=Ua+" OS",BO=Ua+" "+Rv,wk="Internet Explorer",zO=wk+" "+Or,bk="Opera",F6=bk+" Mini",xk="Edge",UO="Microsoft "+xk,jc="Firefox",HO=jc+" "+Rv,_f="Nintendo",kf="PlayStation",Fc="Xbox",VO=Vs+" "+Or,WO=Or+" "+Sf,Nh="Windows",ex=Nh+" Phone",mP="Nokia",tx="Ouya",GO="Generic",$6=GO+" "+Or.toLowerCase(),KO=GO+" "+xf.toLowerCase(),nx="Konqueror",li="(\\d+(\\.\\d+)?)",zw=new RegExp("Version/"+li),B6=new RegExp(Fc,"i"),z6=new RegExp(kf+" \\w+","i"),U6=new RegExp(_f+" \\w+","i"),Sk=new RegExp(dd+"|PlayBook|BB10","i"),H6={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},V6=(t,e)=>e&&it(e,DO)||function(n){return it(n,Sf)&&!it(n,Ua)&&!it(n,Vs)}(t),gP=function(t,e){return e=e||"",it(t," OPR/")&&it(t,"Mini")?F6:it(t," OPR/")?bk:Sk.test(t)?dd:it(t,"IE"+Or)||it(t,"WPDesktop")?zO:it(t,FO)?$O:it(t,xk)||it(t,"Edg/")?UO:it(t,"FBIOS")?"Facebook "+Or:it(t,"UCWEB")||it(t,"UCBrowser")?"UC Browser":it(t,"CriOS")?BO:it(t,"CrMo")?Ua:it(t,Vs)&&it(t,Sf)?VO:it(t,Ua)?Ua:it(t,"FxiOS")?HO:it(t.toLowerCase(),nx.toLowerCase())?nx:V6(t,e)?it(t,Or)?WO:Sf:it(t,jc)?jc:it(t,"MSIE")||it(t,"Trident/")?wk:it(t,"Gecko")?jc:""},W6={[zO]:[new RegExp("rv:"+li)],[UO]:[new RegExp(xk+"?\\/"+li)],[Ua]:[new RegExp("("+Ua+"|CrMo)\\/"+li)],[BO]:[new RegExp("CriOS\\/"+li)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+li)],[Sf]:[zw],[WO]:[zw],[bk]:[new RegExp("(Opera|OPR)\\/"+li)],[jc]:[new RegExp(jc+"\\/"+li)],[HO]:[new RegExp("FxiOS\\/"+li)],[nx]:[new RegExp("Konqueror[:/]?"+li,"i")],[dd]:[new RegExp(dd+" "+li),zw],[VO]:[new RegExp("android\\s"+li,"i")],[$O]:[new RegExp(FO+"\\/"+li)],[wk]:[new RegExp("(rv:|MSIE )"+li)],Mozilla:[new RegExp("rv:"+li)]},vP=[[new RegExp(Fc+"; "+Fc+" (.*?)[);]","i"),t=>[Fc,t&&t[1]||""]],[new RegExp(_f,"i"),[_f,""]],[new RegExp(kf,"i"),[kf,""]],[Sk,[dd,""]],[new RegExp(Nh,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[ex,""];if(new RegExp(Or).test(e)&&!/IEMobile\b/.test(e))return[Nh+" "+Or,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=H6[i]||"";return/arm/i.test(e)&&(r="RT"),[Nh,r]}return[Nh,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[Rv,e.join(".")]}return[Rv,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=De(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Vs+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Vs+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Vs,e.join(".")]}return[Vs,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[j6,""]],[/Linux|debian/i,["Linux",""]]],yP=function(t){return U6.test(t)?_f:z6.test(t)?kf:B6.test(t)?Fc:new RegExp(tx,"i").test(t)?tx:new RegExp("("+ex+"|WPDesktop)","i").test(t)?ex:/iPad/.test(t)?IO:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?LO:Sk.test(t)?dd:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(mP,"i").test(t)?mP:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Or).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Vs:OO:Vs:new RegExp("(pda|"+Or+")","i").test(t)?$6:new RegExp(xf,"i").test(t)&&!new RegExp(xf+" pc","i").test(t)?KO:""},_m="https?://(.*)",G6=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"],sn={campaignParams:function(t){return Ee?this._campaignParamsFromUrl(Ee.URL,t):{}},_campaignParamsFromUrl:function(t,e){var n=G6.concat(e||[]),i={};return Ct(n,function(r){var s=Tv(t,r);i[r]=s||null}),i},_searchEngine:function(t){return t?t.search(_m+"google.([^/?]*)")===0?"google":t.search(_m+"bing.com")===0?"bing":t.search(_m+"yahoo.com")===0?"yahoo":t.search(_m+"duckduckgo.com")===0?"duckduckgo":null:null},_searchInfoFromReferrer:function(t){var e=sn._searchEngine(t),n=e!="yahoo"?"q":"p",i={};if(!xl(e)){i.$search_engine=e;var r=Ee?Tv(Ee.referrer,n):"";r.length&&(i.ph_keyword=r)}return i},searchInfo:function(){var t=Ee==null?void 0:Ee.referrer;return t?this._searchInfoFromReferrer(t):{}},browser:gP,browserVersion:function(t,e){var n=gP(t,e),i=W6[n];if(De(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(t){for(var e=0;e<vP.length;e++){var[n,i]=vP[e],r=n.exec(t),s=r&&(Tr(i)?i(r,t):i);if(s)return s}return["",""]},device:yP,deviceType:function(t){var e=yP(t);return e===IO||e===OO||e==="Kobo"||e==="Kindle Fire"||e===KO?xf:e===_f||e===Fc||e===kf||e===tx?"Console":e===LO?"Wearable":e?Or:"Desktop"},referrer:function(){return(Ee==null?void 0:Ee.referrer)||"$direct"},referringDomain:function(){var t;return Ee!=null&&Ee.referrer&&((t=Lc(Ee.referrer))===null||t===void 0?void 0:t.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer().substring(0,1e3),u:Ni==null?void 0:Ni.href.substring(0,1e3)}},initialPersonPropsFromInfo:function(t){var e,{r:n,u:i}=t,r={$initial_referrer:n,$initial_referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=Lc(n))===null||e===void 0?void 0:e.host};if(i){r.$initial_current_url=i;var s=Lc(i);r.$initial_host=s==null?void 0:s.host,r.$initial_pathname=s==null?void 0:s.pathname,Ct(this._campaignParamsFromUrl(i),function(o,a){r["$initial_"+H1(a)]=o})}return n&&Ct(this._searchInfoFromReferrer(n),function(o,a){r["$initial_"+H1(a)]=o}),r},timezone:function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}},properties:function(){if(!Pn)return{};var[t,e]=sn.os(Pn);return fi(Cv({$os:t,$os_version:e,$browser:sn.browser(Pn,navigator.vendor),$device:sn.device(Pn),$device_type:sn.deviceType(Pn),$timezone:sn.timezone()}),{$current_url:Ni==null?void 0:Ni.href,$host:Ni==null?void 0:Ni.host,$pathname:Ni==null?void 0:Ni.pathname,$raw_user_agent:Pn.length>1e3?Pn.substring(0,997)+"...":Pn,$browser_version:sn.browserVersion(Pn,navigator.vendor),$browser_language:sn.browserLanguage(),$screen_height:H==null?void 0:H.screen.height,$screen_width:H==null?void 0:H.screen.width,$viewport_height:H==null?void 0:H.innerHeight,$viewport_width:H==null?void 0:H.innerWidth,$lib:"web",$lib_version:ua.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})},people_properties:function(){if(!Pn)return{};var[t,e]=sn.os(Pn);return fi(Cv({$os:t,$os_version:e,$browser:sn.browser(Pn,navigator.vendor)}),{$browser_version:sn.browserVersion(Pn,navigator.vendor)})}},K6=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];let Uw=class{constructor(e){this.config=e,this.props={},this.campaign_params_saved=!1,this.name=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.storage=this.buildStorage(e),this.load(),e.debug&&J.info("Persistence loaded",e.persistence,le({},this.props)),this.update_config(e,e),this.save()}buildStorage(e){K6.indexOf(e.persistence.toLowerCase())===-1&&(J.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&mn.is_supported()?mn:n==="localstorage+cookie"&&xm.is_supported()?xm:n==="sessionstorage"&&Ln.is_supported()?Ln:n==="memory"?I6:n==="cookie"?Io:xm.is_supported()?xm:Io}properties(){var e={};return Ct(this.props,function(n,i){if(i===pc&&un(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/".concat(r[s])]=n[r[s]];else a=i,l=!1,(xl(o=k6)?l:qA&&o.indexOf===qA?o.indexOf(a)!=-1:(Ct(o,function(u){if(l||(l=u===a))return kv}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=fi({},e))}}save(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}remove(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(un(e)){De(n)&&(n="None"),this.expire_days=De(i)?this.default_expiry:i;var r=!1;if(Ct(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(un(e)){this.expire_days=De(n)?this.default_expiry:n;var i=!1;if(Ct(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.campaign_params_saved){var e=sn.campaignParams(this.config.custom_campaign_params);fc(Cv(e))||this.register(e),this.campaign_params_saved=!0}}update_search_keyword(){this.register(sn.searchInfo())}update_referrer_info(){this.register_once(sn.referrerInfo(),void 0)}set_initial_person_info(){this.props[Y1]||this.props[Z1]||this.register_once({[J1]:sn.initialPersonInfo()},void 0)}get_referrer_info(){return Cv({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}get_initial_props(){var e={};Ct([Z1,Y1],r=>{var s=this.props[r];s&&Ct(s,function(o,a){e["$initial_"+H1(a)]=o})});var n=this.props[J1];if(n){var i=sn.initialPersonPropsFromInfo(n);fi(e,i)}return e}safe_merge(e){return Ct(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.buildStorage(e),r=this.props;this.clear(),this.storage=i,this.props=r,this.save()}}set_disabled(e){this.disabled=e,this.disabled?this.remove():this.save()}set_cross_subdomain(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}get_cross_subdomain(){return!!this.cross_subdomain}set_secure(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[Ph]||{};i[e]=n,this.props[Ph]=i,this.save()}remove_event_timer(e){var n=(this.props[Ph]||{})[e];return De(n)||(delete this.props[Ph][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}};function Mv(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(un(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))===null||e===void 0?void 0:e.length)||0}function ix(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66060288e-1;if(t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[ix({size:Mv(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),ix({size:Mv(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var fo=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(fo||{}),Yr=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Yr||{});function wP(t){var e;return t.id===RO||!((e=t.closest)===null||e===void 0||!e.call(t,".toolbar-global-fade-container"))}function fy(t){return!!t&&t.nodeType===1}function Ha(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function XO(t){return!!t&&t.nodeType===3}function qO(t){return!!t&&t.nodeType===11}function _k(t){return t?dy(t).split(/\s+/):[]}function bP(t){var e=H==null?void 0:H.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function Ov(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return _k(e)}function YO(t){return Nt(t)?null:dy(t).split(/(\s+)/).filter(e=>hd(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function py(t){var e="";return sx(t)&&!QO(t)&&t.childNodes&&t.childNodes.length&&Ct(t.childNodes,function(n){var i;XO(n)&&n.textContent&&(e+=(i=YO(n.textContent))!==null&&i!==void 0?i:"")}),dy(e)}function ZO(t){return De(t.target)?t.srcElement||null:(e=t.target)!==null&&e!==void 0&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var rx=["a","button","form","input","select","textarea","label"];function JO(t){var e=t.parentNode;return!(!e||!fy(e))&&e}function X6(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(!H||!t||Ha(t,"html")||!fy(t)||n!=null&&n.url_allowlist&&!bP(n.url_allowlist)||n!=null&&n.url_ignorelist&&bP(n.url_ignorelist))return!1;if(n!=null&&n.dom_event_allowlist){var s=n.dom_event_allowlist;if(s&&!s.some(f=>e.type===f))return!1}for(var o=!1,a=[t],l=!0,u=t;u.parentNode&&!Ha(u,"body");)if(qO(u.parentNode))a.push(u.parentNode.host),u=u.parentNode.host;else{if(!(l=JO(u)))break;if(i||rx.indexOf(l.tagName.toLowerCase())>-1)o=!0;else{var c=H.getComputedStyle(l);c&&c.getPropertyValue("cursor")==="pointer"&&(o=!0)}a.push(l),u=l}if(!function(f,p){var g=p==null?void 0:p.element_allowlist;if(De(g))return!0;var b=function(w){if(g.some(x=>w.tagName.toLowerCase()===x))return{v:!0}};for(var v of f){var y=b(v);if(typeof y=="object")return y.v}return!1}(a,n)||!function(f,p){var g=p==null?void 0:p.css_selector_allowlist;if(De(g))return!0;var b=function(w){if(g.some(x=>w.matches(x)))return{v:!0}};for(var v of f){var y=b(v);if(typeof y=="object")return y.v}return!1}(a,n))return!1;var d=H.getComputedStyle(t);if(d&&d.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var h=t.tagName.toLowerCase();switch(h){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return o?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(rx.indexOf(h)>-1||t.getAttribute("contenteditable")==="true")}}function sx(t){for(var e=t;e.parentNode&&!Ha(e,"body");e=e.parentNode){var n=Ov(e);if(it(n,"ph-sensitive")||it(n,"ph-no-capture"))return!1}if(it(Ov(t),"ph-include"))return!0;var i=t.type||"";if(Qn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(Qn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function QO(t){return!!(Ha(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||Ha(t,"select")||Ha(t,"textarea")||t.getAttribute("contenteditable")==="true")}var eI="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",q6=new RegExp("^(?:".concat(eI,")$")),Y6=new RegExp(eI),tI="\\d{3}-?\\d{2}-?\\d{4}",Z6=new RegExp("^(".concat(tI,")$")),J6=new RegExp("(".concat(tI,")"));function hd(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return!(Nt(t)||Qn(t)&&(t=dy(t),(e?q6:Y6).test((t||"").replace(/[- ]/g,""))||(e?Z6:J6).test(t)))}function nI(t){var e=py(t);return hd(e="".concat(e," ").concat(iI(t)).trim())?e:""}function iI(t){var e="";return t&&t.childNodes&&t.childNodes.length&&Ct(t.childNodes,function(n){var i;if(n&&((i=n.tagName)===null||i===void 0?void 0:i.toLowerCase())==="span")try{var r=py(n);e="".concat(e," ").concat(r).trim(),n.childNodes&&n.childNodes.length&&(e="".concat(e," ").concat(iI(n)).trim())}catch(s){J.error(s)}}),e}function Q6(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+=".".concat(a.replace(/"/g,""));var l=le(le(le(le({},i.text?{text:i.text}:{}),{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{}),i.attr_id?{attr_id:i.attr_id}:{}),i.attributes),u={};return Ug(l).sort((c,d)=>{var[h]=c,[f]=d;return h.localeCompare(f)}).forEach(c=>{var[d,h]=c;return u[xP(d.toString())]=xP(h.toString())}),o+=":",o+=Ug(l).map(c=>{var[d,h]=c;return"".concat(d,'="').concat(h,'"')}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)===null||i===void 0?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)===null||r===void 0?void 0:r.slice(0,2048),attr_class:eU(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Ug(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function xP(t){return t.replace(/"|\\"/g,'\\"')}function eU(t){var e=t.attr__class;return e?Qt(e)?e:_k(e):void 0}var ox="[SessionRecording]",ax="redacted",km={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io"]},tU=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],nU=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],iU=["/s/","/e/","/i/"];function SP(t,e,n,i){if(Nt(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return Qn(r)&&(r=parseInt(r)),r>n?ox+" ".concat(i," body too large to record (").concat(r," bytes)"):t}function _P(t,e){if(Nt(t))return t;var n=t;return hd(n,!1)||(n=ox+" "+e+" body "+ax),Ct(nU,i=>{var r,s;(r=n)!==null&&r!==void 0&&r.length&&((s=n)===null||s===void 0?void 0:s.indexOf(i))!==-1&&(n=ox+" "+e+" body "+ax+" as might contain: "+i)}),n}var rU=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:km.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...km.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...km.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,u=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),h=>(h!=null&&h.requestBody&&(h.requestBody=SP(h.requestBody,h.requestHeaders,r,"Request")),h!=null&&h.responseBody&&(h.responseBody=SP(h.responseBody,h.responseHeaders,r,"Response")),h)),c=h=>{return u(((g,b)=>{var v,y=Lc(g.name),w=b.indexOf("http")===0?(v=Lc(b))===null||v===void 0?void 0:v.pathname:b;w==="/"&&(w="");var x=y==null?void 0:y.pathname.replace(w||"","");if(!(y&&x&&iU.some(k=>x.indexOf(k)===0)))return g})((p=(f=h).requestHeaders,Nt(p)||Ct(Object.keys(p??{}),g=>{tU.includes(g.toLowerCase())&&(p[g]=ax)}),f),t.api_host));var f,p},d=Tr(t.session_recording.maskNetworkRequestFn);return d&&Tr(t.session_recording.maskCapturedNetworkRequestFn)&&J.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=h=>{var f=t.session_recording.maskNetworkRequestFn({url:h.name});return le(le({},h),{},{name:f==null?void 0:f.url})}),s.maskRequestFn=Tr(t.session_recording.maskCapturedNetworkRequestFn)?h=>{var f,p,g,b=c(h);return b&&(f=(p=(g=t.session_recording).maskCapturedNetworkRequestFn)===null||p===void 0?void 0:p.call(g,b))!==null&&f!==void 0?f:void 0}:h=>function(f){if(!De(f))return f.requestBody=_P(f.requestBody,"Request"),f.responseBody=_P(f.responseBody,"Response"),f}(c(h)),le(le(le({},km),s),{},{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};function Ro(t,e,n,i){return e>n&&(J.warn("min cannot be greater than max."),e=n),er(t)?t>n?(i&&J.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&J.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&J.warn(i+" must be a number. Defaulting to max value:"+n),n)}class sU{constructor(e){var n,i,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};we(this,"bucketSize",100),we(this,"refillRate",10),we(this,"mutationBuckets",{}),we(this,"loggedTracker",{}),we(this,"refillBuckets",()=>{Object.keys(this.mutationBuckets).forEach(s=>{this.mutationBuckets[s]=this.mutationBuckets[s]+this.refillRate,this.mutationBuckets[s]>=this.bucketSize&&delete this.mutationBuckets[s]})}),we(this,"getNodeOrRelevantParent",s=>{var o=this.rrweb.mirror.getNode(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this.rrweb.mirror.getId(a),a]}return[s,o]}),we(this,"numberOfChanges",s=>{var o,a,l,u,c,d,h,f;return((o=(a=s.removes)===null||a===void 0?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(u=s.attributes)===null||u===void 0?void 0:u.length)!==null&&l!==void 0?l:0)+((c=(d=s.texts)===null||d===void 0?void 0:d.length)!==null&&c!==void 0?c:0)+((h=(f=s.adds)===null||f===void 0?void 0:f.length)!==null&&h!==void 0?h:0)}),we(this,"throttleMutations",s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.numberOfChanges(o);o.attributes&&(o.attributes=o.attributes.filter(u=>{var c,d,h,[f,p]=this.getNodeOrRelevantParent(u.id);return this.mutationBuckets[f]===0?!1:(this.mutationBuckets[f]=(c=this.mutationBuckets[f])!==null&&c!==void 0?c:this.bucketSize,this.mutationBuckets[f]=Math.max(this.mutationBuckets[f]-1,0),this.mutationBuckets[f]===0&&(this.loggedTracker[f]||(this.loggedTracker[f]=!0,(d=(h=this.options).onBlockedNode)===null||d===void 0||d.call(h,f,p))),u)}));var l=this.numberOfChanges(o);return l!==0||a===l?s:void 0}),this.rrweb=e,this.options=r,this.refillRate=Ro((n=this.options.refillRate)!==null&&n!==void 0?n:this.refillRate,0,100,"mutation throttling refill rate"),this.bucketSize=Ro((i=this.options.bucketSize)!==null&&i!==void 0?i:this.bucketSize,0,100,"mutation throttling bucket size"),setInterval(()=>{this.refillBuckets()},1e3)}}var Ir=Uint8Array,ji=Uint16Array,fd=Uint32Array,kk=new Ir([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ck=new Ir([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),kP=new Ir([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rI=function(t,e){for(var n=new ji(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new fd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},sI=rI(kk,2),oU=sI[0],lx=sI[1];oU[28]=258,lx[258]=28;for(var CP=rI(Ck,0)[1],oI=new ji(32768),Dt=0;Dt<32768;++Dt){var Fl=(43690&Dt)>>>1|(21845&Dt)<<1;Fl=(61680&(Fl=(52428&Fl)>>>2|(13107&Fl)<<2))>>>4|(3855&Fl)<<4,oI[Dt]=((65280&Fl)>>>8|(255&Fl)<<8)>>>1}var qh=function(t,e,n){for(var i=t.length,r=0,s=new ji(e);r<i;++r)++s[t[r]-1];var o,a=new ji(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new ji(i),r=0;r<i;++r)o[r]=oI[a[t[r]-1]++]>>>15-t[r];return o},xu=new Ir(288);for(Dt=0;Dt<144;++Dt)xu[Dt]=8;for(Dt=144;Dt<256;++Dt)xu[Dt]=9;for(Dt=256;Dt<280;++Dt)xu[Dt]=7;for(Dt=280;Dt<288;++Dt)xu[Dt]=8;var Iv=new Ir(32);for(Dt=0;Dt<32;++Dt)Iv[Dt]=5;var aU=qh(xu,9),lU=qh(Iv,5),aI=function(t){return(t/8>>0)+(7&t&&1)},lI=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof ji?ji:t instanceof fd?fd:Ir)(n-e);return i.set(t.subarray(e,n)),i},lo=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},eh=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},Hw=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Ir(0),0];if(r==1){var o=new Ir(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(k,E){return k.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=r-1;)a=n[n[u].f<n[d].f?u++:d++],l=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var h=s[0].s;for(i=1;i<r;++i)s[i].s>h&&(h=s[i].s);var f=new ji(h+1),p=ux(n[c-1],f,0);if(p>e){i=0;var g=0,b=p-e,v=1<<b;for(s.sort(function(k,E){return f[E.s]-f[k.s]||k.f-E.f});i<r;++i){var y=s[i].s;if(!(f[y]>e))break;g+=v-(1<<p-f[y]),f[y]=e}for(g>>>=b;g>0;){var w=s[i].s;f[w]<e?g-=1<<e-f[w]++-1:++i}for(;i>=0&&g;--i){var x=s[i].s;f[x]==e&&(--f[x],++g)}p=e}return[new Ir(f),p]},ux=function(t,e,n){return t.s==-1?Math.max(ux(t.l,e,n+1),ux(t.r,e,n+1)):e[t.s]=n},EP=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ji(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},th=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},cx=function(t,e,n){var i=n.length,r=aI(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},AP=function(t,e,n,i,r,s,o,a,l,u,c){lo(e,c++,n),++r[256];for(var d=Hw(r,15),h=d[0],f=d[1],p=Hw(s,15),g=p[0],b=p[1],v=EP(h),y=v[0],w=v[1],x=EP(g),k=x[0],E=x[1],C=new ji(19),P=0;P<y.length;++P)C[31&y[P]]++;for(P=0;P<k.length;++P)C[31&k[P]]++;for(var N=Hw(C,7),I=N[0],L=N[1],$=19;$>4&&!I[kP[$-1]];--$);var G,U,X,ee,he=u+5<<3,V=th(r,xu)+th(s,Iv)+o,F=th(r,h)+th(s,g)+o+14+3*$+th(C,I)+(2*C[16]+3*C[17]+7*C[18]);if(he<=V&&he<=F)return cx(e,c,t.subarray(l,l+u));if(lo(e,c,1+(F<V)),c+=2,F<V){G=qh(h,f),U=h,X=qh(g,b),ee=g;var ne=qh(I,L);for(lo(e,c,w-257),lo(e,c+5,E-1),lo(e,c+10,$-4),c+=14,P=0;P<$;++P)lo(e,c+3*P,I[kP[P]]);c+=3*$;for(var ke=[y,k],Z=0;Z<2;++Z){var ue=ke[Z];for(P=0;P<ue.length;++P){var D=31&ue[P];lo(e,c,ne[D]),c+=I[D],D>15&&(lo(e,c,ue[P]>>>5&127),c+=ue[P]>>>12)}}}else G=aU,U=xu,X=lU,ee=Iv;for(P=0;P<a;++P)if(i[P]>255){D=i[P]>>>18&31,eh(e,c,G[D+257]),c+=U[D+257],D>7&&(lo(e,c,i[P]>>>23&31),c+=kk[D]);var O=31&i[P];eh(e,c,X[O]),c+=ee[O],O>3&&(eh(e,c,i[P]>>>5&8191),c+=Ck[O])}else eh(e,c,G[i[P]]),c+=U[i[P]];return eh(e,c,G[256]),c+U[256]},uU=new fd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),cU=function(){for(var t=new fd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),dU=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=cU[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},hU=function(t,e,n,i,r){return function(s,o,a,l,u,c){var d=s.length,h=new Ir(l+d+5*(1+Math.floor(d/7e3))+u),f=h.subarray(l,h.length-u),p=0;if(!o||d<8)for(var g=0;g<=d;g+=65535){var b=g+65535;b<d?p=cx(f,p,s.subarray(g,b)):(f[g]=c,p=cx(f,p,s.subarray(g,d)))}else{for(var v=uU[o-1],y=v>>>13,w=8191&v,x=(1<<a)-1,k=new ji(32768),E=new ji(x+1),C=Math.ceil(a/3),P=2*C,N=function(Be){return(s[Be]^s[Be+1]<<C^s[Be+2]<<P)&x},I=new fd(25e3),L=new ji(288),$=new ji(32),G=0,U=0,X=(g=0,0),ee=0,he=0;g<d;++g){var V=N(g),F=32767&g,ne=E[V];if(k[F]=ne,E[V]=F,ee<=g){var ke=d-g;if((G>7e3||X>24576)&&ke>423){p=AP(s,f,0,I,L,$,U,X,he,g-he,p),X=G=U=0,he=g;for(var Z=0;Z<286;++Z)L[Z]=0;for(Z=0;Z<30;++Z)$[Z]=0}var ue=2,D=0,O=w,B=F-ne&32767;if(ke>2&&V==N(g-B))for(var _=Math.min(y,ke)-1,T=Math.min(32767,g),M=Math.min(258,ke);B<=T&&--O&&F!=ne;){if(s[g+ue]==s[g+ue-B]){for(var R=0;R<M&&s[g+R]==s[g+R-B];++R);if(R>ue){if(ue=R,D=B,R>_)break;var K=Math.min(B,R-2),W=0;for(Z=0;Z<K;++Z){var te=g-B+Z+32768&32767,Y=te-k[te]+32768&32767;Y>W&&(W=Y,ne=te)}}}B+=(F=ne)-(ne=k[F])+32768&32767}if(D){I[X++]=268435456|lx[ue]<<18|CP[D];var Ne=31&lx[ue],Fe=31&CP[D];U+=kk[Ne]+Ck[Fe],++L[257+Ne],++$[Fe],ee=g+ue,++G}else I[X++]=s[g],++L[s[g]]}}p=AP(s,f,c,I,L,$,U,X,he,g-he,p)}return lI(h,0,l+aI(p)+u)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!r)},dx=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},fU=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&dx(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},pU=function(t){return 10+(t.filename&&t.filename.length+1||0)};function uI(t,e){e===void 0&&(e={});var n=dU(),i=t.length;n.p(t);var r=hU(t,e,pU(e),8),s=r.length;return fU(r,e),dx(r,s-8,n.d()),dx(r,s-4,i),r}function cI(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Ir(t.length+(t.length>>>1)),r=0,s=function(u){i[r++]=u},o=0;o<n;++o){if(r+5>i.length){var a=new Ir(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return lI(i,0,r)}var mU=3e5,gU=[Yr.MouseMove,Yr.MouseInteraction,Yr.Scroll,Yr.ViewportResize,Yr.Input,Yr.TouchMove,Yr.MediaInteraction,Yr.Drag],PP=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1}),On="[SessionRecording]";function $l(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];s<128||n?i+=String.fromCharCode(s):s<224?i+=String.fromCharCode((31&s)<<6|63&e[r++]):s<240?i+=String.fromCharCode((15&s)<<12|(63&e[r++])<<6|63&e[r++]):(s=((15&s)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,i+=String.fromCharCode(55296|s>>10,56320|1023&s))}return i}(uI(cI(JSON.stringify(t))),!0)}function TP(t){return t.type===fo.Custom&&t.data.tag==="sessionIdle"}function NP(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class vU{get sessionIdleThresholdMilliseconds(){return this.instance.config.session_recording.session_idle_threshold_ms||3e5}get rrwebRecord(){var e,n;return Xe==null||(e=Xe.__PosthogExtensions__)===null||e===void 0||(n=e.rrweb)===null||n===void 0?void 0:n.record}get started(){return this._captureStarted}get sessionManager(){if(!this.instance.sessionManager)throw new Error(On+" must be started with a valid sessionManager.");return this.instance.sessionManager}get fullSnapshotIntervalMillis(){var e,n;return this.triggerStatus==="trigger_pending"?6e4:(e=(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:mU}get isSampled(){var e=this.instance.get_property(Th);return ou(e)?e:null}get sessionDuration(){var e,n,i=(e=this.buffer)===null||e===void 0?void 0:e.data[((n=this.buffer)===null||n===void 0?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get isRecordingEnabled(){var e=!!this.instance.get_property(W1),n=!this.instance.config.disable_session_recording;return H&&e&&n}get isConsoleLogCaptureEnabled(){var e=!!this.instance.get_property(oP),n=this.instance.config.enable_recording_console_log;return n??e}get canvasRecording(){var e,n,i,r,s,o,a=this.instance.config.session_recording.captureCanvas,l=this.instance.get_property(lP),u=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,c=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:0,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:0;return{enabled:u,fps:Ro(c,0,12,"canvas recording fps"),quality:Ro(d,0,1,"canvas recording quality")}}get networkPayloadCapture(){var e,n,i=this.instance.get_property(aP),r={recordHeaders:(e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recordHeaders,recordBody:(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=un(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,l=!!(ou(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get sampleRate(){var e=this.instance.get_property(uP);return er(e)?e:null}get minimumDuration(){var e=this.instance.get_property(cP);return er(e)?e:null}get status(){return this.receivedDecide?this.isRecordingEnabled?Nt(this._linkedFlag)||this._linkedFlagSeen?this.triggerStatus==="trigger_pending"?"buffering":this._urlBlocked?"paused":ou(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}get urlTriggerStatus(){var e;return this._urlTriggers.length===0?"trigger_disabled":((e=this.instance)===null||e===void 0?void 0:e.get_property(jw))===this.sessionId?"trigger_activated":"trigger_pending"}get eventTriggerStatus(){var e;return this._eventTriggers.length===0?"trigger_disabled":((e=this.instance)===null||e===void 0?void 0:e.get_property(Fw))===this.sessionId?"trigger_activated":"trigger_pending"}get triggerStatus(){var e=this.eventTriggerStatus==="trigger_activated"||this.urlTriggerStatus==="trigger_activated",n=this.eventTriggerStatus==="trigger_pending"||this.urlTriggerStatus==="trigger_pending";return e?"trigger_activated":n?"trigger_pending":"trigger_disabled"}constructor(e){if(we(this,"queuedRRWebEvents",[]),we(this,"isIdle",!1),we(this,"_linkedFlagSeen",!1),we(this,"_lastActivityTimestamp",Date.now()),we(this,"_linkedFlag",null),we(this,"_removePageViewCaptureHook",void 0),we(this,"_onSessionIdListener",void 0),we(this,"_persistDecideOnSessionListener",void 0),we(this,"_samplingSessionListener",void 0),we(this,"_urlTriggers",[]),we(this,"_urlBlocklist",[]),we(this,"_urlBlocked",!1),we(this,"_eventTriggers",[]),we(this,"_removeEventTriggerCaptureHook",void 0),we(this,"_forceAllowLocalhostNetworkCapture",!1),we(this,"_onBeforeUnload",()=>{this._flushBuffer()}),we(this,"_onOffline",()=>{this._tryAddCustomEvent("browser offline",{})}),we(this,"_onOnline",()=>{this._tryAddCustomEvent("browser online",{})}),we(this,"_onVisibilityChange",()=>{if(Ee!=null&&Ee.visibilityState){var r="window "+Ee.visibilityState;this._tryAddCustomEvent(r,{})}}),this.instance=e,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw J.error(On+" started without valid sessionManager"),new Error(On+" started without valid sessionManager. This is a bug.");var{sessionId:n,windowId:i}=this.sessionManager.checkAndGetSessionAndWindowId();this.sessionId=n,this.windowId=i,this.buffer=this.clearBuffer(),this.sessionIdleThresholdMilliseconds>=this.sessionManager.sessionTimeoutMs&&J.warn(On+" session_idle_threshold_ms (".concat(this.sessionIdleThresholdMilliseconds,") is greater than the session timeout (").concat(this.sessionManager.sessionTimeoutMs,"). Session will never be detected as idle"))}startIfEnabledOrStop(e){this.isRecordingEnabled?(this._startCapture(e),H==null||H.addEventListener("beforeunload",this._onBeforeUnload),H==null||H.addEventListener("offline",this._onOffline),H==null||H.addEventListener("online",this._onOnline),H==null||H.addEventListener("visibilitychange",this._onVisibilityChange),this._setupSampling(),this._addEventTriggerListener(),Nt(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this.instance._addCaptureHook(n=>{try{if(n==="$pageview"){var i=H?this._maskUrl(H.location.href):"";if(!i)return;this._tryAddCustomEvent("$pageview",{href:i})}}catch(r){J.error("Could not add $pageview to rrweb session",r)}})),this._onSessionIdListener||(this._onSessionIdListener=this.sessionManager.onSessionId((n,i,r)=>{var s,o,a,l;r&&(this._tryAddCustomEvent("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this.instance)===null||s===void 0||(o=s.persistence)===null||o===void 0||o.unregister(Fw),(a=this.instance)===null||a===void 0||(l=a.persistence)===null||l===void 0||l.unregister(jw))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,H==null||H.removeEventListener("beforeunload",this._onBeforeUnload),H==null||H.removeEventListener("offline",this._onOffline),H==null||H.removeEventListener("online",this._onOnline),H==null||H.removeEventListener("visibilitychange",this._onVisibilityChange),this.clearBuffer(),clearInterval(this._fullSnapshotTimer),(e=this._removePageViewCaptureHook)===null||e===void 0||e.call(this),this._removePageViewCaptureHook=void 0,(n=this._removeEventTriggerCaptureHook)===null||n===void 0||n.call(this),this._removeEventTriggerCaptureHook=void 0,(i=this._onSessionIdListener)===null||i===void 0||i.call(this),this._onSessionIdListener=void 0,(r=this._samplingSessionListener)===null||r===void 0||r.call(this),this._samplingSessionListener=void 0,J.info(On+" stopped"))}makeSamplingDecision(e){var n,i=this.sessionId!==e,r=this.sampleRate;if(er(r)){var s,o=this.isSampled,a=i||!ou(o);a?s=Math.random()<r:s=o,a&&(s?this._reportStarted("sampled"):J.warn(On+" Sample rate (".concat(r,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:r,isSampled:s})),(n=this.instance.persistence)===null||n===void 0||n.register({[Th]:s})}else{var l;(l=this.instance.persistence)===null||l===void 0||l.register({[Th]:null})}}afterDecideResponse(e){var n,i,r,s,o,a;if(this._persistDecideResponse(e),this._linkedFlag=((n=e.sessionRecording)===null||n===void 0?void 0:n.linkedFlag)||null,(i=e.sessionRecording)!==null&&i!==void 0&&i.endpoint&&(this._endpoint=(a=e.sessionRecording)===null||a===void 0?void 0:a.endpoint),this._setupSampling(),!Nt(this._linkedFlag)&&!this._linkedFlagSeen){var l=Qn(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,u=Qn(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((c,d)=>{var h=un(d)&&l in d,f=u?d[l]===u:h;f&&this._reportStarted("linked_flag_matched",{linkedFlag:l,linkedVariant:u}),this._linkedFlagSeen=f})}(r=e.sessionRecording)!==null&&r!==void 0&&r.urlTriggers&&(this._urlTriggers=e.sessionRecording.urlTriggers),(s=e.sessionRecording)!==null&&s!==void 0&&s.urlBlocklist&&(this._urlBlocklist=e.sessionRecording.urlBlocklist),(o=e.sessionRecording)!==null&&o!==void 0&&o.eventTriggers&&(this._eventTriggers=e.sessionRecording.eventTriggers),this.receivedDecide=!0,this.startIfEnabledOrStop()}_setupSampling(){er(this.sampleRate)&&Nt(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId(e=>{this.makeSamplingDecision(e)}))}_persistDecideResponse(e){if(this.instance.persistence){var n,i=this.instance.persistence,r=()=>{var s,o,a,l,u,c,d,h=(s=e.sessionRecording)===null||s===void 0?void 0:s.sampleRate,f=Nt(h)?null:parseFloat(h),p=(o=e.sessionRecording)===null||o===void 0?void 0:o.minimumDurationMilliseconds;i.register({[W1]:!!e.sessionRecording,[oP]:(a=e.sessionRecording)===null||a===void 0?void 0:a.consoleLogRecordingEnabled,[aP]:le({capturePerformance:e.capturePerformance},(l=e.sessionRecording)===null||l===void 0?void 0:l.networkPayloadCapture),[lP]:{enabled:(u=e.sessionRecording)===null||u===void 0?void 0:u.recordCanvas,fps:(c=e.sessionRecording)===null||c===void 0?void 0:c.canvasFps,quality:(d=e.sessionRecording)===null||d===void 0?void 0:d.canvasQuality},[uP]:f,[cP]:De(p)?null:p})};r(),(n=this._persistDecideOnSessionListener)===null||n===void 0||n.call(this),this._persistDecideOnSessionListener=this.sessionManager.onSessionId(r)}}log(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log";(n=this.instance.sessionRecording)===null||n===void 0||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:i,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}_startCapture(e){if(!De(Object.assign)&&!De(Array.from)&&!(this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut())){var n,i;this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():(n=Xe.__PosthogExtensions__)===null||n===void 0||(i=n.loadExternalDependency)===null||i===void 0||i.call(n,this.instance,"recorder",r=>{if(r)return J.error(On+" could not load recorder",r);this._onScriptLoaded()}),J.info(On+" starting"),this.status==="active"&&this._reportStarted(e||"recording_initialized")}}isInteractiveEvent(e){var n;return e.type===3&&gU.indexOf((n=e.data)===null||n===void 0?void 0:n.source)!==-1}_updateWindowAndSessionIds(e){var n=this.isInteractiveEvent(e);n||this.isIdle||e.timestamp-this._lastActivityTimestamp>this.sessionIdleThresholdMilliseconds&&(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this.sessionIdleThresholdMilliseconds,bufferLength:this.buffer.data.length,bufferSize:this.buffer.size}),this._flushBuffer());var i=!1;if(n&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)),!this.isIdle){var{windowId:r,sessionId:s}=this.sessionManager.checkAndGetSessionAndWindowId(!n,e.timestamp),o=this.sessionId!==s,a=this.windowId!==r;this.windowId=r,this.sessionId=s,o||a?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this._scheduleFullSnapshot()}}_tryRRWebMethod(e){try{return e.rrwebMethod(),!0}catch(n){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):J.warn(On+" could not emit queued rrweb event.",n,e),!1}}_tryAddCustomEvent(e,n){return this._tryRRWebMethod(PP(()=>this.rrwebRecord.addCustomEvent(e,n)))}_tryTakeFullSnapshot(){return this._tryRRWebMethod(PP(()=>this.rrwebRecord.takeFullSnapshot()))}_onScriptLoaded(){var e,n={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},i=this.instance.config.session_recording;for(var[r,s]of Object.entries(i||{}))r in n&&(r==="maskInputOptions"?n.maskInputOptions=le({password:!0},s):n[r]=s);if(this.canvasRecording&&this.canvasRecording.enabled&&(n.recordCanvas=!0,n.sampling={canvas:this.canvasRecording.fps},n.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=(e=this.mutationRateLimiter)!==null&&e!==void 0?e:new sU(this.rrwebRecord,{refillRate:this.instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this.instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(a,l)=>{var u="Too many mutations on node '".concat(a,"'. Rate limiting. This could be due to SVG animations or something similar");J.info(u,{node:l}),this.log(On+" "+u,"warn")}});var o=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(le({emit:a=>{this.onRRwebEmit(a)},plugins:o},n)),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:n,activePlugins:o.map(a=>a==null?void 0:a.name)}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else J.error(On+"onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}_scheduleFullSnapshot(){if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!this.isIdle){var e=this.fullSnapshotIntervalMillis;e&&(this._fullSnapshotTimer=setInterval(()=>{this._tryTakeFullSnapshot()},e))}}_gatherRRWebPlugins(){var e,n,i,r,s=[],o=(e=Xe.__PosthogExtensions__)===null||e===void 0||(n=e.rrwebPlugins)===null||n===void 0?void 0:n.getRecordConsolePlugin;o&&this.isConsoleLogCaptureEnabled&&s.push(o());var a=(i=Xe.__PosthogExtensions__)===null||i===void 0||(r=i.rrwebPlugins)===null||r===void 0?void 0:r.getRecordNetworkPlugin;return this.networkPayloadCapture&&Tr(a)&&(!D6.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?s.push(a(rU(this.instance.config,this.networkPayloadCapture))):J.info(On+" NetworkCapture not started because we are on localhost.")),s}onRRwebEmit(e){var n;if(this._processQueuedEvents(),e&&un(e)){if(e.type===fo.Meta){var i=this._maskUrl(e.data.href);if(this._lastHref=i,!i)return;e.data.href=i}else this._pageViewFallBack();if(this._checkUrlTriggerConditions(),this.status!=="paused"||function(d){return d.type===fo.Custom&&d.data.tag==="recording paused"}(e)){e.type===fo.FullSnapshot&&this._scheduleFullSnapshot(),e.type===fo.FullSnapshot&&this.triggerStatus==="trigger_pending"&&this.clearBuffer();var r=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(r){var s=function(d){var h=d;if(h&&un(h)&&h.type===6&&un(h.data)&&h.data.plugin==="rrweb/console@1"){h.data.payload.payload.length>10&&(h.data.payload.payload=h.data.payload.payload.slice(0,10),h.data.payload.payload.push("...[truncated]"));for(var f=[],p=0;p<h.data.payload.payload.length;p++)h.data.payload.payload[p]&&h.data.payload.payload[p].length>2e3?f.push(h.data.payload.payload[p].slice(0,2e3)+"...[truncated]"):f.push(h.data.payload.payload[p]);return h.data.payload.payload=f,d}return d}(r);if(this._updateWindowAndSessionIds(s),!this.isIdle||TP(s)){if(TP(s)){var o=s.data.payload;if(o){var a=o.lastActivityTimestamp,l=o.threshold;s.timestamp=a+l}}var u=(n=this.instance.config.session_recording.compress_events)===null||n===void 0||n?function(d){if(Mv(d)<1024)return d;try{if(d.type===fo.FullSnapshot)return le(le({},d),{},{data:$l(d.data),cv:"2024-10"});if(d.type===fo.IncrementalSnapshot&&d.data.source===Yr.Mutation)return le(le({},d),{},{cv:"2024-10",data:le(le({},d.data),{},{texts:$l(d.data.texts),attributes:$l(d.data.attributes),removes:$l(d.data.removes),adds:$l(d.data.adds)})});if(d.type===fo.IncrementalSnapshot&&d.data.source===Yr.StyleSheetRule)return le(le({},d),{},{cv:"2024-10",data:le(le({},d.data),{},{adds:$l(d.data.adds),removes:$l(d.data.removes)})})}catch(h){J.error(On+" could not compress event - will use uncompressed event",h)}return d}(s):s,c={$snapshot_bytes:Mv(u),$snapshot_data:u,$session_id:this.sessionId,$window_id:this.windowId};this.status!=="disabled"?this._captureSnapshotBuffered(c):this.clearBuffer()}}}}}_pageViewFallBack(){if(!this.instance.config.capture_pageview&&H){var e=this._maskUrl(H.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}_processQueuedEvents(){if(this.queuedRRWebEvents.length){var e=[...this.queuedRRWebEvents];this.queuedRRWebEvents=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this._tryRRWebMethod(n)})}}_maskUrl(e){var n=this.instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))===null||i===void 0?void 0:i.url}return e}clearBuffer(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}_flushBuffer(){this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var e=this.minimumDuration,n=this.sessionDuration,i=er(n)&&n>=0,r=er(e)&&i&&n<e;return this.status==="buffering"||r?(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3),this.buffer):(this.buffer.data.length>0&&ix(this.buffer).forEach(s=>{this._captureSnapshot({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId})}),this.clearBuffer())}_captureSnapshotBuffered(e){var n,i=2+(((n=this.buffer)===null||n===void 0?void 0:n.data.length)||0);!this.isIdle&&(this.buffer.size+e.$snapshot_bytes+i>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3))}_captureSnapshot(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}_checkUrlTriggerConditions(){if(H!==void 0&&H.location.href){var e=H.location.href,n=this.status==="paused",i=NP(e,this._urlBlocklist);i&&!n?this._pauseRecording():!i&&n&&this._resumeRecording(),NP(e,this._urlTriggers)&&this._activateTrigger("url")}}_activateTrigger(e){var n,i;this.triggerStatus==="trigger_pending"&&((n=this.instance)===null||n===void 0||(i=n.persistence)===null||i===void 0||i.register({[e==="url"?jw:Fw]:this.sessionId}),this._flushBuffer(),this._reportStarted(e+"_trigger_matched"))}_pauseRecording(){var e,n;this.status!=="paused"&&(this._urlBlocked=!0,Ee==null||(e=Ee.body)===null||e===void 0||(n=e.classList)===null||n===void 0||n.add("ph-no-capture"),clearInterval(this._fullSnapshotTimer),setTimeout(()=>{this._flushBuffer()},100),J.info(On+" recording paused due to URL blocker"),this._tryAddCustomEvent("recording paused",{reason:"url blocker"}))}_resumeRecording(){var e,n;this.status==="paused"&&(this._urlBlocked=!1,Ee==null||(e=Ee.body)===null||e===void 0||(n=e.classList)===null||n===void 0||n.remove("ph-no-capture"),this._tryTakeFullSnapshot(),this._scheduleFullSnapshot(),this._tryAddCustomEvent("recording resumed",{reason:"left blocked url"}),J.info(On+" recording resumed"))}_addEventTriggerListener(){this._eventTriggers.length!==0&&Nt(this._removeEventTriggerCaptureHook)&&(this._removeEventTriggerCaptureHook=this.instance.on("eventCaptured",e=>{try{this._eventTriggers.includes(e.event)&&this._activateTrigger("event")}catch(n){J.error(On+"Could not activate event trigger",n)}}))}overrideLinkedFlag(){this._linkedFlagSeen=!0,this._reportStarted("linked_flag_overridden")}overrideSampling(){var e;(e=this.instance.persistence)===null||e===void 0||e.register({[Th]:!0}),this._reportStarted("sampling_overridden")}overrideTrigger(e){this._activateTrigger(e)}_reportStarted(e,n){this.instance.register_for_session({$session_recording_start_reason:e}),J.info(On+" "+e.replace("_"," "),n),it(["recording_initialized","session_id_changed"],e)||this._tryAddCustomEvent(e,n)}}class yU{constructor(e){this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}call(){var e={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(mc),group_properties:this.instance.get_property(ca),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:e,compression:this.instance.config.disable_compression?void 0:ss.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:n=>this.parseDecideResponse(n.json)})}parseDecideResponse(e){this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer();var n=!e;if(this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(e??{},n),!n)return Ee&&Ee.body?void this.instance._afterDecideResponse(e):(J.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.parseDecideResponse(e)},500));J.error("Failed to fetch feature flags from PostHog.")}}var po,wU=H!=null&&H.location?Nv(H.location.hash,"__posthog")||Nv(location.hash,"state"):null,RP="_postHogToolbarParams";(function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"})(po||(po={}));class bU{constructor(e){this.instance=e}setToolbarState(e){Xe.ph_toolbar_state=e}getToolbarState(){var e;return(e=Xe.ph_toolbar_state)!==null&&e!==void 0?e:po.UNINITIALIZED}maybeLoadToolbar(){var e,n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!H||!Ee)return!1;i=(e=i)!==null&&e!==void 0?e:H.location,s=(n=s)!==null&&n!==void 0?n:H.history;try{if(!r){try{H.localStorage.setItem("test","test"),H.localStorage.removeItem("test")}catch{return!1}r=H==null?void 0:H.localStorage}var o,a=wU||Nv(i.hash,"__posthog")||Nv(i.hash,"state"),l=a?ZA(()=>JSON.parse(atob(decodeURIComponent(a))))||ZA(()=>JSON.parse(decodeURIComponent(a))):null;return l&&l.action==="ph_authorize"?((o=l).source="url",o&&Object.keys(o).length>0&&(l.desiredHash?i.hash=l.desiredHash:s?s.replaceState(s.state,"",i.pathname+i.search):i.hash="")):((o=JSON.parse(r.getItem(RP)||"{}")).source="localstorage",delete o.userIntent),!(!o.token||this.instance.config.token!==o.token)&&(this.loadToolbar(o),!0)}catch{return!1}}_callLoadToolbar(e){(Xe.ph_load_toolbar||Xe.ph_load_editor)(e,this.instance)}loadToolbar(e){var n=!(Ee==null||!Ee.getElementById(RO));if(!H||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=le(le({token:this.instance.config.token},e),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(H.localStorage.setItem(RP,JSON.stringify(le(le({},r),{},{source:void 0}))),this.getToolbarState()===po.LOADED)this._callLoadToolbar(r);else if(this.getToolbarState()===po.UNINITIALIZED){var s,o;this.setToolbarState(po.LOADING),(s=Xe.__PosthogExtensions__)===null||s===void 0||(o=s.loadExternalDependency)===null||o===void 0||o.call(s,this.instance,"toolbar",a=>{if(a)return J.error("Failed to load toolbar",a),void this.setToolbarState(po.UNINITIALIZED);this.setToolbarState(po.LOADED),this._callLoadToolbar(r)}),To(H,"turbolinks:load",()=>{this.setToolbarState(po.UNINITIALIZED),this.loadToolbar(r)})}return!0}_loadEditor(e){return this.loadToolbar(e)}maybeLoadEditor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return this.maybeLoadToolbar(e,n,i)}}class xU{constructor(e){we(this,"isPaused",!0),we(this,"queue",[]),we(this,"flushTimeoutMs",3e3),this.sendRequest=e}enqueue(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}unload(){this.clearFlushTimeout();var e=this.queue.length>0?this.formatQueue():{},n=Object.values(e),i=[...n.filter(r=>r.url.indexOf("/e")===0),...n.filter(r=>r.url.indexOf("/e")!==0)];i.map(r=>{this.sendRequest(le(le({},r),{},{transport:"sendBeacon"}))})}enable(){this.isPaused=!1,this.setFlushTimeout()}setFlushTimeout(){var e=this;this.isPaused||(this.flushTimeout=setTimeout(()=>{if(this.clearFlushTimeout(),this.queue.length>0){var n=this.formatQueue(),i=function(s){var o=n[s],a=new Date().getTime();o.data&&Qt(o.data)&&Ct(o.data,l=>{l.offset=Math.abs(l.timestamp-a),delete l.timestamp}),e.sendRequest(o)};for(var r in n)i(r)}},this.flushTimeoutMs))}clearFlushTimeout(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}formatQueue(){var e={};return Ct(this.queue,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;De(e[s])&&(e[s]=le(le({},r),{},{data:[]})),(i=e[s].data)===null||i===void 0||i.push(r.data)}),this.queue=[],e}}var SU=!!U1||!!z1,MP="text/plain",Dv=(t,e)=>{var[n,i]=t.split("?"),r=le({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=L6(r);return s=s?(i?i+"&":"")+s:i,"".concat(n,"?").concat(s)},Vw=t=>{var{data:e,compression:n}=t;if(e){if(n===ss.GZipJS){var i=uI(cI(JSON.stringify(e)),{mtime:0}),r=new Blob([i],{type:MP});return{contentType:MP,body:r,estimatedSize:r.size}}if(n===ss.Base64){var s=function(l){var u,c,d,h,f,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=0,b=0,v="",y=[];if(!l)return l;l=w6(l);do u=(f=l.charCodeAt(g++)<<16|l.charCodeAt(g++)<<8|l.charCodeAt(g++))>>18&63,c=f>>12&63,d=f>>6&63,h=63&f,y[b++]=p.charAt(u)+p.charAt(c)+p.charAt(d)+p.charAt(h);while(g<l.length);switch(v=y.join(""),l.length%3){case 1:v=v.slice(0,-2)+"==";break;case 2:v=v.slice(0,-1)+"="}return v}(JSON.stringify(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:JSON.stringify(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=JSON.stringify(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Yh=[];U1&&Yh.push({transport:"XHR",method:t=>{var e,n=new U1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=Vw(t))!==null&&e!==void 0?e:{};Ct(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s,o={statusCode:n.status,text:n.responseText};if(n.status===200)try{o.json=JSON.parse(n.responseText)}catch{}(s=t.callback)===null||s===void 0||s.call(t,o)}},n.send(r)}}),z1&&Yh.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=Vw(t))!==null&&e!==void 0?e:{},o=new Headers;Ct(t.headers,function(c,d){o.append(d,c)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(YA){var u=new YA;l={signal:u.signal,timeout:setTimeout(()=>u.abort(),t.timeout)}}z1(a,{method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)===null||n===void 0?void 0:n.signal}).then(c=>c.text().then(d=>{var h,f={statusCode:c.status,text:d};if(c.status===200)try{f.json=JSON.parse(d)}catch(p){J.error(p)}(h=t.callback)===null||h===void 0||h.call(t,f)})).catch(c=>{var d;J.error(c),(d=t.callback)===null||d===void 0||d.call(t,{statusCode:0,text:c})}).finally(()=>l?clearTimeout(l.timeout):null)}}),nr!=null&&nr.sendBeacon&&Yh.push({transport:"sendBeacon",method:t=>{var e=Dv(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=Vw(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;nr.sendBeacon(e,s)}catch{}}});var _U=["retriesPerformedSoFar"];class kU{constructor(e){we(this,"isPolling",!1),we(this,"pollIntervalMs",3e3),we(this,"queue",[]),this.instance=e,this.queue=[],this.areWeOnline=!0,!De(H)&&"onLine"in H.navigator&&(this.areWeOnline=H.navigator.onLine,H.addEventListener("online",()=>{this.areWeOnline=!0,this.flush()}),H.addEventListener("offline",()=>{this.areWeOnline=!1}))}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=PO(e,_U);er(n)&&n>0&&(i.url=Dv(i.url,{retry_count:n})),this.instance._send_request(le(le({},i),{},{callback:r=>{var s;r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.enqueue(le({retriesPerformedSoFar:n},i)):(s=i.callback)===null||s===void 0||s.call(i,r)}}))}enqueue(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,u=Math.min(18e5,a),c=(Math.random()-.5)*(u-l);return Math.ceil(u+c)}(n),r=Date.now()+i;this.queue.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in ".concat(i);navigator.onLine||(s+=" (Browser is offline)"),J.warn(s),this.isPolling||(this.isPolling=!0,this.poll())}poll(){this.poller&&clearTimeout(this.poller),this.poller=setTimeout(()=>{this.areWeOnline&&this.queue.length>0&&this.flush(),this.poll()},this.pollIntervalMs)}flush(){var e=Date.now(),n=[],i=this.queue.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.queue=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.poller&&(clearTimeout(this.poller),this.poller=void 0),this.queue))try{this.instance._send_request(le(le({},e),{},{transport:"sendBeacon"}))}catch(n){J.error(n)}this.queue=[]}}var au;class CU{constructor(e,n,i,r){var s;we(this,"_sessionIdChangedHandlers",[]),this.config=e,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=i||Pa,this._windowIdGenerator=r||Pa;var o=e.persistence_name||e.token,a=e.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Ro(a,60,1800,"session_idle_timeout_seconds"),this._window_id_storage_key="ph_"+o+"_window_id",this._primary_window_exists_storage_key="ph_"+o+"_primary_window_exists",this._canUseSessionStorage()){var l=Ln.parse(this._window_id_storage_key),u=Ln.parse(this._primary_window_exists_storage_key);l&&!u?this._windowId=l:Ln.remove(this._window_id_storage_key),Ln.set(this._primary_window_exists_storage_key,!0)}if((s=this.config.bootstrap)!==null&&s!==void 0&&s.sessionID)try{var c=(d=>{var h=d.replace(/-/g,"");if(h.length!==32)throw new Error("Not a valid UUID");if(h[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(h.substring(0,12),16)})(this.config.bootstrap.sessionID);this._setSessionId(this.config.bootstrap.sessionID,new Date().getTime(),c)}catch(d){J.error("Invalid sessionID in bootstrap",d)}this._listenToReloadWindow()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return De(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),()=>{this._sessionIdChangedHandlers=this._sessionIdChangedHandlers.filter(n=>n!==e)}}_canUseSessionStorage(){return this.config.persistence!=="memory"&&!this.persistence.disabled&&Ln.is_supported()}_setWindowId(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&Ln.set(this._window_id_storage_key,e))}_getWindowId(){return this._windowId?this._windowId:this._canUseSessionStorage()?Ln.parse(this._window_id_storage_key):null}_setSessionId(e,n,i){e===this._sessionId&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this._sessionId=e,this.persistence.register({[Ev]:[n,e,i]}))}_getSessionId(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[Ev];return Qt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this._setSessionId(null,null,null)}_listenToReloadWindow(){H==null||H.addEventListener("beforeunload",()=>{this._canUseSessionStorage()&&Ln.remove(this._primary_window_exists_storage_key)})}checkAndGetSessionAndWindowId(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:null)||new Date().getTime(),[i,r,s]=this._getSessionId(),o=this._getWindowId(),a=er(s)&&s>0&&Math.abs(n-s)>864e5,l=!1,u=!r,c=!e&&Math.abs(n-i)>this.sessionTimeoutMs;u||c||a?(r=this._sessionIdGenerator(),o=this._windowIdGenerator(),J.info("[SessionId] new session ID generated",{sessionId:r,windowId:o,changeReason:{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}}),s=n,l=!0):o||(o=this._windowIdGenerator(),l=!0);var d=i===0||!e||a?n:i,h=s===0?new Date().getTime():s;return this._setWindowId(o),this._setSessionId(r,d,h),l&&this._sessionIdChangedHandlers.forEach(f=>f(r,o,l?{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}:void 0)),{sessionId:r,windowId:o,sessionStartTimestamp:h,changeReason:l?{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}:void 0,lastActivityTimestamp:i}}}(function(t){t.US="us",t.EU="eu",t.CUSTOM="custom"})(au||(au={}));var OP="i.posthog.com";class EU{constructor(e){we(this,"_regionCache",{}),this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)===null||e===void 0?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace(".".concat(OP),".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=au.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=au.EU:this._regionCache[this.apiHost]=au.CUSTOM),this._regionCache[this.apiHost]}endpointFor(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(n&&(n=n[0]==="/"?n:"/".concat(n)),e==="ui")return this.uiHost+n;if(this.region===au.CUSTOM)return this.apiHost+n;var i=OP+n;switch(e){case"assets":return"https://".concat(this.region,"-assets.").concat(i);case"api":return"https://".concat(this.region,".").concat(i)}}}var dI="posthog-js";function hI(t){var{organization:e,projectId:n,prefix:i,severityAllowList:r=["error"]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return s=>{var o,a,l,u,c;if(!(r==="*"||r.includes(s.level))||!t.__loaded)return s;s.tags||(s.tags={});var d=t.requestRouter.endpointFor("ui","/project/".concat(t.config.token,"/person/").concat(t.get_distinct_id()));s.tags["PostHog Person URL"]=d,t.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var h=((o=s.exception)===null||o===void 0?void 0:o.values)||[];h.map(p=>{p.stacktrace&&(p.stacktrace.type="raw")});var f={$exception_message:((a=h[0])===null||a===void 0?void 0:a.value)||s.message,$exception_type:(l=h[0])===null||l===void 0?void 0:l.type,$exception_personURL:d,$exception_level:s.level,$exception_list:h,$sentry_event_id:s.event_id,$sentry_exception:s.exception,$sentry_exception_message:((u=h[0])===null||u===void 0?void 0:u.value)||s.message,$sentry_exception_type:(c=h[0])===null||c===void 0?void 0:c.type,$sentry_tags:s.tags};return e&&n&&(f.$sentry_url=(i||"https://sentry.io/organizations/")+e+"/issues/?project="+n+"&query="+s.event_id),t.exceptions.sendExceptionEvent(f),s}}class AU{constructor(e,n,i,r,s){this.name=dI,this.setupOnce=function(o){o(hI(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var IP,Lv,Xr;function PU(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var u=()=>l.anonymousId()||Pa();i.config.get_device_id=u,l.id()&&(i.register({distinct_id:l.id(),$device_id:u()}),i.persistence.set_property(ho,"identified")),r()},a=s.user();"then"in a&&Tr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||J.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{var a;if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(J.info("Segment integration does not have a userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(J.info("Segment integration has a userId set, identifying with PostHog"),i.identify(s.event.userId));var l=i._calculate_event_properties(o,(a=s.event.properties)!==null&&a!==void 0?a:{},new Date);return s.event.properties=Object.assign({},l,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}class TU{constructor(e){this._instance=e}doPageView(e){var n,i=this._previousPageViewProperties(e);return this._currentPath=(n=H==null?void 0:H.location.pathname)!==null&&n!==void 0?n:"",this._instance.scrollManager.resetContext(),this._prevPageviewTimestamp=e,i}doPageLeave(e){return this._previousPageViewProperties(e)}_previousPageViewProperties(e){var n=this._currentPath,i=this._prevPageviewTimestamp,r=this._instance.scrollManager.getContext();if(!i)return{};var s={};if(r){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:u,lastContentY:c,maxContentY:d}=r;De(o)||De(a)||De(l)||De(u)||De(c)||De(d)||(o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),u=Math.ceil(u),c=Math.ceil(c),d=Math.ceil(d),s={$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:o<=1?1:Ro(a/o,0,1),$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:o<=1?1:Ro(l/o,0,1),$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:u<=1?1:Ro(c/u,0,1),$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:u<=1?1:Ro(d/u,0,1)})}return n&&(s.$prev_pageview_pathname=n),i&&(s.$prev_pageview_duration=(e.getTime()-i.getTime())/1e3),s}}(function(t){t.Popover="popover",t.API="api",t.Widget="widget"})(IP||(IP={})),function(t){t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link"}(Lv||(Lv={})),function(t){t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question"}(Xr||(Xr={}));class fI{constructor(){we(this,"events",{}),this.events={}}on(e,n){return this.events[e]||(this.events[e]=[]),this.events[e].push(n),()=>{this.events[e]=this.events[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.events[e]||[])i(n);for(var r of this.events["*"]||[])r(e,n)}}class Zl{constructor(e){we(this,"_debugEventEmitter",new fI),we(this,"checkStep",(n,i)=>this.checkStepEvent(n,i)&&this.checkStepUrl(n,i)&&this.checkStepElement(n,i)),we(this,"checkStepEvent",(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event)),this.instance=e,this.actionEvents=new Set,this.actionRegistry=new Set}init(){var e;if(!De((e=this.instance)===null||e===void 0?void 0:e._addCaptureHook)){var n;(n=this.instance)===null||n===void 0||n._addCaptureHook((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!De((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)&&(e.forEach(o=>{var a,l;(a=this.actionRegistry)===null||a===void 0||a.add(o),(l=o.steps)===null||l===void 0||l.forEach(u=>{var c;(c=this.actionEvents)===null||c===void 0||c.add((u==null?void 0:u.event)||"")})}),(i=this.instance)!==null&&i!==void 0&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)===null||a===void 0||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this.instance)===null||r===void 0||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.actionEvents.has(e)||this.actionEvents.has(n==null?void 0:n.event))&&this.actionRegistry&&((i=this.actionRegistry)===null||i===void 0?void 0:i.size)>0&&this.actionRegistry.forEach(r=>{this.checkAction(n,r)&&this._debugEventEmitter.emit("actionCaptured",r.name)})}_addActionHook(e){this.onAction("actionCaptured",n=>e(n))}checkAction(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.checkStep(e,i))return!0;return!1}onAction(e,n){return this._debugEventEmitter.on(e,n)}checkStepUrl(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)===null||i===void 0?void 0:i.$current_url;if(!r||typeof r!="string"||!Zl.matchString(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static matchString(e,n,i){switch(i){case"regex":return!!H&&cd(e,n);case"exact":return n===e;case"contains":var r=Zl.escapeStringRegexp(n).replace(/_/g,".").replace(/%/g,".*");return cd(e,r);default:return!1}}static escapeStringRegexp(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}checkStepElement(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.getElementsList(e).some(s=>!(n!=null&&n.href&&!Zl.matchString(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!Zl.matchString(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!Zl.matchString(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)===null||i===void 0?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}getElementsList(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}class Cf{constructor(e){this.instance=e,this.eventToSurveys=new Map,this.actionToSurveys=new Map}register(e){var n;De((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)||(this.setupEventBasedSurveys(e),this.setupActionBasedSurveys(e))}setupActionBasedSurveys(e){var n=e.filter(i=>{var r,s,o,a;return((r=i.conditions)===null||r===void 0?void 0:r.actions)&&((s=i.conditions)===null||s===void 0||(o=s.actions)===null||o===void 0||(a=o.values)===null||a===void 0?void 0:a.length)>0});n.length!==0&&(this.actionMatcher==null&&(this.actionMatcher=new Zl(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l,u,c,d,h,f;i.conditions&&(r=i.conditions)!==null&&r!==void 0&&r.actions&&(s=i.conditions)!==null&&s!==void 0&&(o=s.actions)!==null&&o!==void 0&&o.values&&((a=i.conditions)===null||a===void 0||(l=a.actions)===null||l===void 0||(u=l.values)===null||u===void 0?void 0:u.length)>0&&((c=this.actionMatcher)===null||c===void 0||c.register(i.conditions.actions.values),(d=i.conditions)===null||d===void 0||(h=d.actions)===null||h===void 0||(f=h.values)===null||f===void 0||f.forEach(p=>{if(p&&p.name){var g=this.actionToSurveys.get(p.name);g&&g.push(i.id),this.actionToSurveys.set(p.name,g||[i.id])}}))}))}setupEventBasedSurveys(e){var n;e.filter(i=>{var r,s,o,a;return((r=i.conditions)===null||r===void 0?void 0:r.events)&&((s=i.conditions)===null||s===void 0||(o=s.events)===null||o===void 0||(a=o.values)===null||a===void 0?void 0:a.length)>0}).length!==0&&((n=this.instance)===null||n===void 0||n._addCaptureHook((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r,s,o;(r=i.conditions)===null||r===void 0||(s=r.events)===null||s===void 0||(o=s.values)===null||o===void 0||o.forEach(a=>{if(a&&a.name){var l=this.eventToSurveys.get(a.name);l&&l.push(i.id),this.eventToSurveys.set(a.name,l||[i.id])}})}))}onEvent(e,n){var i,r,s=((i=this.instance)===null||i===void 0||(r=i.persistence)===null||r===void 0?void 0:r.props[wm])||[];if(Cf.SURVEY_SHOWN_EVENT_NAME==e&&n&&s.length>0){var o,a=n==null||(o=n.properties)===null||o===void 0?void 0:o.$survey_id;if(a){var l=s.indexOf(a);l>=0&&(s.splice(l,1),this._updateActivatedSurveys(s))}}else this.eventToSurveys.has(e)&&this._updateActivatedSurveys(s.concat(this.eventToSurveys.get(e)||[]))}onAction(e){var n,i,r=((n=this.instance)===null||n===void 0||(i=n.persistence)===null||i===void 0?void 0:i.props[wm])||[];this.actionToSurveys.has(e)&&this._updateActivatedSurveys(r.concat(this.actionToSurveys.get(e)||[]))}_updateActivatedSurveys(e){var n,i;(n=this.instance)===null||n===void 0||(i=n.persistence)===null||i===void 0||i.register({[wm]:[...new Set(e)]})}getSurveys(){var e,n,i=(e=this.instance)===null||e===void 0||(n=e.persistence)===null||n===void 0?void 0:n.props[wm];return i||[]}getEventToSurveys(){return this.eventToSurveys}_getActionMatcher(){return this.actionMatcher}}we(Cf,"SURVEY_SHOWN_EVENT_NAME","survey shown");var pI,Zt,mI,Jl,DP,gI,hx,vI,fx={},yI=[],NU=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ek=Array.isArray;function Ta(t,e){for(var n in e)t[n]=e[n];return t}function wI(t){var e=t.parentNode;e&&e.removeChild(t)}function Ww(t,e,n,i,r){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++mI,__i:-1,__u:0};return r==null&&Zt.vnode!=null&&Zt.vnode(s),s}function Ak(t){return t.children}function Hg(t,e){this.props=t,this.context=e}function pd(t,e){if(e==null)return t.__?pd(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?pd(t):null}function bI(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return bI(t)}}function px(t){(!t.__d&&(t.__d=!0)&&Jl.push(t)&&!jv.__r++||DP!==Zt.debounceRendering)&&((DP=Zt.debounceRendering)||gI)(jv)}function jv(){var t,e,n,i,r,s,o,a,l;for(Jl.sort(hx);t=Jl.shift();)t.__d&&(e=Jl.length,i=void 0,s=(r=(n=t).__v).__e,a=[],l=[],(o=n.__P)&&((i=Ta({},r)).__v=r.__v+1,Zt.vnode&&Zt.vnode(i),_I(o,i,r,n.__n,o.ownerSVGElement!==void 0,32&r.__u?[s]:null,a,s??pd(r),!!(32&r.__u),l),i.__.__k[i.__i]=i,OU(a,i,l),i.__e!=s&&bI(i)),Jl.length>e&&Jl.sort(hx));jv.__r=0}function xI(t,e,n,i,r,s,o,a,l,u,c){var d,h,f,p,g,b=i&&i.__k||yI,v=e.length;for(n.__d=l,RU(n,e,b),l=n.__d,d=0;d<v;d++)(f=n.__k[d])!=null&&typeof f!="boolean"&&typeof f!="function"&&(h=f.__i===-1?fx:b[f.__i]||fx,f.__i=d,_I(t,f,h,r,s,o,a,l,u,c),p=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&Pk(h.ref,null,f),c.push(f.ref,f.__c||p,f)),g==null&&p!=null&&(g=p),65536&f.__u||h.__k===f.__k?l=SI(f,l,t):typeof f.type=="function"&&f.__d!==void 0?l=f.__d:p&&(l=p.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=l,n.__e=g}function RU(t,e,n){var i,r,s,o,a,l=e.length,u=n.length,c=u,d=0;for(t.__k=[],i=0;i<l;i++)(r=t.__k[i]=(r=e[i])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?Ww(null,r,null,null,r):Ek(r)?Ww(Ak,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?Ww(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=t,r.__b=t.__b+1,a=MU(r,n,o=i+d,c),r.__i=a,s=null,a!==-1&&(c--,(s=n[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&d--,typeof r.type!="function"&&(r.__u|=65536)):a!==o&&(a===o+1?d++:a>o?c>l-o?d+=a-o:d--:d=a<o&&a==o-1?a-o:0,a!==i+d&&(r.__u|=65536))):(s=n[i])&&s.key==null&&s.__e&&(s.__e==t.__d&&(t.__d=pd(s)),mx(s,s,!1),n[i]=null,c--);if(c)for(i=0;i<u;i++)(s=n[i])!=null&&!(131072&s.__u)&&(s.__e==t.__d&&(t.__d=pd(s)),mx(s,s))}function SI(t,e,n){var i,r;if(typeof t.type=="function"){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,e=SI(i[r],e,n));return e}return t.__e!=e&&(n.insertBefore(t.__e,e||null),e=t.__e),e&&e.nextSibling}function MU(t,e,n,i){var r=t.key,s=t.type,o=n-1,a=n+1,l=e[n];if(l===null||l&&r==l.key&&s===l.type)return n;if(i>(l!=null&&!(131072&l.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((l=e[o])&&!(131072&l.__u)&&r==l.key&&s===l.type)return o;o--}if(a<e.length){if((l=e[a])&&!(131072&l.__u)&&r==l.key&&s===l.type)return a;a++}}return-1}function LP(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||NU.test(e)?n:n+"px"}function Cm(t,e,n,i,r){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||LP(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||LP(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i?n.u=i.u:(n.u=Date.now(),t.addEventListener(e,s?FP:jP,s)):t.removeEventListener(e,s?FP:jP,s);else{if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,n))}}function jP(t){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(Zt.event?Zt.event(t):t)}function FP(t){return this.l[t.type+!0](Zt.event?Zt.event(t):t)}function _I(t,e,n,i,r,s,o,a,l,u){var c,d,h,f,p,g,b,v,y,w,x,k,E,C,P,N=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),s=[a=e.__e=n.__e]),(c=Zt.__b)&&c(e);e:if(typeof N=="function")try{if(v=e.props,y=(c=N.contextType)&&i[c.__c],w=c?y?y.props.value:c.__:i,n.__c?b=(d=e.__c=n.__c).__=d.__E:("prototype"in N&&N.prototype.render?e.__c=d=new N(v,w):(e.__c=d=new Hg(v,w),d.constructor=N,d.render=DU),y&&y.sub(d),d.props=v,d.state||(d.state={}),d.context=w,d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),N.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Ta({},d.__s)),Ta(d.__s,N.getDerivedStateFromProps(v,d.__s))),f=d.props,p=d.state,d.__v=e,h)N.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(N.getDerivedStateFromProps==null&&v!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,w),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,w)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(I){I&&(I.__=e)}),x=0;x<d._sb.length;x++)d.__h.push(d._sb[x]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,w),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,p,g)})}if(d.context=w,d.props=v,d.__P=t,d.__e=!1,k=Zt.__r,E=0,"prototype"in N&&N.prototype.render){for(d.state=d.__s,d.__d=!1,k&&k(e),c=d.render(d.props,d.state,d.context),C=0;C<d._sb.length;C++)d.__h.push(d._sb[C]);d._sb=[]}else do d.__d=!1,k&&k(e),c=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++E<25);d.state=d.__s,d.getChildContext!=null&&(i=Ta(Ta({},i),d.getChildContext())),h||d.getSnapshotBeforeUpdate==null||(g=d.getSnapshotBeforeUpdate(f,p)),xI(t,Ek(P=c!=null&&c.type===Ak&&c.key==null?c.props.children:c)?P:[P],e,n,i,r,s,o,a,l,u),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),b&&(d.__E=d.__=null)}catch(I){e.__v=null,l||s!=null?(e.__e=a,e.__u|=l?160:32,s[s.indexOf(a)]=null):(e.__e=n.__e,e.__k=n.__k),Zt.__e(I,e,n)}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=IU(n.__e,e,n,i,r,s,o,l,u);(c=Zt.diffed)&&c(e)}function OU(t,e,n){e.__d=void 0;for(var i=0;i<n.length;i++)Pk(n[i],n[++i],n[++i]);Zt.__c&&Zt.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(s){s.call(r)})}catch(s){Zt.__e(s,r.__v)}})}function IU(t,e,n,i,r,s,o,a,l){var u,c,d,h,f,p,g,b=n.props,v=e.props,y=e.type;if(y==="svg"&&(r=!0),s!=null){for(u=0;u<s.length;u++)if((f=s[u])&&"setAttribute"in f==!!y&&(y?f.localName===y:f.nodeType===3)){t=f,s[u]=null;break}}if(t==null){if(y===null)return document.createTextNode(v);t=r?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,v.is&&v),s=null,a=!1}if(y===null)b===v||a&&t.data===v||(t.data=v);else{if(s=s&&pI.call(t.childNodes),b=n.props||fx,!a&&s!=null)for(b={},u=0;u<t.attributes.length;u++)b[(f=t.attributes[u]).name]=f.value;for(u in b)f=b[u],u=="children"||(u=="dangerouslySetInnerHTML"?d=f:u==="key"||u in v||Cm(t,u,null,f,r));for(u in v)f=v[u],u=="children"?h=f:u=="dangerouslySetInnerHTML"?c=f:u=="value"?p=f:u=="checked"?g=f:u==="key"||a&&typeof f!="function"||b[u]===f||Cm(t,u,f,b[u],r);if(c)a||d&&(c.__html===d.__html||c.__html===t.innerHTML)||(t.innerHTML=c.__html),e.__k=[];else if(d&&(t.innerHTML=""),xI(t,Ek(h)?h:[h],e,n,i,r&&y!=="foreignObject",s,o,s?s[0]:n.__k&&pd(n,0),a,l),s!=null)for(u=s.length;u--;)s[u]!=null&&wI(s[u]);a||(u="value",p!==void 0&&(p!==t[u]||y==="progress"&&!p||y==="option"&&p!==b[u])&&Cm(t,u,p,b[u],!1),u="checked",g!==void 0&&g!==t[u]&&Cm(t,u,g,b[u],!1))}return t}function Pk(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){Zt.__e(i,n)}}function mx(t,e,n){var i,r;if(Zt.unmount&&Zt.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||Pk(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){Zt.__e(s,e)}i.base=i.__P=null,t.__c=void 0}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&mx(i[r],e,n||typeof t.type!="function");n||t.__e==null||wI(t.__e),t.__=t.__e=t.__d=void 0}function DU(t,e,n){return this.constructor(t,n)}pI=yI.slice,Zt={__e:function(t,e,n,i){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),o=r.__d),o)return r.__E=r}catch(a){t=a}throw t}},mI=0,Hg.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ta({},this.state),typeof t=="function"&&(t=t(Ta({},n),this.props)),t&&Ta(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),px(this))},Hg.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),px(this))},Hg.prototype.render=Ak,Jl=[],gI=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,hx=function(t,e){return t.__v.__b-e.__v.__b},jv.__r=0,vI=0;(function(t,e){var n={__c:e="__cC"+vI++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,s;return this.getChildContext||(r=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&r.some(function(a){a.__e=!0,px(a)})},this.sub=function(o){r.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){r.splice(r.indexOf(o),1),a&&a.call(o)}}),i.children}};n.Provider.__=n.Consumer.contextType=n})({isPreviewMode:!1,previewPageIndex:0,handleCloseSurveyPopup:()=>{},isPopup:!0});var nh="[Surveys]",LU={icontains:t=>!!H&&H.location.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:t=>!!H&&H.location.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:t=>!!H&&cd(H.location.href,t),not_regex:t=>!!H&&!cd(H.location.href,t),exact:t=>(H==null?void 0:H.location.href)===t,is_not:t=>(H==null?void 0:H.location.href)!==t};class jU{constructor(e){this.instance=e,this._surveyEventReceiver=null}afterDecideResponse(e){this._decideServerResponse=!!e.surveys,this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");var e=(()=>{for(var n=[],i=0;i<localStorage.length;i++){var r=localStorage.key(i);r!=null&&r.startsWith("seenSurvey_")&&n.push(r)}return n})();e.forEach(n=>localStorage.removeItem(n))}loadIfEnabled(){var e,n,i,r=Xe==null||(e=Xe.__PosthogExtensions__)===null||e===void 0?void 0:e.generateSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||r||(this._surveyEventReceiver==null&&(this._surveyEventReceiver=new Cf(this.instance)),(n=Xe.__PosthogExtensions__)===null||n===void 0||(i=n.loadExternalDependency)===null||i===void 0||i.call(n,this.instance,"surveys",s=>{var o,a;if(s)return J.error(nh,"Could not load surveys script",s);this._surveyManager=(o=Xe.__PosthogExtensions__)===null||o===void 0||(a=o.generateSurveys)===null||a===void 0?void 0:a.call(o,this.instance)}))}getSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.instance.config.disable_surveys)return e([]);this._surveyEventReceiver==null&&(this._surveyEventReceiver=new Cf(this.instance));var i=this.instance.get_property(K1);if(i&&!n)return e(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:r=>{var s;if(r.statusCode!==200||!r.json)return e([]);var o,a=r.json.surveys||[],l=a.filter(u=>{var c,d,h,f,p,g,b,v,y,w,x,k;return((c=u.conditions)===null||c===void 0?void 0:c.events)&&((d=u.conditions)===null||d===void 0||(h=d.events)===null||h===void 0?void 0:h.values)&&((f=u.conditions)===null||f===void 0||(p=f.events)===null||p===void 0||(g=p.values)===null||g===void 0?void 0:g.length)>0||((b=u.conditions)===null||b===void 0?void 0:b.actions)&&((v=u.conditions)===null||v===void 0||(y=v.actions)===null||y===void 0?void 0:y.values)&&((w=u.conditions)===null||w===void 0||(x=w.actions)===null||x===void 0||(k=x.values)===null||k===void 0?void 0:k.length)>0});return l.length>0&&((o=this._surveyEventReceiver)===null||o===void 0||o.register(l)),(s=this.instance.persistence)===null||s===void 0||s.register({[K1]:a}),e(a)}})}getActiveMatchingSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.getSurveys(i=>{var r,s=i.filter(l=>!(!l.start_date||l.end_date)).filter(l=>{var u,c,d,h;if(!l.conditions)return!0;var f=(u=l.conditions)===null||u===void 0||!u.url||LU[(c=(d=l.conditions)===null||d===void 0?void 0:d.urlMatchType)!==null&&c!==void 0?c:"icontains"](l.conditions.url),p=(h=l.conditions)===null||h===void 0||!h.selector||(Ee==null?void 0:Ee.querySelector(l.conditions.selector));return f&&p}),o=(r=this._surveyEventReceiver)===null||r===void 0?void 0:r.getSurveys(),a=s.filter(l=>{var u,c,d,h,f,p,g,b,v,y,w;if(!(l.linked_flag_key||l.targeting_flag_key||l.internal_targeting_flag_key||(u=l.feature_flag_keys)!==null&&u!==void 0&&u.length))return!0;var x=!l.linked_flag_key||this.instance.featureFlags.isFeatureEnabled(l.linked_flag_key),k=!l.targeting_flag_key||this.instance.featureFlags.isFeatureEnabled(l.targeting_flag_key),E=((c=l.conditions)===null||c===void 0?void 0:c.events)&&((d=l.conditions)===null||d===void 0||(h=d.events)===null||h===void 0?void 0:h.values)&&((f=l.conditions)===null||f===void 0||(p=f.events)===null||p===void 0?void 0:p.values.length)>0,C=((g=l.conditions)===null||g===void 0?void 0:g.actions)&&((b=l.conditions)===null||b===void 0||(v=b.actions)===null||v===void 0?void 0:v.values)&&((y=l.conditions)===null||y===void 0||(w=y.actions)===null||w===void 0?void 0:w.values.length)>0,P=!E&&!C||(o==null?void 0:o.includes(l.id)),N=this._canActivateRepeatedly(l),I=!(l.internal_targeting_flag_key&&!N)||this.instance.featureFlags.isFeatureEnabled(l.internal_targeting_flag_key),L=this.checkFlags(l);return x&&k&&I&&P&&L});return e(a)},n)}checkFlags(e){var n;return(n=e.feature_flag_keys)===null||n===void 0||!n.length||e.feature_flag_keys.every(i=>{var{key:r,value:s}=i;return!r||!s||this.instance.featureFlags.isFeatureEnabled(s)})}getNextSurveyStep(e,n,i){var r,s=e.questions[n],o=n+1;if((r=s.branching)===null||r===void 0||!r.type)return n===e.questions.length-1?Xr.End:o;if(s.branching.type===Xr.End)return Xr.End;if(s.branching.type===Xr.SpecificQuestion){if(Number.isInteger(s.branching.index))return s.branching.index}else if(s.branching.type===Xr.ResponseBased){if(s.type===Lv.SingleChoice){var a,l,u=s.choices.indexOf("".concat(i));if((a=s.branching)!==null&&a!==void 0&&(l=a.responseValues)!==null&&l!==void 0&&l.hasOwnProperty(u)){var c=s.branching.responseValues[u];return Number.isInteger(c)?c:c===Xr.End?Xr.End:o}}else if(s.type===Lv.Rating){var d,h;if(typeof i!="number"||!Number.isInteger(i))throw new Error("The response type must be an integer");var f=function(g,b){if(b===3){if(g<1||g>3)throw new Error("The response must be in range 1-3");return g===1?"negative":g===2?"neutral":"positive"}if(b===5){if(g<1||g>5)throw new Error("The response must be in range 1-5");return g<=2?"negative":g===3?"neutral":"positive"}if(b===7){if(g<1||g>7)throw new Error("The response must be in range 1-7");return g<=3?"negative":g===4?"neutral":"positive"}if(b===10){if(g<0||g>10)throw new Error("The response must be in range 0-10");return g<=6?"detractors":g<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(i,s.scale);if((d=s.branching)!==null&&d!==void 0&&(h=d.responseValues)!==null&&h!==void 0&&h.hasOwnProperty(f)){var p=s.branching.responseValues[f];return Number.isInteger(p)?p:p===Xr.End?Xr.End:o}}return o}return J.warn(nh,"Falling back to next question index due to unexpected branching type"),o}_canActivateRepeatedly(e){var n;return Nt((n=Xe.__PosthogExtensions__)===null||n===void 0?void 0:n.canActivateRepeatedly)?(J.warn(nh,"canActivateRepeatedly is not defined, must init before calling"),!1):Xe.__PosthogExtensions__.canActivateRepeatedly(e)}canRenderSurvey(e){Nt(this._surveyManager)?J.warn(nh,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(n=>{var i=n.filter(r=>r.id===e)[0];this._surveyManager.canRenderSurvey(i)})}renderSurvey(e,n){Nt(this._surveyManager)?J.warn(nh,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(i=>{var r=i.filter(s=>s.id===e)[0];this._surveyManager.renderSurvey(r,Ee==null?void 0:Ee.querySelector(n))})}}class FU{constructor(e){var n,i;we(this,"serverLimits",{}),we(this,"lastEventRateLimited",!1),we(this,"checkForLimiting",r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{J.info("[RateLimiter] ".concat(o||"events"," is quota limited.")),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void J.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(o==null?void 0:o.message,'"'),{text:s})}}),this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)===null||n===void 0?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)===null||i===void 0?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(){var e,n,i,r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],s=new Date().getTime(),o=(e=(n=this.instance.persistence)===null||n===void 0?void 0:n.get_property(q1))!==null&&e!==void 0?e:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||r||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||r||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(i=this.instance.persistence)===null||i===void 0||i.set_property(q1,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}var $U=()=>le({initialPathName:(Ni==null?void 0:Ni.pathname)||"",referringDomain:sn.referringDomain()},sn.campaignParams());class BU{constructor(e,n,i){we(this,"_onSessionIdCallback",r=>{var s=this._getStoredProps();if(!s||s.sessionId!==r){var o={sessionId:r,props:this._sessionSourceParamGenerator()};this._persistence.register({[X1]:o})}}),this._sessionIdManager=e,this._persistence=n,this._sessionSourceParamGenerator=i||$U,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}_getStoredProps(){return this._persistence.props[X1]}getSessionProps(){var e,n=(e=this._getStoredProps())===null||e===void 0?void 0:e.props;return n?{$client_session_initial_referring_host:n.referringDomain,$client_session_initial_pathname:n.initialPathName,$client_session_initial_utm_source:n.utm_source,$client_session_initial_utm_campaign:n.utm_campaign,$client_session_initial_utm_medium:n.utm_medium,$client_session_initial_utm_content:n.utm_content,$client_session_initial_utm_term:n.utm_term}:{}}}var zU=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],$P=function(t,e){if(!t)return!1;var n=t.toLowerCase();return zU.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},kI=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&$P(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>$P(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver};class CI{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}}var Em="[Dead Clicks]",UU=()=>!0,HU=t=>{var e,n=!((e=t.instance.persistence)===null||e===void 0||!e.get_property(NO)),i=t.instance.config.capture_dead_clicks;return ou(i)?i:n};class EI{get lazyLoadedDeadClicksAutocapture(){return this._lazyLoadedDeadClicksAutocapture}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}afterDecideResponse(e){this.instance.persistence&&this.instance.persistence.register({[NO]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.loadScript(()=>{this.start()})}loadScript(e){var n,i,r;(n=Xe.__PosthogExtensions__)!==null&&n!==void 0&&n.initDeadClicksAutocapture&&e(),(i=Xe.__PosthogExtensions__)===null||i===void 0||(r=i.loadExternalDependency)===null||r===void 0||r.call(i,this.instance,"dead-clicks-autocapture",s=>{s?J.error(Em+" failed to load script",s):e()})}start(){var e;if(Ee){if(!this._lazyLoadedDeadClicksAutocapture&&(e=Xe.__PosthogExtensions__)!==null&&e!==void 0&&e.initDeadClicksAutocapture){var n=un(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this._lazyLoadedDeadClicksAutocapture=Xe.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this._lazyLoadedDeadClicksAutocapture.start(Ee),J.info("".concat(Em," starting..."))}}else J.error(Em+" `document` not found. Cannot start.")}stop(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,J.info("".concat(Em," stopping...")))}}class VU{constructor(e){var n;we(this,"rageclicks",new CI),we(this,"_enabledServerSide",!1),we(this,"_initialized",!1),we(this,"_flushInterval",null),this.instance=e,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[V1]),H==null||H.addEventListener("beforeunload",()=>{this.flush()})}get flushIntervalMilliseconds(){var e=5e3;return un(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return De(this.instance.config.capture_heatmaps)?De(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this._initialized)return;J.info("[heatmaps] starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this._flushInterval)!==null&&e!==void 0?e:void 0),(n=this.deadClicksCapture)===null||n===void 0||n.stop(),this.getAndClearBuffer()}}afterDecideResponse(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[V1]:n}),this._enabledServerSide=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.buffer;return this.buffer=void 0,e}_onDeadClick(e){this._onClick(e.originalEvent,"deadclick")}_setupListeners(){H&&Ee&&(To(Ee,"click",e=>this._onClick(e||(H==null?void 0:H.event)),!1,!0),To(Ee,"mousemove",e=>this._onMouseMove(e||(H==null?void 0:H.event)),!1,!0),this.deadClicksCapture=new EI(this.instance,UU,this._onDeadClick.bind(this)),this.deadClicksCapture.startIfEnabled(),this._initialized=!0)}_getProperties(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,u){for(var c=a;c&&fy(c)&&!Ha(c,"body");){if(c===u)return!1;if(it(l,H==null?void 0:H.getComputedStyle(c).position))return!0;c=JO(c)}return!1}(ZO(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}_onClick(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"click";if(!wP(e.target)){var r=this._getProperties(e,i);(n=this.rageclicks)!==null&&n!==void 0&&n.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._capture(le(le({},r),{},{type:"rageclick"})),this._capture(r)}}_onMouseMove(e){wP(e.target)||(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout(()=>{this._capture(this._getProperties(e,"mousemove"))},500))}_capture(e){if(H){var n=H.location.href;this.buffer=this.buffer||{},this.buffer[n]||(this.buffer[n]=[]),this.buffer[n].push(e)}}flush(){this.buffer&&!fc(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class WU{constructor(e){we(this,"_updateScrollData",()=>{var n,i,r,s;this.context||(this.context={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,u=a+((o==null?void 0:o.clientHeight)||0),c=(o==null?void 0:o.scrollHeight)||0;this.context.lastScrollY=Math.ceil(a),this.context.maxScrollY=Math.max(a,(n=this.context.maxScrollY)!==null&&n!==void 0?n:0),this.context.maxScrollHeight=Math.max(l,(i=this.context.maxScrollHeight)!==null&&i!==void 0?i:0),this.context.lastContentY=u,this.context.maxContentY=Math.max(u,(r=this.context.maxContentY)!==null&&r!==void 0?r:0),this.context.maxContentHeight=Math.max(c,(s=this.context.maxContentHeight)!==null&&s!==void 0?s:0)}),this.instance=e}getContext(){return this.context}resetContext(){var e=this.context;return setTimeout(this._updateScrollData,0),e}startMeasuringScrollPosition(){H==null||H.addEventListener("scroll",this._updateScrollData,!0),H==null||H.addEventListener("scrollend",this._updateScrollData,!0),H==null||H.addEventListener("resize",this._updateScrollData)}scrollElement(){if(!this.instance.config.scroll_root_selector)return H==null?void 0:H.document.documentElement;var e=Qt(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector];for(var n of e){var i=H==null?void 0:H.document.querySelector(n);if(i)return i}}scrollY(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return H&&(H.scrollY||H.pageYOffset||H.document.documentElement.scrollTop)||0}scrollX(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return H&&(H.scrollX||H.pageXOffset||H.document.documentElement.scrollLeft)||0}}function Gw(t,e){return e.length>t?e.slice(0,t)+"...":e}function GU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!fy(e));return e}function KU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};rx.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=Gw(1024,nI(t)):s.$el_text=Gw(1024,py(t)));var o=Ov(t);o.length>0&&(s.classes=o.filter(function(c){return c!==""})),Ct(t.attributes,function(c){var d;if((!QO(t)||["name","id","class","aria-label"].indexOf(c.name)!==-1)&&(i==null||!i.includes(c.name))&&!e&&hd(c.value)&&(d=c.name,!Qn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var h=c.value;c.name==="class"&&(h=_k(h).join(" ")),s["attr__"+c.name]=Gw(1024,h)}});for(var a=1,l=1,u=t;u=GU(u);)a++,u.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function XU(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,u=[t],c=t;c.parentNode&&!Ha(c,"body");)qO(c.parentNode)?(u.push(c.parentNode.host),c=c.parentNode.host):(u.push(c.parentNode),c=c.parentNode);var d,h=[],f={},p=!1,g=!1;if(Ct(u,x=>{var k=sx(x);x.tagName.toLowerCase()==="a"&&(p=x.getAttribute("href"),p=k&&p&&hd(p)&&p),it(Ov(x),"ph-no-capture")&&(g=!0),h.push(KU(x,s,o,a));var E=function(C){if(!sx(C))return{};var P={};return Ct(C.attributes,function(N){if(N.name&&N.name.indexOf("data-ph-capture-attribute")===0){var I=N.name.replace("data-ph-capture-attribute-",""),L=N.value;I&&L&&hd(L)&&(P[I]=L)}}),P}(x);fi(f,E)}),g)return{props:{},explicitNoCapture:g};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?h[0].$el_text=nI(t):h[0].$el_text=py(t)),p){var b,v;h[0].attr__href=p;var y=(b=Lc(p))===null||b===void 0?void 0:b.host,w=H==null||(v=H.location)===null||v===void 0?void 0:v.host;y&&w&&y!==w&&(d=p)}return{props:fi({$event_type:r.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:Q6(h)},(n=h[0])!==null&&n!==void 0&&n.$el_text?{$el_text:(i=h[0])===null||i===void 0?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},f)}}class qU{constructor(e){we(this,"_initialized",!1),we(this,"_isDisabledServerSide",null),we(this,"rageclicks",new CI),we(this,"_elementsChainAsString",!1),this.instance=e,this._elementSelectors=null}get config(){var e,n,i=un(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)===null||e===void 0?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)===null||n===void 0?void 0:n.map(r=>new RegExp(r)),i}_addDomEventHandlers(){if(this.isBrowserSupported()){if(H&&Ee){var e=i=>{i=i||(H==null?void 0:H.event);try{this._captureEvent(i)}catch(r){J.error("Failed to capture event",r)}},n=i=>{i=i||(H==null?void 0:H.event),this._captureEvent(i,Lw)};To(Ee,"submit",e,!1,!0),To(Ee,"change",e,!1,!0),To(Ee,"click",e,!1,!0),this.config.capture_copied_text&&(To(Ee,"copy",n,!1,!0),To(Ee,"cut",n,!1,!0))}}else J.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}afterDecideResponse(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[nP]:!!e.autocapture_opt_out}),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this._elementSelectors=e}getElementSelectors(e){var n,i=[];return(n=this._elementSelectors)===null||n===void 0||n.forEach(r=>{var s=Ee==null?void 0:Ee.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)===null||e===void 0?void 0:e.props[nP],r=this._isDisabledServerSide;if(xl(r)&&!ou(i)&&!this.instance.config.advanced_disable_decide)return!1;var s=(n=this._isDisabledServerSide)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}_captureEvent(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"$autocapture";if(this.isEnabled){var i,r=ZO(e);XO(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!==null&&i!==void 0&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._captureEvent(e,"$rageclick");var s=n===Lw;if(r&&X6(r,e,this.config,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=XU(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===Lw){var u,c=YO(H==null||(u=H.getSelection())===null||u===void 0?void 0:u.toString()),d=e.type||"clipboard";if(!c)return!1;o.$selected_content=c,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Tr(Ee==null?void 0:Ee.querySelectorAll)}}class YU{constructor(e){we(this,"_restoreXHRPatch",void 0),we(this,"_restoreFetchPatch",void 0),we(this,"_startCapturing",()=>{var n,i,r,s;De(this._restoreXHRPatch)&&((n=Xe.__PosthogExtensions__)===null||n===void 0||(i=n.tracingHeadersPatchFns)===null||i===void 0||i._patchXHR(this.instance.sessionManager)),De(this._restoreFetchPatch)&&((r=Xe.__PosthogExtensions__)===null||r===void 0||(s=r.tracingHeadersPatchFns)===null||s===void 0||s._patchFetch(this.instance.sessionManager))}),this.instance=e}_loadScript(e){var n,i,r;(n=Xe.__PosthogExtensions__)!==null&&n!==void 0&&n.tracingHeadersPatchFns&&e(),(i=Xe.__PosthogExtensions__)===null||i===void 0||(r=i.loadExternalDependency)===null||r===void 0||r.call(i,this.instance,"tracing-headers",s=>{if(s)return J.error("[TRACING-HEADERS] failed to load script",s);e()})}startIfEnabledOrStop(){var e,n;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):((e=this._restoreXHRPatch)===null||e===void 0||e.call(this),(n=this._restoreFetchPatch)===null||n===void 0||n.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}var da;(function(t){t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED"})(da||(da={}));class ZU{constructor(e){this.instance=e}get config(){return this.instance.config}get consent(){return this.getDnt()?da.DENIED:this.storedConsent}isOptedOut(){return this.consent===da.DENIED||this.consent===da.PENDING&&this.config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.storage.set(this.storageKey,e?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}reset(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}get storageKey(){var{token:e,opt_out_capturing_cookie_prefix:n}=this.instance.config;return(n||"__ph_opt_in_out_")+e}get storedConsent(){var e=this.storage.get(this.storageKey);return e==="1"?da.GRANTED:e==="0"?da.DENIED:da.PENDING}get storage(){if(!this._storage){var e=this.config.opt_out_capturing_persistence_type;this._storage=e==="localStorage"?mn:Io;var n=e==="localStorage"?Io:mn;n.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut(n.get(this.storageKey)==="1"),n.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}getDnt(){return!!this.config.respect_dnt&&!!CO([nr==null?void 0:nr.doNotTrack,nr==null?void 0:nr.msDoNotTrack,Xe.doNotTrack],e=>it([!0,1,"1","yes"],e))}}var Am="[Exception Autocapture]";class JU{constructor(e){var n;we(this,"originalOnUnhandledRejectionHandler",void 0),we(this,"startCapturing",()=>{var i,r,s,o;if(H&&this.isEnabled&&!this.hasHandlers&&!this.isCapturing){var a=(i=Xe.__PosthogExtensions__)===null||i===void 0||(r=i.errorWrappingFunctions)===null||r===void 0?void 0:r.wrapOnError,l=(s=Xe.__PosthogExtensions__)===null||s===void 0||(o=s.errorWrappingFunctions)===null||o===void 0?void 0:o.wrapUnhandledRejection;if(a&&l)try{this.unwrapOnError=a(this.captureException.bind(this)),this.unwrapUnhandledRejection=l(this.captureException.bind(this))}catch(u){J.error(Am+" failed to start",u),this.stopCapturing()}else J.error(Am+" failed to load error wrapping functions - cannot start")}}),this.instance=e,this.remoteEnabled=!((n=this.instance.persistence)===null||n===void 0||!n.props[iP]),this.startIfEnabled()}get isEnabled(){var e;return(e=this.remoteEnabled)!==null&&e!==void 0&&e}get isCapturing(){var e;return!(H==null||(e=H.onerror)===null||e===void 0||!e.__POSTHOG_INSTRUMENTED__)}get hasHandlers(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}startIfEnabled(){this.isEnabled&&!this.isCapturing&&(J.info(Am+" enabled, starting..."),this.loadScript(this.startCapturing))}loadScript(e){var n,i;this.hasHandlers&&e(),(n=Xe.__PosthogExtensions__)===null||n===void 0||(i=n.loadExternalDependency)===null||i===void 0||i.call(n,this.instance,"exception-autocapture",r=>{if(r)return J.error(Am+" failed to load script",r);e()})}stopCapturing(){var e,n;(e=this.unwrapOnError)===null||e===void 0||e.call(this),(n=this.unwrapUnhandledRejection)===null||n===void 0||n.call(this)}afterDecideResponse(e){var n=e.autocaptureExceptions;this.remoteEnabled=!!n||!1,this.instance.persistence&&this.instance.persistence.register({[iP]:this.remoteEnabled}),this.startIfEnabled()}captureException(e){var n=this.instance.requestRouter.endpointFor("ui");e.$exception_personURL="".concat(n,"/project/").concat(this.instance.config.token,"/person/").concat(this.instance.get_distinct_id()),this.instance.exceptions.sendExceptionEvent(e)}}var BP=9e5,Bl="[Web Vitals]";class QU{constructor(e){var n;we(this,"_enabledServerSide",!1),we(this,"_initialized",!1),we(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),we(this,"_flushToCapture",()=>{clearTimeout(this._delayedFlushTimer),this.buffer.metrics.length!==0&&(this.instance.capture("$web_vitals",this.buffer.metrics.reduce((i,r)=>le(le({},i),{},{["$web_vitals_".concat(r.name,"_event")]:le({},r),["$web_vitals_".concat(r.name,"_value")]:r.value}),{})),this.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})}),we(this,"_addToBuffer",i=>{var r,s=(r=this.instance.sessionManager)===null||r===void 0?void 0:r.checkAndGetSessionAndWindowId(!0);if(De(s))J.error(Bl+"Could not read session ID. Dropping metrics!");else{this.buffer=this.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this._currentURL();De(o)||(Nt(i==null?void 0:i.name)||Nt(i==null?void 0:i.value)?J.error(Bl+"Invalid metric received",i):this._maxAllowedValue&&i.value>=this._maxAllowedValue?J.error(Bl+"Ignoring metric with value >= "+this._maxAllowedValue,i):(this.buffer.url!==o&&(this._flushToCapture(),this._delayedFlushTimer=setTimeout(this._flushToCapture,this.flushToCaptureTimeoutMs)),De(this.buffer.url)&&(this.buffer.url=o),this.buffer.firstMetricTimestamp=De(this.buffer.firstMetricTimestamp)?Date.now():this.buffer.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.buffer.metrics.push(le(le({},i),{},{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.buffer.metrics.length===this.allowedMetrics.length&&this._flushToCapture()))}}),we(this,"_startCapturing",()=>{var i,r,s,o,a=Xe.__PosthogExtensions__;De(a)||De(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this._addToBuffer.bind(this)),this._initialized=!0):J.error(Bl+"web vitals callbacks not loaded - not starting")}),this.instance=e,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[rP]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=un(this.instance.config.capture_performance)?(e=this.instance.config.capture_performance)===null||e===void 0?void 0:e.web_vitals_allowed_metrics:void 0;return De(i)?((n=this.instance.persistence)===null||n===void 0?void 0:n.props[sP])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(un(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get _maxAllowedValue(){var e=un(this.instance.config.capture_performance)&&er(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:BP;return 0<e&&e<=6e4?BP:e}get isEnabled(){var e=un(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return ou(e)?e:this._enabledServerSide}startIfEnabled(){this.isEnabled&&!this._initialized&&(J.info(Bl+" enabled, starting..."),this.loadScript(this._startCapturing))}afterDecideResponse(e){var n=un(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=un(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this.instance.persistence&&(this.instance.persistence.register({[rP]:n}),this.instance.persistence.register({[sP]:i})),this._enabledServerSide=n,this.startIfEnabled()}loadScript(e){var n,i,r;(n=Xe.__PosthogExtensions__)!==null&&n!==void 0&&n.postHogWebVitalsCallbacks&&e(),(i=Xe.__PosthogExtensions__)===null||i===void 0||(r=i.loadExternalDependency)===null||r===void 0||r.call(i,this.instance,"web-vitals",s=>{s?J.error(Bl+" failed to load script",s):e()})}_currentURL(){var e=H?H.location.href:void 0;return e||J.error(Bl+"Could not determine current URL"),e}}var e9={icontains:(t,e)=>!!H&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!H&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!H&&cd(e.href,t),not_regex:(t,e)=>!!H&&!cd(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};class En{constructor(e){var n=this;we(this,"getWebExperimentsAndEvaluateDisplayLogic",function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];n.getWebExperiments(r=>{En.logInfo("retrieved web experiments from the server"),n._flagToExperiments=new Map,r.forEach(s=>{if(s.feature_flag_key&&n._featureFlags&&n._featureFlags[s.feature_flag_key]){var o;n._flagToExperiments&&(En.logInfo("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n._flagToExperiments)===null||o===void 0||o.set(s.feature_flag_key,s));var a=n._featureFlags[s.feature_flag_key];a&&s.variants[a]&&n.applyTransforms(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var u=s.variants[l];En.matchesTestVariant(u)&&n.applyTransforms(s.name,l,u.transforms)}})},i)}),this.instance=e,this.instance.onFeatureFlags&&this.instance.onFeatureFlags(i=>{this.applyFeatureFlagChanges(i)}),this._flagToExperiments=new Map}applyFeatureFlagChanges(e){Nt(this._flagToExperiments)||this.instance.config.disable_web_experiments||(En.logInfo("applying feature flags",e),e.forEach(n=>{var i;if(this._flagToExperiments&&(i=this._flagToExperiments)!==null&&i!==void 0&&i.has(n)){var r,s=this.instance.getFeatureFlag(n),o=(r=this._flagToExperiments)===null||r===void 0?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.applyTransforms(o.name,s,o.variants[s].transforms)}}))}afterDecideResponse(e){this._is_bot()?En.logInfo("Refusing to render web experiment since the viewer is a likely bot"):(this._featureFlags=e.featureFlags,this.loadIfEnabled(),this.previewWebExperiment())}previewWebExperiment(){var e=En.getWindowLocation();if(e!=null&&e.search){var n=Tv(e==null?void 0:e.search,"__experiment_id"),i=Tv(e==null?void 0:e.search,"__experiment_variant");n&&i&&(En.logInfo("previewing web experiments ".concat(n," && ").concat(i)),this.getWebExperiments(r=>{this.showPreviewWebExperiment(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this.instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this.instance.config.disable_web_experiments&&!i)return e([]);var r=this.instance.get_property("$web_experiments");if(r&&!n)return e(r);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/web_experiments/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}showPreviewWebExperiment(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(En.logInfo("Previewing web experiment [".concat(r[0].name,"] with variant [").concat(n,"]")),this.applyTransforms(r[0].name,n,r[0].variants[n].transforms,!0))}static matchesTestVariant(e){return!Nt(e.conditions)&&En.matchUrlConditions(e)&&En.matchUTMConditions(e)}static matchUrlConditions(e){var n;if(Nt(e.conditions)||Nt((n=e.conditions)===null||n===void 0?void 0:n.url))return!0;var i,r,s,o=En.getWindowLocation();return!!o&&((i=e.conditions)===null||i===void 0||!i.url||e9[(r=(s=e.conditions)===null||s===void 0?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return H==null?void 0:H.location}static matchUTMConditions(e){var n;if(Nt(e.conditions)||Nt((n=e.conditions)===null||n===void 0?void 0:n.utm))return!0;var i=sn.campaignParams();if(i.utm_source){var r,s,o,a,l,u,c,d,h,f,p,g,b,v,y,w,x=(r=e.conditions)===null||r===void 0||(s=r.utm)===null||s===void 0||!s.utm_campaign||((o=e.conditions)===null||o===void 0||(a=o.utm)===null||a===void 0?void 0:a.utm_campaign)==i.utm_campaign,k=(l=e.conditions)===null||l===void 0||(u=l.utm)===null||u===void 0||!u.utm_source||((c=e.conditions)===null||c===void 0||(d=c.utm)===null||d===void 0?void 0:d.utm_source)==i.utm_source,E=(h=e.conditions)===null||h===void 0||(f=h.utm)===null||f===void 0||!f.utm_medium||((p=e.conditions)===null||p===void 0||(g=p.utm)===null||g===void 0?void 0:g.utm_medium)==i.utm_medium,C=(b=e.conditions)===null||b===void 0||(v=b.utm)===null||v===void 0||!v.utm_term||((y=e.conditions)===null||y===void 0||(w=y.utm)===null||w===void 0?void 0:w.utm_term)==i.utm_term;return x&&E&&C&&k}return!1}static logInfo(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];J.info("[WebExperiments] ".concat(e),i)}applyTransforms(e,n,i,r){var s;this._is_bot()?En.logInfo("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(o=>{if(o.selector){var a;En.logInfo("applying transform of variant ".concat(n," for experiment ").concat(e," "),o);var l,u=0,c=(a=document)===null||a===void 0?void 0:a.querySelectorAll(o.selector);c==null||c.forEach(d=>{var h=d;u+=1,o.attributes&&o.attributes.forEach(f=>{switch(f.name){case"text":h.innerText=f.value;break;case"html":h.innerHTML=f.value;break;case"cssClass":h.className=f.value;break;default:h.setAttribute(f.name,f.value)}}),o.text&&(h.innerText=o.text),o.html&&(h.parentElement?h.parentElement.innerHTML=o.html:h.innerHTML=o.html),o.css&&h.setAttribute("style",o.css)}),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_variant:n,$web_experiment_preview:r,$web_experiment_document_url:(l=En.getWindowLocation())===null||l===void 0?void 0:l.href,$web_experiment_elements_modified:u})}}):(En.logInfo("Control variants leave the page unmodified."),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_preview:r,$web_experiment_variant:n,$web_experiment_document_url:(s=En.getWindowLocation())===null||s===void 0?void 0:s.href,$web_experiment_elements_modified:0}))}_is_bot(){return nr&&this.instance?kI(nr,this.instance.config.custom_blocked_useragents):void 0}}class t9{constructor(e){this.instance=e}sendExceptionEvent(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var n9=["$set_once","$set"];class i9{constructor(e){this.instance=e,this.enabled=!!this.instance.config.opt_in_site_apps&&!this.instance.config.advanced_disable_decide,this.missedInvocations=[],this.loaded=!1,this.appsLoading=new Set}eventCollector(e,n){if(this.enabled&&!this.loaded&&n){var i=this.globalsForEvent(n);this.missedInvocations.push(i),this.missedInvocations.length>1e3&&(this.missedInvocations=this.missedInvocations.slice(10))}}init(){var e;(e=this.instance)===null||e===void 0||e._addCaptureHook(this.eventCollector.bind(this))}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var u={},c=this.instance.get_property("$groups")||[],d=this.instance.get_property("$stored_group_properties")||{};for(var[h,f]of Object.entries(d))u[h]={id:c[h],type:h,properties:f};var{$set_once:p,$set:g}=e;return{event:le(le({},PO(e,n9)),{},{properties:le(le(le({},e.properties),g?{$set:le(le({},(n=(i=e.properties)===null||i===void 0?void 0:i.$set)!==null&&n!==void 0?n:{}),g)}:{}),p?{$set_once:le(le({},(r=(s=e.properties)===null||s===void 0?void 0:s.$set_once)!==null&&r!==void 0?r:{}),p)}:{}),elements_chain:(o=(a=e.properties)===null||a===void 0?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)===null||l===void 0?void 0:l.distinct_id}),person:{properties:this.instance.get_property("$stored_person_properties")},groups:u}}afterDecideResponse(e){var n=this;Qt(e==null?void 0:e.siteApps)&&e.siteApps.length>0?this.enabled&&this.instance.config.opt_in_site_apps?function(){var i=()=>{n.appsLoading.size===0&&(n.loaded=!0,n.missedInvocations=[])},r=function(a,l){var u,c;n.appsLoading.add(a),Xe["__$$ph_site_app_".concat(a,"_posthog")]=n.instance,Xe["__$$ph_site_app_".concat(a,"_missed_invocations")]=()=>n.missedInvocations,Xe["__$$ph_site_app_".concat(a,"_callback")]=()=>{n.appsLoading.delete(a),i()},(u=Xe.__PosthogExtensions__)===null||u===void 0||(c=u.loadSiteApp)===null||c===void 0||c.call(u,n.instance,l,d=>{if(d)return n.appsLoading.delete(a),i(),J.error("Error while initializing PostHog app with config id ".concat(a),d)})};for(var{id:s,url:o}of e.siteApps)r(s,o)}():e.siteApps.length>0?(J.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.'),this.loaded=!0):this.loaded=!0:(this.loaded=!0,this.enabled=!1)}}var Zh={},gx=()=>{},oc="posthog",AI=!SU&&(Pn==null?void 0:Pn.indexOf("MSIE"))===-1&&(Pn==null?void 0:Pn.indexOf("Mozilla"))===-1,zP=()=>{var t,e,n;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(e=Ee==null?void 0:Ee.location,n=e==null?void 0:e.hostname,!!Qn(n)&&n.split(".").slice(-2).join(".")!=="herokuapp.com"),persistence:"localStorage+cookie",persistence_name:"",loaded:gx,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:Ni&&Qn(Ni==null?void 0:Ni.search)&&Ni.search.indexOf("__posthog_debug=true")!==-1||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:(H==null||(t=H.location)===null||t===void 0?void 0:t.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:i=>{var r="Bad HTTP status: "+i.statusCode+" "+i.text;J.error(r)},get_device_id:i=>i,_onCapture:gx,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",__add_tracing_headers:!1,before_send:void 0}},UP=t=>{var e={};De(t.process_person)||(e.person_profiles=t.process_person),De(t.xhr_headers)||(e.request_headers=t.xhr_headers),De(t.cookie_name)||(e.persistence_name=t.cookie_name),De(t.disable_cookie)||(e.disable_persistence=t.disable_cookie);var n=fi({},e,t);return Qt(t.property_blacklist)&&(De(t.property_denylist)?n.property_denylist=t.property_blacklist:Qt(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:J.error("Invalid value for property_denylist config: "+t.property_denylist)),n};class r9{constructor(){we(this,"__forceAllowLocalhost",!1)}get _forceAllowLocalhost(){return this.__forceAllowLocalhost}set _forceAllowLocalhost(e){J.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class my{constructor(){we(this,"webPerformance",new r9),we(this,"version",ua.LIB_VERSION),we(this,"_internalEventEmitter",new fI),this.config=zP(),this.decideEndpointWasHit=!1,this.SentryIntegration=AU,this.sentryIntegration=e=>function(n,i){var r=hI(n,i);return{name:dI,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._initialPersonProfilesConfig=null,this.featureFlags=new C6(this),this.toolbar=new bU(this),this.scrollManager=new WU(this),this.pageViewManager=new TU(this),this.surveys=new jU(this),this.experiments=new En(this),this.exceptions=new t9(this),this.rateLimiter=new FU(this),this.requestRouter=new EU(this),this.consent=new ZU(this),this.people={set:(e,n,i)=>{var r=Qn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=Qn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>J.info('send "'.concat(e==null?void 0:e.event,'"'),e))}init(e,n,i){if(i&&i!==oc){var r,s=(r=Zh[i])!==null&&r!==void 0?r:new my;return s._init(e,n,i),Zh[i]=s,Zh[oc][i]=s,s}return this._init(e,n,i)}_init(e){var n,i,r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(De(e)||JA(e))return J.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return J.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],s.person_profiles&&(this._initialPersonProfilesConfig=s.person_profiles),this.set_config(fi({},zP(),UP(s),{name:o,token:e})),this.config.on_xhr_error&&J.error("[posthog] on_xhr_error is deprecated. Use on_request_error instead"),this.compression=s.disable_compression?void 0:ss.GZipJS,this.persistence=new Uw(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Uw(le(le({},this.config),{},{persistence:"sessionStorage"}));var a=le({},this.persistence.props),l=le({},this.sessionPersistence.props);if(this._requestQueue=new xU(y=>this._send_retriable_request(y)),this._retryQueue=new kU(this),this.__request_queue=[],this.sessionManager=new CU(this.config,this.persistence),this.sessionPropsManager=new BU(this.sessionManager,this.persistence),new YU(this).startIfEnabledOrStop(),this.siteApps=new i9(this),(n=this.siteApps)===null||n===void 0||n.init(),this.sessionRecording=new vU(this),this.sessionRecording.startIfEnabledOrStop(),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new qU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new VU(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new QU(this),this.exceptionObserver=new JU(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new EI(this,HU),this.deadClicksAutocapture.startIfEnabled(),ua.DEBUG=ua.DEBUG||this.config.debug,ua.DEBUG&&J.info("Starting in debug mode",{this:this,config:s,thisC:le({},this.config),p:a,s:l}),this._sync_opt_out_with_persistence(),((i=s.bootstrap)===null||i===void 0?void 0:i.distinctID)!==void 0){var u,c,d=this.config.get_device_id(Pa()),h=(u=s.bootstrap)!==null&&u!==void 0&&u.isIdentifiedID?d:s.bootstrap.distinctID;this.persistence.set_property(ho,(c=s.bootstrap)!==null&&c!==void 0&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:s.bootstrap.distinctID,$device_id:h})}if(this._hasBootstrappedFeatureFlags()){var f,p,g=Object.keys(((f=s.bootstrap)===null||f===void 0?void 0:f.featureFlags)||{}).filter(y=>{var w,x;return!((w=s.bootstrap)===null||w===void 0||(x=w.featureFlags)===null||x===void 0||!x[y])}).reduce((y,w)=>{var x,k;return y[w]=((x=s.bootstrap)===null||x===void 0||(k=x.featureFlags)===null||k===void 0?void 0:k[w])||!1,y},{}),b=Object.keys(((p=s.bootstrap)===null||p===void 0?void 0:p.featureFlagPayloads)||{}).filter(y=>g[y]).reduce((y,w)=>{var x,k,E,C;return(x=s.bootstrap)!==null&&x!==void 0&&(k=x.featureFlagPayloads)!==null&&k!==void 0&&k[w]&&(y[w]=(E=s.bootstrap)===null||E===void 0||(C=E.featureFlagPayloads)===null||C===void 0?void 0:C[w]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:b})}if(!this.get_distinct_id()){var v=this.config.get_device_id(Pa());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(ho,"anonymous")}return H==null||(r=H.addEventListener)===null||r===void 0||r.call(H,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),s.segment?PU(this,()=>this._loaded()):this._loaded(),Tr(this.config._onCapture)&&this.config._onCapture!==gx&&(J.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this}_afterDecideResponse(e){var n,i,r,s,o,a,l,u,c,d;this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=it(e.supportedCompression,ss.GZipJS)?ss.GZipJS:it(e.supportedCompression,ss.Base64)?ss.Base64:void 0),(n=e.analytics)!==null&&n!==void 0&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:e.defaultIdentifiedOnly?"identified_only":"always"}),(i=this.siteApps)===null||i===void 0||i.afterDecideResponse(e),(r=this.sessionRecording)===null||r===void 0||r.afterDecideResponse(e),(s=this.autocapture)===null||s===void 0||s.afterDecideResponse(e),(o=this.heatmaps)===null||o===void 0||o.afterDecideResponse(e),(a=this.experiments)===null||a===void 0||a.afterDecideResponse(e),(l=this.surveys)===null||l===void 0||l.afterDecideResponse(e),(u=this.webVitalsAutocapture)===null||u===void 0||u.afterDecideResponse(e),(c=this.exceptionObserver)===null||c===void 0||c.afterDecideResponse(e),(d=this.deadClicksAutocapture)===null||d===void 0||d.afterDecideResponse(e)}_loaded(){var e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(n){J.critical("`loaded` function failed",n)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this._captureInitialPageview()},1),e||(new yU(this).call(),this.featureFlags.resetRequestQueue())}_start_queue_if_opted_in(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this._requestQueue)===null||e===void 0||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||Dc(this.__request_queue,e=>this._send_retriable_request(e)),this.__request_queue=[],this._start_queue_if_opted_in()}_handle_unload(){var e,n;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),(e=this._requestQueue)===null||e===void 0||e.unload(),(n=this._retryQueue)===null||n===void 0||n.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(AI?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Dv(e.url,{ip:this.config.ip?1:0}),e.headers=le({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,(n=>{var i,r,s,o=le({},n);o.timeout=o.timeout||6e4,o.url=Dv(o.url,{_:new Date().getTime().toString(),ver:ua.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"XHR",l=(r=(s=CO(Yh,u=>u.transport===a))===null||s===void 0?void 0:s.method)!==null&&r!==void 0?r:Yh[0].method;if(!l)throw new Error("No available transport method");l(o)})(le(le({},e),{},{callback:n=>{var i,r,s;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(s=this.config).on_request_error)===null||r===void 0||r.call(s,n)),(i=e.callback)===null||i===void 0||i.call(e,n)}}))))}_send_retriable_request(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}_execute_array(e){var n,i=[],r=[],s=[];Dc(e,a=>{a&&(n=a[0],Qt(n)?s.push(a):Tr(a)?a.call(this):Qt(a)&&n==="alias"?i.push(a):Qt(a)&&n.indexOf("capture")!==-1&&Tr(this[n])?s.push(a):r.push(a))});var o=function(a,l){Dc(a,function(u){if(Qt(u[0])){var c=l;Ct(u,function(d){c=c[d[0]].apply(c,d.slice(1))})}else this[u[0]].apply(this,u.slice(1))},l)};o(i,this),o(r,this),o(s,this)}_hasBootstrappedFeatureFlags(){var e,n;return((e=this.config.bootstrap)===null||e===void 0?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)===null||n===void 0?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(!this.consent.isOptedOut())if(!De(e)&&Qn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.store_google||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l={uuid:Pa(),event:e,properties:this._calculate_event_properties(e,n||{},a)};s&&(l.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(l.$set=i==null?void 0:i.$set);var u=this._calculate_set_once_properties(i==null?void 0:i.$set_once);u&&(l.$set_once=u),(l=y6(l,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,De(i==null?void 0:i.timestamp)||(l.properties.$event_time_override_provided=!0,l.properties.$event_time_override_system_time=o);var c=le(le({},l.properties.$set),l.$set);if(fc(c)||this.setPersonPropertiesForFlags(c),!Nt(this.config.before_send)){var d=this._runBeforeSend(l);if(!d)return;l=d}this._internalEventEmitter.emit("eventCaptured",l);var h={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:l,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this._send_retriable_request(h):this._requestQueue.enqueue(h),l}J.critical("This capture call is ignored due to client rate limiting.")}}else J.error("No event name provided to posthog.capture")}else J.uninitializedWarning("posthog.capture")}_addCaptureHook(e){return this.on("eventCaptured",n=>e(n.event,n))}_calculate_event_properties(e,n,i){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var r=this.persistence.remove_event_timer(e),s=le({},n);if(s.token=this.config.token,e==="$snapshot"){var o=le(le({},this.persistence.properties()),this.sessionPersistence.properties());return s.distinct_id=o.distinct_id,(!Qn(s.distinct_id)&&!er(s.distinct_id)||JA(s.distinct_id))&&J.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var a=sn.properties();if(this.sessionManager){var{sessionId:l,windowId:u}=this.sessionManager.checkAndGetSessionAndWindowId();s.$session_id=l,s.$window_id=u}if(this.requestRouter.region===au.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&(e==="$pageview"||e==="$pageleave"||e==="$autocapture")){var c=this.sessionPropsManager.getSessionProps();s=fi(s,c)}if(!this.config.disable_scroll_properties){var d={};e==="$pageview"?d=this.pageViewManager.doPageView(i):e==="$pageleave"&&(d=this.pageViewManager.doPageLeave(i)),s=fi(s,d)}if(e==="$pageview"&&Ee&&(s.title=Ee.title),!De(r)){var h=i.getTime()-r;s.$duration=parseFloat((h/1e3).toFixed(3))}Pn&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=fi({},a,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),Qt(this.config.property_denylist)?Ct(this.config.property_denylist,function(g){delete s[g]}):J.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var f=this.config.sanitize_properties;f&&(s=f(s,e));var p=this._hasPersonProcessing();return s.$process_person_profile=p,p&&this._requirePersonProcessing("_calculate_event_properties"),s}_calculate_set_once_properties(e){if(!this.persistence||!this._hasPersonProcessing())return e;var n=fi({},this.persistence.get_initial_props(),e||{}),i=this.config.sanitize_properties;return i&&(n=i(n,"$set_once")),fc(n)?void 0:n}register(e,n){var i;(i=this.persistence)===null||i===void 0||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)===null||r===void 0||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.register(e)}unregister(e){var n;(n=this.persistence)===null||n===void 0||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.unregister(e)}_register_single(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,n)}on(e,n){return this._internalEventEmitter.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)===null||i===void 0?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){this.surveys.canRenderSurvey(e)}getNextSurveyStep(e,n,i){return this.surveys.getNextSurveyStep(e,n,i)}identify(e,n,i){if(!this.__loaded||!this.persistence)return J.uninitializedWarning("posthog.identify");if(er(e)&&(e=e.toString(),J.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))J.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(Ah)&&(this.unregister(Ah),this.register({distinct_id:e}));var o=(this.persistence.get_property(ho)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(ho,"identified"),this.setPersonPropertiesForFlags(n||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(Av))}}else J.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){(e||n)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:n||{}}))}group(e,n,i){if(e&&n){if(this._requirePersonProcessing("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:le(le({},r),{},{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else J.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setPersonPropertiesForFlags")&&this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s,o;if(J.info("reset"),!this.__loaded)return J.uninitializedWarning("posthog.reset");var a=this.get_property("$device_id");this.consent.reset(),(n=this.persistence)===null||n===void 0||n.clear(),(i=this.sessionPersistence)===null||i===void 0||i.clear(),(r=this.surveys)===null||r===void 0||r.reset(),(s=this.persistence)===null||s===void 0||s.set_property(ho,"anonymous"),(o=this.sessionManager)===null||o===void 0||o.resetSessionId();var l=this.config.get_device_id(Pa());this.register_once({distinct_id:l,$device_id:e?l:a},"")}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)===null||n===void 0?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(n));if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;var a=Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0);r+="?t=".concat(a)}return r}alias(e,n){return e===this.get_property(TO)?(J.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(De(n)&&(n=this.get_distinct_id()),e!==n?(this._register_single(Ah,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(J.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o=le({},this.config);un(e)&&(fi(this.config,UP(e)),(n=this.persistence)===null||n===void 0||n.update_config(this.config,o),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Uw(le(le({},this.config),{},{persistence:"sessionStorage"})),mn.is_supported()&&mn.get("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(ua.DEBUG=!0,J.info("set_config",{config:e,oldConfig:o,newConfig:le({},this.config)})),(i=this.sessionRecording)===null||i===void 0||i.startIfEnabledOrStop(),(r=this.autocapture)===null||r===void 0||r.startIfEnabled(),(s=this.heatmaps)===null||s===void 0||s.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)===null||r===void 0||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)===null||s===void 0||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)===null||o===void 0||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)===null||a===void 0||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)===null||l===void 0||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)===null||e===void 0||!e.started)}captureException(e,n){var i,r=new Error("PostHog syntheticException"),s=Tr((i=Xe.__PosthogExtensions__)===null||i===void 0?void 0:i.parseErrorAsProperties)?Xe.__PosthogExtensions__.parseErrorAsProperties([e.message,void 0,void 0,void 0,e],{syntheticException:r}):le({$exception_level:"error",$exception_list:[{type:e.name,value:e.message,mechanism:{handled:!0,synthetic:!1}}]},n);this.exceptions.sendExceptionEvent(s)}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)===null||n===void 0?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)===null||n===void 0?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:oc;return n!==oc&&(n=oc+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)===null||e===void 0?void 0:e.get_property(ho))==="identified"||((n=this.sessionPersistence)===null||n===void 0?void 0:n.get_property(ho))==="identified"}_hasPersonProcessing(){var e,n,i,r;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&fc(this.getGroups())&&((e=this.persistence)===null||e===void 0||(n=e.props)===null||n===void 0||!n[Ah])&&((i=this.persistence)===null||i===void 0||(r=i.props)===null||r===void 0||!r[Pv]))}_shouldCapturePageleave(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&this.config.capture_pageview}createPersonProfile(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}_requirePersonProcessing(e){return this.config.person_profiles==="never"?(J.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(Pv,!0),!0)}_sync_opt_out_with_persistence(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)===null||e===void 0?void 0:e.disabled)!==a&&((i=this.persistence)===null||i===void 0||i.set_disabled(a)),((n=this.sessionPersistence)===null||n===void 0?void 0:n.disabled)!==a&&((r=this.sessionPersistence)===null||r===void 0||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(De(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}opt_out_capturing(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._sync_opt_out_with_persistence()}_is_bot(){return nr?kI(nr,this.config.custom_blocked_useragents):void 0}_captureInitialPageview(){Ee&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:Ee.title},{send_instantly:!0}))}debug(e){e===!1?(H==null||H.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(H==null||H.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}_runBeforeSend(e){if(Nt(this.config.before_send))return e;var n=Qt(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),Nt(i)){var s="Event '".concat(e.event,"' was rejected in beforeSend function");return _6(e.event)?J.warn("".concat(s,". This can cause unexpected behavior.")):J.info(s),null}i.properties&&!fc(i.properties)||J.warn("Event '".concat(e.event,"' has no properties after beforeSend function, this is likely an error."))}return i}}(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=v6(t.prototype[e[n]])})(my,["identify"]);var HP,$c=(HP=Zh[oc]=new my,function(){function t(){t.done||(t.done=!0,AI=!1,Ct(Zh,function(e){e._dom_loaded()}))}Ee!=null&&Ee.addEventListener&&(Ee.readyState==="complete"?t():Ee.addEventListener("DOMContentLoaded",t,!1)),H&&To(H,"load",t,!0)}(),HP),s9=S.createContext({client:$c});function o9(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=S.useMemo(function(){return n&&i&&console.warn("[PostHog.js] You have provided both a client and an apiKey to PostHogProvider. The apiKey will be ignored in favour of the client."),n&&r&&console.warn("[PostHog.js] You have provided both a client and options to PostHogProvider. The options will be ignored in favour of the client."),n||(i&&($c.__loaded&&console.warn("[PostHog.js] was already loaded elsewhere. This may cause issues."),$c.init(i,r)),$c)},[n,i]);return ln.createElement(s9.Provider,{value:{client:s}},e)}var vx={},PI={exports:{}},hr={},TI={exports:{}},NI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,F){var ne=V.length;V.push(F);e:for(;0<ne;){var ke=ne-1>>>1,Z=V[ke];if(0<r(Z,F))V[ke]=F,V[ne]=Z,ne=ke;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var F=V[0],ne=V.pop();if(ne!==F){V[0]=ne;e:for(var ke=0,Z=V.length,ue=Z>>>1;ke<ue;){var D=2*(ke+1)-1,O=V[D],B=D+1,_=V[B];if(0>r(O,ne))B<Z&&0>r(_,O)?(V[ke]=_,V[B]=ne,ke=B):(V[ke]=O,V[D]=ne,ke=D);else if(B<Z&&0>r(_,ne))V[ke]=_,V[B]=ne,ke=B;else break e}}return F}function r(V,F){var ne=V.sortIndex-F.sortIndex;return ne!==0?ne:V.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var F=n(u);F!==null;){if(F.callback===null)i(u);else if(F.startTime<=V)i(u),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(u)}}function x(V){if(g=!1,w(V),!p)if(n(l)!==null)p=!0,ee(k);else{var F=n(u);F!==null&&he(x,F.startTime-V)}}function k(V,F){p=!1,g&&(g=!1,v(P),P=-1),f=!0;var ne=h;try{for(w(F),d=n(l);d!==null&&(!(d.expirationTime>F)||V&&!L());){var ke=d.callback;if(typeof ke=="function"){d.callback=null,h=d.priorityLevel;var Z=ke(d.expirationTime<=F);F=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),w(F)}else i(l);d=n(l)}if(d!==null)var ue=!0;else{var D=n(u);D!==null&&he(x,D.startTime-F),ue=!1}return ue}finally{d=null,h=ne,f=!1}}var E=!1,C=null,P=-1,N=5,I=-1;function L(){return!(t.unstable_now()-I<N)}function $(){if(C!==null){var V=t.unstable_now();I=V;var F=!0;try{F=C(!0,V)}finally{F?G():(E=!1,C=null)}}else E=!1}var G;if(typeof y=="function")G=function(){y($)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,X=U.port2;U.port1.onmessage=$,G=function(){X.postMessage(null)}}else G=function(){b($,0)};function ee(V){C=V,E||(E=!0,G())}function he(V,F){P=b(function(){V(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,ee(k))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var ne=h;h=F;try{return V()}finally{h=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,F){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ne=h;h=V;try{return F()}finally{h=ne}},t.unstable_scheduleCallback=function(V,F,ne){var ke=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ke+ne:ke):ne=ke,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ne+Z,V={id:c++,callback:F,priorityLevel:V,startTime:ne,expirationTime:Z,sortIndex:-1},ne>ke?(V.sortIndex=ne,e(u,V),n(l)===null&&V===n(u)&&(g?(v(P),P=-1):g=!0,he(x,ne-ke))):(V.sortIndex=Z,e(l,V),p||f||(p=!0,ee(k))),V},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(V){var F=h;return function(){var ne=h;h=F;try{return V.apply(this,arguments)}finally{h=ne}}}})(NI);TI.exports=NI;var a9=TI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l9=S,cr=a9;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RI=new Set,Ef={};function Vu(t,e){md(t,e),md(t+"Capture",e)}function md(t,e){for(Ef[t]=e,t=0;t<e.length;t++)RI.add(e[t])}var Fo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yx=Object.prototype.hasOwnProperty,u9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VP={},WP={};function c9(t){return yx.call(WP,t)?!0:yx.call(VP,t)?!1:u9.test(t)?WP[t]=!0:(VP[t]=!0,!1)}function d9(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function h9(t,e,n,i){if(e===null||typeof e>"u"||d9(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Si(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wn[t]=new Si(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wn[e]=new Si(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wn[t]=new Si(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wn[t]=new Si(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wn[t]=new Si(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wn[t]=new Si(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wn[t]=new Si(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wn[t]=new Si(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wn[t]=new Si(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tk=/[\-:]([a-z])/g;function Nk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tk,Nk);Wn[e]=new Si(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tk,Nk);Wn[e]=new Si(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tk,Nk);Wn[e]=new Si(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wn[t]=new Si(t,1,!1,t.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new Si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wn[t]=new Si(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rk(t,e,n,i){var r=Wn.hasOwnProperty(e)?Wn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(h9(e,n,r,i)&&(n=null),i||r===null?c9(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var qo=l9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pm=Symbol.for("react.element"),gc=Symbol.for("react.portal"),vc=Symbol.for("react.fragment"),Mk=Symbol.for("react.strict_mode"),wx=Symbol.for("react.profiler"),MI=Symbol.for("react.provider"),OI=Symbol.for("react.context"),Ok=Symbol.for("react.forward_ref"),bx=Symbol.for("react.suspense"),xx=Symbol.for("react.suspense_list"),Ik=Symbol.for("react.memo"),ha=Symbol.for("react.lazy"),II=Symbol.for("react.offscreen"),GP=Symbol.iterator;function ih(t){return t===null||typeof t!="object"?null:(t=GP&&t[GP]||t["@@iterator"],typeof t=="function"?t:null)}var Xt=Object.assign,Kw;function Rh(t){if(Kw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kw=e&&e[1]||""}return`
`+Kw+t}var Xw=!1;function qw(t,e){if(!t||Xw)return"";Xw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Xw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rh(t):""}function f9(t){switch(t.tag){case 5:return Rh(t.type);case 16:return Rh("Lazy");case 13:return Rh("Suspense");case 19:return Rh("SuspenseList");case 0:case 2:case 15:return t=qw(t.type,!1),t;case 11:return t=qw(t.type.render,!1),t;case 1:return t=qw(t.type,!0),t;default:return""}}function Sx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vc:return"Fragment";case gc:return"Portal";case wx:return"Profiler";case Mk:return"StrictMode";case bx:return"Suspense";case xx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case OI:return(t.displayName||"Context")+".Consumer";case MI:return(t._context.displayName||"Context")+".Provider";case Ok:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ik:return e=t.displayName||null,e!==null?e:Sx(t.type)||"Memo";case ha:e=t._payload,t=t._init;try{return Sx(t(e))}catch{}}return null}function p9(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sx(e);case 8:return e===Mk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function DI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function m9(t){var e=DI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tm(t){t._valueTracker||(t._valueTracker=m9(t))}function LI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=DI(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Fv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _x(t,e){var n=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function KP(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=tl(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jI(t,e){e=e.checked,e!=null&&Rk(t,"checked",e,!1)}function kx(t,e){jI(t,e);var n=tl(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cx(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cx(t,e.type,tl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function XP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cx(t,e,n){(e!=="number"||Fv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mh=Array.isArray;function Bc(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+tl(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Ex(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Mh(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tl(n)}}function FI(t,e){var n=tl(e.value),i=tl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function YP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $I(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ax(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$I(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nm,BI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nm=Nm||document.createElement("div"),Nm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Af(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g9=["Webkit","ms","Moz","O"];Object.keys(Jh).forEach(function(t){g9.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jh[e]=Jh[t]})});function zI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jh.hasOwnProperty(t)&&Jh[t]?(""+e).trim():e+"px"}function UI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=zI(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var v9=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Px(t,e){if(e){if(v9[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function Tx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nx=null;function Dk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rx=null,zc=null,Uc=null;function ZP(t){if(t=Bp(t)){if(typeof Rx!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=by(e),Rx(t.stateNode,t.type,e))}}function HI(t){zc?Uc?Uc.push(t):Uc=[t]:zc=t}function VI(){if(zc){var t=zc,e=Uc;if(Uc=zc=null,ZP(t),e)for(t=0;t<e.length;t++)ZP(e[t])}}function WI(t,e){return t(e)}function GI(){}var Yw=!1;function KI(t,e,n){if(Yw)return t(e,n);Yw=!0;try{return WI(t,e,n)}finally{Yw=!1,(zc!==null||Uc!==null)&&(GI(),VI())}}function Pf(t,e){var n=t.stateNode;if(n===null)return null;var i=by(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var Mx=!1;if(Fo)try{var rh={};Object.defineProperty(rh,"passive",{get:function(){Mx=!0}}),window.addEventListener("test",rh,rh),window.removeEventListener("test",rh,rh)}catch{Mx=!1}function y9(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Qh=!1,$v=null,Bv=!1,Ox=null,w9={onError:function(t){Qh=!0,$v=t}};function b9(t,e,n,i,r,s,o,a,l){Qh=!1,$v=null,y9.apply(w9,arguments)}function x9(t,e,n,i,r,s,o,a,l){if(b9.apply(this,arguments),Qh){if(Qh){var u=$v;Qh=!1,$v=null}else throw Error(oe(198));Bv||(Bv=!0,Ox=u)}}function Wu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function XI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function JP(t){if(Wu(t)!==t)throw Error(oe(188))}function S9(t){var e=t.alternate;if(!e){if(e=Wu(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return JP(r),t;if(s===i)return JP(r),e;s=s.sibling}throw Error(oe(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==i)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function qI(t){return t=S9(t),t!==null?YI(t):null}function YI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=YI(t);if(e!==null)return e;t=t.sibling}return null}var ZI=cr.unstable_scheduleCallback,QP=cr.unstable_cancelCallback,_9=cr.unstable_shouldYield,k9=cr.unstable_requestPaint,en=cr.unstable_now,C9=cr.unstable_getCurrentPriorityLevel,Lk=cr.unstable_ImmediatePriority,JI=cr.unstable_UserBlockingPriority,zv=cr.unstable_NormalPriority,E9=cr.unstable_LowPriority,QI=cr.unstable_IdlePriority,gy=null,qs=null;function A9(t){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(gy,t,void 0,(t.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:N9,P9=Math.log,T9=Math.LN2;function N9(t){return t>>>=0,t===0?32:31-(P9(t)/T9|0)|0}var Rm=64,Mm=4194304;function Oh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Oh(a):(s&=o,s!==0&&(i=Oh(s)))}else o=n&~r,o!==0?i=Oh(o):s!==0&&(i=Oh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-hs(e),r=1<<n,i|=t[n],e&=~r;return i}function R9(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M9(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-hs(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=R9(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ix(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function eD(){var t=Rm;return Rm<<=1,!(Rm&4194240)&&(Rm=64),t}function Zw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hs(e),t[e]=n}function O9(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-hs(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function jk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-hs(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var yt=0;function tD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nD,Fk,iD,rD,sD,Dx=!1,Om=[],Va=null,Wa=null,Ga=null,Tf=new Map,Nf=new Map,wa=[],I9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e2(t,e){switch(t){case"focusin":case"focusout":Va=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Tf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nf.delete(e.pointerId)}}function sh(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Bp(e),e!==null&&Fk(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function D9(t,e,n,i,r){switch(e){case"focusin":return Va=sh(Va,t,e,n,i,r),!0;case"dragenter":return Wa=sh(Wa,t,e,n,i,r),!0;case"mouseover":return Ga=sh(Ga,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Tf.set(s,sh(Tf.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Nf.set(s,sh(Nf.get(s)||null,t,e,n,i,r)),!0}return!1}function oD(t){var e=lu(t.target);if(e!==null){var n=Wu(e);if(n!==null){if(e=n.tag,e===13){if(e=XI(n),e!==null){t.blockedOn=e,sD(t.priority,function(){iD(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Nx=i,n.target.dispatchEvent(i),Nx=null}else return e=Bp(n),e!==null&&Fk(e),t.blockedOn=n,!1;e.shift()}return!0}function t2(t,e,n){Vg(t)&&n.delete(e)}function L9(){Dx=!1,Va!==null&&Vg(Va)&&(Va=null),Wa!==null&&Vg(Wa)&&(Wa=null),Ga!==null&&Vg(Ga)&&(Ga=null),Tf.forEach(t2),Nf.forEach(t2)}function oh(t,e){t.blockedOn===e&&(t.blockedOn=null,Dx||(Dx=!0,cr.unstable_scheduleCallback(cr.unstable_NormalPriority,L9)))}function Rf(t){function e(r){return oh(r,t)}if(0<Om.length){oh(Om[0],t);for(var n=1;n<Om.length;n++){var i=Om[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Va!==null&&oh(Va,t),Wa!==null&&oh(Wa,t),Ga!==null&&oh(Ga,t),Tf.forEach(e),Nf.forEach(e),n=0;n<wa.length;n++)i=wa[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<wa.length&&(n=wa[0],n.blockedOn===null);)oD(n),n.blockedOn===null&&wa.shift()}var Hc=qo.ReactCurrentBatchConfig,Hv=!0;function j9(t,e,n,i){var r=yt,s=Hc.transition;Hc.transition=null;try{yt=1,$k(t,e,n,i)}finally{yt=r,Hc.transition=s}}function F9(t,e,n,i){var r=yt,s=Hc.transition;Hc.transition=null;try{yt=4,$k(t,e,n,i)}finally{yt=r,Hc.transition=s}}function $k(t,e,n,i){if(Hv){var r=Lx(t,e,n,i);if(r===null)ab(t,e,i,Vv,n),e2(t,i);else if(D9(r,t,e,n,i))i.stopPropagation();else if(e2(t,i),e&4&&-1<I9.indexOf(t)){for(;r!==null;){var s=Bp(r);if(s!==null&&nD(s),s=Lx(t,e,n,i),s===null&&ab(t,e,i,Vv,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else ab(t,e,i,null,n)}}var Vv=null;function Lx(t,e,n,i){if(Vv=null,t=Dk(i),t=lu(t),t!==null)if(e=Wu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=XI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vv=t,null}function aD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C9()){case Lk:return 1;case JI:return 4;case zv:case E9:return 16;case QI:return 536870912;default:return 16}default:return 16}}var Na=null,Bk=null,Wg=null;function lD(){if(Wg)return Wg;var t,e=Bk,n=e.length,i,r="value"in Na?Na.value:Na.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Wg=r.slice(t,1<i?1-i:void 0)}function Gg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Im(){return!0}function n2(){return!1}function fr(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Im:n2,this.isPropagationStopped=n2,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Im)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Im)},persist:function(){},isPersistent:Im}),e}var zd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zk=fr(zd),$p=Xt({},zd,{view:0,detail:0}),$9=fr($p),Jw,Qw,ah,vy=Xt({},$p,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ah&&(ah&&t.type==="mousemove"?(Jw=t.screenX-ah.screenX,Qw=t.screenY-ah.screenY):Qw=Jw=0,ah=t),Jw)},movementY:function(t){return"movementY"in t?t.movementY:Qw}}),i2=fr(vy),B9=Xt({},vy,{dataTransfer:0}),z9=fr(B9),U9=Xt({},$p,{relatedTarget:0}),eb=fr(U9),H9=Xt({},zd,{animationName:0,elapsedTime:0,pseudoElement:0}),V9=fr(H9),W9=Xt({},zd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),G9=fr(W9),K9=Xt({},zd,{data:0}),r2=fr(K9),X9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Y9[t])?!!e[t]:!1}function Uk(){return Z9}var J9=Xt({},$p,{key:function(t){if(t.key){var e=X9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?q9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uk,charCode:function(t){return t.type==="keypress"?Gg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Q9=fr(J9),eH=Xt({},vy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s2=fr(eH),tH=Xt({},$p,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uk}),nH=fr(tH),iH=Xt({},zd,{propertyName:0,elapsedTime:0,pseudoElement:0}),rH=fr(iH),sH=Xt({},vy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oH=fr(sH),aH=[9,13,27,32],Hk=Fo&&"CompositionEvent"in window,ef=null;Fo&&"documentMode"in document&&(ef=document.documentMode);var lH=Fo&&"TextEvent"in window&&!ef,uD=Fo&&(!Hk||ef&&8<ef&&11>=ef),o2=" ",a2=!1;function cD(t,e){switch(t){case"keyup":return aH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yc=!1;function uH(t,e){switch(t){case"compositionend":return dD(e);case"keypress":return e.which!==32?null:(a2=!0,o2);case"textInput":return t=e.data,t===o2&&a2?null:t;default:return null}}function cH(t,e){if(yc)return t==="compositionend"||!Hk&&cD(t,e)?(t=lD(),Wg=Bk=Na=null,yc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uD&&e.locale!=="ko"?null:e.data;default:return null}}var dH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dH[t.type]:e==="textarea"}function hD(t,e,n,i){HI(i),e=Wv(e,"onChange"),0<e.length&&(n=new zk("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var tf=null,Mf=null;function hH(t){_D(t,0)}function yy(t){var e=xc(t);if(LI(e))return t}function fH(t,e){if(t==="change")return e}var fD=!1;if(Fo){var tb;if(Fo){var nb="oninput"in document;if(!nb){var u2=document.createElement("div");u2.setAttribute("oninput","return;"),nb=typeof u2.oninput=="function"}tb=nb}else tb=!1;fD=tb&&(!document.documentMode||9<document.documentMode)}function c2(){tf&&(tf.detachEvent("onpropertychange",pD),Mf=tf=null)}function pD(t){if(t.propertyName==="value"&&yy(Mf)){var e=[];hD(e,Mf,t,Dk(t)),KI(hH,e)}}function pH(t,e,n){t==="focusin"?(c2(),tf=e,Mf=n,tf.attachEvent("onpropertychange",pD)):t==="focusout"&&c2()}function mH(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yy(Mf)}function gH(t,e){if(t==="click")return yy(e)}function vH(t,e){if(t==="input"||t==="change")return yy(e)}function yH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ms=typeof Object.is=="function"?Object.is:yH;function Of(t,e){if(ms(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!yx.call(e,r)||!ms(t[r],e[r]))return!1}return!0}function d2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h2(t,e){var n=d2(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=d2(n)}}function mD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gD(){for(var t=window,e=Fv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fv(t.document)}return e}function Vk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wH(t){var e=gD(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mD(n.ownerDocument.documentElement,n)){if(i!==null&&Vk(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=h2(n,s);var o=h2(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bH=Fo&&"documentMode"in document&&11>=document.documentMode,wc=null,jx=null,nf=null,Fx=!1;function f2(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fx||wc==null||wc!==Fv(i)||(i=wc,"selectionStart"in i&&Vk(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),nf&&Of(nf,i)||(nf=i,i=Wv(jx,"onSelect"),0<i.length&&(e=new zk("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=wc)))}function Dm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bc={animationend:Dm("Animation","AnimationEnd"),animationiteration:Dm("Animation","AnimationIteration"),animationstart:Dm("Animation","AnimationStart"),transitionend:Dm("Transition","TransitionEnd")},ib={},vD={};Fo&&(vD=document.createElement("div").style,"AnimationEvent"in window||(delete bc.animationend.animation,delete bc.animationiteration.animation,delete bc.animationstart.animation),"TransitionEvent"in window||delete bc.transitionend.transition);function wy(t){if(ib[t])return ib[t];if(!bc[t])return t;var e=bc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vD)return ib[t]=e[n];return t}var yD=wy("animationend"),wD=wy("animationiteration"),bD=wy("animationstart"),xD=wy("transitionend"),SD=new Map,p2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sl(t,e){SD.set(t,e),Vu(e,[t])}for(var rb=0;rb<p2.length;rb++){var sb=p2[rb],xH=sb.toLowerCase(),SH=sb[0].toUpperCase()+sb.slice(1);Sl(xH,"on"+SH)}Sl(yD,"onAnimationEnd");Sl(wD,"onAnimationIteration");Sl(bD,"onAnimationStart");Sl("dblclick","onDoubleClick");Sl("focusin","onFocus");Sl("focusout","onBlur");Sl(xD,"onTransitionEnd");md("onMouseEnter",["mouseout","mouseover"]);md("onMouseLeave",["mouseout","mouseover"]);md("onPointerEnter",["pointerout","pointerover"]);md("onPointerLeave",["pointerout","pointerover"]);Vu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_H=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ih));function m2(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,x9(i,e,void 0,t),t.currentTarget=null}function _D(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;m2(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;m2(r,a,u),s=l}}}if(Bv)throw t=Ox,Bv=!1,Ox=null,t}function Ot(t,e){var n=e[Hx];n===void 0&&(n=e[Hx]=new Set);var i=t+"__bubble";n.has(i)||(kD(e,t,2,!1),n.add(i))}function ob(t,e,n){var i=0;e&&(i|=4),kD(n,t,i,e)}var Lm="_reactListening"+Math.random().toString(36).slice(2);function If(t){if(!t[Lm]){t[Lm]=!0,RI.forEach(function(n){n!=="selectionchange"&&(_H.has(n)||ob(n,!1,t),ob(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lm]||(e[Lm]=!0,ob("selectionchange",!1,e))}}function kD(t,e,n,i){switch(aD(e)){case 1:var r=j9;break;case 4:r=F9;break;default:r=$k}n=r.bind(null,e,n,t),r=void 0,!Mx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ab(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=lu(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}KI(function(){var u=s,c=Dk(n),d=[];e:{var h=SD.get(t);if(h!==void 0){var f=zk,p=t;switch(t){case"keypress":if(Gg(n)===0)break e;case"keydown":case"keyup":f=Q9;break;case"focusin":p="focus",f=eb;break;case"focusout":p="blur",f=eb;break;case"beforeblur":case"afterblur":f=eb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=i2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=z9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=nH;break;case yD:case wD:case bD:f=V9;break;case xD:f=rH;break;case"scroll":f=$9;break;case"wheel":f=oH;break;case"copy":case"cut":case"paste":f=G9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=s2}var g=(e&4)!==0,b=!g&&t==="scroll",v=g?h!==null?h+"Capture":null:h;g=[];for(var y=u,w;y!==null;){w=y;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,v!==null&&(x=Pf(y,v),x!=null&&g.push(Df(y,x,w)))),b)break;y=y.return}0<g.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Nx&&(p=n.relatedTarget||n.fromElement)&&(lu(p)||p[$o]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?lu(p):null,p!==null&&(b=Wu(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=i2,x="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=s2,x="onPointerLeave",v="onPointerEnter",y="pointer"),b=f==null?h:xc(f),w=p==null?h:xc(p),h=new g(x,y+"leave",f,n,c),h.target=b,h.relatedTarget=w,x=null,lu(c)===u&&(g=new g(v,y+"enter",p,n,c),g.target=w,g.relatedTarget=b,x=g),b=x,f&&p)t:{for(g=f,v=p,y=0,w=g;w;w=Yu(w))y++;for(w=0,x=v;x;x=Yu(x))w++;for(;0<y-w;)g=Yu(g),y--;for(;0<w-y;)v=Yu(v),w--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=Yu(g),v=Yu(v)}g=null}else g=null;f!==null&&g2(d,h,f,g,!1),p!==null&&b!==null&&g2(d,b,p,g,!0)}}e:{if(h=u?xc(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var k=fH;else if(l2(h))if(fD)k=vH;else{k=mH;var E=pH}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=gH);if(k&&(k=k(t,u))){hD(d,k,n,c);break e}E&&E(t,h,u),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Cx(h,"number",h.value)}switch(E=u?xc(u):window,t){case"focusin":(l2(E)||E.contentEditable==="true")&&(wc=E,jx=u,nf=null);break;case"focusout":nf=jx=wc=null;break;case"mousedown":Fx=!0;break;case"contextmenu":case"mouseup":case"dragend":Fx=!1,f2(d,n,c);break;case"selectionchange":if(bH)break;case"keydown":case"keyup":f2(d,n,c)}var C;if(Hk)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else yc?cD(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(uD&&n.locale!=="ko"&&(yc||P!=="onCompositionStart"?P==="onCompositionEnd"&&yc&&(C=lD()):(Na=c,Bk="value"in Na?Na.value:Na.textContent,yc=!0)),E=Wv(u,P),0<E.length&&(P=new r2(P,t,null,n,c),d.push({event:P,listeners:E}),C?P.data=C:(C=dD(n),C!==null&&(P.data=C)))),(C=lH?uH(t,n):cH(t,n))&&(u=Wv(u,"onBeforeInput"),0<u.length&&(c=new r2("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=C))}_D(d,e)})}function Df(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Pf(t,n),s!=null&&i.unshift(Df(t,s,r)),s=Pf(t,e),s!=null&&i.push(Df(t,s,r))),t=t.return}return i}function Yu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function g2(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=Pf(n,s),l!=null&&o.unshift(Df(n,l,a))):r||(l=Pf(n,s),l!=null&&o.push(Df(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kH=/\r\n?/g,CH=/\u0000|\uFFFD/g;function v2(t){return(typeof t=="string"?t:""+t).replace(kH,`
`).replace(CH,"")}function jm(t,e,n){if(e=v2(e),v2(t)!==e&&n)throw Error(oe(425))}function Gv(){}var $x=null,Bx=null;function zx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ux=typeof setTimeout=="function"?setTimeout:void 0,EH=typeof clearTimeout=="function"?clearTimeout:void 0,y2=typeof Promise=="function"?Promise:void 0,AH=typeof queueMicrotask=="function"?queueMicrotask:typeof y2<"u"?function(t){return y2.resolve(null).then(t).catch(PH)}:Ux;function PH(t){setTimeout(function(){throw t})}function lb(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Rf(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Rf(e)}function Ka(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function w2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ud=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Ud,Lf="__reactProps$"+Ud,$o="__reactContainer$"+Ud,Hx="__reactEvents$"+Ud,TH="__reactListeners$"+Ud,NH="__reactHandles$"+Ud;function lu(t){var e=t[Fs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$o]||n[Fs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=w2(t);t!==null;){if(n=t[Fs])return n;t=w2(t)}return e}t=n,n=t.parentNode}return null}function Bp(t){return t=t[Fs]||t[$o],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function by(t){return t[Lf]||null}var Vx=[],Sc=-1;function _l(t){return{current:t}}function Lt(t){0>Sc||(t.current=Vx[Sc],Vx[Sc]=null,Sc--)}function Rt(t,e){Sc++,Vx[Sc]=t.current,t.current=e}var nl={},ei=_l(nl),Bi=_l(!1),Su=nl;function gd(t,e){var n=t.type.contextTypes;if(!n)return nl;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function zi(t){return t=t.childContextTypes,t!=null}function Kv(){Lt(Bi),Lt(ei)}function b2(t,e,n){if(ei.current!==nl)throw Error(oe(168));Rt(ei,e),Rt(Bi,n)}function CD(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(oe(108,p9(t)||"Unknown",r));return Xt({},n,i)}function Xv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nl,Su=ei.current,Rt(ei,t),Rt(Bi,Bi.current),!0}function x2(t,e,n){var i=t.stateNode;if(!i)throw Error(oe(169));n?(t=CD(t,e,Su),i.__reactInternalMemoizedMergedChildContext=t,Lt(Bi),Lt(ei),Rt(ei,t)):Lt(Bi),Rt(Bi,n)}var vo=null,xy=!1,ub=!1;function ED(t){vo===null?vo=[t]:vo.push(t)}function RH(t){xy=!0,ED(t)}function kl(){if(!ub&&vo!==null){ub=!0;var t=0,e=yt;try{var n=vo;for(yt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}vo=null,xy=!1}catch(r){throw vo!==null&&(vo=vo.slice(t+1)),ZI(Lk,kl),r}finally{yt=e,ub=!1}}return null}var _c=[],kc=0,qv=null,Yv=0,kr=[],Cr=0,_u=null,Mo=1,Oo="";function Kl(t,e){_c[kc++]=Yv,_c[kc++]=qv,qv=t,Yv=e}function AD(t,e,n){kr[Cr++]=Mo,kr[Cr++]=Oo,kr[Cr++]=_u,_u=t;var i=Mo;t=Oo;var r=32-hs(i)-1;i&=~(1<<r),n+=1;var s=32-hs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Mo=1<<32-hs(e)+r|n<<r|i,Oo=s+t}else Mo=1<<s|n<<r|i,Oo=t}function Wk(t){t.return!==null&&(Kl(t,1),AD(t,1,0))}function Gk(t){for(;t===qv;)qv=_c[--kc],_c[kc]=null,Yv=_c[--kc],_c[kc]=null;for(;t===_u;)_u=kr[--Cr],kr[Cr]=null,Oo=kr[--Cr],kr[Cr]=null,Mo=kr[--Cr],kr[Cr]=null}var ar=null,ir=null,zt=!1,is=null;function PD(t,e){var n=Nr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function S2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ar=t,ir=Ka(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ar=t,ir=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_u!==null?{id:Mo,overflow:Oo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ar=t,ir=null,!0):!1;default:return!1}}function Wx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gx(t){if(zt){var e=ir;if(e){var n=e;if(!S2(t,e)){if(Wx(t))throw Error(oe(418));e=Ka(n.nextSibling);var i=ar;e&&S2(t,e)?PD(i,n):(t.flags=t.flags&-4097|2,zt=!1,ar=t)}}else{if(Wx(t))throw Error(oe(418));t.flags=t.flags&-4097|2,zt=!1,ar=t}}}function _2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ar=t}function Fm(t){if(t!==ar)return!1;if(!zt)return _2(t),zt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zx(t.type,t.memoizedProps)),e&&(e=ir)){if(Wx(t))throw TD(),Error(oe(418));for(;e;)PD(t,e),e=Ka(e.nextSibling)}if(_2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ir=Ka(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ir=null}}else ir=ar?Ka(t.stateNode.nextSibling):null;return!0}function TD(){for(var t=ir;t;)t=Ka(t.nextSibling)}function vd(){ir=ar=null,zt=!1}function Kk(t){is===null?is=[t]:is.push(t)}var MH=qo.ReactCurrentBatchConfig;function lh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var i=n.stateNode}if(!i)throw Error(oe(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function $m(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function k2(t){var e=t._init;return e(t._payload)}function ND(t){function e(v,y){if(t){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=Za(v,y),v.index=0,v.sibling=null,v}function s(v,y,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,w,x){return y===null||y.tag!==6?(y=gb(w,v.mode,x),y.return=v,y):(y=r(y,w),y.return=v,y)}function l(v,y,w,x){var k=w.type;return k===vc?c(v,y,w.props.children,x,w.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ha&&k2(k)===y.type)?(x=r(y,w.props),x.ref=lh(v,y,w),x.return=v,x):(x=Qg(w.type,w.key,w.props,null,v.mode,x),x.ref=lh(v,y,w),x.return=v,x)}function u(v,y,w,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=vb(w,v.mode,x),y.return=v,y):(y=r(y,w.children||[]),y.return=v,y)}function c(v,y,w,x,k){return y===null||y.tag!==7?(y=gu(w,v.mode,x,k),y.return=v,y):(y=r(y,w),y.return=v,y)}function d(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=gb(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Pm:return w=Qg(y.type,y.key,y.props,null,v.mode,w),w.ref=lh(v,null,y),w.return=v,w;case gc:return y=vb(y,v.mode,w),y.return=v,y;case ha:var x=y._init;return d(v,x(y._payload),w)}if(Mh(y)||ih(y))return y=gu(y,v.mode,w,null),y.return=v,y;$m(v,y)}return null}function h(v,y,w,x){var k=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:a(v,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Pm:return w.key===k?l(v,y,w,x):null;case gc:return w.key===k?u(v,y,w,x):null;case ha:return k=w._init,h(v,y,k(w._payload),x)}if(Mh(w)||ih(w))return k!==null?null:c(v,y,w,x,null);$m(v,w)}return null}function f(v,y,w,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(w)||null,a(y,v,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Pm:return v=v.get(x.key===null?w:x.key)||null,l(y,v,x,k);case gc:return v=v.get(x.key===null?w:x.key)||null,u(y,v,x,k);case ha:var E=x._init;return f(v,y,w,E(x._payload),k)}if(Mh(x)||ih(x))return v=v.get(w)||null,c(y,v,x,k,null);$m(y,x)}return null}function p(v,y,w,x){for(var k=null,E=null,C=y,P=y=0,N=null;C!==null&&P<w.length;P++){C.index>P?(N=C,C=null):N=C.sibling;var I=h(v,C,w[P],x);if(I===null){C===null&&(C=N);break}t&&C&&I.alternate===null&&e(v,C),y=s(I,y,P),E===null?k=I:E.sibling=I,E=I,C=N}if(P===w.length)return n(v,C),zt&&Kl(v,P),k;if(C===null){for(;P<w.length;P++)C=d(v,w[P],x),C!==null&&(y=s(C,y,P),E===null?k=C:E.sibling=C,E=C);return zt&&Kl(v,P),k}for(C=i(v,C);P<w.length;P++)N=f(C,v,P,w[P],x),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?P:N.key),y=s(N,y,P),E===null?k=N:E.sibling=N,E=N);return t&&C.forEach(function(L){return e(v,L)}),zt&&Kl(v,P),k}function g(v,y,w,x){var k=ih(w);if(typeof k!="function")throw Error(oe(150));if(w=k.call(w),w==null)throw Error(oe(151));for(var E=k=null,C=y,P=y=0,N=null,I=w.next();C!==null&&!I.done;P++,I=w.next()){C.index>P?(N=C,C=null):N=C.sibling;var L=h(v,C,I.value,x);if(L===null){C===null&&(C=N);break}t&&C&&L.alternate===null&&e(v,C),y=s(L,y,P),E===null?k=L:E.sibling=L,E=L,C=N}if(I.done)return n(v,C),zt&&Kl(v,P),k;if(C===null){for(;!I.done;P++,I=w.next())I=d(v,I.value,x),I!==null&&(y=s(I,y,P),E===null?k=I:E.sibling=I,E=I);return zt&&Kl(v,P),k}for(C=i(v,C);!I.done;P++,I=w.next())I=f(C,v,P,I.value,x),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?P:I.key),y=s(I,y,P),E===null?k=I:E.sibling=I,E=I);return t&&C.forEach(function($){return e(v,$)}),zt&&Kl(v,P),k}function b(v,y,w,x){if(typeof w=="object"&&w!==null&&w.type===vc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Pm:e:{for(var k=w.key,E=y;E!==null;){if(E.key===k){if(k=w.type,k===vc){if(E.tag===7){n(v,E.sibling),y=r(E,w.props.children),y.return=v,v=y;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ha&&k2(k)===E.type){n(v,E.sibling),y=r(E,w.props),y.ref=lh(v,E,w),y.return=v,v=y;break e}n(v,E);break}else e(v,E);E=E.sibling}w.type===vc?(y=gu(w.props.children,v.mode,x,w.key),y.return=v,v=y):(x=Qg(w.type,w.key,w.props,null,v.mode,x),x.ref=lh(v,y,w),x.return=v,v=x)}return o(v);case gc:e:{for(E=w.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=r(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=vb(w,v.mode,x),y.return=v,v=y}return o(v);case ha:return E=w._init,b(v,y,E(w._payload),x)}if(Mh(w))return p(v,y,w,x);if(ih(w))return g(v,y,w,x);$m(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=r(y,w),y.return=v,v=y):(n(v,y),y=gb(w,v.mode,x),y.return=v,v=y),o(v)):n(v,y)}return b}var yd=ND(!0),RD=ND(!1),Zv=_l(null),Jv=null,Cc=null,Xk=null;function qk(){Xk=Cc=Jv=null}function Yk(t){var e=Zv.current;Lt(Zv),t._currentValue=e}function Kx(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Vc(t,e){Jv=t,Xk=Cc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fi=!0),t.firstContext=null)}function zr(t){var e=t._currentValue;if(Xk!==t)if(t={context:t,memoizedValue:e,next:null},Cc===null){if(Jv===null)throw Error(oe(308));Cc=t,Jv.dependencies={lanes:0,firstContext:t}}else Cc=Cc.next=t;return e}var uu=null;function Zk(t){uu===null?uu=[t]:uu.push(t)}function MD(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Zk(e)):(n.next=r.next,r.next=n),e.interleaved=n,Bo(t,i)}function Bo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fa=!1;function Jk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Do(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xa(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ht&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Bo(t,n)}return r=i.interleaved,r===null?(e.next=e,Zk(i)):(e.next=r.next,r.next=e),i.interleaved=e,Bo(t,n)}function Kg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,jk(t,n)}}function C2(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qv(t,e,n,i){var r=t.updateQueue;fa=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Xt({},d,h);break e;case 2:fa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Cu|=o,t.lanes=o,t.memoizedState=d}}function E2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(oe(191,r));r.call(i)}}}var zp={},Ys=_l(zp),jf=_l(zp),Ff=_l(zp);function cu(t){if(t===zp)throw Error(oe(174));return t}function Qk(t,e){switch(Rt(Ff,e),Rt(jf,t),Rt(Ys,zp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ax(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ax(e,t)}Lt(Ys),Rt(Ys,e)}function wd(){Lt(Ys),Lt(jf),Lt(Ff)}function ID(t){cu(Ff.current);var e=cu(Ys.current),n=Ax(e,t.type);e!==n&&(Rt(jf,t),Rt(Ys,n))}function eC(t){jf.current===t&&(Lt(Ys),Lt(jf))}var Vt=_l(0);function e0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cb=[];function tC(){for(var t=0;t<cb.length;t++)cb[t]._workInProgressVersionPrimary=null;cb.length=0}var Xg=qo.ReactCurrentDispatcher,db=qo.ReactCurrentBatchConfig,ku=0,Kt=null,pn=null,Tn=null,t0=!1,rf=!1,$f=0,OH=0;function Kn(){throw Error(oe(321))}function nC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ms(t[n],e[n]))return!1;return!0}function iC(t,e,n,i,r,s){if(ku=s,Kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xg.current=t===null||t.memoizedState===null?jH:FH,t=n(i,r),rf){s=0;do{if(rf=!1,$f=0,25<=s)throw Error(oe(301));s+=1,Tn=pn=null,e.updateQueue=null,Xg.current=$H,t=n(i,r)}while(rf)}if(Xg.current=n0,e=pn!==null&&pn.next!==null,ku=0,Tn=pn=Kt=null,t0=!1,e)throw Error(oe(300));return t}function rC(){var t=$f!==0;return $f=0,t}function Ts(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Kt.memoizedState=Tn=t:Tn=Tn.next=t,Tn}function Ur(){if(pn===null){var t=Kt.alternate;t=t!==null?t.memoizedState:null}else t=pn.next;var e=Tn===null?Kt.memoizedState:Tn.next;if(e!==null)Tn=e,pn=t;else{if(t===null)throw Error(oe(310));pn=t,t={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},Tn===null?Kt.memoizedState=Tn=t:Tn=Tn.next=t}return Tn}function Bf(t,e){return typeof e=="function"?e(t):e}function hb(t){var e=Ur(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var i=pn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((ku&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Kt.lanes|=c,Cu|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,ms(i,e.memoizedState)||(Fi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Kt.lanes|=s,Cu|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fb(t){var e=Ur(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ms(s,e.memoizedState)||(Fi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function DD(){}function LD(t,e){var n=Kt,i=Ur(),r=e(),s=!ms(i.memoizedState,r);if(s&&(i.memoizedState=r,Fi=!0),i=i.queue,sC($D.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,zf(9,FD.bind(null,n,i,r,e),void 0,null),Nn===null)throw Error(oe(349));ku&30||jD(n,e,r)}return r}function jD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function FD(t,e,n,i){e.value=n,e.getSnapshot=i,BD(e)&&zD(t)}function $D(t,e,n){return n(function(){BD(e)&&zD(t)})}function BD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ms(t,n)}catch{return!0}}function zD(t){var e=Bo(t,1);e!==null&&fs(e,t,1,-1)}function A2(t){var e=Ts();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bf,lastRenderedState:t},e.queue=t,t=t.dispatch=LH.bind(null,Kt,t),[e.memoizedState,t]}function zf(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function UD(){return Ur().memoizedState}function qg(t,e,n,i){var r=Ts();Kt.flags|=t,r.memoizedState=zf(1|e,n,void 0,i===void 0?null:i)}function Sy(t,e,n,i){var r=Ur();i=i===void 0?null:i;var s=void 0;if(pn!==null){var o=pn.memoizedState;if(s=o.destroy,i!==null&&nC(i,o.deps)){r.memoizedState=zf(e,n,s,i);return}}Kt.flags|=t,r.memoizedState=zf(1|e,n,s,i)}function P2(t,e){return qg(8390656,8,t,e)}function sC(t,e){return Sy(2048,8,t,e)}function HD(t,e){return Sy(4,2,t,e)}function VD(t,e){return Sy(4,4,t,e)}function WD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function GD(t,e,n){return n=n!=null?n.concat([t]):null,Sy(4,4,WD.bind(null,e,t),n)}function oC(){}function KD(t,e){var n=Ur();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&nC(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function XD(t,e){var n=Ur();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&nC(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function qD(t,e,n){return ku&21?(ms(n,e)||(n=eD(),Kt.lanes|=n,Cu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fi=!0),t.memoizedState=n)}function IH(t,e){var n=yt;yt=n!==0&&4>n?n:4,t(!0);var i=db.transition;db.transition={};try{t(!1),e()}finally{yt=n,db.transition=i}}function YD(){return Ur().memoizedState}function DH(t,e,n){var i=Ya(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ZD(t))JD(e,n);else if(n=MD(t,e,n,i),n!==null){var r=vi();fs(n,t,i,r),QD(n,e,i)}}function LH(t,e,n){var i=Ya(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ZD(t))JD(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ms(a,o)){var l=e.interleaved;l===null?(r.next=r,Zk(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=MD(t,e,r,i),n!==null&&(r=vi(),fs(n,t,i,r),QD(n,e,i))}}function ZD(t){var e=t.alternate;return t===Kt||e!==null&&e===Kt}function JD(t,e){rf=t0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QD(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,jk(t,n)}}var n0={readContext:zr,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useInsertionEffect:Kn,useLayoutEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useMutableSource:Kn,useSyncExternalStore:Kn,useId:Kn,unstable_isNewReconciler:!1},jH={readContext:zr,useCallback:function(t,e){return Ts().memoizedState=[t,e===void 0?null:e],t},useContext:zr,useEffect:P2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qg(4194308,4,WD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qg(4194308,4,t,e)},useInsertionEffect:function(t,e){return qg(4,2,t,e)},useMemo:function(t,e){var n=Ts();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ts();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=DH.bind(null,Kt,t),[i.memoizedState,t]},useRef:function(t){var e=Ts();return t={current:t},e.memoizedState=t},useState:A2,useDebugValue:oC,useDeferredValue:function(t){return Ts().memoizedState=t},useTransition:function(){var t=A2(!1),e=t[0];return t=IH.bind(null,t[1]),Ts().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Kt,r=Ts();if(zt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),Nn===null)throw Error(oe(349));ku&30||jD(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,P2($D.bind(null,i,s,t),[t]),i.flags|=2048,zf(9,FD.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ts(),e=Nn.identifierPrefix;if(zt){var n=Oo,i=Mo;n=(i&~(1<<32-hs(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=$f++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=OH++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FH={readContext:zr,useCallback:KD,useContext:zr,useEffect:sC,useImperativeHandle:GD,useInsertionEffect:HD,useLayoutEffect:VD,useMemo:XD,useReducer:hb,useRef:UD,useState:function(){return hb(Bf)},useDebugValue:oC,useDeferredValue:function(t){var e=Ur();return qD(e,pn.memoizedState,t)},useTransition:function(){var t=hb(Bf)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:DD,useSyncExternalStore:LD,useId:YD,unstable_isNewReconciler:!1},$H={readContext:zr,useCallback:KD,useContext:zr,useEffect:sC,useImperativeHandle:GD,useInsertionEffect:HD,useLayoutEffect:VD,useMemo:XD,useReducer:fb,useRef:UD,useState:function(){return fb(Bf)},useDebugValue:oC,useDeferredValue:function(t){var e=Ur();return pn===null?e.memoizedState=t:qD(e,pn.memoizedState,t)},useTransition:function(){var t=fb(Bf)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:DD,useSyncExternalStore:LD,useId:YD,unstable_isNewReconciler:!1};function Zr(t,e){if(t&&t.defaultProps){e=Xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xx(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _y={isMounted:function(t){return(t=t._reactInternals)?Wu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=vi(),r=Ya(t),s=Do(i,r);s.payload=e,n!=null&&(s.callback=n),e=Xa(t,s,r),e!==null&&(fs(e,t,r,i),Kg(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=vi(),r=Ya(t),s=Do(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Xa(t,s,r),e!==null&&(fs(e,t,r,i),Kg(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vi(),i=Ya(t),r=Do(n,i);r.tag=2,e!=null&&(r.callback=e),e=Xa(t,r,i),e!==null&&(fs(e,t,i,n),Kg(e,t,i))}};function T2(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Of(n,i)||!Of(r,s):!0}function eL(t,e,n){var i=!1,r=nl,s=e.contextType;return typeof s=="object"&&s!==null?s=zr(s):(r=zi(e)?Su:ei.current,i=e.contextTypes,s=(i=i!=null)?gd(t,r):nl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_y,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function N2(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&_y.enqueueReplaceState(e,e.state,null)}function qx(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Jk(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=zr(s):(s=zi(e)?Su:ei.current,r.context=gd(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Xx(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&_y.enqueueReplaceState(r,r.state,null),Qv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function bd(t,e){try{var n="",i=e;do n+=f9(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function pb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BH=typeof WeakMap=="function"?WeakMap:Map;function tL(t,e,n){n=Do(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){r0||(r0=!0,oS=i),Yx(t,e)},n}function nL(t,e,n){n=Do(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Yx(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Yx(t,e),typeof i!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function R2(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new BH;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=eV.bind(null,t,e,n),e.then(t,t))}function M2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function O2(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Do(-1,1),e.tag=2,Xa(n,e,1))),n.lanes|=1),t)}var zH=qo.ReactCurrentOwner,Fi=!1;function hi(t,e,n,i){e.child=t===null?RD(e,null,n,i):yd(e,t.child,n,i)}function I2(t,e,n,i,r){n=n.render;var s=e.ref;return Vc(e,r),i=iC(t,e,n,i,s,r),n=rC(),t!==null&&!Fi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,zo(t,e,r)):(zt&&n&&Wk(e),e.flags|=1,hi(t,e,i,r),e.child)}function D2(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!pC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,iL(t,e,s,i,r)):(t=Qg(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Of,n(o,i)&&t.ref===e.ref)return zo(t,e,r)}return e.flags|=1,t=Za(s,i),t.ref=e.ref,t.return=e,e.child=t}function iL(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Of(s,i)&&t.ref===e.ref)if(Fi=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Fi=!0);else return e.lanes=t.lanes,zo(t,e,r)}return Zx(t,e,n,i,r)}function rL(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Ac,Zi),Zi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rt(Ac,Zi),Zi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Rt(Ac,Zi),Zi|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Rt(Ac,Zi),Zi|=i;return hi(t,e,r,n),e.child}function sL(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zx(t,e,n,i,r){var s=zi(n)?Su:ei.current;return s=gd(e,s),Vc(e,r),n=iC(t,e,n,i,s,r),i=rC(),t!==null&&!Fi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,zo(t,e,r)):(zt&&i&&Wk(e),e.flags|=1,hi(t,e,n,r),e.child)}function L2(t,e,n,i,r){if(zi(n)){var s=!0;Xv(e)}else s=!1;if(Vc(e,r),e.stateNode===null)Yg(t,e),eL(e,n,i),qx(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=zr(u):(u=zi(n)?Su:ei.current,u=gd(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&N2(e,o,i,u),fa=!1;var h=e.memoizedState;o.state=h,Qv(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Bi.current||fa?(typeof c=="function"&&(Xx(e,n,c,i),l=e.memoizedState),(a=fa||T2(e,n,a,i,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,OD(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Zr(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=zr(l):(l=zi(n)?Su:ei.current,l=gd(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&N2(e,o,i,l),fa=!1,h=e.memoizedState,o.state=h,Qv(e,i,o,r);var p=e.memoizedState;a!==d||h!==p||Bi.current||fa?(typeof f=="function"&&(Xx(e,n,f,i),p=e.memoizedState),(u=fa||T2(e,n,u,i,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return Jx(t,e,n,i,s,r)}function Jx(t,e,n,i,r,s){sL(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&x2(e,n,!1),zo(t,e,s);i=e.stateNode,zH.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=yd(e,t.child,null,s),e.child=yd(e,null,a,s)):hi(t,e,a,s),e.memoizedState=i.state,r&&x2(e,n,!0),e.child}function oL(t){var e=t.stateNode;e.pendingContext?b2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&b2(t,e.context,!1),Qk(t,e.containerInfo)}function j2(t,e,n,i,r){return vd(),Kk(r),e.flags|=256,hi(t,e,n,i),e.child}var Qx={dehydrated:null,treeContext:null,retryLane:0};function eS(t){return{baseLanes:t,cachePool:null,transitions:null}}function aL(t,e,n){var i=e.pendingProps,r=Vt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Rt(Vt,r&1),t===null)return Gx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ey(o,i,0,null),t=gu(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=eS(n),e.memoizedState=Qx,t):aC(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return UH(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Za(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Za(a,s):(s=gu(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?eS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Qx,i}return s=t.child,t=s.sibling,i=Za(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function aC(t,e){return e=Ey({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bm(t,e,n,i){return i!==null&&Kk(i),yd(e,t.child,null,n),t=aC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function UH(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=pb(Error(oe(422))),Bm(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ey({mode:"visible",children:i.children},r,0,null),s=gu(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&yd(e,t.child,null,o),e.child.memoizedState=eS(o),e.memoizedState=Qx,s);if(!(e.mode&1))return Bm(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(oe(419)),i=pb(s,i,void 0),Bm(t,e,o,i)}if(a=(o&t.childLanes)!==0,Fi||a){if(i=Nn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Bo(t,r),fs(i,t,r,-1))}return fC(),i=pb(Error(oe(421))),Bm(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=tV.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,ir=Ka(r.nextSibling),ar=e,zt=!0,is=null,t!==null&&(kr[Cr++]=Mo,kr[Cr++]=Oo,kr[Cr++]=_u,Mo=t.id,Oo=t.overflow,_u=e),e=aC(e,i.children),e.flags|=4096,e)}function F2(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Kx(t.return,e,n)}function mb(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function lL(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(hi(t,e,i.children,n),i=Vt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F2(t,n,e);else if(t.tag===19)F2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Rt(Vt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&e0(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),mb(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&e0(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}mb(e,!0,n,null,s);break;case"together":mb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Za(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Za(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HH(t,e,n){switch(e.tag){case 3:oL(e),vd();break;case 5:ID(e);break;case 1:zi(e.type)&&Xv(e);break;case 4:Qk(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Rt(Zv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Rt(Vt,Vt.current&1),e.flags|=128,null):n&e.child.childLanes?aL(t,e,n):(Rt(Vt,Vt.current&1),t=zo(t,e,n),t!==null?t.sibling:null);Rt(Vt,Vt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return lL(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Rt(Vt,Vt.current),i)break;return null;case 22:case 23:return e.lanes=0,rL(t,e,n)}return zo(t,e,n)}var uL,tS,cL,dL;uL=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tS=function(){};cL=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,cu(Ys.current);var s=null;switch(n){case"input":r=_x(t,r),i=_x(t,i),s=[];break;case"select":r=Xt({},r,{value:void 0}),i=Xt({},i,{value:void 0}),s=[];break;case"textarea":r=Ex(t,r),i=Ex(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Gv)}Px(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ef.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ef.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ot("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};dL=function(t,e,n,i){n!==i&&(e.flags|=4)};function uh(t,e){if(!zt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Xn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function VH(t,e,n){var i=e.pendingProps;switch(Gk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(e),null;case 1:return zi(e.type)&&Kv(),Xn(e),null;case 3:return i=e.stateNode,wd(),Lt(Bi),Lt(ei),tC(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Fm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,is!==null&&(uS(is),is=null))),tS(t,e),Xn(e),null;case 5:eC(e);var r=cu(Ff.current);if(n=e.type,t!==null&&e.stateNode!=null)cL(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(oe(166));return Xn(e),null}if(t=cu(Ys.current),Fm(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Fs]=e,i[Lf]=s,t=(e.mode&1)!==0,n){case"dialog":Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":case"embed":Ot("load",i);break;case"video":case"audio":for(r=0;r<Ih.length;r++)Ot(Ih[r],i);break;case"source":Ot("error",i);break;case"img":case"image":case"link":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"input":KP(i,s),Ot("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ot("invalid",i);break;case"textarea":qP(i,s),Ot("invalid",i)}Px(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&jm(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&jm(i.textContent,a,t),r=["children",""+a]):Ef.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ot("scroll",i)}switch(n){case"input":Tm(i),XP(i,s,!0);break;case"textarea":Tm(i),YP(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Gv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$I(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Fs]=e,t[Lf]=i,uL(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tx(n,i),n){case"dialog":Ot("cancel",t),Ot("close",t),r=i;break;case"iframe":case"object":case"embed":Ot("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ih.length;r++)Ot(Ih[r],t);r=i;break;case"source":Ot("error",t),r=i;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),r=i;break;case"details":Ot("toggle",t),r=i;break;case"input":KP(t,i),r=_x(t,i),Ot("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Xt({},i,{value:void 0}),Ot("invalid",t);break;case"textarea":qP(t,i),r=Ex(t,i),Ot("invalid",t);break;default:r=i}Px(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?UI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&BI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Af(t,l):typeof l=="number"&&Af(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ef.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ot("scroll",t):l!=null&&Rk(t,s,l,o))}switch(n){case"input":Tm(t),XP(t,i,!1);break;case"textarea":Tm(t),YP(t);break;case"option":i.value!=null&&t.setAttribute("value",""+tl(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Bc(t,!!i.multiple,s,!1):i.defaultValue!=null&&Bc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Gv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xn(e),null;case 6:if(t&&e.stateNode!=null)dL(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(oe(166));if(n=cu(Ff.current),cu(Ys.current),Fm(e)){if(i=e.stateNode,n=e.memoizedProps,i[Fs]=e,(s=i.nodeValue!==n)&&(t=ar,t!==null))switch(t.tag){case 3:jm(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jm(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Fs]=e,e.stateNode=i}return Xn(e),null;case 13:if(Lt(Vt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(zt&&ir!==null&&e.mode&1&&!(e.flags&128))TD(),vd(),e.flags|=98560,s=!1;else if(s=Fm(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[Fs]=e}else vd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xn(e),s=!1}else is!==null&&(uS(is),is=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Vt.current&1?xn===0&&(xn=3):fC())),e.updateQueue!==null&&(e.flags|=4),Xn(e),null);case 4:return wd(),tS(t,e),t===null&&If(e.stateNode.containerInfo),Xn(e),null;case 10:return Yk(e.type._context),Xn(e),null;case 17:return zi(e.type)&&Kv(),Xn(e),null;case 19:if(Lt(Vt),s=e.memoizedState,s===null)return Xn(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)uh(s,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=e0(t),o!==null){for(e.flags|=128,uh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Rt(Vt,Vt.current&1|2),e.child}t=t.sibling}s.tail!==null&&en()>xd&&(e.flags|=128,i=!0,uh(s,!1),e.lanes=4194304)}else{if(!i)if(t=e0(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),uh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!zt)return Xn(e),null}else 2*en()-s.renderingStartTime>xd&&n!==1073741824&&(e.flags|=128,i=!0,uh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=en(),e.sibling=null,n=Vt.current,Rt(Vt,i?n&1|2:n&1),e):(Xn(e),null);case 22:case 23:return hC(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Zi&1073741824&&(Xn(e),e.subtreeFlags&6&&(e.flags|=8192)):Xn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function WH(t,e){switch(Gk(e),e.tag){case 1:return zi(e.type)&&Kv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wd(),Lt(Bi),Lt(ei),tC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return eC(e),null;case 13:if(Lt(Vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));vd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Lt(Vt),null;case 4:return wd(),null;case 10:return Yk(e.type._context),null;case 22:case 23:return hC(),null;case 24:return null;default:return null}}var zm=!1,Zn=!1,GH=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Ec(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Yt(t,e,i)}else n.current=null}function nS(t,e,n){try{n()}catch(i){Yt(t,e,i)}}var $2=!1;function KH(t,e){if($x=Hv,t=gD(),Vk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(a=o),h===s&&++c===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bx={focusedElem:t,selectionRange:n},Hv=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,b=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Zr(e.type,g),b);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(x){Yt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return p=$2,$2=!1,p}function sf(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&nS(e,n,s)}r=r.next}while(r!==i)}}function ky(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function iS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hL(t){var e=t.alternate;e!==null&&(t.alternate=null,hL(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fs],delete e[Lf],delete e[Hx],delete e[TH],delete e[NH])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fL(t){return t.tag===5||t.tag===3||t.tag===4}function B2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fL(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gv));else if(i!==4&&(t=t.child,t!==null))for(rS(t,e,n),t=t.sibling;t!==null;)rS(t,e,n),t=t.sibling}function sS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(sS(t,e,n),t=t.sibling;t!==null;)sS(t,e,n),t=t.sibling}var In=null,ts=!1;function ia(t,e,n){for(n=n.child;n!==null;)pL(t,e,n),n=n.sibling}function pL(t,e,n){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(gy,n)}catch{}switch(n.tag){case 5:Zn||Ec(n,e);case 6:var i=In,r=ts;In=null,ia(t,e,n),In=i,ts=r,In!==null&&(ts?(t=In,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):In.removeChild(n.stateNode));break;case 18:In!==null&&(ts?(t=In,n=n.stateNode,t.nodeType===8?lb(t.parentNode,n):t.nodeType===1&&lb(t,n),Rf(t)):lb(In,n.stateNode));break;case 4:i=In,r=ts,In=n.stateNode.containerInfo,ts=!0,ia(t,e,n),In=i,ts=r;break;case 0:case 11:case 14:case 15:if(!Zn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&nS(n,e,o),r=r.next}while(r!==i)}ia(t,e,n);break;case 1:if(!Zn&&(Ec(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Yt(n,e,a)}ia(t,e,n);break;case 21:ia(t,e,n);break;case 22:n.mode&1?(Zn=(i=Zn)||n.memoizedState!==null,ia(t,e,n),Zn=i):ia(t,e,n);break;default:ia(t,e,n)}}function z2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new GH),e.forEach(function(i){var r=nV.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Gr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:In=a.stateNode,ts=!1;break e;case 3:In=a.stateNode.containerInfo,ts=!0;break e;case 4:In=a.stateNode.containerInfo,ts=!0;break e}a=a.return}if(In===null)throw Error(oe(160));pL(s,o,r),In=null,ts=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Yt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mL(e,t),e=e.sibling}function mL(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gr(e,t),ks(t),i&4){try{sf(3,t,t.return),ky(3,t)}catch(g){Yt(t,t.return,g)}try{sf(5,t,t.return)}catch(g){Yt(t,t.return,g)}}break;case 1:Gr(e,t),ks(t),i&512&&n!==null&&Ec(n,n.return);break;case 5:if(Gr(e,t),ks(t),i&512&&n!==null&&Ec(n,n.return),t.flags&32){var r=t.stateNode;try{Af(r,"")}catch(g){Yt(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&jI(r,s),Tx(a,o);var u=Tx(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?UI(r,d):c==="dangerouslySetInnerHTML"?BI(r,d):c==="children"?Af(r,d):Rk(r,c,d,u)}switch(a){case"input":kx(r,s);break;case"textarea":FI(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Bc(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Bc(r,!!s.multiple,s.defaultValue,!0):Bc(r,!!s.multiple,s.multiple?[]:"",!1))}r[Lf]=s}catch(g){Yt(t,t.return,g)}}break;case 6:if(Gr(e,t),ks(t),i&4){if(t.stateNode===null)throw Error(oe(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){Yt(t,t.return,g)}}break;case 3:if(Gr(e,t),ks(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Rf(e.containerInfo)}catch(g){Yt(t,t.return,g)}break;case 4:Gr(e,t),ks(t);break;case 13:Gr(e,t),ks(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(cC=en())),i&4&&z2(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Zn=(u=Zn)||c,Gr(e,t),Zn=u):Gr(e,t),ks(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Te=t,c=t.child;c!==null;){for(d=Te=c;Te!==null;){switch(h=Te,f=h.child,h.tag){case 0:case 11:case 14:case 15:sf(4,h,h.return);break;case 1:Ec(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Yt(i,n,g)}}break;case 5:Ec(h,h.return);break;case 22:if(h.memoizedState!==null){H2(d);continue}}f!==null?(f.return=h,Te=f):H2(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=zI("display",o))}catch(g){Yt(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Yt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Gr(e,t),ks(t),i&4&&z2(t);break;case 21:break;default:Gr(e,t),ks(t)}}function ks(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fL(n)){var i=n;break e}n=n.return}throw Error(oe(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Af(r,""),i.flags&=-33);var s=B2(t);sS(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=B2(t);rS(t,a,o);break;default:throw Error(oe(161))}}catch(l){Yt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XH(t,e,n){Te=t,gL(t)}function gL(t,e,n){for(var i=(t.mode&1)!==0;Te!==null;){var r=Te,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||zm;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Zn;a=zm;var u=Zn;if(zm=o,(Zn=l)&&!u)for(Te=r;Te!==null;)o=Te,l=o.child,o.tag===22&&o.memoizedState!==null?V2(r):l!==null?(l.return=o,Te=l):V2(r);for(;s!==null;)Te=s,gL(s),s=s.sibling;Te=r,zm=a,Zn=u}U2(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Te=s):U2(t)}}function U2(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zn||ky(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Zn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Zr(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&E2(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}E2(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Rf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}Zn||e.flags&512&&iS(e)}catch(h){Yt(e,e.return,h)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function H2(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function V2(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ky(4,e)}catch(l){Yt(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Yt(e,r,l)}}var s=e.return;try{iS(e)}catch(l){Yt(e,s,l)}break;case 5:var o=e.return;try{iS(e)}catch(l){Yt(e,o,l)}}}catch(l){Yt(e,e.return,l)}if(e===t){Te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Te=a;break}Te=e.return}}var qH=Math.ceil,i0=qo.ReactCurrentDispatcher,lC=qo.ReactCurrentOwner,Dr=qo.ReactCurrentBatchConfig,ht=0,Nn=null,cn=null,Vn=0,Zi=0,Ac=_l(0),xn=0,Uf=null,Cu=0,Cy=0,uC=0,of=null,Oi=null,cC=0,xd=1/0,mo=null,r0=!1,oS=null,qa=null,Um=!1,Ra=null,s0=0,af=0,aS=null,Zg=-1,Jg=0;function vi(){return ht&6?en():Zg!==-1?Zg:Zg=en()}function Ya(t){return t.mode&1?ht&2&&Vn!==0?Vn&-Vn:MH.transition!==null?(Jg===0&&(Jg=eD()),Jg):(t=yt,t!==0||(t=window.event,t=t===void 0?16:aD(t.type)),t):1}function fs(t,e,n,i){if(50<af)throw af=0,aS=null,Error(oe(185));Fp(t,n,i),(!(ht&2)||t!==Nn)&&(t===Nn&&(!(ht&2)&&(Cy|=n),xn===4&&ba(t,Vn)),Ui(t,i),n===1&&ht===0&&!(e.mode&1)&&(xd=en()+500,xy&&kl()))}function Ui(t,e){var n=t.callbackNode;M9(t,e);var i=Uv(t,t===Nn?Vn:0);if(i===0)n!==null&&QP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&QP(n),e===1)t.tag===0?RH(W2.bind(null,t)):ED(W2.bind(null,t)),AH(function(){!(ht&6)&&kl()}),n=null;else{switch(tD(i)){case 1:n=Lk;break;case 4:n=JI;break;case 16:n=zv;break;case 536870912:n=QI;break;default:n=zv}n=kL(n,vL.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vL(t,e){if(Zg=-1,Jg=0,ht&6)throw Error(oe(327));var n=t.callbackNode;if(Wc()&&t.callbackNode!==n)return null;var i=Uv(t,t===Nn?Vn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=o0(t,i);else{e=i;var r=ht;ht|=2;var s=wL();(Nn!==t||Vn!==e)&&(mo=null,xd=en()+500,mu(t,e));do try{JH();break}catch(a){yL(t,a)}while(!0);qk(),i0.current=s,ht=r,cn!==null?e=0:(Nn=null,Vn=0,e=xn)}if(e!==0){if(e===2&&(r=Ix(t),r!==0&&(i=r,e=lS(t,r))),e===1)throw n=Uf,mu(t,0),ba(t,i),Ui(t,en()),n;if(e===6)ba(t,i);else{if(r=t.current.alternate,!(i&30)&&!YH(r)&&(e=o0(t,i),e===2&&(s=Ix(t),s!==0&&(i=s,e=lS(t,s))),e===1))throw n=Uf,mu(t,0),ba(t,i),Ui(t,en()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(oe(345));case 2:Xl(t,Oi,mo);break;case 3:if(ba(t,i),(i&130023424)===i&&(e=cC+500-en(),10<e)){if(Uv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){vi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Ux(Xl.bind(null,t,Oi,mo),e);break}Xl(t,Oi,mo);break;case 4:if(ba(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-hs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=en()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*qH(i/1960))-i,10<i){t.timeoutHandle=Ux(Xl.bind(null,t,Oi,mo),i);break}Xl(t,Oi,mo);break;case 5:Xl(t,Oi,mo);break;default:throw Error(oe(329))}}}return Ui(t,en()),t.callbackNode===n?vL.bind(null,t):null}function lS(t,e){var n=of;return t.current.memoizedState.isDehydrated&&(mu(t,e).flags|=256),t=o0(t,e),t!==2&&(e=Oi,Oi=n,e!==null&&uS(e)),t}function uS(t){Oi===null?Oi=t:Oi.push.apply(Oi,t)}function YH(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ms(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ba(t,e){for(e&=~uC,e&=~Cy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hs(e),i=1<<n;t[n]=-1,e&=~i}}function W2(t){if(ht&6)throw Error(oe(327));Wc();var e=Uv(t,0);if(!(e&1))return Ui(t,en()),null;var n=o0(t,e);if(t.tag!==0&&n===2){var i=Ix(t);i!==0&&(e=i,n=lS(t,i))}if(n===1)throw n=Uf,mu(t,0),ba(t,e),Ui(t,en()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xl(t,Oi,mo),Ui(t,en()),null}function dC(t,e){var n=ht;ht|=1;try{return t(e)}finally{ht=n,ht===0&&(xd=en()+500,xy&&kl())}}function Eu(t){Ra!==null&&Ra.tag===0&&!(ht&6)&&Wc();var e=ht;ht|=1;var n=Dr.transition,i=yt;try{if(Dr.transition=null,yt=1,t)return t()}finally{yt=i,Dr.transition=n,ht=e,!(ht&6)&&kl()}}function hC(){Zi=Ac.current,Lt(Ac)}function mu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,EH(n)),cn!==null)for(n=cn.return;n!==null;){var i=n;switch(Gk(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Kv();break;case 3:wd(),Lt(Bi),Lt(ei),tC();break;case 5:eC(i);break;case 4:wd();break;case 13:Lt(Vt);break;case 19:Lt(Vt);break;case 10:Yk(i.type._context);break;case 22:case 23:hC()}n=n.return}if(Nn=t,cn=t=Za(t.current,null),Vn=Zi=e,xn=0,Uf=null,uC=Cy=Cu=0,Oi=of=null,uu!==null){for(e=0;e<uu.length;e++)if(n=uu[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}uu=null}return t}function yL(t,e){do{var n=cn;try{if(qk(),Xg.current=n0,t0){for(var i=Kt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}t0=!1}if(ku=0,Tn=pn=Kt=null,rf=!1,$f=0,lC.current=null,n===null||n.return===null){xn=1,Uf=e,cn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Vn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=M2(o);if(f!==null){f.flags&=-257,O2(f,o,a,s,e),f.mode&1&&R2(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){R2(s,u,e),fC();break e}l=Error(oe(426))}}else if(zt&&a.mode&1){var b=M2(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),O2(b,o,a,s,e),Kk(bd(l,a));break e}}s=l=bd(l,a),xn!==4&&(xn=2),of===null?of=[s]:of.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=tL(s,l,e);C2(s,v);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(qa===null||!qa.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=nL(s,a,e);C2(s,x);break e}}s=s.return}while(s!==null)}xL(n)}catch(k){e=k,cn===n&&n!==null&&(cn=n=n.return);continue}break}while(!0)}function wL(){var t=i0.current;return i0.current=n0,t===null?n0:t}function fC(){(xn===0||xn===3||xn===2)&&(xn=4),Nn===null||!(Cu&268435455)&&!(Cy&268435455)||ba(Nn,Vn)}function o0(t,e){var n=ht;ht|=2;var i=wL();(Nn!==t||Vn!==e)&&(mo=null,mu(t,e));do try{ZH();break}catch(r){yL(t,r)}while(!0);if(qk(),ht=n,i0.current=i,cn!==null)throw Error(oe(261));return Nn=null,Vn=0,xn}function ZH(){for(;cn!==null;)bL(cn)}function JH(){for(;cn!==null&&!_9();)bL(cn)}function bL(t){var e=_L(t.alternate,t,Zi);t.memoizedProps=t.pendingProps,e===null?xL(t):cn=e,lC.current=null}function xL(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WH(n,e),n!==null){n.flags&=32767,cn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,cn=null;return}}else if(n=VH(n,e,Zi),n!==null){cn=n;return}if(e=e.sibling,e!==null){cn=e;return}cn=e=t}while(e!==null);xn===0&&(xn=5)}function Xl(t,e,n){var i=yt,r=Dr.transition;try{Dr.transition=null,yt=1,QH(t,e,n,i)}finally{Dr.transition=r,yt=i}return null}function QH(t,e,n,i){do Wc();while(Ra!==null);if(ht&6)throw Error(oe(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(O9(t,s),t===Nn&&(cn=Nn=null,Vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Um||(Um=!0,kL(zv,function(){return Wc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dr.transition,Dr.transition=null;var o=yt;yt=1;var a=ht;ht|=4,lC.current=null,KH(t,n),mL(n,t),wH(Bx),Hv=!!$x,Bx=$x=null,t.current=n,XH(n),k9(),ht=a,yt=o,Dr.transition=s}else t.current=n;if(Um&&(Um=!1,Ra=t,s0=r),s=t.pendingLanes,s===0&&(qa=null),A9(n.stateNode),Ui(t,en()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(r0)throw r0=!1,t=oS,oS=null,t;return s0&1&&t.tag!==0&&Wc(),s=t.pendingLanes,s&1?t===aS?af++:(af=0,aS=t):af=0,kl(),null}function Wc(){if(Ra!==null){var t=tD(s0),e=Dr.transition,n=yt;try{if(Dr.transition=null,yt=16>t?16:t,Ra===null)var i=!1;else{if(t=Ra,Ra=null,s0=0,ht&6)throw Error(oe(331));var r=ht;for(ht|=4,Te=t.current;Te!==null;){var s=Te,o=s.child;if(Te.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Te=u;Te!==null;){var c=Te;switch(c.tag){case 0:case 11:case 15:sf(8,c,s)}var d=c.child;if(d!==null)d.return=c,Te=d;else for(;Te!==null;){c=Te;var h=c.sibling,f=c.return;if(hL(c),c===u){Te=null;break}if(h!==null){h.return=f,Te=h;break}Te=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}Te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Te=o;else e:for(;Te!==null;){if(s=Te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:sf(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Te=v;break e}Te=s.return}}var y=t.current;for(Te=y;Te!==null;){o=Te;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Te=w;else e:for(o=y;Te!==null;){if(a=Te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ky(9,a)}}catch(k){Yt(a,a.return,k)}if(a===o){Te=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Te=x;break e}Te=a.return}}if(ht=r,kl(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(gy,t)}catch{}i=!0}return i}finally{yt=n,Dr.transition=e}}return!1}function G2(t,e,n){e=bd(n,e),e=tL(t,e,1),t=Xa(t,e,1),e=vi(),t!==null&&(Fp(t,1,e),Ui(t,e))}function Yt(t,e,n){if(t.tag===3)G2(t,t,n);else for(;e!==null;){if(e.tag===3){G2(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(qa===null||!qa.has(i))){t=bd(n,t),t=nL(e,t,1),e=Xa(e,t,1),t=vi(),e!==null&&(Fp(e,1,t),Ui(e,t));break}}e=e.return}}function eV(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=vi(),t.pingedLanes|=t.suspendedLanes&n,Nn===t&&(Vn&n)===n&&(xn===4||xn===3&&(Vn&130023424)===Vn&&500>en()-cC?mu(t,0):uC|=n),Ui(t,e)}function SL(t,e){e===0&&(t.mode&1?(e=Mm,Mm<<=1,!(Mm&130023424)&&(Mm=4194304)):e=1);var n=vi();t=Bo(t,e),t!==null&&(Fp(t,e,n),Ui(t,n))}function tV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),SL(t,n)}function nV(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(oe(314))}i!==null&&i.delete(e),SL(t,n)}var _L;_L=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bi.current)Fi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fi=!1,HH(t,e,n);Fi=!!(t.flags&131072)}else Fi=!1,zt&&e.flags&1048576&&AD(e,Yv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Yg(t,e),t=e.pendingProps;var r=gd(e,ei.current);Vc(e,n),r=iC(null,e,i,t,r,n);var s=rC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zi(i)?(s=!0,Xv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Jk(e),r.updater=_y,e.stateNode=r,r._reactInternals=e,qx(e,i,t,n),e=Jx(null,e,i,!0,s,n)):(e.tag=0,zt&&s&&Wk(e),hi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Yg(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=rV(i),t=Zr(i,t),r){case 0:e=Zx(null,e,i,t,n);break e;case 1:e=L2(null,e,i,t,n);break e;case 11:e=I2(null,e,i,t,n);break e;case 14:e=D2(null,e,i,Zr(i.type,t),n);break e}throw Error(oe(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zr(i,r),Zx(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zr(i,r),L2(t,e,i,r,n);case 3:e:{if(oL(e),t===null)throw Error(oe(387));i=e.pendingProps,s=e.memoizedState,r=s.element,OD(t,e),Qv(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=bd(Error(oe(423)),e),e=j2(t,e,i,n,r);break e}else if(i!==r){r=bd(Error(oe(424)),e),e=j2(t,e,i,n,r);break e}else for(ir=Ka(e.stateNode.containerInfo.firstChild),ar=e,zt=!0,is=null,n=RD(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vd(),i===r){e=zo(t,e,n);break e}hi(t,e,i,n)}e=e.child}return e;case 5:return ID(e),t===null&&Gx(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,zx(i,r)?o=null:s!==null&&zx(i,s)&&(e.flags|=32),sL(t,e),hi(t,e,o,n),e.child;case 6:return t===null&&Gx(e),null;case 13:return aL(t,e,n);case 4:return Qk(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=yd(e,null,i,n):hi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zr(i,r),I2(t,e,i,r,n);case 7:return hi(t,e,e.pendingProps,n),e.child;case 8:return hi(t,e,e.pendingProps.children,n),e.child;case 12:return hi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Rt(Zv,i._currentValue),i._currentValue=o,s!==null)if(ms(s.value,o)){if(s.children===r.children&&!Bi.current){e=zo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Do(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Kx(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Kx(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}hi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Vc(e,n),r=zr(r),i=i(r),e.flags|=1,hi(t,e,i,n),e.child;case 14:return i=e.type,r=Zr(i,e.pendingProps),r=Zr(i.type,r),D2(t,e,i,r,n);case 15:return iL(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zr(i,r),Yg(t,e),e.tag=1,zi(i)?(t=!0,Xv(e)):t=!1,Vc(e,n),eL(e,i,r),qx(e,i,r,n),Jx(null,e,i,!0,t,n);case 19:return lL(t,e,n);case 22:return rL(t,e,n)}throw Error(oe(156,e.tag))};function kL(t,e){return ZI(t,e)}function iV(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(t,e,n,i){return new iV(t,e,n,i)}function pC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rV(t){if(typeof t=="function")return pC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ok)return 11;if(t===Ik)return 14}return 2}function Za(t,e){var n=t.alternate;return n===null?(n=Nr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qg(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")pC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vc:return gu(n.children,r,s,e);case Mk:o=8,r|=8;break;case wx:return t=Nr(12,n,e,r|2),t.elementType=wx,t.lanes=s,t;case bx:return t=Nr(13,n,e,r),t.elementType=bx,t.lanes=s,t;case xx:return t=Nr(19,n,e,r),t.elementType=xx,t.lanes=s,t;case II:return Ey(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case MI:o=10;break e;case OI:o=9;break e;case Ok:o=11;break e;case Ik:o=14;break e;case ha:o=16,i=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Nr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function gu(t,e,n,i){return t=Nr(7,t,i,e),t.lanes=n,t}function Ey(t,e,n,i){return t=Nr(22,t,i,e),t.elementType=II,t.lanes=n,t.stateNode={isHidden:!1},t}function gb(t,e,n){return t=Nr(6,t,null,e),t.lanes=n,t}function vb(t,e,n){return e=Nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sV(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zw(0),this.expirationTimes=Zw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zw(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function mC(t,e,n,i,r,s,o,a,l){return t=new sV(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jk(s),t}function oV(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gc,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function CL(t){if(!t)return nl;t=t._reactInternals;e:{if(Wu(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(zi(n))return CD(t,n,e)}return e}function EL(t,e,n,i,r,s,o,a,l){return t=mC(n,i,!0,t,r,s,o,a,l),t.context=CL(null),n=t.current,i=vi(),r=Ya(n),s=Do(i,r),s.callback=e??null,Xa(n,s,r),t.current.lanes=r,Fp(t,r,i),Ui(t,i),t}function Ay(t,e,n,i){var r=e.current,s=vi(),o=Ya(r);return n=CL(n),e.context===null?e.context=n:e.pendingContext=n,e=Do(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Xa(r,e,o),t!==null&&(fs(t,r,o,s),Kg(t,r,o)),o}function a0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function K2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gC(t,e){K2(t,e),(t=t.alternate)&&K2(t,e)}function aV(){return null}var AL=typeof reportError=="function"?reportError:function(t){console.error(t)};function vC(t){this._internalRoot=t}Py.prototype.render=vC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));Ay(t,e,null,null)};Py.prototype.unmount=vC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Eu(function(){Ay(null,t,null,null)}),e[$o]=null}};function Py(t){this._internalRoot=t}Py.prototype.unstable_scheduleHydration=function(t){if(t){var e=rD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wa.length&&e!==0&&e<wa[n].priority;n++);wa.splice(n,0,t),n===0&&oD(t)}};function yC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ty(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function X2(){}function lV(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=a0(o);s.call(u)}}var o=EL(e,i,t,0,null,!1,!1,"",X2);return t._reactRootContainer=o,t[$o]=o.current,If(t.nodeType===8?t.parentNode:t),Eu(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=a0(l);a.call(u)}}var l=mC(t,0,!1,null,null,!1,!1,"",X2);return t._reactRootContainer=l,t[$o]=l.current,If(t.nodeType===8?t.parentNode:t),Eu(function(){Ay(e,l,n,i)}),l}function Ny(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=a0(o);a.call(l)}}Ay(e,o,t,r)}else o=lV(n,e,t,r,i);return a0(o)}nD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Oh(e.pendingLanes);n!==0&&(jk(e,n|1),Ui(e,en()),!(ht&6)&&(xd=en()+500,kl()))}break;case 13:Eu(function(){var i=Bo(t,1);if(i!==null){var r=vi();fs(i,t,1,r)}}),gC(t,1)}};Fk=function(t){if(t.tag===13){var e=Bo(t,134217728);if(e!==null){var n=vi();fs(e,t,134217728,n)}gC(t,134217728)}};iD=function(t){if(t.tag===13){var e=Ya(t),n=Bo(t,e);if(n!==null){var i=vi();fs(n,t,e,i)}gC(t,e)}};rD=function(){return yt};sD=function(t,e){var n=yt;try{return yt=t,e()}finally{yt=n}};Rx=function(t,e,n){switch(e){case"input":if(kx(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=by(i);if(!r)throw Error(oe(90));LI(i),kx(i,r)}}}break;case"textarea":FI(t,n);break;case"select":e=n.value,e!=null&&Bc(t,!!n.multiple,e,!1)}};WI=dC;GI=Eu;var uV={usingClientEntryPoint:!1,Events:[Bp,xc,by,HI,VI,dC]},ch={findFiberByHostInstance:lu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cV={bundleType:ch.bundleType,version:ch.version,rendererPackageName:ch.rendererPackageName,rendererConfig:ch.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qI(t),t===null?null:t.stateNode},findFiberByHostInstance:ch.findFiberByHostInstance||aV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hm.isDisabled&&Hm.supportsFiber)try{gy=Hm.inject(cV),qs=Hm}catch{}}hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uV;hr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yC(e))throw Error(oe(200));return oV(t,e,null,n)};hr.createRoot=function(t,e){if(!yC(t))throw Error(oe(299));var n=!1,i="",r=AL;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=mC(t,1,!1,null,null,n,!1,i,r),t[$o]=e.current,If(t.nodeType===8?t.parentNode:t),new vC(e)};hr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=qI(e),t=t===null?null:t.stateNode,t};hr.flushSync=function(t){return Eu(t)};hr.hydrate=function(t,e,n){if(!Ty(e))throw Error(oe(200));return Ny(null,t,e,!0,n)};hr.hydrateRoot=function(t,e,n){if(!yC(t))throw Error(oe(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=AL;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=EL(e,null,t,1,n??null,r,!1,s,o),t[$o]=e.current,If(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Py(e)};hr.render=function(t,e,n){if(!Ty(e))throw Error(oe(200));return Ny(null,t,e,!1,n)};hr.unmountComponentAtNode=function(t){if(!Ty(t))throw Error(oe(40));return t._reactRootContainer?(Eu(function(){Ny(null,null,t,!1,function(){t._reactRootContainer=null,t[$o]=null})}),!0):!1};hr.unstable_batchedUpdates=dC;hr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ty(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return Ny(t,e,n,!1,i)};hr.version="18.3.1-next-f1338f8080-20240426";function PL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PL)}catch(t){console.error(t)}}PL(),PI.exports=hr;var Cl=PI.exports;const dV=Hu(Cl);var q2=Cl;vx.createRoot=q2.createRoot,vx.hydrateRoot=q2.hydrateRoot;function ye(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function El(t,e=[]){let n=[];function i(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];const u=d=>{var v;const{scope:h,children:f,...p}=d,g=((v=h==null?void 0:h[t])==null?void 0:v[l])||a,b=S.useMemo(()=>p,Object.values(p));return m.jsx(g.Provider,{value:b,children:f})};u.displayName=s+"Provider";function c(d,h){var g;const f=((g=h==null?void 0:h[t])==null?void 0:g[l])||a,p=S.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,c]}const r=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,hV(r,...e)]}function hV(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function wC(t,e=[]){let n=[];function i(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];function u(d){const{scope:h,children:f,...p}=d,g=(h==null?void 0:h[t][l])||a,b=S.useMemo(()=>p,Object.values(p));return m.jsx(g.Provider,{value:b,children:f})}function c(d,h){const f=(h==null?void 0:h[t][l])||a,p=S.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const r=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,fV(r,...e)]}function fV(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function pV(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Ry(...t){return e=>t.forEach(n=>pV(n,e))}function dt(...t){return S.useCallback(Ry(...t),t)}var Au=S.forwardRef((t,e)=>{const{children:n,...i}=t,r=S.Children.toArray(n),s=r.find(gV);if(s){const o=s.props.children,a=r.map(l=>l===s?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return m.jsx(cS,{...i,ref:e,children:S.isValidElement(o)?S.cloneElement(o,void 0,a):null})}return m.jsx(cS,{...i,ref:e,children:n})});Au.displayName="Slot";var cS=S.forwardRef((t,e)=>{const{children:n,...i}=t;if(S.isValidElement(n)){const r=yV(n);return S.cloneElement(n,{...vV(i,n.props),ref:e?Ry(e,r):r})}return S.Children.count(n)>1?S.Children.only(null):null});cS.displayName="SlotClone";var mV=({children:t})=>m.jsx(m.Fragment,{children:t});function gV(t){return S.isValidElement(t)&&t.type===mV}function vV(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function yV(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Up(t){const e=t+"CollectionProvider",[n,i]=wC(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:g}=f,b=ln.useRef(null),v=ln.useRef(new Map).current;return m.jsx(r,{scope:p,itemMap:v,collectionRef:b,children:g})};o.displayName=e;const a=t+"CollectionSlot",l=ln.forwardRef((f,p)=>{const{scope:g,children:b}=f,v=s(a,g),y=dt(p,v.collectionRef);return m.jsx(Au,{ref:y,children:b})});l.displayName=a;const u=t+"CollectionItemSlot",c="data-radix-collection-item",d=ln.forwardRef((f,p)=>{const{scope:g,children:b,...v}=f,y=ln.useRef(null),w=dt(p,y),x=s(u,g);return ln.useEffect(()=>(x.itemMap.set(y,{ref:y,...v}),()=>void x.itemMap.delete(y))),m.jsx(Au,{[c]:"",ref:w,children:b})});d.displayName=u;function h(f){const p=s(t+"CollectionConsumer",f);return ln.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const v=Array.from(b.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((x,k)=>v.indexOf(x.ref.current)-v.indexOf(k.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,i]}var ti=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},wV=yk.useId||(()=>{}),bV=0;function il(t){const[e,n]=S.useState(wV());return ti(()=>{n(i=>i??String(bV++))},[t]),e?`radix-${e}`:""}var xV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],He=xV.reduce((t,e)=>{const n=S.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?Au:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(a,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function bC(t,e){t&&Cl.flushSync(()=>t.dispatchEvent(e))}function ni(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}function Uo({prop:t,defaultProp:e,onChange:n=()=>{}}){const[i,r]=SV({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:i,a=ni(n),l=S.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else r(u)},[s,t,r,a]);return[o,l]}function SV({defaultProp:t,onChange:e}){const n=S.useState(t),[i]=n,r=S.useRef(i),s=ni(e);return S.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}var _V=S.createContext(void 0);function Hp(t){const e=S.useContext(_V);return t||e||"ltr"}var yb="rovingFocusGroup.onEntryFocus",kV={bubbles:!1,cancelable:!0},My="RovingFocusGroup",[dS,TL,CV]=Up(My),[EV,Oy]=wC(My,[CV]),[AV,PV]=EV(My),NL=S.forwardRef((t,e)=>m.jsx(dS.Provider,{scope:t.__scopeRovingFocusGroup,children:m.jsx(dS.Slot,{scope:t.__scopeRovingFocusGroup,children:m.jsx(TV,{...t,ref:e})})}));NL.displayName=My;var TV=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:c=!1,...d}=t,h=S.useRef(null),f=dt(e,h),p=Hp(s),[g=null,b]=Uo({prop:o,defaultProp:a,onChange:l}),[v,y]=S.useState(!1),w=ni(u),x=TL(n),k=S.useRef(!1),[E,C]=S.useState(0);return S.useEffect(()=>{const P=h.current;if(P)return P.addEventListener(yb,w),()=>P.removeEventListener(yb,w)},[w]),m.jsx(AV,{scope:n,orientation:i,dir:p,loop:r,currentTabStopId:g,onItemFocus:S.useCallback(P=>b(P),[b]),onItemShiftTab:S.useCallback(()=>y(!0),[]),onFocusableItemAdd:S.useCallback(()=>C(P=>P+1),[]),onFocusableItemRemove:S.useCallback(()=>C(P=>P-1),[]),children:m.jsx(He.div,{tabIndex:v||E===0?-1:0,"data-orientation":i,...d,ref:f,style:{outline:"none",...t.style},onMouseDown:ye(t.onMouseDown,()=>{k.current=!0}),onFocus:ye(t.onFocus,P=>{const N=!k.current;if(P.target===P.currentTarget&&N&&!v){const I=new CustomEvent(yb,kV);if(P.currentTarget.dispatchEvent(I),!I.defaultPrevented){const L=x().filter(ee=>ee.focusable),$=L.find(ee=>ee.active),G=L.find(ee=>ee.id===g),X=[$,G,...L].filter(Boolean).map(ee=>ee.ref.current);OL(X,c)}}k.current=!1}),onBlur:ye(t.onBlur,()=>y(!1))})})}),RL="RovingFocusGroupItem",ML=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,...o}=t,a=il(),l=s||a,u=PV(RL,n),c=u.currentTabStopId===l,d=TL(n),{onFocusableItemAdd:h,onFocusableItemRemove:f}=u;return S.useEffect(()=>{if(i)return h(),()=>f()},[i,h,f]),m.jsx(dS.ItemSlot,{scope:n,id:l,focusable:i,active:r,children:m.jsx(He.span,{tabIndex:c?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ye(t.onMouseDown,p=>{i?u.onItemFocus(l):p.preventDefault()}),onFocus:ye(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:ye(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=MV(p,u.orientation,u.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let v=d().filter(y=>y.focusable).map(y=>y.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const y=v.indexOf(p.currentTarget);v=u.loop?OV(v,y+1):v.slice(y+1)}setTimeout(()=>OL(v))}})})})});ML.displayName=RL;var NV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function RV(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function MV(t,e,n){const i=RV(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return NV[i]}function OL(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function OV(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var IL=NL,DL=ML;function IV(t,e){return S.useReducer((n,i)=>e[n][i]??n,t)}var Yo=t=>{const{present:e,children:n}=t,i=DV(e),r=typeof n=="function"?n({present:i.isPresent}):S.Children.only(n),s=dt(i.ref,LV(r));return typeof n=="function"||i.isPresent?S.cloneElement(r,{ref:s}):null};Yo.displayName="Presence";function DV(t){const[e,n]=S.useState(),i=S.useRef({}),r=S.useRef(t),s=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=IV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const u=Vm(i.current);s.current=a==="mounted"?u:"none"},[a]),ti(()=>{const u=i.current,c=r.current;if(c!==t){const h=s.current,f=Vm(u);t?l("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&h!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),ti(()=>{if(e){let u;const c=e.ownerDocument.defaultView??window,d=f=>{const g=Vm(i.current).includes(f.animationName);if(f.target===e&&g&&(l("ANIMATION_END"),!r.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},h=f=>{f.target===e&&(s.current=Vm(i.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{c.clearTimeout(u),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(u=>{u&&(i.current=getComputedStyle(u)),n(u)},[])}}function Vm(t){return(t==null?void 0:t.animationName)||"none"}function LV(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var xC="Tabs",[jV,Lhe]=El(xC,[Oy]),LL=Oy(),[FV,SC]=jV(xC),jL=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=t,c=Hp(a),[d,h]=Uo({prop:i,onChange:r,defaultProp:s});return m.jsx(FV,{scope:n,baseId:il(),value:d,onValueChange:h,orientation:o,dir:c,activationMode:l,children:m.jsx(He.div,{dir:c,"data-orientation":o,...u,ref:e})})});jL.displayName=xC;var FL="TabsList",$L=S.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=SC(FL,n),o=LL(n);return m.jsx(IL,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:m.jsx(He.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});$L.displayName=FL;var BL="TabsTrigger",hS=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=SC(BL,n),a=LL(n),l=UL(o.baseId,i),u=HL(o.baseId,i),c=i===o.value;return m.jsx(DL,{asChild:!0,...a,focusable:!r,active:c,children:m.jsx(He.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":u,"data-state":c?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:ye(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:ye(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:ye(t.onFocus,()=>{const d=o.activationMode!=="manual";!c&&!r&&d&&o.onValueChange(i)})})})});hS.displayName=BL;var zL="TabsContent",ev=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=SC(zL,n),l=UL(a.baseId,i),u=HL(a.baseId,i),c=i===a.value,d=S.useRef(c);return S.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),m.jsx(Yo,{present:r||c,children:({present:h})=>m.jsx(He.div,{"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});ev.displayName=zL;function UL(t,e){return`${t}-trigger-${e}`}function HL(t,e){return`${t}-content-${e}`}const Er={BASE_URL:"/VonSim8/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};let $V=0;function me(t,e){const n=`atom${++$V}`,i={toString(){return(Er?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=BV,i.write=zV),e&&(i.write=e),i}function BV(t){return t(this)}function zV(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const Y2=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,wb=t=>"init"in t,bb=t=>!!t.write,l0=new WeakMap,fS=t=>{var e;return pS(t)&&!((e=l0.get(t))!=null&&e[1])},UV=(t,e)=>{const n=l0.get(t);if(n)n[1]=!0,n[0].forEach(i=>i(e));else if((Er?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},HV=t=>{if(l0.has(t))return;const e=[new Set,!1];l0.set(t,e);const n=()=>{e[1]=!0};t.then(n,n),t.onCancel=i=>{e[0].add(i)}},pS=t=>typeof(t==null?void 0:t.then)=="function",Z2=t=>"v"in t||"e"in t,Wm=t=>{if("e"in t)throw t.e;if((Er?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},VL=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},J2=(t,e,n,i,r)=>{var s;if((Er?"production":void 0)!=="production"&&i===e)throw new Error("[Bug] atom cannot depend on itself");n.d.set(i,r.n),fS(n.v)&&VL(e,n.v,r),(s=r.m)==null||s.t.add(e),t&&VV(t,i,e)},Zu=()=>[new Map,new Map,new Set],xb=(t,e,n)=>{t[0].has(e)||t[0].set(e,new Set),t[1].set(e,n)},VV=(t,e,n)=>{const i=t[0].get(e);i&&i.add(n)},WV=(t,e)=>t[0].get(e),Q2=(t,e)=>{t[2].add(e)},ra=t=>{let e,n=!1;const i=r=>{try{r()}catch(s){n||(e=s,n=!0)}};for(;t[1].size||t[2].size;){t[0].clear();const r=new Set(t[1].values());t[1].clear();const s=new Set(t[2]);t[2].clear(),r.forEach(o=>{var a;return(a=o.m)==null?void 0:a.l.forEach(i)}),s.forEach(i)}if(n)throw e},WL=(...[t,e,n,i])=>{let r;(Er?"production":void 0)!=="production"&&(r=new Set);const s=(w,x,k)=>{const E="v"in x,C=x.v,P=fS(x.v)?x.v:null;if(pS(k)){HV(k);for(const N of x.d.keys())VL(w,k,t(N));x.v=k,delete x.e}else x.v=k,delete x.e;(!E||!Object.is(C,x.v))&&(++x.n,P&&UV(P,k))},o=(w,x,k)=>{var E;const C=t(x);if(Z2(C)&&(C.m&&!(k!=null&&k.has(x))||Array.from(C.d).every(([G,U])=>o(w,G,k).n===U)))return C;C.d.clear();let P=!0;const N=G=>{if(Y2(x,G)){const X=t(G);if(!Z2(X))if(wb(G))s(G,X,G.init);else throw new Error("no atom init");return Wm(X)}const U=o(w,G,k);try{return Wm(U)}finally{if(P)J2(w,x,C,G,U);else{const X=Zu();J2(X,x,C,G,U),f(X,x,C),ra(X)}}};let I,L;const $={get signal(){return I||(I=new AbortController),I.signal},get setSelf(){return(Er?"production":void 0)!=="production"&&!bb(x)&&console.warn("setSelf function cannot be used with read-only atom"),!L&&bb(x)&&(L=(...G)=>{if((Er?"production":void 0)!=="production"&&P&&console.warn("setSelf function cannot be called in sync"),!P)return h(x,...G)}),L}};try{const G=e(x,N,$);if(s(x,C,G),pS(G)){(E=G.onCancel)==null||E.call(G,()=>I==null?void 0:I.abort());const U=()=>{if(C.m){const X=Zu();f(X,x,C),ra(X)}};G.then(U,U)}return C}catch(G){return delete C.v,C.e=G,++C.n,C}finally{P=!1}},a=w=>Wm(o(void 0,w)),l=(w,x,k)=>{var E,C;const P=new Map;for(const N of((E=k.m)==null?void 0:E.t)||[])P.set(N,t(N));for(const N of k.p)P.set(N,t(N));return(C=WV(w,x))==null||C.forEach(N=>{P.set(N,t(N))}),P};function u(w,x,k){const E=[],C=new Set,P=new Set,N=[[x,k]];for(;N.length>0;){const[I,L]=N[N.length-1];if(P.has(I)){N.pop();continue}if(C.has(I)){E.push([I,L,L.n]),P.add(I),N.pop();continue}C.add(I);for(const[$,G]of l(w,I,L))I!==$&&!C.has($)&&N.push([$,G])}return[E,P]}const c=(w,x,k)=>{const[E,C]=u(w,x,k),P=new Set([x]);for(let N=E.length-1;N>=0;--N){const[I,L,$]=E[N];let G=!1;for(const U of L.d.keys())if(U!==I&&P.has(U)){G=!0;break}G&&(o(w,I,C),f(w,I,L),$!==L.n&&(xb(w,I,L),P.add(I))),C.delete(I)}},d=(w,x,...k)=>{let E=!0;const C=N=>Wm(o(w,N)),P=(N,...I)=>{const L=t(N);try{if(Y2(x,N)){if(!wb(N))throw new Error("atom not writable");const $=L.n,G=I[0];s(N,L,G),f(w,N,L),$!==L.n&&(xb(w,N,L),c(w,N,L));return}else return d(w,N,...I)}finally{E||ra(w)}};try{return n(x,C,P,...k)}finally{E=!1}},h=(w,...x)=>{const k=Zu();try{return d(k,w,...x)}finally{ra(k)}},f=(w,x,k)=>{if(k.m&&!fS(k.v)){for(const E of k.d.keys())k.m.d.has(E)||(p(w,E,t(E)).t.add(x),k.m.d.add(E));for(const E of k.m.d||[])if(!k.d.has(E)){k.m.d.delete(E);const C=g(w,E,t(E));C==null||C.t.delete(x)}}},p=(w,x,k)=>{if(!k.m){o(w,x);for(const E of k.d.keys())p(w,E,t(E)).t.add(x);if(k.m={l:new Set,d:new Set(k.d.keys()),t:new Set},(Er?"production":void 0)!=="production"&&r.add(x),bb(x)){const E=k.m;let C;const P=(N,I)=>{let L=!0;C=(...$)=>{try{return d(N,x,...$)}finally{L||ra(N)}};try{return I()}finally{L=!1}};Q2(w,()=>{const N=P(w,()=>i(x,(...I)=>C(...I)));N&&(E.u=I=>P(I,N))})}}return k.m},g=(w,x,k)=>{if(k.m&&!k.m.l.size&&!Array.from(k.m.t).some(E=>{var C;return(C=t(E).m)==null?void 0:C.d.has(x)})){const E=k.m.u;E&&Q2(w,()=>E(w)),delete k.m,(Er?"production":void 0)!=="production"&&r.delete(x);for(const C of k.d.keys()){const P=g(w,C,t(C));P==null||P.t.delete(x)}return}return k.m},y={get:a,set:h,sub:(w,x)=>{const k=Zu(),E=t(w),P=p(k,w,E).l;return P.add(x),ra(k),()=>{P.delete(x);const N=Zu();g(N,w,E),ra(N)}},unstable_derive:w=>WL(...w(t,e,n,i))};return(Er?"production":void 0)!=="production"&&Object.assign(y,{dev4_get_internal_weak_map:()=>({get:x=>{const k=t(x);if(k.n!==0)return k}}),dev4_get_mounted_atoms:()=>r,dev4_restore_atoms:x=>{const k=Zu();for(const[E,C]of x)if(wb(E)){const P=t(E),N=P.n;s(E,P,C),f(k,E,P),N!==P.n&&(xb(k,E,P),c(k,E,P))}ra(k)}}),y},_C=()=>{const t=new WeakMap;return WL(n=>{if((Er?"production":void 0)!=="production"&&!n)throw new Error("Atom is undefined or null");let i=t.get(n);return i||(i={d:new Map,p:new Set,n:0},t.set(n,i)),i},(n,...i)=>n.read(...i),(n,...i)=>n.write(...i),(n,...i)=>{var r;return(r=n.onMount)==null?void 0:r.call(n,...i)})};let dh;const GV=()=>(dh||(dh=_C(),(Er?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=dh),globalThis.__JOTAI_DEFAULT_STORE__!==dh&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),dh),GL={BASE_URL:"/VonSim8/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},KL=S.createContext(void 0),XL=t=>S.useContext(KL)||GV(),KV=({children:t,store:e})=>{const n=S.useRef();return!e&&!n.current&&(n.current=_C()),S.createElement(KL.Provider,{value:e||n.current},t)},qL=t=>typeof(t==null?void 0:t.then)=="function",XV=t=>{t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e})},qV=ln.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(XV(t),t)}),Sb=new WeakMap,YV=t=>{let e=Sb.get(t);return e||(e=new Promise((n,i)=>{let r=t;const s=l=>u=>{r===l&&n(u)},o=l=>u=>{r===l&&i(u)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(u=>{if((GL?"production":void 0)!=="production"&&u===l)throw new Error("[Bug] p is not updated even after cancelation");qL(u)?(Sb.set(u,e),r=u,u.then(s(u),o(u)),a(u)):n(u)})};t.then(s(t),o(t)),a(t)}),Sb.set(t,e)),e};function tt(t,e){const n=XL(),[[i,r,s],o]=S.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let a=i;if((r!==n||s!==t)&&(o(),a=n.get(t)),S.useEffect(()=>{const u=n.sub(t,()=>{o()});return o(),u},[n,t,void 0]),S.useDebugValue(a),qL(a)){const u=YV(a);return qV(u)}return a}function YL(t,e){const n=XL();return S.useCallback((...r)=>{if((GL?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function Vp(t,e){return[tt(t),YL(t)]}const{createElement:Sd,createContext:ZV,createRef:jhe,forwardRef:ZL,useCallback:Ci,useContext:JL,useEffect:vu,useImperativeHandle:QL,useLayoutEffect:JV,useMemo:QV,useRef:Qi,useState:u0}=yk,eT=yk.useId,Iy=ZV(null);Iy.displayName="PanelGroupContext";const Hf=JV,e7=typeof eT=="function"?eT:()=>null;let t7=0;function kC(t=null){const e=e7(),n=Qi(t||e||null);return n.current===null&&(n.current=""+t7++),t??n.current}function ej({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:u,onExpand:c,onResize:d,order:h,style:f,tagName:p="div",...g}){const b=JL(Iy);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:y,getPanelSize:w,getPanelStyle:x,groupId:k,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:P,resizePanel:N,unregisterPanel:I}=b,L=kC(o),$=Qi({callbacks:{onCollapse:u,onExpand:c,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:L,idIsFromProps:o!==void 0,order:h});Qi({didLogMissingDefaultSizeWarning:!1}),Hf(()=>{const{callbacks:U,constraints:X}=$.current,ee={...X};$.current.id=L,$.current.idIsFromProps=o!==void 0,$.current.order=h,U.onCollapse=u,U.onExpand=c,U.onResize=d,X.collapsedSize=n,X.collapsible=i,X.defaultSize=r,X.maxSize=a,X.minSize=l,(ee.collapsedSize!==X.collapsedSize||ee.collapsible!==X.collapsible||ee.maxSize!==X.maxSize||ee.minSize!==X.minSize)&&C($.current,ee)}),Hf(()=>{const U=$.current;return P(U),()=>{I(U)}},[h,L,P,I]),QL(s,()=>({collapse:()=>{v($.current)},expand:()=>{y($.current)},getId(){return L},getSize(){return w($.current)},isCollapsed(){return E($.current)},isExpanded(){return!E($.current)},resize:U=>{N($.current,U)}}),[v,y,w,E,L,N]);const G=x($.current,r);return Sd(p,{...g,children:t,className:e,style:{...G,...f},"data-panel":"","data-panel-id":L,"data-panel-group-id":k,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const tv=ZL((t,e)=>Sd(ej,{...t,forwardedRef:e}));ej.displayName="Panel";tv.displayName="forwardRef(Panel)";function Ke(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const tj=10;function Vf(t,e,n=tj){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function Yi(t,e,n){return Vf(t,e,n)===0}function Pc({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];Ke(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(Vf(n,a)<0)if(s){const l=(r+a)/2;Vf(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(tj)),n}function Dh({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(Yi(t,0))return e;const s=[...e],[o,a]=i;Ke(o!=null),Ke(a!=null);let l=0;if(r==="keyboard"){{const c=t<0?a:o,d=n[c];if(Ke(d),d.collapsible){const h=e[c];Ke(h!=null);const f=n[c];Ke(f);const{collapsedSize:p=0,minSize:g=0}=f;if(Yi(h,p)){const b=g-h;Vf(b,Math.abs(t))>0&&(t=t<0?0-b:b)}}}{const c=t<0?o:a,d=n[c];Ke(d);const{collapsible:h}=d;if(h){const f=e[c];Ke(f!=null);const p=n[c];Ke(p);const{collapsedSize:g=0,minSize:b=0}=p;if(Yi(f,b)){const v=f-g;Vf(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}}{const c=t<0?1:-1;let d=t<0?a:o,h=0;for(;;){const p=e[d];Ke(p!=null);const b=Pc({panelConstraints:n,panelIndex:d,size:100})-p;if(h+=b,d+=c,d<0||d>=n.length)break}const f=Math.min(Math.abs(t),Math.abs(h));t=t<0?0-f:f}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const h=Math.abs(t)-Math.abs(l),f=e[d];Ke(f!=null);const p=f-h,g=Pc({panelConstraints:n,panelIndex:d,size:p});if(!Yi(f,g)&&(l+=f-g,s[d]=g,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(Yi(l,0))return e;{const c=t<0?a:o,d=e[c];Ke(d!=null);const h=d+l,f=Pc({panelConstraints:n,panelIndex:c,size:h});if(s[c]=f,!Yi(f,h)){let p=h-f,b=t<0?a:o;for(;b>=0&&b<n.length;){const v=s[b];Ke(v!=null);const y=v+p,w=Pc({panelConstraints:n,panelIndex:b,size:y});if(Yi(v,w)||(p-=w-v,s[b]=w),Yi(p,0))break;t>0?b--:b++}}}const u=s.reduce((c,d)=>d+c,0);return Yi(u,100)?s:e}function n7({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];Ke(a!=null),e.forEach((d,h)=>{const{constraints:f}=d,{maxSize:p=100,minSize:g=0}=f;h===a?(i=g,r=p):(s+=g,o+=p)});const l=Math.min(r,100-s),u=Math.max(i,100-o),c=t[a];return{valueMax:l,valueMin:u,valueNow:c}}function Wf(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function nj(t,e,n=document){const r=Wf(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function ij(t,e,n){const i=nj(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function rj(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function Dy(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function i7(t,e,n,i=document){var r,s,o,a;const l=Dy(e,i),u=Wf(t,i),c=l?u.indexOf(l):-1,d=(r=(s=n[c])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,h=(o=(a=n[c+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,h]}function r7({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){Qi({didWarnAboutMissingResizeHandle:!1}),Hf(()=>{if(!s)return;const a=Wf(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:u,valueMin:c,valueNow:d}=n7({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),h=a[l];if(h!=null){const f=r[l];Ke(f),h.setAttribute("aria-controls",f.id),h.setAttribute("aria-valuemax",""+Math.round(u)),h.setAttribute("aria-valuemin",""+Math.round(c)),h.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,u)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),vu(()=>{if(!s)return;const a=e.current;Ke(a);const{panelDataArray:l}=a,u=rj(n,s);Ke(u!=null,`No group found for id "${n}"`);const c=Wf(n,s);Ke(c);const d=c.map(h=>{const f=h.getAttribute("data-panel-resize-handle-id");Ke(f);const[p,g]=i7(n,f,l,s);if(p==null||g==null)return()=>{};const b=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const y=l.findIndex(w=>w.id===p);if(y>=0){const w=l[y];Ke(w);const x=i[y],{collapsedSize:k=0,collapsible:E,minSize:C=0}=w.constraints;if(x!=null&&E){const P=Dh({delta:Yi(x,k)?C-k:k-x,layout:i,panelConstraints:l.map(N=>N.constraints),pivotIndices:ij(n,f,s),trigger:"keyboard"});i!==P&&o(P)}}break}}};return h.addEventListener("keydown",b),()=>{h.removeEventListener("keydown",b)}});return()=>{d.forEach(h=>h())}},[s,t,e,n,i,r,o])}function tT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function sj(t){return t.type==="keydown"}function oj(t){return t.type.startsWith("mouse")}function aj(t){return t.type.startsWith("touch")}function lj(t,e){const n=t==="horizontal";if(oj(e))return n?e.clientX:e.clientY;if(aj(e)){const i=e.touches[0];return Ke(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function s7(t,e,n,i,r){const s=n==="horizontal",o=Dy(e,r);Ke(o);const a=o.getAttribute("data-panel-group-id");Ke(a);let{initialCursorPosition:l}=i;const u=lj(n,t),c=rj(a,r);Ke(c);const d=c.getBoundingClientRect(),h=s?d.width:d.height;return(u-l)/h*100}function o7(t,e,n,i,r,s){if(sj(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:s7(t,e,n,i,s)}function a7({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];Ke(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];Ke(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,u=r/l;i++,e[s]=u,r-=u}return e}function Ju(t,e,n){e.forEach((i,r)=>{const s=t[r];Ke(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:u=0,collapsible:c}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:h,onExpand:f,onResize:p}=o;p&&p(i,d),c&&(h||f)&&(f&&(d==null||d===u)&&i!==u&&f(),h&&(d==null||d!==u)&&i===u&&h())}})}function Gm(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function l7({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let mS=null,du=null;function uj(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function u7(){du!==null&&(document.head.removeChild(du),mS=null,du=null)}function _b(t){if(mS===t)return;mS=t;const e=uj(t);du===null&&(du=document.createElement("style"),document.head.appendChild(du)),du.innerHTML=`*{cursor: ${e}!important;}`}function c7(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function nT(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function cj(t){return`react-resizable-panels:${t}`}function dj(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function hj(t,e){try{const n=cj(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function d7(t,e,n){var i,r;const s=(i=hj(t,n))!==null&&i!==void 0?i:{},o=dj(e);return(r=s[o])!==null&&r!==void 0?r:null}function h7(t,e,n,i,r){var s;const o=cj(t),a=dj(e),l=(s=hj(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(u){console.error(u)}}function iT({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Yi(i,100))for(let s=0;s<e.length;s++){const o=n[s];Ke(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];Ke(o!=null);const a=Pc({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!Yi(r,0))for(let s=0;s<e.length;s++){const o=n[s];Ke(o!=null);const a=o+r,l=Pc({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,Yi(r,0)))break}return n}const f7=100,Lh={getItem:t=>(nT(Lh),Lh.getItem(t)),setItem:(t,e)=>{nT(Lh),Lh.setItem(t,e)}},rT={};function fj({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=Lh,style:u,tagName:c="div",...d}){const h=kC(s),f=Qi(null),[p,g]=u0(null),[b,v]=u0([]),y=Qi({}),w=Qi(new Map),x=Qi(0),k=Qi({autoSaveId:t,direction:i,dragState:p,id:h,keyboardResizeBy:a,onLayout:o,storage:l}),E=Qi({layout:b,panelDataArray:[],panelDataArrayChanged:!1});Qi({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),QL(r,()=>({getId:()=>k.current.id,getLayout:()=>{const{layout:Z}=E.current;return Z},setLayout:Z=>{const{onLayout:ue}=k.current,{layout:D,panelDataArray:O}=E.current,B=iT({layout:Z,panelConstraints:O.map(_=>_.constraints)});tT(D,B)||(v(B),E.current.layout=B,ue&&ue(B),Ju(O,B,y.current))}}),[]),Hf(()=>{k.current.autoSaveId=t,k.current.direction=i,k.current.dragState=p,k.current.id=h,k.current.onLayout=o,k.current.storage=l}),r7({committedValuesRef:k,eagerValuesRef:E,groupId:h,layout:b,panelDataArray:E.current.panelDataArray,setLayout:v,panelGroupElement:f.current}),vu(()=>{const{panelDataArray:Z}=E.current;if(t){if(b.length===0||b.length!==Z.length)return;let ue=rT[t];ue==null&&(ue=c7(h7,f7),rT[t]=ue);const D=[...Z],O=new Map(w.current);ue(t,D,O,b,l)}},[t,b,l]),vu(()=>{});const C=Ci(Z=>{const{onLayout:ue}=k.current,{layout:D,panelDataArray:O}=E.current;if(Z.constraints.collapsible){const B=O.map(R=>R.constraints),{collapsedSize:_=0,panelSize:T,pivotIndices:M}=zl(O,Z,D);if(Ke(T!=null),T!==_){w.current.set(Z.id,T);const K=ac(O,Z)===O.length-1?T-_:_-T,W=Dh({delta:K,layout:D,panelConstraints:B,pivotIndices:M,trigger:"imperative-api"});Gm(D,W)||(v(W),E.current.layout=W,ue&&ue(W),Ju(O,W,y.current))}}},[]),P=Ci(Z=>{const{onLayout:ue}=k.current,{layout:D,panelDataArray:O}=E.current;if(Z.constraints.collapsible){const B=O.map(K=>K.constraints),{collapsedSize:_=0,panelSize:T,minSize:M=0,pivotIndices:R}=zl(O,Z,D);if(T===_){const K=w.current.get(Z.id),W=K!=null&&K>=M?K:M,Y=ac(O,Z)===O.length-1?T-W:W-T,Ne=Dh({delta:Y,layout:D,panelConstraints:B,pivotIndices:R,trigger:"imperative-api"});Gm(D,Ne)||(v(Ne),E.current.layout=Ne,ue&&ue(Ne),Ju(O,Ne,y.current))}}},[]),N=Ci(Z=>{const{layout:ue,panelDataArray:D}=E.current,{panelSize:O}=zl(D,Z,ue);return Ke(O!=null),O},[]),I=Ci((Z,ue)=>{const{panelDataArray:D}=E.current,O=ac(D,Z);return l7({defaultSize:ue,dragState:p,layout:b,panelData:D,panelIndex:O})},[p,b]),L=Ci(Z=>{const{layout:ue,panelDataArray:D}=E.current,{collapsedSize:O=0,collapsible:B,panelSize:_}=zl(D,Z,ue);return B===!0&&_===O},[]),$=Ci(Z=>{const{layout:ue,panelDataArray:D}=E.current,{collapsedSize:O=0,collapsible:B,panelSize:_}=zl(D,Z,ue);return Ke(_!=null),!B||_>O},[]),G=Ci(Z=>{const{panelDataArray:ue}=E.current;ue.push(Z),ue.sort((D,O)=>{const B=D.order,_=O.order;return B==null&&_==null?0:B==null?-1:_==null?1:B-_}),E.current.panelDataArrayChanged=!0},[]);Hf(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:Z,onLayout:ue,storage:D}=k.current,{layout:O,panelDataArray:B}=E.current;let _=null;if(Z){const M=d7(Z,B,D);M&&(w.current=new Map(Object.entries(M.expandToSizes)),_=M.layout)}_==null&&(_=a7({panelDataArray:B}));const T=iT({layout:_,panelConstraints:B.map(M=>M.constraints)});tT(O,T)||(v(T),E.current.layout=T,ue&&ue(T),Ju(B,T,y.current))}});const U=Ci(Z=>function(D){D.preventDefault();const O=f.current;if(!O)return()=>null;const{direction:B,dragState:_,id:T,keyboardResizeBy:M,onLayout:R}=k.current,{layout:K,panelDataArray:W}=E.current,{initialLayout:te}=_??{},Y=ij(T,Z,O);let Ne=o7(D,Z,B,_,M,O);if(Ne===0)return;const Fe=B==="horizontal";document.dir==="rtl"&&Fe&&(Ne=-Ne);const Be=W.map(ge=>ge.constraints),je=Dh({delta:Ne,layout:te??K,panelConstraints:Be,pivotIndices:Y,trigger:sj(D)?"keyboard":"mouse-or-touch"}),Ve=!Gm(K,je);(oj(D)||aj(D))&&x.current!=Ne&&(x.current=Ne,_b(Ve?Fe?"horizontal":"vertical":Fe?Ne<0?"horizontal-min":"horizontal-max":Ne<0?"vertical-min":"vertical-max")),Ve&&(v(je),E.current.layout=je,R&&R(je),Ju(W,je,y.current))},[]),X=Ci((Z,ue)=>{const{onLayout:D}=k.current,{layout:O,panelDataArray:B}=E.current,_=B.map(te=>te.constraints),{panelSize:T,pivotIndices:M}=zl(B,Z,O);Ke(T!=null);const K=ac(B,Z)===B.length-1?T-ue:ue-T,W=Dh({delta:K,layout:O,panelConstraints:_,pivotIndices:M,trigger:"imperative-api"});Gm(O,W)||(v(W),E.current.layout=W,D&&D(W),Ju(B,W,y.current))},[]),ee=Ci((Z,ue)=>{const{layout:D,panelDataArray:O}=E.current,{collapsedSize:B=0,collapsible:_}=ue,{collapsedSize:T=0,collapsible:M,maxSize:R=100,minSize:K=0}=Z.constraints,{panelSize:W}=zl(O,Z,D);Ke(W!=null),_&&M&&W===B?B!==T&&X(Z,T):W<K?X(Z,K):W>R&&X(Z,R)},[X]),he=Ci((Z,ue)=>{const{direction:D}=k.current,{layout:O}=E.current;if(!f.current)return;const B=Dy(Z,f.current);Ke(B);const _=lj(D,ue);g({dragHandleId:Z,dragHandleRect:B.getBoundingClientRect(),initialCursorPosition:_,initialLayout:O})},[]),V=Ci(()=>{u7(),g(null)},[]),F=Ci(Z=>{const{panelDataArray:ue}=E.current,D=ac(ue,Z);D>=0&&(ue.splice(D,1),delete y.current[Z.id],E.current.panelDataArrayChanged=!0)},[]),ne=QV(()=>({collapsePanel:C,direction:i,dragState:p,expandPanel:P,getPanelSize:N,getPanelStyle:I,groupId:h,isPanelCollapsed:L,isPanelExpanded:$,reevaluatePanelConstraints:ee,registerPanel:G,registerResizeHandle:U,resizePanel:X,startDragging:he,stopDragging:V,unregisterPanel:F,panelGroupElement:f.current}),[C,p,i,P,N,I,h,L,$,ee,G,U,X,he,V,F]),ke={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Sd(Iy.Provider,{value:ne},Sd(c,{...d,children:e,className:n,style:{...ke,...u},ref:f,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":h}))}const pj=ZL((t,e)=>Sd(fj,{...t,forwardedRef:e}));fj.displayName="PanelGroup";pj.displayName="forwardRef(PanelGroup)";function ac(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function zl(t,e,n){const i=ac(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function p7({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){vu(()=>{if(t||n==null||i==null)return;const r=Dy(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");Ke(a);const l=Wf(a,i),u=nj(a,e,i);Ke(u!==null);const c=o.shiftKey?u>0?u-1:l.length-1:u+1<l.length?u+1:0;l[c].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function gS({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const u=Qi(null),c=Qi({onDragging:r});vu(()=>{c.current.onDragging=r});const d=JL(Iy);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:h,dragState:f,groupId:p,registerResizeHandle:g,startDragging:b,stopDragging:v,panelGroupElement:y}=d,w=kC(i),x=(f==null?void 0:f.dragHandleId)===w,[k,E]=u0(!1),[C,P]=u0(null),N=Ci(()=>{const L=u.current;Ke(L),L.blur(),v();const{onDragging:$}=c.current;$&&$(!1)},[v]);vu(()=>{if(n)P(null);else{const L=g(w);P(()=>L)}},[n,w,g]),vu(()=>{if(n||C==null||!x)return;const L=X=>{C(X)},$=X=>{C(X)},G=u.current;Ke(G);const U=G.ownerDocument;return U.body.addEventListener("contextmenu",N),U.body.addEventListener("mousemove",L),U.body.addEventListener("touchmove",L),U.body.addEventListener("mouseleave",$),window.addEventListener("mouseup",N),window.addEventListener("touchend",N),()=>{U.body.removeEventListener("contextmenu",N),U.body.removeEventListener("mousemove",L),U.body.removeEventListener("touchmove",L),U.body.removeEventListener("mouseleave",$),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N)}},[h,n,x,C,N]),p7({disabled:n,handleId:w,resizeHandler:C,panelGroupElement:y});const I={cursor:uj(h),touchAction:"none",userSelect:"none"};return Sd(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:L=>{b(w,L.nativeEvent);const $=c.current;Ke($);const{onDragging:G}=$;G&&G(!0)},onMouseUp:N,onTouchCancel:N,onTouchEnd:N,onTouchStart:L=>{b(w,L.nativeEvent);const $=c.current;Ke($);const{onDragging:G}=$;G&&G(!0)},ref:u,role:"separator",style:{...I,...s},tabIndex:o,"data-panel-group-direction":h,"data-panel-group-id":p,"data-resize-handle":"","data-resize-handle-active":x?"pointer":k?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w})}gS.displayName="PanelResizeHandle";var $s=function(){return $s=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$s.apply(this,arguments)};function mj(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function m7(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var g7=function(){};function v7(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function y7(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var gj=typeof window<"u",w7=gj?window:null,sT=function(t){return!!t.addEventListener},oT=function(t){return!!t.on},nv=function(t,e,n,i){n===void 0&&(n=w7),S.useEffect(function(){if(e&&n)return sT(n)?v7(n,t,e,i):oT(n)&&n.on(t,e,i),function(){sT(n)?y7(n,t,e,i):oT(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},b7=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},No=function(t,e,n,i){e===void 0&&(e=g7),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=S.useMemo(function(){var u=b7(t),c=function(d){if(u(d))return e(d)};return c},i);nv(s,l,o,a)},x7=function(t,e){return gj?window.matchMedia(t).matches:!1},S7=function(t,e){var n=S.useState(x7(t)),i=n[0],r=n[1];return S.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};const _7="modulepreload",k7=function(t){return"/VonSim8/"+t},aT={},C7=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=k7(l),l in aT)return;aT[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":_7,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function E7(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l,u;const c=async(h=!0)=>{await l,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){if(a=await C7(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(h=>{o==null||o(h)}),!a)return;u=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let h=!1;const f=()=>{h=!0,a==null||a.addEventListener("controlling",p=>{p.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",p=>{typeof p.isUpdate>"u"?typeof p.isExternal<"u"?p.isExternal?f():!h&&(i==null||i()):p.isExternal?window.location.reload():!h&&(i==null||i()):p.isUpdate||i==null||i()}),a.addEventListener("waiting",f),a.addEventListener("externalwaiting",f)}a.register({immediate:e}).then(h=>{s?s("/VonSim8/sw.js",h):r==null||r(h)}).catch(h=>{o==null||o(h)})}}return l=d(),c}function A7(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=S.useState(!1),[u,c]=S.useState(!1),[d]=S.useState(()=>E7({immediate:e,onOfflineReady(){c(!0),i==null||i()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[u,c],updateServiceWorker:d}}class pt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=_d(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Bs.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=_d(this,e,n);let i=[];return this.decompose(e,n,i,0),Bs.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new lf(this),s=new lf(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new lf(this,e)}iterRange(e,n=this.length){return new vj(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new yj(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?pt.empty:e.length<=32?new Jt(e):Bs.from(Jt.split(e,[]))}}class Jt extends pt{constructor(e,n=P7(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new T7(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new Jt(lT(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=iv(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Jt(a,o.length+s.length));else{let l=a.length>>1;i.push(new Jt(a.slice(0,l)),new Jt(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof Jt))return super.replace(e,n,i);[e,n]=_d(this,e,n);let r=iv(this.text,iv(i.text,lT(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new Jt(r,s):Bs.from(Jt.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=_d(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new Jt(i,r)),i=[],r=-1);return r>-1&&n.push(new Jt(i,r)),n}}class Bs extends pt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?i.push(a):a.decompose(e-o,n-o,i,u)}o=l+1}}replace(e,n,i){if([e,n]=_d(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[r]=l,new Bs(c,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=_d(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Bs))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],u=e.children[s];if(l!=u)return i+l.scanIdentical(u,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new Jt(f,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof Bs)for(let g of f.children)d(g);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof Jt&&l&&(p=c[c.length-1])instanceof Jt&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new Jt(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>r&&h(),l+=f.lines,u+=f.length+1,c.push(f))}function h(){l!=0&&(a.push(c.length==1?c[0]:Bs.from(c,u)),u=-1,l=c.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new Bs(a,n)}}pt.empty=new Jt([""],0);function P7(t){let e=-1;for(let n of t)e+=n.length+1;return e}function iv(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function lT(t,e,n){return iv(t,[""],e,n)}class lf{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Jt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Jt?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Jt){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Jt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class vj{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new lf(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class yj{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(pt.prototype[Symbol.iterator]=function(){return this.iter()},lf.prototype[Symbol.iterator]=vj.prototype[Symbol.iterator]=yj.prototype[Symbol.iterator]=function(){return this});class T7{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function _d(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}let Gc="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Gc.length;t++)Gc[t]+=Gc[t-1];function N7(t){for(let e=1;e<Gc.length;e+=2)if(Gc[e]>t)return Gc[e-1]<=t;return!1}function uT(t){return t>=127462&&t<=127487}const cT=8205;function Un(t,e,n=!0,i=!0){return(n?wj:R7)(t,e,i)}function wj(t,e,n){if(e==t.length)return e;e&&bj(t.charCodeAt(e))&&xj(t.charCodeAt(e-1))&&e--;let i=pi(t,e);for(e+=os(i);e<t.length;){let r=pi(t,e);if(i==cT||r==cT||n&&N7(r))e+=os(r),i=r;else if(uT(r)){let s=0,o=e-2;for(;o>=0&&uT(pi(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function R7(t,e,n){for(;e>0;){let i=wj(t,e-2,n);if(i<e)return i;e--}return 0}function bj(t){return t>=56320&&t<57344}function xj(t){return t>=55296&&t<56320}function pi(t,e){let n=t.charCodeAt(e);if(!xj(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return bj(i)?(n-55296<<10)+(i-56320)+65536:n}function CC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function os(t){return t<65536?1:2}const vS=/\r\n?|\n/;var Di=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Di||(Di={}));class Zs{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){yS(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new Zs(e)}composeDesc(e){return this.empty?e:e.empty?this:Sj(this,e)}mapDesc(e,n=!1){return e.empty?this:wS(this,e,n)}mapPos(e,n=-1,i=Di.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=r+a;if(l<0){if(u>e)return s+(e-r);s+=a}else{if(i!=Di.Simple&&u>=e&&(i==Di.TrackDel&&r<e&&u>e||i==Di.TrackBefore&&r<e||i==Di.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Zs(e)}static create(e){return new Zs(e)}}class gn extends Zs{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return yS(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return wS(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(pt.empty);i.push(o?e.slice(s,s+o):pt.empty)}s+=o}return new gn(n,i)}compose(e){return this.empty?e:e.empty?this:Sj(this,e,!0)}map(e,n=!1){return e.empty?this:wS(this,e,n,!0)}iterChanges(e,n=!1){yS(this,e,n)}get desc(){return Zs.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Gf(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);Yn(r,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Yn(n,c,d),d>0&&Ma(i,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);Yn(n,c,-1),Yn(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new gn(n,i),filtered:Zs.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!r.length)return;o<n&&Yn(r,n-o,-1);let d=new gn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof gn){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?pt.of(f.split(i||vS)):f:pt.empty,g=p.length;if(d==h&&g==0)return;d<o&&l(),d>o&&Yn(r,d-o,-1),Yn(r,h-d,g),Ma(s,r,p),o=h}}return u(e),l(!a),a}static empty(e){return new gn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(pt.empty);i[r]=pt.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new gn(n,i)}static createSet(e,n){return new gn(e,n)}}function Yn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Ma(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(pt.empty);t.push(n)}}function yS(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let u=r,c=s,d=pt.empty;for(;u+=a,c+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,u,s,c,d),r=u,s=c}}}function wS(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Gf(t),a=new Gf(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);Yn(r,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(Yn(r,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(Yn(r,0,o.ins),s&&Ma(s,r,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let d=Math.min(c,a.len);u+=d,c-=d,a.forward(d)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;Yn(r,u,l<o.i?o.ins:0),s&&l<o.i&&Ma(s,r,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?gn.createSet(r,s):Zs.create(r);throw new Error("Mismatched change set lengths")}}function Sj(t,e,n=!1){let i=[],r=n?[]:null,s=new Gf(t),o=new Gf(e);for(let a=!1;;){if(s.done&&o.done)return r?gn.createSet(i,r):Zs.create(i);if(s.ins==0)Yn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)Yn(i,0,o.ins,a),r&&Ma(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Yn(i,l,c,a),r&&c&&Ma(r,i,o.text)}else o.ins==-1?(Yn(i,s.off?0:s.len,l,a),r&&Ma(r,i,s.textBit(l))):(Yn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Ma(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>u),s.forward2(l),o.forward(l)}}}}class Gf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?pt.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?pt.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class hu{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new hu(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return ie.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return ie.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(e.anchor,e.head)}static create(e,n,i){return new hu(e,n,i)}}class ie{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:ie.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(e,n=!0){return ie.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,ie.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(e.ranges.map(n=>hu.fromJSON(n)),e.main)}static single(e,n=e){return new ie([ie.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return ie.normalized(e.slice(),n);i=s.to}return new ie(e,n)}static cursor(e,n=0,i,r){return hu.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?hu.create(n,e,48|s):hu.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?ie.range(l,a):ie.range(a,l))}}return new ie(e,n)}}function _j(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let EC=0;class Pe{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=EC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Pe(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:AC),!!e.static,e.enables)}of(e){return new rv([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new rv(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new rv(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function AC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class rv{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=EC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||bS(d,c)){let f=i(d);if(a?!dT(f,d.values[o],r):!r(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let g=d0(h,p);if(this.dependencies.every(b=>b instanceof Pe?h.facet(b)===d.facet(b):b instanceof _i?h.field(b,!1)==d.field(b,!1):!0)||(a?dT(f=i(d),g,r):r(f=i(d),g)))return d.values[o]=g,0}else f=i(d);return d.values[o]=f,1}}}}function dT(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function bS(t,e){let n=!1;for(let i of e)uf(t,i)&1&&(n=!0);return n}function M7(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<i.length;c++){let d=d0(l,i[c]);if(r[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(l){for(let u of i)uf(l,u);return l.values[o]=a(l),1},update(l,u){if(!bS(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=bS(l,i),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&AC(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const hT=Pe.define({static:!0});class _i{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new _i(EC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(hT).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,hT.of({field:this,create:e})]}get extension(){return this}}const Ql={lowest:4,low:3,default:2,high:1,highest:0};function hh(t){return e=>new kj(e,t)}const Wp={highest:hh(Ql.highest),high:hh(Ql.high),default:hh(Ql.default),low:hh(Ql.low),lowest:hh(Ql.lowest)};class kj{constructor(e,n){this.inner=e,this.prec=n}}class Gp{of(e){return new xS(this,e)}reconfigure(e){return Gp.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class xS{constructor(e,n){this.compartment=e,this.inner=n}}class c0{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of O7(e,n,o))h instanceof _i?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],u=[];for(let h of r)a[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],p=f[0].facet,g=c&&c[h]||[];if(f.every(b=>b.type==0))if(a[p.id]=l.length<<1|1,AC(g,f))l.push(i.facet(p));else{let b=p.combine(f.map(v=>v.value));l.push(i&&p.compare(b,i.facet(p))?i.facet(p):b)}else{for(let b of f)b.type==0?(a[b.id]=l.length<<1|1,l.push(b.value)):(a[b.id]=u.length<<1,u.push(v=>b.dynamicSlot(v)));a[p.id]=u.length<<1,u.push(b=>M7(b,p,f))}}let d=u.map(h=>h(a));return new c0(e,o,d,a,l,s)}}function O7(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let u=i[l].indexOf(o);u>-1&&i[l].splice(u,1),o instanceof xS&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof xS){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof kj)s(o.inner,o.prec);else if(o instanceof _i)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof rv)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Ql.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,Ql.default),i.reduce((o,a)=>o.concat(a))}function uf(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function d0(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const Cj=Pe.define(),SS=Pe.define({combine:t=>t.some(e=>e),static:!0}),Ej=Pe.define({combine:t=>t.length?t[0]:void 0,static:!0}),Aj=Pe.define(),Pj=Pe.define(),Tj=Pe.define(),Nj=Pe.define({combine:t=>t.length?t[0]:!1});class Zo{constructor(e,n){this.type=e,this.value=n}static define(){return new I7}}class I7{of(e){return new Zo(this,e)}}class D7{constructor(e){this.map=e}of(e){return new Ze(this,e)}}class Ze{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Ze(this.type,n)}is(e){return this.type==e}static define(e={}){return new D7(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}Ze.reconfigure=Ze.define();Ze.appendConfig=Ze.define();class Sn{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&_j(i,n.newLength),s.some(a=>a.type==Sn.time)||(this.annotations=s.concat(Sn.time.of(Date.now())))}static create(e,n,i,r,s,o){return new Sn(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Sn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Sn.time=Zo.define();Sn.userEvent=Zo.define();Sn.addToHistory=Zo.define();Sn.remote=Zo.define();function L7(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function Rj(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=gn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:Ze.mapEffects(t.effects,r).concat(Ze.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function _S(t,e,n){let i=e.selection,r=Kc(e.annotations);return e.userEvent&&(r=r.concat(Sn.userEvent.of(e.userEvent))),{changes:e.changes instanceof gn?e.changes:gn.of(e.changes||[],n,t.facet(Ej)),selection:i&&(i instanceof ie?i:ie.single(i.anchor,i.head)),effects:Kc(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Mj(t,e,n){let i=_S(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=Rj(i,_S(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=Sn.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return F7(n?j7(r):r)}function j7(t){let e=t.startState,n=!0;for(let r of e.facet(Aj)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:L7(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=gn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Sn.create(e,r,t.selection&&t.selection.map(s),Ze.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(Pj);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof Sn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Sn?t=s[0]:t=Mj(e,Kc(s),!1)}return t}function F7(t){let e=t.startState,n=e.facet(Tj),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=Rj(i,_S(e,s,t.changes.newLength),!0))}return i==t?t:Sn.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const $7=[];function Kc(t){return t==null?$7:Array.isArray(t)?t:[t]}var Hn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Hn||(Hn={}));const B7=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let kS;try{kS=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function z7(t){if(kS)return kS.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||B7.test(n)))return!0}return!1}function U7(t){return e=>{if(!/\S/.test(e))return Hn.Space;if(z7(e))return Hn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Hn.Word;return Hn.Other}}class ot{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)uf(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return uf(this,i),d0(this,i)}update(...e){return Mj(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(Gp.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,u)=>r.set(u,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(Ze.reconfigure)?(n=null,i=a.value):a.is(Ze.appendConfig)&&(n=null,i=Kc(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=c0.resolve(i,r,this),s=new ot(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(SS)?e.newSelection:e.newSelection.asSingle();new ot(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:ie.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=Kc(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(r);for(let h=0;h<a;h++)s[h]=s[h].map(c);let d=r.mapDesc(u,!0);s.push(l.range.map(d)),r=r.compose(c),o=Ze.mapEffects(o,c).concat(Ze.mapEffects(Kc(l.effects),d))}return{changes:r,selection:ie.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof gn?e:gn.of(e,this.doc.length,this.facet(ot.lineSeparator))}toText(e){return pt.of(e.split(this.facet(ot.lineSeparator)||vS))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(uf(this,n),d0(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof _i&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return ot.create({doc:e.doc,selection:ie.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=c0.resolve(e.extensions||[],new Map),i=e.doc instanceof pt?e.doc:pt.of((e.doc||"").split(n.staticFacet(ot.lineSeparator)||vS)),r=e.selection?e.selection instanceof ie?e.selection:ie.single(e.selection.anchor,e.selection.head):ie.single(0);return _j(r,i.length),n.staticFacet(SS)||(r=r.asSingle()),new ot(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ot.tabSize)}get lineBreak(){return this.facet(ot.lineSeparator)||`
`}get readOnly(){return this.facet(Nj)}phrase(e,...n){for(let i of this.facet(ot.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(Cj))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return U7(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=Un(n,o,!1);if(s(n.slice(l,o))!=Hn.Word)break;o=l}for(;a<r;){let l=Un(n,a);if(s(n.slice(a,l))!=Hn.Word)break;a=l}return o==a?null:ie.range(o+i,a+i)}}ot.allowMultipleSelections=SS;ot.tabSize=Pe.define({combine:t=>t.length?t[0]:4});ot.lineSeparator=Ej;ot.readOnly=Nj;ot.phrases=Pe.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});ot.languageData=Cj;ot.changeFilter=Aj;ot.transactionFilter=Pj;ot.transactionExtender=Tj;Gp.reconfigure=Ze.define();function Al(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Pu{eq(e){return this==e}range(e,n=e){return CS.create(e,n,this)}}Pu.prototype.startSide=Pu.prototype.endSide=0;Pu.prototype.point=!1;Pu.prototype.mapMode=Di.TrackDel;let CS=class Oj{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new Oj(e,n,i)}};function ES(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class PC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,d=this.to[l]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(a=Math.max(a,f-h)),i.push(u),r.push(h-o),s.push(f-o))}return{mapped:i.length?new PC(r,s,i,a):null,pos:o}}}class gt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new gt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(ES)),this.isEmpty)return n.length?gt.of(n):this;let a=new Ij(this,null,-1).goto(0),l=0,u=[],c=new Tu;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];c.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(CS.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?gt.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:d}=l.map(a,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new gt(i,n,s||gt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Kf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Kf.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=fT(o,a,i),u=new fh(o,l,s),c=new fh(a,l,s);i.iterGaps((d,h,f)=>pT(u,d,c,h,f,r)),i.empty&&i.length==0&&pT(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=fT(s,o),l=new fh(s,a,0).goto(i),u=new fh(o,a,0).goto(i);for(;;){if(l.to!=u.to||!AS(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>r)return!0;l.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new fh(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);r.point(a,u,o.point,c,d,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(r.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new Tu;for(let r of e instanceof CS?[e]:n?H7(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return gt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=gt.empty;r=r.nextLayer)n=new gt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}gt.empty=new gt([],[],null,-1);function H7(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(ES(e,i)>0)return t.slice().sort(ES);e=i}return t}gt.empty.nextLayer=gt.empty;class Tu{finishChunk(e){this.chunks.push(new PC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Tu)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(gt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=gt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function fT(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class Ij{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Kf{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new Ij(o,n,i,s));return r.length==1?r[0]:new Kf(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)kb(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)kb(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),kb(this.heap,0)}}}function kb(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class fh{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Kf.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Km(this.active,e),Km(this.activeTo,e),Km(this.activeRank,e),this.minActive=mT(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;Xm(this.active,n,i),Xm(this.activeTo,n,r),Xm(this.activeRank,n,s),e&&Xm(e,n,this.cursor.from),this.minActive=mT(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Km(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function pT(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&AS(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!AS(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),c>o)break;a=c,u<=0&&t.next(),u>=0&&n.next()}}function AS(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Km(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Xm(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function mT(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Kp(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Un(t,r));return i}function V7(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Un(t,r)}return i===!0?-1:t.length}const PS="",gT=typeof Symbol>"u"?"__"+PS:Symbol.for(PS),TS=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),vT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class rl{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(g=>o.map(b=>g.replace(/&/,b))).reduce((g,b)=>g.concat(b)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=vT[gT]||1;return vT[gT]=e+1,PS+e.toString(36)}static mount(e,n,i){let r=e[TS],s=i&&i.nonce;r?s&&r.setNonce(s):r=new W7(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let yT=new Map;class W7{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=yT.get(i);if(s)return e[TS]=s;this.sheet=new r.CSSStyleSheet,yT.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[TS]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let u=0;u<a.rules.length;u++)i.insertRule(a.rules[u],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var sl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Xf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},G7=typeof navigator<"u"&&/Mac/.test(navigator.platform),K7=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var jn=0;jn<10;jn++)sl[48+jn]=sl[96+jn]=String(jn);for(var jn=1;jn<=24;jn++)sl[jn+111]="F"+jn;for(var jn=65;jn<=90;jn++)sl[jn]=String.fromCharCode(jn+32),Xf[jn]=String.fromCharCode(jn);for(var Cb in sl)Xf.hasOwnProperty(Cb)||(Xf[Cb]=sl[Cb]);function X7(t){var e=G7&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||K7&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Xf:sl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function qf(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function NS(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function sv(t,e){if(!e.anchorNode)return!1;try{return NS(t,e.anchorNode)}catch{return!1}}function Yf(t){return t.nodeType==3?Ru(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function cf(t,e,n,i){return n?wT(t,e,n,i,-1)||wT(t,e,n,i,1):!1}function Nu(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function h0(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function wT(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:to(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Nu(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?to(t):0}else return!1}}function to(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ly(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function q7(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Dj(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function Y7(t,e,n,i,r,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==l.body,p=1,g=1;if(f)h=q7(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:p,scaleY:g}=Dj(c,y)),h={left:y.left,right:y.left+c.clientWidth*p,top:y.top,bottom:y.top+c.clientHeight*g}}let b=0,v=0;if(r=="nearest")e.top<h.top?(v=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+v&&(v=e.bottom-h.bottom+v+o)):e.bottom>h.bottom&&(v=e.bottom-h.bottom+o,n<0&&e.top-v<h.top&&(v=-(h.top+v-e.top+o)));else{let y=e.bottom-e.top,w=h.bottom-h.top;v=(r=="center"&&y<=w?e.top+y/2-w/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-w+o)-h.top}if(i=="nearest"?e.left<h.left?(b=-(h.left-e.left+s),n>0&&e.right>h.right+b&&(b=e.right-h.right+b+s)):e.right>h.right&&(b=e.right-h.right+s,n<0&&e.left<h.left+b&&(b=-(h.left+b-e.left+s))):b=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,b||v)if(f)u.scrollBy(b,v);else{let y=0,w=0;if(v){let x=c.scrollTop;c.scrollTop+=v/g,w=(c.scrollTop-x)*g}if(b){let x=c.scrollLeft;c.scrollLeft+=b/p,y=(c.scrollLeft-x)*p}e={left:e.left-y,top:e.top-w,right:e.right-y,bottom:e.bottom-w},y&&Math.abs(y-b)<1&&(i="nearest"),w&&Math.abs(w-v)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function Z7(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class J7{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?to(n):0),i,Math.min(e.focusOffset,i?to(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let Qu=null;function Lj(t){if(t.setActive)return t.setActive();if(Qu)return t.focus(Qu);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Qu==null?{get preventScroll(){return Qu={preventScroll:!0},!0}}:void 0),!Qu){Qu=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let bT;function Ru(t,e,n=e){let i=bT||(bT=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Xc(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function Q7(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function jj(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function eW(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,to(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=to(n))}else{if(n==t)return!0;i=Nu(n),n=n.parentNode}}function Fj(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function $j(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=to(n)}else if(n.parentNode&&!h0(n))i=Nu(n),n=n.parentNode;else return null}}function Bj(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!h0(n))i=Nu(n)+1,n=n.parentNode;else return null}}class Jn{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Jn(e.parentNode,Nu(e),n)}static after(e,n){return new Jn(e.parentNode,Nu(e)+1,n)}}const TC=[];class At{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=At.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=xT(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=xT(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=to(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!At.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,u=i,c=i;l<this.children.length;l++){let d=this.children[l],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&r==-1&&(r=l,s=u),u>n&&d.dom.parentNode==this.dom){o=l,a=c;break}c=h,u=h+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=TC){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new zj(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}At.prototype.breakAfter=0;function xT(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class zj{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function Uj(t,e,n,i,r,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!h&&s.length<2&&c.merge(n,r,s.length?d:null,n==0,a,l))){if(i<u.length){let f=u[i];f&&(r<f.length||f.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,l)?s[s.length-1]=f:((r||f.children.length&&!f.children[0].length)&&f.merge(0,r,null,!1,0,l),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function Hj(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,Uj(t,u,c,a,l,i,0,r,s)}let Ii=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},RS=typeof document<"u"?document:{documentElement:{style:{}}};const MS=/Edge\/(\d+)/.exec(Ii.userAgent),Vj=/MSIE \d/.test(Ii.userAgent),OS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ii.userAgent),jy=!!(Vj||OS||MS),ST=!jy&&/gecko\/(\d+)/i.test(Ii.userAgent),Eb=!jy&&/Chrome\/(\d+)/.exec(Ii.userAgent),_T="webkitFontSmoothing"in RS.documentElement.style,Wj=!jy&&/Apple Computer/.test(Ii.vendor),kT=Wj&&(/Mobile\/\w+/.test(Ii.userAgent)||Ii.maxTouchPoints>2);var Ae={mac:kT||/Mac/.test(Ii.platform),windows:/Win/.test(Ii.platform),linux:/Linux|X11/.test(Ii.platform),ie:jy,ie_version:Vj?RS.documentMode||6:OS?+OS[1]:MS?+MS[1]:0,gecko:ST,gecko_version:ST?+(/Firefox\/(\d+)/.exec(Ii.userAgent)||[0,0])[1]:0,chrome:!!Eb,chrome_version:Eb?+Eb[1]:0,ios:kT,android:/Android\b/.test(Ii.userAgent),webkit:_T,safari:Wj,webkit_version:_T?+(/\bAppleWebKit\/(\d+)/.exec(Ii.userAgent)||[0,0])[1]:0,tabSize:RS.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const tW=256;class gs extends At{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof gs)||this.length-(n-e)+i.length>tW||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new gs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Jn(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return nW(this.dom,e,n)}}class Ho extends At{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(jj(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof Ho&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(Hj(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Ho(this.mark,n,o)}domAtPos(e){return Gj(this,e)}coordsAt(e,n){return Xj(this,e,n)}}function nW(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?Ae.chrome||Ae.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Ru(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Ae.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?Ly(l,o<0):l||null}class Oa extends At{static create(e,n,i){return new Oa(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Oa.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Oa)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Oa&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return pt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):pt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Jn.before(this.dom):Jn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return Ly(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class kd extends At{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof kd&&e.side==this.side}split(){return new kd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Jn.before(this.dom):Jn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return pt.empty}get isHidden(){return!0}}gs.prototype.children=Oa.prototype.children=kd.prototype.children=TC;function Gj(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Jn(n,0)}function Kj(t,e,n){let i,{children:r}=t;n>0&&e instanceof Ho&&r.length&&(i=r[r.length-1])instanceof Ho&&i.mark.eq(e.mark)?Kj(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function Xj(t,e,n){let i=null,r=-1,s=null,o=-1;function a(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?a(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(i=f,r=c-h)),h=p}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):iW(t)}function iW(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Yf(e);return n[n.length-1]||null}function IS(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const CT=Object.create(null);function f0(t,e,n){if(t==e)return!0;t||(t=CT),e||(e=CT);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function DS(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function rW(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Pl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var yi=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(yi||(yi={}));class Je extends Pu{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Xp(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new ol(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=qj(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new ol(e,i,r,n,e.widget||null,!0)}static line(e){return new qp(e)}static set(e,n=!1){return gt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Je.none=gt.empty;class Xp extends Je{constructor(e){let{start:n,end:i}=qj(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof Xp&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&f0(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Xp.prototype.point=!1;class qp extends Je{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof qp&&this.spec.class==e.spec.class&&f0(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}qp.prototype.mapMode=Di.TrackBefore;qp.prototype.point=!0;class ol extends Je{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Di.TrackBefore:Di.TrackAfter:Di.TrackDel}get type(){return this.startSide!=this.endSide?yi.WidgetRange:this.startSide<=0?yi.WidgetBefore:yi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ol&&sW(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}ol.prototype.point=!0;function qj(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function sW(t,e){return t==e||!!(t&&e&&t.compare(e))}function LS(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class an extends At{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof an))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Hj(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new an;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){f0(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){Kj(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=IS(n,this.attrs||{})),i&&(this.attrs=IS({class:i},this.attrs||{}))}domAtPos(e){return Gj(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(jj(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(DS(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&At.get(r)instanceof Ho;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=At.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ae.ios||!this.children.some(s=>s instanceof gs))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof gs)||/[^ -~]/.test(i.text))return null;let r=Yf(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=Xj(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof an&&this.children.length==0&&e.children.length==0&&f0(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof an)return s;if(o>n)break}r=o+s.breakAfter}return null}}class Lo extends At{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof Lo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Jn.before(this.dom):Jn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Lo(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return TC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):pt.empty}domBoundsAround(){return null}become(e){return e instanceof Lo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof jS?null:Ly(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class jS extends Pl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class df{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Lo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new an),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(qm(new kd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Lo)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(qm(new gs(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof ol){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof ol)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Lo(i.widget||Cd.block,a,i));else{let l=Oa.create(i.widget||Cd.inline,a,a?0:i.startSide),u=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(d.append(qm(new kd(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(qm(l,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new df(e,n,i,s);return o.openEnd=gt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function qm(t,e){for(let n of e)t=new Ho(n,[t],t.length);return t}class Cd extends Pl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Cd.inline=new Cd("span");Cd.block=new Cd("div");var jt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(jt||(jt={}));const Mu=jt.LTR,NC=jt.RTL;function Yj(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const oW=Yj("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),aW=Yj("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),FS=Object.create(null),Cs=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);FS[e]=n,FS[n]=-e}function Zj(t){return t<=247?oW[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?aW[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const lW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ia{get dir(){return this.level%2?NC:Mu}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Jj(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Jj(i.inner,r.inner))return!1}return!0}const kt=[];function uW(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let u=o,c=l,d=l;u<a;u++){let h=Zj(t.charCodeAt(u));h==512?h=c:h==8&&d==4&&(h=16),kt[u]=h==4?2:h,h&7&&(d=h),c=h}for(let u=o,c=l,d=l;u<a;u++){let h=kt[u];if(h==128)u<a-1&&c==kt[u+1]&&c&24?h=kt[u]=c:kt[u]=256;else if(h==64){let f=u+1;for(;f<a&&kt[f]==64;)f++;let p=u&&c==8||f<n&&kt[f]==8?d==1?1:8:256;for(let g=u;g<f;g++)kt[g]=p;u=f-1}else h==8&&d==1&&(kt[u]=1);c=h,h&7&&(d=h)}}}function cW(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let u=o?i[o-1].to:e,c=o<i.length?i[o].from:n;for(let d=u,h,f,p;d<c;d++)if(f=FS[h=t.charCodeAt(d)])if(f<0){for(let g=a-3;g>=0;g-=3)if(Cs[g+1]==-f){let b=Cs[g+2],v=b&2?r:b&4?b&1?s:r:0;v&&(kt[d]=kt[Cs[g]]=v),a=g;break}}else{if(Cs.length==189)break;Cs[a++]=d,Cs[a++]=h,Cs[a++]=l}else if((p=kt[d])==2||p==1){let g=p==r;l=g?0:1;for(let b=a-3;b>=0;b-=3){let v=Cs[b+2];if(v&2)break;if(g)Cs[b+2]|=2;else{if(v&4)break;Cs[b+2]|=4}}}}}function dW(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let u=kt[l];if(u==256){let c=l+1;for(;;)if(c==a){if(r==n.length)break;c=n[r++].to,a=r<n.length?n[r].from:e}else if(kt[c]==256)c++;else break;let d=s==1,h=(c<e?kt[c]:i)==1,f=d==h?d?1:2:i;for(let p=c,g=r,b=g?n[g-1].to:t;p>l;)p==b&&(p=n[--g].from,b=g?n[g-1].to:t),kt[--p]=f;l=c}else s=u,l++}}}function $S(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,u=0;l<n;){let c=!0,d=!1;if(u==s.length||l<s[u].from){let g=kt[l];g!=a&&(c=!1,d=g==16)}let h=!c&&a==1?[]:null,f=c?i:i+1,p=l;e:for(;;)if(u<s.length&&p==s[u].from){if(d)break e;let g=s[u];if(!c)for(let b=g.to,v=u+1;;){if(b==n)break e;if(v<s.length&&s[v].from==b)b=s[v++].to;else{if(kt[b]==a)break e;break}}if(u++,h)h.push(g);else{g.from>l&&o.push(new Ia(l,g.from,f));let b=g.direction==Mu!=!(f%2);BS(t,b?i+1:i,r,g.inner,g.from,g.to,o),l=g.to}p=g.to}else{if(p==n||(c?kt[p]!=a:kt[p]==a))break;p++}h?$S(t,l,p,i+1,r,h,o):l<p&&o.push(new Ia(l,p,f)),l=p}else for(let l=n,u=s.length;l>e;){let c=!0,d=!1;if(!u||l>s[u-1].to){let g=kt[l-1];g!=a&&(c=!1,d=g==16)}let h=!c&&a==1?[]:null,f=c?i:i+1,p=l;e:for(;;)if(u&&p==s[u-1].to){if(d)break e;let g=s[--u];if(!c)for(let b=g.from,v=u;;){if(b==e)break e;if(v&&s[v-1].to==b)b=s[--v].from;else{if(kt[b-1]==a)break e;break}}if(h)h.push(g);else{g.to<l&&o.push(new Ia(g.to,l,f));let b=g.direction==Mu!=!(f%2);BS(t,b?i+1:i,r,g.inner,g.from,g.to,o),l=g.from}p=g.from}else{if(p==e||(c?kt[p-1]!=a:kt[p-1]==a))break;p--}h?$S(t,p,l,i+1,r,h,o):p<l&&o.push(new Ia(p,l,f)),l=p}}function BS(t,e,n,i,r,s,o){let a=e%2?2:1;uW(t,r,s,i,a),cW(t,r,s,i,a),dW(r,s,i,a),$S(t,r,s,e,n,i,o)}function hW(t,e,n){if(!t)return[new Ia(0,0,e==NC?1:0)];if(e==Mu&&!n.length&&!lW.test(t))return Qj(t.length);if(n.length)for(;t.length>kt.length;)kt[kt.length]=256;let i=[],r=e==Mu?0:1;return BS(t,r,r,n,0,t.length,i),i}function Qj(t){return[new Ia(0,t,0)]}let eF="";function fW(t,e,n,i,r){var s;let o=i.head-t.from,a=Ia.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],u=l.side(r,n);if(o==u){let h=a+=r?1:-1;if(h<0||h>=e.length)return null;l=e[a=h],o=l.side(!r,n),u=l.side(r,n)}let c=Un(t.text,o,l.forward(r,n));(c<l.from||c>l.to)&&(c=u),eF=t.text.slice(Math.min(o,c),Math.max(o,c));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&c==u&&d.level+(r?0:1)<l.level?ie.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):ie.cursor(c+t.from,l.forward(r,n)?-1:1,l.level)}function pW(t,e,n){for(let i=e;i<n;i++){let r=Zj(t.charCodeAt(i));if(r==1)return Mu;if(r==2||r==4)return NC}return Mu}const tF=Pe.define(),nF=Pe.define(),iF=Pe.define(),rF=Pe.define(),zS=Pe.define(),sF=Pe.define(),oF=Pe.define(),RC=Pe.define(),MC=Pe.define(),aF=Pe.define({combine:t=>t.some(e=>e)}),lF=Pe.define({combine:t=>t.some(e=>e)}),uF=Pe.define();class qc{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new qc(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new qc(ie.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ym=Ze.define({map:(t,e)=>t.map(e)}),cF=Ze.define();function rr(t,e,n){let i=t.facet(rF);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const xa=Pe.define({combine:t=>t.length?t[0]:!0});let mW=0;const jh=Pe.define();class Gn{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.extension=s(this)}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new Gn(mW++,e,i,r,a=>{let l=[jh.of(a)];return o&&l.push(Zf.of(u=>{let c=u.plugin(a);return c?o(c):Je.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Gn.define(i=>new e(i),n)}}class Ab{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(rr(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){rr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){rr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const dF=Pe.define(),OC=Pe.define(),Zf=Pe.define(),hF=Pe.define(),IC=Pe.define(),fF=Pe.define();function ET(t,e){let n=t.state.facet(fF);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return gt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let u=s-e.from,c=o-e.from,d=r;for(let h=a.length-1;h>=0;h--,l--){let f=a[h].spec.bidiIsolate,p;if(f==null&&(f=pW(e.text,u,c)),l>0&&d.length&&(p=d[d.length-1]).to==u&&p.direction==f)p.to=c,d=p.inner;else{let g={from:u,to:c,direction:f,inner:[]};d.push(g),d=g.inner}}}}),r}const pF=Pe.define();function DC(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(pF)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Fh=Pe.define();class Lr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Lr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(a,d),p=Math.min(c,h);if(f<=p&&new Lr(f+u,p+u,f,p).addToSet(i),h>c)break;s+=2}if(!l)return i;new Lr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class p0{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=gn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Lr(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new p0(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class AT extends At{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Je.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new an],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Lr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!SW(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?vW(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;i=new Lr(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ae.ie||Ae.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=bW(o,a,e.changes);return i=Lr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ae.chrome||Ae.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Lo&&o.widget instanceof jS&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:d}=a,h,f,p,g;if(i&&i.range.fromB<d&&i.range.toB>c){let x=df.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),k=df.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=x.breakAtStart,p=x.openStart,g=k.openEnd;let E=this.compositionView(i);k.breakAtStart?E.breakAfter=1:k.content.length&&E.merge(E.length,E.length,k.content[0],!1,k.openStart,0)&&(E.breakAfter=k.content[0].breakAfter,k.content.shift()),x.content.length&&E.merge(0,0,x.content[x.content.length-1],!0,0,x.openEnd)&&x.content.pop(),h=x.content.concat(E).concat(k.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:g}=df.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:b,off:v}=s.findPos(u,1),{i:y,off:w}=s.findPos(l,-1);Uj(this,y,w,b,v,h,f,p,g)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(cF)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new gs(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new Ho(r,[n],n.length);let i=new an;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=At.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&sv(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ae.gecko&&a.empty&&!this.hasComposition&&gW(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new Jn(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!cf(l.node,l.offset,c.anchorNode,c.anchorOffset)||!cf(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{Ae.android&&Ae.chrome&&this.dom.contains(c.focusNode)&&xW(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=qf(this.view.root);if(d)if(a.empty){if(Ae.gecko){let h=yW(l.node,l.offset);if(h&&h!=3){let f=(h==1?$j:Bj)(l.node,l.offset);f&&(l=new Jn(f.node,f.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Jn(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Jn(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&cf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=qf(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=an.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=At.get(n.childNodes[r]);s instanceof an&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=At.get(n.childNodes[r]);s instanceof an&&(i=s.domAtPos(s.length))}return i?new Jn(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=At.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof an)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof an&&!(i instanceof an&&n>=0)))i=a,r=u;else if(i&&u==e&&l==e&&a instanceof Lo&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=u}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof an))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof gs))return null;let s=Un(r.text,i);if(s==i)return null;let o=Ru(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==jt.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>r)break;if(u>=i){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,g=p?Yf(p):[];if(g.length){let b=g[g.length-1],v=l?b.right-f.left:f.right-b.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?jt.RTL:jt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof an){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Yf(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new zj(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(Je.replace({widget:new jS(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Je.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Zf).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(hF).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(gt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(uF))try{if(u(this.view,e.range,e))return!0}catch(c){rr(this.view.state,c,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=DC(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;Y7(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==jt.LTR)}}function gW(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function mF(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=$j(n.focusNode,n.focusOffset),r=Bj(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=At.get(r.node);if(!a||a instanceof gs&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=At.get(i.node);!l||l instanceof gs&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function vW(t,e,n){let i=mF(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,u=new Lr(l.mapPos(s),l.mapPos(o),s,o),c=[];for(let d=r.parentNode;;d=d.parentNode){let h=At.get(d);if(h instanceof Ho)c.push({node:d,deco:h.mark});else{if(h instanceof an||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:u,text:r,marks:c,line:d};if(d!=t.contentDOM)c.push({node:d,deco:new Xp({inclusive:!0,attributes:rW(d),tagName:d.tagName.toLowerCase()})});else return null}}}function yW(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let wW=class{constructor(){this.changes=[]}compareRange(e,n){LS(e,n,this.changes)}comparePoint(e,n){LS(e,n,this.changes)}};function bW(t,e,n){let i=new wW;return gt.compare(t,e,n,i),i.changes}function xW(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function SW(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function _W(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return ie.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Un(r.text,s,!1):a=Un(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let u=Un(r.text,o,!1);if(i(r.text.slice(u,o))!=l)break;o=u}for(;a<r.length;){let u=Un(r.text,a);if(i(r.text.slice(a,u))!=l)break;a=u}return ie.range(o+r.from,a+r.from)}function kW(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function CW(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Pb(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function PT(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function TT(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function US(t,e,n){let i,r,s,o,a=!1,l,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let g=Yf(p);for(let b=0;b<g.length;b++){let v=g[b];r&&Pb(r,v)&&(v=PT(TT(v,r.bottom),r.top));let y=kW(e,v),w=CW(n,v);if(y==0&&w==0)return p.nodeType==3?NT(p,e,n):US(p,e,n);if(!i||o>w||o==w&&s>y){i=p,r=v,s=y,o=w;let x=w?n<v.top?-1:1:y?e<v.left?-1:1:0;a=!x||(x>0?b<g.length-1:b>0)}y==0?n>v.bottom&&(!c||c.bottom<v.bottom)?(l=p,c=v):n<v.top&&(!d||d.top>v.top)&&(u=p,d=v):c&&Pb(c,v)?c=TT(c,v.bottom):d&&Pb(d,v)&&(d=PT(d,v.top))}}if(c&&c.bottom>=n?(i=l,r=c):d&&d.top<=n&&(i=u,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return NT(i,h,n);if(a&&i.contentEditable!="false")return US(i,h,n);let f=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:f}}function NT(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Ru(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((Ae.chrome||Ae.gecko)&&Ru(t,a).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};r=a+(f?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function gF(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-a;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let x=t.viewState.heightOracle.textHeight/2,k=!1;l=t.elementAtHeight(h),l.type!=yi.Text;)for(;h=i>0?l.bottom+x:l.top-x,!(h>=0&&h<=u);){if(k)return n?null:0;k=!0,i=-i}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:RT(t,o,l,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:RT(t,o,l,c,d);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,b=g.elementFromPoint(c,d);b&&!t.contentDOM.contains(b)&&(b=null),b||(c=Math.max(o.left+1,Math.min(o.right-1,c)),b=g.elementFromPoint(c,d),b&&!t.contentDOM.contains(b)&&(b=null));let v,y=-1;if(b&&((r=t.docView.nearest(b))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let x=p.caretPositionFromPoint(c,d);x&&({offsetNode:v,offset:y}=x)}else if(p.caretRangeFromPoint){let x=p.caretRangeFromPoint(c,d);x&&({startContainer:v,startOffset:y}=x,(!t.contentDOM.contains(v)||Ae.safari&&EW(v,y,c)||Ae.chrome&&AW(v,y,c))&&(v=void 0))}v&&(y=Math.min(to(v),y))}if(!v||!t.docView.dom.contains(v)){let x=an.find(t.docView,f);if(!x)return h>l.top+l.height/2?l.to:l.from;({node:v,offset:y}=US(x.dom,c,d))}let w=t.docView.nearest(v);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let x=w.dom.getBoundingClientRect();return e.y<x.top||e.y<=x.bottom&&e.x<=(x.left+x.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(v,y)+w.posAtStart}function RT(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+V7(o,s,t.state.tabSize)}function EW(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Ru(t,i-1,i).getBoundingClientRect().left>n}function AW(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Ru(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function HS(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==yi.Text))return i}return n}function PW(t,e,n,i){let r=HS(t,e.head),s=!i||r.type!=yi.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==jt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ie.cursor(l,n?-1:1)}return ie.cursor(n?r.to:r.from,n?-1:1)}function MT(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let u=fW(r,s,o,a,n),c=eF;if(!u){if(r.number==(n?t.state.doc.lines:1))return a;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=t.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return u;l=i(c)}a=u}}function TW(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Hn.Space&&(r=o),r==o}}function NW(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return ie.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r,e.assoc||-1),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-f.from))),a=(s<0?f.top:f.bottom)+c}let d=l.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*s,g=gF(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?g<r:g>r)){let b=t.docView.coordsForChar(g),v=!b||p<b.top?-1:1;return ie.cursor(g,v,void 0,o)}}}function ov(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function Tb(t,e,n){let i=ov(t.state.facet(IC).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:ie.cursor(i,i<n.from?1:-1)}const $h="";class RW{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ot.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=$h}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=At.get(r),l=At.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:h0(r))||h0(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=At.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(MW(e,i.node,i.offset)?n:0))}}function MW(t,e,n){for(;;){if(!e||n<to(e))return!1;if(e==t)return!0;n=Nu(e)+1,e=e.parentNode}}class OT{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class OW{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:LW(e),l=new RW(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=jW(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!NS(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!NS(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((Ae.ios||Ae.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let d=Math.min(l,u),h=Math.max(l,u),f=c.from-d,p=c.to-h;(f==0||f==1||d==0)&&(p==0||p==-1||h==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=ie.single(u,l)}}}function vF(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,u=null;(s===8||Ae.android&&e.text.length<a-o)&&(l=r.to,u="end");let c=DW(t.state.doc.sliceString(o,a,$h),e.text,l-o,u);c&&(Ae.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==$h+$h&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:pt.of(e.text.slice(c.from,c.toB).split($h))})}else i&&(!t.hasFocus&&t.state.facet(xa)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(Ae.mac||Ae.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=ie.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:pt.of([" "])}):Ae.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=ie.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:pt.of([" "])}),n)return LC(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function LC(t,e,n,i=-1){if(Ae.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(Ae.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Xc(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Xc(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Xc(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=IW(t,e,n));return t.state.facet(sF).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function IW(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=t.state.sliceDoc(e.from,e.to),c,d=n&&mF(t,n.main.head);if(d){let p=e.insert.length-(e.to-e.from);c={from:d.from,to:d.to-p}}else c=t.state.doc.lineAt(s.head);let h=s.to-e.to,f=s.to-s.from;i=r.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:a,range:l||p.map(a)};let g=p.to-h,b=g-u.length;if(p.to-p.from!=f||t.state.sliceDoc(b,g)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let v=r.changes({from:b,to:g,insert:e.insert}),y=p.to-s.to;return{changes:v,range:l?ie.range(Math.max(0,l.anchor+y),Math.max(0,l.head+y)):p.map(v)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function DW(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function LW(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new OT(n,i)),(r!=n||s!=i)&&e.push(new OT(r,s))),e}function jW(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?ie.single(n+e,i+e):null}class FW{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ae.safari&&e.contentDOM.addEventListener("input",()=>null),Ae.gecko&&eG(e.contentDOM.ownerDocument)}handleEvent(e){!GW(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=$W(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&wF.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ae.android&&Ae.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ae.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=yF.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||BW.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Xc(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ae.safari&&!Ae.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function IT(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){rr(n.state,r)}}}function $W(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let o=r.domEventHandlers[s];o&&n(s).handlers.push(IT(i.value,o))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let o=r.domEventObservers[s];o&&n(s).observers.push(IT(i.value,o))}}for(let i in vs)n(i).handlers.push(vs[i]);for(let i in Hr)n(i).observers.push(Hr[i]);return e}const yF=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],BW="dthko",wF=[16,17,18,20,91,92,224,225],Zm=6;function Jm(t){return Math.max(0,t)*.7+8}function zW(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class UW{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Z7(e.contentDOM),this.atoms=e.state.facet(IC).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ot.allowMultipleSelections)&&HW(e,n),this.dragging=WW(e,n)&&SF(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&zW(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=DC(this.view);e.clientX-l.left<=r+Zm?n=-Jm(r-e.clientX):e.clientX+l.right>=o-Zm&&(n=Jm(e.clientX-o)),e.clientY-l.top<=s+Zm?i=-Jm(s-e.clientY):e.clientY+l.bottom>=a-Zm&&(i=Jm(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=ov(this.atoms,r.from,0);o!=r.from&&(s=ie.cursor(o,-1))}else{let o=ov(this.atoms,r.from,-1),a=ov(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=ie.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?ie.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function HW(t,e){let n=t.state.facet(tF);return n.length?n[0](e):Ae.mac?e.metaKey:e.ctrlKey}function VW(t,e){let n=t.state.facet(nF);return n.length?n[0](e):Ae.mac?!e.altKey:!e.ctrlKey}function WW(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=qf(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function GW(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=At.get(n))&&i.ignoreEvent(e))return!1;return!0}const vs=Object.create(null),Hr=Object.create(null),bF=Ae.ie&&Ae.ie_version<15||Ae.ios&&Ae.webkit_version<604;function KW(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),xF(t,n.value)},50)}function Fy(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function xF(t,e){e=Fy(t.state,RC,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(VS!=null&&n.selection.ranges.every(l=>l.empty)&&VS==s.toString()){let l=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:ie.cursor(u.from+d.length)}})}else o?i=n.changeByRange(l=>{let u=s.line(r++);return{changes:{from:l.from,to:l.to,insert:u.text},range:ie.cursor(l.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Hr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};vs.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Hr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Hr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};vs.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(iF))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=YW(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new UW(t,e,n,i)),i&&t.observer.ignore(()=>{Lj(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function DT(t,e,n,i){if(i==1)return ie.cursor(e,n);if(i==2)return _W(t.state,e,n);{let r=an.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,ie.range(o,a)}}let LT=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function XW(t,e,n,i){let r=an.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&LT(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&LT(n,i,a)?1:o&&o.bottom>=i?-1:1}function jT(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:XW(t,n,e.clientX,e.clientY)}}const qW=Ae.ie&&Ae.ie_version<=11;let FT=null,$T=0,BT=0;function SF(t){if(!qW)return t.detail;let e=FT,n=BT;return FT=t,BT=Date.now(),$T=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?($T+1)%3:1}function YW(t,e){let n=jT(t,e),i=SF(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=jT(t,s),u,c=DT(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=DT(t,n.pos,n.bias,i),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?ie.range(h,f):ie.range(f,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&i==1&&r.ranges.length>1&&(u=ZW(r,l.pos))?u:a?r.addRange(c):ie.create([c])}}}function ZW(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ie.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}vs.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=ie.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Fy(t.state,MC,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};vs.dragend=t=>(t.inputState.draggedContent=null,!1);function zT(t,e,n,i){if(n=Fy(t.state,RC,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&VW(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}vs.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&zT(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return zT(t,e,i,!0),!0}return!1};vs.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=bF?null:e.clipboardData;return n?(xF(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(KW(t),!1)};function JW(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function QW(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:Fy(t,MC,e.join(t.lineBreak)),ranges:n,linewise:i}}let VS=null;vs.copy=vs.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=QW(t.state);if(!n&&!r)return!1;VS=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=bF?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(JW(t,n),!1)};const _F=Zo.define();function kF(t,e){let n=[];for(let i of t.facet(oF)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:_F.of(!0)}):null}function CF(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=kF(t.state,e);n?t.dispatch(n):t.update([])}},10)}Hr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),CF(t)};Hr.blur=t=>{t.observer.clearSelectionRange(),CF(t)};Hr.compositionstart=Hr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Hr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ae.chrome&&Ae.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Hr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};vs.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),u=t.posAtDOM(a.endContainer,a.endOffset);return LC(t,{from:l,to:u,insert:t.state.toText(s)},null),!0}}let r;if(Ae.chrome&&Ae.android&&(r=yF.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ae.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ae.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Hr.compositionend(t,e),20),!1};const UT=new Set;function eG(t){UT.has(t)||(UT.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const HT=["pre-wrap","normal","pre-line","break-spaces"];let Ed=!1;function VT(){Ed=!1}class tG{constructor(e){this.lineWrapping=e,this.doc=pt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return HT.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=HT.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class nG{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class zs{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?yi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ol?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new zs(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var It=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(It||(It={}));const av=.001;class wi{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>av&&(Ed=!0),this.height=e)}replace(e,n,i){return wi.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:d}=r[a],h=s.lineAt(l,It.ByPosNoHeight,i.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,It.ByPosNoHeight,i,0,0);for(d+=f.to-u,u=f.to;a>0&&h.from<=r[a-1].toA;)l=r[a-1].fromA,c=r[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,It.ByPosNoHeight,i,0,0));c+=h.from-l,l=h.from;let p=jC.build(i.setDoc(o),e,c,d);s=m0(s,s.replace(l,u,p))}return s.updateHeight(i,0)}static empty(){return new Ji(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new iG(wi.of(e.slice(0,n)),o,wi.of(e.slice(i)))}}function m0(t,e){return t==e?t:(t.constructor!=e.constructor&&(Ed=!0),e)}wi.prototype.size=1;class EF extends wi{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new zs(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ji extends EF{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new zs(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Ji||r instanceof Dn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Dn?r=new Ji(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):wi.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Dn extends wi{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=n.doc.lineAt(u),d=a+c.length*l,h=Math.max(i,e-d/2);return new zs(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:c,length:d}=n.doc.line(s+u);return new zs(c,d,i+a*u,a,0)}}lineAt(e,n,i,r,s){if(n==It.ByHeight)return this.blockAt(e,i,r,s);if(n==It.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new zs(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=a+u.length*l,d=u.number-o,h=r+a*d+l*(u.from-s-d);return new zs(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(i,s);for(let c=e,d=r;c<=n;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-a;d+=l*p+u*(e-s-p)}let f=l+u*h.length;o(new zs(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Dn?i[i.length-1]=new Dn(s.length+r):i.push(null,new Dn(r-1))}if(e>0){let s=i[0];s instanceof Dn?i[0]=new Dn(e+s.length):i.unshift(new Dn(e-1),null)}return wi.of(i)}decomposeLeft(e,n){n.push(new Dn(e-1),null)}decomposeRight(e,n){n.push(null,new Dn(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Dn(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=av&&(l=-2);let h=new Ji(c,d);h.outdated=!1,o.push(h),a+=c+1}a<=s&&o.push(null,new Dn(s-a).updateHeight(e,a));let u=wi.of(o);return(l<0||Math.abs(u.height-this.height)>=av||Math.abs(l-this.heightMetrics(e,n).perLine)>=av)&&(Ed=!0),m0(this,u)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class iG extends wi{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==It.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==It.ByPosNoHeight?It.ByPosNoHeight:It.ByPos;return l?u.join(this.right.lineAt(a,c,i,o,a)):this.left.lineAt(a,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let u=this.lineAt(l,It.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&WT(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),WT(s,a)}return wi.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?wi.of(this.break?[e,null,n]:[e,n]):(this.left=m0(this.left,e),this.right=m0(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function WT(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Dn&&(i=t[e+1])instanceof Dn&&t.splice(e-1,3,new Dn(n.length+1+i.length))}const rG=5;class jC{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Ji?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Ji(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new EF(o,r,i)):(o||s||r>=rG)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ji(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Dn(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ji)return e;let n=new Ji(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Ji)&&!this.isCovered?this.nodes.push(new Ji(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Ji&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new jC(i,e);return gt.spans(n,i,r,s,0),s.finish(i)}}function sG(t,e,n){let i=new oG;return gt.compare(t,e,n,i,0),i.changes}class oG{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&LS(e,n,this.changes,5)}}function aG(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=Math.min(u==t.parentNode?r.innerHeight:l,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function lG(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Nb{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return Je.replace({widget:new uG(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class uG extends Pl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class GT{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=KT,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=jt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(OC).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new tG(n),this.stateDeco=e.facet(Zf).filter(i=>typeof i!="function"),this.heightMap=wi.empty().applyChanges(this.stateDeco,pt.empty,this.heightOracle.setDoc(e.doc),[new Lr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Je.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Qm(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?KT:new FC(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Bh(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Zf).filter(c=>typeof c!="function");let r=e.changedRanges,s=Lr.extendWithRanges(r,sG(i,this.stateDeco,e?e.changes:gn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);VT(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Ed)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(lF)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?jt.RTL:jt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0;if(a.width&&a.height){let{scaleX:x,scaleY:k}=Dj(n,a);(x>.005&&Math.abs(this.scaleX-x)>.005||k>.005&&Math.abs(this.scaleY-k)>.005)&&(this.scaleX=x,this.scaleY=k,u|=8,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=Fj(e.scrollDOM);let p=(this.printing?lG:aG)(n,this.paddingTop),g=p.top-this.pixelViewport.top,b=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=a.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let x=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(x)&&(o=!0),o||r.lineWrapping&&Math.abs(y-this.contentDOMWidth)>r.charWidth){let{lineHeight:k,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=k>0&&r.refresh(s,k,E,C,y/E,x),o&&(e.docView.minWidth=0,u|=8)}g>0&&b>0?c=Math.max(g,b):g<0&&b<0&&(c=Math.min(g,b)),VT();for(let k of this.viewports){let E=k.from==this.viewport.from?x:e.docView.measureVisibleLineHeights(k);this.heightMap=(o?wi.empty().applyChanges(this.stateDeco,pt.empty,this.heightOracle,[new Lr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new nG(k.from,E))}Ed&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Qm(r.lineAt(o-i*1e3,It.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,It.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,It.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=d.top:h=d.bottom-c,l=new Qm(r.lineAt(h-1e3/2,It.ByHeight,s,0,0).from,r.lineAt(h+c+1e3/2,It.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Qm(this.heightMap.lineAt(i,It.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,It.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,It.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,It.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Nb(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=jt.LTR&&!i)return[];let a=[],l=(c,d,h,f)=>{if(d-c<s)return;let p=this.state.selection.main,g=[p.from];p.empty||g.push(p.to);for(let v of g)if(v>c&&v<d){l(c,v-10,h,f),l(v+10,d,h,f);return}let b=dG(e,v=>v.from>=h.from&&v.to<=h.to&&Math.abs(v.from-c)<s&&Math.abs(v.to-d)<s&&!g.some(y=>v.from<y&&v.to>y));if(!b){if(d<h.to&&n&&i&&n.visibleRanges.some(w=>w.from<=d&&w.to>=d)){let w=n.moveToLineBoundary(ie.cursor(d),!1,!0).head;w>c&&(d=w)}let v=this.gapSize(h,c,d,f),y=i||v<2e6?v:2e6;b=new Nb(c,d,v,y)}a.push(b)},u=c=>{if(c.length<o||c.type!=yi.Text)return;let d=cG(c.from,c.to,this.stateDeco);if(d.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,f,p;if(i){let g=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,b,v;if(h!=null){let y=tg(d,h),w=((this.visibleBottom-this.visibleTop)/2+g)/c.height;b=y-w,v=y+w}else b=(this.visibleTop-c.top-g)/c.height,v=(this.visibleBottom-c.top+g)/c.height;f=eg(d,b),p=eg(d,v)}else{let g=d.total*this.heightOracle.charWidth,b=r*this.heightOracle.charWidth,v=0;if(g>2e6)for(let E of e)E.from>=c.from&&E.from<c.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+v<this.pixelViewport.left&&(v=E.size-E.displaySize);let y=this.pixelViewport.left+v,w=this.pixelViewport.right+v,x,k;if(h!=null){let E=tg(d,h),C=((w-y)/2+b)/g;x=E-C,k=E+C}else x=(y-b)/g,k=(w+b)/g;f=eg(d,x),p=eg(d,k)}f>c.from&&l(c.from,f,c,d),p<c.to&&l(p,c.to,c,d)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return a}gapSize(e,n,i,r){let s=tg(r,i)-tg(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Nb.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Je.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];gt.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Bh(this.heightMap.lineAt(e,It.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Bh(this.heightMap.lineAt(this.scaler.fromDOM(e),It.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Bh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Qm=class{constructor(e,n){this.from=e,this.to=n}};function cG(t,e,n){let i=[],r=t,s=0;return gt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function eg({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function tg(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function dG(t,e){for(let n of t)if(e(n))return n}const KT={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class FC{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let u=n.lineAt(a,It.ByPos,e,0,0).top,c=n.lineAt(l,It.ByPos,e,0,0).bottom;return r+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof FC?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function Bh(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new zs(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Bh(r,e)):t._content)}const ng=Pe.define({combine:t=>t.join(" ")}),WS=Pe.define({combine:t=>t.indexOf(!0)>-1}),GS=rl.newName(),AF=rl.newName(),PF=rl.newName(),TF={"&light":"."+AF,"&dark":"."+PF};function KS(t,e,n){return new rl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const hG=KS("."+GS,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},TF),fG={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Rb=Ae.ie&&Ae.ie_version<=11;class pG{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new J7,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(Ae.ie&&Ae.ie_version<=11||Ae.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Ae.chrome&&Ae.chrome_version<126)&&(this.editContext=new gG(e),e.state.facet(xa)&&(e.contentDOM.editContext=this.editContext.editContext)),Rb&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(xa)?i.root.activeElement!=this.dom:!sv(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ae.ie&&Ae.ie_version<=11||Ae.android&&Ae.chrome)&&!i.state.selection.main.empty&&r.focusNode&&cf(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=qf(e.root);if(!n)return!1;let i=Ae.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&mG(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=sv(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&eW(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,fG),Rb&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Rb&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Xc(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&sv(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new OW(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=vF(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=XT(n,e.previousSibling||e.target.previousSibling,-1),r=XT(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(xa)!=e.state.facet(xa)&&(e.view.contentDOM.editContext=e.state.facet(xa)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function XT(t,e,n){for(;e;){let i=At.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function qT(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return cf(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function mG(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return qT(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?qT(t,n):null}class gG{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:r}=e.state.selection.main,s=this.toEditorPos(i.updateRangeStart),o=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:s,drifted:!1});let a={from:s,to:o,insert:pt.of(i.text.split(`
`))};a.from==this.from&&r<this.from?a.from=r:a.to==this.to&&r>this.to&&(a.to=r),!(a.from==a.to&&!a.insert.length)&&(this.pendingContextChange=a,e.state.readOnly||LC(e,a,ie.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(Je.mark({attributes:{style:l}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:cF.of(Je.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=qf(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,u)=>{if(i)return;let c=u.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(u)){r=this.pendingContextChange=null,n+=c,this.to+=c;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=c}n+=c}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e){let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Re{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Q7(e.parent)||document,this.viewState=new GT(e.state||ot.create(e)),e.scrollTo&&e.scrollTo.is(Ym)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(jh).map(r=>new Ab(r));for(let r of this.plugins)r.update(this);this.observer=new pG(this),this.inputState=new FW(this),this.inputState.ensureHandlers(this.plugins),this.docView=new AT(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Sn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(_F))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=kF(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(ot.phrases)!=this.state.facet(ot.phrases))return this.setState(s);r=p0.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new qc(f.empty?f:ie.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(Ym)&&(d=f.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=g0.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Fh)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(ng)!=r.state.facet(ng)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let h of this.state.facet(zS))try{h(r)}catch(f){rr(this.state,f,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!vF(this,c)&&u.force&&Xc(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new GT(e),this.plugins=e.facet(jh).map(i=>new Ab(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new AT(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(jh),i=e.state.facet(jh);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new Ab(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){rr(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(Fj(i))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return rr(this.state,p),YT}}),d=p0.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let f=0;f<u.length;f++)if(c[f]!=YT)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){rr(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=r+p,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(zS))a(n)}get themeClasses(){return GS+" "+(this.state.facet(WS)?PF:AF)+" "+this.state.facet(ng)}updateAttrs(){let e=ZT(this,dF,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(xa)?"true":"false",class:"cm-content",style:`${Ae.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),ZT(this,OC,n);let i=this.observer.ignore(()=>{let r=DS(this.contentDOM,this.contentAttrs,n),s=DS(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Re.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Fh);let e=this.state.facet(Re.cspNonce);rl.mount(this.root,this.styleModules.concat(hG).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Tb(this,e,MT(this,e,n,i))}moveByGroup(e,n){return Tb(this,e,MT(this,e,n,i=>TW(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return ie.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return PW(this,e,n,i)}moveVertically(e,n,i){return Tb(this,e,NW(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),gF(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Ia.find(s,e-r.from,-1,n)];return Ly(i,o.dir==jt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(aF)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>vG)return Qj(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||Jj(s.isolates,i=ET(this,e))))return s.order;i||(i=ET(this,e));let r=hW(e.text,n,i);return this.bidiCache.push(new g0(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ae.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Lj(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Ym.of(new qc(typeof e=="number"?ie.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Ym.of(new qc(ie.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Gn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Gn.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=rl.newName(),r=[ng.of(i),Fh.of(KS(`.${i}`,e))];return n&&n.dark&&r.push(WS.of(!0)),r}static baseTheme(e){return Wp.lowest(Fh.of(KS("."+GS,e,TF)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&At.get(i)||At.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Re.styleModule=Fh;Re.inputHandler=sF;Re.clipboardInputFilter=RC;Re.clipboardOutputFilter=MC;Re.scrollHandler=uF;Re.focusChangeEffect=oF;Re.perLineTextDirection=aF;Re.exceptionSink=rF;Re.updateListener=zS;Re.editable=xa;Re.mouseSelectionStyle=iF;Re.dragMovesSelection=nF;Re.clickAddsSelectionRange=tF;Re.decorations=Zf;Re.outerDecorations=hF;Re.atomicRanges=IC;Re.bidiIsolatedRanges=fF;Re.scrollMargins=pF;Re.darkTheme=WS;Re.cspNonce=Pe.define({combine:t=>t.length?t[0]:""});Re.contentAttributes=OC;Re.editorAttributes=dF;Re.lineWrapping=Re.contentAttributes.of({class:"cm-lineWrapping"});Re.announce=Ze.define();const vG=4096,YT={};class g0{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:jt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new g0(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function ZT(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&IS(o,n)}return n}const yG=Ae.mac?"mac":Ae.windows?"win":Ae.linux?"linux":"key";function wG(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function ig(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const bG=Wp.default(Re.domEventHandlers({keydown(t,e){return MF(RF(e.state),t,e,"editor")}})),NF=Pe.define({enables:bG}),JT=new WeakMap;function RF(t){let e=t.facet(NF),n=JT.get(e);return n||JT.set(e,n=_G(e.reduce((i,r)=>i.concat(r),[]))),n}function xG(t,e,n){return MF(RF(t.state),e,t,n)}let Sa=null;const SG=4e3;function _G(t,e=yG){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(v=>wG(v,e));for(let v=1;v<p.length;v++){let y=p.slice(0,v).join(" ");r(y,!0),f[y]||(f[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let x=Sa={view:w,prefix:y,scope:o};return setTimeout(()=>{Sa==x&&(Sa=null)},SG),!0}]})}let g=p.join(" ");r(g,!1);let b=f[g]||(f[g]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&b.run.push(l),u&&(b.preventDefault=!0),c&&(b.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let h in c)c[h].run.push(f=>d(f,XS))}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let XS=null;function MF(t,e,n,i){XS=e;let r=X7(e),s=pi(r,0),o=os(s)==r.length&&r!=" ",a="",l=!1,u=!1,c=!1;Sa&&Sa.view==n&&Sa.scope==i&&(a=Sa.prefix+" ",wF.indexOf(e.keyCode)<0&&(u=!0,Sa=null));let d=new Set,h=b=>{if(b){for(let v of b.run)if(!d.has(v)&&(d.add(v),v(n)))return b.stopPropagation&&(c=!0),!0;b.preventDefault&&(b.stopPropagation&&(c=!0),u=!0)}return!1},f=t[i],p,g;return f&&(h(f[a+ig(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ae.windows&&e.ctrlKey&&e.altKey)&&(p=sl[e.keyCode])&&p!=r?(h(f[a+ig(p,e,!0)])||e.shiftKey&&(g=Xf[e.keyCode])!=r&&g!=p&&h(f[a+ig(g,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+ig(r,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),XS=null,l}class Yp{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=OF(e);return[new Yp(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return kG(e,n,i)}}function OF(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==jt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function QT(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function kG(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==jt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=OF(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=a.right-(c?parseInt(c.paddingRight):0),f=HS(t,i),p=HS(t,r),g=f.type==yi.Text?f:null,b=p.type==yi.Text?p:null;if(g&&(t.lineWrapping||f.widgetLineBreaks)&&(g=QT(t,i,1,g)),b&&(t.lineWrapping||p.widgetLineBreaks)&&(b=QT(t,r,-1,b)),g&&b&&g.from==b.from&&g.to==b.to)return y(w(n.from,n.to,g));{let k=g?w(n.from,null,g):x(f,!1),E=b?w(null,n.to,b):x(p,!0),C=[];return(g||f).to<(b||p).from-(g&&b?1:0)||f.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<E.top?C.push(v(d,k.bottom,h,E.top)):k.bottom<E.top&&t.elementAtHeight((k.bottom+E.top)/2).type==yi.Text&&(k.bottom=E.top=(k.bottom+E.top)/2),y(k).concat(C).concat(y(E))}function v(k,E,C,P){return new Yp(e,k-l.left,E-l.top-.01,C-k,P-E+.01)}function y({top:k,bottom:E,horizontal:C}){let P=[];for(let N=0;N<C.length;N+=2)P.push(v(C[N],k,C[N+1],E));return P}function w(k,E,C){let P=1e9,N=-1e9,I=[];function L(U,X,ee,he,V){let F=t.coordsAtPos(U,U==C.to?-2:2),ne=t.coordsAtPos(ee,ee==C.from?2:-2);!F||!ne||(P=Math.min(F.top,ne.top,P),N=Math.max(F.bottom,ne.bottom,N),V==jt.LTR?I.push(s&&X?d:F.left,s&&he?h:ne.right):I.push(!s&&he?d:ne.left,!s&&X?h:F.right))}let $=k??C.from,G=E??C.to;for(let U of t.visibleRanges)if(U.to>$&&U.from<G)for(let X=Math.max(U.from,$),ee=Math.min(U.to,G);;){let he=t.state.doc.lineAt(X);for(let V of t.bidiSpans(he)){let F=V.from+he.from,ne=V.to+he.from;if(F>=ee)break;ne>X&&L(Math.max(F,X),k==null&&F<=$,Math.min(ne,ee),E==null&&ne>=G,V.dir)}if(X=he.to+1,X>=ee)break}return I.length==0&&L($,k==null,G,E==null,t.textDirection),{top:P,bottom:N,horizontal:I}}function x(k,E){let C=a.top+(E?k.top:k.bottom);return{top:C,bottom:C,horizontal:[]}}}function CG(t,e){return t.constructor==e.constructor&&t.eq(e)}class EG{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(lv)!=e.state.facet(lv)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(lv);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!CG(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const lv=Pe.define();function IF(t){return[Gn.define(e=>new EG(e,t)),lv.of(t)]}const DF=!Ae.ios,Jf=Pe.define({combine(t){return Al(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function AG(t={}){return[Jf.of(t),PG,TG,NG,lF.of(!0)]}function LF(t){return t.startState.facet(Jf)!=t.state.facet(Jf)}const PG=IF({above:!0,markers(t){let{state:e}=t,n=e.facet(Jf),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||DF:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:ie.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Yp.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=LF(t);return n&&eN(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){eN(e.state,t)},class:"cm-cursorLayer"});function eN(t,e){e.style.animationDuration=t.facet(Jf).cursorBlinkRate+"ms"}const TG=IF({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Yp.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||LF(t)},class:"cm-selectionLayer"}),qS={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};DF&&(qS[".cm-line"].caretColor=qS[".cm-content"].caretColor="transparent !important");const NG=Wp.highest(Re.theme(qS));function tN(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function RG(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class MG{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,u,c)=>r(c,u,u+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,u,c)=>{let d=i(a,l,u);d&&c(u,u+a[0].length,d)};else if(i)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Tu,i=n.add.bind(n);for(let{from:r,to:s}of RG(e,this.maxLength))tN(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){d=a;break}}let h=[],f,p=(g,b,v)=>h.push(v.range(g,b));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,p);else tN(e.state.doc,this.regexp,c,d,(g,b)=>this.addMatch(b,e,g,p));n=n.update({filterFrom:c,filterTo:d,filter:(g,b)=>g<c||b>d,add:h})}}return n}}const YS=/x/.unicode!=null?"gu":"g",OG=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,YS),IG={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Mb=null;function DG(){var t;if(Mb==null&&typeof document<"u"&&document.body){let e=document.body.style;Mb=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Mb||!1}const uv=Pe.define({combine(t){let e=Al(t,{render:null,specialChars:OG,addSpecialChars:null});return(e.replaceTabs=!DG())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,YS)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,YS)),e}});function LG(t={}){return[uv.of(t),jG()]}let nN=null;function jG(){return nN||(nN=Gn.fromClass(class{constructor(t){this.view=t,this.decorations=Je.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(uv)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new MG({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=pi(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=Kp(o.text,a,i-o.from);return Je.replace({widget:new zG((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Je.replace({widget:new BG(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(uv);t.startState.facet(uv)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const FG="";function $G(t){return t>=32?FG:t==10?"":String.fromCharCode(9216+t)}class BG extends Pl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=$G(this.code),i=e.state.phrase("Control character")+" "+(IG[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class zG extends Pl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function UG(){return VG}const HG=Je.line({class:"cm-activeLine"}),VG=Gn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(HG.range(r.from)),e=r.from)}return Je.set(n)}},{decorations:t=>t.decorations}),ph="-10000px";class jF{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let u=s[l],c=-1;if(u){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==u.create&&(c=d)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),a&&(a[l]=!!u.above);else{let d=o[l]=this.tooltipViews[c];a&&(a[l]=n[c]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,u)=>n[u]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function WG(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Ob=Pe.define({combine:t=>{var e,n,i;return{position:Ae.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||WG}}}),iN=new WeakMap,$C=Gn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Ob);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new jF(t,BC,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Ob);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=ph,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ae.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==ph&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=DC(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Ob).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:c}=u,d=t.pos[a],h=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){c.style.top=ph;continue}let f=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,g=h.right-h.left,b=(e=iN.get(u))!==null&&e!==void 0?e:h.bottom-h.top,v=u.offset||KG,y=this.view.textDirection==jt.LTR,w=h.width>i.right-i.left?y?i.left:i.right-h.width:y?Math.max(i.left,Math.min(d.left-(f?14:0)+v.x,i.right-g)):Math.min(Math.max(i.left,d.left-g+(f?14:0)-v.x),i.right-g),x=this.above[a];!l.strictSide&&(x?d.top-b-p-v.y<i.top:d.bottom+b+p+v.y>i.bottom)&&x==i.bottom-d.bottom>d.top-i.top&&(x=this.above[a]=!x);let k=(x?d.top-i.top:i.bottom-d.bottom)-p;if(k<b&&u.resize!==!1){if(k<this.view.defaultLineHeight){c.style.top=ph;continue}iN.set(u,b),c.style.height=(b=k)/s+"px"}else c.style.height&&(c.style.height="");let E=x?d.top-b-p-v.y:d.bottom+p+v.y,C=w+g;if(u.overlap!==!0)for(let P of o)P.left<C&&P.right>w&&P.top<E+b&&P.bottom>E&&(E=x?P.top-b-2-p:P.bottom+p+2);if(this.position=="absolute"?(c.style.top=(E-t.parent.top)/s+"px",c.style.left=(w-t.parent.left)/r+"px"):(c.style.top=E/s+"px",c.style.left=w/r+"px"),f){let P=d.left+(y?v.x:-v.x)-(w+14-7);f.style.left=P/r+"px"}u.overlap!==!0&&o.push({left:w,top:E,right:C,bottom:E+b}),c.classList.toggle("cm-tooltip-above",x),c.classList.toggle("cm-tooltip-below",!x),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=ph}},{eventObservers:{scroll(){this.maybeMeasure()}}}),GG=Re.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),KG={x:0,y:0},BC=Pe.define({enables:[$C,GG]}),v0=Pe.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class $y{static create(e){return new $y(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new jF(e,v0,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const XG=BC.compute([v0],t=>{let e=t.facet(v0);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:$y.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class qG{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Oa)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(c=>c.from<=r&&c.to>=r),u=l&&l.dir==jt.RTL?-1:1;s=n.x<a.left?-u:u}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>rr(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin($C),n=e?e.manager.tooltips.findIndex(i=>i.create==$y.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!YG(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!ZG(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const rg=4;function YG(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-rg&&e.clientX<=i+rg&&e.clientY>=r-rg&&e.clientY<=s+rg}function ZG(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function JG(t,e={}){let n=Ze.define(),i=_i.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,Di.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),a);u.pos=l,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(eK)&&(r=[]);return r},provide:r=>v0.from(r)});return{active:i,extension:[i,Gn.define(r=>new qG(r,t,i,n,e.hoverTime||300)),XG]}}function QG(t,e){let n=t.plugin($C);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const eK=Ze.define(),rN=Pe.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Qf(t,e){let n=t.plugin(FF),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const FF=Gn.fromClass(class{constructor(t){this.input=t.state.facet(ep),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(rN);this.top=new sg(t,!0,e.topContainer),this.bottom=new sg(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(rN);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new sg(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new sg(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(ep);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class sg{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=sN(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=sN(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function sN(t){let e=t.nextSibling;return t.remove(),e}const ep=Pe.define({enables:FF});class al extends Pu{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}al.prototype.elementClass="";al.prototype.toDOM=void 0;al.prototype.mapMode=Di.TrackBefore;al.prototype.startSide=al.prototype.endSide=-1;al.prototype.point=!0;const cv=Pe.define(),tK=Pe.define(),dv=Pe.define(),oN=Pe.define({combine:t=>t.some(e=>e)});function nK(t){return[iK]}const iK=Gn.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(dv).map(e=>new lN(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(oN),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(oN)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=gt.iter(this.view.state.facet(cv),this.view.viewport.from),i=[],r=this.gutters.map(s=>new rK(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==yi.Text&&o){ZS(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==yi.Text){ZS(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(dv),n=t.state.facet(dv),i=t.docChanged||t.heightChanged||t.viewportChanged||!gt.eq(t.startState.facet(cv),t.state.facet(cv),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new lN(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==jt.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function aN(t){return Array.isArray(t)?t:[t]}function ZS(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class rK{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=gt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new $F(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];ZS(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(tK)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class lN{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=aN(n.markers(e)),n.initialSpacer&&(this.spacer=new $F(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=aN(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!gt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class $F{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),sK(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function sK(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const oK=Pe.define(),aK=Pe.define(),Tc=Pe.define({combine(t){return Al(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return i}})}});class Ib extends al{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Db(t,e){return t.state.facet(Tc).formatNumber(e,t.state)}const lK=dv.compute([Tc],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(oK)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Ib(Db(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(aK)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Tc)!=e.state.facet(Tc),initialSpacer(e){return new Ib(Db(e,uN(e.state.doc.lines)))},updateSpacer(e,n){let i=Db(n.view,uN(n.view.state.doc.lines));return i==e.number?e:new Ib(i)},domEventHandlers:t.facet(Tc).domEventHandlers}));function uK(t={}){return[Tc.of(t),nK(),lK]}function uN(t){let e=9;for(;e<t;)e=e*10+9;return e}const cK=new class extends al{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},dK=cv.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(cK.range(r)))}return gt.of(e)});function hK(){return dK}function BF(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=BF(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Me(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=BF(t))&&(i&&(i+=" "),i+=e);return i}const zC={BASE_URL:"/VonSim8/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},fK=Symbol((zC?"production":void 0)!=="production"?"RESET":""),pK=t=>typeof(t==null?void 0:t.then)=="function";function mK(t=()=>{try{return window.localStorage}catch(n){(zC?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,u)=>{var c,d;const h=p=>{if(p=p||"",i!==p){try{r=JSON.parse(p,e==null?void 0:e.reviver)}catch{return u}i=p}return r},f=(d=(c=t())==null?void 0:c.getItem(l))!=null?d:null;return pK(f)?f.then(h):h(f)},setItem:(l,u)=>{var c;return(c=t())==null?void 0:c.setItem(l,JSON.stringify(u,void 0))},removeItem:l=>{var u;return(u=t())==null?void 0:u.removeItem(l)}},o=l=>(u,c,d)=>l(u,h=>{let f;try{f=JSON.parse(h||"")}catch{f=d}c(f)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,u)=>{if(!(t()instanceof window.Storage))return()=>{};const c=d=>{d.storageArea===t()&&d.key===l&&u(d.newValue)};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}}),a&&(s.subscribe=o(a)),s}const gK=mK();function zF(t,e,n=gK,i){const r=i==null?void 0:i.getOnInit,s=me(r?n.getItem(t,e):e);return(zC?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},me(a=>a(s),(a,l,u)=>{const c=typeof u=="function"?u(a(s)):u;return c===fK?(l(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(l(s,d),n.setItem(t,d))):(l(s,c),n.setItem(t,c))})}function vK(t,e=globalThis==null?void 0:globalThis.document){const n=ni(t);S.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var yK="DismissableLayer",JS="dismissableLayer.update",wK="dismissableLayer.pointerDownOutside",bK="dismissableLayer.focusOutside",cN,UF=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zp=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,u=S.useContext(UF),[c,d]=S.useState(null),h=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=S.useState({}),p=dt(e,C=>d(C)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(b),y=c?g.indexOf(c):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,x=y>=v,k=SK(C=>{const P=C.target,N=[...u.branches].some(I=>I.contains(P));!x||N||(r==null||r(C),o==null||o(C),C.defaultPrevented||a==null||a())},h),E=_K(C=>{const P=C.target;[...u.branches].some(I=>I.contains(P))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},h);return vK(C=>{y===u.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},h),S.useEffect(()=>{if(c)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(cN=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),dN(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=cN)}},[c,h,n,u]),S.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),dN())},[c,u]),S.useEffect(()=>{const C=()=>f({});return document.addEventListener(JS,C),()=>document.removeEventListener(JS,C)},[]),m.jsx(He.div,{...l,ref:p,style:{pointerEvents:w?x?"auto":"none":void 0,...t.style},onFocusCapture:ye(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ye(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ye(t.onPointerDownCapture,k.onPointerDownCapture)})});Zp.displayName=yK;var xK="DismissableLayerBranch",HF=S.forwardRef((t,e)=>{const n=S.useContext(UF),i=S.useRef(null),r=dt(e,i);return S.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),m.jsx(He.div,{...t,ref:r})});HF.displayName=xK;function SK(t,e=globalThis==null?void 0:globalThis.document){const n=ni(t),i=S.useRef(!1),r=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){VF(wK,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function _K(t,e=globalThis==null?void 0:globalThis.document){const n=ni(t),i=S.useRef(!1);return S.useEffect(()=>{const r=s=>{s.target&&!i.current&&VF(bK,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function dN(){const t=new CustomEvent(JS);document.dispatchEvent(t)}function VF(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?bC(r,s):r.dispatchEvent(s)}var kK=Zp,CK=HF,Lb=0;function UC(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??hN()),document.body.insertAdjacentElement("beforeend",t[1]??hN()),Lb++,()=>{Lb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Lb--}},[])}function hN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var jb="focusScope.autoFocusOnMount",Fb="focusScope.autoFocusOnUnmount",fN={bubbles:!1,cancelable:!0},EK="FocusScope",By=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=S.useState(null),u=ni(r),c=ni(s),d=S.useRef(null),h=dt(e,g=>l(g)),f=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(i){let g=function(w){if(f.paused||!a)return;const x=w.target;a.contains(x)?d.current=x:la(d.current,{select:!0})},b=function(w){if(f.paused||!a)return;const x=w.relatedTarget;x!==null&&(a.contains(x)||la(d.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&la(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const y=new MutationObserver(v);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),y.disconnect()}}},[i,a,f.paused]),S.useEffect(()=>{if(a){mN.add(f);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(jb,fN);a.addEventListener(jb,u),a.dispatchEvent(v),v.defaultPrevented||(AK(MK(WF(a)),{select:!0}),document.activeElement===g&&la(a))}return()=>{a.removeEventListener(jb,u),setTimeout(()=>{const v=new CustomEvent(Fb,fN);a.addEventListener(Fb,c),a.dispatchEvent(v),v.defaultPrevented||la(g??document.body,{select:!0}),a.removeEventListener(Fb,c),mN.remove(f)},0)}}},[a,u,c,f]);const p=S.useCallback(g=>{if(!n&&!i||f.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(b&&v){const y=g.currentTarget,[w,x]=PK(y);w&&x?!g.shiftKey&&v===x?(g.preventDefault(),n&&la(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),n&&la(x,{select:!0})):v===y&&g.preventDefault()}},[n,i,f.paused]);return m.jsx(He.div,{tabIndex:-1,...o,ref:h,onKeyDown:p})});By.displayName=EK;function AK(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(la(i,{select:e}),document.activeElement!==n)return}function PK(t){const e=WF(t),n=pN(e,t),i=pN(e.reverse(),t);return[n,i]}function WF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function pN(t,e){for(const n of t)if(!TK(n,{upTo:e}))return n}function TK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function NK(t){return t instanceof HTMLInputElement&&"select"in t}function la(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&NK(t)&&e&&t.select()}}var mN=RK();function RK(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=gN(t,e),t.unshift(e)},remove(e){var n;t=gN(t,e),(n=t[0])==null||n.resume()}}}function gN(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function MK(t){return t.filter(e=>e.tagName!=="A")}const OK=["top","right","bottom","left"],ll=Math.min,tr=Math.max,y0=Math.round,og=Math.floor,Js=t=>({x:t,y:t}),IK={left:"right",right:"left",bottom:"top",top:"bottom"},DK={start:"end",end:"start"};function QS(t,e,n){return tr(t,ll(e,n))}function Vo(t,e){return typeof t=="function"?t(e):t}function Wo(t){return t.split("-")[0]}function Hd(t){return t.split("-")[1]}function HC(t){return t==="x"?"y":"x"}function VC(t){return t==="y"?"height":"width"}function ul(t){return["top","bottom"].includes(Wo(t))?"y":"x"}function WC(t){return HC(ul(t))}function LK(t,e,n){n===void 0&&(n=!1);const i=Hd(t),r=WC(t),s=VC(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=w0(o)),[o,w0(o)]}function jK(t){const e=w0(t);return[e_(t),e,e_(e)]}function e_(t){return t.replace(/start|end/g,e=>DK[e])}function FK(t,e,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?r:i:e?i:r;case"left":case"right":return e?s:o;default:return[]}}function $K(t,e,n,i){const r=Hd(t);let s=FK(Wo(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(e_)))),s}function w0(t){return t.replace(/left|right|bottom|top/g,e=>IK[e])}function BK(t){return{top:0,right:0,bottom:0,left:0,...t}}function GF(t){return typeof t!="number"?BK(t):{top:t,right:t,bottom:t,left:t}}function b0(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function vN(t,e,n){let{reference:i,floating:r}=t;const s=ul(e),o=WC(e),a=VC(o),l=Wo(e),u=s==="y",c=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,h=i[a]/2-r[a]/2;let f;switch(l){case"top":f={x:c,y:i.y-r.height};break;case"bottom":f={x:c,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:d};break;case"left":f={x:i.x-r.width,y:d};break;default:f={x:i.x,y:i.y}}switch(Hd(e)){case"start":f[o]-=h*(n&&u?-1:1);break;case"end":f[o]+=h*(n&&u?-1:1);break}return f}const zK=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=vN(u,i,l),h=i,f={},p=0;for(let g=0;g<a.length;g++){const{name:b,fn:v}=a[g],{x:y,y:w,data:x,reset:k}=await v({x:c,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=y??c,d=w??d,f={...f,[b]:{...f[b],...x}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):k.rects),{x:c,y:d}=vN(u,h,l)),g=-1)}return{x:c,y:d,placement:h,strategy:r,middlewareData:f}};async function tp(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Vo(e,t),p=GF(f),b=a[h?d==="floating"?"reference":"floating":d],v=b0(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),y=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),x=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},k=b0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:w,strategy:l}):y);return{top:(v.top-k.top+p.top)/x.y,bottom:(k.bottom-v.bottom+p.bottom)/x.y,left:(v.left-k.left+p.left)/x.x,right:(k.right-v.right+p.right)/x.x}}const UK=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=Vo(t,e)||{};if(u==null)return{};const d=GF(c),h={x:n,y:i},f=WC(r),p=VC(f),g=await o.getDimensions(u),b=f==="y",v=b?"top":"left",y=b?"bottom":"right",w=b?"clientHeight":"clientWidth",x=s.reference[p]+s.reference[f]-h[f]-s.floating[p],k=h[f]-s.reference[f],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=E?E[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[w]||s.floating[p]);const P=x/2-k/2,N=C/2-g[p]/2-1,I=ll(d[v],N),L=ll(d[y],N),$=I,G=C-g[p]-L,U=C/2-g[p]/2+P,X=QS($,U,G),ee=!l.arrow&&Hd(r)!=null&&U!==X&&s.reference[p]/2-(U<$?I:L)-g[p]/2<0,he=ee?U<$?U-$:U-G:0;return{[f]:h[f]+he,data:{[f]:X,centerOffset:U-X-he,...ee&&{alignmentOffset:he}},reset:ee}}}),HK=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...b}=Vo(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Wo(r),y=ul(a),w=Wo(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=h||(w||!g?[w0(a)]:jK(a)),E=p!=="none";!h&&E&&k.push(...$K(a,g,p,x));const C=[a,...k],P=await tp(e,b),N=[];let I=((i=s.flip)==null?void 0:i.overflows)||[];if(c&&N.push(P[v]),d){const U=LK(r,o,x);N.push(P[U[0]],P[U[1]])}if(I=[...I,{placement:r,overflows:N}],!N.every(U=>U<=0)){var L,$;const U=(((L=s.flip)==null?void 0:L.index)||0)+1,X=C[U];if(X)return{data:{index:U,overflows:I},reset:{placement:X}};let ee=($=I.filter(he=>he.overflows[0]<=0).sort((he,V)=>he.overflows[1]-V.overflows[1])[0])==null?void 0:$.placement;if(!ee)switch(f){case"bestFit":{var G;const he=(G=I.filter(V=>{if(E){const F=ul(V.placement);return F===y||F==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(F=>F>0).reduce((F,ne)=>F+ne,0)]).sort((V,F)=>V[1]-F[1])[0])==null?void 0:G[0];he&&(ee=he);break}case"initialPlacement":ee=a;break}if(r!==ee)return{reset:{placement:ee}}}return{}}}};function yN(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function wN(t){return OK.some(e=>t[e]>=0)}const VK=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=Vo(t,e);switch(i){case"referenceHidden":{const s=await tp(e,{...r,elementContext:"reference"}),o=yN(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:wN(o)}}}case"escaped":{const s=await tp(e,{...r,altBoundary:!0}),o=yN(s,n.floating);return{data:{escapedOffsets:o,escaped:wN(o)}}}default:return{}}}}};async function WK(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=Wo(n),a=Hd(n),l=ul(n)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,d=Vo(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*c,y:h*u}:{x:h*u,y:f*c}}const GK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await WK(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},KK=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:v,y}=b;return{x:v,y}}},...l}=Vo(t,e),u={x:n,y:i},c=await tp(e,l),d=ul(Wo(r)),h=HC(d);let f=u[h],p=u[d];if(s){const b=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=f+c[b],w=f-c[v];f=QS(y,f,w)}if(o){const b=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=p+c[b],w=p-c[v];p=QS(y,p,w)}const g=a.fn({...e,[h]:f,[d]:p});return{...g,data:{x:g.x-n,y:g.y-i,enabled:{[h]:s,[d]:o}}}}}},XK=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Vo(t,e),c={x:n,y:i},d=ul(r),h=HC(d);let f=c[h],p=c[d];const g=Vo(a,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=h==="y"?"height":"width",x=s.reference[h]-s.floating[w]+b.mainAxis,k=s.reference[h]+s.reference[w]-b.mainAxis;f<x?f=x:f>k&&(f=k)}if(u){var v,y;const w=h==="y"?"width":"height",x=["top","left"].includes(Wo(r)),k=s.reference[d]-s.floating[w]+(x&&((v=o.offset)==null?void 0:v[d])||0)+(x?0:b.crossAxis),E=s.reference[d]+s.reference[w]+(x?0:((y=o.offset)==null?void 0:y[d])||0)-(x?b.crossAxis:0);p<k?p=k:p>E&&(p=E)}return{[h]:f,[d]:p}}}},qK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=Vo(t,e),c=await tp(e,u),d=Wo(r),h=Hd(r),f=ul(r)==="y",{width:p,height:g}=s.floating;let b,v;d==="top"||d==="bottom"?(b=d,v=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,b=h==="end"?"top":"bottom");const y=g-c.top-c.bottom,w=p-c.left-c.right,x=ll(g-c[b],y),k=ll(p-c[v],w),E=!e.middlewareData.shift;let C=x,P=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=w),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=y),E&&!h){const I=tr(c.left,0),L=tr(c.right,0),$=tr(c.top,0),G=tr(c.bottom,0);f?P=p-2*(I!==0||L!==0?I+L:tr(c.left,c.right)):C=g-2*($!==0||G!==0?$+G:tr(c.top,c.bottom))}await l({...e,availableWidth:P,availableHeight:C});const N=await o.getDimensions(a.floating);return p!==N.width||g!==N.height?{reset:{rects:!0}}:{}}}};function zy(){return typeof window<"u"}function Vd(t){return KF(t)?(t.nodeName||"").toLowerCase():"#document"}function lr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ao(t){var e;return(e=(KF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function KF(t){return zy()?t instanceof Node||t instanceof lr(t).Node:!1}function ys(t){return zy()?t instanceof Element||t instanceof lr(t).Element:!1}function no(t){return zy()?t instanceof HTMLElement||t instanceof lr(t).HTMLElement:!1}function bN(t){return!zy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof lr(t).ShadowRoot}function Jp(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=ws(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function YK(t){return["table","td","th"].includes(Vd(t))}function Uy(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function GC(t){const e=KC(),n=ys(t)?ws(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function ZK(t){let e=cl(t);for(;no(e)&&!Ad(e);){if(GC(e))return e;if(Uy(e))return null;e=cl(e)}return null}function KC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ad(t){return["html","body","#document"].includes(Vd(t))}function ws(t){return lr(t).getComputedStyle(t)}function Hy(t){return ys(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function cl(t){if(Vd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||bN(t)&&t.host||ao(t);return bN(e)?e.host:e}function XF(t){const e=cl(t);return Ad(e)?t.ownerDocument?t.ownerDocument.body:t.body:no(e)&&Jp(e)?e:XF(e)}function np(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=XF(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=lr(r);if(s){const a=t_(o);return e.concat(o,o.visualViewport||[],Jp(r)?r:[],a&&n?np(a):[])}return e.concat(r,np(r,[],n))}function t_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function qF(t){const e=ws(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=no(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=y0(n)!==s||y0(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function XC(t){return ys(t)?t:t.contextElement}function Yc(t){const e=XC(t);if(!no(e))return Js(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=qF(e);let o=(s?y0(n.width):n.width)/i,a=(s?y0(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const JK=Js(0);function YF(t){const e=lr(t);return!KC()||!e.visualViewport?JK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function QK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==lr(t)?!1:e}function Ou(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=XC(t);let o=Js(1);e&&(i?ys(i)&&(o=Yc(i)):o=Yc(t));const a=QK(s,n,i)?YF(s):Js(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,c=r.width/o.x,d=r.height/o.y;if(s){const h=lr(s),f=i&&ys(i)?lr(i):i;let p=h,g=t_(p);for(;g&&i&&f!==p;){const b=Yc(g),v=g.getBoundingClientRect(),y=ws(g),w=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*b.x,x=v.top+(g.clientTop+parseFloat(y.paddingTop))*b.y;l*=b.x,u*=b.y,c*=b.x,d*=b.y,l+=w,u+=x,p=lr(g),g=t_(p)}}return b0({width:c,height:d,x:l,y:u})}function qC(t,e){const n=Hy(t).scrollLeft;return e?e.left+n:Ou(ao(t)).left+n}function ZF(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:qC(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function eX(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=ao(i),a=e?Uy(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Js(1);const c=Js(0),d=no(i);if((d||!d&&!s)&&((Vd(i)!=="body"||Jp(o))&&(l=Hy(i)),no(i))){const f=Ou(i);u=Yc(i),c.x=f.x+i.clientLeft,c.y=f.y+i.clientTop}const h=o&&!d&&!s?ZF(o,l,!0):Js(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:n.y*u.y-l.scrollTop*u.y+c.y+h.y}}function tX(t){return Array.from(t.getClientRects())}function nX(t){const e=ao(t),n=Hy(t),i=t.ownerDocument.body,r=tr(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=tr(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+qC(t);const a=-n.scrollTop;return ws(i).direction==="rtl"&&(o+=tr(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function iX(t,e){const n=lr(t),i=ao(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const u=KC();(!u||u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function rX(t,e){const n=Ou(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=no(t)?Yc(t):Js(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,u=i*s.y;return{width:o,height:a,x:l,y:u}}function xN(t,e,n){let i;if(e==="viewport")i=iX(t,n);else if(e==="document")i=nX(ao(t));else if(ys(e))i=rX(e,n);else{const r=YF(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return b0(i)}function JF(t,e){const n=cl(t);return n===e||!ys(n)||Ad(n)?!1:ws(n).position==="fixed"||JF(n,e)}function sX(t,e){const n=e.get(t);if(n)return n;let i=np(t,[],!1).filter(a=>ys(a)&&Vd(a)!=="body"),r=null;const s=ws(t).position==="fixed";let o=s?cl(t):t;for(;ys(o)&&!Ad(o);){const a=ws(o),l=GC(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Jp(o)&&!l&&JF(t,o))?i=i.filter(c=>c!==o):r=a,o=cl(o)}return e.set(t,i),i}function oX(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?Uy(e)?[]:sX(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((u,c)=>{const d=xN(e,c,r);return u.top=tr(d.top,u.top),u.right=ll(d.right,u.right),u.bottom=ll(d.bottom,u.bottom),u.left=tr(d.left,u.left),u},xN(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function aX(t){const{width:e,height:n}=qF(t);return{width:e,height:n}}function lX(t,e,n){const i=no(e),r=ao(e),s=n==="fixed",o=Ou(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Js(0);if(i||!i&&!s)if((Vd(e)!=="body"||Jp(r))&&(a=Hy(e)),i){const h=Ou(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else r&&(l.x=qC(r));const u=r&&!i&&!s?ZF(r,a):Js(0),c=o.left+a.scrollLeft-l.x-u.x,d=o.top+a.scrollTop-l.y-u.y;return{x:c,y:d,width:o.width,height:o.height}}function $b(t){return ws(t).position==="static"}function SN(t,e){if(!no(t)||ws(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ao(t)===n&&(n=n.ownerDocument.body),n}function QF(t,e){const n=lr(t);if(Uy(t))return n;if(!no(t)){let r=cl(t);for(;r&&!Ad(r);){if(ys(r)&&!$b(r))return r;r=cl(r)}return n}let i=SN(t,e);for(;i&&YK(i)&&$b(i);)i=SN(i,e);return i&&Ad(i)&&$b(i)&&!GC(i)?n:i||ZK(t)||n}const uX=async function(t){const e=this.getOffsetParent||QF,n=this.getDimensions,i=await n(t.floating);return{reference:lX(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function cX(t){return ws(t).direction==="rtl"}const dX={convertOffsetParentRelativeRectToViewportRelativeRect:eX,getDocumentElement:ao,getClippingRect:oX,getOffsetParent:QF,getElementRects:uX,getClientRects:tX,getDimensions:aX,getScale:Yc,isElement:ys,isRTL:cX};function hX(t,e){let n=null,i;const r=ao(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:d,height:h}=t.getBoundingClientRect();if(a||e(),!d||!h)return;const f=og(c),p=og(r.clientWidth-(u+d)),g=og(r.clientHeight-(c+h)),b=og(u),y={rootMargin:-f+"px "+-p+"px "+-g+"px "+-b+"px",threshold:tr(0,ll(1,l))||1};let w=!0;function x(k){const E=k[0].intersectionRatio;if(E!==l){if(!w)return o();E?o(!1,E):i=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(x,{...y,root:r.ownerDocument})}catch{n=new IntersectionObserver(x,y)}n.observe(t)}return o(!0),s}function fX(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=XC(t),c=r||s?[...u?np(u):[],...np(e)]:[];c.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=u&&a?hX(u,n):null;let h=-1,f=null;o&&(f=new ResizeObserver(v=>{let[y]=v;y&&y.target===u&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),n()}),u&&!l&&f.observe(u),f.observe(e));let p,g=l?Ou(t):null;l&&b();function b(){const v=Ou(t);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,p=requestAnimationFrame(b)}return n(),()=>{var v;c.forEach(y=>{r&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),d==null||d(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const pX=GK,mX=KK,gX=HK,vX=qK,yX=VK,_N=UK,wX=XK,bX=(t,e,n)=>{const i=new Map,r={platform:dX,...n},s={...r.platform,_c:i};return zK(t,e,{...r,platform:s})};var hv=typeof document<"u"?S.useLayoutEffect:S.useEffect;function x0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!x0(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!x0(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function e5(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function kN(t,e){const n=e5(t);return Math.round(e*n)/n}function Bb(t){const e=S.useRef(t);return hv(()=>{e.current=t}),e}function xX(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=S.useState(i);x0(h,i)||f(i);const[p,g]=S.useState(null),[b,v]=S.useState(null),y=S.useCallback(V=>{V!==E.current&&(E.current=V,g(V))},[]),w=S.useCallback(V=>{V!==C.current&&(C.current=V,v(V))},[]),x=s||p,k=o||b,E=S.useRef(null),C=S.useRef(null),P=S.useRef(c),N=l!=null,I=Bb(l),L=Bb(r),$=Bb(u),G=S.useCallback(()=>{if(!E.current||!C.current)return;const V={placement:e,strategy:n,middleware:h};L.current&&(V.platform=L.current),bX(E.current,C.current,V).then(F=>{const ne={...F,isPositioned:$.current!==!1};U.current&&!x0(P.current,ne)&&(P.current=ne,Cl.flushSync(()=>{d(ne)}))})},[h,e,n,L,$]);hv(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,d(V=>({...V,isPositioned:!1})))},[u]);const U=S.useRef(!1);hv(()=>(U.current=!0,()=>{U.current=!1}),[]),hv(()=>{if(x&&(E.current=x),k&&(C.current=k),x&&k){if(I.current)return I.current(x,k,G);G()}},[x,k,G,I,N]);const X=S.useMemo(()=>({reference:E,floating:C,setReference:y,setFloating:w}),[y,w]),ee=S.useMemo(()=>({reference:x,floating:k}),[x,k]),he=S.useMemo(()=>{const V={position:n,left:0,top:0};if(!ee.floating)return V;const F=kN(ee.floating,c.x),ne=kN(ee.floating,c.y);return a?{...V,transform:"translate("+F+"px, "+ne+"px)",...e5(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:ne}},[n,a,ee.floating,c.x,c.y]);return S.useMemo(()=>({...c,update:G,refs:X,elements:ee,floatingStyles:he}),[c,G,X,ee,he])}const SX=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?_N({element:i.current,padding:r}).fn(n):{}:i?_N({element:i,padding:r}).fn(n):{}}}},_X=(t,e)=>({...pX(t),options:[t,e]}),kX=(t,e)=>({...mX(t),options:[t,e]}),CX=(t,e)=>({...wX(t),options:[t,e]}),EX=(t,e)=>({...gX(t),options:[t,e]}),AX=(t,e)=>({...vX(t),options:[t,e]}),PX=(t,e)=>({...yX(t),options:[t,e]}),TX=(t,e)=>({...SX(t),options:[t,e]});var NX="Arrow",t5=S.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return m.jsx(He.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});t5.displayName=NX;var RX=t5;function YC(t){const[e,n]=S.useState(void 0);return ti(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var ZC="Popper",[n5,Wd]=wC(ZC),[MX,i5]=n5(ZC),r5=t=>{const{__scopePopper:e,children:n}=t,[i,r]=S.useState(null);return m.jsx(MX,{scope:e,anchor:i,onAnchorChange:r,children:n})};r5.displayName=ZC;var s5="PopperAnchor",o5=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=i5(s5,n),o=S.useRef(null),a=dt(e,o);return S.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:m.jsx(He.div,{...r,ref:a})});o5.displayName=s5;var JC="PopperContent",[OX,IX]=n5(JC),a5=S.forwardRef((t,e)=>{var _,T,M,R,K,W;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:p,...g}=t,b=i5(JC,n),[v,y]=S.useState(null),w=dt(e,te=>y(te)),[x,k]=S.useState(null),E=YC(x),C=(E==null?void 0:E.width)??0,P=(E==null?void 0:E.height)??0,N=i+(s!=="center"?"-"+s:""),I=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},L=Array.isArray(u)?u:[u],$=L.length>0,G={padding:I,boundary:L.filter(LX),altBoundary:$},{refs:U,floatingStyles:X,placement:ee,isPositioned:he,middlewareData:V}=xX({strategy:"fixed",placement:N,whileElementsMounted:(...te)=>fX(...te,{animationFrame:f==="always"}),elements:{reference:b.anchor},middleware:[_X({mainAxis:r+P,alignmentAxis:o}),l&&kX({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?CX():void 0,...G}),l&&EX({...G}),AX({...G,apply:({elements:te,rects:Y,availableWidth:Ne,availableHeight:Fe})=>{const{width:Be,height:je}=Y.reference,Ve=te.floating.style;Ve.setProperty("--radix-popper-available-width",`${Ne}px`),Ve.setProperty("--radix-popper-available-height",`${Fe}px`),Ve.setProperty("--radix-popper-anchor-width",`${Be}px`),Ve.setProperty("--radix-popper-anchor-height",`${je}px`)}}),x&&TX({element:x,padding:a}),jX({arrowWidth:C,arrowHeight:P}),h&&PX({strategy:"referenceHidden",...G})]}),[F,ne]=c5(ee),ke=ni(p);ti(()=>{he&&(ke==null||ke())},[he,ke]);const Z=(_=V.arrow)==null?void 0:_.x,ue=(T=V.arrow)==null?void 0:T.y,D=((M=V.arrow)==null?void 0:M.centerOffset)!==0,[O,B]=S.useState();return ti(()=>{v&&B(window.getComputedStyle(v).zIndex)},[v]),m.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:he?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:O,"--radix-popper-transform-origin":[(R=V.transformOrigin)==null?void 0:R.x,(K=V.transformOrigin)==null?void 0:K.y].join(" "),...((W=V.hide)==null?void 0:W.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx(OX,{scope:n,placedSide:F,onArrowChange:k,arrowX:Z,arrowY:ue,shouldHideArrow:D,children:m.jsx(He.div,{"data-side":F,"data-align":ne,...g,ref:w,style:{...g.style,animation:he?void 0:"none"}})})})});a5.displayName=JC;var l5="PopperArrow",DX={top:"bottom",right:"left",bottom:"top",left:"right"},u5=S.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=IX(l5,i),o=DX[s.placedSide];return m.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:m.jsx(RX,{...r,ref:n,style:{...r.style,display:"block"}})})});u5.displayName=l5;function LX(t){return t!==null}var jX=t=>({name:"transformOrigin",options:t,fn(e){var b,v,y;const{placement:n,rects:i,middlewareData:r}=e,o=((b=r.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,c]=c5(n),d={start:"0%",center:"50%",end:"100%"}[c],h=(((v=r.arrow)==null?void 0:v.x)??0)+a/2,f=(((y=r.arrow)==null?void 0:y.y)??0)+l/2;let p="",g="";return u==="bottom"?(p=o?d:`${h}px`,g=`${-l}px`):u==="top"?(p=o?d:`${h}px`,g=`${i.floating.height+l}px`):u==="right"?(p=`${-l}px`,g=o?d:`${f}px`):u==="left"&&(p=`${i.floating.width+l}px`,g=o?d:`${f}px`),{data:{x:p,y:g}}}});function c5(t){const[e,n="center"]=t.split("-");return[e,n]}var QC=r5,Vy=o5,eE=a5,tE=u5,FX="Portal",Qp=S.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=S.useState(!1);ti(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?dV.createPortal(m.jsx(He.div,{...i,ref:e}),o):null});Qp.displayName=FX;var $X=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ec=new WeakMap,ag=new WeakMap,lg={},zb=0,d5=function(t){return t&&(t.host||d5(t.parentNode))},BX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=d5(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},zX=function(t,e,n,i){var r=BX(e,Array.isArray(t)?t:[t]);lg[n]||(lg[n]=new WeakMap);var s=lg[n],o=[],a=new Set,l=new Set(r),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};r.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))c(h);else try{var f=h.getAttribute(i),p=f!==null&&f!=="false",g=(ec.get(h)||0)+1,b=(s.get(h)||0)+1;ec.set(h,g),s.set(h,b),o.push(h),g===1&&p&&ag.set(h,!0),b===1&&h.setAttribute(n,"true"),p||h.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return c(e),a.clear(),zb++,function(){o.forEach(function(d){var h=ec.get(d)-1,f=s.get(d)-1;ec.set(d,h),s.set(d,f),h||(ag.has(d)||d.removeAttribute(i),ag.delete(d)),f||d.removeAttribute(n)}),zb--,zb||(ec=new WeakMap,ec=new WeakMap,ag=new WeakMap,lg={})}},nE=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=$X(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),zX(i,r,n,"aria-hidden")):function(){return null}},fv="right-scroll-bar-position",pv="width-before-scroll-bar",UX="with-scroll-bars-hidden",HX="--removed-body-scroll-bar-size";function Ub(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function VX(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var WX=typeof window<"u"?S.useLayoutEffect:S.useEffect,CN=new WeakMap;function GX(t,e){var n=VX(null,function(i){return t.forEach(function(r){return Ub(r,i)})});return WX(function(){var i=CN.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||Ub(a,null)}),s.forEach(function(a){r.has(a)||Ub(a,o)})}CN.set(n,t)},[t]),n}function KX(t){return t}function XX(t,e){e===void 0&&(e=KX);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return r}function qX(t){t===void 0&&(t={});var e=XX(null);return e.options=$s({async:!0,ssr:!1},t),e}var h5=function(t){var e=t.sideCar,n=mj(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return S.createElement(i,$s({},n))};h5.isSideCarExport=!0;function YX(t,e){return t.useMedium(e),h5}var f5=qX(),Hb=function(){},Wy=S.forwardRef(function(t,e){var n=S.useRef(null),i=S.useState({onScrollCapture:Hb,onWheelCapture:Hb,onTouchMoveCapture:Hb}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,g=t.allowPinchZoom,b=t.as,v=b===void 0?"div":b,y=t.gapMode,w=mj(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=h,k=GX([n,e]),E=$s($s({},w),r);return S.createElement(S.Fragment,null,c&&S.createElement(x,{sideCar:f5,removeScrollBar:u,shards:d,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:y}),o?S.cloneElement(S.Children.only(a),$s($s({},E),{ref:k})):S.createElement(v,$s({},E,{className:l,ref:k}),a))});Wy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Wy.classNames={fullWidth:pv,zeroRight:fv};var ZX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ZX();return e&&t.setAttribute("nonce",e),t}function QX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function eq(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var tq=function(){var t=0,e=null;return{add:function(n){t==0&&(e=JX())&&(QX(e,n),eq(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},nq=function(){var t=tq();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},p5=function(){var t=nq(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},iq={left:0,top:0,right:0,gap:0},Vb=function(t){return parseInt(t||"",10)||0},rq=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Vb(n),Vb(i),Vb(r)]},sq=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return iq;var e=rq(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},oq=p5(),Zc="data-scroll-locked",aq=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(UX,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Zc,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fv,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(pv,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(fv," .").concat(fv,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(pv," .").concat(pv,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Zc,`] {
    `).concat(HX,": ").concat(a,`px;
  }
`)},EN=function(){var t=parseInt(document.body.getAttribute(Zc)||"0",10);return isFinite(t)?t:0},lq=function(){S.useEffect(function(){return document.body.setAttribute(Zc,(EN()+1).toString()),function(){var t=EN()-1;t<=0?document.body.removeAttribute(Zc):document.body.setAttribute(Zc,t.toString())}},[])},uq=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;lq();var s=S.useMemo(function(){return sq(r)},[r]);return S.createElement(oq,{styles:aq(s,!e,r,n?"":"!important")})},n_=!1;if(typeof window<"u")try{var ug=Object.defineProperty({},"passive",{get:function(){return n_=!0,!0}});window.addEventListener("test",ug,ug),window.removeEventListener("test",ug,ug)}catch{n_=!1}var tc=n_?{passive:!1}:!1,cq=function(t){return t.tagName==="TEXTAREA"},m5=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!cq(t)&&n[e]==="visible")},dq=function(t){return m5(t,"overflowY")},hq=function(t){return m5(t,"overflowX")},AN=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=g5(t,i);if(r){var s=v5(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},fq=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},pq=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},g5=function(t,e){return t==="v"?dq(e):hq(e)},v5=function(t,e){return t==="v"?fq(e):pq(e)},mq=function(t,e){return t==="h"&&e==="rtl"?-1:1},gq=function(t,e,n,i,r){var s=mq(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),u=!1,c=o>0,d=0,h=0;do{var f=v5(t,a),p=f[0],g=f[1],b=f[2],v=g-b-s*p;(p||v)&&g5(t,a)&&(d+=v,h+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&(Math.abs(d)<1||!r)||!c&&(Math.abs(h)<1||!r))&&(u=!0),u},cg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},PN=function(t){return[t.deltaX,t.deltaY]},TN=function(t){return t&&"current"in t?t.current:t},vq=function(t,e){return t[0]===e[0]&&t[1]===e[1]},yq=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},wq=0,nc=[];function bq(t){var e=S.useRef([]),n=S.useRef([0,0]),i=S.useRef(),r=S.useState(wq++)[0],s=S.useState(p5)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var g=m7([t.lockRef.current],(t.shards||[]).map(TN),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=cg(g),y=n.current,w="deltaX"in g?g.deltaX:y[0]-v[0],x="deltaY"in g?g.deltaY:y[1]-v[1],k,E=g.target,C=Math.abs(w)>Math.abs(x)?"h":"v";if("touches"in g&&C==="h"&&E.type==="range")return!1;var P=AN(C,E);if(!P)return!0;if(P?k=C:(k=C==="v"?"h":"v",P=AN(C,E)),!P)return!1;if(!i.current&&"changedTouches"in g&&(w||x)&&(i.current=k),!k)return!0;var N=i.current||k;return gq(N,b,g,N==="h"?w:x,!0)},[]),l=S.useCallback(function(g){var b=g;if(!(!nc.length||nc[nc.length-1]!==s)){var v="deltaY"in b?PN(b):cg(b),y=e.current.filter(function(k){return k.name===b.type&&(k.target===b.target||b.target===k.shadowParent)&&vq(k.delta,v)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(TN).filter(Boolean).filter(function(k){return k.contains(b.target)}),x=w.length>0?a(b,w[0]):!o.current.noIsolation;x&&b.cancelable&&b.preventDefault()}}},[]),u=S.useCallback(function(g,b,v,y){var w={name:g,delta:b,target:v,should:y,shadowParent:xq(v)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(x){return x!==w})},1)},[]),c=S.useCallback(function(g){n.current=cg(g),i.current=void 0},[]),d=S.useCallback(function(g){u(g.type,PN(g),g.target,a(g,t.lockRef.current))},[]),h=S.useCallback(function(g){u(g.type,cg(g),g.target,a(g,t.lockRef.current))},[]);S.useEffect(function(){return nc.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,tc),document.addEventListener("touchmove",l,tc),document.addEventListener("touchstart",c,tc),function(){nc=nc.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,tc),document.removeEventListener("touchmove",l,tc),document.removeEventListener("touchstart",c,tc)}},[]);var f=t.removeScrollBar,p=t.inert;return S.createElement(S.Fragment,null,p?S.createElement(s,{styles:yq(r)}):null,f?S.createElement(uq,{gapMode:t.gapMode}):null)}function xq(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Sq=YX(f5,bq);var Gy=S.forwardRef(function(t,e){return S.createElement(Wy,$s({},t,{ref:e,sideCar:Sq}))});Gy.classNames=Wy.classNames;var i_=["Enter"," "],_q=["ArrowDown","PageUp","Home"],y5=["ArrowUp","PageDown","End"],kq=[..._q,...y5],Cq={ltr:[...i_,"ArrowRight"],rtl:[...i_,"ArrowLeft"]},Eq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},em="Menu",[ip,Aq,Pq]=Up(em),[Gu,w5]=El(em,[Pq,Wd,Oy]),Ky=Wd(),b5=Oy(),[Tq,Ku]=Gu(em),[Nq,tm]=Gu(em),x5=t=>{const{__scopeMenu:e,open:n=!1,children:i,dir:r,onOpenChange:s,modal:o=!0}=t,a=Ky(e),[l,u]=S.useState(null),c=S.useRef(!1),d=ni(s),h=Hp(r);return S.useEffect(()=>{const f=()=>{c.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>c.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),m.jsx(QC,{...a,children:m.jsx(Tq,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:u,children:m.jsx(Nq,{scope:e,onClose:S.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:c,dir:h,modal:o,children:i})})})};x5.displayName=em;var Rq="MenuAnchor",iE=S.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=Ky(n);return m.jsx(Vy,{...r,...i,ref:e})});iE.displayName=Rq;var rE="MenuPortal",[Mq,S5]=Gu(rE,{forceMount:void 0}),_5=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=Ku(rE,e);return m.jsx(Mq,{scope:e,forceMount:n,children:m.jsx(Yo,{present:n||s.open,children:m.jsx(Qp,{asChild:!0,container:r,children:i})})})};_5.displayName=rE;var jr="MenuContent",[Oq,sE]=Gu(jr),k5=S.forwardRef((t,e)=>{const n=S5(jr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Ku(jr,t.__scopeMenu),o=tm(jr,t.__scopeMenu);return m.jsx(ip.Provider,{scope:t.__scopeMenu,children:m.jsx(Yo,{present:i||s.open,children:m.jsx(ip.Slot,{scope:t.__scopeMenu,children:o.modal?m.jsx(Iq,{...r,ref:e}):m.jsx(Dq,{...r,ref:e})})})})}),Iq=S.forwardRef((t,e)=>{const n=Ku(jr,t.__scopeMenu),i=S.useRef(null),r=dt(e,i);return S.useEffect(()=>{const s=i.current;if(s)return nE(s)},[]),m.jsx(oE,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ye(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Dq=S.forwardRef((t,e)=>{const n=Ku(jr,t.__scopeMenu);return m.jsx(oE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),oE=S.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:p,...g}=t,b=Ku(jr,n),v=tm(jr,n),y=Ky(n),w=b5(n),x=Aq(n),[k,E]=S.useState(null),C=S.useRef(null),P=dt(e,C,b.onContentChange),N=S.useRef(0),I=S.useRef(""),L=S.useRef(0),$=S.useRef(null),G=S.useRef("right"),U=S.useRef(0),X=p?Gy:S.Fragment,ee=p?{as:Au,allowPinchZoom:!0}:void 0,he=F=>{var _,T;const ne=I.current+F,ke=x().filter(M=>!M.disabled),Z=document.activeElement,ue=(_=ke.find(M=>M.ref.current===Z))==null?void 0:_.textValue,D=ke.map(M=>M.textValue),O=Kq(D,ne,ue),B=(T=ke.find(M=>M.textValue===O))==null?void 0:T.ref.current;(function M(R){I.current=R,window.clearTimeout(N.current),R!==""&&(N.current=window.setTimeout(()=>M(""),1e3))})(ne),B&&setTimeout(()=>B.focus())};S.useEffect(()=>()=>window.clearTimeout(N.current),[]),UC();const V=S.useCallback(F=>{var ke,Z;return G.current===((ke=$.current)==null?void 0:ke.side)&&qq(F,(Z=$.current)==null?void 0:Z.area)},[]);return m.jsx(Oq,{scope:n,searchRef:I,onItemEnter:S.useCallback(F=>{V(F)&&F.preventDefault()},[V]),onItemLeave:S.useCallback(F=>{var ne;V(F)||((ne=C.current)==null||ne.focus(),E(null))},[V]),onTriggerLeave:S.useCallback(F=>{V(F)&&F.preventDefault()},[V]),pointerGraceTimerRef:L,onPointerGraceIntentChange:S.useCallback(F=>{$.current=F},[]),children:m.jsx(X,{...ee,children:m.jsx(By,{asChild:!0,trapped:r,onMountAutoFocus:ye(s,F=>{var ne;F.preventDefault(),(ne=C.current)==null||ne.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:m.jsx(Zp,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,children:m.jsx(IL,{asChild:!0,...w,dir:v.dir,orientation:"vertical",loop:i,currentTabStopId:k,onCurrentTabStopIdChange:E,onEntryFocus:ye(l,F=>{v.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:m.jsx(eE,{role:"menu","aria-orientation":"vertical","data-state":B5(b.open),"data-radix-menu-content":"",dir:v.dir,...y,...g,ref:P,style:{outline:"none",...g.style},onKeyDown:ye(g.onKeyDown,F=>{const ke=F.target.closest("[data-radix-menu-content]")===F.currentTarget,Z=F.ctrlKey||F.altKey||F.metaKey,ue=F.key.length===1;ke&&(F.key==="Tab"&&F.preventDefault(),!Z&&ue&&he(F.key));const D=C.current;if(F.target!==D||!kq.includes(F.key))return;F.preventDefault();const B=x().filter(_=>!_.disabled).map(_=>_.ref.current);y5.includes(F.key)&&B.reverse(),Wq(B)}),onBlur:ye(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(N.current),I.current="")}),onPointerMove:ye(t.onPointerMove,rp(F=>{const ne=F.target,ke=U.current!==F.clientX;if(F.currentTarget.contains(ne)&&ke){const Z=F.clientX>U.current?"right":"left";G.current=Z,U.current=F.clientX}}))})})})})})})});k5.displayName=jr;var Lq="MenuGroup",aE=S.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return m.jsx(He.div,{role:"group",...i,ref:e})});aE.displayName=Lq;var jq="MenuLabel",C5=S.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return m.jsx(He.div,{...i,ref:e})});C5.displayName=jq;var S0="MenuItem",NN="menu.itemSelect",Xy=S.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=S.useRef(null),o=tm(S0,t.__scopeMenu),a=sE(S0,t.__scopeMenu),l=dt(e,s),u=S.useRef(!1),c=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(NN,{bubbles:!0,cancelable:!0});d.addEventListener(NN,f=>i==null?void 0:i(f),{once:!0}),bC(d,h),h.defaultPrevented?u.current=!1:o.onClose()}};return m.jsx(E5,{...r,ref:l,disabled:n,onClick:ye(t.onClick,c),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),u.current=!0},onPointerUp:ye(t.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:ye(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||i_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Xy.displayName=S0;var E5=S.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=sE(S0,n),a=b5(n),l=S.useRef(null),u=dt(e,l),[c,d]=S.useState(!1),[h,f]=S.useState("");return S.useEffect(()=>{const p=l.current;p&&f((p.textContent??"").trim())},[s.children]),m.jsx(ip.ItemSlot,{scope:n,disabled:i,textValue:r??h,children:m.jsx(DL,{asChild:!0,...a,focusable:!i,children:m.jsx(He.div,{role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:u,onPointerMove:ye(t.onPointerMove,rp(p=>{i?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ye(t.onPointerLeave,rp(p=>o.onItemLeave(p))),onFocus:ye(t.onFocus,()=>d(!0)),onBlur:ye(t.onBlur,()=>d(!1))})})})}),Fq="MenuCheckboxItem",A5=S.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return m.jsx(M5,{scope:t.__scopeMenu,checked:n,children:m.jsx(Xy,{role:"menuitemcheckbox","aria-checked":_0(n)?"mixed":n,...r,ref:e,"data-state":uE(n),onSelect:ye(r.onSelect,()=>i==null?void 0:i(_0(n)?!0:!n),{checkForDefaultPrevented:!1})})})});A5.displayName=Fq;var P5="MenuRadioGroup",[$q,Bq]=Gu(P5,{value:void 0,onValueChange:()=>{}}),T5=S.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=ni(i);return m.jsx($q,{scope:t.__scopeMenu,value:n,onValueChange:s,children:m.jsx(aE,{...r,ref:e})})});T5.displayName=P5;var N5="MenuRadioItem",R5=S.forwardRef((t,e)=>{const{value:n,...i}=t,r=Bq(N5,t.__scopeMenu),s=n===r.value;return m.jsx(M5,{scope:t.__scopeMenu,checked:s,children:m.jsx(Xy,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":uE(s),onSelect:ye(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});R5.displayName=N5;var lE="MenuItemIndicator",[M5,zq]=Gu(lE,{checked:!1}),O5=S.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=zq(lE,n);return m.jsx(Yo,{present:i||_0(s.checked)||s.checked===!0,children:m.jsx(He.span,{...r,ref:e,"data-state":uE(s.checked)})})});O5.displayName=lE;var Uq="MenuSeparator",I5=S.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return m.jsx(He.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});I5.displayName=Uq;var Hq="MenuArrow",D5=S.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=Ky(n);return m.jsx(tE,{...r,...i,ref:e})});D5.displayName=Hq;var Vq="MenuSub",[Bhe,L5]=Gu(Vq),zh="MenuSubTrigger",j5=S.forwardRef((t,e)=>{const n=Ku(zh,t.__scopeMenu),i=tm(zh,t.__scopeMenu),r=L5(zh,t.__scopeMenu),s=sE(zh,t.__scopeMenu),o=S.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,u={__scopeMenu:t.__scopeMenu},c=S.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return S.useEffect(()=>c,[c]),S.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),m.jsx(iE,{asChild:!0,...u,children:m.jsx(E5,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":B5(n.open),...t,ref:Ry(e,r.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ye(t.onPointerMove,rp(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),c()},100))})),onPointerLeave:ye(t.onPointerLeave,rp(d=>{var f,p;c();const h=(f=n.content)==null?void 0:f.getBoundingClientRect();if(h){const g=(p=n.content)==null?void 0:p.dataset.side,b=g==="right",v=b?-5:5,y=h[b?"left":"right"],w=h[b?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:y,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:y,y:h.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ye(t.onKeyDown,d=>{var f;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||Cq[i.dir].includes(d.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),d.preventDefault())})})})});j5.displayName=zh;var F5="MenuSubContent",$5=S.forwardRef((t,e)=>{const n=S5(jr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Ku(jr,t.__scopeMenu),o=tm(jr,t.__scopeMenu),a=L5(F5,t.__scopeMenu),l=S.useRef(null),u=dt(e,l);return m.jsx(ip.Provider,{scope:t.__scopeMenu,children:m.jsx(Yo,{present:i||s.open,children:m.jsx(ip.Slot,{scope:t.__scopeMenu,children:m.jsx(oE,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:c=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),c.preventDefault()},onCloseAutoFocus:c=>c.preventDefault(),onFocusOutside:ye(t.onFocusOutside,c=>{c.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ye(t.onEscapeKeyDown,c=>{o.onClose(),c.preventDefault()}),onKeyDown:ye(t.onKeyDown,c=>{var f;const d=c.currentTarget.contains(c.target),h=Eq[o.dir].includes(c.key);d&&h&&(s.onOpenChange(!1),(f=a.trigger)==null||f.focus(),c.preventDefault())})})})})})});$5.displayName=F5;function B5(t){return t?"open":"closed"}function _0(t){return t==="indeterminate"}function uE(t){return _0(t)?"indeterminate":t?"checked":"unchecked"}function Wq(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Gq(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function Kq(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Gq(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Xq(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,c=e[o].y;l>i!=c>i&&n<(u-a)*(i-l)/(c-l)+a&&(r=!r)}return r}function qq(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Xq(n,e)}function rp(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Yq=x5,Zq=iE,Jq=_5,Qq=k5,eY=aE,tY=C5,nY=Xy,iY=A5,rY=T5,sY=R5,oY=O5,aY=I5,lY=D5,uY=j5,cY=$5,cE="DropdownMenu",[dY,zhe]=El(cE,[w5]),ki=w5(),[hY,z5]=dY(cE),U5=t=>{const{__scopeDropdownMenu:e,children:n,dir:i,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=ki(e),u=S.useRef(null),[c=!1,d]=Uo({prop:r,defaultProp:s,onChange:o});return m.jsx(hY,{scope:e,triggerId:il(),triggerRef:u,contentId:il(),open:c,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(h=>!h),[d]),modal:a,children:m.jsx(Yq,{...l,open:c,onOpenChange:d,dir:i,modal:a,children:n})})};U5.displayName=cE;var H5="DropdownMenuTrigger",V5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=z5(H5,n),o=ki(n);return m.jsx(Zq,{asChild:!0,...o,children:m.jsx(He.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:Ry(e,s.triggerRef),onPointerDown:ye(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ye(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});V5.displayName=H5;var fY="DropdownMenuPortal",W5=t=>{const{__scopeDropdownMenu:e,...n}=t,i=ki(e);return m.jsx(Jq,{...i,...n})};W5.displayName=fY;var G5="DropdownMenuContent",K5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=z5(G5,n),s=ki(n),o=S.useRef(!1);return m.jsx(Qq,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:ye(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ye(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,c=l.button===2||u;(!r.modal||c)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});K5.displayName=G5;var pY="DropdownMenuGroup",mY=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ki(n);return m.jsx(eY,{...r,...i,ref:e})});mY.displayName=pY;var gY="DropdownMenuLabel",X5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ki(n);return m.jsx(tY,{...r,...i,ref:e})});X5.displayName=gY;var vY="DropdownMenuItem",q5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ki(n);return m.jsx(nY,{...r,...i,ref:e})});q5.displayName=vY;var yY="DropdownMenuCheckboxItem",Y5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ki(n);return m.jsx(iY,{...r,...i,ref:e})});Y5.displayName=yY;var wY="DropdownMenuRadioGroup",bY=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ki(n);return m.jsx(rY,{...r,...i,ref:e})});bY.displayName=wY;var xY="DropdownMenuRadioItem",Z5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ki(n);return m.jsx(sY,{...r,...i,ref:e})});Z5.displayName=xY;var SY="DropdownMenuItemIndicator",J5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ki(n);return m.jsx(oY,{...r,...i,ref:e})});J5.displayName=SY;var _Y="DropdownMenuSeparator",Q5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ki(n);return m.jsx(aY,{...r,...i,ref:e})});Q5.displayName=_Y;var kY="DropdownMenuArrow",CY=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ki(n);return m.jsx(lY,{...r,...i,ref:e})});CY.displayName=kY;var EY="DropdownMenuSubTrigger",e3=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ki(n);return m.jsx(uY,{...r,...i,ref:e})});e3.displayName=EY;var AY="DropdownMenuSubContent",t3=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ki(n);return m.jsx(cY,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});t3.displayName=AY;var PY=U5,TY=V5,NY=W5,n3=K5,i3=X5,r3=q5,s3=Y5,o3=Z5,a3=J5,l3=Q5,u3=e3,c3=t3;const RY=PY,MY=TY,OY=S.forwardRef(({className:t,inset:e,children:n,...i},r)=>m.jsxs(u3,{ref:r,className:Me("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,m.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block h-4 w-4"})]}));OY.displayName=u3.displayName;const IY=S.forwardRef(({className:t,...e},n)=>m.jsx(c3,{ref:n,className:Me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));IY.displayName=c3.displayName;const d3=S.forwardRef(({className:t,sideOffset:e=4,...n},i)=>m.jsx(NY,{children:m.jsx(n3,{ref:i,sideOffset:e,className:Me("z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));d3.displayName=n3.displayName;const mv=S.forwardRef(({className:t,inset:e,...n},i)=>m.jsx(r3,{ref:i,className:Me("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));mv.displayName=r3.displayName;const DY=S.forwardRef(({className:t,children:e,checked:n,...i},r)=>m.jsxs(s3,{ref:r,className:Me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(a3,{children:m.jsx("span",{className:"icon-[lucide--check] h-4 w-4"})})}),e]}));DY.displayName=s3.displayName;const LY=S.forwardRef(({className:t,children:e,...n},i)=>m.jsxs(o3,{ref:i,className:Me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(a3,{children:m.jsx("span",{className:"icon-[lucide--circle-dot] block h-4 w-4"})})}),e]}));LY.displayName=o3.displayName;const jY=S.forwardRef(({className:t,inset:e,...n},i)=>m.jsx(i3,{ref:i,className:Me("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));jY.displayName=i3.displayName;const FY=S.forwardRef(({className:t,...e},n)=>m.jsx(l3,{ref:n,className:Me("-mx-1 my-1 h-px bg-stone-600",t),...e}));FY.displayName=l3.displayName;function h3(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const f3=["en","es"];function dE(t){return function(n,i,...r){const s=h3(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const z=_C();function $Y(t){return m.jsx(KV,{store:z,children:t.children})}var ut;(function(t){t.assertEqual=r=>r;function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(ut||(ut={}));var r_;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(r_||(r_={}));const Ce=ut.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_a=t=>{switch(typeof t){case"undefined":return Ce.undefined;case"string":return Ce.string;case"number":return isNaN(t)?Ce.nan:Ce.number;case"boolean":return Ce.boolean;case"function":return Ce.function;case"bigint":return Ce.bigint;case"symbol":return Ce.symbol;case"object":return Array.isArray(t)?Ce.array:t===null?Ce.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ce.promise:typeof Map<"u"&&t instanceof Map?Ce.map:typeof Set<"u"&&t instanceof Set?Ce.set:typeof Date<"u"&&t instanceof Date?Ce.date:Ce.object;default:return Ce.unknown}},ae=ut.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),BY=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ur extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return r(this),i}static assert(e){if(!(e instanceof ur))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ut.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}ur.create=t=>new ur(t);const Pd=(t,e)=>{let n;switch(t.code){case ae.invalid_type:t.received===Ce.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ae.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ut.jsonStringifyReplacer)}`;break;case ae.unrecognized_keys:n=`Unrecognized key(s) in object: ${ut.joinValues(t.keys,", ")}`;break;case ae.invalid_union:n="Invalid input";break;case ae.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ut.joinValues(t.options)}`;break;case ae.invalid_enum_value:n=`Invalid enum value. Expected ${ut.joinValues(t.options)}, received '${t.received}'`;break;case ae.invalid_arguments:n="Invalid function arguments";break;case ae.invalid_return_type:n="Invalid function return type";break;case ae.invalid_date:n="Invalid date";break;case ae.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ut.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ae.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ae.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ae.custom:n="Invalid input";break;case ae.invalid_intersection_types:n="Intersection results could not be merged";break;case ae.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ae.not_finite:n="Number must be finite";break;default:n=e.defaultError,ut.assertNever(t)}return{message:n}};let p3=Pd;function zY(t){p3=t}function k0(){return p3}const C0=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}},UY=[];function be(t,e){const n=k0(),i=C0({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Pd?void 0:Pd].filter(r=>!!r)});t.common.issues.push(i)}class ii{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Ue;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return ii.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Ue;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Ue=Object.freeze({status:"aborted"}),Nc=t=>({status:"dirty",value:t}),bi=t=>({status:"valid",value:t}),s_=t=>t.status==="aborted",o_=t=>t.status==="dirty",sp=t=>t.status==="valid",op=t=>typeof Promise<"u"&&t instanceof Promise;function E0(t,e,n,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function m3(t,e,n,i,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Ie;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ie||(Ie={}));var Uh,Hh;class io{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const RN=(t,e)=>{if(sp(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ur(t.common.issues);return this._error=n,this._error}}};function qe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{var l,u;const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:(l=c??i)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(u=c??n)!==null&&u!==void 0?u:a.defaultError}},description:r}}class Qe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return _a(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:_a(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ii,ctx:{common:e.parent.common,data:e.data,parsedType:_a(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(op(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const r={common:{issues:[],async:(i=n==null?void 0:n.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_a(e)},s=this._parseSync({data:e,path:r.path,parent:r});return RN(r,s)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_a(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(op(r)?r:Promise.resolve(r));return RN(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ae.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new bs({schema:this,typeName:ze.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Qs.create(this,this._def)}nullable(){return pl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ps.create(this,this._def)}promise(){return Nd.create(this,this._def)}or(e){return cp.create([this,e],this._def)}and(e){return dp.create(this,e,this._def)}transform(e){return new bs({...qe(this._def),schema:this,typeName:ze.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new gp({...qe(this._def),innerType:this,defaultValue:n,typeName:ze.ZodDefault})}brand(){return new hE({typeName:ze.ZodBranded,type:this,...qe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new vp({...qe(this._def),innerType:this,catchValue:n,typeName:ze.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return nm.create(this,e)}readonly(){return yp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const HY=/^c[^\s-]{8,}$/i,VY=/^[0-9a-z]+$/,WY=/^[0-9A-HJKMNP-TV-Z]{26}$/,GY=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,KY=/^[a-z0-9_-]{21}$/i,XY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Wb;const ZY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,JY=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,QY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,g3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eZ=new RegExp(`^${g3}$`);function v3(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function tZ(t){return new RegExp(`^${v3(t)}$`)}function y3(t){let e=`${g3}T${v3(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function nZ(t,e){return!!((e==="v4"||!e)&&ZY.test(t)||(e==="v6"||!e)&&JY.test(t))}class ls extends Qe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ce.string){const s=this._getOrReturnCtx(e);return be(s,{code:ae.invalid_type,expected:Ce.string,received:s.parsedType}),Ue}const i=new ii;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ae.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ae.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?be(r,{code:ae.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&be(r,{code:ae.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")qY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"email",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")Wb||(Wb=new RegExp(YY,"u")),Wb.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"emoji",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")GY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"uuid",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")KY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"nanoid",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")HY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"cuid",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")VY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"cuid2",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")WY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"ulid",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),be(r,{validation:"url",code:ae.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"regex",code:ae.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),be(r,{code:ae.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),be(r,{code:ae.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),be(r,{code:ae.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?y3(s).test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ae.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?eZ.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ae.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?tZ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ae.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?XY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"duration",code:ae.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?nZ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"ip",code:ae.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?QY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"base64",code:ae.invalid_string,message:s.message}),i.dirty()):ut.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ae.invalid_string,...Ie.errToObj(i)})}_addCheck(e){return new ls({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ie.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ie.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ie.errToObj(e)})}datetime(e){var n,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(i=e==null?void 0:e.local)!==null&&i!==void 0?i:!1,...Ie.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ie.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ie.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ie.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ie.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ie.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ie.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ie.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ie.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ie.errToObj(n)})}nonempty(e){return this.min(1,Ie.errToObj(e))}trim(){return new ls({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ls({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ls({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ls.create=t=>{var e;return new ls({checks:[],typeName:ze.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...qe(t)})};function iZ(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=parseInt(t.toFixed(r).replace(".","")),o=parseInt(e.toFixed(r).replace(".",""));return s%o/Math.pow(10,r)}class dl extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ce.number){const s=this._getOrReturnCtx(e);return be(s,{code:ae.invalid_type,expected:Ce.number,received:s.parsedType}),Ue}let i;const r=new ii;for(const s of this._def.checks)s.kind==="int"?ut.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{code:ae.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ae.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ae.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?iZ(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),be(i,{code:ae.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{code:ae.not_finite,message:s.message}),r.dirty()):ut.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ie.toString(n))}setLimit(e,n,i,r){return new dl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ie.toString(r)}]})}_addCheck(e){return new dl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ie.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ut.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}dl.create=t=>new dl({checks:[],typeName:ze.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...qe(t)});class hl extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ce.bigint){const s=this._getOrReturnCtx(e);return be(s,{code:ae.invalid_type,expected:Ce.bigint,received:s.parsedType}),Ue}let i;const r=new ii;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ae.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ae.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ae.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):ut.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ie.toString(n))}setLimit(e,n,i,r){return new hl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ie.toString(r)}]})}_addCheck(e){return new hl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}hl.create=t=>{var e;return new hl({checks:[],typeName:ze.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...qe(t)})};class ap extends Qe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ce.boolean){const i=this._getOrReturnCtx(e);return be(i,{code:ae.invalid_type,expected:Ce.boolean,received:i.parsedType}),Ue}return bi(e.data)}}ap.create=t=>new ap({typeName:ze.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...qe(t)});class Iu extends Qe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ce.date){const s=this._getOrReturnCtx(e);return be(s,{code:ae.invalid_type,expected:Ce.date,received:s.parsedType}),Ue}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return be(s,{code:ae.invalid_date}),Ue}const i=new ii;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ae.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ae.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):ut.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Iu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ie.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ie.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Iu.create=t=>new Iu({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ze.ZodDate,...qe(t)});class A0 extends Qe{_parse(e){if(this._getType(e)!==Ce.symbol){const i=this._getOrReturnCtx(e);return be(i,{code:ae.invalid_type,expected:Ce.symbol,received:i.parsedType}),Ue}return bi(e.data)}}A0.create=t=>new A0({typeName:ze.ZodSymbol,...qe(t)});class lp extends Qe{_parse(e){if(this._getType(e)!==Ce.undefined){const i=this._getOrReturnCtx(e);return be(i,{code:ae.invalid_type,expected:Ce.undefined,received:i.parsedType}),Ue}return bi(e.data)}}lp.create=t=>new lp({typeName:ze.ZodUndefined,...qe(t)});class up extends Qe{_parse(e){if(this._getType(e)!==Ce.null){const i=this._getOrReturnCtx(e);return be(i,{code:ae.invalid_type,expected:Ce.null,received:i.parsedType}),Ue}return bi(e.data)}}up.create=t=>new up({typeName:ze.ZodNull,...qe(t)});class Td extends Qe{constructor(){super(...arguments),this._any=!0}_parse(e){return bi(e.data)}}Td.create=t=>new Td({typeName:ze.ZodAny,...qe(t)});class yu extends Qe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return bi(e.data)}}yu.create=t=>new yu({typeName:ze.ZodUnknown,...qe(t)});class Go extends Qe{_parse(e){const n=this._getOrReturnCtx(e);return be(n,{code:ae.invalid_type,expected:Ce.never,received:n.parsedType}),Ue}}Go.create=t=>new Go({typeName:ze.ZodNever,...qe(t)});class P0 extends Qe{_parse(e){if(this._getType(e)!==Ce.undefined){const i=this._getOrReturnCtx(e);return be(i,{code:ae.invalid_type,expected:Ce.void,received:i.parsedType}),Ue}return bi(e.data)}}P0.create=t=>new P0({typeName:ze.ZodVoid,...qe(t)});class ps extends Qe{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==Ce.array)return be(n,{code:ae.invalid_type,expected:Ce.array,received:n.parsedType}),Ue;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(be(n,{code:o?ae.too_big:ae.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(be(n,{code:ae.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(be(n,{code:ae.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new io(n,o,n.path,a)))).then(o=>ii.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new io(n,o,n.path,a)));return ii.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new ps({...this._def,minLength:{value:e,message:Ie.toString(n)}})}max(e,n){return new ps({...this._def,maxLength:{value:e,message:Ie.toString(n)}})}length(e,n){return new ps({...this._def,exactLength:{value:e,message:Ie.toString(n)}})}nonempty(e){return this.min(1,e)}}ps.create=(t,e)=>new ps({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ze.ZodArray,...qe(e)});function lc(t){if(t instanceof Ht){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=Qs.create(lc(i))}return new Ht({...t._def,shape:()=>e})}else return t instanceof ps?new ps({...t._def,type:lc(t.element)}):t instanceof Qs?Qs.create(lc(t.unwrap())):t instanceof pl?pl.create(lc(t.unwrap())):t instanceof ro?ro.create(t.items.map(e=>lc(e))):t}class Ht extends Qe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ut.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ce.object){const u=this._getOrReturnCtx(e);return be(u,{code:ae.invalid_type,expected:Ce.object,received:u.parsedType}),Ue}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Go&&this._def.unknownKeys==="strip"))for(const u in r.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new io(r,d,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof Go){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(u==="strict")a.length>0&&(be(r,{code:ae.unrecognized_keys,keys:a}),i.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new io(r,d,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key,h=await c.value;u.push({key:d,value:h,alwaysSet:c.alwaysSet})}return u}).then(u=>ii.mergeObjectSync(i,u)):ii.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Ie.errToObj,new Ht({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var r,s,o,a;const l=(o=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,n,i).message)!==null&&o!==void 0?o:i.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ie.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Ht({...this._def,unknownKeys:"strip"})}passthrough(){return new Ht({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ht({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ht({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ze.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ht({...this._def,catchall:e})}pick(e){const n={};return ut.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new Ht({...this._def,shape:()=>n})}omit(e){const n={};return ut.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new Ht({...this._def,shape:()=>n})}deepPartial(){return lc(this)}partial(e){const n={};return ut.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}),new Ht({...this._def,shape:()=>n})}required(e){const n={};return ut.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof Qs;)s=s._def.innerType;n[i]=s}}),new Ht({...this._def,shape:()=>n})}keyof(){return w3(ut.objectKeys(this.shape))}}Ht.create=(t,e)=>new Ht({shape:()=>t,unknownKeys:"strip",catchall:Go.create(),typeName:ze.ZodObject,...qe(e)});Ht.strictCreate=(t,e)=>new Ht({shape:()=>t,unknownKeys:"strict",catchall:Go.create(),typeName:ze.ZodObject,...qe(e)});Ht.lazycreate=(t,e)=>new Ht({shape:t,unknownKeys:"strip",catchall:Go.create(),typeName:ze.ZodObject,...qe(e)});class cp extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ur(a.ctx.common.issues));return be(n,{code:ae.invalid_union,unionErrors:o}),Ue}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new ur(l));return be(n,{code:ae.invalid_union,unionErrors:a}),Ue}}get options(){return this._def.options}}cp.create=(t,e)=>new cp({options:t,typeName:ze.ZodUnion,...qe(e)});const co=t=>t instanceof fp?co(t.schema):t instanceof bs?co(t.innerType()):t instanceof pp?[t.value]:t instanceof fl?t.options:t instanceof mp?ut.objectValues(t.enum):t instanceof gp?co(t._def.innerType):t instanceof lp?[void 0]:t instanceof up?[null]:t instanceof Qs?[void 0,...co(t.unwrap())]:t instanceof pl?[null,...co(t.unwrap())]:t instanceof hE||t instanceof yp?co(t.unwrap()):t instanceof vp?co(t._def.innerType):[];class qy extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ce.object)return be(n,{code:ae.invalid_type,expected:Ce.object,received:n.parsedType}),Ue;const i=this.discriminator,r=n.data[i],s=this.optionsMap.get(r);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(be(n,{code:ae.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const r=new Map;for(const s of n){const o=co(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,s)}}return new qy({typeName:ze.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:r,...qe(i)})}}function a_(t,e){const n=_a(t),i=_a(e);if(t===e)return{valid:!0,data:t};if(n===Ce.object&&i===Ce.object){const r=ut.objectKeys(e),s=ut.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=a_(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Ce.array&&i===Ce.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=a_(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===Ce.date&&i===Ce.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class dp extends Qe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(s_(s)||s_(o))return Ue;const a=a_(s.value,o.value);return a.valid?((o_(s)||o_(o))&&n.dirty(),{status:n.value,value:a.data}):(be(i,{code:ae.invalid_intersection_types}),Ue)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}dp.create=(t,e,n)=>new dp({left:t,right:e,typeName:ze.ZodIntersection,...qe(n)});class ro extends Qe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ce.array)return be(i,{code:ae.invalid_type,expected:Ce.array,received:i.parsedType}),Ue;if(i.data.length<this._def.items.length)return be(i,{code:ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ue;!this._def.rest&&i.data.length>this._def.items.length&&(be(i,{code:ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new io(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>ii.mergeArray(n,o)):ii.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ro({...this._def,rest:e})}}ro.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ro({items:t,typeName:ze.ZodTuple,rest:null,...qe(e)})};class hp extends Qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ce.object)return be(i,{code:ae.invalid_type,expected:Ce.object,received:i.parsedType}),Ue;const r=[],s=this._def.keyType,o=this._def.valueType;for(const a in i.data)r.push({key:s._parse(new io(i,a,i.path,a)),value:o._parse(new io(i,i.data[a],i.path,a)),alwaysSet:a in i.data});return i.common.async?ii.mergeObjectAsync(n,r):ii.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof Qe?new hp({keyType:e,valueType:n,typeName:ze.ZodRecord,...qe(i)}):new hp({keyType:ls.create(),valueType:e,typeName:ze.ZodRecord,...qe(n)})}}class T0 extends Qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ce.map)return be(i,{code:ae.invalid_type,expected:Ce.map,received:i.parsedType}),Ue;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],u)=>({key:r._parse(new io(i,a,i.path,[u,"key"])),value:s._parse(new io(i,l,i.path,[u,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Ue;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Ue;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}T0.create=(t,e,n)=>new T0({valueType:e,keyType:t,typeName:ze.ZodMap,...qe(n)});class Du extends Qe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ce.set)return be(i,{code:ae.invalid_type,expected:Ce.set,received:i.parsedType}),Ue;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(be(i,{code:ae.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(be(i,{code:ae.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Ue;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...i.data.values()].map((l,u)=>s._parse(new io(i,l,i.path,u)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Du({...this._def,minSize:{value:e,message:Ie.toString(n)}})}max(e,n){return new Du({...this._def,maxSize:{value:e,message:Ie.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Du.create=(t,e)=>new Du({valueType:t,minSize:null,maxSize:null,typeName:ze.ZodSet,...qe(e)});class Jc extends Qe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ce.function)return be(n,{code:ae.invalid_type,expected:Ce.function,received:n.parsedType}),Ue;function i(a,l){return C0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,k0(),Pd].filter(u=>!!u),issueData:{code:ae.invalid_arguments,argumentsError:l}})}function r(a,l){return C0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,k0(),Pd].filter(u=>!!u),issueData:{code:ae.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Nd){const a=this;return bi(async function(...l){const u=new ur([]),c=await a._def.args.parseAsync(l,s).catch(f=>{throw u.addIssue(i(l,f)),u}),d=await Reflect.apply(o,this,c);return await a._def.returns._def.type.parseAsync(d,s).catch(f=>{throw u.addIssue(r(d,f)),u})})}else{const a=this;return bi(function(...l){const u=a._def.args.safeParse(l,s);if(!u.success)throw new ur([i(l,u.error)]);const c=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(c,s);if(!d.success)throw new ur([r(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Jc({...this._def,args:ro.create(e).rest(yu.create())})}returns(e){return new Jc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new Jc({args:e||ro.create([]).rest(yu.create()),returns:n||yu.create(),typeName:ze.ZodFunction,...qe(i)})}}class fp extends Qe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}fp.create=(t,e)=>new fp({getter:t,typeName:ze.ZodLazy,...qe(e)});class pp extends Qe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return be(n,{received:n.data,code:ae.invalid_literal,expected:this._def.value}),Ue}return{status:"valid",value:e.data}}get value(){return this._def.value}}pp.create=(t,e)=>new pp({value:t,typeName:ze.ZodLiteral,...qe(e)});function w3(t,e){return new fl({values:t,typeName:ze.ZodEnum,...qe(e)})}class fl extends Qe{constructor(){super(...arguments),Uh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return be(n,{expected:ut.joinValues(i),received:n.parsedType,code:ae.invalid_type}),Ue}if(E0(this,Uh)||m3(this,Uh,new Set(this._def.values)),!E0(this,Uh).has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return be(n,{received:n.data,code:ae.invalid_enum_value,options:i}),Ue}return bi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return fl.create(e,{...this._def,...n})}exclude(e,n=this._def){return fl.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Uh=new WeakMap;fl.create=w3;class mp extends Qe{constructor(){super(...arguments),Hh.set(this,void 0)}_parse(e){const n=ut.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Ce.string&&i.parsedType!==Ce.number){const r=ut.objectValues(n);return be(i,{expected:ut.joinValues(r),received:i.parsedType,code:ae.invalid_type}),Ue}if(E0(this,Hh)||m3(this,Hh,new Set(ut.getValidEnumValues(this._def.values))),!E0(this,Hh).has(e.data)){const r=ut.objectValues(n);return be(i,{received:i.data,code:ae.invalid_enum_value,options:r}),Ue}return bi(e.data)}get enum(){return this._def.values}}Hh=new WeakMap;mp.create=(t,e)=>new mp({values:t,typeName:ze.ZodNativeEnum,...qe(e)});class Nd extends Qe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ce.promise&&n.common.async===!1)return be(n,{code:ae.invalid_type,expected:Ce.promise,received:n.parsedType}),Ue;const i=n.parsedType===Ce.promise?n.data:Promise.resolve(n.data);return bi(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Nd.create=(t,e)=>new Nd({type:t,typeName:ze.ZodPromise,...qe(e)});class bs extends Qe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{be(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ue;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?Ue:l.status==="dirty"||n.value==="dirty"?Nc(l.value):l});{if(n.value==="aborted")return Ue;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?Ue:a.status==="dirty"||n.value==="dirty"?Nc(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Ue:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Ue:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!sp(o))return o;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>sp(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);ut.assertNever(r)}}bs.create=(t,e,n)=>new bs({schema:t,typeName:ze.ZodEffects,effect:e,...qe(n)});bs.createWithPreprocess=(t,e,n)=>new bs({schema:e,effect:{type:"preprocess",transform:t},typeName:ze.ZodEffects,...qe(n)});class Qs extends Qe{_parse(e){return this._getType(e)===Ce.undefined?bi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qs.create=(t,e)=>new Qs({innerType:t,typeName:ze.ZodOptional,...qe(e)});class pl extends Qe{_parse(e){return this._getType(e)===Ce.null?bi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pl.create=(t,e)=>new pl({innerType:t,typeName:ze.ZodNullable,...qe(e)});class gp extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===Ce.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}gp.create=(t,e)=>new gp({innerType:t,typeName:ze.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...qe(e)});class vp extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return op(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ur(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new ur(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}vp.create=(t,e)=>new vp({innerType:t,typeName:ze.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...qe(e)});class N0 extends Qe{_parse(e){if(this._getType(e)!==Ce.nan){const i=this._getOrReturnCtx(e);return be(i,{code:ae.invalid_type,expected:Ce.nan,received:i.parsedType}),Ue}return{status:"valid",value:e.data}}}N0.create=t=>new N0({typeName:ze.ZodNaN,...qe(t)});const rZ=Symbol("zod_brand");class hE extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class nm extends Qe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Ue:s.status==="dirty"?(n.dirty(),Nc(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Ue:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new nm({in:e,out:n,typeName:ze.ZodPipeline})}}class yp extends Qe{_parse(e){const n=this._def.innerType._parse(e),i=r=>(sp(r)&&(r.value=Object.freeze(r.value)),r);return op(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}yp.create=(t,e)=>new yp({innerType:t,typeName:ze.ZodReadonly,...qe(e)});function b3(t,e={},n){return t?Td.create().superRefine((i,r)=>{var s,o;if(!t(i)){const a=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;r.addIssue({code:"custom",...u,fatal:l})}}):Td.create()}const sZ={object:Ht.lazycreate};var ze;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ze||(ze={}));const oZ=(t,e={message:`Input not instance of ${t.name}`})=>b3(n=>n instanceof t,e),x3=ls.create,S3=dl.create,aZ=N0.create,lZ=hl.create,_3=ap.create,uZ=Iu.create,cZ=A0.create,dZ=lp.create,hZ=up.create,fZ=Td.create,pZ=yu.create,mZ=Go.create,gZ=P0.create,vZ=ps.create,yZ=Ht.create,wZ=Ht.strictCreate,bZ=cp.create,xZ=qy.create,SZ=dp.create,_Z=ro.create,kZ=hp.create,CZ=T0.create,EZ=Du.create,AZ=Jc.create,PZ=fp.create,TZ=pp.create,NZ=fl.create,RZ=mp.create,MZ=Nd.create,MN=bs.create,OZ=Qs.create,IZ=pl.create,DZ=bs.createWithPreprocess,LZ=nm.create,jZ=()=>x3().optional(),FZ=()=>S3().optional(),$Z=()=>_3().optional(),BZ={string:t=>ls.create({...t,coerce:!0}),number:t=>dl.create({...t,coerce:!0}),boolean:t=>ap.create({...t,coerce:!0}),bigint:t=>hl.create({...t,coerce:!0}),date:t=>Iu.create({...t,coerce:!0})},zZ=Ue;var nn=Object.freeze({__proto__:null,defaultErrorMap:Pd,setErrorMap:zY,getErrorMap:k0,makeIssue:C0,EMPTY_PATH:UY,addIssueToContext:be,ParseStatus:ii,INVALID:Ue,DIRTY:Nc,OK:bi,isAborted:s_,isDirty:o_,isValid:sp,isAsync:op,get util(){return ut},get objectUtil(){return r_},ZodParsedType:Ce,getParsedType:_a,ZodType:Qe,datetimeRegex:y3,ZodString:ls,ZodNumber:dl,ZodBigInt:hl,ZodBoolean:ap,ZodDate:Iu,ZodSymbol:A0,ZodUndefined:lp,ZodNull:up,ZodAny:Td,ZodUnknown:yu,ZodNever:Go,ZodVoid:P0,ZodArray:ps,ZodObject:Ht,ZodUnion:cp,ZodDiscriminatedUnion:qy,ZodIntersection:dp,ZodTuple:ro,ZodRecord:hp,ZodMap:T0,ZodSet:Du,ZodFunction:Jc,ZodLazy:fp,ZodLiteral:pp,ZodEnum:fl,ZodNativeEnum:mp,ZodPromise:Nd,ZodEffects:bs,ZodTransformer:bs,ZodOptional:Qs,ZodNullable:pl,ZodDefault:gp,ZodCatch:vp,ZodNaN:N0,BRAND:rZ,ZodBranded:hE,ZodPipeline:nm,ZodReadonly:yp,custom:b3,Schema:Qe,ZodSchema:Qe,late:sZ,get ZodFirstPartyTypeKind(){return ze},coerce:BZ,any:fZ,array:vZ,bigint:lZ,boolean:_3,date:uZ,discriminatedUnion:xZ,effect:MN,enum:NZ,function:AZ,instanceof:oZ,intersection:SZ,lazy:PZ,literal:TZ,map:CZ,nan:aZ,nativeEnum:RZ,never:mZ,null:hZ,nullable:IZ,number:S3,object:yZ,oboolean:$Z,onumber:FZ,optional:OZ,ostring:jZ,pipeline:LZ,preprocess:DZ,promise:MZ,record:kZ,set:EZ,strictObject:wZ,string:x3,symbol:cZ,transformer:MN,tuple:_Z,undefined:dZ,union:bZ,unknown:pZ,void:gZ,NEVER:zZ,ZodIssueCode:ae,quotelessJson:BY,ZodError:ur});const UZ=["randomize","clean","unchanged"],HZ=["switches-and-leds","printer","null"],VZ=["printer","null"],l_=nn.object({showInstructionCycle:nn.boolean().catch(!1),showStatsCPU:nn.boolean().catch(!1),language:nn.enum(f3).catch(WZ),editorFontSize:nn.number().int().min(8).max(64).catch(14),dataOnLoad:nn.enum(UZ).catch("clean"),devices:nn.object({keyboardAndScreen:nn.boolean(),pic:nn.boolean(),pio:nn.enum(["switches-and-leds","printer"]).nullable(),handshake:nn.enum(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:nn.boolean().catch(!0),executionUnit:nn.number().min(1).max(500).catch(150),clockSpeed:nn.number().min(100).max(3e3).catch(1e3),printerSpeed:nn.number().min(500).max(2e4).catch(5e3),flagsVisibility:nn.enum(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:nn.number().min(0).catch(1),filterContrast:nn.number().min(0).catch(1),filterInvert:nn.boolean().catch(!1),filterSaturation:nn.number().min(0).catch(1)}),uc=l_.parse({});function WZ(){const t=navigator.language.toLowerCase();for(const e of f3)if(t.startsWith(e))return e;return"en"}const Wr=zF("vonsim-settings",uc,{getItem(t,e){try{const n=localStorage.getItem(t);return l_.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=l_.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),mi=()=>z.get(Wr),im=()=>Vp(Wr);me(t=>t(Wr).showInstructionCycle);me(t=>t(Wr).showStatsCPU);const GZ=me(t=>t(Wr).language),fE=()=>tt(GZ);me(t=>t(Wr).flagsVisibility);const KZ=me(t=>t(Wr).editorFontSize),XZ=()=>tt(KZ);me(t=>t(Wr).dataOnLoad);const qZ=me(t=>t(Wr).devices),k3=()=>tt(qZ);me(t=>{const e=t(Wr);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const YZ=me(t=>{const e=t(Wr);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),ZZ=()=>tt(YZ);function wp(t){const e=t.charCodeAt(0);return j.fitsUnsigned(e,8)?e:null}function pE(t){return j.fitsUnsigned(t,8)?String.fromCharCode(t):null}function C3(t){return JZ.at(t)??null}const JZ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","","","","","","","","","","","","","SHY","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var $t,Ut;const lt=class lt{constructor(e,n){Le(this,$t);Le(this,Ut);Q(this,$t,e|0),Q(this,Ut,n)}get size(){return A(this,Ut)}is8bits(){return A(this,Ut)===8}is16bits(){return A(this,Ut)===16}get unsigned(){return A(this,$t)}get signed(){return A(this,$t)<=lt.maxSignedValue(A(this,Ut))?A(this,$t):A(this,$t)-(lt.maxValue(A(this,Ut))+1)}get low(){return this.is8bits()?this:lt.fromUnsigned(A(this,$t)&lt.maxValue(8),8)}get high(){return this.is8bits()?new lt(0,8):lt.fromUnsigned(A(this,$t)>>8&lt.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return lt.fromUnsigned(A(this,$t)&~lt.maxValue(8)|e.unsigned,A(this,Ut))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return lt.fromUnsigned(A(this,$t)&lt.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Ut))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Ut)}`);return(A(this,$t)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Ut))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Ut)}`);return n?lt.fromUnsigned(A(this,$t)|1<<e,A(this,Ut)):lt.fromUnsigned(A(this,$t)&~(1<<e),A(this,Ut))}add(e){return e=Number(e),lt.fromUnsigned(A(this,$t)+e,A(this,Ut))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,$t)===A(e,$t)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Ut));for(let n=0;n<A(this,Ut);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,$t).toString(16).padStart(A(this,Ut)/4,"0").toUpperCase();case"bin":return A(this,$t).toString(2).padStart(A(this,Ut),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Ut)===8?pE(A(this,$t))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,Ut)===8?C3(A(this,$t))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,$t)}valueOf(){return A(this,$t)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=lt.minSignedValue(n)&&e<=lt.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=lt.minValue()&&e<=lt.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=lt.minSignedValue(n)&&e<=lt.maxSignedValue(n)}static fromUnsigned(e,n){if(!lt.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new lt(e,n)}static fromSigned(e,n){if(!lt.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new lt(e+lt.maxValue(n)+1,n):new lt(e,n)}static fromNumber(e,n){return e<0?lt.fromSigned(e,n):lt.fromUnsigned(e,n)}static fromChar(e){const n=wp(e)??-1;return lt.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*lt.maxValue(e));return new lt(n,e)}static zero(e){return new lt(0,e)}};$t=new WeakMap,Ut=new WeakMap;let j=lt;var yo;const va=class va{constructor(e){Le(this,yo);Q(this,yo,e)}get value(){return A(this,yo).unsigned}get byte(){return A(this,yo)}toString(e=!1){let n=A(this,yo).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,yo).toJSON()}valueOf(){return A(this,yo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=va.MIN_ADDRESS&&e<=va.MAX_ADDRESS}static from(e){if(e=Number(e),!va.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=j.fromUnsigned(e,16);return new va(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};yo=new WeakMap,fe(va,"MIN_ADDRESS",0),fe(va,"MAX_ADDRESS",255);let _e=va;var wo;const ya=class ya{constructor(e){Le(this,wo);Q(this,wo,e)}get value(){return A(this,wo).unsigned}get byte(){return A(this,wo)}toString(e=!0){let n=A(this,wo).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,wo).toJSON()}valueOf(){return A(this,wo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=ya.MIN_ADDRESS&&e<=ya.MAX_ADDRESS}static from(e){if(e=Number(e),!ya.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=j.fromUnsigned(e,8);return new ya(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};wo=new WeakMap,fe(ya,"MIN_ADDRESS",0),fe(ya,"MAX_ADDRESS",127);let dr=ya;function ON(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function IN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ON(Object(n),!0).forEach(function(i){QZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ON(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function QZ(t,e,n){return e=eJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eJ(t){var e=tJ(t,"string");return typeof e=="symbol"?e:String(e)}function tJ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const R0=E3({});function E3(t){return e.withOptions=n=>E3(IN(IN({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n)}=t;let o="";for(let u=0;u<r.length;u++){let c=r[u];s&&(c=c.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),o+=c,u<i.length&&(o+=i[u])}const a=o.split(`
`);let l=null;for(const u of a){const c=u.match(/^(\s+)\S+/);if(c){const d=c[1].length;l?l=Math.min(l,d):l=d}}if(l!==null){const u=l;o=a.map(c=>c[0]===" "||c[0]==="	"?c.slice(u):c).join(`
`)}return o=o.trim(),s&&(o=o.replace(/\\n/g,`
`)),o}}const nJ=_e.from(_e.MAX_ADDRESS).toString(),iJ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${dr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:R0`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instruccin",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${_e.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${nJ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>R0`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"3140ff9"}](https://github.com/vonsim/vonsim/commit/${"3140ff9"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},rJ=_e.from(_e.MAX_ADDRESS).toString(),sJ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${dr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"Hay una nueva versin disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la FileSystem API","no-file":"No hay ningn archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:R0`
      ; Bienvenido a VonSim 8!
      ; Este es un ejemplo de cdigo que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instruccin",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadsticas CPU","instruction-cycle":"Ciclo de instruccin",status:{fetching:"Captacin instruccin...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupcin...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${_e.format(t)}`,"fix-address":"Fijar direccin","unfix-address":"Desfijar direccin","address-must-be-integer":"El valor de inicio debe ser un nmero entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${rJ}.`,"address-increment":"Incrementar direccin (Page Up)","address-decrement":"Decrementar direccin (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuracin",instructionCycle:{label:"Ciclo de Instruccin"},statsCPU:{label:"Estadsticas CPU"},flags:{label:"Banderas",description:"Selecciona qu banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamao de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qu hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qu dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"Tambin agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitacin de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulacin",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresin"},filters:{label:"Filtros",description:"Filtros aplicados a la pgina. til cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturacin"},reset:"Restablecer configuracin"},footer:{documentation:"Documentacin",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>R0`
        <!-- Por favor, describa el problema que est teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Informacin extra (POR FAVOR, NO BORRAR)</summary>

          **Versin**: [${"3140ff9"}](https://github.com/ruiz-jose/VonSim8/commit/${"3140ff9"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuracin

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},Yy=dE({en:iJ,es:sJ});function wt(){const t=fE();return S.useCallback((e,...n)=>Yy(t,e,...n),[t])}const oJ=1,DN=5e3,Ns=new Map,hf=[];function aJ(){let t=0;for(const e of Ns.keys())e>t&&(t=e);return t+1}function lJ(){let t=1/0;for(const e of Ns.keys())e<t&&(t=e);return t}function Da(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??DN,s=Number.isFinite(r)?setTimeout(()=>Da({type:"DISMISS_TOAST",toastId:n}),r):null;Ns.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Da({type:"DISMISS_TOAST",toastId:n})}}}),Ns.size>oJ&&Da({type:"DISMISS_TOAST",toastId:lJ()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=Ns.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??DN,o=Number.isFinite(s)?setTimeout(()=>Da({type:"DISMISS_TOAST",toastId:n}),s):null;Ns.set(n,{...r,...i,timeout:o})}else Ns.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=Ns.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),Ns.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&hf.length>0){const n=Array.from(Ns.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of hf)i(n)}}function Ri(t){const e=aJ(),n=r=>Da({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>Da({type:"DISMISS_TOAST",toastId:e});return Da({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function uJ(){const[t,e]=S.useState([]);return S.useEffect(()=>(hf.push(e),()=>{const n=hf.indexOf(e);n>-1&&hf.splice(n,1)}),[]),{toastList:t,toast:Ri,dismiss:n=>Da({type:"DISMISS_TOAST",toastId:n})}}const M0=me(!1),Zy=zF("vonsim-program",Yy(mi().language,"editor.example"),void 0,{getOnInit:!0}),cJ=()=>tt(Zy),dJ=()=>z.get(Zy),hJ=Gn.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(z.set(Zy,this.view.state.doc.toString()),z.set(M0,!0))}}),mh="showSaveFilePicker"in window,fJ=me(null),A3=me(""),pJ=me(t=>t(A3)!==t(Zy));function mJ(){const t=wt(),[e,n]=Vp(fJ),i=tt(pJ),r=YL(A3),s=e&&i,o=S.useCallback(async()=>{if(!mh){Ri({title:t("editor.files.unsupported"),variant:"error"});return}if(!(s&&!confirm(t("editor.files.unsaved"))))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});await d.requestPermission({mode:"readwrite"})==="granted"&&n(d);const p=await(await d.getFile()).text();r(p),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:p}})}catch(d){console.error(d),Ri({title:t("editor.files.open-error"),variant:"error"})}},[t,s,n,r]);No(d=>d.ctrlKey&&d.key==="o",d=>{d.preventDefault(),o()},void 0,[o]);const a=S.useCallback(async d=>{var f,p;if(d.stopPropagation(),d.preventDefault(),!mh){Ri({title:t("editor.files.unsupported"),variant:"error"});return}const h=(p=(f=d.dataTransfer)==null?void 0:f.items)==null?void 0:p[0];if(!(!h||h.kind!=="file")&&!(s&&!confirm(t("editor.files.unsaved"))))try{const g=await h.getAsFileSystemHandle();if(!g)throw new Error("File handle not found");await g.requestPermission({mode:"readwrite"})==="granted"&&n(g);const y=await(await g.getFile()).text();r(y),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:y}})}catch(g){console.error(g),Ri({title:t("editor.files.open-error"),variant:"error"})}},[n,r,t,s]);nv("drop",a,window),nv("dragover",d=>{d.preventDefault(),d.stopPropagation()},window);const l=S.useCallback(async()=>{if(!mh){Ri({title:t("editor.files.unsupported"),variant:"error"});return}if(s)try{const d=window.codemirror.state.doc.toString(),h=await e.createWritable({keepExistingData:!1});await h.write(d),await h.close(),r(d)}catch(d){console.error(d),Ri({title:t("editor.files.save-error"),variant:"error"})}},[t,s,e,r]),u=S.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),h=(e==null?void 0:e.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(mh)try{const f=await window.showSaveFilePicker({suggestedName:h,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]}),p=await f.requestPermission({mode:"readwrite"});if(p!=="granted")throw new Error(`Permission denied: ${p}`);n(f);const g=await f.createWritable({keepExistingData:!1});await g.write(d),await g.close(),r(d)}catch(f){console.error(f),Ri({title:t("editor.files.save-error"),variant:"error"})}else{const f=new Blob([d],{type:"text/plain"}),p=URL.createObjectURL(f),g=document.createElement("a");g.style.display="none",g.href=p,g.download=h,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(p)}},[t,e,n,r]);No(d=>d.ctrlKey&&d.key==="s",d=>{d.preventDefault(),mh&&(e?l():u())},void 0,[e,l,u]),No(d=>d.ctrlKey&&d.shiftKey&&d.key==="S",d=>{d.preventDefault(),u()},void 0,[u]);const c=S.useCallback(d=>{s&&(d.preventDefault(),d.returnValue=t("editor.files.unsaved"))},[t,s]);return nv("beforeunload",c,window),m.jsxs(RY,{children:[m.jsx(MY,{asChild:!0,children:m.jsxs("button",{className:Me("flex items-center transition-colors hover:text-white",e&&"text-white"),children:[e?e.name:t("editor.files.no-file"),s&&m.jsx("span",{className:"ml-1 h-2 w-2 rounded-full bg-current"})]})}),m.jsxs(d3,{className:"w-64",align:"start",children:[m.jsxs(mv,{onClick:o,children:[m.jsx("span",{className:"icon-[lucide--file-search-2] mr-2 h-4 w-4"}),t("editor.files.open"),m.jsx("div",{className:"grow"}),m.jsx("kbd",{className:"text-stone-600",children:"Ctrl+O"})]}),m.jsxs(mv,{disabled:!s,onClick:l,children:[m.jsx("span",{className:"icon-[lucide--save] mr-2 h-4 w-4"}),t("editor.files.save"),m.jsx("div",{className:"grow"}),m.jsx("kbd",{className:"text-stone-600",children:"Ctrl+S"})]}),m.jsxs(mv,{onClick:u,children:[m.jsx("span",{className:"icon-[lucide--save-all] mr-2 h-4 w-4"}),t("editor.files.save-as"),m.jsx("div",{className:"grow"}),m.jsx("kbd",{className:"text-stone-600",children:"Ctrl+Shift+S"})]})]})]})}function gJ(){const t=wt(),e=vJ();return m.jsxs("footer",{className:"px-2 py-1 text-center text-xs tracking-wider text-stone-500",children:[m.jsx("a",{href:"/VonSim8/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),m.jsx("span",{className:"px-2",children:""}),m.jsx("a",{href:"https://github.com/ruiz-jose/VonSim8",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),m.jsx("span",{className:"px-2",children:""}),m.jsx("a",{href:e,className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.issue.report")}),m.jsx("span",{className:"px-2 max-sm:hidden",children:""}),m.jsx("br",{className:"sm:hidden"}),m.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:[" Copyright 2017-",new Date().getFullYear(),"  ",t("footer.copyright")]})]})}function vJ(){const t=wt(),[e]=im(),n=cJ();return"https://github.com/ruiz-jose/VonSim8/issues/new?body="+encodeURIComponent(t("footer.issue.body",e,n))}/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const yJ={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},wJ=yJ,bJ={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},xJ={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},SJ=xJ,_J={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},kJ={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function CJ(t,e,n){return(e=AJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function se(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LN(Object(n),!0).forEach(function(i){CJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function EJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AJ(t){var e=EJ(t,"string");return typeof e=="symbol"?e:e+""}const jN=()=>{};let mE={},P3={},T3=null,N3={mark:jN,measure:jN};try{typeof window<"u"&&(mE=window),typeof document<"u"&&(P3=document),typeof MutationObserver<"u"&&(T3=MutationObserver),typeof performance<"u"&&(N3=performance)}catch{}const{userAgent:FN=""}=mE.navigator||{},ml=mE,Ft=P3,$N=T3,dg=N3;ml.document;const Jo=!!Ft.documentElement&&!!Ft.head&&typeof Ft.addEventListener=="function"&&typeof Ft.createElement=="function",R3=~FN.indexOf("MSIE")||~FN.indexOf("Trident/");var PJ=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,TJ=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,M3={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},NJ={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},O3=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],ri="classic",Jy="duotone",RJ="sharp",MJ="sharp-duotone",I3=[ri,Jy,RJ,MJ],OJ={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},IJ={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},DJ=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),LJ={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},jJ=["fak","fa-kit","fakd","fa-kit-duotone"],BN={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},FJ=["kit"],$J={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},BJ=["fak","fakd"],zJ={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},zN={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},hg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},UJ=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],HJ=["fak","fa-kit","fakd","fa-kit-duotone"],VJ={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},WJ={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},GJ={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},u_={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},KJ=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],c_=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...UJ,...KJ],XJ=["solid","regular","light","thin","duotone","brands"],D3=[1,2,3,4,5,6,7,8,9,10],qJ=D3.concat([11,12,13,14,15,16,17,18,19,20]),YJ=[...Object.keys(GJ),...XJ,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",hg.GROUP,hg.SWAP_OPACITY,hg.PRIMARY,hg.SECONDARY].concat(D3.map(t=>"".concat(t,"x"))).concat(qJ.map(t=>"w-".concat(t))),ZJ={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Ko="___FONT_AWESOME___",d_=16,L3="fa",j3="svg-inline--fa",Lu="data-fa-i2svg",h_="data-fa-pseudo-element",JJ="data-fa-pseudo-element-pending",gE="data-prefix",vE="data-icon",UN="fontawesome-i2svg",QJ="async",eQ=["HTML","HEAD","STYLE","SCRIPT"],F3=(()=>{try{return!0}catch{return!1}})();function rm(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[ri]}})}const $3=se({},M3);$3[ri]=se(se(se(se({},{"fa-duotone":"duotone"}),M3[ri]),BN.kit),BN["kit-duotone"]);const tQ=rm($3),f_=se({},LJ);f_[ri]=se(se(se(se({},{duotone:"fad"}),f_[ri]),zN.kit),zN["kit-duotone"]);const HN=rm(f_),p_=se({},u_);p_[ri]=se(se({},p_[ri]),zJ.kit);const yE=rm(p_),m_=se({},WJ);m_[ri]=se(se({},m_[ri]),$J.kit);rm(m_);const nQ=PJ,B3="fa-layers-text",iQ=TJ,rQ=se({},OJ);rm(rQ);const sQ=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Gb=NJ,oQ=[...FJ,...YJ],ff=ml.FontAwesomeConfig||{};function aQ(t){var e=Ft.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function lQ(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Ft&&typeof Ft.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=lQ(aQ(n));r!=null&&(ff[i]=r)});const z3={styleDefault:"solid",familyDefault:ri,cssPrefix:L3,replacementClass:j3,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ff.familyPrefix&&(ff.cssPrefix=ff.familyPrefix);const Rd=se(se({},z3),ff);Rd.autoReplaceSvg||(Rd.observeMutations=!1);const Oe={};Object.keys(z3).forEach(t=>{Object.defineProperty(Oe,t,{enumerable:!0,set:function(e){Rd[t]=e,pf.forEach(n=>n(Oe))},get:function(){return Rd[t]}})});Object.defineProperty(Oe,"familyPrefix",{enumerable:!0,set:function(t){Rd.cssPrefix=t,pf.forEach(e=>e(Oe))},get:function(){return Rd.cssPrefix}});ml.FontAwesomeConfig=Oe;const pf=[];function uQ(t){return pf.push(t),()=>{pf.splice(pf.indexOf(t),1)}}const sa=d_,Ws={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function cQ(t){if(!t||!Jo)return;const e=Ft.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Ft.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Ft.head.insertBefore(e,i),t}const dQ="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function bp(){let t=12,e="";for(;t-- >0;)e+=dQ[Math.random()*62|0];return e}function Gd(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function wE(t){return t.classList?Gd(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function U3(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function hQ(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(U3(t[n]),'" '),"").trim()}function Qy(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function bE(t){return t.size!==Ws.size||t.x!==Ws.x||t.y!==Ws.y||t.rotate!==Ws.rotate||t.flipX||t.flipY}function fQ(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},u={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:u}}function pQ(t){let{transform:e,width:n=d_,height:i=d_,startCentered:r=!1}=t,s="";return r&&R3?s+="translate(".concat(e.x/sa-n/2,"em, ").concat(e.y/sa-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/sa,"em), calc(-50% + ").concat(e.y/sa,"em)) "):s+="translate(".concat(e.x/sa,"em, ").concat(e.y/sa,"em) "),s+="scale(".concat(e.size/sa*(e.flipX?-1:1),", ").concat(e.size/sa*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var mQ=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function H3(){const t=L3,e=j3,n=Oe.cssPrefix,i=Oe.replacementClass;let r=mQ;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let VN=!1;function Kb(){Oe.autoAddCss&&!VN&&(cQ(H3()),VN=!0)}var gQ={mixout(){return{dom:{css:H3,insertCss:Kb}}},hooks(){return{beforeDOMElementCreation(){Kb()},beforeI2svg(){Kb()}}}};const Xo=ml||{};Xo[Ko]||(Xo[Ko]={});Xo[Ko].styles||(Xo[Ko].styles={});Xo[Ko].hooks||(Xo[Ko].hooks={});Xo[Ko].shims||(Xo[Ko].shims=[]);var Gs=Xo[Ko];const V3=[],W3=function(){Ft.removeEventListener("DOMContentLoaded",W3),O0=1,V3.map(t=>t())};let O0=!1;Jo&&(O0=(Ft.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ft.readyState),O0||Ft.addEventListener("DOMContentLoaded",W3));function vQ(t){Jo&&(O0?setTimeout(t,0):V3.push(t))}function sm(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?U3(t):"<".concat(e," ").concat(hQ(n),">").concat(i.map(sm).join(""),"</").concat(e,">")}function WN(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var Xb=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,u,c;for(i===void 0?(l=1,c=e[s[0]]):(l=0,c=i);l<o;l++)u=s[l],c=a(c,e[u],u,e);return c};function yQ(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function g_(t){const e=yQ(t);return e.length===1?e[0].toString(16):null}function wQ(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function GN(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function v_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=GN(e);typeof Gs.hooks.addPack=="function"&&!i?Gs.hooks.addPack(t,GN(e)):Gs.styles[t]=se(se({},Gs.styles[t]||{}),r),t==="fas"&&v_("fa",e)}const{styles:xp,shims:bQ}=Gs,G3=Object.keys(yE),xQ=G3.reduce((t,e)=>(t[e]=Object.keys(yE[e]),t),{});let xE=null,K3={},X3={},q3={},Y3={},Z3={};function SQ(t){return~oQ.indexOf(t)}function _Q(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!SQ(r)?r:null}const J3=()=>{const t=i=>Xb(xp,(r,s,o)=>(r[o]=Xb(s,i,{}),r),{});K3=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),X3=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),Z3=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in xp||Oe.autoFetchSvg,n=Xb(bQ,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});q3=n.names,Y3=n.unicodes,xE=ew(Oe.styleDefault,{family:Oe.familyDefault})};uQ(t=>{xE=ew(t.styleDefault,{family:Oe.familyDefault})});J3();function SE(t,e){return(K3[t]||{})[e]}function kQ(t,e){return(X3[t]||{})[e]}function fu(t,e){return(Z3[t]||{})[e]}function Q3(t){return q3[t]||{prefix:null,iconName:null}}function CQ(t){const e=Y3[t],n=SE("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function gl(){return xE}const e4=()=>({prefix:null,iconName:null,rest:[]});function EQ(t){let e=ri;const n=G3.reduce((i,r)=>(i[r]="".concat(Oe.cssPrefix,"-").concat(r),i),{});return I3.forEach(i=>{(t.includes(n[i])||t.some(r=>xQ[i].includes(r)))&&(e=i)}),e}function ew(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=ri}=e,i=tQ[n][t];if(n===Jy&&!t)return"fad";const r=HN[n][t]||HN[n][i],s=t in Gs.styles?t:null;return r||s||null}function AQ(t){let e=[],n=null;return t.forEach(i=>{const r=_Q(Oe.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function KN(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function tw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=c_.concat(HJ),s=KN(t.filter(d=>r.includes(d))),o=KN(t.filter(d=>!c_.includes(d))),a=s.filter(d=>(i=d,!O3.includes(d))),[l=null]=a,u=EQ(s),c=se(se({},AQ(o)),{},{prefix:ew(l,{family:u})});return se(se(se({},c),RQ({values:t,family:u,styles:xp,config:Oe,canonical:c,givenPrefix:i})),PQ(n,i,c))}function PQ(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?Q3(r):{},o=fu(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!xp.far&&xp.fas&&!Oe.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const TQ=I3.filter(t=>t!==ri||t!==Jy),NQ=Object.keys(u_).filter(t=>t!==ri).map(t=>Object.keys(u_[t])).flat();function RQ(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===Jy,l=e.includes("fa-duotone")||e.includes("fad"),u=o.familyDefault==="duotone",c=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||u||c)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&TQ.includes(n)&&(Object.keys(s).find(h=>NQ.includes(h))||o.autoFetchSvg)){const h=DJ.get(n).defaultShortPrefixId;i.prefix=h,i.iconName=fu(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=gl()||"fas"),i}class MQ{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=se(se({},this.definitions[s]||{}),r[s]),v_(s,r[s]);const o=yE[ri][s];o&&v_(o,r[s]),J3()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(u=>{typeof u=="string"&&(e[s][u]=a)}),e[s][o]=a}),e}}let XN=[],Rc={};const Qc={},OQ=Object.keys(Qc);function IQ(t,e){let{mixoutsTo:n}=e;return XN=t,Rc={},Object.keys(Qc).forEach(i=>{OQ.indexOf(i)===-1&&delete Qc[i]}),XN.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{Rc[o]||(Rc[o]=[]),Rc[o].push(s[o])})}i.provides&&i.provides(Qc)}),n}function y_(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Rc[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function ju(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Rc[t]||[]).forEach(s=>{s.apply(null,n)})}function vl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Qc[t]?Qc[t].apply(null,e):void 0}function w_(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||gl();if(e)return e=fu(n,e)||e,WN(t4.definitions,n,e)||WN(Gs.styles,n,e)}const t4=new MQ,DQ=()=>{Oe.autoReplaceSvg=!1,Oe.observeMutations=!1,ju("noAuto")},LQ={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Jo?(ju("beforeI2svg",t),vl("pseudoElements2svg",t),vl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Oe.autoReplaceSvg===!1&&(Oe.autoReplaceSvg=!0),Oe.observeMutations=!0,vQ(()=>{FQ({autoReplaceSvgRoot:e}),ju("watch",t)})}},jQ={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:fu(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=ew(t[0]);return{prefix:n,iconName:fu(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Oe.cssPrefix,"-"))>-1||t.match(nQ))){const e=tw(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||gl(),iconName:fu(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=gl();return{prefix:e,iconName:fu(e,t)||t}}}},pr={noAuto:DQ,config:Oe,dom:LQ,parse:jQ,library:t4,findIconDefinition:w_,toHtml:sm},FQ=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Ft}=t;(Object.keys(Gs.styles).length>0||Oe.autoFetchSvg)&&Jo&&Oe.autoReplaceSvg&&pr.dom.i2svg({node:e})};function nw(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>sm(n))}}),Object.defineProperty(t,"node",{get:function(){if(!Jo)return;const n=Ft.createElement("div");return n.innerHTML=t.html,n.children}}),t}function $Q(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(bE(o)&&n.found&&!i.found){const{width:a,height:l}=n,u={x:a/l/2,y:.5};r.style=Qy(se(se({},s),{},{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function BQ(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Oe.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:se(se({},r),{},{id:o}),children:i}]}]}function _E(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:u,extra:c,watchable:d=!1}=t,{width:h,height:f}=n.found?n:e,p=BJ.includes(i),g=[Oe.replacementClass,r?"".concat(Oe.cssPrefix,"-").concat(r):""].filter(k=>c.classes.indexOf(k)===-1).filter(k=>k!==""||!!k).concat(c.classes).join(" ");let b={children:[],attributes:se(se({},c.attributes),{},{"data-prefix":i,"data-icon":r,class:g,role:c.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(f)})};const v=p&&!~c.classes.indexOf("fa-fw")?{width:"".concat(h/f*16*.0625,"em")}:{};d&&(b.attributes[Lu]=""),a&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(u||bp())},children:[a]}),delete b.attributes.title);const y=se(se({},b),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:se(se({},v),c.styles)}),{children:w,attributes:x}=n.found&&e.found?vl("generateAbstractMask",y)||{children:[],attributes:{}}:vl("generateAbstractIcon",y)||{children:[],attributes:{}};return y.children=w,y.attributes=x,o?BQ(y):$Q(y)}function qN(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=se(se(se({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Lu]="");const u=se({},o.styles);bE(r)&&(u.transform=pQ({transform:r,startCentered:!0,width:n,height:i}),u["-webkit-transform"]=u.transform);const c=Qy(u);c.length>0&&(l.style=c);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function zQ(t){const{content:e,title:n,extra:i}=t,r=se(se(se({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=Qy(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:qb}=Gs;function b_(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Gb.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Gb.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Gb.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const UQ={found:!1,width:512,height:512};function HQ(t,e){!F3&&!Oe.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function x_(t,e){let n=e;return e==="fa"&&Oe.styleDefault!==null&&(e=gl()),new Promise((i,r)=>{if(n==="fa"){const s=Q3(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&qb[e]&&qb[e][t]){const s=qb[e][t];return i(b_(s))}HQ(t,e),i(se(se({},UQ),{},{icon:Oe.showMissingIcons&&t?vl("missingIconAbstract")||{}:{}}))})}const YN=()=>{},S_=Oe.measurePerformance&&dg&&dg.mark&&dg.measure?dg:{mark:YN,measure:YN},Vh='FA "6.7.1"',VQ=t=>(S_.mark("".concat(Vh," ").concat(t," begins")),()=>n4(t)),n4=t=>{S_.mark("".concat(Vh," ").concat(t," ends")),S_.measure("".concat(Vh," ").concat(t),"".concat(Vh," ").concat(t," begins"),"".concat(Vh," ").concat(t," ends"))};var kE={begin:VQ,end:n4};const gv=()=>{};function ZN(t){return typeof(t.getAttribute?t.getAttribute(Lu):null)=="string"}function WQ(t){const e=t.getAttribute?t.getAttribute(gE):null,n=t.getAttribute?t.getAttribute(vE):null;return e&&n}function GQ(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Oe.replacementClass)}function KQ(){return Oe.autoReplaceSvg===!0?vv.replace:vv[Oe.autoReplaceSvg]||vv.replace}function XQ(t){return Ft.createElementNS("http://www.w3.org/2000/svg",t)}function qQ(t){return Ft.createElement(t)}function i4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?XQ:qQ}=e;if(typeof t=="string")return Ft.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(i4(s,{ceFn:n}))}),i}function YQ(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const vv={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(i4(n),e)}),e.getAttribute(Lu)===null&&Oe.keepOriginalSource){let n=Ft.createComment(YQ(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~wE(e).indexOf(Oe.replacementClass))return vv.replace(t);const i=new RegExp("".concat(Oe.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Oe.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>sm(s)).join(`
`);e.setAttribute(Lu,""),e.innerHTML=r}};function JN(t){t()}function r4(t,e){const n=typeof e=="function"?e:gv;if(t.length===0)n();else{let i=JN;Oe.mutateApproach===QJ&&(i=ml.requestAnimationFrame||JN),i(()=>{const r=KQ(),s=kE.begin("mutate");t.map(r),s(),n()})}}let CE=!1;function s4(){CE=!0}function __(){CE=!1}let I0=null;function QN(t){if(!$N||!Oe.observeMutations)return;const{treeCallback:e=gv,nodeCallback:n=gv,pseudoElementsCallback:i=gv,observeMutationsRoot:r=Ft}=t;I0=new $N(s=>{if(CE)return;const o=gl();Gd(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!ZN(a.addedNodes[0])&&(Oe.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Oe.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&ZN(a.target)&&~sQ.indexOf(a.attributeName))if(a.attributeName==="class"&&WQ(a.target)){const{prefix:l,iconName:u}=tw(wE(a.target));a.target.setAttribute(gE,l||o),u&&a.target.setAttribute(vE,u)}else GQ(a.target)&&n(a.target)})}),Jo&&I0.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function ZQ(){I0&&I0.disconnect()}function JQ(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function QQ(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=tw(wE(t));return r.prefix||(r.prefix=gl()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=kQ(r.prefix,t.innerText)||SE(r.prefix,g_(t.innerText))),!r.iconName&&Oe.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function eee(t){const e=Gd(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Oe.autoA11y&&(n?e["aria-labelledby"]="".concat(Oe.replacementClass,"-title-").concat(i||bp()):(e["aria-hidden"]="true",e.focusable="false")),e}function tee(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ws,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function eR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=QQ(t),s=eee(t),o=y_("parseNodeAttributes",{},t);let a=e.styleParser?JQ(t):[];return se({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:Ws,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:nee}=Gs;function o4(t){const e=Oe.autoReplaceSvg==="nest"?eR(t,{styleParser:!1}):eR(t);return~e.extra.classes.indexOf(B3)?vl("generateLayersText",t,e):vl("generateSvgReplacementMutation",t,e)}function iee(){return[...jJ,...c_]}function tR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Jo)return Promise.resolve();const n=Ft.documentElement.classList,i=c=>n.add("".concat(UN,"-").concat(c)),r=c=>n.remove("".concat(UN,"-").concat(c)),s=Oe.autoFetchSvg?iee():O3.concat(Object.keys(nee));s.includes("fa")||s.push("fa");const o=[".".concat(B3,":not([").concat(Lu,"])")].concat(s.map(c=>".".concat(c,":not([").concat(Lu,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=Gd(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=kE.begin("onTree"),u=a.reduce((c,d)=>{try{const h=o4(d);h&&c.push(h)}catch(h){F3||h.name==="MissingIcon"&&console.error(h)}return c},[]);return new Promise((c,d)=>{Promise.all(u).then(h=>{r4(h,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),c()})}).catch(h=>{l(),d(h)})})}function ree(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;o4(t).then(n=>{n&&r4([n],e)})}function see(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:w_(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:w_(r||{})),t(i,se(se({},n),{},{mask:r}))}}const oee=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Ws,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:u={},styles:c={}}=e;if(!t)return;const{prefix:d,iconName:h,icon:f}=t;return nw(se({type:"icon"},t),()=>(ju("beforeDOMElementCreation",{iconDefinition:t,params:e}),Oe.autoA11y&&(o?u["aria-labelledby"]="".concat(Oe.replacementClass,"-title-").concat(a||bp()):(u["aria-hidden"]="true",u.focusable="false")),_E({icons:{main:b_(f),mask:r?b_(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:h,transform:se(se({},Ws),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:u,styles:c,classes:l}})))};var aee={mixout(){return{icon:see(oee)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=tR,t.nodeCallback=ree,t}}},provides(t){t.i2svg=function(e){const{node:n=Ft,callback:i=()=>{}}=e;return tR(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:u,maskId:c,extra:d}=n;return new Promise((h,f)=>{Promise.all([x_(i,o),u.iconName?x_(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(p=>{let[g,b]=p;h([e,_E({icons:{main:g,mask:b},prefix:o,iconName:i,transform:a,symbol:l,maskId:c,title:r,titleId:s,extra:d,watchable:!0})])}).catch(f)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=Qy(o);a.length>0&&(i.style=a);let l;return bE(s)&&(l=vl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},lee={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return nw({type:"layer"},()=>{ju("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(Oe.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},uee={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return nw({type:"counter",content:t},()=>(ju("beforeDOMElementCreation",{content:t,params:e}),zQ({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(Oe.cssPrefix,"-layers-counter"),...i]}})))}}}},cee={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Ws,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return nw({type:"text",content:t},()=>(ju("beforeDOMElementCreation",{content:t,params:e}),qN({content:t,transform:se(se({},Ws),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(Oe.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(R3){const l=parseInt(getComputedStyle(e).fontSize,10),u=e.getBoundingClientRect();o=u.width/l,a=u.height/l}return Oe.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,qN({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const dee=new RegExp('"',"ug"),nR=[1105920,1112319],iR=se(se(se(se({},{FontAwesome:{normal:"fas",400:"fas"}}),IJ),ZJ),VJ),k_=Object.keys(iR).reduce((t,e)=>(t[e.toLowerCase()]=iR[e],t),{}),hee=Object.keys(k_).reduce((t,e)=>{const n=k_[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function fee(t){const e=t.replace(dee,""),n=wQ(e,0),i=n>=nR[0]&&n<=nR[1],r=e.length===2?e[0]===e[1]:!1;return{value:g_(r?e[0]:e),isSecondary:i||r}}function pee(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(k_[n]||{})[r]||hee[n]}function rR(t,e){const n="".concat(JJ).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=Gd(t.children).filter(h=>h.getAttribute(h_)===e)[0],a=ml.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),u=l.match(iQ),c=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!u)return t.removeChild(o),i();if(u&&d!=="none"&&d!==""){const h=a.getPropertyValue("content");let f=pee(l,c);const{value:p,isSecondary:g}=fee(h),b=u[0].startsWith("FontAwesome");let v=SE(f,p),y=v;if(b){const w=CQ(p);w.iconName&&w.prefix&&(v=w.iconName,f=w.prefix)}if(v&&!g&&(!o||o.getAttribute(gE)!==f||o.getAttribute(vE)!==y)){t.setAttribute(n,y),o&&t.removeChild(o);const w=tee(),{extra:x}=w;x.attributes[h_]=e,x_(v,f).then(k=>{const E=_E(se(se({},w),{},{icons:{main:k,mask:e4()},prefix:f,iconName:y,extra:x,watchable:!0})),C=Ft.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=E.map(P=>sm(P)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function mee(t){return Promise.all([rR(t,"::before"),rR(t,"::after")])}function gee(t){return t.parentNode!==document.head&&!~eQ.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(h_)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function sR(t){if(Jo)return new Promise((e,n)=>{const i=Gd(t.querySelectorAll("*")).filter(gee).map(mee),r=kE.begin("searchPseudoElements");s4(),Promise.all(i).then(()=>{r(),__(),e()}).catch(()=>{r(),__(),n()})})}var vee={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=sR,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Ft}=e;Oe.searchPseudoElements&&sR(n)}}};let oR=!1;var yee={mixout(){return{dom:{unwatch(){s4(),oR=!0}}}},hooks(){return{bootstrap(){QN(y_("mutationObserverCallbacks",{}))},noAuto(){ZQ()},watch(t){const{observeMutationsRoot:e}=t;oR?__():QN(y_("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const aR=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var wee={mixout(){return{parse:{transform:t=>aR(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=aR(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),c={transform:"".concat(a," ").concat(l," ").concat(u)},d={transform:"translate(".concat(s/2*-1," -256)")},h={outer:o,inner:c,path:d};return{tag:"g",attributes:se({},h.outer),children:[{tag:"g",attributes:se({},h.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:se(se({},n.icon.attributes),h.path)}]}]}}}};const Yb={x:0,y:0,width:"100%",height:"100%"};function lR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function bee(t){return t.tag==="g"?t.children:[t]}var xee={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?tw(n.split(" ").map(r=>r.trim())):e4();return i.prefix||(i.prefix=gl()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:u}=r,{width:c,icon:d}=s,h=fQ({transform:a,containerWidth:c,iconWidth:l}),f={tag:"rect",attributes:se(se({},Yb),{},{fill:"white"})},p=u.children?{children:u.children.map(lR)}:{},g={tag:"g",attributes:se({},h.inner),children:[lR(se({tag:u.tag,attributes:se(se({},u.attributes),h.path)},p))]},b={tag:"g",attributes:se({},h.outer),children:[g]},v="mask-".concat(o||bp()),y="clip-".concat(o||bp()),w={tag:"mask",attributes:se(se({},Yb),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,b]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:bee(d)},w]};return n.push(x,{tag:"rect",attributes:se({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},Yb)}),{children:n,attributes:i}}}},See={provides(t){let e=!1;ml.matchMedia&&(e=ml.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:se(se({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=se(se({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:se(se({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:se(se({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:se(se({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:se(se({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:se(se({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:se(se({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:se(se({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},_ee={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},kee=[gQ,aee,lee,uee,cee,vee,yee,wee,xee,See,_ee];IQ(kee,{mixoutsTo:pr});pr.noAuto;pr.config;pr.library;pr.dom;const C_=pr.parse;pr.findIconDefinition;pr.toHtml;const Cee=pr.icon;pr.layer;pr.text;pr.counter;var a4={exports:{}},Eee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Aee=Eee,Pee=Aee;function l4(){}function u4(){}u4.resetWarningCache=l4;var Tee=function(){function t(i,r,s,o,a,l){if(l!==Pee){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:u4,resetWarningCache:l4};return n.PropTypes=n,n};a4.exports=Tee();var Nee=a4.exports;const nt=Hu(Nee);function uR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uR(Object(n),!0).forEach(function(i){Mc(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function D0(t){"@babel/helpers - typeof";return D0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D0(t)}function Mc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ree(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Mee(t,e){if(t==null)return{};var n=Ree(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function E_(t){return Oee(t)||Iee(t)||Dee(t)||Lee()}function Oee(t){if(Array.isArray(t))return A_(t)}function Iee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Dee(t,e){if(t){if(typeof t=="string")return A_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A_(t,e)}}function A_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Lee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jee(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,u=t.spinPulse,c=t.spinReverse,d=t.pulse,h=t.fixedWidth,f=t.inverse,p=t.border,g=t.listItem,b=t.flip,v=t.size,y=t.rotation,w=t.pull,x=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":c,"fa-spin-pulse":u,"fa-pulse":d,"fa-fw":h,"fa-inverse":f,"fa-border":p,"fa-li":g,"fa-flip":b===!0,"fa-flip-horizontal":b==="horizontal"||b==="both","fa-flip-vertical":b==="vertical"||b==="both"},Mc(e,"fa-".concat(v),typeof v<"u"&&v!==null),Mc(e,"fa-rotate-".concat(y),typeof y<"u"&&y!==null&&y!==0),Mc(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),Mc(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(x).map(function(k){return x[k]?k:null}).filter(function(k){return k})}function Fee(t){return t=t-0,t===t}function c4(t){return Fee(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var $ee=["style"];function Bee(t){return t.charAt(0).toUpperCase()+t.slice(1)}function zee(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=c4(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[Bee(r)]=s:e[r]=s,e},{})}function d4(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return d4(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,u){var c=e.attributes[u];switch(u){case"class":l.attrs.className=c,delete e.attributes.class;break;case"style":l.attrs.style=zee(c);break;default:u.indexOf("aria-")===0||u.indexOf("data-")===0?l.attrs[u.toLowerCase()]=c:l.attrs[c4(u)]=c}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=Mee(n,$ee);return r.attrs.style=js(js({},r.attrs.style),o),t.apply(void 0,[e.tag,js(js({},r.attrs),a)].concat(E_(i)))}var h4=!1;try{h4=!0}catch{}function Uee(){if(!h4&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function cR(t){if(t&&D0(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(C_.icon)return C_.icon(t);if(t===null)return null;if(t&&D0(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function Zb(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Mc({},t,e):{}}var dR={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},eu=ln.forwardRef(function(t,e){var n=js(js({},dR),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,u=n.maskId,c=cR(i),d=Zb("classes",[].concat(E_(jee(n)),E_((o||"").split(" ")))),h=Zb("transform",typeof n.transform=="string"?C_.transform(n.transform):n.transform),f=Zb("mask",cR(r)),p=Cee(c,js(js(js(js({},d),h),f),{},{symbol:s,title:a,titleId:l,maskId:u}));if(!p)return Uee("Could not find icon",c),null;var g=p.abstract,b={ref:e};return Object.keys(n).forEach(function(v){dR.hasOwnProperty(v)||(b[v]=n[v])}),Hee(g[0],b)});eu.displayName="FontAwesomeIcon";eu.propTypes={beat:nt.bool,border:nt.bool,beatFade:nt.bool,bounce:nt.bool,className:nt.string,fade:nt.bool,flash:nt.bool,mask:nt.oneOfType([nt.object,nt.array,nt.string]),maskId:nt.string,fixedWidth:nt.bool,inverse:nt.bool,flip:nt.oneOf([!0,!1,"horizontal","vertical","both"]),icon:nt.oneOfType([nt.object,nt.array,nt.string]),listItem:nt.bool,pull:nt.oneOf(["right","left"]),pulse:nt.bool,rotation:nt.oneOf([0,90,180,270]),shake:nt.bool,size:nt.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:nt.bool,spinPulse:nt.bool,spinReverse:nt.bool,symbol:nt.oneOfType([nt.bool,nt.string]),title:nt.string,titleId:nt.string,transform:nt.oneOfType([nt.string,nt.object]),swapOpacity:nt.bool};var Hee=d4.bind(null,ln.createElement);function Sp(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class vn{constructor(e,n){fe(this,"start");fe(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new vn(i,r)}toJSON(){return this.range}}const hR=_e.from(_e.MAX_ADDRESS).toString(),Vee=dr.from(dr.MAX_ADDRESS).toString(),Wee={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${_e.format(t)} is out of range (max memory address: ${hR}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","instruction-out-of-range":t=>`This instruction would be placed in address ${_e.format(t)}, which is outside the memory range (max memory address: ${hR}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${Vee}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea."}},fR=_e.from(_e.MAX_ADDRESS).toString(),Gee=dr.from(dr.MAX_ADDRESS).toString(),Kee={"address-has-code":t=>`La direccin de memoria ${_e.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${_e.format(t)} est fuera de rango (direccin mxima de memoria: ${fR}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vaco. El programa debe tener, al menos, una instruccin END.","end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${_e.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${fR}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${Gee}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${_e.format(t)}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instruccin sera colocada en la direccin ${_e.format(t)}, la cual ya est reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carcter solo puede contener un carcter.","empty-character":"Los carcter no puede estar vaco.","invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-character":"Carcter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea."}},Xee=dE({en:Wee,es:Kee});class re extends Error{constructor(n,...i){super();fe(this,"code");fe(this,"context");fe(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof vn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return Xee(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof re?n:new re("unexpected-error",n)}}const EE=[[0,j.fromUnsigned(160,8)],[3,j.fromUnsigned(176,8)],[6,j.fromUnsigned(192,8)],[7,j.fromUnsigned(208,8)]],pR=new Set(...EE.map(([t])=>[t]));var ka,id;class qee{constructor(){fe(this,"codeMemory",new Set);fe(this,"labels",new Map);fe(this,"hasORG",!1);Le(this,ka,!1);Le(this,id,!1)}loadStatements(e){if(A(this,ka))throw new Error("Tried to load statements twice");Q(this,ka,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new re("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:_e.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:_e.from(0)})}return n}computeAddresses(e){if(A(this,id))throw new Error("Tried to compute addresses twice");Q(this,id,!0),this.codeMemory.clear();const n=new Set,i=e.some(c=>c.isInstruction()&&c.instruction==="INT");if(this.hasORG=e.some(c=>c.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new re("missing-org").at(e[0].position);let r=i&&!this.hasORG?8:this.hasORG?32:0,s=null,o=r;const a=[],l=[],u=[];for(const c of e)c.isInstruction()?a.push(c):c.isOriginChange()?l.push(c):c.isDataDirective()&&u.push(c);if(this.hasORG){const c=[],d=[];return Sp(e,h=>{if(h.isEnd()||h.isDataDirective()&&h.directive==="EQU")return;if(h.isOriginChange()){r=h.newAddress;return}const f=r;if(f===null)throw new re("missing-org").at(h);const p=h.length,g=f,b=f+p-1;for(const y of d)if(Math.max(g,y.start)<=Math.min(b,y.end)){c.push(new re("occupied-address",_e.from(g)).at(h));return}d.push({start:g,end:b,statement:h});for(let y=0;y<p;y++){if(!_e.inRange(f+y))throw new re("instruction-out-of-range",f+y).at(h);const w=_e.from(f+y);if(n.has(w.value))throw new re("occupied-address",w).at(h);if(i&&pR.has(w.value))throw new re("reserved-address",w).at(h);n.add(w.value),h.isInstruction()&&this.codeMemory.add(w.value)}const v=_e.from(f);h.setStart(v),h.label&&this.labels.set(h.label,{type:h.isInstruction()?"instruction":h.directive,address:v}),(h.isDataDirective()||h.isInstruction())&&(r+=p,o=Math.max(o,r))},re.from),c}else return Sp([...a,...l,...u],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const g=d.newAddress;g<32?s=g:r=g;return}let h;if(d.isDataDirective())s===null&&(s=o),h=s;else if(d.isInstruction())h=r;else throw new re("missing-org").at(d);const f=d.length;for(let g=0;g<f;g++){if(!_e.inRange(h+g))throw new re("instruction-out-of-range",h+g).at(d);const b=_e.from(h+g);if(n.has(b.value))throw new re("occupied-address",b).at(d);if(i&&pR.has(b.value))throw new re("reserved-address",b).at(d);n.add(b.value),d.isInstruction()&&this.codeMemory.add(b.value)}const p=_e.from(h);if(d.setStart(p),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:p}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=f}else d.isInstruction()&&(r+=f,o=Math.max(o,r))},re.from)}labelExists(e){if(!A(this,ka))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,ka))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,ka))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,id))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof _e&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}ka=new WeakMap,id=new WeakMap;const Yee=["AL","BL","CL","DL","AH","BH","CH","DH"],f4=["AX","BX","CX","DX","SP"],L0=[...Yee,...f4],AE=["DB","DW","EQU"],PE=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],Zee=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...L0,...PE,...AE];class Jee{constructor(e,n,i){fe(this,"type");fe(this,"lexeme");fe(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class Qee{constructor(e){fe(this,"scanned",!1);fe(this,"tokens",[]);fe(this,"position",new vn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new vn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new re("lexer.unterminated-character").at(this.position);if(wp(this.peek())===null)throw new re("lexer.only-ascii").at(new vn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new re("lexer.empty-character").at(this.position);if(n>=2)throw new re("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new re("lexer.unterminated-string").at(this.position);if(wp(this.peek())===null)throw new re("lexer.only-ascii").at(new vn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new re("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new re("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();Zee.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new re("lexer.unexpected-character",e).at(this.position)}return this.position=new vn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new Jee(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new vn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Fn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}fe(Fn,"numberLiteral",(...e)=>new ete(...e)),fe(Fn,"label",(...e)=>new tte(...e)),fe(Fn,"unaryOperation",(...e)=>new nte(...e)),fe(Fn,"binaryOperation",(...e)=>new ite(...e));class ete extends Fn{constructor(n,i){super(i);fe(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class tte extends Fn{constructor(n,i,r){super(r);fe(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new re("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new re("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new re("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class nte extends Fn{constructor(n,i,r){super(r);fe(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class ite extends Fn{constructor(n,i,r,s){super(s);fe(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class iw{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var bo;class p4 extends iw{constructor(n,i,r){super(r);fe(this,"type","data-directive");fe(this,"label");fe(this,"values");Le(this,bo,null);this.values=n,this.label=i}get start(){if(A(this,bo)===null)throw new Error("Start not set");return A(this,bo)}setStart(n){if(A(this,bo)!==null)throw new Error("Start already set");Q(this,bo,n)}toJSON(){return{...super.toJSON(),...A(this,bo)?{start:A(this,bo).toJSON()}:{},directive:this.directive,label:this.label}}}bo=new WeakMap;var pu,Ca,rd;class rte extends p4{constructor(n,i,r){super(n,i,r);fe(this,"directive","EQU");Le(this,pu,"not-processed");Le(this,Ca,null);Le(this,rd,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,rd)??((n=A(this,Ca))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,Ca))throw new Error("Constant already validated");if(!this.label)throw new re("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new re("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new re("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new re("cannot-be-unassinged","EQU").at(n);Q(this,Ca,n.value)}evaluateExpressions(n){if(!A(this,Ca))throw new Error("Constant not validated");if(A(this,pu)==="processed")return A(this,rd);if(A(this,pu)==="processing")throw new re("circular-reference").at(this.position);Q(this,pu,"processed");const i=A(this,Ca).evaluate(n);return Q(this,pu,"processed"),Q(this,rd,i),i}evaluate(n){return this.evaluateExpressions(n)}}pu=new WeakMap,Ca=new WeakMap,rd=new WeakMap;const Wh=Symbol("unassigned");var Ai,Jr;class ste extends p4{constructor(n,i,r,s){super(i,r,s);fe(this,"size");Le(this,Ai,null);Le(this,Jr,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,Ai))throw new Error("Data directive not validated");return A(this,Ai).length*(this.size/8)}getValues(){if(!A(this,Jr))throw new Error("Data directive not evaluated");return A(this,Jr)}toJSON(){return{...super.toJSON(),values:(A(this,Jr)??A(this,Ai)??this.values).map(n=>n===Wh?"?":n.toJSON())}}validate(){if(A(this,Ai))throw new Error("Data directive already validated");Q(this,Ai,[]);for(const n of this.values)if(n.isUnassigned())A(this,Ai).push(Wh);else if(n.isString()){if(this.directive!=="DB")throw new re("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=wp(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new vn(n.position.start+r,n.position.start+r+1),a=Fn.numberLiteral(s,o);A(this,Ai).push(a)}}else A(this,Ai).push(n.value);if(A(this,Ai).length===0)throw new re("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,Ai))throw new Error("Data directive not validated");if(A(this,Jr))throw new Error("Data directive already evaluated");Q(this,Jr,[]);const i=Sp(A(this,Ai),r=>{if(r===Wh)A(this,Jr).push(Wh);else{const s=r.evaluate(n);if(!j.fits(s,this.size))throw new re("value-out-of-range",s,this.size).at(this);const o=j.fromNumber(s,this.size);A(this,Jr).push(o)}},re.from);return i.length>0&&Q(this,Jr,null),i}}Ai=new WeakMap,Jr=new WeakMap;class TE{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class ote extends TE{constructor(n,i){super(i);fe(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class ate extends TE{constructor(n){super(n);fe(this,"type","unassigned")}}class lte extends TE{constructor(n){super(n.position);fe(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function ute(t,e,n){const i=vn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new ste(t.type,e,n,i);case"EQU":return new rte(e,n,i)}}class Jb extends iw{constructor(n){super(n);fe(this,"type","end")}}function tu(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var xo;class Xu extends iw{constructor(n,i,r){super(r);fe(this,"type","instruction");fe(this,"label");fe(this,"operands");Le(this,xo,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,xo)===null)throw new Error("Start not set");return A(this,xo)}setStart(n){if(A(this,xo)!==null)throw new Error("Start already set");Q(this,xo,n)}toJSON(){return{...super.toJSON(),...A(this,xo)?{start:A(this,xo).toJSON()}:{},instruction:this.instruction,label:this.label}}}xo=new WeakMap;var qn,wr;class cte extends Xu{constructor(n,i,r,s){super(i,r,s);Le(this,qn,null);Le(this,wr,null);this.instruction=n}get length(){if(!A(this,qn))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,qn);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,wr))throw new Error("Instruction not evaluated");return A(this,wr)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(tu(r)&3)<<2,o[0]|=(tu(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(tu(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(tu(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(tu(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,wr)??A(this,qn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,qn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new re("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new re("size-mismatch",r.size,i.size).at(this);Q(this,qn,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new re("size-mismatch",r.size,i.size).at(this);Q(this,qn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new re("size-mismatch",r.size,i.size).at(this);Q(this,qn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new re("size-mismatch",s.size,i.size).at(this);Q(this,qn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}Q(this,qn,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new re("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new re("size-mismatch",s,r.size).at(this);Q(this,qn,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new re("double-memory-access").at(this);s==="auto"&&(s=8),Q(this,qn,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new re("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,qn))throw new Error("Instruction not validated");if(A(this,wr))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,qn),a=l=>{const u=l.evaluate(n);if(!_e.inRange(u))throw new re("address-out-of-range",u).at(l);const c=_e.from(u);if(n.addressIsReserved(c))throw new re("address-has-code",c).at(l);return c};switch(i){case"reg<-reg":{Q(this,wr,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{Q(this,wr,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!j.fits(l,r))throw new re("value-out-of-range",l,r).at(o);const u=j.fromNumber(l,r);Q(this,wr,{mode:i,size:r,out:s,src:u});return}case"mem<-reg":{Q(this,wr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!j.fits(l,r))throw new re("value-out-of-range",l,r).at(o);const u=j.fromNumber(l,r);Q(this,wr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:u});return}default:return i}}}qn=new WeakMap,wr=new WeakMap;var Ms,So;class dte extends Xu{constructor(n,i,r,s){super(i,r,s);Le(this,Ms,null);Le(this,So,null);fe(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,So))throw new Error("Instruction not evaluated");return A(this,So)}toJSON(){return{...super.toJSON(),...A(this,So)?{value:A(this,So).toJSON()}:A(this,Ms)?{initialValue:A(this,Ms).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Ms))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new re("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new re("expects-immediate").at(n);Q(this,Ms,n.value)}evaluateExpressions(n){if(!A(this,Ms))throw new Error("Instruction not validated");if(A(this,So))throw new Error("Instruction aready evaluated");const i=A(this,Ms).evaluate(n);if(!j.fitsUnsigned(i,8))throw new re("invalid-interrupt",i).at(A(this,Ms));Q(this,So,j.fromUnsigned(i,8))}}Ms=new WeakMap,So=new WeakMap;var Qr,_o,iO;let hte=(iO=class extends Xu{constructor(n,i,r,s){super(i,r,s);Le(this,Qr,null);Le(this,_o,null);this.instruction=n}get length(){if(!A(this,Qr))throw new Error("Instruction not validated");return A(this,Qr).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,_o)===null)throw new Error("Operation not set");return A(this,_o)}toJSON(){return{...super.toJSON(),...A(this,_o)??A(this,Qr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Qr))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new re("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new re("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new re("expects-dx").at(i);Q(this,Qr,{port:"variable",size:r});return}if(i.isNumberExpression()){Q(this,Qr,{port:"fixed",size:r,address:i.value});return}throw new re("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,Qr))throw new Error("Instruction not validated");if(A(this,_o))throw new Error("Instruction aready evaluated");const i=A(this,Qr);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!dr.inRange(r))throw new re("io-address-out-of-range",r).at(this);const s=dr.from(r);Q(this,_o,{port:"fixed",size:i.size,address:s})}else Q(this,_o,{port:"variable",size:i.size})}},Qr=new WeakMap,_o=new WeakMap,iO);var ko,Os,rO;let fte=(rO=class extends Xu{constructor(n,i,r,s){super(i,r,s);Le(this,ko,null);Le(this,Os,null);fe(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Os)===null)throw new Error("Instruction not evaluated");return A(this,Os)}toJSON(){return{...super.toJSON(),...A(this,Os)?{address:A(this,Os).toJSON()}:A(this,ko)?{jumpTo:A(this,ko)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,ko))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new re("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new re("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new re("label-not-found",r).at(i);if(s!=="instruction")throw new re("label-should-be-an-instruction",r).at(i);Q(this,ko,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!_e.inRange(r))throw new re("address-out-of-range",r).at(i);Q(this,Os,_e.from(r))}}evaluateExpressions(n){if(!A(this,Os)&&A(this,ko)){const i=n.getLabelValue(A(this,ko));if(!_e.inRange(i))throw new re("address-out-of-range",i).at(this);Q(this,Os,_e.from(i))}}},ko=new WeakMap,Os=new WeakMap,rO);var Is,sO;let pte=(sO=class extends Xu{constructor(n,i,r,s){super(i,r,s);Le(this,Is,null);fe(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=tu(this.register),new Uint8Array([i])}get register(){if(!A(this,Is))throw new Error("Instruction not evaluated");return A(this,Is)}toJSON(){return{...super.toJSON(),...A(this,Is)?{register:A(this,Is)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Is))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new re("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new re("expects-word-register").at(n);Q(this,Is,n.value)}evaluateExpressions(){if(!A(this,Is))throw new Error("Instruction not validated")}},Is=new WeakMap,sO);var Ki,Ds;class mte extends Xu{constructor(n,i,r,s){super(i,r,s);Le(this,Ki,null);Le(this,Ds,null);this.instruction=n}get length(){if(!A(this,Ki))throw new Error("Instruction not validated");const{mode:n}=A(this,Ki);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=tu(this.operation.reg);break}case"mem-direct":{const r=this.operation.address.byte;n.push(r.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Ds))throw new Error("Instruction not evaluated");return A(this,Ds)}toJSON(){return{...super.toJSON(),...A(this,Ds)??A(this,Ki)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Ki))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new re("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){Q(this,Ki,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new re("unknown-size").at(i);Q(this,Ki,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new re("unknown-size").at(i);Q(this,Ki,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){Q(this,Ki,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new re("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,Ki))throw new Error("Instruction not validated");if(A(this,Ds))throw new Error("Instruction aready evaluated");const i=A(this,Ki);switch(i.mode){case"reg":{Q(this,Ds,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!_e.inRange(r))throw new re("address-out-of-range",r).at(i.address);const s=_e.from(r);if(n.addressIsReserved(s))throw new re("address-has-code",s).at(i.address);Q(this,Ds,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{Q(this,Ds,{mode:"mem-indirect",size:i.size});return}default:return i}}}Ki=new WeakMap,Ds=new WeakMap;var sd;class gte extends Xu{constructor(n,i,r,s){super(i,r,s);Le(this,sd,!1);fe(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,sd))throw new Error("Instruction already validated");if(this.operands.length>0)throw new re("expects-no-operands").at(this);Q(this,sd,!0)}evaluateExpressions(){if(!A(this,sd))throw new Error("Instruction not validated")}}sd=new WeakMap;class rw{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class vte extends rw{constructor(n){super(n.position);fe(this,"type","register");fe(this,"value");this.value=n.type}get size(){return f4.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class yte extends rw{constructor(n,i){super(i);fe(this,"type","indirect-address");fe(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class wte extends rw{constructor(n,i,r){super(r);fe(this,"type","direct-address");fe(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class j0 extends rw{constructor(n){super(n.position);fe(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return j0.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new re("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:Fn.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=j0.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:Fn.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function mR(t,e,n){const i=vn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new gte(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new cte(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new mte(t.type,e,n,i);case"PUSH":case"POP":return new pte(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new fte(t.type,e,n,i);case"IN":case"OUT":return new hte(t.type,e,n,i);case"INT":return new dte(t.type,e,n,i)}}class bte extends iw{constructor(n,i){super(i);fe(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let xte=class{constructor(e){fe(this,"tokens");fe(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new re("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new re("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new bte(i,vn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new re("end-must-be-the-last-statement").at(e);return new Jb(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new Jb(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new Jb(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...AE);if(e&&!n)throw new re("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),ute(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new ote(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new ate(e.position)}return new lte(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...PE);if(e&&!n){const s=this.peek();throw new re("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return mR(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),mR(n,r,i)}instructionOperand(){if(this.match(...L0)){const n=this.previous();return new vte(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new re("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...L0)){this.consume("BL",new re("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new re("parser.expected-literal-after-literal","]","BL"));return new yte(e==null?void 0:e.type,vn.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new re("parser.expected-literal-after-expression","]"));return new wte(i,e==null?void 0:e.type,vn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new re("parser.expected-literal-after-literal","[","PTR");return new j0(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new re("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new re("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Fn.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=wp(i.lexeme.slice(1,-1));return Fn.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new re("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new re("parser.expected-label-after-offset").at(this.peek());if(!n)throw new re("parser.expected-argument").at(this.peek());return Fn.label(n.lexeme.toUpperCase(),e!==null,vn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new re("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Fn.unaryOperation(e.type==="PLUS"?"+":"-",n,vn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Fn.binaryOperation(e,"*",n,vn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Fn.binaryOperation(e,n.type==="PLUS"?"+":"-",i,vn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function m4(t){try{const n=new Qee(t).scanTokens(),r=new xte(n).parse();if(!r.at(-1))throw new re("empty-program");let o=[];const a=new qee;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Sp(r,c=>{c.isOriginChange()||c.isEnd()||c.validate(a)},re.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],u=[];return o=Sp(r,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(a);else{const d=c.evaluateExpressions(a);return l.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(a),u.push(c))},re.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:u,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[re.from(e)]}}}class Ss{constructor(e){fe(this,"computer");this.computer=e.computer}}const Ste=t=>_e.format(t).slice(-2),_te=Ste(_e.MAX_ADDRESS),kte={"address-has-instruction":t=>`Memory address ${_e.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${_e.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${_e.format(t)} is out of range (max memory address: ${_te}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${dr.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${_e.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},Cte=_e.from(_e.MAX_ADDRESS).toString(),Ete={"address-has-instruction":t=>`La direccin de memoria ${_e.format(t)} tiene una instruccin, y no se puede escribir.`,"address-is-reserved":t=>`La direccin de memoria ${_e.format(t)} est reservada, y no se puede escribir.`,"address-out-of-range":t=>`La direccin de memoria ${_e.format(t)} est fuera de rango (direccin mxima de memoria: ${Cte}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontr ningn mdulo conectado a la direccin de memoria E/S ${dr.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${_e.format(t)} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},Ate=dE({en:kte,es:Ete});class Wt extends Error{constructor(n,...i){super();fe(this,"code");fe(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return Ate(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof Wt?n:new Wt("unexpected-error",n)}}class Qo{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new Wt("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var oy,g4;class Pte extends Qo{constructor(){super(...arguments);Le(this,oy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:xt(this,oy,g4).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct",ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("id.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}i==="mem<-imd"&&(yield*n.cpu.copyByteRegister("id.l","left.l")),yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;u=j.fromSigned(d,r),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>j.maxValue(r)?(c.CF=!0,u=j.fromUnsigned(h-j.maxValue(r)-1,r)):(c.CF=!1,u=j.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed>=0&&u.signed<0||a.signed<0&&l.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(c.CF=!0,u=j.fromUnsigned(h+j.maxValue(r)+1,r)):(c.CF=!1,u=j.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed<0&&u.signed<0||a.signed<0&&l.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}oy=new WeakSet,g4=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var ay,v4;class Tte extends Qo{constructor(){super(...arguments);Le(this,ay)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:xt(this,ay,v4).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=j.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=j.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===j.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",j.fromSigned(1,16));const o=i.unsigned+1;o>j.maxValue(this.operation.size)?(s.CF=!0,r=j.fromUnsigned(o-j.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=j.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",j.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=j.fromUnsigned(o+j.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=j.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}ay=new WeakSet,v4=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class Nte extends Qo{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var ly,y4;class Rte extends Qo{constructor(){super(...arguments);Le(this,ly)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:xt(this,ly,y4).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new Wt("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Wt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Wt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}ly=new WeakSet,y4=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class Mte extends Qo{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class Ote extends Qo{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function nu(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function Ite(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var uy,w4;class Dte extends Qo{constructor(){super(...arguments);Le(this,uy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:xt(this,uy,w4).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=Ite(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}uy=new WeakSet,w4=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class Lte extends Qo{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class jte extends Qo{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function Fte(t){switch(t.instruction){case"MOV":return new Dte(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new Pte(t);case"NOT":case"NEG":case"INC":case"DEC":return new Tte(t);case"IN":case"OUT":return new Rte(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new jte(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new Mte(t);case"RET":case"IRET":return new Lte(t);case"INT":return new Nte(t);case"CLI":case"STI":case"NOP":case"HLT":return new Ote(t)}}function $te(t){for(const[e,n]of EE)if(n.unsigned===t.unsigned)return e;return null}function*Bte(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 3:{yield{type:"cpu:int.3"};break}case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new Wt("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new Wt("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new Wt("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",j.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new Wt("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",j.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",j.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===j.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var od,We,br,Pi,on,cc,yr,oO;let zte=(oO=class extends Ss{constructor(n){super(n);Le(this,on);Le(this,od);Le(this,We);Le(this,br);Le(this,Pi);n.data==="unchanged"?(Q(this,We,A(n.previous.cpu,We)),Q(this,br,A(n.previous.cpu,br)),Q(this,Pi,A(n.previous.cpu,Pi))):(Q(this,We,{AX:j.zero(16),BX:j.zero(16),CX:j.zero(16),DX:j.zero(16),SP:j.zero(16),IP:j.zero(16),IR:j.zero(8),ri:j.zero(16),id:j.zero(16),left:j.zero(16),right:j.zero(16),result:j.zero(16),FLAGS:j.zero(16)}),Q(this,br,j.zero(16)),Q(this,Pi,j.zero(8))),A(this,We).SP=j.fromUnsigned(_e.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1;let s;r?s=32:i?s=8:s=0,A(this,We).IP=j.fromUnsigned(s,16),A(this,We).ri=j.fromUnsigned(0,16),A(this,We).id=j.fromUnsigned(0,16),xt(this,on,yr).call(this,"IF",!0),Q(this,od,new Map);for(const o of n.program.instructions){const a=Fte(o);A(this,od).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,We).IP,r=$te(i);if(r!==null){if(!(yield*Bte(this.computer,r)))return}else{const s=A(this,od).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new Wt("no-instruction",A(this,We).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",j.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;let i=j.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",i),yield*this.copyWordRegister("ri","IP"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,We)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,br).toJSON(),MBR:A(this,Pi).toJSON()}}getRegister(n){const[i,r]=nu(n);return r==="low"?A(this,We)[i].low:r==="high"?A(this,We)[i].high:A(this,We)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);xt(this,on,cc).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);xt(this,on,cc).call(this,i,r.withHigh(j.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,xt(this,on,cc).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,xt(this,on,cc).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,We).FLAGS.bit(1);case"ZF":return A(this,We).FLAGS.bit(0);case"SF":return A(this,We).FLAGS.bit(3);case"IF":return A(this,We).FLAGS.bit(4);case"OF":return A(this,We).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&xt(this,on,yr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&xt(this,on,yr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&xt(this,on,yr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&xt(this,on,yr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&xt(this,on,yr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,We).FLAGS}}*aluExecute(n,i,r){A(this,We).result=i.is8bits()?A(this,We).result.withLow(i):i,typeof r.CF=="boolean"&&xt(this,on,yr).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&xt(this,on,yr).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&xt(this,on,yr).call(this,"SF",r.SF),typeof r.IF=="boolean"&&xt(this,on,yr).call(this,"IF",r.IF),typeof r.OF=="boolean"&&xt(this,on,yr).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,We).result,flags:A(this,We).FLAGS}}*setMAR(n){const i=this.getRegister(n);Q(this,br,i.withHigh(j.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){xt(this,on,cc).call(this,n,A(this,Pi)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);Q(this,Pi,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,br));return i?(Q(this,Pi,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,br),A(this,Pi)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,br).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(Q(this,Pi,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,br).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,Pi))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return Q(this,Pi,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return _e.inRange(i.unsigned-1)?(i=i.add(-1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?_e.inRange(i.unsigned-1)?!0:(yield{type:"cpu:error",error:new Wt("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new Wt("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return _e.inRange(i)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),i=i.add(1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new Wt("stack-underflow")},!1)}},od=new WeakMap,We=new WeakMap,br=new WeakMap,Pi=new WeakMap,on=new WeakSet,cc=function(n,i){const[r,s]=nu(n);if(s===null){if(A(this,We)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,We)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,We)[r]=A(this,We)[r].withLow(i):A(this,We)[r]=A(this,We)[r].withHigh(i)}},yr=function(n,i){switch(n){case"CF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(1,i);return;case"ZF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(0,i);return;case"SF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(3,i);return;case"IF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(4,i);return;case"OF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},oO);var Ba,Xi,Co,Ea;let b4=(Ba=class extends Ss{constructor(n){super(n);Le(this,Xi);Le(this,Co);Le(this,Ea,!1);n.data==="unchanged"&&n.previous.io.printer?(Q(this,Xi,A(n.previous.io.printer,Xi)),Q(this,Co,A(n.previous.io.printer,Co)),Q(this,Ea,A(n.previous.io.printer,Ea))):(Q(this,Xi,[]),Q(this,Co,""),Q(this,Ea,!1))}get busy(){return A(this,Xi).length>=Ba.BUFFER_SIZE}*setStrobe(n){const i=A(this,Ea);if(i===n)return;if(Q(this,Ea,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,Xi).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){Q(this,Co,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,Xi).length===0)return;const[n,...i]=A(this,Xi);if(Q(this,Xi,i),yield{type:"printer:buffer.pop",char:n},i.length===Ba.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=pE(n.unsigned);Q(this,Co,A(this,Co)+r),yield{type:"printer:paper.print",char:r}}}get hasPending(){return A(this,Xi).length>0}toJSON(){return{paper:A(this,Co),buffer:[...A(this,Xi).map(n=>n.unsigned)]}}},Xi=new WeakMap,Co=new WeakMap,Ea=new WeakMap,fe(Ba,"BUFFER_SIZE",5),Ba);class sw extends Ss{}let x4=class extends sw{constructor(n){super(n);fe(this,"PA");fe(this,"PB");fe(this,"CA");fe(this,"CB");fe(this,"leds",null);fe(this,"printer",null);fe(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=j.random(8),this.PB=j.random(8),this.CA=j.random(8),this.CB=j.random(8)):(this.PA=j.zero(8),this.PB=j.zero(8),this.CA=j.zero(8),this.CB=j.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class gR extends x4{constructor(n){super(n);fe(this,"printer");this.PA=this.PA.withBit(1,!1);const i=this;this.printer=new class extends b4{*readData(){const r=i.readData();return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updatePort("A")}}(n)}readData(){const n=this.PB.unsigned&~this.CB.unsigned;return j.fromUnsigned(n,8)}*updatePort(n){if(n==="B")return;let i=this.PA.unsigned;const r=this.CA.unsigned,s=this.printer.busy;i=i&~r,this.line("A",0)==="input"&&s&&(i|=1),i!==this.PA.unsigned&&(this.PA=j.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var Eo,aO;let Ute=(aO=class extends Ss{constructor(n){super(n);Le(this,Eo);n.data==="unchanged"&&n.previous.io.leds?Q(this,Eo,A(n.previous.io.leds,Eo)):n.data==="randomize"?Q(this,Eo,j.random(8)):Q(this,Eo,j.zero(8))}get state(){return A(this,Eo)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,Eo).toJSON()}},Eo=new WeakMap,aO);var xr,lO;let Hte=(lO=class extends Ss{constructor(n){super(n);Le(this,xr);n.data==="unchanged"&&n.previous.io.switches?Q(this,xr,A(n.previous.io.switches,xr)):n.data==="randomize"?Q(this,xr,j.random(8)):Q(this,xr,j.zero(8))}get state(){return A(this,xr)}*toggle(n){Q(this,xr,A(this,xr).withBit(n,!A(this,xr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,xr).toJSON()}},xr=new WeakMap,lO);class Vte extends x4{constructor(n){super(n);fe(this,"leds");fe(this,"switches");const i=this;this.leds=new class extends Ute{}(n),this.switches=new class extends Hte{*toggle(r){yield*super.toggle(r),yield*i.updatePort("A")}}(n)}*updatePort(n){if(n==="A"){const i=this.switches.state.unsigned;let r=this.PA.unsigned;const s=this.CA.unsigned;r=i&s|r&~s,r!==this.PA.unsigned&&(this.PA=j.fromUnsigned(r,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let i=this.PB.unsigned;const r=this.CB.unsigned;i=i&~r,yield*this.leds.update(j.fromUnsigned(i,8))}}}let Wte=class extends Ss{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},Gte=class extends Ss{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var ad,uO;let Kte=(uO=class extends Ss{constructor(){super(...arguments);Le(this,ad,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,ad);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},Q(this,ad,null),n}setLastCharRead(n){Q(this,ad,n)}toJSON(){return null}},ad=new WeakMap,uO);var qi,cO;let Xte=(cO=class extends Ss{constructor(n){super(n);Le(this,qi);n.data==="unchanged"&&n.previous.io.screen?Q(this,qi,A(n.previous.io.screen,qi)):Q(this,qi,"")}clear(){return this.sendChar(j.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:Q(this,qi,A(this,qi).slice(0,-1));break;case 10:Q(this,qi,A(this,qi)+`
`);break;case 12:Q(this,qi,"");break;default:Q(this,qi,A(this,qi)+pE(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,qi)}}toJSON(){return A(this,qi)}},qi=new WeakMap,cO);var Ao,ui,dO;let qte=(dO=class extends sw{constructor(n){super(n);Le(this,Ao);Le(this,ui);fe(this,"printer");n.data==="randomize"?Q(this,Ao,j.random(8)):Q(this,Ao,j.zero(8)),Q(this,ui,j.zero(8));const i=this;this.printer=new class extends b4{*readData(){const r=A(i,Ao);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,ui).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,Ao);else if(n==="STATE")i=A(this,ui);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")Q(this,Ao,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),Q(this,ui,i),yield{type:"handshake:register.update",register:n,value:i},A(this,ui).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),Q(this,ui,A(this,ui).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,ui)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){Q(this,ui,A(this,ui).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,ui)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Ao).toJSON(),STATE:A(this,ui).toJSON()}}},Ao=new WeakMap,ui=new WeakMap,dO);var as,Po,Ti,ci,es,eo,yv,wv;let Yte=(as=class extends sw{constructor(n){super(n);Le(this,eo);Le(this,Po);Le(this,Ti);Le(this,ci);Le(this,es);Q(this,Po,j.fromUnsigned(255,8)),Q(this,Ti,j.fromUnsigned(0,8)),Q(this,ci,j.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?Q(this,es,A(n.previous.io.pic,es)):n.data==="randomize"?Q(this,es,new Array(as.LINES).fill(j.zero(8)).map(()=>j.random(8))):Q(this,es,new Array(as.LINES).fill(j.zero(8)))}chipSelect(n){const r=4+as.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=j.zero(8);else if(n==="IMR")i=A(this,Po);else if(n==="IRR")i=A(this,Ti);else if(n==="ISR")i=A(this,ci);else{const r=Number(n.slice(3));i=A(this,es)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,ci).isZero()||(yield{type:"pic:intr.off"},Q(this,ci,j.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,ci)},yield*xt(this,eo,wv).call(this));else if(n==="IMR")Q(this,Po,i),yield{type:"pic:register.update",register:"IMR",value:A(this,Po)},yield*xt(this,eo,wv).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,es)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=as.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Ti).bit(n)||(Q(this,Ti,A(this,Ti).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ti)},yield*xt(this,eo,wv).call(this))}isINTRActive(){return A(this,ci).isZero()&&xt(this,eo,yv).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,ci).isZero())throw new Error("INTR line is active but ISR is not zero");const n=xt(this,eo,yv).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");Q(this,ci,A(this,ci).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,ci)},Q(this,Ti,A(this,Ti).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ti)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,es)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,Po).toJSON(),IRR:A(this,Ti).toJSON(),ISR:A(this,ci).toJSON(),lines:A(this,es).map(n=>n.toJSON())}}},Po=new WeakMap,Ti=new WeakMap,ci=new WeakMap,es=new WeakMap,eo=new WeakSet,yv=function(){for(let n=0;n<as.LINES;n++)if(A(this,Ti).bit(n)&&!A(this,Po).bit(n))return n;return null},wv=function*(){A(this,ci).isZero()&&xt(this,eo,yv).call(this)!==null&&(yield{type:"pic:intr.on"})},fe(as,"LINES",8),as);var Ls,Aa,hO;let Zte=(hO=class extends sw{constructor(n){super(n);Le(this,Ls);Le(this,Aa);Q(this,Ls,j.zero(8)),Q(this,Aa,j.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Ls);else if(n==="COMP")i=A(this,Aa);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")Q(this,Ls,i);else if(n==="COMP")Q(this,Aa,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Ls).unsigned===j.maxValue(8)?j.zero(8):A(this,Ls).add(1);Q(this,Ls,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,Aa).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Ls).toJSON(),COMP:A(this,Aa).toJSON()}}},Ls=new WeakMap,Aa=new WeakMap,hO);class Jte extends Ss{constructor(n){super(n);fe(this,"clock",null);fe(this,"f10",null);fe(this,"keyboard",null);fe(this,"screen",null);fe(this,"handshake",null);fe(this,"pic",null);fe(this,"pio",null);fe(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new Kte(n),this.screen=new Xte(n)),n.devices.pic&&(this.clock=new Wte(n),this.f10=new Gte(n),this.timer=new Zte(n),this.pic=new Yte(n)),this.pio=n.devices.pio==="switches-and-leds"?new Vte(n):n.devices.pio==="printer"?new gR(n):null,n.devices.handshake){if(this.pio instanceof gR)throw new Wt("io-printer-conflict");this.handshake=new qte(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,u,c;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(u=this.pio)==null?void 0:u.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(c=this.timer)==null?void 0:c.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new Wt("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new Wt("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new Wt("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,u,c,d,h;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((u=this.handshake)==null?void 0:u.toJSON())??null,pic:((c=this.pic)==null?void 0:c.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((h=this.timer)==null?void 0:h.toJSON())??null}}}var za,di,ld,ud;let Qte=(za=class extends Ss{constructor(n){super(n);Le(this,di);Le(this,ld);Le(this,ud);n.data==="unchanged"?Q(this,di,A(n.previous.memory,di)):n.data==="randomize"?Q(this,di,new Uint8Array(za.SIZE).map(()=>j.random(8).unsigned)):Q(this,di,new Uint8Array(za.SIZE).fill(0)),A(this,di)[255]=1;const i=n.program.instructions.some(r=>r.instruction==="INT");if(Q(this,ud,new Set),i)for(const[r,s]of EE){const o=r;if(A(this,di)[o]=s.unsigned,A(this,ud).add(o),r===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let u=0;u<a.length;u++)A(this,di)[l+u]=a[u],A(this,ud).add(l+u)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==Wh&&A(this,di).set(o.toUint8Array(),s),s+=r.size/8}Q(this,ld,new Set);for(const r of n.program.instructions){A(this,di).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,ld).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!_e.inRange(n))return yield{type:"memory:read.error",error:new Wt("address-out-of-range",n)},null;const i=j.fromUnsigned(A(this,di).at(n),8);return yield{type:"memory:read.ok",address:_e.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},_e.inRange(n)?(A(this,ld).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instruccin en la direccin ${_e.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instruccin en la direccin ${_e.format(n)}`)),A(this,di).set([i.unsigned],n),yield{type:"memory:write.ok",address:_e.from(n),value:i},!0):(yield{type:"memory:write.error",error:new Wt("address-out-of-range",n)},!1)}toJSON(){return[...A(this,di)]}},di=new WeakMap,ld=new WeakMap,ud=new WeakMap,fe(za,"SIZE",_e.MAX_ADDRESS+1),za);class vR{constructor(e){fe(this,"cpu");fe(this,"memory");fe(this,"io");const n={computer:this,...e};this.cpu=new zte(n),this.memory=new Qte(n),this.io=new Jte(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var mt;class ene{constructor(){Le(this,mt,new vR({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){Q(this,mt,new vR({...e,previous:A(this,mt)}))}getComputerState(){var e;return((e=A(this,mt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,mt))throw new Wt("no-program");return A(this,mt).cpu.run()}get devices(){if(!A(this,mt))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,mt).io.clock!==null,tick:()=>{if(A(this,mt).io.clock)return A(this,mt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,mt).io,press:()=>{if(A(this,mt).io.f10)return A(this,mt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,mt).io,readChar:e=>{if(A(this,mt).io.keyboard)return A(this,mt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,mt).io},printer:{connected:()=>A(this,mt).io.printer!==null,clear:()=>{if(A(this,mt).io.printer)return A(this,mt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,mt).io.printer)return A(this,mt).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,mt).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,mt).io,clear:()=>{if(A(this,mt).io.screen)return A(this,mt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,mt).io,toggle:e=>{if(A(this,mt).io.switches)return A(this,mt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}mt=new WeakMap;const Qb=me(j.zero(16)),e1=me(j.zero(16)),t1=me(j.zero(16)),n1=me(j.zero(16)),i1=me(j.zero(16)),r1=me(j.zero(16)),tne=me(j.zero(8)),s1=me(j.zero(16)),o1=me(j.zero(16)),a1=me(j.zero(16)),l1=me(j.zero(16)),u1=me(j.zero(16)),c1=me(j.zero(16)),S4=me(j.zero(16)),F0=me(j.zero(8)),ft=me(null),Fu=me(0),NE=me(!1),nne=me(!1),ow=me(0),$0=me([]),_4=me(!1);me(!0);me(!0);const P_=me(!1),mr=t=>me(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),gr=t=>me(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),Ge={AX:Qb,AL:mr(Qb),AH:gr(Qb),BX:e1,BL:mr(e1),BH:gr(e1),CX:t1,CL:mr(t1),CH:gr(t1),DX:n1,DL:mr(n1),DH:gr(n1),SP:i1,"SP.l":mr(i1),"SP.h":gr(i1),IP:r1,"IP.l":mr(r1),"IP.h":gr(r1),IR:tne,ri:s1,"ri.l":mr(s1),"ri.h":gr(s1),id:o1,"id.l":mr(o1),"id.h":gr(o1),left:a1,"left.l":mr(a1),"left.h":gr(a1),right:l1,"right.l":mr(l1),"right.h":gr(l1),result:u1,"result.l":mr(u1),"result.h":gr(u1),FLAGS:c1,"FLAGS.l":mr(c1),"FLAGS.h":gr(c1),MAR:S4,MBR:F0},ns=me({phase:"stopped"}),k4=me("ADD");function ine(t,e=!1){e?(z.set(Ge.AX,j.zero(16)),z.set(Ge.BX,j.zero(16)),z.set(Ge.CX,j.zero(16)),z.set(Ge.DX,j.zero(16)),z.set(Ge.SP,j.fromUnsigned(255,16)),z.set(Ge.IP,j.zero(16)),z.set(Ge.IR,j.zero(8)),z.set(Ge.ri,j.zero(16)),z.set(Ge.id,j.zero(16)),z.set(Ge.left,j.zero(16)),z.set(Ge.right,j.zero(16)),z.set(Ge.result,j.zero(16)),z.set(Ge.FLAGS,j.zero(16)),z.set(Ge.MAR,j.zero(16)),z.set(Ge.MBR,j.zero(8))):(z.set(Ge.AX,j.fromUnsigned(t.cpu.AX,16)),z.set(Ge.BX,j.fromUnsigned(t.cpu.BX,16)),z.set(Ge.CX,j.fromUnsigned(t.cpu.CX,16)),z.set(Ge.DX,j.fromUnsigned(t.cpu.DX,16)),z.set(Ge.SP,j.fromUnsigned(t.cpu.SP,16)),z.set(Ge.IP,j.fromUnsigned(t.cpu.IP,16)),z.set(Ge.IR,j.fromUnsigned(t.cpu.IR,8)),z.set(Ge.ri,j.fromUnsigned(t.cpu.ri,16)),z.set(Ge.id,j.fromUnsigned(t.cpu.id,16)),z.set(Ge.left,j.fromUnsigned(t.cpu.left,16)),z.set(Ge.right,j.fromUnsigned(t.cpu.right,16)),z.set(Ge.result,j.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,z.set(Ge.FLAGS,j.fromUnsigned(t.cpu.FLAGS,16)),z.set(Ge.MAR,j.fromUnsigned(t.cpu.MAR,16)),z.set(Ge.MBR,j.fromUnsigned(t.cpu.MBR,8))),z.set(ns,{phase:"stopped"})}const C4=me([]),E4=me([]),B0=me(new Array(_e.MAX_ADDRESS+1).fill(j.zero(8))),_p=me(_e.from(32)),rne=me(null),fg=256,sne=me(t=>{const e=t(rne)??t(_p);let n=e.value-e.value%fg,i=n+fg-1;i>_e.MAX_ADDRESS&&(i=_e.MAX_ADDRESS,n=i-fg+1);const r=t(B0),s=[];for(let o=0;o<fg;o++)s.push({address:_e.from(n+o),value:r[n+o]});return s});function one(t,e=!1){e?z.set(B0,new Array(_e.MAX_ADDRESS+1).fill(j.zero(8))):z.set(B0,t.memory.map(n=>j.fromUnsigned(n,8))),z.set(_p,_e.from(32))}const A4=new Gp;function ane(t){window.codemirror&&window.codemirror.dispatch({effects:A4.reconfigure(ot.readOnly.of(t))})}const T_=Ze.define(),lne=_i.define({create(){return Je.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(T_)&&(n=Je.none,i.value!==null&&(n=n.update({add:[une.range(i.value)]})));return n},provide:t=>Re.decorations.from(t)}),une=Je.line({class:"!bg-mantis-400/10"});function P4(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:T_.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:T_.of(e)})}}const T4=$c.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||$c;var RE=am(),Ye=t=>om(t,RE),ME=am();Ye.write=t=>om(t,ME);var aw=am();Ye.onStart=t=>om(t,aw);var OE=am();Ye.onFrame=t=>om(t,OE);var IE=am();Ye.onFinish=t=>om(t,IE);var ed=[];Ye.setTimeout=(t,e)=>{const n=Ye.now()+e,i=()=>{const s=ed.findIndex(o=>o.cancel==i);~s&&ed.splice(s,1),ja-=~s?1:0},r={time:n,handler:t,cancel:i};return ed.splice(N4(n),0,r),ja+=1,R4(),r};var N4=t=>~(~ed.findIndex(e=>e.time>t)||~ed.length);Ye.cancel=t=>{aw.delete(t),OE.delete(t),IE.delete(t),RE.delete(t),ME.delete(t)};Ye.sync=t=>{N_=!0,Ye.batchedUpdates(t),N_=!1};Ye.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Ye.onStart(n)}return i.handler=t,i.cancel=()=>{aw.delete(n),e=null},i};var DE=typeof window<"u"?window.requestAnimationFrame:()=>{};Ye.use=t=>DE=t;Ye.now=typeof performance<"u"?()=>performance.now():Date.now;Ye.batchedUpdates=t=>t();Ye.catch=console.error;Ye.frameLoop="always";Ye.advance=()=>{Ye.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):O4()};var La=-1,ja=0,N_=!1;function om(t,e){N_?(e.delete(t),t(0)):(e.add(t),R4())}function R4(){La<0&&(La=0,Ye.frameLoop!=="demand"&&DE(M4))}function cne(){La=-1}function M4(){~La&&(DE(M4),Ye.batchedUpdates(O4))}function O4(){const t=La;La=Ye.now();const e=N4(La);if(e&&(I4(ed.splice(0,e),n=>n.handler()),ja-=e),!ja){cne();return}aw.flush(),RE.flush(t?Math.min(64,La-t):16.667),OE.flush(),ME.flush(),IE.flush()}function am(){let t=new Set,e=t;return{add(n){ja+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return ja-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,ja-=e.size,I4(e,i=>i(n)&&t.add(i)),ja+=t.size,e=t)}}}function I4(t,e){t.forEach(n=>{try{e(n)}catch(i){Ye.catch(i)}})}var dne=Object.defineProperty,hne=(t,e)=>{for(var n in e)dne(t,n,{get:e[n],enumerable:!0})},xs={};hne(xs,{assign:()=>mne,colors:()=>Ja,createStringInterpolator:()=>jE,skipAnimation:()=>j4,to:()=>L4,willAdvance:()=>FE});function fne(){}var pne=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Se={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function go(t,e){if(Se.arr(t)){if(!Se.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Bn=(t,e)=>t.forEach(e);function yl(t,e,n){if(Se.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Fa=t=>Se.und(t)?[]:Se.arr(t)?t:[t];function D4(t,e){if(t.size){const n=Array.from(t);t.clear(),Bn(n,e)}}var pg=(t,...e)=>D4(t,n=>n(...e)),LE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),jE,L4,Ja=null,j4=!1,FE=fne,mne=t=>{t.to&&(L4=t.to),t.now&&(Ye.now=t.now),t.colors!==void 0&&(Ja=t.colors),t.skipAnimation!=null&&(j4=t.skipAnimation),t.createStringInterpolator&&(jE=t.createStringInterpolator),t.requestAnimationFrame&&Ye.use(t.requestAnimationFrame),t.batchedUpdates&&(Ye.batchedUpdates=t.batchedUpdates),t.willAdvance&&(FE=t.willAdvance),t.frameLoop&&(Ye.frameLoop=t.frameLoop)},mf=new Set,Pr=[],d1=[],z0=0,lw={get idle(){return!mf.size&&!Pr.length},start(t){z0>t.priority?(mf.add(t),Ye.onStart(gne)):(F4(t),Ye(R_))},advance:R_,sort(t){if(z0)Ye.onFrame(()=>lw.sort(t));else{const e=Pr.indexOf(t);~e&&(Pr.splice(e,1),$4(t))}},clear(){Pr=[],mf.clear()}};function gne(){mf.forEach(F4),mf.clear(),Ye(R_)}function F4(t){Pr.includes(t)||$4(t)}function $4(t){Pr.splice(vne(Pr,e=>e.priority>t.priority),0,t)}function R_(t){const e=d1;for(let n=0;n<Pr.length;n++){const i=Pr[n];z0=i.priority,i.idle||(FE(i),i.advance(t),i.idle||e.push(i))}return z0=0,d1=Pr,d1.length=0,Pr=e,Pr.length>0}function vne(t,e){const n=t.findIndex(e);return n<0?t.length:n}var yne=(t,e,n)=>Math.min(Math.max(n,t),e),wne={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},us="[-+]?\\d*\\.?\\d+",U0=us+"%";function uw(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var bne=new RegExp("rgb"+uw(us,us,us)),xne=new RegExp("rgba"+uw(us,us,us,us)),Sne=new RegExp("hsl"+uw(us,U0,U0)),_ne=new RegExp("hsla"+uw(us,U0,U0,us)),kne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Cne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ene=/^#([0-9a-fA-F]{6})$/,Ane=/^#([0-9a-fA-F]{8})$/;function Pne(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Ene.exec(t))?parseInt(e[1]+"ff",16)>>>0:Ja&&Ja[t]!==void 0?Ja[t]:(e=bne.exec(t))?(ic(e[1])<<24|ic(e[2])<<16|ic(e[3])<<8|255)>>>0:(e=xne.exec(t))?(ic(e[1])<<24|ic(e[2])<<16|ic(e[3])<<8|bR(e[4]))>>>0:(e=kne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Ane.exec(t))?parseInt(e[1],16)>>>0:(e=Cne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Sne.exec(t))?(yR(wR(e[1]),mg(e[2]),mg(e[3]))|255)>>>0:(e=_ne.exec(t))?(yR(wR(e[1]),mg(e[2]),mg(e[3]))|bR(e[4]))>>>0:null}function h1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function yR(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=h1(r,i,t+1/3),o=h1(r,i,t),a=h1(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function ic(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function wR(t){return(parseFloat(t)%360+360)%360/360}function bR(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function mg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function xR(t){let e=Pne(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var kp=(t,e,n)=>{if(Se.fun(t))return t;if(Se.arr(t))return kp({range:t,output:e,extrapolate:n});if(Se.str(t.output[0]))return jE(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const c=Nne(u,s);return Tne(u,s[c],s[c+1],r[c],r[c+1],l,o,a,i.map)}};function Tne(t,e,n,i,r,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function Nne(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Rne=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return yne(0,1,r/t)},H0=1.70158,gg=H0*1.525,SR=H0+1,_R=2*Math.PI/3,kR=2*Math.PI/4.5,vg=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,B4={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>SR*t*t*t-H0*t*t,easeOutBack:t=>1+SR*Math.pow(t-1,3)+H0*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((gg+1)*2*t-gg)/2:(Math.pow(2*t-2,2)*((gg+1)*(t*2-2)+gg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*_R),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*_R)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*kR))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*kR)/2+1,easeInBounce:t=>1-vg(1-t),easeOutBounce:vg,easeInOutBounce:t=>t<.5?(1-vg(1-2*t))/2:(1+vg(2*t-1))/2,steps:Rne},Cp=Symbol.for("FluidValue.get"),Md=Symbol.for("FluidValue.observers"),Ar=t=>!!(t&&t[Cp]),Mi=t=>t&&t[Cp]?t[Cp]():t,CR=t=>t[Md]||null;function Mne(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Ep(t,e){const n=t[Md];n&&n.forEach(i=>{Mne(i,e)})}var z4=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");One(this,t)}},One=(t,e)=>U4(t,Cp,e);function cw(t,e){if(t[Cp]){let n=t[Md];n||U4(t,Md,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Ap(t,e){const n=t[Md];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Md]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var U4=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),bv=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ine=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,ER=new RegExp(`(${bv.source})(%|[a-z]+)`,"i"),Dne=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,dw=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,H4=t=>{const[e,n]=Lne(t);if(!e||LE())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&dw.test(n))return H4(n);if(n)return n}return t},Lne=t=>{const e=dw.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},f1,jne=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,V4=t=>{f1||(f1=Ja?new RegExp(`(${Object.keys(Ja).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Mi(s).replace(dw,H4).replace(Ine,xR).replace(f1,xR)),n=e.map(s=>s.match(bv).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>kp({...t,output:s}));return s=>{var l;const o=!ER.test(e[0])&&((l=e.find(u=>ER.test(u)))==null?void 0:l.replace(bv,""));let a=0;return e[0].replace(bv,()=>`${r[a++](s)}${o||""}`).replace(Dne,jne)}},W4="react-spring: ",G4=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${W4}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Fne=G4(console.warn);function $ne(){Fne(`${W4}The "interpolate" function is deprecated in v9 (use "to" instead)`)}G4(console.warn);function hw(t){return Se.str(t)&&(t[0]=="#"||/\d/.test(t)||!LE()&&dw.test(t)||t in(Ja||{}))}var K4=LE()?S.useEffect:S.useLayoutEffect,Bne=()=>{const t=S.useRef(!1);return K4(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function zne(){const t=S.useState()[1],e=Bne();return()=>{e.current&&t(Math.random())}}function Une(t,e){const[n]=S.useState(()=>({inputs:e,result:t()})),i=S.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Hne(e,s.inputs)||(s={inputs:e,result:t()}):s=n,S.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Hne(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var Vne=t=>S.useEffect(t,Wne),Wne=[],Pp=Symbol.for("Animated:node"),Gne=t=>!!t&&t[Pp]===t,Rs=t=>t&&t[Pp],$E=(t,e)=>pne(t,Pp,e),fw=t=>t&&t[Pp]&&t[Pp].getPayload(),X4=class{constructor(){$E(this,this)}getPayload(){return this.payload||[]}},lm=class extends X4{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,Se.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new lm(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return Se.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,Se.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Tp=class extends lm{constructor(t){super(0),this._string=null,this._toString=kp({output:[t,t]})}static create(t){return new Tp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(Se.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=kp({output:[this.getValue(),t]})),this._value=0,super.reset()}},V0={dependencies:null},pw=class extends X4{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return yl(this.source,(n,i)=>{Gne(n)?e[i]=n.getValue(t):Ar(n)?e[i]=Mi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Bn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return yl(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){V0.dependencies&&Ar(t)&&V0.dependencies.add(t);const e=fw(t);e&&Bn(e,n=>this.add(n))}},q4=class extends pw{constructor(t){super(t)}static create(t){return new q4(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(Kne)),!0)}};function Kne(t){return(hw(t)?Tp:lm).create(t)}function M_(t){const e=Rs(t);return e?e.constructor:Se.arr(t)?q4:hw(t)?Tp:lm}var AR=(t,e)=>{const n=!Se.fun(t)||t.prototype&&t.prototype.isReactComponent;return S.forwardRef((i,r)=>{const s=S.useRef(null),o=n&&S.useCallback(p=>{s.current=Yne(r,p)},[r]),[a,l]=qne(i,e),u=zne(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&u()},d=new Xne(c,l),h=S.useRef();K4(()=>(h.current=d,Bn(l,p=>cw(p,d)),()=>{h.current&&(Bn(h.current.deps,p=>Ap(p,h.current)),Ye.cancel(h.current.update))})),S.useEffect(c,[]),Vne(()=>()=>{const p=h.current;Bn(p.deps,g=>Ap(g,p))});const f=e.getComponentProps(a.getValue());return S.createElement(t,{...f,ref:o})})},Xne=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ye.write(this.update)}};function qne(t,e){const n=new Set;return V0.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new pw(t),V0.dependencies=null,[t,n]}function Yne(t,e){return t&&(Se.fun(t)?t(e):t.current=e),e}var PR=Symbol.for("AnimatedComponent"),Zne=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new pw(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=TR(o)||"Anonymous";return Se.str(o)?o=s[o]||(s[o]=AR(o,r)):o=o[PR]||(o[PR]=AR(o,r)),o.displayName=`Animated(${a})`,o};return yl(t,(o,a)=>{Se.arr(t)&&(a=TR(o)),s[a]=s(o)}),{animated:s}},TR=t=>Se.str(t)?t:t&&Se.str(t.displayName)?t.displayName:Se.fun(t)&&t.name||null;function iu(t,...e){return Se.fun(t)?t(...e):t}var gf=(t,e)=>t===!0||!!(e&&t&&(Se.fun(t)?t(e):Fa(t).includes(e))),Y4=(t,e)=>Se.obj(t)?e&&t[e]:t,Jne=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Qne=t=>t,Z4=(t,e=Qne)=>{let n=eie;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);Se.und(s)||(i[r]=s)}return i},eie=["config","onProps","onStart","onChange","onPause","onResume","onRest"],tie={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function nie(t){const e={};let n=0;if(yl(t,(i,r)=>{tie[r]||(e[r]=i,n++)}),n)return e}function J4(t){const e=nie(t);if(e){const n={to:e};return yl(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Np(t){return t=Mi(t),Se.arr(t)?t.map(Np):hw(t)?xs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function O_(t){return Se.fun(t)||Se.arr(t)&&Se.obj(t[0])}var iie={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},I_={...iie.default,mass:1,damping:1,easing:B4.linear,clamp:!1},rie=class{constructor(){this.velocity=0,Object.assign(this,I_)}};function sie(t,e,n){n&&(n={...n},NR(n,e),e={...n,...e}),NR(t,e),Object.assign(t,e);for(const o in I_)t[o]==null&&(t[o]=I_[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return Se.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function NR(t,e){if(!Se.und(e.decay))t.duration=void 0;else{const n=!Se.und(e.tension)||!Se.und(e.friction);(n||!Se.und(e.frequency)||!Se.und(e.damping)||!Se.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var RR=[],oie=class{constructor(){this.changed=!1,this.values=RR,this.toValues=null,this.fromValues=RR,this.config=new rie,this.immediate=!1}};function aie(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,c=gf(n.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{Se.und(n.pause)||(r.paused=gf(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||gf(p,e)),l=iu(n.delay||0,e),p?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),l=u.time-Ye.now()}function h(){l>0&&!xs.skipAnimation?(r.delayed=!0,u=Ye.setTimeout(f,l),r.pauseQueue.add(d),r.timeouts.add(u)):f()}function f(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){a(p)}}})}var lie=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?vf(t.get()):e.every(n=>n.noop)?Q4(t.get()):rs(t.get(),e.every(n=>n.finished)),Q4=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),rs=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),vf=t=>({value:t,cancelled:!0,finished:!1});function uie(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=Z4(e,(b,v)=>v==="onRest"?void 0:b);let c,d;const h=new Promise((b,v)=>(c=b,d=v)),f=b=>{const v=r<=(n.cancelId||0)&&vf(i)||r!==n.asyncId&&rs(i,!1);if(v)throw b.result=v,d(b),b},p=(b,v)=>{const y=new MR,w=new OR;return(async()=>{if(xs.skipAnimation)throw D_(n),w.result=rs(i,!1),d(w),w;f(y);const x=Se.obj(b)?{...b}:{...v,to:b};x.parentId=r,yl(u,(E,C)=>{Se.und(x[C])&&(x[C]=E)});const k=await i.start(x);return f(y),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),k})()};let g;if(xs.skipAnimation)return D_(n),rs(i,!1);try{let b;Se.arr(t)?b=(async v=>{for(const y of v)await p(y)})(t):b=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([b.then(c),h]),g=rs(i.get(),!0,!1)}catch(b){if(b instanceof MR)g=b.result;else if(b instanceof OR)g=b.result;else throw b}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return Se.fun(o)&&Ye.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function D_(t,e){D4(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var MR=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},OR=class extends Error{constructor(){super("SkipAnimationSignal")}},L_=t=>t instanceof BE,cie=1,BE=class extends z4{constructor(){super(...arguments),this.id=cie++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Rs(this);return t&&t.getValue()}to(...t){return xs.to(this,t)}interpolate(...t){return $ne(),xs.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Ep(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||lw.sort(this),Ep(this,{type:"priority",parent:this,priority:t})}},$u=Symbol.for("SpringPhase"),e$=1,j_=2,F_=4,p1=t=>(t[$u]&e$)>0,oa=t=>(t[$u]&j_)>0,gh=t=>(t[$u]&F_)>0,IR=(t,e)=>e?t[$u]|=j_|e$:t[$u]&=~j_,DR=(t,e)=>e?t[$u]|=F_:t[$u]&=~F_,St=class extends BE{constructor(t,e){if(super(),this.animation=new oie,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Se.und(t)||!Se.und(e)){const n=Se.obj(t)?{...t}:{...e,from:t};Se.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(oa(this)||this._state.asyncTo)||gh(this)}get goal(){return Mi(this.animation.to)}get velocity(){const t=Rs(this);return t instanceof lm?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return p1(this)}get isAnimating(){return oa(this)}get isPaused(){return gh(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=fw(i.to);!o&&Ar(i.to)&&(r=Fa(Mi(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==Tp?1:o?o[c].lastPosition:r[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const g=i.fromValues[c],b=u.v0!=null?u.v0:u.v0=Se.arr(s.velocity)?s.velocity[c]:s.velocity;let v;const y=s.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(Se.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,x=Math.exp(-(1-w)*p);f=g+b/(1-w)*(1-x),h=Math.abs(u.lastPosition-f)<=y,v=b*x}else{v=u.lastVelocity==null?b:u.lastVelocity;const w=s.restVelocity||y/10,x=s.clamp?0:s.bounce,k=!Se.und(x),E=g==d?u.v0>0:g<d;let C,P=!1;const N=1,I=Math.ceil(t/N);for(let L=0;L<I&&(C=Math.abs(v)>w,!(!C&&(h=Math.abs(d-f)<=y,h)));++L){k&&(P=f==d||f>d==E,P&&(v=-v*x,f=d));const $=-s.tension*1e-6*(f-d),G=-s.friction*.001*v,U=($+G)/s.mass;v=v+U*N,f=f+v*N}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),f=g+s.easing(w)*(d-g),v=(f-u.lastPosition)/t,h=w==1}u.lastVelocity=v,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const a=Rs(this),l=a.getValue();if(e){const u=Mi(i.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ye.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(oa(this)){const{to:t,config:e}=this.animation;Ye.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return Se.und(t)?(n=this.queue||[],this.queue=[]):n=[Se.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>lie(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),D_(this._state,t&&this._lastCallId),Ye.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=Se.obj(n)?n[e]:n,(n==null||O_(n))&&(n=void 0),i=Se.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return p1(this)||(t.reverse&&([n,i]=[i,n]),i=Mi(i),Se.und(i)?Rs(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,Z4(t,(o,a)=>/^on/.test(a)?Y4(o,n):o)),jR(this,t,"onProps"),yh(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return aie(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{gh(this)||(DR(this,!0),pg(s.pauseQueue),yh(this,"onPause",rs(this,vh(this,this.animation.to)),this))},resume:()=>{gh(this)&&(DR(this,!1),oa(this)&&this._resume(),pg(s.resumeQueue),yh(this,"onResume",rs(this,vh(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=die(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(vf(this));const i=!Se.und(t.to),r=!Se.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(vf(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;r&&!i&&(!e.default||Se.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!go(d,u);h&&(a.from=d),d=Mi(d);const f=!go(c,l);f&&this._focus(c);const p=O_(e.to),{config:g}=a,{decay:b,velocity:v}=g;(i||r)&&(g.velocity=0),e.config&&!p&&sie(g,iu(e.config,s),e.config!==o.config?iu(o.config,s):void 0);let y=Rs(this);if(!y||Se.und(c))return n(rs(this,!0));const w=Se.und(e.reset)?r&&!e.default:!Se.und(d)&&gf(e.reset,s),x=w?d:this.get(),k=Np(c),E=Se.num(k)||Se.arr(k)||hw(k),C=!p&&(!E||gf(o.immediate||e.immediate,s));if(f){const L=M_(c);if(L!==y.constructor)if(C)y=this._set(k);else throw Error(`Cannot animate between ${y.constructor.name} and ${L.name}, as the "to" prop suggests`)}const P=y.constructor;let N=Ar(c),I=!1;if(!N){const L=w||!p1(this)&&h;(f||L)&&(I=go(Np(x),k),N=!I),(!go(a.immediate,C)&&!C||!go(g.decay,b)||!go(g.velocity,v))&&(N=!0)}if(I&&oa(this)&&(a.changed&&!w?N=!0:N||this._stop(l)),!p&&((N||Ar(l))&&(a.values=y.getPayload(),a.toValues=Ar(c)?null:P==Tp?[1]:Fa(k)),a.immediate!=C&&(a.immediate=C,!C&&!w&&this._set(l)),N)){const{onRest:L}=a;Bn(fie,G=>jR(this,e,G));const $=rs(this,vh(this,l));pg(this._pendingCalls,$),this._pendingCalls.add(n),a.changed&&Ye.batchedUpdates(()=>{var G;a.changed=!w,L==null||L($,this),w?iu(o.onRest,$):(G=a.onStart)==null||G.call(a,$,this)})}w&&this._set(x),p?n(uie(e.to,e,this._state,this)):N?this._start():oa(this)&&!f?this._pendingCalls.add(n):n(Q4(x))}_focus(t){const e=this.animation;t!==e.to&&(CR(this)&&this._detach(),e.to=t,CR(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Ar(e)&&(cw(e,this),L_(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Ar(t)&&Ap(t,this)}_set(t,e=!0){const n=Mi(t);if(!Se.und(n)){const i=Rs(this);if(!i||!go(n,i.getValue())){const r=M_(n);!i||i.constructor!=r?$E(this,r.create(n)):i.setValue(n),i&&Ye.batchedUpdates(()=>{this._onChange(n,e)})}}return Rs(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,yh(this,"onStart",rs(this,vh(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),iu(this.animation.onChange,t,this)),iu(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Rs(this).reset(Mi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),oa(this)||(IR(this,!0),gh(this)||this._resume())}_resume(){xs.skipAnimation?this.finish():lw.start(this)}_stop(t,e){if(oa(this)){IR(this,!1);const n=this.animation;Bn(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ep(this,{type:"idle",parent:this});const i=e?vf(this.get()):rs(this.get(),vh(this,t??n.to));pg(this._pendingCalls,i),n.changed&&(n.changed=!1,yh(this,"onRest",i,this))}}};function vh(t,e){const n=Np(e),i=Np(t.get());return go(i,n)}function die(t,e=t.loop,n=t.to){const i=iu(e);if(i){const r=i!==!0&&J4(i),s=(r||t).reverse,o=!r||r.reset;return hie({...t,loop:e,default:!1,pause:void 0,to:!s||O_(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function hie(t){const{to:e,from:n}=t=J4(t),i=new Set;return Se.obj(e)&&LR(e,i),Se.obj(n)&&LR(n,i),t.keys=i.size?Array.from(i):null,t}function LR(t,e){yl(t,(n,i)=>n!=null&&e.add(i))}var fie=["onStart","onRest","onChange","onPause","onResume"];function jR(t,e,n){t.animation[n]=e[n]!==Jne(e,n)?Y4(e[n],t.key):void 0}function yh(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var zE=({children:t,...e})=>{const n=S.useContext(W0),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=Une(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=W0;return S.createElement(s,{value:e},t)},W0=pie(zE,{});zE.Provider=W0.Provider;zE.Consumer=W0.Consumer;function pie(t,e){return Object.assign(t,S.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var mie=class extends BE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=kp(...e);const n=this._get(),i=M_(n);$E(this,i.create(n))}advance(t){const e=this._get(),n=this.get();go(e,n)||(Rs(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&FR(this._active)&&m1(this)}_get(){const t=Se.arr(this.source)?this.source.map(Mi):Fa(Mi(this.source));return this.calc(...t)}_start(){this.idle&&!FR(this._active)&&(this.idle=!1,Bn(fw(this),t=>{t.done=!1}),xs.skipAnimation?(Ye.batchedUpdates(()=>this.advance()),m1(this)):lw.start(this))}_attach(){let t=1;Bn(Fa(this.source),e=>{Ar(e)&&cw(e,this),L_(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Bn(Fa(this.source),t=>{Ar(t)&&Ap(t,this)}),this._active.clear(),m1(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Fa(this.source).reduce((e,n)=>Math.max(e,(L_(n)?n.priority:0)+1),0))}};function gie(t){return t.idle!==!1}function FR(t){return!t.size||Array.from(t).every(gie)}function m1(t){t.idle||(t.idle=!0,Bn(fw(t),e=>{e.done=!0}),Ep(t,{type:"idle",parent:t}))}xs.assign({createStringInterpolator:V4,to:(t,e)=>new mie(t,e)});var t$=/^--/;function vie(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!t$.test(t)&&!(yf.hasOwnProperty(t)&&yf[t])?e+"px":(""+e).trim()}var $R={};function yie(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...u}=e,c=Object.values(u),d=Object.keys(u).map(h=>n||t.hasAttribute(h)?h:$R[h]||($R[h]=h.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));s!==void 0&&(t.textContent=s);for(const h in r)if(r.hasOwnProperty(h)){const f=vie(h,r[h]);t$.test(h)?t.style.setProperty(h,f):t.style[h]=f}d.forEach((h,f)=>{t.setAttribute(h,c[f])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var yf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wie=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),bie=["Webkit","Ms","Moz","O"];yf=Object.keys(yf).reduce((t,e)=>(bie.forEach(n=>t[wie(n,e)]=t[e]),t),yf);var xie=/^(matrix|translate|scale|rotate|skew)/,Sie=/^(translate)/,_ie=/^(rotate|skew)/,g1=(t,e)=>Se.num(t)&&t!==0?t+e:t,xv=(t,e)=>Se.arr(t)?t.every(n=>xv(n,e)):Se.num(t)?t===e:parseFloat(t)===e,kie=class extends pw{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>g1(a,"px")).join(",")})`,xv(o,0)])),yl(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(xie.test(a)){if(delete i[a],Se.und(o))return;const l=Sie.test(a)?"px":_ie.test(a)?"deg":"";r.push(Fa(o)),s.push(a==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${g1(h,l)})`,xv(h,0)]:u=>[`${a}(${u.map(c=>g1(c,l)).join(",")})`,xv(u,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new Cie(r,s)),super(i)}},Cie=class extends z4{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Bn(this.inputs,(n,i)=>{const r=Mi(n[0]),[s,o]=this.transforms[i](Se.arr(r)?r:n.map(Mi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Bn(this.inputs,e=>Bn(e,n=>Ar(n)&&cw(n,this)))}observerRemoved(t){t==0&&Bn(this.inputs,e=>Bn(e,n=>Ar(n)&&Ap(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Ep(this,t)}},Eie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];xs.assign({batchedUpdates:Cl.unstable_batchedUpdates,createStringInterpolator:V4,colors:wne});var Aie=Zne(Eie,{applyAnimatedValues:yie,createAnimatedStyle:t=>new kie(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),bn=Aie.animated;const Et={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},at=(t=Et.stone[800])=>({backgroundColor:new St(t),opacity:new St(1)}),_n=()=>({strokeDashoffset:new St(1),opacity:new St(1)}),UE={bus:{address:{stroke:new St(Et.stone[700])},data:{stroke:new St(Et.stone[700])},rd:{stroke:new St(Et.stone[700])},wr:{stroke:new St(Et.stone[700])},iom:_n(),mem:{stroke:new St(Et.red[500])},handshake:_n(),pic:_n(),pio:_n(),timer:_n(),intr:_n(),inta:_n(),int0:_n(),int1:_n(),int2:_n(),"switches->pio":_n(),"pio->leds":_n(),printer:{data:_n(),strobe:_n(),busy:_n()}},clock:{angle:new St(0)},cpu:{internalBus:{address:{strokeDashoffset:new St(1),opacity:new St(1),path:new St("")},data:{strokeDashoffset:new St(1),opacity:new St(1),path:new St("")}},alu:{operands:_n(),results:_n(),cog:{rot:new St(0)},operation:{backgroundColor:new St(Et.stone[800])}},decoder:{path:_n(),progress:{progress:new St(0),opacity:new St(1)}},AX:at(),BX:at(),CX:at(),DX:at(),SP:at(),IP:at(),IR:at(),ri:{...at(),opacity:new St(0)},id:{...at(),opacity:new St(0)},left:at(),right:at(),result:at(),FLAGS:at(),MAR:at(),MBR:at()},handshake:{DATA:at(),STATE:at()},memory:{"operating-cell":{color:new St(Et.white)}},pic:{IMR:at(),IRR:at(),ISR:at(),INT0:at(),INT1:at(),INT2:at(),INT3:at(),INT4:at(),INT5:at(),INT6:at(),INT7:at()},pio:{PA:at(),PB:at(),CA:at(),CB:at()},printer:{printing:{progress:new St(0),opacity:new St(1)}},timer:{CONT:at(),COMP:at()}};function Mt(t){return h3(UE,t)}function n$(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof St?e[n]=i.get():e[n]=n$(i)}return e}const Pie=n$(UE);function i$(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof St?i.set(e[n]):i$(t[n],e[n])}}const Tie=()=>i$(UE,Pie),Rp=new Set;async function st(t,e){const n=z.get(tn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=z.sub(tn,()=>{z.get(tn).type!=="paused"&&(o(),s())})}),await st(t,e);const i=mi();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:e.duration*i.executionUnit,easing:B4[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;const l=Mt(s);if(a===void 0)return l.set(o);{Rp.add(s);const u=await Mt(s).start({from:o,to:a,config:r});return Rp.delete(s),u}}))}const Nie=()=>Rp.forEach(t=>Mt(t).pause()),Rie=()=>Rp.forEach(t=>Mt(t).resume());function r$(){Rp.forEach(t=>{const e=Mt(t);e.stop(!0),e.isPaused&&e.resume()}),setTimeout(()=>Tie(),10)}async function Sr(t,e=Et.mantis[400]){return await st({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function _r(t){return await st({key:`${t}.backgroundColor`,to:Et.stone[800]},{duration:1,easing:"easeOutQuart"})}async function Od(t){await st({key:"bus.data.stroke",to:Et.mantis[400]},{duration:5,easing:"easeOutSine"}),await Sr("cpu.MBR"),z.set(F0,t),await _r("cpu.MBR")}async function Fr(t,e){return await st([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function gi(t){return await st({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function Mie(t){switch(t.type){case"bus:io.selected":{await Promise.all([st({key:"bus.mem.stroke",to:Et.stone[700]},{duration:1,easing:"easeInSine"}),Fr(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Bu(t.error);return}case"bus:reset":{await Promise.all([st([{key:"bus.address.stroke",to:Et.stone[700]},{key:"bus.data.stroke",to:Et.stone[700]},{key:"bus.rd.stroke",to:Et.stone[700]},{key:"bus.wr.stroke",to:Et.stone[700]}],{duration:1,easing:"easeInSine"}),st({key:"bus.mem.stroke",to:Et.red[500]},{duration:1,easing:"easeOutSine"}),gi("bus.iom"),gi("bus.handshake"),gi("bus.pio"),gi("bus.pic"),gi("bus.timer")]);return}default:return t}}async function Oie(t){switch(t.type){case"clock:tick":return;default:return t.type}}function Iie(t,e,n){let i="";switch(e&&(i="M 470 388 H 550 V 349 H 659"),n&&(i="M 629 250 H 550 V 349 H 659"),t){case"SP":return"M 451 309 H 550 V 349 H 659";case"IP":return"M 451 349 H 659";case"ri":return e||n?i:"";default:throw new Error(`Invalid register ${t}`)}}function Die({showSP:t,showri:e}){const{path:n,...i}=Mt("cpu.internalBus.address"),[r]=S.useState(!1),s=[t?"M 451 309 H 550 V 250":"","M 451 349 H 550 V 255",e?"M 470 388 H 550 V 300":"","M 451 349 H 659"];return m.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[s.map((o,a)=>m.jsx("path",{className:`fill-none stroke-bus ${r&&o==="M 444 388 H 575 V 349"?"stroke-mantis-400":"stroke-stone-700"}`,strokeLinejoin:"round",d:o},a)),m.jsx(bn.path,{d:n,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}var HE={exports:{}},td=typeof Reflect=="object"?Reflect:null,BR=td&&typeof td.apply=="function"?td.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},Sv;td&&typeof td.ownKeys=="function"?Sv=td.ownKeys:Object.getOwnPropertySymbols?Sv=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Sv=function(e){return Object.getOwnPropertyNames(e)};function Lie(t){console&&console.warn&&console.warn(t)}var s$=Number.isNaN||function(e){return e!==e};function bt(){bt.init.call(this)}HE.exports=bt;HE.exports.once=Bie;bt.EventEmitter=bt;bt.prototype._events=void 0;bt.prototype._eventsCount=0;bt.prototype._maxListeners=void 0;var zR=10;function mw(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(bt,"defaultMaxListeners",{enumerable:!0,get:function(){return zR},set:function(t){if(typeof t!="number"||t<0||s$(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");zR=t}});bt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};bt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||s$(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function o$(t){return t._maxListeners===void 0?bt.defaultMaxListeners:t._maxListeners}bt.prototype.getMaxListeners=function(){return o$(this)};bt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")BR(l,this,n);else for(var u=l.length,c=d$(l,u),i=0;i<u;++i)BR(c[i],this,n);return!0};function a$(t,e,n,i){var r,s,o;if(mw(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=o$(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Lie(a)}return t}bt.prototype.addListener=function(e,n){return a$(this,e,n,!1)};bt.prototype.on=bt.prototype.addListener;bt.prototype.prependListener=function(e,n){return a$(this,e,n,!0)};function jie(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l$(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=jie.bind(i);return r.listener=n,i.wrapFn=r,r}bt.prototype.once=function(e,n){return mw(n),this.on(e,l$(this,e,n)),this};bt.prototype.prependOnceListener=function(e,n){return mw(n),this.prependListener(e,l$(this,e,n)),this};bt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(mw(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():Fie(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};bt.prototype.off=bt.prototype.removeListener;bt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function u$(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?$ie(r):d$(r,r.length)}bt.prototype.listeners=function(e){return u$(this,e,!0)};bt.prototype.rawListeners=function(e){return u$(this,e,!1)};bt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):c$.call(t,e)};bt.prototype.listenerCount=c$;function c$(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}bt.prototype.eventNames=function(){return this._eventsCount>0?Sv(this._events):[]};function d$(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function Fie(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function $ie(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Bie(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}h$(t,e,s,{once:!0}),e!=="error"&&zie(t,r,{once:!0})})}function zie(t,e,n){typeof t.on=="function"&&h$(t,"error",e,n)}function h$(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Uie=HE.exports;function so(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(so.prototype[Symbol.iterator]=function(){return this});so.of=function(){var t=arguments,e=t.length,n=0;return new so(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};so.empty=function(){var t=new so(function(){return{done:!0}});return t};so.fromSequence=function(t){var e=0,n=t.length;return new so(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};so.is=function(t){return t instanceof so?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var gw=so;const Vr=Hu(gw);var vw={};vw.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";vw.SYMBOL_SUPPORT=typeof Symbol<"u";var Hie=gw,f$=vw,Vie=f$.ARRAY_BUFFER_SUPPORT,Wie=f$.SYMBOL_SUPPORT;function Gie(t){return typeof t=="string"||Array.isArray(t)||Vie&&ArrayBuffer.isView(t)?Hie.fromSequence(t):typeof t!="object"||t===null?null:Wie&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var p$=function(e){var n=Gie(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Kie=p$,Xie=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=Kie(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const m$=Hu(Xie);var qie=gw,Yie=p$,Zie=function(){var e=arguments,n=null,i=-1;return new qie(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=Yie(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const jo=Hu(Zie);function Jie(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let yn=Jie;typeof Object.assign=="function"&&(yn=Object.assign);function $r(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function zn(t){return typeof t=="object"&&t!==null}function g$(t){let e;for(e in t)return!1;return!0}function vr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Kr(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function UR(t){return!(!zn(t)||t.attributes&&!Array.isArray(t.attributes))}function Qie(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class VE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class xe extends VE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,xe.prototype.constructor)}}class ce extends VE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ce.prototype.constructor)}}class $e extends VE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,$e.prototype.constructor)}}function v$(t,e){this.key=t,this.attributes=e,this.clear()}v$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function y$(t,e){this.key=t,this.attributes=e,this.clear()}y$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function w$(t,e){this.key=t,this.attributes=e,this.clear()}w$.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Kd(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}Kd.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};Kd.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};Kd.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};Kd.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const b$=0,x$=1,ere=2,S$=3;function ea(t,e,n,i,r,s,o){let a,l,u,c;if(i=""+i,n===b$){if(a=t._nodes.get(i),!a)throw new ce(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,c=s}else if(n===S$){if(r=""+r,l=t._edges.get(r),!l)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(i===d)a=l.target;else if(i===h)a=l.source;else throw new ce(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=s,c=o}else{if(l=t._edges.get(i),!l)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===x$?a=l.source:a=l.target,u=r,c=s}return[a,u,c]}function tre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ea(this,e,n,i,r,s);return o.attributes[a]}}function nre(t,e,n){t.prototype[e]=function(i,r){const[s]=ea(this,e,n,i,r);return s.attributes}}function ire(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ea(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function rre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=ea(this,e,n,i,r,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function sre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=ea(this,e,n,i,r,s,o);if(typeof u!="function")throw new xe(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function ore(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ea(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function are(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ea(this,e,n,i,r,s);if(!zn(a))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function lre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ea(this,e,n,i,r,s);if(!zn(a))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return yn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function ure(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ea(this,e,n,i,r,s);if(typeof a!="function")throw new xe(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const cre=[{name:t=>`get${t}Attribute`,attacher:tre},{name:t=>`get${t}Attributes`,attacher:nre},{name:t=>`has${t}Attribute`,attacher:ire},{name:t=>`set${t}Attribute`,attacher:rre},{name:t=>`update${t}Attribute`,attacher:sre},{name:t=>`remove${t}Attribute`,attacher:ore},{name:t=>`replace${t}Attributes`,attacher:are},{name:t=>`merge${t}Attributes`,attacher:lre},{name:t=>`update${t}Attributes`,attacher:ure}];function dre(t){cre.forEach(function({name:e,attacher:n}){n(t,e("Node"),b$),n(t,e("Source"),x$),n(t,e("Target"),ere),n(t,e("Opposite"),S$)})}function hre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$r(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function fre(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=$r(this,s,o,n),!r)throw new ce(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function pre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$r(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function mre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=$r(this,a,l,n),!o)throw new ce(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function gre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=$r(this,a,l,n),!o)throw new ce(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new xe(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function vre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$r(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function yre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$r(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!zn(r))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function wre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$r(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!zn(r))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return yn(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function bre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$r(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new xe(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const xre=[{name:t=>`get${t}Attribute`,attacher:hre},{name:t=>`get${t}Attributes`,attacher:fre},{name:t=>`has${t}Attribute`,attacher:pre},{name:t=>`set${t}Attribute`,attacher:mre},{name:t=>`update${t}Attribute`,attacher:gre},{name:t=>`remove${t}Attribute`,attacher:vre},{name:t=>`replace${t}Attributes`,attacher:yre},{name:t=>`merge${t}Attributes`,attacher:wre},{name:t=>`update${t}Attributes`,attacher:bre}];function Sre(t){xre.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const _re=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function kre(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function Cre(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function v1(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Vr(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function Ere(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function Are(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function y1(t,e){let n=t[e];return n.next!==void 0?new Vr(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Vr.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Pre(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):m$(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function _$(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=a;if(l=i(c,d,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return c}}function Tre(t,e){if(t.size===0)return Vr.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Vr(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function WE(t,e,n,i,r,s){const o=e?Cre:kre;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function Nre(t,e,n,i){const r=[];return WE(!1,t,e,n,i,function(s){r.push(s)}),r}function Rre(t,e,n){let i=Vr.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=jo(i,v1(n.in))),e!=="in"&&typeof n.out<"u"&&(i=jo(i,v1(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=jo(i,v1(n.undirected))),i}function GE(t,e,n,i,r,s,o){const a=n?Are:Ere;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function Mre(t,e,n,i,r){const s=[];return GE(!1,t,e,n,i,r,function(o){s.push(o)}),s}function Ore(t,e,n,i){let r=Vr.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=jo(r,y1(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=jo(r,y1(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=jo(r,y1(n.undirected,i))),r}function Ire(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return Pre(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ce(`Graph.${n}: could not find the "${s}" node in the graph.`);return Nre(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ce(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ce(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return Mre(i,this.multi,r,a,o)}throw new xe(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Dre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,_$(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new ce(`Graph.${s}: could not find the "${u}" node in the graph.`);return WE(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new ce(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new ce(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return GE(!1,i,this.multi,r,h,c,d)}throw new xe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,g,b,v,y,w,x)=>{d[f++]=c(p,g,b,v,y,w,x)})}else d=[],u.push((h,f,p,g,b,v,y)=>{d.push(c(h,f,p,g,b,v,y))});return this[s].apply(this,u),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,g,b,v,y)=>{c(h,f,p,g,b,v,y)&&d.push(h)}),this[s].apply(this,u),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new xe(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new xe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,g,b,v,y,w)=>{h=c(h,f,p,g,b,v,y,w)}),this[s].apply(this,u),h}}function Lre(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=l,_$(!0,this,i,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new ce(`Graph.${s}: could not find the "${l}" node in the graph.`);return WE(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new ce(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new ce(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return GE(!0,i,this.multi,r,d,u,c)}throw new xe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,g,b,v)=>u(d,h,f,p,g,b,v)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,g,b,v)=>!u(d,h,f,p,g,b,v)),!this[s].apply(this,l)}}function jre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Vr.empty();if(!arguments.length)return Tre(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ce(`Graph.${s}: could not find the "${o}" node in the graph.`);return Rre(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ce(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ce(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Ore(i,r,l,a)}throw new xe(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Fre(t){_re.forEach(e=>{Ire(t,e),Dre(t,e),Lre(t,e),jre(t,e)})}const $re=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function yw(){this.A=null,this.B=null}yw.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};yw.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function wh(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const c=r(u.key,u.attributes);if(t&&c)return u.key}}function KE(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return wh(t,null,i,i.undirected,r);if(typeof n=="string")return wh(t,null,i,i[n],r)}const s=new yw;let o;if(e!=="undirected"){if(n!=="out"){if(o=wh(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=wh(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=wh(t,s,i,i.undirected,r),t&&o))return o}function Bre(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return KE(!1,t,e,n,function(r){i.push(r)}),i}function bh(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Vr(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],u=l.source,c=l.target;if(a=u===e?c:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function zre(t,e,n){if(t!=="mixed"){if(t==="undirected")return bh(null,n,n.undirected);if(typeof e=="string")return bh(null,n,n[e])}let i=Vr.empty();const r=new yw;return t!=="undirected"&&(e!=="out"&&(i=jo(i,bh(r,n,n.in))),e!=="in"&&(i=jo(i,bh(r,n,n.out)))),t!=="directed"&&(i=jo(i,bh(r,n,n.undirected))),i}function Ure(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ce(`Graph.${n}: could not find the "${s}" node in the graph.`);return Bre(i==="mixed"?this.type:i,r,o)}}function Hre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new ce(`Graph.${s}: could not find the "${u}" node in the graph.`);KE(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,d){if(arguments.length<3)throw new xe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function Vre(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new ce(`Graph.${o}: could not find the "${u}" node in the graph.`);return KE(!0,i==="mixed"?this.type:i,r,d,c)};const a="some"+s;t.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;t.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function Wre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Vr.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ce(`Graph.${s}: could not find the "${o}" node in the graph.`);return zre(i==="mixed"?this.type:i,r,a)}}function Gre(t){$re.forEach(e=>{Ure(t,e),Hre(t,e),Vre(t,e),Wre(t,e)})}function yg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,u,c,d,h;for(;a=s.next(),a.done!==!0;){let f=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do h=d.target,f=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do h=d.target,h.key!==u&&(h=d.source),f=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!f&&r(l.key,null,l.attributes,null,null,null,null)}}function Kre(t,e){const n={key:t};return g$(e.attributes)||(n.attributes=yn({},e.attributes)),n}function Xre(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return g$(n.attributes)||(i.attributes=yn({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function qre(t){if(!zn(t))throw new xe('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new xe("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!zn(t.attributes)||t.attributes===null))throw new xe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Yre(t){if(!zn(t))throw new xe('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new xe("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new xe("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!zn(t.attributes)||t.attributes===null))throw new xe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new xe("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Zre=Qie(),Jre=new Set(["directed","undirected","mixed"]),HR=new Set(["domain","_events","_eventsCount","_maxListeners"]),Qre=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],ese={allowSelfLoops:!0,multi:!1,type:"mixed"};function tse(t,e,n){if(n&&!zn(n))throw new xe(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new $e(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function VR(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function k$(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new $e(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new $e(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!zn(a))throw new xe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new $e(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),u=t._nodes.get(o);if(!l)throw new ce(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new ce(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new $e(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new $e(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Kd(i,r,l,u,a);t._edges.set(r,d);const h=s===o;return i?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,c.key=r,t.emit("edgeAdded",c),r}function nse(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new $e(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new $e(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new xe(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!zn(a))throw new xe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&s===o)throw new $e(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new $e(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const y=[f.key,!1,!1,!1];if(l?!u:!a)return y;if(l){const w=f.attributes;f.attributes=u(w),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else yn(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return y}a=a||{},l&&u&&(a=u(a));const p={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new $e(`Graph.${e}: the "${r}" edge already exists in the graph.`);let g=!1,b=!1;c||(c=VR(t,s,{}),g=!0,s===o&&(d=c,b=!0)),d||(d=VR(t,o,{}),b=!0),h=new Kd(i,r,c,d,a),t._edges.set(r,h);const v=s===o;return i?(c.undirectedDegree++,d.undirectedDegree++,v&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,v&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,g,b]}function rc(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Pt extends Uie.EventEmitter{constructor(e){if(super(),e=yn({},ese,e),typeof e.multi!="boolean")throw new xe(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Jre.has(e.type))throw new xe(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new xe(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?v$:e.type==="directed"?y$:w$;vr(this,"NodeDataClass",n);const i="geid_"+Zre()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};vr(this,"_attributes",{}),vr(this,"_nodes",new Map),vr(this,"_edges",new Map),vr(this,"_directedSize",0),vr(this,"_undirectedSize",0),vr(this,"_directedSelfLoopCount",0),vr(this,"_undirectedSelfLoopCount",0),vr(this,"_edgeKeyGenerator",s),vr(this,"_options",e),HR.forEach(o=>vr(this,o,this[o])),Kr(this,"order",()=>this._nodes.size),Kr(this,"size",()=>this._edges.size),Kr(this,"directedSize",()=>this._directedSize),Kr(this,"undirectedSize",()=>this._undirectedSize),Kr(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Kr(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Kr(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Kr(this,"multi",this._options.multi),Kr(this,"type",this._options.type),Kr(this,"allowSelfLoops",this._options.allowSelfLoops),Kr(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new xe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new xe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new xe(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new $e("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ce(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new $e("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ce(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new $e("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new ce(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new ce(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new ce(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return tse(this,e,n).key}mergeNode(e,n){if(n&&!zn(n))throw new xe(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(yn(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new xe(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do rc(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do rc(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do rc(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=$r(this,i,r,this.type),!n)throw new ce(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ce(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return rc(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new $e("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $e("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=$r(this,e,n,"directed");if(!i)throw new ce(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return rc(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new $e("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $e("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=$r(this,e,n,"undirected");if(!i)throw new ce(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return rc(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new xe("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!zn(e))throw new xe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!zn(e))throw new xe("Graph.mergeAttributes: provided attributes are not a plain object.");return yn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new xe("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new xe("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!UR(n))throw new xe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new xe("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!UR(n))throw new xe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new xe("Graph.forEachAdjacencyEntry: expecting a callback.");yg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new xe("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");yg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new xe("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");yg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new xe("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");yg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):m$(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new xe("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new xe("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new xe("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new xe("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new xe("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new xe("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new xe("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new xe("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Vr(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=Kre(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=Xre(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Pt)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):p?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!zn(e))throw new xe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!zn(e.attributes))throw new xe("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new xe("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],qre(o);const{key:l,attributes:u}=o;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new xe("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],Yre(a);const{source:u,target:c,attributes:d,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new Pt(yn({},this._options,e));return n.replaceAttributes(yn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=yn({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new $e(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new $e("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new $e("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,k$(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,yn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!HR.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,vr(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Pt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pt.prototype.inspect);Qre.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?k$:nse;t.generateKey?Pt.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Pt.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});dre(Pt);Sre(Pt);Fre(Pt);Gre(Pt);class C$ extends Pt{constructor(e){const n=yn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new xe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new xe('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class XE extends Pt{constructor(e){const n=yn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new xe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new xe('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class E$ extends Pt{constructor(e){const n=yn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new xe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class A$ extends Pt{constructor(e){const n=yn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new xe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new xe('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class P$ extends Pt{constructor(e){const n=yn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new xe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new xe('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Xd(t){t.from=function(e,n){const i=yn({},e.options,n),r=new t(i);return r.import(e),r}}Xd(Pt);Xd(C$);Xd(XE);Xd(E$);Xd(A$);Xd(P$);Pt.Graph=Pt;Pt.DirectedGraph=C$;Pt.UndirectedGraph=XE;Pt.MultiGraph=E$;Pt.MultiDirectedGraph=A$;Pt.MultiUndirectedGraph=P$;Pt.InvalidArgumentsGraphError=xe;Pt.NotFoundGraphError=ce;Pt.UsageGraphError=$e;var ise=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},T$=vw,rse=T$.ARRAY_BUFFER_SUPPORT,sse=T$.SYMBOL_SUPPORT,ose=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||rse&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(sse&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},N$=gw,ase=ose;function dn(){this.clear()}dn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};dn.prototype.enqueue=function(t){return this.items.push(t),++this.size};dn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};dn.prototype.peek=function(){if(this.size)return this.items[this.offset]};dn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};dn.prototype.toArray=function(){return this.items.slice(this.offset)};dn.prototype.values=function(){var t=this.items,e=this.offset;return new N$(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};dn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new N$(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(dn.prototype[Symbol.iterator]=dn.prototype.values);dn.prototype.toString=function(){return this.toArray().join(",")};dn.prototype.toJSON=function(){return this.toArray()};dn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:dn,enumerable:!1}),t};typeof Symbol<"u"&&(dn.prototype[Symbol.for("nodejs.util.inspect.custom")]=dn.prototype.inspect);dn.from=function(t){var e=new dn;return ase(t,function(n){e.enqueue(n)}),e};dn.of=function(){return dn.from(arguments)};var lse=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},R$=ise,use=lse;function cse(t,e,n){if(!R$(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],u,c,d,h,f,p,g,b,v=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(u=a,a=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=r(c),p=0,b=d.length;p<b;p++)if(h=d[p],h in s||(a.push(h),s[h]=c),h in o){v=!0;break e}}else for(u=l,l=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=i(c),p=0,b=d.length;p<b;p++)if(h=d[p],h in o||(l.push(h),o[h]=c),h in s){v=!0;break e}if(!v)return null;for(var y=[];h;)y.unshift(h),h=s[h];for(h=o[y[y.length-1]];h;)y.push(h),h=o[h];return y.length?y:null}function M$(t,e,n){if(!R$(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,u;o.length!==0;){var c=[];for(a=0,l=o.length;a<l;a++)u=o[a],!i.has(u)&&(i.add(u),use(c,e[t](u)),r[u]=s);s++,o=c}return r}M$.bind(null,"outboundNeighbors");M$.bind(null,"neighbors");var dse=cse;const q=new XE({allowSelfLoops:!1});q.addNode("MBR",{position:[620,250]});q.addNode("AX",{position:[455,45]});q.addNode("BX",{position:[455,85]});q.addNode("CX",{position:[455,125]});q.addNode("DX",{position:[455,165]});q.addNode("id",{position:[451,205]});q.addNode("SP",{position:[451,309]});q.addNode("IP",{position:[451,349]});q.addNode("ri",{position:[451,388]});q.addNode("MAR",{position:[698,349]});q.addNode("result",{position:[272,115]});q.addNode("ALUresult",{position:[370,115]});q.addNode("FLAGS",{position:[250,225]});q.addNode("IR",{position:[205,272]});q.addNode("left",{position:[130,85]});q.addNode("right",{position:[125,145]});q.addNode("rmbr",{position:[250,390]});q.addNode("bleft1",{position:[550,16]});q.addNode("bleft2",{position:[90,16]});q.addNode("bleft3",{position:[90,85]});q.addNode("AX join",{position:[425,45]});q.addNode("BX join",{position:[425,85]});q.addNode("CX join",{position:[425,125]});q.addNode("DX join",{position:[425,165]});q.addNode("id join",{position:[421,205]});q.addNode("data mbr join",{position:[421,250]});q.addNode("SP join",{position:[421,309]});q.addNode("IP join",{position:[421,349]});q.addNode("ri join",{position:[421,388]});q.addNode("MAR join1",{position:[550,388]});q.addNode("MAR join2",{position:[550,349]});q.addNode("addresses mbr join",{position:[421,250]});q.addNode("result mbr join",{position:[370,250]});q.addNode("FLAGS mbr join",{position:[250,250]});q.addNode("IR mbr join",{position:[205,250]});q.addNode("left join",{position:[30,85]});q.addNode("right join",{position:[90,145]});q.addNode("operands mbr join",{position:[90,250]});q.addNode("outr mbr join",{position:[550,250]});q.addNode("mbr reg join",{position:[421,250]});q.addNode("AX out",{position:[465,45]});q.addNode("BX out",{position:[465,85]});q.addNode("CX out",{position:[465,125]});q.addNode("DX out",{position:[465,165]});q.addNode("id out",{position:[460,205]});q.addNode("SP out",{position:[510,309]});q.addNode("IP out",{position:[510,349]});q.addNode("AX out join",{position:[550,45]});q.addNode("BX out join",{position:[550,85]});q.addNode("CX out join",{position:[550,125]});q.addNode("DX out join",{position:[550,165]});q.addNode("id out join",{position:[550,205]});q.addNode("SP out join",{position:[550,309]});q.addNode("IP out join",{position:[550,349]});q.addNode("ri out join",{position:[550,388]});q.addUndirectedEdge("AX","AX out");q.addUndirectedEdge("BX","BX out");q.addUndirectedEdge("CX","CX out");q.addUndirectedEdge("DX","DX out");q.addUndirectedEdge("id","id out");q.addUndirectedEdge("IP","IP out");q.addUndirectedEdge("SP","SP out");q.addUndirectedEdge("AX out","AX out join");q.addUndirectedEdge("BX out","BX out join");q.addUndirectedEdge("CX out","CX out join");q.addUndirectedEdge("DX out","DX out join");q.addUndirectedEdge("id out","id out join");q.addUndirectedEdge("AX out join","outr mbr join");q.addUndirectedEdge("BX out join","outr mbr join");q.addUndirectedEdge("CX out join","outr mbr join");q.addUndirectedEdge("DX out join","outr mbr join");q.addUndirectedEdge("id out join","outr mbr join");q.addUndirectedEdge("AX out join","bleft1");q.addUndirectedEdge("BX out join","bleft1");q.addUndirectedEdge("CX out join","bleft1");q.addUndirectedEdge("DX out join","bleft1");q.addUndirectedEdge("id out join","bleft1");q.addUndirectedEdge("bleft1","bleft2");q.addUndirectedEdge("bleft2","bleft3");q.addUndirectedEdge("bleft3","left");q.addUndirectedEdge("IP out join","outr mbr join");q.addUndirectedEdge("ri out join","outr mbr join");q.addUndirectedEdge("SP out join","outr mbr join");q.addUndirectedEdge("SP out join","MAR join2");q.addUndirectedEdge("outr mbr join","mbr reg join");q.addUndirectedEdge("MBR","outr mbr join");q.addUndirectedEdge("mbr reg join","AX join");q.addUndirectedEdge("mbr reg join","BX join");q.addUndirectedEdge("mbr reg join","CX join");q.addUndirectedEdge("mbr reg join","DX join");q.addUndirectedEdge("mbr reg join","id join");q.addUndirectedEdge("outr mbr join","operands mbr join");q.addUndirectedEdge("AX join","AX");q.addUndirectedEdge("BX join","BX");q.addUndirectedEdge("CX join","CX");q.addUndirectedEdge("DX join","DX");q.addUndirectedEdge("id join","data mbr join");q.addUndirectedEdge("MBR","data mbr join");q.addUndirectedEdge("IP","IP join");q.addUndirectedEdge("SP","SP join");q.addUndirectedEdge("ri","ri join");q.addUndirectedEdge("MAR join1","ri");q.addUndirectedEdge("MAR join2","MAR join1");q.addUndirectedEdge("MAR","MAR join2");q.addUndirectedEdge("IP join","SP join");q.addUndirectedEdge("SP join","ri join");q.addUndirectedEdge("IP join","addresses mbr join");q.addUndirectedEdge("addresses mbr join","data mbr join");q.addUndirectedEdge("result","ALUresult");q.addUndirectedEdge("ALUresult","result mbr join");q.addUndirectedEdge("result mbr join","addresses mbr join");q.addUndirectedEdge("FLAGS","FLAGS mbr join");q.addUndirectedEdge("FLAGS mbr join","result mbr join");q.addUndirectedEdge("IR","IR mbr join");q.addUndirectedEdge("IR mbr join","FLAGS mbr join");q.addUndirectedEdge("left","left join");q.addUndirectedEdge("right","right join");q.addUndirectedEdge("left join","right join");q.addUndirectedEdge("right join","operands mbr join");function hse(t,e,n,i){console.log("from:",t),console.log("to:",e);const r=(u,c)=>c==="left"?[u,"bleft1","bleft2","bleft3","left",`${u} out`,`${u} out join`,"outr mbr join","mbr reg join",`${c} join`,c]:[u,`${u} out`,`${u} out join`,"outr mbr join","mbr reg join",`${c} join`,c];let s=[];const o=["AX","BX","CX","DX","id"];if(t==="MBR"&&e==="left"?s=["MBR","outr mbr join","bleft1","bleft2","bleft3","left"]:t==="MBR"&&e==="ri"?s=["MBR","outr mbr join","SP out join","MAR join2","MAR"]:t==="MBR"&&o.includes(e)?s=["MBR","mbr reg join",`${e} join`,e]:o.includes(t)&&o.includes(e)?s=r(t,e):t==="IP"&&e==="id"?s=["IP out","IP out join","outr mbr join","mbr reg join","id join","id"]:t==="id"&&e==="ri"?s=["id out","id out join","outr mbr join","MAR join2","MAR"]:t==="BX"&&e==="ri"?s=["BX out","BX out join","outr mbr join","MAR join2","MAR"]:t==="id"&&e==="MBR"?s=["id out","id out join","outr mbr join","MBR"]:t==="id"&&e==="IP"&&n==="RET"?s=["MBR","mbr reg join","IP join","IP"]:s=dse(q,t,e)||[],t==="ri"&&e==="IP"&&(s=["MBR","mbr reg join","IP join","IP"]),t==="ri"&&e==="IP"&&n==="CALL"&&(s=["ri","ri out join","outr mbr join","mbr reg join","IP join","IP"]),t==="MBR"&&e==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(t==="MBR"&&e==="ri"&&n==="CALL"&&(s=["MBR","mbr reg join","ri join","ri"]),t==="MBR"&&e==="ri"&&(n==="MOV"||n==="INT")&&i==="mem<-imd"&&(s=["MBR","mbr reg join","ri join","ri"]),t==="IP"&&e==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 250 H 620";if(t==="MBR"&&e==="ri"&&i==="mem<-imd"&&(n==="ADD"||n==="SUB")&&(s=["MBR","mbr reg join","ri join","ri"]),s.length===0)throw new Error(`No path from ${t} to ${e}`);const a=q.getNodeAttribute(s[0],"position");console.log("start:",a);let l=`M ${a[0]} ${a[1]}`;for(let u=1;u<s.length;u++){const[c,d]=q.getNodeAttribute(s[u],"position");l+=` L ${c} ${d}`}return l}function fse({showSP:t,showid:e,showri:n}){const{path:i,...r}=Mt("cpu.internalBus.data");return m.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[m.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 370 V 250","M 250 225 V 250","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 430 349 H 421","V 250","M 451 349 H 421",t?"M 451 309 H 421":"M 451 309",n?"M 470 388 H 421 V 300":"","M 455 45 H 425","V 250","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"","M 550 45 H 465","M 550 85 H 465","M 550 125 H 465","M 550 165 H 465",e?"M 550 205 H 460":"",n?"M 550 388 H 480":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220"].join(" ")}),m.jsx(bn.path,{d:i,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r})]})}const w1=(t,e,n,i)=>{const r=hse(t,e,n,i);return st([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},b1=()=>st({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});let aa="",wg="",x1=!1,bg=!1,xg=0;async function pse(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await st([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),z.set(k4,t.operation),await Promise.all([st({key:"cpu.alu.operation.backgroundColor",to:Et.mantis[400]},{duration:1,easing:"easeOutQuart"}),st({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([st({key:"cpu.alu.operation.backgroundColor",to:Et.stone[800]},{duration:1,easing:"easeOutQuart"}),st([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([Sr("cpu.result"),Sr("cpu.FLAGS")]),z.set(Ge.FLAGS,t.flags),z.set(Ge.result,t.result),await Promise.all([_r("cpu.result"),_r("cpu.FLAGS")]),await st([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{z.set(ns,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await st([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{aa=t.instruction.name,wg=t.instruction.willUse.ri?"mem<-imd":"",x1=!!(t.instruction.willUse.ri&&aa==="MOV"),bg=!!(t.instruction.willUse.ri&&(aa==="ADD"||aa==="SUB"||aa==="INT")),xg=0,P4(t.instruction.position.start),z.set(ns,{phase:"fetching",metadata:t.instruction}),await st([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{z.set(ns,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await st([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await st([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await st([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{z.set(ns,{phase:"stopped",error:t.error}),Bu(t.error);return}case"cpu:halt":case"cpu:int.0":{z.set(ns,{phase:"stopped"}),Bu();return}case"cpu:int.3":{An();return}case"cpu:int.6":{z.set(ns,{phase:"int6"});return}case"cpu:int.7":{z.set(ns,{phase:"int7"});return}case"cpu:inta.off":{await gi("bus.inta");return}case"cpu:inta.on":{await Fr("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await st({key:"bus.address.stroke",to:Et.blue[500]},{duration:5,easing:"easeInOutSine"}),await st({key:`bus.${e}.stroke`,to:Et.red[500]},{duration:5,easing:"easeOutSine"}),await st({key:"bus.data.stroke",to:Et.mantis[400]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await Fr("bus.iom",15);return}case"cpu:mar.set":{xg++,console.log("countersetMAR",xg),xg===4&&bg&&(x1=!0,bg=!1),await st([{key:"cpu.internalBus.address.path",from:Iie(t.register,x1,bg)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await Sr("cpu.MAR",Et.blue[500]),z.set(S4,z.get(Ge[t.register])),await Promise.all([_r("cpu.MAR"),st({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=nu(t.register);await w1("MBR",e,aa,wg),await Sr(`cpu.${e}`),z.set(Ge[t.register],z.get(F0)),await Promise.all([_r(`cpu.${e}`),b1()]);return}case"cpu:mbr.set":{const[e]=nu(t.register);await w1(e,"MBR",aa,wg),await Sr("cpu.MBR"),z.set(F0,z.get(Ge[t.register])),await Promise.all([_r("cpu.MBR"),b1()]);return}case"cpu:register.copy":{const[e]=nu(t.src),[n]=nu(t.dest);e!==n&&await w1(e,n,aa,wg),await Sr(`cpu.${n}`),z.set(Ge[t.dest],z.get(Ge[t.src])),await Promise.all([_r(`cpu.${n}`),e!==n&&b1()]);return}case"cpu:register.update":{const[e]=nu(t.register);await Sr(`cpu.${e}`),z.set(Ge[t.register],t.value),await _r(`cpu.${e}`);return}default:return t}}async function mse(t){switch(t.type){case"f10:press":await Fr("bus.int0",2),await gi("bus.int0");return;default:return t.type}}const qE=me(j.zero(8)),YE=me(j.zero(8));function gse(t){t.io.handshake&&(z.set(qE,j.fromUnsigned(t.io.handshake.DATA,8)),z.set(YE,j.fromUnsigned(t.io.handshake.STATE,8)))}async function vse(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await Od(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await Sr(`handshake.${t.register}`),t.register){case"DATA":{z.set(qE,t.value);break}case"STATE":{z.set(YE,t.value);break}default:return t.register}await _r(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await gi("bus.int2");return}case"handshake:int.on":{await Fr("bus.int2",10);return}default:return t}}async function yse(t){switch(t.type){case"keyboard:listen-key":{z.set(tn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{z.sub(tn,()=>{const n=z.get(tn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const ZE=me(j.zero(8));function wse(t){t.io.leds!==null&&z.set(ZE,j.fromUnsigned(t.io.leds,8))}async function bse(t){switch(t.type){case"leds:update":{await Fr("bus.pio->leds",2),z.set(ZE,t.state),await gi("bus.pio->leds");return}default:return t.type}}async function xse(t){switch(t.type){case"memory:read":return;case"memory:read.ok":{z.set(_p,_e.from(t.address)),await st({key:"memory.operating-cell.color",to:Et.mantis[400]},{duration:1,easing:"easeOutQuart"}),await Od(t.value),await st({key:"memory.operating-cell.color",to:Et.white},{duration:1,easing:"easeOutQuart"});return}case"memory:write":return;case"memory:write.ok":{z.set(_p,_e.from(t.address)),await st({key:"memory.operating-cell.color",to:Et.mantis[400]},{duration:1,easing:"easeOutQuart"}),z.set(B0,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await st({key:"memory.operating-cell.color",to:Et.white},{duration:1,easing:"easeOutQuart"});return}case"memory:read.error":case"memory:write.error":{Bu(t.error);return}case"memory:write.warning":{Ri({title:"Advertencia de Memoria",description:`${t.warning}`,variant:"info"});return}default:return t}}const JE=me(j.fromUnsigned(255,8)),QE=me(j.fromUnsigned(0,8)),eA=me(j.fromUnsigned(0,8)),G0=[me(j.zero(8)),me(j.zero(8)),me(j.zero(8)),me(j.zero(8)),me(j.zero(8)),me(j.zero(8)),me(j.zero(8)),me(j.zero(8))];function Sse(t){if(t.io.pic){z.set(JE,j.fromUnsigned(t.io.pic.IMR,8)),z.set(QE,j.fromUnsigned(t.io.pic.IRR,8)),z.set(eA,j.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<G0.length;e++)z.set(G0[e],j.fromUnsigned(t.io.pic.lines[e],8))}}async function _se(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await Od(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await Sr(`pic.${t.register}`),t.register){case"IMR":{z.set(JE,t.value);break}case"IRR":{z.set(QE,t.value);break}case"ISR":{z.set(eA,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));z.set(G0[e],t.value);break}default:return t}await _r(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await gi("bus.intr");return}case"pic:intr.on":{await Fr("bus.intr",10);return}case"pic:int.send":{await Od(t.number);return}default:return t}}const tA=me(j.zero(8)),nA=me(j.zero(8)),iA=me(j.zero(8)),rA=me(j.zero(8));function kse(t){t.io.pio&&(z.set(tA,j.fromUnsigned(t.io.pio.PA,8)),z.set(nA,j.fromUnsigned(t.io.pio.PB,8)),z.set(iA,j.fromUnsigned(t.io.pio.CA,8)),z.set(rA,j.fromUnsigned(t.io.pio.CB,8)))}async function Cse(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await Od(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await Sr(`pio.${t.register}`),t.register){case"PA":{z.set(tA,t.value);break}case"PB":{z.set(nA,t.value);break}case"CA":{z.set(iA,t.value);break}case"CB":{z.set(rA,t.value);break}default:return t.register}await _r(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const K0=me([]),X0=me("");function Ese(t){t.io.printer&&(z.set(K0,t.io.printer.buffer.map(e=>j.fromUnsigned(e,8))),z.set(X0,t.io.printer.paper))}async function Ase(t){switch(t.type){case"printer:buffer.add":{z.set(K0,e=>[...e,t.char]);return}case"printer:buffer.pop":{z.set(K0,e=>e.slice(1));return}case"printer:busy.off":{await gi("bus.printer.busy");return}case"printer:busy.on":{await Fr("bus.printer.busy",15);return}case"printer:data.read":{await Fr("bus.printer.data",15),await gi("bus.printer.data");return}case"printer:paper.print":{z.set(X0,e=>e+t.char);return}case"printer:paper.replace":{z.set(X0,"");return}case"printer:strobe.off":{await gi("bus.printer.strobe");return}case"printer:strobe.on":{await Fr("bus.printer.strobe",15);return}default:return t}}const sA=me("");function Pse(t){"screen"in t.io&&t.io.screen!==null&&z.set(sA,t.io.screen)}async function Tse(t){switch(t.type){case"screen:send-char":{z.set(sA,t.output);return}default:return t.type}}const ww=me(j.zero(8));function Nse(t){t.io.switches!==null&&z.set(ww,j.fromUnsigned(t.io.switches,8))}async function Rse(t){switch(t.type){case"switches:toggle":{z.set(ww,e=>e.withBit(t.index,!e.bit(t.index))),await Fr("bus.switches->pio",2),await gi("bus.switches->pio");return}default:return t.type}}const oA=me(j.zero(8)),aA=me(j.zero(8));function Mse(t){t.io.timer&&(z.set(oA,j.fromUnsigned(t.io.timer.CONT,8)),z.set(aA,j.fromUnsigned(t.io.timer.COMP,8)))}async function Ose(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await Od(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await Sr(`timer.${t.register}`),t.register){case"CONT":{z.set(oA,t.value);break}case"COMP":{z.set(aA,t.value);break}default:return t.register}await _r(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await gi("bus.int1");return}case"timer:int.on":{await Fr("bus.int1",10);return}default:return t}}const $_=new Set;async function O$(t){Dse(t);const[e]=t.type.split(":",2);switch($_.add(t.type),e){case"bus":{await Mie(t);break}case"clock":{await Oie(t);break}case"cpu":{await pse(t);break}case"f10":{await mse(t);break}case"handshake":{await vse(t);break}case"keyboard":{await yse(t);break}case"leds":{await bse(t);break}case"memory":{await xse(t);break}case"pic":{await _se(t);break}case"pio":{await Cse(t);break}case"printer":{await Ase(t);break}case"screen":{await Tse(t);break}case"switches":{await Rse(t);break}case"timer":{await Ose(t);break}default:return e}$_.delete(t.type)}function WR(...t){for(const e of t)if($_.has(e))return!0;return!1}const Ise={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function Dse(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${Ise[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof j?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof _e?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof dr?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const rn=new ene,tn=me({type:"stopped"});function Lse(t){const e=t.translate(mi().language);Ri({title:e,variant:"error"})}function Bu(t){if(t&&(Lse(t),t.code==="no-instruction")){z.set(tn,{type:"paused"});return}P4(null),ane(!1),z.set(tn,{type:"stopped",error:t}),z.set(ns,{phase:"stopped",error:t}),r$()}function An(){z.set(tn,{type:"paused"}),Nie()}function jse(){Ri({title:Yy(mi().language,"messages.assemble-error"),variant:"error"})}function sc(){Ri({title:Yy(mi().language,"messages.invalid-action"),variant:"error"})}function GR(t,e=!1){ine(t,e),one(t,e),gse(t),Sse(t),kse(t),Mse(t),wse(t),Ese(t),Pse(t),Nse(t),fn=0,wu=0,z.set(Fu,fn),z.set(ow,wu),z.set(ft,""),e&&z.set($0,[])}let ve=null,Ul=0,et=0,Hl="",uo=!0,S1=!1,kn=!1,fn=0,wu=0,Vl="",KR="",XR="",xh=!1,Sg=!1,_g="",qR="";async function ru(t){try{for(;;){const e=z.get(tn),n=mi();if(z.get(M0)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),z.set(M0,!1),Bu();break}if(e.type==="stopped"){Ul=0,et=0,Hl="";break}if(e.type==="paused"){await new Promise(o=>{const a=z.sub(tn,()=>{a(),o()})});continue}const r=t.next();if(r.done)break;if(await O$(r.value),r.value.type==="cpu:cycle.start"&&(ve=r.value.instruction.name,S1=!!r.value.instruction.willUse.id,kn=!!r.value.instruction.willUse.ri,z.set(nne,kn),xh=!1,Sg=!1,_g=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(r.value.type==="cpu:cycle.end"||r.value.type==="cpu:halt"){Ul=0,et=0,uo=!0,Hl="",wu++,console.log(`Instrucciones: ${wu}`),z.set(ow,wu),r.value.type==="cpu:halt"?(fn++,z.set(Fu,fn),z.set(ft,"Ejecucin: Detenido")):(e.until==="cycle-change"||e.until==="end-of-instruction")&&An();continue}else r.value.type==="cpu:int.6"?z.set(ft,"Interrupcin: Rutina leer caracter del teclado"):r.value.type==="cpu:int.7"&&(z.set(ft,"Interrupcin: Rutina mostrar por pantalla"),e.until==="cycle-change"&&An());if(Ul<3)r.value.type==="cpu:mar.set"?(r.value.register==="SP"?(Ul=3,et=3,z.set(ft,"Ejecucin: MAR  SP")):(z.set(ft,"Captacin: MAR  IP"),et++),e.until==="cycle-change"&&An(),Ul++,fn++):r.value.type==="cpu:register.update"?(z.set(ft,"Captacin: MBR  read(Memoria[MAR]); IP  IP + 1"),e.until==="cycle-change"&&An(),et++,Ul++,fn++):r.value.type==="cpu:mbr.get"&&(z.set(ft,"Captacin: IR  MBR"),e.until==="cycle-change"&&An(),Ul++,fn++);else if(r.value.type==="cpu:rd.on"&&et>1?Hl="Ejecucin: MBR  read(Memoria[MAR])":r.value.type==="cpu:wr.on"?Hl="Ejecucin: write(Memoria[MAR])  MBR":r.value.type==="pio:write.ok"&&(z.set(ft,"Ejecucin: write(PIO[MAR])  MBR"),et++,fn++),r.value.type==="cpu:mar.set"){const o=r.value.register,a=o==="ri"?"MBR":o;let l=!1,u=!1;kn&&et===5&&(ve==="ADD"||ve==="SUB")&&(l=!0),kn&&et===9&&(l=!0),kn&&et===2&&(ve==="ADD"||ve==="SUB")&&(u=!0),console.log("executeStageCounter:",et),console.log("mbridirmar:",xh),console.log("resultmbrimar:",Sg),console.log("displayMessageresultmbr:",_g),console.log("shouldDisplayMessage:",uo),(uo||o==="SP")&&(Sg?z.set(ft,_g):l?z.set(ft,`Ejecucin: MAR  ${o}`):u?z.set(ft,"Ejecucin: ri  MBR; MAR  MBR"):et===2&&kn&&ve==="MOV"?z.set(ft,"Ejecucin: ri  MBR; MAR  IP"):et===4&&kn&&ve==="MOV"?z.set(ft,`Ejecucin: MAR  ${o}`):xh?z.set(ft,"Ejecucin: id  MBR; MAR  IP"):et===2&&kn&&ve==="INT"?z.set(ft,"Ejecucin: ri  MBR; MAR  SP"):z.set(ft,`Ejecucin: MAR  ${a}`)),e.until==="cycle-change"&&An(),et++,fn++}else if(r.value.type==="cpu:register.update"){const o=r.value.register;let a="";uo=!0;let l=!0;o==="SP"?(kn&&et===4&&ve==="INT"&&(l=!1,uo=!1),ve==="PUSH"&&(a="Ejecucin: SP = SP - 1"),(ve==="RET"||ve==="IRET")&&(a="Ejecucin: SP = SP + 1"),et===3&&ve==="POP"&&(a=qR+"; SP = SP + 1")):o==="FLAGS"?(a="Ejecucin: IF = 0",kn&&et===5&&ve==="INT"&&(a="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1; IF = 0")):o==="DL"&&ve==="INT"?a="Interrupcin: AL  ASCII":o==="right.l"&&ve==="INT"?a="Interrupcin: SUB AL, 1":o==="right"&&ve==="INT"?a="Interrupcin: ADD BL, 1":o==="ri.l"&&ve==="INT"?(a="Interrupcin: MAR  (video)",uo=!1):kn&&et===3&&ve==="MOV"?(a="Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1; MAR  ri",l=!1,uo=!1):et===4&&ve==="CALL"?l=!1:a=o==="IP"?"Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1":`Ejecucin: MBR  ${o}`,kn&&et===8&&ve==="INT"&&(a="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1"),et===2&&ve==="CALL"&&(a="Ejecucin: ri  MBR; SP  SP - 1"),et===4&&ve==="CALL"&&(a="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1"),console.log("displayMessage:",a),console.log("currentInstructionName:",ve),console.log("currentInstructionModeri:",kn),console.log("executeStageCounter:",et),console.log("pause:",l),et++,ve!=="DEC"&&ve!=="INC"&&ve!=="NOT"&&ve!=="NEG"&&!(ve==="INT"&&et===5)&&(z.set(ft,a),fn++),a!=="Interrupcin: MAR  (video)"&&e.until==="cycle-change"&&ve!=="DEC"&&ve!=="INC"&&ve!=="NOT"&&ve!=="NEG"&&l&&An()}else if(r.value.type==="cpu:alu.execute")ve==="CMP"&&(z.set(ft,`Ejecucin: ${KR} ${ve} ${Vl} ; write(FLAGS)`),fn++,e.until==="cycle-change"&&An());else if(r.value.type==="cpu:mbr.get"){const o=r.value.register==="id.l"?"id":r.value.register==="IP.l"?"IP":r.value.register==="FLAGS.l"?"FLAGS":r.value.register;(String(o)==="right.l"||String(o)==="left.l")&&(Vl="MBR"),(kn&&et===3&&(ve==="ADD"||ve==="SUB"||ve==="CMP")||et===3&&ve==="POP")&&(xh=!0),ve==="POP"&&et===3&&(qR=`Ejecucin: ${o}  MBR`),xh||String(o)!=="ri.l"&&String(o)!=="right.l"&&String(o)!=="left.l"&&(z.set(ft,`Ejecucin: ${o}  MBR`),fn++,e.until==="cycle-change"&&An())}else if(r.value.type==="cpu:register.copy"){const o=r.value.src.replace(/\.l$/,""),a=r.value.dest.replace(/\.l$/,"");let l="";ve==="DEC"||ve==="INC"||ve==="NOT"||ve==="NEG"?l=o==="result"?`${ve} ${Vl}`:o:(l=o==="result"?`${a} ${ve} ${Vl}`:o,XR=`${o} ${ve} ${Vl}; write(FLAGS)`),ve==="CMP"&&String(a)==="right"&&(Vl=o),ve==="CMP"&&String(a)==="left"&&(KR=o);let u=`Ejecucin: ${a}  ${l}`;(ve==="ADD"||ve==="SUB"||ve==="CMP")&&(u+="; write(FLAGS)"),o==="ri"&&a==="IP"?(u="Ejecucin: IP  MBR",ve==="CALL"&&(u="Ejecucin: IP  ri"),z.set(ft,u),e.until==="cycle-change"&&An()):a==="left"&&ve==="INT"?u="ADD BL, 1":o==="result"&&ve==="INT"?e.until==="cycle-change"&&An():o==="IP"&&a==="id"?(u="Ejecucin: id  IP",z.set(ft,u),e.until==="cycle-change"&&An()):o==="id"&&a==="ri"?(u="Ejecucin: MAR  id",uo=!1,z.set(ft,u)):o==="MBR"&&a==="ri"?(u="Ejecucin: MAR  MBR",z.set(ft,u)):o==="id"&&a==="IP"?(u="Ejecucin: IP  MBR",z.set(ft,u),e.until==="cycle-change"&&An()):o==="BL"&&a==="ri"||o==="BX"&&a==="ri"?(u="Ejecucin: MAR  BL",z.set(ft,u),uo=!1,et++):String(o)==="right.l"&&(Vl=o),(a!=="result"&&a!=="left"&&a!=="right"&&o!=="result"&&o!=="left"&&o!=="right"||o==="result"&&a!=="MBR")&&(z.set(ft,u),fn++)}else if(r.value.type==="bus:reset"&&et>1&&(ve==="MOV"||ve==="ADD"||ve==="SUB"||ve==="CMP"||ve==="CALL"||ve==="INT"||ve==="PUSH"||ve==="POP"||ve==="IN"||ve==="RET")){ve==="RET"&&(Hl="Ejecucin: MBR  read(Memoria[MAR])"),ve==="IN"&&(Hl="Ejecucin: MBR  read(PIO[MAR])");let o=!1;(kn&&(et===4||et===8)&&ve==="INT"||kn&&et===3&&ve==="MOV"||S1&&et===4&&(ve==="CALL"||ve==="ADD"||ve==="SUB"||ve==="CMP"))&&(o=!0),console.log("executeStageCounter:",et),o||(z.set(ft,Hl),fn++,e.until==="cycle-change"&&An())}else if(r.value.type==="cpu:mbr.set"){const o=r.value.register==="id.l"?"id":r.value.register==="FLAGS.l"?"FLAGS":r.value.register==="IP.l"?"IP":r.value.register==="result.l"?XR:r.value.register;kn&&et===5&&(ve==="ADD"||ve==="SUB")?(Sg=!0,_g=`Ejecucin: MBR  ${o} ; MAR  ri`):(z.set(ft,`Ejecucin: MBR  ${o}`),e.until==="cycle-change"&&An(),et++,fn++)}}else z.set(ft,"");console.log(`Ciclos ejecutados: ${fn}`),z.set(Fu,fn);const s=new CustomEvent("instructionChange",{detail:{instruction:ve,modeid:S1,moderi:kn}});window.dispatchEvent(s),r.value.type==="cpu:cycle.update"||r.value.type==="cpu:cycle.interrupt"?e.until==="cycle-change"||n.animations||await new Promise(o=>setTimeout(o,n.executionUnit)):r.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction"?An():n.animations||await new Promise(o=>setTimeout(o,n.executionUnit)))}t.return()}catch(e){const n=Wt.from(e);Bu(n)}}async function Fse(...t){const e=t[0],n=z.get(tn);switch(e){case"cpu.run":{if(n.type==="running")return sc();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;fn=0,wu=0,z.set(Fu,fn),z.set(ow,wu),z.set($0,[]);const r=window.codemirror.state.doc.toString(),s=m4(r);if(!s.success)return jse();const o=s.instructions.map(w=>w.instruction),a=o.some(w=>["CALL","RET","INT","IRET","POP","PUSH"].includes(w));z.set(NE,a);const l=o.includes("INT");z.set(P_,l);const u=s.instructions.some(w=>w.instruction==="INT"?w.operands.some(x=>x.type==="number-expression"&&typeof x.value.value=="number"?x.value.value===6||x.value.value===7:!1):!1),c=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(x=>x.type==="number-expression"&&typeof x.value.value=="number"?x.value.value===48||x.value.value===50:!1):!1),d=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(x=>{if(x.type==="number-expression"){if(typeof x.value.value=="number")return x.value.value>=32&&x.value.value<=43;try{if(x.value&&typeof x.value.resolve=="function"){const k=x.value.resolve();if(typeof k=="number")return k>=32&&k<=43}}catch(k){console.warn("No se pudo resolver operando PIC:",k)}}return!1}):!1),h=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(x=>{if(x.type==="number-expression"){if(typeof x.value.value=="number")return x.value.value===64||x.value.value===65;try{if(x.value&&typeof x.value.resolve=="function"){const k=x.value.resolve();if(typeof k=="number")return k===64||k===65}}catch(k){console.warn("No se pudo resolver operando Handshake:",k)}}return!1}):!1),f=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(x=>{if(x.type==="number-expression"){if(typeof x.value.value=="number")return x.value.value===16||x.value.value===17;try{if(x.value&&typeof x.value.resolve=="function"){const k=x.value.resolve();if(typeof k=="number")return k===16||k===17}}catch(k){console.warn("No se pudo resolver operando Timer:",k)}}return!1}):!1),p=mi();z.set(Wr,w=>({...w,devices:{...w.devices,keyboardAndScreen:u,pio:c?"switches-and-leds":h?"printer":w.devices.pio,handshake:h?"printer":w.devices.handshake,pic:d||w.devices.pic,"switches-and-leds":c}})),z.set(_4,u);const g=l||d||h||f||u;z.set(P_,g),console.log("Detectado - PIC:",d,"Handshake:",h,"Timer:",f,"INT:",l),console.log("Habilitando vector de interrupciones:",g),rn.loadProgram({program:s,data:p.dataOnLoad,devices:mi().devices,hasORG:s.hasORG}),console.log("result:",s);const b=s.instructions.filter(w=>w.type==="instruction").flatMap(w=>{const x=w.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const P=C.value;if(P.isNumberLiteral())return P.value.toString(16)+"h";if(P.isLabel())return P.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const P=C.value;if(P.isNumberLiteral())return P.value.toString(16)+"h"}}return""}).join(", "),k=`${w.instruction} ${x}`.trim(),E=[{address:w.start.value,name:k,length:w.length.toString().trim()}];if(w.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=w.start.value+1,P=w.operands.filter((N,I)=>w.length===3?I===0&&N.type==="number-expression":N.type==="number-expression").map(N=>{if(N.type==="number-expression"){const I=N.value;if(I.isNumberLiteral())return I.value.toString(16)+"h";if(I.isLabel())return I.value}else if(N.type==="direct-address"){const I=N.value;if(I.isNumberLiteral())return I.value.toString(16)+"h"}return""}).join(", ");E.push({address:C,name:P,length:""})}if(w.length===3){const C=w.start.value+2,P=w.operands.filter(N=>N.type==="number-expression").map(N=>{if(N.type==="number-expression"){const I=N.value;if(I.isNumberLiteral())return I.value.toString(16)+"h"}return""}).join(" ");E.push({address:C,name:P,length:""})}return E}),v=s.data.filter(w=>w.type==="data-directive").flatMap(w=>{const x=w.start.value;return w.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,C)=>({address:x+C,label:C===0&&w.label||null,value:E}))});console.log("Direcciones de las instrucciones:",b),console.log("Direcciones de los datos:",v),z.set(C4,b),z.set(E4,v.map(w=>({...w,length:""}))),GR(rn.getComputerState());const y=["Start CPU",{until:i,devices:mi().devices,language:mi().language,animations:mi().animations?"yes":"no"}];T4.capture(...y),z.set(tn,{type:"running",until:i,waitingForInput:!1}),ru(rn.startCPU()),$se(),Bse()}else z.set(tn,{type:"running",until:i,waitingForInput:!1}),Rie();return}case"cpu.stop":{const i=t[1];i?(Bu(),GR(rn.getComputerState(),i)):An();return}case"f10.press":{if(!rn.devices.f10.connected()||n.type!=="running")return sc();if(WR("f10:press"))return;ru(rn.devices.f10.press());return}case"switch.toggle":{if(!rn.devices.switches.connected())return sc();if(WR("switches:toggle"))return;const i=t[1];n.type==="running"?ru(rn.devices.switches.toggle(i)):z.set(ww,r=>r.withBit(i,!r.bit(i)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return sc();rn.devices.keyboard.readChar(j.fromChar(t[1])),z.set(tn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!rn.devices.screen.connected())return sc();ru(rn.devices.screen.clear());return}case"printer.clean":{if(!rn.devices.printer.connected())return sc();ru(rn.devices.printer.clear());return}default:return e}}async function $se(){if(rn.devices.clock.connected())for(;z.get(tn).type!=="stopped";){const t=mi().clockSpeed;await st({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),ru(rn.devices.clock.tick())}}async function Bse(){if(rn.devices.printer.connected()){for(;z.get(tn).type!=="stopped";){const t=mi().printerSpeed;await st([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await st({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await ru(rn.devices.printer.print())}if(z.get(tn).type==="stopped"&&rn.devices.printer.hasPending())for(;z.get(tn).type!=="stopped"||rn.devices.printer.hasPending();){const t=mi().printerSpeed;await st([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await st({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=rn.devices.printer.print();let n=e.next();for(;!n.done;)await O$(n.value),n=e.next()}}}function Rn(){const t=tt(tn),e=k3(),n=S.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:Fse,devices:n}}function zse({className:t}){const e=wt(),{status:n,dispatch:i}=Rn(),r=S.useCallback(()=>{n.type!=="running"&&i("cpu.run","cycle-change")},[n.type,i]);No("F7",d=>{d.preventDefault(),r()},void 0,[r]);const s=S.useCallback(()=>{n.type!=="running"&&i("cpu.run","end-of-instruction")},[n.type,i]);No("F8",d=>{d.preventDefault(),s()},void 0,[s]);const o=S.useCallback(()=>{n.type!=="running"&&i("cpu.run","infinity")},[n.type,i]);No("F4",d=>{d.preventDefault(),o()},void 0,[o]);const a=S.useCallback(()=>{n.type==="running"&&i("cpu.stop",!1)},[n.type,i]),l=S.useCallback(()=>{n.type!=="running"&&i("cpu.stop",!0)},[n.type,i]);No("F9",d=>{d.preventDefault(),l()},void 0,[l]),No(" ",d=>{const h=d.target;h.tagName==="INPUT"||h.tagName==="TEXTAREA"||h.contentEditable==="true"||(d.preventDefault(),n.type==="running"&&a())},{event:"keydown"},[n.type,a]);const[u,c]=S.useState(!1);return S.useEffect(()=>{const d=()=>{c(window.innerWidth<=600||window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches)};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),m.jsxs("div",{className:Me("flex items-center justify-center gap-6 rounded-xl border border-stone-700 bg-stone-900/80 px-4 py-1 shadow-lg",t),children:[m.jsxs("button",{disabled:n.type==="running",onClick:r,title:e("control.action.run.cycle-change"),className:"group flex flex-col items-center focus-visible:ring-2 focus-visible:ring-mantis-400 rounded-lg px-2 py-1 transition hover:bg-mantis-600/20 disabled:opacity-50 relative",children:[m.jsxs("span",{className:"flex items-center justify-center",children:[m.jsx(eu,{icon:_J,size:"lg",className:"text-mantis-400 group-hover:scale-110 transition"}),!u&&m.jsx("span",{className:"ml-1 text-[10px] text-stone-400 font-mono opacity-80 pointer-events-none",children:"F7"})]}),!u&&m.jsx("span",{className:"text-xs mt-1",children:e("control.action.run.cycle-change")})]}),m.jsxs("button",{disabled:n.type==="running",onClick:s,title:e("control.action.run.end-of-instruction"),className:"group flex flex-col items-center focus-visible:ring-2 focus-visible:ring-blue-400 rounded-lg px-2 py-1 transition hover:bg-blue-600/20 disabled:opacity-50 relative",children:[m.jsxs("span",{className:"flex items-center justify-center",children:[m.jsx(eu,{icon:wJ,size:"lg",className:"text-blue-400 group-hover:scale-110 transition"}),!u&&m.jsx("span",{className:"ml-1 text-[10px] text-stone-400 font-mono opacity-80 pointer-events-none",children:"F8"})]}),!u&&m.jsx("span",{className:"text-xs mt-1",children:e("control.action.run.end-of-instruction")})]}),m.jsxs("button",{disabled:n.type==="running",onClick:o,title:e("control.action.run.infinity"),className:"group flex flex-col items-center focus-visible:ring-2 focus-visible:ring-orange-400 rounded-lg px-2 py-1 transition hover:bg-orange-600/20 disabled:opacity-50 relative",children:[m.jsxs("span",{className:"flex items-center justify-center",children:[m.jsx(eu,{icon:kJ,size:"lg",className:"text-orange-400 group-hover:scale-110 transition"}),!u&&m.jsx("span",{className:"ml-1 text-[10px] text-stone-400 font-mono opacity-80 pointer-events-none",children:"F4"})]}),!u&&m.jsx("span",{className:"text-xs mt-1",children:e("control.action.run.infinity")})]}),n.type==="running"?m.jsxs("button",{onClick:a,title:e("control.action.pause"),className:"group flex flex-col items-center focus-visible:ring-2 focus-visible:ring-red-400 rounded-lg px-2 py-1 transition hover:bg-red-600/20 relative",children:[m.jsxs("span",{className:"flex items-center justify-center",children:[m.jsx(eu,{icon:bJ,size:"lg",className:"text-red-400 group-hover:scale-110 transition"}),!u&&m.jsx("span",{className:"ml-1 text-[10px] text-stone-400 font-mono opacity-80 pointer-events-none",children:"F9"})]}),!u&&m.jsx("span",{className:"text-xs mt-1",children:e("control.action.pause")})]}):m.jsxs("button",{onClick:l,disabled:n.type==="stopped",title:e("control.action.reset"),className:"group flex flex-col items-center focus-visible:ring-2 focus-visible:ring-red-400 rounded-lg px-2 py-1 transition hover:bg-red-600/20 disabled:opacity-50 relative",children:[m.jsxs("span",{className:"flex items-center justify-center",children:[m.jsx(eu,{icon:SJ,size:"lg",className:"text-red-400 group-hover:scale-110 transition"}),!u&&m.jsx("span",{className:"ml-1 text-[10px] text-stone-400 font-mono opacity-80 pointer-events-none",children:"F9"})]}),!u&&m.jsx("span",{className:"text-xs mt-1",children:e("control.action.reset")})]})]})}function q0(t,[e,n]){return Math.min(n,Math.max(e,t))}function lA(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Use="VisuallyHidden",bw=S.forwardRef((t,e)=>m.jsx(He.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));bw.displayName=Use;var Hse=[" ","Enter","ArrowUp","ArrowDown"],Vse=[" ","Enter"],um="Select",[xw,Sw,Wse]=Up(um),[qd,nfe]=El(um,[Wse,Wd]),_w=Wd(),[Gse,Tl]=qd(um),[Kse,Xse]=qd(um),I$=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:f,form:p}=t,g=_w(e),[b,v]=S.useState(null),[y,w]=S.useState(null),[x,k]=S.useState(!1),E=Hp(u),[C=!1,P]=Uo({prop:i,defaultProp:r,onChange:s}),[N,I]=Uo({prop:o,defaultProp:a,onChange:l}),L=S.useRef(null),$=b?p||!!b.closest("form"):!0,[G,U]=S.useState(new Set),X=Array.from(G).map(ee=>ee.props.value).join(";");return m.jsx(QC,{...g,children:m.jsxs(Gse,{required:f,scope:e,trigger:b,onTriggerChange:v,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:x,onValueNodeHasChildrenChange:k,contentId:il(),value:N,onValueChange:I,open:C,onOpenChange:P,dir:E,triggerPointerDownPosRef:L,disabled:h,children:[m.jsx(xw.Provider,{scope:e,children:m.jsx(Kse,{scope:t.__scopeSelect,onNativeOptionAdd:S.useCallback(ee=>{U(he=>new Set(he).add(ee))},[]),onNativeOptionRemove:S.useCallback(ee=>{U(he=>{const V=new Set(he);return V.delete(ee),V})},[]),children:n})}),$?m.jsxs(eB,{"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:d,value:N,onChange:ee=>I(ee.target.value),disabled:h,form:p,children:[N===void 0?m.jsx("option",{value:""}):null,Array.from(G)]},X):null]})})};I$.displayName=um;var D$="SelectTrigger",L$=S.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=_w(n),o=Tl(D$,n),a=o.disabled||i,l=dt(e,o.onTriggerChange),u=Sw(n),c=S.useRef("touch"),[d,h,f]=tB(g=>{const b=u().filter(w=>!w.disabled),v=b.find(w=>w.value===o.value),y=nB(b,g,v);y!==void 0&&o.onValueChange(y.value)}),p=g=>{a||(o.onOpenChange(!0),f()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return m.jsx(Vy,{asChild:!0,...s,children:m.jsx(He.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":Q$(o.value)?"":void 0,...r,ref:l,onClick:ye(r.onClick,g=>{g.currentTarget.focus(),c.current!=="mouse"&&p(g)}),onPointerDown:ye(r.onPointerDown,g=>{c.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(p(g),g.preventDefault())}),onKeyDown:ye(r.onKeyDown,g=>{const b=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(b&&g.key===" ")&&Hse.includes(g.key)&&(p(),g.preventDefault())})})})});L$.displayName=D$;var j$="SelectValue",F$=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=Tl(j$,n),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=dt(e,l.onValueNodeChange);return ti(()=>{u(c)},[u,c]),m.jsx(He.span,{...a,ref:d,style:{pointerEvents:"none"},children:Q$(l.value)?m.jsx(m.Fragment,{children:o}):s})});F$.displayName=j$;var qse="SelectIcon",$$=S.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return m.jsx(He.span,{"aria-hidden":!0,...r,ref:e,children:i||""})});$$.displayName=qse;var Yse="SelectPortal",B$=t=>m.jsx(Qp,{asChild:!0,...t});B$.displayName=Yse;var zu="SelectContent",z$=S.forwardRef((t,e)=>{const n=Tl(zu,t.__scopeSelect),[i,r]=S.useState();if(ti(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Cl.createPortal(m.jsx(U$,{scope:t.__scopeSelect,children:m.jsx(xw.Slot,{scope:t.__scopeSelect,children:m.jsx("div",{children:t.children})})}),s):null}return m.jsx(H$,{...t,ref:e})});z$.displayName=zu;var qr=10,[U$,Nl]=qd(zu),Zse="SelectContentImpl",H$=S.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:b,...v}=t,y=Tl(zu,n),[w,x]=S.useState(null),[k,E]=S.useState(null),C=dt(e,_=>x(_)),[P,N]=S.useState(null),[I,L]=S.useState(null),$=Sw(n),[G,U]=S.useState(!1),X=S.useRef(!1);S.useEffect(()=>{if(w)return nE(w)},[w]),UC();const ee=S.useCallback(_=>{const[T,...M]=$().map(W=>W.ref.current),[R]=M.slice(-1),K=document.activeElement;for(const W of _)if(W===K||(W==null||W.scrollIntoView({block:"nearest"}),W===T&&k&&(k.scrollTop=0),W===R&&k&&(k.scrollTop=k.scrollHeight),W==null||W.focus(),document.activeElement!==K))return},[$,k]),he=S.useCallback(()=>ee([P,w]),[ee,P,w]);S.useEffect(()=>{G&&he()},[G,he]);const{onOpenChange:V,triggerPointerDownPosRef:F}=y;S.useEffect(()=>{if(w){let _={x:0,y:0};const T=R=>{var K,W;_={x:Math.abs(Math.round(R.pageX)-(((K=F.current)==null?void 0:K.x)??0)),y:Math.abs(Math.round(R.pageY)-(((W=F.current)==null?void 0:W.y)??0))}},M=R=>{_.x<=10&&_.y<=10?R.preventDefault():w.contains(R.target)||V(!1),document.removeEventListener("pointermove",T),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",M,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",M,{capture:!0})}}},[w,V,F]),S.useEffect(()=>{const _=()=>V(!1);return window.addEventListener("blur",_),window.addEventListener("resize",_),()=>{window.removeEventListener("blur",_),window.removeEventListener("resize",_)}},[V]);const[ne,ke]=tB(_=>{const T=$().filter(K=>!K.disabled),M=T.find(K=>K.ref.current===document.activeElement),R=nB(T,_,M);R&&setTimeout(()=>R.ref.current.focus())}),Z=S.useCallback((_,T,M)=>{const R=!X.current&&!M;(y.value!==void 0&&y.value===T||R)&&(N(_),R&&(X.current=!0))},[y.value]),ue=S.useCallback(()=>w==null?void 0:w.focus(),[w]),D=S.useCallback((_,T,M)=>{const R=!X.current&&!M;(y.value!==void 0&&y.value===T||R)&&L(_)},[y.value]),O=i==="popper"?B_:V$,B=O===B_?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:b}:{};return m.jsx(U$,{scope:n,content:w,viewport:k,onViewportChange:E,itemRefCallback:Z,selectedItem:P,onItemLeave:ue,itemTextRefCallback:D,focusSelectedItem:he,selectedItemText:I,position:i,isPositioned:G,searchRef:ne,children:m.jsx(Gy,{as:Au,allowPinchZoom:!0,children:m.jsx(By,{asChild:!0,trapped:y.open,onMountAutoFocus:_=>{_.preventDefault()},onUnmountAutoFocus:ye(r,_=>{var T;(T=y.trigger)==null||T.focus({preventScroll:!0}),_.preventDefault()}),children:m.jsx(Zp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:_=>_.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:m.jsx(O,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:_=>_.preventDefault(),...v,...B,onPlaced:()=>U(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ye(v.onKeyDown,_=>{const T=_.ctrlKey||_.altKey||_.metaKey;if(_.key==="Tab"&&_.preventDefault(),!T&&_.key.length===1&&ke(_.key),["ArrowUp","ArrowDown","Home","End"].includes(_.key)){let R=$().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(_.key)&&(R=R.slice().reverse()),["ArrowUp","ArrowDown"].includes(_.key)){const K=_.target,W=R.indexOf(K);R=R.slice(W+1)}setTimeout(()=>ee(R)),_.preventDefault()}})})})})})})});H$.displayName=Zse;var Jse="SelectItemAlignedPosition",V$=S.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Tl(zu,n),o=Nl(zu,n),[a,l]=S.useState(null),[u,c]=S.useState(null),d=dt(e,C=>c(C)),h=Sw(n),f=S.useRef(!1),p=S.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:v,focusSelectedItem:y}=o,w=S.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&g&&b&&v){const C=s.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),I=v.getBoundingClientRect();if(s.dir!=="rtl"){const K=I.left-P.left,W=N.left-K,te=C.left-W,Y=C.width+te,Ne=Math.max(Y,P.width),Fe=window.innerWidth-qr,Be=q0(W,[qr,Math.max(qr,Fe-Ne)]);a.style.minWidth=Y+"px",a.style.left=Be+"px"}else{const K=P.right-I.right,W=window.innerWidth-N.right-K,te=window.innerWidth-C.right-W,Y=C.width+te,Ne=Math.max(Y,P.width),Fe=window.innerWidth-qr,Be=q0(W,[qr,Math.max(qr,Fe-Ne)]);a.style.minWidth=Y+"px",a.style.right=Be+"px"}const L=h(),$=window.innerHeight-qr*2,G=g.scrollHeight,U=window.getComputedStyle(u),X=parseInt(U.borderTopWidth,10),ee=parseInt(U.paddingTop,10),he=parseInt(U.borderBottomWidth,10),V=parseInt(U.paddingBottom,10),F=X+ee+G+V+he,ne=Math.min(b.offsetHeight*5,F),ke=window.getComputedStyle(g),Z=parseInt(ke.paddingTop,10),ue=parseInt(ke.paddingBottom,10),D=C.top+C.height/2-qr,O=$-D,B=b.offsetHeight/2,_=b.offsetTop+B,T=X+ee+_,M=F-T;if(T<=D){const K=L.length>0&&b===L[L.length-1].ref.current;a.style.bottom="0px";const W=u.clientHeight-g.offsetTop-g.offsetHeight,te=Math.max(O,B+(K?ue:0)+W+he),Y=T+te;a.style.height=Y+"px"}else{const K=L.length>0&&b===L[0].ref.current;a.style.top="0px";const te=Math.max(D,X+g.offsetTop+(K?Z:0)+B)+M;a.style.height=te+"px",g.scrollTop=T-D+g.offsetTop}a.style.margin=`${qr}px 0`,a.style.minHeight=ne+"px",a.style.maxHeight=$+"px",i==null||i(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,u,g,b,v,s.dir,i]);ti(()=>w(),[w]);const[x,k]=S.useState();ti(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const E=S.useCallback(C=>{C&&p.current===!0&&(w(),y==null||y(),p.current=!1)},[w,y]);return m.jsx(eoe,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:E,children:m.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x},children:m.jsx(He.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});V$.displayName=Jse;var Qse="SelectPopperPosition",B_=S.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=qr,...s}=t,o=_w(n);return m.jsx(eE,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});B_.displayName=Qse;var[eoe,uA]=qd(zu,{}),z_="SelectViewport",W$=S.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=Nl(z_,n),o=uA(z_,n),a=dt(e,s.onViewportChange),l=S.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),m.jsx(xw.Slot,{scope:n,children:m.jsx(He.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ye(r.onScroll,u=>{const c=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const f=Math.abs(l.current-c.scrollTop);if(f>0){const p=window.innerHeight-qr*2,g=parseFloat(d.style.minHeight),b=parseFloat(d.style.height),v=Math.max(g,b);if(v<p){const y=v+f,w=Math.min(p,y),x=y-w;d.style.height=w+"px",d.style.bottom==="0px"&&(c.scrollTop=x>0?x:0,d.style.justifyContent="flex-end")}}}l.current=c.scrollTop})})})]})});W$.displayName=z_;var G$="SelectGroup",[toe,noe]=qd(G$),ioe=S.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=il();return m.jsx(toe,{scope:n,id:r,children:m.jsx(He.div,{role:"group","aria-labelledby":r,...i,ref:e})})});ioe.displayName=G$;var K$="SelectLabel",roe=S.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=noe(K$,n);return m.jsx(He.div,{id:r.id,...i,ref:e})});roe.displayName=K$;var Y0="SelectItem",[soe,X$]=qd(Y0),q$=S.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Tl(Y0,n),l=Nl(Y0,n),u=a.value===i,[c,d]=S.useState(s??""),[h,f]=S.useState(!1),p=dt(e,y=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,y,i,r)}),g=il(),b=S.useRef("touch"),v=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(soe,{scope:n,value:i,disabled:r,textId:g,isSelected:u,onItemTextChange:S.useCallback(y=>{d(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:m.jsx(xw.ItemSlot,{scope:n,value:i,disabled:r,textValue:c,children:m.jsx(He.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:p,onFocus:ye(o.onFocus,()=>f(!0)),onBlur:ye(o.onBlur,()=>f(!1)),onClick:ye(o.onClick,()=>{b.current!=="mouse"&&v()}),onPointerUp:ye(o.onPointerUp,()=>{b.current==="mouse"&&v()}),onPointerDown:ye(o.onPointerDown,y=>{b.current=y.pointerType}),onPointerMove:ye(o.onPointerMove,y=>{var w;b.current=y.pointerType,r?(w=l.onItemLeave)==null||w.call(l):b.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ye(o.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:ye(o.onKeyDown,y=>{var x;((x=l.searchRef)==null?void 0:x.current)!==""&&y.key===" "||(Vse.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});q$.displayName=Y0;var Gh="SelectItemText",Y$=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Tl(Gh,n),a=Nl(Gh,n),l=X$(Gh,n),u=Xse(Gh,n),[c,d]=S.useState(null),h=dt(e,v=>d(v),l.onItemTextChange,v=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,v,l.value,l.disabled)}),f=c==null?void 0:c.textContent,p=S.useMemo(()=>m.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=u;return ti(()=>(g(p),()=>b(p)),[g,b,p]),m.jsxs(m.Fragment,{children:[m.jsx(He.span,{id:l.textId,...s,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Cl.createPortal(s.children,o.valueNode):null]})});Y$.displayName=Gh;var Z$="SelectItemIndicator",ooe=S.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return X$(Z$,n).isSelected?m.jsx(He.span,{"aria-hidden":!0,...i,ref:e}):null});ooe.displayName=Z$;var U_="SelectScrollUpButton",aoe=S.forwardRef((t,e)=>{const n=Nl(U_,t.__scopeSelect),i=uA(U_,t.__scopeSelect),[r,s]=S.useState(!1),o=dt(e,i.onScrollButtonChange);return ti(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollTop>0;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?m.jsx(J$,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});aoe.displayName=U_;var H_="SelectScrollDownButton",loe=S.forwardRef((t,e)=>{const n=Nl(H_,t.__scopeSelect),i=uA(H_,t.__scopeSelect),[r,s]=S.useState(!1),o=dt(e,i.onScrollButtonChange);return ti(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,c=Math.ceil(l.scrollTop)<u;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?m.jsx(J$,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});loe.displayName=H_;var J$=S.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=Nl("SelectScrollButton",n),o=S.useRef(null),a=Sw(n),l=S.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return S.useEffect(()=>()=>l(),[l]),ti(()=>{var c;const u=a().find(d=>d.ref.current===document.activeElement);(c=u==null?void 0:u.ref.current)==null||c.scrollIntoView({block:"nearest"})},[a]),m.jsx(He.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ye(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:ye(r.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:ye(r.onPointerLeave,()=>{l()})})}),uoe="SelectSeparator",coe=S.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return m.jsx(He.div,{"aria-hidden":!0,...i,ref:e})});coe.displayName=uoe;var V_="SelectArrow",doe=S.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=_w(n),s=Tl(V_,n),o=Nl(V_,n);return s.open&&o.position==="popper"?m.jsx(tE,{...r,...i,ref:e}):null});doe.displayName=V_;function Q$(t){return t===""||t===void 0}var eB=S.forwardRef((t,e)=>{const{value:n,...i}=t,r=S.useRef(null),s=dt(e,r),o=lA(n);return S.useEffect(()=>{const a=r.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&c){const d=new Event("change",{bubbles:!0});c.call(a,n),a.dispatchEvent(d)}},[o,n]),m.jsx(bw,{asChild:!0,children:m.jsx("select",{...i,ref:s,defaultValue:n})})});eB.displayName="BubbleSelect";function tB(t){const e=ni(t),n=S.useRef(""),i=S.useRef(0),r=S.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(i.current),u!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=S.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function nB(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=hoe(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function hoe(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var foe=I$,iB=L$,poe=F$,moe=$$,goe=B$,rB=z$,voe=W$,sB=q$,yoe=Y$;const kg=foe,Cg=poe,Kh=S.forwardRef(({className:t,children:e,...n},i)=>m.jsxs(iB,{ref:i,className:Me("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,m.jsx(moe,{asChild:!0,children:m.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));Kh.displayName=iB.displayName;const Xh=S.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>m.jsx(goe,{children:m.jsx(rB,{ref:r,className:Me("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:m.jsx(voe,{className:"p-1",children:e})})}));Xh.displayName=rB.displayName;const ql=S.forwardRef(({className:t,children:e,...n},i)=>m.jsx(sB,{ref:i,className:Me("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:m.jsx(yoe,{children:e})}));ql.displayName=sB.displayName;var oB=["PageUp","PageDown"],aB=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],lB={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Yd="Slider",[W_,woe,boe]=Up(Yd),[uB,ife]=El(Yd,[boe]),[xoe,kw]=uB(Yd),cB=S.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[i],value:c,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,form:p,...g}=t,b=S.useRef(new Set),v=S.useRef(0),w=o==="horizontal"?Soe:_oe,[x=[],k]=Uo({prop:c,defaultProp:u,onChange:L=>{var G;(G=[...b.current][v.current])==null||G.focus(),d(L)}}),E=S.useRef(x);function C(L){const $=Poe(x,L);I(L,$)}function P(L){I(L,v.current)}function N(){const L=E.current[v.current];x[v.current]!==L&&h(x)}function I(L,$,{commit:G}={commit:!1}){const U=Moe(s),X=Ooe(Math.round((L-i)/s)*s+i,U),ee=q0(X,[i,r]);k((he=[])=>{const V=Eoe(he,ee,$);if(Roe(V,l*s)){v.current=V.indexOf(ee);const F=String(V)!==String(he);return F&&G&&h(V),F?V:he}else return he})}return m.jsx(xoe,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:v,thumbs:b.current,values:x,orientation:o,form:p,children:m.jsx(W_.Provider,{scope:t.__scopeSlider,children:m.jsx(W_.Slot,{scope:t.__scopeSlider,children:m.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...g,ref:e,onPointerDown:ye(g.onPointerDown,()=>{a||(E.current=x)}),min:i,max:r,inverted:f,onSlideStart:a?void 0:C,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:N,onHomeKeyDown:()=>!a&&I(i,0,{commit:!0}),onEndKeyDown:()=>!a&&I(r,x.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:$})=>{if(!a){const X=oB.includes(L.key)||L.shiftKey&&aB.includes(L.key)?10:1,ee=v.current,he=x[ee],V=s*X*$;I(he+V,ee,{commit:!0})}}})})})})});cB.displayName=Yd;var[dB,hB]=uB(Yd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Soe=S.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=t,[d,h]=S.useState(null),f=dt(e,w=>h(w)),p=S.useRef(),g=Hp(r),b=g==="ltr",v=b&&!s||!b&&s;function y(w){const x=p.current||d.getBoundingClientRect(),k=[0,x.width],C=cA(k,v?[n,i]:[i,n]);return p.current=x,C(w-x.left)}return m.jsx(dB,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:m.jsx(fB,{dir:g,"data-orientation":"horizontal",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const x=y(w.clientX);o==null||o(x)},onSlideMove:w=>{const x=y(w.clientX);a==null||a(x)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:w=>{const k=lB[v?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:k?-1:1})}})})}),_oe=S.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,c=S.useRef(null),d=dt(e,c),h=S.useRef(),f=!r;function p(g){const b=h.current||c.current.getBoundingClientRect(),v=[0,b.height],w=cA(v,f?[i,n]:[n,i]);return h.current=b,w(g-b.top)}return m.jsx(dB,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:m.jsx(fB,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const b=p(g.clientY);s==null||s(b)},onSlideMove:g=>{const b=p(g.clientY);o==null||o(b)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:g=>{const v=lB[f?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:v?-1:1})}})})}),fB=S.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,c=kw(Yd,n);return m.jsx(He.span,{...u,ref:e,onKeyDown:ye(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):oB.concat(aB).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ye(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(h)?h.focus():i(d)}),onPointerMove:ye(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:ye(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})})}),pB="SliderTrack",mB=S.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=kw(pB,n);return m.jsx(He.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});mB.displayName=pB;var G_="SliderRange",gB=S.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=kw(G_,n),s=hB(G_,n),o=S.useRef(null),a=dt(e,o),l=r.values.length,u=r.values.map(h=>yB(h,r.min,r.max)),c=l>1?Math.min(...u):0,d=100-Math.max(...u);return m.jsx(He.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}})});gB.displayName=G_;var K_="SliderThumb",vB=S.forwardRef((t,e)=>{const n=woe(t.__scopeSlider),[i,r]=S.useState(null),s=dt(e,a=>r(a)),o=S.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return m.jsx(koe,{...t,ref:s,index:o})}),koe=S.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=kw(K_,n),a=hB(K_,n),[l,u]=S.useState(null),c=dt(e,y=>u(y)),d=l?o.form||!!l.closest("form"):!0,h=YC(l),f=o.values[i],p=f===void 0?0:yB(f,o.min,o.max),g=Aoe(i,o.values.length),b=h==null?void 0:h[a.size],v=b?Toe(b,p,a.direction):0;return S.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),m.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${p}% + ${v}px)`},children:[m.jsx(W_.ItemSlot,{scope:t.__scopeSlider,children:m.jsx(He.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:c,style:f===void 0?{display:"none"}:t.style,onFocus:ye(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&m.jsx(Coe,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},i)]})});vB.displayName=K_;var Coe=t=>{const{value:e,...n}=t,i=S.useRef(null),r=lA(e);return S.useEffect(()=>{const s=i.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(r!==e&&l){const u=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(u)}},[r,e]),m.jsx("input",{style:{display:"none"},...n,ref:i,defaultValue:e})};function Eoe(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function yB(t,e,n){const s=100/(n-e)*(t-e);return q0(s,[0,100])}function Aoe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Poe(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function Toe(t,e,n){const i=t/2,s=cA([0,50],[0,i]);return(i-s(e)*n)*n}function Noe(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Roe(t,e){if(e>0){const n=Noe(t);return Math.min(...n)>=e}return!0}function cA(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function Moe(t){return(String(t).split(".")[1]||"").length}function Ooe(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var wB=cB,Ioe=mB,Doe=gB,Loe=vB;const Yl=S.forwardRef(({className:t,...e},n)=>m.jsxs(wB,{ref:n,className:Me("relative flex touch-none select-none items-center",t),...e,children:[m.jsx(Ioe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:m.jsx(Doe,{className:"absolute h-full bg-mantis-400"})}),m.jsx(Loe,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Yl.displayName=wB.displayName;var dA="Switch",[joe,rfe]=El(dA),[Foe,$oe]=joe(dA),bB=S.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:u,form:c,...d}=t,[h,f]=S.useState(null),p=dt(e,w=>f(w)),g=S.useRef(!1),b=h?c||!!h.closest("form"):!0,[v=!1,y]=Uo({prop:r,defaultProp:s,onChange:u});return m.jsxs(Foe,{scope:n,checked:v,disabled:a,children:[m.jsx(He.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":_B(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:p,onClick:ye(t.onClick,w=>{y(x=>!x),b&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),b&&m.jsx(Boe,{control:h,bubbles:!g.current,name:i,value:l,checked:v,required:o,disabled:a,form:c,style:{transform:"translateX(-100%)"}})]})});bB.displayName=dA;var xB="SwitchThumb",SB=S.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=$oe(xB,n);return m.jsx(He.span,{"data-state":_B(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});SB.displayName=xB;var Boe=t=>{const{control:e,checked:n,bubbles:i=!0,...r}=t,s=S.useRef(null),o=lA(n),a=YC(e);return S.useEffect(()=>{const l=s.current,u=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&d){const h=new Event("click",{bubbles:i});d.call(l,n),l.dispatchEvent(h)}},[o,n,i]),m.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function _B(t){return t?"checked":"unchecked"}var kB=bB,zoe=SB;const pa=S.forwardRef(({className:t,...e},n)=>m.jsx(kB,{className:Me("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:m.jsx(zoe,{className:Me("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));pa.displayName=kB.displayName;const hA=me(!1);function CB({className:t}){const e=wt(),[n,i]=im(),{status:r}=Rn();return m.jsxs("div",{className:Me("overflow-auto scrollbar-stone-700",t),children:[m.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[m.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),m.jsxs(si,{children:[m.jsxs(oi,{children:[m.jsxs(ai,{children:[m.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),m.jsx(Sh,{children:e("settings.animations.description")})]}),m.jsx(pa,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&r$()}})]}),m.jsxs(si,{children:[m.jsx(oi,{children:m.jsxs(ai,{children:[m.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),m.jsx(Yl,{className:"w-44",..._1({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsxs(si,{children:[m.jsx(oi,{children:m.jsx(ai,{children:e("settings.instructionCycle.label")})}),m.jsx(pa,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),m.jsxs(si,{children:[m.jsx(oi,{children:m.jsx(ai,{children:e("settings.statsCPU.label")})}),m.jsx(pa,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsx(si,{children:m.jsxs(oi,{children:[m.jsxs(ai,{children:[m.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),m.jsx(Sh,{children:e("settings.devices.description")})]})}),m.jsxs(si,{children:[m.jsx(oi,{children:m.jsx(ai,{children:e("settings.devices.keyboard-and-screen")})}),m.jsx(pa,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),m.jsxs(si,{children:[m.jsxs(oi,{children:[m.jsx(ai,{children:e("settings.devices.pic.label")}),m.jsx(Sh,{children:e("settings.devices.pic.description")})]}),m.jsx(pa,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),m.jsxs(si,{children:[m.jsx(oi,{children:m.jsxs(ai,{children:[m.jsx("span",{className:"icon-[lucide--clock] size-6"}),e("settings.speeds.clockSpeed")]})}),m.jsx(Yl,{className:"w-44",..._1({value:n.clockSpeed,onValueChange:s=>i(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),m.jsxs(si,{children:[m.jsx(oi,{children:m.jsx(ai,{children:e("settings.devices.pio.label")})}),m.jsxs(kg,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[m.jsx(Kh,{className:"w-52 min-w-[theme(width.52)]",children:m.jsx(Cg,{})}),m.jsx(Xh,{children:HZ.map(s=>m.jsx(ql,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),m.jsxs(si,{children:[m.jsx(oi,{children:m.jsx(ai,{children:e("settings.devices.handshake.label")})}),m.jsxs(kg,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[m.jsx(Kh,{className:"w-52 min-w-[theme(width.52)]",children:m.jsx(Cg,{})}),m.jsx(Xh,{children:VZ.map(s=>m.jsx(ql,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),m.jsxs(si,{children:[m.jsx(oi,{children:m.jsxs(ai,{children:[m.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),m.jsx(Yl,{className:"w-44",..._1({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsxs(si,{children:[m.jsxs(oi,{children:[m.jsxs(ai,{children:[m.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),m.jsx(Sh,{children:e("settings.flags.description")})]}),m.jsxs(kg,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[m.jsx(Kh,{className:"w-32",children:m.jsx(Cg,{})}),m.jsxs(Xh,{children:[m.jsx(ql,{value:"CF_ZF",children:"C Z"}),m.jsx(ql,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsxs(si,{children:[m.jsx(oi,{children:m.jsxs(ai,{children:[m.jsx("span",{className:"icon-[lucide--languages] size-6"}),e("settings.language.label")]})}),m.jsxs(kg,{value:n.language,onValueChange:s=>i(o=>({...o,language:s})),children:[m.jsx(Kh,{className:"w-32",children:m.jsx(Cg,{})}),m.jsxs(Xh,{children:[m.jsx(ql,{value:"en",children:m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx("span",{className:"icon-[circle-flags--uk] size-4"})," English"]})}),m.jsx(ql,{value:"es",children:m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx("span",{className:"icon-[circle-flags--ar] size-4"})," Espaol"]})})]})]})]}),m.jsxs(si,{children:[m.jsx(oi,{children:m.jsxs(ai,{children:[m.jsx("span",{className:"icon-[lucide--pilcrow-square] size-6"}),e("settings.editorFontSize.label")]})}),m.jsxs("div",{className:"flex items-center rounded-lg border border-stone-600 bg-stone-900",children:[m.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize<=8,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize-1})),title:e("settings.editorFontSize.decrease"),children:m.jsx("span",{className:"icon-[lucide--minus] size-4"})}),m.jsx("span",{className:"w-8 text-center text-sm font-normal",children:n.editorFontSize}),m.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize>=64,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize+1})),title:e("settings.editorFontSize.increase"),children:m.jsx("span",{className:"icon-[lucide--plus] size-4"})})]})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsxs(si,{children:[m.jsxs(oi,{children:[m.jsxs(ai,{children:[m.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),m.jsxs(Sh,{children:[e("settings.filters.description"),m.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:uc.filterBightness,filterContrast:uc.filterContrast,filterInvert:uc.filterInvert,filterSaturation:uc.filterSaturation})),children:e("settings.filters.revert")})]})]}),m.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[m.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),m.jsx(Yl,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),m.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),m.jsx(Yl,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),m.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),m.jsx(pa,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),m.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),m.jsx(Yl,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsx("div",{className:"flex justify-end p-4",children:m.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...uc,language:s.language,devices:s.devices})),children:[m.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function si({children:t}){return m.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function oi({children:t}){return m.jsx("div",{className:"grow",children:t})}function ai({children:t}){return m.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function Sh({children:t}){return m.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function _1({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}function Uoe(){const t=wt(),[e,n]=Vp(hA);return m.jsx("header",{className:"relative p-2 text-sm text-white",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex select-none items-center justify-center",children:[m.jsx("img",{src:"/VonSim8/favicon.svg",className:"mr-2 h-10 w-10",style:{filter:"none",opacity:1},draggable:!1}),m.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",m.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]})]}),m.jsx(zse,{}),m.jsx("button",{className:Me("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400 ml-4",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:m.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})})}var fA="ToastProvider",[pA,Hoe,Voe]=Up("Toast"),[EB,sfe]=El("Toast",[Voe]),[Woe,Cw]=EB(fA),AB=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=S.useState(null),[u,c]=S.useState(0),d=S.useRef(!1),h=S.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${fA}\`. Expected non-empty \`string\`.`),m.jsx(pA.Provider,{scope:e,children:m.jsx(Woe,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:S.useCallback(()=>c(f=>f+1),[]),onToastRemove:S.useCallback(()=>c(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};AB.displayName=fA;var PB="ToastViewport",Goe=["F8"],X_="toast.viewportPause",q_="toast.viewportResume",TB=S.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=Goe,label:r="Notifications ({hotkey})",...s}=t,o=Cw(PB,n),a=Hoe(n),l=S.useRef(null),u=S.useRef(null),c=S.useRef(null),d=S.useRef(null),h=dt(e,d,o.onViewportChange),f=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;S.useEffect(()=>{const b=v=>{var w;i.length!==0&&i.every(x=>v[x]||v.code===x)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[i]),S.useEffect(()=>{const b=l.current,v=d.current;if(p&&b&&v){const y=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(X_);v.dispatchEvent(E),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(q_);v.dispatchEvent(E),o.isClosePausedRef.current=!1}},x=E=>{!b.contains(E.relatedTarget)&&w()},k=()=>{b.contains(document.activeElement)||w()};return b.addEventListener("focusin",y),b.addEventListener("focusout",x),b.addEventListener("pointermove",y),b.addEventListener("pointerleave",k),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{b.removeEventListener("focusin",y),b.removeEventListener("focusout",x),b.removeEventListener("pointermove",y),b.removeEventListener("pointerleave",k),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[p,o.isClosePausedRef]);const g=S.useCallback(({tabbingDirection:b})=>{const y=a().map(w=>{const x=w.ref.current,k=[x,...sae(x)];return b==="forwards"?k:k.reverse()});return(b==="forwards"?y.reverse():y).flat()},[a]);return S.useEffect(()=>{const b=d.current;if(b){const v=y=>{var k,E,C;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const P=document.activeElement,N=y.shiftKey;if(y.target===b&&N){(k=u.current)==null||k.focus();return}const $=g({tabbingDirection:N?"backwards":"forwards"}),G=$.findIndex(U=>U===P);k1($.slice(G+1))?y.preventDefault():N?(E=u.current)==null||E.focus():(C=c.current)==null||C.focus()}};return b.addEventListener("keydown",v),()=>b.removeEventListener("keydown",v)}},[a,g]),m.jsxs(CK,{ref:l,role:"region","aria-label":r.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&m.jsx(Y_,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});k1(b)}}),m.jsx(pA.Slot,{scope:n,children:m.jsx(He.ol,{tabIndex:-1,...s,ref:h})}),p&&m.jsx(Y_,{ref:c,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});k1(b)}})]})});TB.displayName=PB;var NB="ToastFocusProxy",Y_=S.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=Cw(NB,n);return m.jsx(bw,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&i()}})});Y_.displayName=NB;var Ew="Toast",Koe="toast.swipeStart",Xoe="toast.swipeMove",qoe="toast.swipeCancel",Yoe="toast.swipeEnd",RB=S.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a=!0,l]=Uo({prop:i,defaultProp:r,onChange:s});return m.jsx(Yo,{present:n||a,children:m.jsx(Qoe,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ni(t.onPause),onResume:ni(t.onResume),onSwipeStart:ye(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ye(t.onSwipeMove,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ye(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ye(t.onSwipeEnd,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});RB.displayName=Ew;var[Zoe,Joe]=EB(Ew,{onClose(){}}),Qoe=S.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:f,...p}=t,g=Cw(Ew,n),[b,v]=S.useState(null),y=dt(e,U=>v(U)),w=S.useRef(null),x=S.useRef(null),k=r||g.duration,E=S.useRef(0),C=S.useRef(k),P=S.useRef(0),{onToastAdd:N,onToastRemove:I}=g,L=ni(()=>{var X;(b==null?void 0:b.contains(document.activeElement))&&((X=g.viewport)==null||X.focus()),o()}),$=S.useCallback(U=>{!U||U===1/0||(window.clearTimeout(P.current),E.current=new Date().getTime(),P.current=window.setTimeout(L,U))},[L]);S.useEffect(()=>{const U=g.viewport;if(U){const X=()=>{$(C.current),u==null||u()},ee=()=>{const he=new Date().getTime()-E.current;C.current=C.current-he,window.clearTimeout(P.current),l==null||l()};return U.addEventListener(X_,ee),U.addEventListener(q_,X),()=>{U.removeEventListener(X_,ee),U.removeEventListener(q_,X)}}},[g.viewport,k,l,u,$]),S.useEffect(()=>{s&&!g.isClosePausedRef.current&&$(k)},[s,k,g.isClosePausedRef,$]),S.useEffect(()=>(N(),()=>I()),[N,I]);const G=S.useMemo(()=>b?FB(b):null,[b]);return g.viewport?m.jsxs(m.Fragment,{children:[G&&m.jsx(eae,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),m.jsx(Zoe,{scope:n,onClose:L,children:Cl.createPortal(m.jsx(pA.ItemSlot,{scope:n,children:m.jsx(kK,{asChild:!0,onEscapeKeyDown:ye(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||L(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(He.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...p,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ye(t.onKeyDown,U=>{U.key==="Escape"&&(a==null||a(U.nativeEvent),U.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:ye(t.onPointerDown,U=>{U.button===0&&(w.current={x:U.clientX,y:U.clientY})}),onPointerMove:ye(t.onPointerMove,U=>{if(!w.current)return;const X=U.clientX-w.current.x,ee=U.clientY-w.current.y,he=!!x.current,V=["left","right"].includes(g.swipeDirection),F=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ne=V?F(0,X):0,ke=V?0:F(0,ee),Z=U.pointerType==="touch"?10:2,ue={x:ne,y:ke},D={originalEvent:U,delta:ue};he?(x.current=ue,Eg(Xoe,d,D,{discrete:!1})):YR(ue,g.swipeDirection,Z)?(x.current=ue,Eg(Koe,c,D,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(X)>Z||Math.abs(ee)>Z)&&(w.current=null)}),onPointerUp:ye(t.onPointerUp,U=>{const X=x.current,ee=U.target;if(ee.hasPointerCapture(U.pointerId)&&ee.releasePointerCapture(U.pointerId),x.current=null,w.current=null,X){const he=U.currentTarget,V={originalEvent:U,delta:X};YR(X,g.swipeDirection,g.swipeThreshold)?Eg(Yoe,f,V,{discrete:!0}):Eg(qoe,h,V,{discrete:!0}),he.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),eae=t=>{const{__scopeToast:e,children:n,...i}=t,r=Cw(Ew,e),[s,o]=S.useState(!1),[a,l]=S.useState(!1);return iae(()=>o(!0)),S.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:m.jsx(Qp,{asChild:!0,children:m.jsx(bw,{...i,children:s&&m.jsxs(m.Fragment,{children:[r.label," ",n]})})})},tae="ToastTitle",MB=S.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return m.jsx(He.div,{...i,ref:e})});MB.displayName=tae;var nae="ToastDescription",OB=S.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return m.jsx(He.div,{...i,ref:e})});OB.displayName=nae;var IB="ToastAction",DB=S.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?m.jsx(jB,{altText:n,asChild:!0,children:m.jsx(mA,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${IB}\`. Expected non-empty \`string\`.`),null)});DB.displayName=IB;var LB="ToastClose",mA=S.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=Joe(LB,n);return m.jsx(jB,{asChild:!0,children:m.jsx(He.button,{type:"button",...i,ref:e,onClick:ye(t.onClick,r.onClose)})})});mA.displayName=LB;var jB=S.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return m.jsx(He.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function FB(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),rae(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...FB(i))}}),e}function Eg(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?bC(r,s):r.dispatchEvent(s)}var YR=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function iae(t=()=>{}){const e=ni(t);ti(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function rae(t){return t.nodeType===t.ELEMENT_NODE}function sae(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function k1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var oae=AB,$B=TB,BB=RB,zB=MB,UB=OB,HB=DB,VB=mA;const aae=oae,WB=S.forwardRef(({className:t,...e},n)=>m.jsx($B,{ref:n,className:Me("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));WB.displayName=$B.displayName;const GB=S.forwardRef(({className:t,variant:e="default",...n},i)=>m.jsx(BB,{ref:i,"data-variant":e,className:Me("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-bottom-full data-[state=open]:slide-in-from-top-full",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"group bg-red-900 text-red-50",e==="info"&&"border border-green-500 border-stone-600 bg-stone-900 text-white",t),...n}));GB.displayName=BB.displayName;const KB=S.forwardRef(({className:t,...e},n)=>m.jsx(HB,{ref:n,className:Me("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));KB.displayName=HB.displayName;const XB=S.forwardRef(({className:t,...e},n)=>m.jsx(VB,{ref:n,className:Me("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-data-[variant=error]:text-red-300 group-data-[variant=error]:hover:text-red-50 group-data-[variant=error]:focus:ring-red-400 group-data-[variant=error]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:m.jsx("span",{className:"icon-[lucide--x] block h-4 w-4"})}));XB.displayName=VB.displayName;const qB=S.forwardRef(({className:t,...e},n)=>m.jsx(zB,{ref:n,className:Me("text-sm font-semibold",t),...e}));qB.displayName=zB.displayName;const YB=S.forwardRef(({className:t,...e},n)=>m.jsx(UB,{ref:n,className:Me("text-sm opacity-90",t),...e}));YB.displayName=UB.displayName;var Rr=function(t,e){return Number(t.toFixed(e))},lae=function(t,e){return e},Bt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},uae=function(t){return-Math.cos(t*Math.PI)/2+.5},cae=function(t){return t},dae=function(t){return t*t},hae=function(t){return t*(2-t)},fae=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},pae=function(t){return t*t*t},mae=function(t){return--t*t*t+1},gae=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},vae=function(t){return t*t*t*t},yae=function(t){return 1- --t*t*t*t},wae=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},bae=function(t){return t*t*t*t*t},xae=function(t){return 1+--t*t*t*t*t},Sae=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},ZB={easeOut:uae,linear:cae,easeInQuad:dae,easeOutQuad:hae,easeInOutQuad:fae,easeInCubic:pae,easeOutCubic:mae,easeInOutCubic:gae,easeInQuart:vae,easeOutQuart:yae,easeInOutQuart:wae,easeInQuint:bae,easeOutQuint:xae,easeInOutQuint:Sae},JB=function(t){typeof t=="number"&&cancelAnimationFrame(t)},Us=function(t){t.mounted&&(JB(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function QB(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;Us(t),t.animation=function(){if(!t.mounted)return JB(t.animation);var o=new Date().getTime()-r,a=o/n,l=ZB[e],u=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function _ae(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Rl(t,e,n,i){var r=_ae(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=e.scale-a,d=e.positionX-l,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):QB(t,i,n,function(f){var p=a+c*f,g=l+d*f,b=u+h*f;s(p,g,b)})}}function kae(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,u=i-a,c=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:c}}var Cae=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,u=t-e-a,c=a,d=i-r-l,h=l;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},gA=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=kae(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=Cae(o,l,u,a,c,d,!!r);return h},Z_=function(t,e,n,i){return i?t<e?Rr(e,2):t>n?Rr(n,2):Rr(t,2):Rr(t,2)},Id=function(t,e){var n=gA(t,e);return t.bounds=n,n};function cm(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var f=Z_(t,a-d,u+d,i),p=Z_(e,l-h,c+h,i);return{x:f,y:p}}function Aw(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:u};var d=l-e*c,h=u-n*c,f=cm(d,h,r,s,0,0,null);return f}function dm(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var ZR=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(c){return c instanceof Element?r==null?void 0:r.contains(c):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var u=Pw(s,n);return!u},JR=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},Eae=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},Aae=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function Pae(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,g=n>d||n<h,b=i>f||i<p,v=n>d?u.offsetWidth:t.setup.minPositionX||0,y=i>f?u.offsetHeight:t.setup.minPositionY||0,w=Aw(t,v,y,r,t.bounds,a||l),x=w.x,k=w.y;return{scale:r,positionX:g?x:n,positionY:b?k:i}}}function ez(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(!(o===null||a===null||e===c&&n===d)){var h=cm(e,n,a,s,i,r,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var Tae=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,u=r.positionY;if(!i)return{x:l,y:u};var c=e-i.x,d=n-i.y,h=o?l:c,f=a?u:d;return{x:h,y:f}},wl=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},Nae=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},Rae=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,u=!l||a>1||!s||e;return!(!u||!n||!i)};function Mae(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function QR(t,e,n,i,r,s,o,a,l,u){if(r){if(e>o&&n>o){var c=o+(t-o)*u;return c>l?l:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<a?a:c>s?s:c}}return i?e:Z_(t,s,o,r)}function Oae(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function Iae(t,e){var n=Nae(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var u=Oae(o,a),c=e.x-i.x,d=e.y-i.y,h=c/u,f=d/u,p=l-r,g=c*c+d*d,b=Math.sqrt(g)/p;t.velocity={velocityX:h,velocityY:f,total:b}}t.lastMousePosition=e,t.velocityTime=l}}function Dae(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=Rae(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=i.limitToBounds,p=i.alignmentAnimation,g=i.zoomAnimation,b=i.panning,v=b.lockAxisY,y=b.lockAxisX,w=g.animationType,x=p.sizeX,k=p.sizeY,E=p.velocityAlignmentTime,C=E,P=Mae(t,l),N=Math.max(P,C),I=wl(t,x),L=wl(t,k),$=I*r.offsetWidth/100,G=L*r.offsetHeight/100,U=u+$,X=c-$,ee=d+G,he=h-G,V=t.transformState,F=new Date().getTime();QB(t,w,N,function(ne){var ke=t.transformState,Z=ke.scale,ue=ke.positionX,D=ke.positionY,O=new Date().getTime()-F,B=O/C,_=ZB[p.animationType],T=1-_(Math.min(1,B)),M=1-ne,R=ue+o*M,K=D+a*M,W=QR(R,V.positionX,ue,y,f,c,u,X,U,T),te=QR(K,V.positionY,D,v,f,h,d,he,ee,T);(ue!==R||D!==K)&&t.setTransformState(Z,W,te)})}}function eM(t,e){var n=t.transformState.scale;Us(t),Id(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?Aae(t,e):Eae(t,e)}function tz(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,a=r.sizeY,l=r.animationTime,u=r.animationType,c=s||e<i||!o&&!a;if(!c){var d=Pae(t);d&&Rl(t,d,l,u)}}function tM(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=Tae(t,e,n),u=l.x,c=l.y,d=wl(t,o),h=wl(t,a);Iae(t,{x:u,y:c}),ez(t,u,c,d,h)}}function Lae(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=a<u||l<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?Dae(t):tz(t)}}function vA(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=dm(Rr(e,2),s,o,0,!1),u=Id(t,l),c=Aw(t,n,i,l,u,a),d=c.x,h=c.y;return{scale:l,positionX:d,positionY:h}}function nz(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,u=l.disabled,c=l.animationTime,d=l.animationType,h=u||i>=o;if((i>=1||a)&&tz(t),!(h||!r||!t.mounted)){var f=e||r.offsetWidth/2,p=n||r.offsetHeight/2,g=vA(t,o,f,p);g&&Rl(t,g,c,d)}}var Qa=function(){return Qa=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Qa.apply(this,arguments)};function nM(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Ag={previousScale:1,scale:1,positionX:0,positionY:0},_h={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},J_={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},iz=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Ag.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Ag.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:Ag.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:Ag.positionY}},iM=function(t){var e=Qa({},_h);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof _h[n]<"u";if(r&&i){var s=Object.prototype.toString.call(_h[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=Qa(Qa({},_h[n]),t[n]):a?e[n]=nM(nM([],_h[n],!0),t[n]):e[n]=t[n]}}),e},rz=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,u=s.smooth,c=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*n):i+e*n,h=dm(Rr(d,3),a,o,c,!1);return h};function sz(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-l)/a,f=(d/2-u)/a,p=rz(t,e,n),g=vA(t,p,h,f);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");Rl(t,g,i,r)}function oz(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=iz(t.props),l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(s){var h=gA(t,a.scale),f=cm(a.positionX,a.positionY,h,o,0,0,s),p={scale:a.scale,positionX:f.x,positionY:f.y};u===a.scale&&c===a.positionX&&d===a.positionY||(i==null||i(),Rl(t,p,e,n))}}function jae(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function Fae(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,u=o.maxScale;if(!i||!r)return s;var c=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=jae(e,i,r,s),f=h.x,p=h.y,g=d.width/s.scale,b=d.height/s.scale,v=i.offsetWidth/g,y=i.offsetHeight/b,w=dm(n||Math.min(v,y),l,u,0,!1),x=(c.width-g*w)/2,k=(c.height-b*w)/2,E=(c.left-f)*w+x,C=(c.top-p)*w+k,P=gA(t,w),N=cm(E,C,P,a,0,0,i),I=N.x,L=N.y;return{positionX:I,positionY:L,scale:w}}var $ae=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),sz(t,1,e,n,i)}},Bae=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),sz(t,-1,e,n,i)}},zae=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?u:i};Rl(t,f,r,s)}}},Uae=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),oz(t,e,n)}},Hae=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=az(e||r.scale,s,o);Rl(t,a,n,i)}}},Vae=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),Us(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=Fae(t,o,n);Rl(t,a,i,r)}}},Q_=function(t){return{instance:t,zoomIn:$ae(t),zoomOut:Bae(t),setTransform:zae(t),resetTransform:Uae(t),centerView:Hae(t),zoomToElement:Vae(t)}},Wae=function(t){return{instance:t,state:t.transformState}},_t=function(t){var e={};return Object.assign(e,Wae(t)),Object.assign(e,Q_(t)),e},C1=!1;function E1(){try{var t={get passive(){return C1=!0,!1}};return t}catch{return C1=!1,C1}}var Pg=".".concat(J_.wrapperClass),Pw=function(t,e){return e.some(function(n){return t.matches("".concat(Pg," ").concat(n,", ").concat(Pg," .").concat(n,", ").concat(Pg," ").concat(n," *, ").concat(Pg," .").concat(n," *"))})},ek=function(t){t&&clearTimeout(t)},Gae=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},az=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function Kae(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Xae=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,u=e.target,c=a&&!l&&!i&&u;if(!c||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Pw(u,o);return!d},qae=function(t){return t?t.deltaY<0?1:-1:0};function Yae(t,e){var n=qae(t),i=lae(e,n);return i}function lz(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var Zae=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n,g=i?!1:!f,b=dm(Rr(p,3),u,l,h,g&&!d);return b},Jae=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Qae=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=Pw(o,r);return!l},ele=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},tle=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Rr(r[0].clientX-i.left,5),o=Rr(r[0].clientY-i.top,5),a=Rr(r[1].clientX-i.left,5),l=Rr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},uz=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},nle=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,u=a.size,c=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return dm(Rr(h,2),o,s,u,!c&&!l)},ile=160,rle=100,sle=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(Us(t),Bt(_t(t),e,i),Bt(_t(t),e,r))},ole=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,g=d.size,b=d.disabled,v=h.step,y=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=Yae(e,null),x=p?y*Math.abs(e.deltaY):v,k=Zae(t,w,x,!e.ctrlKey);if(l!==k){var E=Id(t,k),C=lz(e,s,l),P=b||g===0||c||f,N=u&&P,I=Aw(t,C.x,C.y,k,E,N),L=I.x,$=I.y;t.previousWheelEvent=e,t.setTransformState(k,L,$),Bt(_t(t),e,i),Bt(_t(t),e,r)}},ale=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;ek(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(nz(t,e.x,e.y),t.wheelAnimationTimer=null)},rle);var s=Jae(t,e);s&&(ek(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Bt(_t(t),e,i),Bt(_t(t),e,r))},ile))},cz=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},lle=function(t,e){var n=uz(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=cz(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,Us(t)},ule=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,u=o.zoomAnimation,c=o.alignmentAnimation,d=u.disabled,h=u.size;if(!(i===null||!n)){var f=tle(e,s,n);if(!(!Number.isFinite(f.x)||!Number.isFinite(f.y))){var p=uz(e),g=nle(t,p),b=cz(e),v=b.x-(t.pinchLastCenterX||0),y=b.y-(t.pinchLastCenterY||0);if(!(g===s&&v===0&&y===0)){t.pinchLastCenterX=b.x,t.pinchLastCenterY=b.y;var w=Id(t,g),x=d||h===0||l,k=a&&x,E=Aw(t,f.x,f.y,g,w,k),C=E.x,P=E.y;t.pinchMidpoint=f,t.lastDistance=p;var N=c.sizeX,I=c.sizeY,L=wl(t,N),$=wl(t,I),G=C+v,U=P+y,X=cm(G,U,w,a,L,$,r),ee=X.x,he=X.y;t.setTransformState(g,ee,he)}}}},cle=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,nz(t,e==null?void 0:e.x,e==null?void 0:e.y)},dz=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;ek(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Bt(_t(t),e,n)},i)},dle=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Bt(_t(t),e,i),oz(t,o,a,function(){return Bt(_t(t),e,r)}),dz(t,e)};function hle(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function fle(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,u=a.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,g=c.animationType;if(!d&&!i){if(h==="reset")return dle(t,e);if(!s)return console.error("No ContentComponent found");var b=hle(h,t.transformState.scale),v=rz(t,b,f);if(o!==v){Bt(_t(t),e,l);var y=lz(e,s,o),w=vA(t,v,y.x,y.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");Bt(_t(t),e,u),Rl(t,w,p,g),dz(t,e)}}}var ple=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,u=r==null?void 0:r.contains(l),c=n&&l&&u&&!o;if(!c)return!1;var d=Pw(l,a);return!d},mle=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,Id(n,n.transformState.scale),n.setup=iM(i)},this.initializeWindowEvents=function(){var i,r,s=E1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=E1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),Us(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=E1();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(_t(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s,o=i.offsetWidth,a=i.offsetHeight;(o>0||a>0)&&(n.onInitCallbacks.forEach(function(l){return l(_t(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect())}),setTimeout(function(){var s;(s=n.observer)===null||s===void 0||s.disconnect()},5e3),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=Xae(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(sle(n,i),ole(n,i),ale(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,u=l.positionX,c=l.positionY,d=u-i.deltaX,h=c-i.deltaY,f=a.lockAxisX?u:d,p=a.lockAxisY?c:h,g=n.setup.alignmentAnimation,b=g.sizeX,v=g.sizeY,y=wl(n,b),w=wl(n,v);f===u&&p===c||ez(n,f,p,y,w)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=ZR(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),Us(n),eM(n,i),Bt(_t(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=JR(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),tM(n,i.clientX,i.clientY),Bt(_t(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(Lae(n),Bt(_t(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=Qae(n,i);l&&(lle(n,i),Us(n),Bt(_t(n),i,o),Bt(_t(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=ele(n);l&&(i.preventDefault(),i.stopPropagation(),ule(n,i),Bt(_t(n),i,o),Bt(_t(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(cle(n),Bt(_t(n),i,s),Bt(_t(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=ZR(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(!a){n.lastTouch=+new Date,Us(n);var l=i.touches,u=l.length===1,c=l.length===2;u&&(Us(n),eM(n,i),Bt(_t(n),i,s)),c&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=JR(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];tM(n,a.clientX,a.clientY),Bt(_t(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=ple(n,i);s&&fle(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=_t(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Bt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=az(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Gae(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return _t(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Id(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=_t(n);Bt(s,void 0,n.props.onInit)},this.props=e,this.setup=iM(this.props),this.transformState=iz(this.props)}return t}(),yA=ln.createContext(null),gle=function(t,e){return typeof t=="function"?t(e):t},vle=ln.forwardRef(function(t,e){var n=S.useRef(new mle(t)).current,i=gle(t.children,Q_(n));return S.useImperativeHandle(e,function(){return Q_(n)},[n]),S.useEffect(function(){n.update(t)},[n,t]),ln.createElement(yA.Provider,{value:n},i)});ln.forwardRef(function(t,e){var n=S.useRef(null),i=S.useContext(yA);return S.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),ln.createElement("div",Qa({},t,{ref:Kae([n,e])}))});function yle(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var wle=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,rM={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};yle(wle);var ble=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,u=l===void 0?{}:l,c=t.contentProps,d=c===void 0?{}:c,h=S.useContext(yA),f=h.init,p=h.cleanupWindowEvents,g=S.useRef(null),b=S.useRef(null);return S.useEffect(function(){var v=g.current,y=b.current;return v!==null&&y!==null&&f&&(f==null||f(v,y)),function(){p==null||p()}},[]),ln.createElement("div",Qa({},u,{ref:g,className:"".concat(J_.wrapperClass," ").concat(rM.wrapper," ").concat(i),style:o}),ln.createElement("div",Qa({},d,{ref:b,className:"".concat(J_.contentClass," ").concat(rM.content," ").concat(s),style:a}),e))};function xle({wrapperRef:t}){const e=wt();return m.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[m.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:m.jsx("span",{className:"h-4 w-4",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),m.jsx("hr",{className:"border-stone-600"}),m.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:m.jsx("span",{className:"h-4 w-4",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function Sle(){const t=wt(),e=tt(ft),n=tt(Fu),i=tt($0),r=tt(tn),s=tt(M0),[o]=im(),a=S.useRef(null),l=(u,c)=>{const[d,...h]=u.split(":"),f=h.join(":").trim();return{cycle:c,stage:d.trim(),action:f}};return S.useEffect(()=>{if(e){const u=l(e,n);z.set($0,c=>[...c,u])}},[e]),S.useEffect(()=>{r.type==="running"&&s&&Ri({title:"El programa ha sido modificado",description:"La ejecucin se reiniciar desde el principio para aplicar los cambios.",variant:"info"})},[r,s]),S.useEffect(()=>{const u=a.current;u&&(u.scrollTop=u.scrollHeight)},[i]),o.showInstructionCycle?m.jsxs("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"mb-2 block h-min w-full rounded-br-lg rounded-tl-lg border-b border-stone-600 bg-purple-500 px-2 py-1 text-lg text-white cursor-move",children:t("computer.cpu.instruction-cycle")}),m.jsx("hr",{className:"border-stone-600"}),m.jsx("div",{ref:a,className:"flex flex-col w-full py-2 px-2 overflow-y-auto max-h-[300px]",children:i.map((u,c)=>{const d=c===0||i[c-1].stage!==u.stage;return m.jsxs("div",{children:[d&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:`mb-2 ${u.stage==="Captacin"?"text-blue-400 text-lg font-serif":u.stage==="Ejecucin"?"text-green-400 text-lg font-sans":u.stage==="Interrupcin"?"text-red-400 text-lg font-mono":"text-white text-sm font-bold"}`,children:["Etapa: ",u.stage]}),u.stage!=="Interrupcin"&&m.jsxs("div",{className:"flex text-white text-sm font-bold mb-2 font-serif",children:[m.jsx("div",{className:"w-1/4 text-center",children:"Ciclo"}),m.jsx("div",{className:"w-3/4 text-left",children:"Accin"})]})]}),u.stage==="Interrupcin"?m.jsx("div",{className:"text-white text-sm mb-1",children:u.action}):m.jsxs("div",{className:"flex text-white text-sm mb-1",children:[m.jsx("div",{className:"w-1/4 text-center",children:u.cycle}),m.jsx("div",{className:"w-3/4 text-left",children:u.action})]})]},c)})})]}):null}function _le(){const t=wt(),{devices:e}=Rn();return e.hasIOBus?m.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:m.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function kle(){const{devices:t}=Rn(),e=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),n=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),i="M 750 545 H 800";return m.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[m.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),m.jsx(bn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:e,style:Mt("bus.rd")}),m.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),m.jsx(bn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:n,style:Mt("bus.wr")}),t.hasIOBus&&m.jsxs(m.Fragment,{children:[m.jsx(Cn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),m.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:i}),m.jsx(bn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:i,style:Mt("bus.mem")})]}),t.pic&&m.jsx(Cn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&m.jsx(Cn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&m.jsx(Cn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&m.jsx(Cn,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&m.jsxs(m.Fragment,{children:[m.jsx(Cn,{springs:"bus.intr",d:"M 110 700 V 470"}),m.jsx(Cn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&m.jsx(Cn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&m.jsx(Cn,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&m.jsx(Cn,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio==="switches-and-leds"&&m.jsxs(m.Fragment,{children:[m.jsx(Cn,{springs:"bus.switches->pio",d:"M 1300 758 H 1120"}),m.jsx(Cn,{springs:"bus.pio->leds",d:"M 1120 868 H 1300"})]}),t.pio==="printer"&&m.jsxs(m.Fragment,{children:[m.jsx(Cn,{springs:"bus.printer.strobe",d:"M 1120 770 H 1225 V 992 H 1300"}),m.jsx(Cn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 782 H 1120"}),m.jsx(Cn,{springs:"bus.printer.data",d:"M 1120 850 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&m.jsxs(m.Fragment,{children:[m.jsx(Cn,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),m.jsx(Cn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),m.jsx(Cn,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]})]})}function Cn({d:t,springs:e}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),m.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),m.jsx(bn.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Mt(e)})]})}function Cle(){const t=wt(),{devices:e}=Rn();return m.jsxs(m.Fragment,{children:[m.jsx(Vi,{className:"left-[384px] top-[403px]",children:"rd"}),m.jsx(Vi,{className:"left-[384px] top-[423px]",children:"wr"}),e.hasIOBus&&m.jsxs(m.Fragment,{children:[m.jsx(Vi,{className:"left-[384px] top-[443px]",children:"io/m"}),m.jsx(Vi,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")})]}),e.pic&&m.jsx(Vi,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),e.timer&&m.jsx(Vi,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&m.jsx(Vi,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&m.jsx(Vi,{className:"left-[675px] top-[573px]",children:t("computer.chip-select.handshake")}),e.pic&&m.jsxs(m.Fragment,{children:[m.jsx(Vi,{className:"left-[75px] top-[478px]",children:"intr"}),m.jsx(Vi,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&m.jsxs(m.Fragment,{children:[m.jsx(Vi,{className:"left-[1310px] top-[983px]",children:"strobe"}),m.jsx(Vi,{className:"left-[1310px] top-[998px]",children:"busy"}),m.jsx(Vi,{className:"left-[1310px] top-[1053px]",children:"data"})]})]})}function Vi({className:t,children:e}){return m.jsx("span",{className:Me("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function Ele(){const{devices:t}=Rn(),e=["M 659 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 629 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" ");return m.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] size-full",children:[m.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),m.jsx(bn.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:n,style:Mt("bus.data")}),m.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),m.jsx(bn.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:Mt("bus.address")})]})}function Ale(){return m.jsxs(m.Fragment,{children:[m.jsx(Ele,{}),m.jsx(kle,{}),m.jsx(Cle,{}),m.jsx(_le,{})]})}function Ple(){const{devices:t}=Rn();if(!t.clock)return null;const e=Mt("clock.angle");return m.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:m.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx(bn.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}var wA="Popover",[hz,ofe]=El(wA,[Wd]),hm=Wd(),[Tle,Ml]=hz(wA),fz=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=hm(e),l=S.useRef(null),[u,c]=S.useState(!1),[d=!1,h]=Uo({prop:i,defaultProp:r,onChange:s});return m.jsx(QC,{...a,children:m.jsx(Tle,{scope:e,contentId:il(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:S.useCallback(()=>h(f=>!f),[h]),hasCustomAnchor:u,onCustomAnchorAdd:S.useCallback(()=>c(!0),[]),onCustomAnchorRemove:S.useCallback(()=>c(!1),[]),modal:o,children:n})})};fz.displayName=wA;var pz="PopoverAnchor",Nle=S.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Ml(pz,n),s=hm(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return S.useEffect(()=>(o(),()=>a()),[o,a]),m.jsx(Vy,{...s,...i,ref:e})});Nle.displayName=pz;var mz="PopoverTrigger",gz=S.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Ml(mz,n),s=hm(n),o=dt(e,r.triggerRef),a=m.jsx(He.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":xz(r.open),...i,ref:o,onClick:ye(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:m.jsx(Vy,{asChild:!0,...s,children:a})});gz.displayName=mz;var bA="PopoverPortal",[Rle,Mle]=hz(bA,{forceMount:void 0}),vz=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Ml(bA,e);return m.jsx(Rle,{scope:e,forceMount:n,children:m.jsx(Yo,{present:n||s.open,children:m.jsx(Qp,{asChild:!0,container:r,children:i})})})};vz.displayName=bA;var Dd="PopoverContent",yz=S.forwardRef((t,e)=>{const n=Mle(Dd,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Ml(Dd,t.__scopePopover);return m.jsx(Yo,{present:i||s.open,children:s.modal?m.jsx(Ole,{...r,ref:e}):m.jsx(Ile,{...r,ref:e})})});yz.displayName=Dd;var Ole=S.forwardRef((t,e)=>{const n=Ml(Dd,t.__scopePopover),i=S.useRef(null),r=dt(e,i),s=S.useRef(!1);return S.useEffect(()=>{const o=i.current;if(o)return nE(o)},[]),m.jsx(Gy,{as:Au,allowPinchZoom:!0,children:m.jsx(wz,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ye(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,u=a.button===2||l;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ye(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ile=S.forwardRef((t,e)=>{const n=Ml(Dd,t.__scopePopover),i=S.useRef(!1),r=S.useRef(!1);return m.jsx(wz,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),wz=S.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:c,...d}=t,h=Ml(Dd,n),f=hm(n);return UC(),m.jsx(By,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:m.jsx(Zp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:m.jsx(eE,{"data-state":xz(h.open),role:"dialog",id:h.contentId,...f,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),bz="PopoverClose",Dle=S.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Ml(bz,n);return m.jsx(He.button,{type:"button",...i,ref:e,onClick:ye(t.onClick,()=>r.onOpenChange(!1))})});Dle.displayName=bz;var Lle="PopoverArrow",jle=S.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=hm(n);return m.jsx(tE,{...r,...i,ref:e})});jle.displayName=Lle;function xz(t){return t?"open":"closed"}var Fle=fz,$le=gz,Ble=vz,Sz=yz;const _z=Fle,kz=$le,xA=S.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>m.jsx(Ble,{children:m.jsx(Sz,{ref:r,align:e,sideOffset:n,className:Me("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));xA.displayName=Sz.displayName;function sr({name:t,title:e,valueAtom:n,springs:i,emphasis:r=!1,className:s}){const o=wt(),a=tt(n),l=a.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,d=["AX","BX","CX","DX"].includes(t),h=t==="IP",f=t==="SP",p=t==="MBR",g=t==="MAR",b=t==="IR",v=["id","ri"].includes(t),y=c==="FLAGS";return m.jsxs(_z,{children:[m.jsx(kz,{asChild:!0,children:m.jsxs(bn.button,{title:c!=="left"&&c!=="right"?`Registro ${c}`:c,className:Me("flex cursor-pointer items-center font-mono leading-none transition-opacity",d||h||f||p||g||b||v?"w-10 h-10 justify-center rounded border-2 font-bold text-lg shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] hover:shadow-xl hover:scale-110 transition-all duration-200":y?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",d?"border-mantis-500 bg-stone-800 text-mantis-300":h?"border-red-500 bg-stone-800 text-red-300":f?"border-yellow-400 bg-stone-800 text-yellow-300":p||g||b?"border-indigo-400 bg-stone-800 text-indigo-300":v?"border-cyan-400 bg-stone-800 text-cyan-300":y?"":r?"border-mantis-400 text-lg":"border-stone-600 text-base",s),style:c==="left"||c==="right"?{backgroundColor:"transparent"}:Mt(i),children:[d||h||f||p||g||b||v?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:Me("absolute top-0.5 left-0.5 text-[8px] bg-stone-900/80 px-0.5 rounded pointer-events-none font-bold",d?"text-mantis-400":h?"text-red-400":f?"text-yellow-400":v?"text-cyan-400":"text-indigo-400"),children:c}),m.jsx("span",{className:"mt-2 font-mono text-base font-bold",children:l.toString("hex")})]}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:Me("mr-2 font-extrabold tracking-wide",d&&"text-mantis-300 drop-shadow",y&&"text-yellow-200",v&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),m.jsx("span",{className:Me("rounded px-1 py-0.5 font-light",d?"bg-stone-950 text-mantis-300 border-mantis-400 border":y?"border border-yellow-400 bg-yellow-950 text-yellow-200":v?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:l.toString("hex")})]}),y&&m.jsxs("span",{className:"flex gap-1 ml-2",children:[m.jsx("span",{className:Me("px-1 text-xs font-bold rounded border",Number(l)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),m.jsx("span",{className:Me("px-1 text-xs font-bold rounded border",Number(l)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),m.jsxs(xA,{className:"w-60",children:[m.jsx("p",{className:"px-4 py-2 font-medium text-white",children:c!=="left"&&c!=="right"?`Registro ${c}`:c}),m.jsx("hr",{className:"border-stone-600"}),m.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(w=>m.jsxs("li",{children:[m.jsx("b",{className:"font-medium",children:o(`generics.byte-representation.${w}`)}),":"," ",m.jsx("span",{className:"font-mono text-mantis-400",children:a.low.toString(w)})]},w))})]})]})}function zle(){const t=tt(Ge.FLAGS),e=tt(k4),[n,i]=S.useState(!1),r=tt(_4),[s]=im();S.useEffect(()=>{const d=f=>{i(f==="ADD"||f==="SUB"||f==="CMP"||f==="AND"||f==="OR"||f==="XOR"||f==="NOT"||f==="NEG"||f==="DEC"||f==="INC")},h=f=>{d(f.detail.instruction)};return window.addEventListener("instructionChange",h),()=>{window.removeEventListener("instructionChange",h)}},[]);const o=t.bit(1),a=t.bit(0),l=t.bit(3),u=t.bit(4),c=t.bit(2);return m.jsxs(m.Fragment,{children:[m.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[m.jsx(bn.path,{className:"fill-none stroke-mantis-400 stroke-bus drop-shadow-[0_0_4px_rgba(60,180,120,0.4)]",strokeLinejoin:"round",d:"M 120 85 H 220",pathLength:1,strokeDasharray:1,style:Mt("cpu.alu.operands")}),m.jsx(bn.path,{className:"fill-none stroke-mantis-400 stroke-bus drop-shadow-[0_0_4px_rgba(60,180,120,0.4)]",strokeLinejoin:"round",d:"M 120 145 H 220",pathLength:1,strokeDasharray:1,style:Mt("cpu.alu.operands")}),m.jsxs("defs",{children:[m.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[m.jsx("stop",{offset:"0%",stopColor:"#374151"}),m.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),m.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),m.jsx("filter",{id:"aluShadow",children:m.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),m.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),m.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),m.jsx(bn.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block h-5 w-5 text-stone-300",style:{transform:Mt("cpu.alu.cog").rot.to(d=>`rotate(${d*60}deg)`)}}),n&&m.jsx(bn.span,{className:"absolute left-[244px] top-[40px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none z-30",style:Mt("cpu.alu.operation"),children:e}),m.jsxs(bn.div,{className:Me("absolute flex w-min items-center gap-0.5 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 px-0.5 py-1 text-stone-200 font-bold min-w-[38px] min-h-[30px] shadow-lg ring-1 ring-stone-300",s.flagsVisibility==="SF_OF_CF_ZF"?"top-[190px] left-[210px]":"top-[190px] left-[230px]"),style:Mt("cpu.FLAGS"),children:[m.jsx("span",{className:"absolute top-0.5 left-0.5 text-stone-300 text-[6px] bg-stone-900/80 px-0.5 rounded pointer-events-none font-bold",children:"FLAGS"}),m.jsxs("div",{className:"mt-2 flex items-center gap-0.5",children:[r&&m.jsx("span",{className:Me("px-0.5 py-0 text-[10px] font-bold rounded border transition-all duration-200",u?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),s.flagsVisibility==="SF_OF_CF_ZF"&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:Me("px-0.5 py-0 text-[10px] font-bold rounded border transition-all duration-200",l?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),m.jsx("span",{className:Me("px-0.5 py-0 text-[10px] font-bold rounded border transition-all duration-200",c?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),m.jsx("span",{className:Me("px-0.5 py-0 text-[10px] font-bold rounded border transition-all duration-200",o?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),m.jsx("span",{className:Me("px-0.5 py-0 text-[10px] font-bold rounded border transition-all duration-200",a?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function Ule(){const t=wt(),e=tt(Fu),{status:n}=Rn(),i=tt(ns),r=tt(ft),s=S.useMemo(()=>{if(!("metadata"in i)||i.metadata.operands.length===0)return"";if(i.phase==="fetching-operands"){let a=" __";for(let l=1;l<i.metadata.operands.length;l++)a+=", __";return a}else return" "+i.metadata.operands.join(", ")},[i]),o=S.useMemo(()=>n.type==="running"&&n.waitingForInput?"waiting-for-input":n.type==="stopped"?n.error?"stopped-error":"stopped":i.phase==="stopped"&&i.error?"stopped-error":i.phase,[n,i]);return m.jsxs(m.Fragment,{children:[m.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:m.jsx(bn.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:Mt("cpu.decoder.path")})}),m.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:m.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:t("computer.cpu.control-unit")})}),m.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[m.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[m.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),m.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:m.jsx(bn.div,{className:"h-full bg-mantis-400",style:{width:Mt("cpu.decoder.progress.progress").to(a=>`${a*100}%`),opacity:Mt("cpu.decoder.progress.opacity")}})})]}),m.jsx("span",{className:Me("mt-4 w-full rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",o==="stopped-error"?"bg-red-500":o==="waiting-for-input"?"bg-amber-600":o==="int6"||o==="int7"?"bg-blue-600":"bg-stone-900"),children:o==="int6"||o==="int7"?m.jsxs(m.Fragment,{children:[t(`computer.cpu.status.${o}`),m.jsx("div",{children:r})]}):o==="stopped-error"||o==="waiting-for-input"?m.jsx(m.Fragment,{children:t(`computer.cpu.status.${o}`)}):r?m.jsx("div",{children:r}):t(`computer.cpu.status.${o}`)}),m.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:m.jsx("p",{className:"text-center font-mono",children:!("metadata"in i)||i.phase==="fetching"||n.type==="stopped"?i.phase==="stopped"&&o!=="stopped-error"&&o==="stopped"&&e!==0?m.jsx("span",{className:"text-mantis-400",children:"HLT"}):m.jsx("span",{className:"italic text-stone-400",children:"???"}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"text-mantis-400",children:i.metadata.name}),m.jsx("span",{className:"text-white",children:s})]})})})]})]})}function Hle(){const t=wt(),e=tt(NE),[n,i]=S.useState(!1),[r,s]=S.useState(!1),[o,a]=S.useState(!1);return S.useEffect(()=>{const l=(c,d,h)=>{a(c==="ADD"||c==="SUB"||c==="CMP"||c==="AND"||c==="OR"||c==="XOR"||c==="NOT"||c==="NEG"||c==="DEC"||c==="INC"),i(!!(c==="IRET"||d)),s(!!h)},u=c=>{const d=c;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",u),()=>{window.removeEventListener("instructionChange",u)}},[]),m.jsxs("div",{className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),m.jsx(Die,{showSP:e,showri:r}),m.jsx(fse,{showSP:e,showid:n,showri:r}),o&&m.jsxs(m.Fragment,{children:[m.jsx(Wi,{name:"left",className:Me("left-[96px] top-[49px]","border-transparent","bg-transparent")}),m.jsx(Wi,{name:"right",className:Me("left-[96px] top-[150px]","border-transparent","bg-transparent")})]}),m.jsx(zle,{}),m.jsx(Wi,{name:"AX",emphasis:!0,className:"left-[450px] top-[30px]"}),m.jsx(Wi,{name:"BX",emphasis:!0,className:"left-[450px] top-[70px]"}),m.jsx(Wi,{name:"CX",emphasis:!0,className:"left-[450px] top-[110px]"}),m.jsx(Wi,{name:"DX",emphasis:!0,className:"left-[450px] top-[150px]"}),n&&m.jsx(Wi,{name:"id",className:Me("left-[450px] top-[190px]","border-cyan-400")}),m.jsx(Wi,{name:"MBR",className:Me("right-[-11px] top-[233px]","border-indigo-400")}),m.jsx(Wi,{name:"IR",className:Me("left-[185px] top-[270px]","border-indigo-400")}),m.jsx(Ule,{}),e&&m.jsx(Wi,{name:"SP",emphasis:!0,className:Me("left-[450px] top-[292px]","border-yellow-400")}),m.jsx(Wi,{name:"IP",emphasis:!0,className:Me("left-[450px] top-[332px]","border-red-color")}),r&&m.jsx(Wi,{name:"ri",emphasis:!0,className:Me("left-[470px] top-[372px]","border-cyan-400")}),m.jsx(Wi,{name:"MAR",className:Me("right-[-11px] top-[333px]","border-indigo-400")})]})}function Wi({name:t,emphasis:e,className:n}){return m.jsx(sr,{name:t,valueAtom:Ge[t],springs:`cpu.${t}`,emphasis:e,className:Me("absolute",n)})}function Vle(){const t=wt(),e=tt(Fu),n=tt(ow),[i]=im();return i.showStatsCPU?m.jsxs("div",{className:"absolute left-[120px] top-[-120px] z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"mb-2 block h-min w-full rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-blue-500 px-2 py-1 text-lg text-white cursor-move",children:t("computer.cpu.stats")}),m.jsx("hr",{className:"border-stone-600"}),m.jsx("div",{className:"flex flex-col w-full items-start py-2 px-2",children:m.jsxs("div",{className:"text-white pl-1 text-sm text-left",children:[m.jsxs("div",{className:"mb-1",children:["Total de ciclos: ",e]}),m.jsxs("div",{children:["Recuento de instrucciones: ",n]})]})})]}):null}const Wle="_pushable_1q0ek_2",Gle="_front_1q0ek_15",Kle="_shadow_1q0ek_20",Xle="_edge_1q0ek_52",Tg={pushable:Wle,front:Gle,shadow:Kle,edge:Xle};function qle(){const t=wt(),{status:e,dispatch:n,devices:i}=Rn();return No("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?m.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:m.jsxs("button",{className:Tg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[m.jsx("div",{className:Tg.shadow}),m.jsx("div",{className:Tg.edge}),m.jsx("span",{className:Tg.front,children:t("computer.f10")})]})}):null}function Yle(){const t=wt(),{devices:e}=Rn();return e.handshake?m.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),m.jsx(sr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:YE,springs:"handshake.STATE",className:"mx-auto my-4"}),m.jsx("hr",{className:"border-stone-600"}),m.jsx(sr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:qE,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var Cz={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.23 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(S)})(q8,function(n){return function(){var i={651:function(a){a.exports=function(){var l={d:function(D,O){for(var B in O)l.o(O,B)&&!l.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:O[B]})},o:function(D,O){return Object.prototype.hasOwnProperty.call(D,O)},r:function(D){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},u={};function c(D){return function(O){if(Array.isArray(O))return h(O)}(D)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(D)||d(D)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(D,O){if(D){if(typeof D=="string")return h(D,O);var B={}.toString.call(D).slice(8,-1);return B==="Object"&&D.constructor&&(B=D.constructor.name),B==="Map"||B==="Set"?Array.from(D):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?h(D,O):void 0}}function h(D,O){(O==null||O>D.length)&&(O=D.length);for(var B=0,_=Array(O);B<O;B++)_[B]=D[B];return _}function f(D){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},f(D)}function p(D,O){for(var B=0;B<O.length;B++){var _=O[B];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(D,b(_.key),_)}}function g(D,O,B){return(O=b(O))in D?Object.defineProperty(D,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):D[O]=B,D}function b(D){var O=function(B,_){if(f(B)!="object"||!B)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var M=T.call(B,_||"default");if(f(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(B)}(D,"string");return f(O)=="symbol"?O:O+""}l.r(u),l.d(u,{SimpleKeyboard:function(){return Z},default:function(){return ue}});var v=function(){return D=function _(T){var M=T.getOptions,R=T.getCaretPosition,K=T.getCaretPositionEnd,W=T.dispatch;(function(te,Y){if(!(te instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,_),g(this,"getOptions",void 0),g(this,"getCaretPosition",void 0),g(this,"getCaretPositionEnd",void 0),g(this,"dispatch",void 0),g(this,"maxLengthReached",void 0),g(this,"isStandardButton",function(te){return te&&!(te[0]==="{"&&te[te.length-1]==="}")}),this.getOptions=M,this.getCaretPosition=R,this.getCaretPositionEnd=K,this.dispatch=W,_.bindMethods(_,this)},O=[{key:"getButtonType",value:function(_){return _.includes("{")&&_.includes("}")&&_!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(_){var T=this.getButtonType(_),M=_.replace("{","").replace("}",""),R="";return T!=="standardBtn"&&(R=" hg-button-".concat(M)),"hg-".concat(T).concat(R)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(_,T){return(T=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),T):T||this.getDefaultDiplay())[_]||_}},{key:"getUpdatedInput",value:function(_,T,M){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:M,K=arguments.length>4&&arguments[4]!==void 0&&arguments[4],W=this.getOptions(),te=[M,R,K],Y=T;return(_==="{bksp}"||_==="{backspace}")&&Y.length>0?Y=this.removeAt.apply(this,[Y].concat(te)):(_==="{delete}"||_==="{forwarddelete}")&&Y.length>0?Y=this.removeForwardsAt.apply(this,[Y].concat(te)):_==="{space}"?Y=this.addStringAt.apply(this,[Y," "].concat(te)):_!=="{tab}"||typeof W.tabCharOnTab=="boolean"&&W.tabCharOnTab===!1?_!=="{enter}"&&_!=="{numpadenter}"||!W.newLineOnEnter?_.includes("numpad")&&Number.isInteger(Number(_[_.length-2]))?Y=this.addStringAt.apply(this,[Y,_[_.length-2]].concat(te)):_==="{numpaddivide}"?Y=this.addStringAt.apply(this,[Y,"/"].concat(te)):_==="{numpadmultiply}"?Y=this.addStringAt.apply(this,[Y,"*"].concat(te)):_==="{numpadsubtract}"?Y=this.addStringAt.apply(this,[Y,"-"].concat(te)):_==="{numpadadd}"?Y=this.addStringAt.apply(this,[Y,"+"].concat(te)):_==="{numpaddecimal}"?Y=this.addStringAt.apply(this,[Y,"."].concat(te)):_==="{"||_==="}"?Y=this.addStringAt.apply(this,[Y,_].concat(te)):_.includes("{")||_.includes("}")||(Y=this.addStringAt.apply(this,[Y,_].concat(te))):Y=this.addStringAt.apply(this,[Y,`
`].concat(te)):Y=this.addStringAt.apply(this,[Y,"	"].concat(te)),W.debug&&console.log("Input will be: "+Y),Y}},{key:"updateCaretPos",value:function(_){var T=arguments.length>1&&arguments[1]!==void 0&&arguments[1],M=this.updateCaretPosAction(_,T);this.dispatch(function(R){R.setCaretPosition(M)})}},{key:"updateCaretPosAction",value:function(_){var T=arguments.length>1&&arguments[1]!==void 0&&arguments[1],M=this.getOptions(),R=this.getCaretPosition();return R!=null&&(T?R>0&&(R-=_):R+=_),M.debug&&console.log("Caret at:",R),R}},{key:"addStringAt",value:function(_,T){var M,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.length,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:_.length,W=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return R||R===0?(M=[_.slice(0,R),T,_.slice(K)].join(""),this.isMaxLengthReached()||W&&this.updateCaretPos(T.length)):M=_+T,M}},{key:"removeAt",value:function(_){var T,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(M===0&&R===0)return _;if(M===R){var W=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;M&&M>=0?_.substring(M-2,M).match(W)?(T=_.substr(0,M-2)+_.substr(M),K&&this.updateCaretPos(2,!0)):(T=_.substr(0,M-1)+_.substr(M),K&&this.updateCaretPos(1,!0)):_.slice(-2).match(W)?(T=_.slice(0,-2),K&&this.updateCaretPos(2,!0)):(T=_.slice(0,-1),K&&this.updateCaretPos(1,!0))}else T=_.slice(0,M)+_.slice(R),K&&this.dispatch(function(te){te.setCaretPosition(M)});return T}},{key:"removeForwardsAt",value:function(_){var T,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return _!=null&&_.length&&M!==null?(M===R?T=_.substring(M,M+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?_.substr(0,M)+_.substr(M+2):_.substr(0,M)+_.substr(M+1):(T=_.slice(0,M)+_.slice(R),K&&this.dispatch(function(W){W.setCaretPosition(M)})),T):_}},{key:"handleMaxLength",value:function(_,T){var M=this.getOptions(),R=M.maxLength,K=_[M.inputName||"default"],W=T.length-1>=R;if(T.length<=K.length)return!1;if(Number.isInteger(R))return M.debug&&console.log("maxLength (num) reached:",W),W?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(f(R)==="object"){var te=T.length-1>=R[M.inputName||"default"];return M.debug&&console.log("maxLength (obj) reached:",te),te?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(_){return _?_.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(T,M){return M.length?T+M[0].toUpperCase()+M.slice(1):T}):""}},{key:"chunkArray",value:function(_,T){return c(Array(Math.ceil(_.length/T))).map(function(M,R){return _.slice(T*R,T+T*R)})}},{key:"escapeRegex",value:function(_){return _.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(_,T){var M=_,R=T.indexOf("");return R<_&&R!=-1&&M--,T.indexOf("")<_&&R!=-1&&M--,M<0?0:M}}],B=[{key:"bindMethods",value:function(_,T){var M,R=function(W,te){var Y=typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(!Y){if(Array.isArray(W)||(Y=d(W))||te){Y&&(W=Y);var Ne=0,Fe=function(){};return{s:Fe,n:function(){return Ne>=W.length?{done:!0}:{done:!1,value:W[Ne++]}},e:function(ge){throw ge},f:Fe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Be,je=!0,Ve=!1;return{s:function(){Y=Y.call(W)},n:function(){var ge=Y.next();return je=ge.done,ge},e:function(ge){Ve=!0,Be=ge},f:function(){try{je||Y.return==null||Y.return()}finally{if(Ve)throw Be}}}}(Object.getOwnPropertyNames(_.prototype));try{for(R.s();!(M=R.n()).done;){var K=M.value;K==="constructor"||K==="bindMethods"||(T[K]=T[K].bind(T))}}catch(W){R.e(W)}finally{R.f()}}}],O&&p(D.prototype,O),B&&p(D,B),Object.defineProperty(D,"prototype",{writable:!1}),D;var D,O,B}();g(v,"noop",function(){});var y=v;function w(D){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},w(D)}function x(D,O){for(var B=0;B<O.length;B++){var _=O[B];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(D,E(_.key),_)}}function k(D,O,B){return(O=E(O))in D?Object.defineProperty(D,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):D[O]=B,D}function E(D){var O=function(B,_){if(w(B)!="object"||!B)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var M=T.call(B,_);if(w(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(D,"string");return w(O)=="symbol"?O:O+""}var C=function(){return D=function _(T){var M=this,R=T.dispatch,K=T.getOptions;(function(W,te){if(!(W instanceof te))throw new TypeError("Cannot call a class as a function")})(this,_),k(this,"getOptions",void 0),k(this,"dispatch",void 0),k(this,"isModifierKey",function(W){return W.altKey||W.ctrlKey||W.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(W.code||W.key||M.keyCodeToKey(W==null?void 0:W.keyCode))}),this.dispatch=R,this.getOptions=K,y.bindMethods(_,this)},O=[{key:"handleHighlightKeyDown",value:function(_){var T=this.getOptions();T.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(_)&&(_.preventDefault(),_.stopImmediatePropagation());var M=this.getSimpleKeyboardLayoutKey(_);this.dispatch(function(R){var K,W,te=R.getButtonElement(M),Y=R.getButtonElement("{".concat(M,"}"));if(te)K=te,W=M;else{if(!Y)return;K=Y,W="{".concat(M,"}")}var Ne,Fe,Be,je,Ve=function(vt){vt.style.background=T.physicalKeyboardHighlightBgColor||"#dadce4",vt.style.color=T.physicalKeyboardHighlightTextColor||"black"};if(K)if(Array.isArray(K)){if(K.forEach(function(vt){return Ve(vt)}),T.physicalKeyboardHighlightPress)if(T.physicalKeyboardHighlightPressUsePointerEvents)(Ne=K[0])===null||Ne===void 0||(Fe=Ne.onpointerdown)===null||Fe===void 0||Fe.call(Ne,_);else if(T.physicalKeyboardHighlightPressUseClick){var ge;(ge=K[0])===null||ge===void 0||ge.click()}else R.handleButtonClicked(W,_)}else Ve(K),T.physicalKeyboardHighlightPress&&(T.physicalKeyboardHighlightPressUsePointerEvents?(Be=K)===null||Be===void 0||(je=Be.onpointerdown)===null||je===void 0||je.call(Be,_):T.physicalKeyboardHighlightPressUseClick?K.click():R.handleButtonClicked(W,_))})}},{key:"handleHighlightKeyUp",value:function(_){var T=this.getOptions();T.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(_)&&(_.preventDefault(),_.stopImmediatePropagation());var M=this.getSimpleKeyboardLayoutKey(_);this.dispatch(function(R){var K,W,te,Y=R.getButtonElement(M)||R.getButtonElement("{".concat(M,"}")),Ne=function(Fe){Fe.removeAttribute&&Fe.removeAttribute("style")};Y&&(Array.isArray(Y)?(Y.forEach(function(Fe){return Ne(Fe)}),T.physicalKeyboardHighlightPressUsePointerEvents&&((K=Y[0])===null||K===void 0||(W=K.onpointerup)===null||W===void 0||W.call(K,_))):(Ne(Y),T.physicalKeyboardHighlightPressUsePointerEvents&&(Y==null||(te=Y.onpointerup)===null||te===void 0||te.call(Y,_))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(_){var T,M="",R=_.code||_.key||this.keyCodeToKey(_==null?void 0:_.keyCode);return(M=R!=null&&R.includes("Numpad")||R!=null&&R.includes("Shift")||R!=null&&R.includes("Space")||R!=null&&R.includes("Backspace")||R!=null&&R.includes("Control")||R!=null&&R.includes("Alt")||R!=null&&R.includes("Meta")?_.code||"":_.key||this.keyCodeToKey(_==null?void 0:_.keyCode)||"").length>1?(T=M)===null||T===void 0?void 0:T.toLowerCase():M}},{key:"keyCodeToKey",value:function(_){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[_]||""}}],O&&x(D.prototype,O),B&&x(D,B),Object.defineProperty(D,"prototype",{writable:!1}),D;var D,O,B}();function P(D){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},P(D)}function N(D,O){for(var B=0;B<O.length;B++){var _=O[B];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(D,L(_.key),_)}}function I(D,O,B){return(O=L(O))in D?Object.defineProperty(D,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):D[O]=B,D}function L(D){var O=function(B,_){if(P(B)!="object"||!B)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var M=T.call(B,_);if(P(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(D,"string");return P(O)=="symbol"?O:O+""}var $=function(){return D=function _(T){var M=T.utilities,R=T.options;(function(K,W){if(!(K instanceof W))throw new TypeError("Cannot call a class as a function")})(this,_),I(this,"utilities",void 0),I(this,"options",void 0),I(this,"candidateBoxElement",void 0),I(this,"pageIndex",0),I(this,"pageSize",void 0),this.utilities=M,this.options=R,y.bindMethods(_,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},O=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(_){var T=this,M=_.candidateValue,R=_.targetElement,K=_.onSelect;if(M&&M.length){var W=this.utilities.chunkArray(M.split(" "),this.pageSize);this.renderPage({candidateListPages:W,targetElement:R,pageIndex:this.pageIndex,nbPages:W.length,onItemSelected:function(te,Y){K(te,Y),T.destroy()}})}}},{key:"renderPage",value:function(_){var T,M=this,R=_.candidateListPages,K=_.targetElement,W=_.pageIndex,te=_.nbPages,Y=_.onItemSelected;(T=this.candidateBoxElement)===null||T===void 0||T.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Ne=document.createElement("ul");Ne.className="hg-candidate-box-list",R[W].forEach(function(hn){var Ll,_s=document.createElement("li"),ta=function(){var na=new(M.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(na,"target",{value:_s}),na};_s.className="hg-candidate-box-list-item",_s.innerHTML=((Ll=M.options.display)===null||Ll===void 0?void 0:Ll[hn])||hn,M.options.useTouchEvents?_s.ontouchstart=function(na){return Y(hn,na||ta())}:_s.onclick=function(){var na=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ta();return Y(hn,na)},Ne.appendChild(_s)});var Fe=W>0,Be=document.createElement("div");Be.classList.add("hg-candidate-box-prev"),Fe&&Be.classList.add("hg-candidate-box-btn-active");var je=function(){Fe&&M.renderPage({candidateListPages:R,targetElement:K,pageIndex:W-1,nbPages:te,onItemSelected:Y})};this.options.useTouchEvents?Be.ontouchstart=je:Be.onclick=je,this.candidateBoxElement.appendChild(Be),this.candidateBoxElement.appendChild(Ne);var Ve=W<te-1,ge=document.createElement("div");ge.classList.add("hg-candidate-box-next"),Ve&&ge.classList.add("hg-candidate-box-btn-active");var vt=function(){Ve&&M.renderPage({candidateListPages:R,targetElement:K,pageIndex:W+1,nbPages:te,onItemSelected:Y})};this.options.useTouchEvents?ge.ontouchstart=vt:ge.onclick=vt,this.candidateBoxElement.appendChild(ge),K.prepend(this.candidateBoxElement)}}],O&&N(D.prototype,O),B&&N(D,B),Object.defineProperty(D,"prototype",{writable:!1}),D;var D,O,B}(),G=$;function U(D){return function(O){if(Array.isArray(O))return X(O)}(D)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(D)||function(O,B){if(O){if(typeof O=="string")return X(O,B);var _={}.toString.call(O).slice(8,-1);return _==="Object"&&O.constructor&&(_=O.constructor.name),_==="Map"||_==="Set"?Array.from(O):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?X(O,B):void 0}}(D)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function X(D,O){(O==null||O>D.length)&&(O=D.length);for(var B=0,_=Array(O);B<O;B++)_[B]=D[B];return _}function ee(D){return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},ee(D)}function he(D,O){var B=Object.keys(D);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(D);O&&(_=_.filter(function(T){return Object.getOwnPropertyDescriptor(D,T).enumerable})),B.push.apply(B,_)}return B}function V(D,O){for(var B=0;B<O.length;B++){var _=O[B];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(D,ne(_.key),_)}}function F(D,O,B){return(O=ne(O))in D?Object.defineProperty(D,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):D[O]=B,D}function ne(D){var O=function(B,_){if(ee(B)!="object"||!B)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var M=T.call(B,_);if(ee(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(D,"string");return ee(O)=="symbol"?O:O+""}var ke=function(){return D=function _(T,M){var R=this;if(function(je,Ve){if(!(je instanceof Ve))throw new TypeError("Cannot call a class as a function")}(this,_),F(this,"input",void 0),F(this,"options",void 0),F(this,"utilities",void 0),F(this,"caretPosition",void 0),F(this,"caretPositionEnd",void 0),F(this,"keyboardDOM",void 0),F(this,"keyboardPluginClasses",void 0),F(this,"keyboardDOMClass",void 0),F(this,"buttonElements",void 0),F(this,"currentInstanceName",void 0),F(this,"allKeyboardInstances",void 0),F(this,"keyboardInstanceNames",void 0),F(this,"isFirstKeyboardInstance",void 0),F(this,"physicalKeyboard",void 0),F(this,"modules",void 0),F(this,"activeButtonClass",void 0),F(this,"holdInteractionTimeout",void 0),F(this,"holdTimeout",void 0),F(this,"isMouseHold",void 0),F(this,"initialized",void 0),F(this,"candidateBox",void 0),F(this,"keyboardRowsDOM",void 0),F(this,"defaultName","default"),F(this,"activeInputElement",null),F(this,"handleParams",function(je,Ve){var ge,vt,hn;if(typeof je=="string")ge=je.split(".").join(""),vt=document.querySelector(".".concat(ge)),hn=Ve;else if(je instanceof HTMLDivElement){if(!je.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ge=je.className.split(" ")[0],vt=je,hn=Ve}else ge="simple-keyboard",vt=document.querySelector(".".concat(ge)),hn=je;return{keyboardDOMClass:ge,keyboardDOM:vt,options:hn}}),F(this,"getOptions",function(){return R.options}),F(this,"getCaretPosition",function(){return R.caretPosition}),F(this,"getCaretPositionEnd",function(){return R.caretPositionEnd}),F(this,"registerModule",function(je,Ve){R.modules[je]||(R.modules[je]={}),Ve(R.modules[je])}),F(this,"getKeyboardClassString",function(){for(var je=arguments.length,Ve=new Array(je),ge=0;ge<je;ge++)Ve[ge]=arguments[ge];return[R.keyboardDOMClass].concat(Ve).filter(function(vt){return!!vt}).join(" ")}),typeof window<"u"){var K=this.handleParams(T,M),W=K.keyboardDOMClass,te=K.keyboardDOM,Y=K.options,Ne=Y===void 0?{}:Y;this.utilities=new y({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=te,this.options=function(je){for(var Ve=1;Ve<arguments.length;Ve++){var ge=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?he(Object(ge),!0).forEach(function(vt){F(je,vt,ge[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(je,Object.getOwnPropertyDescriptors(ge)):he(Object(ge)).forEach(function(vt){Object.defineProperty(je,vt,Object.getOwnPropertyDescriptor(ge,vt))})}return je}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Ne),this.keyboardPluginClasses="",y.bindMethods(_,this);var Fe=this.options.inputName,Be=Fe===void 0?this.defaultName:Fe;if(this.input={},this.input[Be]="",this.keyboardDOMClass=W,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new G({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(W,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},O=[{key:"setCaretPosition",value:function(_){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_;this.caretPosition=_,this.caretPositionEnd=T}},{key:"getInputCandidates",value:function(_){var T=this,M=this.options,R=M.layoutCandidates,K=M.layoutCandidatesCaseSensitiveMatch;if(!R||ee(R)!=="object")return{};var W=Object.keys(R).filter(function(Ne){var Fe=_.substring(0,T.getCaretPositionEnd()||0)||_,Be=new RegExp("".concat(T.utilities.escapeRegex(Ne),"$"),K?"g":"gi");return!!U(Fe.matchAll(Be)).length});if(W.length>1){var te=W.sort(function(Ne,Fe){return Fe.length-Ne.length})[0];return{candidateKey:te,candidateValue:R[te]}}if(W.length){var Y=W[0];return{candidateKey:Y,candidateValue:R[Y]}}return{}}},{key:"showCandidatesBox",value:function(_,T,M){var R=this;this.candidateBox&&this.candidateBox.show({candidateValue:T,targetElement:M,onSelect:function(K,W){var te=R.options,Y=te.layoutCandidatesCaseSensitiveMatch,Ne=te.disableCandidateNormalization,Fe=te.enableLayoutCandidatesKeyPress,Be=K;Ne||(Be=K.normalize("NFD")),typeof R.options.beforeInputUpdate=="function"&&R.options.beforeInputUpdate(R);var je=R.getInput(R.options.inputName,!0),Ve=R.getCaretPositionEnd()||0,ge=je.substring(0,Ve||0)||je,vt=new RegExp("".concat(R.utilities.escapeRegex(_),"$"),Y?"g":"gi"),hn=ge.replace(vt,Be),Ll=je.replace(ge,hn),_s=hn.length-ge.length,ta=(Ve||je.length)+_s;ta<0&&(ta=0),R.setInput(Ll,R.options.inputName,!0),R.setCaretPosition(ta),Fe&&typeof R.options.onKeyPress=="function"&&R.options.onKeyPress(K,W),typeof R.options.onChange=="function"&&R.options.onChange(R.getInput(R.options.inputName,!0),W),typeof R.options.onChangeAll=="function"&&R.options.onChangeAll(R.getAllInputs(),W)}})}},{key:"handleButtonClicked",value:function(_,T){var M=this.options,R=M.inputName,K=R===void 0?this.defaultName:R,W=M.debug;if(_!=="{//}"){this.input[K]||(this.input[K]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var te=this.utilities.getUpdatedInput(_,this.input[K],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(_)&&this.activeInputElement&&this.input[K]&&this.input[K]===te&&this.caretPosition===0&&this.caretPositionEnd===te.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(_,T);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(_,T),this.input[K]!==te&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(te))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,te))return;var Y=this.utilities.getUpdatedInput(_,this.input[K],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(Y,this.options.inputName,!0),W&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),T==null?void 0:T.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),T),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),T),T!=null&&T.target&&this.options.enableLayoutCandidates){var Ne,Fe=this.getInputCandidates(te),Be=Fe.candidateKey,je=Fe.candidateValue;Be&&je?this.showCandidatesBox(Be,je,this.keyboardDOM):(Ne=this.candidateBox)===null||Ne===void 0||Ne.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),W&&console.log("Key pressed:",_)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(_){this.options.syncInstanceInputs?this.dispatch(function(T){T.isMouseHold=_}):this.isMouseHold=_}},{key:"handleButtonMouseDown",value:function(_,T){var M=this;T&&(this.options.preventMouseDownDefault&&T.preventDefault(),this.options.stopMouseDownPropagation&&T.stopPropagation(),T.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(M.getMouseHold()&&(!_.includes("{")&&!_.includes("}")||_==="{delete}"||_==="{backspace}"||_==="{bksp}"||_==="{space}"||_==="{tab}")||_==="{arrowright}"||_==="{arrowleft}"||_==="{arrowup}"||_==="{arrowdown}")&&(M.options.debug&&console.log("Button held:",_),M.handleButtonHold(_)),clearTimeout(M.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(_,T){var M=this;T&&(this.options.preventMouseUpDefault&&T.preventDefault&&T.preventDefault(),this.options.stopMouseUpPropagation&&T.stopPropagation&&T.stopPropagation(),!(T.target===this.keyboardDOM||T.target&&this.keyboardDOM.contains(T.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(T.target===this.candidateBox.candidateBoxElement||T.target&&this.candidateBox.candidateBoxElement.contains(T.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(R){R.classList.remove(M.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),_&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(_,T)}},{key:"handleKeyboardContainerMouseDown",value:function(_){this.options.preventMouseDownDefault&&_.preventDefault()}},{key:"handleButtonHold",value:function(_){var T=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){T.getMouseHold()?(T.handleButtonClicked(_),T.handleButtonHold(_)):clearTimeout(T.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var _=this;this.dispatch(function(T){T.replaceInput(_.input),T.setCaretPosition(_.caretPosition,_.caretPositionEnd)})}},{key:"clearInput",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[_]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,T=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!T&&this.syncInstanceInputs(),this.options.rtl?""+this.input[_].replace("","").replace("","")+"":this.input[_]}},{key:"getAllInputs",value:function(){var _=this,T={};return Object.keys(this.input).forEach(function(M){T[M]=_.getInput(M,!0)}),T}},{key:"setInput",value:function(_){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,M=arguments.length>2?arguments[2]:void 0;this.input[T]=_,!M&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(_){this.input=_}},{key:"setOptions",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=this.changedOptions(_);this.options=Object.assign(this.options,_),T.length&&(this.options.debug&&console.log("changedOptions",T),this.onSetOptions(T),this.render())}},{key:"changedOptions",value:function(_){var T=this;return Object.keys(_).filter(function(M){return JSON.stringify(_[M])!==JSON.stringify(T.options[M])})}},{key:"onSetOptions",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];_.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(_.includes("layoutCandidatesPageSize")||_.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new G({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(_){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(T){_(window.SimpleKeyboardInstances[T],T)})}},{key:"addButtonTheme",value:function(_,T){var M=this;T&&_&&(_.split(" ").forEach(function(R){T.split(" ").forEach(function(K){M.options.buttonTheme||(M.options.buttonTheme=[]);var W=!1;M.options.buttonTheme.map(function(te){if(te!=null&&te.class.split(" ").includes(K)){W=!0;var Y=te.buttons.split(" ");Y.includes(R)||(W=!0,Y.push(R),te.buttons=Y.join(" "))}return te}),W||M.options.buttonTheme.push({class:K,buttons:_})})}),this.render())}},{key:"removeButtonTheme",value:function(_,T){var M=this;if(!_&&!T)return this.options.buttonTheme=[],void this.render();_&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(_.split(" ").forEach(function(R){var K;(K=M.options)===null||K===void 0||(K=K.buttonTheme)===null||K===void 0||K.map(function(W,te){if(W&&T&&T.includes(W.class)||!T){var Y,Ne,Fe=(Y=W)===null||Y===void 0?void 0:Y.buttons.split(" ").filter(function(Be){return Be!==R});W&&Fe!=null&&Fe.length?W.buttons=Fe.join(" "):((Ne=M.options.buttonTheme)===null||Ne===void 0||Ne.splice(te,1),W=null)}return W})}),this.render())}},{key:"getButtonElement",value:function(_){var T,M=this.buttonElements[_];return M&&(T=M.length>1?M:M[0]),T}},{key:"inputPatternIsValid",value:function(_){var T,M=this.options.inputPattern;if((T=M instanceof RegExp?M:M[this.options.inputName||this.defaultName])&&_){var R=T.test(_);return this.options.debug&&console.log('inputPattern ("'.concat(T,'"): ').concat(R?"passed":"did not pass!")),R}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var _=this.options.physicalKeyboardHighlightPreventDefault,T=_!==void 0&&_;document.addEventListener("keyup",this.handleKeyUp,T),document.addEventListener("keydown",this.handleKeyDown,T),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(_){this.caretEventHandler(_),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(_)}},{key:"handleKeyDown",value:function(_){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(_)}},{key:"handleMouseUp",value:function(_){this.caretEventHandler(_)}},{key:"handleTouchEnd",value:function(_){this.caretEventHandler(_)}},{key:"handleSelect",value:function(_){this.caretEventHandler(_)}},{key:"handleSelectionChange",value:function(_){navigator.userAgent.includes("Firefox")||this.caretEventHandler(_)}},{key:"caretEventHandler",value:function(_){var T,M=this;_.target.tagName&&(T=_.target.tagName.toLowerCase()),this.dispatch(function(R){var K=_.target===R.keyboardDOM||_.target&&R.keyboardDOM.contains(_.target);if(M.options.syncInstanceInputs&&Array.isArray(_.path)&&(K=_.path.some(function(Y){var Ne;return Y==null||(Ne=Y.hasAttribute)===null||Ne===void 0?void 0:Ne.call(Y,"data-skInstance")})),(T==="textarea"||T==="input"&&["text","search","url","tel","password"].includes(_.target.type))&&!R.options.disableCaretPositioning){var W=_.target.selectionStart,te=_.target.selectionEnd;R.options.rtl&&(W=R.utilities.getRtlOffset(W,R.getInput()),te=R.utilities.getRtlOffset(te,R.getInput())),R.setCaretPosition(W,te),R.activeInputElement=_.target,R.options.debug&&console.log("Caret at: ",R.getCaretPosition(),R.getCaretPositionEnd(),_&&_.target.tagName.toLowerCase(),"(".concat(R.keyboardDOMClass,")"),_==null?void 0:_.type)}else!R.options.disableCaretPositioning&&K||(_==null?void 0:_.type)==="selectionchange"||(R.setCaretPosition(null),R.activeInputElement=null,R.options.debug&&console.log('Caret position reset due to "'.concat(_==null?void 0:_.type,'" event'),_))})}},{key:"recurseButtons",value:function(_){var T=this;_&&Object.keys(this.buttonElements).forEach(function(M){return T.buttonElements[M].forEach(_)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var _=this.options.physicalKeyboardHighlightPreventDefault,T=_!==void 0&&_;document.removeEventListener("keyup",this.handleKeyUp,T),document.removeEventListener("keydown",this.handleKeyDown,T),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(M){M&&(M.onpointerdown=null,M.onpointerup=null,M.onpointercancel=null,M.ontouchstart=null,M.ontouchend=null,M.ontouchcancel=null,M.onclick=null,M.onmousedown=null,M.onmouseup=null,M.remove(),M=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(_){var T=this.options.buttonTheme,M=[];return Array.isArray(T)&&T.forEach(function(R){if(R&&R.class&&typeof R.class=="string"&&R.buttons&&typeof R.buttons=="string"){var K=R.class.split(" ");R.buttons.split(" ").includes(_)&&(M=[].concat(U(M),U(K)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',R)}),M}},{key:"setDOMButtonAttributes",value:function(_,T){var M=this.options.buttonAttributes;Array.isArray(M)&&M.forEach(function(R){R.attribute&&typeof R.attribute=="string"&&R.value&&typeof R.value=="string"&&R.buttons&&typeof R.buttons=="string"?R.buttons.split(" ").includes(_)&&T(R.attribute,R.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',R)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(_){if(_.target.classList.contains("hg-button"))return _.preventDefault(),_.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var _=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(T){var M=new T(_);M.init&&M.init(_)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(_,T){return!!this.modules[_]&&this.modules[_][T]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(_,T,M,R){var K=this,W=Array.from(_.children),te=0;return W.length&&M.forEach(function(Y,Ne){var Fe=R[Ne];if(!(Fe&&Fe>Y))return!1;var Be=Y-te,je=Fe-te,Ve=document.createElement("div");Ve.className+="hg-button-container";var ge="".concat(K.options.layoutName,"-r").concat(T,"c").concat(Ne);Ve.setAttribute("data-skUID",ge);var vt=W.splice(Be,je-Be+1);te=je-Be,vt.forEach(function(hn){return Ve.appendChild(hn)}),W.splice(Be,0,Ve),_.innerHTML="",W.forEach(function(hn){return _.appendChild(hn)}),K.options.debug&&console.log("rowDOMContainer",vt,Be,je,te+1)}),_}},{key:"render",value:function(){var _=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var T="hg-layout-".concat(this.options.layoutName),M=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},R=this.options.useTouchEvents||!1,K=R?"hg-touch-events":"",W=this.options.useMouseEvents||!1,te=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,T,this.keyboardPluginClasses,K),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",M[this.options.layoutName||this.defaultName].forEach(function(Y,Ne){var Fe=Y.split(" ");_.options.excludeFromLayout&&_.options.excludeFromLayout[_.options.layoutName||_.defaultName]&&(Fe=Fe.filter(function(ge){return _.options.excludeFromLayout&&!_.options.excludeFromLayout[_.options.layoutName||_.defaultName].includes(ge)}));var Be=document.createElement("div");Be.className+="hg-row";var je=[],Ve=[];Fe.forEach(function(ge,vt){var hn,Ll=!te&&typeof ge=="string"&&ge.length>1&&ge.indexOf("[")===0,_s=!te&&typeof ge=="string"&&ge.length>1&&ge.indexOf("]")===ge.length-1;Ll&&(je.push(vt),ge=ge.replace(/\[/g,"")),_s&&(Ve.push(vt),ge=ge.replace(/\]/g,""));var ta=_.utilities.getButtonClass(ge),na=_.utilities.getButtonDisplayName(ge,_.options.display,_.options.mergeDisplay),H8=_.options.useButtonTag?"button":"div",Mn=document.createElement(H8);Mn.className+="hg-button ".concat(ta),(hn=Mn.classList).add.apply(hn,U(_.getButtonThemeClasses(ge))),_.setDOMButtonAttributes(ge,function(qt,W8){Mn.setAttribute(qt,W8)}),_.activeButtonClass="hg-activeButton",!_.utilities.pointerEventsSupported()||R||W?R?(Mn.ontouchstart=function(qt){_.handleButtonClicked(ge,qt),_.handleButtonMouseDown(ge,qt)},Mn.ontouchend=function(qt){_.handleButtonMouseUp(ge,qt)},Mn.ontouchcancel=function(qt){_.handleButtonMouseUp(ge,qt)}):(Mn.onclick=function(qt){_.setMouseHold(!1),typeof _.options.onKeyReleased!="function"&&_.handleButtonClicked(ge,qt)},Mn.onmousedown=function(qt){typeof _.options.onKeyReleased!="function"||_.isMouseHold||_.handleButtonClicked(ge,qt),_.handleButtonMouseDown(ge,qt)},Mn.onmouseup=function(qt){_.handleButtonMouseUp(ge,qt)}):(Mn.onpointerdown=function(qt){_.handleButtonClicked(ge,qt),_.handleButtonMouseDown(ge,qt)},Mn.onpointerup=function(qt){_.handleButtonMouseUp(ge,qt)},Mn.onpointercancel=function(qt){_.handleButtonMouseUp(ge,qt)}),Mn.setAttribute("data-skBtn",ge);var V8="".concat(_.options.layoutName,"-r").concat(Ne,"b").concat(vt);Mn.setAttribute("data-skBtnUID",V8);var HA=document.createElement("span");HA.innerHTML=na,Mn.appendChild(HA),_.buttonElements[ge]||(_.buttonElements[ge]=[]),_.buttonElements[ge].push(Mn),Be.appendChild(Mn)}),Be=_.parseRowDOMContainers(Be,Ne,je,Ve),_.keyboardRowsDOM.appendChild(Be)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||R||W?R?(document.ontouchend=function(Y){return _.handleButtonMouseUp(void 0,Y)},document.ontouchcancel=function(Y){return _.handleButtonMouseUp(void 0,Y)},this.keyboardDOM.ontouchstart=function(Y){return _.handleKeyboardContainerMouseDown(Y)}):R||(document.onmouseup=function(Y){return _.handleButtonMouseUp(void 0,Y)},this.keyboardDOM.onmousedown=function(Y){return _.handleKeyboardContainerMouseDown(Y)}):(document.onpointerup=function(Y){return _.handleButtonMouseUp(void 0,Y)},this.keyboardDOM.onpointerdown=function(Y){return _.handleKeyboardContainerMouseDown(Y)}),this.onInit())}}],O&&V(D.prototype,O),B&&V(D,B),Object.defineProperty(D,"prototype",{writable:!1}),D;var D,O,B}(),Z=ke,ue=Z;return u}()},442:function(a){a.exports=n}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var u=r[a]={exports:{}};return i[a].call(u.exports,u,u.exports,s),u.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var u in l)s.o(l,u)&&!s.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return g},default:function(){return b}});var a=s(442);function l(v){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l(v)}function u(v,y){var w=Object.keys(v);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(v);y&&(x=x.filter(function(k){return Object.getOwnPropertyDescriptor(v,k).enumerable})),w.push.apply(w,x)}return w}function c(v){for(var y=1;y<arguments.length;y++){var w=arguments[y]!=null?arguments[y]:{};y%2?u(Object(w),!0).forEach(function(x){d(v,x,w[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(w)):u(Object(w)).forEach(function(x){Object.defineProperty(v,x,Object.getOwnPropertyDescriptor(w,x))})}return v}function d(v,y,w){return(y=function(x){var k=function(E,C){if(l(E)!="object"||!E)return E;var P=E[Symbol.toPrimitive];if(P!==void 0){var N=P.call(E,C||"default");if(l(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(E)}(x,"string");return l(k)=="symbol"?k:k+""}(y))in v?Object.defineProperty(v,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):v[y]=w,v}var h=function(v){return c(c({},v),{},{keyboardRef:null})},f=s(651),p=s.n(f),g=function(v){var y=v.baseClass||"react-simple-keyboard",w=a.useRef(null),x=a.useRef(null),k=a.useRef(null),E=a.useRef(v);return a.useEffect(function(){return function(){k.current&&k.current.destroy(),w.current=!1}},[]),a.useEffect(function(){var C=function($){return c(c({},$),{},{theme:"simple-keyboard ".concat($.theme||"hg-theme-default")})}(v);if(!w.current){w.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var P=x.current,N=".".concat(y);k.current=new(p())(P||N,C),C.keyboardRef&&C.keyboardRef(k.current)}var I=function($,G){var U=h(G),X=h($);return Object.keys(U).filter(function(ee){return U[ee]!==X[ee]})}(E.current,C);if(I.length){var L=k.current;E.current=C,L==null||L.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",I)}},[w,y,E,v]),a.createElement("div",{className:y,ref:x})},b=g}(),o}()})})(Cz);var Zle=Cz.exports;const Jle=Hu(Zle),Qle={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w  r t y    p  +","{lock}  s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y    P  *","{lock}  S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y  i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y  I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},eue={en:{"{bksp}":"Backspace ","{enter}":"Enter ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Caps Lock ","{space}":"Space"},es:{"{bksp}":"","{enter}":"Intro ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Bloq Mays ","{space}":"Espacio"}},sM="          ",oM="  ";function tue(){const t=fE(),e=wt(),{status:n,dispatch:i,devices:r}=Rn(),[s,o]=S.useState("none"),[a,l]=S.useState(!1),[u,c]=S.useState(!1),d=S.useMemo(()=>[t,t==="es"&&(a&&"accent"||u&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,u]),h=S.useCallback(f=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",f)},[n,i,r.keyboard]);return r.keyboard?m.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),m.jsx(Jle,{theme:Me("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",u&&"hg-diaeresisDeadKey"),layoutName:d,layout:Qle,display:eue[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:sM},{class:"hg-diaeresisDeadKeyButton",buttons:oM}],disableButtonHold:!0,onKeyPress:f=>{if(f==="{shiftleft}"||f==="{shiftright}"){o(p=>p==="none"?"once":"none");return}if(f==="{lock}"){o(p=>p==="none"?"lock":"none");return}if(t==="es"){if(a){sM.includes(f)&&(l(!1),s==="once"&&o("none"),h(f));return}else if(f===""){l(!0);return}if(u){oM.includes(f)&&(c(!1),s==="once"&&o("none"),h(f));return}else if(f===""){c(!0);return}}s==="once"&&o("none"),h(f==="{bksp}"?"\b":f==="{enter}"?`
`:f==="{tab}"?"	":f==="{space}"?" ":f)}})]}):null}function nue(){const t=wt(),{devices:e}=Rn(),n=tt(ZE).toArray();return e.leds?m.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),m.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>m.jsxs("div",{className:"flex flex-col items-center w-7",children:[m.jsx("span",{className:"text-xs text-white mb-1 text-center w-full",children:r}),m.jsx("div",{className:Me("relative h-7 w-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:m.jsx("div",{className:Me("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})})]},r))})]}):null}function iue(){const t=wt(),e=tt(sne),n=tt(Ge.IP),i=tt(C4),r=tt(E4),s=tt(Ge.SP),o=tt(NE),a=tt(P_),l=k3(),u=a||l.pic||l.handshake!==null,c=()=>{const d=[];for(let h=0;h<256;h+=16){const f=e.slice(h,h+16);d.push(f)}return d};return m.jsxs("div",{className:"absolute left-[800px] top-0 z-10 h-auto w-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20",children:[m.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),m.jsx("div",{className:"m-4 overflow-x-auto",children:m.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{}),Array.from({length:16}).map((d,h)=>m.jsx("th",{className:Me("size-10 border border-gray-500 bg-mantis-500",h%4===0&&h!==0?"border-l-4 border-mantis-600":""),children:h.toString(16).toUpperCase()},h))]})}),m.jsx("tbody",{children:c().map((d,h)=>m.jsxs("tr",{className:h%4===0&&h!==0?"border-t-4 border-mantis-600":"",children:[m.jsx("th",{className:"size-10 border border-gray-500 bg-mantis-500",children:h.toString(16).toUpperCase()}),d.map((f,p)=>{var g,b,v;return m.jsx("td",{className:Me("size-10 border border-gray-500 p-0 transition-shadow duration-200",p%4===0&&p!==0?"border-l-4 border-mantis-600":""),children:m.jsx(rue,{address:f.address,value:f.value,isIP:f.address.valueOf()===n.valueOf(),isSP:o&&f.address.valueOf()===s.valueOf(),isStackData:o&&f.address.valueOf()>s.valueOf(),isProgramAddress:!!i.find(y=>y.address===f.address.value),isDataAddress:!!r.find(y=>y.address===f.address.value),isInterruptVector:u&&f.address.valueOf()>=0&&f.address.valueOf()<=7,label:((g=i.find(y=>y.address===f.address.value))==null?void 0:g.name)||((b=r.find(y=>y.address===f.address.value))==null?void 0:b.label)||null,length:((v=i.find(y=>y.address===f.address.value))==null?void 0:v.length)??null})},p)})]},h))})]})})]})}function rue({address:t,value:e,isIP:n,isSP:i,isStackData:r,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:u}){const c=wt(),d=tt(_p),[h,f]=S.useState(!1),p=S.useRef(e);S.useEffect(()=>{p.current!==e&&(f(!0),setTimeout(()=>f(!1),300),p.current=e)},[e]);const g=c("computer.memory.cell",t);return m.jsxs(_z,{children:[m.jsx(kz,{asChild:!0,children:m.jsxs(bn.div,{title:g,className:Me("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":i?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!i&&!r?"border-l-4 border-purple-500":"",s&&!i&&!r&&!a?"border-l-4 border-blue-500":"",o&&!i&&!r&&!s&&!a?"border-l-4 border-green-500":"",r&&!i?"border-l-4 border-yellow-500":"",i?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",h&&"animate-pulse"),style:t.value===d.value?Mt("memory.operating-cell"):void 0,children:[a&&!i&&!r&&m.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupcin",style:{lineHeight:1},children:""}),s&&!i&&!r&&!a&&m.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instruccin",style:{lineHeight:1},children:""}),o&&!i&&!r&&!s&&!a&&m.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:""}),r&&!i&&m.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:""}),i&&m.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:""}),m.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&m.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:""}),i&&m.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:""})]})}),m.jsxs(xA,{className:"w-60",children:[m.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[g," ",l?m.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",u!==null&&u!==""&&m.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",u]})]}):""]}),m.jsx("hr",{className:"border-stone-600"}),m.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(b=>m.jsxs("li",{children:[m.jsx("b",{className:"font-medium",children:c(`generics.byte-representation.${b}`)}),":"," ",m.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(b)})]},b))})]})]})}function sue(){const t=wt(),{devices:e}=Rn();return e.pic?m.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsxs("div",{className:"flex items-start",children:[m.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),m.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[m.jsx(sr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:JE,springs:"pic.IMR",emphasis:!0}),m.jsx(sr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:QE,springs:"pic.IRR",emphasis:!0}),m.jsx(sr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:eA,springs:"pic.ISR",emphasis:!0})]})]}),m.jsx("hr",{className:"mb-2 border-stone-600"}),m.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:G0.map((n,i)=>m.jsx(sr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function oue(){const t=wt(),{devices:e}=Rn();return e.pio?m.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"mb-2 block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),m.jsx("hr",{className:"border-stone-600"}),m.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[m.jsx(sr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:tA,springs:"pio.PA"}),m.jsx(sr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:iA,springs:"pio.CA"})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[m.jsx(sr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:nA,springs:"pio.PB"}),m.jsx(sr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:rA,springs:"pio.CB"})]})]}):null}const aue="_printer_fbkny_2",lue="_shadow_fbkny_6",uue="_sides_fbkny_11",cue="_front_fbkny_22",due="_trailContainer_fbkny_27",hue="_trail_fbkny_27",fue="_paper_fbkny_33",Wl={printer:aue,shadow:lue,sides:uue,front:cue,trailContainer:due,trail:hue,paper:fue},pue=Array.from({length:5},(t,e)=>e);function mue(){const t=wt(),{devices:e}=Rn(),n=tt(K0),i=tt(X0);return e.printer?m.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:m.jsxs("div",{className:Wl.printer,title:t("computer.printer.name"),children:[m.jsx("div",{className:Wl.shadow}),m.jsx("div",{className:Wl.sides}),m.jsxs("div",{className:Wl.front,children:[m.jsx("div",{className:Wl.trailContainer,children:m.jsx("div",{className:Wl.trail,children:m.jsx("pre",{className:Wl.paper,children:i})})}),m.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:pue.map(r=>{const s=n[r]?C3(n[r].unsigned):null;return m.jsx("span",{className:Me("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),m.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:m.jsx(bn.div,{className:"h-full bg-mantis-400",style:{width:Mt("printer.printing.progress").to(r=>`${r*100}%`),opacity:Mt("printer.printing.opacity")}})})]})]})}):null}const gue="_container_6nvz7_2",vue="_text_6nvz7_22",aM={container:gue,text:vue};function yue(){const t=wt(),{devices:e}=Rn(),n=tt(sA);return e.screen?m.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),m.jsx("div",{className:aM.container,children:m.jsx("pre",{className:aM.text,children:n})})]}):null}function wue(){const t=wt(),{dispatch:e,devices:n}=Rn(),i=tt(ww).toArray();return n.switches?m.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),m.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((r,s)=>m.jsxs("div",{className:"w-8 flex flex-col items-center",children:[m.jsx("span",{className:"text-xs text-white mb-1 text-center w-full",children:s}),m.jsx(pa,{checked:r,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function bue(){const t=wt(),{devices:e}=Rn();return e.timer?m.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),m.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[m.jsx(sr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:oA,springs:"timer.CONT"}),m.jsx(sr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:aA,springs:"timer.COMP"})]})]}):null}function Ez(){const t=S.useRef(null);return m.jsx("div",{className:"relative h-full w-full",children:m.jsxs(vle,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[m.jsx(ble,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:m.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[m.jsx(Ale,{}),m.jsx(Vle,{}),m.jsx(Hle,{}),m.jsx(Sle,{}),m.jsx(iue,{}),m.jsx(Yle,{}),m.jsx(sue,{}),m.jsx(oue,{}),m.jsx(bue,{}),m.jsx(Ple,{}),m.jsx(qle,{}),m.jsx(tue,{}),m.jsx(nue,{}),m.jsx(mue,{}),m.jsx(wue,{}),m.jsx(yue,{})]})}),m.jsx(xle,{wrapperRef:t})]})})}const xue=1024;let Sue=0;class A1{constructor(e,n){this.from=e,this.to=n}}class ct{constructor(e={}){this.id=Sue++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Hi.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}ct.closedBy=new ct({deserialize:t=>t.split(" ")});ct.openedBy=new ct({deserialize:t=>t.split(" ")});ct.group=new ct({deserialize:t=>t.split(" ")});ct.isolate=new ct({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});ct.contextHash=new ct({perNode:!0});ct.lookAhead=new ct({perNode:!0});ct.mounted=new ct({perNode:!0});class Z0{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[ct.mounted.id]}}const _ue=Object.create(null);class Hi{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):_ue,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Hi(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(ct.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(ct.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Hi.none=new Hi("",Object.create(null),0,8);class SA{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Hi(i.name,r,i.id,i.flags):i)}return new SA(n)}}const Ng=new WeakMap,lM=new WeakMap;var $n;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})($n||($n={}));class Gt{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Z0.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new nk(this.topNode,e)}cursorAt(e,n=0,i=0){let r=Ng.get(this)||this.topNode,s=new nk(r);return s.moveTo(e,n),Ng.set(this,s._tree),s}get topNode(){return new Br(this,0,0,null)}resolve(e,n=0){let i=Mp(Ng.get(this)||this.topNode,e,n,!1);return Ng.set(this,i),i}resolveInner(e,n=0){let i=Mp(lM.get(this)||this.topNode,e,n,!0);return lM.set(this,i),i}resolveStack(e,n=0){return Eue(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&$n.IncludeAnonymous)>0;for(let l=this.cursor(o|$n.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:CA(Hi.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new Gt(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new Gt(Hi.none,n,i,r)))}static build(e){return Aue(e)}}Gt.empty=new Gt(Hi.none,[],[],0);class _A{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new _A(this.buffer,this.index)}}class bl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Hi.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(Az(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let u=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,u)}return new bl(s,o,this.set)}}function Az(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Mp(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Br&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:$n.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Br&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class Pz{cursor(e=0){return new nk(this,e)}getChild(e,n=null,i=null){let r=uM(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return uM(this,e,n,i)}resolve(e,n=0){return Mp(this,e,n,!1)}resolveInner(e,n=0){return Mp(this,e,n,!0)}matchContext(e){return tk(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class Br extends Pz{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if(Az(r,i,d,d+c.length)){if(c instanceof bl){if(s&$n.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,i-d,r);if(h>-1)return new $a(new kue(o,c,e,d),null,h)}else if(s&$n.IncludeAnonymous||!c.type.isAnonymous||kA(c)){let h;if(!(s&$n.IgnoreMounts)&&(h=Z0.get(c))&&!h.overlay)return new Br(h.tree,d,e,o);let f=new Br(c,d,e,o);return s&$n.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&$n.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&$n.IgnoreOverlays)&&(r=Z0.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Br(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function uM(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function tk(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class kue{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class $a extends Pz{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new $a(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&$n.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new $a(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new $a(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new $a(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new Gt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Tz(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof Br&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new Cue(r,n)}class Cue{constructor(e,n){this.heads=e,this.node=n}get next(){return Tz(this.heads)}}function Eue(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof Br?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=Z0.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Br(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Mp(a,e,n,!1))}}return r?Tz(r):i}class nk{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Br)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Br?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&$n.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&$n.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&$n.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&$n.IncludeAnonymous||a instanceof bl||!a.type.isAnonymous||kA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new $a(this.buffer,n,this.stack[r]);return this.bufferNode=new $a(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return tk(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return tk(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function kA(t){return t.children.some(e=>e instanceof bl||!e.type.isAnonymous||kA(e))}function Aue(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=xue,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new _A(n,n.length):n,l=i.types,u=0,c=0;function d(k,E,C,P,N,I){let{id:L,start:$,end:G,size:U}=a,X=c,ee=u;for(;U<0;)if(a.next(),U==-1){let ke=s[L];C.push(ke),P.push($-k);return}else if(U==-3){u=L;return}else if(U==-4){c=L;return}else throw new RangeError(`Unrecognized record size: ${U}`);let he=l[L],V,F,ne=$-k;if(G-$<=r&&(F=b(a.pos-E,N))){let ke=new Uint16Array(F.size-F.skip),Z=a.pos-F.size,ue=ke.length;for(;a.pos>Z;)ue=v(F.start,ke,ue);V=new bl(ke,G-F.start,i),ne=F.start-k}else{let ke=a.pos-U;a.next();let Z=[],ue=[],D=L>=o?L:-1,O=0,B=G;for(;a.pos>ke;)D>=0&&a.id==D&&a.size>=0?(a.end<=B-r&&(p(Z,ue,$,O,a.end,B,D,X,ee),O=Z.length,B=a.end),a.next()):I>2500?h($,ke,Z,ue):d($,ke,Z,ue,D,I+1);if(D>=0&&O>0&&O<Z.length&&p(Z,ue,$,O,$,B,D,X,ee),Z.reverse(),ue.reverse(),D>-1&&O>0){let _=f(he,ee);V=CA(he,Z,ue,0,Z.length,0,G-$,_,_)}else V=g(he,Z,ue,G-$,X-G,ee)}C.push(V),P.push(ne)}function h(k,E,C,P){let N=[],I=0,L=-1;for(;a.pos>E;){let{id:$,start:G,end:U,size:X}=a;if(X>4)a.next();else{if(L>-1&&G<L)break;L<0&&(L=U-r),N.push($,G,U),I++,a.next()}}if(I){let $=new Uint16Array(I*4),G=N[N.length-2];for(let U=N.length-3,X=0;U>=0;U-=3)$[X++]=N[U],$[X++]=N[U+1]-G,$[X++]=N[U+2]-G,$[X++]=X;C.push(new bl($,N[2]-G,i)),P.push(G-k)}}function f(k,E){return(C,P,N)=>{let I=0,L=C.length-1,$,G;if(L>=0&&($=C[L])instanceof Gt){if(!L&&$.type==k&&$.length==N)return $;(G=$.prop(ct.lookAhead))&&(I=P[L]+$.length+G)}return g(k,C,P,N,I,E)}}function p(k,E,C,P,N,I,L,$,G){let U=[],X=[];for(;k.length>P;)U.push(k.pop()),X.push(E.pop()+C-N);k.push(g(i.types[L],U,X,I-N,$-I,G)),E.push(N-C)}function g(k,E,C,P,N,I,L){if(I){let $=[ct.contextHash,I];L=L?[$].concat(L):[$]}if(N>25){let $=[ct.lookAhead,N];L=L?[$].concat(L):[$]}return new Gt(k,E,C,P,L)}function b(k,E){let C=a.fork(),P=0,N=0,I=0,L=C.end-r,$={size:0,start:0,skip:0};e:for(let G=C.pos-k;C.pos>G;){let U=C.size;if(C.id==E&&U>=0){$.size=P,$.start=N,$.skip=I,I+=4,P+=4,C.next();continue}let X=C.pos-U;if(U<0||X<G||C.start<L)break;let ee=C.id>=o?4:0,he=C.start;for(C.next();C.pos>X;){if(C.size<0)if(C.size==-3)ee+=4;else break e;else C.id>=o&&(ee+=4);C.next()}N=he,P+=U,I+=ee}return(E<0||P==k)&&($.size=P,$.start=N,$.skip=I),$.size>4?$:void 0}function v(k,E,C){let{id:P,start:N,end:I,size:L}=a;if(a.next(),L>=0&&P<o){let $=C;if(L>4){let G=a.pos-(L-4);for(;a.pos>G;)C=v(k,E,C)}E[--C]=$,E[--C]=I-k,E[--C]=N-k,E[--C]=P}else L==-3?u=P:L==-4&&(c=P);return C}let y=[],w=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,y,w,-1,0);let x=(e=t.length)!==null&&e!==void 0?e:y.length?w[0]+y[0].length:0;return new Gt(l[t.topID],y.reverse(),w.reverse(),x)}const cM=new WeakMap;function _v(t,e){if(!t.isAnonymous||e instanceof bl||e.type!=t)return 1;let n=cM.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof Gt)){n=1;break}n+=_v(t,i)}cM.set(e,n)}return n}function CA(t,e,n,i,r,s,o,a,l){let u=0;for(let p=i;p<r;p++)u+=_v(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,g,b,v,y){for(let w=b;w<v;){let x=w,k=g[w],E=_v(t,p[w]);for(w++;w<v;w++){let C=_v(t,p[w]);if(E+C>=c)break;E+=C}if(w==x+1){if(E>c){let C=p[x];f(C.children,C.positions,0,C.children.length,g[x]+y);continue}d.push(p[x])}else{let C=g[w-1]+p[w-1].length-k;d.push(CA(t,p,g,x,w,k,C,null,l))}h.push(k+y-s)}}return f(e,n,i,r,0),(a||l)(d,h,o)}class bu{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new bu(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,d=c?c.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||u){let f=Math.max(h.from,l)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new bu(f,p,h.tree,h.offset+u,a>0,!!c)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return r}}class Nz{startParse(e,n,i){return typeof e=="string"&&(e=new Pue(e)),i=i?i.length?i.map(r=>new A1(r.from,r.to)):[new A1(0,0)]:[new A1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class Pue{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new ct({perNode:!0});let Tue=0;class wn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=Tue++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof wn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new wn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new J0(e);return i=>i.modified.indexOf(n)>-1?i:J0.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let Nue=0;class J0{constructor(e){this.name=e,this.instances=[],this.id=Nue++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&Rue(n,a.modified));if(i)return i;let r=[],s=new wn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=Mue(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(J0.get(a,l));return s}}function Rue(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function Mue(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Oue(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+r);let c=new Q0(i,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return Rz.add(e)}const Rz=new ct;class Q0{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Q0.empty=new Q0([],2,null);function Mz(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function Iue(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function Due(t,e,n,i=0,r=t.length){let s=new Lue(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class Lue{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=r,c=jue(e)||Q0.empty,d=Iue(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),u),c.opaque)return;let h=e.tree&&e.tree.prop(ct.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(b=>!b.scope||b.scope(h.tree.type)),g=e.firstChild();for(let b=0,v=a;;b++){let y=b<h.overlay.length?h.overlay[b]:null,w=y?y.from+a:l,x=Math.max(n,v),k=Math.min(i,w);if(x<k&&g)for(;e.from<k&&(this.highlightRange(e,x,k,r,s),this.startSpan(Math.min(k,e.to),u),!(e.to>=w||!e.nextSibling())););if(!y||w>i)break;v=y.to+a,v>n&&(this.highlightRange(f.cursor(),Math.max(n,y.from+a),Math.min(i,v),"",p),this.startSpan(Math.min(i,v),u))}g&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function jue(t){let e=t.type.prop(Rz);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const pe=wn.define,Rg=pe(),ma=pe(),dM=pe(ma),hM=pe(ma),ga=pe(),Mg=pe(ga),P1=pe(ga),Ps=pe(),Gl=pe(Ps),Es=pe(),As=pe(),ik=pe(),kh=pe(ik),Og=pe(),de={comment:Rg,lineComment:pe(Rg),blockComment:pe(Rg),docComment:pe(Rg),name:ma,variableName:pe(ma),typeName:dM,tagName:pe(dM),propertyName:hM,attributeName:pe(hM),className:pe(ma),labelName:pe(ma),namespace:pe(ma),macroName:pe(ma),literal:ga,string:Mg,docString:pe(Mg),character:pe(Mg),attributeValue:pe(Mg),number:P1,integer:pe(P1),float:pe(P1),bool:pe(ga),regexp:pe(ga),escape:pe(ga),color:pe(ga),url:pe(ga),keyword:Es,self:pe(Es),null:pe(Es),atom:pe(Es),unit:pe(Es),modifier:pe(Es),operatorKeyword:pe(Es),controlKeyword:pe(Es),definitionKeyword:pe(Es),moduleKeyword:pe(Es),operator:As,derefOperator:pe(As),arithmeticOperator:pe(As),logicOperator:pe(As),bitwiseOperator:pe(As),compareOperator:pe(As),updateOperator:pe(As),definitionOperator:pe(As),typeOperator:pe(As),controlOperator:pe(As),punctuation:ik,separator:pe(ik),bracket:kh,angleBracket:pe(kh),squareBracket:pe(kh),paren:pe(kh),brace:pe(kh),content:Ps,heading:Gl,heading1:pe(Gl),heading2:pe(Gl),heading3:pe(Gl),heading4:pe(Gl),heading5:pe(Gl),heading6:pe(Gl),contentSeparator:pe(Ps),list:pe(Ps),quote:pe(Ps),emphasis:pe(Ps),strong:pe(Ps),link:pe(Ps),monospace:pe(Ps),strikethrough:pe(Ps),inserted:pe(),deleted:pe(),changed:pe(),invalid:pe(),meta:Og,documentMeta:pe(Og),annotation:pe(Og),processingInstruction:pe(Og),definition:wn.defineModifier("definition"),constant:wn.defineModifier("constant"),function:wn.defineModifier("function"),standard:wn.defineModifier("standard"),local:wn.defineModifier("local"),special:wn.defineModifier("special")};for(let t in de){let e=de[t];e instanceof wn&&(e.name=t)}Mz([{tag:de.link,class:"tok-link"},{tag:de.heading,class:"tok-heading"},{tag:de.emphasis,class:"tok-emphasis"},{tag:de.strong,class:"tok-strong"},{tag:de.keyword,class:"tok-keyword"},{tag:de.atom,class:"tok-atom"},{tag:de.bool,class:"tok-bool"},{tag:de.url,class:"tok-url"},{tag:de.labelName,class:"tok-labelName"},{tag:de.inserted,class:"tok-inserted"},{tag:de.deleted,class:"tok-deleted"},{tag:de.literal,class:"tok-literal"},{tag:de.string,class:"tok-string"},{tag:de.number,class:"tok-number"},{tag:[de.regexp,de.escape,de.special(de.string)],class:"tok-string2"},{tag:de.variableName,class:"tok-variableName"},{tag:de.local(de.variableName),class:"tok-variableName tok-local"},{tag:de.definition(de.variableName),class:"tok-variableName tok-definition"},{tag:de.special(de.variableName),class:"tok-variableName2"},{tag:de.definition(de.propertyName),class:"tok-propertyName tok-definition"},{tag:de.typeName,class:"tok-typeName"},{tag:de.namespace,class:"tok-namespace"},{tag:de.className,class:"tok-className"},{tag:de.macroName,class:"tok-macroName"},{tag:de.propertyName,class:"tok-propertyName"},{tag:de.operator,class:"tok-operator"},{tag:de.comment,class:"tok-comment"},{tag:de.meta,class:"tok-meta"},{tag:de.invalid,class:"tok-invalid"},{tag:de.punctuation,class:"tok-punctuation"}]);var T1;const Oc=new ct;function Fue(t){return Pe.define({combine:t?e=>e.concat(t):void 0})}const $ue=new ct;class cs{constructor(e,n,i=[],r=""){this.data=e,this.name=r,ot.prototype.hasOwnProperty("tree")||Object.defineProperty(ot.prototype,"tree",{get(){return oo(this)}}),this.parser=n,this.extension=[Fd.of(this),ot.languageData.of((s,o,a)=>{let l=fM(s,o,a),u=l.type.prop(Oc);if(!u)return[];let c=s.facet(u),d=l.type.prop($ue);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return fM(e,n,i).type.prop(Oc)==this.data}findRegions(e){let n=e.facet(Fd);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Oc)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(ct.mounted);if(a){if(a.tree.prop(Oc)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof Gt&&r(u,s.positions[l]+o)}};return r(oo(e),0),i}get allowsNesting(){return!0}}cs.setState=Ze.define();function fM(t,e,n){let i=t.facet(Fd),r=oo(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,$n.ExcludeBuffers))s.type.isTop&&(r=s);return r}function oo(t){let e=t.field(cs.state,!1);return e?e.tree:Gt.empty}class Bue{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Ch=null;class Ld{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Ld(e,n,[],Gt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new Bue(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Gt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(bu.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(bu.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ch;Ch=this;try{return e()}finally{Ch=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=pM(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,h)=>l.push({fromA:u,toA:c,fromB:d,toB:h})),i=bu.applyChanges(i,l),r=Gt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new Ld(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=pM(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Nz{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Ch;if(l){for(let u of r)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Gt(Hi.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ch}}function pM(t,e,n){return bu.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class jd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new jd(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Ld.create(e.facet(Fd).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new jd(i)}}cs.state=_i.define({create:jd.init,update(t,e){for(let n of e.effects)if(n.is(cs.setState))return n.value;return e.startState.facet(Fd)!=e.state.facet(Fd)?jd.init(e.state):t.apply(e)}});let Oz=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Oz=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const N1=typeof navigator<"u"&&(!((T1=navigator.scheduling)===null||T1===void 0)&&T1.isInputPending)?()=>navigator.scheduling.isInputPending():null,zue=Gn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(cs.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(cs.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Oz(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(cs.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!N1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>N1&&N1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:cs.setState.of(new jd(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>rr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Fd=Pe.define({combine(t){return t.length?t[0]:null},enables:t=>[cs.state,zue,Re.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Uue{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const Hue=Pe.define(),EA=Pe.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Uu(t){let e=t.facet(EA);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function rk(t,e){let n="",i=t.tabSize,r=t.facet(EA)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function Vue(t,e){t instanceof ot&&(t=new AA(t));for(let i of t.state.facet(Hue)){let r=i(t,e);if(r!==void 0)return r}let n=oo(t.state);return n.length>=e?Wue(t,n,e):null}class AA{constructor(e,n={}){this.state=e,this.options=n,this.unit=Uu(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Kp(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Iz=new ct;function Wue(t,e,n){let i=e.resolveStack(n),r=i.node.enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return Dz(i,t,n)}function Dz(t,e,n){for(let i=t;i;i=i.next){let r=Kue(i.node);if(r)return r(PA.create(e,n,i))}return 0}function Gue(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Kue(t){let e=t.type.prop(Iz);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(ct.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>Zue(o,!0,1,void 0,s&&!Gue(o)?r.from:void 0)}return t.parent==null?Xue:null}function Xue(){return 0}class PA extends AA{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new PA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(que(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return Dz(this.context.next,this.base,this.pos)}}function que(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Yue(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}a=l.to}}function Zue(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r==t.pos+o,l=Yue(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Jue=Pe.define(),Que=new ct;function ece(t,e,n){let i=oo(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(Que);if(l&&(a.to<i.length-50||i.length==t.doc.length||!tce(a))){let u=l(a,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function tce(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Lz(t,e,n){for(let i of t.facet(Jue)){let r=i(t,e,n);if(r)return r}return ece(t,e,n)}function jz(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const TA=Ze.define({map:jz}),Tw=Ze.define({map:jz});function Fz(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const fm=_i.define({create(){return Je.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(TA)&&!nce(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(Uz),r=i?Je.replace({widget:new uce(i(e.state,n.value))}):mM;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(Tw)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>Re.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(mM.range(i,r))}return Je.set(e,!0)}});function $z(t,e,n){var i;let r=null;return(i=t.field(fm,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function nce(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function Bz(t,e){return t.field(fm,!1)?e:e.concat(Ze.appendConfig.of(lce()))}const ice=t=>{for(let e of Fz(t)){let n=Lz(t.state,e.from,e.to);if(n)return t.dispatch({effects:Bz(t.state,[TA.of(n),zz(t,n)])}),!0}return!1},rce=t=>{if(!t.state.field(fm,!1))return!1;let e=[];for(let n of Fz(t)){let i=$z(t.state,n.from,n.to);i&&e.push(Tw.of(i),zz(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function zz(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Re.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const sce=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=Lz(e,r.from,r.to);s&&n.push(TA.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:Bz(t.state,n)}),!!n.length},oce=t=>{let e=t.state.field(fm,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(Tw.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},ace={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Uz=Pe.define({combine(t){return Al(t,ace)}});function lce(t){return[fm,cce]}function Hz(t,e){let{state:n}=t,i=n.facet(Uz),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=$z(t.state,a.from,a.to);l&&t.dispatch({effects:Tw.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const mM=Je.replace({widget:new class extends Pl{toDOM(t){return Hz(t,null)}}});class uce extends Pl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Hz(e,this.value)}}const cce=Re.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class pm{constructor(e,n){this.specs=e;let i;function r(a){let l=rl.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof cs?a=>a.prop(Oc)==o.data:o?a=>a==o:void 0,this.style=Mz(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new rl(i):null,this.themeType=n.themeType}static define(e,n){return new pm(e,n||{})}}const sk=Pe.define(),dce=Pe.define({combine(t){return t.length?[t[0]]:null}});function R1(t){let e=t.facet(sk);return e.length?e:t.facet(dce)}function hce(t,e){let n=[pce],i;return t instanceof pm&&(t.module&&n.push(Re.styleModule.of(t.module)),i=t.themeType),i?n.push(sk.computeN([Re.darkTheme],r=>r.facet(Re.darkTheme)==(i=="dark")?[t]:[])):n.push(sk.of(t)),n}class fce{constructor(e){this.markCache=Object.create(null),this.tree=oo(e.state),this.decorations=this.buildDeco(e,R1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=oo(e.state),i=R1(e.state),r=i!=R1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Je.none;let i=new Tu;for(let{from:r,to:s}of e.visibleRanges)Due(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=Je.mark({class:l})))},r,s);return i.finish()}}const pce=Wp.high(Gn.fromClass(fce,{decorations:t=>t.decorations}));de.meta,de.link,de.heading,de.emphasis,de.strong,de.strikethrough,de.keyword,de.atom,de.bool,de.url,de.contentSeparator,de.labelName,de.literal,de.inserted,de.string,de.deleted,de.regexp,de.escape,de.string,de.variableName,de.variableName,de.typeName,de.namespace,de.className,de.variableName,de.macroName,de.propertyName,de.comment,de.invalid;const mce=1e4,gce="()[]{}",vce=new ct;function ok(t,e,n){let i=t.prop(e<0?ct.openedBy:ct.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function ak(t){let e=t.type.prop(vce);return e?e(t.node):t}function Ig(t,e,n,i={}){let r=i.maxScanDistance||mce,s=i.brackets||gce,o=oo(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=ok(l.type,n,s);if(u&&l.from<l.to){let c=ak(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return yce(t,e,n,l,c,u,s)}}return wce(t,e,n,o,a.type,r,s)}function yce(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=ak(c);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(ok(c.type,n,o))u++;else if(ok(c.type,-n,o)){if(u==0){let d=ak(c);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function wce(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let g=n>0?0:f.length-1,b=n>0?f.length:-1;g!=b;g+=n){let v=o.indexOf(f[g]);if(!(v<0||i.resolveInner(p+g,1).type!=r))if(v%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+g,to:p+g+1},matched:v>>1==l>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function gM(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class Vz{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=gM(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:gM(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function bce(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||xce,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||MA}}function xce(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const vM=new WeakMap;class NA extends cs{constructor(e){let n=Fue(e.languageData),i=bce(e),r,s=new class extends Nz{createParse(o,a,l){return new _ce(r,o,a,l)}};super(n,s,[],e.name),this.topNode=Ece(n,this),r=this,this.streamParser=i,this.stateAfter=new ct({perNode:!0}),this.tokenTable=e.tokenTable?new Xz(i.tokenTable):Cce}static define(e){return new NA(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=vM.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=RA(this,e.node.tree,0,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=0),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),u=Math.min(e.pos,l.to);if(l.length){let c=i?i(l.from):-1,d=new Vz(l.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;d.pos<u-l.from;)Gz(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(u==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&vM.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function RA(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],u=a instanceof Gt&&l<r&&RA(t,a,l,i,r);if(u)return u}return null}function Wz(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof Gt){if(!(l=Wz(t,a,n-o,i-o,r)))break;return r?new Gt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function Sce(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&RA(t,s.tree,0-s.offset,n,a),u;if(l&&l.pos<=i&&(u=Wz(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:u}}return{state:t.streamParser.startState(r?Uu(r):4),tree:Gt.empty}}class _ce{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Ld.get(),o=r[0].from,{state:a,tree:l}=Sce(e,i,o,r[r.length-1].to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Uu(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Ld.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new Vz(n,e?e.state.tabSize:4,e?Uu(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=Gz(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Gt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:kce,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Gt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Gt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Gz(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const MA=Object.create(null),Op=[Hi.none],kce=new SA(Op),yM=[],wM=Object.create(null),Kz=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Kz[t]=qz(MA,e);class Xz{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Kz)}resolve(e){return e?this.table[e]||(this.table[e]=qz(this.extra,e)):0}}const Cce=new Xz(MA);function M1(t,e){yM.indexOf(t)>-1||(yM.push(t),console.warn(e))}function qz(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let c=t[u]||de[u];c?typeof c=="function"?l.length?l=l.map(c):M1(u,`Modifier ${u} used at start of tag`):l.length?M1(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:M1(u,`Unknown highlighting tag ${u}`)}for(let u of l)n.push(u)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=wM[r];if(s)return s.id;let o=wM[r]=Hi.define({id:Op.length,name:i,props:[Oue({[i]:n})]});return Op.push(o),o.id}function Ece(t,e){let n=Hi.define({id:Op.length,name:"Document",props:[Oc.add(()=>t),Iz.add(()=>i=>e.getIndent(i))],top:!0});return Op.push(n),n}jt.RTL,jt.LTR;const Ace=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=OA(t.state,n.from);return i.line?Pce(t):i.block?Mce(t):!1};function mm(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const Pce=mm(IA,0),Tce=mm(IA,1),Nce=mm(IA,2),Rce=mm(Yz,0),Mce=mm((t,e)=>Yz(t,e,Ice(e)),0);function OA(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Eh=50;function Oce(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Eh,i),o=t.sliceDoc(r,r+Eh),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let c,d;r-i<=2*Eh?c=d=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+Eh),d=t.sliceDoc(r-Eh,r));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function Ice(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function Yz(t,e,n=e.selection.ranges){let i=n.map(s=>OA(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>Oce(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function IA(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,u=OA(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:d}of i)(d||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const lk=Zo.define(),Dce=Zo.define(),Lce=Pe.define(),Zz=Pe.define({combine(t){return Al(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),Jz=_i.define({create(){return Ks.empty},update(t,e){let n=e.state.facet(Zz),i=e.annotation(lk);if(i){let l=$i.fromTransaction(e,i.selection),u=i.side,c=u==0?t.undone:t.done;return l?c=ey(c,c.length,n.minDepth,l):c=t8(c,e.startState.selection),new Ks(u==0?i.rest:c,u==0?c:i.rest)}let r=e.annotation(Dce);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(Sn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=$i.fromTransaction(e),o=e.annotation(Sn.time),a=e.annotation(Sn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Ks(t.done.map($i.fromJSON),t.undone.map($i.fromJSON))}});function jce(t={}){return[Jz,Zz.of(t),Re.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?Qz:e.inputType=="historyRedo"?uk:null;return i?(e.preventDefault(),i(n)):!1}})]}function DA(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(Jz,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const Qz=DA(0,!1),uk=DA(1,!1),Fce=DA(0,!0);class $i{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new $i(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new $i(e.changes&&gn.fromJSON(e.changes),[],e.mapped&&Zs.fromJSON(e.mapped),e.startSelection&&ie.fromJSON(e.startSelection),e.selectionsAfter.map(ie.fromJSON))}static fromTransaction(e,n){let i=Mr;for(let r of e.startState.facet(Lce)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new $i(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Mr)}static selection(e){return new $i(void 0,Mr,void 0,void 0,e)}}function ey(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function $ce(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(i=!0)}}),i}function Bce(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function e8(t,e){return t.length?e.length?t.concat(e):t:e}const Mr=[],zce=200;function t8(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-zce));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),ey(t,t.length-1,1e9,n.setSelAfter(i)))}else return[$i.selection([e])]}function Uce(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function O1(t,e){if(!t.length)return t;let n=t.length,i=Mr;for(;n;){let r=Hce(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[$i.selection(i)]:Mr}function Hce(t,e,n){let i=e8(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Mr,n);if(!t.changes)return $i.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new $i(r,Ze.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const Vce=/^(input\.type|delete)($|\.)/;class Ks{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Ks(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||Vce.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,$ce(a.changes,e.changes))||i=="input.type.compose")?o=ey(o,o.length-1,r.minDepth,new $i(e.changes.compose(a.changes),e8(Ze.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Mr)):o=ey(o,o.length,r.minDepth,e),new Ks(o,Mr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Mr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Bce(s[s.length-1],e)?this:new Ks(t8(this.done,e),this.undone,n,i)}addMapping(e){return new Ks(O1(this.done,e),O1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:lk.of({side:e,rest:Uce(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?Mr:r.slice(0,r.length-1);return s.mapped&&(a=O1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:lk.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Ks.empty=new Ks(Mr,Mr);function gm(t,e){return ie.create(t.ranges.map(e),t.mainIndex)}function Ol(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function qu({state:t,dispatch:e},n){let i=gm(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Ol(t,i)),!0)}function Nw(t,e){return ie.cursor(e?t.to:t.from)}function n8(t,e){return qu(t,n=>n.empty?t.moveByChar(n,e):Nw(n,e))}function Il(t){return t.textDirectionAt(t.state.selection.main.head)==jt.LTR}const bM=t=>n8(t,!Il(t)),xM=t=>n8(t,Il(t));function i8(t,e){return qu(t,n=>n.empty?t.moveByGroup(n,e):Nw(n,e))}const Wce=t=>i8(t,!Il(t)),Gce=t=>i8(t,Il(t));function r8(t,e){return qu(t,n=>{if(!n.empty)return Nw(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const SM=t=>r8(t,!1),_M=t=>r8(t,!0);function s8(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Re.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function o8(t,e){let n=s8(t),{state:i}=t,r=gm(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):Nw(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Re.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Ol(i,r),{effects:s}),!0}const I1=t=>o8(t,!1),D1=t=>o8(t,!0);function Rw(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=ie.cursor(i.from+s))}return r}const kM=t=>qu(t,e=>Rw(t,e,!0)),CM=t=>qu(t,e=>Rw(t,e,!1)),Kce=t=>qu(t,e=>ie.cursor(t.lineBlockAt(e.head).from,1)),Xce=t=>qu(t,e=>ie.cursor(t.lineBlockAt(e.head).to,-1));function qce(t,e,n){let i=!1,r=gm(t.selection,s=>{let o=Ig(t,s.head,-1)||Ig(t,s.head,1)||s.head>0&&Ig(t,s.head-1,1)||s.head<t.doc.length&&Ig(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return ie.cursor(a)});return i?(e(Ol(t,r)),!0):!1}const Yce=({state:t,dispatch:e})=>qce(t,e);function Dl(t,e){let n=gm(t.state.selection,i=>{let r=e(i);return ie.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Ol(t.state,n)),!0)}function a8(t,e){return Dl(t,n=>t.moveByChar(n,e))}const EM=t=>a8(t,!Il(t)),AM=t=>a8(t,Il(t));function l8(t,e){return Dl(t,n=>t.moveByGroup(n,e))}const Zce=t=>l8(t,!Il(t)),Jce=t=>l8(t,Il(t));function u8(t,e){return Dl(t,n=>t.moveVertically(n,e))}const PM=t=>u8(t,!1),TM=t=>u8(t,!0);function c8(t,e){return Dl(t,n=>t.moveVertically(n,e,s8(t).height))}const NM=t=>c8(t,!1),RM=t=>c8(t,!0),MM=t=>Dl(t,e=>Rw(t,e,!0)),OM=t=>Dl(t,e=>Rw(t,e,!1)),Qce=t=>Dl(t,e=>ie.cursor(t.lineBlockAt(e.head).from)),ede=t=>Dl(t,e=>ie.cursor(t.lineBlockAt(e.head).to)),IM=({state:t,dispatch:e})=>(e(Ol(t,{anchor:0})),!0),DM=({state:t,dispatch:e})=>(e(Ol(t,{anchor:t.doc.length})),!0),LM=({state:t,dispatch:e})=>(e(Ol(t,{anchor:t.selection.main.anchor,head:0})),!0),jM=({state:t,dispatch:e})=>(e(Ol(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),tde=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),nde=({state:t,dispatch:e})=>{let n=Ow(t).map(({from:i,to:r})=>ie.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:ie.create(n),userEvent:"select"})),!0};function Mw(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Dg(t,l,!1)):l>o&&(n="delete.forward",l=Dg(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Dg(t,o,!1),a=Dg(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:ie.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Re.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Dg(t,e,n){if(t instanceof Re)for(let i of t.state.facet(Re.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const d8=(t,e,n)=>Mw(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let u=Kp(a,s.tabSize),c=u%Uu(s)||Uu(s);for(let d=0;d<c&&a[a.length-1-d]==" ";d++)r--;l=r}else l=Un(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=Un(o.text,l-o.from,!1,!1)+o.from);return l}),L1=t=>d8(t,!1,!0),FM=t=>d8(t,!0,!1),h8=(t,e)=>Mw(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=Un(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||i!=n.head)&&(a=c),i=l}return i}),$M=t=>h8(t,!1),ide=t=>h8(t,!0),BM=t=>Mw(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),rde=t=>Mw(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),sde=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:pt.of(["",""])},range:ie.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},ode=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Un(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:Un(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:ie.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ow(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function f8(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of Ow(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(ie.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(ie.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:ie.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const ade=({state:t,dispatch:e})=>f8(t,e,!1),lde=({state:t,dispatch:e})=>f8(t,e,!0);function p8(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of Ow(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const ude=({state:t,dispatch:e})=>p8(t,e,!1),cde=({state:t,dispatch:e})=>p8(t,e,!0),dde=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Ow(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=gm(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function hde(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=oo(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(ct.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const zM=fde(!1);function fde(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&hde(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new AA(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=Vue(u,s);for(c==null&&(c=Kp(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",rk(e,c)];return l&&d.push(rk(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:pt.of(d)},range:ie.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function m8(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:ie.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const ck=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(m8(t,(n,i)=>{i.push({from:n.from,insert:t.facet(EA)})}),{userEvent:"input.indent"})),!0),UM=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(m8(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Kp(r,t.tabSize),o=0,a=rk(t,Math.max(0,s-Uu(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function Tt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)g8(t,arguments[e]);return t}function g8(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)g8(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const HM=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Ip{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(HM(a)):HM,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return pi(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=CC(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=os(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Ip.prototype[Symbol.iterator]=function(){return this});const v8={from:-1,to:-1,match:/.*/.exec("")},LA="gm"+(/x/.unicode==null?"":"u");class y8{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=v8,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new w8(e,n,i,r,s);this.re=new RegExp(n,LA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=ty(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=ty(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const j1=new WeakMap;class nd{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=j1.get(e);if(!r||r.from>=i||r.to<=n){let a=new nd(n,e.sliceString(n,i));return j1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),j1.set(e,new nd(o,s)),new nd(n,s.slice(n-o,i-o))}}class w8{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=v8,this.matchPos=ty(e,r),this.re=new RegExp(n,LA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=nd.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=ty(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=nd.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(y8.prototype[Symbol.iterator]=w8.prototype[Symbol.iterator]=function(){return this});function pde(t){try{return new RegExp(t,LA),!0}catch{return!1}}function ty(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function dk(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Tt("input",{class:"cm-textfield",name:"line",value:e}),i=Tt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:ny.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Tt("label",t.state.phrase("Go to line"),": ",n)," ",Tt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,u,c,d]=s,h=c?+c.slice(1):0,f=u?+u:a.number;if(u&&d){let b=f/100;l&&(b=b*(l=="-"?-1:1)+a.number/o.doc.lines),f=Math.round(o.doc.lines*b)}else u&&l&&(f=f*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,f))),g=ie.cursor(p.from+Math.max(0,Math.min(h,p.length)));t.dispatch({effects:[ny.of(!1),Re.scrollIntoView(g.from,{y:"center"})],selection:g}),t.focus()}return{dom:i}}const ny=Ze.define(),VM=_i.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(ny)&&(t=n.value);return t},provide:t=>ep.from(t,e=>e?dk:null)}),mde=t=>{let e=Qf(t,dk);if(!e){let n=[ny.of(!0)];t.state.field(VM,!1)==null&&n.push(Ze.appendConfig.of([VM,gde])),t.dispatch({effects:n}),e=Qf(t,dk)}return e&&e.dom.querySelector("input").select(),!0},gde=Re.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),vde=({state:t,dispatch:e})=>{let{selection:n}=t,i=ie.create(n.ranges.map(r=>t.wordAt(r.head)||ie.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function yde(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new Ip(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Ip(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const wde=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return vde({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=yde(t,i);return r?(e(t.update({selection:t.selection.addRange(ie.range(r.from,r.to),!1),effects:Re.scrollIntoView(r.to)})),!0):!1},Zd=Pe.define({combine(t){return Al(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Pde(e),scrollToMatch:e=>Re.scrollIntoView(e)})}});class b8{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||pde(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new _de(this):new xde(this)}getCursor(e,n=0,i){let r=e.doc?e:ot.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?hc(this,r,n,i):dc(this,r,n,i)}}class x8{constructor(e){this.spec=e}}function dc(t,e,n,i){return new Ip(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?bde(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function bde(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(iy(r,n-s))!=Hn.Word||e(ry(r,n-s))!=Hn.Word)&&(e(ry(r,i-s))!=Hn.Word||e(iy(r,i-s))!=Hn.Word))}class xde extends x8{constructor(e){super(e)}nextMatch(e,n,i){let r=dc(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=dc(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=dc(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=dc(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=dc(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function hc(t,e,n,i){return new y8(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Sde(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function iy(t,e){return t.slice(Un(t,e,!1),e)}function ry(t,e){return t.slice(e,Un(t,e))}function Sde(t){return(e,n,i)=>!i[0].length||(t(iy(i.input,i.index))!=Hn.Word||t(ry(i.input,i.index))!=Hn.Word)&&(t(ry(i.input,i.index+i[0].length))!=Hn.Word||t(iy(i.input,i.index+i[0].length))!=Hn.Word)}class _de extends x8{nextMatch(e,n,i){let r=hc(this.spec,e,i,e.doc.length).next();return r.done&&(r=hc(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=hc(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n)}matchAll(e,n){let i=hc(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=hc(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Dp=Ze.define(),jA=Ze.define(),el=_i.define({create(t){return new F1(hk(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Dp)?t=new F1(n.value.create(),t.panel):n.is(jA)&&(t=new F1(t.query,n.value?FA:null));return t},provide:t=>ep.from(t,e=>e.panel)});class F1{constructor(e,n){this.query=e,this.panel=n}}const kde=Je.mark({class:"cm-searchMatch"}),Cde=Je.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Ede=Gn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(el))}update(t){let e=t.state.field(el);(e!=t.startState.field(el)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Je.none;let{view:n}=this,i=new Tu;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,d?Cde:kde)})}return i.finish()}},{decorations:t=>t.decorations});function vm(t){return e=>{let n=e.state.field(el,!1);return n&&n.query.spec.valid?t(e,n):E8(e)}}const WM=vm((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=ie.single(i.from,i.to),s=t.state.facet(Zd);return t.dispatch({selection:r,effects:[$A(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),C8(t),!0}),GM=vm((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=ie.single(r.from,r.to),o=t.state.facet(Zd);return t.dispatch({selection:s,effects:[$A(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),C8(t),!0}),S8=vm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:ie.create(n.map(i=>ie.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Ade=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new Ip(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(ie.range(a.value.from,a.value.to))}return e(t.update({selection:ie.create(s,o),userEvent:"select.search.matches"})),!0},KM=vm((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,u,c=[];if(o.from==i&&o.to==r&&(u=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(n,o.from,o.to),c.push(Re.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),o){let d=a.length==0||a[0].from>=s.to?0:s.to-s.from-u.length;l=ie.single(o.from-d,o.to-d),c.push($A(t,o)),c.push(n.facet(Zd).scrollToMatch(l.main,t))}return t.dispatch({changes:a,selection:l,effects:c,userEvent:"input.replace"}),!0}),_8=vm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Re.announce.of(i),userEvent:"input.replace.all"}),!0});function FA(t){return t.state.facet(Zd).createPanel(t)}function hk(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(Zd);return new b8({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function k8(t){let e=Qf(t,FA);return e&&e.dom.querySelector("[main-field]")}function C8(t){let e=k8(t);e&&e==t.root.activeElement&&e.select()}const E8=t=>{let e=t.state.field(el,!1);if(e&&e.panel){let n=k8(t);if(n&&n!=t.root.activeElement){let i=hk(t.state,e.query.spec);i.valid&&t.dispatch({effects:Dp.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[jA.of(!0),e?Dp.of(hk(t.state,e.query.spec)):Ze.appendConfig.of(Nde)]});return!0},A8=t=>{let e=t.state.field(el,!1);if(!e||!e.panel)return!1;let n=Qf(t,FA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:jA.of(!1)}),!0};class Pde{constructor(e){this.view=e;let n=this.query=e.state.field(el).query.spec;this.commit=this.commit.bind(this),this.searchField=Tt("input",{value:n.search,placeholder:Gi(e,"Find"),"aria-label":Gi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Tt("input",{value:n.replace,placeholder:Gi(e,"Replace"),"aria-label":Gi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Tt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Tt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Tt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Tt("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Tt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>WM(e),[Gi(e,"next")]),i("prev",()=>GM(e),[Gi(e,"previous")]),i("select",()=>S8(e),[Gi(e,"all")]),Tt("label",null,[this.caseField,Gi(e,"match case")]),Tt("label",null,[this.reField,Gi(e,"regexp")]),Tt("label",null,[this.wordField,Gi(e,"by word")]),...e.state.readOnly?[]:[Tt("br"),this.replaceField,i("replace",()=>KM(e),[Gi(e,"replace")]),i("replaceAll",()=>_8(e),[Gi(e,"replace all")])],Tt("button",{name:"close",onclick:()=>A8(e),"aria-label":Gi(e,"close"),type:"button"},[""])])}commit(){let e=new b8({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Dp.of(e)}))}keydown(e){xG(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?GM:WM)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),KM(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Dp)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Zd).top}}function Gi(t,e){return t.state.phrase(e)}const Lg=30,jg=/[\s\.,:;?!]/;function $A(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Lg),o=Math.min(r,n+Lg),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Lg;l++)if(!jg.test(a[l+1])&&jg.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Lg;l--)if(!jg.test(a[l-1])&&jg.test(a[l])){a=a.slice(0,l);break}}return Re.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const Tde=Re.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Nde=[el,Wp.low(Ede),Tde];class Rde{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=oo(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(P8(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function XM(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Mde(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=XM(e)+XM(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Ode(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Mde(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class qM{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function wf(t){return t.selection.main.from}function P8(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const T8=Zo.define();function Ide(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:ie.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const YM=new WeakMap;function Dde(t){if(!Array.isArray(t))return t;let e=YM.get(t);return e||YM.set(t,e=Ode(t)),e}const N8=Ze.define(),BA=Ze.define();class Lde{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=pi(e,n),r=os(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(pi(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let y=pi(e,0),w=os(y),x=w==e.length?0:-100;if(y!=n[0])if(y==i[0])x+=-200;else return null;return this.ret(x,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let y=0,w=Math.min(e.length,200);y<w&&u<l;){let x=pi(e,y);(x==n[u]||x==i[u])&&(r[u++]=y),y+=os(x)}if(u<l)return null}let c=0,d=0,h=!1,f=0,p=-1,g=-1,b=/[a-z]/.test(e),v=!0;for(let y=0,w=Math.min(e.length,200),x=0;y<w&&d<l;){let k=pi(e,y);a<0&&(c<l&&k==n[c]&&(s[c++]=y),f<l&&(k==n[f]||k==i[f]?(f==0&&(p=y),g=y+1,f++):f=0));let E,C=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(E=CC(k))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!y||C==1&&b||x==0&&C!=0)&&(n[d]==k||i[d]==k&&(h=!0)?o[d++]=y:o.length&&(v=!1)),x=C,y+=os(k)}return d==l&&o[0]==0&&v?this.result(-100+(h?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-900-e.length,[p,g]):d==l?this.result(-100+(h?-200:0)+-700+(v?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?os(pi(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class jde{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Hs=Pe.define({combine(t){return Al(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Fde,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>ZM(e(i),n(i)),optionClass:(e,n)=>i=>ZM(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function ZM(t,e){return t?e?t+" "+e:t:e}function Fde(t,e,n,i,r,s){let o=t.textDirection==jt.RTL,a=o,l=!1,u="top",c,d,h=e.left-r.left,f=r.right-e.right,p=i.right-i.left,g=i.bottom-i.top;if(a&&h<Math.min(p,f)?a=!1:!a&&f<Math.min(p,h)&&(a=!0),p<=(a?h:f))c=Math.max(r.top,Math.min(n.top,r.bottom-g))-e.top,d=Math.min(400,a?h:f);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let y=r.bottom-e.bottom;y>=g||y>e.top?c=n.bottom-e.top:(u="bottom",c=e.bottom-n.top)}let b=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${c/b}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function $de(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let u=0;u<s.length;){let c=s[u++],d=s[u++];c>l&&o.appendChild(document.createTextNode(a.slice(l,c)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(a.slice(c,d))),h.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function $1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class Bde{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(Hs);this.optionContent=$de(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=$1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(n).open;for(let c=l.target,d;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(d=/-(\d+)$/.exec(c.id))&&+d[1]<u.length){this.applyCompletion(e,u[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Hs).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:BA.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=$1(s.length,o,e.state.facet(Hs).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=$1(n.options.length,n.selected,this.view.state.facet(Hs).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>rr(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&Ude(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Hs).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,this.view,l);f&&c.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function zde(t,e){return n=>new Bde(n,t,e)}function Ude(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function JM(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Hde(t,e){let n=[],i=null,r=u=>{n.push(u);let{section:c}=u.completion;if(c){i||(i=[]);let d=typeof c=="string"?c:c.name;i.some(h=>h.name==d)||i.push(typeof c=="string"?{name:d}:c)}},s=e.facet(Hs);for(let u of t)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let d of u.result.options)r(new qM(d,u.source,c?c(d):[],1e9-n.length));else{let d=e.sliceDoc(u.from,u.to),h,f=s.filterStrict?new jde(d):new Lde(d);for(let p of u.result.options)if(h=f.match(p.label)){let g=p.displayLabel?c?c(p,h.matched):[]:h.matched;r(new qM(p,u.source,g,h.score+(p.boost||0)))}}}if(i){let u=Object.create(null),c=0,d=(h,f)=>{var p,g;return((p=h.rank)!==null&&p!==void 0?p:1e9)-((g=f.rank)!==null&&g!==void 0?g:1e9)||(h.name<f.name?-1:1)};for(let h of i.sort(d))c-=1e5,u[h.name]=c;for(let h of n){let{section:f}=h.completion;f&&(h.score+=u[typeof f=="string"?f:f.name])}}let o=[],a=null,l=s.compareCompletions;for(let u of n.sort((c,d)=>d.score-c.score||l(c.completion,d.completion))){let c=u.completion;!a||a.label!=c.label||a.detail!=c.detail||a.type!=null&&c.type!=null&&a.type!=c.type||a.apply!=c.apply||a.boost!=c.boost?o.push(u):JM(u.completion)>JM(a)&&(o[o.length-1]=u),a=u.completion}return o}class Ic{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Ic(this.options,QM(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(u=>u.isPending))return r.setDisabled();let a=Hde(e,n);if(!a.length)return r&&e.some(u=>u.isPending)?r.setDisabled():null;let l=n.facet(Hs).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let u=r.options[r.selected].completion;for(let c=0;c<a.length;c++)if(a[c].completion==u){l=c;break}}return new Ic(a,QM(i,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:Yde,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Ic(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Ic(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class sy{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new sy(Kde,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Hs),s=(i.override||n.languageDataAt("autocomplete",wf(n)).map(Dde)).map(l=>(this.active.find(c=>c.source==l)||new ds(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,u)=>l==this.active[u])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(R8));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Vde(s,this.active)||a?o=Ic.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new ds(l.source,0):l));for(let l of e.effects)l.is(M8)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new sy(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Wde:Gde}}function Vde(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const Wde={"aria-autocomplete":"list"},Gde={};function QM(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Kde=[];function Xde(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(T8);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class ds{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=Xde(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new ds(r.source,0)),i&4&&r.state==0&&(r=new ds(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(N8))r=new ds(r.source,1,s.value);else if(s.is(BA))r=new ds(r.source,0);else if(s.is(R8))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(wf(e.state))}}class bf extends ds{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=wf(e.state);if(a>o||!r||n&2&&(wf(e.startState)==this.from||a<this.limit))return new ds(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return qde(r.validFor,e.state,s,o)?new bf(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new Rde(e.state,a,!1)))?new bf(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:wf(e.state)):new ds(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new bf(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ds(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function qde(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):P8(t,!0).test(r)}const R8=Ze.define({map(t,e){return t.map(n=>n.map(e))}}),M8=Ze.define(),Jd=_i.define({create(){return sy.start()},update(t,e){return t.update(e)},provide:t=>[BC.from(t,e=>e.tooltip),Re.contentAttributes.from(t,e=>e.attrs)]});function O8(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(Jd).active.find(r=>r.source==e.source);return i instanceof bf?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},Ide(t.state,n,i.from,i.to)),{annotations:T8.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const Yde=zde(Jd,O8);function Fg(t,e="option"){return n=>{let i=n.state.field(Jd,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Hs).interactionDelay)return!1;let r=1,s;e=="page"&&(s=QG(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:M8.of(a)}),!0}}const eO=t=>{let e=t.state.field(Jd,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Hs).interactionDelay?!1:O8(t,e.open.options[e.open.selected])},Zde=t=>t.state.field(Jd,!1)?(t.dispatch({effects:N8.of(!0)}),!0):!1,Jde=t=>{let e=t.state.field(Jd,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:BA.of(null)}),!0)},I8={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},D8=new class extends Pu{};D8.startSide=1;D8.endSide=-1;const B1="()[]{}<>";function Qde(t){for(let e=0;e<B1.length;e+=2)if(B1.charCodeAt(e)==t)return B1.charAt(e+1);return CC(t<128?t:t+1)}function ehe(t,e){return t.languageDataAt("closeBrackets",e)[0]||I8}const the=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=ehe(t,t.selection.main.head).brackets||I8.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=ihe(t.doc,o.head);for(let l of i)if(l==a&&nhe(t.doc,o.head)==Qde(pi(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:ie.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function nhe(t,e){let n=t.sliceString(e,e+2);return n.slice(0,os(pi(n,0)))}function ihe(t,e){let n=t.sliceString(e-2,e);return os(pi(n,0))==n.length?n:n.slice(1)}class rhe{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class su{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(Xs).markerFilter;s&&(r=s(r,i));let o=Je.set(r.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?Je.widget({widget:new mhe(a),diagnostic:a}).range(a.from):Je.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new su(o,n,$d(o))}}function $d(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new rhe(r,s,o.diagnostic),!1}),i}function she(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(Xs).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(zA))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function L8(t,e){return t.field(or,!1)?e:e.concat(Ze.appendConfig.of(B8))}function ohe(t,e){return{effects:L8(t,[zA.of(e)])}}const zA=Ze.define(),UA=Ze.define(),j8=Ze.define(),or=_i.define({create(){return new su(Je.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=$d(n,t.selected.diagnostic,s)||$d(n,null,s)}!n.size&&r&&e.state.facet(Xs).autoPanel&&(r=null),t=new su(n,r,i)}for(let n of e.effects)if(n.is(zA)){let i=e.state.facet(Xs).autoPanel?n.value.length?Lp.open:null:t.panel;t=su.init(n.value,i,e.state)}else n.is(UA)?t=new su(t.diagnostics,n.value?Lp.open:null,t.selected):n.is(j8)&&(t=new su(t.diagnostics,t.panel,n.value));return t},provide:t=>[ep.from(t,e=>e.panel),Re.decorations.from(t,e=>e.diagnostics)]}),ahe=Je.mark({class:"cm-lintRange cm-lintRange-active"});function lhe(t,e,n){let{diagnostics:i}=t.state.field(or),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(r.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=t.state.facet(Xs).tooltipFilter;return a&&(r=a(r,t.state)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:uhe(t,r)}}}:null}function uhe(t,e){return Tt("ul",{class:"cm-tooltip-lint"},e.map(n=>$8(t,n,!1)))}const che=t=>{let e=t.state.field(or,!1);(!e||!e.panel)&&t.dispatch({effects:L8(t.state,[UA.of(!0)])});let n=Qf(t,Lp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},tO=t=>{let e=t.state.field(or,!1);return!e||!e.panel?!1:(t.dispatch({effects:UA.of(!1)}),!0)},dhe=t=>{let e=t.state.field(or,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},hhe=Gn.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Xs);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Xs);n.length&&fhe(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(ohe(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{rr(this.view.state,i)})}}update(t){let e=t.state.facet(Xs);(t.docChanged||e!=t.startState.facet(Xs)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function fhe(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):setTimeout(()=>e(i),200)},n)}const Xs=Pe.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Al(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function phe(t,e={}){return[Xs.of({source:t,config:e}),hhe,B8]}function F8(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function $8(t,e,n){var i;let r=n?F8(e.actions):[];return Tt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Tt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let f=$d(t.state.field(or).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,d=c<0?u:[u.slice(0,c),Tt("u",u.slice(c,c+1)),u.slice(c+1)];return Tt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Tt("div",{class:"cm-diagnosticSource"},e.source))}class mhe extends Pl{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Tt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class nO{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=$8(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Lp{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)tO(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=F8(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=$d(this.view.state.field(or).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Tt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Tt("div",{class:"cm-panel-lint"},this.list,Tt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>tO(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(or).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(or),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){u=d;break}u<0?(c=new nO(this.view,l.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new nO(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{let l=a.height/this.list.offsetHeight;o.top<a.top?this.list.scrollTop-=(a.top-o.top)/l:o.bottom>a.bottom&&(this.list.scrollTop+=(o.bottom-a.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(or),i=$d(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:j8.of(i)})}static open(e){return new Lp(e)}}function ghe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function $g(t){return ghe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const vhe=Re.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:$g("#d11")},".cm-lintRange-warning":{backgroundImage:$g("orange")},".cm-lintRange-info":{backgroundImage:$g("#999")},".cm-lintRange-hint":{backgroundImage:$g("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),B8=[or,Re.decorations.compute([or],t=>{let{selected:e,panel:n}=t.field(or);return!e||!n||e.from==e.to?Je.none:Je.set([ahe.range(e.from,e.to)])}),JG(lhe,{hideOn:she}),vhe],z8=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},yhe=z8("up"),whe=z8("down"),bhe=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(ie.range(s,s)):e=ie.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},xhe=[{key:"Ctrl-Space",run:Zde},{key:"Escape",run:Jde},{key:"ArrowDown",run:Fg(!0)},{key:"ArrowUp",run:Fg(!1)},{key:"PageDown",run:Fg(!0,"page")},{key:"PageUp",run:Fg(!1,"page")},{key:"Enter",run:eO},{key:"Tab",run:eO},{key:"Mod-f",run:E8,scope:"editor search-panel"},{key:"Escape",run:A8,scope:"editor search-panel"},{key:"Alt-Enter",run:S8,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:_8,scope:"editor search-panel"},{key:"Ctrl-g",run:mde},{key:"Mod-d",run:wde,preventDefault:!0},{key:"Shift-Mod-l",run:Ade},{key:"Enter",run:zM,shift:zM},{key:"ArrowLeft",run:bM,shift:EM,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Wce,shift:Zce},{key:"ArrowRight",run:xM,shift:AM,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Gce,shift:Jce},{key:"ArrowUp",run:SM,shift:PM,preventDefault:!0},{key:"ArrowDown",run:_M,shift:TM,preventDefault:!0},{key:"Home",run:CM,shift:OM},{mac:"Cmd-ArrowLeft",run:CM,shift:OM},{key:"Mod-Home",run:IM,shift:LM},{mac:"Cmd-ArrowUp",run:IM,shift:LM},{key:"PageUp",run:I1,shift:NM},{mac:"Ctrl-ArrowUp",run:I1,shift:NM},{key:"PageDown",run:D1,shift:RM},{mac:"Ctrl-ArrowDown",run:D1,shift:RM},{key:"End",run:kM,shift:MM},{mac:"Cmd-ArrowRight",run:kM,shift:MM},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:yhe,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:whe,preventDefault:!0},{key:"Shift-Alt-i",run:bhe},{key:"Mod-End",run:DM,shift:jM},{mac:"Cmd-ArrowDown",run:DM,shift:jM},{key:"Mod-a",run:tde},{key:"Backspace",run:the},{key:"Backspace",run:L1,shift:L1},{key:"Delete",run:FM},{key:"Mod-Backspace",mac:"Alt-Backspace",run:$M},{key:"Mod-Delete",mac:"Alt-Delete",run:ide},{mac:"Mod-Backspace",run:rde},{mac:"Mod-Delete",run:BM},{mac:"Ctrl-b",run:bM,shift:EM,preventDefault:!0},{mac:"Ctrl-f",run:xM,shift:AM},{mac:"Ctrl-p",run:SM,shift:PM},{mac:"Ctrl-n",run:_M,shift:TM},{mac:"Ctrl-a",run:Kce,shift:Qce},{mac:"Ctrl-e",run:Xce,shift:ede},{mac:"Ctrl-d",run:FM},{mac:"Ctrl-h",run:L1},{mac:"Ctrl-k",run:BM},{mac:"Ctrl-Alt-h",run:$M},{mac:"Ctrl-o",run:sde},{mac:"Ctrl-t",run:ode},{mac:"Ctrl-v",run:D1},{mac:"Alt-v",run:I1},{key:"Shift-Mod-k",run:dde},{key:"Alt-ArrowDown",run:lde},{key:"Alt-ArrowUp",run:ade},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:cde},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:ude},{key:"Mod-l",run:nde,preventDefault:!0},{key:"Shift-Mod-\\",run:Yce},{key:"Tab",run:ck,shift:UM,preventDefault:!0},{key:"Mod-[",run:UM},{key:"Mod-]",run:ck},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:ice},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:rce},{key:"Mod-k Mod-0",run:sce},{key:"Mod-k Mod-j",run:oce},{key:"Mod-k Mod-c",run:Tce},{key:"Mod-k Mod-u",run:Nce},{key:"Mod-/",run:Ace},{key:"Shift-Alt-a",run:Rce},{key:"Mod-z",run:Qz,preventDefault:!0},{key:"Mod-y",run:uk,preventDefault:!0},{key:"Mod-Shift-z",run:uk,preventDefault:!0},{key:"Mod-u",run:Fce,preventDefault:!0},{key:"Mod-Shift-m",run:che},{key:"F8",run:dhe}],fk=me(0);function She(){const t=wt(),e=tt(fk);return m.jsxs("div",{className:"flex items-center justify-between border-t border-stone-600 bg-stone-800 px-3 font-sans text-xs tracking-wider text-stone-400",children:[m.jsx(mJ,{}),m.jsx("span",{className:Me(e>0&&"font-semibold text-red-400"),children:t("editor.lintSummary",e)})]})}const Ei={character:de.character,comment:de.comment,"data-directive":wn.define(),identifier:de.variableName,instruction:wn.define(),label:de.labelName,number:de.number,operator:de.operator,offset:wn.define(),"ptr-size":wn.define(),punctuation:de.punctuation,register:wn.define(),special:wn.define(),string:de.string,unassigned:wn.define()},_he=NA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":AE.includes(e)?"data-directive":PE.includes(e)?"instruction":L0.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Ei}),khe=hce(pm.define([{tag:Ei.character,class:"text-orange-300"},{tag:Ei.comment,class:"text-stone-500 italic"},{tag:Ei["data-directive"],class:"text-rose-400/80"},{tag:Ei.instruction,class:"text-mantis-400"},{tag:Ei.number,class:"text-cyan-300/60"},{tag:Ei.operator,class:"text-rose-300"},{tag:Ei.offset,class:"text-rose-400/80 italic"},{tag:Ei["ptr-size"],class:"text-rose-400/80 italic"},{tag:Ei.punctuation,class:"text-stone-600"},{tag:Ei.register,class:"text-emerald-400/80"},{tag:Ei.special,class:"text-yellow-300/80"},{tag:Ei.string,class:"text-orange-300"},{tag:Ei.unassigned,class:"text-rose-400/80"}])),Che=phe(t=>{const e=t.state.doc.toString(),n=m4(e);if(n.success)return z.set(fk,0),[];const i=mi().language,r=n.errors.map(s=>{var l,u;const o=((l=s.position)==null?void 0:l.start)??0,a=((u=s.position)==null?void 0:u.end)??e.length;return{message:s.translate(i),severity:"error",from:o,to:a}});return z.set(fk,r.length),r},{delay:200});function Ehe(){return new Uue(_he,[khe,Che])}function U8({className:t}){const[e,n]=S.useState(),i=XZ(),r=S.useCallback(s=>{s&&n(s)},[]);return S.useEffect(()=>{if(e)return window.codemirror=new Re({state:ot.create({doc:dJ(),extensions:[ot.tabSize.of(2),A4.of(ot.readOnly.of(!1)),hJ,uK(),lne,hK(),LG(),jce(),AG(),Re.domEventHandlers({drop:s=>s.preventDefault()}),ot.allowMultipleSelections.of(!0),UG(),NF.of([{key:"Escape",run:s=>(s.dispatch({selection:ie.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?ck(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...xhe]),Ehe()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),m.jsxs("div",{className:Me("flex flex-col",t),children:[m.jsx("div",{ref:r,className:"grow overflow-auto font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),m.jsx(She,{})]})}function Ahe(){const t=fE(),e=wt(),n=ZZ(),i=S7("(max-width: 640px)"),{updateServiceWorker:r}=A7({onNeedRefresh(){Ri({title:e("update.update-available"),action:m.jsx(KB,{altText:e("update.reload"),onClick:()=>r(!0),children:e("update.reload")}),duration:1/0})}});return m.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",lang:t,style:{filter:n},children:[m.jsx(Uoe,{}),i?m.jsx(The,{}):m.jsx(Phe,{}),m.jsx(gJ,{})]})}function Phe(){const[t]=Vp(hA);return m.jsxs(pj,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[m.jsx(tv,{id:"panel-editor",order:1,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:m.jsx(U8,{className:"h-full w-full"})}),m.jsx(gS,{className:"w-2"}),m.jsx(tv,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:m.jsx(Ez,{})}),t&&m.jsxs(m.Fragment,{children:[m.jsx(gS,{className:"w-2"}),m.jsx(tv,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:m.jsx(CB,{className:"h-full w-full"})})]})]})}function The(){const t=wt(),[e,n]=S.useState("editor"),[i,r]=Vp(hA),s=i?"settings":e,o=u=>{i&&r(!1),n(u)},a=tt(ns),l="metadata"in a&&a.metadata?`${a.metadata.name}${a.metadata.operands.length?" "+a.metadata.operands.join(", "):""}`:"";return m.jsx(jL,{value:s,onValueChange:o,asChild:!0,children:m.jsxs(m.Fragment,{children:[s==="computer"&&m.jsx("div",{className:"sticky top-0 z-30 w-full bg-stone-900 border-b border-stone-700 px-4 py-2 text-center font-mono text-base text-mantis-400",children:l||m.jsx("span",{className:"text-stone-400 italic",children:"Sin instruccin"})}),m.jsx(ev,{value:"editor",asChild:!0,children:m.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:m.jsx(U8,{className:"h-full w-full"})})}),m.jsx(ev,{value:"computer",asChild:!0,children:m.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:m.jsx(Ez,{})})}),m.jsx(ev,{value:"settings",asChild:!0,children:m.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:m.jsx(CB,{className:"h-full w-full"})})}),m.jsxs($L,{className:"grid grid-cols-2 gap-2 p-2",children:[m.jsxs(hS,{value:"editor",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[m.jsx("span",{className:"icon-[lucide--file-terminal] mr-2 h-4 w-4"}),t("control.tabs.editor")]}),m.jsxs(hS,{value:"computer",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[m.jsx("span",{className:"icon-[lucide--computer] mr-2 h-4 w-4"}),t("control.tabs.computer")]})]})]})})}function Nhe(){const{toastList:t}=uJ();return m.jsxs(aae,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>m.jsxs(GB,{...o,variant:s,children:[m.jsxs("div",{className:"grid gap-1",children:[n&&m.jsx(qB,{children:n}),i&&m.jsx(YB,{children:i})]}),r,m.jsx(XB,{})]},e)),m.jsx(WB,{})]})}window.codemirror=null;vx.createRoot(document.getElementById("root")).render(m.jsx(ln.StrictMode,{children:m.jsxs(o9,{client:T4,children:[m.jsx($Y,{children:m.jsx(Ahe,{})}),m.jsx(Nhe,{})]})}));
