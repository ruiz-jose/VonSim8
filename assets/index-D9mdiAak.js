var eU=Object.defineProperty;var QA=t=>{throw TypeError(t)};var tU=(t,e,n)=>e in t?eU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var be=(t,e,n)=>tU(t,typeof e!="symbol"?e+"":e,n),Sx=(t,e,n)=>e.has(t)||QA("Cannot "+n);var A=(t,e,n)=>(Sx(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?QA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),te=(t,e,n,i)=>(Sx(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Bt=(t,e,n)=>(Sx(t,e,"access private method"),n);function nU(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var iU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wO={exports:{}},Gy={},SO={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm=Symbol.for("react.element"),rU=Symbol.for("react.portal"),sU=Symbol.for("react.fragment"),oU=Symbol.for("react.strict_mode"),aU=Symbol.for("react.profiler"),lU=Symbol.for("react.provider"),cU=Symbol.for("react.context"),uU=Symbol.for("react.forward_ref"),dU=Symbol.for("react.suspense"),fU=Symbol.for("react.memo"),hU=Symbol.for("react.lazy"),eN=Symbol.iterator;function pU(t){return t===null||typeof t!="object"?null:(t=eN&&t[eN]||t["@@iterator"],typeof t=="function"?t:null)}var kO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_O=Object.assign,CO={};function pf(t,e,n){this.props=t,this.context=e,this.refs=CO,this.updater=n||kO}pf.prototype.isReactComponent={};pf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EO(){}EO.prototype=pf.prototype;function v_(t,e,n){this.props=t,this.context=e,this.refs=CO,this.updater=n||kO}var y_=v_.prototype=new EO;y_.constructor=v_;_O(y_,pf.prototype);y_.isPureReactComponent=!0;var tN=Array.isArray,AO=Object.prototype.hasOwnProperty,b_={current:null},NO={key:!0,ref:!0,__self:!0,__source:!0};function PO(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)AO.call(e,i)&&!NO.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:fm,type:t,key:s,ref:o,props:r,_owner:b_.current}}function mU(t,e){return{$$typeof:fm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function x_(t){return typeof t=="object"&&t!==null&&t.$$typeof===fm}function gU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nN=/\/+/g;function kx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gU(""+t.key):e.toString(36)}function y0(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fm:case rU:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+kx(o,0):i,tN(r)?(n="",t!=null&&(n=t.replace(nN,"$&/")+"/"),y0(r,e,n,"",function(c){return c})):r!=null&&(x_(r)&&(r=mU(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(nN,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",tN(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+kx(s,a);o+=y0(s,e,n,l,r)}else if(l=pU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+kx(s,a++),o+=y0(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Hm(t,e,n){if(t==null)return t;var i=[],r=0;return y0(t,i,"","",function(s){return e.call(n,s,r++)}),i}function vU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ii={current:null},b0={transition:null},yU={ReactCurrentDispatcher:Ii,ReactCurrentBatchConfig:b0,ReactCurrentOwner:b_};function MO(){throw Error("act(...) is not supported in production builds of React.")}vt.Children={map:Hm,forEach:function(t,e,n){Hm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Hm(t,function(){e++}),e},toArray:function(t){return Hm(t,function(e){return e})||[]},only:function(t){if(!x_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};vt.Component=pf;vt.Fragment=sU;vt.Profiler=aU;vt.PureComponent=v_;vt.StrictMode=oU;vt.Suspense=dU;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yU;vt.act=MO;vt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=_O({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=b_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)AO.call(e,l)&&!NO.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:fm,type:t.type,key:r,ref:s,props:i,_owner:o}};vt.createContext=function(t){return t={$$typeof:cU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lU,_context:t},t.Consumer=t};vt.createElement=PO;vt.createFactory=function(t){var e=PO.bind(null,t);return e.type=t,e};vt.createRef=function(){return{current:null}};vt.forwardRef=function(t){return{$$typeof:uU,render:t}};vt.isValidElement=x_;vt.lazy=function(t){return{$$typeof:hU,_payload:{_status:-1,_result:t},_init:vU}};vt.memo=function(t,e){return{$$typeof:fU,type:t,compare:e===void 0?null:e}};vt.startTransition=function(t){var e=b0.transition;b0.transition={};try{t()}finally{b0.transition=e}};vt.unstable_act=MO;vt.useCallback=function(t,e){return Ii.current.useCallback(t,e)};vt.useContext=function(t){return Ii.current.useContext(t)};vt.useDebugValue=function(){};vt.useDeferredValue=function(t){return Ii.current.useDeferredValue(t)};vt.useEffect=function(t,e){return Ii.current.useEffect(t,e)};vt.useId=function(){return Ii.current.useId()};vt.useImperativeHandle=function(t,e,n){return Ii.current.useImperativeHandle(t,e,n)};vt.useInsertionEffect=function(t,e){return Ii.current.useInsertionEffect(t,e)};vt.useLayoutEffect=function(t,e){return Ii.current.useLayoutEffect(t,e)};vt.useMemo=function(t,e){return Ii.current.useMemo(t,e)};vt.useReducer=function(t,e,n){return Ii.current.useReducer(t,e,n)};vt.useRef=function(t){return Ii.current.useRef(t)};vt.useState=function(t){return Ii.current.useState(t)};vt.useSyncExternalStore=function(t,e,n){return Ii.current.useSyncExternalStore(t,e,n)};vt.useTransition=function(){return Ii.current.useTransition()};vt.version="18.3.1";SO.exports=vt;var x=SO.exports;const Yt=lu(x),Ky=nU({__proto__:null,default:Yt},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bU=x,xU=Symbol.for("react.element"),wU=Symbol.for("react.fragment"),SU=Object.prototype.hasOwnProperty,kU=bU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_U={key:!0,ref:!0,__self:!0,__source:!0};function RO(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)SU.call(e,i)&&!_U.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:xU,type:t,key:s,ref:o,props:r,_owner:kU.current}}Gy.Fragment=wU;Gy.jsx=RO;Gy.jsxs=RO;wO.exports=Gy;var h=wO.exports,q=typeof window<"u"?window:void 0,tr=typeof globalThis<"u"?globalThis:q,TO=Array.prototype,iN=TO.forEach,rN=TO.indexOf,xr=tr==null?void 0:tr.navigator,Me=tr==null?void 0:tr.document,Yi=tr==null?void 0:tr.location,I1=tr==null?void 0:tr.fetch,D1=tr!=null&&tr.XMLHttpRequest&&"withCredentials"in new tr.XMLHttpRequest?tr.XMLHttpRequest:void 0,sN=tr==null?void 0:tr.AbortController,Xi=xr==null?void 0:xr.userAgent,et=q??{},Bo={DEBUG:!1,LIB_VERSION:"1.256.2"},_x="$copy_autocapture",CU=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],Jo=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),EU=["fatal","error","warning","log","info","debug"];function mt(t,e){return t.indexOf(e)!==-1}var Xy=function(t){return t.trim()},j1=function(t){return t.replace(/^\$/,"")},AU=Array.isArray,OO=Object.prototype,IO=OO.hasOwnProperty,qy=OO.toString,sn=AU||function(t){return qy.call(t)==="[object Array]"},Jr=t=>typeof t=="function",yn=t=>t===Object(t)&&!sn(t),$u=t=>{if(yn(t)){for(var e in t)if(IO.call(t,e))return!1;return!0}return!1},Se=t=>t===void 0,bn=t=>qy.call(t)=="[object String]",L1=t=>bn(t)&&t.trim().length===0,Vl=t=>t===null,Rt=t=>Se(t)||Vl(t),mi=t=>qy.call(t)=="[object Number]",lo=t=>qy.call(t)==="[object Boolean]",NU=t=>t instanceof FormData,PU=t=>mt(CU,t),DO=t=>{var e={t:function(n){if(q&&(Bo.DEBUG||et.POSTHOG_DEBUG)&&!Se(q.console)&&q.console){for(var i=("__rrweb_original__"in q.console[n])?q.console[n].__rrweb_original__:q.console[n],r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];i(t,...s)}},info:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("log",...i)},warn:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("warn",...i)},error:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("error",...i)},critical:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console.error(t,...i)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>DO(t+" "+n)};return e},Te=DO("[PostHog.js]"),Gn=Te.createLogger,MU=Gn("[ExternalScriptsLoader]"),oN=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return MU.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var i=Me==null?void 0:Me.querySelectorAll("script");if(i){for(var r=0;r<i.length;r++)if(i[r].src===e)return n()}var s=()=>{if(!Me)return n("document not found");var o=Me.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=Me.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):Me.body.appendChild(o)};Me!=null&&Me.body?s():Me==null||Me.addEventListener("DOMContentLoaded",s)};function Ae(){return Ae=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ae.apply(null,arguments)}function jO(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}et.__PosthogExtensions__=et.__PosthogExtensions__||{},et.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(i="/array/"+t.config.token+"/config.js"),e==="toolbar"){var r=3e5;i=i+"&t="+Math.floor(Date.now()/r)*r}var s=t.requestRouter.endpointFor("assets",i);oN(t,s,n)},et.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);oN(t,i,n)};var rv={};function dl(t,e,n){if(sn(t)){if(iN&&t.forEach===iN)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===rv)return}}}function jt(t,e,n){if(!Rt(t)){if(sn(t))return dl(t,e,n);if(NU(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===rv)return}else for(var r in t)if(IO.call(t,r)&&e.call(n,t[r],r)===rv)return}}var kn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return dl(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t},Yy=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return dl(n,function(r){dl(r,function(s){t.push(s)})}),t};function x0(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var aN=function(t){try{return t()}catch{return}},RU=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){Te.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Te.critical(r)}}},w_=function(t){var e={};return jt(t,function(n,i){(bn(n)&&n.length>0||mi(n))&&(e[i]=n)}),e};function TU(t,e){return n=t,i=s=>bn(s)&&!Vl(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),sn(o)?(l=[],dl(o,c=>{l.push(s(c))})):(l={},jt(o,(c,u)=>{r.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,i,r}var OU=["herokuapp.com","vercel.app","netlify.app"];function IU(t){var e=t==null?void 0:t.hostname;if(!bn(e))return!1;var n=e.split(".").slice(-2).join(".");for(var i of OU)if(n===i)return!1;return!0}function LO(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function dn(t,e,n,i){var{capture:r=!1,passive:s=!0}=i??{};t==null||t.addEventListener(e,n,{capture:r,passive:s})}var BO="$people_distinct_id",nh="__alias",ih="__timers",lN="$autocapture_disabled_server_side",B1="$heatmaps_enabled_server_side",cN="$exception_capture_enabled_server_side",$1="$error_tracking_suppression_rules",uN="$web_vitals_enabled_server_side",$O="$dead_clicks_enabled_server_side",dN="$web_vitals_allowed_metrics",F1="$session_recording_enabled_server_side",fN="$console_log_recording_enabled_server_side",hN="$session_recording_network_payload_capture",pN="$session_recording_masking",mN="$session_recording_canvas_recording",gN="$replay_sample_rate",vN="$replay_minimum_duration",yN="$replay_script_config",sv="$sesid",rh="$session_is_sampled",z1="$session_recording_url_trigger_activated_session",U1="$session_recording_event_trigger_activated_session",Fu="$enabled_feature_flags",w0="$early_access_features",V1="$feature_flag_details",sh="$stored_person_properties",gc="$stored_group_properties",H1="$surveys",Wm="$surveys_activated",ov="$flag_call_reported",Io="$user_state",W1="$client_session_props",G1="$capture_rate_limit",K1="$initial_campaign_params",X1="$initial_referrer_info",av="$initial_person_info",lv="$epp",FO="__POSTHOG_TOOLBAR__",Gm="$posthog_cookieless",DU=[BO,nh,"__cmpns",ih,F1,B1,sv,Fu,$1,Io,w0,V1,gc,sh,H1,ov,W1,G1,K1,X1,lv,av];function bN(t){return t instanceof Element&&(t.id===FO||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function Jy(t){return!!t&&t.nodeType===1}function fl(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function zO(t){return!!t&&t.nodeType===3}function UO(t){return!!t&&t.nodeType===11}function S_(t){return t?Xy(t).split(/\s+/):[]}function xN(t){var e=q==null?void 0:q.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function cv(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return S_(e)}function VO(t){return Rt(t)?null:Xy(t).split(/(\s+)/).filter(e=>Od(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Zy(t){var e="";return Y1(t)&&!GO(t)&&t.childNodes&&t.childNodes.length&&jt(t.childNodes,function(n){var i;zO(n)&&n.textContent&&(e+=(i=VO(n.textContent))!==null&&i!==void 0?i:"")}),Xy(e)}function HO(t){return Se(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var q1=["a","button","form","input","select","textarea","label"];function WO(t){var e=t.parentNode;return!(!e||!Jy(e))&&e}function jU(t,e,n,i,r){var s,o,a;if(n===void 0&&(n=void 0),!q||!t||fl(t,"html")||!Jy(t)||(s=n)!=null&&s.url_allowlist&&!xN(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&xN(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(v=>e.type===v))return!1}for(var c=!1,u=[t],d=!0,f=t;f.parentNode&&!fl(f,"body");)if(UO(f.parentNode))u.push(f.parentNode.host),f=f.parentNode.host;else{if(!(d=WO(f)))break;if(i||q1.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var p=q.getComputedStyle(d);p&&p.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(d),f=d}if(!function(v,y){var b=y==null?void 0:y.element_allowlist;if(Se(b))return!0;var w,k=function(E){if(b.some(C=>E.tagName.toLowerCase()===C))return{v:!0}};for(var _ of v)if(w=k(_))return w.v;return!1}(u,n)||!function(v,y){var b=y==null?void 0:y.css_selector_allowlist;if(Se(b))return!0;var w,k=function(E){if(b.some(C=>E.matches(C)))return{v:!0}};for(var _ of v)if(w=k(_))return w.v;return!1}(u,n))return!1;var g=q.getComputedStyle(t);if(g&&g.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var m=t.tagName.toLowerCase();switch(m){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return c?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(q1.indexOf(m)>-1||t.getAttribute("contenteditable")==="true")}}function Y1(t){for(var e=t;e.parentNode&&!fl(e,"body");e=e.parentNode){var n=cv(e);if(mt(n,"ph-sensitive")||mt(n,"ph-no-capture"))return!1}if(mt(cv(t),"ph-include"))return!0;var i=t.type||"";if(bn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(bn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function GO(t){return!!(fl(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||fl(t,"select")||fl(t,"textarea")||t.getAttribute("contenteditable")==="true")}var KO="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",LU=new RegExp("^(?:"+KO+")$"),BU=new RegExp(KO),XO="\\d{3}-?\\d{2}-?\\d{4}",$U=new RegExp("^("+XO+")$"),FU=new RegExp("("+XO+")");function Od(t,e){return e===void 0&&(e=!0),!(Rt(t)||bn(t)&&(t=Xy(t),(e?LU:BU).test((t||"").replace(/[- ]/g,""))||(e?$U:FU).test(t)))}function qO(t){var e=Zy(t);return Od(e=(e+" "+YO(t)).trim())?e:""}function YO(t){var e="";return t&&t.childNodes&&t.childNodes.length&&jt(t.childNodes,function(n){var i;if(n&&((i=n.tagName)==null?void 0:i.toLowerCase())==="span")try{var r=Zy(n);e=(e+" "+r).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+YO(n)).trim())}catch(s){Te.error("[AutoCapture]",s)}}),e}function zU(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+="."+a.replace(/"/g,"");var l=Ae({},i.text?{text:i.text}:{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{},i.attr_id?{attr_id:i.attr_id}:{},i.attributes),c={};return x0(l).sort((u,d)=>{var[f]=u,[p]=d;return f.localeCompare(p)}).forEach(u=>{var[d,f]=u;return c[wN(d.toString())]=wN(f.toString())}),o+=":",o+=x0(c).map(u=>{var[d,f]=u;return d+'="'+f+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)==null?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)==null?void 0:r.slice(0,2048),attr_class:UU(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return x0(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function wN(t){return t.replace(/"|\\"/g,'\\"')}function UU(t){var e=t.attr__class;return e?sn(e)?e:S_(e):void 0}let JO=class{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}};var VU=["localhost","127.0.0.1"],Id=t=>{var e=Me==null?void 0:Me.createElement("a");return Se(e)?null:(e.href=t,e)},HU=function(t,e){var n,i;e===void 0&&(e="&");var r=[];return jt(t,function(s,o){Se(s)||Se(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),i=encodeURIComponent(o),r[r.length]=i+"="+n)}),r.join(e)},uv=function(t,e){for(var n,i=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!sn(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Te.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},k_=function(t,e,n){if(!t||!e||!e.length)return t;for(var i=t.split("#"),r=i[0]||"",s=i[1],o=r.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var f=c[d].split("=");sn(f)&&(e.includes(f[0])?u.push(f[0]+"="+n):u.push(c[d]))}var p=l;return a!=null&&(p+="?"+u.join("&")),s!=null&&(p+="#"+s),p},dv=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},SN=Gn("[AutoCapture]");function Cx(t,e){return e.length>t?e.slice(0,t)+"...":e}function WU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!Jy(e));return e}function GU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};q1.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=Cx(1024,qO(t)):s.$el_text=Cx(1024,Zy(t)));var o=cv(t);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),jt(t.attributes,function(u){var d;if((!GO(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(i==null||!i.includes(u.name))&&!e&&Od(u.value)&&(d=u.name,!bn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=u.value;u.name==="class"&&(f=S_(f).join(" ")),s["attr__"+u.name]=Cx(1024,f)}});for(var a=1,l=1,c=t;c=WU(c);)a++,c.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function KU(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!fl(u,"body");)UO(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,f=[],p={},g=!1,m=!1;if(jt(c,k=>{var _=Y1(k);k.tagName.toLowerCase()==="a"&&(g=k.getAttribute("href"),g=_&&g&&Od(g)&&g),mt(cv(k),"ph-no-capture")&&(m=!0),f.push(GU(k,s,o,a));var E=function(C){if(!Y1(C))return{};var P={};return jt(C.attributes,function(T){if(T.name&&T.name.indexOf("data-ph-capture-attribute")===0){var I=T.name.replace("data-ph-capture-attribute-",""),L=T.value;I&&L&&Od(L)&&(P[I]=L)}}),P}(k);kn(p,E)}),m)return{props:{},explicitNoCapture:m};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=qO(t):f[0].$el_text=Zy(t)),g){var v,y;f[0].attr__href=g;var b=(v=Id(g))==null?void 0:v.host,w=q==null||(y=q.location)==null?void 0:y.host;b&&w&&b!==w&&(d=g)}return{props:kn({$event_type:r.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:zU(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(i=f[0])==null?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},p)}}let XU=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new JO,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,i=yn(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)==null?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)==null?void 0:n.map(r=>new RegExp(r)),i}$(){if(this.isBrowserSupported()){if(q&&Me){var e=i=>{i=i||(q==null?void 0:q.event);try{this.k(i)}catch(r){SN.error("Failed to capture event",r)}};if(dn(Me,"submit",e,{capture:!0}),dn(Me,"change",e,{capture:!0}),dn(Me,"click",e,{capture:!0}),this.S.capture_copied_text){var n=i=>{i=i||(q==null?void 0:q.event),this.k(i,_x)};dn(Me,"copy",n,{capture:!0}),dn(Me,"cut",n,{capture:!0})}}}else SN.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[lN]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,i=[];return(n=this.m)==null||n.forEach(r=>{var s=Me==null?void 0:Me.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)==null?void 0:e.props[lN],r=this.o;if(Vl(r)&&!lo(i)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var i,r=HO(e);zO(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===_x;if(r&&jU(r,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=KU(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===_x){var c,u=VO(q==null||(c=q.getSelection())==null?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Jr(Me==null?void 0:Me.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return mi(t)&&isFinite(t)&&Math.floor(t)===t});var kN="0123456789abcdef";let qU=class J1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new J1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+kN.charAt(this.bytes[n]>>>4)+kN.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new J1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},YU=class{constructor(){this.P=0,this.R=0,this.T=new JU}generate(){var e=this.generateOrAbort();if(Se(e)){this.P=0;var n=this.generateOrAbort();if(Se(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return qU.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var _N,ZO=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};q&&!Se(q.crypto)&&crypto.getRandomValues&&(ZO=t=>crypto.getRandomValues(t));let JU=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(ZO(this.C),this.F=0),this.C[this.F++]}};var Za=()=>ZU().toString(),ZU=()=>(_N||(_N=new YU)).generate(),Pf="",QU=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function eV(t,e){if(e){var n=function(r,s){if(s===void 0&&(s=Me),Pf)return Pf;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Za();!Pf&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",Pf=c)}return Pf}(t);if(!n){var i=(r=>{var s=r.match(QU);return s?s[0]:""})(t);i!==n&&Te.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var go={O:()=>!!Me,A:function(t){Te.error("cookieStore error: "+t)},D:function(t){if(Me){try{for(var e=t+"=",n=Me.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(go.D(t))||{}}catch{}return e},j:function(t,e,n,i,r){if(Me)try{var s="",o="",a=eV(Me.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Te.warn("cookieStore warning: large cookie, len="+c.length),Me.cookie=c,c}catch{return}},N:function(t,e){try{go.j(t,"",-1,e)}catch{return}}},Ex=null,In={O:function(){if(!Vl(Ex))return Ex;var t=!0;if(Se(q))t=!1;else try{var e="__mplssupport__";In.j(e,"xyz"),In.D(e)!=='"xyz"'&&(t=!1),In.N(e)}catch{t=!1}return t||Te.error("localStorage unsupported; falling back to cookie store"),Ex=t,t},A:function(t){Te.error("localStorage error: "+t)},D:function(t){try{return q==null?void 0:q.localStorage.getItem(t)}catch(e){In.A(e)}return null},L:function(t){try{return JSON.parse(In.D(t))||{}}catch{}return null},j:function(t,e){try{q==null||q.localStorage.setItem(t,JSON.stringify(e))}catch(n){In.A(n)}},N:function(t){try{q==null||q.localStorage.removeItem(t)}catch(e){In.A(e)}}},tV=["distinct_id",sv,rh,lv,av],Km=Ae({},In,{L:function(t){try{var e={};try{e=go.L(t)||{}}catch{}var n=kn(e,JSON.parse(In.D(t)||"{}"));return In.j(t,n),n}catch{}return null},j:function(t,e,n,i,r,s){try{In.j(t,e,void 0,void 0,s);var o={};tV.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&go.j(t,o,n,i,r,s)}catch(a){In.A(a)}},N:function(t,e){try{q==null||q.localStorage.removeItem(t),go.N(t,e)}catch(n){In.A(n)}}}),Xm={},nV={O:function(){return!0},A:function(t){Te.error("memoryStorage error: "+t)},D:function(t){return Xm[t]||null},L:function(t){return Xm[t]||null},j:function(t,e){Xm[t]=e},N:function(t){delete Xm[t]}},rc=null,Zn={O:function(){if(!Vl(rc))return rc;if(rc=!0,Se(q))rc=!1;else try{var t="__support__";Zn.j(t,"xyz"),Zn.D(t)!=='"xyz"'&&(rc=!1),Zn.N(t)}catch{rc=!1}return rc},A:function(t){Te.error("sessionStorage error: ",t)},D:function(t){try{return q==null?void 0:q.sessionStorage.getItem(t)}catch(e){Zn.A(e)}return null},L:function(t){try{return JSON.parse(Zn.D(t))||null}catch{}return null},j:function(t,e){try{q==null||q.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Zn.A(n)}},N:function(t){try{q==null||q.sessionStorage.removeItem(t)}catch(e){Zn.A(e)}}},mu=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let iV=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?mu.DENIED:this.q}isOptedOut(){return this.consent===mu.DENIED||this.consent===mu.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?mu.GRANTED:e==="0"?mu.DENIED:mu.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?In:go;var n=e==="localStorage"?go:In;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!LO([xr==null?void 0:xr.doNotTrack,xr==null?void 0:xr.msDoNotTrack,et.doNotTrack],e=>mt([!0,1,"1","yes"],e))}};var qm=Gn("[Dead Clicks]"),rV=()=>!0,sV=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property($O)),i=t.instance.config.capture_dead_clicks;return lo(i)?i:n};let QO=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[$O]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,i;(n=et.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(i=et.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",r=>{r?qm.error("failed to load script",r):e()})}V(){var e;if(Me){if(!this.G&&(e=et.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=yn(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=et.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(Me),qm.info("starting...")}}else qm.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,qm.info("stopping..."))}};function wr(t,e,n,i,r){return e>n&&(Te.warn("min cannot be greater than max."),e=n),mi(t)?t>n?(i&&Te.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&Te.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&Te.warn(i+" must be a number. using max or fallback. max: "+n+", fallback: "+r),wr(r||n,e,n,i))}let e5=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var i=this.X(n)+this.Z;i>=this.tt?delete this.K[n]:this.it(n,i)})},this.X=n=>this.K[String(n)],this.it=(n,i)=>{this.K[String(n)]=i},this.consumeRateLimit=n=>{var i,r=(i=this.X(n))!==null&&i!==void 0?i:this.tt;if((r=Math.max(r-1,0))===0)return!0;this.it(n,r);var s,o=r===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=wr(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=wr(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=wr(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var Ym=Gn("[ExceptionAutocapture]");let oV=class{constructor(e){var n,i,r;this.nt=()=>{var s;if(q&&this.isEnabled&&(s=et.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=et.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=et.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=et.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(c){Ym.error("failed to start",c),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[cN]),this.S=this.vt(),this.ct=new e5({refillRate:(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&i!==void 0?i:1,bucketSize:(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&r!==void 0?r:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return yn(e)?n=Ae({},n,e):(Se(e)?this.dt:e)&&(n=Ae({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Ym.info("enabled"),this.J(this.nt))}J(e){var n,i;(n=et.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(i=et.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"exception-autocapture",r=>{if(r)return Ym.error("failed to load script",r);e()})}ht(){var e,n,i;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(i=this.ut)==null||i.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[cN]:this.dt}),this.startIfEnabled()}captureException(e){var n,i=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=i+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var r=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(r)?Ym.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function t5(t){return!Se(Event)&&n5(t,Event)}function n5(t,e){try{return t instanceof e}catch{return!1}}function i5(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return n5(t,Error)}}function S0(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function Ax(t){return S0(t,"DOMError")}var CN=/\(error: (.*)\)/,EN=50,zu="?";function Nx(t,e,n,i){var r={platform:"web:javascript",filename:t,function:e==="<anonymous>"?zu:e,in_app:!0};return Se(n)||(r.lineno=n),Se(i)||(r.colno=i),r}var aV=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,lV=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,cV=/\((\S*)(?::(\d+))(?::(\d+))\)/,uV=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,dV=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,fV=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return function(r,s){s===void 0&&(s=0);for(var o=[],a=r.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=CN.test(c)?c.replace(CN,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of i){var f=d(u);if(f){o.push(f);break}}if(o.length>=EN)break}}}return function(p){if(!p.length)return[];var g=Array.from(p);return g.reverse(),g.slice(0,EN).map(m=>Ae({},m,{filename:m.filename||hV(g).filename,function:m.function||zu}))}(o)}}([30,t=>{var e=aV.exec(t);if(e){var[,n,i,r]=e;return Nx(n,zu,+i,+r)}var s=lV.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=cV.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=NN(s[1]||zu,s[2]);return Nx(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=uV.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=dV.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var i=e[3],r=e[1]||zu;return[r,i]=NN(r,i),Nx(i,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function hV(t){return t[t.length-1]||{}}var Jm,AN,Px,NN=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,i=t.indexOf("safari-web-extension")!==-1;return n||i?[t.indexOf("@")!==-1?t.split("@")[0]:zu,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},pV=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function __(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",i=function(o){return o&&mV.test(o.message)?1:0}(t);try{var r=fV,s=function(o,a){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var d=Object.keys(u);return Px&&d.length===AN||(AN=d.length,Px=d.reduce((f,p)=>{Jm||(Jm={});var g=Jm[p];if(g)f[g[0]]=g[1];else for(var m=c(p),v=m.length-1;v>=0;v--){var y=m[v],b=y==null?void 0:y.filename,w=u[p];if(b&&w){f[b]=w,Jm[p]=[b,w];break}}return f},{})),Px}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(r(n,i),r);return s.slice(0,s.length-e)}catch{}return[]}var mV=/Minified React error #\d+;/i;function gV(t,e){var n,i,r=__(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)!==null&&i!==void 0&&i;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:r,type:"raw"},mechanism:{handled:s,synthetic:o}}}function r5(t,e){var n=gV(t,e);return t.cause&&i5(t.cause)&&t.cause!==t?[n,...r5(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function Mx(t,e){return{$exception_list:r5(t,e),$exception_level:"error"}}function Rx(t,e){var n,i,r,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(r=e==null?void 0:e.defaultExceptionType)!==null&&r!==void 0?r:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=__(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function vV(t){return bn(t)&&!L1(t)&&EU.indexOf(t)>=0}function yV(t,e){var n,i,r=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:t5(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(u,d){d===void 0&&(d=40);var f=Object.keys(u);if(f.sort(),!f.length)return"[object has no keys]";for(var p=f.length;p>0;p--){var g=f.slice(0,p).join(", ");if(!(g.length>d))return p===f.length||g.length<=d?g:g.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:r,synthetic:s}};if(e!=null&&e.syntheticException){var c=__(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:vV(t.level)?t.level:"error"}}function bV(t,e){var{error:n,event:i}=t,r={$exception_list:[]},s=n||i;if(Ax(s)||function(f){return S0(f,"DOMException")}(s)){var o=s;if(function(f){return"stack"in f}(s))r=Mx(s,e);else{var a=o.name||(Ax(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;r=Rx(l,Ae({},e,{overrideExceptionType:Ax(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(r.$exception_DOMException_code=""+o.code),r}if(function(f){return S0(f,"ErrorEvent")}(s)&&s.error)return Mx(s.error,e);if(i5(s))return Mx(s,e);if(function(f){return S0(f,"Object")}(s)||t5(s))return yV(s,e);if(Se(n)&&bn(i)){var c="Error",u=i,d=i.match(pV);return d&&(c=d[1],u=d[2]),Rx(u,Ae({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return Rx(s,e)}function PN(t,e,n){try{if(!(e in t))return()=>{};var i=t[e],r=n(i);return Jr(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=r,()=>{t[e]=i}}catch{return()=>{}}}let xV=class{constructor(e){var n;this._instance=e,this.ft=(q==null||(n=q.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Te.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Te.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(q&&q.history){var i=this;(e=q.history.pushState)!=null&&e.__posthog_wrapped__||PN(q.history,"pushState",r=>function(s,o,a){r.call(this,s,o,a),i._t("pushState")}),(n=q.history.replaceState)!=null&&n.__posthog_wrapped__||PN(q.history,"replaceState",r=>function(s,o,a){r.call(this,s,o,a),i._t("replaceState")}),this.bt()}}_t(e){try{var n,i=q==null||(n=q.location)==null?void 0:n.pathname;if(!i)return;i!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=i}catch(r){Te.error("Error capturing "+e+" pageview",r)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};dn(q,"popstate",e),this.gt=()=>{q&&q.removeEventListener("popstate",e)}}}};function fv(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(yn(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))==null?void 0:e.length)||0}function Z1(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[Z1({size:fv(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),Z1({size:fv(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var Do=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Do||{}),ms=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(ms||{}),Q1="[SessionRecording]",eS="redacted",Zm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},wV=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],SV=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],kV=["/s/","/e/","/i/"];function MN(t,e,n,i){if(Rt(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return bn(r)&&(r=parseInt(r)),r>n?Q1+" "+i+" body too large to record ("+r+" bytes)":t}function RN(t,e){if(Rt(t))return t;var n=t;return Od(n,!1)||(n=Q1+" "+e+" body "+eS),jt(SV,i=>{var r,s;(r=n)!=null&&r.length&&((s=n)==null?void 0:s.indexOf(i))!==-1&&(n=Q1+" "+e+" body "+eS+" as might contain: "+i)}),n}var _V=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:Zm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...Zm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...Zm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),f=>(f!=null&&f.requestBody&&(f.requestBody=MN(f.requestBody,f.requestHeaders,r,"Request")),f!=null&&f.responseBody&&(f.responseBody=MN(f.responseBody,f.responseHeaders,r,"Response")),f)),u=f=>{return c(((m,v)=>{var y,b=Id(m.name),w=v.indexOf("http")===0?(y=Id(v))==null?void 0:y.pathname:v;w==="/"&&(w="");var k=b==null?void 0:b.pathname.replace(w||"","");if(!(b&&k&&kV.some(_=>k.indexOf(_)===0)))return m})((g=(p=f).requestHeaders,Rt(g)||jt(Object.keys(g??{}),m=>{wV.includes(m.toLowerCase())&&(g[m]=eS)}),p),t.api_host));var p,g},d=Jr(t.session_recording.maskNetworkRequestFn);return d&&Jr(t.session_recording.maskCapturedNetworkRequestFn)&&Te.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=f=>{var p=t.session_recording.maskNetworkRequestFn({url:f.name});return Ae({},f,{name:p==null?void 0:p.url})}),s.maskRequestFn=Jr(t.session_recording.maskCapturedNetworkRequestFn)?f=>{var p,g=u(f);return g&&(p=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(g))!==null&&p!==void 0?p:void 0}:f=>function(p){if(!Se(p))return p.requestBody=RN(p.requestBody,"Request"),p.responseBody=RN(p.responseBody,"Response"),p}(u(f)),Ae({},Zm,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let CV=class{constructor(e,n){var i,r;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,c,u,d,f,p;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=s.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=s.texts)==null?void 0:d.length)!==null&&u!==void 0?u:0)+((f=(p=s.adds)==null?void 0:p.length)!==null&&f!==void 0?f:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var[u]=this.$t(c.id);return!this.ct.consumeRateLimit(u)&&c}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new e5({bucketSize:(i=this.rt.bucketSize)!==null&&i!==void 0?i:100,refillRate:(r=this.rt.refillRate)!==null&&r!==void 0?r:10,refillInterval:1e3,et:this.wt})}};var Zr=Uint8Array,nr=Uint16Array,Dd=Uint32Array,C_=new Zr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),E_=new Zr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),TN=new Zr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s5=function(t,e){for(var n=new nr(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new Dd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},o5=s5(C_,2),EV=o5[0],tS=o5[1];EV[28]=258,tS[258]=28;for(var ON=s5(E_,0)[1],a5=new nr(32768),Jt=0;Jt<32768;++Jt){var sc=(43690&Jt)>>>1|(21845&Jt)<<1;sc=(61680&(sc=(52428&sc)>>>2|(13107&sc)<<2))>>>4|(3855&sc)<<4,a5[Jt]=((65280&sc)>>>8|(255&sc)<<8)>>>1}var Nh=function(t,e,n){for(var i=t.length,r=0,s=new nr(e);r<i;++r)++s[t[r]-1];var o,a=new nr(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new nr(i),r=0;r<i;++r)o[r]=a5[a[t[r]-1]++]>>>15-t[r];return o},Fc=new Zr(288);for(Jt=0;Jt<144;++Jt)Fc[Jt]=8;for(Jt=144;Jt<256;++Jt)Fc[Jt]=9;for(Jt=256;Jt<280;++Jt)Fc[Jt]=7;for(Jt=280;Jt<288;++Jt)Fc[Jt]=8;var hv=new Zr(32);for(Jt=0;Jt<32;++Jt)hv[Jt]=5;var AV=Nh(Fc,9),NV=Nh(hv,5),l5=function(t){return(t/8>>0)+(7&t&&1)},c5=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof nr?nr:t instanceof Dd?Dd:Zr)(n-e);return i.set(t.subarray(e,n)),i},Ro=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},Mf=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},Tx=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Zr(0),0];if(r==1){var o=new Zr(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,E){return _.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var p=new nr(f+1),g=nS(n[u-1],p,0);if(g>e){i=0;var m=0,v=g-e,y=1<<v;for(s.sort(function(_,E){return p[E.s]-p[_.s]||_.f-E.f});i<r;++i){var b=s[i].s;if(!(p[b]>e))break;m+=y-(1<<g-p[b]),p[b]=e}for(m>>>=v;m>0;){var w=s[i].s;p[w]<e?m-=1<<e-p[w]++-1:++i}for(;i>=0&&m;--i){var k=s[i].s;p[k]==e&&(--p[k],++m)}g=e}return[new Zr(p),g]},nS=function(t,e,n){return t.s==-1?Math.max(nS(t.l,e,n+1),nS(t.r,e,n+1)):e[t.s]=n},IN=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new nr(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},Rf=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},iS=function(t,e,n){var i=n.length,r=l5(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},DN=function(t,e,n,i,r,s,o,a,l,c,u){Ro(e,u++,n),++r[256];for(var d=Tx(r,15),f=d[0],p=d[1],g=Tx(s,15),m=g[0],v=g[1],y=IN(f),b=y[0],w=y[1],k=IN(m),_=k[0],E=k[1],C=new nr(19),P=0;P<b.length;++P)C[31&b[P]]++;for(P=0;P<_.length;++P)C[31&_[P]]++;for(var T=Tx(C,7),I=T[0],L=T[1],j=19;j>4&&!I[TN[j-1]];--j);var X,$,K,J,Q=c+5<<3,W=Rf(r,Fc)+Rf(s,hv)+o,U=Rf(r,f)+Rf(s,m)+o+14+3*j+Rf(C,I)+(2*C[16]+3*C[17]+7*C[18]);if(Q<=W&&Q<=U)return iS(e,u,t.subarray(l,l+c));if(Ro(e,u,1+(U<W)),u+=2,U<W){X=Nh(f,p),$=f,K=Nh(m,v),J=m;var re=Nh(I,L);for(Ro(e,u,w-257),Ro(e,u+5,E-1),Ro(e,u+10,j-4),u+=14,P=0;P<j;++P)Ro(e,u+3*P,I[TN[P]]);u+=3*j;for(var ve=[b,_],Z=0;Z<2;++Z){var oe=ve[Z];for(P=0;P<oe.length;++P){var z=31&oe[P];Ro(e,u,re[z]),u+=I[z],z>15&&(Ro(e,u,oe[P]>>>5&127),u+=oe[P]>>>12)}}}else X=AV,$=Fc,K=NV,J=hv;for(P=0;P<a;++P)if(i[P]>255){z=i[P]>>>18&31,Mf(e,u,X[z+257]),u+=$[z+257],z>7&&(Ro(e,u,i[P]>>>23&31),u+=C_[z]);var B=31&i[P];Mf(e,u,K[B]),u+=J[B],B>3&&(Mf(e,u,i[P]>>>5&8191),u+=E_[B])}else Mf(e,u,X[i[P]]),u+=$[i[P]];return Mf(e,u,X[256]),u+$[256]},PV=new Dd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),MV=function(){for(var t=new Dd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),RV=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=MV[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},TV=function(t,e,n,i,r){return function(s,o,a,l,c,u){var d=s.length,f=new Zr(l+d+5*(1+Math.floor(d/7e3))+c),p=f.subarray(l,f.length-c),g=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var v=m+65535;v<d?g=iS(p,g,s.subarray(m,v)):(p[m]=u,g=iS(p,g,s.subarray(m,d)))}else{for(var y=PV[o-1],b=y>>>13,w=8191&y,k=(1<<a)-1,_=new nr(32768),E=new nr(k+1),C=Math.ceil(a/3),P=2*C,T=function(Xe){return(s[Xe]^s[Xe+1]<<C^s[Xe+2]<<P)&k},I=new Dd(25e3),L=new nr(288),j=new nr(32),X=0,$=0,K=(m=0,0),J=0,Q=0;m<d;++m){var W=T(m),U=32767&m,re=E[W];if(_[U]=re,E[W]=U,J<=m){var ve=d-m;if((X>7e3||K>24576)&&ve>423){g=DN(s,p,0,I,L,j,$,K,Q,m-Q,g),K=X=$=0,Q=m;for(var Z=0;Z<286;++Z)L[Z]=0;for(Z=0;Z<30;++Z)j[Z]=0}var oe=2,z=0,B=w,H=U-re&32767;if(ve>2&&W==T(m-H))for(var S=Math.min(b,ve)-1,M=Math.min(32767,m),D=Math.min(258,ve);H<=M&&--B&&U!=re;){if(s[m+oe]==s[m+oe-H]){for(var O=0;O<D&&s[m+O]==s[m+O-H];++O);if(O>oe){if(oe=O,z=H,O>S)break;var Y=Math.min(H,O-2),G=0;for(Z=0;Z<Y;++Z){var ie=m-H+Z+32768&32767,ee=ie-_[ie]+32768&32767;ee>G&&(G=ee,re=ie)}}}H+=(U=re)-(re=_[U])+32768&32767}if(z){I[K++]=268435456|tS[oe]<<18|ON[z];var Ie=31&tS[oe],He=31&ON[z];$+=C_[Ie]+E_[He],++L[257+Ie],++j[He],J=m+oe,++X}else I[K++]=s[m],++L[s[m]]}}g=DN(s,p,u,I,L,j,$,K,Q,m-Q,g)}return c5(f,0,l+l5(g)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!0)},rS=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},OV=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&rS(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},IV=function(t){return 10+(t.filename&&t.filename.length+1||0)};function u5(t,e){e===void 0&&(e={});var n=RV(),i=t.length;n.p(t);var r=TV(t,e,IV(e),8),s=r.length;return OV(r,e),rS(r,s-8,n.d()),rS(r,s-4,i),r}function d5(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Zr(t.length+(t.length>>>1)),r=0,s=function(c){i[r++]=c},o=0;o<n;++o){if(r+5>i.length){var a=new Zr(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return c5(i,0,r)}function DV(t,e){return function(n){for(var i=0,r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;return Math.abs(i)}(t)%100<wr(100*e,0,100)}var Cl="disabled",A_="sampled",pv="active",zc="buffering",N_="paused",P_="trigger",vo=P_+"_activated",yi=P_+"_pending",_o=P_+"_"+Cl;function jN(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class f5{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(i=>i.triggerStatus(e));return n.includes(vo)?vo:n.includes(yi)?yi:_o}stop(){this.xt.forEach(e=>e.stop())}}class h5{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var i of this.xt)n.add(i.triggerStatus(e));switch(n.delete(_o),n.size){case 0:return _o;case 1:return Array.from(n)[0];default:return yi}}stop(){this.xt.forEach(e=>e.stop())}}class jV{triggerStatus(){return yi}stop(){}}class LV{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,i;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((i=e.sessionRecording)==null?void 0:i.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?_o:((n=this._instance)==null?void 0:n.get_property(z1))===e?vo:yi}triggerStatus(e){var n=this.Pt(e),i=n===vo?vo:n===yi?yi:_o;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,n,i){if(q!==void 0&&q.location.href){var r=q.location.href,s=this.urlBlocked,o=jN(r,this.It);s&&o||(o&&!s?e():!o&&s&&n(),jN(r,this.Et)&&i("url"))}}stop(){}}class BV{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=yi;return Rt(this.linkedFlag)&&(e=_o),this.linkedFlagSeen&&(e=vo),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var i;if(this.linkedFlag=((i=e.sessionRecording)==null?void 0:i.linkedFlag)||null,!Rt(this.linkedFlag)&&!this.linkedFlagSeen){var r=bn(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=bn(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(yn(a)&&r in a){var c=a[r];l=lo(c)?c===!0:s?c===s:!!c}this.linkedFlagSeen=l,l&&n(r,s)})}}stop(){this.Rt()}}let $V=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?_o:((n=this._instance)==null?void 0:n.get_property(U1))===e?vo:yi}triggerStatus(e){var n=this.Mt(e),i=n===vo?vo:n===yi?yi:_o;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}};function FV(t){return t.isRecordingEnabled?zc:Cl}function zV(t){if(!t.receivedFlags)return zc;if(!t.isRecordingEnabled)return Cl;if(t.urlTriggerMatching.urlBlocked)return N_;var e=t.isSampled===!0,n=new f5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?A_:n===vo?pv:n===yi?zc:t.isSampled===!1?Cl:pv}function UV(t){if(!t.receivedFlags)return zc;if(!t.isRecordingEnabled)return Cl;if(t.urlTriggerMatching.urlBlocked)return N_;var e=new h5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==_o,i=lo(t.isSampled);return n&&e===yi?zc:n&&e===_o||i&&!t.isSampled?Cl:t.isSampled===!0?A_:pv}var oh="[SessionRecording]",ui=Gn(oh);function Qm(){var t;return et==null||(t=et.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var VV=3e5,HV=[ms.MouseMove,ms.MouseInteraction,ms.Scroll,ms.ViewportResize,ms.Input,ms.TouchMove,ms.MediaInteraction,ms.Drag],LN=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function oc(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];i+=String.fromCharCode(s)}return i}(u5(d5(JSON.stringify(t))))}function BN(t){return t.type===Do.Custom&&t.data.tag==="sessionIdle"}class WV{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(oh+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===yi?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:VV}get jt(){var e=this._instance.get_property(rh);return lo(e)?e:null}get Nt(){var e,n,i=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.At.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get zt(){var e=!!this._instance.get_property(F1),n=!this._instance.config.disable_session_recording;return q&&e&&n}get Ut(){var e=!!this._instance.get_property(fN),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,i,r,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(mN),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var f=parseFloat(d);d=isNaN(f)?.4:f}return{enabled:c,fps:wr(u,0,12,"canvas recording fps",4),quality:wr(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,i=this._instance.get_property(hN),r={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=yn(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(lo(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,i,r,s,o,a=this._instance.get_property(pN),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(i=this._instance.config.session_recording)==null?void 0:i.blockSelector},c=(r=l==null?void 0:l.maskAllInputs)!==null&&r!==void 0?r:a==null?void 0:a.maskAllInputs,u=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return Se(c)&&Se(u)&&Se(d)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:d}}get Wt(){var e=this._instance.get_property(gN);return mi(e)?e:null}get Gt(){var e=this._instance.get_property(vN);return mi(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):zc}constructor(e){if(this.Vt=FV,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new jV,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(Me!=null&&Me.visibilityState){var r="window "+Me.visibilityState;this.ui(r,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw ui.error("started without valid sessionManager"),new Error(oh+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(oh+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new BV(this._instance),this.Kt=new LV(this._instance),this.Yt=new $V(this._instance);var{sessionId:n,windowId:i}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=i,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&ui.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),dn(q,"beforeunload",this.oi),dn(q,"offline",this.li),dn(q,"online",this.hi),dn(q,"visibilitychange",this.di),this.mi(),this.bi(),Rt(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var i=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!i)return;this.ui("$pageview",{href:i})}}catch(r){ui.error("Could not add $pageview to rrweb session",r)}})),this.ei||(this.ei=this.At.onSessionId((n,i,r)=>{var s,o;r&&(this.ui("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(U1),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(z1))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,q==null||q.removeEventListener("beforeunload",this.oi),q==null||q.removeEventListener("offline",this.li),q==null||q.removeEventListener("online",this.hi),q==null||q.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(i=this.ei)==null||i.call(this),this.ei=void 0,(r=this.si)==null||r.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),ui.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(rh)}$i(e){var n,i=this.Ct!==e,r=this.Wt;if(mi(r)){var s=this.jt,o=i||!lo(s),a=o?DV(e,r):s;o&&(a?this.ki(A_):ui.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:r,isSampled:a})),(n=this._instance.persistence)==null||n.register({[rh]:a})}else this.Si()}onRemoteConfig(e){var n,i,r,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((i=e.sessionRecording)==null?void 0:i.triggerMatchType)==="any"?(this.Vt=zV,this.Lt=new f5([this.Yt,this.Kt])):(this.Vt=UV,this.Lt=new h5([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(r=e.sessionRecording)==null?void 0:r.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){mi(this.Wt)&&Rt(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,i=this._instance.persistence,r=()=>{var s,o,a,l,c,u,d,f,p,g=(s=e.sessionRecording)==null?void 0:s.sampleRate,m=Rt(g)?null:parseFloat(g);Rt(m)&&this.Si();var v=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;i.register({[F1]:!!e.sessionRecording,[fN]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[hN]:Ae({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[pN]:(c=e.sessionRecording)==null?void 0:c.masking,[mN]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(f=e.sessionRecording)==null?void 0:f.canvasQuality},[gN]:m,[vN]:Se(v)?null:v,[yN]:(p=e.sessionRecording)==null?void 0:p.scriptConfig})};r(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(r)}}log(e,n){var i;n===void 0&&(n="log"),(i=this._instance.sessionRecording)==null||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!Se(Object.assign)&&!Se(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),Qm()?this.Ei():(n=et.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,i=>{if(i)return ui.error("could not load recorder",i);this.Ei()}),ui.info("starting"),this.status===pv&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(yN))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&HV.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var i=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var r=this.Zt==="unknown";this.Zt=!1,r||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):ui.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi(LN(()=>Qm().addCustomEvent(e,n)))}Ci(){return this.Mi(LN(()=>Qm().takeFullSnapshot()))}Ei(){var e,n,i,r,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=Ae({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(i=this.Ht.maskTextSelector)!==null&&i!==void 0?i:void 0,s.blockSelector=(r=this.Ht.blockSelector)!==null&&r!==void 0?r:void 0);var c=Qm();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new CV(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,f)=>{var p="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";ui.info(p,{node:f}),this.log(oh+" "+p,"warn")}});var u=this.Oi();this.ci=c(Ae({emit:d=>{this.onRRwebEmit(d)},plugins:u},s)),this.ti=Date.now(),this.Zt=lo(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:u.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else ui.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,i=[],r=(e=et.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;r&&this.Ut&&i.push(r());var s=(n=et.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&Jr(s)&&(!VU.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(s(_V(this._instance.config,this.Bt))):ui.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var n;if(this.Ai(),e&&yn(e)){if(e.type===Do.Meta){var i=this.yi(e.data.href);if(this.Di=i,!i)return;e.data.href=i}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),f=>this.zi(f)),!this.Kt.urlBlocked||(r=e).type===Do.Custom&&r.data.tag==="recording paused"){var r;e.type===Do.FullSnapshot&&this.Ti(),e.type===Do.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===yi&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(f){var p=f;if(p&&yn(p)&&p.type===6&&yn(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var g=[],m=0;m<p.data.payload.payload.length;m++)p.data.payload.payload[m]&&p.data.payload.payload[m].length>2e3?g.push(p.data.payload.payload[m].slice(0,2e3)+"...[truncated]"):g.push(p.data.payload.payload[m]);return p.data.payload.payload=g,f}return f}(s);if(this.Ri(o),this.Zt!==!0||BN(o)){if(BN(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var u=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(f){if(fv(f)<1024)return f;try{if(f.type===Do.FullSnapshot)return Ae({},f,{data:oc(f.data),cv:"2024-10"});if(f.type===Do.IncrementalSnapshot&&f.data.source===ms.Mutation)return Ae({},f,{cv:"2024-10",data:Ae({},f.data,{texts:oc(f.data.texts),attributes:oc(f.data.attributes),removes:oc(f.data.removes),adds:oc(f.data.adds)})});if(f.type===Do.IncrementalSnapshot&&f.data.source===ms.StyleSheetRule)return Ae({},f,{cv:"2024-10",data:Ae({},f.data,{adds:f.data.adds?oc(f.data.adds):void 0,removes:f.data.removes?oc(f.data.removes):void 0})})}catch(p){ui.error("could not compress event - will use uncompressed event",p)}return f}(o):o,d={$snapshot_bytes:fv(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==Cl?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&q){var e=this.yi(q.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))==null?void 0:i.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,i=mi(n)&&n>=0,r=mi(e)&&i&&n<e;return this.status===zc||this.status===N_||this.status===Cl||r?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&Z1(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:Bo.LIB_VERSION})}),this.pi())}Ui(e){var n,i=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+i>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===yi&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?z1:U1]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),ui.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),ui.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&Rt(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){ui.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[rh]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),ui.info(e.replace("_"," "),n),mt(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var Ox=Gn("[SegmentIntegration]");function GV(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var c=()=>l.anonymousId()||Za();i.config.get_device_id=c,l.id()&&(i.register({distinct_id:l.id(),$device_id:c()}),i.persistence.set_property(Io,"identified")),r()},a=s.user();"then"in a&&Jr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||Ox.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(Ox.info("No userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(Ox.info("UserId set, identifying with PostHog"),i.identify(s.event.userId));var a=i.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}var p5="posthog-js";function m5(t,e){var{organization:n,projectId:i,prefix:r,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,u,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var f=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=f,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((a=o.exception)==null?void 0:a.values)||[],g=p.map(v=>Ae({},v,{stacktrace:v.stacktrace?Ae({},v.stacktrace,{type:"raw",frames:(v.stacktrace.frames||[]).map(y=>Ae({},y,{platform:"web:javascript"}))}):void 0})),m={$exception_message:((l=p[0])==null?void 0:l.value)||o.message,$exception_type:(c=p[0])==null?void 0:c.type,$exception_personURL:f,$exception_level:o.level,$exception_list:g,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&i&&(m.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+o.event_id),t.exceptions.sendExceptionEvent(m),o}}class KV{constructor(e,n,i,r,s){this.name=p5,this.setupOnce=function(o){o(m5(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var XV=q!=null&&q.location?dv(q.location.hash,"__posthog")||dv(location.hash,"state"):null,$N="_postHogToolbarParams",FN=Gn("[Toolbar]"),Ta=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(Ta||{});class qV{constructor(e){this.instance=e}Hi(e){et.ph_toolbar_state=e}Wi(){var e;return(e=et.ph_toolbar_state)!==null&&e!==void 0?e:Ta.UNINITIALIZED}maybeLoadToolbar(e,n,i){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),!q||!Me)return!1;e=e??q.location,i=i??q.history;try{if(!n){try{q.localStorage.setItem("test","test"),q.localStorage.removeItem("test")}catch{return!1}n=q==null?void 0:q.localStorage}var r,s=XV||dv(e.hash,"__posthog")||dv(e.hash,"state"),o=s?aN(()=>JSON.parse(atob(decodeURIComponent(s))))||aN(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((r=o).source="url",r&&Object.keys(r).length>0&&(o.desiredHash?e.hash=o.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(n.getItem($N)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch{return!1}}Gi(e){var n=et.ph_load_toolbar||et.ph_load_editor;!Rt(n)&&Jr(n)?n(e,this.instance):FN.warn("No toolbar load function found")}loadToolbar(e){var n=!(Me==null||!Me.getElementById(FO));if(!q||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=Ae({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(q.localStorage.setItem($N,JSON.stringify(Ae({},r,{source:void 0}))),this.Wi()===Ta.LOADED)this.Gi(r);else if(this.Wi()===Ta.UNINITIALIZED){var s;this.Hi(Ta.LOADING),(s=et.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return FN.error("[Toolbar] Failed to load",o),void this.Hi(Ta.UNINITIALIZED);this.Hi(Ta.LOADED),this.Gi(r)}),dn(q,"turbolinks:load",()=>{this.Hi(Ta.UNINITIALIZED),this.loadToolbar(r)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,i){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),this.maybeLoadToolbar(e,n,i)}}var YV=Gn("[TracingHeaders]");class JV{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,i;Se(this.Vi)&&((n=et.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),Se(this.Ki)&&((i=et.__PosthogExtensions__)==null||(i=i.tracingHeadersPatchFns)==null||i._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,i;(n=et.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(i=et.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"tracing-headers",r=>{if(r)return YV.error("failed to load script",r);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var Ca=Gn("[Web Vitals]"),zN=9e5;class ZV{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((i,r)=>Ae({},i,{["$web_vitals_"+r.name+"_event"]:Ae({},r),["$web_vitals_"+r.name+"_value"]:r.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=i=>{var r,s=(r=this._instance.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0);if(Se(s))Ca.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();Se(o)||(Rt(i==null?void 0:i.name)||Rt(i==null?void 0:i.value)?Ca.error("Invalid metric received",i):this.ie&&i.value>=this.ie?Ca.error("Ignoring metric with value >= "+this.ie,i):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),Se(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=Se(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.C.metrics.push(Ae({},i,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var i,r,s,o,a=et.__PosthogExtensions__;Se(a)||Se(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):Ca.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[uN]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=yn(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return Se(i)?((n=this._instance.persistence)==null?void 0:n.props[dN])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(yn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=yn(this._instance.config.capture_performance)&&mi(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:zN;return 0<e&&e<=6e4?zN:e}get isEnabled(){var e=Yi==null?void 0:Yi.protocol;if(e!=="http:"&&e!=="https:")return Ca.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=yn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:lo(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return lo(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(Ca.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=yn(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=yn(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[uN]:n}),this._instance.persistence.register({[dN]:i})),this.Yi=n,this.startIfEnabled()}J(e){var n,i;(n=et.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(i=et.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"web-vitals",r=>{r?Ca.error("failed to load script",r):e()})}te(){var e=q?q.location.href:void 0;return e||Ca.error("Could not determine current URL"),e}}var QV=Gn("[Heatmaps]");function UN(t){return yn(t)&&"clientX"in t&&"clientY"in t&&mi(t.clientX)&&mi(t.clientY)}class eH{constructor(e){var n;this.rageclicks=new JO,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[B1])}get flushIntervalMilliseconds(){var e=5e3;return yn(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return Se(this.instance.config.capture_heatmaps)?Se(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;QV.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[B1]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){q&&Me&&(dn(q,"beforeunload",this.se.bind(this)),dn(Me,"click",e=>this.ae(e||(q==null?void 0:q.event)),{capture:!0}),dn(Me,"mousemove",e=>this.le(e||(q==null?void 0:q.event)),{capture:!0}),this.ne=new QO(this.instance,rV,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&Jy(u)&&!fl(u,"body");){if(u===c)return!1;if(mt(l,q==null?void 0:q.getComputedStyle(u).position))return!0;u=WO(u)}return!1}(HO(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}ae(e,n){var i;if(n===void 0&&(n="click"),!bN(e.target)&&UN(e)){var r=this.ue(e,n);(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(Ae({},r,{type:"rageclick"})),this.he(r)}}le(e){!bN(e.target)&&UN(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(q){var n=q.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!$u(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class tH{constructor(e){this._instance=e}doPageView(e,n){var i,r=this.ve(e,n);return this.ce={pathname:(i=q==null?void 0:q.location.pathname)!==null&&i!==void 0?i:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var i=this.ce;if(!i)return{$pageview_id:n};var r={$pageview_id:n,$prev_pageview_id:i.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=s;if(!(Se(o)||Se(a)||Se(l)||Se(c)||Se(u)||Se(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d);var f=o<=1?1:wr(a/o,0,1),p=o<=1?1:wr(l/o,0,1),g=c<=1?1:wr(u/c,0,1),m=c<=1?1:wr(d/c,0,1);r=kn(r,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:g,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:m})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var nH=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Vl(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},iH=!!D1||!!I1,VN="text/plain",mv=(t,e)=>{var[n,i]=t.split("?"),r=Ae({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=HU(r);return n+"?"+(s=s?(i?i+"&":"")+s:i)},ah=(t,e)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,e),Ix=t=>{var{data:e,compression:n}=t;if(e){if(n===Jo.GZipJS){var i=u5(d5(ah(e)),{mtime:0}),r=new Blob([i],{type:VN});return{contentType:VN,body:r,estimatedSize:r.size}}if(n===Jo.Base64){var s=function(l){var c,u,d,f,p,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,v=0,y="",b=[];if(!l)return l;l=nH(l);do c=(p=l.charCodeAt(m++)<<16|l.charCodeAt(m++)<<8|l.charCodeAt(m++))>>18&63,u=p>>12&63,d=p>>6&63,f=63&p,b[v++]=g.charAt(c)+g.charAt(u)+g.charAt(d)+g.charAt(f);while(m<l.length);switch(y=b.join(""),l.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"="}return y}(ah(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:ah(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=ah(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Ph=[];I1&&Ph.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=Ix(t))!==null&&e!==void 0?e:{},o=new Headers;jt(t.headers,function(u,d){o.append(d,u)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(sN){var c=new sN;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}I1(a,Ae({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var f={statusCode:u.status,text:d};if(u.status===200)try{f.json=JSON.parse(d)}catch(p){Te.error(p)}t.callback==null||t.callback(f)})).catch(u=>{Te.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),D1&&Ph.push({transport:"XHR",method:t=>{var e,n=new D1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=Ix(t))!==null&&e!==void 0?e:{};jt(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(r)}}),xr!=null&&xr.sendBeacon&&Ph.push({transport:"sendBeacon",method:t=>{var e=mv(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=Ix(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;xr.sendBeacon(e,s)}catch{}}});var jd=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function HN(t,e,n){return ah({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var rH={exact:(t,e)=>e.some(n=>t.some(i=>n===i)),is_not:(t,e)=>e.every(n=>t.every(i=>n!==i)),regex:(t,e)=>e.some(n=>t.some(i=>jd(n,i))),not_regex:(t,e)=>e.every(n=>t.every(i=>!jd(n,i))),icontains:(t,e)=>e.map(eg).some(n=>t.map(eg).some(i=>n.includes(i))),not_icontains:(t,e)=>e.map(eg).every(n=>t.map(eg).every(i=>!n.includes(i)))},eg=t=>t.toLowerCase(),sH=Gn("[Error tracking]");class oH{constructor(e){var n,i;this.fe=[],this._instance=e,this.fe=(n=(i=this._instance.persistence)==null?void 0:i.get_property($1))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,i,r=(n=(i=e.errorTracking)==null?void 0:i.suppressionRules)!==null&&n!==void 0?n:[];this.fe=r,this._instance.persistence&&this._instance.persistence.register({[$1]:this.fe})}sendExceptionEvent(e){this.pe(e)?sH.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!sn(n)||n.length===0)return!1;var i=n.reduce((r,s)=>{var{type:o,value:a}=s;return bn(o)&&o.length>0&&r.$exception_types.push(o),bn(a)&&a.length>0&&r.$exception_values.push(a),r},{$exception_types:[],$exception_values:[]});return this.fe.some(r=>{var s=r.values.map(o=>{var a,l=rH[o.operator],c=sn(o.value)?o.value:[o.value],u=(a=i[o.key])!==null&&a!==void 0?a:[];return c.length>0&&l(c,u)});return r.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var Qr="Mobile",gv="iOS",co="Android",np="Tablet",g5=co+" "+np,v5="iPad",y5="Apple",b5=y5+" Watch",ip="Safari",Ld="BlackBerry",x5="Samsung",w5=x5+"Browser",S5=x5+" Internet",Uc="Chrome",aH=Uc+" OS",k5=Uc+" "+gv,M_="Internet Explorer",_5=M_+" "+Qr,R_="Opera",lH=R_+" Mini",T_="Edge",C5="Microsoft "+T_,ad="Firefox",E5=ad+" "+gv,rp="Nintendo",sp="PlayStation",ld="Xbox",A5=co+" "+Qr,N5=Qr+" "+ip,lh="Windows",sS=lh+" Phone",WN="Nokia",oS="Ouya",P5="Generic",cH=P5+" "+Qr.toLowerCase(),M5=P5+" "+np.toLowerCase(),aS="Konqueror",wi="(\\d+(\\.\\d+)?)",Dx=new RegExp("Version/"+wi),uH=new RegExp(ld,"i"),dH=new RegExp(sp+" \\w+","i"),fH=new RegExp(rp+" \\w+","i"),O_=new RegExp(Ld+"|PlayBook|BB10","i"),hH={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},pH=(t,e)=>e&&mt(e,y5)||function(n){return mt(n,ip)&&!mt(n,Uc)&&!mt(n,co)}(t),R5=function(t,e){return e=e||"",mt(t," OPR/")&&mt(t,"Mini")?lH:mt(t," OPR/")?R_:O_.test(t)?Ld:mt(t,"IE"+Qr)||mt(t,"WPDesktop")?_5:mt(t,w5)?S5:mt(t,T_)||mt(t,"Edg/")?C5:mt(t,"FBIOS")?"Facebook "+Qr:mt(t,"UCWEB")||mt(t,"UCBrowser")?"UC Browser":mt(t,"CriOS")?k5:mt(t,"CrMo")||mt(t,Uc)?Uc:mt(t,co)&&mt(t,ip)?A5:mt(t,"FxiOS")?E5:mt(t.toLowerCase(),aS.toLowerCase())?aS:pH(t,e)?mt(t,Qr)?N5:ip:mt(t,ad)?ad:mt(t,"MSIE")||mt(t,"Trident/")?M_:mt(t,"Gecko")?ad:""},mH={[_5]:[new RegExp("rv:"+wi)],[C5]:[new RegExp(T_+"?\\/"+wi)],[Uc]:[new RegExp("("+Uc+"|CrMo)\\/"+wi)],[k5]:[new RegExp("CriOS\\/"+wi)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+wi)],[ip]:[Dx],[N5]:[Dx],[R_]:[new RegExp("(Opera|OPR)\\/"+wi)],[ad]:[new RegExp(ad+"\\/"+wi)],[E5]:[new RegExp("FxiOS\\/"+wi)],[aS]:[new RegExp("Konqueror[:/]?"+wi,"i")],[Ld]:[new RegExp(Ld+" "+wi),Dx],[A5]:[new RegExp("android\\s"+wi,"i")],[S5]:[new RegExp(w5+"\\/"+wi)],[M_]:[new RegExp("(rv:|MSIE )"+wi)],Mozilla:[new RegExp("rv:"+wi)]},gH=function(t,e){var n=R5(t,e),i=mH[n];if(Se(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},GN=[[new RegExp(ld+"; "+ld+" (.*?)[);]","i"),t=>[ld,t&&t[1]||""]],[new RegExp(rp,"i"),[rp,""]],[new RegExp(sp,"i"),[sp,""]],[O_,[Ld,""]],[new RegExp(lh,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[sS,""];if(new RegExp(Qr).test(e)&&!/IEMobile\b/.test(e))return[lh+" "+Qr,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=hH[i]||"";return/arm/i.test(e)&&(r="RT"),[lh,r]}return[lh,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[gv,e.join(".")]}return[gv,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=Se(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+co+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+co+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[co,e.join(".")]}return[co,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[aH,""]],[/Linux|debian/i,["Linux",""]]],KN=function(t){return fH.test(t)?rp:dH.test(t)?sp:uH.test(t)?ld:new RegExp(oS,"i").test(t)?oS:new RegExp("("+sS+"|WPDesktop)","i").test(t)?sS:/iPad/.test(t)?v5:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?b5:O_.test(t)?Ld:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(WN,"i").test(t)?WN:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Qr).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?co:g5:co:new RegExp("(pda|"+Qr+")","i").test(t)?cH:new RegExp(np,"i").test(t)&&!new RegExp(np+" pc","i").test(t)?M5:""},tg="https?://(.*)",Qy=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],vH=Yy(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Qy),I_="<masked>",yH=["li_fat_id"];function T5(t,e,n){if(!Me)return{};var i,r=e?Yy([],Qy,n||[]):[],s=O5(k_(Me.URL,r,I_),t),o=(i={},jt(yH,function(a){var l=go.D(a);i[a]=l||null}),i);return kn(o,s)}function O5(t,e){var n=vH.concat(e||[]),i={};return jt(n,function(r){var s=uv(t,r);i[r]=s||null}),i}function I5(t){var e=function(s){return s?s.search(tg+"google.([^/?]*)")===0?"google":s.search(tg+"bing.com")===0?"bing":s.search(tg+"yahoo.com")===0?"yahoo":s.search(tg+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",i={};if(!Vl(e)){i.$search_engine=e;var r=Me?uv(Me.referrer,n):"";r.length&&(i.ph_keyword=r)}return i}function XN(){return navigator.language||navigator.userLanguage}function D5(){return(Me==null?void 0:Me.referrer)||"$direct"}function j5(t,e){var n=t?Yy([],Qy,e||[]):[],i=Yi==null?void 0:Yi.href.substring(0,1e3);return{r:D5().substring(0,1e3),u:i?k_(i,n,I_):void 0}}function L5(t){var e,{r:n,u:i}=t,r={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=Id(n))==null?void 0:e.host};if(i){r.$current_url=i;var s=Id(i);r.$host=s==null?void 0:s.host,r.$pathname=s==null?void 0:s.pathname;var o=O5(i);kn(r,o)}if(n){var a=I5(n);kn(r,a)}return r}function B5(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function bH(){try{return new Date().getTimezoneOffset()}catch{return}}function xH(t,e){if(!Xi)return{};var n,i,r,s=t?Yy([],Qy,e||[]):[],[o,a]=function(l){for(var c=0;c<GN.length;c++){var[u,d]=GN[c],f=u.exec(l),p=f&&(Jr(d)?d(f,l):d);if(p)return p}return["",""]}(Xi);return kn(w_({$os:o,$os_version:a,$browser:R5(Xi,navigator.vendor),$device:KN(Xi),$device_type:(i=Xi,r=KN(i),r===v5||r===g5||r==="Kobo"||r==="Kindle Fire"||r===M5?np:r===rp||r===ld||r===sp||r===oS?"Console":r===b5?"Wearable":r?Qr:"Desktop"),$timezone:B5(),$timezone_offset:bH()}),{$current_url:k_(Yi==null?void 0:Yi.href,s,I_),$host:Yi==null?void 0:Yi.host,$pathname:Yi==null?void 0:Yi.pathname,$raw_user_agent:Xi.length>1e3?Xi.substring(0,997)+"...":Xi,$browser_version:gH(Xi,navigator.vendor),$browser_language:XN(),$browser_language_prefix:(n=XN(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:q==null?void 0:q.screen.height,$screen_width:q==null?void 0:q.screen.width,$viewport_height:q==null?void 0:q.innerHeight,$viewport_width:q==null?void 0:q.innerWidth,$lib:"web",$lib_version:Bo.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Ws=Gn("[FeatureFlags]"),jx="$active_feature_flags",gu="$override_feature_flags",qN="$feature_flag_payloads",Tf="$override_feature_flag_payloads",YN="$feature_flag_request_id",JN=t=>{var e={};for(var[n,i]of x0(t||{}))i&&(e[n]=i);return e},wH=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var i;return[n,(i=e[n].variant)!==null&&i!==void 0?i:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var i;return(i=e[n].metadata)==null?void 0:i.payload}).map(n=>{var i;return[n,(i=e[n].metadata)==null?void 0:i.payload]}))):Ws.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},SH=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),ZN=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class kH{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(V1),n=this._instance.get_property(gu),i=this._instance.get_property(Tf);if(!i&&!n)return e||{};var r=kn({},e||{}),s=[...new Set([...Object.keys(i||{}),...Object.keys(n||{})])];for(var o of s){var a,l,c=r[o],u=n==null?void 0:n[o],d=Se(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,f=Se(u)?c.variant:typeof u=="string"?u:void 0,p=i==null?void 0:i[o],g=Ae({},c,{enabled:d,variant:d?f??(c==null?void 0:c.variant):void 0});d!==(c==null?void 0:c.enabled)&&(g.original_enabled=c==null?void 0:c.enabled),f!==(c==null?void 0:c.variant)&&(g.original_variant=c==null?void 0:c.variant),p&&(g.metadata=Ae({},c==null?void 0:c.metadata,{payload:p,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),r[o]=g}return this.ge||(Ws.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this.ge=!0),r}getFlagVariants(){var e=this._instance.get_property(Fu),n=this._instance.get_property(gu);if(!n)return e||{};for(var i=kn({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Ws.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this.ge=!0),i}getFlagPayloads(){var e=this._instance.get_property(qN),n=this._instance.get_property(Tf);if(!n)return e||{};for(var i=kn({},e||{}),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Ws.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:i}),this.ge=!0),i}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:Ae({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(sh)||{}),group_properties:this._instance.get_property(gc)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var r=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var c=function(u){for(var d=2166136261,f=0;f<u.length;f++)d^=u.charCodeAt(f),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return ZN==null?void 0:ZN.has(c)}(this._instance.config.token)?"/decide?v=4":r?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);r&&(i.timezone=B5()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:i,compression:this._instance.config.disable_compression?void 0:Jo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((u=l.json)!==null&&u!==void 0?u:{})),!i.disable_flags||this.ye)if(this.Se=!d,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(SH.FeatureFlags))Ws.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var f;i.disable_flags||this.receivedFeatureFlags((f=l.json)!==null&&f!==void 0?f:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,s=this._instance.get_property(YN)||void 0,o=this._instance.get_property(ov)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(r))){var a,l,c,u,d,f,p,g,m;sn(o[e])?o[e].push(r):o[e]=[r],(a=this._instance.persistence)==null||a.register({[ov]:o});var v=this.getFeatureFlagDetails(e),y={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.Se};Se(v==null||(u=v.metadata)==null?void 0:u.version)||(y.$feature_flag_version=v.metadata.version);var b,w=(d=v==null||(f=v.reason)==null?void 0:f.description)!==null&&d!==void 0?d:v==null||(p=v.reason)==null?void 0:p.code;w&&(y.$feature_flag_reason=w),v!=null&&(g=v.metadata)!=null&&g.id&&(y.$feature_flag_id=v.metadata.id),Se(v==null?void 0:v.original_variant)&&Se(v==null?void 0:v.original_enabled)||(y.$feature_flag_original_response=Se(v.original_variant)?v.original_enabled:v.original_variant),v!=null&&(m=v.metadata)!=null&&m.original_payload&&(y.$feature_flag_original_payload=v==null||(b=v.metadata)==null?void 0:b.original_payload),this._instance.capture("$feature_flag_called",y)}return i}Ws.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var i=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:Jo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var s,o=(s=r.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);Ws.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var d=wH(o),f=d.flags,p=d.featureFlags,g=d.featureFlagPayloads;if(p){var m=o.requestId;if(sn(p)){Ws.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var v={};if(p)for(var y=0;y<p.length;y++)v[p[y]]=!0;a&&a.register({[jx]:p,[Fu]:v})}else{var b=p,w=g,k=f;o.errorsWhileComputingFlags&&(b=Ae({},l,b),w=Ae({},c,w),k=Ae({},u,k)),a&&a.register(Ae({[jx]:Object.keys(JN(b)),[Fu]:b||{},[qN]:w||{},[V1]:k||{}},m?{[YN]:m}:{}))}}})(e,this._instance.persistence,i,r,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),Ws.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Ws.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(gu),this._instance.persistence.unregister(Tf),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,i=e;if(this.ge=!!((n=i.suppressWarning)!==null&&n!==void 0&&n),"flags"in i){if(i.flags===!1)this._instance.persistence.unregister(gu);else if(i.flags)if(sn(i.flags)){for(var r={},s=0;s<i.flags.length;s++)r[i.flags[s]]=!0;this._instance.persistence.register({[gu]:r})}else this._instance.persistence.register({[gu]:i.flags})}return"payloads"in i&&(i.payloads===!1?this._instance.persistence.unregister(Tf):i.payloads&&this._instance.persistence.register({[Tf]:i.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:i}=this.Re();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r=(this._instance.get_property(w0)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};r&&(o.$early_access_feature_name=r.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=Ae({},this.getFlagVariants(),{[e]:n});(i=this._instance.persistence)==null||i.register({[jx]:Object.keys(JN(a)),[Fu]:a}),this.Pe()}getEarlyAccessFeatures(e,n,i){n===void 0&&(n=!1);var r=this._instance.get_property(w0),s=i?"&"+i.map(o=>"stage="+o).join("&"):"";if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[w0]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}Pe(e){var{flags:n,flagVariants:i}=this.Re();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(sh)||{};this._instance.register({[sh]:Ae({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(sh)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(gc)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=Ae({},i[r],e[r]),delete e[r]}),this._instance.register({[gc]:Ae({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(gc)||{};this._instance.register({[gc]:Ae({},n,{[e]:{}})})}else this._instance.unregister(gc)}}var _H=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Lx{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Te.info("Persistence loaded",e.persistence,Ae({},this.props)),this.update_config(e,e),this.save()}Ce(e){_H.indexOf(e.persistence.toLowerCase())===-1&&(Te.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&In.O()?In:n==="localstorage+cookie"&&Km.O()?Km:n==="sessionstorage"&&Zn.O()?Zn:n==="memory"?nV:n==="cookie"?go:Km.O()?Km:go}properties(){var e={};return jt(this.props,function(n,i){if(i===Fu&&yn(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/"+r[s]]=n[r[s]];else a=i,l=!1,(Vl(o=DU)?l:rN&&o.indexOf===rN?o.indexOf(a)!=-1:(jt(o,function(c){if(l||(l=c===a))return rv}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=kn({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(yn(e)){Se(n)&&(n="None"),this.Oe=Se(i)?this.Le:i;var r=!1;if(jt(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(yn(e)){this.Oe=Se(n)?this.Le:n;var i=!1;if(jt(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=T5(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);$u(w_(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=Me==null?void 0:Me.referrer)?I5(e):{})}update_referrer_info(){var e;this.register_once({$referrer:D5(),$referring_domain:Me!=null&&Me.referrer&&((e=Id(Me.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[K1]||this.props[X1]||this.register_once({[av]:j5(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};jt([X1,K1],o=>{var a=this.props[o];a&&jt(a,function(l,c){e["$initial_"+j1(c)]=l})});var n,i,r=this.props[av];if(r){var s=(n=L5(r),i={},jt(n,function(o,a){i["$initial_"+j1(a)]=o}),i);kn(e,s)}return e}safe_merge(e){return jt(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.Ce(e),r=this.props;this.clear(),this.B=i,this.props=r,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[ih]||{};i[e]=n,this.props[ih]=i,this.save()}remove_event_timer(e){var n=(this.props[ih]||{})[e];return Se(n)||(delete this.props[ih][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class $5{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.je[e]||[])i(n);for(var r of this.je["*"]||[])r(e,n)}}class wc{constructor(e){this.Ne=new $5,this.ze=(n,i)=>this.Ue(n,i)&&this.qe(n,i)&&this.Be(n,i),this.Ue=(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!Se((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!Se((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.He)==null||u.add((c==null?void 0:c.event)||"")})}),(i=this._instance)!=null&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this._instance)==null||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((i=this.We)==null?void 0:i.size)>0&&this.We.forEach(r=>{this.Je(n,r)&&this.Ne.emit("actionCaptured",r.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.ze(e,i))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)==null?void 0:i.$current_url;if(!r||typeof r!="string"||!wc.Ke(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,i){switch(i){case"regex":return!!q&&jd(e,n);case"exact":return n===e;case"contains":var r=wc.Ye(n).replace(/_/g,".").replace(/%/g,".*");return jd(e,r);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!wc.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!wc.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!wc.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)==null?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var Un=Gn("[Surveys]"),lS="seenSurvey_",CH=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class EH{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;Se((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.actions)&&((s=i.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new wc(this._instance),this.er.init(),this.er.Ve(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l;i.conditions&&(r=i.conditions)!=null&&r.actions&&(s=i.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=i.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(i.conditions.actions.values),(l=i.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.Ze.get(c.name);u&&u.push(i.id),this.Ze.set(c.name,u||[i.id])}}))}))}tr(e){var n;e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.events)&&((s=i.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r;(r=i.conditions)==null||(r=r.events)==null||(r=r.values)==null||r.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(i.id),this.Qe.set(s.name,o||[i.id])}})}))}onEvent(e,n){var i,r=((i=this._instance)==null||(i=i.persistence)==null?void 0:i.props[Wm])||[];if(e==="survey shown"&&n&&r.length>0){var s;Un.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:r});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=r.indexOf(o);a>=0&&(r.splice(a,1),this.rr(r))}}else this.Qe.has(e)&&(Un.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(r.concat(this.Qe.get(e)||[])))}onAction(e){var n,i=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[Wm])||[];this.Ze.has(e)&&this.rr(i.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[Wm]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[Wm];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class AH{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(Rt(n))return Un.warn("Flags not loaded yet. Not loading surveys.");var i=sn(n);this.nr=i?n.length>0:n,Un.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var i=localStorage.key(n);(i!=null&&i.startsWith(lS)||i!=null&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(r=>localStorage.removeItem(r))}loadIfEnabled(){if(!this.ar)if(this.ur)Un.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Un.info("Disabled. Not loading surveys.");else{var e=et==null?void 0:et.__PosthogExtensions__;if(e){var n=this.nr;if(!Se(n)){this.ur=!0;try{var i=e.generateSurveys;if(i)return void this.dr(i,n);var r=e.loadExternalDependency;if(!r)return void this.vr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else Un.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new EH(this._instance),Un.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){Un.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return Un.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(H1);if(i&&!n)return e(i,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var s;this.lr=!1;var o=r.statusCode;if(o!==200||!r.json){var a="Surveys API could not be loaded, status: "+o;return Un.error(a),e([],{isLoaded:!1,error:a})}var l,c=r.json.surveys||[],u=c.filter(d=>function(f){return!(!f.start_date||f.end_date)}(d)&&(function(f){var p;return!((p=f.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)}(d)||function(f){var p;return!((p=f.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)}(d)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[H1]:c}),e(c,{isLoaded:!0})}})}catch(r){throw this.lr=!1,r}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(i){Un.error("Error in survey callback",i)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!Rt(this.ar))return this.ar.getActiveMatchingSurveys(e,n);Un.warn("init was not called")}pr(e){var n=null;return this.getSurveys(i=>{var r;n=(r=i.find(s=>s.id===e))!==null&&r!==void 0?r:null}),n}gr(e){if(Rt(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(Rt(this.ar))return Un.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return Rt(this.ar)?(Un.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(r=>{var s,o=(s=r.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);i({visible:a.eligible,disabledReason:a.reason})}else i({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(Rt(this.ar))Un.warn("init was not called");else{var i=this.pr(e),r=Me==null?void 0:Me.querySelector(n);i?r?this.ar.renderSurvey(i,r):Un.warn("Survey element not found"):Un.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var Bx=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),QN=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),eP=Gn("[RateLimiter]");let NH=class{constructor(e){var n,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{eP.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void eP.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)==null?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,i,r;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(i=this.instance.persistence)==null?void 0:i.get_property(G1))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)==null||r.set_property(G1,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var ac=Gn("[RemoteConfig]");class PH{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=et._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,i;(n=et.__PosthogExtensions__)!=null&&n.loadExternalDependency?(i=et.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(ac.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return ac.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void ac.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return ac.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){ac.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):ac.info("__preview_remote_config is disabled. Logging config instead",e):ac.error("Failed to fetch remote config from PostHog.")}}var cS=3e3;class MH{constructor(e,n){this.br=!0,this.yr=[],this.wr=wr((n==null?void 0:n.flush_interval_ms)||cS,250,5e3,"flush interval",cS),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(i=>i.url.indexOf("/e")===0),...n.filter(i=>i.url.indexOf("/e")!==0)].map(i=>{this.Sr(Ae({},i,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),i=function(){var s=n[r],o=new Date().getTime();s.data&&sn(s.data)&&jt(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var r in n)i()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return jt(this.yr,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;Se(e[s])&&(e[s]=Ae({},r,{data:[]})),(i=e[s].data)==null||i.push(r.data)}),this.yr=[],e}}var RH=["retriesPerformedSoFar"];class TH{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!Se(q)&&"onLine"in q.navigator&&(this.Tr=q.navigator.onLine,dn(q,"online",()=>{this.Tr=!0,this.se()}),dn(q,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=jO(e,RH);mi(n)&&n>0&&(i.url=mv(i.url,{retry_count:n})),this._instance.Ee(Ae({},i,{callback:r=>{r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.Mr(Ae({retriesPerformedSoFar:n},i)):i.callback==null||i.callback(r)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),r=Date.now()+i;this.yr.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in "+i;navigator.onLine||(s+=" (Browser is offline)"),Te.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],i=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(Ae({},e,{transport:"sendBeacon"}))}catch(n){Te.error(n)}this.yr=[]}}class OH{constructor(e){this.Or=()=>{var n,i,r,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(i=this.Ar.maxScrollHeight)!==null&&i!==void 0?i:0),this.Ar.lastContentY=c,this.Ar.maxContentY=Math.max(c,(r=this.Ar.maxContentY)!==null&&r!==void 0?r:0),this.Ar.maxContentHeight=Math.max(u,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){dn(q,"scroll",this.Or,{capture:!0}),dn(q,"scrollend",this.Or,{capture:!0}),dn(q,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return q==null?void 0:q.document.documentElement;var e=sn(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var i=q==null?void 0:q.document.querySelector(n);if(i)return i}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return q&&(q.scrollY||q.pageYOffset||q.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return q&&(q.scrollX||q.pageXOffset||q.document.documentElement.scrollLeft)||0}}var IH=t=>j5(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class DH{constructor(e,n,i,r){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[W1]:a})}},this._instance=e,this.zr=n,this.Nr=i,this.jr=r||IH,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[W1]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?L5(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return jt(w_(this.getSetOnceProps()),(n,i)=>{i==="$current_url"&&(i="url"),e["$session_entry_"+j1(i)]=n}),e}}var tP=Gn("[SessionId]");class jH{constructor(e,n,i){var r;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||Za,this.Br=i||Za;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*wr(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=Zn.L(this.Wr),l=Zn.L(this.Gr);a&&!l?this.fi=a:Zn.N(this.Wr),Zn.j(this.Gr,!0)}if((r=this.S.bootstrap)!=null&&r.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(u){tP.error("Invalid sessionID in bootstrap",u)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return Se(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&Zn.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&Zn.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?Zn.L(this.Wr):null}Vr(e,n,i){e===this.Ct&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[sv]:[n,e,i]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[sv];return sn(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){dn(q,"beforeunload",()=>{this.Jr()&&Zn.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=n||new Date().getTime(),[r,s,o]=this.Qr(),a=this.Xr(),l=mi(o)&&o>0&&Math.abs(i-o)>864e5,c=!1,u=!s,d=!e&&Math.abs(i-r)>this.sessionTimeoutMs;u||d||l?(s=this.qr(),a=this.Br(),tP.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),o=i,c=!0):a||(a=this.Br(),c=!0);var f=r===0||!e||l?i:r,p=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,f,p),e||this.Hr(),c&&this.Ur.forEach(g=>g(s,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:p,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:r}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var LH=["$set_once","$set"],Ea=Gn("[SiteApps]");class BH{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var i=this.globalsForEvent(n);this.ts.push(i),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=et._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,p]of Object.entries(d))c[f]={id:u[f],type:f,properties:p};var{$set_once:g,$set:m}=e;return{event:Ae({},jO(e,LH),{properties:Ae({},e.properties,m?{$set:Ae({},(n=(i=e.properties)==null?void 0:i.$set)!==null&&n!==void 0?n:{},m)}:{},g?{$set_once:Ae({},(r=(s=e.properties)==null?void 0:s.$set_once)!==null&&r!==void 0?r:{},g)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],i=()=>{var a;!n.errored&&this.ts.length&&(Ea.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},r=!1,s=a=>{n.errored=!a,n.loaded=!0,Ea.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),r&&i()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),r=!0}catch(a){Ea.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(r&&n.loaded)try{i()}catch(a){Ea.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{i.processEvent==null||i.processEvent(n)}catch(r){Ea.error("Error while processing event "+e.event+" for site app "+i.id,r)}}}onRemoteConfig(e){var n,i,r,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",c=>this.ns(c))):void Ea.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((i=this.rs)==null||i.call(this),(r=e.siteApps)!=null&&r.length)if(this.isEnabled){var o=function(c){var u;et["__$$ph_site_app_"+c]=s._instance,(u=et.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,d=>{if(d)return Ea.error("Error while initializing PostHog app with config id "+c,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else Ea.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var $H=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],nP=function(t,e){if(!t)return!1;var n=t.toLowerCase();return $H.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},F5=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&nP(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>nP(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver},ch=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),iP="i.posthog.com";class FH{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+iP,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=ch.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=ch.EU:this.os[this.apiHost]=ch.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===ch.CUSTOM)return this.apiHost+n;var i=iP+n;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var zH={icontains:(t,e)=>!!q&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!q&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!q&&jd(e.href,t),not_regex:(t,e)=>!!q&&!jd(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let UH=class Si{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(i){i===void 0&&(i=!1),n.getWebExperiments(r=>{Si.ls("retrieved web experiments from the server"),n.us=new Map,r.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(Si.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);bn(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];Si.ds(c)&&n.hs(s.name,l,c.transforms)}})},i)},this._instance=e,this._instance.onFeatureFlags(i=>{this.onFeatureFlags(i)})}onFeatureFlags(e){if(this._is_bot())Si.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(Rt(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();Si.ls("applying feature flags",e),e.forEach(n=>{var i;if(this.us&&(i=this.us)!=null&&i.has(n)){var r,s=this._instance.getFeatureFlag(n),o=(r=this.us)==null?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=Si.getWindowLocation();if(e!=null&&e.search){var n=uv(e==null?void 0:e.search,"__experiment_id"),i=uv(e==null?void 0:e.search,"__experiment_variant");n&&i&&(Si.ls("previewing web experiments "+n+" && "+i),this.getWebExperiments(r=>{this.vs(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(Si.ls("Previewing web experiment ["+r[0].name+"] with variant ["+n+"]"),this.hs(r[0].name,n,r[0].variants[n].transforms))}static ds(e){return!Rt(e.conditions)&&Si.cs(e)&&Si.fs(e)}static cs(e){var n;if(Rt(e.conditions)||Rt((n=e.conditions)==null?void 0:n.url))return!0;var i,r,s,o=Si.getWindowLocation();return!!o&&((i=e.conditions)==null||!i.url||zH[(r=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return q==null?void 0:q.location}static fs(e){var n;if(Rt(e.conditions)||Rt((n=e.conditions)==null?void 0:n.utm))return!0;var i=T5();if(i.utm_source){var r,s,o,a,l,c,u,d,f=(r=e.conditions)==null||(r=r.utm)==null||!r.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==i.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==i.utm_source,g=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==i.utm_medium,m=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==i.utm_term;return f&&g&&m&&p}return!1}static ls(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Te.info("[WebExperiments] "+e,i)}hs(e,n,i){this._is_bot()?Si.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(r=>{if(r.selector){var s;Si.ls("applying transform of variant "+n+" for experiment "+e+" ",r);var o=(s=document)==null?void 0:s.querySelectorAll(r.selector);o==null||o.forEach(a=>{var l=a;r.html&&(l.innerHTML=r.html),r.css&&l.setAttribute("style",r.css)})}}):Si.ls("Control variants leave the page unmodified.")}_is_bot(){return xr&&this._instance?F5(xr,this._instance.config.custom_blocked_useragents):void 0}};var VH=Gn("[PostHog ExternalIntegrations]"),HH={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let WH=class{constructor(e){this._instance=e}J(e,n){var i;(i=et.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,e,r=>{if(r)return VH.error("failed to load script",r);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,c;!r||(a=et.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(HH[o],()=>{var u;(u=et.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!r&&(l=et.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=et.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[i,r]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(i)}}};var Mh={},uS=()=>{},Ru="posthog",z5=!iH&&(Xi==null?void 0:Xi.indexOf("MSIE"))===-1&&(Xi==null?void 0:Xi.indexOf("Mozilla"))===-1,rP=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:IU(Me==null?void 0:Me.location),persistence:"localStorage+cookie",persistence_name:"",loaded:uS,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:Yi&&bn(Yi==null?void 0:Yi.search)&&Yi.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(q==null||(e=q.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var i="Bad HTTP status: "+n.statusCode+" "+n.text;Te.error(i)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:cS},error_tracking:{},_onCapture:uS}},sP=t=>{var e={};Se(t.process_person)||(e.person_profiles=t.process_person),Se(t.xhr_headers)||(e.request_headers=t.xhr_headers),Se(t.cookie_name)||(e.persistence_name=t.cookie_name),Se(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),Se(t.store_google)||(e.save_campaign_params=t.store_google),Se(t.verbose)||(e.debug=t.verbose);var n=kn({},e,t);return sn(t.property_blacklist)&&(Se(t.property_denylist)?n.property_denylist=t.property_blacklist:sn(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Te.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let GH=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Te.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},U5=class V5{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new GH,this.gs=!1,this.version=Bo.LIB_VERSION,this._s=new $5,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=rP(),this.SentryIntegration=KV,this.sentryIntegration=e=>function(n,i){var r=m5(n,i);return{name:p5,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new kH(this),this.toolbar=new qV(this),this.scrollManager=new OH(this),this.pageViewManager=new tH(this),this.surveys=new AH(this),this.experiments=new UH(this),this.exceptions=new oH(this),this.rateLimiter=new NH(this),this.requestRouter=new FH(this),this.consent=new iV(this),this.externalIntegrations=new WH(this),this.people={set:(e,n,i)=>{var r=bn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=bn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>Te.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,i){if(i&&i!==Ru){var r,s=(r=Mh[i])!==null&&r!==void 0?r:new V5;return s._init(e,n,i),Mh[i]=s,Mh[Ru][i]=s,s}return this._init(e,n,i)}_init(e,n,i){var r,s;if(n===void 0&&(n={}),Se(e)||L1(e))return Te.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Te.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(kn({},rP(n.defaults),sP(n),{name:i,token:e})),this.config.on_xhr_error&&Te.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:Jo.GZipJS,this.persistence=new Lx(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Lx(Ae({},this.config,{persistence:"sessionStorage"}));var o=Ae({},this.persistence.props),a=Ae({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new MH(y=>this.Es(y),this.config.request_queue_config),this.Is=new TH(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new jH(this),this.sessionPropsManager=new DH(this,this.sessionManager,this.persistence)),new JV(this).startIfEnabledOrStop(),this.siteApps=new BH(this),(r=this.siteApps)==null||r.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new WV(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new XU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new eH(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new ZV(this),this.exceptionObserver=new oV(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new QO(this,sV),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new xV(this),this.historyAutocapture.startIfEnabled(),Bo.DEBUG=Bo.DEBUG||this.config.debug,Bo.DEBUG&&Te.info("Starting in debug mode",{this:this,config:n,thisC:Ae({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,c,u=this.config.get_device_id(Za()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?u:n.bootstrap.distinctID;this.persistence.set_property(Io,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var f,p,g=Object.keys(((f=n.bootstrap)==null?void 0:f.featureFlags)||{}).filter(y=>{var b;return!((b=n.bootstrap)==null||(b=b.featureFlags)==null||!b[y])}).reduce((y,b)=>{var w;return y[b]=((w=n.bootstrap)==null||(w=w.featureFlags)==null?void 0:w[b])||!1,y},{}),m=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(y=>g[y]).reduce((y,b)=>{var w,k;return(w=n.bootstrap)!=null&&(w=w.featureFlagPayloads)!=null&&w[b]&&(y[b]=(k=n.bootstrap)==null||(k=k.featureFlagPayloads)==null?void 0:k[b]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Gm,$device_id:null},"");else if(!this.get_distinct_id()){var v=this.config.get_device_id(Za());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(Io,"anonymous")}return dn(q,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?GV(this,()=>this.Ts()):this.Ts(),Jr(this.config._onCapture)&&this.config._onCapture!==uS&&(Te.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this.config.ip&&Te.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,i,r,s,o,a,l,c;if(!Me||!Me.body)return Te.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=mt(e.supportedCompression,Jo.GZipJS)?Jo.GZipJS:mt(e.supportedCompression,Jo.Base64)?Jo.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(i=this.siteApps)==null||i.onRemoteConfig(e),(r=this.sessionRecording)==null||r.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Te.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new PH(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||dl(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(z5?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=mv(e.url,{ip:this.config.ip?1:0}),e.headers=Ae({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var i,r,s,o=Ae({},n);o.timeout=o.timeout||6e4,o.url=mv(o.url,{_:new Date().getTime().toString(),ver:Bo.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"fetch",l=(r=(s=LO(Ph,c=>c.transport===a))==null?void 0:s.method)!==null&&r!==void 0?r:Ph[0].method;if(!l)throw new Error("No available transport method");l(o)})(Ae({},e,{callback:n=>{var i,r;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((i=(r=this.config).on_request_error)==null||i.call(r,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,i=[],r=[],s=[];dl(e,a=>{a&&(n=a[0],sn(n)?s.push(a):Jr(a)?a.call(this):sn(a)&&n==="alias"?i.push(a):sn(a)&&n.indexOf("capture")!==-1&&Jr(this[n])?s.push(a):r.push(a))});var o=function(a,l){dl(a,function(c){if(sn(c[0])){var u=l;jt(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(i,this),o(r,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!Se(e)&&bn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!bn(n==null?void 0:n.$current_url)&&(Te.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l=Za(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(c.$set=i==null?void 0:i.$set);var u,d,f=this.Os(i==null?void 0:i.$set_once);if(f&&(c.$set_once=f),(c=TU(c,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,Se(i==null?void 0:i.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o),e===Bx.DISMISSED||e===Bx.SENT){var p=n==null?void 0:n[QN.SURVEY_ID],g=n==null?void 0:n[QN.SURVEY_ITERATION];localStorage.setItem((d=""+lS+(u={id:p,current_iteration:g}).id,u.current_iteration&&u.current_iteration>0&&(d=""+lS+u.id+"_"+u.current_iteration),d),"true"),c.$set=Ae({},c.$set,{[CH({id:p,current_iteration:g},e===Bx.SENT?"responded":"dismissed")]:!0})}var m=Ae({},c.properties.$set,c.$set);if($u(m)||this.setPersonPropertiesForFlags(m),!Rt(this.config.before_send)){var v=this.As(c);if(!v)return;c=v}this._s.emit("eventCaptured",c);var y={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this.Es(y):this.xs.enqueue(y),c}Te.critical("This capture call is ignored due to client rate limiting.")}}else Te.error("No event name provided to posthog.capture")}else Te.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,i,r,s){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=Ae({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=Ae({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!bn(a.distinct_id)&&!mi(a.distinct_id)||L1(a.distinct_id))&&Te.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=xH(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,i.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&kn(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&kn(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.Is)==null?void 0:p.length}catch(y){a.$sdk_debug_error_capturing_properties=String(y)}if(this.requestRouter.region===ch.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,r),a=kn(a,c),e==="$pageview"&&Me&&(a.title=Me.title),!Se(o)){var g=i.getTime()-o;a.$duration=parseFloat((g/1e3).toFixed(3))}Xi&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=kn({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),sn(this.config.property_denylist)?jt(this.config.property_denylist,function(y){delete a[y]}):Te.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var m=this.config.sanitize_properties;m&&(Te.error("sanitize_properties is deprecated. Use before_send instead"),a=m(a,e));var v=this.Ds();return a.$process_person_profile=v,v&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var i=this.persistence.get_initial_props(),r=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=kn({},i,r||{},e||{}),o=this.config.sanitize_properties;return o&&(Te.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,$u(s)?void 0:s}register(e,n){var i;(i=this.persistence)==null||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)==null||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,i){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,i)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)==null?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,i){if(!this.__loaded||!this.persistence)return Te.uninitializedWarning("posthog.identify");if(mi(e)&&(e=e.toString(),Te.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Te.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==Gm){if(this.Ls("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(nh)&&(this.unregister(nh),this.register({distinct_id:e}));var o=(this.persistence.get_property(Io)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(Io,"identified"),this.setPersonPropertiesForFlags(Ae({},i||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.Ss=HN(e,n,i),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(ov))}}else Te.critical('The string "'+Gm+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Te.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var i=HN(this.get_distinct_id(),e,n);this.Ss!==i?(this.setPersonPropertiesForFlags(Ae({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=i):Te.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,i){if(e&&n){if(this.Ls("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Ae({},r,{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else Te.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s;if(Te.info("reset"),!this.__loaded)return Te.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(i=this.sessionPersistence)==null||i.clear(),this.surveys.reset(),(r=this.persistence)==null||r.set_property(Io,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Gm,$device_id:null},"");else{var a=this.config.get_device_id(Za());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;r+="?t="+Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0)}return r}alias(e,n){return e===this.get_property(BO)?(Te.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(Se(n)&&(n=this.get_distinct_id()),e!==n?(this.js(nh,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Te.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o,a=Ae({},this.config);yn(e)&&(kn(this.config,sP(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Lx(Ae({},this.config,{persistence:"sessionStorage"})),In.O()&&In.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Bo.DEBUG=!0,Te.info("set_config",{config:e,oldConfig:a,newConfig:Ae({},this.config)})),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(r=this.autocapture)==null||r.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)==null||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var i=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(Ae({},bV((r=>r instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:i}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:Ru;return n!==Ru&&(n=Ru+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(Io))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(Io))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&$u(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[nh])&&((n=this.persistence)==null||(n=n.props)==null||!n[lv]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Te.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(lv,!0),!0)}Ps(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((i=this.persistence)==null||i.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((r=this.sessionPersistence)==null||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(Se(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return xr?F5(xr,this.config.custom_blocked_useragents):void 0}Cs(){Me&&(Me.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:Me.title},{send_instantly:!0}),this.ys&&(Me.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),dn(Me,"visibilitychange",this.ys)))}debug(e){e===!1?(q==null||q.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(q==null||q.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,i,r,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Te.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(i="advanced_disable_decide",r=!1,s=Te,o=(n="advanced_disable_flags")in(e=l)&&!Se(e[n]),a=i in e&&!Se(e[i]),o?e[n]:a?(s&&s.warn("Config field '"+i+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[i]):r)}As(e){if(Rt(this.config.before_send))return e;var n=sn(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),Rt(i)){var s="Event '"+e.event+"' was rejected in beforeSend function";return PU(e.event)?Te.warn(s+". This can cause unexpected behavior."):Te.info(s),null}i.properties&&!$u(i.properties)||Te.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(i)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=RU(t.prototype[e[n]])})(U5,["identify"]);var oP,Va=(oP=Mh[Ru]=new U5,function(){function t(){t.done||(t.done=!0,z5=!1,jt(Mh,function(e){e._dom_loaded()}))}Me!=null&&Me.addEventListener?Me.readyState==="complete"?t():dn(Me,"DOMContentLoaded",t,{capture:!1}):q&&Te.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),oP),H5=x.createContext({client:Va});function W5(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!r.includes(a)||!W5(t[a],e[a],n))return!1}return!0}function KH(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=x.useRef(null),o=x.useMemo(function(){return n?(i&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),r&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(i||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),Va)},[n,i,JSON.stringify(r)]);return x.useEffect(function(){if(!n){var a=s.current;a?(i!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),r&&!W5(r,a.options)&&Va.set_config(r),s.current={apiKey:i,options:r??{}}):(Va.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),Va.init(i,r),s.current={apiKey:i,options:r??{}})}},[n,i,JSON.stringify(r)]),Yt.createElement(H5.Provider,{value:{client:o}},e)}var dS=function(t,e){return dS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},dS(t,e)};function XH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dS(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $x=function(t){return typeof t=="function"},qH={componentStack:null,error:null},YH={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){XH(e,t);function e(n){var i=t.call(this,n)||this;return i.state=qH,i}return e.prototype.componentDidCatch=function(n,i){var r=i.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:r});var o;$x(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,i=n.children,r=n.fallback,s=this.state;if(s.componentStack==null)return $x(i)?i():i;var o=$x(r)?Yt.createElement(r,{error:s.error,componentStack:s.componentStack}):r;return Yt.isValidElement(o)?o:(console.warn(YH.INVALID_FALLBACK),Yt.createElement(Yt.Fragment,null))},e.contextType=H5,e})(Yt.Component);var G5={exports:{}},Or={},K5={exports:{}},X5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,U){var re=W.length;W.push(U);e:for(;0<re;){var ve=re-1>>>1,Z=W[ve];if(0<r(Z,U))W[ve]=U,W[re]=Z,re=ve;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var U=W[0],re=W.pop();if(re!==U){W[0]=re;e:for(var ve=0,Z=W.length,oe=Z>>>1;ve<oe;){var z=2*(ve+1)-1,B=W[z],H=z+1,S=W[H];if(0>r(B,re))H<Z&&0>r(S,B)?(W[ve]=S,W[H]=re,ve=H):(W[ve]=B,W[z]=re,ve=z);else if(H<Z&&0>r(S,re))W[ve]=S,W[H]=re,ve=H;else break e}}return U}function r(W,U){var re=W.sortIndex-U.sortIndex;return re!==0?re:W.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(W){for(var U=n(c);U!==null;){if(U.callback===null)i(c);else if(U.startTime<=W)i(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function k(W){if(m=!1,w(W),!g)if(n(l)!==null)g=!0,J(_);else{var U=n(c);U!==null&&Q(k,U.startTime-W)}}function _(W,U){g=!1,m&&(m=!1,y(P),P=-1),p=!0;var re=f;try{for(w(U),d=n(l);d!==null&&(!(d.expirationTime>U)||W&&!L());){var ve=d.callback;if(typeof ve=="function"){d.callback=null,f=d.priorityLevel;var Z=ve(d.expirationTime<=U);U=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),w(U)}else i(l);d=n(l)}if(d!==null)var oe=!0;else{var z=n(c);z!==null&&Q(k,z.startTime-U),oe=!1}return oe}finally{d=null,f=re,p=!1}}var E=!1,C=null,P=-1,T=5,I=-1;function L(){return!(t.unstable_now()-I<T)}function j(){if(C!==null){var W=t.unstable_now();I=W;var U=!0;try{U=C(!0,W)}finally{U?X():(E=!1,C=null)}}else E=!1}var X;if(typeof b=="function")X=function(){b(j)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,K=$.port2;$.port1.onmessage=j,X=function(){K.postMessage(null)}}else X=function(){v(j,0)};function J(W){C=W,E||(E=!0,X())}function Q(W,U){P=v(function(){W(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,J(_))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var re=f;f=U;try{return W()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,U){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var re=f;f=W;try{return U()}finally{f=re}},t.unstable_scheduleCallback=function(W,U,re){var ve=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ve+re:ve):re=ve,W){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=re+Z,W={id:u++,callback:U,priorityLevel:W,startTime:re,expirationTime:Z,sortIndex:-1},re>ve?(W.sortIndex=re,e(c,W),n(l)===null&&W===n(c)&&(m?(y(P),P=-1):m=!0,Q(k,re-ve))):(W.sortIndex=Z,e(l,W),g||p||(g=!0,J(_))),W},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(W){var U=f;return function(){var re=f;f=U;try{return W.apply(this,arguments)}finally{f=re}}}})(X5);K5.exports=X5;var JH=K5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZH=x,Pr=JH;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q5=new Set,op={};function cu(t,e){Bd(t,e),Bd(t+"Capture",e)}function Bd(t,e){for(op[t]=e,t=0;t<e.length;t++)q5.add(e[t])}var oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fS=Object.prototype.hasOwnProperty,QH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aP={},lP={};function eW(t){return fS.call(lP,t)?!0:fS.call(aP,t)?!1:QH.test(t)?lP[t]=!0:(aP[t]=!0,!1)}function tW(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nW(t,e,n,i){if(e===null||typeof e>"u"||tW(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Di(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ai[t]=new Di(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ai[e]=new Di(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ai[t]=new Di(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ai[t]=new Di(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ai[t]=new Di(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ai[t]=new Di(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ai[t]=new Di(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ai[t]=new Di(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ai[t]=new Di(t,5,!1,t.toLowerCase(),null,!1,!1)});var D_=/[\-:]([a-z])/g;function j_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(D_,j_);ai[e]=new Di(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(D_,j_);ai[e]=new Di(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(D_,j_);ai[e]=new Di(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ai[t]=new Di(t,1,!1,t.toLowerCase(),null,!1,!1)});ai.xlinkHref=new Di("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ai[t]=new Di(t,1,!1,t.toLowerCase(),null,!0,!0)});function L_(t,e,n,i){var r=ai.hasOwnProperty(e)?ai[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nW(e,n,r,i)&&(n=null),i||r===null?eW(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ga=ZH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ng=Symbol.for("react.element"),Uu=Symbol.for("react.portal"),Vu=Symbol.for("react.fragment"),B_=Symbol.for("react.strict_mode"),hS=Symbol.for("react.profiler"),Y5=Symbol.for("react.provider"),J5=Symbol.for("react.context"),$_=Symbol.for("react.forward_ref"),pS=Symbol.for("react.suspense"),mS=Symbol.for("react.suspense_list"),F_=Symbol.for("react.memo"),Ia=Symbol.for("react.lazy"),Z5=Symbol.for("react.offscreen"),cP=Symbol.iterator;function Of(t){return t===null||typeof t!="object"?null:(t=cP&&t[cP]||t["@@iterator"],typeof t=="function"?t:null)}var mn=Object.assign,Fx;function uh(t){if(Fx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fx=e&&e[1]||""}return`
`+Fx+t}var zx=!1;function Ux(t,e){if(!t||zx)return"";zx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{zx=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?uh(t):""}function iW(t){switch(t.tag){case 5:return uh(t.type);case 16:return uh("Lazy");case 13:return uh("Suspense");case 19:return uh("SuspenseList");case 0:case 2:case 15:return t=Ux(t.type,!1),t;case 11:return t=Ux(t.type.render,!1),t;case 1:return t=Ux(t.type,!0),t;default:return""}}function gS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vu:return"Fragment";case Uu:return"Portal";case hS:return"Profiler";case B_:return"StrictMode";case pS:return"Suspense";case mS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case J5:return(t.displayName||"Context")+".Consumer";case Y5:return(t._context.displayName||"Context")+".Provider";case $_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case F_:return e=t.displayName||null,e!==null?e:gS(t.type)||"Memo";case Ia:e=t._payload,t=t._init;try{return gS(t(e))}catch{}}return null}function rW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gS(e);case 8:return e===B_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function El(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Q5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sW(t){var e=Q5(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ig(t){t._valueTracker||(t._valueTracker=sW(t))}function eI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Q5(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function vv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vS(t,e){var n=e.checked;return mn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function uP(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=El(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tI(t,e){e=e.checked,e!=null&&L_(t,"checked",e,!1)}function yS(t,e){tI(t,e);var n=El(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bS(t,e.type,n):e.hasOwnProperty("defaultValue")&&bS(t,e.type,El(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bS(t,e,n){(e!=="number"||vv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var dh=Array.isArray;function cd(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+El(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function xS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return mn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(dh(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:El(n)}}function nI(t,e){var n=El(e.value),i=El(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function hP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rg,rI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rg=rg||document.createElement("div"),rg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ap(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Rh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oW=["Webkit","ms","Moz","O"];Object.keys(Rh).forEach(function(t){oW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Rh[e]=Rh[t]})});function sI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Rh.hasOwnProperty(t)&&Rh[t]?(""+e).trim():e+"px"}function oI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=sI(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var aW=mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function SS(t,e){if(e){if(aW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function kS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _S=null;function z_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var CS=null,ud=null,dd=null;function pP(t){if(t=mm(t)){if(typeof CS!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=rb(e),CS(t.stateNode,t.type,e))}}function aI(t){ud?dd?dd.push(t):dd=[t]:ud=t}function lI(){if(ud){var t=ud,e=dd;if(dd=ud=null,pP(t),e)for(t=0;t<e.length;t++)pP(e[t])}}function cI(t,e){return t(e)}function uI(){}var Vx=!1;function dI(t,e,n){if(Vx)return t(e,n);Vx=!0;try{return cI(t,e,n)}finally{Vx=!1,(ud!==null||dd!==null)&&(uI(),lI())}}function lp(t,e){var n=t.stateNode;if(n===null)return null;var i=rb(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var ES=!1;if(oa)try{var If={};Object.defineProperty(If,"passive",{get:function(){ES=!0}}),window.addEventListener("test",If,If),window.removeEventListener("test",If,If)}catch{ES=!1}function lW(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Th=!1,yv=null,bv=!1,AS=null,cW={onError:function(t){Th=!0,yv=t}};function uW(t,e,n,i,r,s,o,a,l){Th=!1,yv=null,lW.apply(cW,arguments)}function dW(t,e,n,i,r,s,o,a,l){if(uW.apply(this,arguments),Th){if(Th){var c=yv;Th=!1,yv=null}else throw Error(ce(198));bv||(bv=!0,AS=c)}}function uu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mP(t){if(uu(t)!==t)throw Error(ce(188))}function fW(t){var e=t.alternate;if(!e){if(e=uu(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return mP(r),t;if(s===i)return mP(r),e;s=s.sibling}throw Error(ce(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(ce(189))}}if(n.alternate!==i)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function hI(t){return t=fW(t),t!==null?pI(t):null}function pI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pI(t);if(e!==null)return e;t=t.sibling}return null}var mI=Pr.unstable_scheduleCallback,gP=Pr.unstable_cancelCallback,hW=Pr.unstable_shouldYield,pW=Pr.unstable_requestPaint,_n=Pr.unstable_now,mW=Pr.unstable_getCurrentPriorityLevel,U_=Pr.unstable_ImmediatePriority,gI=Pr.unstable_UserBlockingPriority,xv=Pr.unstable_NormalPriority,gW=Pr.unstable_LowPriority,vI=Pr.unstable_IdlePriority,eb=null,yo=null;function vW(t){if(yo&&typeof yo.onCommitFiberRoot=="function")try{yo.onCommitFiberRoot(eb,t,void 0,(t.current.flags&128)===128)}catch{}}var Ns=Math.clz32?Math.clz32:xW,yW=Math.log,bW=Math.LN2;function xW(t){return t>>>=0,t===0?32:31-(yW(t)/bW|0)|0}var sg=64,og=4194304;function fh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=fh(a):(s&=o,s!==0&&(i=fh(s)))}else o=n&~r,o!==0?i=fh(o):s!==0&&(i=fh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ns(e),r=1<<n,i|=t[n],e&=~r;return i}function wW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SW(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ns(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=wW(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function NS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yI(){var t=sg;return sg<<=1,!(sg&4194240)&&(sg=64),t}function Hx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ns(e),t[e]=n}function kW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ns(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function V_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ns(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Dt=0;function bI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xI,H_,wI,SI,kI,PS=!1,ag=[],hl=null,pl=null,ml=null,cp=new Map,up=new Map,Ha=[],_W="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vP(t,e){switch(t){case"focusin":case"focusout":hl=null;break;case"dragenter":case"dragleave":pl=null;break;case"mouseover":case"mouseout":ml=null;break;case"pointerover":case"pointerout":cp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":up.delete(e.pointerId)}}function Df(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=mm(e),e!==null&&H_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function CW(t,e,n,i,r){switch(e){case"focusin":return hl=Df(hl,t,e,n,i,r),!0;case"dragenter":return pl=Df(pl,t,e,n,i,r),!0;case"mouseover":return ml=Df(ml,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return cp.set(s,Df(cp.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,up.set(s,Df(up.get(s)||null,t,e,n,i,r)),!0}return!1}function _I(t){var e=Ac(t.target);if(e!==null){var n=uu(e);if(n!==null){if(e=n.tag,e===13){if(e=fI(n),e!==null){t.blockedOn=e,kI(t.priority,function(){wI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function k0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=MS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);_S=i,n.target.dispatchEvent(i),_S=null}else return e=mm(n),e!==null&&H_(e),t.blockedOn=n,!1;e.shift()}return!0}function yP(t,e,n){k0(t)&&n.delete(e)}function EW(){PS=!1,hl!==null&&k0(hl)&&(hl=null),pl!==null&&k0(pl)&&(pl=null),ml!==null&&k0(ml)&&(ml=null),cp.forEach(yP),up.forEach(yP)}function jf(t,e){t.blockedOn===e&&(t.blockedOn=null,PS||(PS=!0,Pr.unstable_scheduleCallback(Pr.unstable_NormalPriority,EW)))}function dp(t){function e(r){return jf(r,t)}if(0<ag.length){jf(ag[0],t);for(var n=1;n<ag.length;n++){var i=ag[n];i.blockedOn===t&&(i.blockedOn=null)}}for(hl!==null&&jf(hl,t),pl!==null&&jf(pl,t),ml!==null&&jf(ml,t),cp.forEach(e),up.forEach(e),n=0;n<Ha.length;n++)i=Ha[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ha.length&&(n=Ha[0],n.blockedOn===null);)_I(n),n.blockedOn===null&&Ha.shift()}var fd=ga.ReactCurrentBatchConfig,Sv=!0;function AW(t,e,n,i){var r=Dt,s=fd.transition;fd.transition=null;try{Dt=1,W_(t,e,n,i)}finally{Dt=r,fd.transition=s}}function NW(t,e,n,i){var r=Dt,s=fd.transition;fd.transition=null;try{Dt=4,W_(t,e,n,i)}finally{Dt=r,fd.transition=s}}function W_(t,e,n,i){if(Sv){var r=MS(t,e,n,i);if(r===null)ew(t,e,i,kv,n),vP(t,i);else if(CW(r,t,e,n,i))i.stopPropagation();else if(vP(t,i),e&4&&-1<_W.indexOf(t)){for(;r!==null;){var s=mm(r);if(s!==null&&xI(s),s=MS(t,e,n,i),s===null&&ew(t,e,i,kv,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else ew(t,e,i,null,n)}}var kv=null;function MS(t,e,n,i){if(kv=null,t=z_(i),t=Ac(t),t!==null)if(e=uu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kv=t,null}function CI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mW()){case U_:return 1;case gI:return 4;case xv:case gW:return 16;case vI:return 536870912;default:return 16}default:return 16}}var Qa=null,G_=null,_0=null;function EI(){if(_0)return _0;var t,e=G_,n=e.length,i,r="value"in Qa?Qa.value:Qa.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return _0=r.slice(t,1<i?1-i:void 0)}function C0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lg(){return!0}function bP(){return!1}function Ir(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lg:bP,this.isPropagationStopped=bP,this}return mn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lg)},persist:function(){},isPersistent:lg}),e}var mf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},K_=Ir(mf),pm=mn({},mf,{view:0,detail:0}),PW=Ir(pm),Wx,Gx,Lf,tb=mn({},pm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:X_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lf&&(Lf&&t.type==="mousemove"?(Wx=t.screenX-Lf.screenX,Gx=t.screenY-Lf.screenY):Gx=Wx=0,Lf=t),Wx)},movementY:function(t){return"movementY"in t?t.movementY:Gx}}),xP=Ir(tb),MW=mn({},tb,{dataTransfer:0}),RW=Ir(MW),TW=mn({},pm,{relatedTarget:0}),Kx=Ir(TW),OW=mn({},mf,{animationName:0,elapsedTime:0,pseudoElement:0}),IW=Ir(OW),DW=mn({},mf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jW=Ir(DW),LW=mn({},mf,{data:0}),wP=Ir(LW),BW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$W={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=FW[t])?!!e[t]:!1}function X_(){return zW}var UW=mn({},pm,{key:function(t){if(t.key){var e=BW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=C0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$W[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:X_,charCode:function(t){return t.type==="keypress"?C0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?C0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VW=Ir(UW),HW=mn({},tb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SP=Ir(HW),WW=mn({},pm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:X_}),GW=Ir(WW),KW=mn({},mf,{propertyName:0,elapsedTime:0,pseudoElement:0}),XW=Ir(KW),qW=mn({},tb,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YW=Ir(qW),JW=[9,13,27,32],q_=oa&&"CompositionEvent"in window,Oh=null;oa&&"documentMode"in document&&(Oh=document.documentMode);var ZW=oa&&"TextEvent"in window&&!Oh,AI=oa&&(!q_||Oh&&8<Oh&&11>=Oh),kP=" ",_P=!1;function NI(t,e){switch(t){case"keyup":return JW.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hu=!1;function QW(t,e){switch(t){case"compositionend":return PI(e);case"keypress":return e.which!==32?null:(_P=!0,kP);case"textInput":return t=e.data,t===kP&&_P?null:t;default:return null}}function eG(t,e){if(Hu)return t==="compositionend"||!q_&&NI(t,e)?(t=EI(),_0=G_=Qa=null,Hu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AI&&e.locale!=="ko"?null:e.data;default:return null}}var tG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tG[t.type]:e==="textarea"}function MI(t,e,n,i){aI(i),e=_v(e,"onChange"),0<e.length&&(n=new K_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ih=null,fp=null;function nG(t){zI(t,0)}function nb(t){var e=Ku(t);if(eI(e))return t}function iG(t,e){if(t==="change")return e}var RI=!1;if(oa){var Xx;if(oa){var qx="oninput"in document;if(!qx){var EP=document.createElement("div");EP.setAttribute("oninput","return;"),qx=typeof EP.oninput=="function"}Xx=qx}else Xx=!1;RI=Xx&&(!document.documentMode||9<document.documentMode)}function AP(){Ih&&(Ih.detachEvent("onpropertychange",TI),fp=Ih=null)}function TI(t){if(t.propertyName==="value"&&nb(fp)){var e=[];MI(e,fp,t,z_(t)),dI(nG,e)}}function rG(t,e,n){t==="focusin"?(AP(),Ih=e,fp=n,Ih.attachEvent("onpropertychange",TI)):t==="focusout"&&AP()}function sG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nb(fp)}function oG(t,e){if(t==="click")return nb(e)}function aG(t,e){if(t==="input"||t==="change")return nb(e)}function lG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ms=typeof Object.is=="function"?Object.is:lG;function hp(t,e){if(Ms(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!fS.call(e,r)||!Ms(t[r],e[r]))return!1}return!0}function NP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function PP(t,e){var n=NP(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=NP(n)}}function OI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function II(){for(var t=window,e=vv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vv(t.document)}return e}function Y_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cG(t){var e=II(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&OI(n.ownerDocument.documentElement,n)){if(i!==null&&Y_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=PP(n,s);var o=PP(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uG=oa&&"documentMode"in document&&11>=document.documentMode,Wu=null,RS=null,Dh=null,TS=!1;function MP(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;TS||Wu==null||Wu!==vv(i)||(i=Wu,"selectionStart"in i&&Y_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Dh&&hp(Dh,i)||(Dh=i,i=_v(RS,"onSelect"),0<i.length&&(e=new K_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Wu)))}function cg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gu={animationend:cg("Animation","AnimationEnd"),animationiteration:cg("Animation","AnimationIteration"),animationstart:cg("Animation","AnimationStart"),transitionend:cg("Transition","TransitionEnd")},Yx={},DI={};oa&&(DI=document.createElement("div").style,"AnimationEvent"in window||(delete Gu.animationend.animation,delete Gu.animationiteration.animation,delete Gu.animationstart.animation),"TransitionEvent"in window||delete Gu.transitionend.transition);function ib(t){if(Yx[t])return Yx[t];if(!Gu[t])return t;var e=Gu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in DI)return Yx[t]=e[n];return t}var jI=ib("animationend"),LI=ib("animationiteration"),BI=ib("animationstart"),$I=ib("transitionend"),FI=new Map,RP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hl(t,e){FI.set(t,e),cu(e,[t])}for(var Jx=0;Jx<RP.length;Jx++){var Zx=RP[Jx],dG=Zx.toLowerCase(),fG=Zx[0].toUpperCase()+Zx.slice(1);Hl(dG,"on"+fG)}Hl(jI,"onAnimationEnd");Hl(LI,"onAnimationIteration");Hl(BI,"onAnimationStart");Hl("dblclick","onDoubleClick");Hl("focusin","onFocus");Hl("focusout","onBlur");Hl($I,"onTransitionEnd");Bd("onMouseEnter",["mouseout","mouseover"]);Bd("onMouseLeave",["mouseout","mouseover"]);Bd("onPointerEnter",["pointerout","pointerover"]);Bd("onPointerLeave",["pointerout","pointerover"]);cu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cu("onBeforeInput",["compositionend","keypress","textInput","paste"]);cu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hG=new Set("cancel close invalid load scroll toggle".split(" ").concat(hh));function TP(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,dW(i,e,void 0,t),t.currentTarget=null}function zI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;TP(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;TP(r,a,c),s=l}}}if(bv)throw t=AS,bv=!1,AS=null,t}function Kt(t,e){var n=e[LS];n===void 0&&(n=e[LS]=new Set);var i=t+"__bubble";n.has(i)||(UI(e,t,2,!1),n.add(i))}function Qx(t,e,n){var i=0;e&&(i|=4),UI(n,t,i,e)}var ug="_reactListening"+Math.random().toString(36).slice(2);function pp(t){if(!t[ug]){t[ug]=!0,q5.forEach(function(n){n!=="selectionchange"&&(hG.has(n)||Qx(n,!1,t),Qx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ug]||(e[ug]=!0,Qx("selectionchange",!1,e))}}function UI(t,e,n,i){switch(CI(e)){case 1:var r=AW;break;case 4:r=NW;break;default:r=W_}n=r.bind(null,e,n,t),r=void 0,!ES||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ew(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ac(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}dI(function(){var c=s,u=z_(n),d=[];e:{var f=FI.get(t);if(f!==void 0){var p=K_,g=t;switch(t){case"keypress":if(C0(n)===0)break e;case"keydown":case"keyup":p=VW;break;case"focusin":g="focus",p=Kx;break;case"focusout":g="blur",p=Kx;break;case"beforeblur":case"afterblur":p=Kx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=xP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=RW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=GW;break;case jI:case LI:case BI:p=IW;break;case $I:p=XW;break;case"scroll":p=PW;break;case"wheel":p=YW;break;case"copy":case"cut":case"paste":p=jW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=SP}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var b=c,w;b!==null;){w=b;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,y!==null&&(k=lp(b,y),k!=null&&m.push(mp(b,k,w)))),v)break;b=b.return}0<m.length&&(f=new p(f,g,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==_S&&(g=n.relatedTarget||n.fromElement)&&(Ac(g)||g[aa]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Ac(g):null,g!==null&&(v=uu(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=xP,k="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(m=SP,k="onPointerLeave",y="onPointerEnter",b="pointer"),v=p==null?f:Ku(p),w=g==null?f:Ku(g),f=new m(k,b+"leave",p,n,u),f.target=v,f.relatedTarget=w,k=null,Ac(u)===c&&(m=new m(y,b+"enter",g,n,u),m.target=w,m.relatedTarget=v,k=m),v=k,p&&g)t:{for(m=p,y=g,b=0,w=m;w;w=vu(w))b++;for(w=0,k=y;k;k=vu(k))w++;for(;0<b-w;)m=vu(m),b--;for(;0<w-b;)y=vu(y),w--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=vu(m),y=vu(y)}m=null}else m=null;p!==null&&OP(d,f,p,m,!1),g!==null&&v!==null&&OP(d,v,g,m,!0)}}e:{if(f=c?Ku(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=iG;else if(CP(f))if(RI)_=aG;else{_=sG;var E=rG}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=oG);if(_&&(_=_(t,c))){MI(d,_,n,u);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&bS(f,"number",f.value)}switch(E=c?Ku(c):window,t){case"focusin":(CP(E)||E.contentEditable==="true")&&(Wu=E,RS=c,Dh=null);break;case"focusout":Dh=RS=Wu=null;break;case"mousedown":TS=!0;break;case"contextmenu":case"mouseup":case"dragend":TS=!1,MP(d,n,u);break;case"selectionchange":if(uG)break;case"keydown":case"keyup":MP(d,n,u)}var C;if(q_)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Hu?NI(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(AI&&n.locale!=="ko"&&(Hu||P!=="onCompositionStart"?P==="onCompositionEnd"&&Hu&&(C=EI()):(Qa=u,G_="value"in Qa?Qa.value:Qa.textContent,Hu=!0)),E=_v(c,P),0<E.length&&(P=new wP(P,t,null,n,u),d.push({event:P,listeners:E}),C?P.data=C:(C=PI(n),C!==null&&(P.data=C)))),(C=ZW?QW(t,n):eG(t,n))&&(c=_v(c,"onBeforeInput"),0<c.length&&(u=new wP("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}zI(d,e)})}function mp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _v(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=lp(t,n),s!=null&&i.unshift(mp(t,s,r)),s=lp(t,e),s!=null&&i.push(mp(t,s,r))),t=t.return}return i}function vu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function OP(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=lp(n,s),l!=null&&o.unshift(mp(n,l,a))):r||(l=lp(n,s),l!=null&&o.push(mp(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pG=/\r\n?/g,mG=/\u0000|\uFFFD/g;function IP(t){return(typeof t=="string"?t:""+t).replace(pG,`
`).replace(mG,"")}function dg(t,e,n){if(e=IP(e),IP(t)!==e&&n)throw Error(ce(425))}function Cv(){}var OS=null,IS=null;function DS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jS=typeof setTimeout=="function"?setTimeout:void 0,gG=typeof clearTimeout=="function"?clearTimeout:void 0,DP=typeof Promise=="function"?Promise:void 0,vG=typeof queueMicrotask=="function"?queueMicrotask:typeof DP<"u"?function(t){return DP.resolve(null).then(t).catch(yG)}:jS;function yG(t){setTimeout(function(){throw t})}function tw(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),dp(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);dp(e)}function gl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gf=Math.random().toString(36).slice(2),io="__reactFiber$"+gf,gp="__reactProps$"+gf,aa="__reactContainer$"+gf,LS="__reactEvents$"+gf,bG="__reactListeners$"+gf,xG="__reactHandles$"+gf;function Ac(t){var e=t[io];if(e)return e;for(var n=t.parentNode;n;){if(e=n[aa]||n[io]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jP(t);t!==null;){if(n=t[io])return n;t=jP(t)}return e}t=n,n=t.parentNode}return null}function mm(t){return t=t[io]||t[aa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ku(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function rb(t){return t[gp]||null}var BS=[],Xu=-1;function Wl(t){return{current:t}}function Zt(t){0>Xu||(t.current=BS[Xu],BS[Xu]=null,Xu--)}function Gt(t,e){Xu++,BS[Xu]=t.current,t.current=e}var Al={},bi=Wl(Al),sr=Wl(!1),Vc=Al;function $d(t,e){var n=t.type.contextTypes;if(!n)return Al;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function or(t){return t=t.childContextTypes,t!=null}function Ev(){Zt(sr),Zt(bi)}function LP(t,e,n){if(bi.current!==Al)throw Error(ce(168));Gt(bi,e),Gt(sr,n)}function VI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ce(108,rW(t)||"Unknown",r));return mn({},n,i)}function Av(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Al,Vc=bi.current,Gt(bi,t),Gt(sr,sr.current),!0}function BP(t,e,n){var i=t.stateNode;if(!i)throw Error(ce(169));n?(t=VI(t,e,Vc),i.__reactInternalMemoizedMergedChildContext=t,Zt(sr),Zt(bi),Gt(bi,t)):Zt(sr),Gt(sr,n)}var $o=null,sb=!1,nw=!1;function HI(t){$o===null?$o=[t]:$o.push(t)}function wG(t){sb=!0,HI(t)}function Gl(){if(!nw&&$o!==null){nw=!0;var t=0,e=Dt;try{var n=$o;for(Dt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}$o=null,sb=!1}catch(r){throw $o!==null&&($o=$o.slice(t+1)),mI(U_,Gl),r}finally{Dt=e,nw=!1}}return null}var qu=[],Yu=0,Nv=null,Pv=0,Vr=[],Hr=0,Hc=null,ta=1,na="";function vc(t,e){qu[Yu++]=Pv,qu[Yu++]=Nv,Nv=t,Pv=e}function WI(t,e,n){Vr[Hr++]=ta,Vr[Hr++]=na,Vr[Hr++]=Hc,Hc=t;var i=ta;t=na;var r=32-Ns(i)-1;i&=~(1<<r),n+=1;var s=32-Ns(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ta=1<<32-Ns(e)+r|n<<r|i,na=s+t}else ta=1<<s|n<<r|i,na=t}function J_(t){t.return!==null&&(vc(t,1),WI(t,1,0))}function Z_(t){for(;t===Nv;)Nv=qu[--Yu],qu[Yu]=null,Pv=qu[--Yu],qu[Yu]=null;for(;t===Hc;)Hc=Vr[--Hr],Vr[Hr]=null,na=Vr[--Hr],Vr[Hr]=null,ta=Vr[--Hr],Vr[Hr]=null}var Ar=null,Sr=null,on=!1,ws=null;function GI(t,e){var n=Xr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $P(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ar=t,Sr=gl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ar=t,Sr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hc!==null?{id:ta,overflow:na}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ar=t,Sr=null,!0):!1;default:return!1}}function $S(t){return(t.mode&1)!==0&&(t.flags&128)===0}function FS(t){if(on){var e=Sr;if(e){var n=e;if(!$P(t,e)){if($S(t))throw Error(ce(418));e=gl(n.nextSibling);var i=Ar;e&&$P(t,e)?GI(i,n):(t.flags=t.flags&-4097|2,on=!1,Ar=t)}}else{if($S(t))throw Error(ce(418));t.flags=t.flags&-4097|2,on=!1,Ar=t}}}function FP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ar=t}function fg(t){if(t!==Ar)return!1;if(!on)return FP(t),on=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!DS(t.type,t.memoizedProps)),e&&(e=Sr)){if($S(t))throw KI(),Error(ce(418));for(;e;)GI(t,e),e=gl(e.nextSibling)}if(FP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Sr=gl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Sr=null}}else Sr=Ar?gl(t.stateNode.nextSibling):null;return!0}function KI(){for(var t=Sr;t;)t=gl(t.nextSibling)}function Fd(){Sr=Ar=null,on=!1}function Q_(t){ws===null?ws=[t]:ws.push(t)}var SG=ga.ReactCurrentBatchConfig;function Bf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var i=n.stateNode}if(!i)throw Error(ce(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function hg(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zP(t){var e=t._init;return e(t._payload)}function XI(t){function e(y,b){if(t){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function i(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function r(y,b){return y=xl(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,k){return b===null||b.tag!==6?(b=cw(w,y.mode,k),b.return=y,b):(b=r(b,w),b.return=y,b)}function l(y,b,w,k){var _=w.type;return _===Vu?u(y,b,w.props.children,k,w.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ia&&zP(_)===b.type)?(k=r(b,w.props),k.ref=Bf(y,b,w),k.return=y,k):(k=T0(w.type,w.key,w.props,null,y.mode,k),k.ref=Bf(y,b,w),k.return=y,k)}function c(y,b,w,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=uw(w,y.mode,k),b.return=y,b):(b=r(b,w.children||[]),b.return=y,b)}function u(y,b,w,k,_){return b===null||b.tag!==7?(b=jc(w,y.mode,k,_),b.return=y,b):(b=r(b,w),b.return=y,b)}function d(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=cw(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ng:return w=T0(b.type,b.key,b.props,null,y.mode,w),w.ref=Bf(y,null,b),w.return=y,w;case Uu:return b=uw(b,y.mode,w),b.return=y,b;case Ia:var k=b._init;return d(y,k(b._payload),w)}if(dh(b)||Of(b))return b=jc(b,y.mode,w,null),b.return=y,b;hg(y,b)}return null}function f(y,b,w,k){var _=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:a(y,b,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ng:return w.key===_?l(y,b,w,k):null;case Uu:return w.key===_?c(y,b,w,k):null;case Ia:return _=w._init,f(y,b,_(w._payload),k)}if(dh(w)||Of(w))return _!==null?null:u(y,b,w,k,null);hg(y,w)}return null}function p(y,b,w,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(w)||null,a(b,y,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ng:return y=y.get(k.key===null?w:k.key)||null,l(b,y,k,_);case Uu:return y=y.get(k.key===null?w:k.key)||null,c(b,y,k,_);case Ia:var E=k._init;return p(y,b,w,E(k._payload),_)}if(dh(k)||Of(k))return y=y.get(w)||null,u(b,y,k,_,null);hg(b,k)}return null}function g(y,b,w,k){for(var _=null,E=null,C=b,P=b=0,T=null;C!==null&&P<w.length;P++){C.index>P?(T=C,C=null):T=C.sibling;var I=f(y,C,w[P],k);if(I===null){C===null&&(C=T);break}t&&C&&I.alternate===null&&e(y,C),b=s(I,b,P),E===null?_=I:E.sibling=I,E=I,C=T}if(P===w.length)return n(y,C),on&&vc(y,P),_;if(C===null){for(;P<w.length;P++)C=d(y,w[P],k),C!==null&&(b=s(C,b,P),E===null?_=C:E.sibling=C,E=C);return on&&vc(y,P),_}for(C=i(y,C);P<w.length;P++)T=p(C,y,P,w[P],k),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?P:T.key),b=s(T,b,P),E===null?_=T:E.sibling=T,E=T);return t&&C.forEach(function(L){return e(y,L)}),on&&vc(y,P),_}function m(y,b,w,k){var _=Of(w);if(typeof _!="function")throw Error(ce(150));if(w=_.call(w),w==null)throw Error(ce(151));for(var E=_=null,C=b,P=b=0,T=null,I=w.next();C!==null&&!I.done;P++,I=w.next()){C.index>P?(T=C,C=null):T=C.sibling;var L=f(y,C,I.value,k);if(L===null){C===null&&(C=T);break}t&&C&&L.alternate===null&&e(y,C),b=s(L,b,P),E===null?_=L:E.sibling=L,E=L,C=T}if(I.done)return n(y,C),on&&vc(y,P),_;if(C===null){for(;!I.done;P++,I=w.next())I=d(y,I.value,k),I!==null&&(b=s(I,b,P),E===null?_=I:E.sibling=I,E=I);return on&&vc(y,P),_}for(C=i(y,C);!I.done;P++,I=w.next())I=p(C,y,P,I.value,k),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?P:I.key),b=s(I,b,P),E===null?_=I:E.sibling=I,E=I);return t&&C.forEach(function(j){return e(y,j)}),on&&vc(y,P),_}function v(y,b,w,k){if(typeof w=="object"&&w!==null&&w.type===Vu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ng:e:{for(var _=w.key,E=b;E!==null;){if(E.key===_){if(_=w.type,_===Vu){if(E.tag===7){n(y,E.sibling),b=r(E,w.props.children),b.return=y,y=b;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ia&&zP(_)===E.type){n(y,E.sibling),b=r(E,w.props),b.ref=Bf(y,E,w),b.return=y,y=b;break e}n(y,E);break}else e(y,E);E=E.sibling}w.type===Vu?(b=jc(w.props.children,y.mode,k,w.key),b.return=y,y=b):(k=T0(w.type,w.key,w.props,null,y.mode,k),k.ref=Bf(y,b,w),k.return=y,y=k)}return o(y);case Uu:e:{for(E=w.key;b!==null;){if(b.key===E)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(y,b.sibling),b=r(b,w.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=uw(w,y.mode,k),b.return=y,y=b}return o(y);case Ia:return E=w._init,v(y,b,E(w._payload),k)}if(dh(w))return g(y,b,w,k);if(Of(w))return m(y,b,w,k);hg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(y,b.sibling),b=r(b,w),b.return=y,y=b):(n(y,b),b=cw(w,y.mode,k),b.return=y,y=b),o(y)):n(y,b)}return v}var zd=XI(!0),qI=XI(!1),Mv=Wl(null),Rv=null,Ju=null,eC=null;function tC(){eC=Ju=Rv=null}function nC(t){var e=Mv.current;Zt(Mv),t._currentValue=e}function zS(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function hd(t,e){Rv=t,eC=Ju=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ir=!0),t.firstContext=null)}function os(t){var e=t._currentValue;if(eC!==t)if(t={context:t,memoizedValue:e,next:null},Ju===null){if(Rv===null)throw Error(ce(308));Ju=t,Rv.dependencies={lanes:0,firstContext:t}}else Ju=Ju.next=t;return e}var Nc=null;function iC(t){Nc===null?Nc=[t]:Nc.push(t)}function YI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,iC(e)):(n.next=r.next,r.next=n),e.interleaved=n,la(t,i)}function la(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Da=!1;function rC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ia(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vl(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,At&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,la(t,n)}return r=i.interleaved,r===null?(e.next=e,iC(i)):(e.next=r.next,r.next=e),i.interleaved=e,la(t,n)}function E0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,V_(t,n)}}function UP(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Tv(t,e,n,i){var r=t.updateQueue;Da=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=mn({},d,f);break e;case 2:Da=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Gc|=o,t.lanes=o,t.memoizedState=d}}function VP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ce(191,r));r.call(i)}}}var gm={},bo=Wl(gm),vp=Wl(gm),yp=Wl(gm);function Pc(t){if(t===gm)throw Error(ce(174));return t}function sC(t,e){switch(Gt(yp,e),Gt(vp,t),Gt(bo,gm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wS(e,t)}Zt(bo),Gt(bo,e)}function Ud(){Zt(bo),Zt(vp),Zt(yp)}function ZI(t){Pc(yp.current);var e=Pc(bo.current),n=wS(e,t.type);e!==n&&(Gt(vp,t),Gt(bo,n))}function oC(t){vp.current===t&&(Zt(bo),Zt(vp))}var un=Wl(0);function Ov(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var iw=[];function aC(){for(var t=0;t<iw.length;t++)iw[t]._workInProgressVersionPrimary=null;iw.length=0}var A0=ga.ReactCurrentDispatcher,rw=ga.ReactCurrentBatchConfig,Wc=0,pn=null,On=null,Hn=null,Iv=!1,jh=!1,bp=0,kG=0;function di(){throw Error(ce(321))}function lC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ms(t[n],e[n]))return!1;return!0}function cC(t,e,n,i,r,s){if(Wc=s,pn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,A0.current=t===null||t.memoizedState===null?AG:NG,t=n(i,r),jh){s=0;do{if(jh=!1,bp=0,25<=s)throw Error(ce(301));s+=1,Hn=On=null,e.updateQueue=null,A0.current=PG,t=n(i,r)}while(jh)}if(A0.current=Dv,e=On!==null&&On.next!==null,Wc=0,Hn=On=pn=null,Iv=!1,e)throw Error(ce(300));return t}function uC(){var t=bp!==0;return bp=0,t}function Xs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?pn.memoizedState=Hn=t:Hn=Hn.next=t,Hn}function as(){if(On===null){var t=pn.alternate;t=t!==null?t.memoizedState:null}else t=On.next;var e=Hn===null?pn.memoizedState:Hn.next;if(e!==null)Hn=e,On=t;else{if(t===null)throw Error(ce(310));On=t,t={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},Hn===null?pn.memoizedState=Hn=t:Hn=Hn.next=t}return Hn}function xp(t,e){return typeof e=="function"?e(t):e}function sw(t){var e=as(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var i=On,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Wc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,pn.lanes|=u,Gc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Ms(i,e.memoizedState)||(ir=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,pn.lanes|=s,Gc|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ow(t){var e=as(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Ms(s,e.memoizedState)||(ir=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function QI(){}function eD(t,e){var n=pn,i=as(),r=e(),s=!Ms(i.memoizedState,r);if(s&&(i.memoizedState=r,ir=!0),i=i.queue,dC(iD.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Hn!==null&&Hn.memoizedState.tag&1){if(n.flags|=2048,wp(9,nD.bind(null,n,i,r,e),void 0,null),Wn===null)throw Error(ce(349));Wc&30||tD(n,e,r)}return r}function tD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nD(t,e,n,i){e.value=n,e.getSnapshot=i,rD(e)&&sD(t)}function iD(t,e,n){return n(function(){rD(e)&&sD(t)})}function rD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ms(t,n)}catch{return!0}}function sD(t){var e=la(t,1);e!==null&&Ps(e,t,1,-1)}function HP(t){var e=Xs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xp,lastRenderedState:t},e.queue=t,t=t.dispatch=EG.bind(null,pn,t),[e.memoizedState,t]}function wp(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function oD(){return as().memoizedState}function N0(t,e,n,i){var r=Xs();pn.flags|=t,r.memoizedState=wp(1|e,n,void 0,i===void 0?null:i)}function ob(t,e,n,i){var r=as();i=i===void 0?null:i;var s=void 0;if(On!==null){var o=On.memoizedState;if(s=o.destroy,i!==null&&lC(i,o.deps)){r.memoizedState=wp(e,n,s,i);return}}pn.flags|=t,r.memoizedState=wp(1|e,n,s,i)}function WP(t,e){return N0(8390656,8,t,e)}function dC(t,e){return ob(2048,8,t,e)}function aD(t,e){return ob(4,2,t,e)}function lD(t,e){return ob(4,4,t,e)}function cD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function uD(t,e,n){return n=n!=null?n.concat([t]):null,ob(4,4,cD.bind(null,e,t),n)}function fC(){}function dD(t,e){var n=as();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&lC(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function fD(t,e){var n=as();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&lC(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function hD(t,e,n){return Wc&21?(Ms(n,e)||(n=yI(),pn.lanes|=n,Gc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ir=!0),t.memoizedState=n)}function _G(t,e){var n=Dt;Dt=n!==0&&4>n?n:4,t(!0);var i=rw.transition;rw.transition={};try{t(!1),e()}finally{Dt=n,rw.transition=i}}function pD(){return as().memoizedState}function CG(t,e,n){var i=bl(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},mD(t))gD(e,n);else if(n=YI(t,e,n,i),n!==null){var r=Mi();Ps(n,t,i,r),vD(n,e,i)}}function EG(t,e,n){var i=bl(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(mD(t))gD(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Ms(a,o)){var l=e.interleaved;l===null?(r.next=r,iC(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=YI(t,e,r,i),n!==null&&(r=Mi(),Ps(n,t,i,r),vD(n,e,i))}}function mD(t){var e=t.alternate;return t===pn||e!==null&&e===pn}function gD(t,e){jh=Iv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vD(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,V_(t,n)}}var Dv={readContext:os,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},AG={readContext:os,useCallback:function(t,e){return Xs().memoizedState=[t,e===void 0?null:e],t},useContext:os,useEffect:WP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,N0(4194308,4,cD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return N0(4194308,4,t,e)},useInsertionEffect:function(t,e){return N0(4,2,t,e)},useMemo:function(t,e){var n=Xs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Xs();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=CG.bind(null,pn,t),[i.memoizedState,t]},useRef:function(t){var e=Xs();return t={current:t},e.memoizedState=t},useState:HP,useDebugValue:fC,useDeferredValue:function(t){return Xs().memoizedState=t},useTransition:function(){var t=HP(!1),e=t[0];return t=_G.bind(null,t[1]),Xs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=pn,r=Xs();if(on){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),Wn===null)throw Error(ce(349));Wc&30||tD(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,WP(iD.bind(null,i,s,t),[t]),i.flags|=2048,wp(9,nD.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Xs(),e=Wn.identifierPrefix;if(on){var n=na,i=ta;n=(i&~(1<<32-Ns(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=bp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NG={readContext:os,useCallback:dD,useContext:os,useEffect:dC,useImperativeHandle:uD,useInsertionEffect:aD,useLayoutEffect:lD,useMemo:fD,useReducer:sw,useRef:oD,useState:function(){return sw(xp)},useDebugValue:fC,useDeferredValue:function(t){var e=as();return hD(e,On.memoizedState,t)},useTransition:function(){var t=sw(xp)[0],e=as().memoizedState;return[t,e]},useMutableSource:QI,useSyncExternalStore:eD,useId:pD,unstable_isNewReconciler:!1},PG={readContext:os,useCallback:dD,useContext:os,useEffect:dC,useImperativeHandle:uD,useInsertionEffect:aD,useLayoutEffect:lD,useMemo:fD,useReducer:ow,useRef:oD,useState:function(){return ow(xp)},useDebugValue:fC,useDeferredValue:function(t){var e=as();return On===null?e.memoizedState=t:hD(e,On.memoizedState,t)},useTransition:function(){var t=ow(xp)[0],e=as().memoizedState;return[t,e]},useMutableSource:QI,useSyncExternalStore:eD,useId:pD,unstable_isNewReconciler:!1};function gs(t,e){if(t&&t.defaultProps){e=mn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function US(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:mn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ab={isMounted:function(t){return(t=t._reactInternals)?uu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Mi(),r=bl(t),s=ia(i,r);s.payload=e,n!=null&&(s.callback=n),e=vl(t,s,r),e!==null&&(Ps(e,t,r,i),E0(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Mi(),r=bl(t),s=ia(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=vl(t,s,r),e!==null&&(Ps(e,t,r,i),E0(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mi(),i=bl(t),r=ia(n,i);r.tag=2,e!=null&&(r.callback=e),e=vl(t,r,i),e!==null&&(Ps(e,t,i,n),E0(e,t,i))}};function GP(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!hp(n,i)||!hp(r,s):!0}function yD(t,e,n){var i=!1,r=Al,s=e.contextType;return typeof s=="object"&&s!==null?s=os(s):(r=or(e)?Vc:bi.current,i=e.contextTypes,s=(i=i!=null)?$d(t,r):Al),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ab,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function KP(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ab.enqueueReplaceState(e,e.state,null)}function VS(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},rC(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=os(s):(s=or(e)?Vc:bi.current,r.context=$d(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(US(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ab.enqueueReplaceState(r,r.state,null),Tv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Vd(t,e){try{var n="",i=e;do n+=iW(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function aw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function HS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var MG=typeof WeakMap=="function"?WeakMap:Map;function bD(t,e,n){n=ia(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Lv||(Lv=!0,e2=i),HS(t,e)},n}function xD(t,e,n){n=ia(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){HS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){HS(t,e),typeof i!="function"&&(yl===null?yl=new Set([this]):yl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function XP(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new MG;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=HG.bind(null,t,e,n),e.then(t,t))}function qP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function YP(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ia(-1,1),e.tag=2,vl(n,e,1))),n.lanes|=1),t)}var RG=ga.ReactCurrentOwner,ir=!1;function Ni(t,e,n,i){e.child=t===null?qI(e,null,n,i):zd(e,t.child,n,i)}function JP(t,e,n,i,r){n=n.render;var s=e.ref;return hd(e,r),i=cC(t,e,n,i,s,r),n=uC(),t!==null&&!ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ca(t,e,r)):(on&&n&&J_(e),e.flags|=1,Ni(t,e,i,r),e.child)}function ZP(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!xC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,wD(t,e,s,i,r)):(t=T0(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:hp,n(o,i)&&t.ref===e.ref)return ca(t,e,r)}return e.flags|=1,t=xl(s,i),t.ref=e.ref,t.return=e,e.child=t}function wD(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(hp(s,i)&&t.ref===e.ref)if(ir=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(ir=!0);else return e.lanes=t.lanes,ca(t,e,r)}return WS(t,e,n,i,r)}function SD(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(Qu,gr),gr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Gt(Qu,gr),gr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Gt(Qu,gr),gr|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Gt(Qu,gr),gr|=i;return Ni(t,e,r,n),e.child}function kD(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function WS(t,e,n,i,r){var s=or(n)?Vc:bi.current;return s=$d(e,s),hd(e,r),n=cC(t,e,n,i,s,r),i=uC(),t!==null&&!ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ca(t,e,r)):(on&&i&&J_(e),e.flags|=1,Ni(t,e,n,r),e.child)}function QP(t,e,n,i,r){if(or(n)){var s=!0;Av(e)}else s=!1;if(hd(e,r),e.stateNode===null)P0(t,e),yD(e,n,i),VS(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=os(c):(c=or(n)?Vc:bi.current,c=$d(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&KP(e,o,i,c),Da=!1;var f=e.memoizedState;o.state=f,Tv(e,i,o,r),l=e.memoizedState,a!==i||f!==l||sr.current||Da?(typeof u=="function"&&(US(e,n,u,i),l=e.memoizedState),(a=Da||GP(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,JI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:gs(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=os(l):(l=or(n)?Vc:bi.current,l=$d(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&KP(e,o,i,l),Da=!1,f=e.memoizedState,o.state=f,Tv(e,i,o,r);var g=e.memoizedState;a!==d||f!==g||sr.current||Da?(typeof p=="function"&&(US(e,n,p,i),g=e.memoizedState),(c=Da||GP(e,n,c,i,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return GS(t,e,n,i,s,r)}function GS(t,e,n,i,r,s){kD(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&BP(e,n,!1),ca(t,e,s);i=e.stateNode,RG.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=zd(e,t.child,null,s),e.child=zd(e,null,a,s)):Ni(t,e,a,s),e.memoizedState=i.state,r&&BP(e,n,!0),e.child}function _D(t){var e=t.stateNode;e.pendingContext?LP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&LP(t,e.context,!1),sC(t,e.containerInfo)}function eM(t,e,n,i,r){return Fd(),Q_(r),e.flags|=256,Ni(t,e,n,i),e.child}var KS={dehydrated:null,treeContext:null,retryLane:0};function XS(t){return{baseLanes:t,cachePool:null,transitions:null}}function CD(t,e,n){var i=e.pendingProps,r=un.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Gt(un,r&1),t===null)return FS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ub(o,i,0,null),t=jc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=XS(n),e.memoizedState=KS,t):hC(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return TG(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=xl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=xl(a,s):(s=jc(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?XS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=KS,i}return s=t.child,t=s.sibling,i=xl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function hC(t,e){return e=ub({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pg(t,e,n,i){return i!==null&&Q_(i),zd(e,t.child,null,n),t=hC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TG(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=aw(Error(ce(422))),pg(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=ub({mode:"visible",children:i.children},r,0,null),s=jc(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&zd(e,t.child,null,o),e.child.memoizedState=XS(o),e.memoizedState=KS,s);if(!(e.mode&1))return pg(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ce(419)),i=aw(s,i,void 0),pg(t,e,o,i)}if(a=(o&t.childLanes)!==0,ir||a){if(i=Wn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,la(t,r),Ps(i,t,r,-1))}return bC(),i=aw(Error(ce(421))),pg(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=WG.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Sr=gl(r.nextSibling),Ar=e,on=!0,ws=null,t!==null&&(Vr[Hr++]=ta,Vr[Hr++]=na,Vr[Hr++]=Hc,ta=t.id,na=t.overflow,Hc=e),e=hC(e,i.children),e.flags|=4096,e)}function tM(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),zS(t.return,e,n)}function lw(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function ED(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ni(t,e,i.children,n),i=un.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tM(t,n,e);else if(t.tag===19)tM(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Gt(un,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ov(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),lw(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ov(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}lw(e,!0,n,null,s);break;case"together":lw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function P0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ca(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=xl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OG(t,e,n){switch(e.tag){case 3:_D(e),Fd();break;case 5:ZI(e);break;case 1:or(e.type)&&Av(e);break;case 4:sC(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Gt(Mv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Gt(un,un.current&1),e.flags|=128,null):n&e.child.childLanes?CD(t,e,n):(Gt(un,un.current&1),t=ca(t,e,n),t!==null?t.sibling:null);Gt(un,un.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return ED(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Gt(un,un.current),i)break;return null;case 22:case 23:return e.lanes=0,SD(t,e,n)}return ca(t,e,n)}var AD,qS,ND,PD;AD=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qS=function(){};ND=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Pc(bo.current);var s=null;switch(n){case"input":r=vS(t,r),i=vS(t,i),s=[];break;case"select":r=mn({},r,{value:void 0}),i=mn({},i,{value:void 0}),s=[];break;case"textarea":r=xS(t,r),i=xS(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Cv)}SS(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(op.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(op.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Kt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};PD=function(t,e,n,i){n!==i&&(e.flags|=4)};function $f(t,e){if(!on)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function fi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function IG(t,e,n){var i=e.pendingProps;switch(Z_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fi(e),null;case 1:return or(e.type)&&Ev(),fi(e),null;case 3:return i=e.stateNode,Ud(),Zt(sr),Zt(bi),aC(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(fg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ws!==null&&(i2(ws),ws=null))),qS(t,e),fi(e),null;case 5:oC(e);var r=Pc(yp.current);if(n=e.type,t!==null&&e.stateNode!=null)ND(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ce(166));return fi(e),null}if(t=Pc(bo.current),fg(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[io]=e,i[gp]=s,t=(e.mode&1)!==0,n){case"dialog":Kt("cancel",i),Kt("close",i);break;case"iframe":case"object":case"embed":Kt("load",i);break;case"video":case"audio":for(r=0;r<hh.length;r++)Kt(hh[r],i);break;case"source":Kt("error",i);break;case"img":case"image":case"link":Kt("error",i),Kt("load",i);break;case"details":Kt("toggle",i);break;case"input":uP(i,s),Kt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Kt("invalid",i);break;case"textarea":fP(i,s),Kt("invalid",i)}SS(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&dg(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&dg(i.textContent,a,t),r=["children",""+a]):op.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Kt("scroll",i)}switch(n){case"input":ig(i),dP(i,s,!0);break;case"textarea":ig(i),hP(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Cv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[io]=e,t[gp]=i,AD(t,e,!1,!1),e.stateNode=t;e:{switch(o=kS(n,i),n){case"dialog":Kt("cancel",t),Kt("close",t),r=i;break;case"iframe":case"object":case"embed":Kt("load",t),r=i;break;case"video":case"audio":for(r=0;r<hh.length;r++)Kt(hh[r],t);r=i;break;case"source":Kt("error",t),r=i;break;case"img":case"image":case"link":Kt("error",t),Kt("load",t),r=i;break;case"details":Kt("toggle",t),r=i;break;case"input":uP(t,i),r=vS(t,i),Kt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=mn({},i,{value:void 0}),Kt("invalid",t);break;case"textarea":fP(t,i),r=xS(t,i),Kt("invalid",t);break;default:r=i}SS(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?oI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ap(t,l):typeof l=="number"&&ap(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(op.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Kt("scroll",t):l!=null&&L_(t,s,l,o))}switch(n){case"input":ig(t),dP(t,i,!1);break;case"textarea":ig(t),hP(t);break;case"option":i.value!=null&&t.setAttribute("value",""+El(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?cd(t,!!i.multiple,s,!1):i.defaultValue!=null&&cd(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Cv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fi(e),null;case 6:if(t&&e.stateNode!=null)PD(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ce(166));if(n=Pc(yp.current),Pc(bo.current),fg(e)){if(i=e.stateNode,n=e.memoizedProps,i[io]=e,(s=i.nodeValue!==n)&&(t=Ar,t!==null))switch(t.tag){case 3:dg(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dg(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[io]=e,e.stateNode=i}return fi(e),null;case 13:if(Zt(un),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(on&&Sr!==null&&e.mode&1&&!(e.flags&128))KI(),Fd(),e.flags|=98560,s=!1;else if(s=fg(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ce(317));s[io]=e}else Fd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fi(e),s=!1}else ws!==null&&(i2(ws),ws=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||un.current&1?Bn===0&&(Bn=3):bC())),e.updateQueue!==null&&(e.flags|=4),fi(e),null);case 4:return Ud(),qS(t,e),t===null&&pp(e.stateNode.containerInfo),fi(e),null;case 10:return nC(e.type._context),fi(e),null;case 17:return or(e.type)&&Ev(),fi(e),null;case 19:if(Zt(un),s=e.memoizedState,s===null)return fi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)$f(s,!1);else{if(Bn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ov(t),o!==null){for(e.flags|=128,$f(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Gt(un,un.current&1|2),e.child}t=t.sibling}s.tail!==null&&_n()>Hd&&(e.flags|=128,i=!0,$f(s,!1),e.lanes=4194304)}else{if(!i)if(t=Ov(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$f(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!on)return fi(e),null}else 2*_n()-s.renderingStartTime>Hd&&n!==1073741824&&(e.flags|=128,i=!0,$f(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=_n(),e.sibling=null,n=un.current,Gt(un,i?n&1|2:n&1),e):(fi(e),null);case 22:case 23:return yC(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?gr&1073741824&&(fi(e),e.subtreeFlags&6&&(e.flags|=8192)):fi(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function DG(t,e){switch(Z_(e),e.tag){case 1:return or(e.type)&&Ev(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ud(),Zt(sr),Zt(bi),aC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return oC(e),null;case 13:if(Zt(un),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));Fd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Zt(un),null;case 4:return Ud(),null;case 10:return nC(e.type._context),null;case 22:case 23:return yC(),null;case 24:return null;default:return null}}var mg=!1,gi=!1,jG=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Zu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){vn(t,e,i)}else n.current=null}function YS(t,e,n){try{n()}catch(i){vn(t,e,i)}}var nM=!1;function LG(t,e){if(OS=Sv,t=II(),Y_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(IS={focusedElem:t,selectionRange:n},Sv=!1,Oe=e;Oe!==null;)if(e=Oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Oe=t;else for(;Oe!==null;){e=Oe;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:gs(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(k){vn(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Oe=t;break}Oe=e.return}return g=nM,nM=!1,g}function Lh(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&YS(e,n,s)}r=r.next}while(r!==i)}}function lb(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function JS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function MD(t){var e=t.alternate;e!==null&&(t.alternate=null,MD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[io],delete e[gp],delete e[LS],delete e[bG],delete e[xG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function RD(t){return t.tag===5||t.tag===3||t.tag===4}function iM(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||RD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ZS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cv));else if(i!==4&&(t=t.child,t!==null))for(ZS(t,e,n),t=t.sibling;t!==null;)ZS(t,e,n),t=t.sibling}function QS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(QS(t,e,n),t=t.sibling;t!==null;)QS(t,e,n),t=t.sibling}var Yn=null,xs=!1;function Aa(t,e,n){for(n=n.child;n!==null;)TD(t,e,n),n=n.sibling}function TD(t,e,n){if(yo&&typeof yo.onCommitFiberUnmount=="function")try{yo.onCommitFiberUnmount(eb,n)}catch{}switch(n.tag){case 5:gi||Zu(n,e);case 6:var i=Yn,r=xs;Yn=null,Aa(t,e,n),Yn=i,xs=r,Yn!==null&&(xs?(t=Yn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yn.removeChild(n.stateNode));break;case 18:Yn!==null&&(xs?(t=Yn,n=n.stateNode,t.nodeType===8?tw(t.parentNode,n):t.nodeType===1&&tw(t,n),dp(t)):tw(Yn,n.stateNode));break;case 4:i=Yn,r=xs,Yn=n.stateNode.containerInfo,xs=!0,Aa(t,e,n),Yn=i,xs=r;break;case 0:case 11:case 14:case 15:if(!gi&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&YS(n,e,o),r=r.next}while(r!==i)}Aa(t,e,n);break;case 1:if(!gi&&(Zu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){vn(n,e,a)}Aa(t,e,n);break;case 21:Aa(t,e,n);break;case 22:n.mode&1?(gi=(i=gi)||n.memoizedState!==null,Aa(t,e,n),gi=i):Aa(t,e,n);break;default:Aa(t,e,n)}}function rM(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jG),e.forEach(function(i){var r=GG.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function fs(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yn=a.stateNode,xs=!1;break e;case 3:Yn=a.stateNode.containerInfo,xs=!0;break e;case 4:Yn=a.stateNode.containerInfo,xs=!0;break e}a=a.return}if(Yn===null)throw Error(ce(160));TD(s,o,r),Yn=null,xs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){vn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)OD(e,t),e=e.sibling}function OD(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fs(e,t),$s(t),i&4){try{Lh(3,t,t.return),lb(3,t)}catch(m){vn(t,t.return,m)}try{Lh(5,t,t.return)}catch(m){vn(t,t.return,m)}}break;case 1:fs(e,t),$s(t),i&512&&n!==null&&Zu(n,n.return);break;case 5:if(fs(e,t),$s(t),i&512&&n!==null&&Zu(n,n.return),t.flags&32){var r=t.stateNode;try{ap(r,"")}catch(m){vn(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tI(r,s),kS(a,o);var c=kS(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?oI(r,d):u==="dangerouslySetInnerHTML"?rI(r,d):u==="children"?ap(r,d):L_(r,u,d,c)}switch(a){case"input":yS(r,s);break;case"textarea":nI(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?cd(r,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?cd(r,!!s.multiple,s.defaultValue,!0):cd(r,!!s.multiple,s.multiple?[]:"",!1))}r[gp]=s}catch(m){vn(t,t.return,m)}}break;case 6:if(fs(e,t),$s(t),i&4){if(t.stateNode===null)throw Error(ce(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){vn(t,t.return,m)}}break;case 3:if(fs(e,t),$s(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{dp(e.containerInfo)}catch(m){vn(t,t.return,m)}break;case 4:fs(e,t),$s(t);break;case 13:fs(e,t),$s(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(gC=_n())),i&4&&rM(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(gi=(c=gi)||u,fs(e,t),gi=c):fs(e,t),$s(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Oe=t,u=t.child;u!==null;){for(d=Oe=u;Oe!==null;){switch(f=Oe,p=f.child,f.tag){case 0:case 11:case 14:case 15:Lh(4,f,f.return);break;case 1:Zu(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){vn(i,n,m)}}break;case 5:Zu(f,f.return);break;case 22:if(f.memoizedState!==null){oM(d);continue}}p!==null?(p.return=f,Oe=p):oM(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=sI("display",o))}catch(m){vn(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){vn(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fs(e,t),$s(t),i&4&&rM(t);break;case 21:break;default:fs(e,t),$s(t)}}function $s(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(RD(n)){var i=n;break e}n=n.return}throw Error(ce(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ap(r,""),i.flags&=-33);var s=iM(t);QS(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=iM(t);ZS(t,a,o);break;default:throw Error(ce(161))}}catch(l){vn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BG(t,e,n){Oe=t,ID(t)}function ID(t,e,n){for(var i=(t.mode&1)!==0;Oe!==null;){var r=Oe,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||mg;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||gi;a=mg;var c=gi;if(mg=o,(gi=l)&&!c)for(Oe=r;Oe!==null;)o=Oe,l=o.child,o.tag===22&&o.memoizedState!==null?aM(r):l!==null?(l.return=o,Oe=l):aM(r);for(;s!==null;)Oe=s,ID(s),s=s.sibling;Oe=r,mg=a,gi=c}sM(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Oe=s):sM(t)}}function sM(t){for(;Oe!==null;){var e=Oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gi||lb(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!gi)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:gs(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&VP(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}VP(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&dp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}gi||e.flags&512&&JS(e)}catch(f){vn(e,e.return,f)}}if(e===t){Oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function oM(t){for(;Oe!==null;){var e=Oe;if(e===t){Oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function aM(t){for(;Oe!==null;){var e=Oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lb(4,e)}catch(l){vn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){vn(e,r,l)}}var s=e.return;try{JS(e)}catch(l){vn(e,s,l)}break;case 5:var o=e.return;try{JS(e)}catch(l){vn(e,o,l)}}}catch(l){vn(e,e.return,l)}if(e===t){Oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Oe=a;break}Oe=e.return}}var $G=Math.ceil,jv=ga.ReactCurrentDispatcher,pC=ga.ReactCurrentOwner,es=ga.ReactCurrentBatchConfig,At=0,Wn=null,Pn=null,oi=0,gr=0,Qu=Wl(0),Bn=0,Sp=null,Gc=0,cb=0,mC=0,Bh=null,Ji=null,gC=0,Hd=1/0,jo=null,Lv=!1,e2=null,yl=null,gg=!1,el=null,Bv=0,$h=0,t2=null,M0=-1,R0=0;function Mi(){return At&6?_n():M0!==-1?M0:M0=_n()}function bl(t){return t.mode&1?At&2&&oi!==0?oi&-oi:SG.transition!==null?(R0===0&&(R0=yI()),R0):(t=Dt,t!==0||(t=window.event,t=t===void 0?16:CI(t.type)),t):1}function Ps(t,e,n,i){if(50<$h)throw $h=0,t2=null,Error(ce(185));hm(t,n,i),(!(At&2)||t!==Wn)&&(t===Wn&&(!(At&2)&&(cb|=n),Bn===4&&Wa(t,oi)),ar(t,i),n===1&&At===0&&!(e.mode&1)&&(Hd=_n()+500,sb&&Gl()))}function ar(t,e){var n=t.callbackNode;SW(t,e);var i=wv(t,t===Wn?oi:0);if(i===0)n!==null&&gP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&gP(n),e===1)t.tag===0?wG(lM.bind(null,t)):HI(lM.bind(null,t)),vG(function(){!(At&6)&&Gl()}),n=null;else{switch(bI(i)){case 1:n=U_;break;case 4:n=gI;break;case 16:n=xv;break;case 536870912:n=vI;break;default:n=xv}n=UD(n,DD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function DD(t,e){if(M0=-1,R0=0,At&6)throw Error(ce(327));var n=t.callbackNode;if(pd()&&t.callbackNode!==n)return null;var i=wv(t,t===Wn?oi:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=$v(t,i);else{e=i;var r=At;At|=2;var s=LD();(Wn!==t||oi!==e)&&(jo=null,Hd=_n()+500,Dc(t,e));do try{UG();break}catch(a){jD(t,a)}while(!0);tC(),jv.current=s,At=r,Pn!==null?e=0:(Wn=null,oi=0,e=Bn)}if(e!==0){if(e===2&&(r=NS(t),r!==0&&(i=r,e=n2(t,r))),e===1)throw n=Sp,Dc(t,0),Wa(t,i),ar(t,_n()),n;if(e===6)Wa(t,i);else{if(r=t.current.alternate,!(i&30)&&!FG(r)&&(e=$v(t,i),e===2&&(s=NS(t),s!==0&&(i=s,e=n2(t,s))),e===1))throw n=Sp,Dc(t,0),Wa(t,i),ar(t,_n()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ce(345));case 2:yc(t,Ji,jo);break;case 3:if(Wa(t,i),(i&130023424)===i&&(e=gC+500-_n(),10<e)){if(wv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Mi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=jS(yc.bind(null,t,Ji,jo),e);break}yc(t,Ji,jo);break;case 4:if(Wa(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Ns(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=_n()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*$G(i/1960))-i,10<i){t.timeoutHandle=jS(yc.bind(null,t,Ji,jo),i);break}yc(t,Ji,jo);break;case 5:yc(t,Ji,jo);break;default:throw Error(ce(329))}}}return ar(t,_n()),t.callbackNode===n?DD.bind(null,t):null}function n2(t,e){var n=Bh;return t.current.memoizedState.isDehydrated&&(Dc(t,e).flags|=256),t=$v(t,e),t!==2&&(e=Ji,Ji=n,e!==null&&i2(e)),t}function i2(t){Ji===null?Ji=t:Ji.push.apply(Ji,t)}function FG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Ms(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wa(t,e){for(e&=~mC,e&=~cb,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ns(e),i=1<<n;t[n]=-1,e&=~i}}function lM(t){if(At&6)throw Error(ce(327));pd();var e=wv(t,0);if(!(e&1))return ar(t,_n()),null;var n=$v(t,e);if(t.tag!==0&&n===2){var i=NS(t);i!==0&&(e=i,n=n2(t,i))}if(n===1)throw n=Sp,Dc(t,0),Wa(t,e),ar(t,_n()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yc(t,Ji,jo),ar(t,_n()),null}function vC(t,e){var n=At;At|=1;try{return t(e)}finally{At=n,At===0&&(Hd=_n()+500,sb&&Gl())}}function Kc(t){el!==null&&el.tag===0&&!(At&6)&&pd();var e=At;At|=1;var n=es.transition,i=Dt;try{if(es.transition=null,Dt=1,t)return t()}finally{Dt=i,es.transition=n,At=e,!(At&6)&&Gl()}}function yC(){gr=Qu.current,Zt(Qu)}function Dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gG(n)),Pn!==null)for(n=Pn.return;n!==null;){var i=n;switch(Z_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ev();break;case 3:Ud(),Zt(sr),Zt(bi),aC();break;case 5:oC(i);break;case 4:Ud();break;case 13:Zt(un);break;case 19:Zt(un);break;case 10:nC(i.type._context);break;case 22:case 23:yC()}n=n.return}if(Wn=t,Pn=t=xl(t.current,null),oi=gr=e,Bn=0,Sp=null,mC=cb=Gc=0,Ji=Bh=null,Nc!==null){for(e=0;e<Nc.length;e++)if(n=Nc[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Nc=null}return t}function jD(t,e){do{var n=Pn;try{if(tC(),A0.current=Dv,Iv){for(var i=pn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Iv=!1}if(Wc=0,Hn=On=pn=null,jh=!1,bp=0,pC.current=null,n===null||n.return===null){Bn=1,Sp=e,Pn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=oi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=qP(o);if(p!==null){p.flags&=-257,YP(p,o,a,s,e),p.mode&1&&XP(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){XP(s,c,e),bC();break e}l=Error(ce(426))}}else if(on&&a.mode&1){var v=qP(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),YP(v,o,a,s,e),Q_(Vd(l,a));break e}}s=l=Vd(l,a),Bn!==4&&(Bn=2),Bh===null?Bh=[s]:Bh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=bD(s,l,e);UP(s,y);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(yl===null||!yl.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=xD(s,a,e);UP(s,k);break e}}s=s.return}while(s!==null)}$D(n)}catch(_){e=_,Pn===n&&n!==null&&(Pn=n=n.return);continue}break}while(!0)}function LD(){var t=jv.current;return jv.current=Dv,t===null?Dv:t}function bC(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),Wn===null||!(Gc&268435455)&&!(cb&268435455)||Wa(Wn,oi)}function $v(t,e){var n=At;At|=2;var i=LD();(Wn!==t||oi!==e)&&(jo=null,Dc(t,e));do try{zG();break}catch(r){jD(t,r)}while(!0);if(tC(),At=n,jv.current=i,Pn!==null)throw Error(ce(261));return Wn=null,oi=0,Bn}function zG(){for(;Pn!==null;)BD(Pn)}function UG(){for(;Pn!==null&&!hW();)BD(Pn)}function BD(t){var e=zD(t.alternate,t,gr);t.memoizedProps=t.pendingProps,e===null?$D(t):Pn=e,pC.current=null}function $D(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DG(n,e),n!==null){n.flags&=32767,Pn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Bn=6,Pn=null;return}}else if(n=IG(n,e,gr),n!==null){Pn=n;return}if(e=e.sibling,e!==null){Pn=e;return}Pn=e=t}while(e!==null);Bn===0&&(Bn=5)}function yc(t,e,n){var i=Dt,r=es.transition;try{es.transition=null,Dt=1,VG(t,e,n,i)}finally{es.transition=r,Dt=i}return null}function VG(t,e,n,i){do pd();while(el!==null);if(At&6)throw Error(ce(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(kW(t,s),t===Wn&&(Pn=Wn=null,oi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gg||(gg=!0,UD(xv,function(){return pd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=es.transition,es.transition=null;var o=Dt;Dt=1;var a=At;At|=4,pC.current=null,LG(t,n),OD(n,t),cG(IS),Sv=!!OS,IS=OS=null,t.current=n,BG(n),pW(),At=a,Dt=o,es.transition=s}else t.current=n;if(gg&&(gg=!1,el=t,Bv=r),s=t.pendingLanes,s===0&&(yl=null),vW(n.stateNode),ar(t,_n()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Lv)throw Lv=!1,t=e2,e2=null,t;return Bv&1&&t.tag!==0&&pd(),s=t.pendingLanes,s&1?t===t2?$h++:($h=0,t2=t):$h=0,Gl(),null}function pd(){if(el!==null){var t=bI(Bv),e=es.transition,n=Dt;try{if(es.transition=null,Dt=16>t?16:t,el===null)var i=!1;else{if(t=el,el=null,Bv=0,At&6)throw Error(ce(331));var r=At;for(At|=4,Oe=t.current;Oe!==null;){var s=Oe,o=s.child;if(Oe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Oe=c;Oe!==null;){var u=Oe;switch(u.tag){case 0:case 11:case 15:Lh(8,u,s)}var d=u.child;if(d!==null)d.return=u,Oe=d;else for(;Oe!==null;){u=Oe;var f=u.sibling,p=u.return;if(MD(u),u===c){Oe=null;break}if(f!==null){f.return=p,Oe=f;break}Oe=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Oe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Oe=o;else e:for(;Oe!==null;){if(s=Oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Lh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Oe=y;break e}Oe=s.return}}var b=t.current;for(Oe=b;Oe!==null;){o=Oe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Oe=w;else e:for(o=b;Oe!==null;){if(a=Oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lb(9,a)}}catch(_){vn(a,a.return,_)}if(a===o){Oe=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,Oe=k;break e}Oe=a.return}}if(At=r,Gl(),yo&&typeof yo.onPostCommitFiberRoot=="function")try{yo.onPostCommitFiberRoot(eb,t)}catch{}i=!0}return i}finally{Dt=n,es.transition=e}}return!1}function cM(t,e,n){e=Vd(n,e),e=bD(t,e,1),t=vl(t,e,1),e=Mi(),t!==null&&(hm(t,1,e),ar(t,e))}function vn(t,e,n){if(t.tag===3)cM(t,t,n);else for(;e!==null;){if(e.tag===3){cM(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(yl===null||!yl.has(i))){t=Vd(n,t),t=xD(e,t,1),e=vl(e,t,1),t=Mi(),e!==null&&(hm(e,1,t),ar(e,t));break}}e=e.return}}function HG(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Mi(),t.pingedLanes|=t.suspendedLanes&n,Wn===t&&(oi&n)===n&&(Bn===4||Bn===3&&(oi&130023424)===oi&&500>_n()-gC?Dc(t,0):mC|=n),ar(t,e)}function FD(t,e){e===0&&(t.mode&1?(e=og,og<<=1,!(og&130023424)&&(og=4194304)):e=1);var n=Mi();t=la(t,e),t!==null&&(hm(t,e,n),ar(t,n))}function WG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),FD(t,n)}function GG(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ce(314))}i!==null&&i.delete(e),FD(t,n)}var zD;zD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||sr.current)ir=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ir=!1,OG(t,e,n);ir=!!(t.flags&131072)}else ir=!1,on&&e.flags&1048576&&WI(e,Pv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;P0(t,e),t=e.pendingProps;var r=$d(e,bi.current);hd(e,n),r=cC(null,e,i,t,r,n);var s=uC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,or(i)?(s=!0,Av(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,rC(e),r.updater=ab,e.stateNode=r,r._reactInternals=e,VS(e,i,t,n),e=GS(null,e,i,!0,s,n)):(e.tag=0,on&&s&&J_(e),Ni(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(P0(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=XG(i),t=gs(i,t),r){case 0:e=WS(null,e,i,t,n);break e;case 1:e=QP(null,e,i,t,n);break e;case 11:e=JP(null,e,i,t,n);break e;case 14:e=ZP(null,e,i,gs(i.type,t),n);break e}throw Error(ce(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:gs(i,r),WS(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:gs(i,r),QP(t,e,i,r,n);case 3:e:{if(_D(e),t===null)throw Error(ce(387));i=e.pendingProps,s=e.memoizedState,r=s.element,JI(t,e),Tv(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Vd(Error(ce(423)),e),e=eM(t,e,i,n,r);break e}else if(i!==r){r=Vd(Error(ce(424)),e),e=eM(t,e,i,n,r);break e}else for(Sr=gl(e.stateNode.containerInfo.firstChild),Ar=e,on=!0,ws=null,n=qI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fd(),i===r){e=ca(t,e,n);break e}Ni(t,e,i,n)}e=e.child}return e;case 5:return ZI(e),t===null&&FS(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,DS(i,r)?o=null:s!==null&&DS(i,s)&&(e.flags|=32),kD(t,e),Ni(t,e,o,n),e.child;case 6:return t===null&&FS(e),null;case 13:return CD(t,e,n);case 4:return sC(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=zd(e,null,i,n):Ni(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:gs(i,r),JP(t,e,i,r,n);case 7:return Ni(t,e,e.pendingProps,n),e.child;case 8:return Ni(t,e,e.pendingProps.children,n),e.child;case 12:return Ni(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Gt(Mv,i._currentValue),i._currentValue=o,s!==null)if(Ms(s.value,o)){if(s.children===r.children&&!sr.current){e=ca(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ia(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),zS(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zS(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ni(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,hd(e,n),r=os(r),i=i(r),e.flags|=1,Ni(t,e,i,n),e.child;case 14:return i=e.type,r=gs(i,e.pendingProps),r=gs(i.type,r),ZP(t,e,i,r,n);case 15:return wD(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:gs(i,r),P0(t,e),e.tag=1,or(i)?(t=!0,Av(e)):t=!1,hd(e,n),yD(e,i,r),VS(e,i,r,n),GS(null,e,i,!0,t,n);case 19:return ED(t,e,n);case 22:return SD(t,e,n)}throw Error(ce(156,e.tag))};function UD(t,e){return mI(t,e)}function KG(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(t,e,n,i){return new KG(t,e,n,i)}function xC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XG(t){if(typeof t=="function")return xC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$_)return 11;if(t===F_)return 14}return 2}function xl(t,e){var n=t.alternate;return n===null?(n=Xr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function T0(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")xC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vu:return jc(n.children,r,s,e);case B_:o=8,r|=8;break;case hS:return t=Xr(12,n,e,r|2),t.elementType=hS,t.lanes=s,t;case pS:return t=Xr(13,n,e,r),t.elementType=pS,t.lanes=s,t;case mS:return t=Xr(19,n,e,r),t.elementType=mS,t.lanes=s,t;case Z5:return ub(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y5:o=10;break e;case J5:o=9;break e;case $_:o=11;break e;case F_:o=14;break e;case Ia:o=16,i=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=Xr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function jc(t,e,n,i){return t=Xr(7,t,i,e),t.lanes=n,t}function ub(t,e,n,i){return t=Xr(22,t,i,e),t.elementType=Z5,t.lanes=n,t.stateNode={isHidden:!1},t}function cw(t,e,n){return t=Xr(6,t,null,e),t.lanes=n,t}function uw(t,e,n){return e=Xr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qG(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hx(0),this.expirationTimes=Hx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hx(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function wC(t,e,n,i,r,s,o,a,l){return t=new qG(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rC(s),t}function YG(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function VD(t){if(!t)return Al;t=t._reactInternals;e:{if(uu(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(or(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(or(n))return VI(t,n,e)}return e}function HD(t,e,n,i,r,s,o,a,l){return t=wC(n,i,!0,t,r,s,o,a,l),t.context=VD(null),n=t.current,i=Mi(),r=bl(n),s=ia(i,r),s.callback=e??null,vl(n,s,r),t.current.lanes=r,hm(t,r,i),ar(t,i),t}function db(t,e,n,i){var r=e.current,s=Mi(),o=bl(r);return n=VD(n),e.context===null?e.context=n:e.pendingContext=n,e=ia(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=vl(r,e,o),t!==null&&(Ps(t,r,o,s),E0(t,r,o)),o}function Fv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uM(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function SC(t,e){uM(t,e),(t=t.alternate)&&uM(t,e)}function JG(){return null}var WD=typeof reportError=="function"?reportError:function(t){console.error(t)};function kC(t){this._internalRoot=t}fb.prototype.render=kC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));db(t,e,null,null)};fb.prototype.unmount=kC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kc(function(){db(null,t,null,null)}),e[aa]=null}};function fb(t){this._internalRoot=t}fb.prototype.unstable_scheduleHydration=function(t){if(t){var e=SI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ha.length&&e!==0&&e<Ha[n].priority;n++);Ha.splice(n,0,t),n===0&&_I(t)}};function _C(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dM(){}function ZG(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Fv(o);s.call(c)}}var o=HD(e,i,t,0,null,!1,!1,"",dM);return t._reactRootContainer=o,t[aa]=o.current,pp(t.nodeType===8?t.parentNode:t),Kc(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Fv(l);a.call(c)}}var l=wC(t,0,!1,null,null,!1,!1,"",dM);return t._reactRootContainer=l,t[aa]=l.current,pp(t.nodeType===8?t.parentNode:t),Kc(function(){db(e,l,n,i)}),l}function pb(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Fv(o);a.call(l)}}db(e,o,t,r)}else o=ZG(n,e,t,r,i);return Fv(o)}xI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fh(e.pendingLanes);n!==0&&(V_(e,n|1),ar(e,_n()),!(At&6)&&(Hd=_n()+500,Gl()))}break;case 13:Kc(function(){var i=la(t,1);if(i!==null){var r=Mi();Ps(i,t,1,r)}}),SC(t,1)}};H_=function(t){if(t.tag===13){var e=la(t,134217728);if(e!==null){var n=Mi();Ps(e,t,134217728,n)}SC(t,134217728)}};wI=function(t){if(t.tag===13){var e=bl(t),n=la(t,e);if(n!==null){var i=Mi();Ps(n,t,e,i)}SC(t,e)}};SI=function(){return Dt};kI=function(t,e){var n=Dt;try{return Dt=t,e()}finally{Dt=n}};CS=function(t,e,n){switch(e){case"input":if(yS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=rb(i);if(!r)throw Error(ce(90));eI(i),yS(i,r)}}}break;case"textarea":nI(t,n);break;case"select":e=n.value,e!=null&&cd(t,!!n.multiple,e,!1)}};cI=vC;uI=Kc;var QG={usingClientEntryPoint:!1,Events:[mm,Ku,rb,aI,lI,vC]},Ff={findFiberByHostInstance:Ac,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eK={bundleType:Ff.bundleType,version:Ff.version,rendererPackageName:Ff.rendererPackageName,rendererConfig:Ff.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ga.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hI(t),t===null?null:t.stateNode},findFiberByHostInstance:Ff.findFiberByHostInstance||JG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vg.isDisabled&&vg.supportsFiber)try{eb=vg.inject(eK),yo=vg}catch{}}Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QG;Or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_C(e))throw Error(ce(200));return YG(t,e,null,n)};Or.createRoot=function(t,e){if(!_C(t))throw Error(ce(299));var n=!1,i="",r=WD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=wC(t,1,!1,null,null,n,!1,i,r),t[aa]=e.current,pp(t.nodeType===8?t.parentNode:t),new kC(e)};Or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=hI(e),t=t===null?null:t.stateNode,t};Or.flushSync=function(t){return Kc(t)};Or.hydrate=function(t,e,n){if(!hb(e))throw Error(ce(200));return pb(null,t,e,!0,n)};Or.hydrateRoot=function(t,e,n){if(!_C(t))throw Error(ce(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=WD;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=HD(e,null,t,1,n??null,r,!1,s,o),t[aa]=e.current,pp(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new fb(e)};Or.render=function(t,e,n){if(!hb(e))throw Error(ce(200));return pb(null,t,e,!1,n)};Or.unmountComponentAtNode=function(t){if(!hb(t))throw Error(ce(40));return t._reactRootContainer?(Kc(function(){pb(null,null,t,!1,function(){t._reactRootContainer=null,t[aa]=null})}),!0):!1};Or.unstable_batchedUpdates=vC;Or.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!hb(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return pb(t,e,n,!1,i)};Or.version="18.3.1-next-f1338f8080-20240426";function GD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GD)}catch(t){console.error(t)}}GD(),G5.exports=Or;var Kl=G5.exports;const tK=lu(Kl);var KD,fM=Kl;KD=fM.createRoot,fM.hydrateRoot;function ke(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function js(t,e=[]){let n=[];function i(s,o){const a=x.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:p,...g}=d,m=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,v=x.useMemo(()=>g,Object.values(g));return h.jsx(m.Provider,{value:v,children:p})};c.displayName=s+"Provider";function u(d,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,g=x.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,nK(r,...e)]}function nK(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function hM(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function mb(...t){return e=>{let n=!1;const i=t.map(r=>{const s=hM(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():hM(t[r],null)}}}}function xt(...t){return x.useCallback(mb(...t),t)}function Wd(t){const e=iK(t),n=x.forwardRef((i,r)=>{const{children:s,...o}=i,a=x.Children.toArray(s),l=a.find(sK);if(l){const c=l.props.children,u=a.map(d=>d===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:r,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}function iK(t){const e=x.forwardRef((n,i)=>{const{children:r,...s}=n;if(x.isValidElement(r)){const o=aK(r),a=oK(s,r.props);return r.type!==x.Fragment&&(a.ref=i?mb(i,o):o),x.cloneElement(r,a)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var rK=Symbol("radix.slottable");function sK(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===rK}function oK(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function aK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function vm(t){const e=t+"CollectionProvider",[n,i]=js(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,b=Yt.useRef(null),w=Yt.useRef(new Map).current;return h.jsx(r,{scope:v,itemMap:w,collectionRef:b,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=Wd(a),c=Yt.forwardRef((m,v)=>{const{scope:y,children:b}=m,w=s(a,y),k=xt(v,w.collectionRef);return h.jsx(l,{ref:k,children:b})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Wd(u),p=Yt.forwardRef((m,v)=>{const{scope:y,children:b,...w}=m,k=Yt.useRef(null),_=xt(v,k),E=s(u,y);return Yt.useEffect(()=>(E.itemMap.set(k,{ref:k,...w}),()=>void E.itemMap.delete(k))),h.jsx(f,{[d]:"",ref:_,children:b})});p.displayName=u;function g(m){const v=s(t+"CollectionConsumer",m);return Yt.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((E,C)=>w.indexOf(E.ref.current)-w.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},g,i]}var li=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},lK=Ky[" useId ".trim().toString()]||(()=>{}),cK=0;function vf(t){const[e,n]=x.useState(lK());return li(()=>{n(i=>i??String(cK++))},[t]),e?`radix-${e}`:""}var uK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qe=uK.reduce((t,e)=>{const n=Wd(`Primitive.${e}`),i=x.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function CC(t,e){t&&Kl.flushSync(()=>t.dispatchEvent(e))}function Mr(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}var dK=Ky[" useInsertionEffect ".trim().toString()]||li;function Nl({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,o]=fK({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=x.useRef(t!==void 0);x.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=x.useCallback(u=>{var d;if(a){const f=hK(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function fK({defaultProp:t,onChange:e}){const[n,i]=x.useState(t),r=x.useRef(n),s=x.useRef(e);return dK(()=>{s.current=e},[e]),x.useEffect(()=>{var o;r.current!==n&&((o=s.current)==null||o.call(s,n),r.current=n)},[n,r]),[n,i,s]}function hK(t){return typeof t=="function"}var pK=x.createContext(void 0);function gb(t){const e=x.useContext(pK);return t||e||"ltr"}var dw="rovingFocusGroup.onEntryFocus",mK={bubbles:!1,cancelable:!0},ym="RovingFocusGroup",[r2,XD,gK]=vm(ym),[vK,vb]=js(ym,[gK]),[yK,bK]=vK(ym),qD=x.forwardRef((t,e)=>h.jsx(r2.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(r2.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(xK,{...t,ref:e})})}));qD.displayName=ym;var xK=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=x.useRef(null),p=xt(e,f),g=gb(s),[m,v]=Nl({prop:o,defaultProp:a??null,onChange:l,caller:ym}),[y,b]=x.useState(!1),w=Mr(c),k=XD(n),_=x.useRef(!1),[E,C]=x.useState(0);return x.useEffect(()=>{const P=f.current;if(P)return P.addEventListener(dw,w),()=>P.removeEventListener(dw,w)},[w]),h.jsx(yK,{scope:n,orientation:i,dir:g,loop:r,currentTabStopId:m,onItemFocus:x.useCallback(P=>v(P),[v]),onItemShiftTab:x.useCallback(()=>b(!0),[]),onFocusableItemAdd:x.useCallback(()=>C(P=>P+1),[]),onFocusableItemRemove:x.useCallback(()=>C(P=>P-1),[]),children:h.jsx(Qe.div,{tabIndex:y||E===0?-1:0,"data-orientation":i,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:ke(t.onMouseDown,()=>{_.current=!0}),onFocus:ke(t.onFocus,P=>{const T=!_.current;if(P.target===P.currentTarget&&T&&!y){const I=new CustomEvent(dw,mK);if(P.currentTarget.dispatchEvent(I),!I.defaultPrevented){const L=k().filter(J=>J.focusable),j=L.find(J=>J.active),X=L.find(J=>J.id===m),K=[j,X,...L].filter(Boolean).map(J=>J.ref.current);ZD(K,u)}}_.current=!1}),onBlur:ke(t.onBlur,()=>b(!1))})})}),YD="RovingFocusGroupItem",JD=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,children:o,...a}=t,l=vf(),c=s||l,u=bK(YD,n),d=u.currentTabStopId===c,f=XD(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:m}=u;return x.useEffect(()=>{if(i)return p(),()=>g()},[i,p,g]),h.jsx(r2.ItemSlot,{scope:n,id:c,focusable:i,active:r,children:h.jsx(Qe.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:ke(t.onMouseDown,v=>{i?u.onItemFocus(c):v.preventDefault()}),onFocus:ke(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ke(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=kK(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=f().filter(k=>k.focusable).map(k=>k.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const k=w.indexOf(v.currentTarget);w=u.loop?_K(w,k+1):w.slice(k+1)}setTimeout(()=>ZD(w))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:m!=null}):o})})});JD.displayName=YD;var wK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function SK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function kK(t,e,n){const i=SK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return wK[i]}function ZD(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function _K(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var QD=qD,ej=JD;function CK(t,e){return x.useReducer((n,i)=>e[n][i]??n,t)}var va=t=>{const{present:e,children:n}=t,i=EK(e),r=typeof n=="function"?n({present:i.isPresent}):x.Children.only(n),s=xt(i.ref,AK(r));return typeof n=="function"||i.isPresent?x.cloneElement(r,{ref:s}):null};va.displayName="Presence";function EK(t){const[e,n]=x.useState(),i=x.useRef(null),r=x.useRef(t),s=x.useRef("none"),o=t?"mounted":"unmounted",[a,l]=CK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=yg(i.current);s.current=a==="mounted"?c:"none"},[a]),li(()=>{const c=i.current,u=r.current;if(u!==t){const f=s.current,p=yg(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),li(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const m=yg(i.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!r.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(s.current=yg(i.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(c=>{i.current=c?getComputedStyle(c):null,n(c)},[])}}function yg(t){return(t==null?void 0:t.animationName)||"none"}function AK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var yb="Tabs",[NK,H0e]=js(yb,[vb]),tj=vb(),[PK,EC]=NK(yb),nj=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=gb(a),[d,f]=Nl({prop:i,onChange:r,defaultProp:s??"",caller:yb});return h.jsx(PK,{scope:n,baseId:vf(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:h.jsx(Qe.div,{dir:u,"data-orientation":o,...c,ref:e})})});nj.displayName=yb;var ij="TabsList",rj=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=EC(ij,n),o=tj(n);return h.jsx(QD,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:h.jsx(Qe.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});rj.displayName=ij;var sj="TabsTrigger",O0=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=EC(sj,n),a=tj(n),l=aj(o.baseId,i),c=lj(o.baseId,i),u=i===o.value;return h.jsx(ej,{asChild:!0,...a,focusable:!r,active:u,children:h.jsx(Qe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:ke(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:ke(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:ke(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});O0.displayName=sj;var oj="TabsContent",I0=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=EC(oj,n),l=aj(a.baseId,i),c=lj(a.baseId,i),u=i===a.value,d=x.useRef(u);return x.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(va,{present:r||u,children:({present:f})=>h.jsx(Qe.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});I0.displayName=oj;function aj(t,e){return`${t}-trigger-${e}`}function lj(t,e){return`${t}-content-${e}`}const ph={},pM=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,mM=t=>"init"in t,fw=t=>!!t.write,gM=t=>"v"in t||"e"in t,bg=t=>{if("e"in t)throw t.e;if((ph?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},zv=new WeakMap,vM=t=>{var e;return Uv(t)&&!!((e=zv.get(t))!=null&&e[0])},MK=t=>{const e=zv.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},cj=(t,e)=>{let n=zv.get(t);if(!n){n=[!0,new Set],zv.set(t,n);const i=()=>{n[0]=!1};t.then(i,i)}n[1].add(e)},Uv=t=>typeof(t==null?void 0:t.then)=="function",uj=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},hw=(t,e,n)=>{const i=n(t),r="v"in i,s=i.v;if(Uv(e))for(const o of i.d.keys())uj(t,e,n(o));i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,Uv(s)&&MK(s))},yM=(t,e,n)=>{var i;const r=new Set;for(const s of((i=n.get(t))==null?void 0:i.t)||[])n.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},RK=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},pw=()=>{const t={},e=new WeakMap,n=i=>{var r,s;(r=e.get(t))==null||r.forEach(o=>o(i)),(s=e.get(i))==null||s.forEach(o=>o())};return n.add=(i,r)=>{const s=i||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(r),()=>{o==null||o.delete(r),o.size||e.delete(s)}},n},TK=t=>(t.c||(t.c=pw()),t.m||(t.m=pw()),t.u||(t.u=pw()),t.f||(t.f=RK()),t),OK=Symbol(),IK=(t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new Set,r=new Set,s=new Set,o={},a=(f,...p)=>f.read(...p),l=(f,...p)=>f.write(...p),c=(f,p)=>{var g;return(g=f.unstable_onInit)==null?void 0:g.call(f,p)},u=(f,p)=>{var g;return(g=f.onMount)==null?void 0:g.call(f,p)},...d)=>{const f=d[0]||(C=>{if((ph?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let P=t.get(C);return P||(P={d:new Map,p:new Set,n:0},t.set(C,P),c==null||c(C,E)),P}),p=d[1]||(()=>{const C=[],P=T=>{try{T()}catch(I){C.push(I)}};do{o.f&&P(o.f);const T=new Set,I=T.add.bind(T);i.forEach(L=>{var j;return(j=e.get(L))==null?void 0:j.l.forEach(I)}),i.clear(),s.forEach(I),s.clear(),r.forEach(I),r.clear(),T.forEach(P),i.size&&g()}while(i.size||s.size||r.size);if(C.length)throw new AggregateError(C)}),g=d[2]||(()=>{const C=[],P=new WeakSet,T=new WeakSet,I=Array.from(i);for(;I.length;){const L=I[I.length-1],j=f(L);if(T.has(L)){I.pop();continue}if(P.has(L)){if(n.get(L)===j.n)C.push([L,j]);else if((ph?"production":void 0)!=="production"&&n.has(L))throw new Error("[Bug] invalidated atom exists");T.add(L),I.pop();continue}P.add(L);for(const X of yM(L,j,e))P.has(X)||I.push(X)}for(let L=C.length-1;L>=0;--L){const[j,X]=C[L];let $=!1;for(const K of X.d.keys())if(K!==j&&i.has(K)){$=!0;break}$&&(m(j),b(j)),n.delete(j)}}),m=d[3]||(C=>{var P;const T=f(C);if(gM(T)&&(e.has(C)&&n.get(C)!==T.n||Array.from(T.d).every(([Q,W])=>m(Q).n===W)))return T;T.d.clear();let I=!0;const L=()=>{e.has(C)&&(b(C),g(),p())},j=Q=>{var W;if(pM(C,Q)){const re=f(Q);if(!gM(re))if(mM(Q))hw(Q,Q.init,f);else throw new Error("no atom init");return bg(re)}const U=m(Q);try{return bg(U)}finally{T.d.set(Q,U.n),vM(T.v)&&uj(C,T.v,U),(W=e.get(Q))==null||W.t.add(C),I||L()}};let X,$;const K={get signal(){return X||(X=new AbortController),X.signal},get setSelf(){return(ph?"production":void 0)!=="production"&&!fw(C)&&console.warn("setSelf function cannot be used with read-only atom"),!$&&fw(C)&&($=(...Q)=>{if((ph?"production":void 0)!=="production"&&I&&console.warn("setSelf function cannot be called in sync"),!I)try{return y(C,...Q)}finally{g(),p()}}),$}},J=T.n;try{const Q=a(C,j,K);return hw(C,Q,f),Uv(Q)&&(cj(Q,()=>X==null?void 0:X.abort()),Q.then(L,L)),T}catch(Q){return delete T.v,T.e=Q,++T.n,T}finally{I=!1,J!==T.n&&n.get(C)===J&&(n.set(C,T.n),i.add(C),(P=o.c)==null||P.call(o,C))}}),v=d[4]||(C=>{const P=[C];for(;P.length;){const T=P.pop(),I=f(T);for(const L of yM(T,I,e)){const j=f(L);n.set(L,j.n),P.push(L)}}}),y=d[5]||((C,...P)=>{let T=!0;const I=j=>bg(m(j)),L=(j,...X)=>{var $;const K=f(j);try{if(pM(C,j)){if(!mM(j))throw new Error("atom not writable");const J=K.n,Q=X[0];hw(j,Q,f),b(j),J!==K.n&&(i.add(j),($=o.c)==null||$.call(o,j),v(j));return}else return y(j,...X)}finally{T||(g(),p())}};try{return l(C,I,L,...P)}finally{T=!1}}),b=d[6]||(C=>{var P;const T=f(C),I=e.get(C);if(I&&!vM(T.v)){for(const[L,j]of T.d)if(!I.d.has(L)){const X=f(L);w(L).t.add(C),I.d.add(L),j!==X.n&&(i.add(L),(P=o.c)==null||P.call(o,L),v(L))}for(const L of I.d||[])if(!T.d.has(L)){I.d.delete(L);const j=k(L);j==null||j.t.delete(C)}}}),w=d[7]||(C=>{var P;const T=f(C);let I=e.get(C);if(!I){m(C);for(const L of T.d.keys())w(L).t.add(C);if(I={l:new Set,d:new Set(T.d.keys()),t:new Set},e.set(C,I),(P=o.m)==null||P.call(o,C),fw(C)){const L=()=>{let j=!0;const X=(...$)=>{try{return y(C,...$)}finally{j||(g(),p())}};try{const $=u(C,X);$&&(I.u=()=>{j=!0;try{$()}finally{j=!1}})}finally{j=!1}};r.add(L)}}return I}),k=d[8]||(C=>{var P;const T=f(C);let I=e.get(C);if(I&&!I.l.size&&!Array.from(I.t).some(L=>{var j;return(j=e.get(L))==null?void 0:j.d.has(C)})){I.u&&s.add(I.u),I=void 0,e.delete(C),(P=o.u)==null||P.call(o,C);for(const L of T.d.keys()){const j=k(L);j==null||j.t.delete(C)}return}return I}),_=[t,e,n,i,r,s,o,a,l,c,u,f,p,g,m,v,y,b,w,k],E={get:C=>bg(m(C)),set:(C,...P)=>{try{return y(C,...P)}finally{g(),p()}},sub:(C,P)=>{const I=w(C).l;return I.add(P),p(),()=>{I.delete(P),k(C),p()}}};return Object.defineProperty(E,OK,{value:_}),E},dj=IK,DK=TK,bM=cj,AC={};let jK=0;function fe(t,e){const n=`atom${++jK}`,i={toString(){return(AC?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=LK,i.write=BK),e&&(i.write=e),i}function LK(t){return t(this)}function BK(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const $K=()=>{let t=0;const e=DK({}),n=new WeakMap,i=new WeakMap,r=dj(n,i,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>t?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=i.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++t;try{for(const[d,f]of a)"init"in d&&u(d,f)}finally{--t}}};r.set(l)}})};function NC(){return(AC?"production":void 0)!=="production"?$K():dj()}let zf;function FK(){return zf||(zf=NC(),(AC?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=zf),globalThis.__JOTAI_DEFAULT_STORE__!==zf&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),zf}const zK={},fj=x.createContext(void 0);function hj(t){return x.useContext(fj)||FK()}function UK({children:t,store:e}){const n=x.useRef(void 0);return!e&&!n.current&&(n.current=NC()),x.createElement(fj.Provider,{value:e||n.current},t)}const s2=t=>typeof(t==null?void 0:t.then)=="function",o2=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},VK=Yt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(o2(t),t)}),mw=new WeakMap,xM=(t,e)=>{let n=mw.get(t);return n||(n=new Promise((i,r)=>{let s=t;const o=c=>u=>{s===c&&i(u)},a=c=>u=>{s===c&&r(u)},l=()=>{try{const c=e();s2(c)?(mw.set(c,n),s=c,c.then(o(c),a(c)),bM(c,l)):i(c)}catch(c){r(c)}};t.then(o(t),a(t)),bM(t,l)}),mw.set(t,n)),n};function st(t,e){const{delay:n,unstable_promiseStatus:i=!Yt.use}={},r=hj(),[[s,o,a],l]=x.useReducer(u=>{const d=r.get(t);return Object.is(u[0],d)&&u[1]===r&&u[2]===t?u:[d,r,t]},void 0,()=>[r.get(t),r,t]);let c=s;if((o!==r||a!==t)&&(l(),c=r.get(t)),x.useEffect(()=>{const u=r.sub(t,()=>{if(i)try{const d=r.get(t);s2(d)&&o2(xM(d,()=>r.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),u},[r,t,n,i]),x.useDebugValue(c),s2(c)){const u=xM(c,()=>r.get(t));return i&&o2(u),VK(u)}return c}function kp(t,e){const n=hj();return x.useCallback((...r)=>{if((zK?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function bm(t,e){return[st(t),kp(t)]}const{createElement:Gd,createContext:HK,forwardRef:pj,useCallback:Ui,useContext:mj,useEffect:Lc,useImperativeHandle:gj,useLayoutEffect:WK,useMemo:GK,useRef:yr,useState:Vv}=Ky,wM=Ky.useId,bb=HK(null);bb.displayName="PanelGroupContext";const _p=WK,KK=typeof wM=="function"?wM:()=>null;let XK=0;function PC(t=null){const e=KK(),n=yr(t||e||null);return n.current===null&&(n.current=""+XK++),t??n.current}function vj({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:p,tagName:g="div",...m}){const v=mj(bb);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:b,getPanelSize:w,getPanelStyle:k,groupId:_,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:P,resizePanel:T,unregisterPanel:I}=v,L=PC(o),j=yr({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:L,idIsFromProps:o!==void 0,order:f});yr({didLogMissingDefaultSizeWarning:!1}),_p(()=>{const{callbacks:$,constraints:K}=j.current,J={...K};j.current.id=L,j.current.idIsFromProps=o!==void 0,j.current.order=f,$.onCollapse=c,$.onExpand=u,$.onResize=d,K.collapsedSize=n,K.collapsible=i,K.defaultSize=r,K.maxSize=a,K.minSize=l,(J.collapsedSize!==K.collapsedSize||J.collapsible!==K.collapsible||J.maxSize!==K.maxSize||J.minSize!==K.minSize)&&C(j.current,J)}),_p(()=>{const $=j.current;return P($),()=>{I($)}},[f,L,P,I]),gj(s,()=>({collapse:()=>{y(j.current)},expand:()=>{b(j.current)},getId(){return L},getSize(){return w(j.current)},isCollapsed(){return E(j.current)},isExpanded(){return!E(j.current)},resize:$=>{T(j.current,$)}}),[y,b,w,E,L,T]);const X=k(j.current,r);return Gd(g,{...m,children:t,className:e,style:{...X,...p},"data-panel":"","data-panel-id":L,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const D0=pj((t,e)=>Gd(vj,{...t,forwardedRef:e}));vj.displayName="Panel";D0.displayName="forwardRef(Panel)";function lt(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const yj=10;function Cp(t,e,n=yj){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function mr(t,e,n){return Cp(t,e,n)===0}function ed({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];lt(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(Cp(n,a)<0)if(s){const l=(r+a)/2;Cp(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(yj)),n}function mh({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(mr(t,0))return e;const s=[...e],[o,a]=i;lt(o!=null),lt(a!=null);let l=0;if(r==="keyboard"){{const u=t<0?a:o,d=n[u];if(lt(d),d.collapsible){const f=e[u];lt(f!=null);const p=n[u];lt(p);const{collapsedSize:g=0,minSize:m=0}=p;if(mr(f,g)){const v=m-f;Cp(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}{const u=t<0?o:a,d=n[u];lt(d);const{collapsible:f}=d;if(f){const p=e[u];lt(p!=null);const g=n[u];lt(g);const{collapsedSize:m=0,minSize:v=0}=g;if(mr(p,v)){const y=p-m;Cp(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const g=e[d];lt(g!=null);const v=ed({panelConstraints:n,panelIndex:d,size:100})-g;if(f+=v,d+=u,d<0||d>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-p:p}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),p=e[d];lt(p!=null);const g=p-f,m=ed({panelConstraints:n,panelIndex:d,size:g});if(!mr(p,m)&&(l+=p-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(mr(l,0))return e;{const u=t<0?a:o,d=e[u];lt(d!=null);const f=d+l,p=ed({panelConstraints:n,panelIndex:u,size:f});if(s[u]=p,!mr(p,f)){let g=f-p,v=t<0?a:o;for(;v>=0&&v<n.length;){const y=s[v];lt(y!=null);const b=y+g,w=ed({panelConstraints:n,panelIndex:v,size:b});if(mr(y,w)||(g-=w-y,s[v]=w),mr(g,0))break;t>0?v--:v++}}}const c=s.reduce((u,d)=>d+u,0);return mr(c,100)?s:e}function qK({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];lt(a!=null),e.forEach((d,f)=>{const{constraints:p}=d,{maxSize:g=100,minSize:m=0}=p;f===a?(i=m,r=g):(s+=m,o+=g)});const l=Math.min(r,100-s),c=Math.max(i,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function Ep(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function bj(t,e,n=document){const r=Ep(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function xj(t,e,n){const i=bj(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function wj(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function xb(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function YK(t,e,n,i=document){var r,s,o,a;const l=xb(e,i),c=Ep(t,i),u=l?c.indexOf(l):-1,d=(r=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function JK({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){yr({didWarnAboutMissingResizeHandle:!1}),_p(()=>{if(!s)return;const a=Ep(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=qK({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const p=r[l];lt(p),f.setAttribute("aria-controls",p.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),Lc(()=>{if(!s)return;const a=e.current;lt(a);const{panelDataArray:l}=a,c=wj(n,s);lt(c!=null,`No group found for id "${n}"`);const u=Ep(n,s);lt(u);const d=u.map(f=>{const p=f.getAttribute("data-panel-resize-handle-id");lt(p);const[g,m]=YK(n,p,l,s);if(g==null||m==null)return()=>{};const v=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const b=l.findIndex(w=>w.id===g);if(b>=0){const w=l[b];lt(w);const k=i[b],{collapsedSize:_=0,collapsible:E,minSize:C=0}=w.constraints;if(k!=null&&E){const P=mh({delta:mr(k,_)?C-_:_-k,layout:i,panelConstraints:l.map(T=>T.constraints),pivotIndices:xj(n,p,s),trigger:"keyboard"});i!==P&&o(P)}}break}}};return f.addEventListener("keydown",v),()=>{f.removeEventListener("keydown",v)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,i,r,o])}function SM(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Sj(t){return t.type==="keydown"}function kj(t){return t.type.startsWith("mouse")}function _j(t){return t.type.startsWith("touch")}function Cj(t,e){const n=t==="horizontal";if(kj(e))return n?e.clientX:e.clientY;if(_j(e)){const i=e.touches[0];return lt(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function ZK(t,e,n,i,r){const s=n==="horizontal",o=xb(e,r);lt(o);const a=o.getAttribute("data-panel-group-id");lt(a);let{initialCursorPosition:l}=i;const c=Cj(n,t),u=wj(a,r);lt(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function QK(t,e,n,i,r,s){if(Sj(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:ZK(t,e,n,i,s)}function eX({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];lt(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];lt(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,c=r/l;i++,e[s]=c,r-=c}return e}function yu(t,e,n){e.forEach((i,r)=>{const s=t[r];lt(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:f,onExpand:p,onResize:g}=o;g&&g(i,d),u&&(f||p)&&(p&&(d==null||d===c)&&i!==c&&p(),f&&(d==null||d!==c)&&i===c&&f())}})}function xg(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function tX({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let a2=null,Mc=null;function Ej(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function nX(){Mc!==null&&(document.head.removeChild(Mc),a2=null,Mc=null)}function gw(t){if(a2===t)return;a2=t;const e=Ej(t);Mc===null&&(Mc=document.createElement("style"),document.head.appendChild(Mc)),Mc.innerHTML=`*{cursor: ${e}!important;}`}function iX(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function kM(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function Aj(t){return`react-resizable-panels:${t}`}function Nj(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function Pj(t,e){try{const n=Aj(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function rX(t,e,n){var i,r;const s=(i=Pj(t,n))!==null&&i!==void 0?i:{},o=Nj(e);return(r=s[o])!==null&&r!==void 0?r:null}function sX(t,e,n,i,r){var s;const o=Aj(t),a=Nj(e),l=(s=Pj(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function _M({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!mr(i,100))for(let s=0;s<e.length;s++){const o=n[s];lt(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];lt(o!=null);const a=ed({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!mr(r,0))for(let s=0;s<e.length;s++){const o=n[s];lt(o!=null);const a=o+r,l=ed({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,mr(r,0)))break}return n}const oX=100,gh={getItem:t=>(kM(gh),gh.getItem(t)),setItem:(t,e)=>{kM(gh),gh.setItem(t,e)}},CM={};function Mj({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=gh,style:c,tagName:u="div",...d}){const f=PC(s),p=yr(null),[g,m]=Vv(null),[v,y]=Vv([]),b=yr({}),w=yr(new Map),k=yr(0),_=yr({autoSaveId:t,direction:i,dragState:g,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),E=yr({layout:v,panelDataArray:[],panelDataArrayChanged:!1});yr({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),gj(r,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:Z}=E.current;return Z},setLayout:Z=>{const{onLayout:oe}=_.current,{layout:z,panelDataArray:B}=E.current,H=_M({layout:Z,panelConstraints:B.map(S=>S.constraints)});SM(z,H)||(y(H),E.current.layout=H,oe&&oe(H),yu(B,H,b.current))}}),[]),_p(()=>{_.current.autoSaveId=t,_.current.direction=i,_.current.dragState=g,_.current.id=f,_.current.onLayout=o,_.current.storage=l}),JK({committedValuesRef:_,eagerValuesRef:E,groupId:f,layout:v,panelDataArray:E.current.panelDataArray,setLayout:y,panelGroupElement:p.current}),Lc(()=>{const{panelDataArray:Z}=E.current;if(t){if(v.length===0||v.length!==Z.length)return;let oe=CM[t];oe==null&&(oe=iX(sX,oX),CM[t]=oe);const z=[...Z],B=new Map(w.current);oe(t,z,B,v,l)}},[t,v,l]),Lc(()=>{});const C=Ui(Z=>{const{onLayout:oe}=_.current,{layout:z,panelDataArray:B}=E.current;if(Z.constraints.collapsible){const H=B.map(O=>O.constraints),{collapsedSize:S=0,panelSize:M,pivotIndices:D}=lc(B,Z,z);if(lt(M!=null),M!==S){w.current.set(Z.id,M);const Y=Tu(B,Z)===B.length-1?M-S:S-M,G=mh({delta:Y,layout:z,panelConstraints:H,pivotIndices:D,trigger:"imperative-api"});xg(z,G)||(y(G),E.current.layout=G,oe&&oe(G),yu(B,G,b.current))}}},[]),P=Ui(Z=>{const{onLayout:oe}=_.current,{layout:z,panelDataArray:B}=E.current;if(Z.constraints.collapsible){const H=B.map(Y=>Y.constraints),{collapsedSize:S=0,panelSize:M,minSize:D=0,pivotIndices:O}=lc(B,Z,z);if(M===S){const Y=w.current.get(Z.id),G=Y!=null&&Y>=D?Y:D,ee=Tu(B,Z)===B.length-1?M-G:G-M,Ie=mh({delta:ee,layout:z,panelConstraints:H,pivotIndices:O,trigger:"imperative-api"});xg(z,Ie)||(y(Ie),E.current.layout=Ie,oe&&oe(Ie),yu(B,Ie,b.current))}}},[]),T=Ui(Z=>{const{layout:oe,panelDataArray:z}=E.current,{panelSize:B}=lc(z,Z,oe);return lt(B!=null),B},[]),I=Ui((Z,oe)=>{const{panelDataArray:z}=E.current,B=Tu(z,Z);return tX({defaultSize:oe,dragState:g,layout:v,panelData:z,panelIndex:B})},[g,v]),L=Ui(Z=>{const{layout:oe,panelDataArray:z}=E.current,{collapsedSize:B=0,collapsible:H,panelSize:S}=lc(z,Z,oe);return H===!0&&S===B},[]),j=Ui(Z=>{const{layout:oe,panelDataArray:z}=E.current,{collapsedSize:B=0,collapsible:H,panelSize:S}=lc(z,Z,oe);return lt(S!=null),!H||S>B},[]),X=Ui(Z=>{const{panelDataArray:oe}=E.current;oe.push(Z),oe.sort((z,B)=>{const H=z.order,S=B.order;return H==null&&S==null?0:H==null?-1:S==null?1:H-S}),E.current.panelDataArrayChanged=!0},[]);_p(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:Z,onLayout:oe,storage:z}=_.current,{layout:B,panelDataArray:H}=E.current;let S=null;if(Z){const D=rX(Z,H,z);D&&(w.current=new Map(Object.entries(D.expandToSizes)),S=D.layout)}S==null&&(S=eX({panelDataArray:H}));const M=_M({layout:S,panelConstraints:H.map(D=>D.constraints)});SM(B,M)||(y(M),E.current.layout=M,oe&&oe(M),yu(H,M,b.current))}});const $=Ui(Z=>function(z){z.preventDefault();const B=p.current;if(!B)return()=>null;const{direction:H,dragState:S,id:M,keyboardResizeBy:D,onLayout:O}=_.current,{layout:Y,panelDataArray:G}=E.current,{initialLayout:ie}=S??{},ee=xj(M,Z,B);let Ie=QK(z,Z,H,S,D,B);if(Ie===0)return;const He=H==="horizontal";document.dir==="rtl"&&He&&(Ie=-Ie);const Xe=G.map(we=>we.constraints),ze=mh({delta:Ie,layout:ie??Y,panelConstraints:Xe,pivotIndices:ee,trigger:Sj(z)?"keyboard":"mouse-or-touch"}),it=!xg(Y,ze);(kj(z)||_j(z))&&k.current!=Ie&&(k.current=Ie,gw(it?He?"horizontal":"vertical":He?Ie<0?"horizontal-min":"horizontal-max":Ie<0?"vertical-min":"vertical-max")),it&&(y(ze),E.current.layout=ze,O&&O(ze),yu(G,ze,b.current))},[]),K=Ui((Z,oe)=>{const{onLayout:z}=_.current,{layout:B,panelDataArray:H}=E.current,S=H.map(ie=>ie.constraints),{panelSize:M,pivotIndices:D}=lc(H,Z,B);lt(M!=null);const Y=Tu(H,Z)===H.length-1?M-oe:oe-M,G=mh({delta:Y,layout:B,panelConstraints:S,pivotIndices:D,trigger:"imperative-api"});xg(B,G)||(y(G),E.current.layout=G,z&&z(G),yu(H,G,b.current))},[]),J=Ui((Z,oe)=>{const{layout:z,panelDataArray:B}=E.current,{collapsedSize:H=0,collapsible:S}=oe,{collapsedSize:M=0,collapsible:D,maxSize:O=100,minSize:Y=0}=Z.constraints,{panelSize:G}=lc(B,Z,z);lt(G!=null),S&&D&&G===H?H!==M&&K(Z,M):G<Y?K(Z,Y):G>O&&K(Z,O)},[K]),Q=Ui((Z,oe)=>{const{direction:z}=_.current,{layout:B}=E.current;if(!p.current)return;const H=xb(Z,p.current);lt(H);const S=Cj(z,oe);m({dragHandleId:Z,dragHandleRect:H.getBoundingClientRect(),initialCursorPosition:S,initialLayout:B})},[]),W=Ui(()=>{nX(),m(null)},[]),U=Ui(Z=>{const{panelDataArray:oe}=E.current,z=Tu(oe,Z);z>=0&&(oe.splice(z,1),delete b.current[Z.id],E.current.panelDataArrayChanged=!0)},[]),re=GK(()=>({collapsePanel:C,direction:i,dragState:g,expandPanel:P,getPanelSize:T,getPanelStyle:I,groupId:f,isPanelCollapsed:L,isPanelExpanded:j,reevaluatePanelConstraints:J,registerPanel:X,registerResizeHandle:$,resizePanel:K,startDragging:Q,stopDragging:W,unregisterPanel:U,panelGroupElement:p.current}),[C,g,i,P,T,I,f,L,j,J,X,$,K,Q,W,U]),ve={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Gd(bb.Provider,{value:re},Gd(u,{...d,children:e,className:n,style:{...ve,...c},ref:p,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":f}))}const Rj=pj((t,e)=>Gd(Mj,{...t,forwardedRef:e}));Mj.displayName="PanelGroup";Rj.displayName="forwardRef(PanelGroup)";function Tu(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function lc(t,e,n){const i=Tu(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function aX({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){Lc(()=>{if(t||n==null||i==null)return;const r=xb(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");lt(a);const l=Ep(a,i),c=bj(a,e,i);lt(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function l2({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=yr(null),u=yr({onDragging:r});Lc(()=>{u.current.onDragging=r});const d=mj(bb);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:p,groupId:g,registerResizeHandle:m,startDragging:v,stopDragging:y,panelGroupElement:b}=d,w=PC(i),k=(p==null?void 0:p.dragHandleId)===w,[_,E]=Vv(!1),[C,P]=Vv(null),T=Ui(()=>{const L=c.current;lt(L),L.blur(),y();const{onDragging:j}=u.current;j&&j(!1)},[y]);Lc(()=>{if(n)P(null);else{const L=m(w);P(()=>L)}},[n,w,m]),Lc(()=>{if(n||C==null||!k)return;const L=K=>{C(K)},j=K=>{C(K)},X=c.current;lt(X);const $=X.ownerDocument;return $.body.addEventListener("contextmenu",T),$.body.addEventListener("mousemove",L),$.body.addEventListener("touchmove",L),$.body.addEventListener("mouseleave",j),window.addEventListener("mouseup",T),window.addEventListener("touchend",T),()=>{$.body.removeEventListener("contextmenu",T),$.body.removeEventListener("mousemove",L),$.body.removeEventListener("touchmove",L),$.body.removeEventListener("mouseleave",j),window.removeEventListener("mouseup",T),window.removeEventListener("touchend",T)}},[f,n,k,C,T]),aX({disabled:n,handleId:w,resizeHandler:C,panelGroupElement:b});const I={cursor:Ej(f),touchAction:"none",userSelect:"none"};return Gd(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:L=>{v(w,L.nativeEvent);const j=u.current;lt(j);const{onDragging:X}=j;X&&X(!0)},onMouseUp:T,onTouchCancel:T,onTouchEnd:T,onTouchStart:L=>{v(w,L.nativeEvent);const j=u.current;lt(j);const{onDragging:X}=j;X&&X(!0)},ref:c,role:"separator",style:{...I,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":g,"data-resize-handle":"","data-resize-handle-active":k?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w})}l2.displayName="PanelResizeHandle";var ro=function(){return ro=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ro.apply(this,arguments)};function Tj(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function lX(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var cX=function(){};function uX(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function dX(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var Oj=typeof window<"u",fX=Oj?window:null,EM=function(t){return!!t.addEventListener},AM=function(t){return!!t.on},hX=function(t,e,n,i){n===void 0&&(n=fX),x.useEffect(function(){if(e&&n)return EM(n)?uX(n,t,e,i):AM(n)&&n.on(t,e,i),function(){EM(n)?dX(n,t,e,i):AM(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},pX=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},Ou=function(t,e,n,i){e===void 0&&(e=cX),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=x.useMemo(function(){var c=pX(t),u=function(d){if(c(d))return e(d)};return u},i);hX(s,l,o,a)},mX=function(t,e){return Oj?window.matchMedia(t).matches:!1},gX=function(t,e){var n=x.useState(mX(t)),i=n[0],r=n[1];return x.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const vX={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function yX(t,e,n){return(e=xX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NM(Object(n),!0).forEach(function(i){yX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function bX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xX(t){var e=bX(t,"string");return typeof e=="symbol"?e:e+""}const PM=()=>{};let MC={},Ij={},Dj=null,jj={mark:PM,measure:PM};try{typeof window<"u"&&(MC=window),typeof document<"u"&&(Ij=document),typeof MutationObserver<"u"&&(Dj=MutationObserver),typeof performance<"u"&&(jj=performance)}catch{}const{userAgent:MM=""}=MC.navigator||{},Pl=MC,Qt=Ij,RM=Dj,wg=jj;Pl.document;const ya=!!Qt.documentElement&&!!Qt.head&&typeof Qt.addEventListener=="function"&&typeof Qt.createElement=="function",Lj=~MM.indexOf("MSIE")||~MM.indexOf("Trident/");var wX=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,SX=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,Bj={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},kX={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},$j=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],xi="classic",wb="duotone",_X="sharp",CX="sharp-duotone",Fj=[xi,wb,_X,CX],EX={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},AX={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},NX=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),PX={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},MX=["fak","fa-kit","fakd","fa-kit-duotone"],TM={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},RX=["kit"],TX={kit:{"fa-kit":"fak"}},OX=["fak","fakd"],IX={kit:{fak:"fa-kit"}},OM={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Sg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},DX=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],jX=["fak","fa-kit","fakd","fa-kit-duotone"],LX={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},BX={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},$X={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},c2={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},FX=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],u2=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...DX,...FX],zX=["solid","regular","light","thin","duotone","brands"],zj=[1,2,3,4,5,6,7,8,9,10],UX=zj.concat([11,12,13,14,15,16,17,18,19,20]),VX=[...Object.keys($X),...zX,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Sg.GROUP,Sg.SWAP_OPACITY,Sg.PRIMARY,Sg.SECONDARY].concat(zj.map(t=>"".concat(t,"x"))).concat(UX.map(t=>"w-".concat(t))),HX={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const ua="___FONT_AWESOME___",d2=16,Uj="fa",Vj="svg-inline--fa",Xc="data-fa-i2svg",f2="data-fa-pseudo-element",WX="data-fa-pseudo-element-pending",RC="data-prefix",TC="data-icon",IM="fontawesome-i2svg",GX="async",KX=["HTML","HEAD","STYLE","SCRIPT"],Hj=(()=>{try{return!0}catch{return!1}})();function xm(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[xi]}})}const Wj=le({},Bj);Wj[xi]=le(le(le(le({},{"fa-duotone":"duotone"}),Bj[xi]),TM.kit),TM["kit-duotone"]);const XX=xm(Wj),h2=le({},PX);h2[xi]=le(le(le(le({},{duotone:"fad"}),h2[xi]),OM.kit),OM["kit-duotone"]);const DM=xm(h2),p2=le({},c2);p2[xi]=le(le({},p2[xi]),IX.kit);const OC=xm(p2),m2=le({},BX);m2[xi]=le(le({},m2[xi]),TX.kit);xm(m2);const qX=wX,Gj="fa-layers-text",YX=SX,JX=le({},EX);xm(JX);const ZX=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],vw=kX,QX=[...RX,...VX],Fh=Pl.FontAwesomeConfig||{};function eq(t){var e=Qt.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function tq(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Qt&&typeof Qt.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=tq(eq(n));r!=null&&(Fh[i]=r)});const Kj={styleDefault:"solid",familyDefault:xi,cssPrefix:Uj,replacementClass:Vj,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Fh.familyPrefix&&(Fh.cssPrefix=Fh.familyPrefix);const Kd=le(le({},Kj),Fh);Kd.autoReplaceSvg||(Kd.observeMutations=!1);const $e={};Object.keys(Kj).forEach(t=>{Object.defineProperty($e,t,{enumerable:!0,set:function(e){Kd[t]=e,zh.forEach(n=>n($e))},get:function(){return Kd[t]}})});Object.defineProperty($e,"familyPrefix",{enumerable:!0,set:function(t){Kd.cssPrefix=t,zh.forEach(e=>e($e))},get:function(){return Kd.cssPrefix}});Pl.FontAwesomeConfig=$e;const zh=[];function nq(t){return zh.push(t),()=>{zh.splice(zh.indexOf(t),1)}}const Na=d2,uo={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function iq(t){if(!t||!ya)return;const e=Qt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Qt.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Qt.head.insertBefore(e,i),t}const rq="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Ap(){let t=12,e="";for(;t-- >0;)e+=rq[Math.random()*62|0];return e}function yf(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function IC(t){return t.classList?yf(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function Xj(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function sq(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(Xj(t[n]),'" '),"").trim()}function Sb(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function DC(t){return t.size!==uo.size||t.x!==uo.x||t.y!==uo.y||t.rotate!==uo.rotate||t.flipX||t.flipY}function oq(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function aq(t){let{transform:e,width:n=d2,height:i=d2,startCentered:r=!1}=t,s="";return r&&Lj?s+="translate(".concat(e.x/Na-n/2,"em, ").concat(e.y/Na-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/Na,"em), calc(-50% + ").concat(e.y/Na,"em)) "):s+="translate(".concat(e.x/Na,"em, ").concat(e.y/Na,"em) "),s+="scale(".concat(e.size/Na*(e.flipX?-1:1),", ").concat(e.size/Na*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var lq=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function qj(){const t=Uj,e=Vj,n=$e.cssPrefix,i=$e.replacementClass;let r=lq;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let jM=!1;function yw(){$e.autoAddCss&&!jM&&(iq(qj()),jM=!0)}var cq={mixout(){return{dom:{css:qj,insertCss:yw}}},hooks(){return{beforeDOMElementCreation(){yw()},beforeI2svg(){yw()}}}};const da=Pl||{};da[ua]||(da[ua]={});da[ua].styles||(da[ua].styles={});da[ua].hooks||(da[ua].hooks={});da[ua].shims||(da[ua].shims=[]);var fo=da[ua];const Yj=[],Jj=function(){Qt.removeEventListener("DOMContentLoaded",Jj),Hv=1,Yj.map(t=>t())};let Hv=!1;ya&&(Hv=(Qt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Qt.readyState),Hv||Qt.addEventListener("DOMContentLoaded",Jj));function uq(t){ya&&(Hv?setTimeout(t,0):Yj.push(t))}function wm(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?Xj(t):"<".concat(e," ").concat(sq(n),">").concat(i.map(wm).join(""),"</").concat(e,">")}function LM(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var bw=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function dq(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function g2(t){const e=dq(t);return e.length===1?e[0].toString(16):null}function fq(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function BM(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function v2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=BM(e);typeof fo.hooks.addPack=="function"&&!i?fo.hooks.addPack(t,BM(e)):fo.styles[t]=le(le({},fo.styles[t]||{}),r),t==="fas"&&v2("fa",e)}const{styles:Np,shims:hq}=fo,Zj=Object.keys(OC),pq=Zj.reduce((t,e)=>(t[e]=Object.keys(OC[e]),t),{});let jC=null,Qj={},eL={},tL={},nL={},iL={};function mq(t){return~QX.indexOf(t)}function gq(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!mq(r)?r:null}const rL=()=>{const t=i=>bw(Np,(r,s,o)=>(r[o]=bw(s,i,{}),r),{});Qj=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),eL=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),iL=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in Np||$e.autoFetchSvg,n=bw(hq,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});tL=n.names,nL=n.unicodes,jC=kb($e.styleDefault,{family:$e.familyDefault})};nq(t=>{jC=kb(t.styleDefault,{family:$e.familyDefault})});rL();function LC(t,e){return(Qj[t]||{})[e]}function vq(t,e){return(eL[t]||{})[e]}function Rc(t,e){return(iL[t]||{})[e]}function sL(t){return tL[t]||{prefix:null,iconName:null}}function yq(t){const e=nL[t],n=LC("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Ml(){return jC}const oL=()=>({prefix:null,iconName:null,rest:[]});function bq(t){let e=xi;const n=Zj.reduce((i,r)=>(i[r]="".concat($e.cssPrefix,"-").concat(r),i),{});return Fj.forEach(i=>{(t.includes(n[i])||t.some(r=>pq[i].includes(r)))&&(e=i)}),e}function kb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=xi}=e,i=XX[n][t];if(n===wb&&!t)return"fad";const r=DM[n][t]||DM[n][i],s=t in fo.styles?t:null;return r||s||null}function xq(t){let e=[],n=null;return t.forEach(i=>{const r=gq($e.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function $M(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function _b(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=u2.concat(jX),s=$M(t.filter(d=>r.includes(d))),o=$M(t.filter(d=>!u2.includes(d))),a=s.filter(d=>(i=d,!$j.includes(d))),[l=null]=a,c=bq(s),u=le(le({},xq(o)),{},{prefix:kb(l,{family:c})});return le(le(le({},u),_q({values:t,family:c,styles:Np,config:$e,canonical:u,givenPrefix:i})),wq(n,i,u))}function wq(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?sL(r):{},o=Rc(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!Np.far&&Np.fas&&!$e.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const Sq=Fj.filter(t=>t!==xi||t!==wb),kq=Object.keys(c2).filter(t=>t!==xi).map(t=>Object.keys(c2[t])).flat();function _q(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===wb,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||c||u)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&Sq.includes(n)&&(Object.keys(s).find(f=>kq.includes(f))||o.autoFetchSvg)){const f=NX.get(n).defaultShortPrefixId;i.prefix=f,i.iconName=Rc(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=Ml()||"fas"),i}class Cq{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=le(le({},this.definitions[s]||{}),r[s]),v2(s,r[s]);const o=OC[xi][s];o&&v2(o,r[s]),rL()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let FM=[],td={};const md={},Eq=Object.keys(md);function Aq(t,e){let{mixoutsTo:n}=e;return FM=t,td={},Object.keys(md).forEach(i=>{Eq.indexOf(i)===-1&&delete md[i]}),FM.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{td[o]||(td[o]=[]),td[o].push(s[o])})}i.provides&&i.provides(md)}),n}function y2(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(td[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function qc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(td[t]||[]).forEach(s=>{s.apply(null,n)})}function Rl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return md[t]?md[t].apply(null,e):void 0}function b2(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||Ml();if(e)return e=Rc(n,e)||e,LM(aL.definitions,n,e)||LM(fo.styles,n,e)}const aL=new Cq,Nq=()=>{$e.autoReplaceSvg=!1,$e.observeMutations=!1,qc("noAuto")},Pq={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ya?(qc("beforeI2svg",t),Rl("pseudoElements2svg",t),Rl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;$e.autoReplaceSvg===!1&&($e.autoReplaceSvg=!0),$e.observeMutations=!0,uq(()=>{Rq({autoReplaceSvgRoot:e}),qc("watch",t)})}},Mq={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Rc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=kb(t[0]);return{prefix:n,iconName:Rc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat($e.cssPrefix,"-"))>-1||t.match(qX))){const e=_b(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||Ml(),iconName:Rc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=Ml();return{prefix:e,iconName:Rc(e,t)||t}}}},Dr={noAuto:Nq,config:$e,dom:Pq,parse:Mq,library:aL,findIconDefinition:b2,toHtml:wm},Rq=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Qt}=t;(Object.keys(fo.styles).length>0||$e.autoFetchSvg)&&ya&&$e.autoReplaceSvg&&Dr.dom.i2svg({node:e})};function Cb(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>wm(n))}}),Object.defineProperty(t,"node",{get:function(){if(!ya)return;const n=Qt.createElement("div");return n.innerHTML=t.html,n.children}}),t}function Tq(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(DC(o)&&n.found&&!i.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};r.style=Sb(le(le({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function Oq(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat($e.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:le(le({},r),{},{id:o}),children:i}]}]}function BC(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:f,height:p}=n.found?n:e,g=OX.includes(i),m=[$e.replacementClass,r?"".concat($e.cssPrefix,"-").concat(r):""].filter(_=>u.classes.indexOf(_)===-1).filter(_=>_!==""||!!_).concat(u.classes).join(" ");let v={children:[],attributes:le(le({},u.attributes),{},{"data-prefix":i,"data-icon":r,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(p)})};const y=g&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/p*16*.0625,"em")}:{};d&&(v.attributes[Xc]=""),a&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(c||Ap())},children:[a]}),delete v.attributes.title);const b=le(le({},v),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:le(le({},y),u.styles)}),{children:w,attributes:k}=n.found&&e.found?Rl("generateAbstractMask",b)||{children:[],attributes:{}}:Rl("generateAbstractIcon",b)||{children:[],attributes:{}};return b.children=w,b.attributes=k,o?Oq(b):Tq(b)}function zM(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=le(le(le({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Xc]="");const c=le({},o.styles);DC(r)&&(c.transform=aq({transform:r,startCentered:!0,width:n,height:i}),c["-webkit-transform"]=c.transform);const u=Sb(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function Iq(t){const{content:e,title:n,extra:i}=t,r=le(le(le({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=Sb(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:xw}=fo;function x2(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat($e.cssPrefix,"-").concat(vw.GROUP)},children:[{tag:"path",attributes:{class:"".concat($e.cssPrefix,"-").concat(vw.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat($e.cssPrefix,"-").concat(vw.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const Dq={found:!1,width:512,height:512};function jq(t,e){!Hj&&!$e.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function w2(t,e){let n=e;return e==="fa"&&$e.styleDefault!==null&&(e=Ml()),new Promise((i,r)=>{if(n==="fa"){const s=sL(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&xw[e]&&xw[e][t]){const s=xw[e][t];return i(x2(s))}jq(t,e),i(le(le({},Dq),{},{icon:$e.showMissingIcons&&t?Rl("missingIconAbstract")||{}:{}}))})}const UM=()=>{},S2=$e.measurePerformance&&wg&&wg.mark&&wg.measure?wg:{mark:UM,measure:UM},vh='FA "6.7.1"',Lq=t=>(S2.mark("".concat(vh," ").concat(t," begins")),()=>lL(t)),lL=t=>{S2.mark("".concat(vh," ").concat(t," ends")),S2.measure("".concat(vh," ").concat(t),"".concat(vh," ").concat(t," begins"),"".concat(vh," ").concat(t," ends"))};var $C={begin:Lq,end:lL};const j0=()=>{};function VM(t){return typeof(t.getAttribute?t.getAttribute(Xc):null)=="string"}function Bq(t){const e=t.getAttribute?t.getAttribute(RC):null,n=t.getAttribute?t.getAttribute(TC):null;return e&&n}function $q(t){return t&&t.classList&&t.classList.contains&&t.classList.contains($e.replacementClass)}function Fq(){return $e.autoReplaceSvg===!0?L0.replace:L0[$e.autoReplaceSvg]||L0.replace}function zq(t){return Qt.createElementNS("http://www.w3.org/2000/svg",t)}function Uq(t){return Qt.createElement(t)}function cL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?zq:Uq}=e;if(typeof t=="string")return Qt.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(cL(s,{ceFn:n}))}),i}function Vq(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const L0={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(cL(n),e)}),e.getAttribute(Xc)===null&&$e.keepOriginalSource){let n=Qt.createComment(Vq(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~IC(e).indexOf($e.replacementClass))return L0.replace(t);const i=new RegExp("".concat($e.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===$e.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>wm(s)).join(`
`);e.setAttribute(Xc,""),e.innerHTML=r}};function HM(t){t()}function uL(t,e){const n=typeof e=="function"?e:j0;if(t.length===0)n();else{let i=HM;$e.mutateApproach===GX&&(i=Pl.requestAnimationFrame||HM),i(()=>{const r=Fq(),s=$C.begin("mutate");t.map(r),s(),n()})}}let FC=!1;function dL(){FC=!0}function k2(){FC=!1}let Wv=null;function WM(t){if(!RM||!$e.observeMutations)return;const{treeCallback:e=j0,nodeCallback:n=j0,pseudoElementsCallback:i=j0,observeMutationsRoot:r=Qt}=t;Wv=new RM(s=>{if(FC)return;const o=Ml();yf(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!VM(a.addedNodes[0])&&($e.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&$e.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&VM(a.target)&&~ZX.indexOf(a.attributeName))if(a.attributeName==="class"&&Bq(a.target)){const{prefix:l,iconName:c}=_b(IC(a.target));a.target.setAttribute(RC,l||o),c&&a.target.setAttribute(TC,c)}else $q(a.target)&&n(a.target)})}),ya&&Wv.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Hq(){Wv&&Wv.disconnect()}function Wq(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function Gq(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=_b(IC(t));return r.prefix||(r.prefix=Ml()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=vq(r.prefix,t.innerText)||LC(r.prefix,g2(t.innerText))),!r.iconName&&$e.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function Kq(t){const e=yf(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return $e.autoA11y&&(n?e["aria-labelledby"]="".concat($e.replacementClass,"-title-").concat(i||Ap()):(e["aria-hidden"]="true",e.focusable="false")),e}function Xq(){return{iconName:null,title:null,titleId:null,prefix:null,transform:uo,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function GM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=Gq(t),s=Kq(t),o=y2("parseNodeAttributes",{},t);let a=e.styleParser?Wq(t):[];return le({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:uo,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:qq}=fo;function fL(t){const e=$e.autoReplaceSvg==="nest"?GM(t,{styleParser:!1}):GM(t);return~e.extra.classes.indexOf(Gj)?Rl("generateLayersText",t,e):Rl("generateSvgReplacementMutation",t,e)}function Yq(){return[...MX,...u2]}function KM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ya)return Promise.resolve();const n=Qt.documentElement.classList,i=u=>n.add("".concat(IM,"-").concat(u)),r=u=>n.remove("".concat(IM,"-").concat(u)),s=$e.autoFetchSvg?Yq():$j.concat(Object.keys(qq));s.includes("fa")||s.push("fa");const o=[".".concat(Gj,":not([").concat(Xc,"])")].concat(s.map(u=>".".concat(u,":not([").concat(Xc,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=yf(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=$C.begin("onTree"),c=a.reduce((u,d)=>{try{const f=fL(d);f&&u.push(f)}catch(f){Hj||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{uL(f,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function Jq(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;fL(t).then(n=>{n&&uL([n],e)})}function Zq(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:b2(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:b2(r||{})),t(i,le(le({},n),{},{mask:r}))}}const Qq=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=uo,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:p}=t;return Cb(le({type:"icon"},t),()=>(qc("beforeDOMElementCreation",{iconDefinition:t,params:e}),$e.autoA11y&&(o?c["aria-labelledby"]="".concat($e.replacementClass,"-title-").concat(a||Ap()):(c["aria-hidden"]="true",c.focusable="false")),BC({icons:{main:x2(p),mask:r?x2(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:le(le({},uo),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var eY={mixout(){return{icon:Zq(Qq)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=KM,t.nodeCallback=Jq,t}}},provides(t){t.i2svg=function(e){const{node:n=Qt,callback:i=()=>{}}=e;return KM(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((f,p)=>{Promise.all([w2(i,o),c.iconName?w2(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(g=>{let[m,v]=g;f([e,BC({icons:{main:m,mask:v},prefix:o,iconName:i,transform:a,symbol:l,maskId:u,title:r,titleId:s,extra:d,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=Sb(o);a.length>0&&(i.style=a);let l;return DC(s)&&(l=Rl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},tY={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return Cb({type:"layer"},()=>{qc("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat($e.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},nY={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return Cb({type:"counter",content:t},()=>(qc("beforeDOMElementCreation",{content:t,params:e}),Iq({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat($e.cssPrefix,"-layers-counter"),...i]}})))}}}},iY={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=uo,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return Cb({type:"text",content:t},()=>(qc("beforeDOMElementCreation",{content:t,params:e}),zM({content:t,transform:le(le({},uo),n),title:i,extra:{attributes:s,styles:o,classes:["".concat($e.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(Lj){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return $e.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,zM({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const rY=new RegExp('"',"ug"),XM=[1105920,1112319],qM=le(le(le(le({},{FontAwesome:{normal:"fas",400:"fas"}}),AX),HX),LX),_2=Object.keys(qM).reduce((t,e)=>(t[e.toLowerCase()]=qM[e],t),{}),sY=Object.keys(_2).reduce((t,e)=>{const n=_2[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function oY(t){const e=t.replace(rY,""),n=fq(e,0),i=n>=XM[0]&&n<=XM[1],r=e.length===2?e[0]===e[1]:!1;return{value:g2(r?e[0]:e),isSecondary:i||r}}function aY(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(_2[n]||{})[r]||sY[n]}function YM(t,e){const n="".concat(WX).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=yf(t.children).filter(f=>f.getAttribute(f2)===e)[0],a=Pl.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(YX),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),i();if(c&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let p=aY(l,u);const{value:g,isSecondary:m}=oY(f),v=c[0].startsWith("FontAwesome");let y=LC(p,g),b=y;if(v){const w=yq(g);w.iconName&&w.prefix&&(y=w.iconName,p=w.prefix)}if(y&&!m&&(!o||o.getAttribute(RC)!==p||o.getAttribute(TC)!==b)){t.setAttribute(n,b),o&&t.removeChild(o);const w=Xq(),{extra:k}=w;k.attributes[f2]=e,w2(y,p).then(_=>{const E=BC(le(le({},w),{},{icons:{main:_,mask:oL()},prefix:p,iconName:b,extra:k,watchable:!0})),C=Qt.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=E.map(P=>wm(P)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function lY(t){return Promise.all([YM(t,"::before"),YM(t,"::after")])}function cY(t){return t.parentNode!==document.head&&!~KX.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(f2)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function JM(t){if(ya)return new Promise((e,n)=>{const i=yf(t.querySelectorAll("*")).filter(cY).map(lY),r=$C.begin("searchPseudoElements");dL(),Promise.all(i).then(()=>{r(),k2(),e()}).catch(()=>{r(),k2(),n()})})}var uY={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=JM,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Qt}=e;$e.searchPseudoElements&&JM(n)}}};let ZM=!1;var dY={mixout(){return{dom:{unwatch(){dL(),ZM=!0}}}},hooks(){return{bootstrap(){WM(y2("mutationObserverCallbacks",{}))},noAuto(){Hq()},watch(t){const{observeMutationsRoot:e}=t;ZM?k2():WM(y2("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const QM=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var fY={mixout(){return{parse:{transform:t=>QM(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=QM(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:u,path:d};return{tag:"g",attributes:le({},f.outer),children:[{tag:"g",attributes:le({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:le(le({},n.icon.attributes),f.path)}]}]}}}};const ww={x:0,y:0,width:"100%",height:"100%"};function eR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function hY(t){return t.tag==="g"?t.children:[t]}var pY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?_b(n.split(" ").map(r=>r.trim())):oL();return i.prefix||(i.prefix=Ml()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=r,{width:u,icon:d}=s,f=oq({transform:a,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:le(le({},ww),{},{fill:"white"})},g=c.children?{children:c.children.map(eR)}:{},m={tag:"g",attributes:le({},f.inner),children:[eR(le({tag:c.tag,attributes:le(le({},c.attributes),f.path)},g))]},v={tag:"g",attributes:le({},f.outer),children:[m]},y="mask-".concat(o||Ap()),b="clip-".concat(o||Ap()),w={tag:"mask",attributes:le(le({},ww),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},k={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:hY(d)},w]};return n.push(k,{tag:"rect",attributes:le({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(y,")")},ww)}),{children:n,attributes:i}}}},mY={provides(t){let e=!1;Pl.matchMedia&&(e=Pl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:le(le({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=le(le({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:le(le({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:le(le({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:le(le({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:le(le({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:le(le({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:le(le({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:le(le({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},gY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},vY=[cq,eY,tY,nY,iY,uY,dY,fY,pY,mY,gY];Aq(vY,{mixoutsTo:Dr});Dr.noAuto;Dr.config;Dr.library;Dr.dom;const C2=Dr.parse;Dr.findIconDefinition;Dr.toHtml;const yY=Dr.icon;Dr.layer;Dr.text;Dr.counter;var hL={exports:{}},bY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xY=bY,wY=xY;function pL(){}function mL(){}mL.resetWarningCache=pL;var SY=function(){function t(i,r,s,o,a,l){if(l!==wY){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:mL,resetWarningCache:pL};return n.PropTypes=n,n};hL.exports=SY();var kY=hL.exports;const pt=lu(kY);function tR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function no(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tR(Object(n),!0).forEach(function(i){nd(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Gv(t){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gv(t)}function nd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Y(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function CY(t,e){if(t==null)return{};var n=_Y(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function E2(t){return EY(t)||AY(t)||NY(t)||PY()}function EY(t){if(Array.isArray(t))return A2(t)}function AY(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function NY(t,e){if(t){if(typeof t=="string")return A2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A2(t,e)}}function A2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function PY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MY(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,f=t.fixedWidth,p=t.inverse,g=t.border,m=t.listItem,v=t.flip,y=t.size,b=t.rotation,w=t.pull,k=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":f,"fa-inverse":p,"fa-border":g,"fa-li":m,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},nd(e,"fa-".concat(y),typeof y<"u"&&y!==null),nd(e,"fa-rotate-".concat(b),typeof b<"u"&&b!==null&&b!==0),nd(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),nd(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(k).map(function(_){return k[_]?_:null}).filter(function(_){return _})}function RY(t){return t=t-0,t===t}function gL(t){return RY(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var TY=["style"];function OY(t){return t.charAt(0).toUpperCase()+t.slice(1)}function IY(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=gL(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[OY(r)]=s:e[r]=s,e},{})}function vL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return vL(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=IY(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[gL(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=CY(n,TY);return r.attrs.style=no(no({},r.attrs.style),o),t.apply(void 0,[e.tag,no(no({},r.attrs),a)].concat(E2(i)))}var yL=!1;try{yL=!0}catch{}function DY(){if(!yL&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function nR(t){if(t&&Gv(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(C2.icon)return C2.icon(t);if(t===null)return null;if(t&&Gv(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function Sw(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?nd({},t,e):{}}var iR={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Ye=Yt.forwardRef(function(t,e){var n=no(no({},iR),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=nR(i),d=Sw("classes",[].concat(E2(MY(n)),E2((o||"").split(" ")))),f=Sw("transform",typeof n.transform=="string"?C2.transform(n.transform):n.transform),p=Sw("mask",nR(r)),g=yY(u,no(no(no(no({},d),f),p),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!g)return DY("Could not find icon",u),null;var m=g.abstract,v={ref:e};return Object.keys(n).forEach(function(y){iR.hasOwnProperty(y)||(v[y]=n[y])}),jY(m[0],v)});Ye.displayName="FontAwesomeIcon";Ye.propTypes={beat:pt.bool,border:pt.bool,beatFade:pt.bool,bounce:pt.bool,className:pt.string,fade:pt.bool,flash:pt.bool,mask:pt.oneOfType([pt.object,pt.array,pt.string]),maskId:pt.string,fixedWidth:pt.bool,inverse:pt.bool,flip:pt.oneOf([!0,!1,"horizontal","vertical","both"]),icon:pt.oneOfType([pt.object,pt.array,pt.string]),listItem:pt.bool,pull:pt.oneOf(["right","left"]),pulse:pt.bool,rotation:pt.oneOf([0,90,180,270]),shake:pt.bool,size:pt.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:pt.bool,spinPulse:pt.bool,spinReverse:pt.bool,symbol:pt.oneOfType([pt.bool,pt.string]),title:pt.string,titleId:pt.string,transform:pt.oneOfType([pt.string,pt.object]),swapOpacity:pt.bool};var jY=vL.bind(null,Yt.createElement);function bL(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=bL(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function ne(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=bL(t))&&(i&&(i+=" "),i+=e);return i}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const LY={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},zC=LY,gd={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},BY={prefix:"fas",iconName:"compress",icon:[448,512,[],"f066","M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"]},$Y={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},FY={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},rR={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},zY={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"]},UY={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},xL=UY,Uh={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},VY={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},HY=VY,WY={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},GY={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},KY=GY,XY={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},wL=XY,qY={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},SL=qY,YY={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M267.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160L64 241 64 96c0-17.7-14.3-32-32-32S0 78.3 0 96L0 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-145 11.5 9.6 192 160z"]},kL=YY,JY={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},Eb={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},ZY={prefix:"fas",iconName:"expand",icon:[448,512,[],"f065","M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"]},QY={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},Ab=QY,UC={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},eJ={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},tJ={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},VC={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},_L={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},nJ={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},sR=nJ,iJ={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]},rJ={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},sJ={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},oJ={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},aJ=oJ,lJ={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 80l0 48c0 44.2-100.3 80-224 80S0 172.2 0 128L0 80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6L448 288c0 44.2-100.3 80-224 80S0 332.2 0 288L0 186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6l0 85.9c0 44.2-100.3 80-224 80S0 476.2 0 432l0-85.9z"]},Sm={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]},CL={default:"bg-stone-800 text-white hover:bg-stone-700 focus:ring-stone-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-stone-600 bg-transparent text-white hover:bg-stone-800 focus:ring-stone-500",secondary:"bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500",ghost:"bg-transparent text-stone-300 hover:bg-stone-800 hover:text-white focus:ring-stone-500",link:"bg-transparent text-mantis-400 hover:text-mantis-300 hover:underline focus:ring-mantis-500",primary:"bg-mantis-600 text-white hover:bg-mantis-700 focus:ring-mantis-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",error:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},cJ={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"},_t=x.memo(x.forwardRef(({variant:t="default",size:e="md",isLoading:n=!1,loadingText:i,leftIcon:r,rightIcon:s,disabled:o=!1,fullWidth:a=!1,className:l,children:c,onClick:u,type:d="button","aria-label":f,title:p,...g},m)=>{const v=o||n;return h.jsxs("button",{ref:m,type:d,disabled:v,onClick:u,"aria-label":f,title:p,className:ne("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",CL[t],cJ[e],a&&"w-full",l),...g,children:[n&&h.jsx(Ye,{icon:_L,className:"animate-spin","aria-hidden":"true"}),!n&&r&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:r}),h.jsx("span",{children:n&&i?i:c}),!n&&s&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:s})]})}));_t.displayName="Button";const B0=x.memo(x.forwardRef(({icon:t,variant:e="ghost",size:n="md",isLoading:i=!1,disabled:r=!1,className:s,onClick:o,"aria-label":a,title:l,...c},u)=>{const d=r||i,f={sm:"size-8",md:"size-10",lg:"size-12",xl:"size-14"};return h.jsx("button",{ref:u,disabled:d,onClick:o,"aria-label":a,title:l,className:ne("inline-flex items-center justify-center rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",CL[e],f[n],s),...c,children:i?h.jsx(Ye,{icon:_L,className:"animate-spin","aria-hidden":"true"}):h.jsx("span",{className:"flex items-center justify-center","aria-hidden":"true",children:t})})}));B0.displayName="IconButton";const uJ=x.memo(({children:t,orientation:e="horizontal",className:n})=>h.jsx("div",{className:ne("inline-flex",e==="horizontal"?"flex-row":"flex-col",n),role:"group",children:t}));uJ.displayName="ButtonGroup";const EL={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2","top-start":"bottom-full left-0 mb-2","top-end":"bottom-full right-0 mb-2","bottom-start":"top-full left-0 mt-2","bottom-end":"top-full right-0 mt-2"},AL={top:"top-full left-1/2 transform -translate-x-1/2 border-t-stone-800",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-stone-800",left:"left-full top-1/2 transform -translate-y-1/2 border-l-stone-800",right:"right-full top-1/2 transform -translate-y-1/2 border-r-stone-800","top-start":"top-full left-4 border-t-stone-800","top-end":"top-full right-4 border-t-stone-800","bottom-start":"bottom-full left-4 border-b-stone-800","bottom-end":"bottom-full right-4 border-b-stone-800"},ts=x.memo(({content:t,children:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=x.useState(!1),[u,d]=x.useState(n),f=x.useRef(null),p=x.useRef(null),g=x.useRef(),m=x.useCallback(()=>{a||(document.body.classList.add("tooltip-open"),g.current=setTimeout(()=>{c(!0)},i))},[a,i]),v=x.useCallback(()=>{g.current&&clearTimeout(g.current),document.body.classList.remove("tooltip-open"),c(!1)},[]);return x.useEffect(()=>{if(!l||!p.current||!f.current)return;const y=p.current,w=f.current.getBoundingClientRect(),k=y.getBoundingClientRect();let _=n;w.left+k.width>window.innerWidth&&(n.includes("right")?_="left":n.includes("top")?_="top-end":n.includes("bottom")&&(_="bottom-end")),w.left-k.width<0&&(n.includes("left")?_="right":n.includes("top")?_="top-start":n.includes("bottom")&&(_="bottom-start")),w.top-k.height<0&&n.includes("top")&&(_="bottom"),w.bottom+k.height>window.innerHeight&&n.includes("bottom")&&(_="top"),d(_)},[l,n]),h.jsxs("div",{ref:f,className:ne("relative inline-block",r),onMouseEnter:m,onMouseLeave:v,onFocus:m,onBlur:v,children:[e,l&&h.jsxs("div",{ref:p,className:ne("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",EL[u]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:ne("absolute size-0 border-4 border-transparent",AL[u])})]})]})});ts.displayName="Tooltip";const dJ=x.memo(({content:t,className:e,size:n="md"})=>{const i={sm:"size-3",md:"size-4",lg:"size-5"};return h.jsx(ts,{content:t,className:e,children:h.jsx(Ye,{icon:SL,className:ne("cursor-help text-stone-400 transition-colors hover:text-stone-300",i[n])})})});dJ.displayName="InfoTooltip";const fJ=x.memo(({content:t,trigger:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=x.useState(!1),u=x.useRef(null),d=x.useRef(null),f=x.useRef(),p=x.useCallback(()=>{a||(f.current=setTimeout(()=>{c(!0)},i))},[a,i]),g=x.useCallback(()=>{f.current&&clearTimeout(f.current),c(!1)},[]);return h.jsxs("div",{ref:u,className:ne("relative inline-block",r),onMouseEnter:p,onMouseLeave:g,onFocus:p,onBlur:g,children:[e,l&&h.jsxs("div",{ref:d,className:ne("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",EL[n]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:ne("absolute size-0 border-4 border-transparent",AL[n])})]})]})});fJ.displayName="CustomTooltip";function NL(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const PL=["en","es"];function HC(t){return function(n,i,...r){const s=NL(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const WC={},hJ=Symbol((WC?"production":void 0)!=="production"?"RESET":""),ML=t=>typeof(t==null?void 0:t.then)=="function";function pJ(t=()=>{try{return window.localStorage}catch(n){(WC?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,c)=>{var u,d;const f=g=>{if(g=g||"",i!==g){try{r=JSON.parse(g,e==null?void 0:e.reviver)}catch{return c}i=g}return r},p=(d=(u=t())==null?void 0:u.getItem(l))!=null?d:null;return ML(p)?p.then(f):f(p)},setItem:(l,c)=>{var u;return(u=t())==null?void 0:u.setItem(l,JSON.stringify(c,void 0))},removeItem:l=>{var c;return(c=t())==null?void 0:c.removeItem(l)}},o=l=>(c,u,d)=>l(c,f=>{let p;try{p=JSON.parse(f||"")}catch{p=d}u(p)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,c)=>{if(!(t()instanceof window.Storage))return()=>{};const u=d=>{d.storageArea===t()&&d.key===l&&c(d.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(s.subscribe=o(a)),s}const mJ=pJ();function RL(t,e,n=mJ,i){const r=i==null?void 0:i.getOnInit,s=fe(r?n.getItem(t,e):e);return(WC?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},fe(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===hJ?(l(s,e),n.removeItem(t)):ML(u)?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}const N=NC();function TL(t){return h.jsx(UK,{store:N,children:t.children})}const gJ=Object.freeze(Object.defineProperty({__proto__:null,JotaiProvider:TL,store:N},Symbol.toStringTag,{value:"Module"}));var Pt;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(Pt||(Pt={}));var oR;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(oR||(oR={}));const De=Pt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ja=t=>{switch(typeof t){case"undefined":return De.undefined;case"string":return De.string;case"number":return Number.isNaN(t)?De.nan:De.number;case"boolean":return De.boolean;case"function":return De.function;case"bigint":return De.bigint;case"symbol":return De.symbol;case"object":return Array.isArray(t)?De.array:t===null?De.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?De.promise:typeof Map<"u"&&t instanceof Map?De.map:typeof Set<"u"&&t instanceof Set?De.set:typeof Date<"u"&&t instanceof Date?De.date:De.object;default:return De.unknown}},pe=Pt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class fa extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),i}static assert(e){if(!(e instanceof fa))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Pt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];n[s]=n[s]||[],n[s].push(e(r))}else i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}fa.create=t=>new fa(t);const N2=(t,e)=>{let n;switch(t.code){case pe.invalid_type:t.received===De.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case pe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Pt.jsonStringifyReplacer)}`;break;case pe.unrecognized_keys:n=`Unrecognized key(s) in object: ${Pt.joinValues(t.keys,", ")}`;break;case pe.invalid_union:n="Invalid input";break;case pe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Pt.joinValues(t.options)}`;break;case pe.invalid_enum_value:n=`Invalid enum value. Expected ${Pt.joinValues(t.options)}, received '${t.received}'`;break;case pe.invalid_arguments:n="Invalid function arguments";break;case pe.invalid_return_type:n="Invalid function return type";break;case pe.invalid_date:n="Invalid date";break;case pe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Pt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case pe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case pe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case pe.custom:n="Invalid input";break;case pe.invalid_intersection_types:n="Intersection results could not be merged";break;case pe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case pe.not_finite:n="Number must be finite";break;default:n=e.defaultError,Pt.assertNever(t)}return{message:n}};let vJ=N2;function yJ(){return vJ}const bJ=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}};function Ee(t,e){const n=yJ(),i=bJ({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===N2?void 0:N2].filter(r=>!!r)});t.common.issues.push(i)}class Rr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return tt;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return Rr.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return tt;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const tt=Object.freeze({status:"aborted"}),yh=t=>({status:"dirty",value:t}),us=t=>({status:"valid",value:t}),aR=t=>t.status==="aborted",lR=t=>t.status==="dirty",Xd=t=>t.status==="valid",Kv=t=>typeof Promise<"u"&&t instanceof Promise;var Le;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Le||(Le={}));class Tl{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const cR=(t,e)=>{if(Xd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new fa(t.common.issues);return this._error=n,this._error}}};function ht(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class Nt{get description(){return this._def.description}_getType(e){return ja(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ja(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Rr,ctx:{common:e.parent.common,data:e.data,parsedType:ja(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Kv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ja(e)},r=this._parseSync({data:e,path:i.path,parent:i});return cR(i,r)}"~validate"(e){var i,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ja(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return Xd(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(r=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>Xd(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ja(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Kv(r)?r:Promise.resolve(r));return cR(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:pe.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new Jd({schema:this,typeName:nt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return wl.create(this,this._def)}nullable(){return Zd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xo.create(this)}promise(){return Jv.create(this,this._def)}or(e){return qv.create([this,e],this._def)}and(e){return Yv.create(this,e,this._def)}transform(e){return new Jd({...ht(this._def),schema:this,typeName:nt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new T2({...ht(this._def),innerType:this,defaultValue:n,typeName:nt.ZodDefault})}brand(){return new UJ({typeName:nt.ZodBranded,type:this,...ht(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new O2({...ht(this._def),innerType:this,catchValue:n,typeName:nt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return GC.create(this,e)}readonly(){return I2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const xJ=/^c[^\s-]{8,}$/i,wJ=/^[0-9a-z]+$/,SJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_J=/^[a-z0-9_-]{21}$/i,CJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,EJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,AJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,NJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let kw;const PJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,MJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,RJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,TJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,OJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,IJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,OL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",DJ=new RegExp(`^${OL}$`);function IL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function jJ(t){return new RegExp(`^${IL(t)}$`)}function LJ(t){let e=`${OL}T${IL(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function BJ(t,e){return!!((e==="v4"||!e)&&PJ.test(t)||(e==="v6"||!e)&&RJ.test(t))}function $J(t,e){if(!CJ.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function FJ(t,e){return!!((e==="v4"||!e)&&MJ.test(t)||(e==="v6"||!e)&&TJ.test(t))}class Tc extends Nt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==De.string){const s=this._getOrReturnCtx(e);return Ee(s,{code:pe.invalid_type,expected:De.string,received:s.parsedType}),tt}const i=new Rr;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?Ee(r,{code:pe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Ee(r,{code:pe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")AJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"email",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")kw||(kw=new RegExp(NJ,"u")),kw.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"emoji",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")kJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"uuid",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")_J.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"nanoid",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")xJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"cuid",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")wJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"cuid2",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")SJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"ulid",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),Ee(r,{validation:"url",code:pe.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"regex",code:pe.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?LJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?DJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?jJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?EJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"duration",code:pe.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?BJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"ip",code:pe.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?$J(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"jwt",code:pe.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?FJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"cidr",code:pe.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?OJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"base64",code:pe.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?IJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"base64url",code:pe.invalid_string,message:s.message}),i.dirty()):Pt.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:pe.invalid_string,...Le.errToObj(i)})}_addCheck(e){return new Tc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Le.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Le.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Le.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Le.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Le.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Le.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Le.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Le.errToObj(n)})}nonempty(e){return this.min(1,Le.errToObj(e))}trim(){return new Tc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Tc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Tc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Tc.create=t=>new Tc({checks:[],typeName:nt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...ht(t)});function zJ(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return s%o/10**r}class qd extends Nt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==De.number){const s=this._getOrReturnCtx(e);return Ee(s,{code:pe.invalid_type,expected:De.number,received:s.parsedType}),tt}let i;const r=new Rr;for(const s of this._def.checks)s.kind==="int"?Pt.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?zJ(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.not_finite,message:s.message}),r.dirty()):Pt.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Le.toString(n))}setLimit(e,n,i,r){return new qd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Le.toString(r)}]})}_addCheck(e){return new qd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Le.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Pt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}qd.create=t=>new qd({checks:[],typeName:nt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ht(t)});class Pp extends Nt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==De.bigint)return this._getInvalidInput(e);let i;const r=new Rr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):Pt.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ee(n,{code:pe.invalid_type,expected:De.bigint,received:n.parsedType}),tt}gte(e,n){return this.setLimit("min",e,!0,Le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Le.toString(n))}setLimit(e,n,i,r){return new Pp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Le.toString(r)}]})}_addCheck(e){return new Pp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Pp.create=t=>new Pp({checks:[],typeName:nt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...ht(t)});class P2 extends Nt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==De.boolean){const i=this._getOrReturnCtx(e);return Ee(i,{code:pe.invalid_type,expected:De.boolean,received:i.parsedType}),tt}return us(e.data)}}P2.create=t=>new P2({typeName:nt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ht(t)});class Xv extends Nt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==De.date){const s=this._getOrReturnCtx(e);return Ee(s,{code:pe.invalid_type,expected:De.date,received:s.parsedType}),tt}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Ee(s,{code:pe.invalid_date}),tt}const i=new Rr;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):Pt.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Xv({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Le.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Le.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Xv.create=t=>new Xv({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:nt.ZodDate,...ht(t)});class uR extends Nt{_parse(e){if(this._getType(e)!==De.symbol){const i=this._getOrReturnCtx(e);return Ee(i,{code:pe.invalid_type,expected:De.symbol,received:i.parsedType}),tt}return us(e.data)}}uR.create=t=>new uR({typeName:nt.ZodSymbol,...ht(t)});class dR extends Nt{_parse(e){if(this._getType(e)!==De.undefined){const i=this._getOrReturnCtx(e);return Ee(i,{code:pe.invalid_type,expected:De.undefined,received:i.parsedType}),tt}return us(e.data)}}dR.create=t=>new dR({typeName:nt.ZodUndefined,...ht(t)});class fR extends Nt{_parse(e){if(this._getType(e)!==De.null){const i=this._getOrReturnCtx(e);return Ee(i,{code:pe.invalid_type,expected:De.null,received:i.parsedType}),tt}return us(e.data)}}fR.create=t=>new fR({typeName:nt.ZodNull,...ht(t)});class hR extends Nt{constructor(){super(...arguments),this._any=!0}_parse(e){return us(e.data)}}hR.create=t=>new hR({typeName:nt.ZodAny,...ht(t)});class pR extends Nt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return us(e.data)}}pR.create=t=>new pR({typeName:nt.ZodUnknown,...ht(t)});class Ol extends Nt{_parse(e){const n=this._getOrReturnCtx(e);return Ee(n,{code:pe.invalid_type,expected:De.never,received:n.parsedType}),tt}}Ol.create=t=>new Ol({typeName:nt.ZodNever,...ht(t)});class mR extends Nt{_parse(e){if(this._getType(e)!==De.undefined){const i=this._getOrReturnCtx(e);return Ee(i,{code:pe.invalid_type,expected:De.void,received:i.parsedType}),tt}return us(e.data)}}mR.create=t=>new mR({typeName:nt.ZodVoid,...ht(t)});class xo extends Nt{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==De.array)return Ee(n,{code:pe.invalid_type,expected:De.array,received:n.parsedType}),tt;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(Ee(n,{code:o?pe.too_big:pe.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(Ee(n,{code:pe.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(Ee(n,{code:pe.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new Tl(n,o,n.path,a)))).then(o=>Rr.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new Tl(n,o,n.path,a)));return Rr.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new xo({...this._def,minLength:{value:e,message:Le.toString(n)}})}max(e,n){return new xo({...this._def,maxLength:{value:e,message:Le.toString(n)}})}length(e,n){return new xo({...this._def,exactLength:{value:e,message:Le.toString(n)}})}nonempty(e){return this.min(1,e)}}xo.create=(t,e)=>new xo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:nt.ZodArray,...ht(e)});function Iu(t){if(t instanceof An){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=wl.create(Iu(i))}return new An({...t._def,shape:()=>e})}else return t instanceof xo?new xo({...t._def,type:Iu(t.element)}):t instanceof wl?wl.create(Iu(t.unwrap())):t instanceof Zd?Zd.create(Iu(t.unwrap())):t instanceof Yc?Yc.create(t.items.map(e=>Iu(e))):t}class An extends Nt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Pt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==De.object){const c=this._getOrReturnCtx(e);return Ee(c,{code:pe.invalid_type,expected:De.object,received:c.parsedType}),tt}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ol&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Tl(r,d,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof Ol){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(Ee(r,{code:pe.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Tl(r,d,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,f=await u.value;c.push({key:d,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>Rr.mergeObjectSync(i,c)):Rr.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Le.errToObj,new An({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var s,o;const r=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:Le.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new An({...this._def,unknownKeys:"strip"})}passthrough(){return new An({...this._def,unknownKeys:"passthrough"})}extend(e){return new An({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new An({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:nt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new An({...this._def,catchall:e})}pick(e){const n={};for(const i of Pt.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new An({...this._def,shape:()=>n})}omit(e){const n={};for(const i of Pt.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new An({...this._def,shape:()=>n})}deepPartial(){return Iu(this)}partial(e){const n={};for(const i of Pt.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new An({...this._def,shape:()=>n})}required(e){const n={};for(const i of Pt.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof wl;)s=s._def.innerType;n[i]=s}return new An({...this._def,shape:()=>n})}keyof(){return DL(Pt.objectKeys(this.shape))}}An.create=(t,e)=>new An({shape:()=>t,unknownKeys:"strip",catchall:Ol.create(),typeName:nt.ZodObject,...ht(e)});An.strictCreate=(t,e)=>new An({shape:()=>t,unknownKeys:"strict",catchall:Ol.create(),typeName:nt.ZodObject,...ht(e)});An.lazycreate=(t,e)=>new An({shape:t,unknownKeys:"strip",catchall:Ol.create(),typeName:nt.ZodObject,...ht(e)});class qv extends Nt{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new fa(a.ctx.common.issues));return Ee(n,{code:pe.invalid_union,unionErrors:o}),tt}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new fa(l));return Ee(n,{code:pe.invalid_union,unionErrors:a}),tt}}get options(){return this._def.options}}qv.create=(t,e)=>new qv({options:t,typeName:nt.ZodUnion,...ht(e)});function M2(t,e){const n=ja(t),i=ja(e);if(t===e)return{valid:!0,data:t};if(n===De.object&&i===De.object){const r=Pt.objectKeys(e),s=Pt.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=M2(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===De.array&&i===De.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=M2(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===De.date&&i===De.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Yv extends Nt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(aR(s)||aR(o))return tt;const a=M2(s.value,o.value);return a.valid?((lR(s)||lR(o))&&n.dirty(),{status:n.value,value:a.data}):(Ee(i,{code:pe.invalid_intersection_types}),tt)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Yv.create=(t,e,n)=>new Yv({left:t,right:e,typeName:nt.ZodIntersection,...ht(n)});class Yc extends Nt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==De.array)return Ee(i,{code:pe.invalid_type,expected:De.array,received:i.parsedType}),tt;if(i.data.length<this._def.items.length)return Ee(i,{code:pe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tt;!this._def.rest&&i.data.length>this._def.items.length&&(Ee(i,{code:pe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Tl(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>Rr.mergeArray(n,o)):Rr.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Yc({...this._def,rest:e})}}Yc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Yc({items:t,typeName:nt.ZodTuple,rest:null,...ht(e)})};class gR extends Nt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==De.map)return Ee(i,{code:pe.invalid_type,expected:De.map,received:i.parsedType}),tt;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:r._parse(new Tl(i,a,i.path,[c,"key"])),value:s._parse(new Tl(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return tt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return tt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}gR.create=(t,e,n)=>new gR({valueType:e,keyType:t,typeName:nt.ZodMap,...ht(n)});class Mp extends Nt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==De.set)return Ee(i,{code:pe.invalid_type,expected:De.set,received:i.parsedType}),tt;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(Ee(i,{code:pe.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(Ee(i,{code:pe.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return tt;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...i.data.values()].map((l,c)=>s._parse(new Tl(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Mp({...this._def,minSize:{value:e,message:Le.toString(n)}})}max(e,n){return new Mp({...this._def,maxSize:{value:e,message:Le.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Mp.create=(t,e)=>new Mp({valueType:t,minSize:null,maxSize:null,typeName:nt.ZodSet,...ht(e)});class vR extends Nt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}vR.create=(t,e)=>new vR({getter:t,typeName:nt.ZodLazy,...ht(e)});class R2 extends Nt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ee(n,{received:n.data,code:pe.invalid_literal,expected:this._def.value}),tt}return{status:"valid",value:e.data}}get value(){return this._def.value}}R2.create=(t,e)=>new R2({value:t,typeName:nt.ZodLiteral,...ht(e)});function DL(t,e){return new Yd({values:t,typeName:nt.ZodEnum,...ht(e)})}class Yd extends Nt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return Ee(n,{expected:Pt.joinValues(i),received:n.parsedType,code:pe.invalid_type}),tt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return Ee(n,{received:n.data,code:pe.invalid_enum_value,options:i}),tt}return us(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Yd.create(e,{...this._def,...n})}exclude(e,n=this._def){return Yd.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Yd.create=DL;class yR extends Nt{_parse(e){const n=Pt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==De.string&&i.parsedType!==De.number){const r=Pt.objectValues(n);return Ee(i,{expected:Pt.joinValues(r),received:i.parsedType,code:pe.invalid_type}),tt}if(this._cache||(this._cache=new Set(Pt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=Pt.objectValues(n);return Ee(i,{received:i.data,code:pe.invalid_enum_value,options:r}),tt}return us(e.data)}get enum(){return this._def.values}}yR.create=(t,e)=>new yR({values:t,typeName:nt.ZodNativeEnum,...ht(e)});class Jv extends Nt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==De.promise&&n.common.async===!1)return Ee(n,{code:pe.invalid_type,expected:De.promise,received:n.parsedType}),tt;const i=n.parsedType===De.promise?n.data:Promise.resolve(n.data);return us(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Jv.create=(t,e)=>new Jv({type:t,typeName:nt.ZodPromise,...ht(e)});class Jd extends Nt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{Ee(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return tt;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?tt:l.status==="dirty"||n.value==="dirty"?yh(l.value):l});{if(n.value==="aborted")return tt;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?tt:a.status==="dirty"||n.value==="dirty"?yh(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?tt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?tt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Xd(o))return tt;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Xd(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):tt);Pt.assertNever(r)}}Jd.create=(t,e,n)=>new Jd({schema:t,typeName:nt.ZodEffects,effect:e,...ht(n)});Jd.createWithPreprocess=(t,e,n)=>new Jd({schema:e,effect:{type:"preprocess",transform:t},typeName:nt.ZodEffects,...ht(n)});class wl extends Nt{_parse(e){return this._getType(e)===De.undefined?us(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wl.create=(t,e)=>new wl({innerType:t,typeName:nt.ZodOptional,...ht(e)});class Zd extends Nt{_parse(e){return this._getType(e)===De.null?us(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Zd.create=(t,e)=>new Zd({innerType:t,typeName:nt.ZodNullable,...ht(e)});class T2 extends Nt{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===De.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}T2.create=(t,e)=>new T2({innerType:t,typeName:nt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ht(e)});class O2 extends Nt{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Kv(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new fa(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new fa(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}O2.create=(t,e)=>new O2({innerType:t,typeName:nt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ht(e)});class bR extends Nt{_parse(e){if(this._getType(e)!==De.nan){const i=this._getOrReturnCtx(e);return Ee(i,{code:pe.invalid_type,expected:De.nan,received:i.parsedType}),tt}return{status:"valid",value:e.data}}}bR.create=t=>new bR({typeName:nt.ZodNaN,...ht(t)});class UJ extends Nt{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class GC extends Nt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?tt:s.status==="dirty"?(n.dirty(),yh(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?tt:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new GC({in:e,out:n,typeName:nt.ZodPipeline})}}class I2 extends Nt{_parse(e){const n=this._def.innerType._parse(e),i=r=>(Xd(r)&&(r.value=Object.freeze(r.value)),r);return Kv(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}I2.create=(t,e)=>new I2({innerType:t,typeName:nt.ZodReadonly,...ht(e)});var nt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(nt||(nt={}));const cc=qd.create,bu=P2.create;Ol.create;xo.create;const xR=An.create,VJ=qv.create;Yv.create;Yc.create;const kg=R2.create,Uf=Yd.create;Jv.create;wl.create;Zd.create;const HJ=["randomize","clean","unchanged"],WJ=["switches-and-leds","printer","null"],GJ=["printer","null"],D2=xR({showInstructionCycle:bu().catch(!1),showStatsCPU:bu().catch(!1),language:Uf(PL).catch(KJ),editorFontSize:cc().int().min(8).max(64).catch(14),dataOnLoad:Uf(HJ).catch("clean"),devices:xR({keyboardAndScreen:bu(),pic:bu(),pio:Uf(["switches-and-leds","printer"]).nullable(),handshake:Uf(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:bu().catch(!0),executionUnit:cc().min(1).max(250).catch(150),clockSpeed:cc().min(100).max(1e3).catch(1e3),cpuSpeed:VJ([kg(1),kg(2),kg(4),kg(10)]).catch(1),printerSpeed:cc().min(500).max(2e4).catch(5e3),flagsVisibility:Uf(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:cc().min(0).catch(1),filterContrast:cc().min(0).catch(1),filterInvert:bu().catch(!1),filterSaturation:cc().min(0).catch(1)}),Du=D2.parse({animations:!1});function KJ(){const t=navigator.language.toLowerCase();for(const e of PL)if(t.startsWith(e))return e;return"en"}const ds=RL("vonsim-settings",Du,{getItem(t,e){try{const n=localStorage.getItem(t);return D2.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=D2.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),gt=()=>N.get(ds),ba=()=>bm(ds);fe(t=>t(ds).showInstructionCycle);fe(t=>t(ds).showStatsCPU);const XJ=fe(t=>t(ds).language),KC=()=>st(XJ);fe(t=>t(ds).flagsVisibility);const qJ=fe(t=>t(ds).editorFontSize),YJ=()=>st(qJ);fe(t=>t(ds).dataOnLoad);const JJ=fe(t=>t(ds).devices),jL=()=>st(JJ);fe(t=>{const e=t(ds);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});fe(t=>{const e=t(ds);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")});function Rp(t){const e=t.charCodeAt(0);return V.fitsUnsigned(e,8)?e:null}function XC(t){return V.fitsUnsigned(t,8)?String.fromCharCode(t):null}function LL(t){return ZJ.at(t)??null}const ZJ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","","","","","","","","","","","","","SHY","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var nn,cn;const kt=class kt{constructor(e,n){Fe(this,nn);Fe(this,cn);te(this,nn,e|0),te(this,cn,n)}get size(){return A(this,cn)}is8bits(){return A(this,cn)===8}is16bits(){return A(this,cn)===16}get unsigned(){return A(this,nn)}get signed(){return A(this,nn)<=kt.maxSignedValue(A(this,cn))?A(this,nn):A(this,nn)-(kt.maxValue(A(this,cn))+1)}get low(){return this.is8bits()?this:kt.fromUnsigned(A(this,nn)&kt.maxValue(8),8)}get high(){return this.is8bits()?new kt(0,8):kt.fromUnsigned(A(this,nn)>>8&kt.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return kt.fromUnsigned(A(this,nn)&~kt.maxValue(8)|e.unsigned,A(this,cn))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return kt.fromUnsigned(A(this,nn)&kt.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,cn))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,cn)}`);return(A(this,nn)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,cn))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,cn)}`);return n?kt.fromUnsigned(A(this,nn)|1<<e,A(this,cn)):kt.fromUnsigned(A(this,nn)&~(1<<e),A(this,cn))}add(e){return e=Number(e),kt.fromUnsigned(A(this,nn)+e,A(this,cn))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,nn)===A(e,nn)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,cn));for(let n=0;n<A(this,cn);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,nn).toString(16).padStart(A(this,cn)/4,"0").toUpperCase();case"bin":return A(this,nn).toString(2).padStart(A(this,cn),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,cn)===8?XC(A(this,nn))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,cn)===8?LL(A(this,nn))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,nn)}valueOf(){return A(this,nn)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=kt.minSignedValue(n)&&e<=kt.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=kt.minValue()&&e<=kt.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=kt.minSignedValue(n)&&e<=kt.maxSignedValue(n)}static fromUnsigned(e,n){if(!kt.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new kt(e,n)}static fromSigned(e,n){if(!kt.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new kt(e+kt.maxValue(n)+1,n):new kt(e,n)}static fromNumber(e,n){return e<0?kt.fromSigned(e,n):kt.fromUnsigned(e,n)}static fromChar(e){const n=Rp(e)??-1;return kt.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*kt.maxValue(e));return new kt(n,e)}static zero(e){return new kt(0,e)}};nn=new WeakMap,cn=new WeakMap;let V=kt;var Fo;const za=class za{constructor(e){Fe(this,Fo);te(this,Fo,e)}get value(){return A(this,Fo).unsigned}get byte(){return A(this,Fo)}toString(e=!1){let n=A(this,Fo).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,Fo).toJSON()}valueOf(){return A(this,Fo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=za.MIN_ADDRESS&&e<=za.MAX_ADDRESS}static from(e){if(e=Number(e),!za.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=V.fromUnsigned(e,16);return new za(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};Fo=new WeakMap,be(za,"MIN_ADDRESS",0),be(za,"MAX_ADDRESS",255);let Ne=za;var zo;const Ua=class Ua{constructor(e){Fe(this,zo);te(this,zo,e)}get value(){return A(this,zo).unsigned}get byte(){return A(this,zo)}toString(e=!0){let n=A(this,zo).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,zo).toJSON()}valueOf(){return A(this,zo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ua.MIN_ADDRESS&&e<=Ua.MAX_ADDRESS}static from(e){if(e=Number(e),!Ua.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=V.fromUnsigned(e,8);return new Ua(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};zo=new WeakMap,be(Ua,"MIN_ADDRESS",0),be(Ua,"MAX_ADDRESS",127);let Tr=Ua;function wR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function SR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wR(Object(n),!0).forEach(function(i){QJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function QJ(t,e,n){return e=eZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eZ(t){var e=tZ(t,"string");return typeof e=="symbol"?e:String(e)}function tZ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Zv=BL({});function BL(t){return e.withOptions=n=>BL(SR(SR({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let u=0;u<r.length;u++){let d=r[u];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,u<i.length&&(a+=i[u])}const l=a.split(`
`);let c=null;for(const u of l){const d=u.match(/^(\s+)\S+/);if(d){const f=d[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){const u=c;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(u):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const nZ=Ne.from(Ne.MAX_ADDRESS).toString(),iZ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${Tr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!","new-version-available":"There's a new version available in the repository.","local-update":"A new local version has been detected.",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:Zv`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instruccin",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...","fetching-operands-completed":"Operands fetched",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."},"total-cycles":"Total cycles","instruction-count":"Instruction count",cpi:"Cycles per instruction (CPI)","cpi-help":"Average clock cycles per executed instruction (CPI = total cycles / total instructions)","cpu-time":"CPU time","cpu-time-help":"Total CPU time = total cycles  cycle time (current: {cycleTime} ms)"},memory:{name:"Memory",cell:t=>`Cell ${Ne.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${nZ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>Zv`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"952883e"}](https://github.com/ruiz-jose/VonSim8/commit/${"952883e"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},rZ=Ne.from(Ne.MAX_ADDRESS).toString(),sZ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${Tr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"Hay una nueva versin disponible!","new-version-available":"Hay una nueva versin disponible en el repositorio.","local-update":"Se ha detectado una nueva versin local.",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la FileSystem API","no-file":"No hay ningn archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:Zv`
      ; Bienvenido a VonSim 8!
      ; Este es un ejemplo de cdigo que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instruccin",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadsticas CPU","instruction-cycle":"Ciclo de instruccin",status:{fetching:"Captacin instruccin...","fetching-operands":"Leyendo operandos...","fetching-operands-completed":"Operandos obtenidos",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupcin...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."},"total-cycles":"Total de ciclos","instruction-count":"Recuento de instrucciones",cpi:"Ciclos por instruccin (CPI)","cpi-help":"Promedio de ciclos de reloj por instruccin ejecutada (CPI = ciclos totales / instrucciones totales)","cpu-time":"Tiempo de CPU","cpu-time-help":"Tiempo total de CPU = ciclos totales  tiempo de ciclo (actual: {cycleTime} ms)"},memory:{name:"Memoria",cell:t=>`Celda ${Ne.format(t)}`,"fix-address":"Fijar direccin","unfix-address":"Desfijar direccin","address-must-be-integer":"El valor de inicio debe ser un nmero entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${rZ}.`,"address-increment":"Incrementar direccin (Page Up)","address-decrement":"Decrementar direccin (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuracin",instructionCycle:{label:"Ciclo de Instruccin"},statsCPU:{label:"Estadsticas CPU"},flags:{label:"Banderas",description:"Selecciona qu banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamao de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qu hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qu dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"Tambin agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitacin de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulacin",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresin"},filters:{label:"Filtros",description:"Filtros aplicados a la pgina. til cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturacin"},reset:"Restablecer configuracin"},footer:{documentation:"Documentacin",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>Zv`
        <!-- Por favor, describa el problema que est teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Informacin extra (POR FAVOR, NO BORRAR)</summary>

          **Versin**: [${"952883e"}](https://github.com/ruiz-jose/VonSim8/commit/${"952883e"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuracin

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},Nb=HC({en:iZ,es:sZ});function ln(){const t=KC();return x.useCallback((e,...n)=>Nb(t,e,...n),[t])}const oZ=[{name:"Documentacin",url:"https://ruiz-jose.github.io/VonSim8/docs/",icon:"icon-[lucide--book-open]"},{name:"GitHub",url:"https://github.com/ruiz-jose/VonSim8",icon:vX}],$L=x.memo(({name:t,url:e,icon:n})=>h.jsx(ts,{content:t,position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:()=>window.open(e,"_blank"),className:"hover-lift","aria-label":t,children:typeof n=="string"?h.jsx("span",{className:ne(n,"size-4")}):h.jsx(Ye,{icon:n,className:"size-4"})})}));$L.displayName="SocialLink";const FL=x.memo(()=>{const t=ln(),[e]=ba(),n=x.useMemo(()=>{var s;const i=((s=window.codemirror)==null?void 0:s.state.doc.toString())||"",r=t("footer.issue.body",e,i);return`https://github.com/ruiz-jose/VonSim8/issues/new?body=${encodeURIComponent(r)}`},[t,e]);return h.jsx("footer",{className:"bg-black px-3 py-1.5 text-xs text-white","data-testid":"footer",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-stone-400",children:[" Copyright 2017-2025  III-LIDI, FI, UNLP, UNER  v","952883e"]}),h.jsxs("div",{className:"flex items-center gap-1","data-testid":"footer-links",children:[oZ.map(i=>h.jsx($L,{name:i.name,url:i.url,icon:i.icon},i.name)),h.jsx(ts,{content:t("footer.issue.report"),position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:()=>window.open(n,"_blank"),className:"hover-lift","aria-label":t("footer.issue.report"),children:h.jsx("span",{className:"icon-[lucide--bug] size-4"})})})]})]})})});FL.displayName="Footer";const aZ="modulepreload",lZ=function(t){return"/VonSim8/"+t},kR={},Tp=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=lZ(l),l in kR)return;kR[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":aZ,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Op(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class Sn{constructor(e,n){be(this,"start");be(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new Sn(i,r)}toJSON(){return this.range}}const _R=Ne.from(Ne.MAX_ADDRESS).toString(),cZ=Tr.from(Tr.MAX_ADDRESS).toString(),uZ={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Ne.format(t)} is out of range (max memory address: ${_R}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":`The program is empty or does not contain executable instructions.

Remember: a valid program must have at least one instruction and end with the END directive.

For example:

    org 1000h
    mov al, 3
    hlt
    end

See the documentation or examples for more help.`,"end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AL.","expects-dx":"The only valid register is DL.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 8-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","instruction-out-of-range":t=>`This instruction would be placed in address ${Ne.format(t)}, which is outside the memory range (max memory address: ${_R}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${cZ}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea."}},CR=Ne.from(Ne.MAX_ADDRESS).toString(),dZ=Tr.from(Tr.MAX_ADDRESS).toString(),fZ={"address-has-code":t=>`La direccin de memoria ${Ne.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${Ne.format(t)} est fuera de rango (direccin mxima de memoria: ${CR}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":`El programa est vaco o no contiene instrucciones ejecutables.

Recuerda que un programa vlido debe tener al menos una instruccin y finalizar con la directiva END.

Por ejemplo:

    org 1000h
    mov al, 3
    hlt
    end

Consulta la documentacin o los ejemplos para ms ayuda.`,"end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AL.","expects-dx":"El nico registro vlido es DL.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 8 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${Ne.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${CR}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${dZ}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${Ne.format(t)}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instruccin sera colocada en la direccin ${Ne.format(t)}, la cual ya est reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carcter solo puede contener un carcter.","empty-character":"Los carcter no puede estar vaco.","invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-character":"Carcter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea."}},hZ=HC({en:uZ,es:fZ});class ae extends Error{constructor(n,...i){super();be(this,"code");be(this,"context");be(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof Sn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return hZ(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof ae?n:new ae("unexpected-error",n)}}const qC=[[0,V.fromUnsigned(160,8)],[3,V.fromUnsigned(176,8)],[6,V.fromUnsigned(192,8)],[7,V.fromUnsigned(208,8)]],ER=new Set(...qC.map(([t])=>[t]));var Xa,Ed;class pZ{constructor(){be(this,"codeMemory",new Set);be(this,"labels",new Map);be(this,"hasORG",!1);Fe(this,Xa,!1);Fe(this,Ed,!1)}loadStatements(e){if(A(this,Xa))throw new Error("Tried to load statements twice");te(this,Xa,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new ae("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Ne.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Ne.from(0)})}return n}computeAddresses(e){if(A(this,Ed))throw new Error("Tried to compute addresses twice");te(this,Ed,!0),this.codeMemory.clear();const n=new Set,i=e.some(u=>u.isInstruction()&&u.instruction==="INT");if(this.hasORG=e.some(u=>u.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new ae("missing-org").at(e[0].position);let r=i&&!this.hasORG?8:this.hasORG?32:0,s=null,o=r;const a=[],l=[],c=[];for(const u of e)u.isInstruction()?a.push(u):u.isOriginChange()?l.push(u):u.isDataDirective()&&c.push(u);if(this.hasORG){const u=[],d=[];return Op(e,f=>{if(f.isEnd()||f.isDataDirective()&&f.directive==="EQU")return;if(f.isOriginChange()){r=f.newAddress;return}const p=r;if(p===null)throw new ae("missing-org").at(f);const g=f.length,m=p,v=p+g-1;for(const b of d)if(Math.max(m,b.start)<=Math.min(v,b.end)){u.push(new ae("occupied-address",Ne.from(m)).at(f));return}d.push({start:m,end:v,statement:f});for(let b=0;b<g;b++){if(!Ne.inRange(p+b))throw new ae("instruction-out-of-range",p+b).at(f);const w=Ne.from(p+b);if(n.has(w.value))throw new ae("occupied-address",w).at(f);if(i&&ER.has(w.value))throw new ae("reserved-address",w).at(f);n.add(w.value),f.isInstruction()&&this.codeMemory.add(w.value)}const y=Ne.from(p);f.setStart(y),f.label&&this.labels.set(f.label,{type:f.isInstruction()?"instruction":f.directive,address:y}),(f.isDataDirective()||f.isInstruction())&&(r+=g,o=Math.max(o,r))},ae.from),u}else return Op([...a,...l,...c],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const m=d.newAddress;m<32?s=m:r=m;return}let f;if(d.isDataDirective())s===null&&(s=o),f=s;else if(d.isInstruction())f=r;else throw new ae("missing-org").at(d);const p=d.length;for(let m=0;m<p;m++){if(!Ne.inRange(f+m))throw new ae("instruction-out-of-range",f+m).at(d);const v=Ne.from(f+m);if(n.has(v.value))throw new ae("occupied-address",v).at(d);if(i&&ER.has(v.value))throw new ae("reserved-address",v).at(d);n.add(v.value),d.isInstruction()&&this.codeMemory.add(v.value)}const g=Ne.from(f);if(d.setStart(g),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:g}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=p}else d.isInstruction()&&(r+=p,o=Math.max(o,r))},ae.from)}labelExists(e){if(!A(this,Xa))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,Xa))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,Xa))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,Ed))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Ne&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}Xa=new WeakMap,Ed=new WeakMap;const mZ=["AL","BL","CL","DL","AH","BH","CH","DH"],zL=["AX","BX","CX","DX","SP"],Qv=[...mZ,...zL],YC=["DB","DW","EQU"],JC=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],gZ=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...Qv,...JC,...YC];class vZ{constructor(e,n,i){be(this,"type");be(this,"lexeme");be(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class yZ{constructor(e){be(this,"scanned",!1);be(this,"tokens",[]);be(this,"position",new Sn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new Sn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new ae("lexer.unterminated-character").at(this.position);if(Rp(this.peek())===null)throw new ae("lexer.only-ascii").at(new Sn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new ae("lexer.empty-character").at(this.position);if(n>=2)throw new ae("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new ae("lexer.unterminated-string").at(this.position);if(Rp(this.peek())===null)throw new ae("lexer.only-ascii").at(new Sn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()===".")throw new ae("lexer.unexpected-character",".").at(new Sn(this.position.end,this.position.end+1));if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new ae("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new ae("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){if(e==="."&&this.isDigit(this.peek()))throw new ae("lexer.unexpected-character",".").at(new Sn(this.position.start,this.position.start+1));for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();gZ.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new ae("lexer.unexpected-character",e).at(this.position)}return this.position=new Sn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new vZ(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new Sn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Qn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}be(Qn,"numberLiteral",(...e)=>new bZ(...e)),be(Qn,"label",(...e)=>new xZ(...e)),be(Qn,"unaryOperation",(...e)=>new wZ(...e)),be(Qn,"binaryOperation",(...e)=>new SZ(...e));class bZ extends Qn{constructor(n,i){super(i);be(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let xZ=class extends Qn{constructor(n,i,r){super(r);be(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new ae("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new ae("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new ae("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class wZ extends Qn{constructor(n,i,r){super(r);be(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class SZ extends Qn{constructor(n,i,r,s){super(s);be(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Pb{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var Uo;class UL extends Pb{constructor(n,i,r){super(r);be(this,"type","data-directive");be(this,"label");be(this,"values");Fe(this,Uo,null);this.values=n,this.label=i}get start(){if(A(this,Uo)===null)throw new Error("Start not set");return A(this,Uo)}setStart(n){if(A(this,Uo)!==null)throw new Error("Start already set");te(this,Uo,n)}toJSON(){return{...super.toJSON(),...A(this,Uo)?{start:A(this,Uo).toJSON()}:{},directive:this.directive,label:this.label}}}Uo=new WeakMap;var Ic,qa,Ad;class kZ extends UL{constructor(n,i,r){super(n,i,r);be(this,"directive","EQU");Fe(this,Ic,"not-processed");Fe(this,qa,null);Fe(this,Ad,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,Ad)??((n=A(this,qa))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,qa))throw new Error("Constant already validated");if(!this.label)throw new ae("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new ae("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new ae("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new ae("cannot-be-unassinged","EQU").at(n);te(this,qa,n.value)}evaluateExpressions(n){if(!A(this,qa))throw new Error("Constant not validated");if(A(this,Ic)==="processed")return A(this,Ad);if(A(this,Ic)==="processing")throw new ae("circular-reference").at(this.position);te(this,Ic,"processed");const i=A(this,qa).evaluate(n);return te(this,Ic,"processed"),te(this,Ad,i),i}evaluate(n){return this.evaluateExpressions(n)}}Ic=new WeakMap,qa=new WeakMap,Ad=new WeakMap;const bh=Symbol("unassigned");var Wi,vs;class _Z extends UL{constructor(n,i,r,s){super(i,r,s);be(this,"size");Fe(this,Wi,null);Fe(this,vs,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,Wi))throw new Error("Data directive not validated");return A(this,Wi).length*(this.size/8)}getValues(){if(!A(this,vs))throw new Error("Data directive not evaluated");return A(this,vs)}toJSON(){return{...super.toJSON(),values:(A(this,vs)??A(this,Wi)??this.values).map(n=>n===bh?"?":n.toJSON())}}validate(){if(A(this,Wi))throw new Error("Data directive already validated");te(this,Wi,[]);for(const n of this.values)if(n.isUnassigned())A(this,Wi).push(bh);else if(n.isString()){if(this.directive!=="DB")throw new ae("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=Rp(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new Sn(n.position.start+r,n.position.start+r+1),a=Qn.numberLiteral(s,o);A(this,Wi).push(a)}}else A(this,Wi).push(n.value);if(A(this,Wi).length===0)throw new ae("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,Wi))throw new Error("Data directive not validated");if(A(this,vs))throw new Error("Data directive already evaluated");te(this,vs,[]);const i=Op(A(this,Wi),r=>{if(r===bh)A(this,vs).push(bh);else{const s=r.evaluate(n);if(!V.fits(s,this.size))throw new ae("value-out-of-range",s,this.size).at(this);const o=V.fromNumber(s,this.size);A(this,vs).push(o)}},ae.from);return i.length>0&&te(this,vs,null),i}}Wi=new WeakMap,vs=new WeakMap;class ZC{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class CZ extends ZC{constructor(n,i){super(i);be(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class EZ extends ZC{constructor(n){super(n);be(this,"type","unassigned")}}class AZ extends ZC{constructor(n){super(n.position);be(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function NZ(t,e,n){const i=Sn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new _Z(t.type,e,n,i);case"EQU":return new kZ(e,n,i)}}class _w extends Pb{constructor(n){super(n);be(this,"type","end")}}function Sc(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var Vo;class du extends Pb{constructor(n,i,r){super(r);be(this,"type","instruction");be(this,"label");be(this,"operands");Fe(this,Vo,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,Vo)===null)throw new Error("Start not set");return A(this,Vo)}setStart(n){if(A(this,Vo)!==null)throw new Error("Start already set");te(this,Vo,n)}toJSON(){return{...super.toJSON(),...A(this,Vo)?{start:A(this,Vo).toJSON()}:{},instruction:this.instruction,label:this.label}}}Vo=new WeakMap;var hi,Fr;class PZ extends du{constructor(n,i,r,s){super(i,r,s);Fe(this,hi,null);Fe(this,Fr,null);this.instruction=n}get length(){if(!A(this,hi))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,hi);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,Fr))throw new Error("Instruction not evaluated");return A(this,Fr)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(Sc(r)&3)<<2,o[0]|=(Sc(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(Sc(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(Sc(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(Sc(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,Fr)??A(this,hi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,hi))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ae("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new ae("size-mismatch",r.size,i.size).at(this);te(this,hi,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new ae("size-mismatch",r.size,i.size).at(this);te(this,hi,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new ae("size-mismatch",r.size,i.size).at(this);te(this,hi,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new ae("size-mismatch",s.size,i.size).at(this);te(this,hi,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}te(this,hi,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new ae("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new ae("size-mismatch",s,r.size).at(this);te(this,hi,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new ae("double-memory-access").at(this);s==="auto"&&(s=8),te(this,hi,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new ae("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,hi))throw new Error("Instruction not validated");if(A(this,Fr))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,hi),a=l=>{const c=l.evaluate(n);if(!Ne.inRange(c))throw new ae("address-out-of-range",c).at(l);const u=Ne.from(c);if(n.addressIsReserved(u))throw new ae("address-has-code",u).at(l);return u};switch(i){case"reg<-reg":{te(this,Fr,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{te(this,Fr,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!V.fits(l,r))throw new ae("value-out-of-range",l,r).at(o);const c=V.fromNumber(l,r);te(this,Fr,{mode:i,size:r,out:s,src:c});return}case"mem<-reg":{te(this,Fr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!V.fits(l,r))throw new ae("value-out-of-range",l,r).at(o);const c=V.fromNumber(l,r);te(this,Fr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return i}}}hi=new WeakMap,Fr=new WeakMap;var Js,Ho;class MZ extends du{constructor(n,i,r,s){super(i,r,s);Fe(this,Js,null);Fe(this,Ho,null);be(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,Ho))throw new Error("Instruction not evaluated");return A(this,Ho)}toJSON(){return{...super.toJSON(),...A(this,Ho)?{value:A(this,Ho).toJSON()}:A(this,Js)?{initialValue:A(this,Js).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Js))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new ae("expects-immediate").at(n);te(this,Js,n.value)}evaluateExpressions(n){if(!A(this,Js))throw new Error("Instruction not validated");if(A(this,Ho))throw new Error("Instruction aready evaluated");const i=A(this,Js).evaluate(n);if(!V.fitsUnsigned(i,8))throw new ae("invalid-interrupt",i).at(A(this,Js));te(this,Ho,V.fromUnsigned(i,8))}}Js=new WeakMap,Ho=new WeakMap;var ys,Wo,dO;let RZ=(dO=class extends du{constructor(n,i,r,s){super(i,r,s);Fe(this,ys,null);Fe(this,Wo,null);this.instruction=n}get length(){if(!A(this,ys))throw new Error("Instruction not validated");return A(this,ys).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,Wo)===null)throw new Error("Operation not set");return A(this,Wo)}toJSON(){return{...super.toJSON(),...A(this,Wo)??A(this,ys)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,ys))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ae("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new ae("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new ae("expects-dx").at(i);te(this,ys,{port:"variable",size:r});return}if(i.isNumberExpression()){te(this,ys,{port:"fixed",size:r,address:i.value});return}throw new ae("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,ys))throw new Error("Instruction not validated");if(A(this,Wo))throw new Error("Instruction aready evaluated");const i=A(this,ys);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!Tr.inRange(r))throw new ae("io-address-out-of-range",r).at(this);const s=Tr.from(r);te(this,Wo,{port:"fixed",size:i.size,address:s})}else te(this,Wo,{port:"variable",size:i.size})}},ys=new WeakMap,Wo=new WeakMap,dO);var Go,Zs,fO;let TZ=(fO=class extends du{constructor(n,i,r,s){super(i,r,s);Fe(this,Go,null);Fe(this,Zs,null);be(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Zs)===null)throw new Error("Instruction not evaluated");return A(this,Zs)}toJSON(){return{...super.toJSON(),...A(this,Zs)?{address:A(this,Zs).toJSON()}:A(this,Go)?{jumpTo:A(this,Go)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Go))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new ae("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new ae("label-not-found",r).at(i);if(s!=="instruction")throw new ae("label-should-be-an-instruction",r).at(i);te(this,Go,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!Ne.inRange(r))throw new ae("address-out-of-range",r).at(i);te(this,Zs,Ne.from(r))}}evaluateExpressions(n){if(!A(this,Zs)&&A(this,Go)){const i=n.getLabelValue(A(this,Go));if(!Ne.inRange(i))throw new ae("address-out-of-range",i).at(this);te(this,Zs,Ne.from(i))}}},Go=new WeakMap,Zs=new WeakMap,fO);var Qs,hO;let OZ=(hO=class extends du{constructor(n,i,r,s){super(i,r,s);Fe(this,Qs,null);be(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=Sc(this.register),new Uint8Array([i])}get register(){if(!A(this,Qs))throw new Error("Instruction not evaluated");return A(this,Qs)}toJSON(){return{...super.toJSON(),...A(this,Qs)?{register:A(this,Qs)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Qs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new ae("expects-word-register").at(n);te(this,Qs,n.value)}evaluateExpressions(){if(!A(this,Qs))throw new Error("Instruction not validated")}},Qs=new WeakMap,hO);var fr,eo;class IZ extends du{constructor(n,i,r,s){super(i,r,s);Fe(this,fr,null);Fe(this,eo,null);this.instruction=n}get length(){if(!A(this,fr))throw new Error("Instruction not validated");const{mode:n}=A(this,fr);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=Sc(this.operation.reg);break}case"mem-direct":{const r=this.operation.address.byte;n.push(r.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,eo))throw new Error("Instruction not evaluated");return A(this,eo)}toJSON(){return{...super.toJSON(),...A(this,eo)??A(this,fr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,fr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){te(this,fr,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new ae("unknown-size").at(i);te(this,fr,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new ae("unknown-size").at(i);te(this,fr,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){te(this,fr,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new ae("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,fr))throw new Error("Instruction not validated");if(A(this,eo))throw new Error("Instruction aready evaluated");const i=A(this,fr);switch(i.mode){case"reg":{te(this,eo,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Ne.inRange(r))throw new ae("address-out-of-range",r).at(i.address);const s=Ne.from(r);if(n.addressIsReserved(s))throw new ae("address-has-code",s).at(i.address);te(this,eo,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{te(this,eo,{mode:"mem-indirect",size:i.size});return}default:return i}}}fr=new WeakMap,eo=new WeakMap;var Nd;class DZ extends du{constructor(n,i,r,s){super(i,r,s);Fe(this,Nd,!1);be(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,Nd))throw new Error("Instruction already validated");if(this.operands.length>0)throw new ae("expects-no-operands").at(this);te(this,Nd,!0)}evaluateExpressions(){if(!A(this,Nd))throw new Error("Instruction not validated")}}Nd=new WeakMap;class Mb{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class jZ extends Mb{constructor(n){super(n.position);be(this,"type","register");be(this,"value");this.value=n.type}get size(){return zL.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class LZ extends Mb{constructor(n,i){super(i);be(this,"type","indirect-address");be(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class BZ extends Mb{constructor(n,i,r){super(r);be(this,"type","direct-address");be(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class ey extends Mb{constructor(n){super(n.position);be(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return ey.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new ae("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:Qn.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=ey.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:Qn.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function AR(t,e,n){const i=Sn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new DZ(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new PZ(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new IZ(t.type,e,n,i);case"PUSH":case"POP":return new OZ(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new TZ(t.type,e,n,i);case"IN":case"OUT":return new RZ(t.type,e,n,i);case"INT":return new MZ(t.type,e,n,i)}}class $Z extends Pb{constructor(n,i){super(i);be(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let FZ=class{constructor(e){be(this,"tokens");be(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new ae("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new ae("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new $Z(i,Sn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new ae("end-must-be-the-last-statement").at(e);return new _w(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new _w(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new _w(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...YC);if(e&&!n)throw new ae("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),NZ(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new CZ(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new EZ(e.position)}return new AZ(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...JC);if(e&&!n){const s=this.peek();throw new ae("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return AR(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),AR(n,r,i)}instructionOperand(){if(this.match(...Qv)){const n=this.previous();return new jZ(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new ae("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Qv)){if(!this.check("BX","BL"))throw new ae("parser.indirect-addressing-must-be-bx");const i=this.advance(),r=this.consume("RIGHT_BRACKET",new ae("parser.expected-literal-after-literal","]",i.lexeme));return new LZ(e==null?void 0:e.type,Sn.merge(e==null?void 0:e.position,n.position,r.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new ae("parser.expected-literal-after-expression","]"));return new BZ(i,e==null?void 0:e.type,Sn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new ae("parser.expected-literal-after-literal","[","PTR");return new ey(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new ae("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new ae("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Qn.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=Rp(i.lexeme.slice(1,-1));return Qn.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new ae("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new ae("parser.expected-label-after-offset").at(this.peek());if(!n)throw new ae("parser.expected-argument").at(this.peek());return Qn.label(n.lexeme.toUpperCase(),e!==null,Sn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new ae("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Qn.unaryOperation(e.type==="PLUS"?"+":"-",n,Sn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Qn.binaryOperation(e,"*",n,Sn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Qn.binaryOperation(e,n.type==="PLUS"?"+":"-",i,Sn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function VL(t){try{const n=new yZ(t).scanTokens(),r=new FZ(n).parse();if(!r.at(-1))throw new ae("empty-program");let o=[];const a=new pZ;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Op(r,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},ae.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=Op(r,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},ae.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[ae.from(e)]}}}class Ls{constructor(e){be(this,"computer");this.computer=e.computer}}const zZ=t=>Ne.format(t).slice(-2),UZ=zZ(Ne.MAX_ADDRESS),VZ={"address-has-instruction":t=>`Memory address ${Ne.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${Ne.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${Ne.format(t)} is out of range (max memory address: ${UZ}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${Tr.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${Ne.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},HZ=Ne.from(Ne.MAX_ADDRESS).toString(),WZ={"address-has-instruction":t=>`La direccin de memoria ${Ne.format(t)} tiene una instruccin, y no se puede escribir.`,"address-is-reserved":t=>`La direccin de memoria ${Ne.format(t)} est reservada, y no se puede escribir.`,"address-out-of-range":t=>`La direccin de memoria ${Ne.format(t)} est fuera de rango (direccin mxima de memoria: ${HZ}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontr ningn mdulo conectado a la direccin de memoria E/S ${Tr.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${Ne.format(t)} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},GZ=HC({en:VZ,es:WZ});class fn extends Error{constructor(n,...i){super();be(this,"code");be(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return GZ(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof fn?n:new fn("unexpected-error",n)}}class xa{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new fn("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var Uy,HL;class KZ extends xa{constructor(){super(...arguments);Fe(this,Uy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Bt(this,Uy,HL).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&(this.operation.out.mode==="direct"||this.operation.out.mode==="indirect"),ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="mem<-imd"&&s.mode==="direct"){if(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"id.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.l"),yield*n.cpu.copyByteRegister("id.l","right.l"),yield{type:"cpu:cycle.update",phase:"execute"};const d=n.cpu.getRegister("left.l"),f=n.cpu.getRegister("right.l");let p;const g={};switch(this.name){case"AND":case"OR":case"XOR":{const m=this.name==="AND"?d.signed&f.signed:this.name==="OR"?d.signed|f.signed:d.signed^f.signed;p=V.fromSigned(m,r),g.CF=!1,g.OF=!1;break}case"ADD":case"ADC":{const m=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,v=d.unsigned+f.unsigned+m;v>V.maxValue(r)?(g.CF=!0,p=V.fromUnsigned(v-V.maxValue(r)-1,r)):(g.CF=!1,p=V.fromUnsigned(v,r)),g.OF=d.signed>=0&&f.signed>=0&&p.signed<0||d.signed<0&&f.signed<0&&p.signed>=0;break}case"SUB":case"SBB":case"CMP":{const m=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,v=d.unsigned-f.unsigned-m;v<0?(g.CF=!0,p=V.fromUnsigned(v+V.maxValue(r)+1,r)):(g.CF=!1,p=V.fromUnsigned(v,r)),g.OF=d.signed>=0&&f.signed<0&&p.signed<0||d.signed<0&&f.signed>=0&&p.signed>=0;break}}return g.ZF=p.isZero(),g.SF=p.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,p,g),this.name==="CMP"?!0:(yield{type:"cpu:cycle.update",phase:"writeback"},yield*n.cpu.setMBR("result.l"),!!(yield*n.cpu.useBus("mem-write")))}if(i==="mem<-imd"&&s.mode==="indirect"&&(yield*this.consumeInstruction(n,"ri.l",!0)),i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"?r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"):(typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!0),typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!1));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):this.operation.mode==="mem<-imd"&&s.mode==="indirect"||(yield*n.cpu.copyByteRegister("BL","ri.l")),this.operation.mode==="mem<-imd"&&s.mode==="indirect"&&(yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.getMBR("id.l")),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("left.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")i==="mem<-imd"&&s.mode==="indirect"?yield*n.cpu.copyByteRegister("id.l","right.l"):yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=V.fromSigned(d,r),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>V.maxValue(r)?(u.CF=!0,c=V.fromUnsigned(f-V.maxValue(r)-1,r)):(u.CF=!1,c=V.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=V.fromUnsigned(f+V.maxValue(r)+1,r)):(u.CF=!1,c=V.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Uy=new WeakSet,HL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var Vy,WL;class XZ extends xa{constructor(){super(...arguments);Fe(this,Vy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Bt(this,Vy,WL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=V.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=V.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===V.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",V.fromSigned(1,16));const o=i.unsigned+1;o>V.maxValue(this.operation.size)?(s.CF=!0,r=V.fromUnsigned(o-V.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=V.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",V.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=V.fromUnsigned(o+V.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=V.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Vy=new WeakSet,WL=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class qZ extends xa{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Hy,GL;class YZ extends xa{constructor(){super(...arguments);Fe(this,Hy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Bt(this,Hy,GL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyByteRegister("DL","ri.l"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new fn("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new fn("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new fn("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Hy=new WeakSet,GL=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class JZ extends xa{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l",!0),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.getMBR("ri.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class ZZ extends xa{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},yield{type:"cpu:cycle.end"},!1;return!0}}function j2(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function Cw(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Wy,KL;class QZ extends xa{constructor(){super(...arguments);Fe(this,Wy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Bt(this,Wy,KL).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(yield{type:"cpu:cycle.update",phase:"writeback"},r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),i){case"reg<-reg":{if(yield{type:"cpu:cycle.update",phase:"writeback"},r===8)yield{type:"cpu:register.buscopy",src:o,dest:s,size:8};else{const[a,l]=Cw(o),[c,u]=Cw(s);yield{type:"cpu:register.buscopy",src:a,dest:c,size:8},l&&u&&(yield{type:"cpu:register.buscopy",src:l,dest:u,size:8})}return!0}case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(yield{type:"cpu:cycle.update",phase:"writeback"},r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=Cw(o);return yield*n.cpu.setMAR("ri"),yield{type:"cpu:cycle.update",phase:"writeback"},yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),yield{type:"cpu:cycle.update",phase:"writeback"},!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}Wy=new WeakSet,KL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class eQ extends xa{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class tQ extends xa{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function nQ(t){switch(t.instruction){case"MOV":return new QZ(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new KZ(t);case"NOT":case"NEG":case"INC":case"DEC":return new XZ(t);case"IN":case"OUT":return new YZ(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new tQ(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new JZ(t);case"RET":case"IRET":return new eQ(t);case"INT":return new qZ(t);case"CLI":case"STI":case"NOP":case"HLT":return new ZZ(t)}}function iQ(t){for(const[e,n]of qC)if(n.unsigned===t.unsigned)return e;return null}function*rQ(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new fn("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new fn("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new fn("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",V.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new fn("device-not-connected","screen")},!1;n++,yield*t.cpu.copyByteRegister("BL","left.l"),yield*t.cpu.updateWordRegister("right",V.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyByteRegister("result.l","BL"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",V.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===V.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var Pd,at,zr,Gi,En,ju,Lr,pO;let sQ=(pO=class extends Ls{constructor(n){super(n);Fe(this,En);Fe(this,Pd);Fe(this,at);Fe(this,zr);Fe(this,Gi);n.data==="unchanged"?(te(this,at,A(n.previous.cpu,at)),te(this,zr,A(n.previous.cpu,zr)),te(this,Gi,A(n.previous.cpu,Gi))):(te(this,at,{AX:V.zero(16),BX:V.zero(16),CX:V.zero(16),DX:V.zero(16),SP:V.zero(16),IP:V.zero(16),IR:V.zero(8),ri:V.zero(16),id:V.zero(16),left:V.zero(16),right:V.zero(16),result:V.zero(16),FLAGS:V.zero(16)}),te(this,zr,V.zero(16)),te(this,Gi,V.zero(8))),A(this,at).SP=V.fromUnsigned(Ne.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1;let s;r?s=32:i?s=8:s=0,A(this,at).IP=V.fromUnsigned(s,16),A(this,at).ri=V.fromUnsigned(0,16),A(this,at).id=V.fromUnsigned(0,16),Bt(this,En,Lr).call(this,"IF",!0),te(this,Pd,new Map);for(const o of n.program.instructions){const a=nQ(o);A(this,Pd).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,at).IP,r=iQ(i);if(r!==null){if(!(yield*rQ(this.computer,r)))return}else{const s=A(this,Pd).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new fn("no-instruction",A(this,at).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",V.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const i=V.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",i),yield*this.copyByteRegister("ri.l","IP.l"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,at)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,zr).toJSON(),MBR:A(this,Gi).toJSON()}}getRegister(n){const[i,r]=j2(n);return r==="low"?A(this,at)[i].low:r==="high"?A(this,at)[i].high:A(this,at)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Bt(this,En,ju).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Bt(this,En,ju).call(this,i,r.withHigh(V.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Bt(this,En,ju).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Bt(this,En,ju).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,at).FLAGS.bit(1);case"ZF":return A(this,at).FLAGS.bit(0);case"SF":return A(this,at).FLAGS.bit(3);case"IF":return A(this,at).FLAGS.bit(4);case"OF":return A(this,at).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Bt(this,En,Lr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Bt(this,En,Lr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Bt(this,En,Lr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Bt(this,En,Lr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Bt(this,En,Lr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,at).FLAGS}}*aluExecute(n,i,r){A(this,at).result=i.is8bits()?A(this,at).result.withLow(i):i,typeof r.CF=="boolean"&&Bt(this,En,Lr).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Bt(this,En,Lr).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Bt(this,En,Lr).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Bt(this,En,Lr).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Bt(this,En,Lr).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,at).result,flags:A(this,at).FLAGS}}*setMAR(n){const i=this.getRegister(n);te(this,zr,i.withHigh(V.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Bt(this,En,ju).call(this,n,A(this,Gi)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);te(this,Gi,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,zr));return i?(te(this,Gi,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,zr),A(this,Gi)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,zr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(te(this,Gi,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,zr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,Gi))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return te(this,Gi,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return Ne.inRange(i.unsigned-1)?(i=i.add(-1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?Ne.inRange(i.unsigned-1)?!0:(yield{type:"cpu:error",error:new fn("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new fn("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return Ne.inRange(i)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),i=i.add(1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new fn("stack-underflow")},!1)}},Pd=new WeakMap,at=new WeakMap,zr=new WeakMap,Gi=new WeakMap,En=new WeakSet,ju=function(n,i){const[r,s]=j2(n);if(s===null){if(A(this,at)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,at)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,at)[r]=A(this,at)[r].withLow(i):A(this,at)[r]=A(this,at)[r].withHigh(i)}},Lr=function(n,i){switch(n){case"CF":A(this,at).FLAGS=A(this,at).FLAGS.withBit(1,i);return;case"ZF":A(this,at).FLAGS=A(this,at).FLAGS.withBit(0,i);return;case"SF":A(this,at).FLAGS=A(this,at).FLAGS.withBit(3,i);return;case"IF":A(this,at).FLAGS=A(this,at).FLAGS.withBit(4,i);return;case"OF":A(this,at).FLAGS=A(this,at).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},pO);var cl,hr,Ko,Ya;let XL=(cl=class extends Ls{constructor(n){super(n);Fe(this,hr);Fe(this,Ko);Fe(this,Ya,!1);n.data==="unchanged"&&n.previous.io.printer?(te(this,hr,A(n.previous.io.printer,hr)),te(this,Ko,A(n.previous.io.printer,Ko)),te(this,Ya,A(n.previous.io.printer,Ya))):(te(this,hr,[]),te(this,Ko,""),te(this,Ya,!1))}get busy(){return A(this,hr).length>=cl.BUFFER_SIZE}*setStrobe(n){const i=A(this,Ya);if(i===n)return;if(te(this,Ya,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,hr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){te(this,Ko,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,hr).length===0)return;const[n,...i]=A(this,hr);if(te(this,hr,i),yield{type:"printer:buffer.pop",char:n},i.length===cl.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=XC(n.unsigned);te(this,Ko,A(this,Ko)+r),yield{type:"printer:paper.print",char:r}}}get hasPending(){return A(this,hr).length>0}toJSON(){return{paper:A(this,Ko),buffer:[...A(this,hr).map(n=>n.unsigned)]}}},hr=new WeakMap,Ko=new WeakMap,Ya=new WeakMap,be(cl,"BUFFER_SIZE",5),cl);class Rb extends Ls{}let qL=class extends Rb{constructor(n){super(n);be(this,"PA");be(this,"PB");be(this,"CA");be(this,"CB");be(this,"leds",null);be(this,"printer",null);be(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=V.random(8),this.PB=V.random(8),this.CA=V.random(8),this.CB=V.random(8)):(this.PA=V.zero(8),this.PB=V.zero(8),this.CA=V.zero(8),this.CB=V.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class NR extends qL{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends XL{*readData(){const i=n.readData();return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return V.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=V.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var Xo,mO;let oQ=(mO=class extends Ls{constructor(n){super(n);Fe(this,Xo);n.data==="unchanged"&&n.previous.io.leds?te(this,Xo,A(n.previous.io.leds,Xo)):n.data==="randomize"?te(this,Xo,V.random(8)):te(this,Xo,V.zero(8))}get state(){return A(this,Xo)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,Xo).toJSON()}},Xo=new WeakMap,mO);var Ur,gO;let aQ=(gO=class extends Ls{constructor(n){super(n);Fe(this,Ur);n.data==="unchanged"&&n.previous.io.switches?te(this,Ur,A(n.previous.io.switches,Ur)):n.data==="randomize"?te(this,Ur,V.random(8)):te(this,Ur,V.zero(8))}get state(){return A(this,Ur)}*toggle(n){te(this,Ur,A(this,Ur).withBit(n,!A(this,Ur).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,Ur).toJSON()}},Ur=new WeakMap,gO);class lQ extends qL{constructor(e){super(e);const n=this;this.leds=new class extends oQ{}(e),this.switches=new class extends aQ{*toggle(i){yield*super.toggle(i),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=V.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.leds.update(V.fromUnsigned(n,8))}}}let cQ=class extends Ls{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},uQ=class extends Ls{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var Md,vO;let dQ=(vO=class extends Ls{constructor(){super(...arguments);Fe(this,Md,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,Md);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},te(this,Md,null),n}setLastCharRead(n){te(this,Md,n)}toJSON(){return null}},Md=new WeakMap,vO);var pr,yO;let fQ=(yO=class extends Ls{constructor(n){super(n);Fe(this,pr);n.data==="unchanged"&&n.previous.io.screen?te(this,pr,A(n.previous.io.screen,pr)):te(this,pr,"")}clear(){return this.sendChar(V.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:te(this,pr,A(this,pr).slice(0,-1));break;case 10:te(this,pr,A(this,pr)+`
`);break;case 12:te(this,pr,"");break;default:te(this,pr,A(this,pr)+XC(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,pr)}}toJSON(){return A(this,pr)}},pr=new WeakMap,yO);var qo,_i,bO;let hQ=(bO=class extends Rb{constructor(n){super(n);Fe(this,qo);Fe(this,_i);be(this,"printer");n.data==="randomize"?te(this,qo,V.random(8)):te(this,qo,V.zero(8)),te(this,_i,V.zero(8));const i=this;this.printer=new class extends XL{*readData(){const r=A(i,qo);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,_i).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,qo);else if(n==="STATE")i=A(this,_i);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")te(this,qo,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),te(this,_i,i),yield{type:"handshake:register.update",register:n,value:i},A(this,_i).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),te(this,_i,A(this,_i).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,_i)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){te(this,_i,A(this,_i).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,_i)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,qo).toJSON(),STATE:A(this,_i).toJSON()}}},qo=new WeakMap,_i=new WeakMap,bO);var _s,Yo,Ki,Ci,bs,ko,$0,F0;let pQ=(_s=class extends Rb{constructor(n){super(n);Fe(this,ko);Fe(this,Yo);Fe(this,Ki);Fe(this,Ci);Fe(this,bs);te(this,Yo,V.fromUnsigned(255,8)),te(this,Ki,V.fromUnsigned(0,8)),te(this,Ci,V.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?te(this,bs,A(n.previous.io.pic,bs)):n.data==="randomize"?te(this,bs,new Array(_s.LINES).fill(V.zero(8)).map(()=>V.random(8))):te(this,bs,new Array(_s.LINES).fill(V.zero(8)))}chipSelect(n){const r=4+_s.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=V.zero(8);else if(n==="IMR")i=A(this,Yo);else if(n==="IRR")i=A(this,Ki);else if(n==="ISR")i=A(this,Ci);else{const r=Number(n.slice(3));i=A(this,bs)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,Ci).isZero()||(yield{type:"pic:intr.off"},te(this,Ci,V.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,Ci)},yield*Bt(this,ko,F0).call(this));else if(n==="IMR")te(this,Yo,i),yield{type:"pic:register.update",register:"IMR",value:A(this,Yo)},yield*Bt(this,ko,F0).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,bs)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=_s.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Ki).bit(n)||(te(this,Ki,A(this,Ki).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ki)},yield*Bt(this,ko,F0).call(this))}isINTRActive(){return A(this,Ci).isZero()&&Bt(this,ko,$0).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,Ci).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Bt(this,ko,$0).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");te(this,Ci,A(this,Ci).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,Ci)},te(this,Ki,A(this,Ki).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ki)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,bs)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,Yo).toJSON(),IRR:A(this,Ki).toJSON(),ISR:A(this,Ci).toJSON(),lines:A(this,bs).map(n=>n.toJSON())}}},Yo=new WeakMap,Ki=new WeakMap,Ci=new WeakMap,bs=new WeakMap,ko=new WeakSet,$0=function(){for(let n=0;n<_s.LINES;n++)if(A(this,Ki).bit(n)&&!A(this,Yo).bit(n))return n;return null},F0=function*(){A(this,Ci).isZero()&&Bt(this,ko,$0).call(this)!==null&&(yield{type:"pic:intr.on"})},be(_s,"LINES",8),_s);var to,Ja,xO;let mQ=(xO=class extends Rb{constructor(n){super(n);Fe(this,to);Fe(this,Ja);te(this,to,V.zero(8)),te(this,Ja,V.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,to);else if(n==="COMP")i=A(this,Ja);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")te(this,to,i);else if(n==="COMP")te(this,Ja,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,to).unsigned===V.maxValue(8)?V.zero(8):A(this,to).add(1);te(this,to,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,Ja).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,to).toJSON(),COMP:A(this,Ja).toJSON()}}},to=new WeakMap,Ja=new WeakMap,xO);class gQ extends Ls{constructor(n){super(n);be(this,"clock",null);be(this,"f10",null);be(this,"keyboard",null);be(this,"screen",null);be(this,"handshake",null);be(this,"pic",null);be(this,"pio",null);be(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new dQ(n),this.screen=new fQ(n)),n.devices.pic&&(this.clock=new cQ(n),this.f10=new uQ(n),this.timer=new mQ(n),this.pic=new pQ(n)),this.pio=n.devices.pio==="switches-and-leds"?new lQ(n):n.devices.pio==="printer"?new NR(n):null,n.devices.handshake){if(this.pio instanceof NR)throw new fn("io-printer-conflict");this.handshake=new hQ(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,c,u;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(c=this.pio)==null?void 0:c.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(u=this.timer)==null?void 0:u.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new fn("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new fn("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new fn("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,c,u,d,f;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((c=this.handshake)==null?void 0:c.toJSON())??null,pic:((u=this.pic)==null?void 0:u.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((f=this.timer)==null?void 0:f.toJSON())??null}}}var ul,Ei,Rd,Td;let vQ=(ul=class extends Ls{constructor(n){super(n);Fe(this,Ei);Fe(this,Rd);Fe(this,Td);n.data==="unchanged"?te(this,Ei,A(n.previous.memory,Ei)):n.data==="randomize"?te(this,Ei,new Uint8Array(ul.SIZE).map(()=>V.random(8).unsigned)):te(this,Ei,new Uint8Array(ul.SIZE).fill(0)),A(this,Ei)[255]=1;const i=n.program.instructions.some(r=>r.instruction==="INT");if(te(this,Td,new Set),i)for(const[r,s]of qC){const o=r;if(A(this,Ei)[o]=s.unsigned,A(this,Td).add(o),r===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let c=0;c<a.length;c++)A(this,Ei)[l+c]=a[c],A(this,Td).add(l+c)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==bh&&A(this,Ei).set(o.toUint8Array(),s),s+=r.size/8}te(this,Rd,new Set);for(const r of n.program.instructions){A(this,Ei).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,Rd).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Ne.inRange(n))return yield{type:"memory:read.error",error:new fn("address-out-of-range",n)},null;const i=V.fromUnsigned(A(this,Ei).at(n),8);return yield{type:"memory:read.ok",address:Ne.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Ne.inRange(n)?(A(this,Rd).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instruccin en la direccin ${Ne.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instruccin en la direccin ${Ne.format(n)}`)),A(this,Ei).set([i.unsigned],n),yield{type:"memory:write.ok",address:Ne.from(n),value:i},!0):(yield{type:"memory:write.error",error:new fn("address-out-of-range",n)},!1)}toJSON(){return[...A(this,Ei)]}},Ei=new WeakMap,Rd=new WeakMap,Td=new WeakMap,be(ul,"SIZE",Ne.MAX_ADDRESS+1),ul);class PR{constructor(e){be(this,"cpu");be(this,"memory");be(this,"io");const n={computer:this,...e};this.cpu=new sQ(n),this.memory=new vQ(n),this.io=new gQ(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var Mt;class yQ{constructor(){Fe(this,Mt,new PR({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){te(this,Mt,new PR({...e,previous:A(this,Mt)}))}getComputerState(){var e;return((e=A(this,Mt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,Mt))throw new fn("no-program");return A(this,Mt).cpu.run()}get devices(){if(!A(this,Mt))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,Mt).io.clock!==null,tick:()=>{if(A(this,Mt).io.clock)return A(this,Mt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,Mt).io,press:()=>{if(A(this,Mt).io.f10)return A(this,Mt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,Mt).io,readChar:e=>{if(A(this,Mt).io.keyboard)return A(this,Mt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,Mt).io},printer:{connected:()=>A(this,Mt).io.printer!==null,clear:()=>{if(A(this,Mt).io.printer)return A(this,Mt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,Mt).io.printer)return A(this,Mt).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,Mt).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,Mt).io,clear:()=>{if(A(this,Mt).io.screen)return A(this,Mt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,Mt).io,toggle:e=>{if(A(this,Mt).io.switches)return A(this,Mt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}Mt=new WeakMap;const Ew=fe(V.zero(16)),Aw=fe(V.zero(16)),bQ=fe(V.zero(8)),Nw=fe(V.zero(16)),Pw=fe(V.zero(16)),Mw=fe(V.zero(16)),Rw=fe(V.zero(16)),Tw=fe(V.zero(16)),Ow=fe(V.zero(16)),ki=fe(V.zero(16)),Ai=fe(V.zero(8)),ct=fe(""),Qd=fe(0),Ip=fe(0),Ht=fe(0),Tb=fe(!1),YL=fe(!1),ef=fe(0),Ga=fe([]),QC=fe(!1);fe(!0);fe(!0);const ty=fe(!1),tl=fe({canAnimate:!0,pendingMessage:null}),Pa=t=>fe(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),Ma=t=>fe(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),de={AL:fe(V.zero(8)),BL:fe(V.zero(8)),CL:fe(V.zero(8)),DL:fe(V.zero(8)),SP:Ew,"SP.l":Pa(Ew),"SP.h":Ma(Ew),IP:Aw,"IP.l":Pa(Aw),"IP.h":Ma(Aw),IR:bQ,ri:Nw,"ri.l":Pa(Nw),"ri.h":Ma(Nw),id:Pw,"id.l":Pa(Pw),"id.h":Ma(Pw),left:Mw,"left.l":Pa(Mw),"left.h":Ma(Mw),right:Rw,"right.l":Pa(Rw),"right.h":Ma(Rw),result:Tw,"result.l":Pa(Tw),"result.h":Ma(Tw),FLAGS:Ow,"FLAGS.l":Pa(Ow),"FLAGS.h":Ma(Ow),MAR:ki,MBR:Ai},Vn=fe({phase:"stopped"}),eE=fe("ADD");function JL(t,e=!1){e?(N.set(de.AL,V.zero(8)),N.set(de.BL,V.zero(8)),N.set(de.CL,V.zero(8)),N.set(de.DL,V.zero(8)),N.set(de.SP,V.fromUnsigned(255,16)),N.set(de.IP,V.zero(16)),N.set(de.IR,V.zero(8)),N.set(de.ri,V.zero(16)),N.set(de.id,V.zero(16)),N.set(de.left,V.zero(16)),N.set(de.right,V.zero(16)),N.set(de.result,V.zero(16)),N.set(de.FLAGS,V.zero(16)),N.set(de.MAR,V.zero(16)),N.set(de.MBR,V.zero(8))):(N.set(de.AL,V.fromUnsigned(t.cpu.AX&255,8)),N.set(de.BL,V.fromUnsigned(t.cpu.BX&255,8)),N.set(de.CL,V.fromUnsigned(t.cpu.CX&255,8)),N.set(de.DL,V.fromUnsigned(t.cpu.DX&255,8)),N.set(de.SP,V.fromUnsigned(t.cpu.SP,16)),N.set(de.IP,V.fromUnsigned(t.cpu.IP,16)),N.set(de.IR,V.fromUnsigned(t.cpu.IR,8)),N.set(de.ri,V.fromUnsigned(t.cpu.ri,16)),N.set(de.id,V.fromUnsigned(t.cpu.id,16)),N.set(de.left,V.fromUnsigned(t.cpu.left,16)),N.set(de.right,V.fromUnsigned(t.cpu.right,16)),N.set(de.result,V.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,N.set(de.FLAGS,V.fromUnsigned(t.cpu.FLAGS,16)),N.set(de.MAR,V.fromUnsigned(t.cpu.MAR,16)),N.set(de.MBR,V.fromUnsigned(t.cpu.MBR,8))),N.set(Vn,{phase:"stopped"})}const xQ=Object.freeze(Object.defineProperty({__proto__:null,MARAtom:ki,MBRAtom:Ai,aluOperationAtom:eE,animationSyncAtom:tl,connectScreenAndKeyboardAtom:QC,currentInstructionCycleCountAtom:Ht,cycleAtom:Vn,cycleCountAtom:Qd,hasINTInstructionAtom:ty,instructionCountAtom:ef,messageAtom:ct,messageHistoryAtom:Ga,registerAtoms:de,resetCPUState:JL,showSPAtom:Tb,showriAtom:YL,totalCycleCountAtom:Ip},Symbol.toStringTag,{value:"Module"})),ZL=fe([]),QL=fe([]),ny=fe(new Array(Ne.MAX_ADDRESS+1).fill(V.zero(8))),Dp=fe(Ne.from(32)),wQ=fe(null),_g=256,SQ=fe(t=>{const e=t(wQ)??t(Dp);let n=e.value-e.value%_g,i=n+_g-1;i>Ne.MAX_ADDRESS&&(i=Ne.MAX_ADDRESS,n=i-_g+1);const r=t(ny),s=[];for(let o=0;o<_g;o++)s.push({address:Ne.from(n+o),value:r[n+o]});return s});function kQ(t,e=!1){e?N.set(ny,new Array(Ne.MAX_ADDRESS+1).fill(V.zero(8))):N.set(ny,t.memory.map(n=>V.fromUnsigned(n,8))),N.set(Dp,Ne.from(32))}let L2=[],e8=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?e8:L2).push(n=n+t[e])})();function _Q(t){if(t<768)return!1;for(let e=0,n=L2.length;;){let i=e+n>>1;if(t<L2[i])n=i;else if(t>=e8[i])e=i+1;else return!0;if(e==n)return!1}}function MR(t){return t>=127462&&t<=127487}const RR=8205;function CQ(t,e,n=!0,i=!0){return(n?t8:EQ)(t,e,i)}function t8(t,e,n){if(e==t.length)return e;e&&n8(t.charCodeAt(e))&&i8(t.charCodeAt(e-1))&&e--;let i=Iw(t,e);for(e+=TR(i);e<t.length;){let r=Iw(t,e);if(i==RR||r==RR||n&&_Q(r))e+=TR(r),i=r;else if(MR(r)){let s=0,o=e-2;for(;o>=0&&MR(Iw(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function EQ(t,e,n){for(;e>0;){let i=t8(t,e-2,n);if(i<e)return i;e--}return 0}function Iw(t,e){let n=t.charCodeAt(e);if(!i8(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return n8(i)?(n-55296<<10)+(i-56320)+65536:n}function n8(t){return t>=56320&&t<57344}function i8(t){return t>=55296&&t<56320}function TR(t){return t<65536?1:2}class Et{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=tf(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),so.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=tf(this,e,n);let i=[];return this.decompose(e,n,i,0),so.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Vh(this),s=new Vh(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new Vh(this,e)}iterRange(e,n=this.length){return new r8(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new s8(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Et.empty:e.length<=32?new wn(e):so.from(wn.split(e,[]))}}class wn extends Et{constructor(e,n=AQ(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new NQ(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new wn(OR(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=z0(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new wn(a,o.length+s.length));else{let l=a.length>>1;i.push(new wn(a.slice(0,l)),new wn(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof wn))return super.replace(e,n,i);[e,n]=tf(this,e,n);let r=z0(this.text,z0(i.text,OR(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new wn(r,s):so.from(wn.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=tf(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new wn(i,r)),i=[],r=-1);return r>-1&&n.push(new wn(i,r)),n}}class so extends Et{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=tf(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[r]=l,new so(u,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=tf(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof so))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let g of e)g.flatten(p);return new wn(p,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,u=[];function d(p){let g;if(p.lines>s&&p instanceof so)for(let m of p.children)d(m);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof wn&&l&&(g=u[u.length-1])instanceof wn&&p.lines+g.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new wn(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>r&&f(),l+=p.lines,c+=p.length+1,u.push(p))}function f(){l!=0&&(a.push(u.length==1?u[0]:so.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return f(),a.length==1?a[0]:new so(a,n)}}Et.empty=new wn([""],0);function AQ(t){let e=-1;for(let n of t)e+=n.length+1;return e}function z0(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function OR(t,e,n){return z0(t,[""],e,n)}class Vh{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof wn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof wn?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof wn){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof wn?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class r8{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Vh(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class s8{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Et.prototype[Symbol.iterator]=function(){return this.iter()},Vh.prototype[Symbol.iterator]=r8.prototype[Symbol.iterator]=s8.prototype[Symbol.iterator]=function(){return this});class NQ{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function tf(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function ri(t,e,n=!0,i=!0){return CQ(t,e,n,i)}function PQ(t){return t>=56320&&t<57344}function MQ(t){return t>=55296&&t<56320}function Wr(t,e){let n=t.charCodeAt(e);if(!MQ(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return PQ(i)?(n-55296<<10)+(i-56320)+65536:n}function tE(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Zo(t){return t<65536?1:2}const B2=/\r\n?|\n/;var er=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(er||(er={}));class wo{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){$2(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new wo(e)}composeDesc(e){return this.empty?e:e.empty?this:o8(this,e)}mapDesc(e,n=!1){return e.empty?this:F2(this,e,n)}mapPos(e,n=-1,i=er.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=er.Simple&&c>=e&&(i==er.TrackDel&&r<e&&c>e||i==er.TrackBefore&&r<e||i==er.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new wo(e)}static create(e){return new wo(e)}}class Dn extends wo{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return $2(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return F2(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(Et.empty);i.push(o?e.slice(s,s+o):Et.empty)}s+=o}return new Dn(n,i)}compose(e){return this.empty?e:e.empty?this:o8(this,e,!0)}map(e,n=!1){return e.empty?this:F2(this,e,n,!0)}iterChanges(e,n=!1){$2(this,e,n)}get desc(){return wo.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new jp(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);pi(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;pi(n,u,d),d>0&&nl(i,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);pi(n,u,-1),pi(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new Dn(n,i),filtered:wo.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<n&&pi(r,n-o,-1);let d=new Dn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof Dn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:p}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let g=p?typeof p=="string"?Et.of(p.split(i||B2)):p:Et.empty,m=g.length;if(d==f&&m==0)return;d<o&&l(),d>o&&pi(r,d-o,-1),pi(r,f-d,m),nl(s,r,g),o=f}}return c(e),l(!a),a}static empty(e){return new Dn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(Et.empty);i[r]=Et.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new Dn(n,i)}static createSet(e,n){return new Dn(e,n)}}function pi(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function nl(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Et.empty);t.push(n)}}function $2(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,u=s,d=Et.empty;for(;c+=a,u+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,c,s,u,d),r=c,s=u}}}function F2(t,e,n,i=!1){let r=[],s=i?[]:null,o=new jp(t),a=new jp(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);pi(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(pi(r,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(pi(r,0,o.ins),s&&nl(s,r,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;pi(r,c,l<o.i?o.ins:0),s&&l<o.i&&nl(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?Dn.createSet(r,s):wo.create(r);throw new Error("Mismatched change set lengths")}}}function o8(t,e,n=!1){let i=[],r=n?[]:null,s=new jp(t),o=new jp(e);for(let a=!1;;){if(s.done&&o.done)return r?Dn.createSet(i,r):wo.create(i);if(s.ins==0)pi(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)pi(i,0,o.ins,a),r&&nl(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;pi(i,l,u,a),r&&u&&nl(r,i,o.text)}else o.ins==-1?(pi(i,s.off?0:s.len,l,a),r&&nl(r,i,s.textBit(l))):(pi(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&nl(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class jp{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Et.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Et.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Oc{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Oc(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return se.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return se.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return se.range(e.anchor,e.head)}static create(e,n,i){return new Oc(e,n,i)}}class se{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:se.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new se([this.main],0)}addRange(e,n=!0){return se.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,se.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new se(e.ranges.map(n=>Oc.fromJSON(n)),e.main)}static single(e,n=e){return new se([se.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return se.normalized(e.slice(),n);i=s.to}return new se(e,n)}static cursor(e,n=0,i,r){return Oc.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?Oc.create(n,e,48|s):Oc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?se.range(l,a):se.range(a,l))}}return new se(e,n)}}function a8(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let nE=0;class Re{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=nE++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Re(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:iE),!!e.static,e.enables)}of(e){return new U0([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new U0(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new U0(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function iE(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class U0{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=nE++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||z2(d,u)){let p=i(d);if(a?!IR(p,d.values[o],r):!r(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,g=f.config.address[s];if(g!=null){let m=ry(f,g);if(this.dependencies.every(v=>v instanceof Re?f.facet(v)===d.facet(v):v instanceof ji?f.field(v,!1)==d.field(v,!1):!0)||(a?IR(p=i(d),m,r):r(p=i(d),m)))return d.values[o]=m,0}else p=i(d);return d.values[o]=p,1}}}}function IR(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function z2(t,e){let n=!1;for(let i of e)Hh(t,i)&1&&(n=!0);return n}function RQ(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let d=ry(l,i[u]);if(r[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)Hh(l,c);return l.values[o]=a(l),1},update(l,c){if(!z2(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=z2(l,i),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&iE(n,d))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const Cg=Re.define({static:!0});class ji{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new ji(nE++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Cg).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>{let s=i.facet(Cg),o=r.facet(Cg),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[n]=a.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,Cg.of({field:this,create:e})]}get extension(){return this}}const kc={lowest:4,low:3,default:2,high:1,highest:0};function Vf(t){return e=>new l8(e,t)}const km={highest:Vf(kc.highest),high:Vf(kc.high),default:Vf(kc.default),low:Vf(kc.low),lowest:Vf(kc.lowest)};class l8{constructor(e,n){this.inner=e,this.prec=n}}class _m{of(e){return new U2(this,e)}reconfigure(e){return _m.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class U2{constructor(e,n){this.compartment=e,this.inner=n}}class iy{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let f of TQ(e,n,o))f instanceof ji?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of r)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let u=i==null?void 0:i.config.facets;for(let f in s){let p=s[f],g=p[0].facet,m=u&&u[f]||[];if(p.every(v=>v.type==0))if(a[g.id]=l.length<<1|1,iE(m,p))l.push(i.facet(g));else{let v=g.combine(p.map(y=>y.value));l.push(i&&g.compare(v,i.facet(g))?i.facet(g):v)}else{for(let v of p)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=c.length<<1,c.push(y=>v.dynamicSlot(y)));a[g.id]=c.length<<1,c.push(v=>RQ(v,g,p))}}let d=c.map(f=>f(a));return new iy(e,o,d,a,l,s)}}function TQ(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof U2&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof U2){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof l8)s(o.inner,o.prec);else if(o instanceof ji)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof U0)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,kc.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,kc.default),i.reduce((o,a)=>o.concat(a))}function Hh(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function ry(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const c8=Re.define(),V2=Re.define({combine:t=>t.some(e=>e),static:!0}),u8=Re.define({combine:t=>t.length?t[0]:void 0,static:!0}),d8=Re.define(),f8=Re.define(),h8=Re.define(),p8=Re.define({combine:t=>t.length?t[0]:!1});class wa{constructor(e,n){this.type=e,this.value=n}static define(){return new OQ}}class OQ{of(e){return new wa(this,e)}}class IQ{constructor(e){this.map=e}of(e){return new ut(this,e)}}class ut{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new ut(this.type,n)}is(e){return this.type==e}static define(e={}){return new IQ(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}ut.reconfigure=ut.define();ut.appendConfig=ut.define();class $n{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&a8(i,n.newLength),s.some(a=>a.type==$n.time)||(this.annotations=s.concat($n.time.of(Date.now())))}static create(e,n,i,r,s,o){return new $n(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation($n.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}$n.time=wa.define();$n.userEvent=wa.define();$n.addToHistory=wa.define();$n.remote=wa.define();function DQ(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function m8(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=Dn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:ut.mapEffects(t.effects,r).concat(ut.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function H2(t,e,n){let i=e.selection,r=vd(e.annotations);return e.userEvent&&(r=r.concat($n.userEvent.of(e.userEvent))),{changes:e.changes instanceof Dn?e.changes:Dn.of(e.changes||[],n,t.facet(u8)),selection:i&&(i instanceof se?i:se.single(i.anchor,i.head)),effects:vd(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function g8(t,e,n){let i=H2(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=m8(i,H2(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=$n.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return LQ(n?jQ(r):r)}function jQ(t){let e=t.startState,n=!0;for(let r of e.facet(d8)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:DQ(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=Dn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=$n.create(e,r,t.selection&&t.selection.map(s),ut.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(f8);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof $n?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof $n?t=s[0]:t=g8(e,vd(s),!1)}return t}function LQ(t){let e=t.startState,n=e.facet(h8),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=m8(i,H2(e,s,t.changes.newLength),!0))}return i==t?t:$n.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const BQ=[];function vd(t){return t==null?BQ:Array.isArray(t)?t:[t]}var si=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(si||(si={}));const $Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let W2;try{W2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function FQ(t){if(W2)return W2.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||$Q.test(n)))return!0}return!1}function zQ(t){return e=>{if(!/\S/.test(e))return si.Space;if(FQ(e))return si.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return si.Word;return si.Other}}class wt{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Hh(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return Hh(this,i),ry(this,i)}update(...e){return g8(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(_m.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,c)=>r.set(c,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(ut.reconfigure)?(n=null,i=a.value):a.is(ut.appendConfig)&&(n=null,i=vd(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=iy.resolve(i,r,this),s=new wt(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(V2)?e.newSelection:e.newSelection.asSingle();new wt(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:se.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=vd(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(r);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),o=ut.mapEffects(o,u).concat(ut.mapEffects(vd(l.effects),d))}return{changes:r,selection:se.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Dn?e:Dn.of(e,this.doc.length,this.facet(wt.lineSeparator))}toText(e){return Et.of(e.split(this.facet(wt.lineSeparator)||B2))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Hh(this,n),ry(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof ji&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return wt.create({doc:e.doc,selection:se.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=iy.resolve(e.extensions||[],new Map),i=e.doc instanceof Et?e.doc:Et.of((e.doc||"").split(n.staticFacet(wt.lineSeparator)||B2)),r=e.selection?e.selection instanceof se?e.selection:se.single(e.selection.anchor,e.selection.head):se.single(0);return a8(r,i.length),n.staticFacet(V2)||(r=r.asSingle()),new wt(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(wt.tabSize)}get lineBreak(){return this.facet(wt.lineSeparator)||`
`}get readOnly(){return this.facet(p8)}phrase(e,...n){for(let i of this.facet(wt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(c8))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return zQ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=ri(n,o,!1);if(s(n.slice(l,o))!=si.Word)break;o=l}for(;a<r;){let l=ri(n,a);if(s(n.slice(a,l))!=si.Word)break;a=l}return o==a?null:se.range(o+i,a+i)}}wt.allowMultipleSelections=V2;wt.tabSize=Re.define({combine:t=>t.length?t[0]:4});wt.lineSeparator=u8;wt.readOnly=p8;wt.phrases=Re.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});wt.languageData=c8;wt.changeFilter=d8;wt.transactionFilter=f8;wt.transactionExtender=h8;_m.reconfigure=ut.define();function Xl(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Jc{eq(e){return this==e}range(e,n=e){return G2.create(e,n,this)}}Jc.prototype.startSide=Jc.prototype.endSide=0;Jc.prototype.point=!1;Jc.prototype.mapMode=er.TrackDel;let G2=class v8{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new v8(e,n,i)}};function K2(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class rE{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,p;if(u==d){let g=n.mapPos(u,c.startSide,c.mapMode);if(g==null||(f=p=g,c.startSide!=c.endSide&&(p=n.mapPos(u,c.endSide),p<f)))continue}else if(f=n.mapPos(u,c.startSide),p=n.mapPos(d,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),i.push(c),r.push(f-o),s.push(p-o))}return{mapped:i.length?new rE(r,s,i,a):null,pos:o}}}class Tt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new Tt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(K2)),this.isEmpty)return n.length?Tt.of(n):this;let a=new y8(this,null,-1).goto(0),l=0,c=[],u=new Il;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(G2.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Tt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new Tt(i,n,s||Tt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Lp.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Lp.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=DR(o,a,i),c=new Hf(o,l,s),u=new Hf(a,l,s);i.iterGaps((d,f,p)=>jR(c,d,u,f,p,r)),i.empty&&i.length==0&&jR(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=DR(s,o),l=new Hf(s,a,0).goto(i),c=new Hf(o,a,0).goto(i);for(;;){if(l.to!=c.to||!X2(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new Hf(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);r.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new Il;for(let r of e instanceof G2?[e]:n?UQ(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return Tt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=Tt.empty;r=r.nextLayer)n=new Tt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}Tt.empty=new Tt([],[],null,-1);function UQ(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(K2(e,i)>0)return t.slice().sort(K2);e=i}return t}Tt.empty.nextLayer=Tt.empty;class Il{finishChunk(e){this.chunks.push(new rE(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Il)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(Tt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Tt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function DR(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class y8{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Lp{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new y8(o,n,i,s));return r.length==1?r[0]:new Lp(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)Dw(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)Dw(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Dw(this.heap,0)}}}function Dw(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Hf{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Lp.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Eg(this.active,e),Eg(this.activeTo,e),Eg(this.activeRank,e),this.minActive=LR(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;Ag(this.active,n,i),Ag(this.activeTo,n,r),Ag(this.activeRank,n,s),e&&Ag(e,n,this.cursor.from),this.minActive=LR(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Eg(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function jR(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,f=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&X2(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,f,t.point,n.point):f>a&&!X2(t.active,n.active)&&s.compareRange(a,f,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function X2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Eg(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Ag(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function LR(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Cm(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=ri(t,r));return i}function VQ(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=ri(t,r)}return t.length}const q2="",BR=typeof Symbol>"u"?"__"+q2:Symbol.for(q2),Y2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),$R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Dl{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(v=>m.replace(/&/,v))).reduce((m,v)=>m.concat(v)),g,l);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),g,u,f)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+g+";")}(u.length||f)&&l.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=$R[BR]||1;return $R[BR]=e+1,q2+e.toString(36)}static mount(e,n,i){let r=e[Y2],s=i&&i.nonce;r?s&&r.setNonce(s):r=new HQ(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let FR=new Map;class HQ{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=FR.get(i);if(s)return e[Y2]=s;this.sheet=new r.CSSStyleSheet,FR.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[Y2]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var jl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Bp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},WQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),GQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ei=0;ei<10;ei++)jl[48+ei]=jl[96+ei]=String(ei);for(var ei=1;ei<=24;ei++)jl[ei+111]="F"+ei;for(var ei=65;ei<=90;ei++)jl[ei]=String.fromCharCode(ei+32),Bp[ei]=String.fromCharCode(ei);for(var jw in jl)Bp.hasOwnProperty(jw)||(Bp[jw]=jl[jw]);function KQ(t){var e=WQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||GQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Bp:jl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function $t(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)b8(t,arguments[e]);return t}function b8(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)b8(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function $p(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function J2(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function V0(t,e){if(!e.anchorNode)return!1;try{return J2(t,e.anchorNode)}catch{return!1}}function Fp(t){return t.nodeType==3?Qc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Wh(t,e,n,i){return n?zR(t,e,n,i,-1)||zR(t,e,n,i,1):!1}function Zc(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function sy(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function zR(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Co(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Zc(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?Co(t):0}else return!1}}function Co(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ob(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function XQ(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function x8(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function qQ(t,e,n,i,r,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,p=u==l.body,g=1,m=1;if(p)f=XQ(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let b=u.getBoundingClientRect();({scaleX:g,scaleY:m}=x8(u,b)),f={left:b.left,right:b.left+u.clientWidth*g,top:b.top,bottom:b.top+u.clientHeight*m}}let v=0,y=0;if(r=="nearest")e.top<f.top?(y=e.top-(f.top+o),n>0&&e.bottom>f.bottom+y&&(y=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(y=e.bottom-f.bottom+o,n<0&&e.top-y<f.top&&(y=e.top-(f.top+o)));else{let b=e.bottom-e.top,w=f.bottom-f.top;y=(r=="center"&&b<=w?e.top+b/2-w/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-w+o)-f.top}if(i=="nearest"?e.left<f.left?(v=e.left-(f.left+s),n>0&&e.right>f.right+v&&(v=e.right-f.right+s)):e.right>f.right&&(v=e.right-f.right+s,n<0&&e.left<f.left+v&&(v=e.left-(f.left+s))):v=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,v||y)if(p)c.scrollBy(v,y);else{let b=0,w=0;if(y){let k=u.scrollTop;u.scrollTop+=y/m,w=(u.scrollTop-k)*m}if(v){let k=u.scrollLeft;u.scrollLeft+=v/g,b=(u.scrollLeft-k)*g}e={left:e.left-b,top:e.top-w,right:e.right-b,bottom:e.bottom-w},b&&Math.abs(b-v)<1&&(i="nearest"),w&&Math.abs(w-y)<1&&(r="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function YQ(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class JQ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?Co(n):0),i,Math.min(e.focusOffset,i?Co(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let xu=null;function w8(t){if(t.setActive)return t.setActive();if(xu)return t.focus(xu);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(xu==null?{get preventScroll(){return xu={preventScroll:!0},!0}}:void 0),!xu){xu=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let UR;function Qc(t,e,n=e){let i=UR||(UR=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function yd(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function ZQ(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function S8(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function QQ(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,Co(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=Co(n))}else{if(n==t)return!0;i=Zc(n),n=n.parentNode}}function k8(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function _8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=Co(n)}else if(n.parentNode&&!sy(n))i=Zc(n),n=n.parentNode;else return null}}function C8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!sy(n))i=Zc(n)+1,n=n.parentNode;else return null}}class vi{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new vi(e.parentNode,Zc(e),n)}static after(e,n){return new vi(e.parentNode,Zc(e)+1,n)}}const sE=[];class Ut{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Ut.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=VR(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=VR(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=Co(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ut.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&r==-1&&(r=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=sE){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new E8(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ut.prototype.breakAfter=0;function VR(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class E8{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function A8(t,e,n,i,r,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!f&&s.length<2&&u.merge(n,r,s.length?d:null,n==0,a,l))){if(i<c.length){let p=c[i];p&&(r<p.length||p.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(p=p.split(r),r=0),!f&&d&&p.merge(0,r,d,!0,0,l)?s[s.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function N8(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of i)d+=f.length;t.length+=d,A8(t,c,u,a,l,i,0,r,s)}let Zi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Z2=typeof document<"u"?document:{documentElement:{style:{}}};const Q2=/Edge\/(\d+)/.exec(Zi.userAgent),P8=/MSIE \d/.test(Zi.userAgent),ek=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Zi.userAgent),Ib=!!(P8||ek||Q2),HR=!Ib&&/gecko\/(\d+)/i.test(Zi.userAgent),Lw=!Ib&&/Chrome\/(\d+)/.exec(Zi.userAgent),eee="webkitFontSmoothing"in Z2.documentElement.style,M8=!Ib&&/Apple Computer/.test(Zi.vendor),WR=M8&&(/Mobile\/\w+/.test(Zi.userAgent)||Zi.maxTouchPoints>2);var Pe={mac:WR||/Mac/.test(Zi.platform),windows:/Win/.test(Zi.platform),linux:/Linux|X11/.test(Zi.platform),ie:Ib,ie_version:P8?Z2.documentMode||6:ek?+ek[1]:Q2?+Q2[1]:0,gecko:HR,gecko_version:HR?+(/Firefox\/(\d+)/.exec(Zi.userAgent)||[0,0])[1]:0,chrome:!!Lw,chrome_version:Lw?+Lw[1]:0,ios:WR,android:/Android\b/.test(Zi.userAgent),safari:M8,webkit_version:eee?+(/\bAppleWebKit\/(\d+)/.exec(Zi.userAgent)||[0,0])[1]:0,tabSize:Z2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const tee=256;class Rs extends Ut{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Rs)||this.length-(n-e)+i.length>tee||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Rs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new vi(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return nee(this.dom,e,n)}}class ha extends Ut{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(S8(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof ha&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(N8(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new ha(this.mark,n,o)}domAtPos(e){return R8(this,e)}coordsAt(e,n){return O8(this,e,n)}}function nee(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?Pe.chrome||Pe.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Qc(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Pe.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Ob(l,o<0):l||null}class il extends Ut{static create(e,n,i){return new il(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=il.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof il)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof il&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Et.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Et.empty}domAtPos(e){return(this.length?e==0:this.side>0)?vi.before(this.dom):vi.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return Ob(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class nf extends Ut{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof nf&&e.side==this.side}split(){return new nf(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?vi.before(this.dom):vi.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Et.empty}get isHidden(){return!0}}Rs.prototype.children=il.prototype.children=nf.prototype.children=sE;function R8(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new vi(n,0)}function T8(t,e,n){let i,{children:r}=t;n>0&&e instanceof ha&&r.length&&(i=r[r.length-1])instanceof ha&&i.mark.eq(e.mark)?T8(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function O8(t,e,n){let i=null,r=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let p=c.children[d],g=f+p.length;g>=u&&(p.children.length?a(p,u-f):(!s||s.isHidden&&(n>0||ree(s,p)))&&(g>u||f==g&&p.getSide()>0)?(s=p,o=u-f):(f<u||f==g&&p.getSide()<0&&!p.isHidden)&&(i=p,r=u-f)),f=g}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):iee(t)}function iee(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Fp(e);return n[n.length-1]||null}function ree(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function tk(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const GR=Object.create(null);function oy(t,e,n){if(t==e)return!0;t||(t=GR),e||(e=GR);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function nk(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function see(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class ql{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ri=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Ri||(Ri={}));class dt extends Jc{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Em(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Ll(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=I8(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new Ll(e,i,r,n,e.widget||null,!0)}static line(e){return new Am(e)}static set(e,n=!1){return Tt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}dt.none=Tt.empty;class Em extends dt{constructor(e){let{start:n,end:i}=I8(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof Em&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&oy(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Em.prototype.point=!1;class Am extends dt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Am&&this.spec.class==e.spec.class&&oy(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Am.prototype.mapMode=er.TrackBefore;Am.prototype.point=!0;class Ll extends dt{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?er.TrackBefore:er.TrackAfter:er.TrackDel}get type(){return this.startSide!=this.endSide?Ri.WidgetRange:this.startSide<=0?Ri.WidgetBefore:Ri.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ll&&oee(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Ll.prototype.point=!0;function I8(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function oee(t,e){return t==e||!!(t&&e&&t.compare(e))}function H0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class Nn extends Ut{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof Nn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),N8(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new Nn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){oy(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){T8(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=tk(n,this.attrs||{})),i&&(this.attrs=tk({class:i},this.attrs||{}))}domAtPos(e){return R8(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(S8(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(nk(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Ut.get(r)instanceof ha;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Ut.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Pe.ios||!this.children.some(s=>s instanceof Rs))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Rs)||/[^ -~]/.test(i.text))return null;let r=Fp(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=O8(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof Nn&&this.children.length==0&&e.children.length==0&&oy(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof Nn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class ra extends Ut{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof ra)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?vi.before(this.dom):vi.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new ra(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return sE}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Et.empty}domBoundsAround(){return null}become(e){return e instanceof ra&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof ik?null:Ob(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class ik extends ql{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Gh{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ra&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Nn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ng(new nf(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ra)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Ng(new Rs(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Ll){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof Ll)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ra(i.widget||rf.block,a,i));else{let l=il.create(i.widget||rf.inline,a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(Ng(new nf(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(Ng(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new Gh(e,n,i,s);return o.openEnd=Tt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Ng(t,e){for(let n of e)t=new ha(n,[t],t.length);return t}class rf extends ql{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}rf.inline=new rf("span");rf.block=new rf("div");var en=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(en||(en={}));const eu=en.LTR,oE=en.RTL;function D8(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const aee=D8("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),lee=D8("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),rk=Object.create(null),Fs=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);rk[e]=n,rk[n]=-e}function j8(t){return t<=247?aee[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?lee[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const cee=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class rl{get dir(){return this.level%2?oE:eu}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function L8(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!L8(i.inner,r.inner))return!1}return!0}const Ft=[];function uee(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let c=o,u=l,d=l;c<a;c++){let f=j8(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),Ft[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=Ft[c];if(f==128)c<a-1&&u==Ft[c+1]&&u&24?f=Ft[c]=u:Ft[c]=256;else if(f==64){let p=c+1;for(;p<a&&Ft[p]==64;)p++;let g=c&&u==8||p<n&&Ft[p]==8?d==1?1:8:256;for(let m=c;m<p;m++)Ft[m]=g;c=p-1}else f==8&&d==1&&(Ft[c]=1);u=f,f&7&&(d=f)}}}function dee(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let d=c,f,p,g;d<u;d++)if(p=rk[f=t.charCodeAt(d)])if(p<0){for(let m=a-3;m>=0;m-=3)if(Fs[m+1]==-p){let v=Fs[m+2],y=v&2?r:v&4?v&1?s:r:0;y&&(Ft[d]=Ft[Fs[m]]=y),a=m;break}}else{if(Fs.length==189)break;Fs[a++]=d,Fs[a++]=f,Fs[a++]=l}else if((g=Ft[d])==2||g==1){let m=g==r;l=m?0:1;for(let v=a-3;v>=0;v-=3){let y=Fs[v+2];if(y&2)break;if(m)Fs[v+2]|=2;else{if(y&4)break;Fs[v+2]|=4}}}}}function fee(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let c=Ft[l];if(c==256){let u=l+1;for(;;)if(u==a){if(r==n.length)break;u=n[r++].to,a=r<n.length?n[r].from:e}else if(Ft[u]==256)u++;else break;let d=s==1,f=(u<e?Ft[u]:i)==1,p=d==f?d?1:2:i;for(let g=u,m=r,v=m?n[m-1].to:t;g>l;)g==v&&(g=n[--m].from,v=m?n[m-1].to:t),Ft[--g]=p;l=u}else s=c,l++}}}function sk(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=Ft[l];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c<s.length&&g==s[c].from){if(d)break e;let m=s[c];if(!u)for(let v=m.to,y=c+1;;){if(v==n)break e;if(y<s.length&&s[y].from==v)v=s[y++].to;else{if(Ft[v]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new rl(l,m.from,p));let v=m.direction==eu!=!(p%2);ok(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}g=m.to}else{if(g==n||(u?Ft[g]!=a:Ft[g]==a))break;g++}f?sk(t,l,g,i+1,r,f,o):l<g&&o.push(new rl(l,g,p)),l=g}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=Ft[l-1];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c&&g==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let v=m.from,y=c;;){if(v==e)break e;if(y&&s[y-1].to==v)v=s[--y].from;else{if(Ft[v-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new rl(m.to,l,p));let v=m.direction==eu!=!(p%2);ok(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}g=m.from}else{if(g==e||(u?Ft[g-1]!=a:Ft[g-1]==a))break;g--}f?sk(t,g,l,i+1,r,f,o):g<l&&o.push(new rl(g,l,p)),l=g}}function ok(t,e,n,i,r,s,o){let a=e%2?2:1;uee(t,r,s,i,a),dee(t,r,s,i,a),fee(r,s,i,a),sk(t,r,s,e,n,i,o)}function hee(t,e,n){if(!t)return[new rl(0,0,e==oE?1:0)];if(e==eu&&!n.length&&!cee.test(t))return B8(t.length);if(n.length)for(;t.length>Ft.length;)Ft[Ft.length]=256;let i=[],r=e==eu?0:1;return ok(t,r,r,n,0,t.length,i),i}function B8(t){return[new rl(0,t,0)]}let $8="";function pee(t,e,n,i,r){var s;let o=i.head-t.from,a=rl.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],c=l.side(r,n);if(o==c){let f=a+=r?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!r,n),c=l.side(r,n)}let u=ri(t.text,o,l.forward(r,n));(u<l.from||u>l.to)&&(u=c),$8=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?se.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):se.cursor(u+t.from,l.forward(r,n)?-1:1,l.level)}function mee(t,e,n){for(let i=e;i<n;i++){let r=j8(t.charCodeAt(i));if(r==1)return eu;if(r==2||r==4)return oE}return eu}const F8=Re.define(),z8=Re.define(),U8=Re.define(),V8=Re.define(),ak=Re.define(),H8=Re.define(),W8=Re.define(),aE=Re.define(),lE=Re.define(),G8=Re.define({combine:t=>t.some(e=>e)}),K8=Re.define({combine:t=>t.some(e=>e)}),X8=Re.define();class bd{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new bd(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new bd(se.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Pg=ut.define({map:(t,e)=>t.map(e)}),q8=ut.define();function kr(t,e,n){let i=t.facet(V8);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Qo=Re.define({combine:t=>t.length?t[0]:!0});let gee=0;const id=Re.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class ci{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(id.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(id.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new ci(gee++,e,i,r,a=>{let l=[];return o&&l.push(zp.of(c=>{let u=c.plugin(a);return u?o(u):dt.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return ci.define((i,r)=>new e(i,r),n)}}class Bw{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(kr(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){kr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){kr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Y8=Re.define(),cE=Re.define(),zp=Re.define(),J8=Re.define(),uE=Re.define(),Z8=Re.define();function KR(t,e){let n=t.state.facet(Z8);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return Tt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=r;for(let f=a.length-1;f>=0;f--,l--){let p=a[f].spec.bidiIsolate,g;if(p==null&&(p=mee(e.text,c,u)),l>0&&d.length&&(g=d[d.length-1]).to==c&&g.direction==p)g.to=u,d=g.inner;else{let m={from:c,to:u,direction:p,inner:[]};d.push(m),d=m.inner}}}}),r}const Q8=Re.define();function dE(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(Q8)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const xh=Re.define();class ns{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new ns(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],p=Math.max(a,d),g=Math.min(u,f);if(p<=g&&new ns(p+c,g+c,p,g).addToSet(i),f>u)break;s+=2}if(!l)return i;new ns(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class ay{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Dn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new ns(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new ay(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class XR extends Ut{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=dt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Nn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ns(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!kee(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?yee(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new ns(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Pe.ie||Pe.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=wee(o,a,e.changes);return i=ns.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Pe.chrome||Pe.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ra&&o.widget instanceof ik&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,p,g,m;if(i&&i.range.fromB<d&&i.range.toB>u){let k=Gh.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=Gh.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=k.breakAtStart,g=k.openStart,m=_.openEnd;let E=this.compositionView(i);_.breakAtStart?E.breakAfter=1:_.content.length&&E.merge(E.length,E.length,_.content[0],!1,_.openStart,0)&&(E.breakAfter=_.content[0].breakAfter,_.content.shift()),k.content.length&&E.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(E).concat(_.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:m}=Gh.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:y}=s.findPos(c,1),{i:b,off:w}=s.findPos(l,-1);A8(this,b,w,v,y,f,p,g,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(q8)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new Rs(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new ha(r,[n],n.length);let i=new Nn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Ut.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(Qo)||this.dom.tabIndex>-1)&&V0(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Pe.gecko&&a.empty&&!this.hasComposition&&vee(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new vi(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Wh(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Wh(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Pe.android&&Pe.chrome&&this.dom.contains(u.focusNode)&&See(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=$p(this.view.root);if(d)if(a.empty){if(Pe.gecko){let f=bee(l.node,l.offset);if(f&&f!=3){let p=(f==1?_8:C8)(l.node,l.offset);p&&(l=new vi(p.node,p.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new vi(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new vi(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Wh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=$p(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=Nn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Ut.get(n.childNodes[r]);s instanceof Nn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Ut.get(n.childNodes[r]);s instanceof Nn&&(i=s.domAtPos(s.length))}return i?new vi(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Ut.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof Nn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof Nn&&!(i instanceof Nn&&n>=0)))i=a,r=c;else if(i&&c==e&&l==e&&a instanceof ra&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof Nn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof Rs))return null;let s=ri(r.text,i);if(s==i)return null;let o=Qc(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==en.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>r)break;if(c>=i){let p=d.dom.getBoundingClientRect();if(n.push(p.height),o){let g=d.dom.lastChild,m=g?Fp(g):[];if(m.length){let v=m[m.length-1],y=l?v.right-p.left:p.right-v.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?en.RTL:en.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Nn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Fp(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new E8(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(dt.replace({widget:new ik(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return dt.set(e)}updateDeco(){let e=1,n=this.view.state.facet(zp).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(J8).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(Tt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(X8))try{if(c(this.view,e.range,e))return!0}catch(u){kr(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=dE(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;qQ(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==en.LTR)}}function vee(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function e6(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=_8(n.focusNode,n.focusOffset),r=C8(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=Ut.get(r.node);if(!a||a instanceof Rs&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=Ut.get(i.node);!l||l instanceof Rs&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function yee(t,e,n){let i=e6(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new ns(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=r.parentNode;;d=d.parentNode){let f=Ut.get(d);if(f instanceof ha)u.push({node:d,deco:f.mark});else{if(f instanceof Nn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new Em({inclusive:!0,attributes:see(d),tagName:d.tagName.toLowerCase()})});else return null}}}function bee(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let xee=class{constructor(){this.changes=[]}compareRange(e,n){H0(e,n,this.changes)}comparePoint(e,n){H0(e,n,this.changes)}boundChange(e){H0(e,e,this.changes)}};function wee(t,e,n){let i=new xee;return Tt.compare(t,e,n,i),i.changes}function See(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function kee(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function _ee(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return se.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=ri(r.text,s,!1):a=ri(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=ri(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=ri(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return se.range(o+r.from,a+r.from)}function Cee(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Eee(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function $w(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function qR(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function YR(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function lk(t,e,n){let i,r,s,o,a=!1,l,c,u,d;for(let g=t.firstChild;g;g=g.nextSibling){let m=Fp(g);for(let v=0;v<m.length;v++){let y=m[v];r&&$w(r,y)&&(y=qR(YR(y,r.bottom),r.top));let b=Cee(e,y),w=Eee(n,y);if(b==0&&w==0)return g.nodeType==3?JR(g,e,n):lk(g,e,n);(!i||o>w||o==w&&s>b)&&(i=g,r=y,s=b,o=w,a=b?e<y.left?v>0:v<m.length-1:!0),b==0?n>y.bottom&&(!u||u.bottom<y.bottom)?(l=g,u=y):n<y.top&&(!d||d.top>y.top)&&(c=g,d=y):u&&$w(u,y)?u=YR(u,y.bottom):d&&$w(d,y)&&(d=qR(d,y.top))}}if(u&&u.bottom>=n?(i=l,r=u):d&&d.top<=n&&(i=c,r=d),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return JR(i,f,n);if(a&&i.contentEditable!="false")return lk(i,f,n);let p=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:p}}function JR(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Qc(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,p=f;if((Pe.chrome||Pe.gecko)&&Qc(t,a).getBoundingClientRect().left==u.right&&(p=!f),d<=0)return{node:t,offset:a+(p?1:0)};r=a+(p?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function t6(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(f),l.type!=Ri.Text;)for(;f=i>0?l.bottom+k:l.top-k,!(f>=0&&f<=c);){if(_)return n?null:0;_=!0,i=-i}d=a+f;let p=l.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:ZR(t,o,l,u,d);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:ZR(t,o,l,u,d);let g=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:g,v=m.elementFromPoint(u,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(u=Math.max(o.left+1,Math.min(o.right-1,u)),v=m.elementFromPoint(u,d),v&&!t.contentDOM.contains(v)&&(v=null));let y,b=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(g.caretPositionFromPoint){let k=g.caretPositionFromPoint(u,d);k&&({offsetNode:y,offset:b}=k)}else if(g.caretRangeFromPoint){let k=g.caretRangeFromPoint(u,d);k&&({startContainer:y,startOffset:b}=k,(!t.contentDOM.contains(y)||Pe.safari&&Aee(y,b,u)||Pe.chrome&&Nee(y,b,u))&&(y=void 0))}y&&(b=Math.min(Co(y),b))}if(!y||!t.docView.dom.contains(y)){let k=Nn.find(t.docView,p);if(!k)return f>l.top+l.height/2?l.to:l.from;({node:y,offset:b}=lk(k.dom,u,d))}let w=t.docView.nearest(y);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=w.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(y,b)+w.posAtStart}function ZR(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+VQ(o,s,t.state.tabSize)}function Aee(t,e,n){let i,r=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return Qc(t,i-1,i).getBoundingClientRect().right>n}function Nee(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Qc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function ck(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==Ri.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function Pee(t,e,n,i){let r=ck(t,e.head,e.assoc||-1),s=!i||r.type!=Ri.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==en.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return se.cursor(l,n?-1:1)}return se.cursor(n?r.to:r.from,n?-1:1)}function QR(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let c=pee(r,s,o,a,n),u=$8;if(!c){if(r.number==(n?t.state.doc.lines:1))return a;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function Mee(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==si.Space&&(r=o),r==o}}function Ree(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return se.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-p.from))),a=(s<0?p.top:p.bottom)+u}let d=l.left+o,f=i??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=a+(f+p)*s,m=t6(t,{x:d,y:g},!1,s);if(g<l.top||g>l.bottom||(s<0?m<r:m>r)){let v=t.docView.coordsForChar(m),y=!v||g<v.top?-1:1;return se.cursor(m,y,void 0,o)}}}function W0(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function Fw(t,e,n){let i=W0(t.state.facet(uE).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:se.cursor(i,i<n.from?1:-1)}const wh="";class Tee{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(wt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=wh}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=Ut.get(r),l=Ut.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:sy(r))||sy(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Ut.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Oee(e,i.node,i.offset)?n:0))}}function Oee(t,e,n){for(;;){if(!e||n<Co(e))return!1;if(e==t)return!0;n=Zc(e)+1,e=e.parentNode}}class e3{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class Iee{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:Lee(e),l=new Tee(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Bee(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!J2(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!J2(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((Pe.ios||Pe.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),f=Math.max(l,c),p=u.from-d,g=u.to-f;(p==0||p==1||d==0)&&(g==0||g==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=se.single(c,l)}}}function n6(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(s===8||Pe.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=jee(t.state.doc.sliceString(o,a,wh),e.text,l-o,c);u&&(Pe.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==wh+wh&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:Et.of(e.text.slice(u.from,u.toB).split(wh))})}else i&&(!t.hasFocus&&t.state.facet(Qo)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(Pe.mac||Pe.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=se.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Et.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:Pe.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=se.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Et.of([" "])}),n)return fE(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function fE(t,e,n,i=-1){if(Pe.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(Pe.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&yd(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&yd(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&yd(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=Dee(t,e,n));return t.state.facet(H8).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function Dee(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&e6(t,n.main.head);if(d){let g=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-g}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,p=s.to-s.from;i=r.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:a,range:l||g.map(a)};let m=g.to-f,v=m-c.length;if(g.to-g.from!=p||t.state.sliceDoc(v,m)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let y=r.changes({from:v,to:m,insert:e.insert}),b=g.to-s.to;return{changes:y,range:l?se.range(Math.max(0,l.anchor+b),Math.max(0,l.head+b)):g.map(y)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function jee(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function Lee(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new e3(n,i)),(r!=n||s!=i)&&e.push(new e3(r,s))),e}function Bee(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?se.single(n+e,i+e):null}class $ee{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Pe.safari&&e.contentDOM.addEventListener("input",()=>null),Pe.gecko&&tte(e.contentDOM.ownerDocument)}handleEvent(e){!Kee(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Fee(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&r6.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Pe.android&&Pe.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Pe.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=i6.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||zee.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,yd(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Pe.safari&&!Pe.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function t3(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){kr(n.state,r)}}}function Fee(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(t3(i.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(t3(i.value,l))}}for(let i in Ts)n(i).handlers.push(Ts[i]);for(let i in ls)n(i).observers.push(ls[i]);return e}const i6=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],zee="dthko",r6=[16,17,18,20,91,92,224,225],Mg=6;function Rg(t){return Math.max(0,t)*.7+8}function Uee(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Vee{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=YQ(e.contentDOM),this.atoms=e.state.facet(uE).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(wt.allowMultipleSelections)&&Hee(e,n),this.dragging=Gee(e,n)&&a6(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Uee(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=dE(this.view);e.clientX-l.left<=r+Mg?n=-Rg(r-e.clientX):e.clientX+l.right>=o-Mg&&(n=Rg(e.clientX-o)),e.clientY-l.top<=s+Mg?i=-Rg(s-e.clientY):e.clientY+l.bottom>=a-Mg&&(i=Rg(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=W0(this.atoms,r.from,0);o!=r.from&&(s=se.cursor(o,-1))}else{let o=W0(this.atoms,r.from,-1),a=W0(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=se.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?se.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Hee(t,e){let n=t.state.facet(F8);return n.length?n[0](e):Pe.mac?e.metaKey:e.ctrlKey}function Wee(t,e){let n=t.state.facet(z8);return n.length?n[0](e):Pe.mac?!e.altKey:!e.ctrlKey}function Gee(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=$p(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Kee(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Ut.get(n))&&i.ignoreEvent(e))return!1;return!0}const Ts=Object.create(null),ls=Object.create(null),s6=Pe.ie&&Pe.ie_version<15||Pe.ios&&Pe.webkit_version<604;function Xee(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),o6(t,n.value)},50)}function Db(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function o6(t,e){e=Db(t.state,aE,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(uk!=null&&n.selection.ranges.every(l=>l.empty)&&uk==s.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:se.cursor(c.from+d.length)}})}else o?i=n.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:se.cursor(l.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}ls.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Ts.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);ls.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};ls.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Ts.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(U8))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=Jee(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new Vee(t,e,n,i)),i&&t.observer.ignore(()=>{w8(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function n3(t,e,n,i){if(i==1)return se.cursor(e,n);if(i==2)return _ee(t.state,e,n);{let r=Nn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,se.range(o,a)}}let i3=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function qee(t,e,n,i){let r=Nn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&i3(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&i3(n,i,a)?1:o&&o.bottom>=i?-1:1}function r3(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:qee(t,n,e.clientX,e.clientY)}}const Yee=Pe.ie&&Pe.ie_version<=11;let s3=null,o3=0,a3=0;function a6(t){if(!Yee)return t.detail;let e=s3,n=a3;return s3=t,a3=Date.now(),o3=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(o3+1)%3:1}function Jee(t,e){let n=r3(t,e),i=a6(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=r3(t,s),c,u=n3(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=n3(t,n.pos,n.bias,i),f=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=f<u.from?se.range(f,p):se.range(p,f)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&i==1&&r.ranges.length>1&&(c=Zee(r,l.pos))?c:a?r.addRange(u):se.create([u])}}}function Zee(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return se.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Ts.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=se.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Db(t.state,lE,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ts.dragend=t=>(t.inputState.draggedContent=null,!1);function l3(t,e,n,i){if(n=Db(t.state,aE,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&Wee(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Ts.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&l3(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return l3(t,e,i,!0),!0}return!1};Ts.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=s6?null:e.clipboardData;return n?(o6(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Xee(t),!1)};function Qee(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function ete(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:Db(t,lE,e.join(t.lineBreak)),ranges:n,linewise:i}}let uk=null;Ts.copy=Ts.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=ete(t.state);if(!n&&!r)return!1;uk=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=s6?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(Qee(t,n),!1)};const l6=wa.define();function c6(t,e){let n=[];for(let i of t.facet(W8)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:l6.of(!0)}):null}function u6(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=c6(t.state,e);n?t.dispatch(n):t.update([])}},10)}ls.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),u6(t)};ls.blur=t=>{t.observer.clearSelectionRange(),u6(t)};ls.compositionstart=ls.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};ls.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Pe.chrome&&Pe.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};ls.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Ts.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return fE(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let r;if(Pe.chrome&&Pe.android&&(r=i6.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Pe.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Pe.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>ls.compositionend(t,e),20),!1};const c3=new Set;function tte(t){c3.has(t)||(c3.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const u3=["pre-wrap","normal","pre-line","break-spaces"];let sf=!1;function d3(){sf=!1}class nte{constructor(e){this.lineWrapping=e,this.doc=Et.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return u3.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=u3.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class ite{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class oo{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Ri.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ll?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new oo(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var qt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(qt||(qt={}));const G0=.001;class Ti{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>G0&&(sf=!0),this.height=e)}replace(e,n,i){return Ti.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=r[a],f=s.lineAt(l,qt.ByPosNoHeight,i.setDoc(n),0,0),p=f.to>=c?f:s.lineAt(c,qt.ByPosNoHeight,i,0,0);for(d+=p.to-c,c=p.to;a>0&&f.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,qt.ByPosNoHeight,i,0,0));u+=f.from-l,l=f.from;let g=hE.build(i.setDoc(o),e,u,d);s=ly(s,s.replace(l,c,g))}return s.updateHeight(i,0)}static empty(){return new vr(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new rte(Ti.of(e.slice(0,n)),o,Ti.of(e.slice(i)))}}function ly(t,e){return t==e?t:(t.constructor!=e.constructor&&(sf=!0),e)}Ti.prototype.size=1;class d6 extends Ti{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new oo(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class vr extends d6{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new oo(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof vr||r instanceof Jn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Jn?r=new vr(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Ti.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Jn extends Ti{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(i,e-d/2);return new oo(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:u,length:d}=n.doc.line(s+c);return new oo(u,d,i+a*c,a,0)}}lineAt(e,n,i,r,s){if(n==qt.ByHeight)return this.blockAt(e,i,r,s);if(n==qt.ByPosNoHeight){let{from:p,to:g}=i.doc.lineAt(e);return new oo(p,g-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=r+a*d+l*(c.from-s-d);return new oo(c.from,c.length,Math.max(r,Math.min(f,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=n;){let f=i.doc.lineAt(u);if(u==e){let g=f.number-a;d+=l*g+c*(e-s-g)}let p=l+c*f.length;o(new oo(f.from,f.length,d,p,0)),d+=p,u=f.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Jn?i[i.length-1]=new Jn(s.length+r):i.push(null,new Jn(r-1))}if(e>0){let s=i[0];s instanceof Jn?i[0]=new Jn(e+s.length):i.unshift(new Jn(e-1),null)}return Ti.of(i)}decomposeLeft(e,n){n.push(new Jn(e-1),null)}decomposeRight(e,n){n.push(null,new Jn(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Jn(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=G0&&(l=-2);let f=new vr(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new Jn(s-a).updateHeight(e,a));let c=Ti.of(o);return(l<0||Math.abs(c.height-this.height)>=G0||Math.abs(l-this.heightMetrics(e,n).perLine)>=G0)&&(sf=!0),ly(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class rte extends Ti{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==qt.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==qt.ByPosNoHeight?qt.ByPosNoHeight:qt.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,qt.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&f3(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),f3(s,a)}return Ti.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Ti.of(this.break?[e,null,n]:[e,n]):(this.left=ly(this.left,e),this.right=ly(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function f3(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Jn&&(i=t[e+1])instanceof Jn&&t.splice(e-1,3,new Jn(n.length+1+i.length))}const ste=5;class hE{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof vr?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new vr(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new d6(o,r,i)):(o||s||r>=ste)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new vr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Jn(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof vr)return e;let n=new vr(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof vr)&&!this.isCovered?this.nodes.push(new vr(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof vr&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new hE(i,e);return Tt.spans(n,i,r,s,0),s.finish(i)}}function ote(t,e,n){let i=new ate;return Tt.compare(t,e,n,i,0),i.changes}class ate{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&H0(e,n,this.changes,5)}}function lte(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?r.innerHeight:l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function cte(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function ute(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class zw{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return dt.replace({widget:new dte(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class dte extends ql{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class h3{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=p3,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=en.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(cE).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new nte(n),this.stateDeco=e.facet(zp).filter(i=>typeof i!="function"),this.heightMap=Ti.empty().applyChanges(this.stateDeco,Et.empty,this.heightOracle.setDoc(e.doc),[new ns(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=dt.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Tg(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?p3:new pE(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Sh(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(zp).filter(u=>typeof u!="function");let r=e.changedRanges,s=ns.extendWithRanges(r,ote(i,this.stateDeco,e?e.changes:Dn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);d3(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||sf)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(K8)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?en.RTL:en.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:k,scaleY:_}=x8(n,a);(k>.005&&Math.abs(this.scaleX-k)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=k,this.scaleY=_,c|=16,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=k8(e.scrollDOM);let g=(this.printing?ute:lte)(n,this.paddingTop),m=g.top-this.pixelViewport.top,v=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!cte(e.dom))return 0;let b=a.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(o=!0),o||r.lineWrapping&&Math.abs(b-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=_>0&&r.refresh(s,_,E,C,b/E,k),o&&(e.docView.minWidth=0,c|=16)}m>0&&v>0?u=Math.max(m,v):m<0&&v<0&&(u=Math.min(m,v)),d3();for(let _ of this.viewports){let E=_.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?Ti.empty().applyChanges(this.stateDeco,Et.empty,this.heightOracle,[new ns(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new ite(_.from,E))}sf&&(c|=2)}let w=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Tg(r.lineAt(o-i*1e3,qt.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,qt.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,qt.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new Tg(r.lineAt(f-1e3/2,qt.ByHeight,s,0,0).from,r.lineAt(f+u+1e3/2,qt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Tg(this.heightMap.lineAt(i,qt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,qt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,qt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,qt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new zw(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=en.LTR&&!i)return[];let a=[],l=(u,d,f,p)=>{if(d-u<s)return;let g=this.state.selection.main,m=[g.from];g.empty||m.push(g.to);for(let y of m)if(y>u&&y<d){l(u,y-10,f,p),l(y+10,d,f,p);return}let v=hte(e,y=>y.from>=f.from&&y.to<=f.to&&Math.abs(y.from-u)<s&&Math.abs(y.to-d)<s&&!m.some(b=>y.from<b&&y.to>b));if(!v){if(d<f.to&&n&&i&&n.visibleRanges.some(w=>w.from<=d&&w.to>=d)){let w=n.moveToLineBoundary(se.cursor(d),!1,!0).head;w>u&&(d=w)}let y=this.gapSize(f,u,d,p),b=i||y<2e6?y:2e6;v=new zw(u,d,y,b)}a.push(v)},c=u=>{if(u.length<o||u.type!=Ri.Text)return;let d=fte(u.from,u.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,y;if(f!=null){let b=Ig(d,f),w=((this.visibleBottom-this.visibleTop)/2+m)/u.height;v=b-w,y=b+w}else v=(this.visibleTop-u.top-m)/u.height,y=(this.visibleBottom-u.top+m)/u.height;p=Og(d,v),g=Og(d,y)}else{let m=d.total*this.heightOracle.charWidth,v=r*this.heightOracle.charWidth,y=0;if(m>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=E.size-E.displaySize);let b=this.pixelViewport.left+y,w=this.pixelViewport.right+y,k,_;if(f!=null){let E=Ig(d,f),C=((w-b)/2+v)/m;k=E-C,_=E+C}else k=(b-v)/m,_=(w+v)/m;p=Og(d,k),g=Og(d,_)}p>u.from&&l(u.from,p,u,d),g<u.to&&l(g,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,i,r){let s=Ig(r,i)-Ig(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){zw.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=dt.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];Tt.spans(n,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Sh(this.heightMap.lineAt(e,qt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Sh(this.heightMap.lineAt(this.scaler.fromDOM(e),qt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Sh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Tg=class{constructor(e,n){this.from=e,this.to=n}};function fte(t,e,n){let i=[],r=t,s=0;return Tt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Og({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function Ig(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function hte(t,e){for(let n of t)if(e(n))return n}const p3={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class pE{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,qt.ByPos,e,0,0).top,u=n.lineAt(l,qt.ByPos,e,0,0).bottom;return r+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof pE?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function Sh(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new oo(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Sh(r,e)):t._content)}const Dg=Re.define({combine:t=>t.join(" ")}),dk=Re.define({combine:t=>t.indexOf(!0)>-1}),fk=Dl.newName(),f6=Dl.newName(),h6=Dl.newName(),p6={"&light":"."+f6,"&dark":"."+h6};function hk(t,e,n){return new Dl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const pte=hk("."+fk,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},p6),mte={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Uw=Pe.ie&&Pe.ie_version<=11;class gte{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new JQ,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(Pe.ie&&Pe.ie_version<=11||Pe.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Pe.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Pe.chrome&&Pe.chrome_version<126)&&(this.editContext=new yte(e),e.state.facet(Qo)&&(e.contentDOM.editContext=this.editContext.editContext)),Uw&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Qo)?i.root.activeElement!=this.dom:!V0(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Pe.ie&&Pe.ie_version<=11||Pe.android&&Pe.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Wh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=$p(e.root);if(!n)return!1;let i=Pe.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&vte(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=V0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&QQ(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,mte),Uw&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Uw&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&yd(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&V0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Iee(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=n6(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=m3(n,e.previousSibling||e.target.previousSibling,-1),r=m3(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Qo)!=e.state.facet(Qo)&&(e.view.contentDOM.editContext=e.state.facet(Qo)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function m3(t,e,n){for(;e;){let i=Ut.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function g3(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return Wh(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function vte(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return g3(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?g3(t,n):null}class yte{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:Et.of(i.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=se.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(r)||e.dispatch({selection:u,userEvent:"select"});return}if((Pe.mac||Pe.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:Et.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);fE(e,c,se.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(dt.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:q8.of(dt.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=$p(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(i)return;let u=c.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(c)){r=this.pendingContextChange=null,n+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class je{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||ZQ(e.parent)||document,this.viewState=new h3(e.state||wt.create(e)),e.scrollTo&&e.scrollTo.is(Pg)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(id).map(r=>new Bw(r));for(let r of this.plugins)r.update(this);this.observer=new gte(this),this.inputState=new $ee(this),this.inputState.ensureHandlers(this.plugins),this.docView=new XR(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof $n?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(l6))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=c6(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(wt.phrases)!=this.state.facet(wt.phrases))return this.setState(s);r=ay.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new bd(p.empty?p:se.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(Pg)&&(d=p.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=cy.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(xh)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Dg)!=r.state.facet(Dg)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(ak))try{f(r)}catch(p){kr(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!n6(this,u)&&c.force&&yd(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new h3(e),this.plugins=e.facet(id).map(i=>new Bw(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new XR(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(id),i=e.state.facet(id);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new Bw(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){kr(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(k8(i))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return kr(this.state,g),v3}}),d=ay.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=v3)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){kr(this.state,g)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(g>1||g<-1){r=r+g,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(ak))a(n)}get themeClasses(){return fk+" "+(this.state.facet(dk)?h6:f6)+" "+this.state.facet(Dg)}updateAttrs(){let e=y3(this,Y8,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Qo)?"true":"false",class:"cm-content",style:`${Pe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),y3(this,cE,n);let i=this.observer.ignore(()=>{let r=nk(this.contentDOM,this.contentAttrs,n),s=nk(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(je.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(xh);let e=this.state.facet(je.cspNonce);Dl.mount(this.root,this.styleModules.concat(pte).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Fw(this,e,QR(this,e,n,i))}moveByGroup(e,n){return Fw(this,e,QR(this,e,n,i=>Mee(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return se.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return Pee(this,e,n,i)}moveVertically(e,n,i){return Fw(this,e,Ree(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),t6(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[rl.find(s,e-r.from,-1,n)];return Ob(i,o.dir==en.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(G8)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>bte)return B8(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||L8(s.isolates,i=KR(this,e))))return s.order;i||(i=KR(this,e));let r=hee(e.text,n,i);return this.bidiCache.push(new cy(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Pe.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{w8(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Pg.of(new bd(typeof e=="number"?se.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Pg.of(new bd(se.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ci.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ci.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=Dl.newName(),r=[Dg.of(i),xh.of(hk(`.${i}`,e))];return n&&n.dark&&r.push(dk.of(!0)),r}static baseTheme(e){return km.lowest(xh.of(hk("."+fk,e,p6)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Ut.get(i)||Ut.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}je.styleModule=xh;je.inputHandler=H8;je.clipboardInputFilter=aE;je.clipboardOutputFilter=lE;je.scrollHandler=X8;je.focusChangeEffect=W8;je.perLineTextDirection=G8;je.exceptionSink=V8;je.updateListener=ak;je.editable=Qo;je.mouseSelectionStyle=U8;je.dragMovesSelection=z8;je.clickAddsSelectionRange=F8;je.decorations=zp;je.outerDecorations=J8;je.atomicRanges=uE;je.bidiIsolatedRanges=Z8;je.scrollMargins=Q8;je.darkTheme=dk;je.cspNonce=Re.define({combine:t=>t.length?t[0]:""});je.contentAttributes=cE;je.editorAttributes=Y8;je.lineWrapping=je.contentAttributes.of({class:"cm-lineWrapping"});je.announce=ut.define();const bte=4096,v3={};class cy{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:en.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new cy(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function y3(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&tk(o,n)}return n}const xte=Pe.mac?"mac":Pe.windows?"win":Pe.linux?"linux":"key";function wte(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function jg(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Ste=km.default(je.domEventHandlers({keydown(t,e){return v6(g6(e.state),t,e,"editor")}})),m6=Re.define({enables:Ste}),b3=new WeakMap;function g6(t){let e=t.facet(m6),n=b3.get(e);return n||b3.set(e,n=Cte(e.reduce((i,r)=>i.concat(r),[]))),n}function kte(t,e,n){return v6(g6(t.state),e,t,n)}let Ka=null;const _te=4e3;function Cte(t,e=xte){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let p=n[o]||(n[o]=Object.create(null)),g=a.split(/ (?!$)/).map(y=>wte(y,e));for(let y=1;y<g.length;y++){let b=g.slice(0,y).join(" ");r(b,!0),p[b]||(p[b]={preventDefault:!0,stopPropagation:!1,run:[w=>{let k=Ka={view:w,prefix:b,scope:o};return setTimeout(()=>{Ka==k&&(Ka=null)},_te),!0}]})}let m=g.join(" ");r(m,!1);let v=p[m]||(p[m]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&v.run.push(l),c&&(v.preventDefault=!0),u&&(v.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in u)u[f].run.push(p=>d(p,pk))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let pk=null;function v6(t,e,n,i){pk=e;let r=KQ(e),s=Wr(r,0),o=Zo(s)==r.length&&r!=" ",a="",l=!1,c=!1,u=!1;Ka&&Ka.view==n&&Ka.scope==i&&(a=Ka.prefix+" ",r6.indexOf(e.keyCode)<0&&(c=!0,Ka=null));let d=new Set,f=v=>{if(v){for(let y of v.run)if(!d.has(y)&&(d.add(y),y(n)))return v.stopPropagation&&(u=!0),!0;v.preventDefault&&(v.stopPropagation&&(u=!0),c=!0)}return!1},p=t[i],g,m;return p&&(f(p[a+jg(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Pe.windows&&e.ctrlKey&&e.altKey)&&(g=jl[e.keyCode])&&g!=r?(f(p[a+jg(g,e,!0)])||e.shiftKey&&(m=Bp[e.keyCode])!=r&&m!=g&&f(p[a+jg(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(p[a+jg(r,e,!0)])&&(l=!0),!l&&f(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),pk=null,l}class Nm{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=y6(e);return[new Nm(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return Ete(e,n,i)}}function y6(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==en.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function x3(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function Ete(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==en.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=y6(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),p=ck(t,i,1),g=ck(t,r,-1),m=p.type==Ri.Text?p:null,v=g.type==Ri.Text?g:null;if(m&&(t.lineWrapping||p.widgetLineBreaks)&&(m=x3(t,i,1,m)),v&&(t.lineWrapping||g.widgetLineBreaks)&&(v=x3(t,r,-1,v)),m&&v&&m.from==v.from&&m.to==v.to)return b(w(n.from,n.to,m));{let _=m?w(n.from,null,m):k(p,!1),E=v?w(null,n.to,v):k(g,!0),C=[];return(m||p).to<(v||g).from-(m&&v?1:0)||p.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<E.top?C.push(y(d,_.bottom,f,E.top)):_.bottom<E.top&&t.elementAtHeight((_.bottom+E.top)/2).type==Ri.Text&&(_.bottom=E.top=(_.bottom+E.top)/2),b(_).concat(C).concat(b(E))}function y(_,E,C,P){return new Nm(e,_-l.left,E-l.top,C-_,P-E)}function b({top:_,bottom:E,horizontal:C}){let P=[];for(let T=0;T<C.length;T+=2)P.push(y(C[T],_,C[T+1],E));return P}function w(_,E,C){let P=1e9,T=-1e9,I=[];function L($,K,J,Q,W){let U=t.coordsAtPos($,$==C.to?-2:2),re=t.coordsAtPos(J,J==C.from?2:-2);!U||!re||(P=Math.min(U.top,re.top,P),T=Math.max(U.bottom,re.bottom,T),W==en.LTR?I.push(s&&K?d:U.left,s&&Q?f:re.right):I.push(!s&&Q?d:re.left,!s&&K?f:U.right))}let j=_??C.from,X=E??C.to;for(let $ of t.visibleRanges)if($.to>j&&$.from<X)for(let K=Math.max($.from,j),J=Math.min($.to,X);;){let Q=t.state.doc.lineAt(K);for(let W of t.bidiSpans(Q)){let U=W.from+Q.from,re=W.to+Q.from;if(U>=J)break;re>K&&L(Math.max(U,K),_==null&&U<=j,Math.min(re,J),E==null&&re>=X,W.dir)}if(K=Q.to+1,K>=J)break}return I.length==0&&L(j,_==null,X,E==null,t.textDirection),{top:P,bottom:T,horizontal:I}}function k(_,E){let C=a.top+(E?_.top:_.bottom);return{top:C,bottom:C,horizontal:[]}}}function Ate(t,e){return t.constructor==e.constructor&&t.eq(e)}class Nte{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(K0)!=e.state.facet(K0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(K0);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!Ate(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const K0=Re.define();function b6(t){return[ci.define(e=>new Nte(e,t)),K0.of(t)]}const Up=Re.define({combine(t){return Xl(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Pte(t={}){return[Up.of(t),Mte,Rte,Tte,K8.of(!0)]}function x6(t){return t.startState.facet(Up)!=t.state.facet(Up)}const Mte=b6({above:!0,markers(t){let{state:e}=t,n=e.facet(Up),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:se.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Nm.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=x6(t);return n&&w3(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){w3(e.state,t)},class:"cm-cursorLayer"});function w3(t,e){e.style.animationDuration=t.facet(Up).cursorBlinkRate+"ms"}const Rte=b6({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Nm.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||x6(t)},class:"cm-selectionLayer"}),Tte=km.highest(je.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function S3(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function Ote(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class Ite{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,c,u)=>r(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let d=i(a,l,c);d&&u(c,c+a[0].length,d)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Il,i=n.add.bind(n);for(let{from:r,to:s}of Ote(e,this.maxLength))S3(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],p,g=(m,v,y)=>f.push(y.range(m,v));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,g);else S3(e.state.doc,this.regexp,u,d,(m,v)=>this.addMatch(v,e,m,g));n=n.update({filterFrom:u,filterTo:d,filter:(m,v)=>m<u||v>d,add:f})}}return n}}const mk=/x/.unicode!=null?"gu":"g",Dte=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,mk),jte={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Vw=null;function Lte(){var t;if(Vw==null&&typeof document<"u"&&document.body){let e=document.body.style;Vw=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Vw||!1}const X0=Re.define({combine(t){let e=Xl(t,{render:null,specialChars:Dte,addSpecialChars:null});return(e.replaceTabs=!Lte())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,mk)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,mk)),e}});function Bte(t={}){return[X0.of(t),$te()]}let k3=null;function $te(){return k3||(k3=ci.fromClass(class{constructor(t){this.view=t,this.decorations=dt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(X0)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Ite({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=Wr(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=Cm(o.text,a,i-o.from);return dt.replace({widget:new Vte((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=dt.replace({widget:new Ute(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(X0);t.startState.facet(X0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Fte="";function zte(t){return t>=32?Fte:t==10?"":String.fromCharCode(9216+t)}class Ute extends ql{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=zte(this.code),i=e.state.phrase("Control character")+" "+(jte[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Vte extends ql{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Hte(){return Gte}const Wte=dt.line({class:"cm-activeLine"}),Gte=ci.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(Wte.range(r.from)),e=r.from)}return dt.set(n)}},{decorations:t=>t.decorations}),Wf="-10000px";class w6{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function Kte(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Hw=Re.define({combine:t=>{var e,n,i;return{position:Pe.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Kte}}}),_3=new WeakMap,mE=ci.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Hw);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new w6(t,gE,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Hw);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=Wf,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Pe.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Wf&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=dE(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Hw).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){u.style.top=Wf;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,m=f.right-f.left,v=(e=_3.get(c))!==null&&e!==void 0?e:f.bottom-f.top,y=c.offset||qte,b=this.view.textDirection==en.LTR,w=f.width>i.right-i.left?b?i.left:i.right-f.width:b?Math.max(i.left,Math.min(d.left-(p?14:0)+y.x,i.right-m)):Math.min(Math.max(i.left,d.left-m+(p?14:0)-y.x),i.right-m),k=this.above[a];!l.strictSide&&(k?d.top-v-g-y.y<i.top:d.bottom+v+g+y.y>i.bottom)&&k==i.bottom-d.bottom>d.top-i.top&&(k=this.above[a]=!k);let _=(k?d.top-i.top:i.bottom-d.bottom)-g;if(_<v&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=Wf;continue}_3.set(c,v),u.style.height=(v=_)/s+"px"}else u.style.height&&(u.style.height="");let E=k?d.top-v-g-y.y:d.bottom+g+y.y,C=w+m;if(c.overlap!==!0)for(let P of o)P.left<C&&P.right>w&&P.top<E+v&&P.bottom>E&&(E=k?P.top-v-2-g:P.bottom+g+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/s+"px",C3(u,(w-t.parent.left)/r)):(u.style.top=E/s+"px",C3(u,w/r)),p){let P=d.left+(b?y.x:-y.x)-(w+14-7);p.style.left=P/r+"px"}c.overlap!==!0&&o.push({left:w,top:E,right:C,bottom:E+v}),u.classList.toggle("cm-tooltip-above",k),u.classList.toggle("cm-tooltip-below",!k),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Wf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function C3(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const Xte=je.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),qte={x:0,y:0},gE=Re.define({enables:[mE,Xte]}),uy=Re.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class jb{static create(e){return new jb(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new w6(e,uy,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Yte=gE.compute([uy],t=>{let e=t.facet(uy);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:jb.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class Jte{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof il)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==en.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>kr(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(mE),n=e?e.manager.tooltips.findIndex(i=>i.create==jb.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!Zte(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!Qte(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Lg=4;function Zte(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-Lg&&e.clientX<=i+Lg&&e.clientY>=r-Lg&&e.clientY<=s+Lg}function Qte(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function ene(t,e={}){let n=ut.define(),i=ji.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,er.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(nne)&&(r=[]);return r},provide:r=>uy.from(r)});return{active:i,extension:[i,ci.define(r=>new Jte(r,t,i,n,e.hoverTime||300)),Yte]}}function tne(t,e){let n=t.plugin(mE);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const nne=ut.define(),E3=Re.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Vp(t,e){let n=t.plugin(S6),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const S6=ci.fromClass(class{constructor(t){this.input=t.state.facet(Hp),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(E3);this.top=new Bg(t,!0,e.topContainer),this.bottom=new Bg(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(E3);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Bg(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Bg(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Hp);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>je.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Bg{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=A3(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=A3(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function A3(t){let e=t.nextSibling;return t.remove(),e}const Hp=Re.define({enables:S6});class Bl extends Jc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Bl.prototype.elementClass="";Bl.prototype.toDOM=void 0;Bl.prototype.mapMode=er.TrackBefore;Bl.prototype.startSide=Bl.prototype.endSide=-1;Bl.prototype.point=!0;const q0=Re.define(),ine=Re.define(),Y0=Re.define(),N3=Re.define({combine:t=>t.some(e=>e)});function rne(t){return[sne]}const sne=ci.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Y0).map(e=>new M3(t,e)),this.fixed=!t.state.facet(N3);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(N3)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=Tt.iter(this.view.state.facet(q0),this.view.viewport.from),i=[],r=this.gutters.map(s=>new one(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Ri.Text&&o){gk(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==Ri.Text){gk(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(Y0),n=t.state.facet(Y0),i=t.docChanged||t.heightChanged||t.viewportChanged||!Tt.eq(t.startState.facet(q0),t.state.facet(q0),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new M3(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>je.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==en.LTR?{left:i,right:r}:{right:i,left:r}})});function P3(t){return Array.isArray(t)?t:[t]}function gk(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class one{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Tt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new k6(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];gk(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(ine)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class M3{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=P3(n.markers(e)),n.initialSpacer&&(this.spacer=new k6(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=P3(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Tt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class k6{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),ane(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function ane(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const lne=Re.define(),cne=Re.define(),rd=Re.define({combine(t){return Xl(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class Ww extends Bl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Gw(t,e){return t.state.facet(rd).formatNumber(e,t.state)}const une=Y0.compute([rd],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(lne)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Ww(Gw(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(cne)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(rd)!=e.state.facet(rd),initialSpacer(e){return new Ww(Gw(e,R3(e.state.doc.lines)))},updateSpacer(e,n){let i=Gw(n.view,R3(n.view.state.doc.lines));return i==e.number?e:new Ww(i)},domEventHandlers:t.facet(rd).domEventHandlers,side:"before"}));function dne(t={}){return[rd.of(t),rne(),une]}function R3(t){let e=9;for(;e<t;)e=e*10+9;return e}const fne=new class extends Bl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},hne=q0.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(fne.range(r)))}return Tt.of(e)});function pne(){return hne}const _6=new _m;function mne(t){window.codemirror&&window.codemirror.dispatch({effects:_6.reconfigure(wt.readOnly.of(t))})}const C6=ut.define(),vk=ut.define(),gne=ji.define({create(){return dt.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(C6)&&(n=dt.none,i.value!==null&&(n=n.update({add:[vne.range(i.value)]}))),i.is(vk)&&(n=dt.none,i.value!==null&&(n=n.update({add:[yne.range(i.value)]})));return n},provide:t=>je.decorations.from(t)}),vne=dt.line({class:"!bg-gradient-to-r !from-mantis-500/8 !via-mantis-500/5 !to-transparent !border-l-2 !border-mantis-400/40 !shadow-sm"}),yne=dt.line({class:"cm-current-instruction"});function bne(t){window.codemirror&&window.codemirror.dispatch({effects:C6.of(null)})}function E6(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:vk.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:vk.of(e)})}}const dy=fe(!1),A6=Va.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Va,xne=1,T3=5e3,qs=new Map,Kh=[];function wne(){let t=0;for(const e of qs.keys())e>t&&(t=e);return t+1}function Sne(){let t=1/0;for(const e of qs.keys())e<t&&(t=e);return t}function sl(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??T3,s=Number.isFinite(r)?setTimeout(()=>sl({type:"DISMISS_TOAST",toastId:n}),r):null;qs.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||sl({type:"DISMISS_TOAST",toastId:n})}}}),qs.size>xne&&sl({type:"DISMISS_TOAST",toastId:Sne()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=qs.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??T3,o=Number.isFinite(s)?setTimeout(()=>sl({type:"DISMISS_TOAST",toastId:n}),s):null;qs.set(n,{...r,...i,timeout:o})}else qs.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=qs.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),qs.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&Kh.length>0){const n=Array.from(qs.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of Kh)i(n)}}function Pi(t){const e=wne(),n=r=>sl({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>sl({type:"DISMISS_TOAST",toastId:e});return sl({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function kne(){const[t,e]=x.useState([]);return x.useEffect(()=>(Kh.push(e),()=>{const n=Kh.indexOf(e);n>-1&&Kh.splice(n,1)}),[]),{toastList:t,toast:Pi,dismiss:n=>sl({type:"DISMISS_TOAST",toastId:n})}}var vE={exports:{}},xd=typeof Reflect=="object"?Reflect:null,O3=xd&&typeof xd.apply=="function"?xd.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},J0;xd&&typeof xd.ownKeys=="function"?J0=xd.ownKeys:Object.getOwnPropertySymbols?J0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:J0=function(e){return Object.getOwnPropertyNames(e)};function _ne(t){console&&console.warn&&console.warn(t)}var N6=Number.isNaN||function(e){return e!==e};function Lt(){Lt.init.call(this)}vE.exports=Lt;vE.exports.once=Nne;Lt.EventEmitter=Lt;Lt.prototype._events=void 0;Lt.prototype._eventsCount=0;Lt.prototype._maxListeners=void 0;var I3=10;function Lb(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Lt,"defaultMaxListeners",{enumerable:!0,get:function(){return I3},set:function(t){if(typeof t!="number"||t<0||N6(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");I3=t}});Lt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Lt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||N6(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function P6(t){return t._maxListeners===void 0?Lt.defaultMaxListeners:t._maxListeners}Lt.prototype.getMaxListeners=function(){return P6(this)};Lt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")O3(l,this,n);else for(var c=l.length,u=I6(l,c),i=0;i<c;++i)O3(u[i],this,n);return!0};function M6(t,e,n,i){var r,s,o;if(Lb(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=P6(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,_ne(a)}return t}Lt.prototype.addListener=function(e,n){return M6(this,e,n,!1)};Lt.prototype.on=Lt.prototype.addListener;Lt.prototype.prependListener=function(e,n){return M6(this,e,n,!0)};function Cne(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function R6(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=Cne.bind(i);return r.listener=n,i.wrapFn=r,r}Lt.prototype.once=function(e,n){return Lb(n),this.on(e,R6(this,e,n)),this};Lt.prototype.prependOnceListener=function(e,n){return Lb(n),this.prependListener(e,R6(this,e,n)),this};Lt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(Lb(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():Ene(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Lt.prototype.off=Lt.prototype.removeListener;Lt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function T6(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?Ane(r):I6(r,r.length)}Lt.prototype.listeners=function(e){return T6(this,e,!0)};Lt.prototype.rawListeners=function(e){return T6(this,e,!1)};Lt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):O6.call(t,e)};Lt.prototype.listenerCount=O6;function O6(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Lt.prototype.eventNames=function(){return this._eventsCount>0?J0(this._events):[]};function I6(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function Ene(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Ane(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Nne(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}D6(t,e,s,{once:!0}),e!=="error"&&Pne(t,r,{once:!0})})}function Pne(t,e,n){typeof t.on=="function"&&D6(t,"error",e,n)}function D6(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Mne=vE.exports;function Eo(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Eo.prototype[Symbol.iterator]=function(){return this});Eo.of=function(){var t=arguments,e=t.length,n=0;return new Eo(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Eo.empty=function(){var t=new Eo(function(){return{done:!0}});return t};Eo.fromSequence=function(t){var e=0,n=t.length;return new Eo(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Eo.is=function(t){return t instanceof Eo?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Bb=Eo;const cs=lu(Bb);var $b={};$b.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";$b.SYMBOL_SUPPORT=typeof Symbol<"u";var Rne=Bb,j6=$b,Tne=j6.ARRAY_BUFFER_SUPPORT,One=j6.SYMBOL_SUPPORT;function Ine(t){return typeof t=="string"||Array.isArray(t)||Tne&&ArrayBuffer.isView(t)?Rne.fromSequence(t):typeof t!="object"||t===null?null:One&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var L6=function(e){var n=Ine(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Dne=L6,jne=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=Dne(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const B6=lu(jne);var Lne=Bb,Bne=L6,$ne=function(){var e=arguments,n=null,i=-1;return new Lne(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=Bne(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const sa=lu($ne);function Fne(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let jn=Fne;typeof Object.assign=="function"&&(jn=Object.assign);function is(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function ni(t){return typeof t=="object"&&t!==null}function $6(t){let e;for(e in t)return!1;return!0}function jr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function hs(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function D3(t){return!(!ni(t)||t.attributes&&!Array.isArray(t.attributes))}function zne(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class yE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class Ce extends yE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ce.prototype.constructor)}}class ge extends yE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ge.prototype.constructor)}}class We extends yE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,We.prototype.constructor)}}function F6(t,e){this.key=t,this.attributes=e,this.clear()}F6.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function z6(t,e){this.key=t,this.attributes=e,this.clear()}z6.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function U6(t,e){this.key=t,this.attributes=e,this.clear()}U6.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function bf(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}bf.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};bf.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};bf.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};bf.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const V6=0,H6=1,Une=2,W6=3;function Sa(t,e,n,i,r,s,o){let a,l,c,u;if(i=""+i,n===V6){if(a=t._nodes.get(i),!a)throw new ge(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(n===W6){if(r=""+r,l=t._edges.get(r),!l)throw new ge(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(i===d)a=l.target;else if(i===f)a=l.source;else throw new ge(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(i),!l)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===H6?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function Vne(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Sa(this,e,n,i,r,s);return o.attributes[a]}}function Hne(t,e,n){t.prototype[e]=function(i,r){const[s]=Sa(this,e,n,i,r);return s.attributes}}function Wne(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Sa(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function Gne(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=Sa(this,e,n,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Kne(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=Sa(this,e,n,i,r,s,o);if(typeof c!="function")throw new Ce(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Xne(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Sa(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function qne(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Sa(this,e,n,i,r,s);if(!ni(a))throw new Ce(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Yne(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Sa(this,e,n,i,r,s);if(!ni(a))throw new Ce(`Graph.${e}: provided attributes are not a plain object.`);return jn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function Jne(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Sa(this,e,n,i,r,s);if(typeof a!="function")throw new Ce(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Zne=[{name:t=>`get${t}Attribute`,attacher:Vne},{name:t=>`get${t}Attributes`,attacher:Hne},{name:t=>`has${t}Attribute`,attacher:Wne},{name:t=>`set${t}Attribute`,attacher:Gne},{name:t=>`update${t}Attribute`,attacher:Kne},{name:t=>`remove${t}Attribute`,attacher:Xne},{name:t=>`replace${t}Attributes`,attacher:qne},{name:t=>`merge${t}Attributes`,attacher:Yne},{name:t=>`update${t}Attributes`,attacher:Jne}];function Qne(t){Zne.forEach(function({name:e,attacher:n}){n(t,e("Node"),V6),n(t,e("Source"),H6),n(t,e("Target"),Une),n(t,e("Opposite"),W6)})}function eie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=is(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function tie(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=is(this,s,o,n),!r)throw new ge(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function nie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=is(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function iie(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=is(this,a,l,n),!o)throw new ge(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function rie(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=is(this,a,l,n),!o)throw new ge(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new Ce(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function sie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=is(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function oie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=is(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!ni(r))throw new Ce(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function aie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=is(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!ni(r))throw new Ce(`Graph.${e}: provided attributes are not a plain object.`);return jn(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function lie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=is(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new Ce(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const cie=[{name:t=>`get${t}Attribute`,attacher:eie},{name:t=>`get${t}Attributes`,attacher:tie},{name:t=>`has${t}Attribute`,attacher:nie},{name:t=>`set${t}Attribute`,attacher:iie},{name:t=>`update${t}Attribute`,attacher:rie},{name:t=>`remove${t}Attribute`,attacher:sie},{name:t=>`replace${t}Attributes`,attacher:oie},{name:t=>`merge${t}Attributes`,attacher:aie},{name:t=>`update${t}Attributes`,attacher:lie}];function uie(t){cie.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const die=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function fie(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function hie(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Kw(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new cs(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function pie(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function mie(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function Xw(t,e){let n=t[e];return n.next!==void 0?new cs(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):cs.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function gie(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):B6(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function G6(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:p}=a;if(l=i(u,d,f.key,p.key,f.attributes,p.attributes,a.undirected),t&&l)return u}}function vie(t,e){if(t.size===0)return cs.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new cs(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function bE(t,e,n,i,r,s){const o=e?hie:fie;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function yie(t,e,n,i){const r=[];return bE(!1,t,e,n,i,function(s){r.push(s)}),r}function bie(t,e,n){let i=cs.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=sa(i,Kw(n.in))),e!=="in"&&typeof n.out<"u"&&(i=sa(i,Kw(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=sa(i,Kw(n.undirected))),i}function xE(t,e,n,i,r,s,o){const a=n?mie:pie;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function xie(t,e,n,i,r){const s=[];return xE(!1,t,e,n,i,r,function(o){s.push(o)}),s}function wie(t,e,n,i){let r=cs.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=sa(r,Xw(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=sa(r,Xw(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=sa(r,Xw(n.undirected,i))),r}function Sie(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return gie(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ge(`Graph.${n}: could not find the "${s}" node in the graph.`);return yie(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ge(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ge(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return xie(i,this.multi,r,a,o)}throw new Ce(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function kie(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,G6(!1,this,i,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new ge(`Graph.${s}: could not find the "${c}" node in the graph.`);return bE(!1,this.multi,i==="mixed"?this.type:i,r,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new ge(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new ge(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return xE(!1,i,this.multi,r,f,u,d)}throw new Ce(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;i!=="directed"&&(f+=this.undirectedSize),i!=="undirected"&&(f+=this.directedSize),d=new Array(f);let p=0;c.push((g,m,v,y,b,w,k)=>{d[p++]=u(g,m,v,y,b,w,k)})}else d=[],c.push((f,p,g,m,v,y,b)=>{d.push(u(f,p,g,m,v,y,b))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,p,g,m,v,y,b)=>{u(f,p,g,m,v,y,b)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new Ce(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new Ce(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((p,g,m,v,y,b,w)=>{f=u(f,p,g,m,v,y,b,w)}),this[s].apply(this,c),f}}function _ie(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,G6(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new ge(`Graph.${s}: could not find the "${l}" node in the graph.`);return bE(!0,this.multi,i==="mixed"?this.type:i,r,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new ge(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new ge(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return xE(!0,i,this.multi,r,d,c,u)}throw new Ce(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>c(d,f,p,g,m,v,y)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>!c(d,f,p,g,m,v,y)),!this[s].apply(this,l)}}function Cie(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return cs.empty();if(!arguments.length)return vie(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ge(`Graph.${s}: could not find the "${o}" node in the graph.`);return bie(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ge(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ge(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return wie(i,r,l,a)}throw new Ce(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Eie(t){die.forEach(e=>{Sie(t,e),kie(t,e),_ie(t,e),Cie(t,e)})}const Aie=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Fb(){this.A=null,this.B=null}Fb.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Fb.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Gf(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(t&&u)return c.key}}function wE(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return Gf(t,null,i,i.undirected,r);if(typeof n=="string")return Gf(t,null,i,i[n],r)}const s=new Fb;let o;if(e!=="undirected"){if(n!=="out"){if(o=Gf(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=Gf(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Gf(t,s,i,i.undirected,r),t&&o))return o}function Nie(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return wE(!1,t,e,n,function(r){i.push(r)}),i}function Kf(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new cs(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function Pie(t,e,n){if(t!=="mixed"){if(t==="undirected")return Kf(null,n,n.undirected);if(typeof e=="string")return Kf(null,n,n[e])}let i=cs.empty();const r=new Fb;return t!=="undirected"&&(e!=="out"&&(i=sa(i,Kf(r,n,n.in))),e!=="in"&&(i=sa(i,Kf(r,n,n.out)))),t!=="directed"&&(i=sa(i,Kf(r,n,n.undirected))),i}function Mie(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ge(`Graph.${n}: could not find the "${s}" node in the graph.`);return Nie(i==="mixed"?this.type:i,r,o)}}function Rie(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new ge(`Graph.${s}: could not find the "${c}" node in the graph.`);wE(!1,i==="mixed"?this.type:i,r,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,p)=>{d.push(u(f,p))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,p)=>{u(f,p)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new Ce(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(p,g)=>{f=u(f,p,g)}),f}}function Tie(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new ge(`Graph.${o}: could not find the "${c}" node in the graph.`);return wE(!0,i==="mixed"?this.type:i,r,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,p)=>!u(f,p))}}function Oie(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return cs.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ge(`Graph.${s}: could not find the "${o}" node in the graph.`);return Pie(i==="mixed"?this.type:i,r,a)}}function Iie(t){Aie.forEach(e=>{Mie(t,e),Rie(t,e),Tie(t,e),Oie(t,e)})}function $g(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,d,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do f=d.target,p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do f=d.target,f.key!==c&&(f=d.source),p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!p&&r(l.key,null,l.attributes,null,null,null,null)}}function Die(t,e){const n={key:t};return $6(e.attributes)||(n.attributes=jn({},e.attributes)),n}function jie(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return $6(n.attributes)||(i.attributes=jn({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function Lie(t){if(!ni(t))throw new Ce('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new Ce("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!ni(t.attributes)||t.attributes===null))throw new Ce("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Bie(t){if(!ni(t))throw new Ce('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new Ce("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new Ce("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!ni(t.attributes)||t.attributes===null))throw new Ce("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new Ce("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const $ie=zne(),Fie=new Set(["directed","undirected","mixed"]),j3=new Set(["domain","_events","_eventsCount","_maxListeners"]),zie=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Uie={allowSelfLoops:!0,multi:!1,type:"mixed"};function Vie(t,e,n){if(n&&!ni(n))throw new Ce(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new We(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function L3(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function K6(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new We(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new We(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!ni(a))throw new Ce(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new We(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new ge(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new ge(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new We(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new We(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new bf(i,r,l,c,a);t._edges.set(r,d);const f=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,u.key=r,t.emit("edgeAdded",u),r}function Hie(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new We(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new We(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new Ce(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!ni(a))throw new Ce(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new We(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,p;if(!n&&(f=t._edges.get(r),f)){if((f.source.key!==s||f.target.key!==o)&&(!i||f.source.key!==o||f.target.key!==s))throw new We(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);p=f}if(!p&&!t.multi&&u&&(p=i?u.undirected[o]:u.out[o]),p){const b=[p.key,!1,!1,!1];if(l?!c:!a)return b;if(l){const w=p.attributes;p.attributes=c(w),t.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else jn(p.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:a});return b}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new We(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,v=!1;u||(u=L3(t,s,{}),m=!0,s===o&&(d=u,v=!0)),d||(d=L3(t,o,{}),v=!0),f=new bf(i,r,u,d,a),t._edges.set(r,f);const y=s===o;return i?(u.undirectedDegree++,d.undirectedDegree++,y&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,y&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),i?t._undirectedSize++:t._directedSize++,g.key=r,t.emit("edgeAdded",g),[r,!0,m,v]}function wu(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Vt extends Mne.EventEmitter{constructor(e){if(super(),e=jn({},Uie,e),typeof e.multi!="boolean")throw new Ce(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Fie.has(e.type))throw new Ce(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new Ce(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?F6:e.type==="directed"?z6:U6;jr(this,"NodeDataClass",n);const i="geid_"+$ie()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};jr(this,"_attributes",{}),jr(this,"_nodes",new Map),jr(this,"_edges",new Map),jr(this,"_directedSize",0),jr(this,"_undirectedSize",0),jr(this,"_directedSelfLoopCount",0),jr(this,"_undirectedSelfLoopCount",0),jr(this,"_edgeKeyGenerator",s),jr(this,"_options",e),j3.forEach(o=>jr(this,o,this[o])),hs(this,"order",()=>this._nodes.size),hs(this,"size",()=>this._edges.size),hs(this,"directedSize",()=>this._directedSize),hs(this,"undirectedSize",()=>this._undirectedSize),hs(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),hs(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),hs(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),hs(this,"multi",this._options.multi),hs(this,"type",this._options.type),hs(this,"allowSelfLoops",this._options.allowSelfLoops),hs(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new Ce(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new Ce(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new Ce(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new We("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ge(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ge(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new We("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ge(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ge(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new We("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ge(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new ge(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new ge(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new ge(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Vie(this,e,n).key}mergeNode(e,n){if(n&&!ni(n))throw new Ce(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(jn(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new Ce(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do wu(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do wu(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do wu(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=is(this,i,r,this.type),!n)throw new ge(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ge(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return wu(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new We("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new We("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=is(this,e,n,"directed");if(!i)throw new ge(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return wu(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new We("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new We("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=is(this,e,n,"undirected");if(!i)throw new ge(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return wu(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new Ce("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!ni(e))throw new Ce("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!ni(e))throw new Ce("Graph.mergeAttributes: provided attributes are not a plain object.");return jn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new Ce("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new Ce("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!D3(n))throw new Ce("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new Ce("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!D3(n))throw new Ce("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new Ce("Graph.forEachAdjacencyEntry: expecting a callback.");$g(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ce("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");$g(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new Ce("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");$g(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ce("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");$g(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):B6(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new Ce("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new Ce("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new Ce("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new Ce("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new Ce("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new Ce("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new Ce("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Ce("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new cs(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=Die(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=jie(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Vt)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,p,g)=>{n?g?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):g?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!ni(e))throw new Ce("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!ni(e.attributes))throw new Ce("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new Ce("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],Lie(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new Ce("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],Bie(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let p;"key"in a?(p=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,p.call(this,a.key,c,u,d)):(p=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,p.call(this,c,u,d))}}return this}nullCopy(e){const n=new Vt(jn({},this._options,e));return n.replaceAttributes(jn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=jn({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new We(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new We("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new We("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,K6(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,jn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[f]>"u"?i[f]=0:i[f]++,l+=`${i[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!j3.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,jr(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Vt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Vt.prototype.inspect);zie.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?K6:Hie;t.generateKey?Vt.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Vt.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});Qne(Vt);uie(Vt);Eie(Vt);Iie(Vt);class X6 extends Vt{constructor(e){const n=jn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new Ce("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new Ce('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class SE extends Vt{constructor(e){const n=jn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new Ce("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new Ce('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class q6 extends Vt{constructor(e){const n=jn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Ce("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class Y6 extends Vt{constructor(e){const n=jn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Ce("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new Ce('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class J6 extends Vt{constructor(e){const n=jn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Ce("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new Ce('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function xf(t){t.from=function(e,n){const i=jn({},e.options,n),r=new t(i);return r.import(e),r}}xf(Vt);xf(X6);xf(SE);xf(q6);xf(Y6);xf(J6);Vt.Graph=Vt;Vt.DirectedGraph=X6;Vt.UndirectedGraph=SE;Vt.MultiGraph=q6;Vt.MultiDirectedGraph=Y6;Vt.MultiUndirectedGraph=J6;Vt.InvalidArgumentsGraphError=Ce;Vt.NotFoundGraphError=ge;Vt.UsageGraphError=We;var Wie=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},Z6=$b,Gie=Z6.ARRAY_BUFFER_SUPPORT,Kie=Z6.SYMBOL_SUPPORT,Xie=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Gie&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(Kie&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},Q6=Bb,qie=Xie;function Mn(){this.clear()}Mn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};Mn.prototype.enqueue=function(t){return this.items.push(t),++this.size};Mn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};Mn.prototype.peek=function(){if(this.size)return this.items[this.offset]};Mn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};Mn.prototype.toArray=function(){return this.items.slice(this.offset)};Mn.prototype.values=function(){var t=this.items,e=this.offset;return new Q6(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};Mn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new Q6(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(Mn.prototype[Symbol.iterator]=Mn.prototype.values);Mn.prototype.toString=function(){return this.toArray().join(",")};Mn.prototype.toJSON=function(){return this.toArray()};Mn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:Mn,enumerable:!1}),t};typeof Symbol<"u"&&(Mn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Mn.prototype.inspect);Mn.from=function(t){var e=new Mn;return qie(t,function(n){e.enqueue(n)}),e};Mn.of=function(){return Mn.from(arguments)};var Yie=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},eB=Wie,Jie=Yie;function Zie(t,e,n){if(!eB(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,p,g,m,v,y=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=r(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in s||(a.push(f),s[f]=u),f in o){y=!0;break e}}else for(c=l,l=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=i(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in o||(l.push(f),o[f]=u),f in s){y=!0;break e}if(!y)return null;for(var b=[];f;)b.unshift(f),f=s[f];for(f=o[b[b.length-1]];f;)b.push(f),f=o[f];return b.length?b:null}function tB(t,e,n){if(!eB(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!i.has(c)&&(i.add(c),Jie(u,e[t](c)),r[c]=s);s++,o=u}return r}tB.bind(null,"outboundNeighbors");tB.bind(null,"neighbors");var Qie=Zie,kE=Mm(),ot=t=>Pm(t,kE),_E=Mm();ot.write=t=>Pm(t,_E);var zb=Mm();ot.onStart=t=>Pm(t,zb);var CE=Mm();ot.onFrame=t=>Pm(t,CE);var EE=Mm();ot.onFinish=t=>Pm(t,EE);var wd=[];ot.setTimeout=(t,e)=>{const n=ot.now()+e,i=()=>{const s=wd.findIndex(o=>o.cancel==i);~s&&wd.splice(s,1),al-=~s?1:0},r={time:n,handler:t,cancel:i};return wd.splice(nB(n),0,r),al+=1,iB(),r};var nB=t=>~(~wd.findIndex(e=>e.time>t)||~wd.length);ot.cancel=t=>{zb.delete(t),CE.delete(t),EE.delete(t),kE.delete(t),_E.delete(t)};ot.sync=t=>{yk=!0,ot.batchedUpdates(t),yk=!1};ot.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,ot.onStart(n)}return i.handler=t,i.cancel=()=>{zb.delete(n),e=null},i};var AE=typeof window<"u"?window.requestAnimationFrame:()=>{};ot.use=t=>AE=t;ot.now=typeof performance<"u"?()=>performance.now():Date.now;ot.batchedUpdates=t=>t();ot.catch=console.error;ot.frameLoop="always";ot.advance=()=>{ot.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):sB()};var ol=-1,al=0,yk=!1;function Pm(t,e){yk?(e.delete(t),t(0)):(e.add(t),iB())}function iB(){ol<0&&(ol=0,ot.frameLoop!=="demand"&&AE(rB))}function ere(){ol=-1}function rB(){~ol&&(AE(rB),ot.batchedUpdates(sB))}function sB(){const t=ol;ol=ot.now();const e=nB(ol);if(e&&(oB(wd.splice(0,e),n=>n.handler()),al-=e),!al){ere();return}zb.flush(),kE.flush(t?Math.min(64,ol-t):16.667),CE.flush(),_E.flush(),EE.flush()}function Mm(){let t=new Set,e=t;return{add(n){al+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return al-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,al-=e.size,oB(e,i=>i(n)&&t.add(i)),al+=t.size,e=t)}}}function oB(t,e){t.forEach(n=>{try{e(n)}catch(i){ot.catch(i)}})}var tre=Object.defineProperty,nre=(t,e)=>{for(var n in e)tre(t,n,{get:e[n],enumerable:!0})},Os={};nre(Os,{assign:()=>rre,colors:()=>Sl,createStringInterpolator:()=>PE,skipAnimation:()=>lB,to:()=>aB,willAdvance:()=>ME});function bk(){}var ire=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),me={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Lo(t,e){if(me.arr(t)){if(!me.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var St=(t,e)=>t.forEach(e);function Ao(t,e,n){if(me.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var _r=t=>me.und(t)?[]:me.arr(t)?t:[t];function Xh(t,e){if(t.size){const n=Array.from(t);t.clear(),St(n,e)}}var kh=(t,...e)=>Xh(t,n=>n(...e)),NE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),PE,aB,Sl=null,lB=!1,ME=bk,rre=t=>{t.to&&(aB=t.to),t.now&&(ot.now=t.now),t.colors!==void 0&&(Sl=t.colors),t.skipAnimation!=null&&(lB=t.skipAnimation),t.createStringInterpolator&&(PE=t.createStringInterpolator),t.requestAnimationFrame&&ot.use(t.requestAnimationFrame),t.batchedUpdates&&(ot.batchedUpdates=t.batchedUpdates),t.willAdvance&&(ME=t.willAdvance),t.frameLoop&&(ot.frameLoop=t.frameLoop)},qh=new Set,Kr=[],qw=[],fy=0,Ub={get idle(){return!qh.size&&!Kr.length},start(t){fy>t.priority?(qh.add(t),ot.onStart(sre)):(cB(t),ot(xk))},advance:xk,sort(t){if(fy)ot.onFrame(()=>Ub.sort(t));else{const e=Kr.indexOf(t);~e&&(Kr.splice(e,1),uB(t))}},clear(){Kr=[],qh.clear()}};function sre(){qh.forEach(cB),qh.clear(),ot(xk)}function cB(t){Kr.includes(t)||uB(t)}function uB(t){Kr.splice(ore(Kr,e=>e.priority>t.priority),0,t)}function xk(t){const e=qw;for(let n=0;n<Kr.length;n++){const i=Kr[n];fy=i.priority,i.idle||(ME(i),i.advance(t),i.idle||e.push(i))}return fy=0,qw=Kr,qw.length=0,Kr=e,Kr.length>0}function ore(t,e){const n=t.findIndex(e);return n<0?t.length:n}var are=(t,e,n)=>Math.min(Math.max(n,t),e),lre={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Cs="[-+]?\\d*\\.?\\d+",hy=Cs+"%";function Vb(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var cre=new RegExp("rgb"+Vb(Cs,Cs,Cs)),ure=new RegExp("rgba"+Vb(Cs,Cs,Cs,Cs)),dre=new RegExp("hsl"+Vb(Cs,hy,hy)),fre=new RegExp("hsla"+Vb(Cs,hy,hy,Cs)),hre=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,pre=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,mre=/^#([0-9a-fA-F]{6})$/,gre=/^#([0-9a-fA-F]{8})$/;function vre(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=mre.exec(t))?parseInt(e[1]+"ff",16)>>>0:Sl&&Sl[t]!==void 0?Sl[t]:(e=cre.exec(t))?(Su(e[1])<<24|Su(e[2])<<16|Su(e[3])<<8|255)>>>0:(e=ure.exec(t))?(Su(e[1])<<24|Su(e[2])<<16|Su(e[3])<<8|F3(e[4]))>>>0:(e=hre.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=gre.exec(t))?parseInt(e[1],16)>>>0:(e=pre.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=dre.exec(t))?(B3($3(e[1]),Fg(e[2]),Fg(e[3]))|255)>>>0:(e=fre.exec(t))?(B3($3(e[1]),Fg(e[2]),Fg(e[3]))|F3(e[4]))>>>0:null}function Yw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function B3(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Yw(r,i,t+1/3),o=Yw(r,i,t),a=Yw(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Su(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function $3(t){return(parseFloat(t)%360+360)%360/360}function F3(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Fg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function z3(t){let e=vre(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Wp=(t,e,n)=>{if(me.fun(t))return t;if(me.arr(t))return Wp({range:t,output:e,extrapolate:n});if(me.str(t.output[0]))return PE(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=bre(c,s);return yre(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function yre(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function bre(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var xre=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return are(0,1,r/t)},py=1.70158,zg=py*1.525,U3=py+1,V3=2*Math.PI/3,H3=2*Math.PI/4.5,Ug=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,dB={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>U3*t*t*t-py*t*t,easeOutBack:t=>1+U3*Math.pow(t-1,3)+py*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((zg+1)*2*t-zg)/2:(Math.pow(2*t-2,2)*((zg+1)*(t*2-2)+zg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*V3),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*V3)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*H3))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*H3)/2+1,easeInBounce:t=>1-Ug(1-t),easeOutBounce:Ug,easeInOutBounce:t=>t<.5?(1-Ug(1-2*t))/2:(1+Ug(2*t-1))/2,steps:xre},Gp=Symbol.for("FluidValue.get"),of=Symbol.for("FluidValue.observers"),Gr=t=>!!(t&&t[Gp]),qi=t=>t&&t[Gp]?t[Gp]():t,W3=t=>t[of]||null;function wre(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Kp(t,e){const n=t[of];n&&n.forEach(i=>{wre(i,e)})}var fB=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Sre(this,t)}},Sre=(t,e)=>hB(t,Gp,e);function wf(t,e){if(t[Gp]){let n=t[of];n||hB(t,of,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Xp(t,e){const n=t[of];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[of]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var hB=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Z0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,kre=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,G3=new RegExp(`(${Z0.source})(%|[a-z]+)`,"i"),_re=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Hb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,pB=t=>{const[e,n]=Cre(t);if(!e||NE())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Hb.test(n))return pB(n);if(n)return n}return t},Cre=t=>{const e=Hb.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Jw,Ere=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,mB=t=>{Jw||(Jw=Sl?new RegExp(`(${Object.keys(Sl).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>qi(s).replace(Hb,pB).replace(kre,z3).replace(Jw,z3)),n=e.map(s=>s.match(Z0).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Wp({...t,output:s}));return s=>{var l;const o=!G3.test(e[0])&&((l=e.find(c=>G3.test(c)))==null?void 0:l.replace(Z0,""));let a=0;return e[0].replace(Z0,()=>`${r[a++](s)}${o||""}`).replace(_re,Ere)}},RE="react-spring: ",gB=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${RE}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Are=gB(console.warn);function Nre(){Are(`${RE}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Pre=gB(console.warn);function Mre(){Pre(`${RE}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Wb(t){return me.str(t)&&(t[0]=="#"||/\d/.test(t)||!NE()&&Hb.test(t)||t in(Sl||{}))}var TE=NE()?x.useEffect:x.useLayoutEffect,Rre=()=>{const t=x.useRef(!1);return TE(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function vB(){const t=x.useState()[1],e=Rre();return()=>{e.current&&t(Math.random())}}function Tre(t,e){const[n]=x.useState(()=>({inputs:e,result:t()})),i=x.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Ore(e,s.inputs)||(s={inputs:e,result:t()}):s=n,x.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Ore(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var yB=t=>x.useEffect(t,Ire),Ire=[];function K3(t){const e=x.useRef();return x.useEffect(()=>{e.current=t}),e.current}var qp=Symbol.for("Animated:node"),Dre=t=>!!t&&t[qp]===t,Ys=t=>t&&t[qp],OE=(t,e)=>ire(t,qp,e),Gb=t=>t&&t[qp]&&t[qp].getPayload(),bB=class{constructor(){OE(this,this)}getPayload(){return this.payload||[]}},Rm=class extends bB{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,me.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Rm(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return me.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,me.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Yp=class extends Rm{constructor(t){super(0),this._string=null,this._toString=Wp({output:[t,t]})}static create(t){return new Yp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(me.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Wp({output:[this.getValue(),t]})),this._value=0,super.reset()}},my={dependencies:null},Kb=class extends bB{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Ao(this.source,(n,i)=>{Dre(n)?e[i]=n.getValue(t):Gr(n)?e[i]=qi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&St(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Ao(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){my.dependencies&&Gr(t)&&my.dependencies.add(t);const e=Gb(t);e&&St(e,n=>this.add(n))}},xB=class extends Kb{constructor(t){super(t)}static create(t){return new xB(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(jre)),!0)}};function jre(t){return(Wb(t)?Yp:Rm).create(t)}function wk(t){const e=Ys(t);return e?e.constructor:me.arr(t)?xB:Wb(t)?Yp:Rm}var X3=(t,e)=>{const n=!me.fun(t)||t.prototype&&t.prototype.isReactComponent;return x.forwardRef((i,r)=>{const s=x.useRef(null),o=n&&x.useCallback(g=>{s.current=$re(r,g)},[r]),[a,l]=Bre(i,e),c=vB(),u=()=>{const g=s.current;if(n&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&c()},d=new Lre(u,l),f=x.useRef();TE(()=>(f.current=d,St(l,g=>wf(g,d)),()=>{f.current&&(St(f.current.deps,g=>Xp(g,f.current)),ot.cancel(f.current.update))})),x.useEffect(u,[]),yB(()=>()=>{const g=f.current;St(g.deps,m=>Xp(m,g))});const p=e.getComponentProps(a.getValue());return x.createElement(t,{...p,ref:o})})},Lre=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&ot.write(this.update)}};function Bre(t,e){const n=new Set;return my.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Kb(t),my.dependencies=null,[t,n]}function $re(t,e){return t&&(me.fun(t)?t(e):t.current=e),e}var q3=Symbol.for("AnimatedComponent"),Fre=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new Kb(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=Y3(o)||"Anonymous";return me.str(o)?o=s[o]||(s[o]=X3(o,r)):o=o[q3]||(o[q3]=X3(o,r)),o.displayName=`Animated(${a})`,o};return Ao(t,(o,a)=>{me.arr(t)&&(a=Y3(o)),s[a]=s(o)}),{animated:s}},Y3=t=>me.str(t)?t:t&&me.str(t.displayName)?t.displayName:me.fun(t)&&t.name||null;function _c(t,...e){return me.fun(t)?t(...e):t}var Yh=(t,e)=>t===!0||!!(e&&t&&(me.fun(t)?t(e):_r(t).includes(e))),wB=(t,e)=>me.obj(t)?e&&t[e]:t,SB=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,zre=t=>t,IE=(t,e=zre)=>{let n=Ure;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);me.und(s)||(i[r]=s)}return i},Ure=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Vre={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Hre(t){const e={};let n=0;if(Ao(t,(i,r)=>{Vre[r]||(e[r]=i,n++)}),n)return e}function kB(t){const e=Hre(t);if(e){const n={to:e};return Ao(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Jp(t){return t=qi(t),me.arr(t)?t.map(Jp):Wb(t)?Os.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Wre(t){for(const e in t)return!0;return!1}function Sk(t){return me.fun(t)||me.arr(t)&&me.obj(t[0])}function Gre(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function Kre(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var Xre={default:{tension:170,friction:26}},kk={...Xre.default,mass:1,damping:1,easing:dB.linear,clamp:!1},qre=class{constructor(){this.velocity=0,Object.assign(this,kk)}};function Yre(t,e,n){n&&(n={...n},J3(n,e),e={...n,...e}),J3(t,e),Object.assign(t,e);for(const o in kk)t[o]==null&&(t[o]=kk[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return me.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function J3(t,e){if(!me.und(e.decay))t.duration=void 0;else{const n=!me.und(e.tension)||!me.und(e.friction);(n||!me.und(e.frequency)||!me.und(e.damping)||!me.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var Z3=[],Jre=class{constructor(){this.changed=!1,this.values=Z3,this.toValues=null,this.fromValues=Z3,this.config=new qre,this.immediate=!1}};function _B(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=Yh(n.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{me.und(n.pause)||(r.paused=Yh(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||Yh(g,e)),l=_c(n.delay||0,e),g?(r.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){r.resumeQueue.add(f),r.timeouts.delete(c),c.cancel(),l=c.time-ot.now()}function f(){l>0&&!Os.skipAnimation?(r.delayed=!0,c=ot.setTimeout(p,l),r.pauseQueue.add(d),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(g){a(g)}}})}var DE=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Sd(t.get()):e.every(n=>n.noop)?CB(t.get()):Ss(t.get(),e.every(n=>n.finished)),CB=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Ss=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Sd=t=>({value:t,cancelled:!0,finished:!1});function EB(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=IE(e,(v,y)=>y==="onRest"?void 0:v);let u,d;const f=new Promise((v,y)=>(u=v,d=y)),p=v=>{const y=r<=(n.cancelId||0)&&Sd(i)||r!==n.asyncId&&Ss(i,!1);if(y)throw v.result=y,d(v),v},g=(v,y)=>{const b=new Q3,w=new e4;return(async()=>{if(Os.skipAnimation)throw Zp(n),w.result=Ss(i,!1),d(w),w;p(b);const k=me.obj(v)?{...v}:{...y,to:v};k.parentId=r,Ao(c,(E,C)=>{me.und(k[C])&&(k[C]=E)});const _=await i.start(k);return p(b),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),_})()};let m;if(Os.skipAnimation)return Zp(n),Ss(i,!1);try{let v;me.arr(t)?v=(async y=>{for(const b of y)await g(b)})(t):v=Promise.resolve(t(g,i.stop.bind(i))),await Promise.all([v.then(u),f]),m=Ss(i.get(),!0,!1)}catch(v){if(v instanceof Q3)m=v.result;else if(v instanceof e4)m=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return me.fun(o)&&ot.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function Zp(t,e){Xh(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var Q3=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},e4=class extends Error{constructor(){super("SkipAnimationSignal")}},_k=t=>t instanceof jE,Zre=1,jE=class extends fB{constructor(){super(...arguments),this.id=Zre++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ys(this);return t&&t.getValue()}to(...t){return Os.to(this,t)}interpolate(...t){return Nre(),Os.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Kp(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Ub.sort(this),Kp(this,{type:"priority",parent:this,priority:t})}},tu=Symbol.for("SpringPhase"),AB=1,Ck=2,Ek=4,Zw=t=>(t[tu]&AB)>0,Ra=t=>(t[tu]&Ck)>0,Xf=t=>(t[tu]&Ek)>0,t4=(t,e)=>e?t[tu]|=Ck|AB:t[tu]&=~Ck,n4=(t,e)=>e?t[tu]|=Ek:t[tu]&=~Ek,qe=class extends jE{constructor(t,e){if(super(),this.animation=new Jre,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!me.und(t)||!me.und(e)){const n=me.obj(t)?{...t}:{...e,from:t};me.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ra(this)||this._state.asyncTo)||Xf(this)}get goal(){return qi(this.animation.to)}get velocity(){const t=Ys(this);return t instanceof Rm?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Zw(this)}get isAnimating(){return Ra(this)}get isPaused(){return Xf(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Gb(i.to);!o&&Gr(i.to)&&(r=_r(qi(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==Yp?1:o?o[u].lastPosition:r[u];let f=i.immediate,p=d;if(!f){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let g=c.elapsedTime+=t;const m=i.fromValues[u],v=c.v0!=null?c.v0:c.v0=me.arr(s.velocity)?s.velocity[u]:s.velocity;let y;const b=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(me.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,k=Math.exp(-(1-w)*g);p=m+v/(1-w)*(1-k),f=Math.abs(c.lastPosition-p)<=b,y=v*k}else{y=c.lastVelocity==null?v:c.lastVelocity;const w=s.restVelocity||b/10,k=s.clamp?0:s.bounce,_=!me.und(k),E=m==d?c.v0>0:m<d;let C,P=!1;const T=1,I=Math.ceil(t/T);for(let L=0;L<I&&(C=Math.abs(y)>w,!(!C&&(f=Math.abs(d-p)<=b,f)));++L){_&&(P=p==d||p>d==E,P&&(y=-y*k,p=d));const j=-s.tension*1e-6*(p-d),X=-s.friction*.001*y,$=(j+X)/s.mass;y=y+$*T,p=p+y*T}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,g=c.elapsedTime+=t)),w=(s.progress||0)+g/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),p=m+s.easing(w)*(d-m),y=(p-c.lastPosition)/t,f=w==1}c.lastVelocity=y,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(p,s.round)&&(n=!0)});const a=Ys(this),l=a.getValue();if(e){const c=qi(i.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return ot.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ra(this)){const{to:t,config:e}=this.animation;ot.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return me.und(t)?(n=this.queue||[],this.queue=[]):n=[me.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>DE(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Zp(this._state,t&&this._lastCallId),ot.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=me.obj(n)?n[e]:n,(n==null||Sk(n))&&(n=void 0),i=me.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return Zw(this)||(t.reverse&&([n,i]=[i,n]),i=qi(i),me.und(i)?Ys(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,IE(t,(o,a)=>/^on/.test(a)?wB(o,n):o)),r4(this,t,"onProps"),Yf(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return _B(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Xf(this)||(n4(this,!0),kh(s.pauseQueue),Yf(this,"onPause",Ss(this,qf(this,this.animation.to)),this))},resume:()=>{Xf(this)&&(n4(this,!1),Ra(this)&&this._resume(),kh(s.resumeQueue),Yf(this,"onResume",Ss(this,qf(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=NB(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Sd(this));const i=!me.und(t.to),r=!me.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Sd(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;r&&!i&&(!e.default||me.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!Lo(d,c);f&&(a.from=d),d=qi(d);const p=!Lo(u,l);p&&this._focus(u);const g=Sk(e.to),{config:m}=a,{decay:v,velocity:y}=m;(i||r)&&(m.velocity=0),e.config&&!g&&Yre(m,_c(e.config,s),e.config!==o.config?_c(o.config,s):void 0);let b=Ys(this);if(!b||me.und(u))return n(Ss(this,!0));const w=me.und(e.reset)?r&&!e.default:!me.und(d)&&Yh(e.reset,s),k=w?d:this.get(),_=Jp(u),E=me.num(_)||me.arr(_)||Wb(_),C=!g&&(!E||Yh(o.immediate||e.immediate,s));if(p){const L=wk(u);if(L!==b.constructor)if(C)b=this._set(_);else throw Error(`Cannot animate between ${b.constructor.name} and ${L.name}, as the "to" prop suggests`)}const P=b.constructor;let T=Gr(u),I=!1;if(!T){const L=w||!Zw(this)&&f;(p||L)&&(I=Lo(Jp(k),_),T=!I),(!Lo(a.immediate,C)&&!C||!Lo(m.decay,v)||!Lo(m.velocity,y))&&(T=!0)}if(I&&Ra(this)&&(a.changed&&!w?T=!0:T||this._stop(l)),!g&&((T||Gr(l))&&(a.values=b.getPayload(),a.toValues=Gr(u)?null:P==Yp?[1]:_r(_)),a.immediate!=C&&(a.immediate=C,!C&&!w&&this._set(l)),T)){const{onRest:L}=a;St(ese,X=>r4(this,e,X));const j=Ss(this,qf(this,l));kh(this._pendingCalls,j),this._pendingCalls.add(n),a.changed&&ot.batchedUpdates(()=>{var X;a.changed=!w,L==null||L(j,this),w?_c(o.onRest,j):(X=a.onStart)==null||X.call(a,j,this)})}w&&this._set(k),g?n(EB(e.to,e,this._state,this)):T?this._start():Ra(this)&&!p?this._pendingCalls.add(n):n(CB(k))}_focus(t){const e=this.animation;t!==e.to&&(W3(this)&&this._detach(),e.to=t,W3(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Gr(e)&&(wf(e,this),_k(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Gr(t)&&Xp(t,this)}_set(t,e=!0){const n=qi(t);if(!me.und(n)){const i=Ys(this);if(!i||!Lo(n,i.getValue())){const r=wk(n);!i||i.constructor!=r?OE(this,r.create(n)):i.setValue(n),i&&ot.batchedUpdates(()=>{this._onChange(n,e)})}}return Ys(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Yf(this,"onStart",Ss(this,qf(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),_c(this.animation.onChange,t,this)),_c(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ys(this).reset(qi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Ra(this)||(t4(this,!0),Xf(this)||this._resume())}_resume(){Os.skipAnimation?this.finish():Ub.start(this)}_stop(t,e){if(Ra(this)){t4(this,!1);const n=this.animation;St(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Kp(this,{type:"idle",parent:this});const i=e?Sd(this.get()):Ss(this.get(),qf(this,t??n.to));kh(this._pendingCalls,i),n.changed&&(n.changed=!1,Yf(this,"onRest",i,this))}}};function qf(t,e){const n=Jp(e),i=Jp(t.get());return Lo(i,n)}function NB(t,e=t.loop,n=t.to){const i=_c(e);if(i){const r=i!==!0&&kB(i),s=(r||t).reverse,o=!r||r.reset;return Qp({...t,loop:e,default:!1,pause:void 0,to:!s||Sk(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function Qp(t){const{to:e,from:n}=t=kB(t),i=new Set;return me.obj(e)&&i4(e,i),me.obj(n)&&i4(n,i),t.keys=i.size?Array.from(i):null,t}function Qre(t){const e=Qp(t);return me.und(e.default)&&(e.default=IE(e)),e}function i4(t,e){Ao(t,(n,i)=>n!=null&&e.add(i))}var ese=["onStart","onRest","onChange","onPause","onResume"];function r4(t,e,n){t.animation[n]=e[n]!==SB(e,n)?wB(e[n],t.key):void 0}function Yf(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var tse=["onStart","onChange","onRest"],nse=1,ise=class{constructor(t,e){this.id=nse++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];me.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Qp(t)),this}start(t){let{queue:e}=this;return t?e=_r(t).map(Qp):this.queue=[],this._flush?this._flush(this,e):(OB(this,e),Ak(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;St(_r(e),i=>n[i].stop(!!t))}else Zp(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(me.und(t))this.start({pause:!0});else{const e=this.springs;St(_r(t),n=>e[n].pause())}return this}resume(t){if(me.und(t))this.start({pause:!1});else{const e=this.springs;St(_r(t),n=>e[n].resume())}return this}each(t){Ao(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Xh(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&Xh(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,Xh(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;ot.onFrame(this._onFrame)}};function Ak(t,e){return Promise.all(e.map(n=>PB(t,n))).then(n=>DE(t,n))}async function PB(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=me.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=me.arr(r)||me.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):St(tse,m=>{const v=e[m];if(me.fun(v)){const y=t._events[m];e[m]=({finished:b,cancelled:w})=>{const k=y.get(v);k?(b||(k.finished=!1),w&&(k.cancelled=!0)):y.set(v,{value:null,finished:b||!1,cancelled:w||!1})},c&&(c[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,kh(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const f=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),p=e.cancel===!0||SB(e,"cancel")===!0;(u||p&&d.asyncId)&&f.push(_B(++t._lastAsyncId,{props:e,state:d,actions:{pause:bk,resume:bk,start(m,v){p?(Zp(d,t._lastAsyncId),v(Sd(t))):(m.onRest=a,v(EB(u,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const g=DE(t,await Promise.all(f));if(o&&g.finished&&!(n&&g.noop)){const m=NB(e,o,r);if(m)return OB(t,[m]),PB(t,m,!0)}return l&&ot.batchedUpdates(()=>l(g,t,t.item)),g}function s4(t,e){const n={...t.springs};return e&&St(_r(e),i=>{me.und(i.keys)&&(i=Qp(i)),me.obj(i.to)||(i={...i,to:void 0}),TB(n,i,r=>RB(r))}),MB(t,n),n}function MB(t,e){Ao(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,wf(n,t))})}function RB(t,e){const n=new qe;return n.key=t,e&&wf(n,e),n}function TB(t,e,n){e.keys&&St(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function OB(t,e){St(e,n=>{TB(t.springs,n,i=>RB(i,t))})}var Xb=({children:t,...e})=>{const n=x.useContext(gy),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=Tre(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=gy;return x.createElement(s,{value:e},t)},gy=rse(Xb,{});Xb.Provider=gy.Provider;Xb.Consumer=gy.Consumer;function rse(t,e){return Object.assign(t,x.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var sse=()=>{const t=[],e=function(i){Mre();const r=[];return St(t,(s,o)=>{if(me.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return St(t,i=>i.pause(...arguments)),this},e.resume=function(){return St(t,i=>i.resume(...arguments)),this},e.set=function(i){St(t,(r,s)=>{const o=me.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return St(t,(s,o)=>{if(me.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return St(t,i=>i.stop(...arguments)),this},e.update=function(i){return St(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return me.fun(i)?i(s,r):i};return e._getProps=n,e};function ose(t,e,n){const i=me.fun(e)&&e;i&&!n&&(n=[]);const r=x.useMemo(()=>i||arguments.length==3?sse():void 0,[]),s=x.useRef(0),o=vB(),a=x.useMemo(()=>({ctrls:[],queue:[],flush(y,b){const w=s4(y,b);return s.current>0&&!a.queue.length&&!Object.keys(w).some(_=>!y.springs[_])?Ak(y,b):new Promise(_=>{MB(y,w),a.queue.push(()=>{_(Ak(y,b))}),o()})}}),[]),l=x.useRef([...a.ctrls]),c=[],u=K3(t)||0;x.useMemo(()=>{St(l.current.slice(t,u),y=>{Gre(y,r),y.stop(!0)}),l.current.length=t,d(u,t)},[t]),x.useMemo(()=>{d(0,Math.min(u,t))},n);function d(y,b){for(let w=y;w<b;w++){const k=l.current[w]||(l.current[w]=new ise(null,a.flush)),_=i?i(w,k):e[w];_&&(c[w]=Qre(_))}}const f=l.current.map((y,b)=>s4(y,c[b])),p=x.useContext(Xb),g=K3(p),m=p!==g&&Wre(p);TE(()=>{s.current++,a.ctrls=l.current;const{queue:y}=a;y.length&&(a.queue=[],St(y,b=>b())),St(l.current,(b,w)=>{r==null||r.add(b),m&&b.start({default:p});const k=c[w];k&&(Kre(b,k.ref),b.ref?b.queue.push(k):b.start(k))})}),yB(()=>()=>{St(a.ctrls,y=>y.stop(!0))});const v=f.map(y=>({...y}));return r?[v,r]:v}function qb(t,e){const n=me.fun(t),[[i],r]=ose(1,n?t:[t],n?[]:e);return n||arguments.length==2?[i,r]:i}var ase=class extends jE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Wp(...e);const n=this._get(),i=wk(n);OE(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Lo(e,n)||(Ys(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&o4(this._active)&&Qw(this)}_get(){const t=me.arr(this.source)?this.source.map(qi):_r(qi(this.source));return this.calc(...t)}_start(){this.idle&&!o4(this._active)&&(this.idle=!1,St(Gb(this),t=>{t.done=!1}),Os.skipAnimation?(ot.batchedUpdates(()=>this.advance()),Qw(this)):Ub.start(this))}_attach(){let t=1;St(_r(this.source),e=>{Gr(e)&&wf(e,this),_k(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){St(_r(this.source),t=>{Gr(t)&&Xp(t,this)}),this._active.clear(),Qw(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=_r(this.source).reduce((e,n)=>Math.max(e,(_k(n)?n.priority:0)+1),0))}};function lse(t){return t.idle!==!1}function o4(t){return!t.size||Array.from(t).every(lse)}function Qw(t){t.idle||(t.idle=!0,St(Gb(t),e=>{e.done=!0}),Kp(t,{type:"idle",parent:t}))}Os.assign({createStringInterpolator:mB,to:(t,e)=>new ase(t,e)});var IB=/^--/;function cse(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!IB.test(t)&&!(Jh.hasOwnProperty(t)&&Jh[t])?e+"px":(""+e).trim()}var a4={};function use(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(f=>n||t.hasAttribute(f)?f:a4[f]||(a4[f]=f.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(t.textContent=s);for(const f in r)if(r.hasOwnProperty(f)){const p=cse(f,r[f]);IB.test(f)?t.style.setProperty(f,p):t.style[f]=p}d.forEach((f,p)=>{t.setAttribute(f,u[p])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var Jh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dse=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),fse=["Webkit","Ms","Moz","O"];Jh=Object.keys(Jh).reduce((t,e)=>(fse.forEach(n=>t[dse(n,e)]=t[e]),t),Jh);var hse=/^(matrix|translate|scale|rotate|skew)/,pse=/^(translate)/,mse=/^(rotate|skew)/,e1=(t,e)=>me.num(t)&&t!==0?t+e:t,Q0=(t,e)=>me.arr(t)?t.every(n=>Q0(n,e)):me.num(t)?t===e:parseFloat(t)===e,gse=class extends Kb{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>e1(a,"px")).join(",")})`,Q0(o,0)])),Ao(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(hse.test(a)){if(delete i[a],me.und(o))return;const l=pse.test(a)?"px":mse.test(a)?"deg":"";r.push(_r(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${e1(f,l)})`,Q0(f,0)]:c=>[`${a}(${c.map(u=>e1(u,l)).join(",")})`,Q0(c,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new vse(r,s)),super(i)}},vse=class extends fB{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return St(this.inputs,(n,i)=>{const r=qi(n[0]),[s,o]=this.transforms[i](me.arr(r)?r:n.map(qi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&St(this.inputs,e=>St(e,n=>Gr(n)&&wf(n,this)))}observerRemoved(t){t==0&&St(this.inputs,e=>St(e,n=>Gr(n)&&Xp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Kp(this,t)}},yse=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Os.assign({batchedUpdates:Kl.unstable_batchedUpdates,createStringInterpolator:mB,colors:lre});var bse=Fre(yse,{applyAnimatedValues:use,createAnimatedStyle:t=>new gse(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Ze=bse.animated;const zt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},Ue=(t=zt.stone[800])=>({backgroundColor:new qe(t),opacity:new qe(1)}),Fn=()=>({strokeDashoffset:new qe(1),opacity:new qe(1)}),Vg=()=>({strokeDashoffset:new qe(1),opacity:new qe(1),path:new qe("")}),vy={bus:{address:Vg(),data:Vg(),rd:Vg(),wr:Vg(),iom:Fn(),mem:{stroke:new qe(zt.red[500])},handshake:Fn(),pic:Fn(),pio:Fn(),timer:Fn(),intr:Fn(),inta:Fn(),int0:Fn(),int1:Fn(),int2:Fn(),"switches->pio":Fn(),"pio->leds":Fn(),printer:{data:Fn(),strobe:Fn(),busy:Fn()}},clock:{angle:new qe(0)},controlMemory:{overlay:{opacity:new qe(0)},container:{opacity:new qe(0),scale:new qe(.8)},currentInstruction:{glow:new qe(0)},microop:{0:{opacity:new qe(0),translateX:new qe(-20)},1:{opacity:new qe(0),translateX:new qe(-20)},2:{opacity:new qe(0),translateX:new qe(-20)},3:{opacity:new qe(0),translateX:new qe(-20)},4:{opacity:new qe(0),translateX:new qe(-20)}}},sequencer:{overlay:{opacity:new qe(0)},container:{opacity:new qe(0),scale:new qe(.8)}},cpu:{internalBus:{address:{strokeDashoffset:new qe(1),opacity:new qe(1),path:new qe("")},data:{strokeDashoffset:new qe(1),opacity:new qe(1),path:new qe("")}},alu:{operands:Fn(),results:Fn(),cog:{rot:new qe(0)},operation:{backgroundColor:new qe(zt.stone[800])},resultText:{opacity:new qe(0)},leftText:{opacity:new qe(0)},rightText:{opacity:new qe(0)}},decoder:{path:Fn(),progress:{progress:new qe(0),opacity:new qe(1)}},AX:Ue(),BX:Ue(),CX:Ue(),DX:Ue(),AL:Ue(),BL:Ue(),CL:Ue(),DL:Ue(),SP:Ue(),"SP.l":Ue(),"SP.h":Ue(),IP:Ue(),"IP.l":Ue(),"IP.h":Ue(),IR:Ue(),ri:{...Ue(),opacity:new qe(0)},"ri.l":Ue(),"ri.h":Ue(),id:{...Ue(),opacity:new qe(0)},"id.l":Ue(),"id.h":Ue(),left:Ue(),"left.l":Ue(),"left.h":Ue(),right:Ue(),"right.l":Ue(),"right.h":Ue(),result:Ue(),"result.l":Ue(),"result.h":Ue(),FLAGS:Ue(),"FLAGS.l":Ue(),"FLAGS.h":Ue(),MAR:Ue(),MBR:Ue()},handshake:{DATA:Ue(),STATE:Ue()},memory:{"operating-cell":{color:new qe(zt.white)}},pic:{IMR:Ue(),IRR:Ue(),ISR:Ue(),INT0:Ue(),INT1:Ue(),INT2:Ue(),INT3:Ue(),INT4:Ue(),INT5:Ue(),INT6:Ue(),INT7:Ue()},pio:{PA:Ue(),PB:Ue(),CA:Ue(),CB:Ue()},printer:{printing:{progress:new qe(0),opacity:new qe(1)}},timer:{CONT:Ue(),COMP:Ue()}};function Be(t){try{return NL(vy,t)}catch{const n=t.split(".");let i=vy;for(const r of n)if(r in i)i=i[r];else return console.warn(`Path not found: ${t}`),{backgroundColor:new qe(zt.stone[800]),opacity:new qe(1),stop(){},pause(){},resume(){},start:()=>Promise.resolve(),set(){},get:()=>zt.stone[800],isPaused:!1};return i}}function DB(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof qe?e[n]=i.get():e[n]=DB(i)}return e}const xse=DB(vy);function jB(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof qe?i.set(e[n]):jB(t[n],e[n])}}const wse=()=>jB(vy,xse),F=new SE({allowSelfLoops:!1});F.addNode("MBR",{position:[615,249]});F.addNode("MBR bottom",{position:[615,274]});F.addNode("MBR reg input",{position:[595,249]});F.addNode("AL",{position:[455,45]});F.addNode("BL",{position:[455,85]});F.addNode("CL",{position:[455,125]});F.addNode("DL",{position:[455,165]});F.addNode("id",{position:[455,205]});F.addNode("SP",{position:[455,309]});F.addNode("IP",{position:[455,349]});F.addNode("ri",{position:[455,388]});F.addNode("ri out",{position:[480,388]});F.addNode("MAR",{position:[630,349]});F.addNode("result",{position:[272,115]});F.addNode("NodoRegIn",{position:[390,115]});F.addNode("NodoRegOut",{position:[550,115]});F.addNode("FLAGS",{position:[250,225]});F.addNode("IR",{position:[250,275]});F.addNode("IR mbr join",{position:[250,250]});F.addNode("left",{position:[130,85]});F.addNode("right",{position:[125,145]});F.addNode("left end",{position:[220,85]});F.addNode("right end",{position:[220,145]});F.addNode("result start",{position:[280,115]});F.addNode("rmbr",{position:[250,390]});F.addNode("bleft1",{position:[550,16]});F.addNode("bleft2",{position:[90,16]});F.addNode("bleft3",{position:[90,85]});F.addNode("CL join",{position:[425,125]});F.addNode("AL join",{position:[425,45]});F.addNode("BL join",{position:[425,85]});F.addNode("MBR top",{position:[615,215]});F.addNode("DL join",{position:[425,165]});F.addNode("id join",{position:[425,205]});F.addNode("data mbr join",{position:[390,250]});F.addNode("mbr approach horizontal",{position:[580,250]});F.addNode("mbr approach vertical",{position:[580,215]});F.addNode("mbr top approach",{position:[600,215]});F.addNode("mbr top entry",{position:[615,215]});F.addNode("mbr bottom exit",{position:[615,285]});F.addNode("mbr to bus horizontal",{position:[585,285]});F.addNode("mbr to bus join",{position:[585,250]});F.addNode("mbr to cpu center",{position:[390,250]});F.addNode("mbr to ir horizontal",{position:[250,250]});F.addNode("mbr to ir vertical end",{position:[250,272]});F.addNode("mbr to ir approach",{position:[250,275]});F.addNode("mbr to ri vertical",{position:[390,388]});F.addNode("SP join",{position:[425,309]});F.addNode("IP join",{position:[390,349]});F.addNode("ri join",{position:[425,388]});F.addNode("MAR join1",{position:[550,388]});F.addNode("MAR join2",{position:[550,349]});F.addNode("result mbr join",{position:[370,250]});F.addNode("FLAGS mbr join",{position:[155,250]});F.addNode("left join",{position:[30,85]});F.addNode("right join",{position:[90,145]});F.addNode("operands mbr join",{position:[90,250]});F.addNode("outr mbr join",{position:[550,250]});F.addNode("mbr reg join",{position:[390,250]});F.addNode("MBR join",{position:[390,250]});F.addNode("AL out",{position:[483,45]});F.addNode("BL out",{position:[483,85]});F.addNode("CL out",{position:[483,125]});F.addNode("DL out",{position:[483,165]});F.addNode("id out",{position:[483,205]});F.addNode("MBR out",{position:[626,249]});F.addNode("MBR out join",{position:[550,250]});F.addNode("SP out",{position:[510,309]});F.addNode("IP out",{position:[510,349]});F.addNode("IP out join",{position:[550,349]});F.addNode("ri out join",{position:[525,388]});F.addNode("SP out join",{position:[525,309]});F.addNode("AL out join",{position:[525,45]});F.addNode("BL out join",{position:[525,85]});F.addNode("CL out join",{position:[525,125]});F.addNode("DL out join",{position:[525,165]});F.addNode("id out join",{position:[521,205]});F.addUndirectedEdge("AL","AL out");F.addUndirectedEdge("BL","BL out");F.addUndirectedEdge("CL","CL out");F.addUndirectedEdge("DL","DL out");F.addUndirectedEdge("id","id out");F.addUndirectedEdge("IP","IP out");F.addUndirectedEdge("SP","SP out");F.addUndirectedEdge("AL out","AL out join");F.addUndirectedEdge("BL out","BL out join");F.addUndirectedEdge("BL out","mbr approach horizontal");F.addUndirectedEdge("CL out","CL out join");F.addUndirectedEdge("DL out","DL out join");F.addUndirectedEdge("id out","id out join");F.addUndirectedEdge("AL out join","NodoRegOut");F.addUndirectedEdge("BL out join","NodoRegOut");F.addUndirectedEdge("CL out join","NodoRegOut");F.addUndirectedEdge("DL out join","NodoRegOut");F.addUndirectedEdge("id out join","NodoRegOut");F.addUndirectedEdge("NodoRegOut","outr mbr join");F.addUndirectedEdge("NodoRegOut","bleft1");F.addUndirectedEdge("bleft1","bleft2");F.addUndirectedEdge("bleft2","bleft3");F.addUndirectedEdge("bleft3","left");F.addUndirectedEdge("left","left end");F.addUndirectedEdge("IP out join","outr mbr join");F.addUndirectedEdge("ri out join","outr mbr join");F.addUndirectedEdge("SP out join","outr mbr join");F.addUndirectedEdge("SP out join","MAR join2");F.addUndirectedEdge("outr mbr join","MAR join2");F.addUndirectedEdge("outr mbr join","data mbr join");F.addUndirectedEdge("MBR","outr mbr join");F.addUndirectedEdge("MBR","MBR out");F.addUndirectedEdge("MBR out","MBR out join");F.addUndirectedEdge("MBR out join","NodoRegOut");F.addUndirectedEdge("MBR out","outr mbr join");F.addUndirectedEdge("mbr reg join","NodoRegIn");F.addUndirectedEdge("outr mbr join","MBR join");F.addUndirectedEdge("MBR join","NodoRegIn");F.addUndirectedEdge("NodoRegIn","AL join");F.addUndirectedEdge("NodoRegIn","BL join");F.addUndirectedEdge("NodoRegIn","CL join");F.addUndirectedEdge("NodoRegIn","DL join");F.addUndirectedEdge("NodoRegIn","id join");F.addUndirectedEdge("outr mbr join","operands mbr join");F.addUndirectedEdge("AL join","AL");F.addUndirectedEdge("BL join","BL");F.addUndirectedEdge("CL join","CL");F.addUndirectedEdge("DL join","DL");F.addUndirectedEdge("id join","id");F.addUndirectedEdge("id join","data mbr join");F.addUndirectedEdge("MBR","data mbr join");F.addUndirectedEdge("MBR","MBR top");F.addUndirectedEdge("MBR","MBR bottom");F.addUndirectedEdge("MBR","MBR reg input");F.addUndirectedEdge("NodoRegOut","MBR reg input");F.addUndirectedEdge("outr mbr join","mbr approach horizontal");F.addUndirectedEdge("mbr approach horizontal","mbr approach vertical");F.addUndirectedEdge("mbr approach vertical","mbr top approach");F.addUndirectedEdge("mbr top approach","mbr top entry");F.addUndirectedEdge("mbr top entry","MBR top");F.addUndirectedEdge("MBR bottom","mbr bottom exit");F.addUndirectedEdge("mbr bottom exit","mbr to bus horizontal");F.addUndirectedEdge("mbr to bus horizontal","mbr to bus join");F.addUndirectedEdge("mbr to bus join","mbr to cpu center");F.addUndirectedEdge("mbr to cpu center","mbr to ir horizontal");F.addUndirectedEdge("mbr to ir horizontal","mbr to ir vertical end");F.addUndirectedEdge("mbr to ir vertical end","mbr to ir approach");F.addUndirectedEdge("mbr to ir approach","IR");F.addUndirectedEdge("mbr to cpu center","mbr to ri vertical");F.addUndirectedEdge("mbr to ri vertical","ri");F.addUndirectedEdge("data mbr join","NodoRegIn");F.addUndirectedEdge("IP","IP join");F.addUndirectedEdge("SP","SP join");F.addUndirectedEdge("ri","ri join");F.addUndirectedEdge("ri","ri out");F.addUndirectedEdge("ri out","ri out join");F.addUndirectedEdge("MAR join1","ri");F.addUndirectedEdge("MAR join2","MAR join1");F.addUndirectedEdge("MAR","MAR join2");F.addUndirectedEdge("IP join","SP join");F.addUndirectedEdge("SP join","ri join");F.addUndirectedEdge("result start","result");F.addUndirectedEdge("result","NodoRegIn");F.addUndirectedEdge("FLAGS","FLAGS mbr join");F.addUndirectedEdge("FLAGS mbr join","data mbr join");F.addUndirectedEdge("IR","IR mbr join");F.addUndirectedEdge("IR mbr join","FLAGS mbr join");F.addUndirectedEdge("left","left join");F.addUndirectedEdge("right","right join");F.addUndirectedEdge("left join","right join");F.addUndirectedEdge("right join","operands mbr join");F.addUndirectedEdge("right","right end");F.addNode("NodoRegOutLeft",{position:[550,90]});F.addUndirectedEdge("MBR out join","NodoRegOutLeft");F.addUndirectedEdge("NodoRegOutLeft","bleft1");F.addNode("NodoRegOutRight",{position:[550,140]});F.addUndirectedEdge("MBR out join","NodoRegOutRight");F.addUndirectedEdge("NodoRegOutRight","outr mbr join");F.addNode("NodoRegOutToRight",{position:[540,115]});F.addUndirectedEdge("NodoRegOut","NodoRegOutToRight");F.addUndirectedEdge("NodoRegOutToRight","outr mbr join");F.addNode("outr mbr join left",{position:[560,250]});F.addNode("NodoRegOutToLeft",{position:[560,115]});F.addUndirectedEdge("outr mbr join left","NodoRegOutToLeft");F.addUndirectedEdge("NodoRegOutToLeft","NodoRegOut");function Sse(t,e,n){const r=(a=>a.replace(/\.(l|h)$/,""))(t);if(!F.hasNode(r))return console.warn(`Nodo origen '${r}' no existe en el grafo`),"";const s=Qi(t,"left end",e,n,{separateMBRPaths:!0,direction:"left"}),o=Qi(t,"right end",e,n,{separateMBRPaths:!0,direction:"right"});return s&&o?`${s} ${o}`:s||o||""}function Qi(t,e,n,i,r){console.log(" generateDataPath llamado con:",{from:t,to:e,instruction:n,mode:i,options:r});const s=f=>{let p=f.replace(/\.(l|h)$/,"");return["MBR","AL","BL","CL","DL","SP","IP","MAR","FLAGS","IR","RESULT"].includes(p.toUpperCase())&&(p=p.toUpperCase()),p},o=s(t),a=s(e),l=["AL","BL","CL","DL","id","SP","IP","ri","MAR","MBR","left","right","left end","right end"];console.log(" Debug inicial:",{normalizedFrom:o,normalizedTo:a,instruction:n,mode:i,isFromRegister:l.includes(o),isToMBR:a==="MBR",condition:l.includes(o)&&a==="MBR"});let c=[];if(console.log(" Evaluando condicin ri  MAR:",{normalizedFrom:o,normalizedTo:a,mode:i,condition:o==="ri"&&a==="MAR"&&i==="mem<-imd"}),o==="ri"&&a==="MAR"&&i==="mem<-imd")return console.log(" Usando ruta especial ri  MAR:","M 455 388 H 550 V 348 H 580"),"M 455 388 H 550 V 348 H 580";if(o==="MBR"&&a==="ri"&&(n!=null&&n.startsWith("MOV")||n!=null&&n.startsWith("ADD")||n!=null&&n.startsWith("SUB")||n!=null&&n.startsWith("CMP")||n!=null&&n.startsWith("AND")||n!=null&&n.startsWith("OR")||n!=null&&n.startsWith("XOR"))&&i==="mem<-imd")return console.log(" Usando ruta especial MBR  ri (direccionamiento directo + inmediato pasando por IP join)"),"M 620 250 H 390 V 349 V 388 H 455";if(o==="ri"&&a==="left end")return console.log(" Usando ruta especial ri  left end"),"M 455 388 H 480 H 550 H 590 V 250 H 30 V 85 H 125 H 220";if(o==="ri"&&a==="right end")return console.log(" Usando ruta especial ri  right end"),"M 455 388 H 480 H 550 V 250 H 390 H 250 H 90 V 145 H 125 H 220";if(!F.hasNode(o))return console.warn(`Nodo origen '${o}' no existe en el grafo`),"";if(!F.hasNode(a))return console.warn(`Nodo destino '${a}' no existe en el grafo`),"";if(o==="MAR"||a==="MAR")return"";if(o==="MBR"&&a==="IR"){const f=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","mbr to cpu center","mbr to ir horizontal","mbr to ir vertical end","mbr to ir approach","IR"],p=F.getNodeAttribute(f[0],"position");let g=`M ${p[0]} ${p[1]}`;for(let m=1;m<f.length;m++){const[v,y]=F.getNodeAttribute(f[m],"position");g+=` L ${v} ${y}`}return g}if(r!=null&&r.separateMBRPaths&&t==="MBR"&&(e==="left"||e==="right"))e==="left"?c=[o,`${o} out`,`${o} out join`,"outr mbr join left","NodoRegOutToLeft","NodoRegOut","bleft1","bleft2","bleft3","left","left end"]:e==="right"&&(c=[o,`${o} out`,`${o} out join`,"outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"]);else if(a==="left")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","bleft1","bleft2","bleft3","left","left end"];else if(a==="right")if(o==="MBR"){const f="MBR_down300";F.hasNode(f)||(F.addNode(f,{position:[620,300]}),F.addUndirectedEdge("MBR",f));const p="MBR_right125_300";F.hasNode(p)||(F.addNode(p,{position:[125,300]}),F.addUndirectedEdge(f,p)),c=["MBR bottom","MBR",f,p,"right","right end"]}else c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"];else if(o==="BL"&&a==="ri")c=["BL","BL out","BL out join","NodoRegOut","outr mbr join","MAR join2","MAR"];else if(o==="MBR"&&a==="id"&&i==="mem<-imd"){console.log(" Caso especfico MBR  id detectado");const f=["MBR bottom","MBR","mbr reg join","NodoRegIn","id join","id"],p=F.getNodeAttribute(f[0],"position");let g=`M ${p[0]} ${p[1]}`;for(let m=1;m<f.length;m++){const[v,y]=F.getNodeAttribute(f[m],"position");g+=` L ${v} ${y}`}return console.log(" Path definido para MBR  id:",g),g}else if(o==="MBR"&&a==="BL")c=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","outr mbr join","mbr reg join","NodoRegIn","BL join","BL"],console.log(" Path definido para MBR  BL (animacin desde MBR bottom, ingresando por mbr reg join, NodoRegIn, BL join):",c);else if(o==="MBR"&&["AL","BL","CL","DL","id"].includes(a))c=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a],console.log(` Path definido para MBR  ${a} (animacin desde MBR bottom, pasando por bus gris y nodos de entrada):`,c);else if(o==="BL"&&a==="MBR")console.log(" Caso especfico BL  MBR detectado - evitando NodoRegIn y mbr reg join"),c=["BL","BL out","mbr approach horizontal","mbr approach vertical","mbr top approach","mbr top entry","MBR top","MBR"],console.log(" Path definido para BL  MBR:",c);else if(l.includes(o)&&a==="MBR"&&(n==null?void 0:n.toUpperCase())==="MOV")console.log(" Usando ruta prioritaria para MOV registroMBR (evitando NodoRegOut y NodoRegIn)"),c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr approach horizontal","mbr approach vertical","mbr top approach","mbr top entry","MBR top","MBR"];else if(l.includes(o)&&l.includes(a))["SP","IP","ri"].includes(a)?c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a]:c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a];else if(l.includes(o)&&a==="MBR")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr approach horizontal","mbr approach vertical","mbr top approach","mbr top entry","MBR top","MBR"];else if(o==="MBR"&&a==="ri"){if(["JMP","JC","JZ"].includes(n??""))c=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","mbr to cpu center","IP join","IP"];else if((n==="MOV"||n==="INT")&&i==="mem<-imd")c=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","mbr to cpu center","mbr to ri vertical","ri"];else if(i==="mem<-imd"&&(n==="ADD"||n==="SUB"))c=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","mbr to cpu center","mbr to ri vertical","ri"];else return"M 594 249 H 550 V 348 H 580";const f=F.getNodeAttribute(c[0],"position");let p=`M ${f[0]} ${f[1]}`;for(let g=1;g<c.length;g++){const[m,v]=F.getNodeAttribute(c[g],"position");p+=` L ${m} ${v}`}return p}else try{c=Qie(F,o,a)||[]}catch(f){return console.warn(`Error calculando ruta de ${o} a ${a}:`,f),""}if(o==="MBR"&&a==="IP"){const f=F.getNodeAttribute("MBR bottom","position"),p=F.getNodeAttribute("MBR","position"),g=F.getNodeAttribute("mbr reg join","position"),m=F.getNodeAttribute("IP","position");return`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]} L ${g[0]} ${g[1]} L ${g[0]} ${m[1]} L ${m[0]} ${m[1]}`}if(o==="ri"&&a==="IP")return"M 455 388 H 550 V 349 H 455";if(o==="ri"&&a==="IP"&&(c=["MBR","mbr reg join","NodoRegIn","IP join","IP"]),o==="ri"&&a==="IP"&&n==="CALL"&&(c=["ri","ri out join","NodoRegOut","outr mbr join","mbr reg join","NodoRegIn","IP join","IP"]),o==="MBR"&&a==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(o==="MBR"&&a==="ri"&&n==="CALL"&&(c=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","mbr to cpu center","mbr to ri vertical","ri"]),o==="IP"&&a==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 233 H 615 V 249";if(c.length===0)return console.warn(`No se encontr ruta de ${o} a ${a}`),"";for(const f of c)if(!F.hasNode(f))return console.error(` Nodo "${f}" no existe en el grafo. Path completo:`,c),"";const u=F.getNodeAttribute(c[0],"position");let d=`M ${u[0]} ${u[1]}`;for(let f=1;f<c.length;f++){const[p,g]=F.getNodeAttribute(c[f],"position");d+=` L ${p} ${g}`}return console.log(" generateDataPath retornando:",d),console.log(" Path completo:",c),o==="MBR"&&a==="id"&&console.log(" Path SVG generado para MBR  id:",d),d}function t1(){const t=[615,274],e=[615,285],n=[580,285],i=[580,250],r=[550,250],s=[550,349],o=[630,349];return`M ${t[0]} ${t[1]} L ${e[0]} ${e[1]} L ${n[0]} ${n[1]} L ${i[0]} ${i[1]} L ${r[0]} ${r[1]} L ${s[0]} ${s[1]} L ${o[0]} ${o[1]}`}function kse({showSP:t,showid:e,showri:n}){const{path:i,...r}=Be("cpu.internalBus.data"),{path:s,...o}=Be("cpu.internalBus.address"),a=st(Vn),l=(a==null?void 0:a.phase)==="writeback",c=()=>l?"stroke-purple-400 drop-shadow-[0_0_8px_rgba(168,85,247,0.6)]":"stroke-mantis-400 drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",u=()=>l?"stroke-purple-300":"stroke-mantis-300";return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-30",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 580","M 90 145 H 90","M 272 115 H 390","M 250 225 V 250","M 580 250 H 390","M 390 250 H 250","M 250 145 v 46","M 250 250 V 272","M 250 300 V 320","M 451 349 H 390 V 250",t?"M 390 349 L 425 309 L 455 309":"",n?"M 390 349 L 425 388 L 455 388":"","M 455 45 H 425","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220","M 390 250 V 115","M 390 115 L 425 45 L 455 45","M 390 115 L 425 85 L 455 85","M 390 115 L 425 125 L 455 125","M 390 115 L 425 165 L 455 165",e?"M 390 115 L 425 205 L 451 205":"","M 550 115 L 525 45 L 445 45","M 550 115 L 525 85 L 445 85","M 550 115 L 525 125 L 445 125","M 550 115 L 525 165 L 445 165",e?"M 550 115 L 521 205 L 441 205":"","M 550 250 H 585 V 222 H 615","M 550 250 H 585 V 285 H 700","M 645 249 V 222 H 615 V 233","M 615 274 V 285 H 645 V 249"].join(" ")}),h.jsx("circle",{cx:390,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:250,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:390,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:348,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:615,cy:222,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2})," ",h.jsx("circle",{cx:615,cy:287,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2})," ",(n||t)&&h.jsx("circle",{cx:390,cy:349,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx(Ze.path,{d:i,className:`fill-none stroke-[3px] ${c()}`,strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(Ze.path,{d:i,className:`fill-none stroke-1 opacity-50 ${u()}`,strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(Ze.path,{d:s,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o}),h.jsx(Ze.path,{d:s,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o})]})}const em=new Set;async function _e(t,e){const n=N.get(an);if(!gt().animations)return Promise.resolve();if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(a=>{const l=N.sub(an,()=>{N.get(an).type!=="paused"&&(l(),a())})}),await _e(t,e);const i=gt();if(!i.animations&&!e.forceMs)return null;const s=Math.min(i.executionUnit,250),o={duration:e.forceMs?e.duration:i.animations?e.duration*s:1,easing:dB[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:a,from:l,to:c})=>{if(c===void 0&&l===void 0)return null;try{const u=Be(a);if(c===void 0)return u.set(l);{em.add(a);const d=await Be(a).start({from:l,to:c,config:o});return em.delete(a),d}}catch(u){return console.warn(`Error animando la clave ${a}:`,u),null}}))}const LB=()=>em.forEach(t=>{try{const e=Be(t);e&&typeof e.pause=="function"&&e.pause()}catch(e){console.warn(`Error pausing animation for key ${t}:`,e)}}),BB=()=>em.forEach(t=>{try{const e=Be(t);e&&typeof e.resume=="function"&&e.resume()}catch(e){console.warn(`Error resuming animation for key ${t}:`,e)}});function LE(){em.forEach(t=>{try{const e=Be(t);e&&typeof e.stop=="function"&&(e.stop(!0),e.isPaused&&typeof e.resume=="function"&&e.resume())}catch(e){console.warn(`Error stopping animation for key ${t}:`,e)}}),setTimeout(()=>wse(),10)}const _se={AX:zt.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:zt.red[500],SP:"#FACC15",MAR:zt.blue[500],MBR:zt.blue[500],IR:zt.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#06B6D4",ri:"#06B6D4",left:"#22C55E",right:"#16A34A"};function $B(t){const e=t.replace("cpu.","").split(".")[0];return _se[e]||zt.stone[600]}async function yt(t,e){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP||t==="cpu.right.l"||t==="cpu.left.l")return;const n=e||$B(t);await _e({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await _e({key:`${t}.backgroundColor`,to:zt.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function bt(t){try{return t==="cpu.right.l"||t==="cpu.left.l"?void 0:await _e({key:`${t}.backgroundColor`,to:zt.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function tm(t){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP)return;const e=gt(),n=$B(t);await _e({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const i=e.animations?1e3:1;await new Promise(r=>setTimeout(r,i)),await _e({key:`${t}.backgroundColor`,to:zt.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function af(t){await yt("cpu.MBR"),N.set(Ai,t),await bt("cpu.MBR")}function Nk(){setTimeout(()=>{try{const t=Be("bus.rd.opacity");t&&t.set(0)}catch{}try{const t=Be("bus.wr.opacity");t&&t.set(0)}catch{}},0)}function Pk(){try{const t=Be("bus.rd.opacity");t&&t.start({to:1})}catch{}}function Mk(){try{const t=Be("bus.rd.opacity");t&&t.start({to:0})}catch{}}function FB(){try{const t=Be("bus.wr.opacity");t&&t.start({to:1})}catch{}}function zB(){try{const t=Be("bus.wr.opacity");t&&t.start({to:0})}catch{}}function UB(){try{const t=Be("cpu.alu.resultText.opacity");t&&t.start({to:1})}catch{}}function VB(){try{const t=Be("cpu.alu.resultText.opacity");t&&t.start({to:0})}catch{}}function Rk(){setTimeout(()=>{try{const t=Be("cpu.alu.resultText.opacity");t&&t.set(0)}catch{}},0)}function HB(){try{const t=Be("cpu.alu.leftText.opacity");t&&t.start({to:1})}catch{}}function WB(){try{const t=Be("cpu.alu.leftText.opacity");t&&t.start({to:0})}catch{}}function Tk(){setTimeout(()=>{try{const t=Be("cpu.alu.leftText.opacity");t&&t.set(0)}catch{}},0)}function GB(){try{const t=Be("cpu.alu.rightText.opacity");t&&t.start({to:1})}catch{}}function KB(){try{const t=Be("cpu.alu.rightText.opacity");t&&t.start({to:0})}catch{}}function Ok(){setTimeout(()=>{try{const t=Be("cpu.alu.rightText.opacity");t&&t.set(0)}catch{}},0)}async function Oi(t,e){return await _e([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function ii(t){return await _e({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}const Cse=Object.freeze(Object.defineProperty({__proto__:null,activateRegister:yt,anim:_e,deactivateRegister:bt,getSettings:gt,hideALULeftText:WB,hideALULeftTextOnInit:Tk,hideALUResultText:VB,hideALUResultTextOnInit:Rk,hideALURightText:KB,hideALURightTextOnInit:Ok,hideControlBusTextsOnInit:Nk,hideReadControlText:Mk,hideWriteControlText:zB,pauseAllAnimations:LB,populateDataBus:af,resumeAllAnimations:BB,showALULeftText:HB,showALUResultText:UB,showALURightText:GB,showReadControlText:Pk,showWriteControlText:FB,stopAllAnimations:LE,turnLineOff:ii,turnLineOn:Oi,updateRegisterWithGlow:tm},Symbol.toStringTag,{value:"Module"}));async function l4(t){switch(t.type){case"bus:io.selected":{await Promise.all([_e({key:"bus.mem.stroke",to:zt.stone[700]},{duration:1,easing:"easeInSine"}),Oi(`bus.${t.chip}`,15)]);return}case"bus:io.error":{iu(t.error);return}case"bus:reset":{await Promise.all([_e([{key:"bus.address.strokeDashoffset",to:1},{key:"bus.data.strokeDashoffset",to:1},{key:"bus.rd.strokeDashoffset",to:1},{key:"bus.wr.strokeDashoffset",to:1}],{duration:1,easing:"easeInSine"}),_e({key:"bus.mem.stroke",to:zt.red[500]},{duration:1,easing:"easeOutSine"}),ii("bus.iom"),ii("bus.handshake"),ii("bus.pio"),ii("bus.pic"),ii("bus.timer")]);return}default:return t}}async function Ese(t){switch(t.type){case"clock:tick":return;default:return t.type}}function zs(t,e,n){let i="";switch(e&&(i="M 455 388 H 550 V 348 H 610"),n&&(i="M 594 249 H 550 V 348 H 610"),t){case"SP":return"M 460 309 H 550 V 348 H 610";case"IP":return"M 460 349 H 610";case"ri":return e||n?i:"";default:throw new Error(`Invalid register ${t}`)}}function Ase({showSP:t,showri:e}){const{path:n,...i}=Be("cpu.internalBus.address"),r=[t?"M 455 309 L 525 309 L 550 348":"","M 400 349 H 550 V 255",e?"M 455 388 L 525 388 L 550 348":"","M 400 349 H 610","M 610 349 H 650","M 390 115 H 250 V 205"];return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-30",children:[r.map((s,o)=>h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:s},o)),h.jsx(Ze.path,{d:n,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i}),h.jsx(Ze.path,{d:n,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}console.log(" generateDataPath importado:",typeof Qi);let bc=null,xc=null,Hi=0,Xt="";function Nse(){return Hi}function Pse(t,e){Hi=t,Xt=e,console.log(` updateInstructionContext: executeStageCounter=${t}, instructionName=${e}`)}let $r="fetching";const zn=(t,e,n,i)=>{console.log(" drawDataPath llamado con:",{from:t,to:e,instruction:n,mode:i});try{console.log(" Antes de llamar generateDataPath"),console.log(" generateDataPath es:",typeof Qi);const r=Qi(t,e,n,i);if(console.log(" Despus de llamar generateDataPath"),console.log(" Ruta generada en drawDataPath:",r),!r)return console.log(" No hay ruta, retornando Promise.resolve()"),Promise.resolve();const s=gt(),o=s.animations?s.executionUnit:1;return console.log(" settings.animations:",s.animations),console.log(" settings.executionUnit:",s.executionUnit),console.log(" Duracin de la animacin:",o),_e([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:o,easing:"easeInOutSine",forceMs:!0})}catch(r){return console.error(" Error en drawDataPath:",r),console.error(" Stack trace:",r instanceof Error?r.stack:"No stack trace"),Promise.resolve()}},Mse=(t,e,n)=>{try{const i=Sse(t,e,n);if(!i)return Promise.resolve();const r=gt(),s=r.animations?r.executionUnit:1;return _e([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:s,easing:"easeInOutSine",forceMs:!0})}catch(i){return console.warn("Error en drawSimultaneousLeftRightPath:",i),Promise.resolve()}},qn=()=>_e({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"}),Rse=async(t,e,n)=>{console.log(" Animacin simultnea detectada: left y right desde",t),$r!=="fetching-operands"&&(console.log(" Esperando fase fetching-operands para animacin simultnea..."),await new Promise(i=>{const r=()=>{$r==="fetching-operands"?i():setTimeout(r,50)};r()}),console.log(" Fase fetching-operands alcanzada, procediendo con animacin simultnea")),await Mse(t,e,n),await Promise.all([yt("cpu.left"),yt("cpu.right")]),N.set(de.left,N.get(de[t])),N.set(de.right,N.get(de[t])),await Promise.all([bt("cpu.left"),bt("cpu.right")]),bc=null,xc=null,await qn()};let he="",Ve="",Hg=null,xn=null,To=null,Li=null,uc=null,dc=null;const Oo=t=>t.replace(/\.(l|h)$/,"");async function c4(){await Promise.all([tm("cpu.MBR"),tm("cpu.IP"),new Promise(t=>{window.dispatchEvent(new CustomEvent("ip-register-update")),t()})])}async function Ik(t){switch(console.log(" CPU Event:",t.type,t),window.VONSIM_PARALLEL_ANIMATIONS&&t.type==="cpu:mar.set"&&window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-read-visual")),t.type){case"cpu:alu.execute":{console.log(" Evento cpu:alu.execute recibido, fase actual:",$r);const e=gt(),r={duration:e.animations?Math.min(e.executionUnit,250):1,easing:"easeInOutSine",forceMs:!0};e.animations&&($r!=="executing"?(console.log(" Esperando fase executing para animacin de la ALU..."),await new Promise(s=>{let o=0;const a=200,l=()=>{console.log(" Verificando fase actual:",$r),o++,$r==="executing"?s():o>=a?(console.warn(" Timeout esperando fase executing, procediendo de todas formas"),s()):setTimeout(l,50)};l()}),console.log(" Fase executing alcanzada, procediendo con animacin de la ALU")):console.log(" Ya estamos en fase executing, procediendo directamente")),await Promise.all([(async()=>{HB(),GB(),await _e([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],r),WB(),KB()})()]),N.set(eE,t.operation),await _e({key:"cpu.alu.operation.backgroundColor",to:zt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await _e({key:"cpu.alu.operation.backgroundColor",to:zt.stone[800]},{duration:1,easing:"easeOutQuart"}),console.log(" Iniciando animacin del bus de resultado..."),await _e([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],r),await Promise.all([yt("cpu.result"),yt("cpu.FLAGS")]),N.set(de.FLAGS,t.flags),N.set(de.result,t.result),await Promise.all([bt("cpu.result"),bt("cpu.FLAGS")]),console.log(" Mostrando texto del resultado despus de actualizar FLAGS..."),e.animations&&(UB(),await new Promise(s=>setTimeout(s,1e3))),await Promise.all([_e({key:"cpu.alu.results.opacity",to:0},{duration:1,easing:"easeInSine"}),(async()=>{VB()})()]),await _e({key:"cpu.alu.operands.opacity",to:0},{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":{bc=null,xc=null,xn=null,To=null,Li=null,uc=null,dc=null,$r="fetching";const{store:e}=await Tp(async()=>{const{store:s}=await Promise.resolve().then(()=>gJ);return{store:s}},void 0),{totalCycleCountAtom:n,currentInstructionCycleCountAtom:i}=await Tp(async()=>{const{totalCycleCountAtom:s,currentInstructionCycleCountAtom:o}=await Promise.resolve().then(()=>xQ);return{totalCycleCountAtom:s,currentInstructionCycleCountAtom:o}},void 0),r=e.get(i);e.set(n,s=>s+r);return}case"cpu:cycle.interrupt":{N.set(Vn,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await _e([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:150,easing:"easeInOutQuad",forceMs:!0});return}case"cpu:cycle.start":{he=t.instruction.name,Ve=t.instruction.willUse.ri?"mem<-imd":"",console.log("[cpu:cycle.start] instructionName:",he,"willUse.ri:",t.instruction.willUse.ri,"mode:",Ve,"position:",t.instruction.position),t.instruction.willUse.ri,t.instruction.willUse.ri,bc=null,xc=null,xn=null,To=null,Li=null,uc=null,dc=null,$r="fetching",E6(t.instruction.position.start),N.set(Vn,{phase:"fetching",metadata:t.instruction}),await _e([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:150,easing:"easeInOutQuad",forceMs:!0});return}case"cpu:cycle.update":{const e=t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":t.next==="halting"?"halting":"fetching";$r=e,console.log(" Fase del ciclo actualizada:",$r),N.set(Vn,n=>"metadata"in n?{...n,phase:e}:n);return}case"cpu:decode":{_e([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:150,easing:"easeInOutSine",forceMs:!0}),_e([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:150,easing:"easeInOutSine",forceMs:!0}),_e([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:80,easing:"easeInSine",forceMs:!0});return}case"cpu:error":{N.set(Vn,{phase:"stopped",error:t.error}),iu(t.error);return}case"cpu:halt":case"cpu:int.0":{if(t.type==="cpu:halt"){const e=N.get(Vn);"metadata"in e&&(N.set(Vn,{phase:"halting",metadata:e.metadata}),await new Promise(n=>setTimeout(n,1e3)))}N.set(Vn,{phase:"stopped"}),iu();return}case"cpu:int.6":{N.set(Vn,{phase:"int6"});return}case"cpu:int.7":{N.set(Vn,{phase:"int7"});return}case"cpu:inta.off":{await ii("bus.inta");return}case"cpu:inta.on":{await Oi("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-write-visual")),await Oi(`bus.${e}`,10);return}case"cpu:iom.on":{await Oi("bus.iom",15);return}case"cpu:mar.set":{const e=Oo(t.register),n=e==="MBR";if(e==="IP")if(console.log(" Detectando transferencia IPMAR para animacin simultnea"),Li={instruction:he,mode:Ve},console.log(` Guardando pendingIPtoMARFromRegCopy desde cpu:mar.set: ${he}, ${Ve}`),xn&&xn.instruction===he||To&&To.instruction===he){if(xn&&xn.instruction===he)console.log(" Ejecutando animaciones simultneas para MBRID + IPMAR desde cpu:mar.set"),await Promise.all([zn("MBR","id",xn.instruction,xn.mode),(async()=>{const l=gt(),u=l.animations?Math.min(l.executionUnit,250):1;return _e([{key:"cpu.internalBus.address.path",from:zs("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:u,easing:"easeInOutSine",forceMs:!0})})()]),N.set(de.id,N.get(Ai)),N.set(ki,N.get(de.IP)),await Promise.all([yt("cpu.id"),yt("cpu.MAR")]),await Promise.all([bt("cpu.id"),bt("cpu.MAR")]),await Promise.all([qn(),_e({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),xn=null,Li=null;else if(To&&To.instruction===he){console.log(" Ejecutando animacin simultnea de buses para MBRRI + IPMAR (directo-inmediato)"),await Promise.all([(async()=>{const l=gt(),u=l.animations?Math.min(l.executionUnit,250):1;return _e([{key:"cpu.internalBus.address.path",from:zs("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:u,easing:"easeInOutSine",forceMs:!0})})(),zn("MBR","ri",he,To.mode)]),N.set(de.ri,N.get(Ai)),N.set(ki,N.get(de.IP)),await Promise.all([yt("cpu.ri"),yt("cpu.MAR")]),await Promise.all([bt("cpu.ri"),bt("cpu.MAR")]),await Promise.all([qn(),_e({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),To=null,Li=null;return}return}else{console.log(" Ejecutando animacin IPMAR normal (sin transferencia simultnea)");{const l=gt(),u=l.animations?Math.min(l.executionUnit,250):1;await _e([{key:"cpu.internalBus.address.path",from:zs("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:u,easing:"easeInOutSine",forceMs:!0})}await yt("cpu.MAR",zt.blue[500]),N.set(ki,N.get(de.IP)),await Promise.all([bt("cpu.MAR"),_e({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),Li=null;return}const i=e==="ri"&&(Xt==="ADD"||Xt==="SUB"||Xt==="CMP")&&Hi>=5,r=e==="ri"&&(Xt==="ADD"||Xt==="SUB"||Xt==="CMP"||Xt==="AND"||Xt==="OR"||Xt==="XOR")&&!i&&(Hi>=5||Hi===4&&he===Xt);if(console.log(" isRiToMARSimultaneous Debug:",{regNorm:e,currentInstructionName:Xt,currentExecuteStageCounter:Hi,isRiToMARSimultaneous:i,isRiToMARSkipAnimation:r,mode:Ve,instructionName:he}),i&&!r)if(console.log(` Detectando transferencia riMAR para animacin simultnea (paso 8) - ${Xt}`),uc={instruction:he,mode:Ve},dc&&dc.instruction===he){console.log(" Ejecutando animaciones simultneas para riMAR + MBRid (paso 8)"),await Promise.all([_e([{key:"cpu.internalBus.address.path",from:zs("ri",!0,!1)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0}),zn("MBR","id",he,Ve)]),N.set(ki,N.get(de.ri)),N.set(de.id,N.get(Ai)),await Promise.all([yt("cpu.MAR"),yt("cpu.id")]),await Promise.all([bt("cpu.MAR"),bt("cpu.id")]),await Promise.all([_e({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),qn()]),uc=null,dc=null;return}else{N.set(ki,N.get(de.ri));return}if(e==="ri"&&(Xt==="ADD"||Xt==="SUB"||Xt==="CMP"||Xt==="AND"||Xt==="OR"||Xt==="XOR")&&Hi===4&&Ve==="mem<-imd"){console.log(` Caso especial detectado: ${Xt} [BL], n - paso 6`),console.log(" Ejecutando animaciones simultneas: BL  MAR + MBR  ID");const l=gt(),u=l.animations?Math.min(l.executionUnit,250):1;console.log(" Iniciando animacin del bus de direcciones BL  MAR"),console.log(" Iniciando animacin del bus de datos MBR  ID"),await Promise.all([(async()=>{console.log(" Generando path para BL  MAR usando ri");const d=zs("ri");return console.log(" Path generado para BL  MAR:",d),_e([{key:"cpu.internalBus.address.path",from:d},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:u,easing:"easeInOutSine"})})(),(async()=>(console.log(" Ejecutando animacin MBR  ID"),zn("MBR","id",he,Ve)))()]),console.log(" Ambas animaciones completadas, actualizando registros"),N.set(ki,N.get(de.ri)),N.set(de.id,N.get(Ai)),await Promise.all([yt("cpu.MAR"),yt("cpu.id")]),await Promise.all([bt("cpu.MAR"),bt("cpu.id")]),console.log(" Reseteando animaciones de bus"),await Promise.all([_e({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),qn()]),console.log(" Animaciones simultneas completadas para paso 6");return}const o=n?t1():zs(e);if(console.log("[cpu:mar.set] event.register:",t.register,"| Animacin especial:",n,"| regNorm:",e,"| mode:",Ve,"| instructionName:",he,"| isRiToMARSkipAnimation:",r),!(e==="IP"&&Ve==="mem<-imd")&&!(e==="ri"&&r)&&!(e==="ri"&&i)&&!(e==="ri"&&(he==="MOV"||he==="ADD"||he==="SUB"||he==="CMP")&&Ve!=="mem<-imd")?(await _e([{key:"cpu.internalBus.address.path",from:o},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0}),await yt("cpu.MAR",zt.blue[500]),N.set(ki,N.get(de[e]))):e==="ri"&&(r||i)&&(console.log(r?" Animacin de bus y registro MAR omitida para ri  MAR en etapa avanzada":" Animacin de bus y registro MAR diferida para ri  MAR simultneo"),i||(N.set(ki,N.get(de[e])),await yt("cpu.MAR",zt.blue[500]),await bt("cpu.MAR"))),e==="ri"&&!r){if(console.log("[cpu:mar.set] ri detectado, mode:",Ve,"instructionName:",he),(he==="MOV"||he==="ADD"||he==="SUB"||he==="CMP")&&Ve!=="mem<-imd"){N.set(ki,N.get(de.ri)),await yt("cpu.MAR",zt.blue[500]),await bt("cpu.MAR"),Hg=null;return}if(Ve==="mem<-imd"){console.log(" Animando bus especial: ri  MAR (modo mem<-imd)",{instructionName:he,mode:Ve}),console.log(" Llamando drawDataPath con:",{from:"ri",to:"MAR",instructionName:he,mode:Ve});const l=await zn("ri","MAR",he,Ve);console.log(" Ruta generada para ri  MAR:",l),await qn()}else console.log(" No es modo mem<-imd, usando lgica alternativa"),await zn(Oo(Hg||"BL"),"MAR",he,Ve),await qn();Hg=null}else e==="IP"&&Ve==="mem<-imd"?(Li={instruction:he,mode:Ve},console.log(" Marcando animacin IP  MAR como pendiente desde cpu:mar.set")):n||(await zn(e,"MAR",he,Ve),await qn());!(e==="IP"&&Ve==="mem<-imd")&&!(e==="ri"&&r)&&!(e==="ri"&&i)?await Promise.all([bt("cpu.MAR"),_e({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]):e==="ri"&&(r||i)&&console.log(r?" Desactivacin de registro MAR omitida para ri  MAR en etapa avanzada":" Desactivacin de registro MAR diferida para ri  MAR simultneo");return}case"cpu:mbr.get":{const e=Oo(t.register);console.log(" cpu:mbr.get - evento recibido:",{register:t.register,normalizedRegister:e,instructionName:he,mode:Ve}),e==="IP"&&(window.__nextTransferMBRtoIP=!0);const i=["ADD","SUB","AND","OR","XOR","CMP"].some(s=>he.startsWith(s));let r=!1;if((e==="MAR"||e.startsWith("MAR."))&&!["ADD","SUB","CMP"].some(a=>he.startsWith(a))){const a=N.get(de.IP),l=N.get(Ai);a===l&&(r=!0)}if(e==="IR")await zn("MBR","IR",he,Ve);else if((e==="MAR"||e.startsWith("MAR."))&&!r){console.log("Animando bus de direcciones (azul): MBR  MAR en mbr.get",{instructionName:he,mode:Ve});const s=gt(),o=s.animations?s.executionUnit:1;await _e([{key:"cpu.internalBus.address.path",from:t1()},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:o,easing:"easeInOutSine",forceMs:!0})}else if(["AL","BL","CL","DL","ri","id"].includes(e)){const o=["ADD","SUB","CMP"].some(a=>he.startsWith(a));if(e==="ri"&&Ve==="mem<-imd")he.startsWith("MOV")||he.startsWith("ADD")||he.startsWith("SUB")||he.startsWith("CMP")||he.startsWith("AND")||he.startsWith("OR")||he.startsWith("XOR")?(To={instruction:he,mode:Ve,destination:"ri"},console.log(" Marcando animacin MBR  ri como pendiente para animacin simultnea")):(xn={instruction:he,mode:Ve,destination:"ri"},console.log(" Marcando animacin MBR  ri como pendiente para animacin simultnea (sistema existente)"));else if(e==="id"){const a=(Xt==="ADD"||Xt==="SUB"||Xt==="CMP")&&Hi>=5;if(console.log(" isStep8Simultaneous Debug:",{normalizedRegister:e,currentInstructionName:Xt,currentExecuteStageCounter:Hi,isStep8Simultaneous:a,mode:Ve,instructionName:he}),a)if(console.log(` Detectando transferencia MBRid para animacin simultnea (paso 8) - ${Xt}`),dc={instruction:he,mode:Ve},uc&&uc.instruction===he){console.log(" Ejecutando animaciones simultneas para riMAR + MBRid (paso 8)"),await Promise.all([_e([{key:"cpu.internalBus.address.path",from:zs("ri",!0,!1)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0}),zn("MBR","id",he,Ve)]),N.set(ki,N.get(de.ri)),N.set(de.id,N.get(Ai)),await Promise.all([yt("cpu.MAR"),yt("cpu.id")]),await Promise.all([bt("cpu.MAR"),bt("cpu.id")]),await Promise.all([_e({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),qn()]),uc=null,dc=null;return}else{N.set(de.id,N.get(Ai));return}else if(console.log(" Detectando transferencia MBRID para animacin simultnea"),xn={instruction:he,mode:Ve,destination:"id"},console.log(` Guardando pendingMBRtoID desde cpu:mbr.get: ${he}, ${Ve}`),Li&&Li.instruction===he){console.log(" Ejecutando animaciones simultneas para MBRID + IPMAR desde cpu:mbr.get"),await Promise.all([zn("MBR","id",xn.instruction,xn.mode),(async()=>{const l=gt(),u=l.animations?Math.min(l.executionUnit,250):1;return _e([{key:"cpu.internalBus.address.path",from:zs("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:u,easing:"easeInOutSine",forceMs:!0})})()]),N.set(de.id,N.get(Ai)),N.set(ki,N.get(de.IP)),await Promise.all([yt("cpu.id"),yt("cpu.MAR")]),await Promise.all([bt("cpu.id"),bt("cpu.MAR")]),await Promise.all([qn(),_e({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),xn=null,Li=null;return}else{N.set(de.id,N.get(Ai));return}}else(!i||o)&&(e==="ri"&&Ve!=="mem<-imd"&&(he==="MOV"||he==="ADD"||he==="SUB"||he==="CMP")?(console.log(" Animacin de direcciones (mbr.get directo): MBR  MAR (bus azul)"),await _e([{key:"cpu.internalBus.address.path",from:t1()},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0}),await _e({key:"cpu.internalBus.address.opacity",to:0},{duration:100,easing:"easeInSine",forceMs:!0}),console.log(" Omitiendo animacin de datos MBR  ri en direccionamiento directo (mbr.get)")):e==="ri"&&Ve!=="mem<-imd"?console.log(" Omitiendo animacin MBR  ri para direccionamiento directo"):await zn("MBR",e,he,Ve))}if(e==="ri"&&Ve==="mem<-imd"||N.set(de[t.register],N.get(Ai)),e==="IR"?await tm(`cpu.${e}`):e==="IP"||e==="ri"&&Ve==="mem<-imd"||(await yt(`cpu.${e}`),await bt(`cpu.${e}`)),e==="ri"&&Ve==="mem<-imd"||await qn(),$r==="fetching-operands"&&e!=="IR"){const s=he&&(he==="MOV"||he==="ADD"||he==="SUB"||he==="CMP"||he==="AND"||he==="OR"||he==="XOR");(s&&e==="MBR"||!s&&e!=="MBR")&&($r="fetching-operands-completed",console.log(" Fase 'fetch-operands' completada al escribir en",e),N.set(Vn,a=>"metadata"in a?{...a,phase:"fetching-operands-completed"}:a))}return}case"cpu:mbr.set":{const e=Oo(t.register);if(he==="MOV"&&["AL","BL","CL","DL","AH","BH","CH","DH"].includes(e)&&Hi===5){console.log(` cpu:mbr.set: Registrando paso 7 para ${he} [memoria], ${e}`),console.log(` Estado antes: executeStageCounter=${Hi}, register=${t.register}`),Hi++,console.log(` Execute Stage Counter incrementado a: ${Hi} (Paso 7)`);const i=N.get(an);console.log(" Estado de simulacin:",i),i.type==="running"&&i.until==="cycle-change"&&(console.log(" Pausando simulacin despus del paso 7 (cpu:mbr.set) - ejecucin por ciclo"),setTimeout(()=>{tn()},100))}else console.log(` No se activ contabilizacin paso 7: instructionName=${he}, register=${e}, executeStageCounter=${Hi}`);if(e==="IP")await c4();else{const i=t.register.replace(/\.(l|h)$/,"");console.log(` Animacin MBR.set: ${i}  MBR para ${he}`),console.log(` Event.register original: ${t.register}`),console.log(` Normalized source: ${i}`),await zn(i,"MBR",he,Ve),N.set(Ai,N.get(de[t.register])),await qn()}return}case"cpu:register.copy":{const e=Oo(t.src),n=Oo(t.dest);if(console.log(` cpu:register.copy: ${t.src}  ${t.dest} (normalizado: ${e}  ${n})`),(n==="left"||n==="right")&&(he==="ADD"&&Ve==="mem<-imd")){if(console.log(` Detectando preparacin de operando ALU: ${e}  ${n} para ${he}`),e==="ri"&&n==="right"){console.log(" Animacin ALU: Valor inmediato (ri)  operando derecho ALU"),await Promise.all([zn("ri","right",he,Ve),_e([{key:"cpu.internalBus.address.path",from:zs("ri")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0})]),N.set(de.right,N.get(de[e])),await Promise.all([yt("cpu.right"),yt("cpu.MAR")]),await Promise.all([bt("cpu.right"),bt("cpu.MAR")]),await Promise.all([qn(),_e({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}else if(e==="id"&&n==="left"){console.log(" Animacin ALU: Valor de memoria (id)  operando izquierdo ALU"),await Promise.all([zn("id","left",he,Ve),zn("MBR","id",he,Ve)]),N.set(de.left,N.get(de[e])),await Promise.all([yt("cpu.left"),yt("cpu.id")]),await Promise.all([bt("cpu.left"),bt("cpu.id")]),await qn();return}}if(n==="left"||n==="right"){const r={from:e,instruction:he,mode:Ve};if(n==="left"?bc=r:n==="right"&&(xc=r),bc&&xc&&bc.from===xc.from&&bc.instruction===xc.instruction){await Rse(e,he,Ve);return}n==="left"?N.set(de.left,N.get(de[e])):N.set(de.right,N.get(de[e]));return}if(e==="MBR"&&(n==="id"||n==="ri")||e==="IP"&&n==="MAR"){if(console.log(` Detectando transferencia para animacin simultnea: ${e}  ${n}`),e==="MBR"&&(n==="id"||n==="ri")?(xn={instruction:he,mode:Ve,destination:n},console.log(` Guardando pendingMBRtoID: ${he}, ${Ve}, destino: ${n}`)):e==="IP"&&n==="MAR"&&(Li={instruction:he,mode:Ve},console.log(` Guardando pendingIPtoMARFromRegCopy: ${he}, ${Ve}`)),xn&&Li&&xn.instruction===Li.instruction){const r=xn.destination;console.log(` Ejecutando animaciones simultneas para MBR${r} + IPMAR`),await Promise.all([zn("MBR",r,xn.instruction,xn.mode),(async()=>{const o=gt(),l=o.animations?Math.min(o.executionUnit,250):1;return _e([{key:"cpu.internalBus.address.path",from:zs("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:l,easing:"easeInOutSine",forceMs:!0})})(),_e({key:"cpu.alu.cog.rot",to:6},{duration:3,easing:"easeInOutCubic"})]),r==="id"?N.set(de.id,N.get(de.MBR)):r==="ri"&&N.set(de.ri,N.get(de.MBR)),N.set(ki,N.get(de.IP));const s=r==="id"?"cpu.id":"cpu.ri";await Promise.all([yt(s),yt("cpu.MAR")]),await Promise.all([bt(s),bt("cpu.MAR")]),await Promise.all([qn(),_e({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),_e({key:"cpu.alu.cog.rot",to:0},{duration:1,easing:"easeInOutSine"})]),xn=null,Li=null;return}e==="MBR"&&n==="id"?N.set(de.id,N.get(de.MBR)):e==="MBR"&&n==="ri"?N.set(de.ri,N.get(de.MBR)):e==="IP"&&n==="MAR"&&N.set(ki,N.get(de.IP));return}e==="ri"&&n==="IP"?console.log("  Saltando animacin para transferencia ri  IP"):(console.log(` Ejecutando drawDataPath para transferencia normal: ${e}  ${n}`),await zn(e,n,he,Ve)),await yt(`cpu.${n}`),N.set(de[n],N.get(de[e])),await bt(`cpu.${n}`),await qn();return}case"cpu:register.update":{const[e]=j2(t.register),n=Oo(e);n==="IP"||n==="MBR"?await c4():await tm(n==="ri"?"cpu.ri":`cpu.${n}`),N.set(de[n],t.value);return}case"cpu:register.buscopy":{const e=Oo(t.src),n=Oo(t.dest);n==="ri"&&(Hg=e),e==="ri"&&n.toLowerCase()==="mar"||e==="ri"&&n==="IP"||(await zn(e,n,he,Ve),await new Promise(i=>setTimeout(i,150))),N.set(de[n],N.get(de[e])),await yt(`cpu.${n}`),await bt(`cpu.${n}`),n!=="ri"&&await qn();return}default:return t}}const Tse=Object.freeze(Object.defineProperty({__proto__:null,getCurrentExecuteStageCounter:Nse,handleCPUEvent:Ik,updateInstructionContext:Pse},Symbol.toStringTag,{value:"Module"}));async function Ose(t){switch(t.type){case"f10:press":await Oi("bus.int0",2),await ii("bus.int0");return;default:return t.type}}const BE=fe(V.zero(8)),$E=fe(V.zero(8));function Ise(t){t.io.handshake&&(N.set(BE,V.fromUnsigned(t.io.handshake.DATA,8)),N.set($E,V.fromUnsigned(t.io.handshake.STATE,8)))}async function Dse(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await af(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await yt(`handshake.${t.register}`),t.register){case"DATA":{N.set(BE,t.value);break}case"STATE":{N.set($E,t.value);break}default:return t.register}await bt(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await ii("bus.int2");return}case"handshake:int.on":{await Oi("bus.int2",10);return}default:return t}}async function jse(t){switch(t.type){case"keyboard:listen-key":{N.set(an,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{N.sub(an,()=>{const n=N.get(an);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const FE=fe(V.zero(8));function Lse(t){t.io.leds!==null&&N.set(FE,V.fromUnsigned(t.io.leds,8))}async function Bse(t){switch(t.type){case"leds:update":{await Oi("bus.pio->leds",2),N.set(FE,t.state),await ii("bus.pio->leds");return}default:return t.type}}const yy=fe(!1),by=fe(!1);function $se(t){return t==="memory-to-mbr"?"M 800 249 L 645 249 L 645 222 L 615 222 L 615 233":"M 615 274 L 615 285 L 645 285 L 645 249 L 800 249"}const u4=(t,e)=>{try{const n=$se(t);if(!n)return console.warn(" No se gener path para drawExternalDataPath"),Promise.resolve();const i=gt(),s=Math.min(i.executionUnit,250),o=e??(i.animations?s:1);return _e([{key:"bus.data.path",from:n},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:o,easing:"easeInOutSine",forceMs:!0})}catch(n){return console.warn("Error en drawExternalDataPath:",n),Promise.resolve()}},d4=()=>_e({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function Fse(){return"M 635 349 H 800"}const n1=t=>{try{const e=Fse(),n=gt(),r=Math.min(n.executionUnit,250),s=t??(n.animations?r:1);return _e([{key:"bus.address.path",from:e},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:s,easing:"easeInOutSine",forceMs:!0})}catch(e){return console.warn("Error en drawExternalAddressPath:",e),Promise.resolve()}},i1=()=>_e({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),f4=t=>{try{const e="M 380 420 H 800",n=gt(),r=Math.min(n.executionUnit,250),s=t??(n.animations?r:1);return _e([{key:"bus.rd.path",from:e},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:s,easing:"easeInOutSine",forceMs:!0})}catch(e){return console.warn("Error en drawRDControlPath:",e),Promise.resolve()}},zse=t=>{try{const e="M 380 440 H 800",n=gt(),r=Math.min(n.executionUnit,250),s=t??(n.animations?r:1);return _e([{key:"bus.wr.path",from:e},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:s,easing:"easeInOutSine",forceMs:!0})}catch(e){return console.warn("Error en drawWRControlPath:",e),Promise.resolve()}},h4=()=>_e({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),p4=()=>_e({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function m4(t){switch(typeof window<"u"&&window.VONSIM_PARALLEL_ANIMATIONS&&window.addEventListener("vonsim:parallel-memory-read-visual",()=>{N.set(yy,!0),_e([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{_e([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),Promise.all([n1(),(async()=>{Pk(),await f4(),Mk()})()])}),t.type){case"memory:read":{window.VONSIM_PARALLEL_ANIMATIONS||(N.set(yy,!0),_e([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{_e([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),await Promise.all([n1(),(async()=>{Pk(),await f4(),Mk()})()]),await i1());return}case"memory:read.ok":{N.set(Dp,Ne.from(t.address)),await _e({key:"memory.operating-cell.color",to:zt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await u4("memory-to-mbr"),N.set(Ai,t.value),await Promise.all([_e({key:"memory.operating-cell.color",to:zt.white},{duration:1,easing:"easeOutQuart"}),d4(),i1(),h4(),p4()]);return}case"memory:write":{N.set(by,!0),FB(),await Promise.all([n1(),zse()]),zB(),N.set(by,!1);return}case"memory:write.ok":{N.set(Dp,Ne.from(t.address)),await yt("cpu.MBR"),await u4("mbr-to-memory"),await _e({key:"memory.operating-cell.color",to:zt.mantis[400]},{duration:1,easing:"easeOutQuart"}),N.set(ny,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([bt("cpu.MBR"),_e({key:"memory.operating-cell.color",to:zt.white},{duration:1,easing:"easeOutQuart"}),d4(),i1(),h4(),p4()]);return}case"memory:read.error":case"memory:write.error":{iu(t.error);return}case"memory:write.warning":{ioe("Advertencia de Memoria",`${t.warning}`);return}default:return t}}const zE=fe(V.fromUnsigned(255,8)),UE=fe(V.fromUnsigned(0,8)),VE=fe(V.fromUnsigned(0,8)),xy=[fe(V.zero(8)),fe(V.zero(8)),fe(V.zero(8)),fe(V.zero(8)),fe(V.zero(8)),fe(V.zero(8)),fe(V.zero(8)),fe(V.zero(8))];function Use(t){if(t.io.pic){N.set(zE,V.fromUnsigned(t.io.pic.IMR,8)),N.set(UE,V.fromUnsigned(t.io.pic.IRR,8)),N.set(VE,V.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<xy.length;e++)N.set(xy[e],V.fromUnsigned(t.io.pic.lines[e],8))}}async function Vse(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await af(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await yt(`pic.${t.register}`),t.register){case"IMR":{N.set(zE,t.value);break}case"IRR":{N.set(UE,t.value);break}case"ISR":{N.set(VE,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));N.set(xy[e],t.value);break}default:return t}await bt(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await ii("bus.intr");return}case"pic:intr.on":{await Oi("bus.intr",10);return}case"pic:int.send":{await af(t.number);return}default:return t}}const HE=fe(V.zero(8)),WE=fe(V.zero(8)),GE=fe(V.zero(8)),KE=fe(V.zero(8));function Hse(t){t.io.pio&&(N.set(HE,V.fromUnsigned(t.io.pio.PA,8)),N.set(WE,V.fromUnsigned(t.io.pio.PB,8)),N.set(GE,V.fromUnsigned(t.io.pio.CA,8)),N.set(KE,V.fromUnsigned(t.io.pio.CB,8)))}async function Wse(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await af(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await yt(`pio.${t.register}`),t.register){case"PA":{N.set(HE,t.value);break}case"PB":{N.set(WE,t.value);break}case"CA":{N.set(GE,t.value);break}case"CB":{N.set(KE,t.value);break}default:return t.register}await bt(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const wy=fe([]),Sy=fe("");function Gse(t){t.io.printer&&(N.set(wy,t.io.printer.buffer.map(e=>V.fromUnsigned(e,8))),N.set(Sy,t.io.printer.paper))}async function Kse(t){switch(t.type){case"printer:buffer.add":{N.set(wy,e=>[...e,t.char]);return}case"printer:buffer.pop":{N.set(wy,e=>e.slice(1));return}case"printer:busy.off":{await ii("bus.printer.busy");return}case"printer:busy.on":{await Oi("bus.printer.busy",15);return}case"printer:data.read":{await Oi("bus.printer.data",15),await ii("bus.printer.data");return}case"printer:paper.print":{N.set(Sy,e=>e+t.char);return}case"printer:paper.replace":{N.set(Sy,"");return}case"printer:strobe.off":{await ii("bus.printer.strobe");return}case"printer:strobe.on":{await Oi("bus.printer.strobe",15);return}default:return t}}const XE=fe("");function Xse(t){"screen"in t.io&&t.io.screen!==null&&N.set(XE,t.io.screen)}async function qse(t){switch(t.type){case"screen:send-char":{N.set(XE,t.output);return}default:return t.type}}const Yb=fe(V.zero(8));function Yse(t){t.io.switches!==null&&N.set(Yb,V.fromUnsigned(t.io.switches,8))}async function Jse(t){switch(t.type){case"switches:toggle":{N.set(Yb,e=>e.withBit(t.index,!e.bit(t.index))),await Oi("bus.switches->pio",2),await ii("bus.switches->pio");return}default:return t}}const ky=fe(V.zero(8)),qE=fe(V.zero(8));function Zse(t){t.io.timer&&(N.set(ky,V.fromUnsigned(t.io.timer.CONT,8)),N.set(qE,V.fromUnsigned(t.io.timer.COMP,8)))}async function Qse(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await af(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await yt(`timer.${t.register}`),t.register){case"CONT":{N.set(ky,t.value);break}case"COMP":{N.set(qE,t.value);break}default:return t.register}await bt(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await ii("bus.int1");return}case"timer:int.on":{await Oi("bus.int1",10);return}case"timer:tick":{N.set(ky,t.cont),await Oi("bus.int1",2),await ii("bus.int1");return}default:return t}}const Dk=new Set;async function r1(t){N.get(tl).canAnimate||await new Promise(n=>{const i=N.sub(tl,()=>{N.get(tl).canAnimate&&(i(),n())})}),await t()}async function XB(t){toe(t);const[e]=t.type.split(":",2);Dk.add(t.type);const i=["cpu:mar.set","cpu:register.update","cpu:mbr.get","cpu:mbr.set","cpu:register.buscopy","cpu:register.copy","memory:read","memory:write"].includes(t.type);try{switch(e){case"bus":{i?await r1(()=>l4(t)):await l4(t);break}case"clock":{await Ese(t);break}case"cpu":{i?await r1(()=>Ik(t)):await Ik(t);break}case"f10":{await Ose(t);break}case"handshake":{await Dse(t);break}case"keyboard":{await jse(t);break}case"leds":{await Bse(t);break}case"memory":{i?await r1(()=>m4(t)):await m4(t);break}case"pic":{await Vse(t);break}case"pio":{await Wse(t);break}case"printer":{await Kse(t);break}case"screen":{await qse(t);break}case"switches":{await Jse(t);break}case"timer":{await Qse(t);break}default:return e}}finally{Dk.delete(t.type)}}function g4(...t){for(const e of t)if(Dk.has(e))return!0;return!1}const eoe={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function toe(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${eoe[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof V?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Ne?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof Tr?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const Cn=new yQ,an=fe({type:"stopped"});let nu=null;try{window.VonSimAddNotification&&(nu=window.VonSimAddNotification)}catch{}function YE(t,e=10){window.VonSimAddNotification?window.VonSimAddNotification(t):e>0&&setTimeout(()=>YE(t,e-1),100)}function noe(t){const e=t.translate(gt().language);Pi({title:e,variant:"error"}),nu?nu({type:"error",title:"Error de simulacin",message:e}):YE({type:"error",title:"Error de simulacin",message:e})}function ioe(t,e){Pi({title:t,description:e,variant:"info"}),nu&&nu({type:"warning",title:t,message:e})}function iu(t){if(t&&(noe(t),t.code==="no-instruction")){N.set(an,{type:"paused"});return}bne(),E6(null),mne(!1),N.set(an,{type:"stopped",error:t}),N.set(Vn,{phase:"stopped",error:t}),LE()}function tn(){N.set(an,{type:"paused"}),LB()}function roe(){const t=Nb(gt().language,"messages.assemble-error");Pi({title:t,variant:"error"}),nu?nu({type:"error",title:"Error de ensamblado",message:t}):YE({type:"error",title:"Error de ensamblado",message:t})}function ku(){Pi({title:Nb(gt().language,"messages.invalid-action"),variant:"error"})}function v4(t,e=!1){JL(t,e),kQ(t,e),Ise(t),Use(t),Hse(t),Zse(t),Lse(t),Gse(t),Xse(t),Yse(t),ft=0,ea=0,Br=0,ye=0,N.set(Qd,ft),N.set(ef,ea),N.set(ct,""),e&&N.set(Ga,[]),N.set(Ip,0)}let R=null,Br=0,ye=0,It="",_u=!0,rt=!1,Ge=!1,ue=[],ft=0,Ke=0,ea=0,Cu="",y4="",b4="",Us=!1,Wg=!1,Gg="",qB="",fc=!1,hc="",s1=!1,Jf=!1,Kg=!1;function soe(t){return t.modeId&&t.modeRi?"directo-inmediato":t.modeId?"inmediato":t.modeRi?"directo":"registro"}function Xg(t){if(t.length!==2)return!1;const[e,n]=t,i=/^[A-D][LH]$/.test(e)||/^[A-D]X$/.test(e),r=n.startsWith("[")&&n.endsWith("]");return i&&r}function ooe(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return n==="MOV"&&i&&r?aoe(t,s):n==="MOV"&&r&&!i?loe(t,s):n==="MOV"&&i&&!r?coe(t):n==="INT"?doe(t,s,r):n==="CALL"?foe(t):["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&r&&!i?uoe(t,s):["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&t==="ri"?s===5?{message:"",shouldDisplay:!1,shouldPause:!1}:{message:"Ejecucin: MAR  MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecucin: MAR  ${t}`,shouldDisplay:!0,shouldPause:!0}}function aoe(t,e){switch(e){case 2:return{message:"Ejecucin: MAR  IP",shouldDisplay:!0,shouldPause:!0};case 4:return{message:"Ejecucin: ri  MBR; MAR  IP",shouldDisplay:!0,shouldPause:!0};case 5:return{message:"Ejecucin: MAR  IP | ri  MBR",shouldDisplay:!0,shouldPause:!0};default:return{message:`Ejecucin: MAR  ${t}`,shouldDisplay:!0,shouldPause:!0}}}function loe(t,e){return e===2?{message:"Ejecucin: MAR  IP",shouldDisplay:!0,shouldPause:!0}:e===4&&t==="ri"?{message:"Ejecucin: MAR  MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecucin: MAR  ${t}`,shouldDisplay:!0,shouldPause:!0}}function coe(t){return t==="ri"?{message:"Ejecucin: MAR  MBR",shouldDisplay:!0,shouldPause:!0}:t==="IP"?{message:"Ejecucin: MAR  IP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecucin: MAR  ${t}`,shouldDisplay:!0,shouldPause:!0}}function uoe(t,e){return e===2?{message:"Ejecucin: MAR  IP",shouldDisplay:!0,shouldPause:!0}:e===4&&t==="ri"?{message:"Ejecucin: MAR  MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecucin: MAR  ${t}`,shouldDisplay:!0,shouldPause:!0}}function doe(t,e,n){return e===2&&n?{message:"Ejecucin: ri  MBR; MAR  SP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecucin: MAR  ${t}`,shouldDisplay:!0,shouldPause:!0}}function foe(t){return{message:`Ejecucin: MAR  ${t}`,shouldDisplay:!0,shouldPause:!0}}function hoe(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return t==="SP"?poe(n,s,r):t==="FLAGS"?moe(n,s,r):n==="INT"?goe(t):n==="MOV"&&i&&r&&ue&&ue.length===2&&/^\[[A-Z]{2}\]$/i.test(ue[0])&&/^[0-9A-F]+h?$/i.test(ue[1])&&(s===4||s===5)?{message:"",shouldDisplay:!1,shouldPause:!1}:n==="MOV"&&i&&r?voe():n==="MOV"&&r&&!i?yoe():["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&r&&!i?boe():n==="CALL"?xoe(t):t==="IP"&&r&&!i&&s===3?{message:"Ejecucin: MBR  read(Memoria[MAR]) | IP  IP + 1",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecucin: MBR  ${t}`,shouldDisplay:!0,shouldPause:!0}}function poe(t,e,n){if(n&&e===4&&t==="INT")return{message:"",shouldDisplay:!1,shouldPause:!1};switch(t){case"PUSH":return{message:"Ejecucin: SP = SP - 1",shouldDisplay:!0,shouldPause:!0};case"RET":case"IRET":return{message:"Ejecucin: SP = SP + 1",shouldDisplay:!0,shouldPause:!0};case"POP":if(e===3)return{message:`${qB}; SP = SP + 1`,shouldDisplay:!0,shouldPause:!0};break}return{message:"",shouldDisplay:!1,shouldPause:!1}}function moe(t,e,n){return n&&e===5&&t==="INT"?{message:"Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1; IF = 0",shouldDisplay:!0,shouldPause:!0}:{message:"Ejecucin: IF = 0",shouldDisplay:!0,shouldPause:!0}}function goe(t){switch(t){case"DL":return{message:"Interrupcin: AL  ASCII",shouldDisplay:!0,shouldPause:!0};case"right.l":return{message:"Interrupcin: SUB AL, 1",shouldDisplay:!0,shouldPause:!0};case"right":return{message:"Interrupcin: ADD BL, 1",shouldDisplay:!0,shouldPause:!0};case"ri.l":return{message:"Interrupcin: MAR  (video)",shouldDisplay:!1,shouldPause:!0}}return{message:`Ejecucin: MBR  ${t}`,shouldDisplay:!0,shouldPause:!0}}function voe(){return R==="MOV"&&ue&&ue.length===2&&/^\[[A-Z]{2}\]$/i.test(ue[0])&&/^[0-9A-F]+h?$/i.test(ue[1])&&(ye===4||ye===5)?{message:"",shouldDisplay:!1,shouldPause:!1}:{message:"Ejecucin: MBR  read(Memoria[MAR]) | IP  IP + 1",shouldDisplay:!0,shouldPause:!0}}function yoe(){return{message:"Ejecucin: MBR  read(Memoria[MAR]) | IP  IP + 1",shouldDisplay:!0,shouldPause:!0}}function boe(){return{message:"Ejecucin: MBR  read(Memoria[MAR]) | IP  IP + 1",shouldDisplay:!0,shouldPause:!0}}function xoe(t){return{message:`Ejecucin: MBR  ${t}`,shouldDisplay:!0,shouldPause:!0}}function x4(){return{name:R||"",modeId:rt,modeRi:Ge,executeStage:ye,cycleCount:Ke}}function w4(t,e,n,i){const r=soe(n);console.log(` [${t}] Registro: ${e}`),console.log(`   Instruccin: ${n.name}`),console.log(`   Modo de direccionamiento: ${r}`),console.log(`   Etapa de ejecucin: ${n.executeStage}`),console.log(`   Ciclo: ${n.cycleCount}`),console.log(`   Mensaje: ${i.message}`),console.log(`   Mostrar: ${i.shouldDisplay}`),console.log(`   Pausar: ${i.shouldPause}`),console.log("---")}function S4(t){return t.name?t.executeStage<0?(console.warn(" Etapa de ejecucin invlida:",t.executeStage),!1):!0:(console.warn(" Contexto de instruccin sin nombre"),!1)}async function Cc(t){try{for(;;){const e=N.get(an);if(N.get(dy)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),N.set(dy,!1),Br=0,ye=0,iu();break}if(e.type==="stopped"){Br=0,ye=0,It="";break}if(e.type==="paused"){await new Promise(s=>{const o=N.sub(an,()=>{o(),s()})});continue}const i=t.next();if(i.done)break;if(i.value&&typeof i.value<"u"){const{updateInstructionContext:s,getCurrentExecuteStageCounter:o}=await Tp(async()=>{const{updateInstructionContext:a,getCurrentExecuteStageCounter:l}=await Promise.resolve().then(()=>Tse);return{updateInstructionContext:a,getCurrentExecuteStageCounter:l}},void 0);s(ye,R||""),await XB(i.value),ye=o()}else continue;if(i.value.type==="cpu:cycle.start"&&(R=i.value.instruction.name,rt=!!i.value.instruction.willUse.id,Ge=!!i.value.instruction.willUse.ri,ue=i.value.instruction.operands,N.set(YL,Ge),Ke=0,N.set(Ht,Ke),Kg=!1,ft=0,console.log(" Nueva instruccin iniciada:",R,"- Contador reiniciado a 0"),console.log(" Detalles de la instruccin:","willUse.id:",i.value.instruction.willUse.id,"willUse.ri:",i.value.instruction.willUse.ri,"modeId:",rt,"modeRi:",Ge),console.log(" Instruccin completa:",JSON.stringify(i.value.instruction,null,2)),Us=!1,Wg=!1,Gg="",fc=!1,hc=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"){Br=0,ye=0,_u=!0,It="",ea++,console.log(`Instrucciones: ${ea}`),N.set(ef,ea),(e.until==="cycle-change"||e.until==="end-of-instruction")&&tn();continue}else if(i.value.type==="cpu:halt"){ea++,N.set(ef,ea),console.log(" fetchStageCounter",Br),ft++,N.set(Qd,ft);const s=N.get(Ip);N.set(Ip,s+ft),N.set(ct,"Ejecucin: Detenido"),Ke++,N.set(Ht,Ke),console.log(" HLT ejecutado - executeStageCounter establecido a 4, cycleCount:",ft)}else i.value.type==="cpu:int.6"?N.set(ct,"Interrupcin: Rutina leer caracter del teclado"):i.value.type==="cpu:int.7"&&(N.set(ct,"Interrupcin: Rutina mostrar por pantalla"),e.until==="cycle-change"&&tn());if(Br<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(Br=3,ye=3,N.set(ct,"Ejecucin: MAR  SP")):(N.set(ct,"Captacin: MAR  IP"),ft++,Ke++,N.set(Ht,Ke),ye++),e.until==="cycle-change"&&tn(),Br++):i.value.type==="cpu:register.update"?(console.log(" Debug: Captacin register.update - fetchStageCounter:",Br,"executeStageCounter:",ye),N.set(ct,"Captacin: MBR  read(Memoria[MAR]) | IP  IP + 1"),ft++,Ke++,N.set(Ht,Ke),e.until==="cycle-change"&&tn(),ye++,Br++):i.value.type==="cpu:mbr.get"&&(N.set(ct,"Captacin: IR  MBR"),ft++,Ke++,N.set(Ht,Ke),e.until==="cycle-change"&&tn(),Br++);else if(i.value.type==="cpu:rd.on"&&ye>1?(It="Ejecucin: MBR  read(Memoria[MAR])",Jf=!1):i.value.type==="cpu:wr.on"?(It="Ejecucin: write(Memoria[MAR])  MBR",Jf=!0,R==="MOV"&&!Xg(ue)&&(console.log(" MOV Debug - Escritura en memoria detectada"),console.log(" MOV Debug - Operandos:",ue),console.log(" MOV Debug - Es lectura:",Xg(ue)))):i.value.type==="pio:write.ok"&&(N.set(ct,"Ejecucin: write(PIO[MAR])  MBR"),ft++,Ke++,N.set(Ht,Ke),ye++),i.value.type==="cpu:mar.set"){const s=i.value.register;R==="MOV"&&ye===2&&ue&&ue.length>=2&&ue[0]==="CL"&&ue[1]==="[BL]"&&s==="ri"&&e.until==="cycle-change"&&(console.log(" Marcando pausa especial: MOV CL, [BL] en paso 4 (executeStageCounter=2) - se pausar al final del evento"),Kg=!0),e.until==="cycle-change"&&tn(),console.log("executeStageCounter:",ye),console.log("mbridirmar:",Us),console.log("resultmbrimar:",Wg),console.log("displayMessageresultmbr:",Gg),console.log("shouldDisplayMessage:",_u),console.log(" BL/BX Debug - blBxToRiProcessed:",fc),console.log(" BL/BX Debug - blBxRegisterName:",hc);let o=!1;const a=(R==="MOV"||R==="ADD"||R==="SUB")&&s==="ri"&&(ye===3||fc)&&(!rt&&!Ge||rt&&!Ge),l=s==="ri"&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&(ye>=5&&(It==="Ejecucin: write(Memoria[MAR])  MBR"||ye>=7)||ye===5&&!Ge&&rt),c=["ADD","SUB","CMP","AND","OR","XOR"].includes(R)&&ye===5,u=x4();if(S4(u)){const f=ooe(s,u);if(w4("MAR.set",s,u,f),s==="IP"&&R==="MOV"&&ye===4&&(console.log(" Debug MOV IP - Verificando condiciones:"),console.log("   sourceRegister === 'IP':",s==="IP"),console.log("   currentInstructionName === 'MOV':",R==="MOV"),console.log("   currentInstructionModeri:",Ge),console.log("   !currentInstructionModeid:",!rt),console.log("   executeStageCounter === 4:",ye===4),console.log("   currentInstructionOperands:",ue),console.log("   currentInstructionOperands.length === 2:",ue.length===2),ue.length>=2&&(console.log("   Segundo operando:",ue[1]),console.log("   !startsWith('['):",!ue[1].startsWith("[")),console.log("   !endsWith(']'):",!ue[1].endsWith("]")),console.log("   /^\\d+$/.test():",/^\d+$/.test(ue[1])),console.log("   /^\\d+h$/i.test():",/^\d+h$/i.test(ue[1])),console.log("   Es valor inmediato (decimal o hex):",/^\d+$/.test(ue[1])||/^\d+h$/i.test(ue[1])))),s==="IP"&&Ge&&ft===5&&ue.length===2)N.set(ct,"Ejecucin: MAR  IP | ri  MBR"),o=!1;else if(Wg)N.set(ct,Gg);else if(Us&&!l)if(R==="MOV"&&Ge&&rt)N.set(ct,"Ejecucin: MAR  IP; MBRMBR");else if(s==="ri"&&R==="MOV"&&!Ge&&!rt)ft++,Ke++,N.set(ct,`Ejecucin: MAR  ${hc}`),N.set(Ht,Ke),console.log(" Ciclo incrementado ANTES de mostrar MAR  BL/BX - cycleCount:",ft,"currentInstructionCycleCount:",Ke),o=!0,Us=!1,fc=!1,hc="";else if(s==="ri"&&(R==="ADD"||R==="SUB")&&!Ge&&!rt)ft++,Ke++,N.set(Ht,Ke),console.log(" Ciclo incrementado ANTES de mostrar MAR  BL/BX - cycleCount:",ft,"currentInstructionCycleCount:",Ke),o=!0,N.set(ct,`Ejecucin: MAR  ${hc}`),Us=!1,fc=!1,hc="";else{if(["ADD","SUB","CMP","AND","OR","XOR"].includes(R)&&Ge&&!rt&&s==="ri"){c||N.set(ct,"Ejecucin: MAR  MBR");return}s1?(N.set(ct,"Ejecucin: MAR  ri | id  MBR"),s1=!1):(ft++,Ke++,N.set(ct,"Ejecucin: MAR  BL | id  MBR"),R&&["ADD","SUB","CMP","AND","OR","XOR"].includes(R)&&rt&&!Ge&&typeof _e=="function"&&typeof Qi=="function"&&await Promise.all([_e([{key:"cpu.internalBus.address.path",from:Qi("BL","MAR",R)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0}),_e([{key:"cpu.internalBus.data.path",from:Qi("MBR","id",R,"mem<-imd")},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0})]))}else s==="ri"&&R==="MOV"&&ye===4?N.set(ct,"Ejecucin: MAR  MBR"):s==="ri"&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&!Ge&&rt&&(ye===4||ye===5)&&!l?(N.set(ct,"Ejecucin: MAR  BL | id  MBR"),console.log(" Paso 6 de ADD [BL], 6 - Mensaje simultneo: MAR  BL | id  MBR")):l&&s==="ri"?console.log(" ri  MAR omitido completamente - no mostrar mensaje ni contabilizar ciclo"):(_u||s==="SP"||rt&&s==="IP"||f.shouldDisplay)&&(!a&&!l?N.set(ct,f.message):l&&console.log(" Mensaje NO mostrado para ri  MAR en etapa avanzada (direccin ya en MAR)"))}Us&&l&&s==="ri"&&(Us=!1,console.log(" mbridirmar limpiado para ri  MAR omitido en etapa avanzada"));const d=a||l||o||c;d?console.log(" Ciclo NO contabilizado en cpu:mar.set - skipCycleCount:",d,"isIndirectInstruction:",a,"isRiToMARSkipCycle:",l,"isArithmeticRegToDirectStep5:",c,"(direccin ya almacenada en MAR)"):(ft++,Ke++,c||N.set(Ht,Ke),console.log(" Ciclo contabilizado en cpu:mar.set - cycleCount:",ft,"currentInstructionCycleCount:",Ke)),e.until==="cycle-change"&&(R==="MOV"&&s==="ri"&&ye===4&&!Ge&&!rt&&ue.length===2&&ue[1].startsWith("[")&&ue[1].endsWith("]")?(console.log(" MOV CL, [BL] paso 4 detectado - pausando en mar.set"),tn()):!l&&!(a&&!fc)&&tn()),l?console.log(" executeStageCounter NO incrementado para ri  MAR en etapa avanzada"):(ye++,console.log(" cpu:mar.set - executeStageCounter despus del incremento:",ye))}else if(i.value.type==="cpu:register.update"){const s=i.value.register;console.log(" Debug register.update - fetchStageCounter:",Br,"executeStageCounter:",ye),console.log(" Debug register.update - currentInstructionModeri:",Ge,"currentInstructionModeid:",rt);const o=x4();if(S4(o)){const a=hoe(s,o);w4("register.update",s,o,a);let l=a.message;_u=a.shouldDisplay;const c=a.shouldPause;Ge&&ye===8&&R==="INT"&&(l="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1"),ye===2&&R==="CALL"&&(l="Ejecucin: ri  MBR; SP  SP - 1"),ye===4&&R==="CALL"&&(l="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1"),ye===3&&s==="IP"&&(R==="MOV"||R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&(l="Ejecucin: MBR  read(Memoria[MAR]) | IP  IP + 1"),ye===3&&s==="IP"&&["JMP","JZ","JNZ","JC","JNC","JO","JNO","JS","JNS"].includes((R||"").toUpperCase())&&(l="Ejecucin: MBR  read(Memoria[MAR]) | IP  IP + 1"),ye===5&&s==="IP"&&Ge&&rt&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&(l="Ejecucin: MBR  read(Memoria[MAR]) | IP  IP + 1"),console.log("displayMessage:",l),console.log("currentInstructionName:",R),console.log("currentInstructionModeri:",Ge),console.log("executeStageCounter:",ye),console.log("pause:",c),R!=="DEC"&&R!=="INC"&&R!=="NOT"&&R!=="NEG"&&!(R==="INT"&&ye===5)&&(N.set(ct,l),ft++,Ke++,N.set(Ht,Ke)),ye++,l!=="Interrupcin: MAR  (video)"&&e.until==="cycle-change"&&R!=="DEC"&&R!=="INC"&&R!=="NOT"&&R!=="NEG"&&c&&tn()}}else if(i.value.type==="cpu:alu.execute")R==="CMP"&&(N.set(ct,`Ejecucin: ${y4} ${R} ${Cu} ; update(FLAGS)`),ft++,Ke++,N.set(Ht,Ke),e.until==="cycle-change"&&tn());else if(i.value.type==="cpu:mbr.get"){const s=i.value.register,o=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="ri.l"?"MBR":i.value.register;(String(o)==="right.l"||String(o)==="left.l")&&(Cu="MBR"),(Ge&&ye===3&&(R==="ADD"||R==="SUB"||R==="CMP")||ye===3&&(R==="ADD"||R==="SUB"||R==="CMP")&&Ge&&ue.length>=2&&(ue[0].startsWith("[")&&ue[0].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(ue[0])||ue[1].startsWith("[")&&ue[1].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(ue[1]))||ye===3&&R==="POP"||Ge&&rt&&ye===4&&R==="MOV"||s==="id.l"&&Ge&&rt&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")||s==="ri.l"&&Ge&&rt&&ye===4&&(R==="MOV"||R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR"))&&(s==="id.l"&&Ge&&rt&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&(s1=!0),Us=!0),R==="POP"&&ye===3&&(qB=`Ejecucin: ${o}  MBR`);const a=s==="id.l"&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&!Ge&&rt&&ye===4;if(a&&(console.log(" Caso especial detectado: MBR  ID sin contabilizar ciclo ni mostrar mensaje"),console.log("   Instruccin:",R),console.log("   executeStageCounter:",ye),console.log("   originalRegister:",s)),!Us&&!a&&String(o)!=="MBR"&&String(o)!=="right.l"&&String(o)!=="left.l"){N.set(ct,`Ejecucin: ${o}  MBR`),ft++,Ke++,N.set(Ht,Ke);const l=R==="MOV"&&(o==="AL"||o==="AH"||o==="BL"||o==="BH"||o==="CL"||o==="CH"||o==="DL"||o==="DH");e.until==="cycle-change"&&!l&&tn()}}else if(i.value.type==="cpu:register.buscopy"){console.log(" Evento cpu:register.buscopy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");if(R==="MOV"){const a=`Ejecucin: ${o}  ${s}`;N.set(ct,a),ft++,Ke++,N.set(Ht,Ke),console.log(" Ciclo contabilizado para MOV register.buscopy - cycleCount:",ft,"currentInstructionCycleCount:",Ke)}}else if(i.value.type==="cpu:register.copy"){console.log(" Evento cpu:register.copy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");let a="";R==="DEC"||R==="INC"||R==="NOT"||R==="NEG"?a=s==="result"?`${R} ${Cu}`:s:(a=s==="result"?`${o} ${R} ${Cu}`:s==="ri"?"MBR":s,b4=`MBR ${R} ${ue[1]}; update(FLAGS)`),R==="CMP"&&String(o)==="right"&&(Cu=s),R==="CMP"&&String(o)==="left"&&(y4=s);let l=`Ejecucin: ${o==="ri"?"MAR":o}  ${a}`;if((R==="ADD"||R==="SUB"||R==="CMP")&&o!=="left"&&o!=="right"&&(l+="; update(FLAGS)"),s==="ri"&&o==="IP")l="Ejecucin: IP  MBR",R==="CALL"&&(l="Ejecucin: IP  MBR"),N.set(ct,l),e.until==="cycle-change"&&tn();else if(o==="left"&&R==="INT")l="ADD BL, 1";else if(s==="result"&&R==="INT")e.until==="cycle-change"&&tn();else if(s==="IP"&&o==="id")l="Ejecucin: id  IP",N.set(ct,l),e.until==="cycle-change"&&tn();else if(s==="id"&&o==="ri")l="Ejecucin: MAR  id",_u=!1,N.set(ct,l);else if(s==="MBR"&&o==="ri")l="Ejecucin: MAR  MBR",N.set(ct,l);else if(s==="id"&&o==="IP")l="Ejecucin: IP  MBR",N.set(ct,l),e.until==="cycle-change"&&tn();else if(s==="BL"&&o==="ri"||s==="BX"&&o==="ri"){const u=s==="BL"?"BL":"BX";hc=u,l=`Ejecucin: MAR  ${u}`,_u=!1,Us=!0,fc=!0}else String(s)==="right.l"&&(Cu=s);if(console.log("cpu:register.copy - sourceRegister:",s,"destRegister:",o,"currentInstructionName:",R,"executeStageCounter:",ye),(R==="MOV"||R==="ADD"||R==="SUB")&&o!=="left"&&o!=="right"){const u=(s==="BL"||s==="BX")&&o==="ri",d=R==="MOV"&&o==="ri"&&ue&&ue.length===2&&/^\[[A-Z]{2}\]$/i.test(ue[0])&&/^[0-9A-F]+h?$/i.test(ue[1]);!u&&!d?(N.set(ct,l),ft++,Ke++,N.set(Ht,Ke),console.log(` Ciclo contabilizado para ${R} register.copy - cycleCount:`,ft,"currentInstructionCycleCount:",Ke)):console.log(` Ciclo NO contabilizado para ${R} register.copy (BL/BXri o indirecto-inmediato) - se contabilizar en cpu:mar.set`)}else(o!=="result"&&s!=="result"||s==="result"&&o!=="MBR")&&!((s==="BL"||s==="BX")&&o==="ri")&&!(o==="left"||o==="right")?(o==="left"||o==="right"||N.set(ct,l),ft++,Ke++,N.set(Ht,Ke),console.log(" Ciclo contabilizado para register.copy - cycleCount:",ft,"currentInstructionCycleCount:",Ke,"destRegister:",o,"sourceRegister:",s)):console.log(" Ciclo NO contabilizado para register.copy - condicin no cumplida:","destRegister:",o,"sourceRegister:",s)}else if(i.value.type==="bus:reset"&&ye>1&&(R==="MOV"||R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR"||R==="CALL"||R==="INT"||R==="PUSH"||R==="POP"||R==="IN"||R==="RET")){(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&(!Ge&&!rt&&ye===6&&ue.length===2&&ue[0].startsWith("[")&&ue[0].endsWith("]")&&/^[0-9A-F]+h?$/i.test(ue[0].replace(/\[|\]/g,""))&&/^[A-Z]+$/i.test(ue[1])?It="Ejecucin: write(Memoria[MAR])  MBR":It="Ejecucin: MBR  read(Memoria[MAR])"),R==="RET"&&(It="Ejecucin: MBR  read(Memoria[MAR])"),R==="IN"&&(It="Ejecucin: MBR  read(PIO[MAR])"),R==="MOV"&&ye===5&&(console.log(" MOV Debug - Operandos:",ue),console.log(" MOV Debug - Es lectura:",Xg(ue)),Xg(ue)?It="Ejecucin: MBR  read(Memoria[MAR])":It="Ejecucin: write(Memoria[MAR])  MBR"),(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&rt&&!Ge&&ye===5?Jf?It="Ejecucin: write(Memoria[MAR])  MBR":It="Ejecucin: MBR  read(Memoria[MAR])":(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&rt&&!Ge&&ye===9?(It="Ejecucin: write(Memoria[MAR])  MBR",console.log(" Paso 9 ADD [BL], 2 - Estableciendo mensaje de escritura:",It)):(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&rt&&Ge&&ye===8?Jf?(It="Ejecucin: write(Memoria[MAR])  MBR",console.log(" Paso 8 ADD [04], 02h - Estableciendo mensaje de escritura:",It)):(It="Ejecucin: MBR  read(Memoria[MAR])",console.log(" Paso 8 ADD [04], 02h - Estableciendo mensaje de lectura:",It)):(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&!rt&&!Ge&&(Jf?It="Ejecucin: write(Memoria[MAR])  MBR":It="Ejecucin: MBR  read(Memoria[MAR])");let s=!1,o=!1;(R==="MOV"||R==="ADD"||R==="SUB")&&It==="Ejecucin: write(Memoria[MAR])  MBR"&&(Ge&&!rt&&ye===6||!rt&&ye===5||Ge&&rt&&ye===8)&&(o=!0),Ge&&(ye===4||ye===8)&&R==="INT"||ye===3&&(R==="MOV"||R==="ADD"||R==="SUB")&&Ge||ye===3&&(R==="MOV"||R==="ADD"||R==="SUB")&&!Ge&&!rt&&ue.length>=2&&(!ue[0].startsWith("[")&&!ue[0].endsWith("]")&&!ue[1].startsWith("[")&&!ue[1].endsWith("]")&&(/^\d+$/.test(ue[1])||/^\d+h$/i.test(ue[1])||/^[0-9A-F]+h?$/i.test(ue[1])||/^\d+$/.test(ue[0])||/^\d+h$/i.test(ue[0])||/^[0-9A-F]+h?$/i.test(ue[0]))||ue[0].startsWith("[")&&ue[0].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(ue[0])||ue[1].startsWith("[")&&ue[1].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(ue[1]))||ye===3&&(R==="MOV"||R==="ADD"||R==="SUB")&&!Ge&&!rt&&ue.length>=2&&(ue[0].startsWith("[")&&ue[0].endsWith("]")&&/^\[[A-Z]+\]$/i.test(ue[0])&&(/^\d+$/.test(ue[1])||/^\d+h$/i.test(ue[1]))||ue[1].startsWith("[")&&ue[1].endsWith("]")&&/^\[[A-Z]+\]$/i.test(ue[1])&&(/^\d+$/.test(ue[0])||/^\d+h$/i.test(ue[0])))||ye===5&&(R==="MOV"||R==="ADD"||R==="SUB")&&Ge||rt&&ye===4&&(R==="CALL"||R==="ADD"||R==="SUB"||R==="CMP")||ye===3&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&It!=="Ejecucin: MBR  read(Memoria[MAR])"||ye===3&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&rt&&!Ge&&It==="Ejecucin: MBR  read(Memoria[MAR])"?(s=!0,console.log(" ContinuarSinGuardar establecido a true - condicin cumplida")):(console.log(" ContinuarSinGuardar mantenido como false - ninguna condicin cumplida"),ye===3&&(R==="MOV"||R==="ADD"||R==="SUB")&&!Ge&&!rt&&(console.log(` Debug ${R} step 3:`),console.log("   Operandos length >= 2:",ue.length>=2),console.log("   Operando[0] no tiene []:",!ue[0].startsWith("[")&&!ue[0].endsWith("]")),console.log("   Operando[1] no tiene []:",!ue[1].startsWith("[")&&!ue[1].endsWith("]")),console.log("   Test operando[0] es direccin:",/^\d+$/.test(ue[0])||/^\d+h$/i.test(ue[0])||/^[0-9A-F]+h?$/i.test(ue[0])),console.log("   Test operando[1] es inmediato:",/^\d+$/.test(ue[1])||/^\d+h$/i.test(ue[1])||/^[0-9A-F]+h?$/i.test(ue[1])))),console.log("ContinuarSinGuarda:",s),console.log("executeStageCounter:",ye),console.log("isLastStepBeforeCycleEnd:",o),console.log(" bus:reset Debug - messageReadWrite:",It),console.log(" bus:reset Debug - currentInstructionModeri:",Ge),console.log(" bus:reset Debug - currentInstructionModeid:",rt),console.log(" bus:reset Debug - currentInstructionOperands:",ue),console.log(" bus:reset Debug - Operando[0]:",ue[0]),console.log(" bus:reset Debug - Operando[1]:",ue[1]),console.log(" bus:reset Debug - Condicin MOV/ADD/SUB directo step 3:",ye===3&&(R==="MOV"||R==="ADD"||R==="SUB")&&!Ge&&!rt),console.log(" bus:reset Debug - Es lectura de memoria:",It==="Ejecucin: MBR  read(Memoria[MAR])"),console.log(" bus:reset Debug - MOV/ADD/SUB indirecto debe mostrar:",(R==="MOV"||R==="ADD"||R==="SUB")&&!Ge&&!rt&&ye===5&&It==="Ejecucin: MBR  read(Memoria[MAR])"),s?o&&(N.set(ct,It),ft++,Ke++,N.set(Ht,Ke)):(N.set(ct,It),ft++,Ke++,N.set(Ht,Ke),e.until==="cycle-change"&&tn())}else if(i.value.type==="cpu:mbr.set"){const s=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register==="result.l"?b4:i.value.register;if(Ge&&ye===5&&(R==="ADD"||R==="SUB"))Wg=!0,Gg=`Ejecucin: MBR  ${s} ; MAR  MBR`;else if(Ge&&rt&&ye===5&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR"))N.set(ct,"Ejecucin: id  MBR"),e.until==="cycle-change"&&tn(),ye++,ft++,Ke++,N.set(Ht,Ke);else if(Ge&&rt&&ye===6&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR"))console.log(" Ciclo 6 detectado - delegando a events.ts para animacin simultnea MBR  ri + IP  MAR");else if(Ge&&rt&&ye===7&&i.value.register==="result.l"&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")){const o=s.replace("; write(FLAGS)","; update(FLAGS)");N.set(ct,`Ejecucin: MBR  ${o}`),e.until==="cycle-change"&&tn(),ye++,ft++,Ke++,N.set(Ht,Ke)}else if(R==="MOV"&&(ye===5||ye===6||ye===3)&&["AL","BL","CL","DL","AH","BH","CH","DH"].includes(s)&&!Ge&&!rt)console.log(` MOV paso 5/3 detectado: ${s}  MBR`),N.set(ct,`Ejecucin: MBR  ${s}`),ft++,Ke++,N.set(Ht,Ke),ye++,e.until==="cycle-change"&&tn();else if(i.value.register==="result.l"){const o=`Ejecucin: MBR  ${s.replace("; write(FLAGS)"," ; update(FLAGS)")}`;N.set(ct,o),ft++,Ke++,N.set(Ht,Ke),e.until==="cycle-change"&&tn()}else console.log(" Permitiendo que events.ts maneje cpu:mbr.set para animaciones normales")}}else N.set(ct,"");if(console.log(`Ciclos ejecutados: ${ft}`),N.set(Qd,ft),Kg&&e.until==="cycle-change"){console.log(" Ejecutando pausa especial despus del evento"),Kg=!1,tn();continue}const r=new CustomEvent("instructionChange",{detail:{instruction:R,modeid:rt,moderi:Ge}});window.dispatchEvent(r),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until:i.value.type==="cpu:cycle.end"&&(e.until==="end-of-instruction"||e.until==="cycle-change")&&tn()}t.return()}catch(e){const n=fn.from(e);iu(n)}}async function woe(...t){const e=t[0],n=N.get(an);switch(e){case"cpu.run":{if(n.type==="running")return ku();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;ft=0,ea=0,N.set(Qd,ft),N.set(ef,ea),N.set(Ga,[]);const r=window.codemirror.state.doc.toString(),s=VL(r);if(!s.success)return roe();const o=s.instructions.map(w=>w.instruction),a=o.some(w=>["CALL","RET","INT","IRET","POP","PUSH"].includes(w));N.set(Tb,a);const l=o.includes("INT");N.set(ty,l);const c=s.instructions.some(w=>w.instruction==="INT"?w.operands.some(k=>k.type==="number-expression"&&typeof k.value.value=="number"?k.value.value===6||k.value.value===7:!1):!1),u=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>k.type==="number-expression"&&typeof k.value.value=="number"?k.value.value===48||k.value.value===50:!1):!1),d=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value>=32&&k.value.value<=43;try{if(k.value&&typeof k.value.resolve=="function"){const _=k.value.resolve();if(typeof _=="number")return _>=32&&_<=43}}catch(_){console.warn("No se pudo resolver operando PIC:",_)}}return!1}):!1),f=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value===64||k.value.value===65;try{if(k.value&&typeof k.value.resolve=="function"){const _=k.value.resolve();if(typeof _=="number")return _===64||_===65}}catch(_){console.warn("No se pudo resolver operando Handshake:",_)}}return!1}):!1),p=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value===16||k.value.value===17;try{if(k.value&&typeof k.value.resolve=="function"){const _=k.value.resolve();if(typeof _=="number")return _===16||_===17}}catch(_){console.warn("No se pudo resolver operando Timer:",_)}}return!1}):!1),g=gt();N.set(ds,w=>({...w,devices:{...w.devices,keyboardAndScreen:c,pio:u?"switches-and-leds":f?"printer":w.devices.pio,handshake:f?"printer":w.devices.handshake,pic:d||w.devices.pic,"switches-and-leds":u}})),N.set(QC,c);const m=l||d||f||p||c;N.set(ty,m),console.log("Detectado - PIC:",d,"Handshake:",f,"Timer:",p,"INT:",l),console.log("Habilitando vector de interrupciones:",m),Cn.loadProgram({program:s,data:g.dataOnLoad,devices:{keyboardAndScreen:gt().devices.keyboardAndScreen??!1,pic:gt().devices.pic??!1,pio:gt().devices.pio??null,handshake:gt().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const v=s.instructions.filter(w=>w.type==="instruction").flatMap(w=>{const k=w.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const P=C.value;if(P.isNumberLiteral())return P.value.toString(16)+"h";if(P.isLabel())return P.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const P=C.value;if(P.isNumberLiteral())return P.value.toString(16)+"h"}}return""}).join(", "),_=`${w.instruction} ${k}`.trim(),E=[{address:w.start.value,name:_,length:w.length.toString().trim()}];if(w.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=w.start.value+1,P=w.operands.filter((T,I)=>w.length===3?I===0&&T.type==="number-expression":T.type==="number-expression").map(T=>{if(T.type==="number-expression"){const I=T.value;if(I.isNumberLiteral())return I.value.toString(16)+"h";if(I.isLabel())return I.value}else if(T.type==="direct-address"){const I=T.value;if(I.isNumberLiteral())return I.value.toString(16)+"h"}return""}).join(", ");E.push({address:C,name:P,length:""})}if(w.length===3){const C=w.start.value+2,P=w.operands.filter(T=>T.type==="number-expression").map(T=>{if(T.type==="number-expression"){const I=T.value;if(I.isNumberLiteral())return I.value.toString(16)+"h"}return""}).join(" ");E.push({address:C,name:P,length:""})}return E}),y=s.data.filter(w=>w.type==="data-directive").flatMap(w=>{const k=w.start.value;return w.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,C)=>({address:k+C,label:C===0&&w.label||null,value:E}))});console.log("Direcciones de las instrucciones:",v),console.log("Direcciones de los datos:",y),N.set(ZL,v),N.set(QL,y.map(w=>({...w,length:""}))),v4(Cn.getComputerState());const b=["Start CPU",{until:i,devices:gt().devices,language:gt().language,animations:gt().animations?"yes":"no"}];A6.capture(...b),N.set(an,{type:"running",until:i,waitingForInput:!1}),Cc(Cn.startCPU()),Soe(),koe()}else N.set(an,{type:"running",until:i,waitingForInput:!1}),BB();return}case"cpu.stop":{const i=t[1];if(i){iu(),v4(Cn.getComputerState(),i);const{anim:r}=await Tp(async()=>{const{anim:o}=await Promise.resolve().then(()=>Cse);return{anim:o}},void 0);await Promise.all([r({key:"cpu.internalBus.data.opacity",to:0},{duration:.1,easing:"easeInSine"}),r({key:"cpu.internalBus.address.opacity",to:0},{duration:.1,easing:"easeInSine"})]);const s=new CustomEvent("instructionChange",{detail:{instruction:"",modeid:!1,moderi:!1}});window.dispatchEvent(s)}else tn();return}case"f10.press":{if(!Cn.devices.f10.connected()||n.type!=="running")return ku();if(g4("f10:press"))return;Cc(Cn.devices.f10.press());return}case"switch.toggle":{if(!Cn.devices.switches.connected())return ku();if(g4("switches:toggle"))return;const i=t[1];n.type==="running"?Cc(Cn.devices.switches.toggle(i)):N.set(Yb,r=>r.withBit(i,!r.bit(i)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return ku();Cn.devices.keyboard.readChar(V.fromChar(t[1])),N.set(an,{...n,waitingForInput:!1});return}case"screen.clean":{if(!Cn.devices.screen.connected())return ku();Cc(Cn.devices.screen.clear());return}case"printer.clean":{if(!Cn.devices.printer.connected())return ku();Cc(Cn.devices.printer.clear());return}default:return e}}async function Soe(){if(Cn.devices.clock.connected())for(;N.get(an).type!=="stopped";){const t=gt().clockSpeed;await _e({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),Cc(Cn.devices.clock.tick())}}async function koe(){if(Cn.devices.printer.connected()){for(;N.get(an).type!=="stopped";){const t=gt().printerSpeed;await _e([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await _e({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await Cc(Cn.devices.printer.print())}if(N.get(an).type==="stopped"&&Cn.devices.printer.hasPending())for(;N.get(an).type!=="stopped"||Cn.devices.printer.hasPending();){const t=gt().printerSpeed;await _e([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await _e({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=Cn.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await XB(n.value),n=e.next()}}}function Kn(){const t=st(an),e=jL(),n=x.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:woe,devices:n}}function _oe({className:t}){const e=ln(),{status:n,dispatch:i}=Kn(),[r,s]=x.useState(null),[o,a]=x.useState("desktop");x.useEffect(()=>{const m=()=>{const v=window.innerWidth;v<=480?a("mobile"):v<=768?a("compact"):v<=1024?a("tablet"):a("desktop")};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),x.useEffect(()=>{n.type!=="running"&&s(null)},[n.type]);const l=x.useCallback(()=>{n.type!=="running"&&(s("cycle-change"),i("cpu.run","cycle-change"))},[n.type,i]);Ou("F7",m=>{m.preventDefault(),l()},void 0,[l]);const c=x.useCallback(()=>{n.type!=="running"&&(s("end-of-instruction"),i("cpu.run","end-of-instruction"))},[n.type,i]);Ou("F8",m=>{m.preventDefault(),c()},void 0,[c]);const u=x.useCallback(()=>{n.type!=="running"&&(s("infinity"),i("cpu.run","infinity"))},[n.type,i]);Ou("F4",m=>{m.preventDefault(),u()},void 0,[u]);const d=x.useCallback(()=>{n.type==="running"&&i("cpu.stop",!1)},[n.type,i]),f=x.useCallback(()=>{n.type!=="running"&&i("cpu.stop",!0)},[n.type,i]);Ou("F9",m=>{m.preventDefault(),f()},void 0,[f]),Ou(" ",m=>{const v=m.target;v.tagName==="INPUT"||v.tagName==="TEXTAREA"||v.contentEditable==="true"||(m.preventDefault(),n.type==="running"&&d())},{event:"keydown"},[n.type,d]);const p=o==="desktop"||o==="tablet",g=o==="desktop";return h.jsxs("div",{"data-testid":"controls",className:ne("flex items-center justify-center gap-4 rounded-xl border border-stone-700 bg-stone-900/80 shadow-lg",o==="mobile"?"gap-2 px-2 py-0.5":o==="compact"?"gap-3 px-2 py-1":"gap-4 px-3 py-1",t),children:[n.type==="running"&&r==="cycle-change"?h.jsxs("button",{"data-testid":"cycle-button",onClick:d,title:e("control.action.pause"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:Uh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"cycle-button",disabled:n.type==="running",onClick:l,title:e("control.action.run.cycle-change"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",n.type==="running"&&n.until==="cycle-change"&&"animate-pulse-glow-mantis",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:Eb,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.cycle-change")})]}),n.type==="running"&&r==="end-of-instruction"?h.jsxs("button",{"data-testid":"new-button",onClick:d,title:e("control.action.pause"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:Uh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"new-button",disabled:n.type==="running",onClick:c,title:e("control.action.run.end-of-instruction"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-blue-600/20 focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-50",n.type==="running"&&n.until==="end-of-instruction"&&"animate-pulse-glow-blue",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:zC,size:"lg",className:"text-blue-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.end-of-instruction")})]}),n.type==="running"&&r==="infinity"?h.jsxs("button",{"data-testid":"open-button",onClick:d,title:e("control.action.pause"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:Uh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"open-button",disabled:n.type==="running",onClick:u,title:e("control.action.run.infinity"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-orange-600/20 focus-visible:ring-2 focus-visible:ring-orange-400 disabled:opacity-50",n.type==="running"&&n.until==="infinity"&&"animate-pulse-glow-orange",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:iJ,size:"lg",className:"text-orange-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.infinity")})]}),h.jsxs("button",{"data-testid":"assemble-button",onClick:f,disabled:n.type==="stopped"||n.type==="running",title:e("control.action.reset"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:wL,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.reset")})]})]})}const YB=x.memo(({currentPhase:t="idle",className:e})=>{const[n,i]=x.useState("idle"),[r,s]=x.useState(!1);x.useEffect(()=>{if(t!=="idle"){i(t);const a=setTimeout(()=>i("idle"),1e3);return()=>clearTimeout(a)}},[t]);const o=[{id:"captacion",label:"Captacin",color:"text-blue-400",icon:"",descripcion:"Captando instruccin desde memoria",pasos:["IP apunta a la direccin de memoria, el MAR recibe la direccin del IP","Se lee el contenido de memoria y se almacena en el MBR, IP se incrementa automticamente","La instruccin se transfiere al IR"]},{id:"ejecucion",label:"Ejecucin",color:"text-green-400",icon:"",descripcion:"Ejecutando instruccin",subfases:[{id:"operandos",label:"Obtencin de operandos",color:"text-yellow-400",icon:"",descripcion:"Obteniendo operandos de la instruccin",pasos:["Se identifican y preparan los operandos necesarios para la operacin."]},{id:"alu",label:"Procesar en ALU",color:"text-green-400",icon:"",descripcion:"Procesando en la ALU",pasos:["La ALU ejecuta la operacin aritmtica o lgica con los operandos."]},{id:"escritura",label:"Escribir resultado",color:"text-purple-400",icon:"",descripcion:"Escribiendo resultado en registros",pasos:["El resultado de la operacin se almacena en el registro destino."]}]}];return h.jsxs("div",{className:ne("flex flex-col gap-2 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 p-3 shadow-lg ring-1 ring-stone-300","min-w-[280px] max-w-[320px]",e),children:[h.jsx("div",{className:"mb-2 flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"CICLO CPU"}),h.jsx("button",{onClick:()=>s(!r),className:ne("rounded border px-2 py-1 text-[10px] font-bold transition-all duration-200",r?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300 hover:border-stone-400 hover:bg-stone-700"),children:r?"":"+"})]})}),h.jsx("div",{className:"mt-2 flex items-center justify-center gap-2",children:o.map((a,l)=>h.jsxs("div",{className:"flex items-center",children:[h.jsxs("div",{className:ne("flex cursor-pointer flex-col items-center gap-1 rounded border-2 px-2 py-1 transition-all duration-200","hover:border-stone-300 hover:bg-stone-700",t===a.id?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300",n===a.id&&"animate-pulse"),onClick:()=>{var c;if(r)if(a.subfases){let u="";a.subfases.forEach(d=>{u+=`${d.label}
${d.descripcion}
Pasos:
${d.pasos.map((f,p)=>`${p+1}. ${f}`).join(`
`)}`,u+=`

`}),alert(u)}else alert(`${a.label}

${a.descripcion}

Pasos:
${(c=a.pasos)==null?void 0:c.map((u,d)=>`${d+1}. ${u}`).join(`
`)}`)},children:[h.jsx("div",{className:ne("text-lg transition-transform duration-300",t===a.id&&"scale-110"),children:a.icon}),h.jsx("span",{className:ne("text-[10px] font-bold uppercase tracking-wide transition-colors",t===a.id?"text-stone-950":"text-stone-300"),children:a.label}),h.jsx("span",{className:"max-w-16 text-center text-[9px] leading-tight text-stone-500",children:a.descripcion})]}),l<o.length-1&&h.jsx("div",{className:"mx-1 font-bold text-stone-400",children:""})]},a.id))}),r&&h.jsx("div",{className:"mt-2 rounded border-2 border-stone-600 bg-stone-800/80 p-2",children:h.jsxs("div",{className:"text-xs text-stone-300",children:[h.jsx("div",{className:"mb-1 font-bold text-stone-200",children:"Estado actual:"}),t==="fetch"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Leyendo instruccin desde memoria"})]}),t==="decode"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Interpretando cdigo de operacin"})]}),t==="execute"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Ejecutando operacin en ALU"})]}),t==="idle"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-stone-400"}),h.jsx("span",{children:"CPU en espera de instrucciones"})]})]})}),h.jsx("div",{className:"text-center text-[8px] text-stone-500",children:"Haz clic en las fases para ver detalles"})]})});YB.displayName="ExecutionPhases";const Coe=x.memo(({steps:t,onStepChange:e,onComplete:n,className:i})=>{const[r,s]=x.useState(0),[o,a]=x.useState(!1),[l,c]=x.useState(2e3),u=t[r],d=r===0,f=r===t.length-1,p=x.useCallback(b=>{const w=Math.max(0,Math.min(b,t.length-1));s(w),e==null||e(w)},[t.length,e]),g=x.useCallback(()=>{f?(a(!1),n==null||n()):p(r+1)},[r,f,p,n]),m=x.useCallback(()=>{d||p(r-1)},[r,d,p]),v=x.useCallback(()=>{p(0),a(!1)},[p]),y=x.useCallback(()=>{a(!o)},[o]);return o&&!f&&setTimeout(g,l),h.jsxs("div",{className:ne("rounded-lg border border-stone-600 bg-stone-900 p-4",i),children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:"Modo Paso a Paso"}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("span",{className:"text-sm text-stone-400",children:["Paso ",r+1," de ",t.length]})})]}),h.jsx(YB,{currentPhase:u==null?void 0:u.phase,className:"mb-4"}),h.jsxs("div",{className:"mb-4 rounded-lg bg-stone-800 p-4",children:[h.jsx("div",{className:"mb-2 flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-mantis-400",children:u==null?void 0:u.title})}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:u==null?void 0:u.description}),(u==null?void 0:u.instruction)&&h.jsxs("div",{className:"mb-3 rounded bg-stone-700 p-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Instruccin:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:u.instruction})]}),(u==null?void 0:u.registers)&&h.jsx("div",{className:"mb-3 grid grid-cols-2 gap-4",children:h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Registros:"}),h.jsx("div",{className:"mt-1 space-y-1",children:Object.entries(u.registers).map(([b,w])=>h.jsxs("div",{className:"flex justify-between text-xs",children:[h.jsxs("span",{className:"text-stone-300",children:[b,":"]}),h.jsx("span",{className:"font-mono text-mantis-400",children:w})]},b))})]})}),(u==null?void 0:u.memory)&&h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Memoria:"}),h.jsx("div",{className:"mt-1 grid grid-cols-4 gap-1",children:Object.entries(u.memory).map(([b,w])=>h.jsxs("div",{className:"text-center text-xs",children:[h.jsx("div",{className:"text-stone-500",children:b}),h.jsx("div",{className:"font-mono text-mantis-400",children:w})]},b))})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(_t,{variant:"outline",size:"sm",onClick:v,disabled:d&&!o,className:"flex items-center gap-1",children:[h.jsx(Ye,{icon:wL}),"Reiniciar"]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(_t,{variant:"outline",size:"sm",onClick:m,disabled:d,className:"flex items-center gap-1",children:[h.jsx(Ye,{icon:kL}),"Anterior"]}),h.jsxs(_t,{variant:o?"secondary":"default",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx(Ye,{icon:o?Uh:Eb}),o?"Pausar":"Reproducir"]}),h.jsxs(_t,{variant:"outline",size:"sm",onClick:g,disabled:f,className:"flex items-center gap-1",children:["Siguiente",h.jsx(Ye,{icon:zC})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Velocidad:"}),h.jsxs("select",{value:l,onChange:b=>c(Number(b.target.value)),className:"rounded border border-stone-600 bg-stone-800 px-2 py-1 text-xs",children:[h.jsx("option",{value:1e3,children:"Rpida"}),h.jsx("option",{value:2e3,children:"Normal"}),h.jsx("option",{value:4e3,children:"Lenta"})]})]})]}),h.jsx("div",{className:"mt-4",children:h.jsx("div",{className:"h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(r+1)/t.length*100}%`}})})})]})});Coe.displayName="StepByStepMode";const Eoe=x.memo(({from:t,to:e,data:n,duration:i,className:r,onComplete:s})=>{const[o,a]=x.useState(!1),[l,c]=x.useState(0),[u]=ba(),f=Math.min(u.executionUnit,250),p=i??(u.animations?f*2:1e3);return x.useEffect(()=>{a(!0),c(0);const g=Date.now(),m=()=>{const v=Date.now()-g,y=Math.min(v/p,1);c(y),y<1?requestAnimationFrame(m):setTimeout(()=>{a(!1),s==null||s()},500)};requestAnimationFrame(m)},[t,e,n,p,s]),o?h.jsxs("div",{className:ne("pointer-events-none absolute inset-0",r),children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"dataFlowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${t} L ${e}`,stroke:"url(#dataFlowGradient)",strokeWidth:"3",strokeDasharray:"10,5",strokeDashoffset:20-l*20,fill:"none",className:"animate-pulse"})]}),["Read","Write"].includes(n)?(()=>{const[g,m]=t.split(" ").map(Number),[v,y]=e.split(" ").map(Number),b=g+(v-g)*l,w=m+(y-m)*l;return h.jsx("div",{className:`absolute z-[100] select-none text-lg font-extrabold ${n==="Read"?"text-red-500":"text-orange-400"}`,style:{left:b,top:w-32,textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:o?1:0,pointerEvents:"none"},children:n})})():h.jsxs("div",{className:ne("absolute rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white","border border-mantis-400 shadow-lg","transition-all duration-300 ease-out"),style:{left:`${l*100}%`,transform:"translateX(-50%)",top:"50%",marginTop:"-12px"},children:[n,h.jsx("div",{className:"absolute -top-1 left-1/2 size-0 -translate-x-1/2 border-x-4 border-b-4 border-transparent border-b-mantis-500"})]})]}):null});Eoe.displayName="DataFlowAnimation";const Aoe={"cpu-components":{title:"Componentes de la CPU",description:"Visualiza los componentes principales de la CPU: ALU, Unidad de Control y registros",steps:[{id:"overview",title:"Vista General de la CPU",description:"Estructura general de la CPU VonSim8",duration:3e3,animation:{type:"highlight",targets:["CPU-container"],data:{title:"CPU",description:"Se basa en el procesador Intel 8086 de 16 bits, pero por simplicidad usamos registros de 8 bits."}}},{id:"alu",title:"ALU (Unidad Aritmtico-Lgica)",description:"Ejecuta operaciones aritmticas y lgicas",duration:2500,animation:{type:"highlight",targets:["ALU"],data:{description:"Ejecuta operaciones aritmticas (como ADD + y SUB ) y lgicas.",icon:""}}},{id:"control-unit",title:"Unidad de Control",description:"Coordina el funcionamiento de todos los componentes",duration:2500,animation:{type:"highlight",targets:["control-unit"],data:{description:"Coordina el funcionamiento de todos los componentes internos de la CPU.",components:["Decodificador","INSTRUCCIN"]}}},{id:"flags",title:"Registro de Flags",description:"Indicadores del estado de las operaciones",duration:2e3,animation:{type:"highlight",targets:["FLAGS"],data:{description:"Contiene indicadores del estado: C (Carry) y Z (Zero)",flags:["C","Z"]}}}]},"registers-overview":{title:"Registros de la CPU",description:"Visualiza los diferentes tipos de registros y sus funciones",steps:[{id:"general-purpose",title:"Registros de Propsito General",description:"AL, BL, CL, DL - registros para datos",duration:2500,animation:{type:"highlight",targets:["AL","BL","CL","DL"],data:{description:"Las instrucciones utilizan estos registros como operandos: AL, BL, CL, DL.",registers:["AL","BL","CL","DL"]}}},{id:"instruction-pointer",title:"Puntero de Instruccin (IP)",description:"Contiene la direccin de la prxima instruccin",duration:2e3,animation:{type:"highlight",targets:["IP"],data:{description:"Contiene la direccin de la prxima instruccin que se ejecutar.",color:"red"}}},{id:"instruction-register",title:"Registro de Instruccin (IR)",description:"Contiene la instruccin en curso",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{description:"Contiene la instruccin en curso para su decodificacin y ejecucin.",color:"purple"}}},{id:"memory-registers",title:"Registros de Memoria",description:"MAR y MBR - para comunicacin con memoria",duration:2500,animation:{type:"highlight",targets:["MAR","MBR"],data:{description:"MAR: direccin de memoria. MBR: datos transferidos.",registers:["MAR","MBR"]}}}]},"memory-structure":{title:"Estructura de Memoria",description:"Visualiza la organizacin de la memoria RAM y los buses",steps:[{id:"memory-grid",title:"Matriz de Memoria",description:"256 celdas organizadas en 16x16",duration:3e3,animation:{type:"highlight",targets:["memory-grid"],data:{description:"Compuesta por 256 celdas, cada una de 1 byte. Las direcciones y contenidos estn representados en hexadecimal.",size:"16x16",cells:256}}},{id:"addressing",title:"Direccin de Memoria",description:"Formacin de direcciones hexadecimales",duration:2500,animation:{type:"highlight",targets:["address-example"],data:{description:"La direccin 12h se obtiene de la interseccin de la fila 1 y la columna 2.",example:"12h = fila 1, columna 2"}}},{id:"data-bus",title:"Bus de Datos",description:"Transferencia bidireccional de datos",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{description:"Transfiere entre CPU y memoria en ambos sentidos. Es bidireccional.",direction:"bidirectional"}}},{id:"address-bus",title:"Bus de Direcciones",description:"Envo de direcciones a memoria",duration:2e3,animation:{type:"flow",targets:["address-bus"],data:{description:"Enva desde la CPU a la memoria la direccin de la celda a leer o escribir. Es unidireccional.",direction:"unidirectional"}}},{id:"control-bus",title:"Buses de Control",description:"Seales de control para memoria",duration:2e3,animation:{type:"highlight",targets:["control-bus"],data:{description:"Transmiten las rdenes de lectura o escritura hacia la memoria.",signals:["rd","wr"]}}}]},"fetch-decode-execute":{title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instruccin",steps:[{id:"fetch",title:"Fase Fetch",description:"La CPU lee la instruccin desde memoria",duration:2e3,animation:{type:"flow",targets:["IP","MAR","MBR"],data:{from:"IP",to:"MBR",value:"A1"}}},{id:"decode",title:"Fase Decode",description:"La CPU interpreta la instruccin",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{instruction:"MOV AL, 5"}}},{id:"execute",title:"Fase Execute",description:"La CPU ejecuta la operacin",duration:2e3,animation:{type:"transform",targets:["AL"],data:{newValue:"05"}}}]},"memory-access":{title:"Acceso a Memoria",description:"Cmo la CPU lee y escribe en memoria RAM",steps:[{id:"address-setup",title:"Configurar Direccin",description:"La CPU coloca la direccin en el MAR",duration:1500,animation:{type:"highlight",targets:["MAR"],data:{address:"A0"}}},{id:"memory-read",title:"Lectura de Memoria",description:"El contenido se transfiere al MBR",duration:1500,animation:{type:"flow",targets:["memory-cell-A0","MBR"],data:{from:"memory",to:"MBR",value:"42"}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se mueven al registro destino",duration:1500,animation:{type:"flow",targets:["MBR","AL"],data:{from:"MBR",to:"AL",value:"42"}}}]},"register-transfer":{title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU",steps:[{id:"source-read",title:"Leer Registro Origen",description:"El valor se lee del registro origen",duration:1e3,animation:{type:"highlight",targets:["AL"],data:{value:"25"}}},{id:"bus-transfer",title:"Transferencia por Bus",description:"Los datos viajan por el bus interno",duration:1500,animation:{type:"flow",targets:["AL","BL"],data:{from:"AL",to:"BL",value:"25"}}},{id:"destination-write",title:"Escribir Registro Destino",description:"El valor se almacena en el registro destino",duration:1e3,animation:{type:"transform",targets:["BL"],data:{newValue:"25"}}}]},"alu-operation":{title:"Operacin ALU",description:"Proceso de operacin aritmtica o lgica",steps:[{id:"operand-load",title:"Cargar Operandos",description:"Los operandos se cargan en la ALU",duration:1500,animation:{type:"highlight",targets:["AL","BL"],data:{operand1:"10",operand2:"05"}}},{id:"operation-execute",title:"Ejecutar Operacin",description:"La ALU realiza la operacin",duration:2e3,animation:{type:"sequence",targets:["ALU"],data:{operation:"ADD",result:"15"}}},{id:"result-store",title:"Almacenar Resultado",description:"El resultado se guarda en el registro destino",duration:1500,animation:{type:"transform",targets:["AL"],data:{newValue:"15"}}}]},"bus-communication":{title:"Comunicacin por Bus",description:"Cmo los componentes se comunican a travs del bus",steps:[{id:"bus-request",title:"Solicitud de Bus",description:"Un componente solicita acceso al bus",duration:1e3,animation:{type:"highlight",targets:["CPU"],data:{requesting:!0}}},{id:"bus-grant",title:"Concesin de Bus",description:"El bus se concede al componente solicitante",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{granted:!0}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se transfieren por el bus",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{data:"A1B2",direction:"CPU-to-Memory"}}},{id:"bus-release",title:"Liberacin de Bus",description:"El bus se libera para otros componentes",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{released:!0}}}]}},Noe=x.memo(({concept:t,onClose:e,className:n})=>{const[i,r]=x.useState(0),[s,o]=x.useState(!1),[a,l]=x.useState(!1),[c,u]=x.useState(!1),d=Aoe[t],f=d.steps[i],p=i===0,g=i===d.steps.length-1;x.useEffect(()=>{if(s){const _=setTimeout(()=>{g?o(!1):r(E=>E+1)},f.duration);return()=>clearTimeout(_)}},[s,i,g,f.duration]);const m=x.useCallback(()=>{g||r(_=>_+1)},[g]),v=x.useCallback(()=>{p||r(_=>_-1)},[p]),y=x.useCallback(()=>{r(0),o(!1)},[]),b=x.useCallback(()=>{o(!s)},[s]),w=x.useCallback(()=>{l(!a)},[a]),k=()=>{const{type:_,targets:E,data:C}=f.animation;switch(_){case"highlight":return h.jsxs("div",{className:"relative",children:[E.map((P,T)=>h.jsx("div",{className:"absolute inset-0 animate-pulse rounded border-2 border-mantis-400 bg-mantis-400/20",style:{animationDelay:`${T*200}ms`}},T)),C&&h.jsx("div",{className:"absolute right-2 top-2 rounded bg-mantis-500 px-2 py-1 text-xs text-white",children:Object.entries(C).map(([P,T])=>h.jsxs("div",{children:[P,": ",String(T)]},P))})]});case"flow":return h.jsxs("div",{className:"relative",children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${"from"in C&&C.from||"0,0"} L ${"to"in C&&C.to||"100,100"}`,stroke:"url(#flowGradient)",strokeWidth:"3",strokeDasharray:"10,5",className:"animate-pulse"})]}),"value"in C&&C.value&&h.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:h.jsx("div",{className:"rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:C.value})})]});case"transform":return h.jsxs("div",{className:"relative",children:[E.map((P,T)=>h.jsx("div",{className:"absolute inset-0 animate-ping rounded bg-mantis-400/30",style:{animationDelay:`${T*300}ms`}},T)),"newValue"in C&&C.newValue&&h.jsxs("div",{className:"absolute left-2 top-2 rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:["Nuevo: ",C.newValue]})]});case"sequence":return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"rounded-lg bg-mantis-500 px-4 py-2 font-mono text-sm text-white",children:"operation"in C&&C.operation?C.operation:"Operacin"})}),"result"in C&&C.result&&h.jsxs("div",{className:"absolute bottom-2 right-2 rounded bg-green-500 px-2 py-1 font-mono text-xs text-white",children:["= ",C.result]})]});default:return null}};return h.jsx("div",{className:ne("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",a&&"p-0",n),children:h.jsxs("div",{className:ne("rounded-lg border border-stone-600 bg-stone-900 shadow-xl",a?"size-full":"max-h-[90vh] w-full max-w-4xl"),children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:d.title}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_t,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"text-stone-400 hover:text-mantis-400",children:h.jsx(Ye,{icon:SL})}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:w,className:"text-stone-400 hover:text-mantis-400",children:h.jsx(Ye,{icon:a?BY:ZY})}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:""})]})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-400",children:[h.jsxs("span",{children:["Paso ",i+1," de ",d.steps.length]}),h.jsx("span",{children:""}),h.jsxs("span",{children:[f.duration/1e3,"s"]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(i+1)/d.steps.length*100}%`}})})]}),h.jsxs("div",{className:"flex-1 p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:f.title}),h.jsx("p",{className:"text-sm text-stone-300",children:f.description})]}),h.jsxs("div",{className:"relative h-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:[k(),c&&h.jsxs("div",{className:"absolute left-2 top-2 max-w-xs rounded border border-stone-600 bg-stone-900/90 p-3",children:[h.jsx("h4",{className:"mb-2 font-medium text-mantis-400",children:"Informacin"}),h.jsx("p",{className:"text-xs text-stone-300",children:d.description}),h.jsxs("div",{className:"mt-2 text-xs text-stone-400",children:[h.jsxs("div",{children:["Tipo de animacin: ",f.animation.type]}),h.jsxs("div",{children:["Elementos: ",f.animation.targets.join(", ")]})]})]})]})]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(_t,{variant:"outline",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx(Ye,{icon:zY}),"Reiniciar"]}),h.jsx(_t,{variant:"outline",size:"sm",onClick:v,disabled:p,className:"flex items-center gap-1",children:"Anterior"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(_t,{variant:"outline",size:"sm",onClick:b,className:"flex items-center gap-1",children:[h.jsx(Ye,{icon:s?Uh:Eb}),s?"Pausar":"Reproducir"]}),h.jsx(_t,{variant:"outline",size:"sm",onClick:m,disabled:g,className:"flex items-center gap-1",children:"Siguiente"})]})]})})]})})});Noe.displayName="ConceptVisualizer";const Poe=[{id:"cpu-components",title:"Componentes de la CPU",description:"Aprende sobre los componentes principales de la CPU: ALU, Unidad de Control y registros",difficulty:"beginner",estimatedTime:12,steps:[{id:"intro",title:"Introduccin a la CPU",description:"Qu es una CPU y para qu sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos. En VonSim8, se basa en el procesador Intel 8086 de 16 bits, pero por simplicidad usamos registros de 8 bits.",type:"explanation",completed:!1},{id:"alu",title:"ALU (Unidad Aritmtico-Lgica)",description:"El componente que ejecuta operaciones matemticas y lgicas",content:"La ALU ejecuta operaciones aritmticas (como ADD + y SUB ) y lgicas. Es el componente que realiza los clculos dentro de la CPU. En el diagrama, puedes ver la ALU representada como un bloque azul con un cono de engranaje.",type:"explanation",completed:!1},{id:"control-unit",title:"Unidad de Control (UC)",description:"Coordina el funcionamiento de todos los componentes",content:"La Unidad de Control coordina el funcionamiento de todos los componentes internos de la CPU. Contiene el decodificador que interpreta las instrucciones y genera las seales de control necesarias para ejecutar cada operacin.",type:"explanation",completed:!1},{id:"flags",title:"Registro de Flags",description:"Indicadores del estado de las operaciones",content:"El registro FLAGS contiene indicadores del estado de las operaciones. Los flags ms importantes son C (Carry) y Z (Zero). El flag Carry indica si hubo acarreo en una operacin, y el flag Zero indica si el resultado fue cero.",type:"explanation",completed:!1},{id:"cpu-quiz",title:"Evaluacin: Componentes de la CPU",description:"Pon a prueba tu conocimiento sobre los componentes de la CPU",type:"quiz",content:"",exercise:{question:"Cul de estos componentes ejecuta las operaciones aritmticas y lgicas en la CPU?",options:["Unidad de Control","ALU","Registros","Memoria"],correctAnswer:1,explanation:"La ALU (Unidad Aritmtico-Lgica) es especficamente la responsable de ejecutar operaciones matemticas y lgicas dentro de la CPU."},completed:!1}]},{id:"registers",title:"Registros de la CPU",description:"Comprende los diferentes tipos de registros y sus funciones",difficulty:"beginner",estimatedTime:15,steps:[{id:"registers-intro",title:"Qu son los Registros?",description:"Memoria rpida dentro de la CPU",content:"Los registros son espacios de almacenamiento (memoria) dentro de la CPU. Son ms rpidos que la RAM pero tienen menos capacidad. Se utilizan para almacenar datos temporalmente durante la ejecucin de instrucciones.",type:"explanation",completed:!1},{id:"general-purpose",title:"Registros de Propsito General",description:"AL, BL, CL, DL - registros para datos",content:"Los registros de propsito general (AL, BL, CL, DL) son utilizados por las instrucciones como operandos. Pueden almacenar datos, direcciones o resultados de operaciones. En VonSim8, cada uno puede almacenar 8 bits (1 byte).",type:"explanation",completed:!1},{id:"instruction-pointer",title:"Puntero de Instruccin (IP)",description:"Contiene la direccin de la prxima instruccin",content:"El Puntero de Instruccin (IP) contiene la direccin de la prxima instruccin que se ejecutar. Se incrementa automticamente despus de cada instruccin para apuntar a la siguiente en memoria.",type:"explanation",completed:!1},{id:"instruction-register",title:"Registro de Instruccin (IR)",description:"Contiene la instruccin en curso",content:"El Registro de Instruccin (IR) contiene la instruccin en curso para su decodificacin y ejecucin. Es donde la CPU almacena temporalmente la instruccin que est procesando.",type:"explanation",completed:!1},{id:"memory-registers",title:"Registros de Memoria",description:"MAR y MBR - para comunicacin con memoria",content:"MAR (Memory Address Register) contiene la direccin de memoria donde se desea leer o escribir. MBR (Memory Buffer Register) contiene datos que se transfieren hacia o desde la memoria. Estos registros facilitan la comunicacin entre la CPU y la memoria RAM.",type:"explanation",completed:!1},{id:"registers-quiz",title:"Evaluacin: Registros",description:"Pon a prueba tu conocimiento sobre los registros",type:"quiz",content:"Responde correctamente para continuar con el tutorial.",exercise:{question:"Cul de estos registros contiene la direccin de la prxima instruccin a ejecutar?",options:["IR","IP","MAR","MBR"],correctAnswer:1,explanation:"El Puntero de Instruccin (IP) es el registro que contiene la direccin de la prxima instruccin que se ejecutar."},completed:!1}]},{id:"memory",title:"Memoria RAM",description:"Comprende cmo funciona la memoria principal y su acceso",difficulty:"beginner",estimatedTime:10,steps:[{id:"memory-intro",title:"Qu es la Memoria RAM?",description:"La memoria de acceso aleatorio",content:"La memoria RAM (Random Access Memory) est compuesta por 256 celdas, cada una de 1 byte. Las direcciones y contenidos estn representados en hexadecimal. Es donde se almacenan programas y datos temporalmente durante la ejecucin.",type:"explanation",completed:!1},{id:"memory-addressing",title:"Direccin de Memoria",description:"Cmo se forman las direcciones",content:"La direccin de memoria se expresa en hexadecimal y se forma combinando el nmero de fila y columna. Por ejemplo: la direccin 12h se obtiene de la interseccin de la fila 1 y la columna 2 en la matriz de memoria.",type:"explanation",completed:!1},{id:"data-bus",title:"Bus de Datos",description:"Transferencia bidireccional de datos",content:"El bus de datos transfiere informacin entre la CPU y memoria en ambos sentidos. Es bidireccional, permitiendo tanto la lectura como la escritura de datos en memoria.",type:"explanation",completed:!1},{id:"address-bus",title:"Bus de Direcciones",description:"Envo de direcciones a memoria",content:"El bus de direcciones enva desde la CPU a la memoria la direccin de la celda a leer o escribir. Es unidireccional, ya que solo la CPU puede especificar direcciones de memoria.",type:"explanation",completed:!1},{id:"control-bus",title:"Buses de Control",description:"Seales de control para memoria",content:"Los buses de control transmiten las rdenes de lectura o escritura hacia la memoria. Estas seales indican a la memoria qu operacin realizar (leer o escribir) en la direccin especificada.",type:"explanation",completed:!1},{id:"memory-quiz",title:"Evaluacin: Memoria",description:"Pon a prueba tu conocimiento sobre memoria",type:"quiz",content:"Responde correctamente para continuar con el tutorial.",exercise:{question:"Cuntas celdas de memoria tiene VonSim8 y cunto almacena cada una?",options:["128 celdas de 2 bytes","256 celdas de 1 byte","512 celdas de 1 byte","256 celdas de 2 bytes"],correctAnswer:1,explanation:"VonSim8 tiene 256 celdas de memoria, cada una capaz de almacenar 1 byte (8 bits) de informacin."},completed:!1}]},{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Aprende cmo funciona una CPU y sus componentes principales",difficulty:"beginner",estimatedTime:10,steps:[{id:"intro",title:"Introduccin a la CPU",description:"Qu es una CPU y para qu sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos.",type:"explanation",completed:!1},{id:"registers",title:"Registros de la CPU",description:"Los registros son memoria rpida dentro de la CPU",content:"Los registros almacenan datos temporalmente durante la ejecucin. Son ms rpidos que la RAM pero tienen menos capacidad.",type:"explanation",completed:!1},{id:"program-counter",title:"Puntero de Instruccin",description:"El IP indica la siguiente instruccin a ejecutar",content:"El Puntero de Instruccin (IP) se incrementa automticamente despus de cada instruccin.",type:"explanation",completed:!1}]}],JB=x.memo(({tutorial:t,onComplete:e,onClose:n,className:i})=>{var j,X;const[r,s]=x.useState(0),[o,a]=x.useState(t.steps),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,p]=x.useState(""),[g,m]=x.useState(null),v=o[r],y=r===0,b=r===o.length-1,k=o.filter($=>$.completed).length/o.length*100,_=x.useCallback(()=>{e==null||e(t.id)},[t.id,e]),E=x.useCallback(()=>{b?_():(s($=>$+1),m(null),p(""))},[b,_]),C=x.useCallback(()=>{y||(s($=>$-1),m(null),p(""))},[y]),P=x.useCallback(()=>{a($=>$.map((K,J)=>J===r?{...K,completed:!0}:K))},[r]),T=x.useCallback(()=>{if(!v.exercise)return;const $=f===v.exercise.correctAnswer.toString();m({correct:$,message:$?"Correcto!":`Incorrecto. ${v.exercise.explanation}`}),$&&(P(),setTimeout(()=>{E()},2e3))},[v,f,P,E]);x.useEffect(()=>{if(l&&v.type==="explanation"){const $=setTimeout(()=>{b?c(!1):E()},5e3);return()=>clearTimeout($)}},[l,r,b,v.type,E]);const I=$=>{switch($){case"beginner":return"text-blue-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-purple-400";default:return"text-stone-400"}},L=$=>{switch($){case"beginner":return gd;case"intermediate":return Sm;case"advanced":return UC;default:return gd}};return h.jsx("div",{className:ne("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",i),children:h.jsxs("div",{className:"max-h-[90vh] w-full max-w-2xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:t.title}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:n,className:"text-stone-400 hover:text-white",children:""})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ye,{icon:L(t.difficulty),className:I(t.difficulty)}),h.jsx("span",{className:I(t.difficulty),children:t.difficulty==="beginner"?"Bsico":t.difficulty==="intermediate"?"Intermedio":"Avanzado"})]}),h.jsx("span",{className:"text-stone-400",children:""}),h.jsxs("span",{className:"text-stone-400",children:[t.estimatedTime," min"]}),h.jsx("span",{className:"text-stone-400",children:""}),h.jsxs("span",{className:"text-stone-400",children:["Paso ",r+1," de ",o.length]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${k}%`}})})]}),h.jsxs("div",{className:"max-h-96 overflow-y-auto p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:v.title}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:v.description}),h.jsx("div",{className:"text-sm leading-relaxed text-stone-400",children:v.content})]}),v.type==="exercise"||v.type==="quiz"?h.jsxs("div",{className:"rounded-lg border border-stone-600 bg-stone-800 p-4",children:[h.jsx("h4",{className:"mb-3 font-medium text-white",children:(j=v.exercise)==null?void 0:j.question}),(X=v.exercise)!=null&&X.options?h.jsx("div",{className:"space-y-2",children:v.exercise.options.map(($,K)=>h.jsxs("label",{className:ne("flex cursor-pointer items-center gap-3 rounded border p-3 transition-colors",f===K.toString()?"border-mantis-400 bg-mantis-400/20":"border-stone-600 bg-stone-700 hover:bg-stone-600"),children:[h.jsx("input",{type:"radio",name:"answer",value:K.toString(),checked:f===K.toString(),onChange:J=>p(J.target.value),className:"text-mantis-400"}),h.jsx("span",{className:"text-stone-300",children:$})]},K))}):h.jsx("input",{type:"text",value:f,onChange:$=>p($.target.value),placeholder:"Escribe tu respuesta...",className:"w-full rounded border border-stone-600 bg-stone-700 p-2 text-white"}),g&&h.jsx("div",{className:ne("mt-3 rounded border p-3",g.correct?"border-green-400 bg-green-400/20 text-green-400":"border-red-400 bg-red-400/20 text-red-400"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ye,{icon:g.correct?sJ:Ab}),g.message]})}),v.hints&&v.hints.length>0&&h.jsxs("div",{className:"mt-3",children:[h.jsxs(_t,{variant:"ghost",size:"sm",onClick:()=>d(!u),className:"text-mantis-400 hover:text-mantis-300",children:[h.jsx(Ye,{icon:gd,className:"mr-2"}),u?"Ocultar":"Mostrar"," Pistas"]}),u&&h.jsx("div",{className:"mt-2 rounded border border-stone-600 bg-stone-700 p-3",children:h.jsx("ul",{className:"space-y-1 text-sm text-stone-300",children:v.hints.map(($,K)=>h.jsxs("li",{children:[" ",$]},K))})})]})]}):null]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(_t,{variant:"outline",size:"sm",onClick:C,disabled:y,className:"flex items-center gap-1",children:[h.jsx(Ye,{icon:kL}),"Anterior"]})}),h.jsx("div",{className:"flex items-center gap-2",children:v.type==="exercise"||v.type==="quiz"?h.jsx(_t,{size:"sm",onClick:T,disabled:!f,className:"bg-mantis-600 hover:bg-mantis-700",children:"Verificar Respuesta"}):h.jsxs(_t,{size:"sm",onClick:E,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700",children:[b?"Completar Tutorial":"Siguiente",!b&&h.jsx(Ye,{icon:zC})]})})]})})]})})});JB.displayName="InteractiveTutorial";const ZB=x.memo(({isOpen:t=!1,onShowProgress:e})=>{const[n,i]=x.useState(!1),[r,s]=x.useState(!1),[o,a]=x.useState(null),l=f=>{console.log("Tutorial seleccionado:",f),a(f),s(!0)},c=()=>{s(!1),a(null)},u=[{id:"progress",title:"Progreso Educativo",description:"Ver logros y estadsticas de aprendizaje",icon:VC,color:"text-yellow-400",action:()=>e==null?void 0:e()},{id:"tutorials",title:"Tutoriales Interactivos",description:"Aprende paso a paso con ejercicios",icon:rJ,color:"text-blue-400",action:()=>i(!n)}],d=[{id:"cpu-components",title:"Componentes de la CPU",description:"ALU, Unidad de Control y registros",difficulty:"Bsico",duration:"12 min"},{id:"registers",title:"Registros de la CPU",description:"Tipos y funciones de registros",difficulty:"Bsico",duration:"15 min"},{id:"memory",title:"Memoria RAM",description:"Funcionamiento de la memoria principal",difficulty:"Bsico",duration:"10 min"}];return h.jsxs(h.Fragment,{children:[t&&h.jsx("div",{className:"fixed bottom-12 left-1/2 z-50 -translate-x-1/2",children:h.jsxs("div",{className:"min-w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 text-center",children:[h.jsx("h3",{className:"mb-1 text-lg font-semibold text-mantis-400",children:"Centro de Aprendizaje"}),h.jsx("p",{className:"text-sm text-stone-400",children:"Explora herramientas educativas interactivas"})]}),h.jsx("div",{className:"space-y-2",children:u.map(f=>h.jsx("div",{children:f.id==="tutorials"?h.jsxs("div",{children:[h.jsxs("button",{onClick:f.action,className:ne("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Ye,{icon:f.icon,className:ne("text-lg",f.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:f.title}),h.jsx("div",{className:"text-sm text-stone-400",children:f.description})]}),h.jsx(Ye,{icon:Eb,className:ne("text-sm text-stone-400",n&&"text-blue-400")})]}),n&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:d.map(p=>h.jsx("button",{onClick:()=>l(p.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:p.title}),h.jsx("div",{className:"text-xs text-stone-400",children:p.description})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-xs text-blue-400",children:p.difficulty}),h.jsx("div",{className:"text-xs text-stone-500",children:p.duration})]})]})},p.id))})]}):h.jsxs("button",{onClick:f.action,className:ne("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Ye,{icon:f.icon,className:ne("text-lg",f.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:f.title}),h.jsx("div",{className:"text-sm text-stone-400",children:f.description})]})]})},f.id))}),h.jsx("div",{className:"mt-4 border-t border-stone-600 pt-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsx("span",{children:"Herramientas educativas"}),h.jsx("span",{children:"VonSim8"})]})})]})}),r&&o&&(()=>{const f=Poe.find(p=>p.id===o);return console.log("Tutorial encontrado:",f),f?h.jsx(JB,{tutorial:f,onComplete:c,onClose:()=>{console.log("Cerrando tutorial"),s(!1),a(null)}}):(console.error("Tutorial no encontrado:",o),null)})()]})});ZB.displayName="EducationalMenu";const k4=[{id:"first_program",type:"programs_written",title:"Primer Programa",description:"Escribe tu primer programa en ensamblador",icon:gd,requirement:1,current:0,unlocked:!1,points:10},{id:"instruction_master",type:"instructions_executed",title:"Maestro de Instrucciones",description:"Ejecuta 100 instrucciones",icon:rR,requirement:100,current:0,unlocked:!1,points:25},{id:"cpu_components_master",type:"concept_mastered",title:"Conocedor de Componentes",description:"Comprende los componentes principales de la CPU",icon:sR,requirement:1,current:0,unlocked:!1,points:20},{id:"registers_expert",type:"concept_mastered",title:"Experto en Registros",description:"Domina los diferentes tipos de registros",icon:rR,requirement:1,current:0,unlocked:!1,points:25},{id:"memory_explorer",type:"concept_mastered",title:"Explorador de Memoria",description:"Comprende el funcionamiento de la memoria RAM",icon:lJ,requirement:1,current:0,unlocked:!1,points:15},{id:"cpu_architect",type:"concept_mastered",title:"Arquitecto de CPU",description:"Domina los conceptos de arquitectura de CPU",icon:sR,requirement:1,current:0,unlocked:!1,points:30},{id:"persistent_learner",type:"time_spent",title:"Estudiante Persistente",description:"Pasa 30 minutos aprendiendo",icon:Sm,requirement:30,current:0,unlocked:!1,points:20},{id:"tutorial_master",type:"tutorials_completed",title:"Maestro de Tutoriales",description:"Completa un tutorial interactivo educativo",icon:VC,requirement:1,current:0,unlocked:!1,points:40}],_4=[{id:"beginner",name:"Principiante",description:"Conceptos bsicos: CPU, registros y memoria",concepts:["cpu-components","registers","memory"],requiredPoints:0,unlocked:!0,completed:!1},{id:"intermediate",name:"Intermedio",description:"Operaciones aritmticas y ciclo de instruccin",concepts:["alu","bus"],requiredPoints:50,unlocked:!1,completed:!1},{id:"advanced",name:"Avanzado",description:"Interrupciones y programacin compleja",concepts:["flags","stack","interrupts"],requiredPoints:100,unlocked:!1,completed:!1}],QB=x.memo(({className:t,isVisible:e=!1,onClose:n})=>{const[i,r]=x.useState(k4),[s,o]=x.useState(_4),[a,l]=x.useState(0),[c,u]=x.useState(0);x.useEffect(()=>{const v=localStorage.getItem("vonsim8-educational-progress");if(v)try{const y=JSON.parse(v);r(y.achievements||k4),o(y.levels||_4),l(y.totalPoints||0),u(y.sessionTime||0)}catch{}},[]);const d=x.useCallback(()=>{const v={achievements:i,levels:s,totalPoints:a,sessionTime:c,lastSaved:Date.now()};localStorage.setItem("vonsim8-educational-progress",JSON.stringify(v))},[i,s,a,c]),f=x.useCallback((v,y)=>{r(b=>{const w=b.map(_=>{if(_.type===v){const E=Math.min(_.current+y,_.requirement),C=_.unlocked,P=E>=_.requirement;return!C&&P&&p(_),{..._,current:E,unlocked:P}}return _}),k=w.filter(_=>_.unlocked).reduce((_,E)=>_+E.points,0);return l(k),o(_=>_.map(E=>({...E,unlocked:k>=E.requiredPoints}))),w})},[]),p=v=>{const y=document.createElement("div");y.className=ne("fixed right-4 top-4 z-50 rounded-lg border-2 p-4 shadow-lg","animate-slide-in-right bg-mantis-500 text-white"),y.innerHTML=`
      <div class="flex items-center gap-3">
        <FontAwesomeIcon icon="${v.icon}" class="text-2xl" />
        <div>
          <div class="font-bold">Logro Desbloqueado!</div>
          <div class="text-sm">${v.title}</div>
        </div>
      </div>
    `,document.body.appendChild(y),setTimeout(()=>{y.remove()},3e3)};if(x.useEffect(()=>{const v=y=>{const{type:b,value:w=1}=y.detail;f(b,w)};return window.addEventListener("educational-progress",v),()=>window.removeEventListener("educational-progress",v)},[f]),x.useEffect(()=>{const v=setInterval(()=>{u(y=>{const b=y+1;return b%60===0&&f("time_spent",1),b})},1e3);return()=>clearInterval(v)},[f]),x.useEffect(()=>{const v=setInterval(d,3e4);return()=>clearInterval(v)},[d]),!e)return null;const g=i.filter(v=>v.unlocked),m=s.filter(v=>v.unlocked);return h.jsxs("div",{className:ne("fixed bottom-20 right-4 z-50 h-80 w-96 rounded-lg border border-stone-600 bg-stone-900 shadow-xl",t),children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-3",children:[h.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-mantis-400",children:[h.jsx(Ye,{icon:VC}),"Progreso Educativo"]}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:n,className:"text-xs text-stone-400 hover:text-white",children:""})]}),h.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto p-3",children:[h.jsxs("div",{className:"rounded-lg bg-stone-800 p-3 text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-mantis-400",children:a}),h.jsx("div",{className:"text-xs text-stone-400",children:"Puntos Totales"})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Ye,{icon:Sm}),"Niveles de Aprendizaje"]}),h.jsx("div",{className:"space-y-1",children:s.map(v=>h.jsxs("div",{className:ne("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10 text-mantis-400":"border-stone-600 bg-stone-800 text-stone-500"),children:[h.jsx("div",{className:"font-medium",children:v.name}),h.jsx("div",{className:"text-stone-400",children:v.description}),!v.unlocked&&h.jsxs("div",{className:"mt-1 text-stone-500",children:["Requiere ",v.requiredPoints," puntos"]})]},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Ye,{icon:FY}),"Logros (",g.length,"/",i.length,")"]}),h.jsx("div",{className:"space-y-1",children:i.map(v=>h.jsx("div",{className:ne("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10":"border-stone-600 bg-stone-800"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ye,{icon:v.icon,className:v.unlocked?"text-mantis-400":"text-stone-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:ne("font-medium",v.unlocked?"text-mantis-400":"text-stone-400"),children:v.title}),h.jsx("div",{className:"text-stone-500",children:v.description}),h.jsxs("div",{className:"mt-1",children:[h.jsx("div",{className:"h-1 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-1 rounded-full bg-mantis-400 transition-all duration-300",style:{width:`${v.current/v.requirement*100}%`}})}),h.jsxs("div",{className:"mt-1 text-stone-500",children:[v.current,"/",v.requirement]})]})]})]})},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Ye,{icon:WY}),"Estadsticas"]}),h.jsxs("div",{className:"text-xs text-stone-400",children:[h.jsxs("div",{children:["Tiempo de sesin: ",Math.floor(c/60),"m ",c%60,"s"]}),h.jsxs("div",{children:["Niveles completados: ",m.length,"/",s.length]})]})]})]})]})});QB.displayName="EducationalProgress";function _y(t,[e,n]){return Math.min(n,Math.max(e,t))}function Moe(t,e=globalThis==null?void 0:globalThis.document){const n=Mr(t);x.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var Roe="DismissableLayer",jk="dismissableLayer.update",Toe="dismissableLayer.pointerDownOutside",Ooe="dismissableLayer.focusOutside",C4,e$=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tm=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=x.useContext(e$),[u,d]=x.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=x.useState({}),g=xt(e,C=>d(C)),m=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(v),b=u?m.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,k=b>=y,_=Doe(C=>{const P=C.target,T=[...c.branches].some(I=>I.contains(P));!k||T||(r==null||r(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),E=joe(C=>{const P=C.target;[...c.branches].some(I=>I.contains(P))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return Moe(C=>{b===c.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),x.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(C4=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),E4(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=C4)}},[u,f,n,c]),x.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),E4())},[u,c]),x.useEffect(()=>{const C=()=>p({});return document.addEventListener(jk,C),()=>document.removeEventListener(jk,C)},[]),h.jsx(Qe.div,{...l,ref:g,style:{pointerEvents:w?k?"auto":"none":void 0,...t.style},onFocusCapture:ke(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ke(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ke(t.onPointerDownCapture,_.onPointerDownCapture)})});Tm.displayName=Roe;var Ioe="DismissableLayerBranch",t$=x.forwardRef((t,e)=>{const n=x.useContext(e$),i=x.useRef(null),r=xt(e,i);return x.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(Qe.div,{...t,ref:r})});t$.displayName=Ioe;function Doe(t,e=globalThis==null?void 0:globalThis.document){const n=Mr(t),i=x.useRef(!1),r=x.useRef(()=>{});return x.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){n$(Toe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function joe(t,e=globalThis==null?void 0:globalThis.document){const n=Mr(t),i=x.useRef(!1);return x.useEffect(()=>{const r=s=>{s.target&&!i.current&&n$(Ooe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function E4(){const t=new CustomEvent(jk);document.dispatchEvent(t)}function n$(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?CC(r,s):r.dispatchEvent(s)}var Loe=Tm,Boe=t$,o1=0;function JE(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??A4()),document.body.insertAdjacentElement("beforeend",t[1]??A4()),o1++,()=>{o1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),o1--}},[])}function A4(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var a1="focusScope.autoFocusOnMount",l1="focusScope.autoFocusOnUnmount",N4={bubbles:!1,cancelable:!0},$oe="FocusScope",Jb=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=x.useState(null),c=Mr(r),u=Mr(s),d=x.useRef(null),f=xt(e,m=>l(m)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(i){let m=function(w){if(p.paused||!a)return;const k=w.target;a.contains(k)?d.current=k:Oa(d.current,{select:!0})},v=function(w){if(p.paused||!a)return;const k=w.relatedTarget;k!==null&&(a.contains(k)||Oa(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&Oa(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const b=new MutationObserver(y);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),b.disconnect()}}},[i,a,p.paused]),x.useEffect(()=>{if(a){M4.add(p);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(a1,N4);a.addEventListener(a1,c),a.dispatchEvent(y),y.defaultPrevented||(Foe(Woe(i$(a)),{select:!0}),document.activeElement===m&&Oa(a))}return()=>{a.removeEventListener(a1,c),setTimeout(()=>{const y=new CustomEvent(l1,N4);a.addEventListener(l1,u),a.dispatchEvent(y),y.defaultPrevented||Oa(m??document.body,{select:!0}),a.removeEventListener(l1,u),M4.remove(p)},0)}}},[a,c,u,p]);const g=x.useCallback(m=>{if(!n&&!i||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(v&&y){const b=m.currentTarget,[w,k]=zoe(b);w&&k?!m.shiftKey&&y===k?(m.preventDefault(),n&&Oa(w,{select:!0})):m.shiftKey&&y===w&&(m.preventDefault(),n&&Oa(k,{select:!0})):y===b&&m.preventDefault()}},[n,i,p.paused]);return h.jsx(Qe.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Jb.displayName=$oe;function Foe(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(Oa(i,{select:e}),document.activeElement!==n)return}function zoe(t){const e=i$(t),n=P4(e,t),i=P4(e.reverse(),t);return[n,i]}function i$(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function P4(t,e){for(const n of t)if(!Uoe(n,{upTo:e}))return n}function Uoe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Voe(t){return t instanceof HTMLInputElement&&"select"in t}function Oa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Voe(t)&&e&&t.select()}}var M4=Hoe();function Hoe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=R4(t,e),t.unshift(e)},remove(e){var n;t=R4(t,e),(n=t[0])==null||n.resume()}}}function R4(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function Woe(t){return t.filter(e=>e.tagName!=="A")}const Goe=["top","right","bottom","left"],$l=Math.min,br=Math.max,Cy=Math.round,qg=Math.floor,So=t=>({x:t,y:t}),Koe={left:"right",right:"left",bottom:"top",top:"bottom"},Xoe={start:"end",end:"start"};function Lk(t,e,n){return br(t,$l(e,n))}function pa(t,e){return typeof t=="function"?t(e):t}function ma(t){return t.split("-")[0]}function Sf(t){return t.split("-")[1]}function ZE(t){return t==="x"?"y":"x"}function QE(t){return t==="y"?"height":"width"}const qoe=new Set(["top","bottom"]);function ho(t){return qoe.has(ma(t))?"y":"x"}function eA(t){return ZE(ho(t))}function Yoe(t,e,n){n===void 0&&(n=!1);const i=Sf(t),r=eA(t),s=QE(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ey(o)),[o,Ey(o)]}function Joe(t){const e=Ey(t);return[Bk(t),e,Bk(e)]}function Bk(t){return t.replace(/start|end/g,e=>Xoe[e])}const T4=["left","right"],O4=["right","left"],Zoe=["top","bottom"],Qoe=["bottom","top"];function eae(t,e,n){switch(t){case"top":case"bottom":return n?e?O4:T4:e?T4:O4;case"left":case"right":return e?Zoe:Qoe;default:return[]}}function tae(t,e,n,i){const r=Sf(t);let s=eae(ma(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(Bk)))),s}function Ey(t){return t.replace(/left|right|bottom|top/g,e=>Koe[e])}function nae(t){return{top:0,right:0,bottom:0,left:0,...t}}function r$(t){return typeof t!="number"?nae(t):{top:t,right:t,bottom:t,left:t}}function Ay(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function I4(t,e,n){let{reference:i,floating:r}=t;const s=ho(e),o=eA(e),a=QE(o),l=ma(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(Sf(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const iae=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=I4(c,i,l),f=i,p={},g=0;for(let m=0;m<a.length;m++){const{name:v,fn:y}=a[m],{x:b,y:w,data:k,reset:_}=await y({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=b??u,d=w??d,p={...p,[v]:{...p[v],...k}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:d}=I4(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:p}};async function nm(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=pa(e,t),g=r$(p),v=a[f?d==="floating"?"reference":"floating":d],y=Ay(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),b=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},_=Ay(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:l}):b);return{top:(y.top-_.top+g.top)/k.y,bottom:(_.bottom-y.bottom+g.bottom)/k.y,left:(y.left-_.left+g.left)/k.x,right:(_.right-y.right+g.right)/k.x}}const rae=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=pa(t,e)||{};if(c==null)return{};const d=r$(u),f={x:n,y:i},p=eA(r),g=QE(p),m=await o.getDimensions(c),v=p==="y",y=v?"top":"left",b=v?"bottom":"right",w=v?"clientHeight":"clientWidth",k=s.reference[g]+s.reference[p]-f[p]-s.floating[g],_=f[p]-s.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=E?E[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[w]||s.floating[g]);const P=k/2-_/2,T=C/2-m[g]/2-1,I=$l(d[y],T),L=$l(d[b],T),j=I,X=C-m[g]-L,$=C/2-m[g]/2+P,K=Lk(j,$,X),J=!l.arrow&&Sf(r)!=null&&$!==K&&s.reference[g]/2-($<j?I:L)-m[g]/2<0,Q=J?$<j?$-j:$-X:0;return{[p]:f[p]+Q,data:{[p]:K,centerOffset:$-K-Q,...J&&{alignmentOffset:Q}},reset:J}}}),sae=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=pa(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ma(r),b=ho(a),w=ma(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(w||!m?[Ey(a)]:Joe(a)),E=g!=="none";!f&&E&&_.push(...tae(a,m,g,k));const C=[a,..._],P=await nm(e,v),T=[];let I=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&T.push(P[y]),d){const $=Yoe(r,o,k);T.push(P[$[0]],P[$[1]])}if(I=[...I,{placement:r,overflows:T}],!T.every($=>$<=0)){var L,j;const $=(((L=s.flip)==null?void 0:L.index)||0)+1,K=C[$];if(K&&(!(d==="alignment"?b!==ho(K):!1)||I.every(W=>W.overflows[0]>0&&ho(W.placement)===b)))return{data:{index:$,overflows:I},reset:{placement:K}};let J=(j=I.filter(Q=>Q.overflows[0]<=0).sort((Q,W)=>Q.overflows[1]-W.overflows[1])[0])==null?void 0:j.placement;if(!J)switch(p){case"bestFit":{var X;const Q=(X=I.filter(W=>{if(E){const U=ho(W.placement);return U===b||U==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(U=>U>0).reduce((U,re)=>U+re,0)]).sort((W,U)=>W[1]-U[1])[0])==null?void 0:X[0];Q&&(J=Q);break}case"initialPlacement":J=a;break}if(r!==J)return{reset:{placement:J}}}return{}}}};function D4(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function j4(t){return Goe.some(e=>t[e]>=0)}const oae=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=pa(t,e);switch(i){case"referenceHidden":{const s=await nm(e,{...r,elementContext:"reference"}),o=D4(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:j4(o)}}}case"escaped":{const s=await nm(e,{...r,altBoundary:!0}),o=D4(s,n.floating);return{data:{escapedOffsets:o,escaped:j4(o)}}}default:return{}}}}},s$=new Set(["left","top"]);async function aae(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=ma(n),a=Sf(n),l=ho(n)==="y",c=s$.has(o)?-1:1,u=s&&l?-1:1,d=pa(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const lae=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await aae(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},cae=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:b}=v;return{x:y,y:b}}},...l}=pa(t,e),c={x:n,y:i},u=await nm(e,l),d=ho(ma(r)),f=ZE(d);let p=c[f],g=c[d];if(s){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=p+u[v],w=p-u[y];p=Lk(b,p,w)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=g+u[v],w=g-u[y];g=Lk(b,g,w)}const m=a.fn({...e,[f]:p,[d]:g});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[f]:s,[d]:o}}}}}},uae=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=pa(t,e),u={x:n,y:i},d=ho(r),f=ZE(d);let p=u[f],g=u[d];const m=pa(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=f==="y"?"height":"width",k=s.reference[f]-s.floating[w]+v.mainAxis,_=s.reference[f]+s.reference[w]-v.mainAxis;p<k?p=k:p>_&&(p=_)}if(c){var y,b;const w=f==="y"?"width":"height",k=s$.has(ma(r)),_=s.reference[d]-s.floating[w]+(k&&((y=o.offset)==null?void 0:y[d])||0)+(k?0:v.crossAxis),E=s.reference[d]+s.reference[w]+(k?0:((b=o.offset)==null?void 0:b[d])||0)-(k?v.crossAxis:0);g<_?g=_:g>E&&(g=E)}return{[f]:p,[d]:g}}}},dae=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=pa(t,e),u=await nm(e,c),d=ma(r),f=Sf(r),p=ho(r)==="y",{width:g,height:m}=s.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,v=f==="end"?"top":"bottom");const b=m-u.top-u.bottom,w=g-u.left-u.right,k=$l(m-u[v],b),_=$l(g-u[y],w),E=!e.middlewareData.shift;let C=k,P=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=w),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=b),E&&!f){const I=br(u.left,0),L=br(u.right,0),j=br(u.top,0),X=br(u.bottom,0);p?P=g-2*(I!==0||L!==0?I+L:br(u.left,u.right)):C=m-2*(j!==0||X!==0?j+X:br(u.top,u.bottom))}await l({...e,availableWidth:P,availableHeight:C});const T=await o.getDimensions(a.floating);return g!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}};function Zb(){return typeof window<"u"}function kf(t){return o$(t)?(t.nodeName||"").toLowerCase():"#document"}function Nr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Mo(t){var e;return(e=(o$(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function o$(t){return Zb()?t instanceof Node||t instanceof Nr(t).Node:!1}function Is(t){return Zb()?t instanceof Element||t instanceof Nr(t).Element:!1}function No(t){return Zb()?t instanceof HTMLElement||t instanceof Nr(t).HTMLElement:!1}function L4(t){return!Zb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Nr(t).ShadowRoot}const fae=new Set(["inline","contents"]);function Om(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Ds(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!fae.has(r)}const hae=new Set(["table","td","th"]);function pae(t){return hae.has(kf(t))}const mae=[":popover-open",":modal"];function Qb(t){return mae.some(e=>{try{return t.matches(e)}catch{return!1}})}const gae=["transform","translate","scale","rotate","perspective"],vae=["transform","translate","scale","rotate","perspective","filter"],yae=["paint","layout","strict","content"];function tA(t){const e=nA(),n=Is(t)?Ds(t):t;return gae.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||vae.some(i=>(n.willChange||"").includes(i))||yae.some(i=>(n.contain||"").includes(i))}function bae(t){let e=Fl(t);for(;No(e)&&!lf(e);){if(tA(e))return e;if(Qb(e))return null;e=Fl(e)}return null}function nA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xae=new Set(["html","body","#document"]);function lf(t){return xae.has(kf(t))}function Ds(t){return Nr(t).getComputedStyle(t)}function ex(t){return Is(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Fl(t){if(kf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||L4(t)&&t.host||Mo(t);return L4(e)?e.host:e}function a$(t){const e=Fl(t);return lf(e)?t.ownerDocument?t.ownerDocument.body:t.body:No(e)&&Om(e)?e:a$(e)}function im(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=a$(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=Nr(r);if(s){const a=$k(o);return e.concat(o,o.visualViewport||[],Om(r)?r:[],a&&n?im(a):[])}return e.concat(r,im(r,[],n))}function $k(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function l$(t){const e=Ds(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=No(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=Cy(n)!==s||Cy(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function iA(t){return Is(t)?t:t.contextElement}function kd(t){const e=iA(t);if(!No(e))return So(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=l$(e);let o=(s?Cy(n.width):n.width)/i,a=(s?Cy(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const wae=So(0);function c$(t){const e=Nr(t);return!nA()||!e.visualViewport?wae:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Sae(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Nr(t)?!1:e}function ru(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=iA(t);let o=So(1);e&&(i?Is(i)&&(o=kd(i)):o=kd(t));const a=Sae(s,n,i)?c$(s):So(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=Nr(s),p=i&&Is(i)?Nr(i):i;let g=f,m=$k(g);for(;m&&i&&p!==g;){const v=kd(m),y=m.getBoundingClientRect(),b=Ds(m),w=y.left+(m.clientLeft+parseFloat(b.paddingLeft))*v.x,k=y.top+(m.clientTop+parseFloat(b.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=w,c+=k,g=Nr(m),m=$k(g)}}return Ay({width:u,height:d,x:l,y:c})}function rA(t,e){const n=ex(t).scrollLeft;return e?e.left+n:ru(Mo(t)).left+n}function u$(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:rA(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function kae(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=Mo(i),a=e?Qb(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=So(1);const u=So(0),d=No(i);if((d||!d&&!s)&&((kf(i)!=="body"||Om(o))&&(l=ex(i)),No(i))){const p=ru(i);c=kd(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const f=o&&!d&&!s?u$(o,l,!0):So(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function _ae(t){return Array.from(t.getClientRects())}function Cae(t){const e=Mo(t),n=ex(t),i=t.ownerDocument.body,r=br(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=br(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+rA(t);const a=-n.scrollTop;return Ds(i).direction==="rtl"&&(o+=br(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Eae(t,e){const n=Nr(t),i=Mo(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=nA();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}const Aae=new Set(["absolute","fixed"]);function Nae(t,e){const n=ru(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=No(t)?kd(t):So(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function B4(t,e,n){let i;if(e==="viewport")i=Eae(t,n);else if(e==="document")i=Cae(Mo(t));else if(Is(e))i=Nae(e,n);else{const r=c$(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Ay(i)}function d$(t,e){const n=Fl(t);return n===e||!Is(n)||lf(n)?!1:Ds(n).position==="fixed"||d$(n,e)}function Pae(t,e){const n=e.get(t);if(n)return n;let i=im(t,[],!1).filter(a=>Is(a)&&kf(a)!=="body"),r=null;const s=Ds(t).position==="fixed";let o=s?Fl(t):t;for(;Is(o)&&!lf(o);){const a=Ds(o),l=tA(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&Aae.has(r.position)||Om(o)&&!l&&d$(t,o))?i=i.filter(u=>u!==o):r=a,o=Fl(o)}return e.set(t,i),i}function Mae(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?Qb(e)?[]:Pae(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=B4(e,u,r);return c.top=br(d.top,c.top),c.right=$l(d.right,c.right),c.bottom=$l(d.bottom,c.bottom),c.left=br(d.left,c.left),c},B4(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Rae(t){const{width:e,height:n}=l$(t);return{width:e,height:n}}function Tae(t,e,n){const i=No(e),r=Mo(e),s=n==="fixed",o=ru(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=So(0);function c(){l.x=rA(r)}if(i||!i&&!s)if((kf(e)!=="body"||Om(r))&&(a=ex(e)),i){const p=ru(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=r&&!i&&!s?u$(r,a):So(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function c1(t){return Ds(t).position==="static"}function $4(t,e){if(!No(t)||Ds(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Mo(t)===n&&(n=n.ownerDocument.body),n}function f$(t,e){const n=Nr(t);if(Qb(t))return n;if(!No(t)){let r=Fl(t);for(;r&&!lf(r);){if(Is(r)&&!c1(r))return r;r=Fl(r)}return n}let i=$4(t,e);for(;i&&pae(i)&&c1(i);)i=$4(i,e);return i&&lf(i)&&c1(i)&&!tA(i)?n:i||bae(t)||n}const Oae=async function(t){const e=this.getOffsetParent||f$,n=this.getDimensions,i=await n(t.floating);return{reference:Tae(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Iae(t){return Ds(t).direction==="rtl"}const Dae={convertOffsetParentRelativeRectToViewportRelativeRect:kae,getDocumentElement:Mo,getClippingRect:Mae,getOffsetParent:f$,getElementRects:Oae,getClientRects:_ae,getDimensions:Rae,getScale:kd,isElement:Is,isRTL:Iae};function h$(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function jae(t,e){let n=null,i;const r=Mo(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||e(),!f||!p)return;const g=qg(d),m=qg(r.clientWidth-(u+f)),v=qg(r.clientHeight-(d+p)),y=qg(u),w={rootMargin:-g+"px "+-m+"px "+-v+"px "+-y+"px",threshold:br(0,$l(1,l))||1};let k=!0;function _(E){const C=E[0].intersectionRatio;if(C!==l){if(!k)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!h$(c,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(_,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,w)}n.observe(t)}return o(!0),s}function Lae(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=iA(t),u=r||s?[...c?im(c):[],...im(e)]:[];u.forEach(y=>{r&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?jae(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[b]=y;b&&b.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?ru(t):null;l&&v();function v(){const y=ru(t);m&&!h$(m,y)&&n(),m=y,g=requestAnimationFrame(v)}return n(),()=>{var y;u.forEach(b=>{r&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const Bae=lae,$ae=cae,Fae=sae,zae=dae,Uae=oae,F4=rae,Vae=uae,Hae=(t,e,n)=>{const i=new Map,r={platform:Dae,...n},s={...r.platform,_c:i};return iae(t,e,{...r,platform:s})};var Wae=typeof document<"u",Gae=function(){},ev=Wae?x.useLayoutEffect:Gae;function Ny(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Ny(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!Ny(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function p$(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function z4(t,e){const n=p$(t);return Math.round(e*n)/n}function u1(t){const e=x.useRef(t);return ev(()=>{e.current=t}),e}function Kae(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=x.useState(i);Ny(f,i)||p(i);const[g,m]=x.useState(null),[v,y]=x.useState(null),b=x.useCallback(W=>{W!==E.current&&(E.current=W,m(W))},[]),w=x.useCallback(W=>{W!==C.current&&(C.current=W,y(W))},[]),k=s||g,_=o||v,E=x.useRef(null),C=x.useRef(null),P=x.useRef(u),T=l!=null,I=u1(l),L=u1(r),j=u1(c),X=x.useCallback(()=>{if(!E.current||!C.current)return;const W={placement:e,strategy:n,middleware:f};L.current&&(W.platform=L.current),Hae(E.current,C.current,W).then(U=>{const re={...U,isPositioned:j.current!==!1};$.current&&!Ny(P.current,re)&&(P.current=re,Kl.flushSync(()=>{d(re)}))})},[f,e,n,L,j]);ev(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,d(W=>({...W,isPositioned:!1})))},[c]);const $=x.useRef(!1);ev(()=>($.current=!0,()=>{$.current=!1}),[]),ev(()=>{if(k&&(E.current=k),_&&(C.current=_),k&&_){if(I.current)return I.current(k,_,X);X()}},[k,_,X,I,T]);const K=x.useMemo(()=>({reference:E,floating:C,setReference:b,setFloating:w}),[b,w]),J=x.useMemo(()=>({reference:k,floating:_}),[k,_]),Q=x.useMemo(()=>{const W={position:n,left:0,top:0};if(!J.floating)return W;const U=z4(J.floating,u.x),re=z4(J.floating,u.y);return a?{...W,transform:"translate("+U+"px, "+re+"px)",...p$(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:re}},[n,a,J.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:X,refs:K,elements:J,floatingStyles:Q}),[u,X,K,J,Q])}const Xae=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?F4({element:i.current,padding:r}).fn(n):{}:i?F4({element:i,padding:r}).fn(n):{}}}},qae=(t,e)=>({...Bae(t),options:[t,e]}),Yae=(t,e)=>({...$ae(t),options:[t,e]}),Jae=(t,e)=>({...Vae(t),options:[t,e]}),Zae=(t,e)=>({...Fae(t),options:[t,e]}),Qae=(t,e)=>({...zae(t),options:[t,e]}),ele=(t,e)=>({...Uae(t),options:[t,e]}),tle=(t,e)=>({...Xae(t),options:[t,e]});var nle="Arrow",m$=x.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return h.jsx(Qe.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});m$.displayName=nle;var ile=m$;function sA(t){const[e,n]=x.useState(void 0);return li(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var oA="Popper",[g$,_f]=js(oA),[rle,v$]=g$(oA),y$=t=>{const{__scopePopper:e,children:n}=t,[i,r]=x.useState(null);return h.jsx(rle,{scope:e,anchor:i,onAnchorChange:r,children:n})};y$.displayName=oA;var b$="PopperAnchor",x$=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=v$(b$,n),o=x.useRef(null),a=xt(e,o);return x.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:h.jsx(Qe.div,{...r,ref:a})});x$.displayName=b$;var aA="PopperContent",[sle,ole]=g$(aA),w$=x.forwardRef((t,e)=>{var S,M,D,O,Y,G;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,v=v$(aA,n),[y,b]=x.useState(null),w=xt(e,ie=>b(ie)),[k,_]=x.useState(null),E=sA(k),C=(E==null?void 0:E.width)??0,P=(E==null?void 0:E.height)??0,T=i+(s!=="center"?"-"+s:""),I=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],j=L.length>0,X={padding:I,boundary:L.filter(lle),altBoundary:j},{refs:$,floatingStyles:K,placement:J,isPositioned:Q,middlewareData:W}=Kae({strategy:"fixed",placement:T,whileElementsMounted:(...ie)=>Lae(...ie,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[qae({mainAxis:r+P,alignmentAxis:o}),l&&Yae({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Jae():void 0,...X}),l&&Zae({...X}),Qae({...X,apply:({elements:ie,rects:ee,availableWidth:Ie,availableHeight:He})=>{const{width:Xe,height:ze}=ee.reference,it=ie.floating.style;it.setProperty("--radix-popper-available-width",`${Ie}px`),it.setProperty("--radix-popper-available-height",`${He}px`),it.setProperty("--radix-popper-anchor-width",`${Xe}px`),it.setProperty("--radix-popper-anchor-height",`${ze}px`)}}),k&&tle({element:k,padding:a}),cle({arrowWidth:C,arrowHeight:P}),f&&ele({strategy:"referenceHidden",...X})]}),[U,re]=_$(J),ve=Mr(g);li(()=>{Q&&(ve==null||ve())},[Q,ve]);const Z=(S=W.arrow)==null?void 0:S.x,oe=(M=W.arrow)==null?void 0:M.y,z=((D=W.arrow)==null?void 0:D.centerOffset)!==0,[B,H]=x.useState();return li(()=>{y&&H(window.getComputedStyle(y).zIndex)},[y]),h.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:Q?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:B,"--radix-popper-transform-origin":[(O=W.transformOrigin)==null?void 0:O.x,(Y=W.transformOrigin)==null?void 0:Y.y].join(" "),...((G=W.hide)==null?void 0:G.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(sle,{scope:n,placedSide:U,onArrowChange:_,arrowX:Z,arrowY:oe,shouldHideArrow:z,children:h.jsx(Qe.div,{"data-side":U,"data-align":re,...m,ref:w,style:{...m.style,animation:Q?void 0:"none"}})})})});w$.displayName=aA;var S$="PopperArrow",ale={top:"bottom",right:"left",bottom:"top",left:"right"},k$=x.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=ole(S$,i),o=ale[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(ile,{...r,ref:n,style:{...r.style,display:"block"}})})});k$.displayName=S$;function lle(t){return t!==null}var cle=t=>({name:"transformOrigin",options:t,fn(e){var v,y,b;const{placement:n,rects:i,middlewareData:r}=e,o=((v=r.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=_$(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=r.arrow)==null?void 0:y.x)??0)+a/2,p=(((b=r.arrow)==null?void 0:b.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=o?d:`${f}px`,m=`${-l}px`):c==="top"?(g=o?d:`${f}px`,m=`${i.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=o?d:`${p}px`):c==="left"&&(g=`${i.floating.width+l}px`,m=o?d:`${p}px`),{data:{x:g,y:m}}}});function _$(t){const[e,n="center"]=t.split("-");return[e,n]}var C$=y$,tx=x$,lA=w$,cA=k$,ule="Portal",Im=x.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=x.useState(!1);li(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?tK.createPortal(h.jsx(Qe.div,{...i,ref:e}),o):null});Im.displayName=ule;function uA(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var E$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),dle="VisuallyHidden",dA=x.forwardRef((t,e)=>h.jsx(Qe.span,{...t,ref:e,style:{...E$,...t.style}}));dA.displayName=dle;var fle=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Eu=new WeakMap,Yg=new WeakMap,Jg={},d1=0,A$=function(t){return t&&(t.host||A$(t.parentNode))},hle=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=A$(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},ple=function(t,e,n,i){var r=hle(e,Array.isArray(t)?t:[t]);Jg[n]||(Jg[n]=new WeakMap);var s=Jg[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(Eu.get(f)||0)+1,v=(s.get(f)||0)+1;Eu.set(f,m),s.set(f,v),o.push(f),m===1&&g&&Yg.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),d1++,function(){o.forEach(function(d){var f=Eu.get(d)-1,p=s.get(d)-1;Eu.set(d,f),s.set(d,p),f||(Yg.has(d)||d.removeAttribute(i),Yg.delete(d)),p||d.removeAttribute(n)}),d1--,d1||(Eu=new WeakMap,Eu=new WeakMap,Yg=new WeakMap,Jg={})}},N$=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=fle(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),ple(i,r,n,"aria-hidden")):function(){return null}},tv="right-scroll-bar-position",nv="width-before-scroll-bar",mle="with-scroll-bars-hidden",gle="--removed-body-scroll-bar-size";function f1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function vle(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var yle=typeof window<"u"?x.useLayoutEffect:x.useEffect,U4=new WeakMap;function ble(t,e){var n=vle(null,function(i){return t.forEach(function(r){return f1(r,i)})});return yle(function(){var i=U4.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||f1(a,null)}),s.forEach(function(a){r.has(a)||f1(a,o)})}U4.set(n,t)},[t]),n}function xle(t){return t}function wle(t,e){e===void 0&&(e=xle);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function Sle(t){t===void 0&&(t={});var e=wle(null);return e.options=ro({async:!0,ssr:!1},t),e}var P$=function(t){var e=t.sideCar,n=Tj(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return x.createElement(i,ro({},n))};P$.isSideCarExport=!0;function kle(t,e){return t.useMedium(e),P$}var M$=Sle(),h1=function(){},nx=x.forwardRef(function(t,e){var n=x.useRef(null),i=x.useState({onScrollCapture:h1,onWheelCapture:h1,onTouchMoveCapture:h1}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noRelative,g=t.noIsolation,m=t.inert,v=t.allowPinchZoom,y=t.as,b=y===void 0?"div":y,w=t.gapMode,k=Tj(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,E=ble([n,e]),C=ro(ro({},k),r);return x.createElement(x.Fragment,null,u&&x.createElement(_,{sideCar:M$,removeScrollBar:c,shards:d,noRelative:p,noIsolation:g,inert:m,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:w}),o?x.cloneElement(x.Children.only(a),ro(ro({},C),{ref:E})):x.createElement(b,ro({},C,{className:l,ref:E}),a))});nx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nx.classNames={fullWidth:nv,zeroRight:tv};var _le=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Cle(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=_le();return e&&t.setAttribute("nonce",e),t}function Ele(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Ale(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Nle=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Cle())&&(Ele(e,n),Ale(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Ple=function(){var t=Nle();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},R$=function(){var t=Ple(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},Mle={left:0,top:0,right:0,gap:0},p1=function(t){return parseInt(t||"",10)||0},Rle=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[p1(n),p1(i),p1(r)]},Tle=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Mle;var e=Rle(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},Ole=R$(),_d="data-scroll-locked",Ile=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(mle,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(_d,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tv,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(nv,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(tv," .").concat(tv,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(nv," .").concat(nv,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(_d,`] {
    `).concat(gle,": ").concat(a,`px;
  }
`)},V4=function(){var t=parseInt(document.body.getAttribute(_d)||"0",10);return isFinite(t)?t:0},Dle=function(){x.useEffect(function(){return document.body.setAttribute(_d,(V4()+1).toString()),function(){var t=V4()-1;t<=0?document.body.removeAttribute(_d):document.body.setAttribute(_d,t.toString())}},[])},jle=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;Dle();var s=x.useMemo(function(){return Tle(r)},[r]);return x.createElement(Ole,{styles:Ile(s,!e,r,n?"":"!important")})},Fk=!1;if(typeof window<"u")try{var Zg=Object.defineProperty({},"passive",{get:function(){return Fk=!0,!0}});window.addEventListener("test",Zg,Zg),window.removeEventListener("test",Zg,Zg)}catch{Fk=!1}var Au=Fk?{passive:!1}:!1,Lle=function(t){return t.tagName==="TEXTAREA"},T$=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Lle(t)&&n[e]==="visible")},Ble=function(t){return T$(t,"overflowY")},$le=function(t){return T$(t,"overflowX")},H4=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=O$(t,i);if(r){var s=I$(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},Fle=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},zle=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},O$=function(t,e){return t==="v"?Ble(e):$le(e)},I$=function(t,e){return t==="v"?Fle(e):zle(e)},Ule=function(t,e){return t==="h"&&e==="rtl"?-1:1},Vle=function(t,e,n,i,r){var s=Ule(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var p=I$(t,a),g=p[0],m=p[1],v=p[2],y=m-v-s*g;(g||y)&&O$(t,a)&&(d+=y,f+=g);var b=a.parentNode;a=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Qg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},W4=function(t){return[t.deltaX,t.deltaY]},G4=function(t){return t&&"current"in t?t.current:t},Hle=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Wle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Gle=0,Nu=[];function Kle(t){var e=x.useRef([]),n=x.useRef([0,0]),i=x.useRef(),r=x.useState(Gle++)[0],s=x.useState(R$)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=lX([t.lockRef.current],(t.shards||[]).map(G4),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=Qg(m),b=n.current,w="deltaX"in m?m.deltaX:b[0]-y[0],k="deltaY"in m?m.deltaY:b[1]-y[1],_,E=m.target,C=Math.abs(w)>Math.abs(k)?"h":"v";if("touches"in m&&C==="h"&&E.type==="range")return!1;var P=H4(C,E);if(!P)return!0;if(P?_=C:(_=C==="v"?"h":"v",P=H4(C,E)),!P)return!1;if(!i.current&&"changedTouches"in m&&(w||k)&&(i.current=_),!_)return!0;var T=i.current||_;return Vle(T,v,m,T==="h"?w:k)},[]),l=x.useCallback(function(m){var v=m;if(!(!Nu.length||Nu[Nu.length-1]!==s)){var y="deltaY"in v?W4(v):Qg(v),b=e.current.filter(function(_){return _.name===v.type&&(_.target===v.target||v.target===_.shadowParent)&&Hle(_.delta,y)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(G4).filter(Boolean).filter(function(_){return _.contains(v.target)}),k=w.length>0?a(v,w[0]):!o.current.noIsolation;k&&v.cancelable&&v.preventDefault()}}},[]),c=x.useCallback(function(m,v,y,b){var w={name:m,delta:v,target:y,should:b,shadowParent:Xle(y)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(k){return k!==w})},1)},[]),u=x.useCallback(function(m){n.current=Qg(m),i.current=void 0},[]),d=x.useCallback(function(m){c(m.type,W4(m),m.target,a(m,t.lockRef.current))},[]),f=x.useCallback(function(m){c(m.type,Qg(m),m.target,a(m,t.lockRef.current))},[]);x.useEffect(function(){return Nu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Au),document.addEventListener("touchmove",l,Au),document.addEventListener("touchstart",u,Au),function(){Nu=Nu.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Au),document.removeEventListener("touchmove",l,Au),document.removeEventListener("touchstart",u,Au)}},[]);var p=t.removeScrollBar,g=t.inert;return x.createElement(x.Fragment,null,g?x.createElement(s,{styles:Wle(r)}):null,p?x.createElement(jle,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Xle(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const qle=kle(M$,Kle);var ix=x.forwardRef(function(t,e){return x.createElement(nx,ro({},t,{ref:e,sideCar:qle}))});ix.classNames=nx.classNames;var Yle=[" ","Enter","ArrowUp","ArrowDown"],Jle=[" ","Enter"],su="Select",[rx,sx,Zle]=vm(su),[Cf,lve]=js(su,[Zle,_f]),ox=_f(),[Qle,Yl]=Cf(su),[ece,tce]=Cf(su),D$=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:g}=t,m=ox(e),[v,y]=x.useState(null),[b,w]=x.useState(null),[k,_]=x.useState(!1),E=gb(c),[C,P]=Nl({prop:i,defaultProp:r??!1,onChange:s,caller:su}),[T,I]=Nl({prop:o,defaultProp:a,onChange:l,caller:su}),L=x.useRef(null),j=v?g||!!v.closest("form"):!0,[X,$]=x.useState(new Set),K=Array.from(X).map(J=>J.props.value).join(";");return h.jsx(C$,{...m,children:h.jsxs(Qle,{required:p,scope:e,trigger:v,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:k,onValueNodeHasChildrenChange:_,contentId:vf(),value:T,onValueChange:I,open:C,onOpenChange:P,dir:E,triggerPointerDownPosRef:L,disabled:f,children:[h.jsx(rx.Provider,{scope:e,children:h.jsx(ece,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(J=>{$(Q=>new Set(Q).add(J))},[]),onNativeOptionRemove:x.useCallback(J=>{$(Q=>{const W=new Set(Q);return W.delete(J),W})},[]),children:n})}),j?h.jsxs(eF,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:T,onChange:J=>I(J.target.value),disabled:f,form:g,children:[T===void 0?h.jsx("option",{value:""}):null,Array.from(X)]},K):null]})})};D$.displayName=su;var j$="SelectTrigger",L$=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=ox(n),o=Yl(j$,n),a=o.disabled||i,l=xt(e,o.onTriggerChange),c=sx(n),u=x.useRef("touch"),[d,f,p]=nF(m=>{const v=c().filter(w=>!w.disabled),y=v.find(w=>w.value===o.value),b=iF(v,m,y);b!==void 0&&o.onValueChange(b.value)}),g=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(tx,{asChild:!0,...s,children:h.jsx(Qe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":tF(o.value)?"":void 0,...r,ref:l,onClick:ke(r.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:ke(r.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:ke(r.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(v&&m.key===" ")&&Yle.includes(m.key)&&(g(),m.preventDefault())})})})});L$.displayName=j$;var B$="SelectValue",$$=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=Yl(B$,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=xt(e,l.onValueNodeChange);return li(()=>{c(u)},[c,u]),h.jsx(Qe.span,{...a,ref:d,style:{pointerEvents:"none"},children:tF(l.value)?h.jsx(h.Fragment,{children:o}):s})});$$.displayName=B$;var nce="SelectIcon",F$=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return h.jsx(Qe.span,{"aria-hidden":!0,...r,ref:e,children:i||""})});F$.displayName=nce;var ice="SelectPortal",z$=t=>h.jsx(Im,{asChild:!0,...t});z$.displayName=ice;var ou="SelectContent",U$=x.forwardRef((t,e)=>{const n=Yl(ou,t.__scopeSelect),[i,r]=x.useState();if(li(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Kl.createPortal(h.jsx(V$,{scope:t.__scopeSelect,children:h.jsx(rx.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(H$,{...t,ref:e})});U$.displayName=ou;var ps=10,[V$,Jl]=Cf(ou),rce="SelectContentImpl",sce=Wd("SelectContent.RemoveScroll"),H$=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v,...y}=t,b=Yl(ou,n),[w,k]=x.useState(null),[_,E]=x.useState(null),C=xt(e,S=>k(S)),[P,T]=x.useState(null),[I,L]=x.useState(null),j=sx(n),[X,$]=x.useState(!1),K=x.useRef(!1);x.useEffect(()=>{if(w)return N$(w)},[w]),JE();const J=x.useCallback(S=>{const[M,...D]=j().map(G=>G.ref.current),[O]=D.slice(-1),Y=document.activeElement;for(const G of S)if(G===Y||(G==null||G.scrollIntoView({block:"nearest"}),G===M&&_&&(_.scrollTop=0),G===O&&_&&(_.scrollTop=_.scrollHeight),G==null||G.focus(),document.activeElement!==Y))return},[j,_]),Q=x.useCallback(()=>J([P,w]),[J,P,w]);x.useEffect(()=>{X&&Q()},[X,Q]);const{onOpenChange:W,triggerPointerDownPosRef:U}=b;x.useEffect(()=>{if(w){let S={x:0,y:0};const M=O=>{var Y,G;S={x:Math.abs(Math.round(O.pageX)-(((Y=U.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(O.pageY)-(((G=U.current)==null?void 0:G.y)??0))}},D=O=>{S.x<=10&&S.y<=10?O.preventDefault():w.contains(O.target)||W(!1),document.removeEventListener("pointermove",M),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",M),document.addEventListener("pointerup",D,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",D,{capture:!0})}}},[w,W,U]),x.useEffect(()=>{const S=()=>W(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[W]);const[re,ve]=nF(S=>{const M=j().filter(Y=>!Y.disabled),D=M.find(Y=>Y.ref.current===document.activeElement),O=iF(M,S,D);O&&setTimeout(()=>O.ref.current.focus())}),Z=x.useCallback((S,M,D)=>{const O=!K.current&&!D;(b.value!==void 0&&b.value===M||O)&&(T(S),O&&(K.current=!0))},[b.value]),oe=x.useCallback(()=>w==null?void 0:w.focus(),[w]),z=x.useCallback((S,M,D)=>{const O=!K.current&&!D;(b.value!==void 0&&b.value===M||O)&&L(S)},[b.value]),B=i==="popper"?zk:W$,H=B===zk?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v}:{};return h.jsx(V$,{scope:n,content:w,viewport:_,onViewportChange:E,itemRefCallback:Z,selectedItem:P,onItemLeave:oe,itemTextRefCallback:z,focusSelectedItem:Q,selectedItemText:I,position:i,isPositioned:X,searchRef:re,children:h.jsx(ix,{as:sce,allowPinchZoom:!0,children:h.jsx(Jb,{asChild:!0,trapped:b.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:ke(r,S=>{var M;(M=b.trigger)==null||M.focus({preventScroll:!0}),S.preventDefault()}),children:h.jsx(Tm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:h.jsx(B,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:S=>S.preventDefault(),...y,...H,onPlaced:()=>$(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ke(y.onKeyDown,S=>{const M=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!M&&S.key.length===1&&ve(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let O=j().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(S.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const Y=S.target,G=O.indexOf(Y);O=O.slice(G+1)}setTimeout(()=>J(O)),S.preventDefault()}})})})})})})});H$.displayName=rce;var oce="SelectItemAlignedPosition",W$=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Yl(ou,n),o=Jl(ou,n),[a,l]=x.useState(null),[c,u]=x.useState(null),d=xt(e,C=>u(C)),f=sx(n),p=x.useRef(!1),g=x.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:y,focusSelectedItem:b}=o,w=x.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&v&&y){const C=s.trigger.getBoundingClientRect(),P=c.getBoundingClientRect(),T=s.valueNode.getBoundingClientRect(),I=y.getBoundingClientRect();if(s.dir!=="rtl"){const Y=I.left-P.left,G=T.left-Y,ie=C.left-G,ee=C.width+ie,Ie=Math.max(ee,P.width),He=window.innerWidth-ps,Xe=_y(G,[ps,Math.max(ps,He-Ie)]);a.style.minWidth=ee+"px",a.style.left=Xe+"px"}else{const Y=P.right-I.right,G=window.innerWidth-T.right-Y,ie=window.innerWidth-C.right-G,ee=C.width+ie,Ie=Math.max(ee,P.width),He=window.innerWidth-ps,Xe=_y(G,[ps,Math.max(ps,He-Ie)]);a.style.minWidth=ee+"px",a.style.right=Xe+"px"}const L=f(),j=window.innerHeight-ps*2,X=m.scrollHeight,$=window.getComputedStyle(c),K=parseInt($.borderTopWidth,10),J=parseInt($.paddingTop,10),Q=parseInt($.borderBottomWidth,10),W=parseInt($.paddingBottom,10),U=K+J+X+W+Q,re=Math.min(v.offsetHeight*5,U),ve=window.getComputedStyle(m),Z=parseInt(ve.paddingTop,10),oe=parseInt(ve.paddingBottom,10),z=C.top+C.height/2-ps,B=j-z,H=v.offsetHeight/2,S=v.offsetTop+H,M=K+J+S,D=U-M;if(M<=z){const Y=L.length>0&&v===L[L.length-1].ref.current;a.style.bottom="0px";const G=c.clientHeight-m.offsetTop-m.offsetHeight,ie=Math.max(B,H+(Y?oe:0)+G+Q),ee=M+ie;a.style.height=ee+"px"}else{const Y=L.length>0&&v===L[0].ref.current;a.style.top="0px";const ie=Math.max(z,K+m.offsetTop+(Y?Z:0)+H)+D;a.style.height=ie+"px",m.scrollTop=M-z+m.offsetTop}a.style.margin=`${ps}px 0`,a.style.minHeight=re+"px",a.style.maxHeight=j+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,v,y,s.dir,i]);li(()=>w(),[w]);const[k,_]=x.useState();li(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const E=x.useCallback(C=>{C&&g.current===!0&&(w(),b==null||b(),g.current=!1)},[w,b]);return h.jsx(lce,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:h.jsx(Qe.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});W$.displayName=oce;var ace="SelectPopperPosition",zk=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=ps,...s}=t,o=ox(n);return h.jsx(lA,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});zk.displayName=ace;var[lce,fA]=Cf(ou,{}),Uk="SelectViewport",G$=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=Jl(Uk,n),o=fA(Uk,n),a=xt(e,s.onViewportChange),l=x.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),h.jsx(rx.Slot,{scope:n,children:h.jsx(Qe.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ke(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-ps*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),y=Math.max(m,v);if(y<g){const b=y+p,w=Math.min(g,b),k=b-w;d.style.height=w+"px",d.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});G$.displayName=Uk;var K$="SelectGroup",[cce,uce]=Cf(K$),dce=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=vf();return h.jsx(cce,{scope:n,id:r,children:h.jsx(Qe.div,{role:"group","aria-labelledby":r,...i,ref:e})})});dce.displayName=K$;var X$="SelectLabel",fce=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=uce(X$,n);return h.jsx(Qe.div,{id:r.id,...i,ref:e})});fce.displayName=X$;var Py="SelectItem",[hce,q$]=Cf(Py),Y$=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Yl(Py,n),l=Jl(Py,n),c=a.value===i,[u,d]=x.useState(s??""),[f,p]=x.useState(!1),g=xt(e,b=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,b,i,r)}),m=vf(),v=x.useRef("touch"),y=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(hce,{scope:n,value:i,disabled:r,textId:m,isSelected:c,onItemTextChange:x.useCallback(b=>{d(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:h.jsx(rx.ItemSlot,{scope:n,value:i,disabled:r,textValue:u,children:h.jsx(Qe.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:g,onFocus:ke(o.onFocus,()=>p(!0)),onBlur:ke(o.onBlur,()=>p(!1)),onClick:ke(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:ke(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:ke(o.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:ke(o.onPointerMove,b=>{var w;v.current=b.pointerType,r?(w=l.onItemLeave)==null||w.call(l):v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ke(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:ke(o.onKeyDown,b=>{var k;((k=l.searchRef)==null?void 0:k.current)!==""&&b.key===" "||(Jle.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});Y$.displayName=Py;var _h="SelectItemText",J$=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Yl(_h,n),a=Jl(_h,n),l=q$(_h,n),c=tce(_h,n),[u,d]=x.useState(null),f=xt(e,y=>d(y),l.onItemTextChange,y=>{var b;return(b=a.itemTextRefCallback)==null?void 0:b.call(a,y,l.value,l.disabled)}),p=u==null?void 0:u.textContent,g=x.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=c;return li(()=>(m(g),()=>v(g)),[m,v,g]),h.jsxs(h.Fragment,{children:[h.jsx(Qe.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Kl.createPortal(s.children,o.valueNode):null]})});J$.displayName=_h;var Z$="SelectItemIndicator",pce=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return q$(Z$,n).isSelected?h.jsx(Qe.span,{"aria-hidden":!0,...i,ref:e}):null});pce.displayName=Z$;var Vk="SelectScrollUpButton",mce=x.forwardRef((t,e)=>{const n=Jl(Vk,t.__scopeSelect),i=fA(Vk,t.__scopeSelect),[r,s]=x.useState(!1),o=xt(e,i.onScrollButtonChange);return li(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(Q$,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});mce.displayName=Vk;var Hk="SelectScrollDownButton",gce=x.forwardRef((t,e)=>{const n=Jl(Hk,t.__scopeSelect),i=fA(Hk,t.__scopeSelect),[r,s]=x.useState(!1),o=xt(e,i.onScrollButtonChange);return li(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(Q$,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});gce.displayName=Hk;var Q$=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=Jl("SelectScrollButton",n),o=x.useRef(null),a=sx(n),l=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),li(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Qe.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ke(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:ke(r.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:ke(r.onPointerLeave,()=>{l()})})}),vce="SelectSeparator",yce=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return h.jsx(Qe.div,{"aria-hidden":!0,...i,ref:e})});yce.displayName=vce;var Wk="SelectArrow",bce=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=ox(n),s=Yl(Wk,n),o=Jl(Wk,n);return s.open&&o.position==="popper"?h.jsx(cA,{...r,...i,ref:e}):null});bce.displayName=Wk;var xce="SelectBubbleInput",eF=x.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=x.useRef(null),s=xt(i,r),o=uA(e);return x.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Qe.select,{...n,style:{...E$,...n.style},ref:s,defaultValue:e})});eF.displayName=xce;function tF(t){return t===""||t===void 0}function nF(t){const e=Mr(t),n=x.useRef(""),i=x.useRef(0),r=x.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=x.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function iF(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=wce(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function wce(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Sce=D$,rF=L$,kce=$$,_ce=F$,Cce=z$,sF=U$,Ece=G$,oF=Y$,Ace=J$;const e0=Sce,t0=kce,Ch=x.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(rF,{ref:i,className:ne("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,h.jsx(_ce,{asChild:!0,children:h.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));Ch.displayName=rF.displayName;const Eh=x.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>h.jsx(Cce,{children:h.jsx(sF,{ref:r,className:ne("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:h.jsx(Ece,{className:"p-1",children:e})})}));Eh.displayName=sF.displayName;const Gs=x.forwardRef(({className:t,children:e,...n},i)=>h.jsx(oF,{ref:i,className:ne("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:h.jsx(Ace,{children:e})}));Gs.displayName=oF.displayName;var aF=["PageUp","PageDown"],lF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],cF={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ef="Slider",[Gk,Nce,Pce]=vm(Ef),[uF,cve]=js(Ef,[Pce]),[Mce,ax]=uF(Ef),dF=x.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:g,...m}=t,v=x.useRef(new Set),y=x.useRef(0),w=o==="horizontal"?Rce:Tce,[k=[],_]=Nl({prop:u,defaultProp:c,onChange:L=>{var X;(X=[...v.current][y.current])==null||X.focus(),d(L)}}),E=x.useRef(k);function C(L){const j=Lce(k,L);I(L,j)}function P(L){I(L,y.current)}function T(){const L=E.current[y.current];k[y.current]!==L&&f(k)}function I(L,j,{commit:X}={commit:!1}){const $=zce(s),K=Uce(Math.round((L-i)/s)*s+i,$),J=_y(K,[i,r]);_((Q=[])=>{const W=Dce(Q,J,j);if(Fce(W,l*s)){y.current=W.indexOf(J);const U=String(W)!==String(Q);return U&&X&&f(W),U?W:Q}else return Q})}return h.jsx(Mce,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:y,thumbs:v.current,values:k,orientation:o,form:g,children:h.jsx(Gk.Provider,{scope:t.__scopeSlider,children:h.jsx(Gk.Slot,{scope:t.__scopeSlider,children:h.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:e,onPointerDown:ke(m.onPointerDown,()=>{a||(E.current=k)}),min:i,max:r,inverted:p,onSlideStart:a?void 0:C,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:T,onHomeKeyDown:()=>!a&&I(i,0,{commit:!0}),onEndKeyDown:()=>!a&&I(r,k.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:j})=>{if(!a){const K=aF.includes(L.key)||L.shiftKey&&lF.includes(L.key)?10:1,J=y.current,Q=k[J],W=s*K*j;I(Q+W,J,{commit:!0})}}})})})})});dF.displayName=Ef;var[fF,hF]=uF(Ef,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Rce=x.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=x.useState(null),p=xt(e,w=>f(w)),g=x.useRef(void 0),m=gb(r),v=m==="ltr",y=v&&!s||!v&&s;function b(w){const k=g.current||d.getBoundingClientRect(),_=[0,k.width],C=hA(_,y?[n,i]:[i,n]);return g.current=k,C(w-k.left)}return h.jsx(fF,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:h.jsx(pF,{dir:m,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const k=b(w.clientX);o==null||o(k)},onSlideMove:w=>{const k=b(w.clientX);a==null||a(k)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:w=>{const _=cF[y?"from-left":"from-right"].includes(w.key);c==null||c({event:w,direction:_?-1:1})}})})}),Tce=x.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=x.useRef(null),d=xt(e,u),f=x.useRef(void 0),p=!r;function g(m){const v=f.current||u.current.getBoundingClientRect(),y=[0,v.height],w=hA(y,p?[i,n]:[n,i]);return f.current=v,w(m-v.top)}return h.jsx(fF,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:h.jsx(pF,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const v=g(m.clientY);s==null||s(v)},onSlideMove:m=>{const v=g(m.clientY);o==null||o(v)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const y=cF[p?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:y?-1:1})}})})}),pF=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=ax(Ef,n);return h.jsx(Qe.span,{...c,ref:e,onKeyDown:ke(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):aF.concat(lF).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ke(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():i(d)}),onPointerMove:ke(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:ke(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),mF="SliderTrack",gF=x.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=ax(mF,n);return h.jsx(Qe.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});gF.displayName=mF;var Kk="SliderRange",vF=x.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=ax(Kk,n),s=hF(Kk,n),o=x.useRef(null),a=xt(e,o),l=r.values.length,c=r.values.map(f=>xF(f,r.min,r.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(Qe.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});vF.displayName=Kk;var Xk="SliderThumb",yF=x.forwardRef((t,e)=>{const n=Nce(t.__scopeSlider),[i,r]=x.useState(null),s=xt(e,a=>r(a)),o=x.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return h.jsx(Oce,{...t,ref:s,index:o})}),Oce=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=ax(Xk,n),a=hF(Xk,n),[l,c]=x.useState(null),u=xt(e,b=>c(b)),d=l?o.form||!!l.closest("form"):!0,f=sA(l),p=o.values[i],g=p===void 0?0:xF(p,o.min,o.max),m=jce(i,o.values.length),v=f==null?void 0:f[a.size],y=v?Bce(v,g,a.direction):0;return x.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${y}px)`},children:[h.jsx(Gk.ItemSlot,{scope:t.__scopeSlider,children:h.jsx(Qe.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:ke(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&h.jsx(bF,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},i)]})});yF.displayName=Xk;var Ice="RadioBubbleInput",bF=x.forwardRef(({__scopeSlider:t,value:e,...n},i)=>{const r=x.useRef(null),s=xt(r,i),o=uA(e);return x.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Qe.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});bF.displayName=Ice;function Dce(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function xF(t,e,n){const s=100/(n-e)*(t-e);return _y(s,[0,100])}function jce(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Lce(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function Bce(t,e,n){const i=t/2,s=hA([0,50],[0,i]);return(i-s(e)*n)*n}function $ce(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Fce(t,e){if(e>0){const n=$ce(t);return Math.min(...n)>=e}return!0}function hA(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function zce(t){return(String(t).split(".")[1]||"").length}function Uce(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var wF=dF,Vce=gF,Hce=vF,Wce=yF;const La=x.forwardRef(({className:t,...e},n)=>h.jsxs(wF,{ref:n,className:ne("relative flex touch-none select-none items-center",t),...e,children:[h.jsx(Vce,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:h.jsx(Hce,{className:"absolute h-full bg-mantis-400"})}),h.jsx(Wce,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));La.displayName=wF.displayName;var lx="Switch",[Gce,uve]=js(lx),[Kce,Xce]=Gce(lx),SF=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,p]=x.useState(null),g=xt(e,w=>p(w)),m=x.useRef(!1),v=f?u||!!f.closest("form"):!0,[y,b]=Nl({prop:r,defaultProp:s??!1,onChange:c,caller:lx});return h.jsxs(Kce,{scope:n,checked:y,disabled:a,children:[h.jsx(Qe.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":EF(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:ke(t.onClick,w=>{b(k=>!k),v&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),v&&h.jsx(CF,{control:f,bubbles:!m.current,name:i,value:l,checked:y,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});SF.displayName=lx;var kF="SwitchThumb",_F=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=Xce(kF,n);return h.jsx(Qe.span,{"data-state":EF(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});_F.displayName=kF;var qce="SwitchBubbleInput",CF=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:i=!0,...r},s)=>{const o=x.useRef(null),a=xt(o,s),l=uA(n),c=sA(e);return x.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:i});p.call(u,n),u.dispatchEvent(g)}},[l,n,i]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});CF.displayName=qce;function EF(t){return t?"checked":"unchecked"}var AF=SF,Yce=_F;const Ba=x.forwardRef(({className:t,...e},n)=>h.jsx(AF,{className:ne("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:h.jsx(Yce,{className:ne("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ba.displayName=AF.displayName;const cx=fe(!1);function Jce(t){return(1e3/t).toFixed(1)}function NF({className:t}){const e=ln(),[n,i]=ba(),{status:r}=Kn();return h.jsxs("div",{className:ne("overflow-auto scrollbar-stone-700",t),children:[h.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[h.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),h.jsxs(Bi,{children:[h.jsxs($i,{children:[h.jsxs(Fi,{children:[h.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),h.jsx(Pu,{children:e("settings.animations.description")})]}),h.jsx(Ba,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&LE()}})]}),h.jsxs(Bi,{children:[h.jsx($i,{children:h.jsxs(Fi,{children:[h.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),h.jsx(La,{className:"w-44",...K4({value:Math.min(n.executionUnit,250),onValueChange:s=>i(o=>({...o,executionUnit:Math.min(s,250)})),min:250,max:1})})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(Bi,{children:[h.jsx($i,{children:h.jsx(Fi,{children:e("settings.instructionCycle.label")})}),h.jsx(Ba,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),h.jsxs(Bi,{children:[h.jsx($i,{children:h.jsx(Fi,{children:e("settings.statsCPU.label")})}),h.jsx(Ba,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),h.jsxs(Bi,{children:[h.jsxs($i,{children:[h.jsxs(Fi,{children:[h.jsx("span",{className:"icon-[lucide--cpu] size-6"}),"Velocidad CPU (Hz)"]}),h.jsxs(Pu,{children:[h.jsxs("span",{className:"font-medium text-stone-300",children:[n.cpuSpeed," Hz"]})," (",(1/n.cpuSpeed).toFixed(2),"s por ciclo)",n.cpuSpeed===1&&" - Muy lenta",n.cpuSpeed===2&&" - Lenta",n.cpuSpeed===4&&" - Normal",n.cpuSpeed===10&&" - Rpida"]})]}),h.jsxs("div",{className:"flex flex-col items-end gap-2",children:[h.jsx(La,{className:"w-44",value:[n.cpuSpeed===1?0:n.cpuSpeed===2?1:n.cpuSpeed===4?2:3],onValueChange:([s])=>{const o=[1,2,4,10];i(a=>({...a,cpuSpeed:o[s]}))},min:0,max:3,step:1}),h.jsxs("div",{className:"flex w-44 justify-between text-xs text-stone-500",children:[h.jsx("span",{children:"1 Hz"}),h.jsx("span",{children:"2 Hz"}),h.jsx("span",{children:"4 Hz"}),h.jsx("span",{children:"10 Hz"})]})]})]}),h.jsxs(Bi,{children:[h.jsxs($i,{children:[h.jsxs(Fi,{children:[h.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),h.jsx(Pu,{children:e("settings.flags.description")})]}),h.jsxs(e0,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[h.jsx(Ch,{className:"w-32",children:h.jsx(t0,{})}),h.jsxs(Eh,{children:[h.jsx(Gs,{value:"CF_ZF",children:"C Z"}),h.jsx(Gs,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(Bi,{children:h.jsxs($i,{children:[h.jsxs(Fi,{children:[h.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),h.jsx(Pu,{children:e("settings.devices.description")})]})}),h.jsxs(Bi,{children:[h.jsx($i,{children:h.jsx(Fi,{children:e("settings.devices.keyboard-and-screen")})}),h.jsx(Ba,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),h.jsxs(Bi,{children:[h.jsxs($i,{children:[h.jsx(Fi,{children:e("settings.devices.pic.label")}),h.jsx(Pu,{children:e("settings.devices.pic.description")})]}),h.jsx(Ba,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),h.jsxs(Bi,{children:[h.jsx($i,{children:h.jsx(Fi,{children:e("settings.devices.pio.label")})}),h.jsxs(e0,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[h.jsx(Ch,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(t0,{})}),h.jsx(Eh,{children:WJ.map(s=>h.jsx(Gs,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),h.jsxs(Bi,{children:[h.jsx($i,{children:h.jsx(Fi,{children:e("settings.devices.handshake.label")})}),h.jsxs(e0,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[h.jsx(Ch,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(t0,{})}),h.jsx(Eh,{children:GJ.map(s=>h.jsx(Gs,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),(n.devices.pio==="printer"||n.devices.handshake==="printer")&&h.jsxs(Bi,{children:[h.jsx($i,{children:h.jsxs(Fi,{children:[h.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),h.jsx(La,{className:"w-44",...K4({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),n.devices.pic&&h.jsxs(Bi,{children:[h.jsx($i,{children:h.jsxs(Fi,{children:[h.jsx("span",{className:"icon-[lucide--timer] size-6"}),"Frecuencia del Timer"]})}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs(e0,{value:n.clockSpeed.toString(),onValueChange:s=>i(o=>({...o,clockSpeed:parseInt(s)})),children:[h.jsx(Ch,{className:"w-40",children:h.jsx(t0,{})}),h.jsxs(Eh,{children:[h.jsx(Gs,{value:"100",title:"Timer muy frecuente - Interrupciones cada 0.1 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.1s"})]})}),h.jsx(Gs,{value:"400",title:"Timer frecuente - Interrupciones cada 0.4 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.4s"})]})}),h.jsx(Gs,{value:"600",title:"Timer normal - Interrupciones cada 0.6 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Normal"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.6s"})]})}),h.jsx(Gs,{value:"800",title:"Timer lento - Interrupciones cada 0.8 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.8s"})]})}),h.jsx(Gs,{value:"1000",title:"Timer muy lento - Interrupciones cada 1 segundo",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"1.0s"})]})})]})]}),h.jsxs("div",{className:"flex items-center gap-1 text-xs text-stone-400",children:[h.jsx("span",{className:"icon-[lucide--info] size-4"}),h.jsxs("span",{children:["Frecuencia: ",Jce(n.clockSpeed)," Hz"]})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(Bi,{children:[h.jsxs($i,{children:[h.jsxs(Fi,{children:[h.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),h.jsxs(Pu,{children:[e("settings.filters.description"),h.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:Du.filterBightness,filterContrast:Du.filterContrast,filterInvert:Du.filterInvert,filterSaturation:Du.filterSaturation})),children:e("settings.filters.revert")})]})]}),h.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[h.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),h.jsx(La,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),h.jsx(La,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),h.jsx(Ba,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),h.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),h.jsx(La,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{className:"flex justify-end p-4",children:h.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...Du,language:s.language,devices:s.devices})),children:[h.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function Bi({children:t}){return h.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function $i({children:t}){return h.jsx("div",{className:"grow",children:t})}function Fi({children:t}){return h.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function Pu({children:t}){return h.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function K4({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}const Zce=()=>({handleShowTour:x.useCallback(()=>{window.startWelcomeTour?window.startWelcomeTour():(localStorage.removeItem("vonsim8-tour-completed"),window.location.reload())},[])}),qk=x.memo(({status:t,isMobile:e,isCompact:n})=>{const i=st(Vn),[r,s]=x.useState(null),[o,a]=x.useState(!1),l=x.useMemo(()=>{switch(t.type){case"running":return"Ejecutando";case"paused":return"Pausado";default:return"Detenido"}},[t.type]),c=x.useMemo(()=>{switch(t.type){case"running":return"bg-green-600";case"paused":return"bg-yellow-600";default:return"bg-stone-600"}},[t.type]);x.useEffect(()=>{if(i&&i.phase&&i.phase!==r){s(i.phase),a(!0);const p=setTimeout(()=>{a(!1)},800);return()=>clearTimeout(p)}},[i,r]);const u=x.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"Captacin";case"fetching-operands":return"Obtencin de operandos";case"fetching-operands-completed":return"Operandos obtenidos";case"executing":return"Ejecucin";case"writeback":return"Escritura";case"interrupt":return"Interrupcin";case"int6":case"int7":return"Interrupcin";case"halting":return"Detener CPU";default:return""}},[i,t.type]),d=x.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"fetching-operands":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"fetching-operands-completed":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"executing":return"bg-green-500/20 text-green-400 border-green-500/30";case"writeback":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"interrupt":return"bg-red-500/20 text-red-400 border-red-500/30";case"int6":case"int7":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"halting":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-stone-500/20 text-stone-400 border-stone-500/30"}},[i,t.type]),f=x.useMemo(()=>{if(!o||!i)return"";switch(i.phase){case"fetching":return"animate-phase-pulse-blue";case"fetching-operands":return"animate-phase-pulse-yellow";case"fetching-operands-completed":return"animate-phase-pulse-yellow";case"executing":return"animate-phase-pulse-green";case"writeback":return"animate-phase-pulse-purple";case"interrupt":return"animate-phase-pulse-red";case"int6":case"int7":return"animate-phase-pulse-orange";case"halting":return"animate-phase-pulse-red";default:return"animate-phase-pulse-stone"}},[o,i]);return h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:ne("flex items-center gap-1.5 rounded-full px-2 py-1 font-medium text-white",c,t.type==="running"&&"animate-pulse-glow",e&&"px-1.5 py-0.5",n&&"px-1 py-0.5"),children:[h.jsx("div",{className:ne("size-2 rounded-full",t.type==="running"?"bg-green-300":t.type==="paused"?"bg-yellow-300":"bg-stone-300")}),!e&&!n&&l]}),(t.type==="running"||i&&i.phase==="halting")&&u&&h.jsxs("div",{className:ne("rounded-xl border text-[10px] font-semibold uppercase tracking-wider backdrop-blur-sm transition-all duration-200 ease-in-out",d,f,e?"flex min-h-[20px] items-center justify-center whitespace-nowrap px-2 py-0.5 text-[8px]":n?"flex min-h-[18px] items-center justify-center whitespace-nowrap px-1.5 py-0.5 text-[8px]":"px-2 py-1"),children:[u," "]})]})});qk.displayName="SimulationStatus";const PF=x.memo(({onShowTour:t,onToggleSettings:e,settingsOpen:n,onToggleEducational:i,educationalOpen:r})=>{const s=ln();return h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(ts,{content:"Centro de aprendizaje",position:"bottom",children:h.jsx(B0,{icon:h.jsx(Ye,{icon:Sm,className:"size-4"}),onClick:i,variant:r?"secondary":"ghost",size:"md","aria-label":"Centro de aprendizaje",className:ne("hover-lift",r&&"animate-pulse-glow"),"data-testid":"educational-button"})}),h.jsx(ts,{content:"Mostrar tour de bienvenida",position:"bottom",children:h.jsx(B0,{icon:h.jsx(Ye,{icon:KY,className:"size-4"}),onClick:t,variant:"ghost",size:"md","aria-label":"Mostrar tour de bienvenida",className:"hover-lift"})}),h.jsx(ts,{content:s("settings.title"),position:"bottom",children:h.jsx(B0,{icon:h.jsx("span",{className:"icon-[lucide--settings] block size-5"}),onClick:e,variant:n?"secondary":"ghost",size:"md","aria-label":s("settings.title"),className:ne("hover-lift",n&&"animate-pulse-glow"),"data-testid":"settings-button"})})]})});PF.displayName="ActionButtons";const MF=x.memo(()=>{const[t,e]=bm(cx),[n,i]=x.useState(!1),[r,s]=x.useState(!1),{status:o}=Kn(),{handleShowTour:a}=Zce(),[l,c]=x.useState("desktop");x.useEffect(()=>{const v=()=>{const y=window.innerWidth;y<=480?c("mobile"):y<=768?c("compact"):y<=1024?c("tablet"):c("desktop")};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const u=x.useCallback(()=>{e(v=>!v)},[e]),d=x.useCallback(()=>{i(v=>!v)},[]),f=x.useCallback(()=>{s(v=>!v)},[]),p=x.useMemo(()=>h.jsxs("div",{className:"hover-scale flex select-none items-center justify-center",children:[h.jsxs("div",{className:"group relative flex size-10 items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-mantis-500 to-mantis-600 shadow-lg hover:scale-105",children:[h.jsx("div",{className:"absolute inset-0 opacity-10",children:h.jsx("div",{className:"size-full bg-[radial-gradient(circle_at_30%_30%,rgba(255,255,255,0.1)_1px,transparent_1px),radial-gradient(circle_at_70%_70%,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[length:8px_8px]"})}),h.jsx("div",{className:"relative z-10 flex items-center justify-center",children:h.jsx("span",{className:"text-lg font-bold tracking-tight text-white",children:"V8"})}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),h.jsx("div",{className:"absolute -right-0.5 -top-0.5 size-2 animate-pulse rounded-full bg-mantis-300"})]}),h.jsxs("div",{className:"ml-3 flex flex-col",children:[h.jsxs("h1",{className:"text-lg font-bold max-sm:hidden",children:["Von",h.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]}),h.jsx("span",{className:"text-xs text-stone-400 max-sm:hidden",children:"Simulador CPU 8-bit"})]})]}),[]),m=(()=>{switch(l){case"mobile":return{gridCols:"grid-cols-2",showStatusLeft:!0,showStatusCenter:!1,showActionButtons:!1,isCompact:!0,isMobile:!0};case"compact":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!1,isCompact:!0,isMobile:!1};case"tablet":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1};case"desktop":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1}}})();return h.jsxs(h.Fragment,{children:[h.jsx("header",{className:ne("relative bg-black text-sm text-white",l==="mobile"?"header-mobile p-2":l==="compact"?"header-compact p-2":l==="tablet"?"header-tablet p-2":"p-2"),"data-testid":"header",children:h.jsxs("div",{className:ne("grid items-center",m.gridCols),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[p,m.showStatusLeft&&h.jsx(qk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})]}),m.showStatusCenter&&h.jsx("div",{className:"flex justify-center",children:h.jsx(qk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})}),h.jsxs("div",{className:"flex items-center justify-end gap-6",children:[h.jsx("div",{className:"flex justify-end",children:h.jsx(_oe,{})}),m.showActionButtons&&h.jsx(PF,{onShowTour:a,onToggleSettings:u,settingsOpen:t,onToggleEducational:d,educationalOpen:n})]})]})}),!m.isMobile&&n&&h.jsx(ZB,{isOpen:n,onClose:()=>i(!1),onShowProgress:f}),!m.isMobile&&r&&h.jsx(QB,{isVisible:r,onClose:()=>s(!1)})]})});MF.displayName="Header";const Qce=[{key:"F7",description:"Ejecutar un ciclo",category:"Simulacin"},{key:"F8",description:"Ejecutar una instruccin completa",category:"Simulacin"},{key:"F4",description:"Ejecucin infinita",category:"Simulacin"},{key:"F9",description:"Resetear simulacin",category:"Simulacin"},{key:"Espacio",description:"Pausar/Reanudar (cuando est ejecutando)",category:"Simulacin"},{key:"Ctrl+S",description:"Guardar archivo",category:"Editor"},{key:"Ctrl+O",description:"Abrir archivo",category:"Editor"},{key:"Ctrl+N",description:"Nuevo archivo",category:"Editor"},{key:"Ctrl+Z",description:"Deshacer",category:"Editor"},{key:"Ctrl+Y",description:"Rehacer",category:"Editor"},{key:"Ctrl+F",description:"Buscar",category:"Editor"},{key:"Ctrl+H",description:"Reemplazar",category:"Editor"},{key:"Tab",description:"Indentar",category:"Editor"},{key:"Shift+Tab",description:"Desindentar",category:"Editor"},{key:"F1",description:"Mostrar atajos de teclado",category:"Navegacin"},{key:"F2",description:"Abrir configuracin",category:"Navegacin"},{key:"F3",description:"Buscar en el cdigo",category:"Navegacin"},{key:"F5",description:"Actualizar pgina",category:"Navegacin"},{key:"F6",description:"Cambiar foco al editor",category:"Navegacin"},{key:"Escape",description:"Cerrar dilogos",category:"Interfaz"},{key:"Ctrl+Shift+P",description:"Paleta de comandos",category:"Interfaz"},{key:"Ctrl+B",description:"Mostrar/ocultar barra lateral",category:"Interfaz"},{key:"Ctrl+J",description:"Mostrar/ocultar terminal",category:"Interfaz"},{key:"Ctrl++",description:"Zoom in",category:"Vista"},{key:"Ctrl+-",description:"Zoom out",category:"Vista"},{key:"Ctrl+0",description:"Resetear zoom",category:"Vista"},{key:"Ctrl+Shift+Z",description:"Zoom a la seleccin",category:"Vista"},{key:"F12",description:"Herramientas de desarrollador",category:"Desarrollo"},{key:"Ctrl+Shift+I",description:"Inspeccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+C",description:"Seleccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+J",description:"Consola",category:"Desarrollo"},{key:"Ctrl+Shift+M",description:"Vista mvil",category:"Desarrollo"}],eue=()=>{const[t,e]=x.useState(!1),n=x.useCallback(()=>{e(!0)},[]),i=x.useCallback(()=>{e(!1)},[]);return x.useEffect(()=>{const r=s=>{s.key==="F1"&&(s.preventDefault(),n())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n]),{isOpen:t,openModal:n,closeModal:i}},tue=()=>x.useMemo(()=>{const t=Qce.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return Object.entries(t).sort(([e],[n])=>e.localeCompare(n))},[]),RF=x.memo(({shortcut:t})=>h.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-stone-800 p-3 transition-colors hover:bg-stone-700",children:[h.jsx("span",{className:"text-sm text-stone-300",children:t.description}),h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-2 py-1 font-mono text-xs text-white",children:t.key})]}));RF.displayName="ShortcutItem";const TF=x.memo(({category:t,shortcuts:e})=>h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"border-b border-stone-600 pb-2 text-lg font-semibold text-mantis-400",children:t}),h.jsx("div",{className:"space-y-2",children:e.map((n,i)=>h.jsx(RF,{shortcut:n},`${t}-${i}`))})]}));TF.displayName="ShortcutCategory";const OF=x.memo(()=>{const{isOpen:t,closeModal:e}=eue(),n=tue(),i=x.useCallback(s=>{s.target===s.currentTarget&&e()},[e]),r=x.useCallback(s=>{s.key==="Escape"&&e()},[e]);return x.useEffect(()=>{if(t)return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,r]),t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:i,children:h.jsxs("div",{className:"max-h-[80vh] w-full max-w-4xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"icon-[lucide--keyboard] size-6 text-mantis-400"}),h.jsx("h2",{className:"text-xl font-semibold text-white",children:"Atajos de Teclado"})]}),h.jsx("button",{onClick:e,className:"rounded p-2 text-stone-400 transition-colors hover:text-white",children:h.jsx(Ye,{icon:Ab,size:"lg"})})]}),h.jsx("div",{className:"max-h-[calc(80vh-80px)] overflow-y-auto p-4",children:h.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:n.map(([s,o])=>h.jsx(TF,{category:s,shortcuts:o},s))})}),h.jsx("div",{className:"border-t border-stone-600 bg-stone-800 p-4",children:h.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-400",children:[h.jsxs("span",{children:["Presiona"," ",h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-1 py-0.5 font-mono text-xs",children:"F1"})," ","para abrir este dilogo"]}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"Cerrar"})]})})]})}):null});OF.displayName="KeyboardShortcuts";function nue(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await Tp(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:e}).then(d=>{s?s("/VonSim8/sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const IF=()=>{const[t,e]=x.useState({available:!1,updating:!1,lastUpdate:null}),n=x.useRef(null);return x.useEffect(()=>{const i=nue({onNeedRefresh(){e(a=>({...a,available:!0})),typeof window<"u"&&window.VonSimAddNotification&&window.VonSimAddNotification({type:"info",title:"Actualizacin disponible",message:"Una nueva versin est lista para instalar."})},onOfflineReady(){},onRegistered(a){console.log("Service Worker registrado:",a),a.waiting&&e(l=>({...l,available:!0}))},onRegisterError(a){console.error("Error al registrar Service Worker:",a)}});n.current=i;const r=async()=>{if(n.current){e(a=>({...a,updating:!0}));try{n.current(),e(a=>({...a,available:!1,updating:!1,lastUpdate:new Date}))}catch(a){console.error("Error al actualizar:",a),e(l=>({...l,updating:!1}))}}};window.updateVonSim8=r;const s=()=>{n.current&&n.current()};window.checkVonSim8Updates=s;const o=setInterval(s,5*60*1e3);return()=>{delete window.updateVonSim8,delete window.checkVonSim8Updates,clearInterval(o)}},[]),{updateInfo:t,updateApp:()=>{n.current&&n.current()},checkForUpdates:()=>{n.current&&n.current()}}},X4="vonsim8-commit-hash",iue=5*60*1e3,DF=()=>{const[t,e]=x.useState({currentHash:"952883e",lastKnownHash:null,hasUpdate:!1,lastCheck:null}),n=x.useCallback(()=>{try{const s=localStorage.getItem(X4),o="952883e";return e(a=>({...a,currentHash:o,lastKnownHash:s,lastCheck:new Date})),s&&s!==o?(e(a=>({...a,hasUpdate:!0})),!0):!1}catch(s){return console.warn("Error checking version update:",s),!1}},[]),i=x.useCallback(()=>{try{localStorage.setItem(X4,"952883e")}catch(s){console.warn("Error saving version hash before reload:",s)}window.location.reload()},[]),r=x.useCallback(()=>{e(s=>({...s,hasUpdate:!1}))},[]);return x.useEffect(()=>{n()},[n]),x.useEffect(()=>{const s=setInterval(n,iue);return()=>clearInterval(s)},[n]),x.useEffect(()=>{const s=()=>{document.hidden||n()};return document.addEventListener("visibilitychange",s),()=>{document.removeEventListener("visibilitychange",s)}},[n]),x.useEffect(()=>{const s=()=>{n()};return window.addEventListener("online",s),()=>{window.removeEventListener("online",s)}},[n]),{versionInfo:t,checkForVersionUpdate:n,updateToNewVersion:i,dismissUpdate:r}},jF=x.memo(()=>{const{updateInfo:t,updateApp:e}=IF(),{versionInfo:n,updateToNewVersion:i}=DF(),[r,s]=x.useState(!0),[o,a]=x.useState(!1),[l,c]=x.useState(!1),u=t.available||n.hasUpdate,d=x.useCallback(async()=>{a(!0);try{t.available?await e():n.hasUpdate&&i(),s(!1)}catch(p){console.error("Error al actualizar:",p)}finally{a(!1)}},[e,t.available,i,n.hasUpdate]),f=x.useCallback(()=>{c(!0),setTimeout(()=>{s(!1)},300)},[]);return!u||!r?null:h.jsxs("div",{className:ne("fixed inset-x-0 top-0 z-50 transition-all duration-300 ease-out",l?"-translate-y-full opacity-0":"translate-y-0 opacity-100"),children:[h.jsx("div",{className:"border-b border-stone-700/50 bg-gradient-to-r from-stone-900/95 via-stone-800/95 to-stone-900/95 shadow-2xl backdrop-blur-md",children:h.jsx("div",{className:"mx-auto max-w-7xl p-4",children:h.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"relative shrink-0",children:[h.jsx("div",{className:"absolute inset-0 animate-ping rounded-full bg-mantis-500/20"}),h.jsx("div",{className:"relative rounded-full bg-gradient-to-br from-mantis-500 to-mantis-600 p-2 shadow-lg sm:p-3",children:h.jsx(Ye,{icon:UC,className:"size-4 animate-bounce text-white sm:size-5"})})]}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"mb-1 flex flex-col space-y-1 sm:flex-row sm:items-center sm:space-x-2 sm:space-y-0",children:[h.jsx("h3",{className:"text-base font-bold text-white sm:text-lg",children:"Nueva versin disponible"}),h.jsxs("div",{className:"flex w-fit items-center space-x-1 rounded-full bg-mantis-500/20 px-2 py-1",children:[h.jsx(Ye,{icon:xL,className:"size-3 text-mantis-400"}),h.jsx("span",{className:"text-xs font-medium text-mantis-300",children:"Actualizacin"})]})]}),h.jsx("p",{className:"text-xs leading-relaxed text-stone-300 sm:text-sm",children:"Hay una nueva versin de VonSim8 con mejoras y correcciones. Te recomendamos actualizar para obtener la mejor experiencia."})]})]}),h.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[h.jsx(_t,{onClick:d,disabled:o,variant:"primary",size:"sm",className:ne("relative overflow-hidden transition-all duration-300","bg-gradient-to-r from-mantis-600 to-mantis-700","hover:from-mantis-700 hover:to-mantis-800","shadow-lg hover:shadow-xl","border border-mantis-500/30","text-xs sm:text-sm",o&&"animate-pulse"),leftIcon:h.jsx(Ye,{icon:o?HY:JY,className:ne("size-3 transition-transform duration-200 sm:size-4",o&&"animate-spin")}),children:o?"Actualizando...":"Actualizar ahora"}),h.jsx(_t,{onClick:f,variant:"ghost",size:"sm",className:"shrink-0 text-stone-400 transition-all duration-200 hover:bg-stone-700/50 hover:text-white","aria-label":"Cerrar banner de actualizacin",children:h.jsx(Ye,{icon:Ab,className:"size-3 sm:size-4"})})]})]})})}),o&&h.jsx("div",{className:"h-1 animate-pulse bg-gradient-to-r from-mantis-500 to-mantis-600",children:h.jsx("div",{className:"animate-shimmer h-full bg-white/30"})})]})});jF.displayName="UpdateBanner";fe(!1);const Zh=[{id:"welcome",target:"app-container",title:"Bienvenido a VonSim8!",content:"Te acompaar en un recorrido por las funciones principales de la plataforma. VonSim8 es un simulador de computadora de 8 bits que te permite programar en lenguaje ensamblador y ver cmo funciona internamente una computadora.",icon:$Y,position:"top"},{id:"header",target:"header",title:"Barra de Navegacin",content:"Aqu encontrars el logo, el estado de la simulacin, los controles principales y acceso a notificaciones, tour de ayuda y configuracin.",icon:"icon-[lucide--navigation]",position:"bottom"},{id:"controls",target:"controls",title:"Controles de Simulacin",content:"Controla la simulacin: F7 (ejecutar ciclo), F8 (ejecutar instruccin), F4 (ejecucin infinita), F9 (resetear). Tambin puedes usar los botones visuales.",icon:"icon-[lucide--cpu]",position:"bottom"},{id:"editor-buttons",target:"panel-editor",title:"Editor de Cdigo",content:"Aqu es donde escribirs tu cdigo ensamblador. El editor tiene resaltado de sintaxis, autocompletado y validacin en tiempo real. Usa los botones de arriba para crear, abrir, guardar y ensamblar tu programa.",icon:"icon-[lucide--file-terminal]",position:"right"},{id:"computer-view",target:"panel-computer",title:"Simulador de Computadora",content:"Aqu vers la computadora virtual con CPU, memoria RAM, registros, ALU, buses de datos y control, y todos los perifricos como pantalla, teclado, LEDs y switches.",icon:"icon-[lucide--monitor]",position:"left"},{id:"cpu-architecture",target:"cpu-component",title:"Arquitectura CPU",content:"Observa cmo la CPU ejecuta instrucciones paso a paso: fetch, decode, execute. Ve los valores en los registros, el contador de programa y el estado de las banderas.",icon:"icon-[lucide--microchip]",position:"left"},{id:"memory-ram",target:"memory-component",title:"Memoria RAM",content:"Explora la memoria RAM de 256 bytes. Ve cmo se almacenan datos e instrucciones, y cmo la CPU accede a diferentes direcciones de memoria. Cada celda muestra su direccin y valor en hexadecimal.",icon:"icon-[lucide--database]",position:"left"},{id:"settings-button",target:"settings-button",title:"Botn de Configuracin",content:"Haz clic en este engranaje para acceder a las configuraciones avanzadas. Aqu podrs ajustar la velocidad de simulacin, cambiar el tema visual, seleccionar el idioma y personalizar atajos de teclado.",icon:"icon-[lucide--settings]",position:"bottom"},{id:"settings-panel",target:"panel-settings",title:"Panel de Configuracin",content:"En este panel encontrars todas las opciones de configuracin organizadas por categoras: simulacin, interfaz, idioma y atajos de teclado. Los cambios se aplican automticamente.",icon:"icon-[lucide--settings]",position:"left"},{id:"footer",target:"footer-links",title:"Recursos y Soporte",content:"Encuentra documentacin completa, cdigo fuente en GitHub, reporta bugs y accede a recursos de aprendizaje para dominar la programacin en ensamblador.",icon:"icon-[lucide--help-circle]",position:"top"},{id:"final",target:"cycle-button",title:"Listo para Programar!",content:"Ya conoces las funciones principales de VonSim8. Comienza escribiendo cdigo en el editor, ejecuta la simulacin paso a paso con el botn 'Por Ciclo' y observa cmo funciona tu programa en la computadora virtual. Disfruta programando!",icon:"icon-[lucide--rocket]",position:"bottom"}],rue=()=>{const[t,e]=x.useState(0),[n,i]=x.useState(!1),[r,s]=x.useState(!0),[,o]=bm(cx),a=x.useMemo(()=>t===Zh.length-1,[t]),l=x.useMemo(()=>t===0,[t]),c=x.useCallback(()=>{i(!1),localStorage.setItem("vonsim8-tour-completed","true")},[]),u=x.useCallback(()=>{e(g=>Math.min(g+1,Zh.length-1))},[]),d=x.useCallback(()=>{e(g=>Math.max(g-1,0))},[]),f=x.useCallback(()=>{c()},[c]),p=x.useCallback(()=>{i(!0),e(0)},[]);return x.useEffect(()=>{},[]),x.useEffect(()=>{const g=Zh[t],m=()=>{const y=document.querySelector(`[data-testid="${g.target}"]`);s(!!y)};m();const v=setTimeout(m,100);return g.id==="settings-button"?o(!0):g.id!=="settings-panel"&&g.id!=="settings-button"&&o(!1),()=>clearTimeout(v)},[t,o]),{currentStep:t,isVisible:n,isLastStep:a,isFirstStep:l,handleNext:u,handlePrev:d,handleSkip:f,completeTour:c,startTour:p,targetFound:r}},sue=t=>x.useMemo(()=>{const e=document.querySelector(`[data-testid="${t.target}"]`);if(!e)return null;const n=e.getBoundingClientRect(),i=window.innerWidth,r=window.innerHeight;if(t.id==="welcome"&&t.position==="top")return{positionStyles:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},highlightStyles:{top:0,left:0,width:"100vw",height:"100vh"}};if(t.id==="footer"){let g=n.top-200-60,m=n.right+20;const v="translateX(0)";g<40&&(g=40),g+200>r-100&&(g=Math.max(40,r/2-200/2)),m+320>i&&(m=i-320-20);const y={top:g,left:m,transform:v},b={top:n.top-2,left:n.left-2,width:n.width+4,height:n.height+4};return{positionStyles:y,highlightStyles:b}}let s,o,a;switch(t.position){case"top":s=n.top-20,o=n.left+n.width/2,a="translateX(-50%)";break;case"bottom":s=n.bottom+20,o=n.left+n.width/2,a="translateX(-50%)";break;case"left":s=n.top+n.height/2,o=n.left-20,a="translateY(-50%)";break;case"right":s=n.top+n.height/2,o=n.right+20,a="translateY(-50%)";break}const l=320,c=200;o+l/2>i?o=i-l/2-20:o-l/2<0&&(o=l/2+20),s+c>r?s=r-c-20:s<0&&(s=20);const u={top:s,left:o,transform:a},d={top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16};return{positionStyles:u,highlightStyles:d}},[t]),LF=x.memo(({current:t,total:e})=>h.jsx("div",{className:"mb-2 h-2 w-full overflow-hidden rounded-full bg-stone-700",children:h.jsx("div",{className:"h-full bg-mantis-500 transition-all duration-300",style:{width:`${(t+1)/e*100}%`}})}));LF.displayName="ProgressBar";const BF=x.memo(({step:t,currentStep:e,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:l,targetFound:c})=>{const u=sue(t),d=x.useRef(null);x.useEffect(()=>{var m;(m=d.current)==null||m.focus()},[e]);const f="animate-fade-in";if(!c||!u)return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:h.jsxs("div",{className:"max-w-sm rounded-lg border-2 border-mantis-400 bg-stone-900 p-8 text-center shadow-2xl",children:[h.jsx(Ye,{icon:aJ,className:"mb-4 text-4xl text-yellow-400"}),h.jsx("h3",{className:"mb-2 text-lg font-semibold text-mantis-400",children:"Elemento no encontrado"}),h.jsxs("p",{className:"mb-2 text-stone-300",children:["No se pudo encontrar el elemento:"," ",h.jsx("code",{className:"text-mantis-400",children:t.target})]}),h.jsxs("p",{className:"mb-4 text-xs text-stone-400",children:["Paso ",e+1," de ",l,": ",t.title]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(_t,{onClick:s,disabled:i,variant:"outline",size:"sm",children:"Anterior"}),h.jsx(_t,{onClick:o,className:"bg-mantis-600 hover:bg-mantis-700",children:"Saltar tour"})]})]})});const{positionStyles:p,highlightStyles:g}=u;return h.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",children:h.jsxs("div",{className:"relative size-full",children:[h.jsx("div",{className:"absolute rounded-lg border-2 border-mantis-400 bg-transparent shadow-2xl transition-all duration-300",style:g}),h.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true",className:`absolute max-w-sm rounded-lg border border-mantis-400 bg-stone-900 p-6 text-white shadow-xl focus:outline-none ${f}`,style:p,children:[h.jsx(LF,{current:e,total:l}),h.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[t.icon&&(typeof t.icon=="string"?h.jsx("span",{className:`${t.icon} text-2xl text-mantis-400`}):h.jsx(Ye,{icon:t.icon,className:"text-2xl text-mantis-400"})),h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:t.title})]}),h.jsx("p",{className:"mb-4 text-sm text-stone-300",children:t.content}),h.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[h.jsx(_t,{variant:"ghost",size:"sm",onClick:o,className:"text-stone-400 hover:text-white","aria-label":"Saltar tour",children:"Saltar"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(_t,{variant:"outline",size:"sm",onClick:s,disabled:i,className:"flex items-center gap-1","aria-label":"Anterior",children:[h.jsx(Ye,{icon:eJ}),"Anterior"]}),n?h.jsxs(_t,{size:"sm",onClick:a,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Finalizar",children:["Finalizar",h.jsx(Ye,{icon:xL})]}):h.jsxs(_t,{size:"sm",onClick:r,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Siguiente",children:["Siguiente",h.jsx(Ye,{icon:tJ})]})]})]}),h.jsxs("div",{className:"mt-2 text-right text-xs text-stone-500",children:["Paso ",e+1," de ",l]}),h.jsx("button",{onClick:o,className:"absolute right-2 top-2 rounded p-1 text-stone-400 hover:text-white focus:outline-none","aria-label":"Cerrar",children:h.jsx(Ye,{icon:Ab,size:"sm"})})]})]})})});BF.displayName="TourTooltip";const $F=x.memo(()=>{const{currentStep:t,isVisible:e,isLastStep:n,isFirstStep:i,handleNext:r,handlePrev:s,handleSkip:o,completeTour:a,startTour:l,targetFound:c}=rue();x.useEffect(()=>(window.startWelcomeTour=l,()=>{delete window.startWelcomeTour}),[l]);const u=x.useMemo(()=>Zh[t],[t]);return x.useEffect(()=>{if(!e)return;const d=f=>{f.key==="Escape"&&o(),f.key==="ArrowRight"&&r(),f.key==="ArrowLeft"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,o,r,s]),!e||!u?null:h.jsx(BF,{step:u,currentStep:t,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:Zh.length,targetFound:c})});$F.displayName="WelcomeTour";var qr=function(t,e){return Number(t.toFixed(e))},oue=function(t,e){return e},rn=function(t,e,n){n&&typeof n=="function"&&n(t,e)},aue=function(t){return-Math.cos(t*Math.PI)/2+.5},lue=function(t){return t},cue=function(t){return t*t},uue=function(t){return t*(2-t)},due=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},fue=function(t){return t*t*t},hue=function(t){return--t*t*t+1},pue=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},mue=function(t){return t*t*t*t},gue=function(t){return 1- --t*t*t*t},vue=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},yue=function(t){return t*t*t*t*t},bue=function(t){return 1+--t*t*t*t*t},xue=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},FF={easeOut:aue,linear:lue,easeInQuad:cue,easeOutQuad:uue,easeInOutQuad:due,easeInCubic:fue,easeOutCubic:hue,easeInOutCubic:pue,easeInQuart:mue,easeOutQuart:gue,easeInOutQuart:vue,easeInQuint:yue,easeOutQuint:bue,easeInOutQuint:xue},zF=function(t){typeof t=="number"&&cancelAnimationFrame(t)},ks=function(t){t.mounted&&(zF(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function UF(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;ks(t),t.animation=function(){if(!t.mounted)return zF(t.animation);var o=new Date().getTime()-r,a=o/n,l=FF[e],c=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function wue(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Zl(t,e,n,i){var r=wue(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):UF(t,i,n,function(p){var g=a+u*p,m=l+d*p,v=c+f*p;s(g,m,v)})}}function Sue(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=i-a,u=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var kue=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,c=t-e-a,u=a,d=i-r-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},pA=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=Sue(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=kue(o,l,c,a,u,d,!!r);return f},Yk=function(t,e,n,i){return i?t<e?qr(e,2):t>n?qr(n,2):qr(t,2):qr(t,2)},Bc=function(t,e){var n=pA(t,e);return t.bounds=n,n};function Dm(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=r,f=s);var p=Yk(t,a-d,c+d,i),g=Yk(e,l-f,u+f,i);return{x:p,y:g}}function ux(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,p=Dm(d,f,r,s,0,0,null);return p}function jm(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var q4=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var c=dx(s,n);return!c},Y4=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},_ue=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},Cue=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function Eue(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,p=u.maxPositionY,g=u.minPositionY,m=n>d||n<f,v=i>p||i<g,y=n>d?c.offsetWidth:t.setup.minPositionX||0,b=i>p?c.offsetHeight:t.setup.minPositionY||0,w=ux(t,y,b,r,t.bounds,a||l),k=w.x,_=w.y;return{scale:r,positionX:m?k:n,positionY:v?_:i}}}function VF(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=Dm(e,n,a,s,i,r,o),p=f.x,g=f.y;t.setTransformState(c,p,g)}}var Aue=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,c=r.positionY;if(!i)return{x:l,y:c};var u=e-i.x,d=n-i.y,f=o?l:u,p=a?c:d;return{x:f,y:p}},zl=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},Nue=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},Pue=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!i)};function Mue(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function J4(t,e,n,i,r,s,o,a,l,c){if(r){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return i?e:Yk(t,s,o,r)}function Rue(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function Tue(t,e){var n=Nue(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var c=Rue(o,a),u=e.x-i.x,d=e.y-i.y,f=u/c,p=d/c,g=l-r,m=u*u+d*d,v=Math.sqrt(m)/g;t.velocity={velocityX:f,velocityY:p,total:v}}t.lastMousePosition=e,t.velocityTime=l}}function Oue(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=Pue(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,p=i.limitToBounds,g=i.alignmentAnimation,m=i.zoomAnimation,v=i.panning,y=v.lockAxisY,b=v.lockAxisX,w=m.animationType,k=g.sizeX,_=g.sizeY,E=g.velocityAlignmentTime,C=E,P=Mue(t,l),T=Math.max(P,C),I=zl(t,k),L=zl(t,_),j=I*r.offsetWidth/100,X=L*r.offsetHeight/100,$=c+j,K=u-j,J=d+X,Q=f-X,W=t.transformState,U=new Date().getTime();UF(t,w,T,function(re){var ve=t.transformState,Z=ve.scale,oe=ve.positionX,z=ve.positionY,B=new Date().getTime()-U,H=B/C,S=FF[g.animationType],M=1-S(Math.min(1,H)),D=1-re,O=oe+o*D,Y=z+a*D,G=J4(O,W.positionX,oe,b,p,u,c,K,$,M),ie=J4(Y,W.positionY,z,y,p,f,d,Q,J,M);(oe!==O||z!==Y)&&t.setTransformState(Z,G,ie)})}}function Z4(t,e){var n=t.transformState.scale;ks(t),Bc(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?Cue(t,e):_ue(t,e)}function mA(t,e){var n=t.transformState.scale,i=t.setup,r=i.minScale,s=i.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,c=s.animationTime,u=s.animationType,d=o||n<r||!a&&!l;if(!d){var f=Eue(t);f&&Zl(t,f,e??c,u)}}function Q4(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=Aue(t,e,n),c=l.x,u=l.y,d=zl(t,o),f=zl(t,a);Tue(t,{x:c,y:u}),VF(t,c,u,d,f)}}function Iue(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?Oue(t):mA(t)}}function gA(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=jm(qr(e,2),s,o,0,!1),c=Bc(t,l),u=ux(t,n,i,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function HF(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||i>=o;if((i>=1||a)&&mA(t),!(f||!r||!t.mounted)){var p=e||r.offsetWidth/2,g=n||r.offsetHeight/2,m=gA(t,o,p,g);m&&Zl(t,m,u,d)}}var kl=function(){return kl=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kl.apply(this,arguments)};function eT(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var n0={scale:1,positionX:0,positionY:0},Zf={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Jk={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},WF=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:n0.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:n0.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:n0.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:n0.positionY}},tT=function(t){var e=kl({},Zf);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Zf[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Zf[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=kl(kl({},Zf[n]),t[n]):a?e[n]=eT(eT([],Zf[n],!0),t[n]):e[n]=t[n]}}),e},GF=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=c?i*Math.exp(e*n):i+e*n,f=jm(qr(d,3),a,o,u,!1);return f};function KF(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,p=(d/2-c)/a,g=GF(t,e,n),m=gA(t,g,f,p);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");Zl(t,m,i,r)}function XF(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=WF(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=pA(t,a.scale),p=Dm(a.positionX,a.positionY,f,o,0,0,s),g={scale:a.scale,positionX:p.x,positionY:p.y};c===a.scale&&u===a.positionX&&d===a.positionY||(i==null||i(),Zl(t,g,e,n))}}function Due(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function jue(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!i||!r)return s;var u=i.getBoundingClientRect(),d=e.getBoundingClientRect(),f=Due(e,i,r,s),p=f.x,g=f.y,m=d.width/s.scale,v=d.height/s.scale,y=i.offsetWidth/m,b=i.offsetHeight/v,w=jm(n||Math.min(y,b),l,c,0,!1),k=(u.width-m*w)/2,_=(u.height-v*w)/2,E=(u.left-p)*w+k,C=(u.top-g)*w+_,P=pA(t,w),T=Dm(E,C,P,a,0,0,i),I=T.x,L=T.y;return{positionX:I,positionY:L,scale:w}}var Lue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),KF(t,1,e,n,i)}},Bue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),KF(t,-1,e,n,i)}},$ue=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var p={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?c:i};Zl(t,p,r,s)}}},Fue=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),XF(t,e,n)}},zue=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=qF(e||r.scale,s,o);Zl(t,a,n,i)}}},Uue=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),ks(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=jue(t,o,n);Zl(t,a,i,r)}}},Zk=function(t){return{instance:t,zoomIn:Lue(t),zoomOut:Bue(t),setTransform:$ue(t),resetTransform:Fue(t),centerView:zue(t),zoomToElement:Uue(t)}},Vue=function(t){return{instance:t,state:t.transformState}},Wt=function(t){var e={};return Object.assign(e,Vue(t)),Object.assign(e,Zk(t)),e},m1=!1;function g1(){try{var t={get passive(){return m1=!0,!1}};return t}catch{return m1=!1,m1}}var i0=".".concat(Jk.wrapperClass),dx=function(t,e){return e.some(function(n){return t.matches("".concat(i0," ").concat(n,", ").concat(i0," .").concat(n,", ").concat(i0," ").concat(n," *, ").concat(i0," .").concat(n," *"))})},Qk=function(t){t&&clearTimeout(t)},Hue=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},qF=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function Wue(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Gue=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!i&&c;if(!u||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=dx(c,o);return!d},Kue=function(t){return t?t.deltaY<0?1:-1:0};function Xue(t,e){var n=Kue(t),i=oue(e,n);return i}function YF(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var que=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,p=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var g=s+e*n,m=i?!1:!p,v=jm(qr(g,3),c,l,f,m&&!d);return v},Yue=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Jue=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=dx(o,r);return!l},Zue=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},Que=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=qr(r[0].clientX-i.left,5),o=qr(r[0].clientY-i.top,5),a=qr(r[1].clientX-i.left,5),l=qr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},JF=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},ede=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,c=a.size,u=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,f=d*n;return jm(qr(f,2),o,s,c,!u&&!l)},tde=160,nde=100,ide=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(ks(t),rn(Wt(t),e,i),rn(Wt(t),e,r))},rde=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,p=o.disablePadding,g=o.smooth,m=d.size,v=d.disabled,y=f.step,b=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=Xue(e,null),k=g?b*Math.abs(e.deltaY):y,_=que(t,w,k,!e.ctrlKey);if(l!==_){var E=Bc(t,_),C=YF(e,s,l),P=v||m===0||u||p,T=c&&P,I=ux(t,C.x,C.y,_,E,T),L=I.x,j=I.y;t.previousWheelEvent=e,t.setTransformState(_,L,j),rn(Wt(t),e,i),rn(Wt(t),e,r)}},sde=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;Qk(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(HF(t,e.x,e.y),t.wheelAnimationTimer=null)},nde);var s=Yue(t,e);s&&(Qk(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,rn(Wt(t),e,i),rn(Wt(t),e,r))},tde))},ZF=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},ode=function(t,e){var n=JF(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=ZF(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,ks(t)},ade=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,f=c.size;if(!(i===null||!n)){var p=Que(e,s,n);if(!(!Number.isFinite(p.x)||!Number.isFinite(p.y))){var g=JF(e),m=ede(t,g),v=ZF(e),y=v.x-(t.pinchLastCenterX||0),b=v.y-(t.pinchLastCenterY||0);if(!(m===s&&y===0&&b===0)){t.pinchLastCenterX=v.x,t.pinchLastCenterY=v.y;var w=Bc(t,m),k=d||f===0||l,_=a&&k,E=ux(t,p.x,p.y,m,w,_),C=E.x,P=E.y;t.pinchMidpoint=p,t.lastDistance=g;var T=u.sizeX,I=u.sizeY,L=zl(t,T),j=zl(t,I),X=C+y,$=P+b,K=Dm(X,$,w,a,L,j,r),J=K.x,Q=K.y;t.setTransformState(m,J,Q)}}}},lde=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,HF(t,e==null?void 0:e.x,e==null?void 0:e.y)},QF=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;Qk(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,rn(Wt(t),e,n)},i)},cde=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;rn(Wt(t),e,i),XF(t,o,a,function(){return rn(Wt(t),e,r)}),QF(t,e)};function ude(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function dde(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,p=u.step,g=u.animationTime,m=u.animationType;if(!d&&!i){if(f==="reset")return cde(t,e);if(!s)return console.error("No ContentComponent found");var v=ude(f,t.transformState.scale),y=GF(t,v,p);if(o!==y){rn(Wt(t),e,l);var b=YF(e,s,o),w=gA(t,y,b.x,b.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");rn(Wt(t),e,c),Zl(t,w,g,m),QF(t,e)}}}var fde=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=r==null?void 0:r.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=dx(l,a);return!d},hde=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,Bc(n,n.transformState.scale),n.setup=tT(i)},this.initializeWindowEvents=function(){var i,r,s=g1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=g1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),ks(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=g1();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i,r){var s=!1,o=n.setup.centerOnInit,a=function(l,c){for(var u=0,d=l;u<d.length;u++){var f=d[u];if(f.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(Wt(n))}),n.observer=new ResizeObserver(function(l){if(a(l,i)||a(l,r))if(o&&!s){var c=r.offsetWidth,u=r.offsetHeight;(c>0||u>0)&&(s=!0,n.setCenter())}else ks(n),Bc(n,n.transformState.scale),mA(n,0)}),n.observer.observe(i),n.observer.observe(r)},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=Gue(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(ide(n,i),rde(n,i),sde(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-i.deltaX,f=u-i.deltaY,p=a.lockAxisX?c:d,g=a.lockAxisY?u:f,m=n.setup.alignmentAnimation,v=m.sizeX,y=m.sizeY,b=zl(n,v),w=zl(n,y);p===c&&g===u||VF(n,p,g,b,w)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=q4(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),ks(n),Z4(n,i),rn(Wt(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=Y4(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),Q4(n,i.clientX,i.clientY),rn(Wt(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(Iue(n),rn(Wt(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=Jue(n,i);l&&(ode(n,i),ks(n),rn(Wt(n),i,o),rn(Wt(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=Zue(n);l&&(i.preventDefault(),i.stopPropagation(),ade(n,i),rn(Wt(n),i,o),rn(Wt(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(lde(n),rn(Wt(n),i,s),rn(Wt(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=q4(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&i.touches.length===1;if(!a){n.lastTouch=+new Date,ks(n);var l=i.touches,c=l.length===1,u=l.length===2;c&&(ks(n),Z4(n,i),rn(Wt(n),i,s)),u&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=Y4(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];Q4(n,a.clientX,a.clientY),rn(Wt(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=fde(n,i);s&&dde(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=Wt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),rn(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=qF(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Hue(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return Wt(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Bc(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(i,r),n.initializeWindowEvents(),n.isInitialized=!0;var s=Wt(n);rn(s,void 0,n.props.onInit)},this.props=e,this.setup=tT(this.props),this.transformState=WF(this.props)}return t}(),vA=Yt.createContext(null),pde=function(t,e){return typeof t=="function"?t(e):t},mde=Yt.forwardRef(function(t,e){var n=x.useRef(new hde(t)).current,i=pde(t.children,Zk(n));return x.useImperativeHandle(e,function(){return Zk(n)},[n]),x.useEffect(function(){n.update(t)},[n,t]),Yt.createElement(vA.Provider,{value:n},i)});Yt.forwardRef(function(t,e){var n=x.useRef(null),i=x.useContext(vA);return x.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),Yt.createElement("div",kl({},t,{ref:Wue([n,e])}))});function gde(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var vde=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,nT={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};gde(vde);var yde=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=x.useContext(vA),p=f.init,g=f.cleanupWindowEvents,m=x.useRef(null),v=x.useRef(null);return x.useEffect(function(){var y=m.current,b=v.current;return y!==null&&b!==null&&p&&(p==null||p(y,b)),function(){g==null||g()}},[]),Yt.createElement("div",kl({},c,{ref:m,className:"".concat(Jk.wrapperClass," ").concat(nT.wrapper," ").concat(i),style:o}),Yt.createElement("div",kl({},d,{ref:v,className:"".concat(Jk.contentClass," ").concat(nT.content," ").concat(s),style:a}),e))};function bde({wrapperRef:t}){const e=ln();return h.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function iT(t){switch(t){case"Captacin":return"text-blue-300 bg-gradient-to-r from-blue-500/10 to-cyan-500/10";case"Obtencin de operandos":return"text-yellow-300 bg-gradient-to-r from-yellow-500/10 to-orange-500/10";case"Ejecucin":return"text-green-300 bg-gradient-to-r from-green-500/10 to-emerald-500/10";case"Escritura":return"text-purple-300 bg-gradient-to-r from-purple-500/10 to-violet-500/10";default:return"text-stone-300 bg-gradient-to-r from-stone-500/10 to-gray-500/10"}}function xde(t,e){if(t==="Ejecucin")return/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-300 bg-green-500/5 border-green-400/30 shadow-green-400/20");switch(t){case"Captacin":return"text-blue-300 bg-blue-500/5 border-blue-400/30 shadow-blue-400/20";case"Obtencin de operandos":return"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20";case"Escritura":return"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20";default:return"text-stone-300 bg-stone-500/5 border-stone-400/30 shadow-stone-400/20"}}function wde(t,e=!1){const n=(()=>{switch(t){case"Captacin":return"";case"Obtencin de operandos":return"";case"Ejecucin":return"";case"Escritura":return"";case"Interrupcin":return"";default:return""}})();return e?h.jsx("span",{className:"inline-block animate-bounce",children:n}):n}function Sde(t){return/obten/i.test(t)||/operando/i.test(t)||/leer/i.test(t)||/cargar/i.test(t)?"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-yellow-400/30 shadow-lg shadow-yellow-400/10":/escrib/i.test(t)||/guardar/i.test(t)||/almacenar/i.test(t)||/resultado/i.test(t)?"bg-gradient-to-r from-purple-500/10 to-violet-500/10 border-purple-400/30 shadow-lg shadow-purple-400/10":(/procesar/i.test(t)||/alu/i.test(t)||/calcular/i.test(t)||/operar/i.test(t)||/ejecut/i.test(t),"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-400/30 shadow-lg shadow-green-400/10")}function rT(t,e){if(!t)return"";switch(e){case"Captacin":return"ring-2 ring-blue-400/50 ring-offset-2 ring-offset-stone-800";case"Obtencin de operandos":return"ring-2 ring-yellow-400/50 ring-offset-2 ring-offset-stone-800";case"Ejecucin":return"ring-2 ring-green-400/50 ring-offset-2 ring-offset-stone-800";case"Escritura":return"ring-2 ring-purple-400/50 ring-offset-2 ring-offset-stone-800";default:return"ring-2 ring-stone-400/50 ring-offset-2 ring-offset-stone-800"}}function kde(t,e){return t==="Captacin"?"text-blue-400":t==="Ejecucin"?/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-400":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-400":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-400"):t==="Escritura"?"text-purple-400":t==="Obtencin de operandos"?"text-yellow-400":"text-stone-400"}function _de(){const t=st(ct),e=st(Ga),n=st(an),i=st(dy),[r]=ba(),s=x.useRef(null),o=(a,l)=>{const[c,...u]=a.split(":"),d=u.join(":").trim();return{cycle:l,stage:c.trim(),action:d}};return x.useEffect(()=>{if(t){const a=N.get(Ht),l=o(t,a);N.set(Ga,c=>{const u=c[c.length-1];return u&&u.cycle===a&&u.action===l.action?c:[...c,l]})}},[t]),x.useEffect(()=>{const a=N.sub(Ht,()=>{const l=N.get(Ht),c=N.get(ct);if(c&&l>0){const u=o(c,l);N.set(tl,{canAnimate:!1,pendingMessage:c}),N.set(Ga,d=>{const f=d[d.length-1];return f&&f.cycle===l&&f.action===u.action?d:[...d,u]}),setTimeout(()=>{N.set(tl,{canAnimate:!0,pendingMessage:null})},100)}l===0&&(N.set(Ga,[]),N.set(tl,{canAnimate:!0,pendingMessage:null}))});return()=>{a()}},[]),x.useEffect(()=>{const a=N.sub(an,()=>{N.get(an).type==="stopped"&&(N.set(Ga,[]),N.set(tl,{canAnimate:!0,pendingMessage:null}))});return()=>{a()}},[]),x.useEffect(()=>{n.type==="running"&&i&&Pi({title:"El programa ha sido modificado",description:"La ejecucin se reiniciar desde el principio para aplicar los cambios.",variant:"info"})},[n,i]),x.useEffect(()=>{const a=s.current;a&&(a.scrollTop=a.scrollHeight)},[e]),r.showInstructionCycle?h.jsx("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[420px]",children:h.jsxs("div",{className:"rounded-xl border-2 border-stone-400/50 bg-gradient-to-br from-stone-800 to-stone-900 shadow-2xl backdrop-blur-sm",children:[h.jsx("div",{className:"rounded-t-xl border-b-2 border-stone-600/50 bg-gradient-to-r from-stone-700 to-stone-800 px-4 py-3",children:h.jsx("div",{className:"flex items-center justify-between",children:h.jsx("div",{className:"flex items-center gap-3",children:h.jsx("div",{children:h.jsx("span",{className:"text-sm font-bold uppercase tracking-wide text-mantis-400",children:"Ciclo de instruccin"})})})})}),h.jsxs("div",{ref:s,className:"scrollbar-thin max-h-80 overflow-y-auto p-4",children:[e.map((a,l)=>{const c=l===0||e[l-1].stage!==a.stage,u=l===e.length-1;return h.jsxs("div",{className:"mb-3 transition-all duration-300 ease-in-out",children:[c&&h.jsx("div",{className:"animate-fade-in mb-3",children:h.jsxs("div",{className:`flex items-center gap-3 rounded-xl border border-stone-600/50 bg-gradient-to-r from-stone-700/80 to-stone-800/80 p-4 shadow-lg ${iT(a.stage)}`,children:[h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"text-xl",children:wde(a.stage,u)}),u&&h.jsx("div",{className:"absolute -right-1 -top-1 size-3 rounded-full bg-green-400"})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:`text-sm font-bold ${iT(a.stage).split(" ")[0]}`,children:a.stage}),h.jsxs("p",{className:"text-xs text-stone-400",children:[a.stage==="Captacin"&&"Leer instruccin",a.stage==="Obtencin de operandos"&&"Preparar datos",a.stage==="Ejecucin"&&"Procesar instruccin",a.stage==="Escritura"&&"Guardar resultado",a.stage==="Interrupcin"&&"Manejar interrupcin"]})]})]})}),a.stage==="Interrupcin"?h.jsx("div",{className:`rounded-xl border-l-4 border-red-400 bg-gradient-to-r from-red-900/30 to-red-800/20 p-4 shadow-lg transition-all duration-300 ${u?"ring-2 ring-red-400/50 ring-offset-2 ring-offset-stone-800":""}`,children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-lg",children:""}),h.jsx("span",{className:"text-sm font-medium text-red-300",children:a.action})]})}):h.jsxs("div",{className:`flex items-center gap-3 rounded-xl border p-4 transition-all duration-300 hover:scale-[1.02] ${a.stage==="Ejecucin"?`${Sde(a.action)} ${u?rT(u,a.stage):""}`:`border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 ${u?"bg-stone-700/80 "+rT(u,a.stage):""}`}`,children:[h.jsx("div",{className:`flex size-8 items-center justify-center rounded-full text-sm font-bold transition-all duration-300 ${u?"scale-110 bg-gradient-to-r from-green-600 to-emerald-700 shadow-lg shadow-green-400/30 ring-2 ring-green-400/50":"bg-stone-700"} ${u?"text-white":kde(a.stage,a.action)}`,children:a.cycle}),h.jsx("div",{className:"flex-1",children:h.jsx("span",{className:`text-sm font-medium transition-all duration-200 ${xde(a.stage,a.action).split(" ")[0]}`,children:a.action})}),u&&h.jsx("div",{className:"flex items-center gap-1",children:h.jsx("div",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"})})]})]},l)}),e.length===0&&h.jsx("div",{className:"animate-fade-in flex items-center justify-center py-12",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mb-4 text-5xl",children:""}),h.jsx("h4",{className:"mb-2 bg-gradient-to-r from-stone-300 to-stone-400 bg-clip-text text-sm font-bold text-transparent",children:"Esperando instrucciones"}),h.jsx("p",{className:"text-xs text-stone-500",children:"Ejecuta un programa para ver el ciclo"})]})})]}),h.jsx("div",{className:"rounded-b-xl border-t border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-blue-400"}),"Ciclos: ",N.get(Ht)]}),h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"}),h.jsx("span",{className:"text-xs font-medium text-green-300",children:"Activo"})]})]})})]})}):null}function Cde(){const t=ln(),{devices:e}=Kn();return e.hasIOBus?h.jsx("div",{className:"absolute left-[500px] top-[525px] z-40 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function Ede(){const{devices:t}=Kn(),e=st(yy),n=st(by),i=x.useRef(null),r=x.useRef(null),s=x.useRef(null),o=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),a=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),l="M 750 545 H 800",{path:c,strokeDashoffset:u,opacity:d}=Be("bus.rd"),{path:f,strokeDashoffset:p,opacity:g}=Be("bus.wr");return h.jsxs(h.Fragment,{children:[e&&h.jsx(Nde,{pathRef:r}),n&&h.jsx(Pde,{pathRef:s}),h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[h.jsx("path",{ref:i,className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:o}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:o}),e&&h.jsx(Ze.path,{ref:r,d:c||o,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),e&&h.jsx(Ze.path,{d:c||o,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:a}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:a}),n&&h.jsx(Ze.path,{ref:s,d:f||a,className:"fill-none stroke-orange-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,146,60,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),n&&h.jsx(Ze.path,{d:f||a,className:"fill-none stroke-orange-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),t.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(Tn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:l}),h.jsx(Ze.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:l,style:Be("bus.mem")})]}),t.pic&&h.jsx(Tn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&h.jsx(Tn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.handshake&&h.jsx(Tn,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&h.jsxs(h.Fragment,{children:[h.jsx(Tn,{springs:"bus.intr",d:"M 110 700 V 470"}),h.jsx(Tn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&h.jsx(Tn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&h.jsx(Tn,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&h.jsx(Tn,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio&&h.jsx(Tn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&h.jsx(Tn,{springs:"bus.int0",d:"M 900 1015 H 900"}),t.pio==="printer"&&h.jsxs(h.Fragment,{children:[h.jsx(Tn,{springs:"bus.printer.strobe",d:"M 1120 767 H 1225 V 992 H 1300"}),h.jsx(Tn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 782 H 1120"}),h.jsx(Tn,{springs:"bus.printer.data",d:"M 1120 837 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&h.jsxs(h.Fragment,{children:[h.jsx(Tn,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),h.jsx(Tn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),h.jsx(Tn,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]}),t.pio&&t.switches&&h.jsx(Tn,{springs:"bus.switches->pio",d:"M 1300 768 H 1120"}),t.pio&&t.leds&&h.jsx(Tn,{springs:"bus.pio->leds",d:"M 1300 848 H 1120"})]})]})}function Tn({d:t,springs:e}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[3px]",strokeLinejoin:"round",d:t}),h.jsx(Ze.path,{d:t,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Be(e)}),h.jsx(Ze.path,{d:t,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Be(e)})]})}function Ade(){const t=ln(),{devices:e}=Kn();return h.jsxs(h.Fragment,{children:[h.jsx(ur,{style:{left:385,top:405},children:"rd"}),h.jsx(ur,{style:{left:385,top:425},children:"wr"}),e.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(ur,{style:{left:384,top:443},children:"io/m"}),h.jsx(ur,{style:{left:715,top:538},children:t("computer.chip-select.mem")})]}),e.pic&&h.jsx(h.Fragment,{children:h.jsx(ur,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")})}),e.timer&&h.jsx(h.Fragment,{children:h.jsx(ur,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")})}),e.pio&&h.jsx(h.Fragment,{children:h.jsx(ur,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")})}),e.handshake&&h.jsx(h.Fragment,{children:h.jsx(ur,{className:"left-[675px] top-[573px]",children:t("computer.chip-select.handshake")})}),e.pic&&h.jsxs(h.Fragment,{children:[h.jsx(ur,{className:"left-[75px] top-[478px]",children:"intr"}),h.jsx(ur,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&h.jsxs(h.Fragment,{children:[h.jsx(ur,{className:"left-[1310px] top-[983px]",children:"strobe"}),h.jsx(ur,{className:"left-[1310px] top-[998px]",children:"busy"}),h.jsx(ur,{className:"left-[1310px] top-[1053px]",children:"data"})]})]})}function ur({children:t,style:e,className:n}){return h.jsx("span",{className:`pointer-events-none absolute z-[50] block font-mono text-xs font-bold tracking-wider text-stone-400${n?" "+n:""}`,style:e,children:t})}function Nde({pathRef:t}){const[e,n]=x.useState(!0),i=kp(yy),[r,s]=x.useState(!1),[o,a]=x.useState(0),[l]=ba();if(x.useEffect(()=>{if(e&&r){const p=Date.now(),m=l.animations?Math.min(l.executionUnit,250):1,v=()=>{const y=Date.now()-p,b=Math.min(y/m,1);a(b),b<1?requestAnimationFrame(v):(n(!1),setTimeout(()=>i(!1),100))};v()}},[e,r,i,l.animations,l.executionUnit]),x.useEffect(()=>{let p=0;const g=50,m=()=>{if(t.current){s(!0);return}p++,p<g?setTimeout(m,10):s(!1)};m()},[t]),!e||!r||!l.animations)return null;const c=380,u=800,d=420,f=c+(u-c)*o;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:f,top:d-32,color:"#ef4444",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:e?1:0},children:"Read"})}function Pde({pathRef:t}){const[e,n]=x.useState(!0),i=kp(by),[r,s]=x.useState(!1),[o,a]=x.useState(0),[l]=ba();if(x.useEffect(()=>{if(e&&r){const p=Date.now(),m=l.animations?Math.min(l.executionUnit,250):1,v=()=>{const y=Date.now()-p,b=Math.min(y/m,1);a(b),b<1?requestAnimationFrame(v):(n(!1),setTimeout(()=>i(!1),100))};v()}},[e,r,i,l.animations,l.executionUnit]),x.useEffect(()=>{let p=0;const g=50,m=()=>{if(t.current){s(!0);return}p++,p<g?setTimeout(m,10):s(!1)};m()},[t]),!e||!r)return null;const c=380,u=800,d=440,f=c+(u-c)*o;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:f,top:d+12,color:"#f59e42",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:e?1:0},children:"Write"})}function Mde(){const{devices:t}=Kn(),e=["M 645 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 645 250 H 645 V 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:i,strokeDashoffset:r,opacity:s}=Be("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=Be("bus.address");return h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[25] size-full",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:n}),h.jsx(Ze.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx(Ze.path,{d:i,className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:e}),h.jsx(Ze.path,{d:o,className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}}),h.jsx(Ze.path,{d:o,className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function Rde(){return h.jsxs(h.Fragment,{children:[h.jsx(Mde,{}),h.jsx(Ede,{}),h.jsx(Ade,{}),h.jsx(Cde,{})]})}function Tde(){const{devices:t}=Kn();if(!t.clock)return null;const e=Be("clock.angle");return h.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:h.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx(Ze.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const Ode={register:{beginner:"Un registro es como una caja pequea donde la CPU guarda datos temporalmente. Es muy rpido de acceder.",intermediate:"Los registros son memoria de acceso rpido dentro de la CPU. Son ms rpidos que la RAM pero tienen menos capacidad.",advanced:"Registros de propsito general (AL, BL, CL, DL) para operaciones aritmticas. Cada uno puede almacenar 8 bits."},memory:{beginner:"La memoria RAM es como un gran almacn donde se guardan programas y datos. Cada ubicacin tiene una direccin nica.",intermediate:"Memoria de acceso aleatorio (RAM) de 256 bytes. La CPU puede leer y escribir en cualquier direccin.",advanced:"Memoria principal de 256 bytes con direccionamiento de 8 bits (00-FF). Organizada en celdas de 8 bits cada una."},alu:{beginner:'La ALU (Unidad Aritmtico-Lgica) es el "cerebro matemtico" de la CPU. Realiza sumas, restas y comparaciones.',intermediate:"Arithmetic Logic Unit procesa operaciones matemticas y lgicas. Recibe operandos y devuelve resultados.",advanced:"ALU de 8 bits que ejecuta operaciones: ADD, SUB, AND, OR, XOR, NOT, CMP. Incluye flags de estado (Z, N, C)."},bus:{beginner:'Los buses son como "carreteras" por donde viajan los datos entre los componentes de la computadora.',intermediate:"Buses de datos y control conectan CPU, memoria y perifricos. El bus de datos transporta informacin.",advanced:"Bus de datos de 8 bits bidireccional, bus de direcciones de 8 bits, y lneas de control para sincronizacin."},instruction:{beginner:"Una instruccin es un comando que le dice a la CPU qu operacin realizar, como sumar dos nmeros.",intermediate:"Cada instruccin tiene un cdigo de operacin (opcode) y operandos. La CPU las ejecuta secuencialmente.",advanced:"Formato de instruccin: opcode (1 byte) + operandos. Ejemplos: MOV, ADD, JMP, CALL. Ciclo fetch-decode-execute."},"program-counter":{beginner:"El contador de programa (IP) indica qu instruccin ejecutar a continuacin. Se incrementa automticamente.",intermediate:"Program Counter (IP) contiene la direccin de la siguiente instruccin. Se actualiza en cada ciclo.",advanced:"Instruction Pointer (IP) de 8 bits. Incrementa en 1-2 bytes segn el tamao de la instruccin actual."},flags:{beginner:"Las banderas son indicadores que muestran el resultado de operaciones, como si el resultado fue cero.",intermediate:"Flags de estado: Zero (Z), Negative (N), Carry (C). Se actualizan automticamente en operaciones.",advanced:"Flags de 1 bit: Z (resultado cero), N (resultado negativo), C (acarreo/overflow). Controlan saltos condicionales."},stack:{beginner:"La pila es como una pila de platos. Solo puedes agregar o quitar del tope. til para guardar direcciones de retorno.",intermediate:"Stack Pointer (SP) apunta al tope de la pila. PUSH agrega datos, POP los retira. LIFO (Last In, First Out).",advanced:"Pila de 256 bytes con SP de 8 bits. PUSH decrementa SP, POP lo incrementa. Usada para CALL/RET y variables locales."},interrupt:{beginner:"Una interrupcin es como un timbre que interrumpe lo que est haciendo la CPU para atender algo urgente.",intermediate:"Las interrupciones permiten que dispositivos externos notifiquen a la CPU eventos importantes.",advanced:"Sistema de interrupciones con PIC (Programmable Interrupt Controller). IRET retorna de la rutina de interrupcin."},peripheral:{beginner:"Los perifricos son dispositivos externos como teclado, pantalla y LEDs que se conectan a la computadora.",intermediate:"Perifricos se comunican con la CPU a travs de puertos de entrada/salida (I/O).",advanced:"Sistema de I/O con PIO (Programmable I/O) y mdulos especficos para cada perifrico."},assembly:{beginner:"El lenguaje ensamblador es un lenguaje de programacin que usa palabras en lugar de nmeros para las instrucciones.",intermediate:"Cada instruccin de ensamblador se traduce a cdigo de mquina. El ensamblador hace esta traduccin.",advanced:"Sintaxis: etiqueta, mnemnico, operandos, comentarios. Directivas como ORG, DB, DW para datos."},addressing:{beginner:"El direccionamiento es cmo la CPU encuentra los datos que necesita en la memoria.",intermediate:"Modos de direccionamiento: inmediato, directo, indirecto. Cada uno accede a datos de forma diferente.",advanced:"Direccionamiento inmediato (valor en instruccin), directo (direccin en instruccin), indirecto (direccin en registro)."}},Ide={beginner:gd,intermediate:Sm,advanced:UC},sT={beginner:"text-blue-400",intermediate:"text-yellow-400",advanced:"text-purple-400"},ez=x.memo(({concept:t,level:e="beginner",children:n,className:i})=>{const[r,s]=x.useState(e),o=Ode[t];if(!o)return console.warn(`No educational content found for concept: ${t}`),h.jsx(h.Fragment,{children:n});const a=o[r],l=Ide[r],c=h.jsxs("div",{className:"max-w-xs p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx(Ye,{icon:l,className:ne("text-sm",sT[r])}),h.jsxs("span",{className:ne("text-sm font-medium",sT[r]),children:["Nivel"," ",r==="beginner"?"Bsico":r==="intermediate"?"Intermedio":"Avanzado"]})]}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:a}),h.jsx("div",{className:"flex gap-1",children:["beginner","intermediate","advanced"].map(u=>h.jsx("button",{onClick:d=>{d.stopPropagation(),s(u)},className:ne("rounded px-2 py-1 text-xs transition-colors",r===u?"bg-mantis-600 text-white":"bg-stone-700 text-stone-400 hover:bg-stone-600"),children:u==="beginner"?"B":u==="intermediate"?"I":"A"},u))})]});return h.jsx(ts,{content:c,position:"top",children:h.jsxs("span",{className:ne("inline-flex cursor-help items-center gap-1",i),children:[n,h.jsx(Ye,{icon:gd,className:"text-xs text-mantis-400 opacity-70 transition-opacity hover:opacity-100"})]})})});ez.displayName="EducationalTooltip";var fx="Popover",[tz,dve]=js(fx,[_f]),Lm=_f(),[Dde,Ql]=tz(fx),nz=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=Lm(e),l=x.useRef(null),[c,u]=x.useState(!1),[d,f]=Nl({prop:i,defaultProp:r??!1,onChange:s,caller:fx});return h.jsx(C$,{...a,children:h.jsx(Dde,{scope:e,contentId:vf(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:x.useCallback(()=>u(!0),[]),onCustomAnchorRemove:x.useCallback(()=>u(!1),[]),modal:o,children:n})})};nz.displayName=fx;var iz="PopoverAnchor",jde=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Ql(iz,n),s=Lm(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return x.useEffect(()=>(o(),()=>a()),[o,a]),h.jsx(tx,{...s,...i,ref:e})});jde.displayName=iz;var rz="PopoverTrigger",sz=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Ql(rz,n),s=Lm(n),o=xt(e,r.triggerRef),a=h.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":uz(r.open),...i,ref:o,onClick:ke(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:h.jsx(tx,{asChild:!0,...s,children:a})});sz.displayName=rz;var yA="PopoverPortal",[Lde,Bde]=tz(yA,{forceMount:void 0}),oz=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Ql(yA,e);return h.jsx(Lde,{scope:e,forceMount:n,children:h.jsx(va,{present:n||s.open,children:h.jsx(Im,{asChild:!0,container:r,children:i})})})};oz.displayName=yA;var cf="PopoverContent",az=x.forwardRef((t,e)=>{const n=Bde(cf,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Ql(cf,t.__scopePopover);return h.jsx(va,{present:i||s.open,children:s.modal?h.jsx(Fde,{...r,ref:e}):h.jsx(zde,{...r,ref:e})})});az.displayName=cf;var $de=Wd("PopoverContent.RemoveScroll"),Fde=x.forwardRef((t,e)=>{const n=Ql(cf,t.__scopePopover),i=x.useRef(null),r=xt(e,i),s=x.useRef(!1);return x.useEffect(()=>{const o=i.current;if(o)return N$(o)},[]),h.jsx(ix,{as:$de,allowPinchZoom:!0,children:h.jsx(lz,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ke(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ke(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),zde=x.forwardRef((t,e)=>{const n=Ql(cf,t.__scopePopover),i=x.useRef(!1),r=x.useRef(!1);return h.jsx(lz,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),lz=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=Ql(cf,n),p=Lm(n);return JE(),h.jsx(Jb,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:h.jsx(Tm,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(lA,{"data-state":uz(f.open),role:"dialog",id:f.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),cz="PopoverClose",Ude=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Ql(cz,n);return h.jsx(Qe.button,{type:"button",...i,ref:e,onClick:ke(t.onClick,()=>r.onOpenChange(!1))})});Ude.displayName=cz;var Vde="PopoverArrow",Hde=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Lm(n);return h.jsx(cA,{...r,...i,ref:e})});Hde.displayName=Vde;function uz(t){return t?"open":"closed"}var Wde=nz,Gde=sz,Kde=oz,dz=az;const My=Wde,Ry=Gde,rm=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>h.jsx(Kde,{children:h.jsx(dz,{ref:r,align:e,sideOffset:n,className:ne("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));rm.displayName=dz.displayName;function Cr({name:t,valueAtom:e,springs:n,emphasis:i=!1,className:r}){const s=ln(),o=st(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,u=["AL","BL","CL","DL"].includes(t),d=t==="IP",f=t==="SP",p=t==="MBR",g=t==="MAR",m=t==="IR",v=["id","ri"].includes(t),y=c==="FLAGS";return h.jsxs(My,{children:[h.jsx(Ry,{asChild:!0,children:h.jsxs(Ze.button,{title:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c,className:ne("flex cursor-pointer items-center font-mono leading-none transition-opacity",u||d||f||p||g||m||v?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":y?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",u?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":f?"border-yellow-400 bg-stone-800 text-yellow-300":p||g||m?"border-indigo-400 bg-stone-800 text-indigo-300":v?"border-cyan-400 bg-stone-800 text-cyan-300":y?"":i?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:c==="left"||c==="right"||c==="result"?{backgroundColor:"transparent"}:Be(n),children:[u||f||p||g||m||v?h.jsx(h.Fragment,{children:h.jsx("span",{className:ne(u||v||m||g||p?"mt-4":"mt-2","font-mono text-base font-bold"),children:a.toString("hex")})}):d?h.jsx(h.Fragment,{children:h.jsx("span",{className:ne("mt-4 font-mono text-base font-bold text-red-300"),children:a.toString("hex")})}):c==="left"?h.jsx("span",{className:"opacity-0"}):c==="right"?h.jsx("span",{className:"opacity-0"}):c==="result"?h.jsx("span",{className:"opacity-0"}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:ne("mr-2 font-extrabold tracking-wide",u&&"text-mantis-300 drop-shadow",y&&"text-yellow-200",v&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),h.jsx("span",{className:ne("rounded px-1 py-0.5 font-light",u?"border border-mantis-400 bg-stone-950 text-mantis-300":y?"border border-yellow-400 bg-yellow-950 text-yellow-200":v?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),y&&h.jsxs("span",{className:"ml-2 flex gap-1",children:[h.jsx("span",{className:ne("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),h.jsx("span",{className:ne("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),h.jsxs(rm,{className:"w-60",children:[h.jsx("div",{className:"px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"font-medium text-white",children:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c}),c!=="left"&&c!=="right"&&c!=="result"&&h.jsx(ez,{concept:"register",level:"beginner",children:h.jsx("span",{className:"text-xs text-mantis-400",children:""})})]})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(b=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${b}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(b)})]},b))})]})]})}function Xde(){const t=st(de.FLAGS),e=st(de.result),n=st(de.left),i=st(de.right),r=st(eE),s=st(Vn),[o,a]=x.useState(!1),[l,c]=x.useState(""),[u,d]=x.useState(""),[f,p]=x.useState(""),[g,m]=x.useState(""),[v,y]=x.useState(""),[b,w]=x.useState(""),k=st(QC),[_]=ba(),E=x.useCallback(()=>s&&"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),C=$=>["ADD","SUB","CMP","AND","OR","XOR"].some(J=>$.startsWith(J)),P=$=>{let K="AL",J="BL",Q="AL";const W=[/ADD\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/SUB\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/CMP\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/AND\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/OR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/XOR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/],U=/^(ADD|SUB|CMP|AND|OR|XOR)\s+(\[[^\]]+\]|[0-9A-F]+h?)\s*,\s*([0-9A-F]+h?|0x[0-9A-F]+)$/i;if($.match(U))return{left:"mbr",right:"id",destination:"mbr"};for(const Z of W){const oe=$.match(Z);if(oe){K=oe[1],J=oe[2],/\[.*\]/.test(K)&&(K="MBR"),/\[.*\]/.test(J)&&(J="MBR"),Q=oe[1];break}}const ve=["AL","BL","CL","DL","MBR"];return ve.includes(K)||(K="AL"),ve.includes(J)||(J="BL"),ve.includes(Q)||(Q="AL"),{left:K,right:J,destination:Q}};x.useEffect(()=>{const $=Q=>{console.log(" handleInstruction llamado con:",Q);const U=E()||Q;if(console.log(" Instruccin completa a usar:",U),Q)if(C(U)){a(!0);const{left:ve,right:Z,destination:oe}=P(U);console.log(" Registros detectados:",{left:ve,right:Z,destination:oe}),m(ve),y(Z),w(oe);let z,B;ve==="MBR"&&Z!=="MBR"?(z=Qi(ve,"left",Q,void 0,{separateMBRPaths:!0,direction:"left"}),B=Qi(Z,"right",Q)):Z==="MBR"&&ve!=="MBR"?(z=Qi(ve,"left",Q),B=Qi(Z,"right",Q,void 0,{separateMBRPaths:!0,direction:"right"})):(z=Qi(ve,"left",Q),B=Qi(Z,"right",Q));const H="M 455 45 L 465 45 L 550 45 L 550 16 L 90 16 L 90 85 L 130 85 L 220 85",S="M 455 85 L 465 85 L 550 85 L 550 250 L 90 250 L 90 145 L 125 145 L 220 145";c(z||H),d(B||S),p("")}else a(!1),c(""),d(""),p(""),m(""),y(""),w("");else a(!1),c(""),d(""),p(""),m(""),y(""),w("")},K=Q=>{const W=Q,U=E();$(U||W.detail.instruction)},J=Q=>{const W=Q;if(W.detail&&W.detail.instruction){const U=E();$(U||W.detail.instruction)}};return window.addEventListener("instructionChange",K),window.addEventListener("cpu:alu.execute",J),()=>{window.removeEventListener("instructionChange",K),window.removeEventListener("cpu:alu.execute",J)}},[s,E]);const T=t.bit(1),I=t.bit(0),L=t.bit(3),j=t.bit(4),X=t.bit(2);return h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[l&&h.jsx(Ze.path,{className:"fill-none stroke-green-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",d:l,pathLength:1,strokeDasharray:1,style:Be("cpu.alu.operands")}),u&&h.jsx(Ze.path,{className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",d:u,pathLength:1,strokeDasharray:1,style:Be("cpu.alu.operands")}),f&&h.jsx(Ze.path,{className:"fill-none stroke-amber-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,191,36,0.6)]",strokeLinejoin:"round",d:f,pathLength:1,strokeDasharray:1,style:Be("cpu.alu.results")}),l&&h.jsx(Ze.path,{className:"fill-none stroke-green-300 stroke-1 opacity-50",strokeLinejoin:"round",d:l,pathLength:1,strokeDasharray:1,style:Be("cpu.alu.operands")}),u&&h.jsx(Ze.path,{className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",d:u,pathLength:1,strokeDasharray:1,style:Be("cpu.alu.operands")}),f&&h.jsx(Ze.path,{className:"fill-none stroke-amber-300 stroke-1 opacity-50",strokeLinejoin:"round",d:f,pathLength:1,strokeDasharray:1,style:Be("cpu.alu.results")}),g&&v&&o&&l&&u&&h.jsxs(Ze.text,{x:"125",y:"65",fill:"#34D399",fontSize:"12",fontWeight:"bold",style:{opacity:Be("cpu.alu.leftText").opacity},children:[g," = ",n.low.toString("hex")]}),g&&v&&o&&l&&u&&h.jsxs(Ze.text,{x:"125",y:"168",fill:"#60A5FA",fontSize:"12",fontWeight:"bold",style:{opacity:Be("cpu.alu.rightText").opacity},children:[v," = ",i.low.toString("hex")]}),b&&o&&h.jsxs(Ze.text,{x:"310",y:"95",fill:"#A855F7",fontSize:"12",fontWeight:"bold",style:{...Be("cpu.alu.cog"),opacity:Be("cpu.alu.resultText").opacity},children:[b," = ",e.low.toString("hex")]}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#374151"}),h.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),h.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),h.jsx("filter",{id:"aluShadow",children:h.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),h.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),h.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),h.jsx(Ze.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:Be("cpu.alu.cog").rot.to($=>`rotate(${$*60}deg)`)}}),o&&h.jsx(Ze.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:Be("cpu.alu.operation"),children:r}),h.jsxs(Ze.div,{className:ne("absolute flex items-center justify-center gap-0.5 rounded border-2 border-amber-400 bg-transparent font-bold text-stone-200 shadow-lg ring-1 ring-amber-300",_.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px] min-h-[40px] min-w-[60px] px-2":"left-[230px] top-[190px] min-h-[40px] min-w-[40px] px-1"),style:Be("cpu.FLAGS"),children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[7px] font-bold text-stone-300",children:"FLAGS"}),h.jsxs("div",{className:"mt-3 flex items-center gap-0.5",children:[k&&h.jsx("span",{className:ne("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",j?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),_.flagsVisibility==="SF_OF_CF_ZF"&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:ne("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",L?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),h.jsx("span",{className:ne("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",X?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),h.jsx("span",{className:ne("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",T?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),h.jsx("span",{className:ne("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",I?"border-yellow-400 bg-yellow-400 text-stone-950 shadow-[0_0_4px_rgba(250,204,21,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function qde({progress:t,resetAnimations:e,returnToOriginal:n}){const{opacity:r,filterIntensity:s}=qb({opacity:t.to(o=>n||e||o===0||o>0&&o<1?.4:o===1?1:.4),filterIntensity:t.to(o=>n||e||o===0||o>0&&o<1?.25:o===1?.6:.25),config:{tension:280,friction:60,duration:300}});return h.jsx(Ze.div,{style:{opacity:r,filter:s.to(o=>`drop-shadow(0 0 ${8*o}px rgba(56,189,248,${o}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"90",height:"42",viewBox:"0 0 90 42",children:[h.jsx("rect",{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"#0369a1",stroke:"#38bdf8",strokeWidth:"2.5"}),Array.from({length:4}).map((o,a)=>h.jsx("rect",{x:2,y:10+a*5,width:8,height:2.5,rx:1.2,fill:"#38bdf8"},a)),Array.from({length:8}).map((o,a)=>h.jsx(Ze.rect,{x:60,y:8+a*3.2,width:24,height:2.5,rx:1.2,fill:t.to(l=>n||e||l>0&&l<1?"#0ea5e9":l===1?"#7dd3fc":"#0ea5e9"),style:{filter:t.to(l=>n||e||l>0&&l<1?"none":l===1?"drop-shadow(0 0 8px #38bdf8)":"none")}},a)),Array.from({length:5}).map((o,a)=>h.jsx(Ze.rect,{x:15,y:t.to(()=>12+a*3.5),width:40,height:2.8,rx:1.4,fill:t.to(l=>n||e||l===0||l>0&&l<1?"#0c4a6e":l===1?"#7dd3fc":"#0c4a6e"),style:{filter:t.to(l=>n||e||l===0||l>0&&l<1?"none":l===1?"drop-shadow(0 0 6px #38bdf8)":"none"),transition:"fill 0.7s, filter 0.7s"}},a)),h.jsx(Ze.rect,{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"none",stroke:"#7dd3fc",strokeWidth:"2.5",strokeDasharray:"160",strokeDashoffset:t.to(o=>n||e||o>0&&o<1?160:o===1?0:160),style:{opacity:t.to(o=>n||e||o>0&&o<1?0:o===1?.8:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})})}function Yde({progress:t,phase:e,resetAnimations:n,returnToOriginal:i}){return h.jsxs(h.Fragment,{children:[Array.from({length:5}).map((s,o)=>h.jsx(Ze.rect,{x:16,y:t.to(()=>10+o*4),width:38,height:3,rx:1,fill:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"#581c87":a>=(o+1)/5?"#f0abfc":Math.floor(a*5)===o&&a>0&&a<1?"#fff1fb":"#581c87"),style:{filter:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"none":a>=(o+1)/5?"drop-shadow(0 0 6px #e879f9)":Math.floor(a*5)===o&&a>0&&a<1?"drop-shadow(0 0 12px #e879f9)":"none"),transition:"fill 0.7s, filter 0.7s"}},o)),h.jsx(Ze.rect,{x:15,y:t.to(s=>10+Math.floor(s*5)*4-.5),width:40,height:3.5,rx:1.5,fill:"#e879f9",style:{opacity:t.to(s=>i||n?0:s>0&&s<1?.25+.25*Math.sin(s*Math.PI):0),transition:"y 0.3s, opacity 0.2s"}}),h.jsx(Ze.rect,{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"none",stroke:"#f0abfc",strokeWidth:"2",strokeDasharray:"160",strokeDashoffset:t.to(s=>i||n||e==="fetching"&&s===0||s===0?160:160-160*s),style:{opacity:t.to(s=>i||n?0:s>0&&s<1&&e==="fetching-operands"?.7:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})}function Jde({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=qb({opacity:t.to(s=>n||s===0?.4:s>0&&s<1?1:.4),pulseActive:t.to(s=>n?!1:e&&s>0&&s<1),config:{tension:280,friction:60,duration:300}});return h.jsx(Ze.span,{className:"flex size-4 items-center justify-center rounded-full bg-fuchsia-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(232,121,249,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Lectura de microinstrucciones",children:h.jsx(Ze.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"1"})})}function Zde({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=qb({opacity:t.to(s=>n||s===0||s>0&&s<1?.4:s===1?1:.4),pulseActive:t.to(s=>n?!1:e&&s===1),config:{tension:280,friction:60,duration:300}});return h.jsx(Ze.span,{className:"flex size-4 items-center justify-center rounded-full bg-sky-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(56,189,248,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Envo de seales de control",children:h.jsx(Ze.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"2"})})}function Qde({progress:t,phase:e,memAnimKey:n,resetAnimations:i,returnToOriginal:r}){const{opacity:s,filterIntensity:o}=qb({opacity:t.to(a=>r||a===0?.4:a>0&&a<1?1:.4),filterIntensity:t.to(a=>r||a===0?.25:a>0&&a<1?.6:.25),config:{tension:280,friction:60,duration:300}});return h.jsx(Ze.div,{style:{opacity:s,filter:o.to(a=>`drop-shadow(0 0 ${8*a}px rgba(232,121,249,${a}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"70",height:"38",viewBox:"0 0 70 38",className:"mb-0.5",children:[h.jsx("rect",{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"#a21caf",stroke:"#e879f9",strokeWidth:"2"}),Array.from({length:4}).map((a,l)=>h.jsx("rect",{x:2,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),Array.from({length:4}).map((a,l)=>h.jsx("rect",{x:62,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),h.jsx(Yde,{progress:t,phase:e,resetAnimations:i,returnToOriginal:r},n)]})})}function efe(){const[t,e]=x.useState(0),[n,i]=x.useState(!1),[r,s]=x.useState(!1);x.useEffect(()=>{let d=0;const f=Be("cpu.decoder.progress.progress").to(p=>{d===0&&p>0&&(e(g=>g+1),i(!1),s(!1)),d>0&&p===0&&(e(g=>g+1),i(!0),setTimeout(()=>{s(!0)},100),setTimeout(()=>i(!1),100)),d=p});return()=>{typeof f=="function"&&f()}},[]);const o=ln(),a=st(Vn),[l,c]=x.useState(!1),[,u]=x.useState(!1);return x.useEffect(()=>{let d=null;u(!1);let f;return l?f=Be("cpu.decoder.progress.progress").to(p=>{p===1?d=setTimeout(()=>{u(!0)},1500):(d&&clearTimeout(d),u(!1))}):u(!1),()=>{d&&clearTimeout(d),typeof f=="function"&&f()}},[l]),h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[h.jsx(Ze.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Be("cpu.decoder.path")}),h.jsx(Ze.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Be("cpu.decoder.path")})]}),h.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:o("computer.cpu.control-unit")})}),h.jsxs("div",{className:"absolute bottom-[17px] left-[30px] flex h-[160px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[h.jsx("div",{className:"min-w-[180px] overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-3 py-1",children:h.jsxs("div",{style:{position:"relative",left:0},children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{style:{position:"relative",left:0,display:"flex",alignItems:"center"},children:[h.jsx("span",{className:"text-sm leading-none",children:o("computer.cpu.decoder")}),h.jsx("button",{type:"button","aria-label":l?"Ocultar memoria de control":"Mostrar memoria de control",className:"ml-2 flex size-6 items-center justify-center rounded-lg bg-gradient-to-r from-mantis-600 to-mantis-500 text-white shadow-lg transition-all duration-300 hover:from-mantis-500 hover:to-mantis-400 focus:outline-none focus:ring-2 focus:ring-mantis-400",style:{fontSize:"1.2em",lineHeight:1,padding:0,minWidth:0,minHeight:0,transform:l?"rotate(180deg)":"rotate(0deg)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:l?"0 4px 12px rgba(34,197,94,0.4)":"0 2px 8px rgba(34,197,94,0.2)"},onClick:()=>c(d=>!d),children:h.jsx("span",{style:{fontWeight:"bold",transform:l?"scale(0.8)":"scale(1)",transition:"transform 0.2s ease-out"},children:l?"":"+"})})]})}),h.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:h.jsx(Ze.div,{className:"h-full bg-mantis-400",style:{width:Be("cpu.decoder.progress.progress").to(d=>`${d*100}%`),opacity:Be("cpu.decoder.progress.opacity")}})}),h.jsx("div",{className:"flex w-full justify-center",children:l&&h.jsx("div",{className:"flex min-w-[120px] flex-col items-center",children:h.jsxs("div",{className:"flex flex-row items-start gap-4",children:[h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-fuchsia-100 drop-shadow-[0_0_6px_rgba(232,121,249,0.6)]",style:{minHeight:"18px"},children:[h.jsx(Jde,{progress:Be("cpu.decoder.progress.progress"),showControlMem:l,returnToOriginal:r}),"Memoria de control"]}),h.jsx(Qde,{progress:Be("cpu.decoder.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]}),h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-sky-100 drop-shadow-[0_0_6px_rgba(56,189,248,0.6)]",style:{minHeight:"18px"},children:[h.jsx(Zde,{progress:Be("cpu.decoder.progress.progress"),showControlMem:l,returnToOriginal:r}),"Secuenciador"]}),h.jsx(qde,{progress:Be("cpu.decoder.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]})]})})}),h.jsx("div",{className:"flex w-full justify-center",style:{maxHeight:l?90:0,opacity:l?1:0,transform:l?"translateY(0)":"translateY(-10px)",transition:"max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease-out, transform 0.5s ease-out",overflow:"hidden"}})]})}),h.jsx("div",{className:"flex w-full flex-1 items-start justify-center p-1",children:h.jsxs("div",{className:"w-[220px] max-w-[220px]",children:[h.jsx("div",{className:"mb-1 flex items-center justify-between",children:h.jsx("span",{className:"w-16 whitespace-nowrap text-xs font-bold uppercase tracking-wide text-mantis-400",children:"Instruccin"})}),h.jsx("div",{className:"mb-0.5 rounded border border-stone-600 bg-stone-900/80 p-0.5",children:h.jsx("div",{className:"min-w-0 flex-1 text-center",children:a&&"metadata"in a&&a.metadata?h.jsxs("div",{className:"truncate text-xs text-stone-300",children:[h.jsx("span",{className:"font-mono text-mantis-300",children:a.metadata.name}),a.metadata.operands.length>0&&h.jsxs("span",{className:"text-white",children:[" ",a.metadata.operands.join(", ")]})]}):h.jsx("div",{className:"text-xs text-stone-500",children:(a==null?void 0:a.phase)==="stopped"?"CPU detenida":"Esperando..."})})})]})})]})]})}function tfe(){const[t,e]=x.useState(!1),[n,i]=x.useState(0);return x.useEffect(()=>{const r=()=>{e(!0),i(a=>a+1);const o=gt().executionUnit*10;setTimeout(()=>{e(!1)},o)};return window.addEventListener("ip-register-update",r),()=>{window.removeEventListener("ip-register-update",r)}},[]),t?h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-20px);
          }
          70% {
            opacity: 1;
            transform: translateY(-20px);
          }
          100% {
            opacity: 0;
            transform: translateY(-40px);
          }
        }
      `}),gt().animations&&h.jsx("div",{className:ne("pointer-events-none absolute left-[435px] top-[332px]","font-mono text-xs font-bold"),style:{color:"#ff6347",animation:`slideUpAndFade ${gt().executionUnit*10}ms ease-out forwards`},children:"+1"},n)]}):null}function nfe(){const t=ln(),e=st(Tb),[n,i]=x.useState(!1),[r,s]=x.useState(!1),[o,a]=x.useState(!1);return x.useEffect(()=>{const l=(u,d,f)=>{a(u==="ADD"||u==="SUB"||u==="CMP"||u==="AND"||u==="OR"||u==="XOR"||u==="NOT"||u==="NEG"||u==="DEC"||u==="INC"),i(!!(u==="IRET"||d)),s(!!f)},c=u=>{const d=u;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]),h.jsxs("div",{"data-testid":"cpu-component",className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),h.jsx(Ase,{showSP:e,showri:r}),h.jsx(kse,{showSP:e,showid:n,showri:r}),o&&h.jsxs(h.Fragment,{children:[h.jsx(zi,{name:"left",className:ne("left-[96px] top-[49px]","border-transparent","bg-transparent")}),h.jsx(zi,{name:"right",className:ne("left-[96px] top-[150px]","border-transparent","bg-transparent")}),h.jsx(zi,{name:"result",className:ne("left-[280px] top-[79px]","border-transparent","bg-transparent")})]}),h.jsx(Xde,{}),h.jsxs("div",{className:"absolute left-[450px] top-[30px] z-10",children:[h.jsx(zi,{name:"AL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"AL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[70px] z-10",children:[h.jsx(zi,{name:"BL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"BL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[110px] z-10",children:[h.jsx(zi,{name:"CL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"CL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[150px] z-10",children:[h.jsx(zi,{name:"DL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"DL"})]}),n&&h.jsxs("div",{className:"absolute left-[450px] top-[190px] z-10",children:[h.jsx(zi,{name:"id",className:"border-cyan-400 pt-1"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"id"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[332px] z-10",children:[h.jsx(zi,{name:"IP",emphasis:!0,className:"border-red-500"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-red-500 bg-red-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-red-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IP"})]}),h.jsxs("div",{className:"absolute left-[594px] top-[332px] z-10",children:[h.jsx(zi,{name:"MAR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MAR"})]}),h.jsxs("div",{className:"absolute left-[594px] top-[233px] z-10",children:[h.jsx(zi,{name:"MBR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MBR"})]}),h.jsxs("div",{className:"absolute left-[230px] top-[270px] z-10",children:[h.jsx(zi,{name:"IR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IR"})]}),h.jsx(efe,{}),e&&h.jsxs("div",{className:"absolute left-[450px] top-[292px] z-10",children:[h.jsx(zi,{name:"SP",emphasis:!0,className:"border-yellow-400 pt-2"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-yellow-400 bg-yellow-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-yellow-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"SP"})]}),r&&h.jsxs("div",{className:"absolute left-[450px] top-[372px] z-10",children:[h.jsx(zi,{name:"ri",emphasis:!0,className:"border-cyan-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"ri"})]}),h.jsx(tfe,{})]})}function zi({name:t,emphasis:e,className:n}){const i=r=>`cpu.${r}`;return h.jsx(Cr,{name:t,valueAtom:de[t],springs:i(t),emphasis:e,className:ne("absolute",n)})}const fz=x.memo(({className:t})=>{const e=ln(),n=st(Qd),i=st(Ip),r=st(ef),[s]=ba(),[o,a]=x.useState(!1),c=1e3/s.cpuSpeed;if(!s.showStatsCPU)return null;const u=r>0?(i/r).toFixed(2):"-",d=i*c,f=c/1e3,p=()=>n===0?"":r===0?"":"",g=()=>n===0?"text-stone-400":r===0?"text-yellow-400":"text-mantis-400",m=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"CPI (Ciclos por Instruccin):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Mtrica fundamental que indica la eficiencia del procesador. Calculada como el cociente entre ciclos totales e instrucciones ejecutadas. Un CPI ms bajo significa mejor rendimiento."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo de CPU:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Tiempo real transcurrido durante la ejecucin del programa. Se calcula multiplicando los ciclos totales por el tiempo de cada ciclo segn la velocidad configurada."})]})]}),v=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Velocidad CPU (Hz):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Frecuencia del reloj del procesador que determina la velocidad de ejecucin. Cada ciclo de reloj ejecuta una microoperacin del procesador."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo por Ciclo:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Duracin de cada ciclo calculada como 1/velocidad. Por ejemplo, 1 MHz = 1 microsegundo por ciclo."})]})]});return h.jsxs("div",{className:ne("flex flex-col gap-2 rounded-lg border border-stone-600 bg-stone-900/95 p-3 shadow-lg","min-w-[300px] max-w-[350px]",t),children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-bold uppercase tracking-wide text-mantis-400",children:e("computer.cpu.stats")}),h.jsx("button",{onClick:()=>a(!o),className:ne("rounded px-2 py-1 text-xs transition-colors",o?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:bg-mantis-400/10 hover:text-mantis-400"),children:o?"":"+"})]})}),h.jsxs("div",{className:"flex items-center gap-3 rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:ne("text-2xl",g()),children:p()}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:ne("text-sm font-semibold",g()),children:n>0?"Ejecutando":"En espera"}),h.jsx("div",{className:"mt-1 text-xs text-stone-400",children:r>0?`${r} instrucciones ejecutadas`:"Sin instrucciones ejecutadas"})]})]}),o&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:"mb-2 text-xs font-bold text-mantis-400",children:"Mtricas principales:"}),h.jsx("div",{className:"mb-2 text-xs text-stone-400",children:"Estadsticas acumuladas del programa completo"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:"Ciclos totales del programa"}),h.jsx("div",{className:"font-mono text-lg text-white",children:i})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:e("computer.cpu.instruction-count")}),h.jsx("div",{className:"font-mono text-lg text-white",children:r})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Mtricas de Rendimiento:"}),h.jsx(ts,{content:m,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:""})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs text-stone-300",title:e("computer.cpu.cpi-help"),children:[e("computer.cpu.cpi"),":"]}),h.jsx("span",{className:"font-mono text-sm text-mantis-300",children:u})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-300",title:`${e("computer.cpu.cpu-time-help")} (${f.toFixed(1)} s)`,children:e("computer.cpu.cpu-time")}),h.jsxs("span",{className:"font-mono text-sm text-mantis-300",children:[(d/1e3).toFixed(1)," s"]})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Configuracin Actual:"}),h.jsx(ts,{content:v,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:""})})]}),h.jsx("div",{className:"space-y-1 text-xs text-stone-300",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-stone-300",children:h.jsx("strong",{children:"Velocidad CPU:"})}),h.jsxs("span",{className:"font-mono text-mantis-300",children:[s.cpuSpeed," Hz (",f.toFixed(1)," s/ciclo)"]})]})})]})]})]})});fz.displayName="CPUStats";const ife="_pushable_1q0ek_2",rfe="_front_1q0ek_15",sfe="_shadow_1q0ek_20",ofe="_edge_1q0ek_52",r0={pushable:ife,front:rfe,shadow:sfe,edge:ofe};function afe(){const t=ln(),{status:e,dispatch:n,devices:i}=Kn();return Ou("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?h.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:h.jsxs("button",{className:r0.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[h.jsx("div",{className:r0.shadow}),h.jsx("div",{className:r0.edge}),h.jsx("span",{className:r0.front,children:t("computer.f10")})]})}):null}function lfe(){const t=ln(),{devices:e}=Kn();return e.handshake?h.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),h.jsx(Cr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:$E,springs:"handshake.STATE",className:"mx-auto my-4"}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(Cr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:BE,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var hz={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(x)})(iU,function(n){return function(){var i={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(z,B){for(var H in B)l.o(B,H)&&!l.o(z,H)&&Object.defineProperty(z,H,{enumerable:!0,get:B[H]})},o:function(z,B){return Object.prototype.hasOwnProperty.call(z,B)},r:function(z){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},c={};function u(z){return function(B){if(Array.isArray(B))return f(B)}(z)||function(B){if(typeof Symbol<"u"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}(z)||d(z)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(z,B){if(z){if(typeof z=="string")return f(z,B);var H={}.toString.call(z).slice(8,-1);return H==="Object"&&z.constructor&&(H=z.constructor.name),H==="Map"||H==="Set"?Array.from(z):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?f(z,B):void 0}}function f(z,B){(B==null||B>z.length)&&(B=z.length);for(var H=0,S=Array(B);H<B;H++)S[H]=z[H];return S}function p(z){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},p(z)}function g(z,B){for(var H=0;H<B.length;H++){var S=B[H];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(z,v(S.key),S)}}function m(z,B,H){return(B=v(B))in z?Object.defineProperty(z,B,{value:H,enumerable:!0,configurable:!0,writable:!0}):z[B]=H,z}function v(z){var B=function(H,S){if(p(H)!="object"||!H)return H;var M=H[Symbol.toPrimitive];if(M!==void 0){var D=M.call(H,S);if(p(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(H)}(z,"string");return p(B)=="symbol"?B:B+""}l.r(c),l.d(c,{SimpleKeyboard:function(){return Z},default:function(){return oe}});var y=function(){return z=function S(M){var D=M.getOptions,O=M.getCaretPosition,Y=M.getCaretPositionEnd,G=M.dispatch;(function(ie,ee){if(!(ie instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,S),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(ie){return ie&&!(ie[0]==="{"&&ie[ie.length-1]==="}")}),this.getOptions=D,this.getCaretPosition=O,this.getCaretPositionEnd=Y,this.dispatch=G,S.bindMethods(S,this)},B=[{key:"getButtonType",value:function(S){return S.includes("{")&&S.includes("}")&&S!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(S){var M=this.getButtonType(S),D=S.replace("{","").replace("}",""),O="";return M!=="standardBtn"&&(O=" hg-button-".concat(D)),"hg-".concat(M).concat(O)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(S,M){return(M=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),M):M||this.getDefaultDiplay())[S]||S}},{key:"getUpdatedInput",value:function(S,M,D){var O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:D,Y=arguments.length>4&&arguments[4]!==void 0&&arguments[4],G=this.getOptions(),ie=[D,O,Y],ee=M;return(S==="{bksp}"||S==="{backspace}")&&ee.length>0?ee=this.removeAt.apply(this,[ee].concat(ie)):(S==="{delete}"||S==="{forwarddelete}")&&ee.length>0?ee=this.removeForwardsAt.apply(this,[ee].concat(ie)):S==="{space}"?ee=this.addStringAt.apply(this,[ee," "].concat(ie)):S!=="{tab}"||typeof G.tabCharOnTab=="boolean"&&G.tabCharOnTab===!1?S!=="{enter}"&&S!=="{numpadenter}"||!G.newLineOnEnter?S.includes("numpad")&&Number.isInteger(Number(S[S.length-2]))?ee=this.addStringAt.apply(this,[ee,S[S.length-2]].concat(ie)):S==="{numpaddivide}"?ee=this.addStringAt.apply(this,[ee,"/"].concat(ie)):S==="{numpadmultiply}"?ee=this.addStringAt.apply(this,[ee,"*"].concat(ie)):S==="{numpadsubtract}"?ee=this.addStringAt.apply(this,[ee,"-"].concat(ie)):S==="{numpadadd}"?ee=this.addStringAt.apply(this,[ee,"+"].concat(ie)):S==="{numpaddecimal}"?ee=this.addStringAt.apply(this,[ee,"."].concat(ie)):S==="{"||S==="}"?ee=this.addStringAt.apply(this,[ee,S].concat(ie)):S.includes("{")||S.includes("}")||(ee=this.addStringAt.apply(this,[ee,S].concat(ie))):ee=this.addStringAt.apply(this,[ee,`
`].concat(ie)):ee=this.addStringAt.apply(this,[ee,"	"].concat(ie)),G.debug&&console.log("Input will be: "+ee),ee}},{key:"updateCaretPos",value:function(S){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1],D=this.updateCaretPosAction(S,M);this.dispatch(function(O){O.setCaretPosition(D)})}},{key:"updateCaretPosAction",value:function(S){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1],D=this.getOptions(),O=this.getCaretPosition();return O!=null&&(M?O>0&&(O-=S):O+=S),D.debug&&console.log("Caret at:",O),O}},{key:"addStringAt",value:function(S,M){var D,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S.length,G=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return O||O===0?(D=[S.slice(0,O),M,S.slice(Y)].join(""),this.isMaxLengthReached()||G&&this.updateCaretPos(M.length)):D=S+M,D}},{key:"removeAt",value:function(S){var M,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(D===0&&O===0)return S;if(D===O){var G=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;D&&D>=0?S.substring(D-2,D).match(G)?(M=S.substr(0,D-2)+S.substr(D),Y&&this.updateCaretPos(2,!0)):(M=S.substr(0,D-1)+S.substr(D),Y&&this.updateCaretPos(1,!0)):S.slice(-2).match(G)?(M=S.slice(0,-2),Y&&this.updateCaretPos(2,!0)):(M=S.slice(0,-1),Y&&this.updateCaretPos(1,!0))}else M=S.slice(0,D)+S.slice(O),Y&&this.dispatch(function(ie){ie.setCaretPosition(D)});return M}},{key:"removeForwardsAt",value:function(S){var M,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return S!=null&&S.length&&D!==null?(D===O?M=S.substring(D,D+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?S.substr(0,D)+S.substr(D+2):S.substr(0,D)+S.substr(D+1):(M=S.slice(0,D)+S.slice(O),Y&&this.dispatch(function(G){G.setCaretPosition(D)})),M):S}},{key:"handleMaxLength",value:function(S,M){var D=this.getOptions(),O=D.maxLength,Y=S[D.inputName||"default"],G=M.length-1>=O;if(M.length<=Y.length)return!1;if(Number.isInteger(O))return D.debug&&console.log("maxLength (num) reached:",G),G?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(p(O)==="object"){var ie=M.length-1>=O[D.inputName||"default"];return D.debug&&console.log("maxLength (obj) reached:",ie),ie?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(S){return S?S.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(M,D){return D.length?M+D[0].toUpperCase()+D.slice(1):M}):""}},{key:"chunkArray",value:function(S,M){return u(Array(Math.ceil(S.length/M))).map(function(D,O){return S.slice(M*O,M+M*O)})}},{key:"escapeRegex",value:function(S){return S.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(S,M){var D=S,O=M.indexOf("");return O<S&&O!=-1&&D--,M.indexOf("")<S&&O!=-1&&D--,D<0?0:D}},{key:"isConstructor",value:function(S){try{Reflect.construct(String,[],S)}catch{return!1}return!0}}],H=[{key:"bindMethods",value:function(S,M){var D,O=function(G,ie){var ee=typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(!ee){if(Array.isArray(G)||(ee=d(G))||ie){ee&&(G=ee);var Ie=0,He=function(){};return{s:He,n:function(){return Ie>=G.length?{done:!0}:{done:!1,value:G[Ie++]}},e:function(we){throw we},f:He}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Xe,ze=!0,it=!1;return{s:function(){ee=ee.call(G)},n:function(){var we=ee.next();return ze=we.done,we},e:function(we){it=!0,Xe=we},f:function(){try{ze||ee.return==null||ee.return()}finally{if(it)throw Xe}}}}(Object.getOwnPropertyNames(S.prototype));try{for(O.s();!(D=O.n()).done;){var Y=D.value;Y==="constructor"||Y==="bindMethods"||(M[Y]=M[Y].bind(M))}}catch(G){O.e(G)}finally{O.f()}}}],B&&g(z.prototype,B),H&&g(z,H),Object.defineProperty(z,"prototype",{writable:!1}),z;var z,B,H}();m(y,"noop",function(){});var b=y;function w(z){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},w(z)}function k(z,B){for(var H=0;H<B.length;H++){var S=B[H];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(z,E(S.key),S)}}function _(z,B,H){return(B=E(B))in z?Object.defineProperty(z,B,{value:H,enumerable:!0,configurable:!0,writable:!0}):z[B]=H,z}function E(z){var B=function(H,S){if(w(H)!="object"||!H)return H;var M=H[Symbol.toPrimitive];if(M!==void 0){var D=M.call(H,S);if(w(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(H)}(z,"string");return w(B)=="symbol"?B:B+""}var C=function(){return z=function S(M){var D=this,O=M.dispatch,Y=M.getOptions;(function(G,ie){if(!(G instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,S),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isModifierKey",function(G){return G.altKey||G.ctrlKey||G.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(G.code||G.key||D.keyCodeToKey(G==null?void 0:G.keyCode))}),this.dispatch=O,this.getOptions=Y,b.bindMethods(S,this)},B=[{key:"handleHighlightKeyDown",value:function(S){var M=this.getOptions();M.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(O){var Y,G,ie=O.getButtonElement(D),ee=O.getButtonElement("{".concat(D,"}"));if(ie)Y=ie,G=D;else{if(!ee)return;Y=ee,G="{".concat(D,"}")}var Ie,He,Xe,ze,it=function(Ot){Ot.style.background=M.physicalKeyboardHighlightBgColor||"#dadce4",Ot.style.color=M.physicalKeyboardHighlightTextColor||"black"};if(Y)if(Array.isArray(Y)){if(Y.forEach(function(Ot){return it(Ot)}),M.physicalKeyboardHighlightPress)if(M.physicalKeyboardHighlightPressUsePointerEvents)(Ie=Y[0])===null||Ie===void 0||(He=Ie.onpointerdown)===null||He===void 0||He.call(Ie,S);else if(M.physicalKeyboardHighlightPressUseClick){var we;(we=Y[0])===null||we===void 0||we.click()}else O.handleButtonClicked(G,S)}else it(Y),M.physicalKeyboardHighlightPress&&(M.physicalKeyboardHighlightPressUsePointerEvents?(Xe=Y)===null||Xe===void 0||(ze=Xe.onpointerdown)===null||ze===void 0||ze.call(Xe,S):M.physicalKeyboardHighlightPressUseClick?Y.click():O.handleButtonClicked(G,S))})}},{key:"handleHighlightKeyUp",value:function(S){var M=this.getOptions();M.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(O){var Y,G,ie,ee=O.getButtonElement(D)||O.getButtonElement("{".concat(D,"}")),Ie=function(He){He.removeAttribute&&He.removeAttribute("style")};ee&&(Array.isArray(ee)?(ee.forEach(function(He){return Ie(He)}),M.physicalKeyboardHighlightPressUsePointerEvents&&((Y=ee[0])===null||Y===void 0||(G=Y.onpointerup)===null||G===void 0||G.call(Y,S))):(Ie(ee),M.physicalKeyboardHighlightPressUsePointerEvents&&(ee==null||(ie=ee.onpointerup)===null||ie===void 0||ie.call(ee,S))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var M,D="",O=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(D=O!=null&&O.includes("Numpad")||O!=null&&O.includes("Shift")||O!=null&&O.includes("Space")||O!=null&&O.includes("Backspace")||O!=null&&O.includes("Control")||O!=null&&O.includes("Alt")||O!=null&&O.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?(M=D)===null||M===void 0?void 0:M.toLowerCase():D}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}],B&&k(z.prototype,B),H&&k(z,H),Object.defineProperty(z,"prototype",{writable:!1}),z;var z,B,H}();function P(z){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},P(z)}function T(z,B){for(var H=0;H<B.length;H++){var S=B[H];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(z,L(S.key),S)}}function I(z,B,H){return(B=L(B))in z?Object.defineProperty(z,B,{value:H,enumerable:!0,configurable:!0,writable:!0}):z[B]=H,z}function L(z){var B=function(H,S){if(P(H)!="object"||!H)return H;var M=H[Symbol.toPrimitive];if(M!==void 0){var D=M.call(H,S);if(P(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(H)}(z,"string");return P(B)=="symbol"?B:B+""}var j=function(){return z=function S(M){var D=M.utilities,O=M.options;(function(Y,G){if(!(Y instanceof G))throw new TypeError("Cannot call a class as a function")})(this,S),I(this,"utilities",void 0),I(this,"options",void 0),I(this,"candidateBoxElement",void 0),I(this,"pageIndex",0),I(this,"pageSize",void 0),this.utilities=D,this.options=O,b.bindMethods(S,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},B=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var M=this,D=S.candidateValue,O=S.targetElement,Y=S.onSelect;if(D&&D.length){var G=this.utilities.chunkArray(D.split(" "),this.pageSize);this.renderPage({candidateListPages:G,targetElement:O,pageIndex:this.pageIndex,nbPages:G.length,onItemSelected:function(ie,ee){Y(ie,ee),M.destroy()}})}}},{key:"renderPage",value:function(S){var M,D=this,O=S.candidateListPages,Y=S.targetElement,G=S.pageIndex,ie=S.nbPages,ee=S.onItemSelected;(M=this.candidateBoxElement)===null||M===void 0||M.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Ie=document.createElement("ul");Ie.className="hg-candidate-box-list",O[G].forEach(function(Rn){var ic,Bs=document.createElement("li"),ka=function(){var _a=new(D.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(_a,"target",{value:Bs}),_a};Bs.className="hg-candidate-box-list-item",Bs.innerHTML=((ic=D.options.display)===null||ic===void 0?void 0:ic[Rn])||Rn,D.options.useTouchEvents?Bs.ontouchstart=function(_a){return ee(Rn,_a||ka())}:Bs.onclick=function(){var _a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ka();return ee(Rn,_a)},Ie.appendChild(Bs)});var He=G>0,Xe=document.createElement("div");Xe.classList.add("hg-candidate-box-prev"),He&&Xe.classList.add("hg-candidate-box-btn-active");var ze=function(){He&&D.renderPage({candidateListPages:O,targetElement:Y,pageIndex:G-1,nbPages:ie,onItemSelected:ee})};this.options.useTouchEvents?Xe.ontouchstart=ze:Xe.onclick=ze,this.candidateBoxElement.appendChild(Xe),this.candidateBoxElement.appendChild(Ie);var it=G<ie-1,we=document.createElement("div");we.classList.add("hg-candidate-box-next"),it&&we.classList.add("hg-candidate-box-btn-active");var Ot=function(){it&&D.renderPage({candidateListPages:O,targetElement:Y,pageIndex:G+1,nbPages:ie,onItemSelected:ee})};this.options.useTouchEvents?we.ontouchstart=Ot:we.onclick=Ot,this.candidateBoxElement.appendChild(we),Y.prepend(this.candidateBoxElement)}}],B&&T(z.prototype,B),H&&T(z,H),Object.defineProperty(z,"prototype",{writable:!1}),z;var z,B,H}(),X=j;function $(z){return function(B){if(Array.isArray(B))return K(B)}(z)||function(B){if(typeof Symbol<"u"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}(z)||function(B,H){if(B){if(typeof B=="string")return K(B,H);var S={}.toString.call(B).slice(8,-1);return S==="Object"&&B.constructor&&(S=B.constructor.name),S==="Map"||S==="Set"?Array.from(B):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?K(B,H):void 0}}(z)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function K(z,B){(B==null||B>z.length)&&(B=z.length);for(var H=0,S=Array(B);H<B;H++)S[H]=z[H];return S}function J(z){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},J(z)}function Q(z,B){var H=Object.keys(z);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(z);B&&(S=S.filter(function(M){return Object.getOwnPropertyDescriptor(z,M).enumerable})),H.push.apply(H,S)}return H}function W(z,B){for(var H=0;H<B.length;H++){var S=B[H];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(z,re(S.key),S)}}function U(z,B,H){return(B=re(B))in z?Object.defineProperty(z,B,{value:H,enumerable:!0,configurable:!0,writable:!0}):z[B]=H,z}function re(z){var B=function(H,S){if(J(H)!="object"||!H)return H;var M=H[Symbol.toPrimitive];if(M!==void 0){var D=M.call(H,S);if(J(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(H)}(z,"string");return J(B)=="symbol"?B:B+""}var ve=function(){return z=function S(M,D){var O=this;if(function(ze,it){if(!(ze instanceof it))throw new TypeError("Cannot call a class as a function")}(this,S),U(this,"input",void 0),U(this,"options",void 0),U(this,"utilities",void 0),U(this,"caretPosition",void 0),U(this,"caretPositionEnd",void 0),U(this,"keyboardDOM",void 0),U(this,"keyboardPluginClasses",void 0),U(this,"keyboardDOMClass",void 0),U(this,"buttonElements",void 0),U(this,"currentInstanceName",void 0),U(this,"allKeyboardInstances",void 0),U(this,"keyboardInstanceNames",void 0),U(this,"isFirstKeyboardInstance",void 0),U(this,"physicalKeyboard",void 0),U(this,"modules",void 0),U(this,"activeButtonClass",void 0),U(this,"holdInteractionTimeout",void 0),U(this,"holdTimeout",void 0),U(this,"isMouseHold",void 0),U(this,"initialized",void 0),U(this,"candidateBox",void 0),U(this,"keyboardRowsDOM",void 0),U(this,"defaultName","default"),U(this,"activeInputElement",null),U(this,"handleParams",function(ze,it){var we,Ot,Rn;if(typeof ze=="string")we=ze.split(".").join(""),Ot=document.querySelector(".".concat(we)),Rn=it;else if(ze instanceof HTMLDivElement){if(!ze.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");we=ze.className.split(" ")[0],Ot=ze,Rn=it}else we="simple-keyboard",Ot=document.querySelector(".".concat(we)),Rn=ze;return{keyboardDOMClass:we,keyboardDOM:Ot,options:Rn}}),U(this,"getOptions",function(){return O.options}),U(this,"getCaretPosition",function(){return O.caretPosition}),U(this,"getCaretPositionEnd",function(){return O.caretPositionEnd}),U(this,"registerModule",function(ze,it){O.modules[ze]||(O.modules[ze]={}),it(O.modules[ze])}),U(this,"getKeyboardClassString",function(){for(var ze=arguments.length,it=new Array(ze),we=0;we<ze;we++)it[we]=arguments[we];return[O.keyboardDOMClass].concat(it).filter(function(Ot){return!!Ot}).join(" ")}),typeof window<"u"){var Y=this.handleParams(M,D),G=Y.keyboardDOMClass,ie=Y.keyboardDOM,ee=Y.options,Ie=ee===void 0?{}:ee;this.utilities=new b({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ie,this.options=function(ze){for(var it=1;it<arguments.length;it++){var we=arguments[it]!=null?arguments[it]:{};it%2?Q(Object(we),!0).forEach(function(Ot){U(ze,Ot,we[Ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ze,Object.getOwnPropertyDescriptors(we)):Q(Object(we)).forEach(function(Ot){Object.defineProperty(ze,Ot,Object.getOwnPropertyDescriptor(we,Ot))})}return ze}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Ie),this.keyboardPluginClasses="",b.bindMethods(S,this);var He=this.options.inputName,Xe=He===void 0?this.defaultName:He;if(this.input={},this.input[Xe]="",this.keyboardDOMClass=G,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new X({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(G,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},B=[{key:"setCaretPosition",value:function(S){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=M}},{key:"getInputCandidates",value:function(S){var M=this,D=this.options,O=D.layoutCandidates,Y=D.layoutCandidatesCaseSensitiveMatch;if(!O||J(O)!=="object")return{};var G=Object.keys(O).filter(function(Ie){var He=S.substring(0,M.getCaretPositionEnd()||0)||S,Xe=new RegExp("".concat(M.utilities.escapeRegex(Ie),"$"),Y?"g":"gi");return!!$(He.matchAll(Xe)).length});if(G.length>1){var ie=G.sort(function(Ie,He){return He.length-Ie.length})[0];return{candidateKey:ie,candidateValue:O[ie]}}if(G.length){var ee=G[0];return{candidateKey:ee,candidateValue:O[ee]}}return{}}},{key:"showCandidatesBox",value:function(S,M,D){var O=this;this.candidateBox&&this.candidateBox.show({candidateValue:M,targetElement:D,onSelect:function(Y,G){var ie=O.options,ee=ie.layoutCandidatesCaseSensitiveMatch,Ie=ie.disableCandidateNormalization,He=ie.enableLayoutCandidatesKeyPress,Xe=Y;Ie||(Xe=Y.normalize("NFD")),typeof O.options.beforeInputUpdate=="function"&&O.options.beforeInputUpdate(O);var ze=O.getInput(O.options.inputName,!0),it=O.getCaretPositionEnd()||0,we=ze.substring(0,it||0)||ze,Ot=new RegExp("".concat(O.utilities.escapeRegex(S),"$"),ee?"g":"gi"),Rn=we.replace(Ot,Xe),ic=ze.replace(we,Rn),Bs=Rn.length-we.length,ka=(it||ze.length)+Bs;ka<0&&(ka=0),O.setInput(ic,O.options.inputName,!0),O.setCaretPosition(ka),He&&typeof O.options.onKeyPress=="function"&&O.options.onKeyPress(Y,G),typeof O.options.onChange=="function"&&O.options.onChange(O.getInput(O.options.inputName,!0),G),typeof O.options.onChangeAll=="function"&&O.options.onChangeAll(O.getAllInputs(),G)}})}},{key:"handleButtonClicked",value:function(S,M){var D=this.options,O=D.inputName,Y=O===void 0?this.defaultName:O,G=D.debug;if(S!=="{//}"){this.input[Y]||(this.input[Y]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ie=this.utilities.getUpdatedInput(S,this.input[Y],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[Y]&&this.input[Y]===ie&&this.caretPosition===0&&this.caretPositionEnd===ie.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,M);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,M),this.input[Y]!==ie&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ie))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ie))return;var ee=this.utilities.getUpdatedInput(S,this.input[Y],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(ee,this.options.inputName,!0),G&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),M==null?void 0:M.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),M),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),M),M!=null&&M.target&&this.options.enableLayoutCandidates){var Ie,He=this.getInputCandidates(ie),Xe=He.candidateKey,ze=He.candidateValue;Xe&&ze?this.showCandidatesBox(Xe,ze,this.keyboardDOM):(Ie=this.candidateBox)===null||Ie===void 0||Ie.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),G&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function(M){M.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,M){var D=this;M&&(this.options.preventMouseDownDefault&&M.preventDefault(),this.options.stopMouseDownPropagation&&M.stopPropagation(),M.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(D.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(D.options.debug&&console.log("Button held:",S),D.handleButtonHold(S)),clearTimeout(D.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,M){var D=this;M&&(this.options.preventMouseUpDefault&&M.preventDefault&&M.preventDefault(),this.options.stopMouseUpPropagation&&M.stopPropagation&&M.stopPropagation(),!(M.target===this.keyboardDOM||M.target&&this.keyboardDOM.contains(M.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(M.target===this.candidateBox.candidateBoxElement||M.target&&this.candidateBox.candidateBoxElement.contains(M.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(O){O.classList.remove(D.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,M)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var M=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){M.getMouseHold()?(M.handleButtonClicked(S),M.handleButtonHold(S)):clearTimeout(M.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function(M){M.replaceInput(S.input),M.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,M=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!M&&this.syncInstanceInputs(),this.options.rtl?""+this.input[S].replace("","").replace("","")+"":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,M={};return Object.keys(this.input).forEach(function(D){M[D]=S.getInput(D,!0)}),M}},{key:"setInput",value:function(S){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,D=arguments.length>2?arguments[2]:void 0;this.input[M]=S,!D&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=this.changedOptions(S);this.options=Object.assign(this.options,S),M.length&&(this.options.debug&&console.log("changedOptions",M),this.onSetOptions(M),this.render())}},{key:"changedOptions",value:function(S){var M=this;return Object.keys(S).filter(function(D){return JSON.stringify(S[D])!==JSON.stringify(M.options[D])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new X({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(M){S(window.SimpleKeyboardInstances[M],M)})}},{key:"addButtonTheme",value:function(S,M){var D=this;M&&S&&(S.split(" ").forEach(function(O){M.split(" ").forEach(function(Y){D.options.buttonTheme||(D.options.buttonTheme=[]);var G=!1;D.options.buttonTheme.map(function(ie){if(ie!=null&&ie.class.split(" ").includes(Y)){G=!0;var ee=ie.buttons.split(" ");ee.includes(O)||(G=!0,ee.push(O),ie.buttons=ee.join(" "))}return ie}),G||D.options.buttonTheme.push({class:Y,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,M){var D=this;if(!S&&!M)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function(O){var Y;(Y=D.options)===null||Y===void 0||(Y=Y.buttonTheme)===null||Y===void 0||Y.map(function(G,ie){if(G&&M&&M.includes(G.class)||!M){var ee,Ie,He=(ee=G)===null||ee===void 0?void 0:ee.buttons.split(" ").filter(function(Xe){return Xe!==O});G&&He!=null&&He.length?G.buttons=He.join(" "):((Ie=D.options.buttonTheme)===null||Ie===void 0||Ie.splice(ie,1),G=null)}return G})}),this.render())}},{key:"getButtonElement",value:function(S){var M,D=this.buttonElements[S];return D&&(M=D.length>1?D:D[0]),M}},{key:"inputPatternIsValid",value:function(S){var M,D=this.options.inputPattern;if((M=D instanceof RegExp?D:D[this.options.inputName||this.defaultName])&&S){var O=M.test(S);return this.options.debug&&console.log('inputPattern ("'.concat(M,'"): ').concat(O?"passed":"did not pass!")),O}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,M=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,M),document.addEventListener("keydown",this.handleKeyDown,M),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var M,D=this;S.target.tagName&&(M=S.target.tagName.toLowerCase()),this.dispatch(function(O){var Y=S.target===O.keyboardDOM||S.target&&O.keyboardDOM.contains(S.target);if(D.options.syncInstanceInputs&&Array.isArray(S.path)&&(Y=S.path.some(function(ee){var Ie;return ee==null||(Ie=ee.hasAttribute)===null||Ie===void 0?void 0:Ie.call(ee,"data-skInstance")})),(M==="textarea"||M==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!O.options.disableCaretPositioning){var G=S.target.selectionStart,ie=S.target.selectionEnd;O.options.rtl&&(G=O.utilities.getRtlOffset(G,O.getInput()),ie=O.utilities.getRtlOffset(ie,O.getInput())),O.setCaretPosition(G,ie),O.activeInputElement=S.target,O.options.debug&&console.log("Caret at: ",O.getCaretPosition(),O.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat(O.keyboardDOMClass,")"),S==null?void 0:S.type)}else!O.options.disableCaretPositioning&&Y||(S==null?void 0:S.type)==="selectionchange"||(O.setCaretPosition(null),O.activeInputElement=null,O.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var M=this;S&&Object.keys(this.buttonElements).forEach(function(D){return M.buttonElements[D].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,M=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,M),document.removeEventListener("keydown",this.handleKeyDown,M),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(D){D&&(D.onpointerdown=null,D.onpointerup=null,D.onpointercancel=null,D.ontouchstart=null,D.ontouchend=null,D.ontouchcancel=null,D.onclick=null,D.onmousedown=null,D.onmouseup=null,D.remove(),D=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var M=this.options.buttonTheme,D=[];return Array.isArray(M)&&M.forEach(function(O){if(O&&O.class&&typeof O.class=="string"&&O.buttons&&typeof O.buttons=="string"){var Y=O.class.split(" ");O.buttons.split(" ").includes(S)&&(D=[].concat($(D),$(Y)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',O)}),D}},{key:"setDOMButtonAttributes",value:function(S,M){var D=this.options.buttonAttributes;Array.isArray(D)&&D.forEach(function(O){O.attribute&&typeof O.attribute=="string"&&O.value&&typeof O.value=="string"&&O.buttons&&typeof O.buttons=="string"?O.buttons.split(" ").includes(S)&&M(O.attribute,O.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',O)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){var M;if((M=S.target.classList)!==null&&M!==void 0&&M.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(M){var D=S.utilities.isConstructor(M)?new M(S):M(S);D.init&&D.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,M){return!!this.modules[S]&&this.modules[S][M]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,M,D,O){var Y=this,G=Array.from(S.children),ie=0;return G.length&&D.forEach(function(ee,Ie){var He=O[Ie];if(!(He&&He>ee))return!1;var Xe=ee-ie,ze=He-ie,it=document.createElement("div");it.className+="hg-button-container";var we="".concat(Y.options.layoutName,"-r").concat(M,"c").concat(Ie);it.setAttribute("data-skUID",we);var Ot=G.splice(Xe,ze-Xe+1);ie+=ze-Xe,Ot.forEach(function(Rn){return it.appendChild(Rn)}),G.splice(Xe,0,it),S.innerHTML="",G.forEach(function(Rn){return S.appendChild(Rn)}),Y.options.debug&&console.log("rowDOMContainer",Ot,Xe,ze,ie+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var M="hg-layout-".concat(this.options.layoutName),D=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},O=this.options.useTouchEvents||!1,Y=O?"hg-touch-events":"",G=this.options.useMouseEvents||!1,ie=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,M,this.keyboardPluginClasses,Y),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",D[this.options.layoutName||this.defaultName].forEach(function(ee,Ie){var He=ee.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&(He=He.filter(function(we){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(we)}));var Xe=document.createElement("div");Xe.className+="hg-row";var ze=[],it=[];He.forEach(function(we,Ot){var Rn,ic=!ie&&typeof we=="string"&&we.length>1&&we.indexOf("[")===0,Bs=!ie&&typeof we=="string"&&we.length>1&&we.indexOf("]")===we.length-1;ic&&(ze.push(Ot),we=we.replace(/\[/g,"")),Bs&&(it.push(Ot),we=we.replace(/\]/g,""));var ka=S.utilities.getButtonClass(we),_a=S.utilities.getButtonDisplayName(we,S.options.display,S.options.mergeDisplay),J7=S.options.useButtonTag?"button":"div",Xn=document.createElement(J7);Xn.className+="hg-button ".concat(ka),(Rn=Xn.classList).add.apply(Rn,$(S.getButtonThemeClasses(we))),S.setDOMButtonAttributes(we,function(gn,Q7){Xn.setAttribute(gn,Q7)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||O||G?O?(Xn.ontouchstart=function(gn){S.handleButtonClicked(we,gn),S.handleButtonMouseDown(we,gn)},Xn.ontouchend=function(gn){S.handleButtonMouseUp(we,gn)},Xn.ontouchcancel=function(gn){S.handleButtonMouseUp(we,gn)}):(Xn.onclick=function(gn){S.setMouseHold(!1),typeof S.options.onKeyReleased=="function"||S.options.useMouseEvents&&S.options.clickOnMouseDown||S.handleButtonClicked(we,gn)},Xn.onmousedown=function(gn){(typeof S.options.onKeyReleased=="function"||S.options.useMouseEvents&&S.options.clickOnMouseDown)&&!S.isMouseHold&&S.handleButtonClicked(we,gn),S.handleButtonMouseDown(we,gn)},Xn.onmouseup=function(gn){S.handleButtonMouseUp(we,gn)}):(Xn.onpointerdown=function(gn){S.handleButtonClicked(we,gn),S.handleButtonMouseDown(we,gn)},Xn.onpointerup=function(gn){S.handleButtonMouseUp(we,gn)},Xn.onpointercancel=function(gn){S.handleButtonMouseUp(we,gn)}),Xn.setAttribute("data-skBtn",we);var Z7="".concat(S.options.layoutName,"-r").concat(Ie,"b").concat(Ot);Xn.setAttribute("data-skBtnUID",Z7);var ZA=document.createElement("span");ZA.innerHTML=_a,Xn.appendChild(ZA),S.buttonElements[we]||(S.buttonElements[we]=[]),S.buttonElements[we].push(Xn),Xe.appendChild(Xn)}),Xe=S.parseRowDOMContainers(Xe,Ie,ze,it),S.keyboardRowsDOM.appendChild(Xe)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||O||G?O?(document.ontouchend=function(ee){return S.handleButtonMouseUp(void 0,ee)},document.ontouchcancel=function(ee){return S.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.ontouchstart=function(ee){return S.handleKeyboardContainerMouseDown(ee)}):O||(document.onmouseup=function(ee){return S.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.onmousedown=function(ee){return S.handleKeyboardContainerMouseDown(ee)}):(document.onpointerup=function(ee){return S.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.onpointerdown=function(ee){return S.handleKeyboardContainerMouseDown(ee)}),this.onInit())}}],B&&W(z.prototype,B),H&&W(z,H),Object.defineProperty(z,"prototype",{writable:!1}),z;var z,B,H}(),Z=ve,oe=Z;return c}()}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return v}});var a=s(442);function l(y){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},l(y)}function c(y,b){var w=Object.keys(y);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(y);b&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),w.push.apply(w,k)}return w}function u(y){for(var b=1;b<arguments.length;b++){var w=arguments[b]!=null?arguments[b]:{};b%2?c(Object(w),!0).forEach(function(k){d(y,k,w[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(w)):c(Object(w)).forEach(function(k){Object.defineProperty(y,k,Object.getOwnPropertyDescriptor(w,k))})}return y}function d(y,b,w){return(b=function(k){var _=function(E,C){if(l(E)!="object"||!E)return E;var P=E[Symbol.toPrimitive];if(P!==void 0){var T=P.call(E,C);if(l(T)!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(E)}(k,"string");return l(_)=="symbol"?_:_+""}(b))in y?Object.defineProperty(y,b,{value:w,enumerable:!0,configurable:!0,writable:!0}):y[b]=w,y}var f=function(y){return u(u({},y),{},{keyboardRef:null})},p=s(651),g=s.n(p),m=function(y){var b=y.baseClass||"react-simple-keyboard",w=a.useRef(null),k=a.useRef(null),_=a.useRef(null),E=a.useRef(y);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),w.current=!1}},[]),a.useEffect(function(){var C=function(j){return u(u({},j),{},{theme:"simple-keyboard ".concat(j.theme||"hg-theme-default")})}(y);if(!w.current){w.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var P=k.current,T=".".concat(b);_.current=new(g())(P||T,C),C.keyboardRef&&C.keyboardRef(_.current)}var I=function(j,X){var $=f(X),K=f(j);return Object.keys($).filter(function(J){return $[J]!==K[J]})}(E.current,C);if(I.length){var L=_.current;E.current=C,L==null||L.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",I)}},[w,b,E,y]),a.createElement("div",{className:b,ref:k})},v=m}(),o}()})})(hz);var cfe=hz.exports;const ufe=lu(cfe),dfe={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w  r t y    p  +","{lock}  s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y    P  *","{lock}  S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y  i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y  I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},ffe={en:{"{bksp}":"Backspace ","{enter}":"Enter ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Caps Lock ","{space}":"Space"},es:{"{bksp}":"","{enter}":"Intro ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Bloq Mays ","{space}":"Espacio"}},oT="          ",aT="  ";function hfe(){const t=KC(),e=ln(),{status:n,dispatch:i,devices:r}=Kn(),[s,o]=x.useState("none"),[a,l]=x.useState(!1),[c,u]=x.useState(!1),d=x.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=x.useCallback(p=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",p)},[n,i,r.keyboard]);return r.keyboard?h.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),h.jsx(ufe,{theme:ne("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:dfe,display:ffe[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:oT},{class:"hg-diaeresisDeadKeyButton",buttons:aT}],disableButtonHold:!0,onKeyPress:p=>{if(p==="{shiftleft}"||p==="{shiftright}"){o(g=>g==="none"?"once":"none");return}if(p==="{lock}"){o(g=>g==="none"?"lock":"none");return}if(t==="es"){if(a){oT.includes(p)&&(l(!1),s==="once"&&o("none"),f(p));return}else if(p===""){l(!0);return}if(c){aT.includes(p)&&(u(!1),s==="once"&&o("none"),f(p));return}else if(p===""){u(!0);return}}s==="once"&&o("none"),f(p==="{bksp}"?"\b":p==="{enter}"?`
`:p==="{tab}"?"	":p==="{space}"?" ":p)}})]}):null}function pfe(){const t=ln(),{devices:e}=Kn(),n=st(FE).toArray();return e.leds?h.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),h.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>h.jsxs("div",{className:"flex w-7 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:r}),h.jsx("div",{className:ne("relative size-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:h.jsx("div",{className:ne("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})})]},r))})]}):null}function mfe(){const t=ln(),e=st(SQ),n=st(de.IP),i=st(ZL),r=st(QL),s=st(de.SP),o=st(Tb),a=st(ty),l=jL(),c=a||l.pic||l.handshake!==null,u=()=>{const g=[];for(let m=0;m<256;m+=16){const v=e.slice(m,m+16);g.push(v)}return g},d=16,f=Math.floor(Number(n.valueOf())/d),p=Number(n.valueOf())%d;return h.jsxs("div",{className:"absolute left-[800px] top-[-160px] z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20","data-testid":"memory-component",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),h.jsx("div",{className:"m-4 overflow-x-auto",children:h.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{}),Array.from({length:16}).map((g,m)=>h.jsx("th",{className:ne("relative size-10 border border-gray-500 bg-mantis-500",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===p&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:""})]})},m))]})}),h.jsx("tbody",{children:u().map((g,m)=>h.jsxs("tr",{className:m%4===0&&m!==0?"border-t-4 border-mantis-600":"",children:[h.jsx("th",{className:"relative size-10 border border-gray-500 bg-mantis-500",children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===f&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:""})]})}),g.map((v,y)=>{var b,w,k;return h.jsx("td",{className:ne("size-10 border border-gray-500 p-0 transition-shadow duration-200",y%4===0&&y!==0?"border-l-4 border-mantis-600":""),children:h.jsx(gfe,{address:v.address,value:v.value,isIP:v.address.valueOf()===n.valueOf(),isSP:o&&v.address.valueOf()===s.valueOf(),isStackData:o&&v.address.valueOf()>s.valueOf(),isProgramAddress:!!i.find(_=>_.address===v.address.value),isDataAddress:!!r.find(_=>_.address===v.address.value),isInterruptVector:c&&v.address.valueOf()>=0&&v.address.valueOf()<=7,label:((b=i.find(_=>_.address===v.address.value))==null?void 0:b.name)||((w=r.find(_=>_.address===v.address.value))==null?void 0:w.label)||null,length:((k=i.find(_=>_.address===v.address.value))==null?void 0:k.length)??null})},y)})]},m))})]})})]})}function gfe({address:t,value:e,isIP:n,isSP:i,isStackData:r,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:c}){const u=ln(),d=st(Dp),[f,p]=x.useState(!1),g=x.useRef(e);x.useEffect(()=>{g.current!==e&&(p(!0),setTimeout(()=>p(!1),300),g.current=e)},[e]);const m=u("computer.memory.cell",t);return h.jsxs(My,{children:[h.jsx(Ry,{asChild:!0,children:h.jsxs(Ze.div,{title:m,className:ne("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":i?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!i&&!r?"border-l-4 border-purple-500":"",s&&!i&&!r&&!a?"border-l-4 border-blue-500":"",o&&!i&&!r&&!s&&!a?"border-l-4 border-green-500":"",r&&!i?"border-l-4 border-yellow-500":"",i?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",f&&"animate-pulse"),style:t.value===d.value?Be("memory.operating-cell"):void 0,children:[a&&!i&&!r&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupcin",style:{lineHeight:1},children:""}),s&&!i&&!r&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instruccin",style:{lineHeight:1},children:""}),o&&!i&&!r&&!s&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:""}),r&&!i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:""}),i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:""}),h.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:""}),i&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:""})]})}),h.jsxs(rm,{className:"w-60",children:[h.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[m," ",l?h.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",c!==null&&c!==""&&h.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",c]})]}):""]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(v=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:u(`generics.byte-representation.${v}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(v)})]},v))})]})]})}function vfe(){const t=ln(),{devices:e}=Kn();return e.pic?h.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),h.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[h.jsx(Cr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:zE,springs:"pic.IMR",emphasis:!0}),h.jsx(Cr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:UE,springs:"pic.IRR",emphasis:!0}),h.jsx(Cr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:VE,springs:"pic.ISR",emphasis:!0})]})]}),h.jsx("hr",{className:"mb-2 border-stone-600"}),h.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:xy.map((n,i)=>h.jsx(Cr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function yfe(){const t=ln(),{devices:e}=Kn();return e.pio?h.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(Cr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:HE,springs:"pio.PA"}),h.jsx(Cr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:GE,springs:"pio.CA"})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(Cr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:WE,springs:"pio.PB"}),h.jsx(Cr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:KE,springs:"pio.CB"})]})]}):null}const bfe="_printer_fbkny_2",xfe="_shadow_fbkny_6",wfe="_sides_fbkny_11",Sfe="_front_fbkny_22",kfe="_trailContainer_fbkny_27",_fe="_trail_fbkny_27",Cfe="_paper_fbkny_33",pc={printer:bfe,shadow:xfe,sides:wfe,front:Sfe,trailContainer:kfe,trail:_fe,paper:Cfe},Efe=Array.from({length:5},(t,e)=>e);function Afe(){const t=ln(),{devices:e}=Kn(),n=st(wy),i=st(Sy);return e.printer?h.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:h.jsxs("div",{className:pc.printer,title:t("computer.printer.name"),children:[h.jsx("div",{className:pc.shadow}),h.jsx("div",{className:pc.sides}),h.jsxs("div",{className:pc.front,children:[h.jsx("div",{className:pc.trailContainer,children:h.jsx("div",{className:pc.trail,children:h.jsx("pre",{className:pc.paper,children:i})})}),h.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:Efe.map(r=>{const s=n[r]?LL(n[r].unsigned):null;return h.jsx("span",{className:ne("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),h.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:h.jsx(Ze.div,{className:"h-full bg-mantis-400",style:{width:Be("printer.printing.progress").to(r=>`${r*100}%`),opacity:Be("printer.printing.opacity")}})})]})]})}):null}const Nfe="_container_6nvz7_2",Pfe="_text_6nvz7_22",lT={container:Nfe,text:Pfe};function Mfe(){const t=ln(),{devices:e}=Kn(),n=st(XE);return e.screen?h.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),h.jsx("div",{className:lT.container,children:h.jsx("pre",{className:lT.text,children:n})})]}):null}function Rfe(){const t=ln(),{dispatch:e,devices:n}=Kn(),i=st(Yb).toArray();return n.switches?h.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),h.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((r,s)=>h.jsxs("div",{className:"flex w-8 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),h.jsx(Ba,{checked:r,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function Tfe(){const t=ln(),{devices:e}=Kn();return e.timer?h.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),h.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[h.jsx(Cr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:ky,springs:"timer.CONT"}),h.jsx(Cr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:qE,springs:"timer.COMP"})]})]}):null}function pz(){const t=x.useRef(null);return x.useEffect(()=>{Nk(),Rk(),Tk(),Ok();const e=setTimeout(()=>{Nk(),Rk(),Tk(),Ok()},100);return()=>clearTimeout(e)},[]),h.jsx("div",{className:"relative size-full",children:h.jsxs(mde,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[h.jsx(yde,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:h.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[h.jsx(Rde,{}),h.jsx("div",{className:"absolute left-[120px] top-[-120px] z-20",children:h.jsx(fz,{})}),h.jsx(nfe,{}),h.jsx(_de,{}),h.jsx(mfe,{}),h.jsx(lfe,{}),h.jsx(vfe,{}),h.jsx(yfe,{}),h.jsx(Tfe,{}),h.jsx(Tde,{}),h.jsx(afe,{}),h.jsx(hfe,{}),h.jsx(pfe,{}),h.jsx(Afe,{}),h.jsx(Rfe,{}),h.jsx(Mfe,{})]})}),h.jsx(bde,{wrapperRef:t})]})})}const Ofe=1024;let Ife=0;class v1{constructor(e,n){this.from=e,this.to=n}}class Ct{constructor(e={}){this.id=Ife++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=lr.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}Ct.closedBy=new Ct({deserialize:t=>t.split(" ")});Ct.openedBy=new Ct({deserialize:t=>t.split(" ")});Ct.group=new Ct({deserialize:t=>t.split(" ")});Ct.isolate=new Ct({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ct.contextHash=new Ct({perNode:!0});Ct.lookAhead=new Ct({perNode:!0});Ct.mounted=new Ct({perNode:!0});class Ty{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[Ct.mounted.id]}}const Dfe=Object.create(null);class lr{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):Dfe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new lr(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Ct.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(Ct.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}lr.none=new lr("",Object.create(null),0,8);class bA{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new lr(i.name,r,i.id,i.flags):i)}return new bA(n)}}const s0=new WeakMap,cT=new WeakMap;var ti;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(ti||(ti={}));class hn{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Ty.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new t_(this.topNode,e)}cursorAt(e,n=0,i=0){let r=s0.get(this)||this.topNode,s=new t_(r);return s.moveTo(e,n),s0.set(this,s._tree),s}get topNode(){return new rs(this,0,0,null)}resolve(e,n=0){let i=sm(s0.get(this)||this.topNode,e,n,!1);return s0.set(this,i),i}resolveInner(e,n=0){let i=sm(cT.get(this)||this.topNode,e,n,!0);return cT.set(this,i),i}resolveStack(e,n=0){return Bfe(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&ti.IncludeAnonymous)>0;for(let l=this.cursor(o|ti.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:SA(lr.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new hn(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new hn(lr.none,n,i,r)))}static build(e){return $fe(e)}}hn.empty=new hn(lr.none,[],[],0);class xA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new xA(this.buffer,this.index)}}class Ul{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return lr.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(mz(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let c=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,c)}return new Ul(s,o,this.set)}}function mz(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function sm(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof rs&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:ti.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof rs&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class gz{cursor(e=0){return new t_(this,e)}getChild(e,n=null,i=null){let r=uT(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return uT(this,e,n,i)}resolve(e,n=0){return sm(this,e,n,!1)}resolveInner(e,n=0){return sm(this,e,n,!0)}matchContext(e){return e_(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class rs extends gz{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(mz(r,i,d,d+u.length)){if(u instanceof Ul){if(s&ti.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,i-d,r);if(f>-1)return new ll(new jfe(o,u,e,d),null,f)}else if(s&ti.IncludeAnonymous||!u.type.isAnonymous||wA(u)){let f;if(!(s&ti.IgnoreMounts)&&(f=Ty.get(u))&&!f.overlay)return new rs(f.tree,d,e,o);let p=new rs(u,d,e,o);return s&ti.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&ti.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&ti.IgnoreOverlays)&&(r=Ty.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new rs(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function uT(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function e_(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class jfe{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class ll extends gz{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new ll(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&ti.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new ll(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ll(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new ll(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new hn(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function vz(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof rs&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new Lfe(r,n)}class Lfe{constructor(e,n){this.heads=e,this.node=n}get next(){return vz(this.heads)}}function Bfe(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof rs?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=Ty.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new rs(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(sm(a,e,n,!1))}}return r?vz(r):i}class t_{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof rs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof rs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&ti.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ti.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ti.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&ti.IncludeAnonymous||a instanceof Ul||!a.type.isAnonymous||wA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new ll(this.buffer,n,this.stack[r]);return this.bufferNode=new ll(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return e_(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return e_(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function wA(t){return t.children.some(e=>e instanceof Ul||!e.type.isAnonymous||wA(e))}function $fe(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=Ofe,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new xA(n,n.length):n,l=i.types,c=0,u=0;function d(_,E,C,P,T,I){let{id:L,start:j,end:X,size:$}=a,K=u,J=c;for(;$<0;)if(a.next(),$==-1){let ve=s[L];C.push(ve),P.push(j-_);return}else if($==-3){c=L;return}else if($==-4){u=L;return}else throw new RangeError(`Unrecognized record size: ${$}`);let Q=l[L],W,U,re=j-_;if(X-j<=r&&(U=v(a.pos-E,T))){let ve=new Uint16Array(U.size-U.skip),Z=a.pos-U.size,oe=ve.length;for(;a.pos>Z;)oe=y(U.start,ve,oe);W=new Ul(ve,X-U.start,i),re=U.start-_}else{let ve=a.pos-$;a.next();let Z=[],oe=[],z=L>=o?L:-1,B=0,H=X;for(;a.pos>ve;)z>=0&&a.id==z&&a.size>=0?(a.end<=H-r&&(g(Z,oe,j,B,a.end,H,z,K,J),B=Z.length,H=a.end),a.next()):I>2500?f(j,ve,Z,oe):d(j,ve,Z,oe,z,I+1);if(z>=0&&B>0&&B<Z.length&&g(Z,oe,j,B,j,H,z,K,J),Z.reverse(),oe.reverse(),z>-1&&B>0){let S=p(Q,J);W=SA(Q,Z,oe,0,Z.length,0,X-j,S,S)}else W=m(Q,Z,oe,X-j,K-X,J)}C.push(W),P.push(re)}function f(_,E,C,P){let T=[],I=0,L=-1;for(;a.pos>E;){let{id:j,start:X,end:$,size:K}=a;if(K>4)a.next();else{if(L>-1&&X<L)break;L<0&&(L=$-r),T.push(j,X,$),I++,a.next()}}if(I){let j=new Uint16Array(I*4),X=T[T.length-2];for(let $=T.length-3,K=0;$>=0;$-=3)j[K++]=T[$],j[K++]=T[$+1]-X,j[K++]=T[$+2]-X,j[K++]=K;C.push(new Ul(j,T[2]-X,i)),P.push(X-_)}}function p(_,E){return(C,P,T)=>{let I=0,L=C.length-1,j,X;if(L>=0&&(j=C[L])instanceof hn){if(!L&&j.type==_&&j.length==T)return j;(X=j.prop(Ct.lookAhead))&&(I=P[L]+j.length+X)}return m(_,C,P,T,I,E)}}function g(_,E,C,P,T,I,L,j,X){let $=[],K=[];for(;_.length>P;)$.push(_.pop()),K.push(E.pop()+C-T);_.push(m(i.types[L],$,K,I-T,j-I,X)),E.push(T-C)}function m(_,E,C,P,T,I,L){if(I){let j=[Ct.contextHash,I];L=L?[j].concat(L):[j]}if(T>25){let j=[Ct.lookAhead,T];L=L?[j].concat(L):[j]}return new hn(_,E,C,P,L)}function v(_,E){let C=a.fork(),P=0,T=0,I=0,L=C.end-r,j={size:0,start:0,skip:0};e:for(let X=C.pos-_;C.pos>X;){let $=C.size;if(C.id==E&&$>=0){j.size=P,j.start=T,j.skip=I,I+=4,P+=4,C.next();continue}let K=C.pos-$;if($<0||K<X||C.start<L)break;let J=C.id>=o?4:0,Q=C.start;for(C.next();C.pos>K;){if(C.size<0)if(C.size==-3)J+=4;else break e;else C.id>=o&&(J+=4);C.next()}T=Q,P+=$,I+=J}return(E<0||P==_)&&(j.size=P,j.start=T,j.skip=I),j.size>4?j:void 0}function y(_,E,C){let{id:P,start:T,end:I,size:L}=a;if(a.next(),L>=0&&P<o){let j=C;if(L>4){let X=a.pos-(L-4);for(;a.pos>X;)C=y(_,E,C)}E[--C]=j,E[--C]=I-_,E[--C]=T-_,E[--C]=P}else L==-3?c=P:L==-4&&(u=P);return C}let b=[],w=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,b,w,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:b.length?w[0]+b[0].length:0;return new hn(l[t.topID],b.reverse(),w.reverse(),k)}const dT=new WeakMap;function iv(t,e){if(!t.isAnonymous||e instanceof Ul||e.type!=t)return 1;let n=dT.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof hn)){n=1;break}n+=iv(t,i)}dT.set(e,n)}return n}function SA(t,e,n,i,r,s,o,a,l){let c=0;for(let g=i;g<r;g++)c+=iv(t,e[g]);let u=Math.ceil(c*1.5/8),d=[],f=[];function p(g,m,v,y,b){for(let w=v;w<y;){let k=w,_=m[w],E=iv(t,g[w]);for(w++;w<y;w++){let C=iv(t,g[w]);if(E+C>=u)break;E+=C}if(w==k+1){if(E>u){let C=g[k];p(C.children,C.positions,0,C.children.length,m[k]+b);continue}d.push(g[k])}else{let C=m[w-1]+g[w-1].length-_;d.push(SA(t,g,m,k,w,_,C,null,l))}f.push(_+b-s)}}return p(e,n,i,r,0),(a||l)(d,f,o)}class $c{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new $c(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let p=Math.max(f.from,l)-c,g=Math.min(f.to,d)-c;f=p>=g?null:new $c(p,g,f.tree,f.offset+c,a>0,!!u)}if(f&&r.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class yz{startParse(e,n,i){return typeof e=="string"&&(e=new Ffe(e)),i=i?i.length?i.map(r=>new v1(r.from,r.to)):[new v1(0,0)]:[new v1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class Ffe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Ct({perNode:!0});let zfe=0;class Ln{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=zfe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Ln&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new Ln(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new Oy(e);return i=>i.modified.indexOf(n)>-1?i:Oy.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let Ufe=0;class Oy{constructor(e){this.name=e,this.instances=[],this.id=Ufe++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&Vfe(n,a.modified));if(i)return i;let r=[],s=new Ln(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=Hfe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(Oy.get(a,l));return s}}function Vfe(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function Hfe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Wfe(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==r.length)break;let p=r[d++];if(d==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new Iy(i,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return bz.add(e)}const bz=new Ct;class Iy{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Iy.empty=new Iy([],2,null);function xz(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function Gfe(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function Kfe(t,e,n,i=0,r=t.length){let s=new Xfe(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class Xfe{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,u=qfe(e)||Iy.empty,d=Gfe(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(Ct.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),g=this.highlighters.filter(v=>!v.scope||v.scope(f.tree.type)),m=e.firstChild();for(let v=0,y=a;;v++){let b=v<f.overlay.length?f.overlay[v]:null,w=b?b.from+a:l,k=Math.max(n,y),_=Math.min(i,w);if(k<_&&m)for(;e.from<_&&(this.highlightRange(e,k,_,r,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=w||!e.nextSibling())););if(!b||w>i)break;y=b.to+a,y>n&&(this.highlightRange(p.cursor(),Math.max(n,b.from+a),Math.min(i,y),"",g),this.startSpan(Math.min(i,y),c))}m&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function qfe(t){let e=t.type.prop(bz);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const xe=Ln.define,o0=xe(),$a=xe(),fT=xe($a),hT=xe($a),Fa=xe(),a0=xe(Fa),y1=xe(Fa),Ks=xe(),mc=xe(Ks),Vs=xe(),Hs=xe(),n_=xe(),Qf=xe(n_),l0=xe(),Je={comment:o0,lineComment:xe(o0),blockComment:xe(o0),docComment:xe(o0),name:$a,variableName:xe($a),typeName:fT,tagName:xe(fT),propertyName:hT,attributeName:xe(hT),className:xe($a),labelName:xe($a),namespace:xe($a),macroName:xe($a),literal:Fa,string:a0,docString:xe(a0),character:xe(a0),attributeValue:xe(a0),number:y1,integer:xe(y1),float:xe(y1),bool:xe(Fa),regexp:xe(Fa),escape:xe(Fa),color:xe(Fa),url:xe(Fa),keyword:Vs,self:xe(Vs),null:xe(Vs),atom:xe(Vs),unit:xe(Vs),modifier:xe(Vs),operatorKeyword:xe(Vs),controlKeyword:xe(Vs),definitionKeyword:xe(Vs),moduleKeyword:xe(Vs),operator:Hs,derefOperator:xe(Hs),arithmeticOperator:xe(Hs),logicOperator:xe(Hs),bitwiseOperator:xe(Hs),compareOperator:xe(Hs),updateOperator:xe(Hs),definitionOperator:xe(Hs),typeOperator:xe(Hs),controlOperator:xe(Hs),punctuation:n_,separator:xe(n_),bracket:Qf,angleBracket:xe(Qf),squareBracket:xe(Qf),paren:xe(Qf),brace:xe(Qf),content:Ks,heading:mc,heading1:xe(mc),heading2:xe(mc),heading3:xe(mc),heading4:xe(mc),heading5:xe(mc),heading6:xe(mc),contentSeparator:xe(Ks),list:xe(Ks),quote:xe(Ks),emphasis:xe(Ks),strong:xe(Ks),link:xe(Ks),monospace:xe(Ks),strikethrough:xe(Ks),inserted:xe(),deleted:xe(),changed:xe(),invalid:xe(),meta:l0,documentMeta:xe(l0),annotation:xe(l0),processingInstruction:xe(l0),definition:Ln.defineModifier("definition"),constant:Ln.defineModifier("constant"),function:Ln.defineModifier("function"),standard:Ln.defineModifier("standard"),local:Ln.defineModifier("local"),special:Ln.defineModifier("special")};for(let t in Je){let e=Je[t];e instanceof Ln&&(e.name=t)}xz([{tag:Je.link,class:"tok-link"},{tag:Je.heading,class:"tok-heading"},{tag:Je.emphasis,class:"tok-emphasis"},{tag:Je.strong,class:"tok-strong"},{tag:Je.keyword,class:"tok-keyword"},{tag:Je.atom,class:"tok-atom"},{tag:Je.bool,class:"tok-bool"},{tag:Je.url,class:"tok-url"},{tag:Je.labelName,class:"tok-labelName"},{tag:Je.inserted,class:"tok-inserted"},{tag:Je.deleted,class:"tok-deleted"},{tag:Je.literal,class:"tok-literal"},{tag:Je.string,class:"tok-string"},{tag:Je.number,class:"tok-number"},{tag:[Je.regexp,Je.escape,Je.special(Je.string)],class:"tok-string2"},{tag:Je.variableName,class:"tok-variableName"},{tag:Je.local(Je.variableName),class:"tok-variableName tok-local"},{tag:Je.definition(Je.variableName),class:"tok-variableName tok-definition"},{tag:Je.special(Je.variableName),class:"tok-variableName2"},{tag:Je.definition(Je.propertyName),class:"tok-propertyName tok-definition"},{tag:Je.typeName,class:"tok-typeName"},{tag:Je.namespace,class:"tok-namespace"},{tag:Je.className,class:"tok-className"},{tag:Je.macroName,class:"tok-macroName"},{tag:Je.propertyName,class:"tok-propertyName"},{tag:Je.operator,class:"tok-operator"},{tag:Je.comment,class:"tok-comment"},{tag:Je.meta,class:"tok-meta"},{tag:Je.invalid,class:"tok-invalid"},{tag:Je.punctuation,class:"tok-punctuation"}]);var b1;const sd=new Ct;function Yfe(t){return Re.define({combine:t?e=>e.concat(t):void 0})}const Jfe=new Ct;class Es{constructor(e,n,i=[],r=""){this.data=e,this.name=r,wt.prototype.hasOwnProperty("tree")||Object.defineProperty(wt.prototype,"tree",{get(){return Po(this)}}),this.parser=n,this.extension=[ff.of(this),wt.languageData.of((s,o,a)=>{let l=pT(s,o,a),c=l.type.prop(sd);if(!c)return[];let u=s.facet(c),d=l.type.prop(Jfe);if(d){let f=l.resolve(o-l.from,a);for(let p of d)if(p.test(f,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return pT(e,n,i).type.prop(sd)==this.data}findRegions(e){let n=e.facet(ff);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(sd)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(Ct.mounted);if(a){if(a.tree.prop(sd)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof hn&&r(c,s.positions[l]+o)}};return r(Po(e),0),i}get allowsNesting(){return!0}}Es.setState=ut.define();function pT(t,e,n){let i=t.facet(ff),r=Po(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,ti.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Po(t){let e=t.field(Es.state,!1);return e?e.tree:hn.empty}class Zfe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let eh=null;class uf{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new uf(e,n,[],hn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new Zfe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=hn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped($c.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped($c.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=eh;eh=this;try{return e()}finally{eh=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=mT(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),i=$c.applyChanges(i,l),r=hn.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new uf(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=mT(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends yz{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=eh;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new hn(lr.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return eh}}function mT(t,e,n){return $c.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class df{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new df(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=uf.create(e.facet(ff).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new df(i)}}Es.state=ji.define({create:df.init,update(t,e){for(let n of e.effects)if(n.is(Es.setState))return n.value;return e.startState.facet(ff)!=e.state.facet(ff)?df.init(e.state):t.apply(e)}});let wz=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(wz=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const x1=typeof navigator<"u"&&(!((b1=navigator.scheduling)===null||b1===void 0)&&b1.isInputPending)?()=>navigator.scheduling.isInputPending():null,Qfe=ci.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Es.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Es.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=wz(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(Es.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!x1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>x1&&x1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Es.setState.of(new df(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>kr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ff=Re.define({combine(t){return t.length?t[0]:null},enables:t=>[Es.state,Qfe,je.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class ehe{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const the=Re.define(),kA=Re.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function au(t){let e=t.facet(kA);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function i_(t,e){let n="",i=t.tabSize,r=t.facet(kA)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function nhe(t,e){t instanceof wt&&(t=new _A(t));for(let i of t.state.facet(the)){let r=i(t,e);if(r!==void 0)return r}let n=Po(t.state);return n.length>=e?ihe(t,n,e):null}class _A{constructor(e,n={}){this.state=e,this.options=n,this.unit=au(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Cm(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Sz=new Ct;function ihe(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return kz(i,t,n)}function kz(t,e,n){for(let i=t;i;i=i.next){let r=she(i.node);if(r)return r(CA.create(e,n,i))}return 0}function rhe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function she(t){let e=t.type.prop(Sz);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(Ct.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>che(o,!0,1,void 0,s&&!rhe(o)?r.from:void 0)}return t.parent==null?ohe:null}function ohe(){return 0}class CA extends _A{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new CA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(ahe(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return kz(this.context.next,this.base,this.pos)}}function ahe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function lhe(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function che(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=lhe(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const uhe=Re.define(),dhe=new Ct;function fhe(t,e,n){let i=Po(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(dhe);if(l&&(a.to<i.length-50||i.length==t.doc.length||!hhe(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function hhe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function _z(t,e,n){for(let i of t.facet(uhe)){let r=i(t,e,n);if(r)return r}return fhe(t,e,n)}function Cz(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const EA=ut.define({map:Cz}),hx=ut.define({map:Cz});function Ez(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Bm=ji.define({create(){return dt.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=gT(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(EA)&&!phe(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(Mz),r=i?dt.replace({widget:new whe(i(e.state,n.value))}):vT;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(hx)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=gT(t,e.selection.main.head)),t},provide:t=>je.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(vT.range(i,r))}return dt.set(e,!0)}});function gT(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function Az(t,e,n){var i;let r=null;return(i=t.field(Bm,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function phe(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function Nz(t,e){return t.field(Bm,!1)?e:e.concat(ut.appendConfig.of(xhe()))}const mhe=t=>{for(let e of Ez(t)){let n=_z(t.state,e.from,e.to);if(n)return t.dispatch({effects:Nz(t.state,[EA.of(n),Pz(t,n)])}),!0}return!1},ghe=t=>{if(!t.state.field(Bm,!1))return!1;let e=[];for(let n of Ez(t)){let i=Az(t.state,n.from,n.to);i&&e.push(hx.of(i),Pz(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Pz(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return je.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const vhe=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=_z(e,r.from,r.to);s&&n.push(EA.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:Nz(t.state,n)}),!!n.length},yhe=t=>{let e=t.state.field(Bm,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(hx.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},bhe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Mz=Re.define({combine(t){return Xl(t,bhe)}});function xhe(t){return[Bm,She]}function Rz(t,e){let{state:n}=t,i=n.facet(Mz),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=Az(t.state,a.from,a.to);l&&t.dispatch({effects:hx.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const vT=dt.replace({widget:new class extends ql{toDOM(t){return Rz(t,null)}}});class whe extends ql{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Rz(e,this.value)}}const She=je.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class px{constructor(e,n){this.specs=e;let i;function r(a){let l=Dl.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof Es?a=>a.prop(sd)==o.data:o?a=>a==o:void 0,this.style=xz(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new Dl(i):null,this.themeType=n.themeType}static define(e,n){return new px(e,n||{})}}const r_=Re.define(),khe=Re.define({combine(t){return t.length?[t[0]]:null}});function w1(t){let e=t.facet(r_);return e.length?e:t.facet(khe)}function _he(t,e){let n=[Ehe],i;return t instanceof px&&(t.module&&n.push(je.styleModule.of(t.module)),i=t.themeType),i?n.push(r_.computeN([je.darkTheme],r=>r.facet(je.darkTheme)==(i=="dark")?[t]:[])):n.push(r_.of(t)),n}class Che{constructor(e){this.markCache=Object.create(null),this.tree=Po(e.state),this.decorations=this.buildDeco(e,w1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Po(e.state),i=w1(e.state),r=i!=w1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return dt.none;let i=new Il;for(let{from:r,to:s}of e.visibleRanges)Kfe(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=dt.mark({class:l})))},r,s);return i.finish()}}const Ehe=km.high(ci.fromClass(Che,{decorations:t=>t.decorations})),Ahe=1e4,Nhe="()[]{}",Phe=new Ct;function s_(t,e,n){let i=t.prop(e<0?Ct.openedBy:Ct.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function o_(t){let e=t.type.prop(Phe);return e?e(t.node):t}function c0(t,e,n,i={}){let r=i.maxScanDistance||Ahe,s=i.brackets||Nhe,o=Po(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=s_(l.type,n,s);if(c&&l.from<l.to){let u=o_(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return Mhe(t,e,n,l,u,c,s)}}return Rhe(t,e,n,o,a.type,r,s)}function Mhe(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=o_(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(s_(u.type,n,o))c++;else if(s_(u.type,-n,o)){if(c==0){let d=o_(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function Rhe(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let p=u.value;n<0&&(f+=p.length);let g=e+f*n;for(let m=n>0?0:p.length-1,v=n>0?p.length:-1;m!=v;m+=n){let y=o.indexOf(p[m]);if(!(y<0||i.resolveInner(g+m,1).type!=r))if(y%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:g+m,to:g+m+1},matched:y>>1==l>>1};d--}}n>0&&(f+=p.length)}return u.done?{start:c,matched:!1}:null}function yT(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class Tz{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=yT(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:yT(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function The(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||Ohe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||PA,mergeTokens:t.mergeTokens!==!1}}function Ohe(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const bT=new WeakMap;class AA extends Es{constructor(e){let n=Yfe(e.languageData),i=The(e),r,s=new class extends yz{createParse(o,a,l){return new Dhe(r,o,a,l)}};super(n,s,[],e.name),this.topNode=Bhe(n,this),r=this,this.streamParser=i,this.stateAfter=new Ct({perNode:!0}),this.tokenTable=e.tokenTable?new jz(i.tokenTable):Lhe}static define(e){return new AA(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=bT.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=NA(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=i?i(l.from):-1,d=new Tz(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-l.from;)Iz(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&bT.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function NA(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof hn&&l<r&&NA(t,a,l,i,r);if(c)return c}return null}function Oz(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof hn){if(!(l=Oz(t,a,n-o,i-o,r)))break;return r?new hn(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function Ihe(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&NA(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=i&&(c=Oz(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(r?au(r):4),tree:hn.empty}}class Dhe{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=uf.get(),o=r[0].from,{state:a,tree:l}=Ihe(e,i,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(au(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=uf.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new Tz(n,e?e.state.tabSize:4,e?au(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=Iz(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=hn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:jhe,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new hn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new hn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Iz(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const PA=Object.create(null),om=[lr.none],jhe=new bA(om),xT=[],wT=Object.create(null),Dz=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Dz[t]=Lz(PA,e);class jz{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Dz)}resolve(e){return e?this.table[e]||(this.table[e]=Lz(this.extra,e)):0}}const Lhe=new jz(PA);function S1(t,e){xT.indexOf(t)>-1||(xT.push(t),console.warn(e))}function Lz(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Je[c];u?typeof u=="function"?l.length?l=l.map(u):S1(c,`Modifier ${c} used at start of tag`):l.length?S1(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:S1(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=wT[r];if(s)return s.id;let o=wT[r]=lr.define({id:om.length,name:i,props:[Wfe({[i]:n})]});return om.push(o),o.id}function Bhe(t,e){let n=lr.define({id:om.length,name:"Document",props:[sd.add(()=>t),Sz.add(()=>i=>e.getIndent(i))],top:!0});return om.push(n),n}en.RTL,en.LTR;const $he=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=MA(t.state,n.from);return i.line?Fhe(t):i.block?Hhe(t):!1};function $m(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const Fhe=$m(RA,0),zhe=$m(RA,1),Uhe=$m(RA,2),Vhe=$m(Bz,0),Hhe=$m((t,e)=>Bz(t,e,Ghe(e)),0);function MA(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const th=50;function Whe(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-th,i),o=t.sliceDoc(r,r+th),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*th?u=d=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+th),d=t.sliceDoc(r-th,r));let f=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-n.length;return u.slice(f,f+e.length)==e&&d.slice(g,g+n.length)==n?{open:{pos:i+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:r-p-n.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function Ghe(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function Bz(t,e,n=e.selection.ranges){let i=n.map(s=>MA(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>Whe(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function RA(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,c=MA(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>r&&(s==o||o>d.from)){r=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,g=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),i.push({line:d,comment:g,token:c,indent:f,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const a_=wa.define(),Khe=wa.define(),Xhe=Re.define(),$z=Re.define({combine(t){return Xl(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),Fz=ji.define({create(){return po.empty},update(t,e){let n=e.state.facet($z),i=e.annotation(a_);if(i){let l=rr.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=Dy(u,u.length,n.minDepth,l):u=Vz(u,e.startState.selection),new po(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(Khe);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation($n.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=rr.fromTransaction(e),o=e.annotation($n.time),a=e.annotation($n.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new po(t.done.map(rr.fromJSON),t.undone.map(rr.fromJSON))}});function qhe(t={}){return[Fz,$z.of(t),je.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?zz:e.inputType=="historyRedo"?l_:null;return i?(e.preventDefault(),i(n)):!1}})]}function TA(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(Fz,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const zz=TA(0,!1),l_=TA(1,!1),Yhe=TA(0,!0);class rr{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new rr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new rr(e.changes&&Dn.fromJSON(e.changes),[],e.mapped&&wo.fromJSON(e.mapped),e.startSelection&&se.fromJSON(e.startSelection),e.selectionsAfter.map(se.fromJSON))}static fromTransaction(e,n){let i=Yr;for(let r of e.startState.facet(Xhe)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new rr(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Yr)}static selection(e){return new rr(void 0,Yr,void 0,void 0,e)}}function Dy(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function Jhe(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function Zhe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function Uz(t,e){return t.length?e.length?t.concat(e):t:e}const Yr=[],Qhe=200;function Vz(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Qhe));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Dy(t,t.length-1,1e9,n.setSelAfter(i)))}else return[rr.selection([e])]}function epe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function k1(t,e){if(!t.length)return t;let n=t.length,i=Yr;for(;n;){let r=tpe(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[rr.selection(i)]:Yr}function tpe(t,e,n){let i=Uz(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Yr,n);if(!t.changes)return rr.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new rr(r,ut.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const npe=/^(input\.type|delete)($|\.)/;class po{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new po(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||npe.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,Jhe(a.changes,e.changes))||i=="input.type.compose")?o=Dy(o,o.length-1,r.minDepth,new rr(e.changes.compose(a.changes),Uz(ut.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Yr)):o=Dy(o,o.length,r.minDepth,e),new po(o,Yr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Yr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Zhe(s[s.length-1],e)?this:new po(Vz(this.done,e),this.undone,n,i)}addMapping(e){return new po(k1(this.done,e),k1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:a_.of({side:e,rest:epe(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?Yr:r.slice(0,r.length-1);return s.mapped&&(a=k1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:a_.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}po.empty=new po(Yr,Yr);function Fm(t,e){return se.create(t.ranges.map(e),t.mainIndex)}function ec(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function fu({state:t,dispatch:e},n){let i=Fm(t.selection,n);return i.eq(t.selection,!0)?!1:(e(ec(t,i)),!0)}function mx(t,e){return se.cursor(e?t.to:t.from)}function Hz(t,e){return fu(t,n=>n.empty?t.moveByChar(n,e):mx(n,e))}function tc(t){return t.textDirectionAt(t.state.selection.main.head)==en.LTR}const ST=t=>Hz(t,!tc(t)),kT=t=>Hz(t,tc(t));function Wz(t,e){return fu(t,n=>n.empty?t.moveByGroup(n,e):mx(n,e))}const ipe=t=>Wz(t,!tc(t)),rpe=t=>Wz(t,tc(t));function Gz(t,e){return fu(t,n=>{if(!n.empty)return mx(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const _T=t=>Gz(t,!1),CT=t=>Gz(t,!0);function Kz(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(je.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function Xz(t,e){let n=Kz(t),{state:i}=t,r=Fm(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):mx(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=je.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(ec(i,r),{effects:s}),!0}const _1=t=>Xz(t,!1),C1=t=>Xz(t,!0);function gx(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=se.cursor(i.from+s))}return r}const ET=t=>fu(t,e=>gx(t,e,!0)),AT=t=>fu(t,e=>gx(t,e,!1)),spe=t=>fu(t,e=>se.cursor(t.lineBlockAt(e.head).from,1)),ope=t=>fu(t,e=>se.cursor(t.lineBlockAt(e.head).to,-1));function ape(t,e,n){let i=!1,r=Fm(t.selection,s=>{let o=c0(t,s.head,-1)||c0(t,s.head,1)||s.head>0&&c0(t,s.head-1,1)||s.head<t.doc.length&&c0(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return se.cursor(a)});return i?(e(ec(t,r)),!0):!1}const lpe=({state:t,dispatch:e})=>ape(t,e);function nc(t,e){let n=Fm(t.state.selection,i=>{let r=e(i);return se.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(ec(t.state,n)),!0)}function qz(t,e){return nc(t,n=>t.moveByChar(n,e))}const NT=t=>qz(t,!tc(t)),PT=t=>qz(t,tc(t));function Yz(t,e){return nc(t,n=>t.moveByGroup(n,e))}const cpe=t=>Yz(t,!tc(t)),upe=t=>Yz(t,tc(t));function Jz(t,e){return nc(t,n=>t.moveVertically(n,e))}const MT=t=>Jz(t,!1),RT=t=>Jz(t,!0);function Zz(t,e){return nc(t,n=>t.moveVertically(n,e,Kz(t).height))}const TT=t=>Zz(t,!1),OT=t=>Zz(t,!0),IT=t=>nc(t,e=>gx(t,e,!0)),DT=t=>nc(t,e=>gx(t,e,!1)),dpe=t=>nc(t,e=>se.cursor(t.lineBlockAt(e.head).from)),fpe=t=>nc(t,e=>se.cursor(t.lineBlockAt(e.head).to)),jT=({state:t,dispatch:e})=>(e(ec(t,{anchor:0})),!0),LT=({state:t,dispatch:e})=>(e(ec(t,{anchor:t.doc.length})),!0),BT=({state:t,dispatch:e})=>(e(ec(t,{anchor:t.selection.main.anchor,head:0})),!0),$T=({state:t,dispatch:e})=>(e(ec(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),hpe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),ppe=({state:t,dispatch:e})=>{let n=yx(t).map(({from:i,to:r})=>se.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:se.create(n),userEvent:"select"})),!0};function vx(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=u0(t,l,!1)):l>o&&(n="delete.forward",l=u0(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=u0(t,o,!1),a=u0(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:se.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?je.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function u0(t,e,n){if(t instanceof je)for(let i of t.state.facet(je.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const Qz=(t,e,n)=>vx(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let c=Cm(a,s.tabSize),u=c%au(s)||au(s);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)r--;l=r}else l=ri(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=ri(o.text,l-o.from,!1,!1)+o.from);return l}),E1=t=>Qz(t,!1,!0),FT=t=>Qz(t,!0,!1),e9=(t,e)=>vx(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=ri(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),zT=t=>e9(t,!1),mpe=t=>e9(t,!0),UT=t=>vx(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),gpe=t=>vx(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),vpe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Et.of(["",""])},range:se.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},ype=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:ri(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:ri(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:se.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function yx(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function t9(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of yx(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(se.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(se.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:se.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const bpe=({state:t,dispatch:e})=>t9(t,e,!1),xpe=({state:t,dispatch:e})=>t9(t,e,!0);function n9(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of yx(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const wpe=({state:t,dispatch:e})=>n9(t,e,!1),Spe=({state:t,dispatch:e})=>n9(t,e,!0),kpe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(yx(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Fm(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function _pe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Po(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(Ct.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const VT=Cpe(!1);function Cpe(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&_pe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new _A(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=nhe(c,s);for(u==null&&(u=Cm(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",i_(e,u)];return l&&d.push(i_(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Et.of(d)},range:se.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function i9(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:se.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const c_=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(i9(t,(n,i)=>{i.push({from:n.from,insert:t.facet(kA)})}),{userEvent:"input.indent"})),!0),HT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(i9(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Cm(r,t.tabSize),o=0,a=i_(t,Math.max(0,s-au(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),WT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class am{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(WT(a)):WT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Wr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=tE(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Zo(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(am.prototype[Symbol.iterator]=function(){return this});const r9={from:-1,to:-1,match:/.*/.exec("")},OA="gm"+(/x/.unicode==null?"":"u");class s9{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=r9,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new o9(e,n,i,r,s);this.re=new RegExp(n,OA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=jy(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=jy(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const A1=new WeakMap;class Cd{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=A1.get(e);if(!r||r.from>=i||r.to<=n){let a=new Cd(n,e.sliceString(n,i));return A1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),A1.set(e,new Cd(o,s)),new Cd(n,s.slice(n-o,i-o))}}class o9{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=r9,this.matchPos=jy(e,r),this.re=new RegExp(n,OA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Cd.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=jy(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Cd.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(s9.prototype[Symbol.iterator]=o9.prototype[Symbol.iterator]=function(){return this});function Epe(t){try{return new RegExp(t,OA),!0}catch{return!1}}function jy(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function u_(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=$t("input",{class:"cm-textfield",name:"line",value:e}),i=$t("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Qh.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},$t("label",t.state.phrase("Go to line"),": ",n)," ",$t("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),$t("button",{name:"close",onclick:()=>{t.dispatch({effects:Qh.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,p=c?+c:a.number;if(c&&d){let v=p/100;l&&(v=v*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*v)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),m=se.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[Qh.of(!1),je.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const Qh=ut.define(),GT=ji.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Qh)&&(t=n.value);return t},provide:t=>Hp.from(t,e=>e?u_:null)}),Ape=t=>{let e=Vp(t,u_);if(!e){let n=[Qh.of(!0)];t.state.field(GT,!1)==null&&n.push(ut.appendConfig.of([GT,Npe])),t.dispatch({effects:n}),e=Vp(t,u_)}return e&&e.dom.querySelector("input").select(),!0},Npe=je.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Ppe=({state:t,dispatch:e})=>{let{selection:n}=t,i=se.create(n.ranges.map(r=>t.wordAt(r.head)||se.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Mpe(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new am(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new am(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Rpe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Ppe({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Mpe(t,i);return r?(e(t.update({selection:t.selection.addRange(se.range(r.from,r.to),!1),effects:je.scrollIntoView(r.to)})),!0):!1},Af=Re.define({combine(t){return Xl(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Fpe(e),scrollToMatch:e=>je.scrollIntoView(e)})}});class a9{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Epe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Dpe(this):new Ope(this)}getCursor(e,n=0,i){let r=e.doc?e:wt.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Bu(this,r,n,i):Lu(this,r,n,i)}}class l9{constructor(e){this.spec=e}}function Lu(t,e,n,i){return new am(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?Tpe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Tpe(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(Ly(r,n-s))!=si.Word||e(By(r,n-s))!=si.Word)&&(e(By(r,i-s))!=si.Word||e(Ly(r,i-s))!=si.Word))}class Ope extends l9{constructor(e){super(e)}nextMatch(e,n,i){let r=Lu(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=Lu(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Lu(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Lu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Lu(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Bu(t,e,n,i){return new s9(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Ipe(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function Ly(t,e){return t.slice(ri(t,e,!1),e)}function By(t,e){return t.slice(e,ri(t,e))}function Ipe(t){return(e,n,i)=>!i[0].length||(t(Ly(i.input,i.index))!=si.Word||t(By(i.input,i.index))!=si.Word)&&(t(By(i.input,i.index+i[0].length))!=si.Word||t(Ly(i.input,i.index+i[0].length))!=si.Word)}class Dpe extends l9{nextMatch(e,n,i){let r=Bu(this.spec,e,i,e.doc.length).next();return r.done&&(r=Bu(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Bu(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=Bu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Bu(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const lm=ut.define(),IA=ut.define(),_l=ji.define({create(t){return new N1(d_(t).create(),null)},update(t,e){for(let n of e.effects)n.is(lm)?t=new N1(n.value.create(),t.panel):n.is(IA)&&(t=new N1(t.query,n.value?DA:null));return t},provide:t=>Hp.from(t,e=>e.panel)});class N1{constructor(e,n){this.query=e,this.panel=n}}const jpe=dt.mark({class:"cm-searchMatch"}),Lpe=dt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Bpe=ci.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(_l))}update(t){let e=t.state.field(_l);(e!=t.startState.field(_l)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return dt.none;let{view:n}=this,i=new Il;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);i.add(c,u,d?Lpe:jpe)})}return i.finish()}},{decorations:t=>t.decorations});function zm(t){return e=>{let n=e.state.field(_l,!1);return n&&n.query.spec.valid?t(e,n):h9(e)}}const KT=zm((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=se.single(i.from,i.to),s=t.state.facet(Af);return t.dispatch({selection:r,effects:[jA(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),f9(t),!0}),XT=zm((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=se.single(r.from,r.to),o=t.state.facet(Af);return t.dispatch({selection:s,effects:[jA(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),f9(t),!0}),c9=zm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:se.create(n.map(i=>se.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),$pe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new am(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(se.range(a.value.from,a.value.to))}return e(t.update({selection:se.create(s,o),userEvent:"select.search.matches"})),!0},qT=zm((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==i&&o.to==r&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(je.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let d=t.state.changes(a);return o&&(l=se.single(o.from,o.to).map(d),u.push(jA(t,o)),u.push(n.facet(Af).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),u9=zm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:je.announce.of(i),userEvent:"input.replace.all"}),!0});function DA(t){return t.state.facet(Af).createPanel(t)}function d_(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Af);return new a9({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function d9(t){let e=Vp(t,DA);return e&&e.dom.querySelector("[main-field]")}function f9(t){let e=d9(t);e&&e==t.root.activeElement&&e.select()}const h9=t=>{let e=t.state.field(_l,!1);if(e&&e.panel){let n=d9(t);if(n&&n!=t.root.activeElement){let i=d_(t.state,e.query.spec);i.valid&&t.dispatch({effects:lm.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[IA.of(!0),e?lm.of(d_(t.state,e.query.spec)):ut.appendConfig.of(Upe)]});return!0},p9=t=>{let e=t.state.field(_l,!1);if(!e||!e.panel)return!1;let n=Vp(t,DA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:IA.of(!1)}),!0};class Fpe{constructor(e){this.view=e;let n=this.query=e.state.field(_l).query.spec;this.commit=this.commit.bind(this),this.searchField=$t("input",{value:n.search,placeholder:dr(e,"Find"),"aria-label":dr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=$t("input",{value:n.replace,placeholder:dr(e,"Replace"),"aria-label":dr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=$t("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=$t("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=$t("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return $t("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=$t("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>KT(e),[dr(e,"next")]),i("prev",()=>XT(e),[dr(e,"previous")]),i("select",()=>c9(e),[dr(e,"all")]),$t("label",null,[this.caseField,dr(e,"match case")]),$t("label",null,[this.reField,dr(e,"regexp")]),$t("label",null,[this.wordField,dr(e,"by word")]),...e.state.readOnly?[]:[$t("br"),this.replaceField,i("replace",()=>qT(e),[dr(e,"replace")]),i("replaceAll",()=>u9(e),[dr(e,"replace all")])],$t("button",{name:"close",onclick:()=>p9(e),"aria-label":dr(e,"close"),type:"button"},[""])])}commit(){let e=new a9({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:lm.of(e)}))}keydown(e){kte(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?XT:KT)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),qT(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(lm)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Af).top}}function dr(t,e){return t.state.phrase(e)}const d0=30,f0=/[\s\.,:;?!]/;function jA(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-d0),o=Math.min(r,n+d0),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<d0;l++)if(!f0.test(a[l+1])&&f0.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-d0;l--)if(!f0.test(a[l-1])&&f0.test(a[l])){a=a.slice(0,l);break}}return je.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const zpe=je.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Upe=[_l,km.low(Bpe),zpe];class Vpe{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=Po(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(m9(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function YT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Hpe(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=YT(e)+YT(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Wpe(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Hpe(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class JT{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function ep(t){return t.selection.main.from}function m9(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const g9=wa.define();function Gpe(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:se.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const ZT=new WeakMap;function Kpe(t){if(!Array.isArray(t))return t;let e=ZT.get(t);return e||ZT.set(t,e=Wpe(t)),e}const v9=ut.define(),LA=ut.define();class Xpe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Wr(e,n),r=Zo(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(Wr(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let b=Wr(e,0),w=Zo(b),k=w==e.length?0:-100;if(b!=n[0])if(b==i[0])k+=-200;else return null;return this.ret(k,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let b=0,w=Math.min(e.length,200);b<w&&c<l;){let k=Wr(e,b);(k==n[c]||k==i[c])&&(r[c++]=b),b+=Zo(k)}if(c<l)return null}let u=0,d=0,f=!1,p=0,g=-1,m=-1,v=/[a-z]/.test(e),y=!0;for(let b=0,w=Math.min(e.length,200),k=0;b<w&&d<l;){let _=Wr(e,b);a<0&&(u<l&&_==n[u]&&(s[u++]=b),p<l&&(_==n[p]||_==i[p]?(p==0&&(g=b),m=b+1,p++):p=0));let E,C=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(E=tE(_))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!b||C==1&&v||k==0&&C!=0)&&(n[d]==_||i[d]==_&&(f=!0)?o[d++]=b:o.length&&(y=!1)),k=C,b+=Zo(_)}return d==l&&o[0]==0&&y?this.result(-100+(f?-200:0),o,e):p==l&&g==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[g,m]):d==l?this.result(-100+(f?-200:0)+-700+(y?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?Zo(Wr(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class qpe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const ao=Re.define({combine(t){return Xl(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Ype,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>QT(e(i),n(i)),optionClass:(e,n)=>i=>QT(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function QT(t,e){return t?e?t+" "+e:t:e}function Ype(t,e,n,i,r,s){let o=t.textDirection==en.RTL,a=o,l=!1,c="top",u,d,f=e.left-r.left,p=r.right-e.right,g=i.right-i.left,m=i.bottom-i.top;if(a&&f<Math.min(g,p)?a=!1:!a&&p<Math.min(g,f)&&(a=!0),g<=(a?f:p))u=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,d=Math.min(400,a?f:p);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let b=r.bottom-e.bottom;b>=m||b>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let v=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/v}px; max-width: ${d/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function Jpe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function P1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class Zpe{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(ao);this.optionContent=Jpe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=P1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(ao).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:LA.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=P1(s.length,o,e.state.facet(ao).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=P1(n.options.length,n.selected,this.view.state.facet(ao).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>kr(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&eme(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(ao).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>i.from||i.from==0))if(s=f,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let p=r.appendChild(document.createElement("completion-section"));p.textContent=f}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let p=f(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Qpe(t,e){return n=>new Zpe(n,t,e)}function eme(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function eO(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function tme(t,e){let n=[],i=null,r=c=>{n.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let d=typeof u=="string"?u:u.name;i.some(f=>f.name==d)||i.push(typeof u=="string"?{name:d}:u)}},s=e.facet(ao);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)r(new JT(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),f,p=s.filterStrict?new qpe(d):new Xpe(d);for(let g of c.result.options)if(f=p.match(g.label)){let m=g.displayLabel?u?u(g,f.matched):[]:f.matched;r(new JT(g,c.source,m,f.score+(g.boost||0)))}}}if(i){let c=Object.create(null),u=0,d=(f,p)=>{var g,m;return((g=f.rank)!==null&&g!==void 0?g:1e9)-((m=p.rank)!==null&&m!==void 0?m:1e9)||(f.name<p.name?-1:1)};for(let f of i.sort(d))u-=1e5,c[f.name]=u;for(let f of n){let{section:p}=f.completion;p&&(f.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):eO(c.completion)>eO(a)&&(o[o.length-1]=c),a=c.completion}return o}class od{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new od(this.options,tO(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(c=>c.isPending))return r.setDisabled();let a=tme(e,n);if(!a.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let l=n.facet(ao).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new od(a,tO(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:lme,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new od(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new od(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class $y{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new $y(sme,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(ao),s=(i.override||n.languageDataAt("autocomplete",ep(n)).map(Kpe)).map(l=>(this.active.find(u=>u.source==l)||new As(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(y9));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!nme(s,this.active)||a?o=od.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new As(l.source,0):l));for(let l of e.effects)l.is(b9)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new $y(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?ime:rme}}function nme(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const ime={"aria-autocomplete":"list"},rme={};function tO(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const sme=[];function ome(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(g9);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class As{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=ome(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new As(r.source,0)),i&4&&r.state==0&&(r=new As(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(v9))r=new As(r.source,1,s.value);else if(s.is(LA))r=new As(r.source,0);else if(s.is(y9))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(ep(e.state))}}class tp extends As{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=ep(e.state);if(a>o||!r||n&2&&(ep(e.startState)==this.from||a<this.limit))return new As(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return ame(r.validFor,e.state,s,o)?new tp(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new Vpe(e.state,a,!1)))?new tp(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:ep(e.state)):new As(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new tp(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new As(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function ame(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):m9(t,!0).test(r)}const y9=ut.define({map(t,e){return t.map(n=>n.map(e))}}),b9=ut.define(),Nf=ji.define({create(){return $y.start()},update(t,e){return t.update(e)},provide:t=>[gE.from(t,e=>e.tooltip),je.contentAttributes.from(t,e=>e.attrs)]});function x9(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(Nf).active.find(r=>r.source==e.source);return i instanceof tp?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},Gpe(t.state,n,i.from,i.to)),{annotations:g9.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const lme=Qpe(Nf,x9);function h0(t,e="option"){return n=>{let i=n.state.field(Nf,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(ao).interactionDelay)return!1;let r=1,s;e=="page"&&(s=tne(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:b9.of(a)}),!0}}const nO=t=>{let e=t.state.field(Nf,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(ao).interactionDelay?!1:x9(t,e.open.options[e.open.selected])},cme=t=>t.state.field(Nf,!1)?(t.dispatch({effects:v9.of(!0)}),!0):!1,ume=t=>{let e=t.state.field(Nf,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:LA.of(null)}),!0)},w9={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},S9=new class extends Jc{};S9.startSide=1;S9.endSide=-1;const M1="()[]{}<>";function dme(t){for(let e=0;e<M1.length;e+=2)if(M1.charCodeAt(e)==t)return M1.charAt(e+1);return tE(t<128?t:t+1)}function fme(t,e){return t.languageDataAt("closeBrackets",e)[0]||w9}const hme=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=fme(t,t.selection.main.head).brackets||w9.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=mme(t.doc,o.head);for(let l of i)if(l==a&&pme(t.doc,o.head)==dme(Wr(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:se.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function pme(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Zo(Wr(n,0)))}function mme(t,e){let n=t.sliceString(e-2,e);return Zo(Wr(n,0))==n.length?n:n.slice(1)}class iO{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Ec{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=i.facet(mo).markerFilter;r&&(e=r(e,i));let s=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new Il,a=[],l=0;for(let u=0;;){let d=u==s.length?null:s[u];if(!d&&!a.length)break;let f,p;for(a.length?(f=l,p=a.reduce((m,v)=>Math.min(m,v.to),d&&d.from>f?d.from:1e8)):(f=d.from,p=d.to,a.push(d),u++);u<s.length;){let m=s[u];if(m.from==f&&(m.to>m.from||m.to==f))a.push(m),u++,p=Math.min(m.to,p);else{p=Math.min(m.from,p);break}}let g=Mme(a);if(a.some(m=>m.from==m.to||m.from==m.to-1&&i.doc.lineAt(m.from).to==m.from))o.add(f,f,dt.widget({widget:new Eme(g),diagnostics:a.slice()}));else{let m=a.reduce((v,y)=>y.markClass?v+" "+y.markClass:v,"");o.add(f,p,dt.mark({class:"cm-lintRange cm-lintRange-"+g+m,diagnostics:a.slice(),inclusiveEnd:a.some(v=>v.to>p)}))}l=p;for(let m=0;m<a.length;m++)a[m].to<=l&&a.splice(m--,1)}let c=o.finish();return new Ec(c,n,hf(c))}}function hf(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new iO(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new iO(i.from,s,i.diagnostic)}}),i}function gme(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(mo).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(BA))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function k9(t,e){return t.field(Er,!1)?e:e.concat(ut.appendConfig.of(A9))}function vme(t,e){return{effects:k9(t,[BA.of(e)])}}const BA=ut.define(),$A=ut.define(),_9=ut.define(),Er=ji.define({create(){return new Ec(dt.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=hf(n,t.selected.diagnostic,s)||hf(n,null,s)}!n.size&&r&&e.state.facet(mo).autoPanel&&(r=null),t=new Ec(n,r,i)}for(let n of e.effects)if(n.is(BA)){let i=e.state.facet(mo).autoPanel?n.value.length?cm.open:null:t.panel;t=Ec.init(n.value,i,e.state)}else n.is($A)?t=new Ec(t.diagnostics,n.value?cm.open:null,t.selected):n.is(_9)&&(t=new Ec(t.diagnostics,t.panel,n.value));return t},provide:t=>[Hp.from(t,e=>e.panel),je.decorations.from(t,e=>e.diagnostics)]}),yme=dt.mark({class:"cm-lintRange cm-lintRange-active"});function bme(t,e,n){let{diagnostics:i}=t.state.field(Er),r,s=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return r=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(mo).tooltipFilter;return r&&a&&(r=a(r,t.state)),r?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:xme(t,r)}}}:null}function xme(t,e){return $t("ul",{class:"cm-tooltip-lint"},e.map(n=>E9(t,n,!1)))}const wme=t=>{let e=t.state.field(Er,!1);(!e||!e.panel)&&t.dispatch({effects:k9(t.state,[$A.of(!0)])});let n=Vp(t,cm.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},rO=t=>{let e=t.state.field(Er,!1);return!e||!e.panel?!1:(t.dispatch({effects:$A.of(!1)}),!0)},Sme=t=>{let e=t.state.field(Er,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},kme=ci.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(mo);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(mo);n.length&&_me(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(vme(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{kr(this.view.state,i)})}}update(t){let e=t.state.facet(mo);(t.docChanged||e!=t.startState.facet(mo)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function _me(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):r=setTimeout(()=>e(i),200)},n)}const mo=Re.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Xl(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Cme(t,e={}){return[mo.of({source:t,config:e}),kme,A9]}function C9(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function E9(t,e,n){var i;let r=n?C9(e.actions):[];return $t("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},$t("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let p=hf(t.state.field(Er).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,d=u<0?c:[c.slice(0,u),$t("u",c.slice(u,u+1)),c.slice(u+1)];return $t("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&$t("div",{class:"cm-diagnosticSource"},e.source))}class Eme extends ql{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return $t("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class sO{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=E9(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class cm{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)rO(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=C9(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=hf(this.view.state.field(Er).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=$t("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=$t("div",{class:"cm-panel-lint"},this.list,$t("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>rO(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Er).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Er),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,f;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(f=new sO(this.view,u),this.items.splice(i,0,f),r=!0):(f=this.items[d],d>i&&(this.items.splice(i,d-i),r=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new sO(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Er),i=hf(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:_9.of(i)})}static open(e){return new cm(e)}}function Ame(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function p0(t){return Ame(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Nme=je.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:p0("#d11")},".cm-lintRange-warning":{backgroundImage:p0("orange")},".cm-lintRange-info":{backgroundImage:p0("#999")},".cm-lintRange-hint":{backgroundImage:p0("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Pme(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function Mme(t){let e="hint",n=1;for(let i of t){let r=Pme(i.severity);r>n&&(n=r,e=i.severity)}return e}const A9=[Er,je.decorations.compute([Er],t=>{let{selected:e,panel:n}=t.field(Er);return!e||!n||e.from==e.to?dt.none:dt.set([yme.range(e.from,e.to)])}),ene(bme,{hideOn:gme}),Nme],N9=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},Rme=N9("up"),Tme=N9("down"),Ome=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(se.range(s,s)):e=se.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},Ime=[{key:"Ctrl-Space",run:cme},{key:"Escape",run:ume},{key:"ArrowDown",run:h0(!0)},{key:"ArrowUp",run:h0(!1)},{key:"PageDown",run:h0(!0,"page")},{key:"PageUp",run:h0(!1,"page")},{key:"Enter",run:nO},{key:"Tab",run:nO},{key:"Mod-f",run:h9,scope:"editor search-panel"},{key:"Escape",run:p9,scope:"editor search-panel"},{key:"Alt-Enter",run:c9,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:u9,scope:"editor search-panel"},{key:"Ctrl-g",run:Ape},{key:"Mod-d",run:Rpe,preventDefault:!0},{key:"Shift-Mod-l",run:$pe},{key:"Enter",run:VT,shift:VT},{key:"ArrowLeft",run:ST,shift:NT,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:ipe,shift:cpe},{key:"ArrowRight",run:kT,shift:PT,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:rpe,shift:upe},{key:"ArrowUp",run:_T,shift:MT,preventDefault:!0},{key:"ArrowDown",run:CT,shift:RT,preventDefault:!0},{key:"Home",run:AT,shift:DT},{mac:"Cmd-ArrowLeft",run:AT,shift:DT},{key:"Mod-Home",run:jT,shift:BT},{mac:"Cmd-ArrowUp",run:jT,shift:BT},{key:"PageUp",run:_1,shift:TT},{mac:"Ctrl-ArrowUp",run:_1,shift:TT},{key:"PageDown",run:C1,shift:OT},{mac:"Ctrl-ArrowDown",run:C1,shift:OT},{key:"End",run:ET,shift:IT},{mac:"Cmd-ArrowRight",run:ET,shift:IT},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Rme,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Tme,preventDefault:!0},{key:"Shift-Alt-i",run:Ome},{key:"Mod-End",run:LT,shift:$T},{mac:"Cmd-ArrowDown",run:LT,shift:$T},{key:"Mod-a",run:hpe},{key:"Backspace",run:hme},{key:"Backspace",run:E1,shift:E1},{key:"Delete",run:FT},{key:"Mod-Backspace",mac:"Alt-Backspace",run:zT},{key:"Mod-Delete",mac:"Alt-Delete",run:mpe},{mac:"Mod-Backspace",run:gpe},{mac:"Mod-Delete",run:UT},{mac:"Ctrl-b",run:ST,shift:NT,preventDefault:!0},{mac:"Ctrl-f",run:kT,shift:PT},{mac:"Ctrl-p",run:_T,shift:MT},{mac:"Ctrl-n",run:CT,shift:RT},{mac:"Ctrl-a",run:spe,shift:dpe},{mac:"Ctrl-e",run:ope,shift:fpe},{mac:"Ctrl-d",run:FT},{mac:"Ctrl-h",run:E1},{mac:"Ctrl-k",run:UT},{mac:"Ctrl-Alt-h",run:zT},{mac:"Ctrl-o",run:vpe},{mac:"Ctrl-t",run:ype},{mac:"Ctrl-v",run:C1},{mac:"Alt-v",run:_1},{key:"Shift-Mod-k",run:kpe},{key:"Alt-ArrowDown",run:xpe},{key:"Alt-ArrowUp",run:bpe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Spe},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:wpe},{key:"Mod-l",run:ppe,preventDefault:!0},{key:"Shift-Mod-\\",run:lpe},{key:"Tab",run:c_,shift:HT,preventDefault:!0},{key:"Mod-[",run:HT},{key:"Mod-]",run:c_},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:mhe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:ghe},{key:"Mod-k Mod-0",run:vhe},{key:"Mod-k Mod-j",run:yhe},{key:"Mod-k Mod-c",run:zhe},{key:"Mod-k Mod-u",run:Uhe},{key:"Mod-/",run:$he},{key:"Shift-Alt-a",run:Vhe},{key:"Mod-z",run:zz,preventDefault:!0},{key:"Mod-y",run:l_,preventDefault:!0},{key:"Mod-Shift-z",run:l_,preventDefault:!0},{key:"Mod-u",run:Yhe,preventDefault:!0},{key:"Mod-Shift-m",run:wme},{key:"F8",run:Sme}];var Dme=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Mu=new WeakMap,m0=new WeakMap,g0={},R1=0,P9=function(t){return t&&(t.host||P9(t.parentNode))},jme=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=P9(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Lme=function(t,e,n,i){var r=jme(e,Array.isArray(t)?t:[t]);g0[n]||(g0[n]=new WeakMap);var s=g0[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(Mu.get(f)||0)+1,v=(s.get(f)||0)+1;Mu.set(f,m),s.set(f,v),o.push(f),m===1&&g&&m0.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),R1++,function(){o.forEach(function(d){var f=Mu.get(d)-1,p=s.get(d)-1;Mu.set(d,f),s.set(d,p),f||(m0.has(d)||d.removeAttribute(i),m0.delete(d)),p||d.removeAttribute(n)}),R1--,R1||(Mu=new WeakMap,Mu=new WeakMap,m0=new WeakMap,g0={})}},Bme=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=Dme(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),Lme(i,r,n,"aria-hidden")):function(){return null}},f_=["Enter"," "],$me=["ArrowDown","PageUp","Home"],M9=["ArrowUp","PageDown","End"],Fme=[...$me,...M9],zme={ltr:[...f_,"ArrowRight"],rtl:[...f_,"ArrowLeft"]},Ume={ltr:["ArrowLeft"],rtl:["ArrowRight"]},bx="Menu",[um,Vme,Hme]=vm(bx),[hu,R9]=js(bx,[Hme,_f,vb]),FA=_f(),T9=vb(),[hve,pu]=hu(bx),[pve,Um]=hu(bx),Wme="MenuAnchor",zA=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=FA(n);return h.jsx(tx,{...r,...i,ref:e})});zA.displayName=Wme;var UA="MenuPortal",[Gme,O9]=hu(UA,{forceMount:void 0}),I9=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=pu(UA,e);return h.jsx(Gme,{scope:e,forceMount:n,children:h.jsx(va,{present:n||s.open,children:h.jsx(Im,{asChild:!0,container:r,children:i})})})};I9.displayName=UA;var ss="MenuContent",[Kme,VA]=hu(ss),D9=x.forwardRef((t,e)=>{const n=O9(ss,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=pu(ss,t.__scopeMenu),o=Um(ss,t.__scopeMenu);return h.jsx(um.Provider,{scope:t.__scopeMenu,children:h.jsx(va,{present:i||s.open,children:h.jsx(um.Slot,{scope:t.__scopeMenu,children:o.modal?h.jsx(Xme,{...r,ref:e}):h.jsx(qme,{...r,ref:e})})})})}),Xme=x.forwardRef((t,e)=>{const n=pu(ss,t.__scopeMenu),i=x.useRef(null),r=xt(e,i);return x.useEffect(()=>{const s=i.current;if(s)return Bme(s)},[]),h.jsx(HA,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ke(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),qme=x.forwardRef((t,e)=>{const n=pu(ss,t.__scopeMenu);return h.jsx(HA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Yme=Wd("MenuContent.ScrollLock"),HA=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:g,...m}=t,v=pu(ss,n),y=Um(ss,n),b=FA(n),w=T9(n),k=Vme(n),[_,E]=x.useState(null),C=x.useRef(null),P=xt(e,C,v.onContentChange),T=x.useRef(0),I=x.useRef(""),L=x.useRef(0),j=x.useRef(null),X=x.useRef("right"),$=x.useRef(0),K=g?ix:x.Fragment,J=g?{as:Yme,allowPinchZoom:!0}:void 0,Q=U=>{var S,M;const re=I.current+U,ve=k().filter(D=>!D.disabled),Z=document.activeElement,oe=(S=ve.find(D=>D.ref.current===Z))==null?void 0:S.textValue,z=ve.map(D=>D.textValue),B=lge(z,re,oe),H=(M=ve.find(D=>D.textValue===B))==null?void 0:M.ref.current;(function D(O){I.current=O,window.clearTimeout(T.current),O!==""&&(T.current=window.setTimeout(()=>D(""),1e3))})(re),H&&setTimeout(()=>H.focus())};x.useEffect(()=>()=>window.clearTimeout(T.current),[]),JE();const W=x.useCallback(U=>{var ve,Z;return X.current===((ve=j.current)==null?void 0:ve.side)&&uge(U,(Z=j.current)==null?void 0:Z.area)},[]);return h.jsx(Kme,{scope:n,searchRef:I,onItemEnter:x.useCallback(U=>{W(U)&&U.preventDefault()},[W]),onItemLeave:x.useCallback(U=>{var re;W(U)||((re=C.current)==null||re.focus(),E(null))},[W]),onTriggerLeave:x.useCallback(U=>{W(U)&&U.preventDefault()},[W]),pointerGraceTimerRef:L,onPointerGraceIntentChange:x.useCallback(U=>{j.current=U},[]),children:h.jsx(K,{...J,children:h.jsx(Jb,{asChild:!0,trapped:r,onMountAutoFocus:ke(s,U=>{var re;U.preventDefault(),(re=C.current)==null||re.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(Tm,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(QD,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:i,currentTabStopId:_,onCurrentTabStopIdChange:E,onEntryFocus:ke(l,U=>{y.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(lA,{role:"menu","aria-orientation":"vertical","data-state":J9(v.open),"data-radix-menu-content":"",dir:y.dir,...b,...m,ref:P,style:{outline:"none",...m.style},onKeyDown:ke(m.onKeyDown,U=>{const ve=U.target.closest("[data-radix-menu-content]")===U.currentTarget,Z=U.ctrlKey||U.altKey||U.metaKey,oe=U.key.length===1;ve&&(U.key==="Tab"&&U.preventDefault(),!Z&&oe&&Q(U.key));const z=C.current;if(U.target!==z||!Fme.includes(U.key))return;U.preventDefault();const H=k().filter(S=>!S.disabled).map(S=>S.ref.current);M9.includes(U.key)&&H.reverse(),oge(H)}),onBlur:ke(t.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(T.current),I.current="")}),onPointerMove:ke(t.onPointerMove,dm(U=>{const re=U.target,ve=$.current!==U.clientX;if(U.currentTarget.contains(re)&&ve){const Z=U.clientX>$.current?"right":"left";X.current=Z,$.current=U.clientX}}))})})})})})})});D9.displayName=ss;var Jme="MenuGroup",WA=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Qe.div,{role:"group",...i,ref:e})});WA.displayName=Jme;var Zme="MenuLabel",j9=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Qe.div,{...i,ref:e})});j9.displayName=Zme;var Fy="MenuItem",oO="menu.itemSelect",xx=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=x.useRef(null),o=Um(Fy,t.__scopeMenu),a=VA(Fy,t.__scopeMenu),l=xt(e,s),c=x.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(oO,{bubbles:!0,cancelable:!0});d.addEventListener(oO,p=>i==null?void 0:i(p),{once:!0}),CC(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return h.jsx(L9,{...r,ref:l,disabled:n,onClick:ke(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:ke(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:ke(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||f_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});xx.displayName=Fy;var L9=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=VA(Fy,n),a=T9(n),l=x.useRef(null),c=xt(e,l),[u,d]=x.useState(!1),[f,p]=x.useState("");return x.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[s.children]),h.jsx(um.ItemSlot,{scope:n,disabled:i,textValue:r??f,children:h.jsx(ej,{asChild:!0,...a,focusable:!i,children:h.jsx(Qe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:c,onPointerMove:ke(t.onPointerMove,dm(g=>{i?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ke(t.onPointerLeave,dm(g=>o.onItemLeave(g))),onFocus:ke(t.onFocus,()=>d(!0)),onBlur:ke(t.onBlur,()=>d(!1))})})})}),Qme="MenuCheckboxItem",B9=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return h.jsx(V9,{scope:t.__scopeMenu,checked:n,children:h.jsx(xx,{role:"menuitemcheckbox","aria-checked":zy(n)?"mixed":n,...r,ref:e,"data-state":KA(n),onSelect:ke(r.onSelect,()=>i==null?void 0:i(zy(n)?!0:!n),{checkForDefaultPrevented:!1})})})});B9.displayName=Qme;var $9="MenuRadioGroup",[ege,tge]=hu($9,{value:void 0,onValueChange:()=>{}}),F9=x.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=Mr(i);return h.jsx(ege,{scope:t.__scopeMenu,value:n,onValueChange:s,children:h.jsx(WA,{...r,ref:e})})});F9.displayName=$9;var z9="MenuRadioItem",U9=x.forwardRef((t,e)=>{const{value:n,...i}=t,r=tge(z9,t.__scopeMenu),s=n===r.value;return h.jsx(V9,{scope:t.__scopeMenu,checked:s,children:h.jsx(xx,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":KA(s),onSelect:ke(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});U9.displayName=z9;var GA="MenuItemIndicator",[V9,nge]=hu(GA,{checked:!1}),H9=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=nge(GA,n);return h.jsx(va,{present:i||zy(s.checked)||s.checked===!0,children:h.jsx(Qe.span,{...r,ref:e,"data-state":KA(s.checked)})})});H9.displayName=GA;var ige="MenuSeparator",W9=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Qe.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});W9.displayName=ige;var rge="MenuArrow",G9=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=FA(n);return h.jsx(cA,{...r,...i,ref:e})});G9.displayName=rge;var sge="MenuSub",[mve,K9]=hu(sge),Ah="MenuSubTrigger",X9=x.forwardRef((t,e)=>{const n=pu(Ah,t.__scopeMenu),i=Um(Ah,t.__scopeMenu),r=K9(Ah,t.__scopeMenu),s=VA(Ah,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(zA,{asChild:!0,...c,children:h.jsx(L9,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":J9(n.open),...t,ref:mb(e,r.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ke(t.onPointerMove,dm(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ke(t.onPointerLeave,dm(d=>{var p,g;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(g=n.content)==null?void 0:g.dataset.side,v=m==="right",y=v?-5:5,b=f[v?"left":"right"],w=f[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:b,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x:b,y:f.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ke(t.onKeyDown,d=>{var p;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||zme[i.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});X9.displayName=Ah;var q9="MenuSubContent",Y9=x.forwardRef((t,e)=>{const n=O9(ss,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=pu(ss,t.__scopeMenu),o=Um(ss,t.__scopeMenu),a=K9(q9,t.__scopeMenu),l=x.useRef(null),c=xt(e,l);return h.jsx(um.Provider,{scope:t.__scopeMenu,children:h.jsx(va,{present:i||s.open,children:h.jsx(um.Slot,{scope:t.__scopeMenu,children:h.jsx(HA,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ke(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ke(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ke(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=Ume[o.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});Y9.displayName=q9;function J9(t){return t?"open":"closed"}function zy(t){return t==="indeterminate"}function KA(t){return zy(t)?"indeterminate":t?"checked":"unchecked"}function oge(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function age(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function lge(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=age(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function cge(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>i!=f>i&&n<(d-c)*(i-u)/(f-u)+c&&(r=!r)}return r}function uge(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return cge(n,e)}function dm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var dge=zA,fge=I9,hge=D9,pge=WA,mge=j9,gge=xx,vge=B9,yge=F9,bge=U9,xge=H9,wge=W9,Sge=G9,kge=X9,_ge=Y9,Z9="DropdownMenu",[Cge,gve]=js(Z9,[R9]),cr=R9(),[vve,Q9]=Cge(Z9),e7="DropdownMenuTrigger",Ege=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=Q9(e7,n),o=cr(n);return h.jsx(dge,{asChild:!0,...o,children:h.jsx(Qe.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:mb(e,s.triggerRef),onPointerDown:ke(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ke(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Ege.displayName=e7;var Age="DropdownMenuPortal",t7=t=>{const{__scopeDropdownMenu:e,...n}=t,i=cr(e);return h.jsx(fge,{...i,...n})};t7.displayName=Age;var n7="DropdownMenuContent",i7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Q9(n7,n),s=cr(n),o=x.useRef(!1);return h.jsx(hge,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:ke(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ke(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});i7.displayName=n7;var Nge="DropdownMenuGroup",Pge=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=cr(n);return h.jsx(pge,{...r,...i,ref:e})});Pge.displayName=Nge;var Mge="DropdownMenuLabel",r7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=cr(n);return h.jsx(mge,{...r,...i,ref:e})});r7.displayName=Mge;var Rge="DropdownMenuItem",s7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=cr(n);return h.jsx(gge,{...r,...i,ref:e})});s7.displayName=Rge;var Tge="DropdownMenuCheckboxItem",o7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=cr(n);return h.jsx(vge,{...r,...i,ref:e})});o7.displayName=Tge;var Oge="DropdownMenuRadioGroup",Ige=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=cr(n);return h.jsx(yge,{...r,...i,ref:e})});Ige.displayName=Oge;var Dge="DropdownMenuRadioItem",a7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=cr(n);return h.jsx(bge,{...r,...i,ref:e})});a7.displayName=Dge;var jge="DropdownMenuItemIndicator",l7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=cr(n);return h.jsx(xge,{...r,...i,ref:e})});l7.displayName=jge;var Lge="DropdownMenuSeparator",c7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=cr(n);return h.jsx(wge,{...r,...i,ref:e})});c7.displayName=Lge;var Bge="DropdownMenuArrow",$ge=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=cr(n);return h.jsx(Sge,{...r,...i,ref:e})});$ge.displayName=Bge;var Fge="DropdownMenuSubTrigger",u7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=cr(n);return h.jsx(kge,{...r,...i,ref:e})});u7.displayName=Fge;var zge="DropdownMenuSubContent",d7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=cr(n);return h.jsx(_ge,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});d7.displayName=zge;var Uge=t7,f7=i7,h7=r7,p7=s7,m7=o7,g7=a7,v7=l7,y7=c7,b7=u7,x7=d7;const Vge=x.forwardRef(({className:t,inset:e,children:n,...i},r)=>h.jsxs(b7,{ref:r,className:ne("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,h.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));Vge.displayName=b7.displayName;const Hge=x.forwardRef(({className:t,...e},n)=>h.jsx(x7,{ref:n,className:ne("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));Hge.displayName=x7.displayName;const Wge=x.forwardRef(({className:t,sideOffset:e=4,...n},i)=>h.jsx(Uge,{children:h.jsx(f7,{ref:i,sideOffset:e,className:ne("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));Wge.displayName=f7.displayName;const Gge=x.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(p7,{ref:i,className:ne("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Gge.displayName=p7.displayName;const Kge=x.forwardRef(({className:t,children:e,checked:n,...i},r)=>h.jsxs(m7,{ref:r,className:ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(v7,{children:h.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));Kge.displayName=m7.displayName;const Xge=x.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(g7,{ref:i,className:ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(v7,{children:h.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));Xge.displayName=g7.displayName;const qge=x.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(h7,{ref:i,className:ne("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));qge.displayName=h7.displayName;const Yge=x.forwardRef(({className:t,...e},n)=>h.jsx(y7,{ref:n,className:ne("-mx-1 my-1 h-px bg-stone-600",t),...e}));Yge.displayName=y7.displayName;const XA=RL("vonsim-program",Nb(gt().language,"editor.example"),void 0,{getOnInit:!0}),w7=()=>{const t=N.get(XA);return typeof t=="string"?t:""},Jge=ci.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(N.set(XA,this.view.state.doc.toString()),N.set(dy,!0))}}),aO=fe(null);fe(t=>t(aO),(t,e,n)=>{e(aO,n)});const Zge=fe("");fe(t=>t(Zge)!==t(XA));const Qge=[{nombre:"Sumador simple",filename:"sumador.asm",contenido:`; Ejemplo: Sumador simple z = x + y
x DB 3
y DB 2
z DB 0
MOV AL, x
ADD AL, y
MOV z, AL
HLT`},{nombre:"Sumar Si Iguales",filename:"sumarsiiguales.asm",contenido:`; Ejemplo: Sumar Si Iguales x = y
x DB 1
y DB 2
z DB 0
         mov al, x
         sub al, y
         jz EsIgual
         jmp Fin
EsIgual: mov dl, x
         add y, dl
Fin:     hlt`},{nombre:"Hola Mundo",filename:"holamundo.asm",contenido:`; Ejemplo: Hola Mundo
cadena db "Hola!"
mov BL, offset cadena
mov AL, 5
int 7
HLT`}],h_=fe(0),lO=fe(null),cO=fe(t=>t(lO),(t,e,n)=>{e(lO,n)}),S7=fe(""),e0e=fe(()=>typeof window<"u"&&window.codemirror?window.codemirror.state.doc.toString():w7()||""),t0e=fe(t=>t(S7)!==t(e0e)),T1="showSaveFilePicker"in window;function n0e(){const[t,e]=ba(),n=st(h_),i=st(cO),r=kp(cO),s=kp(S7),o=st(t0e),a=i&&o;x.useEffect(()=>{if(window.codemirror){const f=()=>{};return window.codemirror.dom.addEventListener("input",f),()=>{window.codemirror.dom.removeEventListener("input",f)}}},[]);const l=x.useCallback(async()=>{if(!T1){Pi({title:"editor.files.unsupported",variant:"error"});return}if(!(a&&!confirm("editor.files.unsaved")))try{const[f]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await f.requestPermission({mode:"readwrite"})==="granted"){r(f);const m=await(await f.getFile()).text();s(m),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:m}})}}catch(f){console.error(f),Pi({title:"editor.files.open-error",variant:"error"})}},[a,r,s]),c=x.useCallback(f=>{a&&!confirm("editor.files.unsaved")||(r(null),s(f.contenido),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:f.contenido}}),Pi({title:`Ejemplo cargado: ${f.nombre}`,variant:"info"}))},[a,r,s]),u=x.useCallback(async()=>{if(!T1){Pi({title:"editor.files.unsupported",variant:"error"});return}if(!i){Pi({title:"No hay archivo abierto para guardar",variant:"error"});return}if(a)try{const f=window.codemirror.state.doc.toString(),p=await i.createWritable({keepExistingData:!1});await p.write(f),await p.close(),s(f),Pi({title:"Archivo guardado",variant:"info"})}catch(f){console.error(f),Pi({title:"editor.files.save-error",variant:"error"})}},[i,a,s]),d=x.useCallback(async()=>{const f=window.codemirror.state.doc.toString(),p=(i==null?void 0:i.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(T1)try{const g=await window.showSaveFilePicker({suggestedName:p,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await g.requestPermission({mode:"readwrite"})==="granted"){r(g);const v=await g.createWritable({keepExistingData:!1});await v.write(f),await v.close(),s(f),Pi({title:"Archivo guardado",variant:"info"})}}catch(g){console.error(g),Pi({title:"editor.files.save-error",variant:"error"})}else{const g=new Blob([f],{type:"text/plain"}),m=URL.createObjectURL(g),v=document.createElement("a");v.style.display="none",v.href=m,v.download=p,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(m)}},[i,r,s]);return h.jsxs("div",{"data-testid":"status-bar",className:"flex items-center justify-between border-t border-stone-700 bg-gradient-to-r from-stone-800 to-stone-900 px-4 py-0.5 font-sans text-xs text-stone-300 shadow-inner",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[i&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium text-white transition-colors",children:i.name}),a&&h.jsx("span",{className:"size-2 rounded-full bg-orange-400"})]}),i&&h.jsx("div",{className:"h-4 w-px bg-stone-600"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(My,{children:[h.jsx(Ry,{asChild:!0,children:h.jsx(_t,{variant:"ghost",size:"sm",className:"hover-lift","aria-label":"editor.files.open",children:h.jsx("span",{className:"icon-[lucide--folder-open] size-4"})})}),h.jsx(rm,{align:"start",className:"w-64 p-2",children:h.jsxs("div",{className:"flex flex-col gap-2 text-left",children:[h.jsxs(_t,{variant:"default",size:"sm",onClick:l,className:"w-full justify-start px-3 text-left text-mantis-400 hover:bg-mantis-900/30",children:[h.jsx("span",{className:"icon-[lucide--laptop] mr-2 size-4 text-mantis-400"}),h.jsx("span",{className:"text-left text-mantis-300",children:"Abrir desde la PC"})]}),h.jsx("div",{className:"my-2 h-px w-full bg-stone-700/60"}),h.jsx("div",{className:"mb-1 pl-1 text-xs text-stone-400",children:"Ejemplos:"}),h.jsx("div",{className:"rounded-lg bg-stone-800/40 p-1",children:Qge.map(f=>h.jsxs(_t,{variant:"ghost",size:"sm",className:"flex w-full items-center px-3 text-yellow-400 hover:bg-yellow-900/30",onClick:()=>c(f),children:[h.jsx("span",{className:"icon-[lucide--file-text] mr-2 size-4 text-yellow-400"}),h.jsx("span",{className:"flex-1 whitespace-normal text-left text-yellow-200",children:f.nombre})]},f.filename))})]})})]}),h.jsx(ts,{content:"editor.files.save",position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:u,disabled:!i||!a,className:"hover-lift","aria-label":"editor.files.save",children:h.jsx("span",{className:"icon-[lucide--save] size-4"})})}),h.jsx(ts,{content:"editor.files.save-as",position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:d,className:"hover-lift","aria-label":"editor.files.save-as",children:h.jsx("span",{className:"icon-[lucide--save-all] size-4"})})})]})]}),h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsxs(My,{children:[h.jsx(Ry,{asChild:!0,children:h.jsx("button",{className:"flex items-center justify-center rounded-lg p-1 text-stone-300 hover:bg-stone-800 focus:outline-none focus:ring-2 focus:ring-mantis-500","aria-label":"Ajustar tamao de fuente del editor",title:"Ajustar tamao de fuente del editor",type:"button",children:h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5"})})}),h.jsxs(rm,{align:"end",className:"w-56 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5 text-mantis-400"}),h.jsx("span",{className:"text-sm font-medium text-white",children:"Tamao de fuente del editor"}),h.jsxs("span",{className:"ml-auto text-xs text-stone-400",children:[t.editorFontSize,"px"]})]}),h.jsx(La,{value:[t.editorFontSize],min:8,max:64,step:1,onValueChange:([f])=>e(p=>({...p,editorFontSize:f})),className:"w-full"}),h.jsxs("div",{className:"mt-2 flex justify-between text-xs text-stone-500",children:[h.jsx("span",{children:"8"}),h.jsx("span",{children:"64"})]})]})]}),h.jsxs("div",{className:ne("flex items-center gap-1.5 rounded-full px-2 py-0.5 font-medium transition-colors",n>0?"border border-red-500/30 bg-red-500/20 text-red-300":"border border-green-500/30 bg-green-500/20 text-green-300"),children:[h.jsx("div",{className:ne("size-2 rounded-full",n>0?"bg-red-400":"bg-green-400")}),h.jsx("span",{className:"font-mono",children:n>0?`${n} error${n>1?"es":""}`:"Sin errores"})]})]})]})}const Vi={character:Je.character,comment:Je.comment,"data-directive":Ln.define(),identifier:Je.variableName,instruction:Ln.define(),label:Je.labelName,number:Je.number,operator:Je.operator,offset:Ln.define(),"ptr-size":Ln.define(),punctuation:Je.punctuation,register:Ln.define(),special:Ln.define(),string:Je.string,unassigned:Ln.define()},i0e=AA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":YC.includes(e)?"data-directive":JC.includes(e)?"instruction":Qv.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Vi}),r0e=_he(px.define([{tag:Vi.character,class:"text-orange-300"},{tag:Vi.comment,class:"text-stone-500 italic"},{tag:Vi["data-directive"],class:"text-rose-400/80"},{tag:Vi.instruction,class:"text-mantis-400"},{tag:Vi.number,class:"text-cyan-300/60"},{tag:Vi.operator,class:"text-rose-300"},{tag:Vi.offset,class:"text-rose-400/80 italic"},{tag:Vi["ptr-size"],class:"text-rose-400/80 italic"},{tag:Vi.punctuation,class:"text-stone-600"},{tag:Vi.register,class:"text-emerald-400/80"},{tag:Vi.special,class:"text-yellow-300/80"},{tag:Vi.string,class:"text-orange-300"},{tag:Vi.unassigned,class:"text-rose-400/80"}])),s0e=Cme(t=>{const e=t.state.doc.toString(),n=VL(e);if(n.success)return N.set(h_,0),[];const i=n,r=gt().language,s=i.errors.map(o=>{var c,u;const a=((c=o.position)==null?void 0:c.start)??0,l=((u=o.position)==null?void 0:u.end)??e.length;return{message:o.translate(r),severity:"error",from:a,to:l}});return N.set(h_,s.length),s},{delay:200});function o0e(){return new ehe(i0e,[r0e,s0e])}function k7({className:t}){const[e,n]=x.useState(),i=YJ(),r=x.useCallback(s=>{s&&n(s)},[]);return x.useEffect(()=>{if(e)return window.codemirror=new je({state:wt.create({doc:w7()||"",extensions:[wt.tabSize.of(2),_6.of(wt.readOnly.of(!1)),Jge,dne(),gne,pne(),Bte(),qhe(),Pte(),je.domEventHandlers({drop:s=>s.preventDefault()}),wt.allowMultipleSelections.of(!0),Hte(),je.updateListener.of(s=>{s.selectionSet}),m6.of([{key:"Escape",run:s=>(s.dispatch({selection:se.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?c_(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...Ime]),o0e()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),h.jsxs("div",{className:ne("flex flex-col rounded-lg border border-stone-700 bg-gradient-to-br from-stone-900 to-stone-800 shadow-xl",t),children:[h.jsx("div",{ref:r,className:"grow overflow-auto rounded-t-lg font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),h.jsx(n0e,{})]})}const _7=x.memo(()=>{const t=KC(),e=gX("(max-width: 640px)");IF(),DF();const n=x.useMemo(()=>({}),[]);return h.jsxs("div",{"data-testid":"app-container",className:"flex h-screen w-screen flex-col bg-black text-white",lang:t,style:n,children:[h.jsx(jF,{}),h.jsx(MF,{"data-testid":"header"}),e?h.jsx(E7,{}):h.jsx(C7,{}),h.jsx(FL,{"data-testid":"footer"}),h.jsx($F,{}),h.jsx(OF,{})]})});_7.displayName="App";const C7=x.memo(()=>{const[t]=bm(cx);return h.jsxs(Rj,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[h.jsx(D0,{id:"panel-editor",order:1,minSize:30,defaultSize:50,tagName:"section",className:"rounded-lg border border-stone-600 bg-black","data-testid":"panel-editor",children:h.jsx(k7,{className:"size-full"})}),h.jsx(l2,{className:"w-2"}),h.jsx(D0,{id:"panel-computer",order:2,minSize:20,defaultSize:50,tagName:"section",className:"computer-background rounded-lg border border-stone-600","data-testid":"panel-computer",children:h.jsx(pz,{})}),t&&h.jsxs(h.Fragment,{children:[h.jsx(l2,{className:"w-2"}),h.jsx(D0,{id:"panel-settings",order:3,minSize:30,defaultSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800","data-testid":"panel-settings",children:h.jsx(NF,{className:"size-full"})})]})]})});C7.displayName="DesktopLayout";const E7=x.memo(()=>{const t=ln(),[e,n]=x.useState("editor"),[i,r]=bm(cx),s=st(Vn),o=x.useMemo(()=>"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),a=x.useMemo(()=>i?"settings":e,[i,e]),l=x.useCallback(u=>{i&&r(!1),n(u)},[i,r]),c=x.useMemo(()=>{switch(a){case"editor":return"Editor";case"computer":return"Computadora";case"settings":return"Configuracin";default:return""}},[a]);return h.jsx(nj,{value:a,onValueChange:l,asChild:!0,children:h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-500",children:"Pestaa:"}),h.jsx("span",{className:"text-sm font-medium text-white",children:c})]}),a==="computer"&&h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-stone-500",children:"Instruccin actual:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:o||h.jsx("span",{className:"italic text-stone-400",children:"Sin instruccin"})})]})]})}),h.jsx(I0,{value:"editor",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-black data-[state=inactive]:hidden","data-testid":"panel-editor",children:h.jsx(k7,{className:"size-full"})})}),h.jsx(I0,{value:"computer",asChild:!0,children:h.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-computer",children:h.jsx(pz,{})})}),h.jsx(I0,{value:"settings",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-settings",children:h.jsx(NF,{className:"size-full"})})}),h.jsx("div",{className:"border-t border-stone-700 bg-stone-900 p-2",children:h.jsxs(rj,{className:"grid grid-cols-3 gap-2",children:[h.jsxs(O0,{value:"editor",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--file-terminal] mb-1 size-5"}),t("control.tabs.editor")]}),h.jsxs(O0,{value:"computer",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--computer] mb-1 size-5"}),t("control.tabs.computer")]}),h.jsxs(O0,{value:"settings",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--settings] mb-1 size-5"}),"Configuracin"]})]})})]})})});E7.displayName="MobileLayout";var qA="ToastProvider",[YA,a0e,l0e]=vm("Toast"),[A7,yve]=js("Toast",[l0e]),[c0e,wx]=A7(qA),N7=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=x.useState(null),[c,u]=x.useState(0),d=x.useRef(!1),f=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${qA}\`. Expected non-empty \`string\`.`),h.jsx(YA.Provider,{scope:e,children:h.jsx(c0e,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:x.useCallback(()=>u(p=>p+1),[]),onToastRemove:x.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};N7.displayName=qA;var P7="ToastViewport",u0e=["F8"],p_="toast.viewportPause",m_="toast.viewportResume",M7=x.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=u0e,label:r="Notifications ({hotkey})",...s}=t,o=wx(P7,n),a=a0e(n),l=x.useRef(null),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=xt(e,d,o.onViewportChange),p=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;x.useEffect(()=>{const v=y=>{var w;i.length!==0&&i.every(k=>y[k]||y.code===k)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[i]),x.useEffect(()=>{const v=l.current,y=d.current;if(g&&v&&y){const b=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(p_);y.dispatchEvent(E),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(m_);y.dispatchEvent(E),o.isClosePausedRef.current=!1}},k=E=>{!v.contains(E.relatedTarget)&&w()},_=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",b),v.addEventListener("focusout",k),v.addEventListener("pointermove",b),v.addEventListener("pointerleave",_),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",b),v.removeEventListener("focusout",k),v.removeEventListener("pointermove",b),v.removeEventListener("pointerleave",_),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const m=x.useCallback(({tabbingDirection:v})=>{const b=a().map(w=>{const k=w.ref.current,_=[k,...k0e(k)];return v==="forwards"?_:_.reverse()});return(v==="forwards"?b.reverse():b).flat()},[a]);return x.useEffect(()=>{const v=d.current;if(v){const y=b=>{var _,E,C;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const P=document.activeElement,T=b.shiftKey;if(b.target===v&&T){(_=c.current)==null||_.focus();return}const j=m({tabbingDirection:T?"backwards":"forwards"}),X=j.findIndex($=>$===P);O1(j.slice(X+1))?b.preventDefault():T?(E=c.current)==null||E.focus():(C=u.current)==null||C.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[a,m]),h.jsxs(Boe,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&h.jsx(g_,{ref:c,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});O1(v)}}),h.jsx(YA.Slot,{scope:n,children:h.jsx(Qe.ol,{tabIndex:-1,...s,ref:f})}),g&&h.jsx(g_,{ref:u,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});O1(v)}})]})});M7.displayName=P7;var R7="ToastFocusProxy",g_=x.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=wx(R7,n);return h.jsx(dA,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});g_.displayName=R7;var Vm="Toast",d0e="toast.swipeStart",f0e="toast.swipeMove",h0e="toast.swipeCancel",p0e="toast.swipeEnd",T7=x.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a,l]=Nl({prop:i,defaultProp:r??!0,onChange:s,caller:Vm});return h.jsx(va,{present:n||a,children:h.jsx(v0e,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Mr(t.onPause),onResume:Mr(t.onResume),onSwipeStart:ke(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ke(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ke(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ke(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});T7.displayName=Vm;var[m0e,g0e]=A7(Vm,{onClose(){}}),v0e=x.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...g}=t,m=wx(Vm,n),[v,y]=x.useState(null),b=xt(e,$=>y($)),w=x.useRef(null),k=x.useRef(null),_=r||m.duration,E=x.useRef(0),C=x.useRef(_),P=x.useRef(0),{onToastAdd:T,onToastRemove:I}=m,L=Mr(()=>{var K;(v==null?void 0:v.contains(document.activeElement))&&((K=m.viewport)==null||K.focus()),o()}),j=x.useCallback($=>{!$||$===1/0||(window.clearTimeout(P.current),E.current=new Date().getTime(),P.current=window.setTimeout(L,$))},[L]);x.useEffect(()=>{const $=m.viewport;if($){const K=()=>{j(C.current),c==null||c()},J=()=>{const Q=new Date().getTime()-E.current;C.current=C.current-Q,window.clearTimeout(P.current),l==null||l()};return $.addEventListener(p_,J),$.addEventListener(m_,K),()=>{$.removeEventListener(p_,J),$.removeEventListener(m_,K)}}},[m.viewport,_,l,c,j]),x.useEffect(()=>{s&&!m.isClosePausedRef.current&&j(_)},[s,_,m.isClosePausedRef,j]),x.useEffect(()=>(T(),()=>I()),[T,I]);const X=x.useMemo(()=>v?$7(v):null,[v]);return m.viewport?h.jsxs(h.Fragment,{children:[X&&h.jsx(y0e,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:X}),h.jsx(m0e,{scope:n,onClose:L,children:Kl.createPortal(h.jsx(YA.ItemSlot,{scope:n,children:h.jsx(Loe,{asChild:!0,onEscapeKeyDown:ke(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||L(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(Qe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ke(t.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:ke(t.onPointerDown,$=>{$.button===0&&(w.current={x:$.clientX,y:$.clientY})}),onPointerMove:ke(t.onPointerMove,$=>{if(!w.current)return;const K=$.clientX-w.current.x,J=$.clientY-w.current.y,Q=!!k.current,W=["left","right"].includes(m.swipeDirection),U=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,re=W?U(0,K):0,ve=W?0:U(0,J),Z=$.pointerType==="touch"?10:2,oe={x:re,y:ve},z={originalEvent:$,delta:oe};Q?(k.current=oe,v0(f0e,d,z,{discrete:!1})):uO(oe,m.swipeDirection,Z)?(k.current=oe,v0(d0e,u,z,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(K)>Z||Math.abs(J)>Z)&&(w.current=null)}),onPointerUp:ke(t.onPointerUp,$=>{const K=k.current,J=$.target;if(J.hasPointerCapture($.pointerId)&&J.releasePointerCapture($.pointerId),k.current=null,w.current=null,K){const Q=$.currentTarget,W={originalEvent:$,delta:K};uO(K,m.swipeDirection,m.swipeThreshold)?v0(p0e,p,W,{discrete:!0}):v0(h0e,f,W,{discrete:!0}),Q.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),y0e=t=>{const{__scopeToast:e,children:n,...i}=t,r=wx(Vm,e),[s,o]=x.useState(!1),[a,l]=x.useState(!1);return w0e(()=>o(!0)),x.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(Im,{asChild:!0,children:h.jsx(dA,{...i,children:s&&h.jsxs(h.Fragment,{children:[r.label," ",n]})})})},b0e="ToastTitle",O7=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Qe.div,{...i,ref:e})});O7.displayName=b0e;var x0e="ToastDescription",I7=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Qe.div,{...i,ref:e})});I7.displayName=x0e;var D7="ToastAction",j7=x.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?h.jsx(B7,{altText:n,asChild:!0,children:h.jsx(JA,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${D7}\`. Expected non-empty \`string\`.`),null)});j7.displayName=D7;var L7="ToastClose",JA=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=g0e(L7,n);return h.jsx(B7,{asChild:!0,children:h.jsx(Qe.button,{type:"button",...i,ref:e,onClick:ke(t.onClick,r.onClose)})})});JA.displayName=L7;var B7=x.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return h.jsx(Qe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function $7(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),S0e(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...$7(i))}}),e}function v0(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?CC(r,s):r.dispatchEvent(s)}var uO=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function w0e(t=()=>{}){const e=Mr(t);li(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function S0e(t){return t.nodeType===t.ELEMENT_NODE}function k0e(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function O1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var _0e=N7,F7=M7,z7=T7,U7=O7,V7=I7,H7=j7,W7=JA;const C0e=_0e,G7=x.forwardRef(({className:t,...e},n)=>h.jsx(F7,{ref:n,className:ne("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));G7.displayName=F7.displayName;const K7=x.forwardRef(({className:t,variant:e="default",...n},i)=>h.jsx(z7,{ref:i,"data-variant":e,className:ne("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));K7.displayName=z7.displayName;const E0e=x.forwardRef(({className:t,...e},n)=>h.jsx(H7,{ref:n,className:ne("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));E0e.displayName=H7.displayName;const X7=x.forwardRef(({className:t,...e},n)=>h.jsx(W7,{ref:n,className:ne("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:h.jsx("span",{className:"block size-4",children:""})}));X7.displayName=W7.displayName;const q7=x.forwardRef(({className:t,...e},n)=>h.jsx(U7,{ref:n,className:ne("text-sm font-semibold",t),...e}));q7.displayName=U7.displayName;const Y7=x.forwardRef(({className:t,...e},n)=>h.jsx(V7,{ref:n,className:ne("text-sm opacity-90",t),...e}));Y7.displayName=V7.displayName;function A0e(){const{toastList:t}=kne();return h.jsxs(C0e,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>h.jsxs(K7,{...o,variant:s,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(q7,{children:n}),i&&h.jsx(Y7,{children:i})]}),r,h.jsx(X7,{})]},e)),h.jsx(G7,{})]})}window.codemirror=null;const N0e=KD(document.getElementById("root"));N0e.render(h.jsx(x.StrictMode,{children:h.jsxs(KH,{client:A6,children:[h.jsx(TL,{children:h.jsx(_7,{})}),h.jsx(A0e,{})]})}));
