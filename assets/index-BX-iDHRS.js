var Iz=Object.defineProperty;var eA=t=>{throw TypeError(t)};var Dz=(t,e,n)=>e in t?Iz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>Dz(t,typeof e!="symbol"?e+"":e,n),$b=(t,e,n)=>e.has(t)||eA("Cannot "+n);var A=(t,e,n)=>($b(t,e,"read from private field"),n?n.call(t):e.get(t)),Ie=(t,e,n)=>e.has(t)?eA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Q=(t,e,n,i)=>($b(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Ct=(t,e,n)=>($b(t,e,"access private method"),n);function Lz(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var jz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pR={exports:{}},ly={},mR={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp=Symbol.for("react.element"),$z=Symbol.for("react.portal"),Fz=Symbol.for("react.fragment"),Bz=Symbol.for("react.strict_mode"),zz=Symbol.for("react.profiler"),Uz=Symbol.for("react.provider"),Vz=Symbol.for("react.context"),Hz=Symbol.for("react.forward_ref"),Wz=Symbol.for("react.suspense"),Gz=Symbol.for("react.memo"),Kz=Symbol.for("react.lazy"),tA=Symbol.iterator;function qz(t){return t===null||typeof t!="object"?null:(t=tA&&t[tA]||t["@@iterator"],typeof t=="function"?t:null)}var gR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vR=Object.assign,yR={};function Ld(t,e,n){this.props=t,this.context=e,this.refs=yR,this.updater=n||gR}Ld.prototype.isReactComponent={};Ld.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ld.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bR(){}bR.prototype=Ld.prototype;function Ck(t,e,n){this.props=t,this.context=e,this.refs=yR,this.updater=n||gR}var Ek=Ck.prototype=new bR;Ek.constructor=Ck;vR(Ek,Ld.prototype);Ek.isPureReactComponent=!0;var nA=Array.isArray,wR=Object.prototype.hasOwnProperty,Ak={current:null},xR={key:!0,ref:!0,__self:!0,__source:!0};function SR(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wR.call(e,i)&&!xR.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Pp,type:t,key:s,ref:o,props:r,_owner:Ak.current}}function Yz(t,e){return{$$typeof:Pp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nk(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pp}function Xz(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iA=/\/+/g;function Fb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xz(""+t.key):e.toString(36)}function Lg(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pp:case $z:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Fb(o,0):i,nA(r)?(n="",t!=null&&(n=t.replace(iA,"$&/")+"/"),Lg(r,e,n,"",function(c){return c})):r!=null&&(Nk(r)&&(r=Yz(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(iA,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",nA(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Fb(s,a);o+=Lg(s,e,n,l,r)}else if(l=qz(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Fb(s,a++),o+=Lg(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cm(t,e,n){if(t==null)return t;var i=[],r=0;return Lg(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Jz(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bi={current:null},jg={transition:null},Zz={ReactCurrentDispatcher:bi,ReactCurrentBatchConfig:jg,ReactCurrentOwner:Ak};function kR(){throw Error("act(...) is not supported in production builds of React.")}st.Children={map:cm,forEach:function(t,e,n){cm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cm(t,function(){e++}),e},toArray:function(t){return cm(t,function(e){return e})||[]},only:function(t){if(!Nk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};st.Component=Ld;st.Fragment=Fz;st.Profiler=zz;st.PureComponent=Ck;st.StrictMode=Bz;st.Suspense=Wz;st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zz;st.act=kR;st.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=vR({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ak.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)wR.call(e,l)&&!xR.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Pp,type:t.type,key:r,ref:s,props:i,_owner:o}};st.createContext=function(t){return t={$$typeof:Vz,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Uz,_context:t},t.Consumer=t};st.createElement=SR;st.createFactory=function(t){var e=SR.bind(null,t);return e.type=t,e};st.createRef=function(){return{current:null}};st.forwardRef=function(t){return{$$typeof:Hz,render:t}};st.isValidElement=Nk;st.lazy=function(t){return{$$typeof:Kz,_payload:{_status:-1,_result:t},_init:Jz}};st.memo=function(t,e){return{$$typeof:Gz,type:t,compare:e===void 0?null:e}};st.startTransition=function(t){var e=jg.transition;jg.transition={};try{t()}finally{jg.transition=e}};st.unstable_act=kR;st.useCallback=function(t,e){return bi.current.useCallback(t,e)};st.useContext=function(t){return bi.current.useContext(t)};st.useDebugValue=function(){};st.useDeferredValue=function(t){return bi.current.useDeferredValue(t)};st.useEffect=function(t,e){return bi.current.useEffect(t,e)};st.useId=function(){return bi.current.useId()};st.useImperativeHandle=function(t,e,n){return bi.current.useImperativeHandle(t,e,n)};st.useInsertionEffect=function(t,e){return bi.current.useInsertionEffect(t,e)};st.useLayoutEffect=function(t,e){return bi.current.useLayoutEffect(t,e)};st.useMemo=function(t,e){return bi.current.useMemo(t,e)};st.useReducer=function(t,e,n){return bi.current.useReducer(t,e,n)};st.useRef=function(t){return bi.current.useRef(t)};st.useState=function(t){return bi.current.useState(t)};st.useSyncExternalStore=function(t,e,n){return bi.current.useSyncExternalStore(t,e,n)};st.useTransition=function(){return bi.current.useTransition()};st.version="18.3.1";mR.exports=st;var x=mR.exports;const Dt=Fc(x),cy=Lz({__proto__:null,default:Dt},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qz=x,e7=Symbol.for("react.element"),t7=Symbol.for("react.fragment"),n7=Object.prototype.hasOwnProperty,i7=Qz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r7={key:!0,ref:!0,__self:!0,__source:!0};function _R(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)n7.call(e,i)&&!r7.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:e7,type:t,key:s,ref:o,props:r,_owner:i7.current}}ly.Fragment=t7;ly.jsx=_R;ly.jsxs=_R;pR.exports=ly;var h=pR.exports,G=typeof window<"u"?window:void 0,Di=typeof globalThis<"u"?globalThis:G,CR=Array.prototype,rA=CR.forEach,sA=CR.indexOf,rr=Di==null?void 0:Di.navigator,Ce=Di==null?void 0:Di.document,Ti=Di==null?void 0:Di.location,q1=Di==null?void 0:Di.fetch,Y1=Di!=null&&Di.XMLHttpRequest&&"withCredentials"in new Di.XMLHttpRequest?Di.XMLHttpRequest:void 0,oA=Di==null?void 0:Di.AbortController,Ni=rr==null?void 0:rr.userAgent,Ue=G??{},ho={DEBUG:!1,LIB_VERSION:"1.256.2"},Bb="$copy_autocapture",s7=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],Eo=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),o7=["fatal","error","warning","log","info","debug"];function rt(t,e){return t.indexOf(e)!==-1}var uy=function(t){return t.trim()},X1=function(t){return t.replace(/^\$/,"")},a7=Array.isArray,ER=Object.prototype,AR=ER.hasOwnProperty,dy=ER.toString,Ut=a7||function(t){return dy.call(t)==="[object Array]"},Rr=t=>typeof t=="function",en=t=>t===Object(t)&&!Ut(t),fu=t=>{if(en(t)){for(var e in t)if(AR.call(t,e))return!1;return!0}return!1},ge=t=>t===void 0,tn=t=>dy.call(t)=="[object String]",J1=t=>tn(t)&&t.trim().length===0,vl=t=>t===null,vt=t=>ge(t)||vl(t),ei=t=>dy.call(t)=="[object Number]",Fs=t=>dy.call(t)==="[object Boolean]",l7=t=>t instanceof FormData,c7=t=>rt(s7,t),NR=t=>{var e={t:function(n){if(G&&(ho.DEBUG||Ue.POSTHOG_DEBUG)&&!ge(G.console)&&G.console){for(var i=("__rrweb_original__"in G.console[n])?G.console[n].__rrweb_original__:G.console[n],r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];i(t,...s)}},info:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("log",...i)},warn:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("warn",...i)},error:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("error",...i)},critical:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console.error(t,...i)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>NR(t+" "+n)};return e},Ae=NR("[PostHog.js]"),On=Ae.createLogger,u7=On("[ExternalScriptsLoader]"),aA=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return u7.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var i=Ce==null?void 0:Ce.querySelectorAll("script");if(i){for(var r=0;r<i.length;r++)if(i[r].src===e)return n()}var s=()=>{if(!Ce)return n("document not found");var o=Ce.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=Ce.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):Ce.body.appendChild(o)};Ce!=null&&Ce.body?s():Ce==null||Ce.addEventListener("DOMContentLoaded",s)};function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xe.apply(null,arguments)}function PR(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}Ue.__PosthogExtensions__=Ue.__PosthogExtensions__||{},Ue.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(i="/array/"+t.config.token+"/config.js"),e==="toolbar"){var r=3e5;i=i+"&t="+Math.floor(Date.now()/r)*r}var s=t.requestRouter.endpointFor("assets",i);aA(t,s,n)},Ue.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);aA(t,i,n)};var _0={};function $a(t,e,n){if(Ut(t)){if(rA&&t.forEach===rA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===_0)return}}}function St(t,e,n){if(!vt(t)){if(Ut(t))return $a(t,e,n);if(l7(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===_0)return}else for(var r in t)if(AR.call(t,r)&&e.call(n,t[r],r)===_0)return}}var sn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return $a(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t},fy=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return $a(n,function(r){$a(r,function(s){t.push(s)})}),t};function $g(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var lA=function(t){try{return t()}catch{return}},d7=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){Ae.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ae.critical(r)}}},Pk=function(t){var e={};return St(t,function(n,i){(tn(n)&&n.length>0||ei(n))&&(e[i]=n)}),e};function f7(t,e){return n=t,i=s=>tn(s)&&!vl(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),Ut(o)?(l=[],$a(o,c=>{l.push(s(c))})):(l={},St(o,(c,u)=>{r.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,i,r}var h7=["herokuapp.com","vercel.app","netlify.app"];function p7(t){var e=t==null?void 0:t.hostname;if(!tn(e))return!1;var n=e.split(".").slice(-2).join(".");for(var i of h7)if(n===i)return!1;return!0}function MR(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function Gt(t,e,n,i){var{capture:r=!1,passive:s=!0}=i??{};t==null||t.addEventListener(e,n,{capture:r,passive:s})}var TR="$people_distinct_id",Cf="__alias",Ef="__timers",cA="$autocapture_disabled_server_side",Z1="$heatmaps_enabled_server_side",uA="$exception_capture_enabled_server_side",Q1="$error_tracking_suppression_rules",dA="$web_vitals_enabled_server_side",RR="$dead_clicks_enabled_server_side",fA="$web_vitals_allowed_metrics",ex="$session_recording_enabled_server_side",hA="$console_log_recording_enabled_server_side",pA="$session_recording_network_payload_capture",mA="$session_recording_masking",gA="$session_recording_canvas_recording",vA="$replay_sample_rate",yA="$replay_minimum_duration",bA="$replay_script_config",C0="$sesid",Af="$session_is_sampled",tx="$session_recording_url_trigger_activated_session",nx="$session_recording_event_trigger_activated_session",hu="$enabled_feature_flags",Fg="$early_access_features",ix="$feature_flag_details",Nf="$stored_person_properties",Hl="$stored_group_properties",rx="$surveys",um="$surveys_activated",E0="$flag_call_reported",lo="$user_state",sx="$client_session_props",ox="$capture_rate_limit",ax="$initial_campaign_params",lx="$initial_referrer_info",A0="$initial_person_info",N0="$epp",OR="__POSTHOG_TOOLBAR__",dm="$posthog_cookieless",m7=[TR,Cf,"__cmpns",Ef,ex,Z1,C0,hu,Q1,lo,Fg,ix,Hl,Nf,rx,E0,sx,ox,ax,lx,N0,A0];function wA(t){return t instanceof Element&&(t.id===OR||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function hy(t){return!!t&&t.nodeType===1}function Fa(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function IR(t){return!!t&&t.nodeType===3}function DR(t){return!!t&&t.nodeType===11}function Mk(t){return t?uy(t).split(/\s+/):[]}function xA(t){var e=G==null?void 0:G.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function P0(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return Mk(e)}function LR(t){return vt(t)?null:uy(t).split(/(\s+)/).filter(e=>rd(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function py(t){var e="";return ux(t)&&!FR(t)&&t.childNodes&&t.childNodes.length&&St(t.childNodes,function(n){var i;IR(n)&&n.textContent&&(e+=(i=LR(n.textContent))!==null&&i!==void 0?i:"")}),uy(e)}function jR(t){return ge(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var cx=["a","button","form","input","select","textarea","label"];function $R(t){var e=t.parentNode;return!(!e||!hy(e))&&e}function g7(t,e,n,i,r){var s,o,a;if(n===void 0&&(n=void 0),!G||!t||Fa(t,"html")||!hy(t)||(s=n)!=null&&s.url_allowlist&&!xA(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&xA(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(v=>e.type===v))return!1}for(var c=!1,u=[t],d=!0,f=t;f.parentNode&&!Fa(f,"body");)if(DR(f.parentNode))u.push(f.parentNode.host),f=f.parentNode.host;else{if(!(d=$R(f)))break;if(i||cx.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var p=G.getComputedStyle(d);p&&p.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(d),f=d}if(!function(v,y){var b=y==null?void 0:y.element_allowlist;if(ge(b))return!0;var w,k=function(E){if(b.some(_=>E.tagName.toLowerCase()===_))return{v:!0}};for(var C of v)if(w=k(C))return w.v;return!1}(u,n)||!function(v,y){var b=y==null?void 0:y.css_selector_allowlist;if(ge(b))return!0;var w,k=function(E){if(b.some(_=>E.matches(_)))return{v:!0}};for(var C of v)if(w=k(C))return w.v;return!1}(u,n))return!1;var m=G.getComputedStyle(t);if(m&&m.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var g=t.tagName.toLowerCase();switch(g){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return c?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(cx.indexOf(g)>-1||t.getAttribute("contenteditable")==="true")}}function ux(t){for(var e=t;e.parentNode&&!Fa(e,"body");e=e.parentNode){var n=P0(e);if(rt(n,"ph-sensitive")||rt(n,"ph-no-capture"))return!1}if(rt(P0(t),"ph-include"))return!0;var i=t.type||"";if(tn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(tn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function FR(t){return!!(Fa(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||Fa(t,"select")||Fa(t,"textarea")||t.getAttribute("contenteditable")==="true")}var BR="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",v7=new RegExp("^(?:"+BR+")$"),y7=new RegExp(BR),zR="\\d{3}-?\\d{2}-?\\d{4}",b7=new RegExp("^("+zR+")$"),w7=new RegExp("("+zR+")");function rd(t,e){return e===void 0&&(e=!0),!(vt(t)||tn(t)&&(t=uy(t),(e?v7:y7).test((t||"").replace(/[- ]/g,""))||(e?b7:w7).test(t)))}function UR(t){var e=py(t);return rd(e=(e+" "+VR(t)).trim())?e:""}function VR(t){var e="";return t&&t.childNodes&&t.childNodes.length&&St(t.childNodes,function(n){var i;if(n&&((i=n.tagName)==null?void 0:i.toLowerCase())==="span")try{var r=py(n);e=(e+" "+r).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+VR(n)).trim())}catch(s){Ae.error("[AutoCapture]",s)}}),e}function x7(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+="."+a.replace(/"/g,"");var l=xe({},i.text?{text:i.text}:{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{},i.attr_id?{attr_id:i.attr_id}:{},i.attributes),c={};return $g(l).sort((u,d)=>{var[f]=u,[p]=d;return f.localeCompare(p)}).forEach(u=>{var[d,f]=u;return c[SA(d.toString())]=SA(f.toString())}),o+=":",o+=$g(c).map(u=>{var[d,f]=u;return d+'="'+f+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)==null?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)==null?void 0:r.slice(0,2048),attr_class:S7(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return $g(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function SA(t){return t.replace(/"|\\"/g,'\\"')}function S7(t){var e=t.attr__class;return e?Ut(e)?e:Mk(e):void 0}let HR=class{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}};var k7=["localhost","127.0.0.1"],sd=t=>{var e=Ce==null?void 0:Ce.createElement("a");return ge(e)?null:(e.href=t,e)},_7=function(t,e){var n,i;e===void 0&&(e="&");var r=[];return St(t,function(s,o){ge(s)||ge(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),i=encodeURIComponent(o),r[r.length]=i+"="+n)}),r.join(e)},M0=function(t,e){for(var n,i=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!Ut(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Ae.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Tk=function(t,e,n){if(!t||!e||!e.length)return t;for(var i=t.split("#"),r=i[0]||"",s=i[1],o=r.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var f=c[d].split("=");Ut(f)&&(e.includes(f[0])?u.push(f[0]+"="+n):u.push(c[d]))}var p=l;return a!=null&&(p+="?"+u.join("&")),s!=null&&(p+="#"+s),p},T0=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},kA=On("[AutoCapture]");function zb(t,e){return e.length>t?e.slice(0,t)+"...":e}function C7(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!hy(e));return e}function E7(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};cx.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=zb(1024,UR(t)):s.$el_text=zb(1024,py(t)));var o=P0(t);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),St(t.attributes,function(u){var d;if((!FR(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(i==null||!i.includes(u.name))&&!e&&rd(u.value)&&(d=u.name,!tn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=u.value;u.name==="class"&&(f=Mk(f).join(" ")),s["attr__"+u.name]=zb(1024,f)}});for(var a=1,l=1,c=t;c=C7(c);)a++,c.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function A7(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!Fa(u,"body");)DR(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,f=[],p={},m=!1,g=!1;if(St(c,k=>{var C=ux(k);k.tagName.toLowerCase()==="a"&&(m=k.getAttribute("href"),m=C&&m&&rd(m)&&m),rt(P0(k),"ph-no-capture")&&(g=!0),f.push(E7(k,s,o,a));var E=function(_){if(!ux(_))return{};var N={};return St(_.attributes,function(M){if(M.name&&M.name.indexOf("data-ph-capture-attribute")===0){var R=M.name.replace("data-ph-capture-attribute-",""),I=M.value;R&&I&&rd(I)&&(N[R]=I)}}),N}(k);sn(p,E)}),g)return{props:{},explicitNoCapture:g};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=UR(t):f[0].$el_text=py(t)),m){var v,y;f[0].attr__href=m;var b=(v=sd(m))==null?void 0:v.host,w=G==null||(y=G.location)==null?void 0:y.host;b&&w&&b!==w&&(d=m)}return{props:sn({$event_type:r.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:x7(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(i=f[0])==null?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},p)}}let N7=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new HR,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,i=en(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)==null?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)==null?void 0:n.map(r=>new RegExp(r)),i}$(){if(this.isBrowserSupported()){if(G&&Ce){var e=i=>{i=i||(G==null?void 0:G.event);try{this.k(i)}catch(r){kA.error("Failed to capture event",r)}};if(Gt(Ce,"submit",e,{capture:!0}),Gt(Ce,"change",e,{capture:!0}),Gt(Ce,"click",e,{capture:!0}),this.S.capture_copied_text){var n=i=>{i=i||(G==null?void 0:G.event),this.k(i,Bb)};Gt(Ce,"copy",n,{capture:!0}),Gt(Ce,"cut",n,{capture:!0})}}}else kA.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[cA]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,i=[];return(n=this.m)==null||n.forEach(r=>{var s=Ce==null?void 0:Ce.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)==null?void 0:e.props[cA],r=this.o;if(vl(r)&&!Fs(i)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var i,r=jR(e);IR(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===Bb;if(r&&g7(r,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=A7(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===Bb){var c,u=LR(G==null||(c=G.getSelection())==null?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Rr(Ce==null?void 0:Ce.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return ei(t)&&isFinite(t)&&Math.floor(t)===t});var _A="0123456789abcdef";let P7=class dx{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new dx(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+_A.charAt(this.bytes[n]>>>4)+_A.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new dx(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},M7=class{constructor(){this.P=0,this.R=0,this.T=new T7}generate(){var e=this.generateOrAbort();if(ge(e)){this.P=0;var n=this.generateOrAbort();if(ge(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return P7.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var CA,WR=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};G&&!ge(G.crypto)&&crypto.getRandomValues&&(WR=t=>crypto.getRandomValues(t));let T7=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(WR(this.C),this.F=0),this.C[this.F++]}};var Ca=()=>R7().toString(),R7=()=>(CA||(CA=new M7)).generate(),Yd="",O7=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function I7(t,e){if(e){var n=function(r,s){if(s===void 0&&(s=Ce),Yd)return Yd;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Ca();!Yd&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",Yd=c)}return Yd}(t);if(!n){var i=(r=>{var s=r.match(O7);return s?s[0]:""})(t);i!==n&&Ae.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var Gs={O:()=>!!Ce,A:function(t){Ae.error("cookieStore error: "+t)},D:function(t){if(Ce){try{for(var e=t+"=",n=Ce.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(Gs.D(t))||{}}catch{}return e},j:function(t,e,n,i,r){if(Ce)try{var s="",o="",a=I7(Ce.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Ae.warn("cookieStore warning: large cookie, len="+c.length),Ce.cookie=c,c}catch{return}},N:function(t,e){try{Gs.j(t,"",-1,e)}catch{return}}},Ub=null,yn={O:function(){if(!vl(Ub))return Ub;var t=!0;if(ge(G))t=!1;else try{var e="__mplssupport__";yn.j(e,"xyz"),yn.D(e)!=='"xyz"'&&(t=!1),yn.N(e)}catch{t=!1}return t||Ae.error("localStorage unsupported; falling back to cookie store"),Ub=t,t},A:function(t){Ae.error("localStorage error: "+t)},D:function(t){try{return G==null?void 0:G.localStorage.getItem(t)}catch(e){yn.A(e)}return null},L:function(t){try{return JSON.parse(yn.D(t))||{}}catch{}return null},j:function(t,e){try{G==null||G.localStorage.setItem(t,JSON.stringify(e))}catch(n){yn.A(n)}},N:function(t){try{G==null||G.localStorage.removeItem(t)}catch(e){yn.A(e)}}},D7=["distinct_id",C0,Af,N0,A0],fm=xe({},yn,{L:function(t){try{var e={};try{e=Gs.L(t)||{}}catch{}var n=sn(e,JSON.parse(yn.D(t)||"{}"));return yn.j(t,n),n}catch{}return null},j:function(t,e,n,i,r,s){try{yn.j(t,e,void 0,void 0,s);var o={};D7.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&Gs.j(t,o,n,i,r,s)}catch(a){yn.A(a)}},N:function(t,e){try{G==null||G.localStorage.removeItem(t),Gs.N(t,e)}catch(n){yn.A(n)}}}),hm={},L7={O:function(){return!0},A:function(t){Ae.error("memoryStorage error: "+t)},D:function(t){return hm[t]||null},L:function(t){return hm[t]||null},j:function(t,e){hm[t]=e},N:function(t){delete hm[t]}},Rl=null,jn={O:function(){if(!vl(Rl))return Rl;if(Rl=!0,ge(G))Rl=!1;else try{var t="__support__";jn.j(t,"xyz"),jn.D(t)!=='"xyz"'&&(Rl=!1),jn.N(t)}catch{Rl=!1}return Rl},A:function(t){Ae.error("sessionStorage error: ",t)},D:function(t){try{return G==null?void 0:G.sessionStorage.getItem(t)}catch(e){jn.A(e)}return null},L:function(t){try{return JSON.parse(jn.D(t))||null}catch{}return null},j:function(t,e){try{G==null||G.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){jn.A(n)}},N:function(t){try{G==null||G.sessionStorage.removeItem(t)}catch(e){jn.A(e)}}},Gc=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let j7=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?Gc.DENIED:this.q}isOptedOut(){return this.consent===Gc.DENIED||this.consent===Gc.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?Gc.GRANTED:e==="0"?Gc.DENIED:Gc.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?yn:Gs;var n=e==="localStorage"?Gs:yn;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!MR([rr==null?void 0:rr.doNotTrack,rr==null?void 0:rr.msDoNotTrack,Ue.doNotTrack],e=>rt([!0,1,"1","yes"],e))}};var pm=On("[Dead Clicks]"),$7=()=>!0,F7=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(RR)),i=t.instance.config.capture_dead_clicks;return Fs(i)?i:n};let GR=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[RR]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,i;(n=Ue.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(i=Ue.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",r=>{r?pm.error("failed to load script",r):e()})}V(){var e;if(Ce){if(!this.G&&(e=Ue.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=en(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=Ue.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(Ce),pm.info("starting...")}}else pm.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,pm.info("stopping..."))}};function sr(t,e,n,i,r){return e>n&&(Ae.warn("min cannot be greater than max."),e=n),ei(t)?t>n?(i&&Ae.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&Ae.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&Ae.warn(i+" must be a number. using max or fallback. max: "+n+", fallback: "+r),sr(r||n,e,n,i))}let KR=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var i=this.X(n)+this.Z;i>=this.tt?delete this.K[n]:this.it(n,i)})},this.X=n=>this.K[String(n)],this.it=(n,i)=>{this.K[String(n)]=i},this.consumeRateLimit=n=>{var i,r=(i=this.X(n))!==null&&i!==void 0?i:this.tt;if((r=Math.max(r-1,0))===0)return!0;this.it(n,r);var s,o=r===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=sr(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=sr(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=sr(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var mm=On("[ExceptionAutocapture]");let B7=class{constructor(e){var n,i,r;this.nt=()=>{var s;if(G&&this.isEnabled&&(s=Ue.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=Ue.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=Ue.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=Ue.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(c){mm.error("failed to start",c),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[uA]),this.S=this.vt(),this.ct=new KR({refillRate:(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&i!==void 0?i:1,bucketSize:(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&r!==void 0?r:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return en(e)?n=xe({},n,e):(ge(e)?this.dt:e)&&(n=xe({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(mm.info("enabled"),this.J(this.nt))}J(e){var n,i;(n=Ue.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(i=Ue.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"exception-autocapture",r=>{if(r)return mm.error("failed to load script",r);e()})}ht(){var e,n,i;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(i=this.ut)==null||i.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[uA]:this.dt}),this.startIfEnabled()}captureException(e){var n,i=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=i+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var r=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(r)?mm.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function qR(t){return!ge(Event)&&YR(t,Event)}function YR(t,e){try{return t instanceof e}catch{return!1}}function XR(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return YR(t,Error)}}function Bg(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function Vb(t){return Bg(t,"DOMError")}var EA=/\(error: (.*)\)/,AA=50,pu="?";function Hb(t,e,n,i){var r={platform:"web:javascript",filename:t,function:e==="<anonymous>"?pu:e,in_app:!0};return ge(n)||(r.lineno=n),ge(i)||(r.colno=i),r}var z7=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,U7=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,V7=/\((\S*)(?::(\d+))(?::(\d+))\)/,H7=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,W7=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,G7=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return function(r,s){s===void 0&&(s=0);for(var o=[],a=r.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=EA.test(c)?c.replace(EA,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of i){var f=d(u);if(f){o.push(f);break}}if(o.length>=AA)break}}}return function(p){if(!p.length)return[];var m=Array.from(p);return m.reverse(),m.slice(0,AA).map(g=>xe({},g,{filename:g.filename||K7(m).filename,function:g.function||pu}))}(o)}}([30,t=>{var e=z7.exec(t);if(e){var[,n,i,r]=e;return Hb(n,pu,+i,+r)}var s=U7.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=V7.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=PA(s[1]||pu,s[2]);return Hb(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=H7.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=W7.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var i=e[3],r=e[1]||pu;return[r,i]=PA(r,i),Hb(i,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function K7(t){return t[t.length-1]||{}}var gm,NA,Wb,PA=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,i=t.indexOf("safari-web-extension")!==-1;return n||i?[t.indexOf("@")!==-1?t.split("@")[0]:pu,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},q7=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function Rk(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",i=function(o){return o&&Y7.test(o.message)?1:0}(t);try{var r=G7,s=function(o,a){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var d=Object.keys(u);return Wb&&d.length===NA||(NA=d.length,Wb=d.reduce((f,p)=>{gm||(gm={});var m=gm[p];if(m)f[m[0]]=m[1];else for(var g=c(p),v=g.length-1;v>=0;v--){var y=g[v],b=y==null?void 0:y.filename,w=u[p];if(b&&w){f[b]=w,gm[p]=[b,w];break}}return f},{})),Wb}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(r(n,i),r);return s.slice(0,s.length-e)}catch{}return[]}var Y7=/Minified React error #\d+;/i;function X7(t,e){var n,i,r=Rk(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)!==null&&i!==void 0&&i;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:r,type:"raw"},mechanism:{handled:s,synthetic:o}}}function JR(t,e){var n=X7(t,e);return t.cause&&XR(t.cause)&&t.cause!==t?[n,...JR(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function Gb(t,e){return{$exception_list:JR(t,e),$exception_level:"error"}}function Kb(t,e){var n,i,r,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(r=e==null?void 0:e.defaultExceptionType)!==null&&r!==void 0?r:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=Rk(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function J7(t){return tn(t)&&!J1(t)&&o7.indexOf(t)>=0}function Z7(t,e){var n,i,r=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:qR(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(u,d){d===void 0&&(d=40);var f=Object.keys(u);if(f.sort(),!f.length)return"[object has no keys]";for(var p=f.length;p>0;p--){var m=f.slice(0,p).join(", ");if(!(m.length>d))return p===f.length||m.length<=d?m:m.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:r,synthetic:s}};if(e!=null&&e.syntheticException){var c=Rk(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:J7(t.level)?t.level:"error"}}function Q7(t,e){var{error:n,event:i}=t,r={$exception_list:[]},s=n||i;if(Vb(s)||function(f){return Bg(f,"DOMException")}(s)){var o=s;if(function(f){return"stack"in f}(s))r=Gb(s,e);else{var a=o.name||(Vb(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;r=Kb(l,xe({},e,{overrideExceptionType:Vb(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(r.$exception_DOMException_code=""+o.code),r}if(function(f){return Bg(f,"ErrorEvent")}(s)&&s.error)return Gb(s.error,e);if(XR(s))return Gb(s,e);if(function(f){return Bg(f,"Object")}(s)||qR(s))return Z7(s,e);if(ge(n)&&tn(i)){var c="Error",u=i,d=i.match(q7);return d&&(c=d[1],u=d[2]),Kb(u,xe({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return Kb(s,e)}function MA(t,e,n){try{if(!(e in t))return()=>{};var i=t[e],r=n(i);return Rr(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=r,()=>{t[e]=i}}catch{return()=>{}}}let eU=class{constructor(e){var n;this._instance=e,this.ft=(G==null||(n=G.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Ae.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Ae.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(G&&G.history){var i=this;(e=G.history.pushState)!=null&&e.__posthog_wrapped__||MA(G.history,"pushState",r=>function(s,o,a){r.call(this,s,o,a),i._t("pushState")}),(n=G.history.replaceState)!=null&&n.__posthog_wrapped__||MA(G.history,"replaceState",r=>function(s,o,a){r.call(this,s,o,a),i._t("replaceState")}),this.bt()}}_t(e){try{var n,i=G==null||(n=G.location)==null?void 0:n.pathname;if(!i)return;i!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=i}catch(r){Ae.error("Error capturing "+e+" pageview",r)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};Gt(G,"popstate",e),this.gt=()=>{G&&G.removeEventListener("popstate",e)}}}};function R0(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(en(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))==null?void 0:e.length)||0}function fx(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[fx({size:R0(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),fx({size:R0(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var co=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(co||{}),Yr=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Yr||{}),hx="[SessionRecording]",px="redacted",vm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},tU=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],nU=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],iU=["/s/","/e/","/i/"];function TA(t,e,n,i){if(vt(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return tn(r)&&(r=parseInt(r)),r>n?hx+" "+i+" body too large to record ("+r+" bytes)":t}function RA(t,e){if(vt(t))return t;var n=t;return rd(n,!1)||(n=hx+" "+e+" body "+px),St(nU,i=>{var r,s;(r=n)!=null&&r.length&&((s=n)==null?void 0:s.indexOf(i))!==-1&&(n=hx+" "+e+" body "+px+" as might contain: "+i)}),n}var rU=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:vm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...vm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...vm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),f=>(f!=null&&f.requestBody&&(f.requestBody=TA(f.requestBody,f.requestHeaders,r,"Request")),f!=null&&f.responseBody&&(f.responseBody=TA(f.responseBody,f.responseHeaders,r,"Response")),f)),u=f=>{return c(((g,v)=>{var y,b=sd(g.name),w=v.indexOf("http")===0?(y=sd(v))==null?void 0:y.pathname:v;w==="/"&&(w="");var k=b==null?void 0:b.pathname.replace(w||"","");if(!(b&&k&&iU.some(C=>k.indexOf(C)===0)))return g})((m=(p=f).requestHeaders,vt(m)||St(Object.keys(m??{}),g=>{tU.includes(g.toLowerCase())&&(m[g]=px)}),p),t.api_host));var p,m},d=Rr(t.session_recording.maskNetworkRequestFn);return d&&Rr(t.session_recording.maskCapturedNetworkRequestFn)&&Ae.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=f=>{var p=t.session_recording.maskNetworkRequestFn({url:f.name});return xe({},f,{name:p==null?void 0:p.url})}),s.maskRequestFn=Rr(t.session_recording.maskCapturedNetworkRequestFn)?f=>{var p,m=u(f);return m&&(p=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(m))!==null&&p!==void 0?p:void 0}:f=>function(p){if(!ge(p))return p.requestBody=RA(p.requestBody,"Request"),p.responseBody=RA(p.responseBody,"Response"),p}(u(f)),xe({},vm,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let sU=class{constructor(e,n){var i,r;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,c,u,d,f,p;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=s.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=s.texts)==null?void 0:d.length)!==null&&u!==void 0?u:0)+((f=(p=s.adds)==null?void 0:p.length)!==null&&f!==void 0?f:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var[u]=this.$t(c.id);return!this.ct.consumeRateLimit(u)&&c}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new KR({bucketSize:(i=this.rt.bucketSize)!==null&&i!==void 0?i:100,refillRate:(r=this.rt.refillRate)!==null&&r!==void 0?r:10,refillInterval:1e3,et:this.wt})}};var Or=Uint8Array,Li=Uint16Array,od=Uint32Array,Ok=new Or([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ik=new Or([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),OA=new Or([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ZR=function(t,e){for(var n=new Li(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new od(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},QR=ZR(Ok,2),oU=QR[0],mx=QR[1];oU[28]=258,mx[258]=28;for(var IA=ZR(Ik,0)[1],eO=new Li(32768),Lt=0;Lt<32768;++Lt){var Ol=(43690&Lt)>>>1|(21845&Lt)<<1;Ol=(61680&(Ol=(52428&Ol)>>>2|(13107&Ol)<<2))>>>4|(3855&Ol)<<4,eO[Lt]=((65280&Ol)>>>8|(255&Ol)<<8)>>>1}var Jf=function(t,e,n){for(var i=t.length,r=0,s=new Li(e);r<i;++r)++s[t[r]-1];var o,a=new Li(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new Li(i),r=0;r<i;++r)o[r]=eO[a[t[r]-1]++]>>>15-t[r];return o},vc=new Or(288);for(Lt=0;Lt<144;++Lt)vc[Lt]=8;for(Lt=144;Lt<256;++Lt)vc[Lt]=9;for(Lt=256;Lt<280;++Lt)vc[Lt]=7;for(Lt=280;Lt<288;++Lt)vc[Lt]=8;var O0=new Or(32);for(Lt=0;Lt<32;++Lt)O0[Lt]=5;var aU=Jf(vc,9),lU=Jf(O0,5),tO=function(t){return(t/8>>0)+(7&t&&1)},nO=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Li?Li:t instanceof od?od:Or)(n-e);return i.set(t.subarray(e,n)),i},oo=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},Xd=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},qb=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Or(0),0];if(r==1){var o=new Or(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(C,E){return C.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var p=new Li(f+1),m=gx(n[u-1],p,0);if(m>e){i=0;var g=0,v=m-e,y=1<<v;for(s.sort(function(C,E){return p[E.s]-p[C.s]||C.f-E.f});i<r;++i){var b=s[i].s;if(!(p[b]>e))break;g+=y-(1<<m-p[b]),p[b]=e}for(g>>>=v;g>0;){var w=s[i].s;p[w]<e?g-=1<<e-p[w]++-1:++i}for(;i>=0&&g;--i){var k=s[i].s;p[k]==e&&(--p[k],++g)}m=e}return[new Or(p),m]},gx=function(t,e,n){return t.s==-1?Math.max(gx(t.l,e,n+1),gx(t.r,e,n+1)):e[t.s]=n},DA=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Li(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},Jd=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},vx=function(t,e,n){var i=n.length,r=tO(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},LA=function(t,e,n,i,r,s,o,a,l,c,u){oo(e,u++,n),++r[256];for(var d=qb(r,15),f=d[0],p=d[1],m=qb(s,15),g=m[0],v=m[1],y=DA(f),b=y[0],w=y[1],k=DA(g),C=k[0],E=k[1],_=new Li(19),N=0;N<b.length;++N)_[31&b[N]]++;for(N=0;N<C.length;++N)_[31&C[N]]++;for(var M=qb(_,7),R=M[0],I=M[1],D=19;D>4&&!R[OA[D-1]];--D);var K,B,W,Y,te=c+5<<3,V=Jd(r,vc)+Jd(s,O0)+o,$=Jd(r,f)+Jd(s,g)+o+14+3*D+Jd(_,R)+(2*_[16]+3*_[17]+7*_[18]);if(te<=V&&te<=$)return vx(e,u,t.subarray(l,l+c));if(oo(e,u,1+($<V)),u+=2,$<V){K=Jf(f,p),B=f,W=Jf(g,v),Y=g;var ie=Jf(R,I);for(oo(e,u,w-257),oo(e,u+5,E-1),oo(e,u+10,D-4),u+=14,N=0;N<D;++N)oo(e,u+3*N,R[OA[N]]);u+=3*D;for(var ke=[b,C],Z=0;Z<2;++Z){var le=ke[Z];for(N=0;N<le.length;++N){var j=31&le[N];oo(e,u,ie[j]),u+=R[j],j>15&&(oo(e,u,le[N]>>>5&127),u+=le[N]>>>12)}}}else K=aU,B=vc,W=lU,Y=O0;for(N=0;N<a;++N)if(i[N]>255){j=i[N]>>>18&31,Xd(e,u,K[j+257]),u+=B[j+257],j>7&&(oo(e,u,i[N]>>>23&31),u+=Ok[j]);var L=31&i[N];Xd(e,u,W[L]),u+=Y[L],L>3&&(Xd(e,u,i[N]>>>5&8191),u+=Ik[L])}else Xd(e,u,K[i[N]]),u+=B[i[N]];return Xd(e,u,K[256]),u+B[256]},cU=new od([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),uU=function(){for(var t=new od(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),dU=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=uU[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},fU=function(t,e,n,i,r){return function(s,o,a,l,c,u){var d=s.length,f=new Or(l+d+5*(1+Math.floor(d/7e3))+c),p=f.subarray(l,f.length-c),m=0;if(!o||d<8)for(var g=0;g<=d;g+=65535){var v=g+65535;v<d?m=vx(p,m,s.subarray(g,v)):(p[g]=u,m=vx(p,m,s.subarray(g,d)))}else{for(var y=cU[o-1],b=y>>>13,w=8191&y,k=(1<<a)-1,C=new Li(32768),E=new Li(k+1),_=Math.ceil(a/3),N=2*_,M=function(Fe){return(s[Fe]^s[Fe+1]<<_^s[Fe+2]<<N)&k},R=new od(25e3),I=new Li(288),D=new Li(32),K=0,B=0,W=(g=0,0),Y=0,te=0;g<d;++g){var V=M(g),$=32767&g,ie=E[V];if(C[$]=ie,E[V]=$,Y<=g){var ke=d-g;if((K>7e3||W>24576)&&ke>423){m=LA(s,p,0,R,I,D,B,W,te,g-te,m),W=K=B=0,te=g;for(var Z=0;Z<286;++Z)I[Z]=0;for(Z=0;Z<30;++Z)D[Z]=0}var le=2,j=0,L=w,U=$-ie&32767;if(ke>2&&V==M(g-U))for(var S=Math.min(b,ke)-1,P=Math.min(32767,g),O=Math.min(258,ke);U<=P&&--L&&$!=ie;){if(s[g+le]==s[g+le-U]){for(var T=0;T<O&&s[g+T]==s[g+T-U];++T);if(T>le){if(le=T,j=U,T>S)break;var q=Math.min(U,T-2),H=0;for(Z=0;Z<q;++Z){var ne=g-U+Z+32768&32767,J=ne-C[ne]+32768&32767;J>H&&(H=J,ie=ne)}}}U+=($=ie)-(ie=C[$])+32768&32767}if(j){R[W++]=268435456|mx[le]<<18|IA[j];var Pe=31&mx[le],Le=31&IA[j];B+=Ok[Pe]+Ik[Le],++I[257+Pe],++D[Le],Y=g+le,++K}else R[W++]=s[g],++I[s[g]]}}m=LA(s,p,u,R,I,D,B,W,te,g-te,m)}return nO(f,0,l+tO(m)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!0)},yx=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},hU=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&yx(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},pU=function(t){return 10+(t.filename&&t.filename.length+1||0)};function iO(t,e){e===void 0&&(e={});var n=dU(),i=t.length;n.p(t);var r=fU(t,e,pU(e),8),s=r.length;return hU(r,e),yx(r,s-8,n.d()),yx(r,s-4,i),r}function rO(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Or(t.length+(t.length>>>1)),r=0,s=function(c){i[r++]=c},o=0;o<n;++o){if(r+5>i.length){var a=new Or(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return nO(i,0,r)}function mU(t,e){return function(n){for(var i=0,r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;return Math.abs(i)}(t)%100<sr(100*e,0,100)}var Za="disabled",Dk="sampled",I0="active",yc="buffering",Lk="paused",jk="trigger",Ks=jk+"_activated",ri=jk+"_pending",eo=jk+"_"+Za;function jA(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class sO{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(i=>i.triggerStatus(e));return n.includes(Ks)?Ks:n.includes(ri)?ri:eo}stop(){this.xt.forEach(e=>e.stop())}}class oO{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var i of this.xt)n.add(i.triggerStatus(e));switch(n.delete(eo),n.size){case 0:return eo;case 1:return Array.from(n)[0];default:return ri}}stop(){this.xt.forEach(e=>e.stop())}}class gU{triggerStatus(){return ri}stop(){}}class vU{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,i;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((i=e.sessionRecording)==null?void 0:i.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?eo:((n=this._instance)==null?void 0:n.get_property(tx))===e?Ks:ri}triggerStatus(e){var n=this.Pt(e),i=n===Ks?Ks:n===ri?ri:eo;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,n,i){if(G!==void 0&&G.location.href){var r=G.location.href,s=this.urlBlocked,o=jA(r,this.It);s&&o||(o&&!s?e():!o&&s&&n(),jA(r,this.Et)&&i("url"))}}stop(){}}class yU{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=ri;return vt(this.linkedFlag)&&(e=eo),this.linkedFlagSeen&&(e=Ks),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var i;if(this.linkedFlag=((i=e.sessionRecording)==null?void 0:i.linkedFlag)||null,!vt(this.linkedFlag)&&!this.linkedFlagSeen){var r=tn(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=tn(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(en(a)&&r in a){var c=a[r];l=Fs(c)?c===!0:s?c===s:!!c}this.linkedFlagSeen=l,l&&n(r,s)})}}stop(){this.Rt()}}let bU=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?eo:((n=this._instance)==null?void 0:n.get_property(nx))===e?Ks:ri}triggerStatus(e){var n=this.Mt(e),i=n===Ks?Ks:n===ri?ri:eo;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}};function wU(t){return t.isRecordingEnabled?yc:Za}function xU(t){if(!t.receivedFlags)return yc;if(!t.isRecordingEnabled)return Za;if(t.urlTriggerMatching.urlBlocked)return Lk;var e=t.isSampled===!0,n=new sO([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?Dk:n===Ks?I0:n===ri?yc:t.isSampled===!1?Za:I0}function SU(t){if(!t.receivedFlags)return yc;if(!t.isRecordingEnabled)return Za;if(t.urlTriggerMatching.urlBlocked)return Lk;var e=new oO([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==eo,i=Fs(t.isSampled);return n&&e===ri?yc:n&&e===eo||i&&!t.isSampled?Za:t.isSampled===!0?Dk:I0}var Pf="[SessionRecording]",Yn=On(Pf);function ym(){var t;return Ue==null||(t=Ue.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var kU=3e5,_U=[Yr.MouseMove,Yr.MouseInteraction,Yr.Scroll,Yr.ViewportResize,Yr.Input,Yr.TouchMove,Yr.MediaInteraction,Yr.Drag],$A=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function Il(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];i+=String.fromCharCode(s)}return i}(iO(rO(JSON.stringify(t))))}function FA(t){return t.type===co.Custom&&t.data.tag==="sessionIdle"}class CU{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(Pf+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===ri?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:kU}get jt(){var e=this._instance.get_property(Af);return Fs(e)?e:null}get Nt(){var e,n,i=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.At.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get zt(){var e=!!this._instance.get_property(ex),n=!this._instance.config.disable_session_recording;return G&&e&&n}get Ut(){var e=!!this._instance.get_property(hA),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,i,r,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(gA),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var f=parseFloat(d);d=isNaN(f)?.4:f}return{enabled:c,fps:sr(u,0,12,"canvas recording fps",4),quality:sr(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,i=this._instance.get_property(pA),r={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=en(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(Fs(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,i,r,s,o,a=this._instance.get_property(mA),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(i=this._instance.config.session_recording)==null?void 0:i.blockSelector},c=(r=l==null?void 0:l.maskAllInputs)!==null&&r!==void 0?r:a==null?void 0:a.maskAllInputs,u=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return ge(c)&&ge(u)&&ge(d)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:d}}get Wt(){var e=this._instance.get_property(vA);return ei(e)?e:null}get Gt(){var e=this._instance.get_property(yA);return ei(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):yc}constructor(e){if(this.Vt=wU,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new gU,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(Ce!=null&&Ce.visibilityState){var r="window "+Ce.visibilityState;this.ui(r,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw Yn.error("started without valid sessionManager"),new Error(Pf+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Pf+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new yU(this._instance),this.Kt=new vU(this._instance),this.Yt=new bU(this._instance);var{sessionId:n,windowId:i}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=i,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&Yn.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),Gt(G,"beforeunload",this.oi),Gt(G,"offline",this.li),Gt(G,"online",this.hi),Gt(G,"visibilitychange",this.di),this.mi(),this.bi(),vt(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var i=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!i)return;this.ui("$pageview",{href:i})}}catch(r){Yn.error("Could not add $pageview to rrweb session",r)}})),this.ei||(this.ei=this.At.onSessionId((n,i,r)=>{var s,o;r&&(this.ui("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(nx),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(tx))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,G==null||G.removeEventListener("beforeunload",this.oi),G==null||G.removeEventListener("offline",this.li),G==null||G.removeEventListener("online",this.hi),G==null||G.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(i=this.ei)==null||i.call(this),this.ei=void 0,(r=this.si)==null||r.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),Yn.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(Af)}$i(e){var n,i=this.Ct!==e,r=this.Wt;if(ei(r)){var s=this.jt,o=i||!Fs(s),a=o?mU(e,r):s;o&&(a?this.ki(Dk):Yn.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:r,isSampled:a})),(n=this._instance.persistence)==null||n.register({[Af]:a})}else this.Si()}onRemoteConfig(e){var n,i,r,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((i=e.sessionRecording)==null?void 0:i.triggerMatchType)==="any"?(this.Vt=xU,this.Lt=new sO([this.Yt,this.Kt])):(this.Vt=SU,this.Lt=new oO([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(r=e.sessionRecording)==null?void 0:r.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){ei(this.Wt)&&vt(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,i=this._instance.persistence,r=()=>{var s,o,a,l,c,u,d,f,p,m=(s=e.sessionRecording)==null?void 0:s.sampleRate,g=vt(m)?null:parseFloat(m);vt(g)&&this.Si();var v=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;i.register({[ex]:!!e.sessionRecording,[hA]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[pA]:xe({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[mA]:(c=e.sessionRecording)==null?void 0:c.masking,[gA]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(f=e.sessionRecording)==null?void 0:f.canvasQuality},[vA]:g,[yA]:ge(v)?null:v,[bA]:(p=e.sessionRecording)==null?void 0:p.scriptConfig})};r(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(r)}}log(e,n){var i;n===void 0&&(n="log"),(i=this._instance.sessionRecording)==null||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!ge(Object.assign)&&!ge(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),ym()?this.Ei():(n=Ue.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,i=>{if(i)return Yn.error("could not load recorder",i);this.Ei()}),Yn.info("starting"),this.status===I0&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(bA))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&_U.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var i=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var r=this.Zt==="unknown";this.Zt=!1,r||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):Yn.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi($A(()=>ym().addCustomEvent(e,n)))}Ci(){return this.Mi($A(()=>ym().takeFullSnapshot()))}Ei(){var e,n,i,r,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=xe({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(i=this.Ht.maskTextSelector)!==null&&i!==void 0?i:void 0,s.blockSelector=(r=this.Ht.blockSelector)!==null&&r!==void 0?r:void 0);var c=ym();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new sU(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,f)=>{var p="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";Yn.info(p,{node:f}),this.log(Pf+" "+p,"warn")}});var u=this.Oi();this.ci=c(xe({emit:d=>{this.onRRwebEmit(d)},plugins:u},s)),this.ti=Date.now(),this.Zt=Fs(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:u.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else Yn.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,i=[],r=(e=Ue.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;r&&this.Ut&&i.push(r());var s=(n=Ue.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&Rr(s)&&(!k7.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(s(rU(this._instance.config,this.Bt))):Yn.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var n;if(this.Ai(),e&&en(e)){if(e.type===co.Meta){var i=this.yi(e.data.href);if(this.Di=i,!i)return;e.data.href=i}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),f=>this.zi(f)),!this.Kt.urlBlocked||(r=e).type===co.Custom&&r.data.tag==="recording paused"){var r;e.type===co.FullSnapshot&&this.Ti(),e.type===co.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===ri&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(f){var p=f;if(p&&en(p)&&p.type===6&&en(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var m=[],g=0;g<p.data.payload.payload.length;g++)p.data.payload.payload[g]&&p.data.payload.payload[g].length>2e3?m.push(p.data.payload.payload[g].slice(0,2e3)+"...[truncated]"):m.push(p.data.payload.payload[g]);return p.data.payload.payload=m,f}return f}(s);if(this.Ri(o),this.Zt!==!0||FA(o)){if(FA(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var u=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(f){if(R0(f)<1024)return f;try{if(f.type===co.FullSnapshot)return xe({},f,{data:Il(f.data),cv:"2024-10"});if(f.type===co.IncrementalSnapshot&&f.data.source===Yr.Mutation)return xe({},f,{cv:"2024-10",data:xe({},f.data,{texts:Il(f.data.texts),attributes:Il(f.data.attributes),removes:Il(f.data.removes),adds:Il(f.data.adds)})});if(f.type===co.IncrementalSnapshot&&f.data.source===Yr.StyleSheetRule)return xe({},f,{cv:"2024-10",data:xe({},f.data,{adds:f.data.adds?Il(f.data.adds):void 0,removes:f.data.removes?Il(f.data.removes):void 0})})}catch(p){Yn.error("could not compress event - will use uncompressed event",p)}return f}(o):o,d={$snapshot_bytes:R0(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==Za?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&G){var e=this.yi(G.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))==null?void 0:i.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,i=ei(n)&&n>=0,r=ei(e)&&i&&n<e;return this.status===yc||this.status===Lk||this.status===Za||r?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&fx(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:ho.LIB_VERSION})}),this.pi())}Ui(e){var n,i=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+i>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===ri&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?tx:nx]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),Yn.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),Yn.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&vt(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){Yn.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[Af]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),Yn.info(e.replace("_"," "),n),rt(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var Yb=On("[SegmentIntegration]");function EU(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var c=()=>l.anonymousId()||Ca();i.config.get_device_id=c,l.id()&&(i.register({distinct_id:l.id(),$device_id:c()}),i.persistence.set_property(lo,"identified")),r()},a=s.user();"then"in a&&Rr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||Yb.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(Yb.info("No userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(Yb.info("UserId set, identifying with PostHog"),i.identify(s.event.userId));var a=i.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}var aO="posthog-js";function lO(t,e){var{organization:n,projectId:i,prefix:r,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,u,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var f=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=f,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((a=o.exception)==null?void 0:a.values)||[],m=p.map(v=>xe({},v,{stacktrace:v.stacktrace?xe({},v.stacktrace,{type:"raw",frames:(v.stacktrace.frames||[]).map(y=>xe({},y,{platform:"web:javascript"}))}):void 0})),g={$exception_message:((l=p[0])==null?void 0:l.value)||o.message,$exception_type:(c=p[0])==null?void 0:c.type,$exception_personURL:f,$exception_level:o.level,$exception_list:m,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&i&&(g.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+o.event_id),t.exceptions.sendExceptionEvent(g),o}}class AU{constructor(e,n,i,r,s){this.name=aO,this.setupOnce=function(o){o(lO(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var NU=G!=null&&G.location?T0(G.location.hash,"__posthog")||T0(location.hash,"state"):null,BA="_postHogToolbarParams",zA=On("[Toolbar]"),aa=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(aa||{});class PU{constructor(e){this.instance=e}Hi(e){Ue.ph_toolbar_state=e}Wi(){var e;return(e=Ue.ph_toolbar_state)!==null&&e!==void 0?e:aa.UNINITIALIZED}maybeLoadToolbar(e,n,i){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),!G||!Ce)return!1;e=e??G.location,i=i??G.history;try{if(!n){try{G.localStorage.setItem("test","test"),G.localStorage.removeItem("test")}catch{return!1}n=G==null?void 0:G.localStorage}var r,s=NU||T0(e.hash,"__posthog")||T0(e.hash,"state"),o=s?lA(()=>JSON.parse(atob(decodeURIComponent(s))))||lA(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((r=o).source="url",r&&Object.keys(r).length>0&&(o.desiredHash?e.hash=o.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(n.getItem(BA)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch{return!1}}Gi(e){var n=Ue.ph_load_toolbar||Ue.ph_load_editor;!vt(n)&&Rr(n)?n(e,this.instance):zA.warn("No toolbar load function found")}loadToolbar(e){var n=!(Ce==null||!Ce.getElementById(OR));if(!G||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=xe({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(G.localStorage.setItem(BA,JSON.stringify(xe({},r,{source:void 0}))),this.Wi()===aa.LOADED)this.Gi(r);else if(this.Wi()===aa.UNINITIALIZED){var s;this.Hi(aa.LOADING),(s=Ue.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return zA.error("[Toolbar] Failed to load",o),void this.Hi(aa.UNINITIALIZED);this.Hi(aa.LOADED),this.Gi(r)}),Gt(G,"turbolinks:load",()=>{this.Hi(aa.UNINITIALIZED),this.loadToolbar(r)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,i){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),this.maybeLoadToolbar(e,n,i)}}var MU=On("[TracingHeaders]");class TU{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,i;ge(this.Vi)&&((n=Ue.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),ge(this.Ki)&&((i=Ue.__PosthogExtensions__)==null||(i=i.tracingHeadersPatchFns)==null||i._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,i;(n=Ue.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(i=Ue.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"tracing-headers",r=>{if(r)return MU.error("failed to load script",r);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var ea=On("[Web Vitals]"),UA=9e5;class RU{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((i,r)=>xe({},i,{["$web_vitals_"+r.name+"_event"]:xe({},r),["$web_vitals_"+r.name+"_value"]:r.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=i=>{var r,s=(r=this._instance.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0);if(ge(s))ea.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();ge(o)||(vt(i==null?void 0:i.name)||vt(i==null?void 0:i.value)?ea.error("Invalid metric received",i):this.ie&&i.value>=this.ie?ea.error("Ignoring metric with value >= "+this.ie,i):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),ge(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=ge(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.C.metrics.push(xe({},i,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var i,r,s,o,a=Ue.__PosthogExtensions__;ge(a)||ge(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):ea.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[dA]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=en(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return ge(i)?((n=this._instance.persistence)==null?void 0:n.props[fA])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(en(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=en(this._instance.config.capture_performance)&&ei(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:UA;return 0<e&&e<=6e4?UA:e}get isEnabled(){var e=Ti==null?void 0:Ti.protocol;if(e!=="http:"&&e!=="https:")return ea.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=en(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Fs(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Fs(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(ea.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=en(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=en(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[dA]:n}),this._instance.persistence.register({[fA]:i})),this.Yi=n,this.startIfEnabled()}J(e){var n,i;(n=Ue.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(i=Ue.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"web-vitals",r=>{r?ea.error("failed to load script",r):e()})}te(){var e=G?G.location.href:void 0;return e||ea.error("Could not determine current URL"),e}}var OU=On("[Heatmaps]");function VA(t){return en(t)&&"clientX"in t&&"clientY"in t&&ei(t.clientX)&&ei(t.clientY)}class IU{constructor(e){var n;this.rageclicks=new HR,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[Z1])}get flushIntervalMilliseconds(){var e=5e3;return en(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return ge(this.instance.config.capture_heatmaps)?ge(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;OU.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Z1]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){G&&Ce&&(Gt(G,"beforeunload",this.se.bind(this)),Gt(Ce,"click",e=>this.ae(e||(G==null?void 0:G.event)),{capture:!0}),Gt(Ce,"mousemove",e=>this.le(e||(G==null?void 0:G.event)),{capture:!0}),this.ne=new GR(this.instance,$7,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&hy(u)&&!Fa(u,"body");){if(u===c)return!1;if(rt(l,G==null?void 0:G.getComputedStyle(u).position))return!0;u=$R(u)}return!1}(jR(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}ae(e,n){var i;if(n===void 0&&(n="click"),!wA(e.target)&&VA(e)){var r=this.ue(e,n);(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(xe({},r,{type:"rageclick"})),this.he(r)}}le(e){!wA(e.target)&&VA(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(G){var n=G.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!fu(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class DU{constructor(e){this._instance=e}doPageView(e,n){var i,r=this.ve(e,n);return this.ce={pathname:(i=G==null?void 0:G.location.pathname)!==null&&i!==void 0?i:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var i=this.ce;if(!i)return{$pageview_id:n};var r={$pageview_id:n,$prev_pageview_id:i.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=s;if(!(ge(o)||ge(a)||ge(l)||ge(c)||ge(u)||ge(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d);var f=o<=1?1:sr(a/o,0,1),p=o<=1?1:sr(l/o,0,1),m=c<=1?1:sr(u/c,0,1),g=c<=1?1:sr(d/c,0,1);r=sn(r,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:m,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:g})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var LU=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),vl(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},jU=!!Y1||!!q1,HA="text/plain",D0=(t,e)=>{var[n,i]=t.split("?"),r=xe({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=_7(r);return n+"?"+(s=s?(i?i+"&":"")+s:i)},Mf=(t,e)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,e),Xb=t=>{var{data:e,compression:n}=t;if(e){if(n===Eo.GZipJS){var i=iO(rO(Mf(e)),{mtime:0}),r=new Blob([i],{type:HA});return{contentType:HA,body:r,estimatedSize:r.size}}if(n===Eo.Base64){var s=function(l){var c,u,d,f,p,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=0,v=0,y="",b=[];if(!l)return l;l=LU(l);do c=(p=l.charCodeAt(g++)<<16|l.charCodeAt(g++)<<8|l.charCodeAt(g++))>>18&63,u=p>>12&63,d=p>>6&63,f=63&p,b[v++]=m.charAt(c)+m.charAt(u)+m.charAt(d)+m.charAt(f);while(g<l.length);switch(y=b.join(""),l.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"="}return y}(Mf(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Mf(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=Mf(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Zf=[];q1&&Zf.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=Xb(t))!==null&&e!==void 0?e:{},o=new Headers;St(t.headers,function(u,d){o.append(d,u)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(oA){var c=new oA;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}q1(a,xe({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var f={statusCode:u.status,text:d};if(u.status===200)try{f.json=JSON.parse(d)}catch(p){Ae.error(p)}t.callback==null||t.callback(f)})).catch(u=>{Ae.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),Y1&&Zf.push({transport:"XHR",method:t=>{var e,n=new Y1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=Xb(t))!==null&&e!==void 0?e:{};St(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(r)}}),rr!=null&&rr.sendBeacon&&Zf.push({transport:"sendBeacon",method:t=>{var e=D0(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=Xb(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;rr.sendBeacon(e,s)}catch{}}});var ad=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function WA(t,e,n){return Mf({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var $U={exact:(t,e)=>e.some(n=>t.some(i=>n===i)),is_not:(t,e)=>e.every(n=>t.every(i=>n!==i)),regex:(t,e)=>e.some(n=>t.some(i=>ad(n,i))),not_regex:(t,e)=>e.every(n=>t.every(i=>!ad(n,i))),icontains:(t,e)=>e.map(bm).some(n=>t.map(bm).some(i=>n.includes(i))),not_icontains:(t,e)=>e.map(bm).every(n=>t.map(bm).every(i=>!n.includes(i)))},bm=t=>t.toLowerCase(),FU=On("[Error tracking]");class BU{constructor(e){var n,i;this.fe=[],this._instance=e,this.fe=(n=(i=this._instance.persistence)==null?void 0:i.get_property(Q1))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,i,r=(n=(i=e.errorTracking)==null?void 0:i.suppressionRules)!==null&&n!==void 0?n:[];this.fe=r,this._instance.persistence&&this._instance.persistence.register({[Q1]:this.fe})}sendExceptionEvent(e){this.pe(e)?FU.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!Ut(n)||n.length===0)return!1;var i=n.reduce((r,s)=>{var{type:o,value:a}=s;return tn(o)&&o.length>0&&r.$exception_types.push(o),tn(a)&&a.length>0&&r.$exception_values.push(a),r},{$exception_types:[],$exception_values:[]});return this.fe.some(r=>{var s=r.values.map(o=>{var a,l=$U[o.operator],c=Ut(o.value)?o.value:[o.value],u=(a=i[o.key])!==null&&a!==void 0?a:[];return c.length>0&&l(c,u)});return r.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var Ir="Mobile",L0="iOS",Bs="Android",_h="Tablet",cO=Bs+" "+_h,uO="iPad",dO="Apple",fO=dO+" Watch",Ch="Safari",ld="BlackBerry",hO="Samsung",pO=hO+"Browser",mO=hO+" Internet",bc="Chrome",zU=bc+" OS",gO=bc+" "+L0,$k="Internet Explorer",vO=$k+" "+Ir,Fk="Opera",UU=Fk+" Mini",Bk="Edge",yO="Microsoft "+Bk,Iu="Firefox",bO=Iu+" "+L0,Eh="Nintendo",Ah="PlayStation",Du="Xbox",wO=Bs+" "+Ir,xO=Ir+" "+Ch,Tf="Windows",bx=Tf+" Phone",GA="Nokia",wx="Ouya",SO="Generic",VU=SO+" "+Ir.toLowerCase(),kO=SO+" "+_h.toLowerCase(),xx="Konqueror",ui="(\\d+(\\.\\d+)?)",Jb=new RegExp("Version/"+ui),HU=new RegExp(Du,"i"),WU=new RegExp(Ah+" \\w+","i"),GU=new RegExp(Eh+" \\w+","i"),zk=new RegExp(ld+"|PlayBook|BB10","i"),KU={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},qU=(t,e)=>e&&rt(e,dO)||function(n){return rt(n,Ch)&&!rt(n,bc)&&!rt(n,Bs)}(t),_O=function(t,e){return e=e||"",rt(t," OPR/")&&rt(t,"Mini")?UU:rt(t," OPR/")?Fk:zk.test(t)?ld:rt(t,"IE"+Ir)||rt(t,"WPDesktop")?vO:rt(t,pO)?mO:rt(t,Bk)||rt(t,"Edg/")?yO:rt(t,"FBIOS")?"Facebook "+Ir:rt(t,"UCWEB")||rt(t,"UCBrowser")?"UC Browser":rt(t,"CriOS")?gO:rt(t,"CrMo")||rt(t,bc)?bc:rt(t,Bs)&&rt(t,Ch)?wO:rt(t,"FxiOS")?bO:rt(t.toLowerCase(),xx.toLowerCase())?xx:qU(t,e)?rt(t,Ir)?xO:Ch:rt(t,Iu)?Iu:rt(t,"MSIE")||rt(t,"Trident/")?$k:rt(t,"Gecko")?Iu:""},YU={[vO]:[new RegExp("rv:"+ui)],[yO]:[new RegExp(Bk+"?\\/"+ui)],[bc]:[new RegExp("("+bc+"|CrMo)\\/"+ui)],[gO]:[new RegExp("CriOS\\/"+ui)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+ui)],[Ch]:[Jb],[xO]:[Jb],[Fk]:[new RegExp("(Opera|OPR)\\/"+ui)],[Iu]:[new RegExp(Iu+"\\/"+ui)],[bO]:[new RegExp("FxiOS\\/"+ui)],[xx]:[new RegExp("Konqueror[:/]?"+ui,"i")],[ld]:[new RegExp(ld+" "+ui),Jb],[wO]:[new RegExp("android\\s"+ui,"i")],[mO]:[new RegExp(pO+"\\/"+ui)],[$k]:[new RegExp("(rv:|MSIE )"+ui)],Mozilla:[new RegExp("rv:"+ui)]},XU=function(t,e){var n=_O(t,e),i=YU[n];if(ge(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},KA=[[new RegExp(Du+"; "+Du+" (.*?)[);]","i"),t=>[Du,t&&t[1]||""]],[new RegExp(Eh,"i"),[Eh,""]],[new RegExp(Ah,"i"),[Ah,""]],[zk,[ld,""]],[new RegExp(Tf,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[bx,""];if(new RegExp(Ir).test(e)&&!/IEMobile\b/.test(e))return[Tf+" "+Ir,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=KU[i]||"";return/arm/i.test(e)&&(r="RT"),[Tf,r]}return[Tf,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[L0,e.join(".")]}return[L0,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=ge(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Bs+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Bs+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Bs,e.join(".")]}return[Bs,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[zU,""]],[/Linux|debian/i,["Linux",""]]],qA=function(t){return GU.test(t)?Eh:WU.test(t)?Ah:HU.test(t)?Du:new RegExp(wx,"i").test(t)?wx:new RegExp("("+bx+"|WPDesktop)","i").test(t)?bx:/iPad/.test(t)?uO:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?fO:zk.test(t)?ld:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(GA,"i").test(t)?GA:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Ir).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Bs:cO:Bs:new RegExp("(pda|"+Ir+")","i").test(t)?VU:new RegExp(_h,"i").test(t)&&!new RegExp(_h+" pc","i").test(t)?kO:""},wm="https?://(.*)",my=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],JU=fy(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],my),Uk="<masked>",ZU=["li_fat_id"];function CO(t,e,n){if(!Ce)return{};var i,r=e?fy([],my,n||[]):[],s=EO(Tk(Ce.URL,r,Uk),t),o=(i={},St(ZU,function(a){var l=Gs.D(a);i[a]=l||null}),i);return sn(o,s)}function EO(t,e){var n=JU.concat(e||[]),i={};return St(n,function(r){var s=M0(t,r);i[r]=s||null}),i}function AO(t){var e=function(s){return s?s.search(wm+"google.([^/?]*)")===0?"google":s.search(wm+"bing.com")===0?"bing":s.search(wm+"yahoo.com")===0?"yahoo":s.search(wm+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",i={};if(!vl(e)){i.$search_engine=e;var r=Ce?M0(Ce.referrer,n):"";r.length&&(i.ph_keyword=r)}return i}function YA(){return navigator.language||navigator.userLanguage}function NO(){return(Ce==null?void 0:Ce.referrer)||"$direct"}function PO(t,e){var n=t?fy([],my,e||[]):[],i=Ti==null?void 0:Ti.href.substring(0,1e3);return{r:NO().substring(0,1e3),u:i?Tk(i,n,Uk):void 0}}function MO(t){var e,{r:n,u:i}=t,r={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=sd(n))==null?void 0:e.host};if(i){r.$current_url=i;var s=sd(i);r.$host=s==null?void 0:s.host,r.$pathname=s==null?void 0:s.pathname;var o=EO(i);sn(r,o)}if(n){var a=AO(n);sn(r,a)}return r}function TO(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function QU(){try{return new Date().getTimezoneOffset()}catch{return}}function eV(t,e){if(!Ni)return{};var n,i,r,s=t?fy([],my,e||[]):[],[o,a]=function(l){for(var c=0;c<KA.length;c++){var[u,d]=KA[c],f=u.exec(l),p=f&&(Rr(d)?d(f,l):d);if(p)return p}return["",""]}(Ni);return sn(Pk({$os:o,$os_version:a,$browser:_O(Ni,navigator.vendor),$device:qA(Ni),$device_type:(i=Ni,r=qA(i),r===uO||r===cO||r==="Kobo"||r==="Kindle Fire"||r===kO?_h:r===Eh||r===Du||r===Ah||r===wx?"Console":r===fO?"Wearable":r?Ir:"Desktop"),$timezone:TO(),$timezone_offset:QU()}),{$current_url:Tk(Ti==null?void 0:Ti.href,s,Uk),$host:Ti==null?void 0:Ti.host,$pathname:Ti==null?void 0:Ti.pathname,$raw_user_agent:Ni.length>1e3?Ni.substring(0,997)+"...":Ni,$browser_version:XU(Ni,navigator.vendor),$browser_language:YA(),$browser_language_prefix:(n=YA(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:G==null?void 0:G.screen.height,$screen_width:G==null?void 0:G.screen.width,$viewport_height:G==null?void 0:G.innerHeight,$viewport_width:G==null?void 0:G.innerWidth,$lib:"web",$lib_version:ho.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var ks=On("[FeatureFlags]"),Zb="$active_feature_flags",Kc="$override_feature_flags",XA="$feature_flag_payloads",Zd="$override_feature_flag_payloads",JA="$feature_flag_request_id",ZA=t=>{var e={};for(var[n,i]of $g(t||{}))i&&(e[n]=i);return e},tV=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var i;return[n,(i=e[n].variant)!==null&&i!==void 0?i:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var i;return(i=e[n].metadata)==null?void 0:i.payload}).map(n=>{var i;return[n,(i=e[n].metadata)==null?void 0:i.payload]}))):ks.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},nV=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),QA=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class iV{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(ix),n=this._instance.get_property(Kc),i=this._instance.get_property(Zd);if(!i&&!n)return e||{};var r=sn({},e||{}),s=[...new Set([...Object.keys(i||{}),...Object.keys(n||{})])];for(var o of s){var a,l,c=r[o],u=n==null?void 0:n[o],d=ge(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,f=ge(u)?c.variant:typeof u=="string"?u:void 0,p=i==null?void 0:i[o],m=xe({},c,{enabled:d,variant:d?f??(c==null?void 0:c.variant):void 0});d!==(c==null?void 0:c.enabled)&&(m.original_enabled=c==null?void 0:c.enabled),f!==(c==null?void 0:c.variant)&&(m.original_variant=c==null?void 0:c.variant),p&&(m.metadata=xe({},c==null?void 0:c.metadata,{payload:p,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),r[o]=m}return this.ge||(ks.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this.ge=!0),r}getFlagVariants(){var e=this._instance.get_property(hu),n=this._instance.get_property(Kc);if(!n)return e||{};for(var i=sn({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(ks.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this.ge=!0),i}getFlagPayloads(){var e=this._instance.get_property(XA),n=this._instance.get_property(Zd);if(!n)return e||{};for(var i=sn({},e||{}),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(ks.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:i}),this.ge=!0),i}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:xe({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(Nf)||{}),group_properties:this._instance.get_property(Hl)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var r=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var c=function(u){for(var d=2166136261,f=0;f<u.length;f++)d^=u.charCodeAt(f),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return QA==null?void 0:QA.has(c)}(this._instance.config.token)?"/decide?v=4":r?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);r&&(i.timezone=TO()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:i,compression:this._instance.config.disable_compression?void 0:Eo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((u=l.json)!==null&&u!==void 0?u:{})),!i.disable_flags||this.ye)if(this.Se=!d,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(nV.FeatureFlags))ks.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var f;i.disable_flags||this.receivedFeatureFlags((f=l.json)!==null&&f!==void 0?f:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,s=this._instance.get_property(JA)||void 0,o=this._instance.get_property(E0)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(r))){var a,l,c,u,d,f,p,m,g;Ut(o[e])?o[e].push(r):o[e]=[r],(a=this._instance.persistence)==null||a.register({[E0]:o});var v=this.getFeatureFlagDetails(e),y={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.Se};ge(v==null||(u=v.metadata)==null?void 0:u.version)||(y.$feature_flag_version=v.metadata.version);var b,w=(d=v==null||(f=v.reason)==null?void 0:f.description)!==null&&d!==void 0?d:v==null||(p=v.reason)==null?void 0:p.code;w&&(y.$feature_flag_reason=w),v!=null&&(m=v.metadata)!=null&&m.id&&(y.$feature_flag_id=v.metadata.id),ge(v==null?void 0:v.original_variant)&&ge(v==null?void 0:v.original_enabled)||(y.$feature_flag_original_response=ge(v.original_variant)?v.original_enabled:v.original_variant),v!=null&&(g=v.metadata)!=null&&g.original_payload&&(y.$feature_flag_original_payload=v==null||(b=v.metadata)==null?void 0:b.original_payload),this._instance.capture("$feature_flag_called",y)}return i}ks.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var i=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:Eo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var s,o=(s=r.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);ks.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var d=tV(o),f=d.flags,p=d.featureFlags,m=d.featureFlagPayloads;if(p){var g=o.requestId;if(Ut(p)){ks.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var v={};if(p)for(var y=0;y<p.length;y++)v[p[y]]=!0;a&&a.register({[Zb]:p,[hu]:v})}else{var b=p,w=m,k=f;o.errorsWhileComputingFlags&&(b=xe({},l,b),w=xe({},c,w),k=xe({},u,k)),a&&a.register(xe({[Zb]:Object.keys(ZA(b)),[hu]:b||{},[XA]:w||{},[ix]:k||{}},g?{[JA]:g}:{}))}}})(e,this._instance.persistence,i,r,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),ks.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return ks.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(Kc),this._instance.persistence.unregister(Zd),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,i=e;if(this.ge=!!((n=i.suppressWarning)!==null&&n!==void 0&&n),"flags"in i){if(i.flags===!1)this._instance.persistence.unregister(Kc);else if(i.flags)if(Ut(i.flags)){for(var r={},s=0;s<i.flags.length;s++)r[i.flags[s]]=!0;this._instance.persistence.register({[Kc]:r})}else this._instance.persistence.register({[Kc]:i.flags})}return"payloads"in i&&(i.payloads===!1?this._instance.persistence.unregister(Zd):i.payloads&&this._instance.persistence.register({[Zd]:i.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:i}=this.Re();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r=(this._instance.get_property(Fg)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};r&&(o.$early_access_feature_name=r.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=xe({},this.getFlagVariants(),{[e]:n});(i=this._instance.persistence)==null||i.register({[Zb]:Object.keys(ZA(a)),[hu]:a}),this.Pe()}getEarlyAccessFeatures(e,n,i){n===void 0&&(n=!1);var r=this._instance.get_property(Fg),s=i?"&"+i.map(o=>"stage="+o).join("&"):"";if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[Fg]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}Pe(e){var{flags:n,flagVariants:i}=this.Re();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(Nf)||{};this._instance.register({[Nf]:xe({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Nf)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(Hl)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=xe({},i[r],e[r]),delete e[r]}),this._instance.register({[Hl]:xe({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(Hl)||{};this._instance.register({[Hl]:xe({},n,{[e]:{}})})}else this._instance.unregister(Hl)}}var rV=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Qb{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Ae.info("Persistence loaded",e.persistence,xe({},this.props)),this.update_config(e,e),this.save()}Ce(e){rV.indexOf(e.persistence.toLowerCase())===-1&&(Ae.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&yn.O()?yn:n==="localstorage+cookie"&&fm.O()?fm:n==="sessionstorage"&&jn.O()?jn:n==="memory"?L7:n==="cookie"?Gs:fm.O()?fm:Gs}properties(){var e={};return St(this.props,function(n,i){if(i===hu&&en(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/"+r[s]]=n[r[s]];else a=i,l=!1,(vl(o=m7)?l:sA&&o.indexOf===sA?o.indexOf(a)!=-1:(St(o,function(c){if(l||(l=c===a))return _0}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=sn({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(en(e)){ge(n)&&(n="None"),this.Oe=ge(i)?this.Le:i;var r=!1;if(St(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(en(e)){this.Oe=ge(n)?this.Le:n;var i=!1;if(St(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=CO(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);fu(Pk(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=Ce==null?void 0:Ce.referrer)?AO(e):{})}update_referrer_info(){var e;this.register_once({$referrer:NO(),$referring_domain:Ce!=null&&Ce.referrer&&((e=sd(Ce.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[ax]||this.props[lx]||this.register_once({[A0]:PO(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};St([lx,ax],o=>{var a=this.props[o];a&&St(a,function(l,c){e["$initial_"+X1(c)]=l})});var n,i,r=this.props[A0];if(r){var s=(n=MO(r),i={},St(n,function(o,a){i["$initial_"+X1(a)]=o}),i);sn(e,s)}return e}safe_merge(e){return St(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.Ce(e),r=this.props;this.clear(),this.B=i,this.props=r,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[Ef]||{};i[e]=n,this.props[Ef]=i,this.save()}remove_event_timer(e){var n=(this.props[Ef]||{})[e];return ge(n)||(delete this.props[Ef][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class RO{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.je[e]||[])i(n);for(var r of this.je["*"]||[])r(e,n)}}class Yl{constructor(e){this.Ne=new RO,this.ze=(n,i)=>this.Ue(n,i)&&this.qe(n,i)&&this.Be(n,i),this.Ue=(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!ge((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!ge((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.He)==null||u.add((c==null?void 0:c.event)||"")})}),(i=this._instance)!=null&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this._instance)==null||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((i=this.We)==null?void 0:i.size)>0&&this.We.forEach(r=>{this.Je(n,r)&&this.Ne.emit("actionCaptured",r.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.ze(e,i))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)==null?void 0:i.$current_url;if(!r||typeof r!="string"||!Yl.Ke(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,i){switch(i){case"regex":return!!G&&ad(e,n);case"exact":return n===e;case"contains":var r=Yl.Ye(n).replace(/_/g,".").replace(/%/g,".*");return ad(e,r);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!Yl.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!Yl.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!Yl.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)==null?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var Nn=On("[Surveys]"),Sx="seenSurvey_",sV=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class oV{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;ge((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.actions)&&((s=i.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new Yl(this._instance),this.er.init(),this.er.Ve(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l;i.conditions&&(r=i.conditions)!=null&&r.actions&&(s=i.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=i.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(i.conditions.actions.values),(l=i.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.Ze.get(c.name);u&&u.push(i.id),this.Ze.set(c.name,u||[i.id])}}))}))}tr(e){var n;e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.events)&&((s=i.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r;(r=i.conditions)==null||(r=r.events)==null||(r=r.values)==null||r.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(i.id),this.Qe.set(s.name,o||[i.id])}})}))}onEvent(e,n){var i,r=((i=this._instance)==null||(i=i.persistence)==null?void 0:i.props[um])||[];if(e==="survey shown"&&n&&r.length>0){var s;Nn.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:r});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=r.indexOf(o);a>=0&&(r.splice(a,1),this.rr(r))}}else this.Qe.has(e)&&(Nn.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(r.concat(this.Qe.get(e)||[])))}onAction(e){var n,i=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[um])||[];this.Ze.has(e)&&this.rr(i.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[um]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[um];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class aV{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(vt(n))return Nn.warn("Flags not loaded yet. Not loading surveys.");var i=Ut(n);this.nr=i?n.length>0:n,Nn.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var i=localStorage.key(n);(i!=null&&i.startsWith(Sx)||i!=null&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(r=>localStorage.removeItem(r))}loadIfEnabled(){if(!this.ar)if(this.ur)Nn.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Nn.info("Disabled. Not loading surveys.");else{var e=Ue==null?void 0:Ue.__PosthogExtensions__;if(e){var n=this.nr;if(!ge(n)){this.ur=!0;try{var i=e.generateSurveys;if(i)return void this.dr(i,n);var r=e.loadExternalDependency;if(!r)return void this.vr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else Nn.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new oV(this._instance),Nn.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){Nn.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return Nn.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(rx);if(i&&!n)return e(i,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var s;this.lr=!1;var o=r.statusCode;if(o!==200||!r.json){var a="Surveys API could not be loaded, status: "+o;return Nn.error(a),e([],{isLoaded:!1,error:a})}var l,c=r.json.surveys||[],u=c.filter(d=>function(f){return!(!f.start_date||f.end_date)}(d)&&(function(f){var p;return!((p=f.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)}(d)||function(f){var p;return!((p=f.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)}(d)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[rx]:c}),e(c,{isLoaded:!0})}})}catch(r){throw this.lr=!1,r}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(i){Nn.error("Error in survey callback",i)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!vt(this.ar))return this.ar.getActiveMatchingSurveys(e,n);Nn.warn("init was not called")}pr(e){var n=null;return this.getSurveys(i=>{var r;n=(r=i.find(s=>s.id===e))!==null&&r!==void 0?r:null}),n}gr(e){if(vt(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(vt(this.ar))return Nn.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return vt(this.ar)?(Nn.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(r=>{var s,o=(s=r.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);i({visible:a.eligible,disabledReason:a.reason})}else i({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(vt(this.ar))Nn.warn("init was not called");else{var i=this.pr(e),r=Ce==null?void 0:Ce.querySelector(n);i?r?this.ar.renderSurvey(i,r):Nn.warn("Survey element not found"):Nn.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var ew=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),eN=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),tN=On("[RateLimiter]");let lV=class{constructor(e){var n,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{tN.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void tN.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)==null?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,i,r;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(i=this.instance.persistence)==null?void 0:i.get_property(ox))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)==null||r.set_property(ox,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var Dl=On("[RemoteConfig]");class cV{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=Ue._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,i;(n=Ue.__PosthogExtensions__)!=null&&n.loadExternalDependency?(i=Ue.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(Dl.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return Dl.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void Dl.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return Dl.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){Dl.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):Dl.info("__preview_remote_config is disabled. Logging config instead",e):Dl.error("Failed to fetch remote config from PostHog.")}}var kx=3e3;class uV{constructor(e,n){this.br=!0,this.yr=[],this.wr=sr((n==null?void 0:n.flush_interval_ms)||kx,250,5e3,"flush interval",kx),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(i=>i.url.indexOf("/e")===0),...n.filter(i=>i.url.indexOf("/e")!==0)].map(i=>{this.Sr(xe({},i,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),i=function(){var s=n[r],o=new Date().getTime();s.data&&Ut(s.data)&&St(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var r in n)i()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return St(this.yr,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;ge(e[s])&&(e[s]=xe({},r,{data:[]})),(i=e[s].data)==null||i.push(r.data)}),this.yr=[],e}}var dV=["retriesPerformedSoFar"];class fV{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!ge(G)&&"onLine"in G.navigator&&(this.Tr=G.navigator.onLine,Gt(G,"online",()=>{this.Tr=!0,this.se()}),Gt(G,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=PR(e,dV);ei(n)&&n>0&&(i.url=D0(i.url,{retry_count:n})),this._instance.Ee(xe({},i,{callback:r=>{r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.Mr(xe({retriesPerformedSoFar:n},i)):i.callback==null||i.callback(r)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),r=Date.now()+i;this.yr.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in "+i;navigator.onLine||(s+=" (Browser is offline)"),Ae.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],i=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(xe({},e,{transport:"sendBeacon"}))}catch(n){Ae.error(n)}this.yr=[]}}class hV{constructor(e){this.Or=()=>{var n,i,r,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(i=this.Ar.maxScrollHeight)!==null&&i!==void 0?i:0),this.Ar.lastContentY=c,this.Ar.maxContentY=Math.max(c,(r=this.Ar.maxContentY)!==null&&r!==void 0?r:0),this.Ar.maxContentHeight=Math.max(u,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){Gt(G,"scroll",this.Or,{capture:!0}),Gt(G,"scrollend",this.Or,{capture:!0}),Gt(G,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return G==null?void 0:G.document.documentElement;var e=Ut(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var i=G==null?void 0:G.document.querySelector(n);if(i)return i}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return G&&(G.scrollY||G.pageYOffset||G.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return G&&(G.scrollX||G.pageXOffset||G.document.documentElement.scrollLeft)||0}}var pV=t=>PO(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class mV{constructor(e,n,i,r){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[sx]:a})}},this._instance=e,this.zr=n,this.Nr=i,this.jr=r||pV,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[sx]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?MO(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return St(Pk(this.getSetOnceProps()),(n,i)=>{i==="$current_url"&&(i="url"),e["$session_entry_"+X1(i)]=n}),e}}var nN=On("[SessionId]");class gV{constructor(e,n,i){var r;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||Ca,this.Br=i||Ca;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*sr(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=jn.L(this.Wr),l=jn.L(this.Gr);a&&!l?this.fi=a:jn.N(this.Wr),jn.j(this.Gr,!0)}if((r=this.S.bootstrap)!=null&&r.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(u){nN.error("Invalid sessionID in bootstrap",u)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return ge(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&jn.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&jn.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?jn.L(this.Wr):null}Vr(e,n,i){e===this.Ct&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[C0]:[n,e,i]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[C0];return Ut(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){Gt(G,"beforeunload",()=>{this.Jr()&&jn.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=n||new Date().getTime(),[r,s,o]=this.Qr(),a=this.Xr(),l=ei(o)&&o>0&&Math.abs(i-o)>864e5,c=!1,u=!s,d=!e&&Math.abs(i-r)>this.sessionTimeoutMs;u||d||l?(s=this.qr(),a=this.Br(),nN.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),o=i,c=!0):a||(a=this.Br(),c=!0);var f=r===0||!e||l?i:r,p=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,f,p),e||this.Hr(),c&&this.Ur.forEach(m=>m(s,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:p,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:r}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var vV=["$set_once","$set"],ta=On("[SiteApps]");class yV{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var i=this.globalsForEvent(n);this.ts.push(i),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=Ue._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,p]of Object.entries(d))c[f]={id:u[f],type:f,properties:p};var{$set_once:m,$set:g}=e;return{event:xe({},PR(e,vV),{properties:xe({},e.properties,g?{$set:xe({},(n=(i=e.properties)==null?void 0:i.$set)!==null&&n!==void 0?n:{},g)}:{},m?{$set_once:xe({},(r=(s=e.properties)==null?void 0:s.$set_once)!==null&&r!==void 0?r:{},m)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],i=()=>{var a;!n.errored&&this.ts.length&&(ta.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},r=!1,s=a=>{n.errored=!a,n.loaded=!0,ta.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),r&&i()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),r=!0}catch(a){ta.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(r&&n.loaded)try{i()}catch(a){ta.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{i.processEvent==null||i.processEvent(n)}catch(r){ta.error("Error while processing event "+e.event+" for site app "+i.id,r)}}}onRemoteConfig(e){var n,i,r,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",c=>this.ns(c))):void ta.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((i=this.rs)==null||i.call(this),(r=e.siteApps)!=null&&r.length)if(this.isEnabled){var o=function(c){var u;Ue["__$$ph_site_app_"+c]=s._instance,(u=Ue.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,d=>{if(d)return ta.error("Error while initializing PostHog app with config id "+c,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else ta.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var bV=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],iN=function(t,e){if(!t)return!1;var n=t.toLowerCase();return bV.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},OO=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&iN(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>iN(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver},Rf=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),rN="i.posthog.com";class wV{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+rN,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Rf.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Rf.EU:this.os[this.apiHost]=Rf.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===Rf.CUSTOM)return this.apiHost+n;var i=rN+n;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var xV={icontains:(t,e)=>!!G&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!G&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!G&&ad(e.href,t),not_regex:(t,e)=>!!G&&!ad(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let SV=class di{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(i){i===void 0&&(i=!1),n.getWebExperiments(r=>{di.ls("retrieved web experiments from the server"),n.us=new Map,r.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(di.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);tn(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];di.ds(c)&&n.hs(s.name,l,c.transforms)}})},i)},this._instance=e,this._instance.onFeatureFlags(i=>{this.onFeatureFlags(i)})}onFeatureFlags(e){if(this._is_bot())di.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(vt(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();di.ls("applying feature flags",e),e.forEach(n=>{var i;if(this.us&&(i=this.us)!=null&&i.has(n)){var r,s=this._instance.getFeatureFlag(n),o=(r=this.us)==null?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=di.getWindowLocation();if(e!=null&&e.search){var n=M0(e==null?void 0:e.search,"__experiment_id"),i=M0(e==null?void 0:e.search,"__experiment_variant");n&&i&&(di.ls("previewing web experiments "+n+" && "+i),this.getWebExperiments(r=>{this.vs(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(di.ls("Previewing web experiment ["+r[0].name+"] with variant ["+n+"]"),this.hs(r[0].name,n,r[0].variants[n].transforms))}static ds(e){return!vt(e.conditions)&&di.cs(e)&&di.fs(e)}static cs(e){var n;if(vt(e.conditions)||vt((n=e.conditions)==null?void 0:n.url))return!0;var i,r,s,o=di.getWindowLocation();return!!o&&((i=e.conditions)==null||!i.url||xV[(r=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return G==null?void 0:G.location}static fs(e){var n;if(vt(e.conditions)||vt((n=e.conditions)==null?void 0:n.utm))return!0;var i=CO();if(i.utm_source){var r,s,o,a,l,c,u,d,f=(r=e.conditions)==null||(r=r.utm)==null||!r.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==i.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==i.utm_source,m=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==i.utm_medium,g=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==i.utm_term;return f&&m&&g&&p}return!1}static ls(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Ae.info("[WebExperiments] "+e,i)}hs(e,n,i){this._is_bot()?di.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(r=>{if(r.selector){var s;di.ls("applying transform of variant "+n+" for experiment "+e+" ",r);var o=(s=document)==null?void 0:s.querySelectorAll(r.selector);o==null||o.forEach(a=>{var l=a;r.html&&(l.innerHTML=r.html),r.css&&l.setAttribute("style",r.css)})}}):di.ls("Control variants leave the page unmodified.")}_is_bot(){return rr&&this._instance?OO(rr,this._instance.config.custom_blocked_useragents):void 0}};var kV=On("[PostHog ExternalIntegrations]"),_V={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let CV=class{constructor(e){this._instance=e}J(e,n){var i;(i=Ue.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,e,r=>{if(r)return kV.error("failed to load script",r);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,c;!r||(a=Ue.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(_V[o],()=>{var u;(u=Ue.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!r&&(l=Ue.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=Ue.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[i,r]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(i)}}};var Qf={},_x=()=>{},su="posthog",IO=!jU&&(Ni==null?void 0:Ni.indexOf("MSIE"))===-1&&(Ni==null?void 0:Ni.indexOf("Mozilla"))===-1,sN=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:p7(Ce==null?void 0:Ce.location),persistence:"localStorage+cookie",persistence_name:"",loaded:_x,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:Ti&&tn(Ti==null?void 0:Ti.search)&&Ti.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(G==null||(e=G.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var i="Bad HTTP status: "+n.statusCode+" "+n.text;Ae.error(i)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:kx},error_tracking:{},_onCapture:_x}},oN=t=>{var e={};ge(t.process_person)||(e.person_profiles=t.process_person),ge(t.xhr_headers)||(e.request_headers=t.xhr_headers),ge(t.cookie_name)||(e.persistence_name=t.cookie_name),ge(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),ge(t.store_google)||(e.save_campaign_params=t.store_google),ge(t.verbose)||(e.debug=t.verbose);var n=sn({},e,t);return Ut(t.property_blacklist)&&(ge(t.property_denylist)?n.property_denylist=t.property_blacklist:Ut(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Ae.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let EV=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Ae.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},DO=class LO{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new EV,this.gs=!1,this.version=ho.LIB_VERSION,this._s=new RO,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=sN(),this.SentryIntegration=AU,this.sentryIntegration=e=>function(n,i){var r=lO(n,i);return{name:aO,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new iV(this),this.toolbar=new PU(this),this.scrollManager=new hV(this),this.pageViewManager=new DU(this),this.surveys=new aV(this),this.experiments=new SV(this),this.exceptions=new BU(this),this.rateLimiter=new lV(this),this.requestRouter=new wV(this),this.consent=new j7(this),this.externalIntegrations=new CV(this),this.people={set:(e,n,i)=>{var r=tn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=tn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>Ae.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,i){if(i&&i!==su){var r,s=(r=Qf[i])!==null&&r!==void 0?r:new LO;return s._init(e,n,i),Qf[i]=s,Qf[su][i]=s,s}return this._init(e,n,i)}_init(e,n,i){var r,s;if(n===void 0&&(n={}),ge(e)||J1(e))return Ae.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ae.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(sn({},sN(n.defaults),oN(n),{name:i,token:e})),this.config.on_xhr_error&&Ae.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:Eo.GZipJS,this.persistence=new Qb(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Qb(xe({},this.config,{persistence:"sessionStorage"}));var o=xe({},this.persistence.props),a=xe({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new uV(y=>this.Es(y),this.config.request_queue_config),this.Is=new fV(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new gV(this),this.sessionPropsManager=new mV(this,this.sessionManager,this.persistence)),new TU(this).startIfEnabledOrStop(),this.siteApps=new yV(this),(r=this.siteApps)==null||r.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new CU(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new N7(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new IU(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new RU(this),this.exceptionObserver=new B7(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new GR(this,F7),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new eU(this),this.historyAutocapture.startIfEnabled(),ho.DEBUG=ho.DEBUG||this.config.debug,ho.DEBUG&&Ae.info("Starting in debug mode",{this:this,config:n,thisC:xe({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,c,u=this.config.get_device_id(Ca()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?u:n.bootstrap.distinctID;this.persistence.set_property(lo,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var f,p,m=Object.keys(((f=n.bootstrap)==null?void 0:f.featureFlags)||{}).filter(y=>{var b;return!((b=n.bootstrap)==null||(b=b.featureFlags)==null||!b[y])}).reduce((y,b)=>{var w;return y[b]=((w=n.bootstrap)==null||(w=w.featureFlags)==null?void 0:w[b])||!1,y},{}),g=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(y=>m[y]).reduce((y,b)=>{var w,k;return(w=n.bootstrap)!=null&&(w=w.featureFlagPayloads)!=null&&w[b]&&(y[b]=(k=n.bootstrap)==null||(k=k.featureFlagPayloads)==null?void 0:k[b]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:m,featureFlagPayloads:g})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:dm,$device_id:null},"");else if(!this.get_distinct_id()){var v=this.config.get_device_id(Ca());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(lo,"anonymous")}return Gt(G,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?EU(this,()=>this.Ts()):this.Ts(),Rr(this.config._onCapture)&&this.config._onCapture!==_x&&(Ae.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this.config.ip&&Ae.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,i,r,s,o,a,l,c;if(!Ce||!Ce.body)return Ae.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=rt(e.supportedCompression,Eo.GZipJS)?Eo.GZipJS:rt(e.supportedCompression,Eo.Base64)?Eo.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(i=this.siteApps)==null||i.onRemoteConfig(e),(r=this.sessionRecording)==null||r.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Ae.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new cV(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||$a(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(IO?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=D0(e.url,{ip:this.config.ip?1:0}),e.headers=xe({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var i,r,s,o=xe({},n);o.timeout=o.timeout||6e4,o.url=D0(o.url,{_:new Date().getTime().toString(),ver:ho.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"fetch",l=(r=(s=MR(Zf,c=>c.transport===a))==null?void 0:s.method)!==null&&r!==void 0?r:Zf[0].method;if(!l)throw new Error("No available transport method");l(o)})(xe({},e,{callback:n=>{var i,r;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((i=(r=this.config).on_request_error)==null||i.call(r,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,i=[],r=[],s=[];$a(e,a=>{a&&(n=a[0],Ut(n)?s.push(a):Rr(a)?a.call(this):Ut(a)&&n==="alias"?i.push(a):Ut(a)&&n.indexOf("capture")!==-1&&Rr(this[n])?s.push(a):r.push(a))});var o=function(a,l){$a(a,function(c){if(Ut(c[0])){var u=l;St(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(i,this),o(r,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!ge(e)&&tn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!tn(n==null?void 0:n.$current_url)&&(Ae.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l=Ca(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(c.$set=i==null?void 0:i.$set);var u,d,f=this.Os(i==null?void 0:i.$set_once);if(f&&(c.$set_once=f),(c=f7(c,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,ge(i==null?void 0:i.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o),e===ew.DISMISSED||e===ew.SENT){var p=n==null?void 0:n[eN.SURVEY_ID],m=n==null?void 0:n[eN.SURVEY_ITERATION];localStorage.setItem((d=""+Sx+(u={id:p,current_iteration:m}).id,u.current_iteration&&u.current_iteration>0&&(d=""+Sx+u.id+"_"+u.current_iteration),d),"true"),c.$set=xe({},c.$set,{[sV({id:p,current_iteration:m},e===ew.SENT?"responded":"dismissed")]:!0})}var g=xe({},c.properties.$set,c.$set);if(fu(g)||this.setPersonPropertiesForFlags(g),!vt(this.config.before_send)){var v=this.As(c);if(!v)return;c=v}this._s.emit("eventCaptured",c);var y={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this.Es(y):this.xs.enqueue(y),c}Ae.critical("This capture call is ignored due to client rate limiting.")}}else Ae.error("No event name provided to posthog.capture")}else Ae.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,i,r,s){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=xe({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=xe({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!tn(a.distinct_id)&&!ei(a.distinct_id)||J1(a.distinct_id))&&Ae.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=eV(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,i.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&sn(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&sn(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.Is)==null?void 0:p.length}catch(y){a.$sdk_debug_error_capturing_properties=String(y)}if(this.requestRouter.region===Rf.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,r),a=sn(a,c),e==="$pageview"&&Ce&&(a.title=Ce.title),!ge(o)){var m=i.getTime()-o;a.$duration=parseFloat((m/1e3).toFixed(3))}Ni&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=sn({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),Ut(this.config.property_denylist)?St(this.config.property_denylist,function(y){delete a[y]}):Ae.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var g=this.config.sanitize_properties;g&&(Ae.error("sanitize_properties is deprecated. Use before_send instead"),a=g(a,e));var v=this.Ds();return a.$process_person_profile=v,v&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var i=this.persistence.get_initial_props(),r=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=sn({},i,r||{},e||{}),o=this.config.sanitize_properties;return o&&(Ae.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,fu(s)?void 0:s}register(e,n){var i;(i=this.persistence)==null||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)==null||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,i){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,i)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)==null?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,i){if(!this.__loaded||!this.persistence)return Ae.uninitializedWarning("posthog.identify");if(ei(e)&&(e=e.toString(),Ae.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Ae.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==dm){if(this.Ls("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(Cf)&&(this.unregister(Cf),this.register({distinct_id:e}));var o=(this.persistence.get_property(lo)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(lo,"identified"),this.setPersonPropertiesForFlags(xe({},i||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.Ss=WA(e,n,i),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(E0))}}else Ae.critical('The string "'+dm+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Ae.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var i=WA(this.get_distinct_id(),e,n);this.Ss!==i?(this.setPersonPropertiesForFlags(xe({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=i):Ae.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,i){if(e&&n){if(this.Ls("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:xe({},r,{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else Ae.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s;if(Ae.info("reset"),!this.__loaded)return Ae.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(i=this.sessionPersistence)==null||i.clear(),this.surveys.reset(),(r=this.persistence)==null||r.set_property(lo,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:dm,$device_id:null},"");else{var a=this.config.get_device_id(Ca());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;r+="?t="+Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0)}return r}alias(e,n){return e===this.get_property(TR)?(Ae.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(ge(n)&&(n=this.get_distinct_id()),e!==n?(this.js(Cf,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Ae.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o,a=xe({},this.config);en(e)&&(sn(this.config,oN(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Qb(xe({},this.config,{persistence:"sessionStorage"})),yn.O()&&yn.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(ho.DEBUG=!0,Ae.info("set_config",{config:e,oldConfig:a,newConfig:xe({},this.config)})),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(r=this.autocapture)==null||r.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)==null||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var i=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(xe({},Q7((r=>r instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:i}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:su;return n!==su&&(n=su+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(lo))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(lo))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&fu(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Cf])&&((n=this.persistence)==null||(n=n.props)==null||!n[N0]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Ae.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(N0,!0),!0)}Ps(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((i=this.persistence)==null||i.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((r=this.sessionPersistence)==null||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(ge(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return rr?OO(rr,this.config.custom_blocked_useragents):void 0}Cs(){Ce&&(Ce.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:Ce.title},{send_instantly:!0}),this.ys&&(Ce.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),Gt(Ce,"visibilitychange",this.ys)))}debug(e){e===!1?(G==null||G.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(G==null||G.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,i,r,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Ae.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(i="advanced_disable_decide",r=!1,s=Ae,o=(n="advanced_disable_flags")in(e=l)&&!ge(e[n]),a=i in e&&!ge(e[i]),o?e[n]:a?(s&&s.warn("Config field '"+i+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[i]):r)}As(e){if(vt(this.config.before_send))return e;var n=Ut(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),vt(i)){var s="Event '"+e.event+"' was rejected in beforeSend function";return c7(e.event)?Ae.warn(s+". This can cause unexpected behavior."):Ae.info(s),null}i.properties&&!fu(i.properties)||Ae.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(i)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=d7(t.prototype[e[n]])})(DO,["identify"]);var aN,va=(aN=Qf[su]=new DO,function(){function t(){t.done||(t.done=!0,IO=!1,St(Qf,function(e){e._dom_loaded()}))}Ce!=null&&Ce.addEventListener?Ce.readyState==="complete"?t():Gt(Ce,"DOMContentLoaded",t,{capture:!1}):G&&Ae.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),aN),jO=x.createContext({client:va});function $O(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!r.includes(a)||!$O(t[a],e[a],n))return!1}return!0}function AV(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=x.useRef(null),o=x.useMemo(function(){return n?(i&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),r&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(i||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),va)},[n,i,JSON.stringify(r)]);return x.useEffect(function(){if(!n){var a=s.current;a?(i!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),r&&!$O(r,a.options)&&va.set_config(r),s.current={apiKey:i,options:r??{}}):(va.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),va.init(i,r),s.current={apiKey:i,options:r??{}})}},[n,i,JSON.stringify(r)]),Dt.createElement(jO.Provider,{value:{client:o}},e)}var Cx=function(t,e){return Cx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},Cx(t,e)};function NV(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Cx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var tw=function(t){return typeof t=="function"},PV={componentStack:null,error:null},MV={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){NV(e,t);function e(n){var i=t.call(this,n)||this;return i.state=PV,i}return e.prototype.componentDidCatch=function(n,i){var r=i.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:r});var o;tw(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,i=n.children,r=n.fallback,s=this.state;if(s.componentStack==null)return tw(i)?i():i;var o=tw(r)?Dt.createElement(r,{error:s.error,componentStack:s.componentStack}):r;return Dt.isValidElement(o)?o:(console.warn(MV.INVALID_FALLBACK),Dt.createElement(Dt.Fragment,null))},e.contextType=jO,e})(Dt.Component);var FO={exports:{}},mr={},BO={exports:{}},zO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,$){var ie=V.length;V.push($);e:for(;0<ie;){var ke=ie-1>>>1,Z=V[ke];if(0<r(Z,$))V[ke]=$,V[ie]=Z,ie=ke;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var $=V[0],ie=V.pop();if(ie!==$){V[0]=ie;e:for(var ke=0,Z=V.length,le=Z>>>1;ke<le;){var j=2*(ke+1)-1,L=V[j],U=j+1,S=V[U];if(0>r(L,ie))U<Z&&0>r(S,L)?(V[ke]=S,V[U]=ie,ke=U):(V[ke]=L,V[j]=ie,ke=j);else if(U<Z&&0>r(S,ie))V[ke]=S,V[U]=ie,ke=U;else break e}}return $}function r(V,$){var ie=V.sortIndex-$.sortIndex;return ie!==0?ie:V.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var $=n(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=V)i(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function k(V){if(g=!1,w(V),!m)if(n(l)!==null)m=!0,Y(C);else{var $=n(c);$!==null&&te(k,$.startTime-V)}}function C(V,$){m=!1,g&&(g=!1,y(N),N=-1),p=!0;var ie=f;try{for(w($),d=n(l);d!==null&&(!(d.expirationTime>$)||V&&!I());){var ke=d.callback;if(typeof ke=="function"){d.callback=null,f=d.priorityLevel;var Z=ke(d.expirationTime<=$);$=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),w($)}else i(l);d=n(l)}if(d!==null)var le=!0;else{var j=n(c);j!==null&&te(k,j.startTime-$),le=!1}return le}finally{d=null,f=ie,p=!1}}var E=!1,_=null,N=-1,M=5,R=-1;function I(){return!(t.unstable_now()-R<M)}function D(){if(_!==null){var V=t.unstable_now();R=V;var $=!0;try{$=_(!0,V)}finally{$?K():(E=!1,_=null)}}else E=!1}var K;if(typeof b=="function")K=function(){b(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,W=B.port2;B.port1.onmessage=D,K=function(){W.postMessage(null)}}else K=function(){v(D,0)};function Y(V){_=V,E||(E=!0,K())}function te(V,$){N=v(function(){V(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,Y(C))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var ie=f;f=$;try{return V()}finally{f=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,$){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ie=f;f=V;try{return $()}finally{f=ie}},t.unstable_scheduleCallback=function(V,$,ie){var ke=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ke+ie:ke):ie=ke,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ie+Z,V={id:u++,callback:$,priorityLevel:V,startTime:ie,expirationTime:Z,sortIndex:-1},ie>ke?(V.sortIndex=ie,e(c,V),n(l)===null&&V===n(c)&&(g?(y(N),N=-1):g=!0,te(k,ie-ke))):(V.sortIndex=Z,e(l,V),m||p||(m=!0,Y(C))),V},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(V){var $=f;return function(){var ie=f;f=$;try{return V.apply(this,arguments)}finally{f=ie}}}})(zO);BO.exports=zO;var TV=BO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RV=x,fr=TV;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UO=new Set,Nh={};function Bc(t,e){cd(t,e),cd(t+"Capture",e)}function cd(t,e){for(Nh[t]=e,t=0;t<e.length;t++)UO.add(e[t])}var Do=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ex=Object.prototype.hasOwnProperty,OV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lN={},cN={};function IV(t){return Ex.call(cN,t)?!0:Ex.call(lN,t)?!1:OV.test(t)?cN[t]=!0:(lN[t]=!0,!1)}function DV(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function LV(t,e,n,i){if(e===null||typeof e>"u"||DV(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wi(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gn[t]=new wi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gn[e]=new wi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gn[t]=new wi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gn[t]=new wi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gn[t]=new wi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gn[t]=new wi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gn[t]=new wi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gn[t]=new wi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gn[t]=new wi(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vk=/[\-:]([a-z])/g;function Hk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vk,Hk);Gn[e]=new wi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vk,Hk);Gn[e]=new wi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vk,Hk);Gn[e]=new wi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gn[t]=new wi(t,1,!1,t.toLowerCase(),null,!1,!1)});Gn.xlinkHref=new wi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gn[t]=new wi(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wk(t,e,n,i){var r=Gn.hasOwnProperty(e)?Gn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(LV(e,n,r,i)&&(n=null),i||r===null?IV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Go=RV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xm=Symbol.for("react.element"),mu=Symbol.for("react.portal"),gu=Symbol.for("react.fragment"),Gk=Symbol.for("react.strict_mode"),Ax=Symbol.for("react.profiler"),VO=Symbol.for("react.provider"),HO=Symbol.for("react.context"),Kk=Symbol.for("react.forward_ref"),Nx=Symbol.for("react.suspense"),Px=Symbol.for("react.suspense_list"),qk=Symbol.for("react.memo"),ca=Symbol.for("react.lazy"),WO=Symbol.for("react.offscreen"),uN=Symbol.iterator;function Qd(t){return t===null||typeof t!="object"?null:(t=uN&&t[uN]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,nw;function Of(t){if(nw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nw=e&&e[1]||""}return`
`+nw+t}var iw=!1;function rw(t,e){if(!t||iw)return"";iw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{iw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Of(t):""}function jV(t){switch(t.tag){case 5:return Of(t.type);case 16:return Of("Lazy");case 13:return Of("Suspense");case 19:return Of("SuspenseList");case 0:case 2:case 15:return t=rw(t.type,!1),t;case 11:return t=rw(t.type.render,!1),t;case 1:return t=rw(t.type,!0),t;default:return""}}function Mx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gu:return"Fragment";case mu:return"Portal";case Ax:return"Profiler";case Gk:return"StrictMode";case Nx:return"Suspense";case Px:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case HO:return(t.displayName||"Context")+".Consumer";case VO:return(t._context.displayName||"Context")+".Provider";case Kk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qk:return e=t.displayName||null,e!==null?e:Mx(t.type)||"Memo";case ca:e=t._payload,t=t._init;try{return Mx(t(e))}catch{}}return null}function $V(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mx(e);case 8:return e===Gk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function GO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FV(t){var e=GO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sm(t){t._valueTracker||(t._valueTracker=FV(t))}function KO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=GO(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function j0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tx(t,e){var n=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dN(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Qa(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qO(t,e){e=e.checked,e!=null&&Wk(t,"checked",e,!1)}function Rx(t,e){qO(t,e);var n=Qa(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ox(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ox(t,e.type,Qa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ox(t,e,n){(e!=="number"||j0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var If=Array.isArray;function Lu(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Qa(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Ix(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(If(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qa(n)}}function YO(t,e){var n=Qa(e.value),i=Qa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function pN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function XO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?XO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var km,JO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(km=km||document.createElement("div"),km.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=km.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ph(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BV=["Webkit","ms","Moz","O"];Object.keys(eh).forEach(function(t){BV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eh[e]=eh[t]})});function ZO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||eh.hasOwnProperty(t)&&eh[t]?(""+e).trim():e+"px"}function QO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=ZO(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var zV=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lx(t,e){if(e){if(zV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function jx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $x=null;function Yk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fx=null,ju=null,$u=null;function mN(t){if(t=Rp(t)){if(typeof Fx!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=wy(e),Fx(t.stateNode,t.type,e))}}function eI(t){ju?$u?$u.push(t):$u=[t]:ju=t}function tI(){if(ju){var t=ju,e=$u;if($u=ju=null,mN(t),e)for(t=0;t<e.length;t++)mN(e[t])}}function nI(t,e){return t(e)}function iI(){}var sw=!1;function rI(t,e,n){if(sw)return t(e,n);sw=!0;try{return nI(t,e,n)}finally{sw=!1,(ju!==null||$u!==null)&&(iI(),tI())}}function Mh(t,e){var n=t.stateNode;if(n===null)return null;var i=wy(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var Bx=!1;if(Do)try{var ef={};Object.defineProperty(ef,"passive",{get:function(){Bx=!0}}),window.addEventListener("test",ef,ef),window.removeEventListener("test",ef,ef)}catch{Bx=!1}function UV(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var th=!1,$0=null,F0=!1,zx=null,VV={onError:function(t){th=!0,$0=t}};function HV(t,e,n,i,r,s,o,a,l){th=!1,$0=null,UV.apply(VV,arguments)}function WV(t,e,n,i,r,s,o,a,l){if(HV.apply(this,arguments),th){if(th){var c=$0;th=!1,$0=null}else throw Error(ae(198));F0||(F0=!0,zx=c)}}function zc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gN(t){if(zc(t)!==t)throw Error(ae(188))}function GV(t){var e=t.alternate;if(!e){if(e=zc(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return gN(r),t;if(s===i)return gN(r),e;s=s.sibling}throw Error(ae(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==i)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function oI(t){return t=GV(t),t!==null?aI(t):null}function aI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=aI(t);if(e!==null)return e;t=t.sibling}return null}var lI=fr.unstable_scheduleCallback,vN=fr.unstable_cancelCallback,KV=fr.unstable_shouldYield,qV=fr.unstable_requestPaint,on=fr.unstable_now,YV=fr.unstable_getCurrentPriorityLevel,Xk=fr.unstable_ImmediatePriority,cI=fr.unstable_UserBlockingPriority,B0=fr.unstable_NormalPriority,XV=fr.unstable_LowPriority,uI=fr.unstable_IdlePriority,gy=null,qs=null;function JV(t){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(gy,t,void 0,(t.current.flags&128)===128)}catch{}}var ls=Math.clz32?Math.clz32:eH,ZV=Math.log,QV=Math.LN2;function eH(t){return t>>>=0,t===0?32:31-(ZV(t)/QV|0)|0}var _m=64,Cm=4194304;function Df(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function z0(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Df(a):(s&=o,s!==0&&(i=Df(s)))}else o=n&~r,o!==0?i=Df(o):s!==0&&(i=Df(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ls(e),r=1<<n,i|=t[n],e&=~r;return i}function tH(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nH(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ls(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=tH(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ux(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dI(){var t=_m;return _m<<=1,!(_m&4194240)&&(_m=64),t}function ow(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ls(e),t[e]=n}function iH(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ls(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Jk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ls(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var wt=0;function fI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hI,Zk,pI,mI,gI,Vx=!1,Em=[],Ba=null,za=null,Ua=null,Th=new Map,Rh=new Map,ya=[],rH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yN(t,e){switch(t){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Ua=null;break;case"pointerover":case"pointerout":Th.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(e.pointerId)}}function tf(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Rp(e),e!==null&&Zk(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function sH(t,e,n,i,r){switch(e){case"focusin":return Ba=tf(Ba,t,e,n,i,r),!0;case"dragenter":return za=tf(za,t,e,n,i,r),!0;case"mouseover":return Ua=tf(Ua,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Th.set(s,tf(Th.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Rh.set(s,tf(Rh.get(s)||null,t,e,n,i,r)),!0}return!1}function vI(t){var e=tc(t.target);if(e!==null){var n=zc(e);if(n!==null){if(e=n.tag,e===13){if(e=sI(n),e!==null){t.blockedOn=e,gI(t.priority,function(){pI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);$x=i,n.target.dispatchEvent(i),$x=null}else return e=Rp(n),e!==null&&Zk(e),t.blockedOn=n,!1;e.shift()}return!0}function bN(t,e,n){zg(t)&&n.delete(e)}function oH(){Vx=!1,Ba!==null&&zg(Ba)&&(Ba=null),za!==null&&zg(za)&&(za=null),Ua!==null&&zg(Ua)&&(Ua=null),Th.forEach(bN),Rh.forEach(bN)}function nf(t,e){t.blockedOn===e&&(t.blockedOn=null,Vx||(Vx=!0,fr.unstable_scheduleCallback(fr.unstable_NormalPriority,oH)))}function Oh(t){function e(r){return nf(r,t)}if(0<Em.length){nf(Em[0],t);for(var n=1;n<Em.length;n++){var i=Em[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ba!==null&&nf(Ba,t),za!==null&&nf(za,t),Ua!==null&&nf(Ua,t),Th.forEach(e),Rh.forEach(e),n=0;n<ya.length;n++)i=ya[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ya.length&&(n=ya[0],n.blockedOn===null);)vI(n),n.blockedOn===null&&ya.shift()}var Fu=Go.ReactCurrentBatchConfig,U0=!0;function aH(t,e,n,i){var r=wt,s=Fu.transition;Fu.transition=null;try{wt=1,Qk(t,e,n,i)}finally{wt=r,Fu.transition=s}}function lH(t,e,n,i){var r=wt,s=Fu.transition;Fu.transition=null;try{wt=4,Qk(t,e,n,i)}finally{wt=r,Fu.transition=s}}function Qk(t,e,n,i){if(U0){var r=Hx(t,e,n,i);if(r===null)gw(t,e,i,V0,n),yN(t,i);else if(sH(r,t,e,n,i))i.stopPropagation();else if(yN(t,i),e&4&&-1<rH.indexOf(t)){for(;r!==null;){var s=Rp(r);if(s!==null&&hI(s),s=Hx(t,e,n,i),s===null&&gw(t,e,i,V0,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else gw(t,e,i,null,n)}}var V0=null;function Hx(t,e,n,i){if(V0=null,t=Yk(i),t=tc(t),t!==null)if(e=zc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return V0=t,null}function yI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YV()){case Xk:return 1;case cI:return 4;case B0:case XV:return 16;case uI:return 536870912;default:return 16}default:return 16}}var Ea=null,e_=null,Ug=null;function bI(){if(Ug)return Ug;var t,e=e_,n=e.length,i,r="value"in Ea?Ea.value:Ea.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Ug=r.slice(t,1<i?1-i:void 0)}function Vg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Am(){return!0}function wN(){return!1}function gr(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Am:wN,this.isPropagationStopped=wN,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Am)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Am)},persist:function(){},isPersistent:Am}),e}var jd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},t_=gr(jd),Tp=Jt({},jd,{view:0,detail:0}),cH=gr(Tp),aw,lw,rf,vy=Jt({},Tp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:n_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rf&&(rf&&t.type==="mousemove"?(aw=t.screenX-rf.screenX,lw=t.screenY-rf.screenY):lw=aw=0,rf=t),aw)},movementY:function(t){return"movementY"in t?t.movementY:lw}}),xN=gr(vy),uH=Jt({},vy,{dataTransfer:0}),dH=gr(uH),fH=Jt({},Tp,{relatedTarget:0}),cw=gr(fH),hH=Jt({},jd,{animationName:0,elapsedTime:0,pseudoElement:0}),pH=gr(hH),mH=Jt({},jd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gH=gr(mH),vH=Jt({},jd,{data:0}),SN=gr(vH),yH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xH(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wH[t])?!!e[t]:!1}function n_(){return xH}var SH=Jt({},Tp,{key:function(t){if(t.key){var e=yH[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bH[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:n_,charCode:function(t){return t.type==="keypress"?Vg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kH=gr(SH),_H=Jt({},vy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kN=gr(_H),CH=Jt({},Tp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:n_}),EH=gr(CH),AH=Jt({},jd,{propertyName:0,elapsedTime:0,pseudoElement:0}),NH=gr(AH),PH=Jt({},vy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),MH=gr(PH),TH=[9,13,27,32],i_=Do&&"CompositionEvent"in window,nh=null;Do&&"documentMode"in document&&(nh=document.documentMode);var RH=Do&&"TextEvent"in window&&!nh,wI=Do&&(!i_||nh&&8<nh&&11>=nh),_N=" ",CN=!1;function xI(t,e){switch(t){case"keyup":return TH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vu=!1;function OH(t,e){switch(t){case"compositionend":return SI(e);case"keypress":return e.which!==32?null:(CN=!0,_N);case"textInput":return t=e.data,t===_N&&CN?null:t;default:return null}}function IH(t,e){if(vu)return t==="compositionend"||!i_&&xI(t,e)?(t=bI(),Ug=e_=Ea=null,vu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wI&&e.locale!=="ko"?null:e.data;default:return null}}var DH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DH[t.type]:e==="textarea"}function kI(t,e,n,i){eI(i),e=H0(e,"onChange"),0<e.length&&(n=new t_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ih=null,Ih=null;function LH(t){II(t,0)}function yy(t){var e=wu(t);if(KO(e))return t}function jH(t,e){if(t==="change")return e}var _I=!1;if(Do){var uw;if(Do){var dw="oninput"in document;if(!dw){var AN=document.createElement("div");AN.setAttribute("oninput","return;"),dw=typeof AN.oninput=="function"}uw=dw}else uw=!1;_I=uw&&(!document.documentMode||9<document.documentMode)}function NN(){ih&&(ih.detachEvent("onpropertychange",CI),Ih=ih=null)}function CI(t){if(t.propertyName==="value"&&yy(Ih)){var e=[];kI(e,Ih,t,Yk(t)),rI(LH,e)}}function $H(t,e,n){t==="focusin"?(NN(),ih=e,Ih=n,ih.attachEvent("onpropertychange",CI)):t==="focusout"&&NN()}function FH(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yy(Ih)}function BH(t,e){if(t==="click")return yy(e)}function zH(t,e){if(t==="input"||t==="change")return yy(e)}function UH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var us=typeof Object.is=="function"?Object.is:UH;function Dh(t,e){if(us(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Ex.call(e,r)||!us(t[r],e[r]))return!1}return!0}function PN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function MN(t,e){var n=PN(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=PN(n)}}function EI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?EI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function AI(){for(var t=window,e=j0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=j0(t.document)}return e}function r_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VH(t){var e=AI(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&EI(n.ownerDocument.documentElement,n)){if(i!==null&&r_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=MN(n,s);var o=MN(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HH=Do&&"documentMode"in document&&11>=document.documentMode,yu=null,Wx=null,rh=null,Gx=!1;function TN(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gx||yu==null||yu!==j0(i)||(i=yu,"selectionStart"in i&&r_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),rh&&Dh(rh,i)||(rh=i,i=H0(Wx,"onSelect"),0<i.length&&(e=new t_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=yu)))}function Nm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bu={animationend:Nm("Animation","AnimationEnd"),animationiteration:Nm("Animation","AnimationIteration"),animationstart:Nm("Animation","AnimationStart"),transitionend:Nm("Transition","TransitionEnd")},fw={},NI={};Do&&(NI=document.createElement("div").style,"AnimationEvent"in window||(delete bu.animationend.animation,delete bu.animationiteration.animation,delete bu.animationstart.animation),"TransitionEvent"in window||delete bu.transitionend.transition);function by(t){if(fw[t])return fw[t];if(!bu[t])return t;var e=bu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in NI)return fw[t]=e[n];return t}var PI=by("animationend"),MI=by("animationiteration"),TI=by("animationstart"),RI=by("transitionend"),OI=new Map,RN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yl(t,e){OI.set(t,e),Bc(e,[t])}for(var hw=0;hw<RN.length;hw++){var pw=RN[hw],WH=pw.toLowerCase(),GH=pw[0].toUpperCase()+pw.slice(1);yl(WH,"on"+GH)}yl(PI,"onAnimationEnd");yl(MI,"onAnimationIteration");yl(TI,"onAnimationStart");yl("dblclick","onDoubleClick");yl("focusin","onFocus");yl("focusout","onBlur");yl(RI,"onTransitionEnd");cd("onMouseEnter",["mouseout","mouseover"]);cd("onMouseLeave",["mouseout","mouseover"]);cd("onPointerEnter",["pointerout","pointerover"]);cd("onPointerLeave",["pointerout","pointerover"]);Bc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lf));function ON(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,WV(i,e,void 0,t),t.currentTarget=null}function II(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;ON(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;ON(r,a,c),s=l}}}if(F0)throw t=zx,F0=!1,zx=null,t}function Ot(t,e){var n=e[Jx];n===void 0&&(n=e[Jx]=new Set);var i=t+"__bubble";n.has(i)||(DI(e,t,2,!1),n.add(i))}function mw(t,e,n){var i=0;e&&(i|=4),DI(n,t,i,e)}var Pm="_reactListening"+Math.random().toString(36).slice(2);function Lh(t){if(!t[Pm]){t[Pm]=!0,UO.forEach(function(n){n!=="selectionchange"&&(KH.has(n)||mw(n,!1,t),mw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pm]||(e[Pm]=!0,mw("selectionchange",!1,e))}}function DI(t,e,n,i){switch(yI(e)){case 1:var r=aH;break;case 4:r=lH;break;default:r=Qk}n=r.bind(null,e,n,t),r=void 0,!Bx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function gw(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=tc(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}rI(function(){var c=s,u=Yk(n),d=[];e:{var f=OI.get(t);if(f!==void 0){var p=t_,m=t;switch(t){case"keypress":if(Vg(n)===0)break e;case"keydown":case"keyup":p=kH;break;case"focusin":m="focus",p=cw;break;case"focusout":m="blur",p=cw;break;case"beforeblur":case"afterblur":p=cw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=xN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=dH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=EH;break;case PI:case MI:case TI:p=pH;break;case RI:p=NH;break;case"scroll":p=cH;break;case"wheel":p=MH;break;case"copy":case"cut":case"paste":p=gH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=kN}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var b=c,w;b!==null;){w=b;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,y!==null&&(k=Mh(b,y),k!=null&&g.push(jh(b,k,w)))),v)break;b=b.return}0<g.length&&(f=new p(f,m,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==$x&&(m=n.relatedTarget||n.fromElement)&&(tc(m)||m[Lo]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?tc(m):null,m!==null&&(v=zc(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=xN,k="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=kN,k="onPointerLeave",y="onPointerEnter",b="pointer"),v=p==null?f:wu(p),w=m==null?f:wu(m),f=new g(k,b+"leave",p,n,u),f.target=v,f.relatedTarget=w,k=null,tc(u)===c&&(g=new g(y,b+"enter",m,n,u),g.target=w,g.relatedTarget=v,k=g),v=k,p&&m)t:{for(g=p,y=m,b=0,w=g;w;w=qc(w))b++;for(w=0,k=y;k;k=qc(k))w++;for(;0<b-w;)g=qc(g),b--;for(;0<w-b;)y=qc(y),w--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=qc(g),y=qc(y)}g=null}else g=null;p!==null&&IN(d,f,p,g,!1),m!==null&&v!==null&&IN(d,v,m,g,!0)}}e:{if(f=c?wu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=jH;else if(EN(f))if(_I)C=zH;else{C=FH;var E=$H}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=BH);if(C&&(C=C(t,c))){kI(d,C,n,u);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Ox(f,"number",f.value)}switch(E=c?wu(c):window,t){case"focusin":(EN(E)||E.contentEditable==="true")&&(yu=E,Wx=c,rh=null);break;case"focusout":rh=Wx=yu=null;break;case"mousedown":Gx=!0;break;case"contextmenu":case"mouseup":case"dragend":Gx=!1,TN(d,n,u);break;case"selectionchange":if(HH)break;case"keydown":case"keyup":TN(d,n,u)}var _;if(i_)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else vu?xI(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(wI&&n.locale!=="ko"&&(vu||N!=="onCompositionStart"?N==="onCompositionEnd"&&vu&&(_=bI()):(Ea=u,e_="value"in Ea?Ea.value:Ea.textContent,vu=!0)),E=H0(c,N),0<E.length&&(N=new SN(N,t,null,n,u),d.push({event:N,listeners:E}),_?N.data=_:(_=SI(n),_!==null&&(N.data=_)))),(_=RH?OH(t,n):IH(t,n))&&(c=H0(c,"onBeforeInput"),0<c.length&&(u=new SN("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=_))}II(d,e)})}function jh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function H0(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Mh(t,n),s!=null&&i.unshift(jh(t,s,r)),s=Mh(t,e),s!=null&&i.push(jh(t,s,r))),t=t.return}return i}function qc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function IN(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Mh(n,s),l!=null&&o.unshift(jh(n,l,a))):r||(l=Mh(n,s),l!=null&&o.push(jh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var qH=/\r\n?/g,YH=/\u0000|\uFFFD/g;function DN(t){return(typeof t=="string"?t:""+t).replace(qH,`
`).replace(YH,"")}function Mm(t,e,n){if(e=DN(e),DN(t)!==e&&n)throw Error(ae(425))}function W0(){}var Kx=null,qx=null;function Yx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xx=typeof setTimeout=="function"?setTimeout:void 0,XH=typeof clearTimeout=="function"?clearTimeout:void 0,LN=typeof Promise=="function"?Promise:void 0,JH=typeof queueMicrotask=="function"?queueMicrotask:typeof LN<"u"?function(t){return LN.resolve(null).then(t).catch(ZH)}:Xx;function ZH(t){setTimeout(function(){throw t})}function vw(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Oh(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Oh(e)}function Va(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $d=Math.random().toString(36).slice(2),Is="__reactFiber$"+$d,$h="__reactProps$"+$d,Lo="__reactContainer$"+$d,Jx="__reactEvents$"+$d,QH="__reactListeners$"+$d,eW="__reactHandles$"+$d;function tc(t){var e=t[Is];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lo]||n[Is]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jN(t);t!==null;){if(n=t[Is])return n;t=jN(t)}return e}t=n,n=t.parentNode}return null}function Rp(t){return t=t[Is]||t[Lo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function wy(t){return t[$h]||null}var Zx=[],xu=-1;function bl(t){return{current:t}}function jt(t){0>xu||(t.current=Zx[xu],Zx[xu]=null,xu--)}function Rt(t,e){xu++,Zx[xu]=t.current,t.current=e}var el={},si=bl(el),Fi=bl(!1),wc=el;function ud(t,e){var n=t.type.contextTypes;if(!n)return el;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Bi(t){return t=t.childContextTypes,t!=null}function G0(){jt(Fi),jt(si)}function $N(t,e,n){if(si.current!==el)throw Error(ae(168));Rt(si,e),Rt(Fi,n)}function LI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ae(108,$V(t)||"Unknown",r));return Jt({},n,i)}function K0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||el,wc=si.current,Rt(si,t),Rt(Fi,Fi.current),!0}function FN(t,e,n){var i=t.stateNode;if(!i)throw Error(ae(169));n?(t=LI(t,e,wc),i.__reactInternalMemoizedMergedChildContext=t,jt(Fi),jt(si),Rt(si,t)):jt(Fi),Rt(Fi,n)}var po=null,xy=!1,yw=!1;function jI(t){po===null?po=[t]:po.push(t)}function tW(t){xy=!0,jI(t)}function wl(){if(!yw&&po!==null){yw=!0;var t=0,e=wt;try{var n=po;for(wt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}po=null,xy=!1}catch(r){throw po!==null&&(po=po.slice(t+1)),lI(Xk,wl),r}finally{wt=e,yw=!1}}return null}var Su=[],ku=0,q0=null,Y0=0,kr=[],_r=0,xc=null,Mo=1,To="";function Wl(t,e){Su[ku++]=Y0,Su[ku++]=q0,q0=t,Y0=e}function $I(t,e,n){kr[_r++]=Mo,kr[_r++]=To,kr[_r++]=xc,xc=t;var i=Mo;t=To;var r=32-ls(i)-1;i&=~(1<<r),n+=1;var s=32-ls(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Mo=1<<32-ls(e)+r|n<<r|i,To=s+t}else Mo=1<<s|n<<r|i,To=t}function s_(t){t.return!==null&&(Wl(t,1),$I(t,1,0))}function o_(t){for(;t===q0;)q0=Su[--ku],Su[ku]=null,Y0=Su[--ku],Su[ku]=null;for(;t===xc;)xc=kr[--_r],kr[_r]=null,To=kr[--_r],kr[_r]=null,Mo=kr[--_r],kr[_r]=null}var ur=null,or=null,Vt=!1,ts=null;function FI(t,e){var n=Pr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function BN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ur=t,or=Va(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ur=t,or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xc!==null?{id:Mo,overflow:To}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ur=t,or=null,!0):!1;default:return!1}}function Qx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eS(t){if(Vt){var e=or;if(e){var n=e;if(!BN(t,e)){if(Qx(t))throw Error(ae(418));e=Va(n.nextSibling);var i=ur;e&&BN(t,e)?FI(i,n):(t.flags=t.flags&-4097|2,Vt=!1,ur=t)}}else{if(Qx(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Vt=!1,ur=t}}}function zN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ur=t}function Tm(t){if(t!==ur)return!1;if(!Vt)return zN(t),Vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yx(t.type,t.memoizedProps)),e&&(e=or)){if(Qx(t))throw BI(),Error(ae(418));for(;e;)FI(t,e),e=Va(e.nextSibling)}if(zN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){or=Va(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}or=null}}else or=ur?Va(t.stateNode.nextSibling):null;return!0}function BI(){for(var t=or;t;)t=Va(t.nextSibling)}function dd(){or=ur=null,Vt=!1}function a_(t){ts===null?ts=[t]:ts.push(t)}var nW=Go.ReactCurrentBatchConfig;function sf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var i=n.stateNode}if(!i)throw Error(ae(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Rm(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function UN(t){var e=t._init;return e(t._payload)}function zI(t){function e(y,b){if(t){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function i(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function r(y,b){return y=Ka(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,k){return b===null||b.tag!==6?(b=Cw(w,y.mode,k),b.return=y,b):(b=r(b,w),b.return=y,b)}function l(y,b,w,k){var C=w.type;return C===gu?u(y,b,w.props.children,k,w.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ca&&UN(C)===b.type)?(k=r(b,w.props),k.ref=sf(y,b,w),k.return=y,k):(k=Xg(w.type,w.key,w.props,null,y.mode,k),k.ref=sf(y,b,w),k.return=y,k)}function c(y,b,w,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=Ew(w,y.mode,k),b.return=y,b):(b=r(b,w.children||[]),b.return=y,b)}function u(y,b,w,k,C){return b===null||b.tag!==7?(b=uc(w,y.mode,k,C),b.return=y,b):(b=r(b,w),b.return=y,b)}function d(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Cw(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case xm:return w=Xg(b.type,b.key,b.props,null,y.mode,w),w.ref=sf(y,null,b),w.return=y,w;case mu:return b=Ew(b,y.mode,w),b.return=y,b;case ca:var k=b._init;return d(y,k(b._payload),w)}if(If(b)||Qd(b))return b=uc(b,y.mode,w,null),b.return=y,b;Rm(y,b)}return null}function f(y,b,w,k){var C=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:a(y,b,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xm:return w.key===C?l(y,b,w,k):null;case mu:return w.key===C?c(y,b,w,k):null;case ca:return C=w._init,f(y,b,C(w._payload),k)}if(If(w)||Qd(w))return C!==null?null:u(y,b,w,k,null);Rm(y,w)}return null}function p(y,b,w,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(w)||null,a(b,y,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case xm:return y=y.get(k.key===null?w:k.key)||null,l(b,y,k,C);case mu:return y=y.get(k.key===null?w:k.key)||null,c(b,y,k,C);case ca:var E=k._init;return p(y,b,w,E(k._payload),C)}if(If(k)||Qd(k))return y=y.get(w)||null,u(b,y,k,C,null);Rm(b,k)}return null}function m(y,b,w,k){for(var C=null,E=null,_=b,N=b=0,M=null;_!==null&&N<w.length;N++){_.index>N?(M=_,_=null):M=_.sibling;var R=f(y,_,w[N],k);if(R===null){_===null&&(_=M);break}t&&_&&R.alternate===null&&e(y,_),b=s(R,b,N),E===null?C=R:E.sibling=R,E=R,_=M}if(N===w.length)return n(y,_),Vt&&Wl(y,N),C;if(_===null){for(;N<w.length;N++)_=d(y,w[N],k),_!==null&&(b=s(_,b,N),E===null?C=_:E.sibling=_,E=_);return Vt&&Wl(y,N),C}for(_=i(y,_);N<w.length;N++)M=p(_,y,N,w[N],k),M!==null&&(t&&M.alternate!==null&&_.delete(M.key===null?N:M.key),b=s(M,b,N),E===null?C=M:E.sibling=M,E=M);return t&&_.forEach(function(I){return e(y,I)}),Vt&&Wl(y,N),C}function g(y,b,w,k){var C=Qd(w);if(typeof C!="function")throw Error(ae(150));if(w=C.call(w),w==null)throw Error(ae(151));for(var E=C=null,_=b,N=b=0,M=null,R=w.next();_!==null&&!R.done;N++,R=w.next()){_.index>N?(M=_,_=null):M=_.sibling;var I=f(y,_,R.value,k);if(I===null){_===null&&(_=M);break}t&&_&&I.alternate===null&&e(y,_),b=s(I,b,N),E===null?C=I:E.sibling=I,E=I,_=M}if(R.done)return n(y,_),Vt&&Wl(y,N),C;if(_===null){for(;!R.done;N++,R=w.next())R=d(y,R.value,k),R!==null&&(b=s(R,b,N),E===null?C=R:E.sibling=R,E=R);return Vt&&Wl(y,N),C}for(_=i(y,_);!R.done;N++,R=w.next())R=p(_,y,N,R.value,k),R!==null&&(t&&R.alternate!==null&&_.delete(R.key===null?N:R.key),b=s(R,b,N),E===null?C=R:E.sibling=R,E=R);return t&&_.forEach(function(D){return e(y,D)}),Vt&&Wl(y,N),C}function v(y,b,w,k){if(typeof w=="object"&&w!==null&&w.type===gu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case xm:e:{for(var C=w.key,E=b;E!==null;){if(E.key===C){if(C=w.type,C===gu){if(E.tag===7){n(y,E.sibling),b=r(E,w.props.children),b.return=y,y=b;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ca&&UN(C)===E.type){n(y,E.sibling),b=r(E,w.props),b.ref=sf(y,E,w),b.return=y,y=b;break e}n(y,E);break}else e(y,E);E=E.sibling}w.type===gu?(b=uc(w.props.children,y.mode,k,w.key),b.return=y,y=b):(k=Xg(w.type,w.key,w.props,null,y.mode,k),k.ref=sf(y,b,w),k.return=y,y=k)}return o(y);case mu:e:{for(E=w.key;b!==null;){if(b.key===E)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(y,b.sibling),b=r(b,w.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=Ew(w,y.mode,k),b.return=y,y=b}return o(y);case ca:return E=w._init,v(y,b,E(w._payload),k)}if(If(w))return m(y,b,w,k);if(Qd(w))return g(y,b,w,k);Rm(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(y,b.sibling),b=r(b,w),b.return=y,y=b):(n(y,b),b=Cw(w,y.mode,k),b.return=y,y=b),o(y)):n(y,b)}return v}var fd=zI(!0),UI=zI(!1),X0=bl(null),J0=null,_u=null,l_=null;function c_(){l_=_u=J0=null}function u_(t){var e=X0.current;jt(X0),t._currentValue=e}function tS(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Bu(t,e){J0=t,l_=_u=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ji=!0),t.firstContext=null)}function Br(t){var e=t._currentValue;if(l_!==t)if(t={context:t,memoizedValue:e,next:null},_u===null){if(J0===null)throw Error(ae(308));_u=t,J0.dependencies={lanes:0,firstContext:t}}else _u=_u.next=t;return e}var nc=null;function d_(t){nc===null?nc=[t]:nc.push(t)}function VI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,d_(e)):(n.next=r.next,r.next=n),e.interleaved=n,jo(t,i)}function jo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ua=!1;function f_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ro(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ha(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,dt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,jo(t,n)}return r=i.interleaved,r===null?(e.next=e,d_(i)):(e.next=r.next,r.next=e),i.interleaved=e,jo(t,n)}function Hg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Jk(t,n)}}function VN(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Z0(t,e,n,i){var r=t.updateQueue;ua=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Jt({},d,f);break e;case 2:ua=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);kc|=o,t.lanes=o,t.memoizedState=d}}function HN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ae(191,r));r.call(i)}}}var Op={},Ys=bl(Op),Fh=bl(Op),Bh=bl(Op);function ic(t){if(t===Op)throw Error(ae(174));return t}function h_(t,e){switch(Rt(Bh,e),Rt(Fh,t),Rt(Ys,Op),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dx(e,t)}jt(Ys),Rt(Ys,e)}function hd(){jt(Ys),jt(Fh),jt(Bh)}function WI(t){ic(Bh.current);var e=ic(Ys.current),n=Dx(e,t.type);e!==n&&(Rt(Fh,t),Rt(Ys,n))}function p_(t){Fh.current===t&&(jt(Ys),jt(Fh))}var Wt=bl(0);function Q0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bw=[];function m_(){for(var t=0;t<bw.length;t++)bw[t]._workInProgressVersionPrimary=null;bw.length=0}var Wg=Go.ReactCurrentDispatcher,ww=Go.ReactCurrentBatchConfig,Sc=0,Xt=null,vn=null,Mn=null,ev=!1,sh=!1,zh=0,iW=0;function Xn(){throw Error(ae(321))}function g_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!us(t[n],e[n]))return!1;return!0}function v_(t,e,n,i,r,s){if(Sc=s,Xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wg.current=t===null||t.memoizedState===null?aW:lW,t=n(i,r),sh){s=0;do{if(sh=!1,zh=0,25<=s)throw Error(ae(301));s+=1,Mn=vn=null,e.updateQueue=null,Wg.current=cW,t=n(i,r)}while(sh)}if(Wg.current=tv,e=vn!==null&&vn.next!==null,Sc=0,Mn=vn=Xt=null,ev=!1,e)throw Error(ae(300));return t}function y_(){var t=zh!==0;return zh=0,t}function Cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?Xt.memoizedState=Mn=t:Mn=Mn.next=t,Mn}function zr(){if(vn===null){var t=Xt.alternate;t=t!==null?t.memoizedState:null}else t=vn.next;var e=Mn===null?Xt.memoizedState:Mn.next;if(e!==null)Mn=e,vn=t;else{if(t===null)throw Error(ae(310));vn=t,t={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},Mn===null?Xt.memoizedState=Mn=t:Mn=Mn.next=t}return Mn}function Uh(t,e){return typeof e=="function"?e(t):e}function xw(t){var e=zr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=vn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Sc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Xt.lanes|=u,kc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,us(i,e.memoizedState)||(ji=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Xt.lanes|=s,kc|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sw(t){var e=zr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);us(s,e.memoizedState)||(ji=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function GI(){}function KI(t,e){var n=Xt,i=zr(),r=e(),s=!us(i.memoizedState,r);if(s&&(i.memoizedState=r,ji=!0),i=i.queue,b_(XI.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Mn!==null&&Mn.memoizedState.tag&1){if(n.flags|=2048,Vh(9,YI.bind(null,n,i,r,e),void 0,null),Rn===null)throw Error(ae(349));Sc&30||qI(n,e,r)}return r}function qI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function YI(t,e,n,i){e.value=n,e.getSnapshot=i,JI(e)&&ZI(t)}function XI(t,e,n){return n(function(){JI(e)&&ZI(t)})}function JI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!us(t,n)}catch{return!0}}function ZI(t){var e=jo(t,1);e!==null&&cs(e,t,1,-1)}function WN(t){var e=Cs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uh,lastRenderedState:t},e.queue=t,t=t.dispatch=oW.bind(null,Xt,t),[e.memoizedState,t]}function Vh(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function QI(){return zr().memoizedState}function Gg(t,e,n,i){var r=Cs();Xt.flags|=t,r.memoizedState=Vh(1|e,n,void 0,i===void 0?null:i)}function Sy(t,e,n,i){var r=zr();i=i===void 0?null:i;var s=void 0;if(vn!==null){var o=vn.memoizedState;if(s=o.destroy,i!==null&&g_(i,o.deps)){r.memoizedState=Vh(e,n,s,i);return}}Xt.flags|=t,r.memoizedState=Vh(1|e,n,s,i)}function GN(t,e){return Gg(8390656,8,t,e)}function b_(t,e){return Sy(2048,8,t,e)}function e5(t,e){return Sy(4,2,t,e)}function t5(t,e){return Sy(4,4,t,e)}function n5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function i5(t,e,n){return n=n!=null?n.concat([t]):null,Sy(4,4,n5.bind(null,e,t),n)}function w_(){}function r5(t,e){var n=zr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&g_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function s5(t,e){var n=zr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&g_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function o5(t,e,n){return Sc&21?(us(n,e)||(n=dI(),Xt.lanes|=n,kc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ji=!0),t.memoizedState=n)}function rW(t,e){var n=wt;wt=n!==0&&4>n?n:4,t(!0);var i=ww.transition;ww.transition={};try{t(!1),e()}finally{wt=n,ww.transition=i}}function a5(){return zr().memoizedState}function sW(t,e,n){var i=Ga(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},l5(t))c5(e,n);else if(n=VI(t,e,n,i),n!==null){var r=gi();cs(n,t,i,r),u5(n,e,i)}}function oW(t,e,n){var i=Ga(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(l5(t))c5(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,us(a,o)){var l=e.interleaved;l===null?(r.next=r,d_(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=VI(t,e,r,i),n!==null&&(r=gi(),cs(n,t,i,r),u5(n,e,i))}}function l5(t){var e=t.alternate;return t===Xt||e!==null&&e===Xt}function c5(t,e){sh=ev=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function u5(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Jk(t,n)}}var tv={readContext:Br,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useInsertionEffect:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useSyncExternalStore:Xn,useId:Xn,unstable_isNewReconciler:!1},aW={readContext:Br,useCallback:function(t,e){return Cs().memoizedState=[t,e===void 0?null:e],t},useContext:Br,useEffect:GN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gg(4194308,4,n5.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gg(4,2,t,e)},useMemo:function(t,e){var n=Cs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Cs();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=sW.bind(null,Xt,t),[i.memoizedState,t]},useRef:function(t){var e=Cs();return t={current:t},e.memoizedState=t},useState:WN,useDebugValue:w_,useDeferredValue:function(t){return Cs().memoizedState=t},useTransition:function(){var t=WN(!1),e=t[0];return t=rW.bind(null,t[1]),Cs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Xt,r=Cs();if(Vt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Rn===null)throw Error(ae(349));Sc&30||qI(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,GN(XI.bind(null,i,s,t),[t]),i.flags|=2048,Vh(9,YI.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Cs(),e=Rn.identifierPrefix;if(Vt){var n=To,i=Mo;n=(i&~(1<<32-ls(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=zh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iW++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lW={readContext:Br,useCallback:r5,useContext:Br,useEffect:b_,useImperativeHandle:i5,useInsertionEffect:e5,useLayoutEffect:t5,useMemo:s5,useReducer:xw,useRef:QI,useState:function(){return xw(Uh)},useDebugValue:w_,useDeferredValue:function(t){var e=zr();return o5(e,vn.memoizedState,t)},useTransition:function(){var t=xw(Uh)[0],e=zr().memoizedState;return[t,e]},useMutableSource:GI,useSyncExternalStore:KI,useId:a5,unstable_isNewReconciler:!1},cW={readContext:Br,useCallback:r5,useContext:Br,useEffect:b_,useImperativeHandle:i5,useInsertionEffect:e5,useLayoutEffect:t5,useMemo:s5,useReducer:Sw,useRef:QI,useState:function(){return Sw(Uh)},useDebugValue:w_,useDeferredValue:function(t){var e=zr();return vn===null?e.memoizedState=t:o5(e,vn.memoizedState,t)},useTransition:function(){var t=Sw(Uh)[0],e=zr().memoizedState;return[t,e]},useMutableSource:GI,useSyncExternalStore:KI,useId:a5,unstable_isNewReconciler:!1};function Xr(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nS(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ky={isMounted:function(t){return(t=t._reactInternals)?zc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=gi(),r=Ga(t),s=Ro(i,r);s.payload=e,n!=null&&(s.callback=n),e=Ha(t,s,r),e!==null&&(cs(e,t,r,i),Hg(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=gi(),r=Ga(t),s=Ro(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ha(t,s,r),e!==null&&(cs(e,t,r,i),Hg(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gi(),i=Ga(t),r=Ro(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ha(t,r,i),e!==null&&(cs(e,t,i,n),Hg(e,t,i))}};function KN(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Dh(n,i)||!Dh(r,s):!0}function d5(t,e,n){var i=!1,r=el,s=e.contextType;return typeof s=="object"&&s!==null?s=Br(s):(r=Bi(e)?wc:si.current,i=e.contextTypes,s=(i=i!=null)?ud(t,r):el),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ky,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function qN(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ky.enqueueReplaceState(e,e.state,null)}function iS(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},f_(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Br(s):(s=Bi(e)?wc:si.current,r.context=ud(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(nS(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ky.enqueueReplaceState(r,r.state,null),Z0(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function pd(t,e){try{var n="",i=e;do n+=jV(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function kw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uW=typeof WeakMap=="function"?WeakMap:Map;function f5(t,e,n){n=Ro(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){iv||(iv=!0,pS=i),rS(t,e)},n}function h5(t,e,n){n=Ro(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){rS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){rS(t,e),typeof i!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function YN(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new uW;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=_W.bind(null,t,e,n),e.then(t,t))}function XN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function JN(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ro(-1,1),e.tag=2,Ha(n,e,1))),n.lanes|=1),t)}var dW=Go.ReactCurrentOwner,ji=!1;function mi(t,e,n,i){e.child=t===null?UI(e,null,n,i):fd(e,t.child,n,i)}function ZN(t,e,n,i,r){n=n.render;var s=e.ref;return Bu(e,r),i=v_(t,e,n,i,s,r),n=y_(),t!==null&&!ji?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$o(t,e,r)):(Vt&&n&&s_(e),e.flags|=1,mi(t,e,i,r),e.child)}function QN(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!N_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,p5(t,e,s,i,r)):(t=Xg(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Dh,n(o,i)&&t.ref===e.ref)return $o(t,e,r)}return e.flags|=1,t=Ka(s,i),t.ref=e.ref,t.return=e,e.child=t}function p5(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Dh(s,i)&&t.ref===e.ref)if(ji=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(ji=!0);else return e.lanes=t.lanes,$o(t,e,r)}return sS(t,e,n,i,r)}function m5(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Eu,Zi),Zi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rt(Eu,Zi),Zi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Rt(Eu,Zi),Zi|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Rt(Eu,Zi),Zi|=i;return mi(t,e,r,n),e.child}function g5(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sS(t,e,n,i,r){var s=Bi(n)?wc:si.current;return s=ud(e,s),Bu(e,r),n=v_(t,e,n,i,s,r),i=y_(),t!==null&&!ji?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$o(t,e,r)):(Vt&&i&&s_(e),e.flags|=1,mi(t,e,n,r),e.child)}function eP(t,e,n,i,r){if(Bi(n)){var s=!0;K0(e)}else s=!1;if(Bu(e,r),e.stateNode===null)Kg(t,e),d5(e,n,i),iS(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Br(c):(c=Bi(n)?wc:si.current,c=ud(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&qN(e,o,i,c),ua=!1;var f=e.memoizedState;o.state=f,Z0(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Fi.current||ua?(typeof u=="function"&&(nS(e,n,u,i),l=e.memoizedState),(a=ua||KN(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,HI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Xr(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Br(l):(l=Bi(n)?wc:si.current,l=ud(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&qN(e,o,i,l),ua=!1,f=e.memoizedState,o.state=f,Z0(e,i,o,r);var m=e.memoizedState;a!==d||f!==m||Fi.current||ua?(typeof p=="function"&&(nS(e,n,p,i),m=e.memoizedState),(c=ua||KN(e,n,c,i,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return oS(t,e,n,i,s,r)}function oS(t,e,n,i,r,s){g5(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&FN(e,n,!1),$o(t,e,s);i=e.stateNode,dW.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=fd(e,t.child,null,s),e.child=fd(e,null,a,s)):mi(t,e,a,s),e.memoizedState=i.state,r&&FN(e,n,!0),e.child}function v5(t){var e=t.stateNode;e.pendingContext?$N(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$N(t,e.context,!1),h_(t,e.containerInfo)}function tP(t,e,n,i,r){return dd(),a_(r),e.flags|=256,mi(t,e,n,i),e.child}var aS={dehydrated:null,treeContext:null,retryLane:0};function lS(t){return{baseLanes:t,cachePool:null,transitions:null}}function y5(t,e,n){var i=e.pendingProps,r=Wt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Rt(Wt,r&1),t===null)return eS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ey(o,i,0,null),t=uc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=lS(n),e.memoizedState=aS,t):x_(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return fW(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Ka(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Ka(a,s):(s=uc(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?lS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=aS,i}return s=t.child,t=s.sibling,i=Ka(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function x_(t,e){return e=Ey({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Om(t,e,n,i){return i!==null&&a_(i),fd(e,t.child,null,n),t=x_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fW(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=kw(Error(ae(422))),Om(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ey({mode:"visible",children:i.children},r,0,null),s=uc(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&fd(e,t.child,null,o),e.child.memoizedState=lS(o),e.memoizedState=aS,s);if(!(e.mode&1))return Om(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ae(419)),i=kw(s,i,void 0),Om(t,e,o,i)}if(a=(o&t.childLanes)!==0,ji||a){if(i=Rn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,jo(t,r),cs(i,t,r,-1))}return A_(),i=kw(Error(ae(421))),Om(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=CW.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,or=Va(r.nextSibling),ur=e,Vt=!0,ts=null,t!==null&&(kr[_r++]=Mo,kr[_r++]=To,kr[_r++]=xc,Mo=t.id,To=t.overflow,xc=e),e=x_(e,i.children),e.flags|=4096,e)}function nP(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),tS(t.return,e,n)}function _w(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function b5(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(mi(t,e,i.children,n),i=Wt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nP(t,n,e);else if(t.tag===19)nP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Rt(Wt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Q0(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),_w(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Q0(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}_w(e,!0,n,null,s);break;case"together":_w(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $o(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Ka(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ka(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hW(t,e,n){switch(e.tag){case 3:v5(e),dd();break;case 5:WI(e);break;case 1:Bi(e.type)&&K0(e);break;case 4:h_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Rt(X0,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Rt(Wt,Wt.current&1),e.flags|=128,null):n&e.child.childLanes?y5(t,e,n):(Rt(Wt,Wt.current&1),t=$o(t,e,n),t!==null?t.sibling:null);Rt(Wt,Wt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return b5(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Rt(Wt,Wt.current),i)break;return null;case 22:case 23:return e.lanes=0,m5(t,e,n)}return $o(t,e,n)}var w5,cS,x5,S5;w5=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cS=function(){};x5=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ic(Ys.current);var s=null;switch(n){case"input":r=Tx(t,r),i=Tx(t,i),s=[];break;case"select":r=Jt({},r,{value:void 0}),i=Jt({},i,{value:void 0}),s=[];break;case"textarea":r=Ix(t,r),i=Ix(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=W0)}Lx(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Nh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Nh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ot("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};S5=function(t,e,n,i){n!==i&&(e.flags|=4)};function of(t,e){if(!Vt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Jn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function pW(t,e,n){var i=e.pendingProps;switch(o_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(e),null;case 1:return Bi(e.type)&&G0(),Jn(e),null;case 3:return i=e.stateNode,hd(),jt(Fi),jt(si),m_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Tm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ts!==null&&(vS(ts),ts=null))),cS(t,e),Jn(e),null;case 5:p_(e);var r=ic(Bh.current);if(n=e.type,t!==null&&e.stateNode!=null)x5(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ae(166));return Jn(e),null}if(t=ic(Ys.current),Tm(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Is]=e,i[$h]=s,t=(e.mode&1)!==0,n){case"dialog":Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":case"embed":Ot("load",i);break;case"video":case"audio":for(r=0;r<Lf.length;r++)Ot(Lf[r],i);break;case"source":Ot("error",i);break;case"img":case"image":case"link":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"input":dN(i,s),Ot("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ot("invalid",i);break;case"textarea":hN(i,s),Ot("invalid",i)}Lx(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Mm(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Mm(i.textContent,a,t),r=["children",""+a]):Nh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ot("scroll",i)}switch(n){case"input":Sm(i),fN(i,s,!0);break;case"textarea":Sm(i),pN(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=W0)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=XO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Is]=e,t[$h]=i,w5(t,e,!1,!1),e.stateNode=t;e:{switch(o=jx(n,i),n){case"dialog":Ot("cancel",t),Ot("close",t),r=i;break;case"iframe":case"object":case"embed":Ot("load",t),r=i;break;case"video":case"audio":for(r=0;r<Lf.length;r++)Ot(Lf[r],t);r=i;break;case"source":Ot("error",t),r=i;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),r=i;break;case"details":Ot("toggle",t),r=i;break;case"input":dN(t,i),r=Tx(t,i),Ot("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Jt({},i,{value:void 0}),Ot("invalid",t);break;case"textarea":hN(t,i),r=Ix(t,i),Ot("invalid",t);break;default:r=i}Lx(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?QO(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&JO(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ph(t,l):typeof l=="number"&&Ph(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Nh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ot("scroll",t):l!=null&&Wk(t,s,l,o))}switch(n){case"input":Sm(t),fN(t,i,!1);break;case"textarea":Sm(t),pN(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Qa(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Lu(t,!!i.multiple,s,!1):i.defaultValue!=null&&Lu(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=W0)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jn(e),null;case 6:if(t&&e.stateNode!=null)S5(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ae(166));if(n=ic(Bh.current),ic(Ys.current),Tm(e)){if(i=e.stateNode,n=e.memoizedProps,i[Is]=e,(s=i.nodeValue!==n)&&(t=ur,t!==null))switch(t.tag){case 3:Mm(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mm(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Is]=e,e.stateNode=i}return Jn(e),null;case 13:if(jt(Wt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&or!==null&&e.mode&1&&!(e.flags&128))BI(),dd(),e.flags|=98560,s=!1;else if(s=Tm(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Is]=e}else dd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jn(e),s=!1}else ts!==null&&(vS(ts),ts=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Wt.current&1?Sn===0&&(Sn=3):A_())),e.updateQueue!==null&&(e.flags|=4),Jn(e),null);case 4:return hd(),cS(t,e),t===null&&Lh(e.stateNode.containerInfo),Jn(e),null;case 10:return u_(e.type._context),Jn(e),null;case 17:return Bi(e.type)&&G0(),Jn(e),null;case 19:if(jt(Wt),s=e.memoizedState,s===null)return Jn(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)of(s,!1);else{if(Sn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Q0(t),o!==null){for(e.flags|=128,of(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Rt(Wt,Wt.current&1|2),e.child}t=t.sibling}s.tail!==null&&on()>md&&(e.flags|=128,i=!0,of(s,!1),e.lanes=4194304)}else{if(!i)if(t=Q0(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),of(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Vt)return Jn(e),null}else 2*on()-s.renderingStartTime>md&&n!==1073741824&&(e.flags|=128,i=!0,of(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=on(),e.sibling=null,n=Wt.current,Rt(Wt,i?n&1|2:n&1),e):(Jn(e),null);case 22:case 23:return E_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Zi&1073741824&&(Jn(e),e.subtreeFlags&6&&(e.flags|=8192)):Jn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function mW(t,e){switch(o_(e),e.tag){case 1:return Bi(e.type)&&G0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hd(),jt(Fi),jt(si),m_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return p_(e),null;case 13:if(jt(Wt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));dd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return jt(Wt),null;case 4:return hd(),null;case 10:return u_(e.type._context),null;case 22:case 23:return E_(),null;case 24:return null;default:return null}}var Im=!1,ti=!1,gW=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function Cu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Qt(t,e,i)}else n.current=null}function uS(t,e,n){try{n()}catch(i){Qt(t,e,i)}}var iP=!1;function vW(t,e){if(Kx=U0,t=AI(),r_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(qx={focusedElem:t,selectionRange:n},U0=!1,Ne=e;Ne!==null;)if(e=Ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ne=t;else for(;Ne!==null;){e=Ne;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Xr(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(k){Qt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Ne=t;break}Ne=e.return}return m=iP,iP=!1,m}function oh(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&uS(e,n,s)}r=r.next}while(r!==i)}}function _y(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function dS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function k5(t){var e=t.alternate;e!==null&&(t.alternate=null,k5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Is],delete e[$h],delete e[Jx],delete e[QH],delete e[eW])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _5(t){return t.tag===5||t.tag===3||t.tag===4}function rP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=W0));else if(i!==4&&(t=t.child,t!==null))for(fS(t,e,n),t=t.sibling;t!==null;)fS(t,e,n),t=t.sibling}function hS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(hS(t,e,n),t=t.sibling;t!==null;)hS(t,e,n),t=t.sibling}var Dn=null,es=!1;function na(t,e,n){for(n=n.child;n!==null;)C5(t,e,n),n=n.sibling}function C5(t,e,n){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(gy,n)}catch{}switch(n.tag){case 5:ti||Cu(n,e);case 6:var i=Dn,r=es;Dn=null,na(t,e,n),Dn=i,es=r,Dn!==null&&(es?(t=Dn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Dn.removeChild(n.stateNode));break;case 18:Dn!==null&&(es?(t=Dn,n=n.stateNode,t.nodeType===8?vw(t.parentNode,n):t.nodeType===1&&vw(t,n),Oh(t)):vw(Dn,n.stateNode));break;case 4:i=Dn,r=es,Dn=n.stateNode.containerInfo,es=!0,na(t,e,n),Dn=i,es=r;break;case 0:case 11:case 14:case 15:if(!ti&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&uS(n,e,o),r=r.next}while(r!==i)}na(t,e,n);break;case 1:if(!ti&&(Cu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Qt(n,e,a)}na(t,e,n);break;case 21:na(t,e,n);break;case 22:n.mode&1?(ti=(i=ti)||n.memoizedState!==null,na(t,e,n),ti=i):na(t,e,n);break;default:na(t,e,n)}}function sP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gW),e.forEach(function(i){var r=EW.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Gr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Dn=a.stateNode,es=!1;break e;case 3:Dn=a.stateNode.containerInfo,es=!0;break e;case 4:Dn=a.stateNode.containerInfo,es=!0;break e}a=a.return}if(Dn===null)throw Error(ae(160));C5(s,o,r),Dn=null,es=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Qt(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)E5(e,t),e=e.sibling}function E5(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gr(e,t),bs(t),i&4){try{oh(3,t,t.return),_y(3,t)}catch(g){Qt(t,t.return,g)}try{oh(5,t,t.return)}catch(g){Qt(t,t.return,g)}}break;case 1:Gr(e,t),bs(t),i&512&&n!==null&&Cu(n,n.return);break;case 5:if(Gr(e,t),bs(t),i&512&&n!==null&&Cu(n,n.return),t.flags&32){var r=t.stateNode;try{Ph(r,"")}catch(g){Qt(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&qO(r,s),jx(a,o);var c=jx(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?QO(r,d):u==="dangerouslySetInnerHTML"?JO(r,d):u==="children"?Ph(r,d):Wk(r,u,d,c)}switch(a){case"input":Rx(r,s);break;case"textarea":YO(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Lu(r,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Lu(r,!!s.multiple,s.defaultValue,!0):Lu(r,!!s.multiple,s.multiple?[]:"",!1))}r[$h]=s}catch(g){Qt(t,t.return,g)}}break;case 6:if(Gr(e,t),bs(t),i&4){if(t.stateNode===null)throw Error(ae(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){Qt(t,t.return,g)}}break;case 3:if(Gr(e,t),bs(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Oh(e.containerInfo)}catch(g){Qt(t,t.return,g)}break;case 4:Gr(e,t),bs(t);break;case 13:Gr(e,t),bs(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(__=on())),i&4&&sP(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ti=(c=ti)||u,Gr(e,t),ti=c):Gr(e,t),bs(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ne=t,u=t.child;u!==null;){for(d=Ne=u;Ne!==null;){switch(f=Ne,p=f.child,f.tag){case 0:case 11:case 14:case 15:oh(4,f,f.return);break;case 1:Cu(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Qt(i,n,g)}}break;case 5:Cu(f,f.return);break;case 22:if(f.memoizedState!==null){aP(d);continue}}p!==null?(p.return=f,Ne=p):aP(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ZO("display",o))}catch(g){Qt(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Qt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Gr(e,t),bs(t),i&4&&sP(t);break;case 21:break;default:Gr(e,t),bs(t)}}function bs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_5(n)){var i=n;break e}n=n.return}throw Error(ae(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Ph(r,""),i.flags&=-33);var s=rP(t);hS(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=rP(t);fS(t,a,o);break;default:throw Error(ae(161))}}catch(l){Qt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yW(t,e,n){Ne=t,A5(t)}function A5(t,e,n){for(var i=(t.mode&1)!==0;Ne!==null;){var r=Ne,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Im;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||ti;a=Im;var c=ti;if(Im=o,(ti=l)&&!c)for(Ne=r;Ne!==null;)o=Ne,l=o.child,o.tag===22&&o.memoizedState!==null?lP(r):l!==null?(l.return=o,Ne=l):lP(r);for(;s!==null;)Ne=s,A5(s),s=s.sibling;Ne=r,Im=a,ti=c}oP(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ne=s):oP(t)}}function oP(t){for(;Ne!==null;){var e=Ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ti||_y(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ti)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Xr(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&HN(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}HN(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Oh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}ti||e.flags&512&&dS(e)}catch(f){Qt(e,e.return,f)}}if(e===t){Ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function aP(t){for(;Ne!==null;){var e=Ne;if(e===t){Ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function lP(t){for(;Ne!==null;){var e=Ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_y(4,e)}catch(l){Qt(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Qt(e,r,l)}}var s=e.return;try{dS(e)}catch(l){Qt(e,s,l)}break;case 5:var o=e.return;try{dS(e)}catch(l){Qt(e,o,l)}}}catch(l){Qt(e,e.return,l)}if(e===t){Ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ne=a;break}Ne=e.return}}var bW=Math.ceil,nv=Go.ReactCurrentDispatcher,S_=Go.ReactCurrentOwner,Dr=Go.ReactCurrentBatchConfig,dt=0,Rn=null,hn=null,Wn=0,Zi=0,Eu=bl(0),Sn=0,Hh=null,kc=0,Cy=0,k_=0,ah=null,Ri=null,__=0,md=1/0,uo=null,iv=!1,pS=null,Wa=null,Dm=!1,Aa=null,rv=0,lh=0,mS=null,qg=-1,Yg=0;function gi(){return dt&6?on():qg!==-1?qg:qg=on()}function Ga(t){return t.mode&1?dt&2&&Wn!==0?Wn&-Wn:nW.transition!==null?(Yg===0&&(Yg=dI()),Yg):(t=wt,t!==0||(t=window.event,t=t===void 0?16:yI(t.type)),t):1}function cs(t,e,n,i){if(50<lh)throw lh=0,mS=null,Error(ae(185));Mp(t,n,i),(!(dt&2)||t!==Rn)&&(t===Rn&&(!(dt&2)&&(Cy|=n),Sn===4&&ba(t,Wn)),zi(t,i),n===1&&dt===0&&!(e.mode&1)&&(md=on()+500,xy&&wl()))}function zi(t,e){var n=t.callbackNode;nH(t,e);var i=z0(t,t===Rn?Wn:0);if(i===0)n!==null&&vN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&vN(n),e===1)t.tag===0?tW(cP.bind(null,t)):jI(cP.bind(null,t)),JH(function(){!(dt&6)&&wl()}),n=null;else{switch(fI(i)){case 1:n=Xk;break;case 4:n=cI;break;case 16:n=B0;break;case 536870912:n=uI;break;default:n=B0}n=D5(n,N5.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function N5(t,e){if(qg=-1,Yg=0,dt&6)throw Error(ae(327));var n=t.callbackNode;if(zu()&&t.callbackNode!==n)return null;var i=z0(t,t===Rn?Wn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=sv(t,i);else{e=i;var r=dt;dt|=2;var s=M5();(Rn!==t||Wn!==e)&&(uo=null,md=on()+500,cc(t,e));do try{SW();break}catch(a){P5(t,a)}while(!0);c_(),nv.current=s,dt=r,hn!==null?e=0:(Rn=null,Wn=0,e=Sn)}if(e!==0){if(e===2&&(r=Ux(t),r!==0&&(i=r,e=gS(t,r))),e===1)throw n=Hh,cc(t,0),ba(t,i),zi(t,on()),n;if(e===6)ba(t,i);else{if(r=t.current.alternate,!(i&30)&&!wW(r)&&(e=sv(t,i),e===2&&(s=Ux(t),s!==0&&(i=s,e=gS(t,s))),e===1))throw n=Hh,cc(t,0),ba(t,i),zi(t,on()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ae(345));case 2:Gl(t,Ri,uo);break;case 3:if(ba(t,i),(i&130023424)===i&&(e=__+500-on(),10<e)){if(z0(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){gi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Xx(Gl.bind(null,t,Ri,uo),e);break}Gl(t,Ri,uo);break;case 4:if(ba(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-ls(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=on()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*bW(i/1960))-i,10<i){t.timeoutHandle=Xx(Gl.bind(null,t,Ri,uo),i);break}Gl(t,Ri,uo);break;case 5:Gl(t,Ri,uo);break;default:throw Error(ae(329))}}}return zi(t,on()),t.callbackNode===n?N5.bind(null,t):null}function gS(t,e){var n=ah;return t.current.memoizedState.isDehydrated&&(cc(t,e).flags|=256),t=sv(t,e),t!==2&&(e=Ri,Ri=n,e!==null&&vS(e)),t}function vS(t){Ri===null?Ri=t:Ri.push.apply(Ri,t)}function wW(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!us(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ba(t,e){for(e&=~k_,e&=~Cy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ls(e),i=1<<n;t[n]=-1,e&=~i}}function cP(t){if(dt&6)throw Error(ae(327));zu();var e=z0(t,0);if(!(e&1))return zi(t,on()),null;var n=sv(t,e);if(t.tag!==0&&n===2){var i=Ux(t);i!==0&&(e=i,n=gS(t,i))}if(n===1)throw n=Hh,cc(t,0),ba(t,e),zi(t,on()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gl(t,Ri,uo),zi(t,on()),null}function C_(t,e){var n=dt;dt|=1;try{return t(e)}finally{dt=n,dt===0&&(md=on()+500,xy&&wl())}}function _c(t){Aa!==null&&Aa.tag===0&&!(dt&6)&&zu();var e=dt;dt|=1;var n=Dr.transition,i=wt;try{if(Dr.transition=null,wt=1,t)return t()}finally{wt=i,Dr.transition=n,dt=e,!(dt&6)&&wl()}}function E_(){Zi=Eu.current,jt(Eu)}function cc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XH(n)),hn!==null)for(n=hn.return;n!==null;){var i=n;switch(o_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&G0();break;case 3:hd(),jt(Fi),jt(si),m_();break;case 5:p_(i);break;case 4:hd();break;case 13:jt(Wt);break;case 19:jt(Wt);break;case 10:u_(i.type._context);break;case 22:case 23:E_()}n=n.return}if(Rn=t,hn=t=Ka(t.current,null),Wn=Zi=e,Sn=0,Hh=null,k_=Cy=kc=0,Ri=ah=null,nc!==null){for(e=0;e<nc.length;e++)if(n=nc[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}nc=null}return t}function P5(t,e){do{var n=hn;try{if(c_(),Wg.current=tv,ev){for(var i=Xt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ev=!1}if(Sc=0,Mn=vn=Xt=null,sh=!1,zh=0,S_.current=null,n===null||n.return===null){Sn=1,Hh=e,hn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Wn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=XN(o);if(p!==null){p.flags&=-257,JN(p,o,a,s,e),p.mode&1&&YN(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){YN(s,c,e),A_();break e}l=Error(ae(426))}}else if(Vt&&a.mode&1){var v=XN(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),JN(v,o,a,s,e),a_(pd(l,a));break e}}s=l=pd(l,a),Sn!==4&&(Sn=2),ah===null?ah=[s]:ah.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=f5(s,l,e);VN(s,y);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wa===null||!Wa.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=h5(s,a,e);VN(s,k);break e}}s=s.return}while(s!==null)}R5(n)}catch(C){e=C,hn===n&&n!==null&&(hn=n=n.return);continue}break}while(!0)}function M5(){var t=nv.current;return nv.current=tv,t===null?tv:t}function A_(){(Sn===0||Sn===3||Sn===2)&&(Sn=4),Rn===null||!(kc&268435455)&&!(Cy&268435455)||ba(Rn,Wn)}function sv(t,e){var n=dt;dt|=2;var i=M5();(Rn!==t||Wn!==e)&&(uo=null,cc(t,e));do try{xW();break}catch(r){P5(t,r)}while(!0);if(c_(),dt=n,nv.current=i,hn!==null)throw Error(ae(261));return Rn=null,Wn=0,Sn}function xW(){for(;hn!==null;)T5(hn)}function SW(){for(;hn!==null&&!KV();)T5(hn)}function T5(t){var e=I5(t.alternate,t,Zi);t.memoizedProps=t.pendingProps,e===null?R5(t):hn=e,S_.current=null}function R5(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mW(n,e),n!==null){n.flags&=32767,hn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Sn=6,hn=null;return}}else if(n=pW(n,e,Zi),n!==null){hn=n;return}if(e=e.sibling,e!==null){hn=e;return}hn=e=t}while(e!==null);Sn===0&&(Sn=5)}function Gl(t,e,n){var i=wt,r=Dr.transition;try{Dr.transition=null,wt=1,kW(t,e,n,i)}finally{Dr.transition=r,wt=i}return null}function kW(t,e,n,i){do zu();while(Aa!==null);if(dt&6)throw Error(ae(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(iH(t,s),t===Rn&&(hn=Rn=null,Wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dm||(Dm=!0,D5(B0,function(){return zu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dr.transition,Dr.transition=null;var o=wt;wt=1;var a=dt;dt|=4,S_.current=null,vW(t,n),E5(n,t),VH(qx),U0=!!Kx,qx=Kx=null,t.current=n,yW(n),qV(),dt=a,wt=o,Dr.transition=s}else t.current=n;if(Dm&&(Dm=!1,Aa=t,rv=r),s=t.pendingLanes,s===0&&(Wa=null),JV(n.stateNode),zi(t,on()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(iv)throw iv=!1,t=pS,pS=null,t;return rv&1&&t.tag!==0&&zu(),s=t.pendingLanes,s&1?t===mS?lh++:(lh=0,mS=t):lh=0,wl(),null}function zu(){if(Aa!==null){var t=fI(rv),e=Dr.transition,n=wt;try{if(Dr.transition=null,wt=16>t?16:t,Aa===null)var i=!1;else{if(t=Aa,Aa=null,rv=0,dt&6)throw Error(ae(331));var r=dt;for(dt|=4,Ne=t.current;Ne!==null;){var s=Ne,o=s.child;if(Ne.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ne=c;Ne!==null;){var u=Ne;switch(u.tag){case 0:case 11:case 15:oh(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ne=d;else for(;Ne!==null;){u=Ne;var f=u.sibling,p=u.return;if(k5(u),u===c){Ne=null;break}if(f!==null){f.return=p,Ne=f;break}Ne=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ne=o;else e:for(;Ne!==null;){if(s=Ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:oh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ne=y;break e}Ne=s.return}}var b=t.current;for(Ne=b;Ne!==null;){o=Ne;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ne=w;else e:for(o=b;Ne!==null;){if(a=Ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_y(9,a)}}catch(C){Qt(a,a.return,C)}if(a===o){Ne=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,Ne=k;break e}Ne=a.return}}if(dt=r,wl(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(gy,t)}catch{}i=!0}return i}finally{wt=n,Dr.transition=e}}return!1}function uP(t,e,n){e=pd(n,e),e=f5(t,e,1),t=Ha(t,e,1),e=gi(),t!==null&&(Mp(t,1,e),zi(t,e))}function Qt(t,e,n){if(t.tag===3)uP(t,t,n);else for(;e!==null;){if(e.tag===3){uP(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Wa===null||!Wa.has(i))){t=pd(n,t),t=h5(e,t,1),e=Ha(e,t,1),t=gi(),e!==null&&(Mp(e,1,t),zi(e,t));break}}e=e.return}}function _W(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=gi(),t.pingedLanes|=t.suspendedLanes&n,Rn===t&&(Wn&n)===n&&(Sn===4||Sn===3&&(Wn&130023424)===Wn&&500>on()-__?cc(t,0):k_|=n),zi(t,e)}function O5(t,e){e===0&&(t.mode&1?(e=Cm,Cm<<=1,!(Cm&130023424)&&(Cm=4194304)):e=1);var n=gi();t=jo(t,e),t!==null&&(Mp(t,e,n),zi(t,n))}function CW(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),O5(t,n)}function EW(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ae(314))}i!==null&&i.delete(e),O5(t,n)}var I5;I5=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fi.current)ji=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ji=!1,hW(t,e,n);ji=!!(t.flags&131072)}else ji=!1,Vt&&e.flags&1048576&&$I(e,Y0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Kg(t,e),t=e.pendingProps;var r=ud(e,si.current);Bu(e,n),r=v_(null,e,i,t,r,n);var s=y_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bi(i)?(s=!0,K0(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,f_(e),r.updater=ky,e.stateNode=r,r._reactInternals=e,iS(e,i,t,n),e=oS(null,e,i,!0,s,n)):(e.tag=0,Vt&&s&&s_(e),mi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Kg(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=NW(i),t=Xr(i,t),r){case 0:e=sS(null,e,i,t,n);break e;case 1:e=eP(null,e,i,t,n);break e;case 11:e=ZN(null,e,i,t,n);break e;case 14:e=QN(null,e,i,Xr(i.type,t),n);break e}throw Error(ae(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xr(i,r),sS(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xr(i,r),eP(t,e,i,r,n);case 3:e:{if(v5(e),t===null)throw Error(ae(387));i=e.pendingProps,s=e.memoizedState,r=s.element,HI(t,e),Z0(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=pd(Error(ae(423)),e),e=tP(t,e,i,n,r);break e}else if(i!==r){r=pd(Error(ae(424)),e),e=tP(t,e,i,n,r);break e}else for(or=Va(e.stateNode.containerInfo.firstChild),ur=e,Vt=!0,ts=null,n=UI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(dd(),i===r){e=$o(t,e,n);break e}mi(t,e,i,n)}e=e.child}return e;case 5:return WI(e),t===null&&eS(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Yx(i,r)?o=null:s!==null&&Yx(i,s)&&(e.flags|=32),g5(t,e),mi(t,e,o,n),e.child;case 6:return t===null&&eS(e),null;case 13:return y5(t,e,n);case 4:return h_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=fd(e,null,i,n):mi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xr(i,r),ZN(t,e,i,r,n);case 7:return mi(t,e,e.pendingProps,n),e.child;case 8:return mi(t,e,e.pendingProps.children,n),e.child;case 12:return mi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Rt(X0,i._currentValue),i._currentValue=o,s!==null)if(us(s.value,o)){if(s.children===r.children&&!Fi.current){e=$o(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ro(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),tS(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tS(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Bu(e,n),r=Br(r),i=i(r),e.flags|=1,mi(t,e,i,n),e.child;case 14:return i=e.type,r=Xr(i,e.pendingProps),r=Xr(i.type,r),QN(t,e,i,r,n);case 15:return p5(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xr(i,r),Kg(t,e),e.tag=1,Bi(i)?(t=!0,K0(e)):t=!1,Bu(e,n),d5(e,i,r),iS(e,i,r,n),oS(null,e,i,!0,t,n);case 19:return b5(t,e,n);case 22:return m5(t,e,n)}throw Error(ae(156,e.tag))};function D5(t,e){return lI(t,e)}function AW(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(t,e,n,i){return new AW(t,e,n,i)}function N_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NW(t){if(typeof t=="function")return N_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kk)return 11;if(t===qk)return 14}return 2}function Ka(t,e){var n=t.alternate;return n===null?(n=Pr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xg(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")N_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gu:return uc(n.children,r,s,e);case Gk:o=8,r|=8;break;case Ax:return t=Pr(12,n,e,r|2),t.elementType=Ax,t.lanes=s,t;case Nx:return t=Pr(13,n,e,r),t.elementType=Nx,t.lanes=s,t;case Px:return t=Pr(19,n,e,r),t.elementType=Px,t.lanes=s,t;case WO:return Ey(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case VO:o=10;break e;case HO:o=9;break e;case Kk:o=11;break e;case qk:o=14;break e;case ca:o=16,i=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Pr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function uc(t,e,n,i){return t=Pr(7,t,i,e),t.lanes=n,t}function Ey(t,e,n,i){return t=Pr(22,t,i,e),t.elementType=WO,t.lanes=n,t.stateNode={isHidden:!1},t}function Cw(t,e,n){return t=Pr(6,t,null,e),t.lanes=n,t}function Ew(t,e,n){return e=Pr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PW(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ow(0),this.expirationTimes=ow(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ow(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function P_(t,e,n,i,r,s,o,a,l){return t=new PW(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},f_(s),t}function MW(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function L5(t){if(!t)return el;t=t._reactInternals;e:{if(zc(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Bi(n))return LI(t,n,e)}return e}function j5(t,e,n,i,r,s,o,a,l){return t=P_(n,i,!0,t,r,s,o,a,l),t.context=L5(null),n=t.current,i=gi(),r=Ga(n),s=Ro(i,r),s.callback=e??null,Ha(n,s,r),t.current.lanes=r,Mp(t,r,i),zi(t,i),t}function Ay(t,e,n,i){var r=e.current,s=gi(),o=Ga(r);return n=L5(n),e.context===null?e.context=n:e.pendingContext=n,e=Ro(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ha(r,e,o),t!==null&&(cs(t,r,o,s),Hg(t,r,o)),o}function ov(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function M_(t,e){dP(t,e),(t=t.alternate)&&dP(t,e)}function TW(){return null}var $5=typeof reportError=="function"?reportError:function(t){console.error(t)};function T_(t){this._internalRoot=t}Ny.prototype.render=T_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Ay(t,e,null,null)};Ny.prototype.unmount=T_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_c(function(){Ay(null,t,null,null)}),e[Lo]=null}};function Ny(t){this._internalRoot=t}Ny.prototype.unstable_scheduleHydration=function(t){if(t){var e=mI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ya.length&&e!==0&&e<ya[n].priority;n++);ya.splice(n,0,t),n===0&&vI(t)}};function R_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Py(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fP(){}function RW(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=ov(o);s.call(c)}}var o=j5(e,i,t,0,null,!1,!1,"",fP);return t._reactRootContainer=o,t[Lo]=o.current,Lh(t.nodeType===8?t.parentNode:t),_c(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=ov(l);a.call(c)}}var l=P_(t,0,!1,null,null,!1,!1,"",fP);return t._reactRootContainer=l,t[Lo]=l.current,Lh(t.nodeType===8?t.parentNode:t),_c(function(){Ay(e,l,n,i)}),l}function My(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=ov(o);a.call(l)}}Ay(e,o,t,r)}else o=RW(n,e,t,r,i);return ov(o)}hI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Df(e.pendingLanes);n!==0&&(Jk(e,n|1),zi(e,on()),!(dt&6)&&(md=on()+500,wl()))}break;case 13:_c(function(){var i=jo(t,1);if(i!==null){var r=gi();cs(i,t,1,r)}}),M_(t,1)}};Zk=function(t){if(t.tag===13){var e=jo(t,134217728);if(e!==null){var n=gi();cs(e,t,134217728,n)}M_(t,134217728)}};pI=function(t){if(t.tag===13){var e=Ga(t),n=jo(t,e);if(n!==null){var i=gi();cs(n,t,e,i)}M_(t,e)}};mI=function(){return wt};gI=function(t,e){var n=wt;try{return wt=t,e()}finally{wt=n}};Fx=function(t,e,n){switch(e){case"input":if(Rx(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=wy(i);if(!r)throw Error(ae(90));KO(i),Rx(i,r)}}}break;case"textarea":YO(t,n);break;case"select":e=n.value,e!=null&&Lu(t,!!n.multiple,e,!1)}};nI=C_;iI=_c;var OW={usingClientEntryPoint:!1,Events:[Rp,wu,wy,eI,tI,C_]},af={findFiberByHostInstance:tc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IW={bundleType:af.bundleType,version:af.version,rendererPackageName:af.rendererPackageName,rendererConfig:af.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Go.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oI(t),t===null?null:t.stateNode},findFiberByHostInstance:af.findFiberByHostInstance||TW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lm.isDisabled&&Lm.supportsFiber)try{gy=Lm.inject(IW),qs=Lm}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OW;mr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R_(e))throw Error(ae(200));return MW(t,e,null,n)};mr.createRoot=function(t,e){if(!R_(t))throw Error(ae(299));var n=!1,i="",r=$5;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=P_(t,1,!1,null,null,n,!1,i,r),t[Lo]=e.current,Lh(t.nodeType===8?t.parentNode:t),new T_(e)};mr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=oI(e),t=t===null?null:t.stateNode,t};mr.flushSync=function(t){return _c(t)};mr.hydrate=function(t,e,n){if(!Py(e))throw Error(ae(200));return My(null,t,e,!0,n)};mr.hydrateRoot=function(t,e,n){if(!R_(t))throw Error(ae(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=$5;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=j5(e,null,t,1,n??null,r,!1,s,o),t[Lo]=e.current,Lh(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ny(e)};mr.render=function(t,e,n){if(!Py(e))throw Error(ae(200));return My(null,t,e,!1,n)};mr.unmountComponentAtNode=function(t){if(!Py(t))throw Error(ae(40));return t._reactRootContainer?(_c(function(){My(null,null,t,!1,function(){t._reactRootContainer=null,t[Lo]=null})}),!0):!1};mr.unstable_batchedUpdates=C_;mr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Py(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return My(t,e,n,!1,i)};mr.version="18.3.1-next-f1338f8080-20240426";function F5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F5)}catch(t){console.error(t)}}F5(),FO.exports=mr;var xl=FO.exports;const DW=Fc(xl);var B5,hP=xl;B5=hP.createRoot,hP.hydrateRoot;function ve(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function gs(t,e=[]){let n=[];function i(s,o){const a=x.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:p,...m}=d,g=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,v=x.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:v,children:p})};c.displayName=s+"Provider";function u(d,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,m=x.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,LW(r,...e)]}function LW(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function pP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ty(...t){return e=>{let n=!1;const i=t.map(r=>{const s=pP(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():pP(t[r],null)}}}}function ot(...t){return x.useCallback(Ty(...t),t)}function gd(t){const e=jW(t),n=x.forwardRef((i,r)=>{const{children:s,...o}=i,a=x.Children.toArray(s),l=a.find(FW);if(l){const c=l.props.children,u=a.map(d=>d===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:r,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}function jW(t){const e=x.forwardRef((n,i)=>{const{children:r,...s}=n;if(x.isValidElement(r)){const o=zW(r),a=BW(s,r.props);return r.type!==x.Fragment&&(a.ref=i?Ty(i,o):o),x.cloneElement(r,a)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var $W=Symbol("radix.slottable");function FW(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$W}function BW(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function zW(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ip(t){const e=t+"CollectionProvider",[n,i]=gs(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:y}=g,b=Dt.useRef(null),w=Dt.useRef(new Map).current;return h.jsx(r,{scope:v,itemMap:w,collectionRef:b,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=gd(a),c=Dt.forwardRef((g,v)=>{const{scope:y,children:b}=g,w=s(a,y),k=ot(v,w.collectionRef);return h.jsx(l,{ref:k,children:b})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=gd(u),p=Dt.forwardRef((g,v)=>{const{scope:y,children:b,...w}=g,k=Dt.useRef(null),C=ot(v,k),E=s(u,y);return Dt.useEffect(()=>(E.itemMap.set(k,{ref:k,...w}),()=>void E.itemMap.delete(k))),h.jsx(f,{[d]:"",ref:C,children:b})});p.displayName=u;function m(g){const v=s(t+"CollectionConsumer",g);return Dt.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((E,_)=>w.indexOf(E.ref.current)-w.indexOf(_.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},m,i]}var Kn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},UW=cy[" useId ".trim().toString()]||(()=>{}),VW=0;function tl(t){const[e,n]=x.useState(UW());return Kn(()=>{n(i=>i??String(VW++))},[t]),e?`radix-${e}`:""}var HW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ze=HW.reduce((t,e)=>{const n=gd(`Primitive.${e}`),i=x.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function O_(t,e){t&&xl.flushSync(()=>t.dispatchEvent(e))}function Vi(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}var WW=cy[" useInsertionEffect ".trim().toString()]||Kn;function Fo({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,o]=GW({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=x.useRef(t!==void 0);x.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=x.useCallback(u=>{var d;if(a){const f=KW(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function GW({defaultProp:t,onChange:e}){const[n,i]=x.useState(t),r=x.useRef(n),s=x.useRef(e);return WW(()=>{s.current=e},[e]),x.useEffect(()=>{var o;r.current!==n&&((o=s.current)==null||o.call(s,n),r.current=n)},[n,r]),[n,i,s]}function KW(t){return typeof t=="function"}var qW=x.createContext(void 0);function Dp(t){const e=x.useContext(qW);return t||e||"ltr"}var Aw="rovingFocusGroup.onEntryFocus",YW={bubbles:!1,cancelable:!0},Lp="RovingFocusGroup",[yS,z5,XW]=Ip(Lp),[JW,Ry]=gs(Lp,[XW]),[ZW,QW]=JW(Lp),U5=x.forwardRef((t,e)=>h.jsx(yS.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(yS.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(eG,{...t,ref:e})})}));U5.displayName=Lp;var eG=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=x.useRef(null),p=ot(e,f),m=Dp(s),[g,v]=Fo({prop:o,defaultProp:a??null,onChange:l,caller:Lp}),[y,b]=x.useState(!1),w=Vi(c),k=z5(n),C=x.useRef(!1),[E,_]=x.useState(0);return x.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(Aw,w),()=>N.removeEventListener(Aw,w)},[w]),h.jsx(ZW,{scope:n,orientation:i,dir:m,loop:r,currentTabStopId:g,onItemFocus:x.useCallback(N=>v(N),[v]),onItemShiftTab:x.useCallback(()=>b(!0),[]),onFocusableItemAdd:x.useCallback(()=>_(N=>N+1),[]),onFocusableItemRemove:x.useCallback(()=>_(N=>N-1),[]),children:h.jsx(ze.div,{tabIndex:y||E===0?-1:0,"data-orientation":i,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:ve(t.onMouseDown,()=>{C.current=!0}),onFocus:ve(t.onFocus,N=>{const M=!C.current;if(N.target===N.currentTarget&&M&&!y){const R=new CustomEvent(Aw,YW);if(N.currentTarget.dispatchEvent(R),!R.defaultPrevented){const I=k().filter(Y=>Y.focusable),D=I.find(Y=>Y.active),K=I.find(Y=>Y.id===g),W=[D,K,...I].filter(Boolean).map(Y=>Y.ref.current);W5(W,u)}}C.current=!1}),onBlur:ve(t.onBlur,()=>b(!1))})})}),V5="RovingFocusGroupItem",H5=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,children:o,...a}=t,l=tl(),c=s||l,u=QW(V5,n),d=u.currentTabStopId===c,f=z5(n),{onFocusableItemAdd:p,onFocusableItemRemove:m,currentTabStopId:g}=u;return x.useEffect(()=>{if(i)return p(),()=>m()},[i,p,m]),h.jsx(yS.ItemSlot,{scope:n,id:c,focusable:i,active:r,children:h.jsx(ze.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:ve(t.onMouseDown,v=>{i?u.onItemFocus(c):v.preventDefault()}),onFocus:ve(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ve(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=iG(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=f().filter(k=>k.focusable).map(k=>k.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const k=w.indexOf(v.currentTarget);w=u.loop?rG(w,k+1):w.slice(k+1)}setTimeout(()=>W5(w))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:g!=null}):o})})});H5.displayName=V5;var tG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function nG(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function iG(t,e,n){const i=nG(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return tG[i]}function W5(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function rG(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var G5=U5,K5=H5;function sG(t,e){return x.useReducer((n,i)=>e[n][i]??n,t)}var Ko=t=>{const{present:e,children:n}=t,i=oG(e),r=typeof n=="function"?n({present:i.isPresent}):x.Children.only(n),s=ot(i.ref,aG(r));return typeof n=="function"||i.isPresent?x.cloneElement(r,{ref:s}):null};Ko.displayName="Presence";function oG(t){const[e,n]=x.useState(),i=x.useRef(null),r=x.useRef(t),s=x.useRef("none"),o=t?"mounted":"unmounted",[a,l]=sG(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=jm(i.current);s.current=a==="mounted"?c:"none"},[a]),Kn(()=>{const c=i.current,u=r.current;if(u!==t){const f=s.current,p=jm(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),Kn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const g=jm(i.current).includes(p.animationName);if(p.target===e&&g&&(l("ANIMATION_END"),!r.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(s.current=jm(i.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(c=>{i.current=c?getComputedStyle(c):null,n(c)},[])}}function jm(t){return(t==null?void 0:t.animationName)||"none"}function aG(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Oy="Tabs",[lG,rge]=gs(Oy,[Ry]),q5=Ry(),[cG,I_]=lG(Oy),Y5=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=Dp(a),[d,f]=Fo({prop:i,onChange:r,defaultProp:s??"",caller:Oy});return h.jsx(cG,{scope:n,baseId:tl(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:h.jsx(ze.div,{dir:u,"data-orientation":o,...c,ref:e})})});Y5.displayName=Oy;var X5="TabsList",J5=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=I_(X5,n),o=q5(n);return h.jsx(G5,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:h.jsx(ze.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});J5.displayName=X5;var Z5="TabsTrigger",Jg=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=I_(Z5,n),a=q5(n),l=eD(o.baseId,i),c=tD(o.baseId,i),u=i===o.value;return h.jsx(K5,{asChild:!0,...a,focusable:!r,active:u,children:h.jsx(ze.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:ve(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:ve(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:ve(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});Jg.displayName=Z5;var Q5="TabsContent",Zg=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=I_(Q5,n),l=eD(a.baseId,i),c=tD(a.baseId,i),u=i===a.value,d=x.useRef(u);return x.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(Ko,{present:r||u,children:({present:f})=>h.jsx(ze.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});Zg.displayName=Q5;function eD(t,e){return`${t}-trigger-${e}`}function tD(t,e){return`${t}-content-${e}`}const jf={},mP=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,gP=t=>"init"in t,Nw=t=>!!t.write,vP=t=>"v"in t||"e"in t,$m=t=>{if("e"in t)throw t.e;if((jf?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},av=new WeakMap,yP=t=>{var e;return lv(t)&&!!((e=av.get(t))!=null&&e[0])},uG=t=>{const e=av.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},nD=(t,e)=>{let n=av.get(t);if(!n){n=[!0,new Set],av.set(t,n);const i=()=>{n[0]=!1};t.then(i,i)}n[1].add(e)},lv=t=>typeof(t==null?void 0:t.then)=="function",iD=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},Pw=(t,e,n)=>{const i=n(t),r="v"in i,s=i.v;if(lv(e))for(const o of i.d.keys())iD(t,e,n(o));i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,lv(s)&&uG(s))},bP=(t,e,n)=>{var i;const r=new Set;for(const s of((i=n.get(t))==null?void 0:i.t)||[])n.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},dG=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},Mw=()=>{const t={},e=new WeakMap,n=i=>{var r,s;(r=e.get(t))==null||r.forEach(o=>o(i)),(s=e.get(i))==null||s.forEach(o=>o())};return n.add=(i,r)=>{const s=i||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(r),()=>{o==null||o.delete(r),o.size||e.delete(s)}},n},fG=t=>(t.c||(t.c=Mw()),t.m||(t.m=Mw()),t.u||(t.u=Mw()),t.f||(t.f=dG()),t),hG=Symbol(),pG=(t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new Set,r=new Set,s=new Set,o={},a=(f,...p)=>f.read(...p),l=(f,...p)=>f.write(...p),c=(f,p)=>{var m;return(m=f.unstable_onInit)==null?void 0:m.call(f,p)},u=(f,p)=>{var m;return(m=f.onMount)==null?void 0:m.call(f,p)},...d)=>{const f=d[0]||(_=>{if((jf?"production":void 0)!=="production"&&!_)throw new Error("Atom is undefined or null");let N=t.get(_);return N||(N={d:new Map,p:new Set,n:0},t.set(_,N),c==null||c(_,E)),N}),p=d[1]||(()=>{const _=[],N=M=>{try{M()}catch(R){_.push(R)}};do{o.f&&N(o.f);const M=new Set,R=M.add.bind(M);i.forEach(I=>{var D;return(D=e.get(I))==null?void 0:D.l.forEach(R)}),i.clear(),s.forEach(R),s.clear(),r.forEach(R),r.clear(),M.forEach(N),i.size&&m()}while(i.size||s.size||r.size);if(_.length)throw new AggregateError(_)}),m=d[2]||(()=>{const _=[],N=new WeakSet,M=new WeakSet,R=Array.from(i);for(;R.length;){const I=R[R.length-1],D=f(I);if(M.has(I)){R.pop();continue}if(N.has(I)){if(n.get(I)===D.n)_.push([I,D]);else if((jf?"production":void 0)!=="production"&&n.has(I))throw new Error("[Bug] invalidated atom exists");M.add(I),R.pop();continue}N.add(I);for(const K of bP(I,D,e))N.has(K)||R.push(K)}for(let I=_.length-1;I>=0;--I){const[D,K]=_[I];let B=!1;for(const W of K.d.keys())if(W!==D&&i.has(W)){B=!0;break}B&&(g(D),b(D)),n.delete(D)}}),g=d[3]||(_=>{var N;const M=f(_);if(vP(M)&&(e.has(_)&&n.get(_)!==M.n||Array.from(M.d).every(([te,V])=>g(te).n===V)))return M;M.d.clear();let R=!0;const I=()=>{e.has(_)&&(b(_),m(),p())},D=te=>{var V;if(mP(_,te)){const ie=f(te);if(!vP(ie))if(gP(te))Pw(te,te.init,f);else throw new Error("no atom init");return $m(ie)}const $=g(te);try{return $m($)}finally{M.d.set(te,$.n),yP(M.v)&&iD(_,M.v,$),(V=e.get(te))==null||V.t.add(_),R||I()}};let K,B;const W={get signal(){return K||(K=new AbortController),K.signal},get setSelf(){return(jf?"production":void 0)!=="production"&&!Nw(_)&&console.warn("setSelf function cannot be used with read-only atom"),!B&&Nw(_)&&(B=(...te)=>{if((jf?"production":void 0)!=="production"&&R&&console.warn("setSelf function cannot be called in sync"),!R)try{return y(_,...te)}finally{m(),p()}}),B}},Y=M.n;try{const te=a(_,D,W);return Pw(_,te,f),lv(te)&&(nD(te,()=>K==null?void 0:K.abort()),te.then(I,I)),M}catch(te){return delete M.v,M.e=te,++M.n,M}finally{R=!1,Y!==M.n&&n.get(_)===Y&&(n.set(_,M.n),i.add(_),(N=o.c)==null||N.call(o,_))}}),v=d[4]||(_=>{const N=[_];for(;N.length;){const M=N.pop(),R=f(M);for(const I of bP(M,R,e)){const D=f(I);n.set(I,D.n),N.push(I)}}}),y=d[5]||((_,...N)=>{let M=!0;const R=D=>$m(g(D)),I=(D,...K)=>{var B;const W=f(D);try{if(mP(_,D)){if(!gP(D))throw new Error("atom not writable");const Y=W.n,te=K[0];Pw(D,te,f),b(D),Y!==W.n&&(i.add(D),(B=o.c)==null||B.call(o,D),v(D));return}else return y(D,...K)}finally{M||(m(),p())}};try{return l(_,R,I,...N)}finally{M=!1}}),b=d[6]||(_=>{var N;const M=f(_),R=e.get(_);if(R&&!yP(M.v)){for(const[I,D]of M.d)if(!R.d.has(I)){const K=f(I);w(I).t.add(_),R.d.add(I),D!==K.n&&(i.add(I),(N=o.c)==null||N.call(o,I),v(I))}for(const I of R.d||[])if(!M.d.has(I)){R.d.delete(I);const D=k(I);D==null||D.t.delete(_)}}}),w=d[7]||(_=>{var N;const M=f(_);let R=e.get(_);if(!R){g(_);for(const I of M.d.keys())w(I).t.add(_);if(R={l:new Set,d:new Set(M.d.keys()),t:new Set},e.set(_,R),(N=o.m)==null||N.call(o,_),Nw(_)){const I=()=>{let D=!0;const K=(...B)=>{try{return y(_,...B)}finally{D||(m(),p())}};try{const B=u(_,K);B&&(R.u=()=>{D=!0;try{B()}finally{D=!1}})}finally{D=!1}};r.add(I)}}return R}),k=d[8]||(_=>{var N;const M=f(_);let R=e.get(_);if(R&&!R.l.size&&!Array.from(R.t).some(I=>{var D;return(D=e.get(I))==null?void 0:D.d.has(_)})){R.u&&s.add(R.u),R=void 0,e.delete(_),(N=o.u)==null||N.call(o,_);for(const I of M.d.keys()){const D=k(I);D==null||D.t.delete(_)}return}return R}),C=[t,e,n,i,r,s,o,a,l,c,u,f,p,m,g,v,y,b,w,k],E={get:_=>$m(g(_)),set:(_,...N)=>{try{return y(_,...N)}finally{m(),p()}},sub:(_,N)=>{const R=w(_).l;return R.add(N),p(),()=>{R.delete(N),k(_),p()}}};return Object.defineProperty(E,hG,{value:C}),E},rD=pG,mG=fG,wP=nD,D_={};let gG=0;function de(t,e){const n=`atom${++gG}`,i={toString(){return(D_?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=vG,i.write=yG),e&&(i.write=e),i}function vG(t){return t(this)}function yG(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const bG=()=>{let t=0;const e=mG({}),n=new WeakMap,i=new WeakMap,r=rD(n,i,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>t?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=i.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++t;try{for(const[d,f]of a)"init"in d&&u(d,f)}finally{--t}}};r.set(l)}})};function L_(){return(D_?"production":void 0)!=="production"?bG():rD()}let lf;function wG(){return lf||(lf=L_(),(D_?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=lf),globalThis.__JOTAI_DEFAULT_STORE__!==lf&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),lf}const xG={},sD=x.createContext(void 0);function oD(t){return x.useContext(sD)||wG()}function SG({children:t,store:e}){const n=x.useRef(void 0);return!e&&!n.current&&(n.current=L_()),x.createElement(sD.Provider,{value:e||n.current},t)}const bS=t=>typeof(t==null?void 0:t.then)=="function",wS=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},kG=Dt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(wS(t),t)}),Tw=new WeakMap,xP=(t,e)=>{let n=Tw.get(t);return n||(n=new Promise((i,r)=>{let s=t;const o=c=>u=>{s===c&&i(u)},a=c=>u=>{s===c&&r(u)},l=()=>{try{const c=e();bS(c)?(Tw.set(c,n),s=c,c.then(o(c),a(c)),wP(c,l)):i(c)}catch(c){r(c)}};t.then(o(t),a(t)),wP(t,l)}),Tw.set(t,n)),n};function Ze(t,e){const{delay:n,unstable_promiseStatus:i=!Dt.use}={},r=oD(),[[s,o,a],l]=x.useReducer(u=>{const d=r.get(t);return Object.is(u[0],d)&&u[1]===r&&u[2]===t?u:[d,r,t]},void 0,()=>[r.get(t),r,t]);let c=s;if((o!==r||a!==t)&&(l(),c=r.get(t)),x.useEffect(()=>{const u=r.sub(t,()=>{if(i)try{const d=r.get(t);bS(d)&&wS(xP(d,()=>r.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),u},[r,t,n,i]),x.useDebugValue(c),bS(c)){const u=xP(c,()=>r.get(t));return i&&wS(u),kG(u)}return c}function xS(t,e){const n=oD();return x.useCallback((...r)=>{if((xG?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function jp(t,e){return[Ze(t),xS(t)]}const{createElement:vd,createContext:_G,forwardRef:aD,useCallback:ki,useContext:lD,useEffect:dc,useImperativeHandle:cD,useLayoutEffect:CG,useMemo:EG,useRef:er,useState:cv}=cy,SP=cy.useId,Iy=_G(null);Iy.displayName="PanelGroupContext";const Wh=CG,AG=typeof SP=="function"?SP:()=>null;let NG=0;function j_(t=null){const e=AG(),n=er(t||e||null);return n.current===null&&(n.current=""+NG++),t??n.current}function uD({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:p,tagName:m="div",...g}){const v=lD(Iy);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:b,getPanelSize:w,getPanelStyle:k,groupId:C,isPanelCollapsed:E,reevaluatePanelConstraints:_,registerPanel:N,resizePanel:M,unregisterPanel:R}=v,I=j_(o),D=er({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:I,idIsFromProps:o!==void 0,order:f});er({didLogMissingDefaultSizeWarning:!1}),Wh(()=>{const{callbacks:B,constraints:W}=D.current,Y={...W};D.current.id=I,D.current.idIsFromProps=o!==void 0,D.current.order=f,B.onCollapse=c,B.onExpand=u,B.onResize=d,W.collapsedSize=n,W.collapsible=i,W.defaultSize=r,W.maxSize=a,W.minSize=l,(Y.collapsedSize!==W.collapsedSize||Y.collapsible!==W.collapsible||Y.maxSize!==W.maxSize||Y.minSize!==W.minSize)&&_(D.current,Y)}),Wh(()=>{const B=D.current;return N(B),()=>{R(B)}},[f,I,N,R]),cD(s,()=>({collapse:()=>{y(D.current)},expand:()=>{b(D.current)},getId(){return I},getSize(){return w(D.current)},isCollapsed(){return E(D.current)},isExpanded(){return!E(D.current)},resize:B=>{M(D.current,B)}}),[y,b,w,E,I,M]);const K=k(D.current,r);return vd(m,{...g,children:t,className:e,style:{...K,...p},"data-panel":"","data-panel-id":I,"data-panel-group-id":C,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const Qg=aD((t,e)=>vd(uD,{...t,forwardedRef:e}));uD.displayName="Panel";Qg.displayName="forwardRef(Panel)";function Ye(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const dD=10;function Gh(t,e,n=dD){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function Ji(t,e,n){return Gh(t,e,n)===0}function Au({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];Ye(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(Gh(n,a)<0)if(s){const l=(r+a)/2;Gh(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(dD)),n}function $f({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(Ji(t,0))return e;const s=[...e],[o,a]=i;Ye(o!=null),Ye(a!=null);let l=0;if(r==="keyboard"){{const u=t<0?a:o,d=n[u];if(Ye(d),d.collapsible){const f=e[u];Ye(f!=null);const p=n[u];Ye(p);const{collapsedSize:m=0,minSize:g=0}=p;if(Ji(f,m)){const v=g-f;Gh(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}{const u=t<0?o:a,d=n[u];Ye(d);const{collapsible:f}=d;if(f){const p=e[u];Ye(p!=null);const m=n[u];Ye(m);const{collapsedSize:g=0,minSize:v=0}=m;if(Ji(p,v)){const y=p-g;Gh(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const m=e[d];Ye(m!=null);const v=Au({panelConstraints:n,panelIndex:d,size:100})-m;if(f+=v,d+=u,d<0||d>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-p:p}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),p=e[d];Ye(p!=null);const m=p-f,g=Au({panelConstraints:n,panelIndex:d,size:m});if(!Ji(p,g)&&(l+=p-g,s[d]=g,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(Ji(l,0))return e;{const u=t<0?a:o,d=e[u];Ye(d!=null);const f=d+l,p=Au({panelConstraints:n,panelIndex:u,size:f});if(s[u]=p,!Ji(p,f)){let m=f-p,v=t<0?a:o;for(;v>=0&&v<n.length;){const y=s[v];Ye(y!=null);const b=y+m,w=Au({panelConstraints:n,panelIndex:v,size:b});if(Ji(y,w)||(m-=w-y,s[v]=w),Ji(m,0))break;t>0?v--:v++}}}const c=s.reduce((u,d)=>d+u,0);return Ji(c,100)?s:e}function PG({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];Ye(a!=null),e.forEach((d,f)=>{const{constraints:p}=d,{maxSize:m=100,minSize:g=0}=p;f===a?(i=g,r=m):(s+=g,o+=m)});const l=Math.min(r,100-s),c=Math.max(i,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function Kh(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function fD(t,e,n=document){const r=Kh(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function hD(t,e,n){const i=fD(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function pD(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function Dy(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function MG(t,e,n,i=document){var r,s,o,a;const l=Dy(e,i),c=Kh(t,i),u=l?c.indexOf(l):-1,d=(r=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function TG({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){er({didWarnAboutMissingResizeHandle:!1}),Wh(()=>{if(!s)return;const a=Kh(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=PG({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const p=r[l];Ye(p),f.setAttribute("aria-controls",p.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),dc(()=>{if(!s)return;const a=e.current;Ye(a);const{panelDataArray:l}=a,c=pD(n,s);Ye(c!=null,`No group found for id "${n}"`);const u=Kh(n,s);Ye(u);const d=u.map(f=>{const p=f.getAttribute("data-panel-resize-handle-id");Ye(p);const[m,g]=MG(n,p,l,s);if(m==null||g==null)return()=>{};const v=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const b=l.findIndex(w=>w.id===m);if(b>=0){const w=l[b];Ye(w);const k=i[b],{collapsedSize:C=0,collapsible:E,minSize:_=0}=w.constraints;if(k!=null&&E){const N=$f({delta:Ji(k,C)?_-C:C-k,layout:i,panelConstraints:l.map(M=>M.constraints),pivotIndices:hD(n,p,s),trigger:"keyboard"});i!==N&&o(N)}}break}}};return f.addEventListener("keydown",v),()=>{f.removeEventListener("keydown",v)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,i,r,o])}function kP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function mD(t){return t.type==="keydown"}function gD(t){return t.type.startsWith("mouse")}function vD(t){return t.type.startsWith("touch")}function yD(t,e){const n=t==="horizontal";if(gD(e))return n?e.clientX:e.clientY;if(vD(e)){const i=e.touches[0];return Ye(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function RG(t,e,n,i,r){const s=n==="horizontal",o=Dy(e,r);Ye(o);const a=o.getAttribute("data-panel-group-id");Ye(a);let{initialCursorPosition:l}=i;const c=yD(n,t),u=pD(a,r);Ye(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function OG(t,e,n,i,r,s){if(mD(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:RG(t,e,n,i,s)}function IG({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];Ye(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];Ye(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,c=r/l;i++,e[s]=c,r-=c}return e}function Yc(t,e,n){e.forEach((i,r)=>{const s=t[r];Ye(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:f,onExpand:p,onResize:m}=o;m&&m(i,d),u&&(f||p)&&(p&&(d==null||d===c)&&i!==c&&p(),f&&(d==null||d!==c)&&i===c&&f())}})}function Fm(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function DG({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let SS=null,rc=null;function bD(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function LG(){rc!==null&&(document.head.removeChild(rc),SS=null,rc=null)}function Rw(t){if(SS===t)return;SS=t;const e=bD(t);rc===null&&(rc=document.createElement("style"),document.head.appendChild(rc)),rc.innerHTML=`*{cursor: ${e}!important;}`}function jG(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function _P(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function wD(t){return`react-resizable-panels:${t}`}function xD(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function SD(t,e){try{const n=wD(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function $G(t,e,n){var i,r;const s=(i=SD(t,n))!==null&&i!==void 0?i:{},o=xD(e);return(r=s[o])!==null&&r!==void 0?r:null}function FG(t,e,n,i,r){var s;const o=wD(t),a=xD(e),l=(s=SD(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function CP({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Ji(i,100))for(let s=0;s<e.length;s++){const o=n[s];Ye(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];Ye(o!=null);const a=Au({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!Ji(r,0))for(let s=0;s<e.length;s++){const o=n[s];Ye(o!=null);const a=o+r,l=Au({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,Ji(r,0)))break}return n}const BG=100,Ff={getItem:t=>(_P(Ff),Ff.getItem(t)),setItem:(t,e)=>{_P(Ff),Ff.setItem(t,e)}},EP={};function kD({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=Ff,style:c,tagName:u="div",...d}){const f=j_(s),p=er(null),[m,g]=cv(null),[v,y]=cv([]),b=er({}),w=er(new Map),k=er(0),C=er({autoSaveId:t,direction:i,dragState:m,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),E=er({layout:v,panelDataArray:[],panelDataArrayChanged:!1});er({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),cD(r,()=>({getId:()=>C.current.id,getLayout:()=>{const{layout:Z}=E.current;return Z},setLayout:Z=>{const{onLayout:le}=C.current,{layout:j,panelDataArray:L}=E.current,U=CP({layout:Z,panelConstraints:L.map(S=>S.constraints)});kP(j,U)||(y(U),E.current.layout=U,le&&le(U),Yc(L,U,b.current))}}),[]),Wh(()=>{C.current.autoSaveId=t,C.current.direction=i,C.current.dragState=m,C.current.id=f,C.current.onLayout=o,C.current.storage=l}),TG({committedValuesRef:C,eagerValuesRef:E,groupId:f,layout:v,panelDataArray:E.current.panelDataArray,setLayout:y,panelGroupElement:p.current}),dc(()=>{const{panelDataArray:Z}=E.current;if(t){if(v.length===0||v.length!==Z.length)return;let le=EP[t];le==null&&(le=jG(FG,BG),EP[t]=le);const j=[...Z],L=new Map(w.current);le(t,j,L,v,l)}},[t,v,l]),dc(()=>{});const _=ki(Z=>{const{onLayout:le}=C.current,{layout:j,panelDataArray:L}=E.current;if(Z.constraints.collapsible){const U=L.map(T=>T.constraints),{collapsedSize:S=0,panelSize:P,pivotIndices:O}=Ll(L,Z,j);if(Ye(P!=null),P!==S){w.current.set(Z.id,P);const q=ou(L,Z)===L.length-1?P-S:S-P,H=$f({delta:q,layout:j,panelConstraints:U,pivotIndices:O,trigger:"imperative-api"});Fm(j,H)||(y(H),E.current.layout=H,le&&le(H),Yc(L,H,b.current))}}},[]),N=ki(Z=>{const{onLayout:le}=C.current,{layout:j,panelDataArray:L}=E.current;if(Z.constraints.collapsible){const U=L.map(q=>q.constraints),{collapsedSize:S=0,panelSize:P,minSize:O=0,pivotIndices:T}=Ll(L,Z,j);if(P===S){const q=w.current.get(Z.id),H=q!=null&&q>=O?q:O,J=ou(L,Z)===L.length-1?P-H:H-P,Pe=$f({delta:J,layout:j,panelConstraints:U,pivotIndices:T,trigger:"imperative-api"});Fm(j,Pe)||(y(Pe),E.current.layout=Pe,le&&le(Pe),Yc(L,Pe,b.current))}}},[]),M=ki(Z=>{const{layout:le,panelDataArray:j}=E.current,{panelSize:L}=Ll(j,Z,le);return Ye(L!=null),L},[]),R=ki((Z,le)=>{const{panelDataArray:j}=E.current,L=ou(j,Z);return DG({defaultSize:le,dragState:m,layout:v,panelData:j,panelIndex:L})},[m,v]),I=ki(Z=>{const{layout:le,panelDataArray:j}=E.current,{collapsedSize:L=0,collapsible:U,panelSize:S}=Ll(j,Z,le);return U===!0&&S===L},[]),D=ki(Z=>{const{layout:le,panelDataArray:j}=E.current,{collapsedSize:L=0,collapsible:U,panelSize:S}=Ll(j,Z,le);return Ye(S!=null),!U||S>L},[]),K=ki(Z=>{const{panelDataArray:le}=E.current;le.push(Z),le.sort((j,L)=>{const U=j.order,S=L.order;return U==null&&S==null?0:U==null?-1:S==null?1:U-S}),E.current.panelDataArrayChanged=!0},[]);Wh(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:Z,onLayout:le,storage:j}=C.current,{layout:L,panelDataArray:U}=E.current;let S=null;if(Z){const O=$G(Z,U,j);O&&(w.current=new Map(Object.entries(O.expandToSizes)),S=O.layout)}S==null&&(S=IG({panelDataArray:U}));const P=CP({layout:S,panelConstraints:U.map(O=>O.constraints)});kP(L,P)||(y(P),E.current.layout=P,le&&le(P),Yc(U,P,b.current))}});const B=ki(Z=>function(j){j.preventDefault();const L=p.current;if(!L)return()=>null;const{direction:U,dragState:S,id:P,keyboardResizeBy:O,onLayout:T}=C.current,{layout:q,panelDataArray:H}=E.current,{initialLayout:ne}=S??{},J=hD(P,Z,L);let Pe=OG(j,Z,U,S,O,L);if(Pe===0)return;const Le=U==="horizontal";document.dir==="rtl"&&Le&&(Pe=-Pe);const Fe=H.map(pe=>pe.constraints),De=$f({delta:Pe,layout:ne??q,panelConstraints:Fe,pivotIndices:J,trigger:mD(j)?"keyboard":"mouse-or-touch"}),We=!Fm(q,De);(gD(j)||vD(j))&&k.current!=Pe&&(k.current=Pe,Rw(We?Le?"horizontal":"vertical":Le?Pe<0?"horizontal-min":"horizontal-max":Pe<0?"vertical-min":"vertical-max")),We&&(y(De),E.current.layout=De,T&&T(De),Yc(H,De,b.current))},[]),W=ki((Z,le)=>{const{onLayout:j}=C.current,{layout:L,panelDataArray:U}=E.current,S=U.map(ne=>ne.constraints),{panelSize:P,pivotIndices:O}=Ll(U,Z,L);Ye(P!=null);const q=ou(U,Z)===U.length-1?P-le:le-P,H=$f({delta:q,layout:L,panelConstraints:S,pivotIndices:O,trigger:"imperative-api"});Fm(L,H)||(y(H),E.current.layout=H,j&&j(H),Yc(U,H,b.current))},[]),Y=ki((Z,le)=>{const{layout:j,panelDataArray:L}=E.current,{collapsedSize:U=0,collapsible:S}=le,{collapsedSize:P=0,collapsible:O,maxSize:T=100,minSize:q=0}=Z.constraints,{panelSize:H}=Ll(L,Z,j);Ye(H!=null),S&&O&&H===U?U!==P&&W(Z,P):H<q?W(Z,q):H>T&&W(Z,T)},[W]),te=ki((Z,le)=>{const{direction:j}=C.current,{layout:L}=E.current;if(!p.current)return;const U=Dy(Z,p.current);Ye(U);const S=yD(j,le);g({dragHandleId:Z,dragHandleRect:U.getBoundingClientRect(),initialCursorPosition:S,initialLayout:L})},[]),V=ki(()=>{LG(),g(null)},[]),$=ki(Z=>{const{panelDataArray:le}=E.current,j=ou(le,Z);j>=0&&(le.splice(j,1),delete b.current[Z.id],E.current.panelDataArrayChanged=!0)},[]),ie=EG(()=>({collapsePanel:_,direction:i,dragState:m,expandPanel:N,getPanelSize:M,getPanelStyle:R,groupId:f,isPanelCollapsed:I,isPanelExpanded:D,reevaluatePanelConstraints:Y,registerPanel:K,registerResizeHandle:B,resizePanel:W,startDragging:te,stopDragging:V,unregisterPanel:$,panelGroupElement:p.current}),[_,m,i,N,M,R,f,I,D,Y,K,B,W,te,V,$]),ke={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return vd(Iy.Provider,{value:ie},vd(u,{...d,children:e,className:n,style:{...ke,...c},ref:p,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":f}))}const _D=aD((t,e)=>vd(kD,{...t,forwardedRef:e}));kD.displayName="PanelGroup";_D.displayName="forwardRef(PanelGroup)";function ou(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Ll(t,e,n){const i=ou(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function zG({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){dc(()=>{if(t||n==null||i==null)return;const r=Dy(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");Ye(a);const l=Kh(a,i),c=fD(a,e,i);Ye(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function kS({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=er(null),u=er({onDragging:r});dc(()=>{u.current.onDragging=r});const d=lD(Iy);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:p,groupId:m,registerResizeHandle:g,startDragging:v,stopDragging:y,panelGroupElement:b}=d,w=j_(i),k=(p==null?void 0:p.dragHandleId)===w,[C,E]=cv(!1),[_,N]=cv(null),M=ki(()=>{const I=c.current;Ye(I),I.blur(),y();const{onDragging:D}=u.current;D&&D(!1)},[y]);dc(()=>{if(n)N(null);else{const I=g(w);N(()=>I)}},[n,w,g]),dc(()=>{if(n||_==null||!k)return;const I=W=>{_(W)},D=W=>{_(W)},K=c.current;Ye(K);const B=K.ownerDocument;return B.body.addEventListener("contextmenu",M),B.body.addEventListener("mousemove",I),B.body.addEventListener("touchmove",I),B.body.addEventListener("mouseleave",D),window.addEventListener("mouseup",M),window.addEventListener("touchend",M),()=>{B.body.removeEventListener("contextmenu",M),B.body.removeEventListener("mousemove",I),B.body.removeEventListener("touchmove",I),B.body.removeEventListener("mouseleave",D),window.removeEventListener("mouseup",M),window.removeEventListener("touchend",M)}},[f,n,k,_,M]),zG({disabled:n,handleId:w,resizeHandler:_,panelGroupElement:b});const R={cursor:bD(f),touchAction:"none",userSelect:"none"};return vd(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:I=>{v(w,I.nativeEvent);const D=u.current;Ye(D);const{onDragging:K}=D;K&&K(!0)},onMouseUp:M,onTouchCancel:M,onTouchEnd:M,onTouchStart:I=>{v(w,I.nativeEvent);const D=u.current;Ye(D);const{onDragging:K}=D;K&&K(!0)},ref:c,role:"separator",style:{...R,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":m,"data-resize-handle":"","data-resize-handle-active":k?"pointer":C?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w})}kS.displayName="PanelResizeHandle";var Ds=function(){return Ds=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ds.apply(this,arguments)};function CD(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function UG(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var VG=function(){};function HG(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function WG(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var ED=typeof window<"u",GG=ED?window:null,AP=function(t){return!!t.addEventListener},NP=function(t){return!!t.on},e0=function(t,e,n,i){n===void 0&&(n=GG),x.useEffect(function(){if(e&&n)return AP(n)?HG(n,t,e,i):NP(n)&&n.on(t,e,i),function(){AP(n)?WG(n,t,e,i):NP(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},KG=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},Ao=function(t,e,n,i){e===void 0&&(e=VG),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=x.useMemo(function(){var c=KG(t),u=function(d){if(c(d))return e(d)};return u},i);e0(s,l,o,a)},qG=function(t,e){return ED?window.matchMedia(t).matches:!1},YG=function(t,e){var n=x.useState(qG(t)),i=n[0],r=n[1];return x.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};const XG="modulepreload",JG=function(t){return"/VonSim8/"+t},PP={},ZG=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=JG(l),l in PP)return;PP[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":XG,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function QG(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await ZG(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:e}).then(d=>{s?s("/VonSim8/sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}function eK(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=x.useState(!1),[c,u]=x.useState(!1),[d]=x.useState(()=>QG({immediate:e,onOfflineReady(){u(!0),i==null||i()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[c,u],updateServiceWorker:d}}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const tK={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function nK(t,e,n){return(e=rK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MP(Object(n),!0).forEach(function(i){nK(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function iK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rK(t){var e=iK(t,"string");return typeof e=="symbol"?e:e+""}const TP=()=>{};let $_={},AD={},ND=null,PD={mark:TP,measure:TP};try{typeof window<"u"&&($_=window),typeof document<"u"&&(AD=document),typeof MutationObserver<"u"&&(ND=MutationObserver),typeof performance<"u"&&(PD=performance)}catch{}const{userAgent:RP=""}=$_.navigator||{},nl=$_,$t=AD,OP=ND,Bm=PD;nl.document;const qo=!!$t.documentElement&&!!$t.head&&typeof $t.addEventListener=="function"&&typeof $t.createElement=="function",MD=~RP.indexOf("MSIE")||~RP.indexOf("Trident/");var sK=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,oK=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,TD={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},aK={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},RD=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],oi="classic",Ly="duotone",lK="sharp",cK="sharp-duotone",OD=[oi,Ly,lK,cK],uK={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},dK={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},fK=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),hK={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},pK=["fak","fa-kit","fakd","fa-kit-duotone"],IP={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},mK=["kit"],gK={kit:{"fa-kit":"fak"}},vK=["fak","fakd"],yK={kit:{fak:"fa-kit"}},DP={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},zm={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},bK=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],wK=["fak","fa-kit","fakd","fa-kit-duotone"],xK={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},SK={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},kK={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},_S={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},_K=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],CS=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...bK,..._K],CK=["solid","regular","light","thin","duotone","brands"],ID=[1,2,3,4,5,6,7,8,9,10],EK=ID.concat([11,12,13,14,15,16,17,18,19,20]),AK=[...Object.keys(kK),...CK,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",zm.GROUP,zm.SWAP_OPACITY,zm.PRIMARY,zm.SECONDARY].concat(ID.map(t=>"".concat(t,"x"))).concat(EK.map(t=>"w-".concat(t))),NK={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Bo="___FONT_AWESOME___",ES=16,DD="fa",LD="svg-inline--fa",Cc="data-fa-i2svg",AS="data-fa-pseudo-element",PK="data-fa-pseudo-element-pending",F_="data-prefix",B_="data-icon",LP="fontawesome-i2svg",MK="async",TK=["HTML","HEAD","STYLE","SCRIPT"],jD=(()=>{try{return!0}catch{return!1}})();function $p(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[oi]}})}const $D=oe({},TD);$D[oi]=oe(oe(oe(oe({},{"fa-duotone":"duotone"}),TD[oi]),IP.kit),IP["kit-duotone"]);const RK=$p($D),NS=oe({},hK);NS[oi]=oe(oe(oe(oe({},{duotone:"fad"}),NS[oi]),DP.kit),DP["kit-duotone"]);const jP=$p(NS),PS=oe({},_S);PS[oi]=oe(oe({},PS[oi]),yK.kit);const z_=$p(PS),MS=oe({},SK);MS[oi]=oe(oe({},MS[oi]),gK.kit);$p(MS);const OK=sK,FD="fa-layers-text",IK=oK,DK=oe({},uK);$p(DK);const LK=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Ow=aK,jK=[...mK,...AK],ch=nl.FontAwesomeConfig||{};function $K(t){var e=$t.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function FK(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}$t&&typeof $t.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=FK($K(n));r!=null&&(ch[i]=r)});const BD={styleDefault:"solid",familyDefault:oi,cssPrefix:DD,replacementClass:LD,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ch.familyPrefix&&(ch.cssPrefix=ch.familyPrefix);const yd=oe(oe({},BD),ch);yd.autoReplaceSvg||(yd.observeMutations=!1);const Oe={};Object.keys(BD).forEach(t=>{Object.defineProperty(Oe,t,{enumerable:!0,set:function(e){yd[t]=e,uh.forEach(n=>n(Oe))},get:function(){return yd[t]}})});Object.defineProperty(Oe,"familyPrefix",{enumerable:!0,set:function(t){yd.cssPrefix=t,uh.forEach(e=>e(Oe))},get:function(){return yd.cssPrefix}});nl.FontAwesomeConfig=Oe;const uh=[];function BK(t){return uh.push(t),()=>{uh.splice(uh.indexOf(t),1)}}const ia=ES,zs={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function zK(t){if(!t||!qo)return;const e=$t.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=$t.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return $t.head.insertBefore(e,i),t}const UK="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function qh(){let t=12,e="";for(;t-- >0;)e+=UK[Math.random()*62|0];return e}function Fd(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function U_(t){return t.classList?Fd(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function zD(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function VK(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(zD(t[n]),'" '),"").trim()}function jy(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function V_(t){return t.size!==zs.size||t.x!==zs.x||t.y!==zs.y||t.rotate!==zs.rotate||t.flipX||t.flipY}function HK(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function WK(t){let{transform:e,width:n=ES,height:i=ES,startCentered:r=!1}=t,s="";return r&&MD?s+="translate(".concat(e.x/ia-n/2,"em, ").concat(e.y/ia-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/ia,"em), calc(-50% + ").concat(e.y/ia,"em)) "):s+="translate(".concat(e.x/ia,"em, ").concat(e.y/ia,"em) "),s+="scale(".concat(e.size/ia*(e.flipX?-1:1),", ").concat(e.size/ia*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var GK=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function UD(){const t=DD,e=LD,n=Oe.cssPrefix,i=Oe.replacementClass;let r=GK;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let $P=!1;function Iw(){Oe.autoAddCss&&!$P&&(zK(UD()),$P=!0)}var KK={mixout(){return{dom:{css:UD,insertCss:Iw}}},hooks(){return{beforeDOMElementCreation(){Iw()},beforeI2svg(){Iw()}}}};const zo=nl||{};zo[Bo]||(zo[Bo]={});zo[Bo].styles||(zo[Bo].styles={});zo[Bo].hooks||(zo[Bo].hooks={});zo[Bo].shims||(zo[Bo].shims=[]);var Us=zo[Bo];const VD=[],HD=function(){$t.removeEventListener("DOMContentLoaded",HD),uv=1,VD.map(t=>t())};let uv=!1;qo&&(uv=($t.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test($t.readyState),uv||$t.addEventListener("DOMContentLoaded",HD));function qK(t){qo&&(uv?setTimeout(t,0):VD.push(t))}function Fp(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?zD(t):"<".concat(e," ").concat(VK(n),">").concat(i.map(Fp).join(""),"</").concat(e,">")}function FP(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var Dw=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function YK(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function TS(t){const e=YK(t);return e.length===1?e[0].toString(16):null}function XK(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function BP(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function RS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=BP(e);typeof Us.hooks.addPack=="function"&&!i?Us.hooks.addPack(t,BP(e)):Us.styles[t]=oe(oe({},Us.styles[t]||{}),r),t==="fas"&&RS("fa",e)}const{styles:Yh,shims:JK}=Us,WD=Object.keys(z_),ZK=WD.reduce((t,e)=>(t[e]=Object.keys(z_[e]),t),{});let H_=null,GD={},KD={},qD={},YD={},XD={};function QK(t){return~jK.indexOf(t)}function eq(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!QK(r)?r:null}const JD=()=>{const t=i=>Dw(Yh,(r,s,o)=>(r[o]=Dw(s,i,{}),r),{});GD=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),KD=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),XD=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in Yh||Oe.autoFetchSvg,n=Dw(JK,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});qD=n.names,YD=n.unicodes,H_=$y(Oe.styleDefault,{family:Oe.familyDefault})};BK(t=>{H_=$y(t.styleDefault,{family:Oe.familyDefault})});JD();function W_(t,e){return(GD[t]||{})[e]}function tq(t,e){return(KD[t]||{})[e]}function sc(t,e){return(XD[t]||{})[e]}function ZD(t){return qD[t]||{prefix:null,iconName:null}}function nq(t){const e=YD[t],n=W_("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function il(){return H_}const QD=()=>({prefix:null,iconName:null,rest:[]});function iq(t){let e=oi;const n=WD.reduce((i,r)=>(i[r]="".concat(Oe.cssPrefix,"-").concat(r),i),{});return OD.forEach(i=>{(t.includes(n[i])||t.some(r=>ZK[i].includes(r)))&&(e=i)}),e}function $y(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=oi}=e,i=RK[n][t];if(n===Ly&&!t)return"fad";const r=jP[n][t]||jP[n][i],s=t in Us.styles?t:null;return r||s||null}function rq(t){let e=[],n=null;return t.forEach(i=>{const r=eq(Oe.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function zP(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function Fy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=CS.concat(wK),s=zP(t.filter(d=>r.includes(d))),o=zP(t.filter(d=>!CS.includes(d))),a=s.filter(d=>(i=d,!RD.includes(d))),[l=null]=a,c=iq(s),u=oe(oe({},rq(o)),{},{prefix:$y(l,{family:c})});return oe(oe(oe({},u),lq({values:t,family:c,styles:Yh,config:Oe,canonical:u,givenPrefix:i})),sq(n,i,u))}function sq(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?ZD(r):{},o=sc(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!Yh.far&&Yh.fas&&!Oe.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const oq=OD.filter(t=>t!==oi||t!==Ly),aq=Object.keys(_S).filter(t=>t!==oi).map(t=>Object.keys(_S[t])).flat();function lq(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===Ly,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||c||u)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&oq.includes(n)&&(Object.keys(s).find(f=>aq.includes(f))||o.autoFetchSvg)){const f=fK.get(n).defaultShortPrefixId;i.prefix=f,i.iconName=sc(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=il()||"fas"),i}class cq{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=oe(oe({},this.definitions[s]||{}),r[s]),RS(s,r[s]);const o=z_[oi][s];o&&RS(o,r[s]),JD()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let UP=[],Nu={};const Uu={},uq=Object.keys(Uu);function dq(t,e){let{mixoutsTo:n}=e;return UP=t,Nu={},Object.keys(Uu).forEach(i=>{uq.indexOf(i)===-1&&delete Uu[i]}),UP.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{Nu[o]||(Nu[o]=[]),Nu[o].push(s[o])})}i.provides&&i.provides(Uu)}),n}function OS(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Nu[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function Ec(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Nu[t]||[]).forEach(s=>{s.apply(null,n)})}function rl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Uu[t]?Uu[t].apply(null,e):void 0}function IS(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||il();if(e)return e=sc(n,e)||e,FP(eL.definitions,n,e)||FP(Us.styles,n,e)}const eL=new cq,fq=()=>{Oe.autoReplaceSvg=!1,Oe.observeMutations=!1,Ec("noAuto")},hq={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return qo?(Ec("beforeI2svg",t),rl("pseudoElements2svg",t),rl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Oe.autoReplaceSvg===!1&&(Oe.autoReplaceSvg=!0),Oe.observeMutations=!0,qK(()=>{mq({autoReplaceSvgRoot:e}),Ec("watch",t)})}},pq={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:sc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=$y(t[0]);return{prefix:n,iconName:sc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Oe.cssPrefix,"-"))>-1||t.match(OK))){const e=Fy(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||il(),iconName:sc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=il();return{prefix:e,iconName:sc(e,t)||t}}}},vr={noAuto:fq,config:Oe,dom:hq,parse:pq,library:eL,findIconDefinition:IS,toHtml:Fp},mq=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=$t}=t;(Object.keys(Us.styles).length>0||Oe.autoFetchSvg)&&qo&&Oe.autoReplaceSvg&&vr.dom.i2svg({node:e})};function By(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>Fp(n))}}),Object.defineProperty(t,"node",{get:function(){if(!qo)return;const n=$t.createElement("div");return n.innerHTML=t.html,n.children}}),t}function gq(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(V_(o)&&n.found&&!i.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};r.style=jy(oe(oe({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function vq(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Oe.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:oe(oe({},r),{},{id:o}),children:i}]}]}function G_(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:f,height:p}=n.found?n:e,m=vK.includes(i),g=[Oe.replacementClass,r?"".concat(Oe.cssPrefix,"-").concat(r):""].filter(C=>u.classes.indexOf(C)===-1).filter(C=>C!==""||!!C).concat(u.classes).join(" ");let v={children:[],attributes:oe(oe({},u.attributes),{},{"data-prefix":i,"data-icon":r,class:g,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(p)})};const y=m&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/p*16*.0625,"em")}:{};d&&(v.attributes[Cc]=""),a&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(c||qh())},children:[a]}),delete v.attributes.title);const b=oe(oe({},v),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:oe(oe({},y),u.styles)}),{children:w,attributes:k}=n.found&&e.found?rl("generateAbstractMask",b)||{children:[],attributes:{}}:rl("generateAbstractIcon",b)||{children:[],attributes:{}};return b.children=w,b.attributes=k,o?vq(b):gq(b)}function VP(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=oe(oe(oe({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Cc]="");const c=oe({},o.styles);V_(r)&&(c.transform=WK({transform:r,startCentered:!0,width:n,height:i}),c["-webkit-transform"]=c.transform);const u=jy(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function yq(t){const{content:e,title:n,extra:i}=t,r=oe(oe(oe({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=jy(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:Lw}=Us;function DS(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Ow.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Ow.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Ow.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const bq={found:!1,width:512,height:512};function wq(t,e){!jD&&!Oe.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function LS(t,e){let n=e;return e==="fa"&&Oe.styleDefault!==null&&(e=il()),new Promise((i,r)=>{if(n==="fa"){const s=ZD(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Lw[e]&&Lw[e][t]){const s=Lw[e][t];return i(DS(s))}wq(t,e),i(oe(oe({},bq),{},{icon:Oe.showMissingIcons&&t?rl("missingIconAbstract")||{}:{}}))})}const HP=()=>{},jS=Oe.measurePerformance&&Bm&&Bm.mark&&Bm.measure?Bm:{mark:HP,measure:HP},Bf='FA "6.7.1"',xq=t=>(jS.mark("".concat(Bf," ").concat(t," begins")),()=>tL(t)),tL=t=>{jS.mark("".concat(Bf," ").concat(t," ends")),jS.measure("".concat(Bf," ").concat(t),"".concat(Bf," ").concat(t," begins"),"".concat(Bf," ").concat(t," ends"))};var K_={begin:xq,end:tL};const t0=()=>{};function WP(t){return typeof(t.getAttribute?t.getAttribute(Cc):null)=="string"}function Sq(t){const e=t.getAttribute?t.getAttribute(F_):null,n=t.getAttribute?t.getAttribute(B_):null;return e&&n}function kq(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Oe.replacementClass)}function _q(){return Oe.autoReplaceSvg===!0?n0.replace:n0[Oe.autoReplaceSvg]||n0.replace}function Cq(t){return $t.createElementNS("http://www.w3.org/2000/svg",t)}function Eq(t){return $t.createElement(t)}function nL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?Cq:Eq}=e;if(typeof t=="string")return $t.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(nL(s,{ceFn:n}))}),i}function Aq(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const n0={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(nL(n),e)}),e.getAttribute(Cc)===null&&Oe.keepOriginalSource){let n=$t.createComment(Aq(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~U_(e).indexOf(Oe.replacementClass))return n0.replace(t);const i=new RegExp("".concat(Oe.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Oe.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>Fp(s)).join(`
`);e.setAttribute(Cc,""),e.innerHTML=r}};function GP(t){t()}function iL(t,e){const n=typeof e=="function"?e:t0;if(t.length===0)n();else{let i=GP;Oe.mutateApproach===MK&&(i=nl.requestAnimationFrame||GP),i(()=>{const r=_q(),s=K_.begin("mutate");t.map(r),s(),n()})}}let q_=!1;function rL(){q_=!0}function $S(){q_=!1}let dv=null;function KP(t){if(!OP||!Oe.observeMutations)return;const{treeCallback:e=t0,nodeCallback:n=t0,pseudoElementsCallback:i=t0,observeMutationsRoot:r=$t}=t;dv=new OP(s=>{if(q_)return;const o=il();Fd(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!WP(a.addedNodes[0])&&(Oe.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Oe.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&WP(a.target)&&~LK.indexOf(a.attributeName))if(a.attributeName==="class"&&Sq(a.target)){const{prefix:l,iconName:c}=Fy(U_(a.target));a.target.setAttribute(F_,l||o),c&&a.target.setAttribute(B_,c)}else kq(a.target)&&n(a.target)})}),qo&&dv.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Nq(){dv&&dv.disconnect()}function Pq(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function Mq(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=Fy(U_(t));return r.prefix||(r.prefix=il()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=tq(r.prefix,t.innerText)||W_(r.prefix,TS(t.innerText))),!r.iconName&&Oe.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function Tq(t){const e=Fd(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Oe.autoA11y&&(n?e["aria-labelledby"]="".concat(Oe.replacementClass,"-title-").concat(i||qh()):(e["aria-hidden"]="true",e.focusable="false")),e}function Rq(){return{iconName:null,title:null,titleId:null,prefix:null,transform:zs,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function qP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=Mq(t),s=Tq(t),o=OS("parseNodeAttributes",{},t);let a=e.styleParser?Pq(t):[];return oe({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:zs,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:Oq}=Us;function sL(t){const e=Oe.autoReplaceSvg==="nest"?qP(t,{styleParser:!1}):qP(t);return~e.extra.classes.indexOf(FD)?rl("generateLayersText",t,e):rl("generateSvgReplacementMutation",t,e)}function Iq(){return[...pK,...CS]}function YP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!qo)return Promise.resolve();const n=$t.documentElement.classList,i=u=>n.add("".concat(LP,"-").concat(u)),r=u=>n.remove("".concat(LP,"-").concat(u)),s=Oe.autoFetchSvg?Iq():RD.concat(Object.keys(Oq));s.includes("fa")||s.push("fa");const o=[".".concat(FD,":not([").concat(Cc,"])")].concat(s.map(u=>".".concat(u,":not([").concat(Cc,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=Fd(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=K_.begin("onTree"),c=a.reduce((u,d)=>{try{const f=sL(d);f&&u.push(f)}catch(f){jD||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{iL(f,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function Dq(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;sL(t).then(n=>{n&&iL([n],e)})}function Lq(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:IS(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:IS(r||{})),t(i,oe(oe({},n),{},{mask:r}))}}const jq=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=zs,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:p}=t;return By(oe({type:"icon"},t),()=>(Ec("beforeDOMElementCreation",{iconDefinition:t,params:e}),Oe.autoA11y&&(o?c["aria-labelledby"]="".concat(Oe.replacementClass,"-title-").concat(a||qh()):(c["aria-hidden"]="true",c.focusable="false")),G_({icons:{main:DS(p),mask:r?DS(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:oe(oe({},zs),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var $q={mixout(){return{icon:Lq(jq)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=YP,t.nodeCallback=Dq,t}}},provides(t){t.i2svg=function(e){const{node:n=$t,callback:i=()=>{}}=e;return YP(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((f,p)=>{Promise.all([LS(i,o),c.iconName?LS(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(m=>{let[g,v]=m;f([e,G_({icons:{main:g,mask:v},prefix:o,iconName:i,transform:a,symbol:l,maskId:u,title:r,titleId:s,extra:d,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=jy(o);a.length>0&&(i.style=a);let l;return V_(s)&&(l=rl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},Fq={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return By({type:"layer"},()=>{Ec("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(Oe.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},Bq={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return By({type:"counter",content:t},()=>(Ec("beforeDOMElementCreation",{content:t,params:e}),yq({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(Oe.cssPrefix,"-layers-counter"),...i]}})))}}}},zq={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=zs,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return By({type:"text",content:t},()=>(Ec("beforeDOMElementCreation",{content:t,params:e}),VP({content:t,transform:oe(oe({},zs),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(Oe.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(MD){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return Oe.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,VP({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const Uq=new RegExp('"',"ug"),XP=[1105920,1112319],JP=oe(oe(oe(oe({},{FontAwesome:{normal:"fas",400:"fas"}}),dK),NK),xK),FS=Object.keys(JP).reduce((t,e)=>(t[e.toLowerCase()]=JP[e],t),{}),Vq=Object.keys(FS).reduce((t,e)=>{const n=FS[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function Hq(t){const e=t.replace(Uq,""),n=XK(e,0),i=n>=XP[0]&&n<=XP[1],r=e.length===2?e[0]===e[1]:!1;return{value:TS(r?e[0]:e),isSecondary:i||r}}function Wq(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(FS[n]||{})[r]||Vq[n]}function ZP(t,e){const n="".concat(PK).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=Fd(t.children).filter(f=>f.getAttribute(AS)===e)[0],a=nl.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(IK),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),i();if(c&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let p=Wq(l,u);const{value:m,isSecondary:g}=Hq(f),v=c[0].startsWith("FontAwesome");let y=W_(p,m),b=y;if(v){const w=nq(m);w.iconName&&w.prefix&&(y=w.iconName,p=w.prefix)}if(y&&!g&&(!o||o.getAttribute(F_)!==p||o.getAttribute(B_)!==b)){t.setAttribute(n,b),o&&t.removeChild(o);const w=Rq(),{extra:k}=w;k.attributes[AS]=e,LS(y,p).then(C=>{const E=G_(oe(oe({},w),{},{icons:{main:C,mask:QD()},prefix:p,iconName:b,extra:k,watchable:!0})),_=$t.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(_,t.firstChild):t.appendChild(_),_.outerHTML=E.map(N=>Fp(N)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function Gq(t){return Promise.all([ZP(t,"::before"),ZP(t,"::after")])}function Kq(t){return t.parentNode!==document.head&&!~TK.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(AS)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function QP(t){if(qo)return new Promise((e,n)=>{const i=Fd(t.querySelectorAll("*")).filter(Kq).map(Gq),r=K_.begin("searchPseudoElements");rL(),Promise.all(i).then(()=>{r(),$S(),e()}).catch(()=>{r(),$S(),n()})})}var qq={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=QP,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=$t}=e;Oe.searchPseudoElements&&QP(n)}}};let e3=!1;var Yq={mixout(){return{dom:{unwatch(){rL(),e3=!0}}}},hooks(){return{bootstrap(){KP(OS("mutationObserverCallbacks",{}))},noAuto(){Nq()},watch(t){const{observeMutationsRoot:e}=t;e3?$S():KP(OS("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const t3=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var Xq={mixout(){return{parse:{transform:t=>t3(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=t3(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:u,path:d};return{tag:"g",attributes:oe({},f.outer),children:[{tag:"g",attributes:oe({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:oe(oe({},n.icon.attributes),f.path)}]}]}}}};const jw={x:0,y:0,width:"100%",height:"100%"};function n3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function Jq(t){return t.tag==="g"?t.children:[t]}var Zq={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?Fy(n.split(" ").map(r=>r.trim())):QD();return i.prefix||(i.prefix=il()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=r,{width:u,icon:d}=s,f=HK({transform:a,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:oe(oe({},jw),{},{fill:"white"})},m=c.children?{children:c.children.map(n3)}:{},g={tag:"g",attributes:oe({},f.inner),children:[n3(oe({tag:c.tag,attributes:oe(oe({},c.attributes),f.path)},m))]},v={tag:"g",attributes:oe({},f.outer),children:[g]},y="mask-".concat(o||qh()),b="clip-".concat(o||qh()),w={tag:"mask",attributes:oe(oe({},jw),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},k={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:Jq(d)},w]};return n.push(k,{tag:"rect",attributes:oe({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(y,")")},jw)}),{children:n,attributes:i}}}},Qq={provides(t){let e=!1;nl.matchMedia&&(e=nl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:oe(oe({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=oe(oe({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:oe(oe({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:oe(oe({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:oe(oe({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:oe(oe({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:oe(oe({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},eY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},tY=[KK,$q,Fq,Bq,zq,qq,Yq,Xq,Zq,Qq,eY];dq(tY,{mixoutsTo:vr});vr.noAuto;vr.config;vr.library;vr.dom;const BS=vr.parse;vr.findIconDefinition;vr.toHtml;const nY=vr.icon;vr.layer;vr.text;vr.counter;var oL={exports:{}},iY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rY=iY,sY=rY;function aL(){}function lL(){}lL.resetWarningCache=aL;var oY=function(){function t(i,r,s,o,a,l){if(l!==sY){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:lL,resetWarningCache:aL};return n.PropTypes=n,n};oL.exports=oY();var aY=oL.exports;const it=Fc(aY);function i3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Os(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i3(Object(n),!0).forEach(function(i){Pu(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function fv(t){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fv(t)}function Pu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lY(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function cY(t,e){if(t==null)return{};var n=lY(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function zS(t){return uY(t)||dY(t)||fY(t)||hY()}function uY(t){if(Array.isArray(t))return US(t)}function dY(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fY(t,e){if(t){if(typeof t=="string")return US(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return US(t,e)}}function US(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function hY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pY(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,f=t.fixedWidth,p=t.inverse,m=t.border,g=t.listItem,v=t.flip,y=t.size,b=t.rotation,w=t.pull,k=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":f,"fa-inverse":p,"fa-border":m,"fa-li":g,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},Pu(e,"fa-".concat(y),typeof y<"u"&&y!==null),Pu(e,"fa-rotate-".concat(b),typeof b<"u"&&b!==null&&b!==0),Pu(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),Pu(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(k).map(function(C){return k[C]?C:null}).filter(function(C){return C})}function mY(t){return t=t-0,t===t}function cL(t){return mY(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var gY=["style"];function vY(t){return t.charAt(0).toUpperCase()+t.slice(1)}function yY(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=cL(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[vY(r)]=s:e[r]=s,e},{})}function uL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return uL(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=yY(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[cL(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=cY(n,gY);return r.attrs.style=Os(Os({},r.attrs.style),o),t.apply(void 0,[e.tag,Os(Os({},r.attrs),a)].concat(zS(i)))}var dL=!1;try{dL=!0}catch{}function bY(){if(!dL&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function r3(t){if(t&&fv(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(BS.icon)return BS.icon(t);if(t===null)return null;if(t&&fv(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function $w(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Pu({},t,e):{}}var s3={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},$e=Dt.forwardRef(function(t,e){var n=Os(Os({},s3),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=r3(i),d=$w("classes",[].concat(zS(pY(n)),zS((o||"").split(" ")))),f=$w("transform",typeof n.transform=="string"?BS.transform(n.transform):n.transform),p=$w("mask",r3(r)),m=nY(u,Os(Os(Os(Os({},d),f),p),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!m)return bY("Could not find icon",u),null;var g=m.abstract,v={ref:e};return Object.keys(n).forEach(function(y){s3.hasOwnProperty(y)||(v[y]=n[y])}),wY(g[0],v)});$e.displayName="FontAwesomeIcon";$e.propTypes={beat:it.bool,border:it.bool,beatFade:it.bool,bounce:it.bool,className:it.string,fade:it.bool,flash:it.bool,mask:it.oneOfType([it.object,it.array,it.string]),maskId:it.string,fixedWidth:it.bool,inverse:it.bool,flip:it.oneOf([!0,!1,"horizontal","vertical","both"]),icon:it.oneOfType([it.object,it.array,it.string]),listItem:it.bool,pull:it.oneOf(["right","left"]),pulse:it.bool,rotation:it.oneOf([0,90,180,270]),shake:it.bool,size:it.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:it.bool,spinPulse:it.bool,spinReverse:it.bool,symbol:it.oneOfType([it.bool,it.string]),title:it.string,titleId:it.string,transform:it.oneOfType([it.string,it.object]),swapOpacity:it.bool};var wY=uL.bind(null,Dt.createElement);function fL(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=fL(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function ee(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=fL(t))&&(i&&(i+=" "),i+=e);return i}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const o3={prefix:"fas",iconName:"info",icon:[192,512,[],"f129","M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"]},xY={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},Y_=xY,fc={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},SY={prefix:"fas",iconName:"compress",icon:[448,512,[],"f066","M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"]},kY={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},_Y={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},CY={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},EY={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"]},AY={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},NY=AY,zy={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},PY={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},MY={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},TY=MY,Fw={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},RY={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},hL=RY,OY={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},pL=OY,IY={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M267.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160L64 241 64 96c0-17.7-14.3-32-32-32S0 78.3 0 96L0 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-145 11.5 9.6 192 160z"]},mL=IY,a3={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},bd={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},DY={prefix:"fas",iconName:"expand",icon:[448,512,[],"f065","M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"]},LY={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},Uy=LY,gL={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},jY={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},$Y={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},vL={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},yL={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},FY={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},BY=FY,zY={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]},UY={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},bL={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},VY={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},VS=VY,HY={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 80l0 48c0 44.2-100.3 80-224 80S0 172.2 0 128L0 80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6L448 288c0 44.2-100.3 80-224 80S0 332.2 0 288L0 186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6l0 85.9c0 44.2-100.3 80-224 80S0 476.2 0 432l0-85.9z"]},Bp={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]},wL={default:"bg-stone-800 text-white hover:bg-stone-700 focus:ring-stone-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-stone-600 bg-transparent text-white hover:bg-stone-800 focus:ring-stone-500",secondary:"bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500",ghost:"bg-transparent text-stone-300 hover:bg-stone-800 hover:text-white focus:ring-stone-500",link:"bg-transparent text-mantis-400 hover:text-mantis-300 hover:underline focus:ring-mantis-500",primary:"bg-mantis-600 text-white hover:bg-mantis-700 focus:ring-mantis-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",error:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},WY={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"},kt=x.memo(x.forwardRef(({variant:t="default",size:e="md",isLoading:n=!1,loadingText:i,leftIcon:r,rightIcon:s,disabled:o=!1,fullWidth:a=!1,className:l,children:c,onClick:u,type:d="button","aria-label":f,title:p,...m},g)=>{const v=o||n;return h.jsxs("button",{ref:g,type:d,disabled:v,onClick:u,"aria-label":f,title:p,className:ee("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none","active:scale-95 hover:scale-105",wL[t],WY[e],a&&"w-full",l),...m,children:[n&&h.jsx($e,{icon:yL,className:"animate-spin","aria-hidden":"true"}),!n&&r&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:r}),h.jsx("span",{children:n&&i?i:c}),!n&&s&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:s})]})}));kt.displayName="Button";const i0=x.memo(x.forwardRef(({icon:t,variant:e="ghost",size:n="md",isLoading:i=!1,disabled:r=!1,className:s,onClick:o,"aria-label":a,title:l,...c},u)=>{const d=r||i,f={sm:"size-8",md:"size-10",lg:"size-12",xl:"size-14"};return h.jsx("button",{ref:u,disabled:d,onClick:o,"aria-label":a,title:l,className:ee("inline-flex items-center justify-center rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none","active:scale-95 hover:scale-105",wL[e],f[n],s),...c,children:i?h.jsx($e,{icon:yL,className:"animate-spin","aria-hidden":"true"}):h.jsx("span",{className:"flex items-center justify-center","aria-hidden":"true",children:t})})}));i0.displayName="IconButton";const GY=x.memo(({children:t,orientation:e="horizontal",className:n})=>h.jsx("div",{className:ee("inline-flex",e==="horizontal"?"flex-row":"flex-col",n),role:"group",children:t}));GY.displayName="ButtonGroup";const xL={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2","top-start":"bottom-full left-0 mb-2","top-end":"bottom-full right-0 mb-2","bottom-start":"top-full left-0 mt-2","bottom-end":"top-full right-0 mt-2"},SL={top:"top-full left-1/2 transform -translate-x-1/2 border-t-stone-800",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-stone-800",left:"left-full top-1/2 transform -translate-y-1/2 border-l-stone-800",right:"right-full top-1/2 transform -translate-y-1/2 border-r-stone-800","top-start":"top-full left-4 border-t-stone-800","top-end":"top-full right-4 border-t-stone-800","bottom-start":"bottom-full left-4 border-b-stone-800","bottom-end":"bottom-full right-4 border-b-stone-800"},hc=x.memo(({content:t,children:e,position:n="top",delay:i=200,className:r,maxWidth:s=200,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=x.useState(!1),[u,d]=x.useState(n),f=x.useRef(null),p=x.useRef(null),m=x.useRef(),g=x.useCallback(()=>{a||(m.current=setTimeout(()=>{c(!0)},i))},[a,i]),v=x.useCallback(()=>{m.current&&clearTimeout(m.current),c(!1)},[]);return x.useEffect(()=>{if(!l||!p.current||!f.current)return;const y=p.current,w=f.current.getBoundingClientRect(),k=y.getBoundingClientRect();let C=n;w.left+k.width>window.innerWidth&&(n.includes("right")?C="left":n.includes("top")?C="top-end":n.includes("bottom")&&(C="bottom-end")),w.left-k.width<0&&(n.includes("left")?C="right":n.includes("top")?C="top-start":n.includes("bottom")&&(C="bottom-start")),w.top-k.height<0&&n.includes("top")&&(C="bottom"),w.bottom+k.height>window.innerHeight&&n.includes("bottom")&&(C="top"),d(C)},[l,n]),h.jsxs("div",{ref:f,className:ee("relative inline-block",r),onMouseEnter:g,onMouseLeave:v,onFocus:g,onBlur:v,children:[e,l&&h.jsxs("div",{ref:p,className:ee("absolute z-50 px-3 py-2 text-sm text-white bg-stone-800 rounded-lg shadow-lg border border-stone-600","animate-fade-in",xL[u]),style:{maxWidth:`${s}px`},role:"tooltip",children:[t,o&&h.jsx("div",{className:ee("absolute w-0 h-0 border-4 border-transparent",SL[u])})]})]})});hc.displayName="Tooltip";const KY=x.memo(({content:t,className:e,size:n="md"})=>{const i={sm:"size-3",md:"size-4",lg:"size-5"};return h.jsx(hc,{content:t,className:e,children:h.jsx($e,{icon:pL,className:ee("text-stone-400 hover:text-stone-300 cursor-help transition-colors",i[n])})})});KY.displayName="InfoTooltip";const qY=x.memo(({content:t,trigger:e,position:n="top",delay:i=200,className:r,maxWidth:s=200,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=x.useState(!1),u=x.useRef(null),d=x.useRef(null),f=x.useRef(),p=x.useCallback(()=>{a||(f.current=setTimeout(()=>{c(!0)},i))},[a,i]),m=x.useCallback(()=>{f.current&&clearTimeout(f.current),c(!1)},[]);return h.jsxs("div",{ref:u,className:ee("relative inline-block",r),onMouseEnter:p,onMouseLeave:m,onFocus:p,onBlur:m,children:[e,l&&h.jsxs("div",{ref:d,className:ee("absolute z-50 px-3 py-2 text-sm text-white bg-stone-800 rounded-lg shadow-lg border border-stone-600","animate-fade-in",xL[n]),style:{maxWidth:`${s}px`},role:"tooltip",children:[t,o&&h.jsx("div",{className:ee("absolute w-0 h-0 border-4 border-transparent",SL[n])})]})]})});qY.displayName="CustomTooltip";const YY=[{name:"Documentación",url:"https://vonsim.github.io/docs",icon:"icon-[lucide--book-open]"},{name:"GitHub",url:"https://github.com/vonsim/vonsim8",icon:tK},{name:"Reportar Bug",url:"https://github.com/vonsim/vonsim8/issues",icon:"icon-[lucide--bug]"}],kL=x.memo(({name:t,url:e,icon:n})=>h.jsx(hc,{content:t,position:"top",children:h.jsx(kt,{variant:"ghost",size:"sm",onClick:()=>window.open(e,"_blank"),className:"hover-lift","aria-label":t,children:typeof n=="string"?h.jsx("span",{className:ee(n,"size-4")}):h.jsx($e,{icon:n,className:"size-4"})})}));kL.displayName="SocialLink";const _L=x.memo(()=>h.jsx("footer",{className:"px-3 py-1.5 text-xs text-white bg-black","data-testid":"footer",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-stone-400",children:"© Copyright 2017-2025 — III-LIDI, FI, UNLP, UNER"}),h.jsx("div",{className:"flex items-center gap-1","data-testid":"footer-links",children:YY.map(t=>h.jsx(kL,{name:t.name,url:t.url,icon:t.icon},t.name))})]})}));_L.displayName="Footer";function Xh(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}function CL(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const EL=["en","es"];function X_(t){return function(n,i,...r){const s=CL(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}class rn{constructor(e,n){fe(this,"start");fe(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new rn(i,r)}toJSON(){return this.range}}function Jh(t){const e=t.charCodeAt(0);return F.fitsUnsigned(e,8)?e:null}function J_(t){return F.fitsUnsigned(t,8)?String.fromCharCode(t):null}function AL(t){return XY.at(t)??null}const XY=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","SHY","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ"];var Bt,Ht;const lt=class lt{constructor(e,n){Ie(this,Bt);Ie(this,Ht);Q(this,Bt,e|0),Q(this,Ht,n)}get size(){return A(this,Ht)}is8bits(){return A(this,Ht)===8}is16bits(){return A(this,Ht)===16}get unsigned(){return A(this,Bt)}get signed(){return A(this,Bt)<=lt.maxSignedValue(A(this,Ht))?A(this,Bt):A(this,Bt)-(lt.maxValue(A(this,Ht))+1)}get low(){return this.is8bits()?this:lt.fromUnsigned(A(this,Bt)&lt.maxValue(8),8)}get high(){return this.is8bits()?new lt(0,8):lt.fromUnsigned(A(this,Bt)>>8&lt.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return lt.fromUnsigned(A(this,Bt)&~lt.maxValue(8)|e.unsigned,A(this,Ht))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return lt.fromUnsigned(A(this,Bt)&lt.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Ht))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Ht)}`);return(A(this,Bt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Ht))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Ht)}`);return n?lt.fromUnsigned(A(this,Bt)|1<<e,A(this,Ht)):lt.fromUnsigned(A(this,Bt)&~(1<<e),A(this,Ht))}add(e){return e=Number(e),lt.fromUnsigned(A(this,Bt)+e,A(this,Ht))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,Bt)===A(e,Bt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Ht));for(let n=0;n<A(this,Ht);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,Bt).toString(16).padStart(A(this,Ht)/4,"0").toUpperCase();case"bin":return A(this,Bt).toString(2).padStart(A(this,Ht),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Ht)===8?J_(A(this,Bt))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,Ht)===8?AL(A(this,Bt))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,Bt)}valueOf(){return A(this,Bt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=lt.minSignedValue(n)&&e<=lt.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=lt.minValue()&&e<=lt.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=lt.minSignedValue(n)&&e<=lt.maxSignedValue(n)}static fromUnsigned(e,n){if(!lt.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new lt(e,n)}static fromSigned(e,n){if(!lt.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new lt(e+lt.maxValue(n)+1,n):new lt(e,n)}static fromNumber(e,n){return e<0?lt.fromSigned(e,n):lt.fromUnsigned(e,n)}static fromChar(e){const n=Jh(e)??-1;return lt.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*lt.maxValue(e));return new lt(n,e)}static zero(e){return new lt(0,e)}};Bt=new WeakMap,Ht=new WeakMap;let F=lt;var mo;const ma=class ma{constructor(e){Ie(this,mo);Q(this,mo,e)}get value(){return A(this,mo).unsigned}get byte(){return A(this,mo)}toString(e=!1){let n=A(this,mo).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,mo).toJSON()}valueOf(){return A(this,mo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=ma.MIN_ADDRESS&&e<=ma.MAX_ADDRESS}static from(e){if(e=Number(e),!ma.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,16);return new ma(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};mo=new WeakMap,fe(ma,"MIN_ADDRESS",0),fe(ma,"MAX_ADDRESS",255);let Se=ma;var go;const ga=class ga{constructor(e){Ie(this,go);Q(this,go,e)}get value(){return A(this,go).unsigned}get byte(){return A(this,go)}toString(e=!0){let n=A(this,go).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,go).toJSON()}valueOf(){return A(this,go).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=ga.MIN_ADDRESS&&e<=ga.MAX_ADDRESS}static from(e){if(e=Number(e),!ga.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,8);return new ga(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};go=new WeakMap,fe(ga,"MIN_ADDRESS",0),fe(ga,"MAX_ADDRESS",127);let hr=ga;const l3=Se.from(Se.MAX_ADDRESS).toString(),JY=hr.from(hr.MAX_ADDRESS).toString(),ZY={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Se.format(t)} is out of range (max memory address: ${l3}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`This instruction would be placed in address ${Se.format(t)}, which is outside the memory range (max memory address: ${l3}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${JY}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},c3=Se.from(Se.MAX_ADDRESS).toString(),QY=hr.from(hr.MAX_ADDRESS).toString(),eX={"address-has-code":t=>`La dirección de memoria ${Se.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${Se.format(t)} está fuera de rango (dirección máxima de memoria: ${c3}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vacío. El programa debe tener, al menos, una instrucción END.","end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${Se.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${c3}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${QY}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${Se.format(t)}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instrucción sería colocada en la dirección ${Se.format(t)}, la cual ya está reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carácter solo puede contener un carácter.","empty-character":"Los carácter no puede estar vacío.","invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-character":"Carácter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},tX=X_({en:ZY,es:eX});class se extends Error{constructor(n,...i){super();fe(this,"code");fe(this,"context");fe(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof rn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return tX(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof se?n:new se("unexpected-error",n)}}const Z_=[[0,F.fromUnsigned(160,8)],[3,F.fromUnsigned(176,8)],[6,F.fromUnsigned(192,8)],[7,F.fromUnsigned(208,8)]],u3=new Set(...Z_.map(([t])=>[t]));var xa,Ju;class nX{constructor(){fe(this,"codeMemory",new Set);fe(this,"labels",new Map);fe(this,"hasORG",!1);Ie(this,xa,!1);Ie(this,Ju,!1)}loadStatements(e){if(A(this,xa))throw new Error("Tried to load statements twice");Q(this,xa,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new se("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Se.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Se.from(0)})}return n}computeAddresses(e){if(A(this,Ju))throw new Error("Tried to compute addresses twice");Q(this,Ju,!0),this.codeMemory.clear();const n=new Set,i=e.some(u=>u.isInstruction()&&u.instruction==="INT");if(this.hasORG=e.some(u=>u.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new se("missing-org").at(e[0].position);let r=i&&!this.hasORG?8:this.hasORG?32:0,s=null,o=r;const a=[],l=[],c=[];for(const u of e)u.isInstruction()?a.push(u):u.isOriginChange()?l.push(u):u.isDataDirective()&&c.push(u);if(this.hasORG){const u=[],d=[];return Xh(e,f=>{if(f.isEnd()||f.isDataDirective()&&f.directive==="EQU")return;if(f.isOriginChange()){r=f.newAddress;return}const p=r;if(p===null)throw new se("missing-org").at(f);const m=f.length,g=p,v=p+m-1;for(const b of d)if(Math.max(g,b.start)<=Math.min(v,b.end)){u.push(new se("occupied-address",Se.from(g)).at(f));return}d.push({start:g,end:v,statement:f});for(let b=0;b<m;b++){if(!Se.inRange(p+b))throw new se("instruction-out-of-range",p+b).at(f);const w=Se.from(p+b);if(n.has(w.value))throw new se("occupied-address",w).at(f);if(i&&u3.has(w.value))throw new se("reserved-address",w).at(f);n.add(w.value),f.isInstruction()&&this.codeMemory.add(w.value)}const y=Se.from(p);f.setStart(y),f.label&&this.labels.set(f.label,{type:f.isInstruction()?"instruction":f.directive,address:y}),(f.isDataDirective()||f.isInstruction())&&(r+=m,o=Math.max(o,r))},se.from),u}else return Xh([...a,...l,...c],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const g=d.newAddress;g<32?s=g:r=g;return}let f;if(d.isDataDirective())s===null&&(s=o),f=s;else if(d.isInstruction())f=r;else throw new se("missing-org").at(d);const p=d.length;for(let g=0;g<p;g++){if(!Se.inRange(f+g))throw new se("instruction-out-of-range",f+g).at(d);const v=Se.from(f+g);if(n.has(v.value))throw new se("occupied-address",v).at(d);if(i&&u3.has(v.value))throw new se("reserved-address",v).at(d);n.add(v.value),d.isInstruction()&&this.codeMemory.add(v.value)}const m=Se.from(f);if(d.setStart(m),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:m}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=p}else d.isInstruction()&&(r+=p,o=Math.max(o,r))},se.from)}labelExists(e){if(!A(this,xa))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,xa))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,xa))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,Ju))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Se&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}xa=new WeakMap,Ju=new WeakMap;const iX=["AL","BL","CL","DL","AH","BH","CH","DH"],NL=["AX","BX","CX","DX","SP"],hv=[...iX,...NL],Q_=["DB","DW","EQU"],eC=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],rX=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...hv,...eC,...Q_];class sX{constructor(e,n,i){fe(this,"type");fe(this,"lexeme");fe(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class oX{constructor(e){fe(this,"scanned",!1);fe(this,"tokens",[]);fe(this,"position",new rn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new rn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-character").at(this.position);if(Jh(this.peek())===null)throw new se("lexer.only-ascii").at(new rn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new se("lexer.empty-character").at(this.position);if(n>=2)throw new se("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-string").at(this.position);if(Jh(this.peek())===null)throw new se("lexer.only-ascii").at(new rn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()===".")throw new se("lexer.unexpected-character",".").at(new rn(this.position.end,this.position.end+1));if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new se("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new se("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){if(e==="."&&this.isDigit(this.peek()))throw new se("lexer.unexpected-character",".").at(new rn(this.position.start,this.position.start+1));for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();rX.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new se("lexer.unexpected-character",e).at(this.position)}return this.position=new rn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new sX(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new rn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class $n{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}fe($n,"numberLiteral",(...e)=>new aX(...e)),fe($n,"label",(...e)=>new lX(...e)),fe($n,"unaryOperation",(...e)=>new cX(...e)),fe($n,"binaryOperation",(...e)=>new uX(...e));class aX extends $n{constructor(n,i){super(i);fe(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let lX=class extends $n{constructor(n,i,r){super(r);fe(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new se("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new se("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new se("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class cX extends $n{constructor(n,i,r){super(r);fe(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class uX extends $n{constructor(n,i,r,s){super(s);fe(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Vy{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var vo;class PL extends Vy{constructor(n,i,r){super(r);fe(this,"type","data-directive");fe(this,"label");fe(this,"values");Ie(this,vo,null);this.values=n,this.label=i}get start(){if(A(this,vo)===null)throw new Error("Start not set");return A(this,vo)}setStart(n){if(A(this,vo)!==null)throw new Error("Start already set");Q(this,vo,n)}toJSON(){return{...super.toJSON(),...A(this,vo)?{start:A(this,vo).toJSON()}:{},directive:this.directive,label:this.label}}}vo=new WeakMap;var lc,Sa,Zu;class dX extends PL{constructor(n,i,r){super(n,i,r);fe(this,"directive","EQU");Ie(this,lc,"not-processed");Ie(this,Sa,null);Ie(this,Zu,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,Zu)??((n=A(this,Sa))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,Sa))throw new Error("Constant already validated");if(!this.label)throw new se("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new se("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new se("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new se("cannot-be-unassinged","EQU").at(n);Q(this,Sa,n.value)}evaluateExpressions(n){if(!A(this,Sa))throw new Error("Constant not validated");if(A(this,lc)==="processed")return A(this,Zu);if(A(this,lc)==="processing")throw new se("circular-reference").at(this.position);Q(this,lc,"processed");const i=A(this,Sa).evaluate(n);return Q(this,lc,"processed"),Q(this,Zu,i),i}evaluate(n){return this.evaluateExpressions(n)}}lc=new WeakMap,Sa=new WeakMap,Zu=new WeakMap;const zf=Symbol("unassigned");var Ci,Jr;class fX extends PL{constructor(n,i,r,s){super(i,r,s);fe(this,"size");Ie(this,Ci,null);Ie(this,Jr,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,Ci))throw new Error("Data directive not validated");return A(this,Ci).length*(this.size/8)}getValues(){if(!A(this,Jr))throw new Error("Data directive not evaluated");return A(this,Jr)}toJSON(){return{...super.toJSON(),values:(A(this,Jr)??A(this,Ci)??this.values).map(n=>n===zf?"?":n.toJSON())}}validate(){if(A(this,Ci))throw new Error("Data directive already validated");Q(this,Ci,[]);for(const n of this.values)if(n.isUnassigned())A(this,Ci).push(zf);else if(n.isString()){if(this.directive!=="DB")throw new se("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=Jh(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new rn(n.position.start+r,n.position.start+r+1),a=$n.numberLiteral(s,o);A(this,Ci).push(a)}}else A(this,Ci).push(n.value);if(A(this,Ci).length===0)throw new se("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,Ci))throw new Error("Data directive not validated");if(A(this,Jr))throw new Error("Data directive already evaluated");Q(this,Jr,[]);const i=Xh(A(this,Ci),r=>{if(r===zf)A(this,Jr).push(zf);else{const s=r.evaluate(n);if(!F.fits(s,this.size))throw new se("value-out-of-range",s,this.size).at(this);const o=F.fromNumber(s,this.size);A(this,Jr).push(o)}},se.from);return i.length>0&&Q(this,Jr,null),i}}Ci=new WeakMap,Jr=new WeakMap;class tC{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class hX extends tC{constructor(n,i){super(i);fe(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class pX extends tC{constructor(n){super(n);fe(this,"type","unassigned")}}class mX extends tC{constructor(n){super(n.position);fe(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function gX(t,e,n){const i=rn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new fX(t.type,e,n,i);case"EQU":return new dX(e,n,i)}}class Bw extends Vy{constructor(n){super(n);fe(this,"type","end")}}function Xl(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var yo;class Uc extends Vy{constructor(n,i,r){super(r);fe(this,"type","instruction");fe(this,"label");fe(this,"operands");Ie(this,yo,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,yo)===null)throw new Error("Start not set");return A(this,yo)}setStart(n){if(A(this,yo)!==null)throw new Error("Start already set");Q(this,yo,n)}toJSON(){return{...super.toJSON(),...A(this,yo)?{start:A(this,yo).toJSON()}:{},instruction:this.instruction,label:this.label}}}yo=new WeakMap;var Zn,wr;class vX extends Uc{constructor(n,i,r,s){super(i,r,s);Ie(this,Zn,null);Ie(this,wr,null);this.instruction=n}get length(){if(!A(this,Zn))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,Zn);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,wr))throw new Error("Instruction not evaluated");return A(this,wr)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(Xl(r)&3)<<2,o[0]|=(Xl(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(Xl(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(Xl(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(Xl(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,wr)??A(this,Zn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Zn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new se("size-mismatch",r.size,i.size).at(this);Q(this,Zn,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);Q(this,Zn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);Q(this,Zn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new se("size-mismatch",s.size,i.size).at(this);Q(this,Zn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}Q(this,Zn,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new se("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new se("size-mismatch",s,r.size).at(this);Q(this,Zn,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new se("double-memory-access").at(this);s==="auto"&&(s=8),Q(this,Zn,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new se("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,Zn))throw new Error("Instruction not validated");if(A(this,wr))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,Zn),a=l=>{const c=l.evaluate(n);if(!Se.inRange(c))throw new se("address-out-of-range",c).at(l);const u=Se.from(c);if(n.addressIsReserved(u))throw new se("address-has-code",u).at(l);return u};switch(i){case"reg<-reg":{Q(this,wr,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{Q(this,wr,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!F.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const c=F.fromNumber(l,r);Q(this,wr,{mode:i,size:r,out:s,src:c});return}case"mem<-reg":{Q(this,wr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!F.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const c=F.fromNumber(l,r);Q(this,wr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return i}}}Zn=new WeakMap,wr=new WeakMap;var Ns,bo;class yX extends Uc{constructor(n,i,r,s){super(i,r,s);Ie(this,Ns,null);Ie(this,bo,null);fe(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,bo))throw new Error("Instruction not evaluated");return A(this,bo)}toJSON(){return{...super.toJSON(),...A(this,bo)?{value:A(this,bo).toJSON()}:A(this,Ns)?{initialValue:A(this,Ns).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Ns))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new se("expects-immediate").at(n);Q(this,Ns,n.value)}evaluateExpressions(n){if(!A(this,Ns))throw new Error("Instruction not validated");if(A(this,bo))throw new Error("Instruction aready evaluated");const i=A(this,Ns).evaluate(n);if(!F.fitsUnsigned(i,8))throw new se("invalid-interrupt",i).at(A(this,Ns));Q(this,bo,F.fromUnsigned(i,8))}}Ns=new WeakMap,bo=new WeakMap;var Zr,wo,rR;let bX=(rR=class extends Uc{constructor(n,i,r,s){super(i,r,s);Ie(this,Zr,null);Ie(this,wo,null);this.instruction=n}get length(){if(!A(this,Zr))throw new Error("Instruction not validated");return A(this,Zr).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,wo)===null)throw new Error("Operation not set");return A(this,wo)}toJSON(){return{...super.toJSON(),...A(this,wo)??A(this,Zr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Zr))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new se("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new se("expects-dx").at(i);Q(this,Zr,{port:"variable",size:r});return}if(i.isNumberExpression()){Q(this,Zr,{port:"fixed",size:r,address:i.value});return}throw new se("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,Zr))throw new Error("Instruction not validated");if(A(this,wo))throw new Error("Instruction aready evaluated");const i=A(this,Zr);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!hr.inRange(r))throw new se("io-address-out-of-range",r).at(this);const s=hr.from(r);Q(this,wo,{port:"fixed",size:i.size,address:s})}else Q(this,wo,{port:"variable",size:i.size})}},Zr=new WeakMap,wo=new WeakMap,rR);var xo,Ps,sR;let wX=(sR=class extends Uc{constructor(n,i,r,s){super(i,r,s);Ie(this,xo,null);Ie(this,Ps,null);fe(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Ps)===null)throw new Error("Instruction not evaluated");return A(this,Ps)}toJSON(){return{...super.toJSON(),...A(this,Ps)?{address:A(this,Ps).toJSON()}:A(this,xo)?{jumpTo:A(this,xo)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,xo))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new se("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new se("label-not-found",r).at(i);if(s!=="instruction")throw new se("label-should-be-an-instruction",r).at(i);Q(this,xo,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!Se.inRange(r))throw new se("address-out-of-range",r).at(i);Q(this,Ps,Se.from(r))}}evaluateExpressions(n){if(!A(this,Ps)&&A(this,xo)){const i=n.getLabelValue(A(this,xo));if(!Se.inRange(i))throw new se("address-out-of-range",i).at(this);Q(this,Ps,Se.from(i))}}},xo=new WeakMap,Ps=new WeakMap,sR);var Ms,oR;let xX=(oR=class extends Uc{constructor(n,i,r,s){super(i,r,s);Ie(this,Ms,null);fe(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=Xl(this.register),new Uint8Array([i])}get register(){if(!A(this,Ms))throw new Error("Instruction not evaluated");return A(this,Ms)}toJSON(){return{...super.toJSON(),...A(this,Ms)?{register:A(this,Ms)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Ms))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new se("expects-word-register").at(n);Q(this,Ms,n.value)}evaluateExpressions(){if(!A(this,Ms))throw new Error("Instruction not validated")}},Ms=new WeakMap,oR);var qi,Ts;class SX extends Uc{constructor(n,i,r,s){super(i,r,s);Ie(this,qi,null);Ie(this,Ts,null);this.instruction=n}get length(){if(!A(this,qi))throw new Error("Instruction not validated");const{mode:n}=A(this,qi);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=Xl(this.operation.reg);break}case"mem-direct":{const r=this.operation.address.byte;n.push(r.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Ts))throw new Error("Instruction not evaluated");return A(this,Ts)}toJSON(){return{...super.toJSON(),...A(this,Ts)??A(this,qi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,qi))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){Q(this,qi,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);Q(this,qi,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);Q(this,qi,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){Q(this,qi,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new se("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,qi))throw new Error("Instruction not validated");if(A(this,Ts))throw new Error("Instruction aready evaluated");const i=A(this,qi);switch(i.mode){case"reg":{Q(this,Ts,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Se.inRange(r))throw new se("address-out-of-range",r).at(i.address);const s=Se.from(r);if(n.addressIsReserved(s))throw new se("address-has-code",s).at(i.address);Q(this,Ts,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{Q(this,Ts,{mode:"mem-indirect",size:i.size});return}default:return i}}}qi=new WeakMap,Ts=new WeakMap;var Qu;class kX extends Uc{constructor(n,i,r,s){super(i,r,s);Ie(this,Qu,!1);fe(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,Qu))throw new Error("Instruction already validated");if(this.operands.length>0)throw new se("expects-no-operands").at(this);Q(this,Qu,!0)}evaluateExpressions(){if(!A(this,Qu))throw new Error("Instruction not validated")}}Qu=new WeakMap;class Hy{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class _X extends Hy{constructor(n){super(n.position);fe(this,"type","register");fe(this,"value");this.value=n.type}get size(){return NL.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class CX extends Hy{constructor(n,i){super(i);fe(this,"type","indirect-address");fe(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class EX extends Hy{constructor(n,i,r){super(r);fe(this,"type","direct-address");fe(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class pv extends Hy{constructor(n){super(n.position);fe(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return pv.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new se("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:$n.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=pv.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:$n.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function d3(t,e,n){const i=rn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new kX(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new vX(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new SX(t.type,e,n,i);case"PUSH":case"POP":return new xX(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new wX(t.type,e,n,i);case"IN":case"OUT":return new bX(t.type,e,n,i);case"INT":return new yX(t.type,e,n,i)}}class AX extends Vy{constructor(n,i){super(i);fe(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let NX=class{constructor(e){fe(this,"tokens");fe(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new se("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new se("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new AX(i,rn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new se("end-must-be-the-last-statement").at(e);return new Bw(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new Bw(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new Bw(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...Q_);if(e&&!n)throw new se("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),gX(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new hX(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new pX(e.position)}return new mX(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...eC);if(e&&!n){const s=this.peek();throw new se("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return d3(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),d3(n,r,i)}instructionOperand(){if(this.match(...hv)){const n=this.previous();return new _X(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new se("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...hv)){if(!this.check("BX","BL"))throw new se("parser.indirect-addressing-must-be-bx");const i=this.advance(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-literal","]",i.lexeme));return new CX(e==null?void 0:e.type,rn.merge(e==null?void 0:e.position,n.position,r.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-expression","]"));return new EX(i,e==null?void 0:e.type,rn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new se("parser.expected-literal-after-literal","[","PTR");return new pv(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new se("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new se("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return $n.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=Jh(i.lexeme.slice(1,-1));return $n.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new se("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new se("parser.expected-label-after-offset").at(this.peek());if(!n)throw new se("parser.expected-argument").at(this.peek());return $n.label(n.lexeme.toUpperCase(),e!==null,rn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new se("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return $n.unaryOperation(e.type==="PLUS"?"+":"-",n,rn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=$n.binaryOperation(e,"*",n,rn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=$n.binaryOperation(e,n.type==="PLUS"?"+":"-",i,rn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function ML(t){try{const n=new oX(t).scanTokens(),r=new NX(n).parse();if(!r.at(-1))throw new se("empty-program");let o=[];const a=new nX;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Xh(r,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},se.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=Xh(r,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},se.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[se.from(e)]}}}class vs{constructor(e){fe(this,"computer");this.computer=e.computer}}const PX=t=>Se.format(t).slice(-2),MX=PX(Se.MAX_ADDRESS),TX={"address-has-instruction":t=>`Memory address ${Se.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${Se.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${Se.format(t)} is out of range (max memory address: ${MX}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${hr.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${Se.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},RX=Se.from(Se.MAX_ADDRESS).toString(),OX={"address-has-instruction":t=>`La dirección de memoria ${Se.format(t)} tiene una instrucción, y no se puede escribir.`,"address-is-reserved":t=>`La dirección de memoria ${Se.format(t)} está reservada, y no se puede escribir.`,"address-out-of-range":t=>`La dirección de memoria ${Se.format(t)} está fuera de rango (dirección máxima de memoria: ${RX}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontró ningún módulo conectado a la dirección de memoria E/S ${hr.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${Se.format(t)} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},IX=X_({en:TX,es:OX});class qt extends Error{constructor(n,...i){super();fe(this,"code");fe(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return IX(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof qt?n:new qt("unexpected-error",n)}}class Yo{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new qt("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var ry,TL;class DX extends Yo{constructor(){super(...arguments);Ie(this,ry)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ct(this,ry,TL).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct",ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("id.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}i==="mem<-imd"&&(yield*n.cpu.copyByteRegister("id.l","left.l")),yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=F.fromSigned(d,r),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>F.maxValue(r)?(u.CF=!0,c=F.fromUnsigned(f-F.maxValue(r)-1,r)):(u.CF=!1,c=F.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=F.fromUnsigned(f+F.maxValue(r)+1,r)):(u.CF=!1,c=F.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}ry=new WeakSet,TL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var sy,RL;class LX extends Yo{constructor(){super(...arguments);Ie(this,sy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ct(this,sy,RL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=F.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=F.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===F.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=i.unsigned+1;o>F.maxValue(this.operation.size)?(s.CF=!0,r=F.fromUnsigned(o-F.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=F.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=F.fromUnsigned(o+F.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=F.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}sy=new WeakSet,RL=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class jX extends Yo{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var oy,OL;class $X extends Yo{constructor(){super(...arguments);Ie(this,oy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ct(this,oy,OL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new qt("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new qt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new qt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}oy=new WeakSet,OL=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class FX extends Yo{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class BX extends Yo{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function HS(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function zX(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var ay,IL;class UX extends Yo{constructor(){super(...arguments);Ie(this,ay)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ct(this,ay,IL).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=zX(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}ay=new WeakSet,IL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class VX extends Yo{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class HX extends Yo{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function WX(t){switch(t.instruction){case"MOV":return new UX(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new DX(t);case"NOT":case"NEG":case"INC":case"DEC":return new LX(t);case"IN":case"OUT":return new $X(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new HX(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new FX(t);case"RET":case"IRET":return new VX(t);case"INT":return new jX(t);case"CLI":case"STI":case"NOP":case"HLT":return new BX(t)}}function GX(t){for(const[e,n]of Z_)if(n.unsigned===t.unsigned)return e;return null}function*KX(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 3:{yield{type:"cpu:int.3"};break}case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new qt("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new qt("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new qt("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",F.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new qt("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",F.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",F.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===F.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var ed,Ke,xr,Ei,un,au,br,aR;let qX=(aR=class extends vs{constructor(n){super(n);Ie(this,un);Ie(this,ed);Ie(this,Ke);Ie(this,xr);Ie(this,Ei);n.data==="unchanged"?(Q(this,Ke,A(n.previous.cpu,Ke)),Q(this,xr,A(n.previous.cpu,xr)),Q(this,Ei,A(n.previous.cpu,Ei))):(Q(this,Ke,{AX:F.zero(16),BX:F.zero(16),CX:F.zero(16),DX:F.zero(16),SP:F.zero(16),IP:F.zero(16),IR:F.zero(8),ri:F.zero(16),id:F.zero(16),left:F.zero(16),right:F.zero(16),result:F.zero(16),FLAGS:F.zero(16)}),Q(this,xr,F.zero(16)),Q(this,Ei,F.zero(8))),A(this,Ke).SP=F.fromUnsigned(Se.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1;let s;r?s=32:i?s=8:s=0,A(this,Ke).IP=F.fromUnsigned(s,16),A(this,Ke).ri=F.fromUnsigned(0,16),A(this,Ke).id=F.fromUnsigned(0,16),Ct(this,un,br).call(this,"IF",!0),Q(this,ed,new Map);for(const o of n.program.instructions){const a=WX(o);A(this,ed).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,Ke).IP,r=GX(i);if(r!==null){if(!(yield*KX(this.computer,r)))return}else{const s=A(this,ed).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new qt("no-instruction",A(this,Ke).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",F.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const i=F.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",i),yield*this.copyWordRegister("ri","IP"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,Ke)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,xr).toJSON(),MBR:A(this,Ei).toJSON()}}getRegister(n){const[i,r]=HS(n);return r==="low"?A(this,Ke)[i].low:r==="high"?A(this,Ke)[i].high:A(this,Ke)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Ct(this,un,au).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Ct(this,un,au).call(this,i,r.withHigh(F.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Ct(this,un,au).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Ct(this,un,au).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,Ke).FLAGS.bit(1);case"ZF":return A(this,Ke).FLAGS.bit(0);case"SF":return A(this,Ke).FLAGS.bit(3);case"IF":return A(this,Ke).FLAGS.bit(4);case"OF":return A(this,Ke).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Ct(this,un,br).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Ct(this,un,br).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Ct(this,un,br).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Ct(this,un,br).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Ct(this,un,br).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,Ke).FLAGS}}*aluExecute(n,i,r){A(this,Ke).result=i.is8bits()?A(this,Ke).result.withLow(i):i,typeof r.CF=="boolean"&&Ct(this,un,br).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Ct(this,un,br).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Ct(this,un,br).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Ct(this,un,br).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Ct(this,un,br).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,Ke).result,flags:A(this,Ke).FLAGS}}*setMAR(n){const i=this.getRegister(n);Q(this,xr,i.withHigh(F.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Ct(this,un,au).call(this,n,A(this,Ei)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);Q(this,Ei,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,xr));return i?(Q(this,Ei,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,xr),A(this,Ei)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,xr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(Q(this,Ei,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,xr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,Ei))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return Q(this,Ei,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return Se.inRange(i.unsigned-1)?(i=i.add(-1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?Se.inRange(i.unsigned-1)?!0:(yield{type:"cpu:error",error:new qt("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new qt("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return Se.inRange(i)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),i=i.add(1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new qt("stack-underflow")},!1)}},ed=new WeakMap,Ke=new WeakMap,xr=new WeakMap,Ei=new WeakMap,un=new WeakSet,au=function(n,i){const[r,s]=HS(n);if(s===null){if(A(this,Ke)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,Ke)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,Ke)[r]=A(this,Ke)[r].withLow(i):A(this,Ke)[r]=A(this,Ke)[r].withHigh(i)}},br=function(n,i){switch(n){case"CF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(1,i);return;case"ZF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(0,i);return;case"SF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(3,i);return;case"IF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(4,i);return;case"OF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},aR);var La,Yi,So,ka;let DL=(La=class extends vs{constructor(n){super(n);Ie(this,Yi);Ie(this,So);Ie(this,ka,!1);n.data==="unchanged"&&n.previous.io.printer?(Q(this,Yi,A(n.previous.io.printer,Yi)),Q(this,So,A(n.previous.io.printer,So)),Q(this,ka,A(n.previous.io.printer,ka))):(Q(this,Yi,[]),Q(this,So,""),Q(this,ka,!1))}get busy(){return A(this,Yi).length>=La.BUFFER_SIZE}*setStrobe(n){const i=A(this,ka);if(i===n)return;if(Q(this,ka,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,Yi).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){Q(this,So,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,Yi).length===0)return;const[n,...i]=A(this,Yi);if(Q(this,Yi,i),yield{type:"printer:buffer.pop",char:n},i.length===La.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=J_(n.unsigned);Q(this,So,A(this,So)+r),yield{type:"printer:paper.print",char:r}}}get hasPending(){return A(this,Yi).length>0}toJSON(){return{paper:A(this,So),buffer:[...A(this,Yi).map(n=>n.unsigned)]}}},Yi=new WeakMap,So=new WeakMap,ka=new WeakMap,fe(La,"BUFFER_SIZE",5),La);class Wy extends vs{}let LL=class extends Wy{constructor(n){super(n);fe(this,"PA");fe(this,"PB");fe(this,"CA");fe(this,"CB");fe(this,"leds",null);fe(this,"printer",null);fe(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=F.random(8),this.PB=F.random(8),this.CA=F.random(8),this.CB=F.random(8)):(this.PA=F.zero(8),this.PB=F.zero(8),this.CA=F.zero(8),this.CB=F.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class f3 extends LL{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends DL{*readData(){const i=n.readData();return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return F.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=F.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var ko,lR;let YX=(lR=class extends vs{constructor(n){super(n);Ie(this,ko);n.data==="unchanged"&&n.previous.io.leds?Q(this,ko,A(n.previous.io.leds,ko)):n.data==="randomize"?Q(this,ko,F.random(8)):Q(this,ko,F.zero(8))}get state(){return A(this,ko)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,ko).toJSON()}},ko=new WeakMap,lR);var Sr,cR;let XX=(cR=class extends vs{constructor(n){super(n);Ie(this,Sr);n.data==="unchanged"&&n.previous.io.switches?Q(this,Sr,A(n.previous.io.switches,Sr)):n.data==="randomize"?Q(this,Sr,F.random(8)):Q(this,Sr,F.zero(8))}get state(){return A(this,Sr)}*toggle(n){Q(this,Sr,A(this,Sr).withBit(n,!A(this,Sr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,Sr).toJSON()}},Sr=new WeakMap,cR);class JX extends LL{constructor(e){super(e);const n=this;this.leds=new class extends YX{}(e),this.switches=new class extends XX{*toggle(i){yield*super.toggle(i),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=F.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.leds.update(F.fromUnsigned(n,8))}}}let ZX=class extends vs{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},QX=class extends vs{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var td,uR;let eJ=(uR=class extends vs{constructor(){super(...arguments);Ie(this,td,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,td);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},Q(this,td,null),n}setLastCharRead(n){Q(this,td,n)}toJSON(){return null}},td=new WeakMap,uR);var Xi,dR;let tJ=(dR=class extends vs{constructor(n){super(n);Ie(this,Xi);n.data==="unchanged"&&n.previous.io.screen?Q(this,Xi,A(n.previous.io.screen,Xi)):Q(this,Xi,"")}clear(){return this.sendChar(F.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:Q(this,Xi,A(this,Xi).slice(0,-1));break;case 10:Q(this,Xi,A(this,Xi)+`
`);break;case 12:Q(this,Xi,"");break;default:Q(this,Xi,A(this,Xi)+J_(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,Xi)}}toJSON(){return A(this,Xi)}},Xi=new WeakMap,dR);var _o,fi,fR;let nJ=(fR=class extends Wy{constructor(n){super(n);Ie(this,_o);Ie(this,fi);fe(this,"printer");n.data==="randomize"?Q(this,_o,F.random(8)):Q(this,_o,F.zero(8)),Q(this,fi,F.zero(8));const i=this;this.printer=new class extends DL{*readData(){const r=A(i,_o);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,fi).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,_o);else if(n==="STATE")i=A(this,fi);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")Q(this,_o,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),Q(this,fi,i),yield{type:"handshake:register.update",register:n,value:i},A(this,fi).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),Q(this,fi,A(this,fi).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,fi)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){Q(this,fi,A(this,fi).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,fi)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,_o).toJSON(),STATE:A(this,fi).toJSON()}}},_o=new WeakMap,fi=new WeakMap,fR);var rs,Co,Ai,hi,Qr,Qs,r0,s0;let iJ=(rs=class extends Wy{constructor(n){super(n);Ie(this,Qs);Ie(this,Co);Ie(this,Ai);Ie(this,hi);Ie(this,Qr);Q(this,Co,F.fromUnsigned(255,8)),Q(this,Ai,F.fromUnsigned(0,8)),Q(this,hi,F.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?Q(this,Qr,A(n.previous.io.pic,Qr)):n.data==="randomize"?Q(this,Qr,new Array(rs.LINES).fill(F.zero(8)).map(()=>F.random(8))):Q(this,Qr,new Array(rs.LINES).fill(F.zero(8)))}chipSelect(n){const r=4+rs.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=F.zero(8);else if(n==="IMR")i=A(this,Co);else if(n==="IRR")i=A(this,Ai);else if(n==="ISR")i=A(this,hi);else{const r=Number(n.slice(3));i=A(this,Qr)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,hi).isZero()||(yield{type:"pic:intr.off"},Q(this,hi,F.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,hi)},yield*Ct(this,Qs,s0).call(this));else if(n==="IMR")Q(this,Co,i),yield{type:"pic:register.update",register:"IMR",value:A(this,Co)},yield*Ct(this,Qs,s0).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,Qr)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=rs.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Ai).bit(n)||(Q(this,Ai,A(this,Ai).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ai)},yield*Ct(this,Qs,s0).call(this))}isINTRActive(){return A(this,hi).isZero()&&Ct(this,Qs,r0).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,hi).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Ct(this,Qs,r0).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");Q(this,hi,A(this,hi).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,hi)},Q(this,Ai,A(this,Ai).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ai)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,Qr)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,Co).toJSON(),IRR:A(this,Ai).toJSON(),ISR:A(this,hi).toJSON(),lines:A(this,Qr).map(n=>n.toJSON())}}},Co=new WeakMap,Ai=new WeakMap,hi=new WeakMap,Qr=new WeakMap,Qs=new WeakSet,r0=function(){for(let n=0;n<rs.LINES;n++)if(A(this,Ai).bit(n)&&!A(this,Co).bit(n))return n;return null},s0=function*(){A(this,hi).isZero()&&Ct(this,Qs,r0).call(this)!==null&&(yield{type:"pic:intr.on"})},fe(rs,"LINES",8),rs);var Rs,_a,hR;let rJ=(hR=class extends Wy{constructor(n){super(n);Ie(this,Rs);Ie(this,_a);Q(this,Rs,F.zero(8)),Q(this,_a,F.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Rs);else if(n==="COMP")i=A(this,_a);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")Q(this,Rs,i);else if(n==="COMP")Q(this,_a,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Rs).unsigned===F.maxValue(8)?F.zero(8):A(this,Rs).add(1);Q(this,Rs,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,_a).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Rs).toJSON(),COMP:A(this,_a).toJSON()}}},Rs=new WeakMap,_a=new WeakMap,hR);class sJ extends vs{constructor(n){super(n);fe(this,"clock",null);fe(this,"f10",null);fe(this,"keyboard",null);fe(this,"screen",null);fe(this,"handshake",null);fe(this,"pic",null);fe(this,"pio",null);fe(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new eJ(n),this.screen=new tJ(n)),n.devices.pic&&(this.clock=new ZX(n),this.f10=new QX(n),this.timer=new rJ(n),this.pic=new iJ(n)),this.pio=n.devices.pio==="switches-and-leds"?new JX(n):n.devices.pio==="printer"?new f3(n):null,n.devices.handshake){if(this.pio instanceof f3)throw new qt("io-printer-conflict");this.handshake=new nJ(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,c,u;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(c=this.pio)==null?void 0:c.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(u=this.timer)==null?void 0:u.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new qt("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new qt("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new qt("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,c,u,d,f;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((c=this.handshake)==null?void 0:c.toJSON())??null,pic:((u=this.pic)==null?void 0:u.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((f=this.timer)==null?void 0:f.toJSON())??null}}}var ja,pi,nd,id;let oJ=(ja=class extends vs{constructor(n){super(n);Ie(this,pi);Ie(this,nd);Ie(this,id);n.data==="unchanged"?Q(this,pi,A(n.previous.memory,pi)):n.data==="randomize"?Q(this,pi,new Uint8Array(ja.SIZE).map(()=>F.random(8).unsigned)):Q(this,pi,new Uint8Array(ja.SIZE).fill(0)),A(this,pi)[255]=1;const i=n.program.instructions.some(r=>r.instruction==="INT");if(Q(this,id,new Set),i)for(const[r,s]of Z_){const o=r;if(A(this,pi)[o]=s.unsigned,A(this,id).add(o),r===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let c=0;c<a.length;c++)A(this,pi)[l+c]=a[c],A(this,id).add(l+c)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==zf&&A(this,pi).set(o.toUint8Array(),s),s+=r.size/8}Q(this,nd,new Set);for(const r of n.program.instructions){A(this,pi).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,nd).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Se.inRange(n))return yield{type:"memory:read.error",error:new qt("address-out-of-range",n)},null;const i=F.fromUnsigned(A(this,pi).at(n),8);return yield{type:"memory:read.ok",address:Se.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Se.inRange(n)?(A(this,nd).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instrucción en la dirección ${Se.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instrucción en la dirección ${Se.format(n)}`)),A(this,pi).set([i.unsigned],n),yield{type:"memory:write.ok",address:Se.from(n),value:i},!0):(yield{type:"memory:write.error",error:new qt("address-out-of-range",n)},!1)}toJSON(){return[...A(this,pi)]}},pi=new WeakMap,nd=new WeakMap,id=new WeakMap,fe(ja,"SIZE",Se.MAX_ADDRESS+1),ja);class h3{constructor(e){fe(this,"cpu");fe(this,"memory");fe(this,"io");const n={computer:this,...e};this.cpu=new qX(n),this.memory=new oJ(n),this.io=new sJ(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var gt;class aJ{constructor(){Ie(this,gt,new h3({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){Q(this,gt,new h3({...e,previous:A(this,gt)}))}getComputerState(){var e;return((e=A(this,gt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,gt))throw new qt("no-program");return A(this,gt).cpu.run()}get devices(){if(!A(this,gt))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,gt).io.clock!==null,tick:()=>{if(A(this,gt).io.clock)return A(this,gt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,gt).io,press:()=>{if(A(this,gt).io.f10)return A(this,gt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,gt).io,readChar:e=>{if(A(this,gt).io.keyboard)return A(this,gt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,gt).io},printer:{connected:()=>A(this,gt).io.printer!==null,clear:()=>{if(A(this,gt).io.printer)return A(this,gt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,gt).io.printer)return A(this,gt).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,gt).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,gt).io,clear:()=>{if(A(this,gt).io.screen)return A(this,gt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,gt).io,toggle:e=>{if(A(this,gt).io.switches)return A(this,gt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}gt=new WeakMap;const z=L_();function lJ(t){return h.jsx(SG,{store:z,children:t.children})}const zw=de(F.zero(16)),Uw=de(F.zero(16)),cJ=de(F.zero(8)),Vw=de(F.zero(16)),Hw=de(F.zero(16)),Ww=de(F.zero(16)),Gw=de(F.zero(16)),Kw=de(F.zero(16)),qw=de(F.zero(16)),jL=de(F.zero(16)),Zh=de(F.zero(8)),ht=de(""),Ac=de(0),nC=de(!1),uJ=de(!1),Gy=de(0),mv=de([]),$L=de(!1);de(!0);de(!0);const WS=de(!1),ra=t=>de(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),sa=t=>de(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),qe={AL:de(F.zero(8)),BL:de(F.zero(8)),CL:de(F.zero(8)),DL:de(F.zero(8)),SP:zw,"SP.l":ra(zw),"SP.h":sa(zw),IP:Uw,"IP.l":ra(Uw),"IP.h":sa(Uw),IR:cJ,ri:Vw,"ri.l":ra(Vw),"ri.h":sa(Vw),id:Hw,"id.l":ra(Hw),"id.h":sa(Hw),left:Ww,"left.l":ra(Ww),"left.h":sa(Ww),right:Gw,"right.l":ra(Gw),"right.h":sa(Gw),result:Kw,"result.l":ra(Kw),"result.h":sa(Kw),FLAGS:qw,"FLAGS.l":ra(qw),"FLAGS.h":sa(qw),MAR:jL,MBR:Zh},tr=de({phase:"stopped"}),FL=de("ADD");function dJ(t,e=!1){e?(z.set(qe.AL,F.zero(8)),z.set(qe.BL,F.zero(8)),z.set(qe.CL,F.zero(8)),z.set(qe.DL,F.zero(8)),z.set(qe.SP,F.fromUnsigned(255,16)),z.set(qe.IP,F.zero(16)),z.set(qe.IR,F.zero(8)),z.set(qe.ri,F.zero(16)),z.set(qe.id,F.zero(16)),z.set(qe.left,F.zero(16)),z.set(qe.right,F.zero(16)),z.set(qe.result,F.zero(16)),z.set(qe.FLAGS,F.zero(16)),z.set(qe.MAR,F.zero(16)),z.set(qe.MBR,F.zero(8))):(z.set(qe.AL,F.fromUnsigned(t.cpu.AX&255,8)),z.set(qe.BL,F.fromUnsigned(t.cpu.BX&255,8)),z.set(qe.CL,F.fromUnsigned(t.cpu.CX&255,8)),z.set(qe.DL,F.fromUnsigned(t.cpu.DX&255,8)),z.set(qe.SP,F.fromUnsigned(t.cpu.SP,16)),z.set(qe.IP,F.fromUnsigned(t.cpu.IP,16)),z.set(qe.IR,F.fromUnsigned(t.cpu.IR,8)),z.set(qe.ri,F.fromUnsigned(t.cpu.ri,16)),z.set(qe.id,F.fromUnsigned(t.cpu.id,16)),z.set(qe.left,F.fromUnsigned(t.cpu.left,16)),z.set(qe.right,F.fromUnsigned(t.cpu.right,16)),z.set(qe.result,F.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,z.set(qe.FLAGS,F.fromUnsigned(t.cpu.FLAGS,16)),z.set(qe.MAR,F.fromUnsigned(t.cpu.MAR,16)),z.set(qe.MBR,F.fromUnsigned(t.cpu.MBR,8))),z.set(tr,{phase:"stopped"})}const BL=de([]),zL=de([]),gv=de(new Array(Se.MAX_ADDRESS+1).fill(F.zero(8))),Qh=de(Se.from(32)),fJ=de(null),Um=256,hJ=de(t=>{const e=t(fJ)??t(Qh);let n=e.value-e.value%Um,i=n+Um-1;i>Se.MAX_ADDRESS&&(i=Se.MAX_ADDRESS,n=i-Um+1);const r=t(gv),s=[];for(let o=0;o<Um;o++)s.push({address:Se.from(n+o),value:r[n+o]});return s});function pJ(t,e=!1){e?z.set(gv,new Array(Se.MAX_ADDRESS+1).fill(F.zero(8))):z.set(gv,t.memory.map(n=>F.fromUnsigned(n,8))),z.set(Qh,Se.from(32))}let GS=[],UL=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?UL:GS).push(n=n+t[e])})();function mJ(t){if(t<768)return!1;for(let e=0,n=GS.length;;){let i=e+n>>1;if(t<GS[i])n=i;else if(t>=UL[i])e=i+1;else return!0;if(e==n)return!1}}function p3(t){return t>=127462&&t<=127487}const m3=8205;function gJ(t,e,n=!0,i=!0){return(n?VL:vJ)(t,e,i)}function VL(t,e,n){if(e==t.length)return e;e&&HL(t.charCodeAt(e))&&WL(t.charCodeAt(e-1))&&e--;let i=Yw(t,e);for(e+=g3(i);e<t.length;){let r=Yw(t,e);if(i==m3||r==m3||n&&mJ(r))e+=g3(r),i=r;else if(p3(r)){let s=0,o=e-2;for(;o>=0&&p3(Yw(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function vJ(t,e,n){for(;e>0;){let i=VL(t,e-2,n);if(i<e)return i;e--}return 0}function Yw(t,e){let n=t.charCodeAt(e);if(!WL(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return HL(i)?(n-55296<<10)+(i-56320)+65536:n}function HL(t){return t>=56320&&t<57344}function WL(t){return t>=55296&&t<56320}function g3(t){return t<65536?1:2}class ut{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=wd(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Ls.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=wd(this,e,n);let i=[];return this.decompose(e,n,i,0),Ls.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new dh(this),s=new dh(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new dh(this,e)}iterRange(e,n=this.length){return new GL(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new KL(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ut.empty:e.length<=32?new nn(e):Ls.from(nn.split(e,[]))}}class nn extends ut{constructor(e,n=yJ(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new bJ(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new nn(v3(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=o0(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new nn(a,o.length+s.length));else{let l=a.length>>1;i.push(new nn(a.slice(0,l)),new nn(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof nn))return super.replace(e,n,i);[e,n]=wd(this,e,n);let r=o0(this.text,o0(i.text,v3(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new nn(r,s):Ls.from(nn.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=wd(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new nn(i,r)),i=[],r=-1);return r>-1&&n.push(new nn(i,r)),n}}class Ls extends ut{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=wd(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[r]=l,new Ls(u,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=wd(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Ls))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let m of e)m.flatten(p);return new nn(p,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,u=[];function d(p){let m;if(p.lines>s&&p instanceof Ls)for(let g of p.children)d(g);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof nn&&l&&(m=u[u.length-1])instanceof nn&&p.lines+m.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new nn(m.text.concat(p.text),m.length+1+p.length)):(l+p.lines>r&&f(),l+=p.lines,c+=p.length+1,u.push(p))}function f(){l!=0&&(a.push(u.length==1?u[0]:Ls.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return f(),a.length==1?a[0]:new Ls(a,n)}}ut.empty=new nn([""],0);function yJ(t){let e=-1;for(let n of t)e+=n.length+1;return e}function o0(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function v3(t,e,n){return o0(t,[""],e,n)}class dh{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof nn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof nn?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof nn){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof nn?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class GL{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new dh(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class KL{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ut.prototype[Symbol.iterator]=function(){return this.iter()},dh.prototype[Symbol.iterator]=GL.prototype[Symbol.iterator]=KL.prototype[Symbol.iterator]=function(){return this});class bJ{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function wd(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Vn(t,e,n=!0,i=!0){return gJ(t,e,n,i)}function wJ(t){return t>=56320&&t<57344}function xJ(t){return t>=55296&&t<56320}function Cr(t,e){let n=t.charCodeAt(e);if(!xJ(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return wJ(i)?(n-55296<<10)+(i-56320)+65536:n}function iC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function No(t){return t<65536?1:2}const KS=/\r\n?|\n/;var Ii=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Ii||(Ii={}));class Xs{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){qS(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new Xs(e)}composeDesc(e){return this.empty?e:e.empty?this:qL(this,e)}mapDesc(e,n=!1){return e.empty?this:YS(this,e,n)}mapPos(e,n=-1,i=Ii.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=Ii.Simple&&c>=e&&(i==Ii.TrackDel&&r<e&&c>e||i==Ii.TrackBefore&&r<e||i==Ii.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Xs(e)}static create(e){return new Xs(e)}}class bn extends Xs{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return qS(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return YS(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(ut.empty);i.push(o?e.slice(s,s+o):ut.empty)}s+=o}return new bn(n,i)}compose(e){return this.empty?e:e.empty?this:qL(this,e,!0)}map(e,n=!1){return e.empty?this:YS(this,e,n,!0)}iterChanges(e,n=!1){qS(this,e,n)}get desc(){return Xs.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new ep(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);Qn(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Qn(n,u,d),d>0&&Na(i,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);Qn(n,u,-1),Qn(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new bn(n,i),filtered:Xs.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<n&&Qn(r,n-o,-1);let d=new bn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof bn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:p}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let m=p?typeof p=="string"?ut.of(p.split(i||KS)):p:ut.empty,g=m.length;if(d==f&&g==0)return;d<o&&l(),d>o&&Qn(r,d-o,-1),Qn(r,f-d,g),Na(s,r,m),o=f}}return c(e),l(!a),a}static empty(e){return new bn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(ut.empty);i[r]=ut.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new bn(n,i)}static createSet(e,n){return new bn(e,n)}}function Qn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Na(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(ut.empty);t.push(n)}}function qS(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,u=s,d=ut.empty;for(;c+=a,u+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,c,s,u,d),r=c,s=u}}}function YS(t,e,n,i=!1){let r=[],s=i?[]:null,o=new ep(t),a=new ep(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Qn(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(Qn(r,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Qn(r,0,o.ins),s&&Na(s,r,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Qn(r,c,l<o.i?o.ins:0),s&&l<o.i&&Na(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?bn.createSet(r,s):Xs.create(r);throw new Error("Mismatched change set lengths")}}}function qL(t,e,n=!1){let i=[],r=n?[]:null,s=new ep(t),o=new ep(e);for(let a=!1;;){if(s.done&&o.done)return r?bn.createSet(i,r):Xs.create(i);if(s.ins==0)Qn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)Qn(i,0,o.ins,a),r&&Na(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Qn(i,l,u,a),r&&u&&Na(r,i,o.text)}else o.ins==-1?(Qn(i,s.off?0:s.len,l,a),r&&Na(r,i,s.textBit(l))):(Qn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Na(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class ep{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?ut.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?ut.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class oc{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new oc(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return re.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return re.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return re.range(e.anchor,e.head)}static create(e,n,i){return new oc(e,n,i)}}class re{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:re.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new re([this.main],0)}addRange(e,n=!0){return re.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,re.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new re(e.ranges.map(n=>oc.fromJSON(n)),e.main)}static single(e,n=e){return new re([re.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return re.normalized(e.slice(),n);i=s.to}return new re(e,n)}static cursor(e,n=0,i,r){return oc.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?oc.create(n,e,48|s):oc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?re.range(l,a):re.range(a,l))}}return new re(e,n)}}function YL(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let rC=0;class Ee{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=rC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ee(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:sC),!!e.static,e.enables)}of(e){return new a0([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new a0(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new a0(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function sC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class a0{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=rC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||XS(d,u)){let p=i(d);if(a?!y3(p,d.values[o],r):!r(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,m=f.config.address[s];if(m!=null){let g=yv(f,m);if(this.dependencies.every(v=>v instanceof Ee?f.facet(v)===d.facet(v):v instanceof xi?f.field(v,!1)==d.field(v,!1):!0)||(a?y3(p=i(d),g,r):r(p=i(d),g)))return d.values[o]=g,0}else p=i(d);return d.values[o]=p,1}}}}function y3(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function XS(t,e){let n=!1;for(let i of e)fh(t,i)&1&&(n=!0);return n}function SJ(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let d=yv(l,i[u]);if(r[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)fh(l,c);return l.values[o]=a(l),1},update(l,c){if(!XS(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=XS(l,i),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&sC(n,d))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const Vm=Ee.define({static:!0});class xi{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new xi(rC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Vm).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>{let s=i.facet(Vm),o=r.facet(Vm),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[n]=a.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,Vm.of({field:this,create:e})]}get extension(){return this}}const Jl={lowest:4,low:3,default:2,high:1,highest:0};function cf(t){return e=>new XL(e,t)}const zp={highest:cf(Jl.highest),high:cf(Jl.high),default:cf(Jl.default),low:cf(Jl.low),lowest:cf(Jl.lowest)};class XL{constructor(e,n){this.inner=e,this.prec=n}}class Up{of(e){return new JS(this,e)}reconfigure(e){return Up.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class JS{constructor(e,n){this.compartment=e,this.inner=n}}class vv{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let f of kJ(e,n,o))f instanceof xi?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of r)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let u=i==null?void 0:i.config.facets;for(let f in s){let p=s[f],m=p[0].facet,g=u&&u[f]||[];if(p.every(v=>v.type==0))if(a[m.id]=l.length<<1|1,sC(g,p))l.push(i.facet(m));else{let v=m.combine(p.map(y=>y.value));l.push(i&&m.compare(v,i.facet(m))?i.facet(m):v)}else{for(let v of p)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=c.length<<1,c.push(y=>v.dynamicSlot(y)));a[m.id]=c.length<<1,c.push(v=>SJ(v,m,p))}}let d=c.map(f=>f(a));return new vv(e,o,d,a,l,s)}}function kJ(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof JS&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof JS){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof XL)s(o.inner,o.prec);else if(o instanceof xi)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof a0)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Jl.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,Jl.default),i.reduce((o,a)=>o.concat(a))}function fh(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function yv(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const JL=Ee.define(),ZS=Ee.define({combine:t=>t.some(e=>e),static:!0}),ZL=Ee.define({combine:t=>t.length?t[0]:void 0,static:!0}),QL=Ee.define(),ej=Ee.define(),tj=Ee.define(),nj=Ee.define({combine:t=>t.length?t[0]:!1});class Xo{constructor(e,n){this.type=e,this.value=n}static define(){return new _J}}class _J{of(e){return new Xo(this,e)}}class CJ{constructor(e){this.map=e}of(e){return new Je(this,e)}}class Je{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Je(this.type,n)}is(e){return this.type==e}static define(e={}){return new CJ(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}Je.reconfigure=Je.define();Je.appendConfig=Je.define();class kn{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&YL(i,n.newLength),s.some(a=>a.type==kn.time)||(this.annotations=s.concat(kn.time.of(Date.now())))}static create(e,n,i,r,s,o){return new kn(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(kn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}kn.time=Xo.define();kn.userEvent=Xo.define();kn.addToHistory=Xo.define();kn.remote=Xo.define();function EJ(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function ij(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=bn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:Je.mapEffects(t.effects,r).concat(Je.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function QS(t,e,n){let i=e.selection,r=Vu(e.annotations);return e.userEvent&&(r=r.concat(kn.userEvent.of(e.userEvent))),{changes:e.changes instanceof bn?e.changes:bn.of(e.changes||[],n,t.facet(ZL)),selection:i&&(i instanceof re?i:re.single(i.anchor,i.head)),effects:Vu(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function rj(t,e,n){let i=QS(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=ij(i,QS(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=kn.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return NJ(n?AJ(r):r)}function AJ(t){let e=t.startState,n=!0;for(let r of e.facet(QL)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:EJ(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=bn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=kn.create(e,r,t.selection&&t.selection.map(s),Je.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(ej);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof kn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof kn?t=s[0]:t=rj(e,Vu(s),!1)}return t}function NJ(t){let e=t.startState,n=e.facet(tj),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=ij(i,QS(e,s,t.changes.newLength),!0))}return i==t?t:kn.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const PJ=[];function Vu(t){return t==null?PJ:Array.isArray(t)?t:[t]}var Hn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Hn||(Hn={}));const MJ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let e2;try{e2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function TJ(t){if(e2)return e2.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||MJ.test(n)))return!0}return!1}function RJ(t){return e=>{if(!/\S/.test(e))return Hn.Space;if(TJ(e))return Hn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Hn.Word;return Hn.Other}}class at{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)fh(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return fh(this,i),yv(this,i)}update(...e){return rj(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(Up.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,c)=>r.set(c,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(Je.reconfigure)?(n=null,i=a.value):a.is(Je.appendConfig)&&(n=null,i=Vu(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=vv.resolve(i,r,this),s=new at(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(ZS)?e.newSelection:e.newSelection.asSingle();new at(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:re.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=Vu(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(r);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),o=Je.mapEffects(o,u).concat(Je.mapEffects(Vu(l.effects),d))}return{changes:r,selection:re.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof bn?e:bn.of(e,this.doc.length,this.facet(at.lineSeparator))}toText(e){return ut.of(e.split(this.facet(at.lineSeparator)||KS))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(fh(this,n),yv(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof xi&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return at.create({doc:e.doc,selection:re.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=vv.resolve(e.extensions||[],new Map),i=e.doc instanceof ut?e.doc:ut.of((e.doc||"").split(n.staticFacet(at.lineSeparator)||KS)),r=e.selection?e.selection instanceof re?e.selection:re.single(e.selection.anchor,e.selection.head):re.single(0);return YL(r,i.length),n.staticFacet(ZS)||(r=r.asSingle()),new at(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(at.tabSize)}get lineBreak(){return this.facet(at.lineSeparator)||`
`}get readOnly(){return this.facet(nj)}phrase(e,...n){for(let i of this.facet(at.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(JL))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return RJ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=Vn(n,o,!1);if(s(n.slice(l,o))!=Hn.Word)break;o=l}for(;a<r;){let l=Vn(n,a);if(s(n.slice(a,l))!=Hn.Word)break;a=l}return o==a?null:re.range(o+i,a+i)}}at.allowMultipleSelections=ZS;at.tabSize=Ee.define({combine:t=>t.length?t[0]:4});at.lineSeparator=ZL;at.readOnly=nj;at.phrases=Ee.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});at.languageData=JL;at.changeFilter=QL;at.transactionFilter=ej;at.transactionExtender=tj;Up.reconfigure=Je.define();function Sl(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Nc{eq(e){return this==e}range(e,n=e){return t2.create(e,n,this)}}Nc.prototype.startSide=Nc.prototype.endSide=0;Nc.prototype.point=!1;Nc.prototype.mapMode=Ii.TrackDel;let t2=class sj{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new sj(e,n,i)}};function n2(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class oC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,p;if(u==d){let m=n.mapPos(u,c.startSide,c.mapMode);if(m==null||(f=p=m,c.startSide!=c.endSide&&(p=n.mapPos(u,c.endSide),p<f)))continue}else if(f=n.mapPos(u,c.startSide),p=n.mapPos(d,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),i.push(c),r.push(f-o),s.push(p-o))}return{mapped:i.length?new oC(r,s,i,a):null,pos:o}}}class yt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new yt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(n2)),this.isEmpty)return n.length?yt.of(n):this;let a=new oj(this,null,-1).goto(0),l=0,c=[],u=new sl;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(t2.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?yt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new yt(i,n,s||yt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return tp.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return tp.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=b3(o,a,i),c=new uf(o,l,s),u=new uf(a,l,s);i.iterGaps((d,f,p)=>w3(c,d,u,f,p,r)),i.empty&&i.length==0&&w3(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=b3(s,o),l=new uf(s,a,0).goto(i),c=new uf(o,a,0).goto(i);for(;;){if(l.to!=c.to||!i2(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new uf(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);r.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new sl;for(let r of e instanceof t2?[e]:n?OJ(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return yt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=yt.empty;r=r.nextLayer)n=new yt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}yt.empty=new yt([],[],null,-1);function OJ(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(n2(e,i)>0)return t.slice().sort(n2);e=i}return t}yt.empty.nextLayer=yt.empty;class sl{finishChunk(e){this.chunks.push(new oC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new sl)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(yt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=yt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function b3(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class oj{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class tp{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new oj(o,n,i,s));return r.length==1?r[0]:new tp(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)Xw(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)Xw(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Xw(this.heap,0)}}}function Xw(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class uf{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=tp.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Hm(this.active,e),Hm(this.activeTo,e),Hm(this.activeRank,e),this.minActive=x3(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;Wm(this.active,n,i),Wm(this.activeTo,n,r),Wm(this.activeRank,n,s),e&&Wm(e,n,this.cursor.from),this.minActive=x3(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Hm(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function w3(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,f=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&i2(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,f,t.point,n.point):f>a&&!i2(t.active,n.active)&&s.compareRange(a,f,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function i2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Hm(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Wm(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function x3(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Vp(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Vn(t,r));return i}function IJ(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Vn(t,r)}return t.length}const r2="ͼ",S3=typeof Symbol>"u"?"__"+r2:Symbol.for(r2),s2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),k3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ol{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let m=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(g=>o.map(v=>g.replace(/&/,v))).reduce((g,v)=>g.concat(v)),m,l);else if(m&&typeof m=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),m,u,f)}else m!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+m+";")}(u.length||f)&&l.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=k3[S3]||1;return k3[S3]=e+1,r2+e.toString(36)}static mount(e,n,i){let r=e[s2],s=i&&i.nonce;r?s&&r.setNonce(s):r=new DJ(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let _3=new Map;class DJ{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=_3.get(i);if(s)return e[s2]=s;this.sheet=new r.CSSStyleSheet,_3.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[s2]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var al={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},np={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},LJ=typeof navigator<"u"&&/Mac/.test(navigator.platform),jJ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Fn=0;Fn<10;Fn++)al[48+Fn]=al[96+Fn]=String(Fn);for(var Fn=1;Fn<=24;Fn++)al[Fn+111]="F"+Fn;for(var Fn=65;Fn<=90;Fn++)al[Fn]=String.fromCharCode(Fn+32),np[Fn]=String.fromCharCode(Fn);for(var Jw in al)np.hasOwnProperty(Jw)||(np[Jw]=al[Jw]);function $J(t){var e=LJ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||jJ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?np:al)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Et(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)aj(t,arguments[e]);return t}function aj(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)aj(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function ip(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function o2(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function l0(t,e){if(!e.anchorNode)return!1;try{return o2(t,e.anchorNode)}catch{return!1}}function rp(t){return t.nodeType==3?Mc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function hh(t,e,n,i){return n?C3(t,e,n,i,-1)||C3(t,e,n,i,1):!1}function Pc(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function bv(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function C3(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:to(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Pc(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?to(t):0}else return!1}}function to(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ky(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function FJ(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function lj(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function BJ(t,e,n,i,r,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,p=u==l.body,m=1,g=1;if(p)f=FJ(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let b=u.getBoundingClientRect();({scaleX:m,scaleY:g}=lj(u,b)),f={left:b.left,right:b.left+u.clientWidth*m,top:b.top,bottom:b.top+u.clientHeight*g}}let v=0,y=0;if(r=="nearest")e.top<f.top?(y=e.top-(f.top+o),n>0&&e.bottom>f.bottom+y&&(y=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(y=e.bottom-f.bottom+o,n<0&&e.top-y<f.top&&(y=e.top-(f.top+o)));else{let b=e.bottom-e.top,w=f.bottom-f.top;y=(r=="center"&&b<=w?e.top+b/2-w/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-w+o)-f.top}if(i=="nearest"?e.left<f.left?(v=e.left-(f.left+s),n>0&&e.right>f.right+v&&(v=e.right-f.right+s)):e.right>f.right&&(v=e.right-f.right+s,n<0&&e.left<f.left+v&&(v=e.left-(f.left+s))):v=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,v||y)if(p)c.scrollBy(v,y);else{let b=0,w=0;if(y){let k=u.scrollTop;u.scrollTop+=y/g,w=(u.scrollTop-k)*g}if(v){let k=u.scrollLeft;u.scrollLeft+=v/m,b=(u.scrollLeft-k)*m}e={left:e.left-b,top:e.top-w,right:e.right-b,bottom:e.bottom-w},b&&Math.abs(b-v)<1&&(i="nearest"),w&&Math.abs(w-y)<1&&(r="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function zJ(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class UJ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?to(n):0),i,Math.min(e.focusOffset,i?to(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let Xc=null;function cj(t){if(t.setActive)return t.setActive();if(Xc)return t.focus(Xc);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Xc==null?{get preventScroll(){return Xc={preventScroll:!0},!0}}:void 0),!Xc){Xc=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let E3;function Mc(t,e,n=e){let i=E3||(E3=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Hu(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function VJ(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function uj(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function HJ(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,to(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=to(n))}else{if(n==t)return!0;i=Pc(n),n=n.parentNode}}function dj(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function fj(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=to(n)}else if(n.parentNode&&!bv(n))i=Pc(n),n=n.parentNode;else return null}}function hj(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!bv(n))i=Pc(n)+1,n=n.parentNode;else return null}}class ni{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new ni(e.parentNode,Pc(e),n)}static after(e,n){return new ni(e.parentNode,Pc(e)+1,n)}}const aC=[];class Nt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Nt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=A3(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=A3(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=to(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Nt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&r==-1&&(r=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=aC){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new pj(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Nt.prototype.breakAfter=0;function A3(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class pj{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function mj(t,e,n,i,r,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!f&&s.length<2&&u.merge(n,r,s.length?d:null,n==0,a,l))){if(i<c.length){let p=c[i];p&&(r<p.length||p.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(p=p.split(r),r=0),!f&&d&&p.merge(0,r,d,!0,0,l)?s[s.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function gj(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of i)d+=f.length;t.length+=d,mj(t,c,u,a,l,i,0,r,s)}let Oi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},a2=typeof document<"u"?document:{documentElement:{style:{}}};const l2=/Edge\/(\d+)/.exec(Oi.userAgent),vj=/MSIE \d/.test(Oi.userAgent),c2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Oi.userAgent),qy=!!(vj||c2||l2),N3=!qy&&/gecko\/(\d+)/i.test(Oi.userAgent),Zw=!qy&&/Chrome\/(\d+)/.exec(Oi.userAgent),WJ="webkitFontSmoothing"in a2.documentElement.style,yj=!qy&&/Apple Computer/.test(Oi.vendor),P3=yj&&(/Mobile\/\w+/.test(Oi.userAgent)||Oi.maxTouchPoints>2);var _e={mac:P3||/Mac/.test(Oi.platform),windows:/Win/.test(Oi.platform),linux:/Linux|X11/.test(Oi.platform),ie:qy,ie_version:vj?a2.documentMode||6:c2?+c2[1]:l2?+l2[1]:0,gecko:N3,gecko_version:N3?+(/Firefox\/(\d+)/.exec(Oi.userAgent)||[0,0])[1]:0,chrome:!!Zw,chrome_version:Zw?+Zw[1]:0,ios:P3,android:/Android\b/.test(Oi.userAgent),safari:yj,webkit_version:WJ?+(/\bAppleWebKit\/(\d+)/.exec(Oi.userAgent)||[0,0])[1]:0,tabSize:a2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const GJ=256;class ds extends Nt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof ds)||this.length-(n-e)+i.length>GJ||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new ds(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new ni(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return KJ(this.dom,e,n)}}class Uo extends Nt{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(uj(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof Uo&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(gj(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Uo(this.mark,n,o)}domAtPos(e){return bj(this,e)}coordsAt(e,n){return xj(this,e,n)}}function KJ(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?_e.chrome||_e.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Mc(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return _e.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Ky(l,o<0):l||null}class Pa extends Nt{static create(e,n,i){return new Pa(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Pa.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Pa)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Pa&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ut.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):ut.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ni.before(this.dom):ni.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return Ky(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class xd extends Nt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof xd&&e.side==this.side}split(){return new xd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ni.before(this.dom):ni.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ut.empty}get isHidden(){return!0}}ds.prototype.children=Pa.prototype.children=xd.prototype.children=aC;function bj(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new ni(n,0)}function wj(t,e,n){let i,{children:r}=t;n>0&&e instanceof Uo&&r.length&&(i=r[r.length-1])instanceof Uo&&i.mark.eq(e.mark)?wj(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function xj(t,e,n){let i=null,r=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let p=c.children[d],m=f+p.length;m>=u&&(p.children.length?a(p,u-f):(!s||s.isHidden&&(n>0||YJ(s,p)))&&(m>u||f==m&&p.getSide()>0)?(s=p,o=u-f):(f<u||f==m&&p.getSide()<0&&!p.isHidden)&&(i=p,r=u-f)),f=m}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):qJ(t)}function qJ(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=rp(e);return n[n.length-1]||null}function YJ(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function u2(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const M3=Object.create(null);function wv(t,e,n){if(t==e)return!0;t||(t=M3),e||(e=M3);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function d2(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function XJ(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class kl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var vi=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(vi||(vi={}));class nt extends Nc{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Hp(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new ll(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=Sj(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new ll(e,i,r,n,e.widget||null,!0)}static line(e){return new Wp(e)}static set(e,n=!1){return yt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}nt.none=yt.empty;class Hp extends nt{constructor(e){let{start:n,end:i}=Sj(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof Hp&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&wv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Hp.prototype.point=!1;class Wp extends nt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Wp&&this.spec.class==e.spec.class&&wv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Wp.prototype.mapMode=Ii.TrackBefore;Wp.prototype.point=!0;class ll extends nt{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Ii.TrackBefore:Ii.TrackAfter:Ii.TrackDel}get type(){return this.startSide!=this.endSide?vi.WidgetRange:this.startSide<=0?vi.WidgetBefore:vi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ll&&JJ(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}ll.prototype.point=!0;function Sj(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function JJ(t,e){return t==e||!!(t&&e&&t.compare(e))}function c0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class dn extends Nt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof dn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),gj(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new dn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){wv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){wj(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=u2(n,this.attrs||{})),i&&(this.attrs=u2({class:i},this.attrs||{}))}domAtPos(e){return bj(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(uj(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(d2(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Nt.get(r)instanceof Uo;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Nt.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!_e.ios||!this.children.some(s=>s instanceof ds))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof ds)||/[^ -~]/.test(i.text))return null;let r=rp(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=xj(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof dn&&this.children.length==0&&e.children.length==0&&wv(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof dn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class Oo extends Nt{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof Oo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?ni.before(this.dom):ni.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Oo(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return aC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ut.empty}domBoundsAround(){return null}become(e){return e instanceof Oo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof f2?null:Ky(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class f2 extends kl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ph{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Oo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new dn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Gm(new xd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Oo)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Gm(new ds(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof ll){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof ll)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Oo(i.widget||Sd.block,a,i));else{let l=Pa.create(i.widget||Sd.inline,a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(Gm(new xd(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(Gm(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new ph(e,n,i,s);return o.openEnd=yt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Gm(t,e){for(let n of e)t=new Uo(n,[t],t.length);return t}class Sd extends kl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Sd.inline=new Sd("span");Sd.block=new Sd("div");var Ft=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ft||(Ft={}));const Tc=Ft.LTR,lC=Ft.RTL;function kj(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const ZJ=kj("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),QJ=kj("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),h2=Object.create(null),ws=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);h2[e]=n,h2[n]=-e}function _j(t){return t<=247?ZJ[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?QJ[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const eZ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ma{get dir(){return this.level%2?lC:Tc}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Cj(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Cj(i.inner,r.inner))return!1}return!0}const At=[];function tZ(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let c=o,u=l,d=l;c<a;c++){let f=_j(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),At[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=At[c];if(f==128)c<a-1&&u==At[c+1]&&u&24?f=At[c]=u:At[c]=256;else if(f==64){let p=c+1;for(;p<a&&At[p]==64;)p++;let m=c&&u==8||p<n&&At[p]==8?d==1?1:8:256;for(let g=c;g<p;g++)At[g]=m;c=p-1}else f==8&&d==1&&(At[c]=1);u=f,f&7&&(d=f)}}}function nZ(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let d=c,f,p,m;d<u;d++)if(p=h2[f=t.charCodeAt(d)])if(p<0){for(let g=a-3;g>=0;g-=3)if(ws[g+1]==-p){let v=ws[g+2],y=v&2?r:v&4?v&1?s:r:0;y&&(At[d]=At[ws[g]]=y),a=g;break}}else{if(ws.length==189)break;ws[a++]=d,ws[a++]=f,ws[a++]=l}else if((m=At[d])==2||m==1){let g=m==r;l=g?0:1;for(let v=a-3;v>=0;v-=3){let y=ws[v+2];if(y&2)break;if(g)ws[v+2]|=2;else{if(y&4)break;ws[v+2]|=4}}}}}function iZ(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let c=At[l];if(c==256){let u=l+1;for(;;)if(u==a){if(r==n.length)break;u=n[r++].to,a=r<n.length?n[r].from:e}else if(At[u]==256)u++;else break;let d=s==1,f=(u<e?At[u]:i)==1,p=d==f?d?1:2:i;for(let m=u,g=r,v=g?n[g-1].to:t;m>l;)m==v&&(m=n[--g].from,v=g?n[g-1].to:t),At[--m]=p;l=u}else s=c,l++}}}function p2(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let g=At[l];g!=a&&(u=!1,d=g==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,m=l;e:for(;;)if(c<s.length&&m==s[c].from){if(d)break e;let g=s[c];if(!u)for(let v=g.to,y=c+1;;){if(v==n)break e;if(y<s.length&&s[y].from==v)v=s[y++].to;else{if(At[v]==a)break e;break}}if(c++,f)f.push(g);else{g.from>l&&o.push(new Ma(l,g.from,p));let v=g.direction==Tc!=!(p%2);m2(t,v?i+1:i,r,g.inner,g.from,g.to,o),l=g.to}m=g.to}else{if(m==n||(u?At[m]!=a:At[m]==a))break;m++}f?p2(t,l,m,i+1,r,f,o):l<m&&o.push(new Ma(l,m,p)),l=m}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let g=At[l-1];g!=a&&(u=!1,d=g==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,m=l;e:for(;;)if(c&&m==s[c-1].to){if(d)break e;let g=s[--c];if(!u)for(let v=g.from,y=c;;){if(v==e)break e;if(y&&s[y-1].to==v)v=s[--y].from;else{if(At[v-1]==a)break e;break}}if(f)f.push(g);else{g.to<l&&o.push(new Ma(g.to,l,p));let v=g.direction==Tc!=!(p%2);m2(t,v?i+1:i,r,g.inner,g.from,g.to,o),l=g.from}m=g.from}else{if(m==e||(u?At[m-1]!=a:At[m-1]==a))break;m--}f?p2(t,m,l,i+1,r,f,o):m<l&&o.push(new Ma(m,l,p)),l=m}}function m2(t,e,n,i,r,s,o){let a=e%2?2:1;tZ(t,r,s,i,a),nZ(t,r,s,i,a),iZ(r,s,i,a),p2(t,r,s,e,n,i,o)}function rZ(t,e,n){if(!t)return[new Ma(0,0,e==lC?1:0)];if(e==Tc&&!n.length&&!eZ.test(t))return Ej(t.length);if(n.length)for(;t.length>At.length;)At[At.length]=256;let i=[],r=e==Tc?0:1;return m2(t,r,r,n,0,t.length,i),i}function Ej(t){return[new Ma(0,t,0)]}let Aj="";function sZ(t,e,n,i,r){var s;let o=i.head-t.from,a=Ma.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],c=l.side(r,n);if(o==c){let f=a+=r?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!r,n),c=l.side(r,n)}let u=Vn(t.text,o,l.forward(r,n));(u<l.from||u>l.to)&&(u=c),Aj=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?re.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):re.cursor(u+t.from,l.forward(r,n)?-1:1,l.level)}function oZ(t,e,n){for(let i=e;i<n;i++){let r=_j(t.charCodeAt(i));if(r==1)return Tc;if(r==2||r==4)return lC}return Tc}const Nj=Ee.define(),Pj=Ee.define(),Mj=Ee.define(),Tj=Ee.define(),g2=Ee.define(),Rj=Ee.define(),Oj=Ee.define(),cC=Ee.define(),uC=Ee.define(),Ij=Ee.define({combine:t=>t.some(e=>e)}),Dj=Ee.define({combine:t=>t.some(e=>e)}),Lj=Ee.define();class Wu{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Wu(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Wu(re.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Km=Je.define({map:(t,e)=>t.map(e)}),jj=Je.define();function ar(t,e,n){let i=t.facet(Tj);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Po=Ee.define({combine:t=>t.length?t[0]:!0});let aZ=0;const Mu=Ee.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class qn{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Mu.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Mu.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new qn(aZ++,e,i,r,a=>{let l=[];return o&&l.push(sp.of(c=>{let u=c.plugin(a);return u?o(u):nt.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return qn.define((i,r)=>new e(i,r),n)}}class Qw{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(ar(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){ar(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){ar(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const $j=Ee.define(),dC=Ee.define(),sp=Ee.define(),Fj=Ee.define(),fC=Ee.define(),Bj=Ee.define();function T3(t,e){let n=t.state.facet(Bj);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return yt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=r;for(let f=a.length-1;f>=0;f--,l--){let p=a[f].spec.bidiIsolate,m;if(p==null&&(p=oZ(e.text,c,u)),l>0&&d.length&&(m=d[d.length-1]).to==c&&m.direction==p)m.to=u,d=m.inner;else{let g={from:c,to:u,direction:p,inner:[]};d.push(g),d=g.inner}}}}),r}const zj=Ee.define();function hC(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(zj)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Uf=Ee.define();class Lr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Lr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],p=Math.max(a,d),m=Math.min(u,f);if(p<=m&&new Lr(p+c,m+c,p,m).addToSet(i),f>u)break;s+=2}if(!l)return i;new Lr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class xv{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=bn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Lr(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new xv(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class R3 extends Nt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=nt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new dn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Lr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!pZ(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?cZ(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Lr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(_e.ie||_e.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=fZ(o,a,e.changes);return i=Lr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=_e.chrome||_e.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Oo&&o.widget instanceof f2&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,p,m,g;if(i&&i.range.fromB<d&&i.range.toB>u){let k=ph.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),C=ph.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=k.breakAtStart,m=k.openStart,g=C.openEnd;let E=this.compositionView(i);C.breakAtStart?E.breakAfter=1:C.content.length&&E.merge(E.length,E.length,C.content[0],!1,C.openStart,0)&&(E.breakAfter=C.content[0].breakAfter,C.content.shift()),k.content.length&&E.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(E).concat(C.content)}else({content:f,breakAtStart:p,openStart:m,openEnd:g}=ph.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:y}=s.findPos(c,1),{i:b,off:w}=s.findPos(l,-1);mj(this,b,w,v,y,f,p,m,g)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(jj)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new ds(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new Uo(r,[n],n.length);let i=new dn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Nt.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(Po)||this.dom.tabIndex>-1)&&l0(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(_e.gecko&&a.empty&&!this.hasComposition&&lZ(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new ni(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!hh(l.node,l.offset,u.anchorNode,u.anchorOffset)||!hh(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{_e.android&&_e.chrome&&this.dom.contains(u.focusNode)&&hZ(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=ip(this.view.root);if(d)if(a.empty){if(_e.gecko){let f=uZ(l.node,l.offset);if(f&&f!=3){let p=(f==1?fj:hj)(l.node,l.offset);p&&(l=new ni(p.node,p.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new ni(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new ni(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&hh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=ip(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=dn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Nt.get(n.childNodes[r]);s instanceof dn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Nt.get(n.childNodes[r]);s instanceof dn&&(i=s.domAtPos(s.length))}return i?new ni(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Nt.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof dn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof dn&&!(i instanceof dn&&n>=0)))i=a,r=c;else if(i&&c==e&&l==e&&a instanceof Oo&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof dn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof ds))return null;let s=Vn(r.text,i);if(s==i)return null;let o=Mc(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Ft.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>r)break;if(c>=i){let p=d.dom.getBoundingClientRect();if(n.push(p.height),o){let m=d.dom.lastChild,g=m?rp(m):[];if(g.length){let v=g[g.length-1],y=l?v.right-p.left:p.right-v.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Ft.RTL:Ft.LTR}measureTextSize(){for(let s of this.children)if(s instanceof dn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=rp(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new pj(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(nt.replace({widget:new f2(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return nt.set(e)}updateDeco(){let e=1,n=this.view.state.facet(sp).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(Fj).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(yt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(Lj))try{if(c(this.view,e.range,e))return!0}catch(u){ar(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=hC(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;BJ(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Ft.LTR)}}function lZ(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function Uj(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=fj(n.focusNode,n.focusOffset),r=hj(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=Nt.get(r.node);if(!a||a instanceof ds&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=Nt.get(i.node);!l||l instanceof ds&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function cZ(t,e,n){let i=Uj(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new Lr(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=r.parentNode;;d=d.parentNode){let f=Nt.get(d);if(f instanceof Uo)u.push({node:d,deco:f.mark});else{if(f instanceof dn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new Hp({inclusive:!0,attributes:XJ(d),tagName:d.tagName.toLowerCase()})});else return null}}}function uZ(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let dZ=class{constructor(){this.changes=[]}compareRange(e,n){c0(e,n,this.changes)}comparePoint(e,n){c0(e,n,this.changes)}boundChange(e){c0(e,e,this.changes)}};function fZ(t,e,n){let i=new dZ;return yt.compare(t,e,n,i),i.changes}function hZ(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function pZ(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function mZ(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return re.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Vn(r.text,s,!1):a=Vn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=Vn(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=Vn(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return re.range(o+r.from,a+r.from)}function gZ(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function vZ(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function e1(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function O3(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function I3(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function v2(t,e,n){let i,r,s,o,a=!1,l,c,u,d;for(let m=t.firstChild;m;m=m.nextSibling){let g=rp(m);for(let v=0;v<g.length;v++){let y=g[v];r&&e1(r,y)&&(y=O3(I3(y,r.bottom),r.top));let b=gZ(e,y),w=vZ(n,y);if(b==0&&w==0)return m.nodeType==3?D3(m,e,n):v2(m,e,n);(!i||o>w||o==w&&s>b)&&(i=m,r=y,s=b,o=w,a=b?e<y.left?v>0:v<g.length-1:!0),b==0?n>y.bottom&&(!u||u.bottom<y.bottom)?(l=m,u=y):n<y.top&&(!d||d.top>y.top)&&(c=m,d=y):u&&e1(u,y)?u=I3(u,y.bottom):d&&e1(d,y)&&(d=O3(d,y.top))}}if(u&&u.bottom>=n?(i=l,r=u):d&&d.top<=n&&(i=c,r=d),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return D3(i,f,n);if(a&&i.contentEditable!="false")return v2(i,f,n);let p=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:p}}function D3(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Mc(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,p=f;if((_e.chrome||_e.gecko)&&Mc(t,a).getBoundingClientRect().left==u.right&&(p=!f),d<=0)return{node:t,offset:a+(p?1:0)};r=a+(p?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function Vj(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,C=!1;l=t.elementAtHeight(f),l.type!=vi.Text;)for(;f=i>0?l.bottom+k:l.top-k,!(f>=0&&f<=c);){if(C)return n?null:0;C=!0,i=-i}d=a+f;let p=l.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:L3(t,o,l,u,d);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:L3(t,o,l,u,d);let m=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:m,v=g.elementFromPoint(u,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(u=Math.max(o.left+1,Math.min(o.right-1,u)),v=g.elementFromPoint(u,d),v&&!t.contentDOM.contains(v)&&(v=null));let y,b=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(m.caretPositionFromPoint){let k=m.caretPositionFromPoint(u,d);k&&({offsetNode:y,offset:b}=k)}else if(m.caretRangeFromPoint){let k=m.caretRangeFromPoint(u,d);k&&({startContainer:y,startOffset:b}=k,(!t.contentDOM.contains(y)||_e.safari&&yZ(y,b,u)||_e.chrome&&bZ(y,b,u))&&(y=void 0))}y&&(b=Math.min(to(y),b))}if(!y||!t.docView.dom.contains(y)){let k=dn.find(t.docView,p);if(!k)return f>l.top+l.height/2?l.to:l.from;({node:y,offset:b}=v2(k.dom,u,d))}let w=t.docView.nearest(y);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=w.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(y,b)+w.posAtStart}function L3(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+IJ(o,s,t.state.tabSize)}function yZ(t,e,n){let i,r=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return Mc(t,i-1,i).getBoundingClientRect().right>n}function bZ(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Mc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function y2(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==vi.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function wZ(t,e,n,i){let r=y2(t,e.head,e.assoc||-1),s=!i||r.type!=vi.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==Ft.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return re.cursor(l,n?-1:1)}return re.cursor(n?r.to:r.from,n?-1:1)}function j3(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let c=sZ(r,s,o,a,n),u=Aj;if(!c){if(r.number==(n?t.state.doc.lines:1))return a;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function xZ(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Hn.Space&&(r=o),r==o}}function SZ(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return re.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-p.from))),a=(s<0?p.top:p.bottom)+u}let d=l.left+o,f=i??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let m=a+(f+p)*s,g=Vj(t,{x:d,y:m},!1,s);if(m<l.top||m>l.bottom||(s<0?g<r:g>r)){let v=t.docView.coordsForChar(g),y=!v||m<v.top?-1:1;return re.cursor(g,y,void 0,o)}}}function u0(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function t1(t,e,n){let i=u0(t.state.facet(fC).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:re.cursor(i,i<n.from?1:-1)}const Vf="￿";class kZ{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(at.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Vf}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=Nt.get(r),l=Nt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:bv(r))||bv(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Nt.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(_Z(e,i.node,i.offset)?n:0))}}function _Z(t,e,n){for(;;){if(!e||n<to(e))return!1;if(e==t)return!0;n=Pc(e)+1,e=e.parentNode}}class $3{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class CZ{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:NZ(e),l=new kZ(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=PZ(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!o2(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!o2(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((_e.ios||_e.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),f=Math.max(l,c),p=u.from-d,m=u.to-f;(p==0||p==1||d==0)&&(m==0||m==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=re.single(c,l)}}}function Hj(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(s===8||_e.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=AZ(t.state.doc.sliceString(o,a,Vf),e.text,l-o,c);u&&(_e.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Vf+Vf&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:ut.of(e.text.slice(u.from,u.toB).split(Vf))})}else i&&(!t.hasFocus&&t.state.facet(Po)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(_e.mac||_e.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:ut.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:_e.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ut.of([" "])}),n)return pC(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function pC(t,e,n,i=-1){if(_e.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(_e.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Hu(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Hu(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Hu(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=EZ(t,e,n));return t.state.facet(Rj).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function EZ(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&Uj(t,n.main.head);if(d){let m=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-m}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,p=s.to-s.from;i=r.changeByRange(m=>{if(m.from==s.from&&m.to==s.to)return{changes:a,range:l||m.map(a)};let g=m.to-f,v=g-c.length;if(m.to-m.from!=p||t.state.sliceDoc(v,g)!=c||m.to>=u.from&&m.from<=u.to)return{range:m};let y=r.changes({from:v,to:g,insert:e.insert}),b=m.to-s.to;return{changes:y,range:l?re.range(Math.max(0,l.anchor+b),Math.max(0,l.head+b)):m.map(y)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function AZ(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function NZ(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new $3(n,i)),(r!=n||s!=i)&&e.push(new $3(r,s))),e}function PZ(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?re.single(n+e,i+e):null}class MZ{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,_e.safari&&e.contentDOM.addEventListener("input",()=>null),_e.gecko&&GZ(e.contentDOM.ownerDocument)}handleEvent(e){!$Z(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=TZ(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Gj.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),_e.android&&_e.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return _e.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=Wj.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||RZ.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Hu(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:_e.safari&&!_e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function F3(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){ar(n.state,r)}}}function TZ(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(F3(i.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(F3(i.value,l))}}for(let i in fs)n(i).handlers.push(fs[i]);for(let i in Ur)n(i).observers.push(Ur[i]);return e}const Wj=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],RZ="dthko",Gj=[16,17,18,20,91,92,224,225],qm=6;function Ym(t){return Math.max(0,t)*.7+8}function OZ(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class IZ{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=zJ(e.contentDOM),this.atoms=e.state.facet(fC).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(at.allowMultipleSelections)&&DZ(e,n),this.dragging=jZ(e,n)&&Yj(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&OZ(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=hC(this.view);e.clientX-l.left<=r+qm?n=-Ym(r-e.clientX):e.clientX+l.right>=o-qm&&(n=Ym(e.clientX-o)),e.clientY-l.top<=s+qm?i=-Ym(s-e.clientY):e.clientY+l.bottom>=a-qm&&(i=Ym(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=u0(this.atoms,r.from,0);o!=r.from&&(s=re.cursor(o,-1))}else{let o=u0(this.atoms,r.from,-1),a=u0(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=re.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?re.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function DZ(t,e){let n=t.state.facet(Nj);return n.length?n[0](e):_e.mac?e.metaKey:e.ctrlKey}function LZ(t,e){let n=t.state.facet(Pj);return n.length?n[0](e):_e.mac?!e.altKey:!e.ctrlKey}function jZ(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=ip(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function $Z(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Nt.get(n))&&i.ignoreEvent(e))return!1;return!0}const fs=Object.create(null),Ur=Object.create(null),Kj=_e.ie&&_e.ie_version<15||_e.ios&&_e.webkit_version<604;function FZ(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),qj(t,n.value)},50)}function Yy(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function qj(t,e){e=Yy(t.state,cC,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(b2!=null&&n.selection.ranges.every(l=>l.empty)&&b2==s.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:re.cursor(c.from+d.length)}})}else o?i=n.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:re.cursor(l.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Ur.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};fs.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Ur.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ur.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};fs.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(Mj))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=UZ(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new IZ(t,e,n,i)),i&&t.observer.ignore(()=>{cj(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function B3(t,e,n,i){if(i==1)return re.cursor(e,n);if(i==2)return mZ(t.state,e,n);{let r=dn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,re.range(o,a)}}let z3=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function BZ(t,e,n,i){let r=dn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&z3(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&z3(n,i,a)?1:o&&o.bottom>=i?-1:1}function U3(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:BZ(t,n,e.clientX,e.clientY)}}const zZ=_e.ie&&_e.ie_version<=11;let V3=null,H3=0,W3=0;function Yj(t){if(!zZ)return t.detail;let e=V3,n=W3;return V3=t,W3=Date.now(),H3=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(H3+1)%3:1}function UZ(t,e){let n=U3(t,e),i=Yj(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=U3(t,s),c,u=B3(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=B3(t,n.pos,n.bias,i),f=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=f<u.from?re.range(f,p):re.range(p,f)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&i==1&&r.ranges.length>1&&(c=VZ(r,l.pos))?c:a?r.addRange(u):re.create([u])}}}function VZ(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return re.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}fs.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=re.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Yy(t.state,uC,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};fs.dragend=t=>(t.inputState.draggedContent=null,!1);function G3(t,e,n,i){if(n=Yy(t.state,cC,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&LZ(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}fs.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&G3(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return G3(t,e,i,!0),!0}return!1};fs.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Kj?null:e.clipboardData;return n?(qj(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(FZ(t),!1)};function HZ(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function WZ(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:Yy(t,uC,e.join(t.lineBreak)),ranges:n,linewise:i}}let b2=null;fs.copy=fs.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=WZ(t.state);if(!n&&!r)return!1;b2=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=Kj?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(HZ(t,n),!1)};const Xj=Xo.define();function Jj(t,e){let n=[];for(let i of t.facet(Oj)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:Xj.of(!0)}):null}function Zj(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Jj(t.state,e);n?t.dispatch(n):t.update([])}},10)}Ur.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Zj(t)};Ur.blur=t=>{t.observer.clearSelectionRange(),Zj(t)};Ur.compositionstart=Ur.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Ur.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,_e.chrome&&_e.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Ur.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};fs.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return pC(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let r;if(_e.chrome&&_e.android&&(r=Wj.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return _e.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),_e.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Ur.compositionend(t,e),20),!1};const K3=new Set;function GZ(t){K3.has(t)||(K3.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const q3=["pre-wrap","normal","pre-line","break-spaces"];let kd=!1;function Y3(){kd=!1}class KZ{constructor(e){this.lineWrapping=e,this.doc=ut.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return q3.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=q3.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class qZ{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class js{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?vi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ll?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new js(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var It=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(It||(It={}));const d0=.001;class yi{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>d0&&(kd=!0),this.height=e)}replace(e,n,i){return yi.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=r[a],f=s.lineAt(l,It.ByPosNoHeight,i.setDoc(n),0,0),p=f.to>=c?f:s.lineAt(c,It.ByPosNoHeight,i,0,0);for(d+=p.to-c,c=p.to;a>0&&f.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,It.ByPosNoHeight,i,0,0));u+=f.from-l,l=f.from;let m=mC.build(i.setDoc(o),e,u,d);s=Sv(s,s.replace(l,c,m))}return s.updateHeight(i,0)}static empty(){return new Qi(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new YZ(yi.of(e.slice(0,n)),o,yi.of(e.slice(i)))}}function Sv(t,e){return t==e?t:(t.constructor!=e.constructor&&(kd=!0),e)}yi.prototype.size=1;class Qj extends yi{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new js(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Qi extends Qj{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new js(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Qi||r instanceof Ln&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Ln?r=new Qi(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):yi.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ln extends yi{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(i,e-d/2);return new js(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:u,length:d}=n.doc.line(s+c);return new js(u,d,i+a*c,a,0)}}lineAt(e,n,i,r,s){if(n==It.ByHeight)return this.blockAt(e,i,r,s);if(n==It.ByPosNoHeight){let{from:p,to:m}=i.doc.lineAt(e);return new js(p,m-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=r+a*d+l*(c.from-s-d);return new js(c.from,c.length,Math.max(r,Math.min(f,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=n;){let f=i.doc.lineAt(u);if(u==e){let m=f.number-a;d+=l*m+c*(e-s-m)}let p=l+c*f.length;o(new js(f.from,f.length,d,p,0)),d+=p,u=f.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Ln?i[i.length-1]=new Ln(s.length+r):i.push(null,new Ln(r-1))}if(e>0){let s=i[0];s instanceof Ln?i[0]=new Ln(e+s.length):i.unshift(new Ln(e-1),null)}return yi.of(i)}decomposeLeft(e,n){n.push(new Ln(e-1),null)}decomposeRight(e,n){n.push(null,new Ln(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Ln(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=d0&&(l=-2);let f=new Qi(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new Ln(s-a).updateHeight(e,a));let c=yi.of(o);return(l<0||Math.abs(c.height-this.height)>=d0||Math.abs(l-this.heightMetrics(e,n).perLine)>=d0)&&(kd=!0),Sv(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class YZ extends yi{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==It.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==It.ByPosNoHeight?It.ByPosNoHeight:It.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,It.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&X3(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),X3(s,a)}return yi.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?yi.of(this.break?[e,null,n]:[e,n]):(this.left=Sv(this.left,e),this.right=Sv(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function X3(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Ln&&(i=t[e+1])instanceof Ln&&t.splice(e-1,3,new Ln(n.length+1+i.length))}const XZ=5;class mC{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Qi?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Qi(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new Qj(o,r,i)):(o||s||r>=XZ)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Qi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Ln(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Qi)return e;let n=new Qi(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Qi)&&!this.isCovered?this.nodes.push(new Qi(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Qi&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new mC(i,e);return yt.spans(n,i,r,s,0),s.finish(i)}}function JZ(t,e,n){let i=new ZZ;return yt.compare(t,e,n,i,0),i.changes}class ZZ{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&c0(e,n,this.changes,5)}}function QZ(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?r.innerHeight:l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function eQ(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function tQ(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class n1{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return nt.replace({widget:new nQ(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class nQ extends kl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class J3{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Z3,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ft.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(dC).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new KZ(n),this.stateDeco=e.facet(sp).filter(i=>typeof i!="function"),this.heightMap=yi.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle.setDoc(e.doc),[new Lr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=nt.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Xm(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Z3:new gC(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Hf(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(sp).filter(u=>typeof u!="function");let r=e.changedRanges,s=Lr.extendWithRanges(r,JZ(i,this.stateDeco,e?e.changes:bn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Y3(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||kd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Dj)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Ft.RTL:Ft.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:k,scaleY:C}=lj(n,a);(k>.005&&Math.abs(this.scaleX-k)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=k,this.scaleY=C,c|=16,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=dj(e.scrollDOM);let m=(this.printing?tQ:QZ)(n,this.paddingTop),g=m.top-this.pixelViewport.top,v=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!eQ(e.dom))return 0;let b=a.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(o=!0),o||r.lineWrapping&&Math.abs(b-this.contentDOMWidth)>r.charWidth){let{lineHeight:C,charWidth:E,textHeight:_}=e.docView.measureTextSize();o=C>0&&r.refresh(s,C,E,_,b/E,k),o&&(e.docView.minWidth=0,c|=16)}g>0&&v>0?u=Math.max(g,v):g<0&&v<0&&(u=Math.min(g,v)),Y3();for(let C of this.viewports){let E=C.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(C);this.heightMap=(o?yi.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle,[new Lr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new qZ(C.from,E))}kd&&(c|=2)}let w=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Xm(r.lineAt(o-i*1e3,It.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,It.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,It.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new Xm(r.lineAt(f-1e3/2,It.ByHeight,s,0,0).from,r.lineAt(f+u+1e3/2,It.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Xm(this.heightMap.lineAt(i,It.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,It.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,It.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,It.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new n1(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Ft.LTR&&!i)return[];let a=[],l=(u,d,f,p)=>{if(d-u<s)return;let m=this.state.selection.main,g=[m.from];m.empty||g.push(m.to);for(let y of g)if(y>u&&y<d){l(u,y-10,f,p),l(y+10,d,f,p);return}let v=rQ(e,y=>y.from>=f.from&&y.to<=f.to&&Math.abs(y.from-u)<s&&Math.abs(y.to-d)<s&&!g.some(b=>y.from<b&&y.to>b));if(!v){if(d<f.to&&n&&i&&n.visibleRanges.some(w=>w.from<=d&&w.to>=d)){let w=n.moveToLineBoundary(re.cursor(d),!1,!0).head;w>u&&(d=w)}let y=this.gapSize(f,u,d,p),b=i||y<2e6?y:2e6;v=new n1(u,d,y,b)}a.push(v)},c=u=>{if(u.length<o||u.type!=vi.Text)return;let d=iQ(u.from,u.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,m;if(i){let g=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,y;if(f!=null){let b=Zm(d,f),w=((this.visibleBottom-this.visibleTop)/2+g)/u.height;v=b-w,y=b+w}else v=(this.visibleTop-u.top-g)/u.height,y=(this.visibleBottom-u.top+g)/u.height;p=Jm(d,v),m=Jm(d,y)}else{let g=d.total*this.heightOracle.charWidth,v=r*this.heightOracle.charWidth,y=0;if(g>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=E.size-E.displaySize);let b=this.pixelViewport.left+y,w=this.pixelViewport.right+y,k,C;if(f!=null){let E=Zm(d,f),_=((w-b)/2+v)/g;k=E-_,C=E+_}else k=(b-v)/g,C=(w+v)/g;p=Jm(d,k),m=Jm(d,C)}p>u.from&&l(u.from,p,u,d),m<u.to&&l(m,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,i,r){let s=Zm(r,i)-Zm(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){n1.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=nt.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];yt.spans(n,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Hf(this.heightMap.lineAt(e,It.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Hf(this.heightMap.lineAt(this.scaler.fromDOM(e),It.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Hf(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Xm=class{constructor(e,n){this.from=e,this.to=n}};function iQ(t,e,n){let i=[],r=t,s=0;return yt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Jm({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function Zm(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function rQ(t,e){for(let n of t)if(e(n))return n}const Z3={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class gC{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,It.ByPos,e,0,0).top,u=n.lineAt(l,It.ByPos,e,0,0).bottom;return r+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof gC?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function Hf(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new js(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Hf(r,e)):t._content)}const Qm=Ee.define({combine:t=>t.join(" ")}),w2=Ee.define({combine:t=>t.indexOf(!0)>-1}),x2=ol.newName(),e6=ol.newName(),t6=ol.newName(),n6={"&light":"."+e6,"&dark":"."+t6};function S2(t,e,n){return new ol(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const sQ=S2("."+x2,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},n6),oQ={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},i1=_e.ie&&_e.ie_version<=11;class aQ{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new UJ,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(_e.ie&&_e.ie_version<=11||_e.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&_e.android&&e.constructor.EDIT_CONTEXT!==!1&&!(_e.chrome&&_e.chrome_version<126)&&(this.editContext=new cQ(e),e.state.facet(Po)&&(e.contentDOM.editContext=this.editContext.editContext)),i1&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Po)?i.root.activeElement!=this.dom:!l0(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(_e.ie&&_e.ie_version<=11||_e.android&&_e.chrome)&&!i.state.selection.main.empty&&r.focusNode&&hh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=ip(e.root);if(!n)return!1;let i=_e.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&lQ(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=l0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&HJ(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,oQ),i1&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),i1&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Hu(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&l0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new CZ(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=Hj(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=Q3(n,e.previousSibling||e.target.previousSibling,-1),r=Q3(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Po)!=e.state.facet(Po)&&(e.view.contentDOM.editContext=e.state.facet(Po)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Q3(t,e,n){for(;e;){let i=Nt.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function e4(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return hh(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function lQ(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return e4(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?e4(t,n):null}class cQ{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:ut.of(i.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=re.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(r)||e.dispatch({selection:u,userEvent:"select"});return}if((_e.mac||_e.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:ut.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);pC(e,c,re.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(nt.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:jj.of(nt.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=ip(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(i)return;let u=c.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(c)){r=this.pendingContextChange=null,n+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Te{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||VJ(e.parent)||document,this.viewState=new J3(e.state||at.create(e)),e.scrollTo&&e.scrollTo.is(Km)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Mu).map(r=>new Qw(r));for(let r of this.plugins)r.update(this);this.observer=new aQ(this),this.inputState=new MZ(this),this.inputState.ensureHandlers(this.plugins),this.docView=new R3(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof kn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(Xj))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=Jj(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(at.phrases)!=this.state.facet(at.phrases))return this.setState(s);r=xv.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new Wu(p.empty?p:re.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(Km)&&(d=p.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=kv.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Uf)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Qm)!=r.state.facet(Qm)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(g2))try{f(r)}catch(p){ar(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!Hj(this,u)&&c.force&&Hu(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new J3(e),this.plugins=e.facet(Mu).map(i=>new Qw(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new R3(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Mu),i=e.state.facet(Mu);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new Qw(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){ar(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(dj(i))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(m){return ar(this.state,m),t4}}),d=xv.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=t4)try{let m=c[p];m.write&&m.write(u[p],this)}catch(m){ar(this.state,m)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(m>1||m<-1){r=r+m,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(g2))a(n)}get themeClasses(){return x2+" "+(this.state.facet(w2)?t6:e6)+" "+this.state.facet(Qm)}updateAttrs(){let e=n4(this,$j,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Po)?"true":"false",class:"cm-content",style:`${_e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),n4(this,dC,n);let i=this.observer.ignore(()=>{let r=d2(this.contentDOM,this.contentAttrs,n),s=d2(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Te.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Uf);let e=this.state.facet(Te.cspNonce);ol.mount(this.root,this.styleModules.concat(sQ).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return t1(this,e,j3(this,e,n,i))}moveByGroup(e,n){return t1(this,e,j3(this,e,n,i=>xZ(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return re.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return wZ(this,e,n,i)}moveVertically(e,n,i){return t1(this,e,SZ(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Vj(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Ma.find(s,e-r.from,-1,n)];return Ky(i,o.dir==Ft.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Ij)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>uQ)return Ej(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||Cj(s.isolates,i=T3(this,e))))return s.order;i||(i=T3(this,e));let r=rZ(e.text,n,i);return this.bidiCache.push(new kv(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||_e.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{cj(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Km.of(new Wu(typeof e=="number"?re.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Km.of(new Wu(re.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return qn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return qn.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=ol.newName(),r=[Qm.of(i),Uf.of(S2(`.${i}`,e))];return n&&n.dark&&r.push(w2.of(!0)),r}static baseTheme(e){return zp.lowest(Uf.of(S2("."+x2,e,n6)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Nt.get(i)||Nt.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Te.styleModule=Uf;Te.inputHandler=Rj;Te.clipboardInputFilter=cC;Te.clipboardOutputFilter=uC;Te.scrollHandler=Lj;Te.focusChangeEffect=Oj;Te.perLineTextDirection=Ij;Te.exceptionSink=Tj;Te.updateListener=g2;Te.editable=Po;Te.mouseSelectionStyle=Mj;Te.dragMovesSelection=Pj;Te.clickAddsSelectionRange=Nj;Te.decorations=sp;Te.outerDecorations=Fj;Te.atomicRanges=fC;Te.bidiIsolatedRanges=Bj;Te.scrollMargins=zj;Te.darkTheme=w2;Te.cspNonce=Ee.define({combine:t=>t.length?t[0]:""});Te.contentAttributes=dC;Te.editorAttributes=$j;Te.lineWrapping=Te.contentAttributes.of({class:"cm-lineWrapping"});Te.announce=Je.define();const uQ=4096,t4={};class kv{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Ft.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new kv(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function n4(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&u2(o,n)}return n}const dQ=_e.mac?"mac":_e.windows?"win":_e.linux?"linux":"key";function fQ(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function eg(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const hQ=zp.default(Te.domEventHandlers({keydown(t,e){return s6(r6(e.state),t,e,"editor")}})),i6=Ee.define({enables:hQ}),i4=new WeakMap;function r6(t){let e=t.facet(i6),n=i4.get(e);return n||i4.set(e,n=gQ(e.reduce((i,r)=>i.concat(r),[]))),n}function pQ(t,e,n){return s6(r6(t.state),e,t,n)}let wa=null;const mQ=4e3;function gQ(t,e=dQ){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let p=n[o]||(n[o]=Object.create(null)),m=a.split(/ (?!$)/).map(y=>fQ(y,e));for(let y=1;y<m.length;y++){let b=m.slice(0,y).join(" ");r(b,!0),p[b]||(p[b]={preventDefault:!0,stopPropagation:!1,run:[w=>{let k=wa={view:w,prefix:b,scope:o};return setTimeout(()=>{wa==k&&(wa=null)},mQ),!0}]})}let g=m.join(" ");r(g,!1);let v=p[g]||(p[g]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&v.run.push(l),c&&(v.preventDefault=!0),u&&(v.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in u)u[f].run.push(p=>d(p,k2))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let k2=null;function s6(t,e,n,i){k2=e;let r=$J(e),s=Cr(r,0),o=No(s)==r.length&&r!=" ",a="",l=!1,c=!1,u=!1;wa&&wa.view==n&&wa.scope==i&&(a=wa.prefix+" ",Gj.indexOf(e.keyCode)<0&&(c=!0,wa=null));let d=new Set,f=v=>{if(v){for(let y of v.run)if(!d.has(y)&&(d.add(y),y(n)))return v.stopPropagation&&(u=!0),!0;v.preventDefault&&(v.stopPropagation&&(u=!0),c=!0)}return!1},p=t[i],m,g;return p&&(f(p[a+eg(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(_e.windows&&e.ctrlKey&&e.altKey)&&(m=al[e.keyCode])&&m!=r?(f(p[a+eg(m,e,!0)])||e.shiftKey&&(g=np[e.keyCode])!=r&&g!=m&&f(p[a+eg(g,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(p[a+eg(r,e,!0)])&&(l=!0),!l&&f(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),k2=null,l}class Gp{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=o6(e);return[new Gp(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return vQ(e,n,i)}}function o6(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Ft.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function r4(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function vQ(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Ft.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=o6(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),p=y2(t,i,1),m=y2(t,r,-1),g=p.type==vi.Text?p:null,v=m.type==vi.Text?m:null;if(g&&(t.lineWrapping||p.widgetLineBreaks)&&(g=r4(t,i,1,g)),v&&(t.lineWrapping||m.widgetLineBreaks)&&(v=r4(t,r,-1,v)),g&&v&&g.from==v.from&&g.to==v.to)return b(w(n.from,n.to,g));{let C=g?w(n.from,null,g):k(p,!1),E=v?w(null,n.to,v):k(m,!0),_=[];return(g||p).to<(v||m).from-(g&&v?1:0)||p.widgetLineBreaks>1&&C.bottom+t.defaultLineHeight/2<E.top?_.push(y(d,C.bottom,f,E.top)):C.bottom<E.top&&t.elementAtHeight((C.bottom+E.top)/2).type==vi.Text&&(C.bottom=E.top=(C.bottom+E.top)/2),b(C).concat(_).concat(b(E))}function y(C,E,_,N){return new Gp(e,C-l.left,E-l.top,_-C,N-E)}function b({top:C,bottom:E,horizontal:_}){let N=[];for(let M=0;M<_.length;M+=2)N.push(y(_[M],C,_[M+1],E));return N}function w(C,E,_){let N=1e9,M=-1e9,R=[];function I(B,W,Y,te,V){let $=t.coordsAtPos(B,B==_.to?-2:2),ie=t.coordsAtPos(Y,Y==_.from?2:-2);!$||!ie||(N=Math.min($.top,ie.top,N),M=Math.max($.bottom,ie.bottom,M),V==Ft.LTR?R.push(s&&W?d:$.left,s&&te?f:ie.right):R.push(!s&&te?d:ie.left,!s&&W?f:$.right))}let D=C??_.from,K=E??_.to;for(let B of t.visibleRanges)if(B.to>D&&B.from<K)for(let W=Math.max(B.from,D),Y=Math.min(B.to,K);;){let te=t.state.doc.lineAt(W);for(let V of t.bidiSpans(te)){let $=V.from+te.from,ie=V.to+te.from;if($>=Y)break;ie>W&&I(Math.max($,W),C==null&&$<=D,Math.min(ie,Y),E==null&&ie>=K,V.dir)}if(W=te.to+1,W>=Y)break}return R.length==0&&I(D,C==null,K,E==null,t.textDirection),{top:N,bottom:M,horizontal:R}}function k(C,E){let _=a.top+(E?C.top:C.bottom);return{top:_,bottom:_,horizontal:[]}}}function yQ(t,e){return t.constructor==e.constructor&&t.eq(e)}class bQ{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(f0)!=e.state.facet(f0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(f0);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!yQ(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const f0=Ee.define();function a6(t){return[qn.define(e=>new bQ(e,t)),f0.of(t)]}const op=Ee.define({combine(t){return Sl(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function wQ(t={}){return[op.of(t),xQ,SQ,kQ,Dj.of(!0)]}function l6(t){return t.startState.facet(op)!=t.state.facet(op)}const xQ=a6({above:!0,markers(t){let{state:e}=t,n=e.facet(op),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:re.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Gp.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=l6(t);return n&&s4(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){s4(e.state,t)},class:"cm-cursorLayer"});function s4(t,e){e.style.animationDuration=t.facet(op).cursorBlinkRate+"ms"}const SQ=a6({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Gp.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||l6(t)},class:"cm-selectionLayer"}),kQ=zp.highest(Te.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function o4(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function _Q(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class CQ{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,c,u)=>r(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let d=i(a,l,c);d&&u(c,c+a[0].length,d)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new sl,i=n.add.bind(n);for(let{from:r,to:s}of _Q(e,this.maxLength))o4(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],p,m=(g,v,y)=>f.push(y.range(g,v));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,m);else o4(e.state.doc,this.regexp,u,d,(g,v)=>this.addMatch(v,e,g,m));n=n.update({filterFrom:u,filterTo:d,filter:(g,v)=>g<u||v>d,add:f})}}return n}}const _2=/x/.unicode!=null?"gu":"g",EQ=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,_2),AQ={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let r1=null;function NQ(){var t;if(r1==null&&typeof document<"u"&&document.body){let e=document.body.style;r1=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return r1||!1}const h0=Ee.define({combine(t){let e=Sl(t,{render:null,specialChars:EQ,addSpecialChars:null});return(e.replaceTabs=!NQ())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,_2)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,_2)),e}});function PQ(t={}){return[h0.of(t),MQ()]}let a4=null;function MQ(){return a4||(a4=qn.fromClass(class{constructor(t){this.view=t,this.decorations=nt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(h0)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new CQ({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=Cr(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=Vp(o.text,a,i-o.from);return nt.replace({widget:new IQ((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=nt.replace({widget:new OQ(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(h0);t.startState.facet(h0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const TQ="•";function RQ(t){return t>=32?TQ:t==10?"␤":String.fromCharCode(9216+t)}class OQ extends kl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=RQ(this.code),i=e.state.phrase("Control character")+" "+(AQ[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class IQ extends kl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function DQ(){return jQ}const LQ=nt.line({class:"cm-activeLine"}),jQ=qn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(LQ.range(r.from)),e=r.from)}return nt.set(n)}},{decorations:t=>t.decorations}),df="-10000px";class c6{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function $Q(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const s1=Ee.define({combine:t=>{var e,n,i;return{position:_e.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||$Q}}}),l4=new WeakMap,vC=qn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(s1);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new c6(t,yC,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(s1);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=df,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(_e.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==df&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=hC(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(s1).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){u.style.top=df;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,m=p?7:0,g=f.right-f.left,v=(e=l4.get(c))!==null&&e!==void 0?e:f.bottom-f.top,y=c.offset||BQ,b=this.view.textDirection==Ft.LTR,w=f.width>i.right-i.left?b?i.left:i.right-f.width:b?Math.max(i.left,Math.min(d.left-(p?14:0)+y.x,i.right-g)):Math.min(Math.max(i.left,d.left-g+(p?14:0)-y.x),i.right-g),k=this.above[a];!l.strictSide&&(k?d.top-v-m-y.y<i.top:d.bottom+v+m+y.y>i.bottom)&&k==i.bottom-d.bottom>d.top-i.top&&(k=this.above[a]=!k);let C=(k?d.top-i.top:i.bottom-d.bottom)-m;if(C<v&&c.resize!==!1){if(C<this.view.defaultLineHeight){u.style.top=df;continue}l4.set(c,v),u.style.height=(v=C)/s+"px"}else u.style.height&&(u.style.height="");let E=k?d.top-v-m-y.y:d.bottom+m+y.y,_=w+g;if(c.overlap!==!0)for(let N of o)N.left<_&&N.right>w&&N.top<E+v&&N.bottom>E&&(E=k?N.top-v-2-m:N.bottom+m+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/s+"px",c4(u,(w-t.parent.left)/r)):(u.style.top=E/s+"px",c4(u,w/r)),p){let N=d.left+(b?y.x:-y.x)-(w+14-7);p.style.left=N/r+"px"}c.overlap!==!0&&o.push({left:w,top:E,right:_,bottom:E+v}),u.classList.toggle("cm-tooltip-above",k),u.classList.toggle("cm-tooltip-below",!k),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=df}},{eventObservers:{scroll(){this.maybeMeasure()}}});function c4(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const FQ=Te.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),BQ={x:0,y:0},yC=Ee.define({enables:[vC,FQ]}),_v=Ee.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class Xy{static create(e){return new Xy(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new c6(e,_v,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const zQ=yC.compute([_v],t=>{let e=t.facet(_v);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:Xy.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class UQ{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Pa)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==Ft.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>ar(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(vC),n=e?e.manager.tooltips.findIndex(i=>i.create==Xy.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!VQ(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!HQ(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tg=4;function VQ(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-tg&&e.clientX<=i+tg&&e.clientY>=r-tg&&e.clientY<=s+tg}function HQ(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function WQ(t,e={}){let n=Je.define(),i=xi.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,Ii.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(KQ)&&(r=[]);return r},provide:r=>_v.from(r)});return{active:i,extension:[i,qn.define(r=>new UQ(r,t,i,n,e.hoverTime||300)),zQ]}}function GQ(t,e){let n=t.plugin(vC);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const KQ=Je.define(),u4=Ee.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function ap(t,e){let n=t.plugin(u6),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const u6=qn.fromClass(class{constructor(t){this.input=t.state.facet(lp),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(u4);this.top=new ng(t,!0,e.topContainer),this.bottom=new ng(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(u4);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ng(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ng(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(lp);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Te.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class ng{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=d4(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=d4(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function d4(t){let e=t.nextSibling;return t.remove(),e}const lp=Ee.define({enables:u6});class cl extends Nc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}cl.prototype.elementClass="";cl.prototype.toDOM=void 0;cl.prototype.mapMode=Ii.TrackBefore;cl.prototype.startSide=cl.prototype.endSide=-1;cl.prototype.point=!0;const p0=Ee.define(),qQ=Ee.define(),m0=Ee.define(),f4=Ee.define({combine:t=>t.some(e=>e)});function YQ(t){return[XQ]}const XQ=qn.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(m0).map(e=>new p4(t,e)),this.fixed=!t.state.facet(f4);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(f4)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=yt.iter(this.view.state.facet(p0),this.view.viewport.from),i=[],r=this.gutters.map(s=>new JQ(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==vi.Text&&o){C2(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==vi.Text){C2(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(m0),n=t.state.facet(m0),i=t.docChanged||t.heightChanged||t.viewportChanged||!yt.eq(t.startState.facet(p0),t.state.facet(p0),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new p4(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Te.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Ft.LTR?{left:i,right:r}:{right:i,left:r}})});function h4(t){return Array.isArray(t)?t:[t]}function C2(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class JQ{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=yt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new d6(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];C2(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(qQ)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class p4{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=h4(n.markers(e)),n.initialSpacer&&(this.spacer=new d6(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=h4(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!yt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class d6{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),ZQ(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function ZQ(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const QQ=Ee.define(),eee=Ee.define(),Tu=Ee.define({combine(t){return Sl(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class o1 extends cl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function a1(t,e){return t.state.facet(Tu).formatNumber(e,t.state)}const tee=m0.compute([Tu],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(QQ)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new o1(a1(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(eee)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Tu)!=e.state.facet(Tu),initialSpacer(e){return new o1(a1(e,m4(e.state.doc.lines)))},updateSpacer(e,n){let i=a1(n.view,m4(n.view.state.doc.lines));return i==e.number?e:new o1(i)},domEventHandlers:t.facet(Tu).domEventHandlers,side:"before"}));function nee(t={}){return[Tu.of(t),YQ(),tee]}function m4(t){let e=9;for(;e<t;)e=e*10+9;return e}const iee=new class extends cl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},ree=p0.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(iee.range(r)))}return yt.of(e)});function see(){return ree}const f6=new Up;function oee(t){window.codemirror&&window.codemirror.dispatch({effects:f6.reconfigure(at.readOnly.of(t))})}const E2=Je.define(),aee=xi.define({create(){return nt.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(E2)&&(n=nt.none,i.value!==null&&(n=n.update({add:[lee.range(i.value)]})));return n},provide:t=>Te.decorations.from(t)}),lee=nt.line({class:"!bg-mantis-400/10"});function h6(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:E2.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:E2.of(e)})}}const Cv=de(!1),bC={},cee=Symbol((bC?"production":void 0)!=="production"?"RESET":""),p6=t=>typeof(t==null?void 0:t.then)=="function";function uee(t=()=>{try{return window.localStorage}catch(n){(bC?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,c)=>{var u,d;const f=m=>{if(m=m||"",i!==m){try{r=JSON.parse(m,e==null?void 0:e.reviver)}catch{return c}i=m}return r},p=(d=(u=t())==null?void 0:u.getItem(l))!=null?d:null;return p6(p)?p.then(f):f(p)},setItem:(l,c)=>{var u;return(u=t())==null?void 0:u.setItem(l,JSON.stringify(c,void 0))},removeItem:l=>{var c;return(c=t())==null?void 0:c.removeItem(l)}},o=l=>(c,u,d)=>l(c,f=>{let p;try{p=JSON.parse(f||"")}catch{p=d}u(p)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,c)=>{if(!(t()instanceof window.Storage))return()=>{};const u=d=>{d.storageArea===t()&&d.key===l&&c(d.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(s.subscribe=o(a)),s}const dee=uee();function m6(t,e,n=dee,i){const r=i==null?void 0:i.getOnInit,s=de(r?n.getItem(t,e):e);return(bC?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},de(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===cee?(l(s,e),n.removeItem(t)):p6(u)?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}var pt;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(pt||(pt={}));var g4;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(g4||(g4={}));const Me=pt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),da=t=>{switch(typeof t){case"undefined":return Me.undefined;case"string":return Me.string;case"number":return Number.isNaN(t)?Me.nan:Me.number;case"boolean":return Me.boolean;case"function":return Me.function;case"bigint":return Me.bigint;case"symbol":return Me.symbol;case"object":return Array.isArray(t)?Me.array:t===null?Me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Me.promise:typeof Map<"u"&&t instanceof Map?Me.map:typeof Set<"u"&&t instanceof Set?Me.set:typeof Date<"u"&&t instanceof Date?Me.date:Me.object;default:return Me.unknown}},ce=pt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Vo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),i}static assert(e){if(!(e instanceof Vo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,pt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];n[s]=n[s]||[],n[s].push(e(r))}else i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Vo.create=t=>new Vo(t);const A2=(t,e)=>{let n;switch(t.code){case ce.invalid_type:t.received===Me.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,pt.jsonStringifyReplacer)}`;break;case ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${pt.joinValues(t.keys,", ")}`;break;case ce.invalid_union:n="Invalid input";break;case ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${pt.joinValues(t.options)}`;break;case ce.invalid_enum_value:n=`Invalid enum value. Expected ${pt.joinValues(t.options)}, received '${t.received}'`;break;case ce.invalid_arguments:n="Invalid function arguments";break;case ce.invalid_return_type:n="Invalid function return type";break;case ce.invalid_date:n="Invalid date";break;case ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:pt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ce.custom:n="Invalid input";break;case ce.invalid_intersection_types:n="Intersection results could not be merged";break;case ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,pt.assertNever(t)}return{message:n}};let fee=A2;function hee(){return fee}const pee=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}};function be(t,e){const n=hee(),i=pee({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===A2?void 0:A2].filter(r=>!!r)});t.common.issues.push(i)}class pr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Ve;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return pr.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Ve;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Ve=Object.freeze({status:"aborted"}),Wf=t=>({status:"dirty",value:t}),Hr=t=>({status:"valid",value:t}),v4=t=>t.status==="aborted",y4=t=>t.status==="dirty",_d=t=>t.status==="valid",Ev=t=>typeof Promise<"u"&&t instanceof Promise;var Re;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Re||(Re={}));class ul{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const b4=(t,e)=>{if(_d(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Vo(t.common.issues);return this._error=n,this._error}}};function tt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class ft{get description(){return this._def.description}_getType(e){return da(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:da(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pr,ctx:{common:e.parent.common,data:e.data,parsedType:da(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Ev(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:da(e)},r=this._parseSync({data:e,path:i.path,parent:i});return b4(i,r)}"~validate"(e){var i,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:da(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return _d(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(r=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>_d(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:da(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Ev(r)?r:Promise.resolve(r));return b4(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ce.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new Ad({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return qa.create(this,this._def)}nullable(){return Nd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Js.create(this)}promise(){return Mv.create(this,this._def)}or(e){return Nv.create([this,e],this._def)}and(e){return Pv.create(this,e,this._def)}transform(e){return new Ad({...tt(this._def),schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new M2({...tt(this._def),innerType:this,defaultValue:n,typeName:He.ZodDefault})}brand(){return new jee({typeName:He.ZodBranded,type:this,...tt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new T2({...tt(this._def),innerType:this,catchValue:n,typeName:He.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return wC.create(this,e)}readonly(){return R2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const mee=/^c[^\s-]{8,}$/i,gee=/^[0-9a-z]+$/,vee=/^[0-9A-HJKMNP-TV-Z]{26}$/i,yee=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,bee=/^[a-z0-9_-]{21}$/i,wee=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,xee=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,See=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,kee="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let l1;const _ee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Cee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Eee=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Aee=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Nee=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Pee=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,g6="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Mee=new RegExp(`^${g6}$`);function v6(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function Tee(t){return new RegExp(`^${v6(t)}$`)}function Ree(t){let e=`${g6}T${v6(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Oee(t,e){return!!((e==="v4"||!e)&&_ee.test(t)||(e==="v6"||!e)&&Eee.test(t))}function Iee(t,e){if(!wee.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function Dee(t,e){return!!((e==="v4"||!e)&&Cee.test(t)||(e==="v6"||!e)&&Aee.test(t))}class ac extends ft{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Me.string){const s=this._getOrReturnCtx(e);return be(s,{code:ce.invalid_type,expected:Me.string,received:s.parsedType}),Ve}const i=new pr;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?be(r,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&be(r,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")See.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"email",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")l1||(l1=new RegExp(kee,"u")),l1.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"emoji",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")yee.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"uuid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")bee.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"nanoid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")mee.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"cuid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")gee.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"cuid2",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")vee.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"ulid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),be(r,{validation:"url",code:ce.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"regex",code:ce.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),be(r,{code:ce.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),be(r,{code:ce.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),be(r,{code:ce.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?Ree(s).test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ce.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?Mee.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ce.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?Tee(s).test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ce.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?xee.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"duration",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?Oee(e.data,s.version)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"ip",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?Iee(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"jwt",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?Dee(e.data,s.version)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"cidr",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?Nee.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"base64",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?Pee.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"base64url",code:ce.invalid_string,message:s.message}),i.dirty()):pt.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ce.invalid_string,...Re.errToObj(i)})}_addCheck(e){return new ac({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Re.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Re.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Re.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Re.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Re.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Re.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Re.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Re.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Re.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Re.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Re.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Re.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Re.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Re.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Re.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Re.errToObj(n)})}nonempty(e){return this.min(1,Re.errToObj(e))}trim(){return new ac({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ac({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ac({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ac.create=t=>new ac({checks:[],typeName:He.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...tt(t)});function Lee(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return s%o/10**r}class Cd extends ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Me.number){const s=this._getOrReturnCtx(e);return be(s,{code:ce.invalid_type,expected:Me.number,received:s.parsedType}),Ve}let i;const r=new pr;for(const s of this._def.checks)s.kind==="int"?pt.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{code:ce.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ce.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ce.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?Lee(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),be(i,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{code:ce.not_finite,message:s.message}),r.dirty()):pt.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,i,r){return new Cd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Re.toString(r)}]})}_addCheck(e){return new Cd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Re.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&pt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Cd.create=t=>new Cd({checks:[],typeName:He.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...tt(t)});class cp extends ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Me.bigint)return this._getInvalidInput(e);let i;const r=new pr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ce.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ce.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):pt.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return be(n,{code:ce.invalid_type,expected:Me.bigint,received:n.parsedType}),Ve}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,i,r){return new cp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Re.toString(r)}]})}_addCheck(e){return new cp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}cp.create=t=>new cp({checks:[],typeName:He.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...tt(t)});class N2 extends ft{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Me.boolean){const i=this._getOrReturnCtx(e);return be(i,{code:ce.invalid_type,expected:Me.boolean,received:i.parsedType}),Ve}return Hr(e.data)}}N2.create=t=>new N2({typeName:He.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...tt(t)});class Av extends ft{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Me.date){const s=this._getOrReturnCtx(e);return be(s,{code:ce.invalid_type,expected:Me.date,received:s.parsedType}),Ve}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return be(s,{code:ce.invalid_date}),Ve}const i=new pr;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ce.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ce.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):pt.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Av({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Re.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Re.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Av.create=t=>new Av({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:He.ZodDate,...tt(t)});class w4 extends ft{_parse(e){if(this._getType(e)!==Me.symbol){const i=this._getOrReturnCtx(e);return be(i,{code:ce.invalid_type,expected:Me.symbol,received:i.parsedType}),Ve}return Hr(e.data)}}w4.create=t=>new w4({typeName:He.ZodSymbol,...tt(t)});class x4 extends ft{_parse(e){if(this._getType(e)!==Me.undefined){const i=this._getOrReturnCtx(e);return be(i,{code:ce.invalid_type,expected:Me.undefined,received:i.parsedType}),Ve}return Hr(e.data)}}x4.create=t=>new x4({typeName:He.ZodUndefined,...tt(t)});class S4 extends ft{_parse(e){if(this._getType(e)!==Me.null){const i=this._getOrReturnCtx(e);return be(i,{code:ce.invalid_type,expected:Me.null,received:i.parsedType}),Ve}return Hr(e.data)}}S4.create=t=>new S4({typeName:He.ZodNull,...tt(t)});class k4 extends ft{constructor(){super(...arguments),this._any=!0}_parse(e){return Hr(e.data)}}k4.create=t=>new k4({typeName:He.ZodAny,...tt(t)});class _4 extends ft{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Hr(e.data)}}_4.create=t=>new _4({typeName:He.ZodUnknown,...tt(t)});class dl extends ft{_parse(e){const n=this._getOrReturnCtx(e);return be(n,{code:ce.invalid_type,expected:Me.never,received:n.parsedType}),Ve}}dl.create=t=>new dl({typeName:He.ZodNever,...tt(t)});class C4 extends ft{_parse(e){if(this._getType(e)!==Me.undefined){const i=this._getOrReturnCtx(e);return be(i,{code:ce.invalid_type,expected:Me.void,received:i.parsedType}),Ve}return Hr(e.data)}}C4.create=t=>new C4({typeName:He.ZodVoid,...tt(t)});class Js extends ft{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==Me.array)return be(n,{code:ce.invalid_type,expected:Me.array,received:n.parsedType}),Ve;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(be(n,{code:o?ce.too_big:ce.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(be(n,{code:ce.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(be(n,{code:ce.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new ul(n,o,n.path,a)))).then(o=>pr.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new ul(n,o,n.path,a)));return pr.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new Js({...this._def,minLength:{value:e,message:Re.toString(n)}})}max(e,n){return new Js({...this._def,maxLength:{value:e,message:Re.toString(n)}})}length(e,n){return new Js({...this._def,exactLength:{value:e,message:Re.toString(n)}})}nonempty(e){return this.min(1,e)}}Js.create=(t,e)=>new Js({type:t,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...tt(e)});function lu(t){if(t instanceof fn){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=qa.create(lu(i))}return new fn({...t._def,shape:()=>e})}else return t instanceof Js?new Js({...t._def,type:lu(t.element)}):t instanceof qa?qa.create(lu(t.unwrap())):t instanceof Nd?Nd.create(lu(t.unwrap())):t instanceof Rc?Rc.create(t.items.map(e=>lu(e))):t}class fn extends ft{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=pt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Me.object){const c=this._getOrReturnCtx(e);return be(c,{code:ce.invalid_type,expected:Me.object,received:c.parsedType}),Ve}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof dl&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new ul(r,d,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof dl){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(be(r,{code:ce.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new ul(r,d,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,f=await u.value;c.push({key:d,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>pr.mergeObjectSync(i,c)):pr.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Re.errToObj,new fn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var s,o;const r=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:Re.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new fn({...this._def,unknownKeys:"strip"})}passthrough(){return new fn({...this._def,unknownKeys:"passthrough"})}extend(e){return new fn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new fn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:He.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new fn({...this._def,catchall:e})}pick(e){const n={};for(const i of pt.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new fn({...this._def,shape:()=>n})}omit(e){const n={};for(const i of pt.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new fn({...this._def,shape:()=>n})}deepPartial(){return lu(this)}partial(e){const n={};for(const i of pt.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new fn({...this._def,shape:()=>n})}required(e){const n={};for(const i of pt.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof qa;)s=s._def.innerType;n[i]=s}return new fn({...this._def,shape:()=>n})}keyof(){return y6(pt.objectKeys(this.shape))}}fn.create=(t,e)=>new fn({shape:()=>t,unknownKeys:"strip",catchall:dl.create(),typeName:He.ZodObject,...tt(e)});fn.strictCreate=(t,e)=>new fn({shape:()=>t,unknownKeys:"strict",catchall:dl.create(),typeName:He.ZodObject,...tt(e)});fn.lazycreate=(t,e)=>new fn({shape:t,unknownKeys:"strip",catchall:dl.create(),typeName:He.ZodObject,...tt(e)});class Nv extends ft{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Vo(a.ctx.common.issues));return be(n,{code:ce.invalid_union,unionErrors:o}),Ve}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Vo(l));return be(n,{code:ce.invalid_union,unionErrors:a}),Ve}}get options(){return this._def.options}}Nv.create=(t,e)=>new Nv({options:t,typeName:He.ZodUnion,...tt(e)});function P2(t,e){const n=da(t),i=da(e);if(t===e)return{valid:!0,data:t};if(n===Me.object&&i===Me.object){const r=pt.objectKeys(e),s=pt.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=P2(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Me.array&&i===Me.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=P2(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===Me.date&&i===Me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Pv extends ft{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(v4(s)||v4(o))return Ve;const a=P2(s.value,o.value);return a.valid?((y4(s)||y4(o))&&n.dirty(),{status:n.value,value:a.data}):(be(i,{code:ce.invalid_intersection_types}),Ve)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Pv.create=(t,e,n)=>new Pv({left:t,right:e,typeName:He.ZodIntersection,...tt(n)});class Rc extends ft{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.array)return be(i,{code:ce.invalid_type,expected:Me.array,received:i.parsedType}),Ve;if(i.data.length<this._def.items.length)return be(i,{code:ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ve;!this._def.rest&&i.data.length>this._def.items.length&&(be(i,{code:ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new ul(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>pr.mergeArray(n,o)):pr.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Rc({...this._def,rest:e})}}Rc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Rc({items:t,typeName:He.ZodTuple,rest:null,...tt(e)})};class E4 extends ft{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.map)return be(i,{code:ce.invalid_type,expected:Me.map,received:i.parsedType}),Ve;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:r._parse(new ul(i,a,i.path,[c,"key"])),value:s._parse(new ul(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Ve;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Ve;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}E4.create=(t,e,n)=>new E4({valueType:e,keyType:t,typeName:He.ZodMap,...tt(n)});class up extends ft{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.set)return be(i,{code:ce.invalid_type,expected:Me.set,received:i.parsedType}),Ve;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(be(i,{code:ce.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(be(i,{code:ce.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Ve;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...i.data.values()].map((l,c)=>s._parse(new ul(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new up({...this._def,minSize:{value:e,message:Re.toString(n)}})}max(e,n){return new up({...this._def,maxSize:{value:e,message:Re.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}up.create=(t,e)=>new up({valueType:t,minSize:null,maxSize:null,typeName:He.ZodSet,...tt(e)});class A4 extends ft{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}A4.create=(t,e)=>new A4({getter:t,typeName:He.ZodLazy,...tt(e)});class N4 extends ft{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return be(n,{received:n.data,code:ce.invalid_literal,expected:this._def.value}),Ve}return{status:"valid",value:e.data}}get value(){return this._def.value}}N4.create=(t,e)=>new N4({value:t,typeName:He.ZodLiteral,...tt(e)});function y6(t,e){return new Ed({values:t,typeName:He.ZodEnum,...tt(e)})}class Ed extends ft{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return be(n,{expected:pt.joinValues(i),received:n.parsedType,code:ce.invalid_type}),Ve}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return be(n,{received:n.data,code:ce.invalid_enum_value,options:i}),Ve}return Hr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Ed.create(e,{...this._def,...n})}exclude(e,n=this._def){return Ed.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Ed.create=y6;class P4 extends ft{_parse(e){const n=pt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Me.string&&i.parsedType!==Me.number){const r=pt.objectValues(n);return be(i,{expected:pt.joinValues(r),received:i.parsedType,code:ce.invalid_type}),Ve}if(this._cache||(this._cache=new Set(pt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=pt.objectValues(n);return be(i,{received:i.data,code:ce.invalid_enum_value,options:r}),Ve}return Hr(e.data)}get enum(){return this._def.values}}P4.create=(t,e)=>new P4({values:t,typeName:He.ZodNativeEnum,...tt(e)});class Mv extends ft{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.promise&&n.common.async===!1)return be(n,{code:ce.invalid_type,expected:Me.promise,received:n.parsedType}),Ve;const i=n.parsedType===Me.promise?n.data:Promise.resolve(n.data);return Hr(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Mv.create=(t,e)=>new Mv({type:t,typeName:He.ZodPromise,...tt(e)});class Ad extends ft{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{be(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ve;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?Ve:l.status==="dirty"||n.value==="dirty"?Wf(l.value):l});{if(n.value==="aborted")return Ve;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?Ve:a.status==="dirty"||n.value==="dirty"?Wf(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Ve:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Ve:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!_d(o))return Ve;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>_d(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):Ve);pt.assertNever(r)}}Ad.create=(t,e,n)=>new Ad({schema:t,typeName:He.ZodEffects,effect:e,...tt(n)});Ad.createWithPreprocess=(t,e,n)=>new Ad({schema:e,effect:{type:"preprocess",transform:t},typeName:He.ZodEffects,...tt(n)});class qa extends ft{_parse(e){return this._getType(e)===Me.undefined?Hr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qa.create=(t,e)=>new qa({innerType:t,typeName:He.ZodOptional,...tt(e)});class Nd extends ft{_parse(e){return this._getType(e)===Me.null?Hr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Nd.create=(t,e)=>new Nd({innerType:t,typeName:He.ZodNullable,...tt(e)});class M2 extends ft{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===Me.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}M2.create=(t,e)=>new M2({innerType:t,typeName:He.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...tt(e)});class T2 extends ft{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Ev(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Vo(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Vo(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}T2.create=(t,e)=>new T2({innerType:t,typeName:He.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...tt(e)});class M4 extends ft{_parse(e){if(this._getType(e)!==Me.nan){const i=this._getOrReturnCtx(e);return be(i,{code:ce.invalid_type,expected:Me.nan,received:i.parsedType}),Ve}return{status:"valid",value:e.data}}}M4.create=t=>new M4({typeName:He.ZodNaN,...tt(t)});class jee extends ft{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class wC extends ft{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Ve:s.status==="dirty"?(n.dirty(),Wf(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Ve:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new wC({in:e,out:n,typeName:He.ZodPipeline})}}class R2 extends ft{_parse(e){const n=this._def.innerType._parse(e),i=r=>(_d(r)&&(r.value=Object.freeze(r.value)),r);return Ev(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}R2.create=(t,e)=>new R2({innerType:t,typeName:He.ZodReadonly,...tt(e)});var He;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(He||(He={}));const jl=Cd.create,Jc=N2.create;dl.create;Js.create;const T4=fn.create;Nv.create;Pv.create;Rc.create;const ff=Ed.create;Mv.create;qa.create;Nd.create;const $ee=["randomize","clean","unchanged"],Fee=["switches-and-leds","printer","null"],Bee=["printer","null"],O2=T4({showInstructionCycle:Jc().catch(!1),showStatsCPU:Jc().catch(!1),language:ff(EL).catch(zee),editorFontSize:jl().int().min(8).max(64).catch(14),dataOnLoad:ff($ee).catch("clean"),devices:T4({keyboardAndScreen:Jc(),pic:Jc(),pio:ff(["switches-and-leds","printer"]).nullable(),handshake:ff(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:Jc().catch(!0),executionUnit:jl().min(1).max(500).catch(150),clockSpeed:jl().min(100).max(3e3).catch(1e3),printerSpeed:jl().min(500).max(2e4).catch(5e3),flagsVisibility:ff(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:jl().min(0).catch(1),filterContrast:jl().min(0).catch(1),filterInvert:Jc().catch(!1),filterSaturation:jl().min(0).catch(1)}),cu=O2.parse({});function zee(){const t=navigator.language.toLowerCase();for(const e of EL)if(t.startsWith(e))return e;return"en"}const Wr=m6("vonsim-settings",cu,{getItem(t,e){try{const n=localStorage.getItem(t);return O2.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=O2.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),Tn=()=>z.get(Wr),Jy=()=>jp(Wr);de(t=>t(Wr).showInstructionCycle);de(t=>t(Wr).showStatsCPU);const Uee=de(t=>t(Wr).language),xC=()=>Ze(Uee);de(t=>t(Wr).flagsVisibility);const Vee=de(t=>t(Wr).editorFontSize),Hee=()=>Ze(Vee);de(t=>t(Wr).dataOnLoad);const Wee=de(t=>t(Wr).devices),b6=()=>Ze(Wee);de(t=>{const e=t(Wr);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const Gee=de(t=>{const e=t(Wr);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),Kee=()=>Ze(Gee);function R4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function O4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R4(Object(n),!0).forEach(function(i){qee(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function qee(t,e,n){return e=Yee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yee(t){var e=Xee(t,"string");return typeof e=="symbol"?e:String(e)}function Xee(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Tv=w6({});function w6(t){return e.withOptions=n=>w6(O4(O4({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let u=0;u<r.length;u++){let d=r[u];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,u<i.length&&(a+=i[u])}const l=a.split(`
`);let c=null;for(const u of l){const d=u.match(/^(\s+)\S+/);if(d){const f=d[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){const u=c;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(u):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const Jee=Se.from(Se.MAX_ADDRESS).toString(),Zee={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${hr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:Tv`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${Se.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${Jee}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>Tv`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"cf3cf3c"}](https://github.com/vonsim/vonsim/commit/${"cf3cf3c"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},Qee=Se.from(Se.MAX_ADDRESS).toString(),ete={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${hr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"¡Hay una nueva versión disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la “FileSystem API”","no-file":"No hay ningún archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, ¿desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:Tv`
      ; ¡Bienvenido a VonSim 8!
      ; Este es un ejemplo de código que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instrucción",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadísticas CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Captación instrucción...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${Se.format(t)}`,"fix-address":"Fijar dirección","unfix-address":"Desfijar dirección","address-must-be-integer":"El valor de inicio debe ser un número entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${Qee}.`,"address-increment":"Incrementar dirección (Page Up)","address-decrement":"Decrementar dirección (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",instructionCycle:{label:"Ciclo de Instrucción"},statsCPU:{label:"Estadísticas CPU"},flags:{label:"Banderas",description:"Selecciona qué banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamaño de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"También agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitación de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"},filters:{label:"Filtros",description:"Filtros aplicados a la página. Útil cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturación"},reset:"Restablecer configuración"},footer:{documentation:"Documentación",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>Tv`
        <!-- Por favor, describa el problema que está teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Información extra (POR FAVOR, NO BORRAR)</summary>

          **Versión**: [${"cf3cf3c"}](https://github.com/ruiz-jose/VonSim8/commit/${"cf3cf3c"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuración

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},Zy=X_({en:Zee,es:ete});function Mt(){const t=xC();return x.useCallback((e,...n)=>Zy(t,e,...n),[t])}const x6=va.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||va,tte=1,I4=5e3,Es=new Map,mh=[];function nte(){let t=0;for(const e of Es.keys())e>t&&(t=e);return t+1}function ite(){let t=1/0;for(const e of Es.keys())e<t&&(t=e);return t}function Ta(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??I4,s=Number.isFinite(r)?setTimeout(()=>Ta({type:"DISMISS_TOAST",toastId:n}),r):null;Es.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Ta({type:"DISMISS_TOAST",toastId:n})}}}),Es.size>tte&&Ta({type:"DISMISS_TOAST",toastId:ite()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=Es.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??I4,o=Number.isFinite(s)?setTimeout(()=>Ta({type:"DISMISS_TOAST",toastId:n}),s):null;Es.set(n,{...r,...i,timeout:o})}else Es.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=Es.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),Es.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&mh.length>0){const n=Array.from(Es.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of mh)i(n)}}function Pi(t){const e=nte(),n=r=>Ta({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>Ta({type:"DISMISS_TOAST",toastId:e});return Ta({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function rte(){const[t,e]=x.useState([]);return x.useEffect(()=>(mh.push(e),()=>{const n=mh.indexOf(e);n>-1&&mh.splice(n,1)}),[]),{toastList:t,toast:Pi,dismiss:n=>Ta({type:"DISMISS_TOAST",toastId:n})}}var SC=qp(),Xe=t=>Kp(t,SC),kC=qp();Xe.write=t=>Kp(t,kC);var Qy=qp();Xe.onStart=t=>Kp(t,Qy);var _C=qp();Xe.onFrame=t=>Kp(t,_C);var CC=qp();Xe.onFinish=t=>Kp(t,CC);var Gu=[];Xe.setTimeout=(t,e)=>{const n=Xe.now()+e,i=()=>{const s=Gu.findIndex(o=>o.cancel==i);~s&&Gu.splice(s,1),Oa-=~s?1:0},r={time:n,handler:t,cancel:i};return Gu.splice(S6(n),0,r),Oa+=1,k6(),r};var S6=t=>~(~Gu.findIndex(e=>e.time>t)||~Gu.length);Xe.cancel=t=>{Qy.delete(t),_C.delete(t),CC.delete(t),SC.delete(t),kC.delete(t)};Xe.sync=t=>{I2=!0,Xe.batchedUpdates(t),I2=!1};Xe.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Xe.onStart(n)}return i.handler=t,i.cancel=()=>{Qy.delete(n),e=null},i};var EC=typeof window<"u"?window.requestAnimationFrame:()=>{};Xe.use=t=>EC=t;Xe.now=typeof performance<"u"?()=>performance.now():Date.now;Xe.batchedUpdates=t=>t();Xe.catch=console.error;Xe.frameLoop="always";Xe.advance=()=>{Xe.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):C6()};var Ra=-1,Oa=0,I2=!1;function Kp(t,e){I2?(e.delete(t),t(0)):(e.add(t),k6())}function k6(){Ra<0&&(Ra=0,Xe.frameLoop!=="demand"&&EC(_6))}function ste(){Ra=-1}function _6(){~Ra&&(EC(_6),Xe.batchedUpdates(C6))}function C6(){const t=Ra;Ra=Xe.now();const e=S6(Ra);if(e&&(E6(Gu.splice(0,e),n=>n.handler()),Oa-=e),!Oa){ste();return}Qy.flush(),SC.flush(t?Math.min(64,Ra-t):16.667),_C.flush(),kC.flush(),CC.flush()}function qp(){let t=new Set,e=t;return{add(n){Oa+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Oa-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Oa-=e.size,E6(e,i=>i(n)&&t.add(i)),Oa+=t.size,e=t)}}}function E6(t,e){t.forEach(n=>{try{e(n)}catch(i){Xe.catch(i)}})}var ote=Object.defineProperty,ate=(t,e)=>{for(var n in e)ote(t,n,{get:e[n],enumerable:!0})},hs={};ate(hs,{assign:()=>ute,colors:()=>Ya,createStringInterpolator:()=>NC,skipAnimation:()=>P6,to:()=>N6,willAdvance:()=>PC});function lte(){}var cte=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),we={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function fo(t,e){if(we.arr(t)){if(!we.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var zn=(t,e)=>t.forEach(e);function fl(t,e,n){if(we.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Ia=t=>we.und(t)?[]:we.arr(t)?t:[t];function A6(t,e){if(t.size){const n=Array.from(t);t.clear(),zn(n,e)}}var ig=(t,...e)=>A6(t,n=>n(...e)),AC=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),NC,N6,Ya=null,P6=!1,PC=lte,ute=t=>{t.to&&(N6=t.to),t.now&&(Xe.now=t.now),t.colors!==void 0&&(Ya=t.colors),t.skipAnimation!=null&&(P6=t.skipAnimation),t.createStringInterpolator&&(NC=t.createStringInterpolator),t.requestAnimationFrame&&Xe.use(t.requestAnimationFrame),t.batchedUpdates&&(Xe.batchedUpdates=t.batchedUpdates),t.willAdvance&&(PC=t.willAdvance),t.frameLoop&&(Xe.frameLoop=t.frameLoop)},gh=new Set,Nr=[],c1=[],Rv=0,eb={get idle(){return!gh.size&&!Nr.length},start(t){Rv>t.priority?(gh.add(t),Xe.onStart(dte)):(M6(t),Xe(D2))},advance:D2,sort(t){if(Rv)Xe.onFrame(()=>eb.sort(t));else{const e=Nr.indexOf(t);~e&&(Nr.splice(e,1),T6(t))}},clear(){Nr=[],gh.clear()}};function dte(){gh.forEach(M6),gh.clear(),Xe(D2)}function M6(t){Nr.includes(t)||T6(t)}function T6(t){Nr.splice(fte(Nr,e=>e.priority>t.priority),0,t)}function D2(t){const e=c1;for(let n=0;n<Nr.length;n++){const i=Nr[n];Rv=i.priority,i.idle||(PC(i),i.advance(t),i.idle||e.push(i))}return Rv=0,c1=Nr,c1.length=0,Nr=e,Nr.length>0}function fte(t,e){const n=t.findIndex(e);return n<0?t.length:n}var hte=(t,e,n)=>Math.min(Math.max(n,t),e),pte={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ss="[-+]?\\d*\\.?\\d+",Ov=ss+"%";function tb(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var mte=new RegExp("rgb"+tb(ss,ss,ss)),gte=new RegExp("rgba"+tb(ss,ss,ss,ss)),vte=new RegExp("hsl"+tb(ss,Ov,Ov)),yte=new RegExp("hsla"+tb(ss,Ov,Ov,ss)),bte=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,wte=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,xte=/^#([0-9a-fA-F]{6})$/,Ste=/^#([0-9a-fA-F]{8})$/;function kte(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=xte.exec(t))?parseInt(e[1]+"ff",16)>>>0:Ya&&Ya[t]!==void 0?Ya[t]:(e=mte.exec(t))?(Zc(e[1])<<24|Zc(e[2])<<16|Zc(e[3])<<8|255)>>>0:(e=gte.exec(t))?(Zc(e[1])<<24|Zc(e[2])<<16|Zc(e[3])<<8|j4(e[4]))>>>0:(e=bte.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Ste.exec(t))?parseInt(e[1],16)>>>0:(e=wte.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=vte.exec(t))?(D4(L4(e[1]),rg(e[2]),rg(e[3]))|255)>>>0:(e=yte.exec(t))?(D4(L4(e[1]),rg(e[2]),rg(e[3]))|j4(e[4]))>>>0:null}function u1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function D4(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=u1(r,i,t+1/3),o=u1(r,i,t),a=u1(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Zc(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function L4(t){return(parseFloat(t)%360+360)%360/360}function j4(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function rg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function $4(t){let e=kte(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var dp=(t,e,n)=>{if(we.fun(t))return t;if(we.arr(t))return dp({range:t,output:e,extrapolate:n});if(we.str(t.output[0]))return NC(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Cte(c,s);return _te(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function _te(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Cte(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Ete=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return hte(0,1,r/t)},Iv=1.70158,sg=Iv*1.525,F4=Iv+1,B4=2*Math.PI/3,z4=2*Math.PI/4.5,og=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,R6={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>F4*t*t*t-Iv*t*t,easeOutBack:t=>1+F4*Math.pow(t-1,3)+Iv*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((sg+1)*2*t-sg)/2:(Math.pow(2*t-2,2)*((sg+1)*(t*2-2)+sg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*B4),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*B4)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*z4))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*z4)/2+1,easeInBounce:t=>1-og(1-t),easeOutBounce:og,easeInOutBounce:t=>t<.5?(1-og(1-2*t))/2:(1+og(2*t-1))/2,steps:Ete},fp=Symbol.for("FluidValue.get"),Pd=Symbol.for("FluidValue.observers"),Er=t=>!!(t&&t[fp]),Mi=t=>t&&t[fp]?t[fp]():t,U4=t=>t[Pd]||null;function Ate(t,e){t.eventObserved?t.eventObserved(e):t(e)}function hp(t,e){const n=t[Pd];n&&n.forEach(i=>{Ate(i,e)})}var O6=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Nte(this,t)}},Nte=(t,e)=>I6(t,fp,e);function nb(t,e){if(t[fp]){let n=t[Pd];n||I6(t,Pd,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function pp(t,e){const n=t[Pd];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Pd]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var I6=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),g0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Pte=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,V4=new RegExp(`(${g0.source})(%|[a-z]+)`,"i"),Mte=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,ib=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,D6=t=>{const[e,n]=Tte(t);if(!e||AC())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&ib.test(n))return D6(n);if(n)return n}return t},Tte=t=>{const e=ib.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},d1,Rte=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,L6=t=>{d1||(d1=Ya?new RegExp(`(${Object.keys(Ya).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Mi(s).replace(ib,D6).replace(Pte,$4).replace(d1,$4)),n=e.map(s=>s.match(g0).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>dp({...t,output:s}));return s=>{var l;const o=!V4.test(e[0])&&((l=e.find(c=>V4.test(c)))==null?void 0:l.replace(g0,""));let a=0;return e[0].replace(g0,()=>`${r[a++](s)}${o||""}`).replace(Mte,Rte)}},j6="react-spring: ",$6=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${j6}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Ote=$6(console.warn);function Ite(){Ote(`${j6}The "interpolate" function is deprecated in v9 (use "to" instead)`)}$6(console.warn);function rb(t){return we.str(t)&&(t[0]=="#"||/\d/.test(t)||!AC()&&ib.test(t)||t in(Ya||{}))}var F6=AC()?x.useEffect:x.useLayoutEffect,Dte=()=>{const t=x.useRef(!1);return F6(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Lte(){const t=x.useState()[1],e=Dte();return()=>{e.current&&t(Math.random())}}function jte(t,e){const[n]=x.useState(()=>({inputs:e,result:t()})),i=x.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&$te(e,s.inputs)||(s={inputs:e,result:t()}):s=n,x.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function $te(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var Fte=t=>x.useEffect(t,Bte),Bte=[],mp=Symbol.for("Animated:node"),zte=t=>!!t&&t[mp]===t,As=t=>t&&t[mp],MC=(t,e)=>cte(t,mp,e),sb=t=>t&&t[mp]&&t[mp].getPayload(),B6=class{constructor(){MC(this,this)}getPayload(){return this.payload||[]}},Yp=class extends B6{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,we.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Yp(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return we.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,we.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},gp=class extends Yp{constructor(t){super(0),this._string=null,this._toString=dp({output:[t,t]})}static create(t){return new gp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(we.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=dp({output:[this.getValue(),t]})),this._value=0,super.reset()}},Dv={dependencies:null},ob=class extends B6{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return fl(this.source,(n,i)=>{zte(n)?e[i]=n.getValue(t):Er(n)?e[i]=Mi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&zn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return fl(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Dv.dependencies&&Er(t)&&Dv.dependencies.add(t);const e=sb(t);e&&zn(e,n=>this.add(n))}},z6=class extends ob{constructor(t){super(t)}static create(t){return new z6(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(Ute)),!0)}};function Ute(t){return(rb(t)?gp:Yp).create(t)}function L2(t){const e=As(t);return e?e.constructor:we.arr(t)?z6:rb(t)?gp:Yp}var H4=(t,e)=>{const n=!we.fun(t)||t.prototype&&t.prototype.isReactComponent;return x.forwardRef((i,r)=>{const s=x.useRef(null),o=n&&x.useCallback(m=>{s.current=Wte(r,m)},[r]),[a,l]=Hte(i,e),c=Lte(),u=()=>{const m=s.current;if(n&&!m)return;(m?e.applyAnimatedValues(m,a.getValue(!0)):!1)===!1&&c()},d=new Vte(u,l),f=x.useRef();F6(()=>(f.current=d,zn(l,m=>nb(m,d)),()=>{f.current&&(zn(f.current.deps,m=>pp(m,f.current)),Xe.cancel(f.current.update))})),x.useEffect(u,[]),Fte(()=>()=>{const m=f.current;zn(m.deps,g=>pp(g,m))});const p=e.getComponentProps(a.getValue());return x.createElement(t,{...p,ref:o})})},Vte=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Xe.write(this.update)}};function Hte(t,e){const n=new Set;return Dv.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new ob(t),Dv.dependencies=null,[t,n]}function Wte(t,e){return t&&(we.fun(t)?t(e):t.current=e),e}var W4=Symbol.for("AnimatedComponent"),Gte=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new ob(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=G4(o)||"Anonymous";return we.str(o)?o=s[o]||(s[o]=H4(o,r)):o=o[W4]||(o[W4]=H4(o,r)),o.displayName=`Animated(${a})`,o};return fl(t,(o,a)=>{we.arr(t)&&(a=G4(o)),s[a]=s(o)}),{animated:s}},G4=t=>we.str(t)?t:t&&we.str(t.displayName)?t.displayName:we.fun(t)&&t.name||null;function Zl(t,...e){return we.fun(t)?t(...e):t}var vh=(t,e)=>t===!0||!!(e&&t&&(we.fun(t)?t(e):Ia(t).includes(e))),U6=(t,e)=>we.obj(t)?e&&t[e]:t,Kte=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,qte=t=>t,V6=(t,e=qte)=>{let n=Yte;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);we.und(s)||(i[r]=s)}return i},Yte=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Xte={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Jte(t){const e={};let n=0;if(fl(t,(i,r)=>{Xte[r]||(e[r]=i,n++)}),n)return e}function H6(t){const e=Jte(t);if(e){const n={to:e};return fl(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function vp(t){return t=Mi(t),we.arr(t)?t.map(vp):rb(t)?hs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function j2(t){return we.fun(t)||we.arr(t)&&we.obj(t[0])}var Zte={default:{tension:170,friction:26}},$2={...Zte.default,mass:1,damping:1,easing:R6.linear,clamp:!1},Qte=class{constructor(){this.velocity=0,Object.assign(this,$2)}};function ene(t,e,n){n&&(n={...n},K4(n,e),e={...n,...e}),K4(t,e),Object.assign(t,e);for(const o in $2)t[o]==null&&(t[o]=$2[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return we.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function K4(t,e){if(!we.und(e.decay))t.duration=void 0;else{const n=!we.und(e.tension)||!we.und(e.friction);(n||!we.und(e.frequency)||!we.und(e.damping)||!we.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var q4=[],tne=class{constructor(){this.changed=!1,this.values=q4,this.toValues=null,this.fromValues=q4,this.config=new Qte,this.immediate=!1}};function nne(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=vh(n.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{we.und(n.pause)||(r.paused=vh(n.pause,e));let m=i==null?void 0:i.pause;m!==!0&&(m=r.paused||vh(m,e)),l=Zl(n.delay||0,e),m?(r.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){r.resumeQueue.add(f),r.timeouts.delete(c),c.cancel(),l=c.time-Xe.now()}function f(){l>0&&!hs.skipAnimation?(r.delayed=!0,c=Xe.setTimeout(p,l),r.pauseQueue.add(d),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(m){a(m)}}})}var ine=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?yh(t.get()):e.every(n=>n.noop)?W6(t.get()):ns(t.get(),e.every(n=>n.finished)),W6=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),ns=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),yh=t=>({value:t,cancelled:!0,finished:!1});function rne(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=V6(e,(v,y)=>y==="onRest"?void 0:v);let u,d;const f=new Promise((v,y)=>(u=v,d=y)),p=v=>{const y=r<=(n.cancelId||0)&&yh(i)||r!==n.asyncId&&ns(i,!1);if(y)throw v.result=y,d(v),v},m=(v,y)=>{const b=new Y4,w=new X4;return(async()=>{if(hs.skipAnimation)throw F2(n),w.result=ns(i,!1),d(w),w;p(b);const k=we.obj(v)?{...v}:{...y,to:v};k.parentId=r,fl(c,(E,_)=>{we.und(k[_])&&(k[_]=E)});const C=await i.start(k);return p(b),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),C})()};let g;if(hs.skipAnimation)return F2(n),ns(i,!1);try{let v;we.arr(t)?v=(async y=>{for(const b of y)await m(b)})(t):v=Promise.resolve(t(m,i.stop.bind(i))),await Promise.all([v.then(u),f]),g=ns(i.get(),!0,!1)}catch(v){if(v instanceof Y4)g=v.result;else if(v instanceof X4)g=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return we.fun(o)&&Xe.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function F2(t,e){A6(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var Y4=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},X4=class extends Error{constructor(){super("SkipAnimationSignal")}},B2=t=>t instanceof TC,sne=1,TC=class extends O6{constructor(){super(...arguments),this.id=sne++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=As(this);return t&&t.getValue()}to(...t){return hs.to(this,t)}interpolate(...t){return Ite(),hs.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){hp(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||eb.sort(this),hp(this,{type:"priority",parent:this,priority:t})}},Oc=Symbol.for("SpringPhase"),G6=1,z2=2,U2=4,f1=t=>(t[Oc]&G6)>0,oa=t=>(t[Oc]&z2)>0,hf=t=>(t[Oc]&U2)>0,J4=(t,e)=>e?t[Oc]|=z2|G6:t[Oc]&=~z2,Z4=(t,e)=>e?t[Oc]|=U2:t[Oc]&=~U2,xt=class extends TC{constructor(t,e){if(super(),this.animation=new tne,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!we.und(t)||!we.und(e)){const n=we.obj(t)?{...t}:{...e,from:t};we.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(oa(this)||this._state.asyncTo)||hf(this)}get goal(){return Mi(this.animation.to)}get velocity(){const t=As(this);return t instanceof Yp?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return f1(this)}get isAnimating(){return oa(this)}get isPaused(){return hf(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=sb(i.to);!o&&Er(i.to)&&(r=Ia(Mi(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==gp?1:o?o[u].lastPosition:r[u];let f=i.immediate,p=d;if(!f){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let m=c.elapsedTime+=t;const g=i.fromValues[u],v=c.v0!=null?c.v0:c.v0=we.arr(s.velocity)?s.velocity[u]:s.velocity;let y;const b=s.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(we.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,k=Math.exp(-(1-w)*m);p=g+v/(1-w)*(1-k),f=Math.abs(c.lastPosition-p)<=b,y=v*k}else{y=c.lastVelocity==null?v:c.lastVelocity;const w=s.restVelocity||b/10,k=s.clamp?0:s.bounce,C=!we.und(k),E=g==d?c.v0>0:g<d;let _,N=!1;const M=1,R=Math.ceil(t/M);for(let I=0;I<R&&(_=Math.abs(y)>w,!(!_&&(f=Math.abs(d-p)<=b,f)));++I){C&&(N=p==d||p>d==E,N&&(y=-y*k,p=d));const D=-s.tension*1e-6*(p-d),K=-s.friction*.001*y,B=(D+K)/s.mass;y=y+B*M,p=p+y*M}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,m=c.elapsedTime+=t)),w=(s.progress||0)+m/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),p=g+s.easing(w)*(d-g),y=(p-c.lastPosition)/t,f=w==1}c.lastVelocity=y,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(p,s.round)&&(n=!0)});const a=As(this),l=a.getValue();if(e){const c=Mi(i.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Xe.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(oa(this)){const{to:t,config:e}=this.animation;Xe.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return we.und(t)?(n=this.queue||[],this.queue=[]):n=[we.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>ine(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),F2(this._state,t&&this._lastCallId),Xe.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=we.obj(n)?n[e]:n,(n==null||j2(n))&&(n=void 0),i=we.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return f1(this)||(t.reverse&&([n,i]=[i,n]),i=Mi(i),we.und(i)?As(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,V6(t,(o,a)=>/^on/.test(a)?U6(o,n):o)),eM(this,t,"onProps"),mf(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return nne(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{hf(this)||(Z4(this,!0),ig(s.pauseQueue),mf(this,"onPause",ns(this,pf(this,this.animation.to)),this))},resume:()=>{hf(this)&&(Z4(this,!1),oa(this)&&this._resume(),ig(s.resumeQueue),mf(this,"onResume",ns(this,pf(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=one(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(yh(this));const i=!we.und(t.to),r=!we.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(yh(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;r&&!i&&(!e.default||we.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!fo(d,c);f&&(a.from=d),d=Mi(d);const p=!fo(u,l);p&&this._focus(u);const m=j2(e.to),{config:g}=a,{decay:v,velocity:y}=g;(i||r)&&(g.velocity=0),e.config&&!m&&ene(g,Zl(e.config,s),e.config!==o.config?Zl(o.config,s):void 0);let b=As(this);if(!b||we.und(u))return n(ns(this,!0));const w=we.und(e.reset)?r&&!e.default:!we.und(d)&&vh(e.reset,s),k=w?d:this.get(),C=vp(u),E=we.num(C)||we.arr(C)||rb(C),_=!m&&(!E||vh(o.immediate||e.immediate,s));if(p){const I=L2(u);if(I!==b.constructor)if(_)b=this._set(C);else throw Error(`Cannot animate between ${b.constructor.name} and ${I.name}, as the "to" prop suggests`)}const N=b.constructor;let M=Er(u),R=!1;if(!M){const I=w||!f1(this)&&f;(p||I)&&(R=fo(vp(k),C),M=!R),(!fo(a.immediate,_)&&!_||!fo(g.decay,v)||!fo(g.velocity,y))&&(M=!0)}if(R&&oa(this)&&(a.changed&&!w?M=!0:M||this._stop(l)),!m&&((M||Er(l))&&(a.values=b.getPayload(),a.toValues=Er(u)?null:N==gp?[1]:Ia(C)),a.immediate!=_&&(a.immediate=_,!_&&!w&&this._set(l)),M)){const{onRest:I}=a;zn(lne,K=>eM(this,e,K));const D=ns(this,pf(this,l));ig(this._pendingCalls,D),this._pendingCalls.add(n),a.changed&&Xe.batchedUpdates(()=>{var K;a.changed=!w,I==null||I(D,this),w?Zl(o.onRest,D):(K=a.onStart)==null||K.call(a,D,this)})}w&&this._set(k),m?n(rne(e.to,e,this._state,this)):M?this._start():oa(this)&&!p?this._pendingCalls.add(n):n(W6(k))}_focus(t){const e=this.animation;t!==e.to&&(U4(this)&&this._detach(),e.to=t,U4(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Er(e)&&(nb(e,this),B2(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Er(t)&&pp(t,this)}_set(t,e=!0){const n=Mi(t);if(!we.und(n)){const i=As(this);if(!i||!fo(n,i.getValue())){const r=L2(n);!i||i.constructor!=r?MC(this,r.create(n)):i.setValue(n),i&&Xe.batchedUpdates(()=>{this._onChange(n,e)})}}return As(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,mf(this,"onStart",ns(this,pf(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Zl(this.animation.onChange,t,this)),Zl(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;As(this).reset(Mi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),oa(this)||(J4(this,!0),hf(this)||this._resume())}_resume(){hs.skipAnimation?this.finish():eb.start(this)}_stop(t,e){if(oa(this)){J4(this,!1);const n=this.animation;zn(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),hp(this,{type:"idle",parent:this});const i=e?yh(this.get()):ns(this.get(),pf(this,t??n.to));ig(this._pendingCalls,i),n.changed&&(n.changed=!1,mf(this,"onRest",i,this))}}};function pf(t,e){const n=vp(e),i=vp(t.get());return fo(i,n)}function one(t,e=t.loop,n=t.to){const i=Zl(e);if(i){const r=i!==!0&&H6(i),s=(r||t).reverse,o=!r||r.reset;return ane({...t,loop:e,default:!1,pause:void 0,to:!s||j2(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function ane(t){const{to:e,from:n}=t=H6(t),i=new Set;return we.obj(e)&&Q4(e,i),we.obj(n)&&Q4(n,i),t.keys=i.size?Array.from(i):null,t}function Q4(t,e){fl(t,(n,i)=>n!=null&&e.add(i))}var lne=["onStart","onRest","onChange","onPause","onResume"];function eM(t,e,n){t.animation[n]=e[n]!==Kte(e,n)?U6(e[n],t.key):void 0}function mf(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var RC=({children:t,...e})=>{const n=x.useContext(Lv),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=jte(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=Lv;return x.createElement(s,{value:e},t)},Lv=cne(RC,{});RC.Provider=Lv.Provider;RC.Consumer=Lv.Consumer;function cne(t,e){return Object.assign(t,x.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var une=class extends TC{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=dp(...e);const n=this._get(),i=L2(n);MC(this,i.create(n))}advance(t){const e=this._get(),n=this.get();fo(e,n)||(As(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&tM(this._active)&&h1(this)}_get(){const t=we.arr(this.source)?this.source.map(Mi):Ia(Mi(this.source));return this.calc(...t)}_start(){this.idle&&!tM(this._active)&&(this.idle=!1,zn(sb(this),t=>{t.done=!1}),hs.skipAnimation?(Xe.batchedUpdates(()=>this.advance()),h1(this)):eb.start(this))}_attach(){let t=1;zn(Ia(this.source),e=>{Er(e)&&nb(e,this),B2(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){zn(Ia(this.source),t=>{Er(t)&&pp(t,this)}),this._active.clear(),h1(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Ia(this.source).reduce((e,n)=>Math.max(e,(B2(n)?n.priority:0)+1),0))}};function dne(t){return t.idle!==!1}function tM(t){return!t.size||Array.from(t).every(dne)}function h1(t){t.idle||(t.idle=!0,zn(sb(t),e=>{e.done=!0}),hp(t,{type:"idle",parent:t}))}hs.assign({createStringInterpolator:L6,to:(t,e)=>new une(t,e)});var K6=/^--/;function fne(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!K6.test(t)&&!(bh.hasOwnProperty(t)&&bh[t])?e+"px":(""+e).trim()}var nM={};function hne(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(f=>n||t.hasAttribute(f)?f:nM[f]||(nM[f]=f.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(t.textContent=s);for(const f in r)if(r.hasOwnProperty(f)){const p=fne(f,r[f]);K6.test(f)?t.style.setProperty(f,p):t.style[f]=p}d.forEach((f,p)=>{t.setAttribute(f,u[p])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var bh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pne=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),mne=["Webkit","Ms","Moz","O"];bh=Object.keys(bh).reduce((t,e)=>(mne.forEach(n=>t[pne(n,e)]=t[e]),t),bh);var gne=/^(matrix|translate|scale|rotate|skew)/,vne=/^(translate)/,yne=/^(rotate|skew)/,p1=(t,e)=>we.num(t)&&t!==0?t+e:t,v0=(t,e)=>we.arr(t)?t.every(n=>v0(n,e)):we.num(t)?t===e:parseFloat(t)===e,bne=class extends ob{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>p1(a,"px")).join(",")})`,v0(o,0)])),fl(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(gne.test(a)){if(delete i[a],we.und(o))return;const l=vne.test(a)?"px":yne.test(a)?"deg":"";r.push(Ia(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${p1(f,l)})`,v0(f,0)]:c=>[`${a}(${c.map(u=>p1(u,l)).join(",")})`,v0(c,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new wne(r,s)),super(i)}},wne=class extends O6{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return zn(this.inputs,(n,i)=>{const r=Mi(n[0]),[s,o]=this.transforms[i](we.arr(r)?r:n.map(Mi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&zn(this.inputs,e=>zn(e,n=>Er(n)&&nb(n,this)))}observerRemoved(t){t==0&&zn(this.inputs,e=>zn(e,n=>Er(n)&&pp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),hp(this,t)}},xne=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];hs.assign({batchedUpdates:xl.unstable_batchedUpdates,createStringInterpolator:L6,colors:pte});var Sne=Gte(xne,{applyAnimatedValues:hne,createAnimatedStyle:t=>new bne(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),an=Sne.animated;const Kt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},Qe=(t=Kt.stone[800])=>({backgroundColor:new xt(t),opacity:new xt(1)}),Cn=()=>({strokeDashoffset:new xt(1),opacity:new xt(1)}),ag=()=>({strokeDashoffset:new xt(1),opacity:new xt(1),path:new xt("")}),jv={bus:{address:ag(),data:ag(),rd:ag(),wr:ag(),iom:Cn(),mem:{stroke:new xt(Kt.red[500])},handshake:Cn(),pic:Cn(),pio:Cn(),timer:Cn(),intr:Cn(),inta:Cn(),int0:Cn(),int1:Cn(),int2:Cn(),"switches->pio":Cn(),"pio->leds":Cn(),printer:{data:Cn(),strobe:Cn(),busy:Cn()}},clock:{angle:new xt(0)},cpu:{internalBus:{address:{strokeDashoffset:new xt(1),opacity:new xt(1),path:new xt("")},data:{strokeDashoffset:new xt(1),opacity:new xt(1),path:new xt("")}},alu:{operands:Cn(),results:Cn(),cog:{rot:new xt(0)},operation:{backgroundColor:new xt(Kt.stone[800])}},decoder:{path:Cn(),progress:{progress:new xt(0),opacity:new xt(1)}},AX:Qe(),BX:Qe(),CX:Qe(),DX:Qe(),AL:Qe(),BL:Qe(),CL:Qe(),DL:Qe(),SP:Qe(),IP:Qe(),IR:Qe(),ri:{...Qe(),opacity:new xt(0)},id:{...Qe(),opacity:new xt(0)},left:Qe(),right:Qe(),result:Qe(),FLAGS:Qe(),MAR:Qe(),MBR:Qe()},handshake:{DATA:Qe(),STATE:Qe()},memory:{"operating-cell":{color:new xt(Kt.white)}},pic:{IMR:Qe(),IRR:Qe(),ISR:Qe(),INT0:Qe(),INT1:Qe(),INT2:Qe(),INT3:Qe(),INT4:Qe(),INT5:Qe(),INT6:Qe(),INT7:Qe()},pio:{PA:Qe(),PB:Qe(),CA:Qe(),CB:Qe()},printer:{printing:{progress:new xt(0),opacity:new xt(1)}},timer:{CONT:Qe(),COMP:Qe()}};function mt(t){try{return CL(jv,t)}catch{const n=t.split(".");let i=jv;for(const r of n)if(r in i)i=i[r];else return console.warn(`Path not found: ${t}`),{backgroundColor:new xt(Kt.stone[800]),opacity:new xt(1)};return i}}function q6(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof xt?e[n]=i.get():e[n]=q6(i)}return e}const kne=q6(jv);function Y6(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof xt?i.set(e[n]):Y6(t[n],e[n])}}const _ne=()=>Y6(jv,kne),yp=new Set;async function Ge(t,e){const n=z.get(ln);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=z.sub(ln,()=>{z.get(ln).type!=="paused"&&(o(),s())})}),await Ge(t,e);const i=Tn();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:i.animations?e.duration*i.executionUnit:1,easing:R6[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;try{const l=mt(s);if(a===void 0)return l.set(o);{yp.add(s);const c=await mt(s).start({from:o,to:a,config:r});return yp.delete(s),c}}catch(l){return console.warn(`Error animando la clave ${s}:`,l),null}}))}const Cne=()=>yp.forEach(t=>mt(t).pause()),Ene=()=>yp.forEach(t=>mt(t).resume());function X6(){yp.forEach(t=>{const e=mt(t);e.stop(!0),e.isPaused&&e.resume()}),setTimeout(()=>_ne(),10)}const Ane={AX:Kt.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:Kt.red[500],SP:"#DC2626",MAR:Kt.blue[500],MBR:Kt.blue[500],IR:Kt.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#F97316",ri:"#EA580C",left:"#22C55E",right:"#16A34A"};function J6(t){const e=t.replace("cpu.","").split(".")[0];return Ane[e]||Kt.stone[600]}async function nr(t,e){try{const n=e||J6(t);await Ge({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await Ge({key:`${t}.backgroundColor`,to:Kt.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function Ar(t){try{return await Ge({key:`${t}.backgroundColor`,to:Kt.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function y0(t){try{const e=Tn(),n=J6(t);await Ge({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const i=e.animations?1e3:1;await new Promise(r=>setTimeout(r,i)),await Ge({key:`${t}.backgroundColor`,to:Kt.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function bp(t){await nr("cpu.MBR"),z.set(Zh,t),await Ar("cpu.MBR")}function Nne(){setTimeout(()=>{try{mt("bus.rd.opacity").set(0)}catch{}try{mt("bus.wr.opacity").set(0)}catch{}},0)}function Pne(){try{mt("bus.rd.opacity").start({to:1})}catch{}}function Mne(){try{mt("bus.rd.opacity").start({to:0})}catch{}}function Tne(){try{mt("bus.wr.opacity").start({to:1})}catch{}}function Rne(){try{mt("bus.wr.opacity").start({to:0})}catch{}}async function Ui(t,e){return await Ge([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function ii(t){return await Ge({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function One(t){switch(t.type){case"bus:io.selected":{await Promise.all([Ge({key:"bus.mem.stroke",to:Kt.stone[700]},{duration:1,easing:"easeInSine"}),Ui(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Ic(t.error);return}case"bus:reset":{await Promise.all([Ge([{key:"bus.address.strokeDashoffset",to:1},{key:"bus.data.strokeDashoffset",to:1},{key:"bus.rd.strokeDashoffset",to:1},{key:"bus.wr.strokeDashoffset",to:1}],{duration:1,easing:"easeInSine"}),Ge({key:"bus.mem.stroke",to:Kt.red[500]},{duration:1,easing:"easeOutSine"}),ii("bus.iom"),ii("bus.handshake"),ii("bus.pio"),ii("bus.pic"),ii("bus.timer")]);return}default:return t}}async function Ine(t){switch(t.type){case"clock:tick":return;default:return t.type}}function Dne(t,e,n){let i="";switch(e&&(i="M 470 388 H 550 V 349 H 659"),n&&(i="M 629 250 H 550 V 349 H 659"),t){case"SP":return"M 451 309 H 550 V 349 H 659";case"IP":return"M 451 349 H 659";case"ri":return e||n?i:"";default:throw new Error(`Invalid register ${t}`)}}function Lne({showSP:t,showri:e}){const{path:n,...i}=mt("cpu.internalBus.address"),[r]=x.useState(!1),s=[t?"M 451 309 H 550 V 250":"","M 451 349 H 550 V 255",e?"M 470 388 H 550 V 300":"","M 451 349 H 659"];return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[s.map((o,a)=>h.jsx("path",{className:`fill-none stroke-bus ${r&&o==="M 444 388 H 575 V 349"?"stroke-mantis-400":"stroke-stone-700"}`,strokeLinejoin:"round",d:o},a)),h.jsx(an.path,{d:n,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}var OC={exports:{}},Ku=typeof Reflect=="object"?Reflect:null,iM=Ku&&typeof Ku.apply=="function"?Ku.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},b0;Ku&&typeof Ku.ownKeys=="function"?b0=Ku.ownKeys:Object.getOwnPropertySymbols?b0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:b0=function(e){return Object.getOwnPropertyNames(e)};function jne(t){console&&console.warn&&console.warn(t)}var Z6=Number.isNaN||function(e){return e!==e};function _t(){_t.init.call(this)}OC.exports=_t;OC.exports.once=zne;_t.EventEmitter=_t;_t.prototype._events=void 0;_t.prototype._eventsCount=0;_t.prototype._maxListeners=void 0;var rM=10;function ab(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(_t,"defaultMaxListeners",{enumerable:!0,get:function(){return rM},set:function(t){if(typeof t!="number"||t<0||Z6(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");rM=t}});_t.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_t.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Z6(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Q6(t){return t._maxListeners===void 0?_t.defaultMaxListeners:t._maxListeners}_t.prototype.getMaxListeners=function(){return Q6(this)};_t.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")iM(l,this,n);else for(var c=l.length,u=r8(l,c),i=0;i<c;++i)iM(u[i],this,n);return!0};function e8(t,e,n,i){var r,s,o;if(ab(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=Q6(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,jne(a)}return t}_t.prototype.addListener=function(e,n){return e8(this,e,n,!1)};_t.prototype.on=_t.prototype.addListener;_t.prototype.prependListener=function(e,n){return e8(this,e,n,!0)};function $ne(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function t8(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=$ne.bind(i);return r.listener=n,i.wrapFn=r,r}_t.prototype.once=function(e,n){return ab(n),this.on(e,t8(this,e,n)),this};_t.prototype.prependOnceListener=function(e,n){return ab(n),this.prependListener(e,t8(this,e,n)),this};_t.prototype.removeListener=function(e,n){var i,r,s,o,a;if(ab(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():Fne(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};_t.prototype.off=_t.prototype.removeListener;_t.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function n8(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?Bne(r):r8(r,r.length)}_t.prototype.listeners=function(e){return n8(this,e,!0)};_t.prototype.rawListeners=function(e){return n8(this,e,!1)};_t.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):i8.call(t,e)};_t.prototype.listenerCount=i8;function i8(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}_t.prototype.eventNames=function(){return this._eventsCount>0?b0(this._events):[]};function r8(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function Fne(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Bne(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function zne(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}s8(t,e,s,{once:!0}),e!=="error"&&Une(t,r,{once:!0})})}function Une(t,e,n){typeof t.on=="function"&&s8(t,"error",e,n)}function s8(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Vne=OC.exports;function no(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(no.prototype[Symbol.iterator]=function(){return this});no.of=function(){var t=arguments,e=t.length,n=0;return new no(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};no.empty=function(){var t=new no(function(){return{done:!0}});return t};no.fromSequence=function(t){var e=0,n=t.length;return new no(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};no.is=function(t){return t instanceof no?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var lb=no;const Vr=Fc(lb);var cb={};cb.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";cb.SYMBOL_SUPPORT=typeof Symbol<"u";var Hne=lb,o8=cb,Wne=o8.ARRAY_BUFFER_SUPPORT,Gne=o8.SYMBOL_SUPPORT;function Kne(t){return typeof t=="string"||Array.isArray(t)||Wne&&ArrayBuffer.isView(t)?Hne.fromSequence(t):typeof t!="object"||t===null?null:Gne&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var a8=function(e){var n=Kne(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},qne=a8,Yne=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=qne(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const l8=Fc(Yne);var Xne=lb,Jne=a8,Zne=function(){var e=arguments,n=null,i=-1;return new Xne(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=Jne(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Io=Fc(Zne);function Qne(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let wn=Qne;typeof Object.assign=="function"&&(wn=Object.assign);function jr(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function Un(t){return typeof t=="object"&&t!==null}function c8(t){let e;for(e in t)return!1;return!0}function yr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Kr(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function sM(t){return!(!Un(t)||t.attributes&&!Array.isArray(t.attributes))}function eie(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class IC extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class ye extends IC{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ye.prototype.constructor)}}class ue extends IC{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ue.prototype.constructor)}}class je extends IC{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,je.prototype.constructor)}}function u8(t,e){this.key=t,this.attributes=e,this.clear()}u8.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function d8(t,e){this.key=t,this.attributes=e,this.clear()}d8.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function f8(t,e){this.key=t,this.attributes=e,this.clear()}f8.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Bd(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}Bd.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};Bd.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};Bd.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};Bd.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const h8=0,p8=1,tie=2,m8=3;function Jo(t,e,n,i,r,s,o){let a,l,c,u;if(i=""+i,n===h8){if(a=t._nodes.get(i),!a)throw new ue(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(n===m8){if(r=""+r,l=t._edges.get(r),!l)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(i===d)a=l.target;else if(i===f)a=l.source;else throw new ue(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(i),!l)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===p8?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function nie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Jo(this,e,n,i,r,s);return o.attributes[a]}}function iie(t,e,n){t.prototype[e]=function(i,r){const[s]=Jo(this,e,n,i,r);return s.attributes}}function rie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Jo(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function sie(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=Jo(this,e,n,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function oie(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=Jo(this,e,n,i,r,s,o);if(typeof c!="function")throw new ye(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function aie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Jo(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function lie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Jo(this,e,n,i,r,s);if(!Un(a))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function cie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Jo(this,e,n,i,r,s);if(!Un(a))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return wn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function uie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Jo(this,e,n,i,r,s);if(typeof a!="function")throw new ye(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const die=[{name:t=>`get${t}Attribute`,attacher:nie},{name:t=>`get${t}Attributes`,attacher:iie},{name:t=>`has${t}Attribute`,attacher:rie},{name:t=>`set${t}Attribute`,attacher:sie},{name:t=>`update${t}Attribute`,attacher:oie},{name:t=>`remove${t}Attribute`,attacher:aie},{name:t=>`replace${t}Attributes`,attacher:lie},{name:t=>`merge${t}Attributes`,attacher:cie},{name:t=>`update${t}Attributes`,attacher:uie}];function fie(t){die.forEach(function({name:e,attacher:n}){n(t,e("Node"),h8),n(t,e("Source"),p8),n(t,e("Target"),tie),n(t,e("Opposite"),m8)})}function hie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function pie(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=jr(this,s,o,n),!r)throw new ue(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function mie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function gie(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=jr(this,a,l,n),!o)throw new ue(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function vie(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=jr(this,a,l,n),!o)throw new ue(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new ye(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function yie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function bie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Un(r))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function wie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Un(r))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return wn(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function xie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new ye(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Sie=[{name:t=>`get${t}Attribute`,attacher:hie},{name:t=>`get${t}Attributes`,attacher:pie},{name:t=>`has${t}Attribute`,attacher:mie},{name:t=>`set${t}Attribute`,attacher:gie},{name:t=>`update${t}Attribute`,attacher:vie},{name:t=>`remove${t}Attribute`,attacher:yie},{name:t=>`replace${t}Attributes`,attacher:bie},{name:t=>`merge${t}Attributes`,attacher:wie},{name:t=>`update${t}Attributes`,attacher:xie}];function kie(t){Sie.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const _ie=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Cie(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function Eie(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function m1(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Vr(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function Aie(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function Nie(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function g1(t,e){let n=t[e];return n.next!==void 0?new Vr(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Vr.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Pie(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):l8(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function g8(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:p}=a;if(l=i(u,d,f.key,p.key,f.attributes,p.attributes,a.undirected),t&&l)return u}}function Mie(t,e){if(t.size===0)return Vr.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Vr(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function DC(t,e,n,i,r,s){const o=e?Eie:Cie;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function Tie(t,e,n,i){const r=[];return DC(!1,t,e,n,i,function(s){r.push(s)}),r}function Rie(t,e,n){let i=Vr.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Io(i,m1(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Io(i,m1(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Io(i,m1(n.undirected))),i}function LC(t,e,n,i,r,s,o){const a=n?Nie:Aie;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function Oie(t,e,n,i,r){const s=[];return LC(!1,t,e,n,i,r,function(o){s.push(o)}),s}function Iie(t,e,n,i){let r=Vr.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Io(r,g1(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Io(r,g1(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Io(r,g1(n.undirected,i))),r}function Die(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return Pie(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ue(`Graph.${n}: could not find the "${s}" node in the graph.`);return Tie(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ue(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ue(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return Oie(i,this.multi,r,a,o)}throw new ye(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Lie(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,g8(!1,this,i,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new ue(`Graph.${s}: could not find the "${c}" node in the graph.`);return DC(!1,this.multi,i==="mixed"?this.type:i,r,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new ue(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new ue(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return LC(!1,i,this.multi,r,f,u,d)}throw new ye(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;i!=="directed"&&(f+=this.undirectedSize),i!=="undirected"&&(f+=this.directedSize),d=new Array(f);let p=0;c.push((m,g,v,y,b,w,k)=>{d[p++]=u(m,g,v,y,b,w,k)})}else d=[],c.push((f,p,m,g,v,y,b)=>{d.push(u(f,p,m,g,v,y,b))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,p,m,g,v,y,b)=>{u(f,p,m,g,v,y,b)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new ye(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new ye(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((p,m,g,v,y,b,w)=>{f=u(f,p,m,g,v,y,b,w)}),this[s].apply(this,c),f}}function jie(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,g8(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new ue(`Graph.${s}: could not find the "${l}" node in the graph.`);return DC(!0,this.multi,i==="mixed"?this.type:i,r,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new ue(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new ue(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return LC(!0,i,this.multi,r,d,c,u)}throw new ye(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,m,g,v,y)=>c(d,f,p,m,g,v,y)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,m,g,v,y)=>!c(d,f,p,m,g,v,y)),!this[s].apply(this,l)}}function $ie(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Vr.empty();if(!arguments.length)return Mie(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ue(`Graph.${s}: could not find the "${o}" node in the graph.`);return Rie(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ue(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ue(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Iie(i,r,l,a)}throw new ye(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Fie(t){_ie.forEach(e=>{Die(t,e),Lie(t,e),jie(t,e),$ie(t,e)})}const Bie=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ub(){this.A=null,this.B=null}ub.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};ub.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function gf(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(t&&u)return c.key}}function jC(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return gf(t,null,i,i.undirected,r);if(typeof n=="string")return gf(t,null,i,i[n],r)}const s=new ub;let o;if(e!=="undirected"){if(n!=="out"){if(o=gf(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=gf(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=gf(t,s,i,i.undirected,r),t&&o))return o}function zie(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return jC(!1,t,e,n,function(r){i.push(r)}),i}function vf(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Vr(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function Uie(t,e,n){if(t!=="mixed"){if(t==="undirected")return vf(null,n,n.undirected);if(typeof e=="string")return vf(null,n,n[e])}let i=Vr.empty();const r=new ub;return t!=="undirected"&&(e!=="out"&&(i=Io(i,vf(r,n,n.in))),e!=="in"&&(i=Io(i,vf(r,n,n.out)))),t!=="directed"&&(i=Io(i,vf(r,n,n.undirected))),i}function Vie(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ue(`Graph.${n}: could not find the "${s}" node in the graph.`);return zie(i==="mixed"?this.type:i,r,o)}}function Hie(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new ue(`Graph.${s}: could not find the "${c}" node in the graph.`);jC(!1,i==="mixed"?this.type:i,r,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,p)=>{d.push(u(f,p))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,p)=>{u(f,p)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new ye(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(p,m)=>{f=u(f,p,m)}),f}}function Wie(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new ue(`Graph.${o}: could not find the "${c}" node in the graph.`);return jC(!0,i==="mixed"?this.type:i,r,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,p)=>!u(f,p))}}function Gie(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Vr.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ue(`Graph.${s}: could not find the "${o}" node in the graph.`);return Uie(i==="mixed"?this.type:i,r,a)}}function Kie(t){Bie.forEach(e=>{Vie(t,e),Hie(t,e),Wie(t,e),Gie(t,e)})}function lg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,d,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do f=d.target,p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do f=d.target,f.key!==c&&(f=d.source),p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!p&&r(l.key,null,l.attributes,null,null,null,null)}}function qie(t,e){const n={key:t};return c8(e.attributes)||(n.attributes=wn({},e.attributes)),n}function Yie(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return c8(n.attributes)||(i.attributes=wn({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function Xie(t){if(!Un(t))throw new ye('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new ye("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Un(t.attributes)||t.attributes===null))throw new ye("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Jie(t){if(!Un(t))throw new ye('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new ye("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new ye("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Un(t.attributes)||t.attributes===null))throw new ye("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new ye("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Zie=eie(),Qie=new Set(["directed","undirected","mixed"]),oM=new Set(["domain","_events","_eventsCount","_maxListeners"]),ere=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],tre={allowSelfLoops:!0,multi:!1,type:"mixed"};function nre(t,e,n){if(n&&!Un(n))throw new ye(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new je(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function aM(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function v8(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new je(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new je(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Un(a))throw new ye(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new je(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new ue(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new ue(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new je(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new je(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Bd(i,r,l,c,a);t._edges.set(r,d);const f=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,u.key=r,t.emit("edgeAdded",u),r}function ire(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new je(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new je(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new ye(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Un(a))throw new ye(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new je(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,p;if(!n&&(f=t._edges.get(r),f)){if((f.source.key!==s||f.target.key!==o)&&(!i||f.source.key!==o||f.target.key!==s))throw new je(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);p=f}if(!p&&!t.multi&&u&&(p=i?u.undirected[o]:u.out[o]),p){const b=[p.key,!1,!1,!1];if(l?!c:!a)return b;if(l){const w=p.attributes;p.attributes=c(w),t.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else wn(p.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:a});return b}a=a||{},l&&c&&(a=c(a));const m={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new je(`Graph.${e}: the "${r}" edge already exists in the graph.`);let g=!1,v=!1;u||(u=aM(t,s,{}),g=!0,s===o&&(d=u,v=!0)),d||(d=aM(t,o,{}),v=!0),f=new Bd(i,r,u,d,a),t._edges.set(r,f);const y=s===o;return i?(u.undirectedDegree++,d.undirectedDegree++,y&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,y&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),i?t._undirectedSize++:t._directedSize++,m.key=r,t.emit("edgeAdded",m),[r,!0,g,v]}function Qc(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Pt extends Vne.EventEmitter{constructor(e){if(super(),e=wn({},tre,e),typeof e.multi!="boolean")throw new ye(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Qie.has(e.type))throw new ye(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new ye(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?u8:e.type==="directed"?d8:f8;yr(this,"NodeDataClass",n);const i="geid_"+Zie()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};yr(this,"_attributes",{}),yr(this,"_nodes",new Map),yr(this,"_edges",new Map),yr(this,"_directedSize",0),yr(this,"_undirectedSize",0),yr(this,"_directedSelfLoopCount",0),yr(this,"_undirectedSelfLoopCount",0),yr(this,"_edgeKeyGenerator",s),yr(this,"_options",e),oM.forEach(o=>yr(this,o,this[o])),Kr(this,"order",()=>this._nodes.size),Kr(this,"size",()=>this._edges.size),Kr(this,"directedSize",()=>this._directedSize),Kr(this,"undirectedSize",()=>this._undirectedSize),Kr(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Kr(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Kr(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Kr(this,"multi",this._options.multi),Kr(this,"type",this._options.type),Kr(this,"allowSelfLoops",this._options.allowSelfLoops),Kr(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new ye(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new ye(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new ye(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new je("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ue(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new je("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ue(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new je("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new ue(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new ue(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new ue(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return nre(this,e,n).key}mergeNode(e,n){if(n&&!Un(n))throw new ye(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(wn(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new ye(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do Qc(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do Qc(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do Qc(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=jr(this,i,r,this.type),!n)throw new ue(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ue(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Qc(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new je("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new je("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=jr(this,e,n,"directed");if(!i)throw new ue(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Qc(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new je("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new je("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=jr(this,e,n,"undirected");if(!i)throw new ue(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Qc(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new ye("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Un(e))throw new ye("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Un(e))throw new ye("Graph.mergeAttributes: provided attributes are not a plain object.");return wn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new ye("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new ye("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!sM(n))throw new ye("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new ye("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!sM(n))throw new ye("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new ye("Graph.forEachAdjacencyEntry: expecting a callback.");lg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ye("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");lg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new ye("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");lg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ye("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");lg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):l8(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new ye("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new ye("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new ye("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new ye("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new ye("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new ye("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new ye("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ye("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Vr(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=qie(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=Yie(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Pt)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,p,m)=>{n?m?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):m?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!Un(e))throw new ye("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Un(e.attributes))throw new ye("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new ye("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],Xie(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new ye("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],Jie(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let p;"key"in a?(p=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,p.call(this,a.key,c,u,d)):(p=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,p.call(this,c,u,d))}}return this}nullCopy(e){const n=new Pt(wn({},this._options,e));return n.replaceAttributes(wn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=wn({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new je(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new je("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new je("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,v8(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,wn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[f]>"u"?i[f]=0:i[f]++,l+=`${i[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!oM.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,yr(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Pt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pt.prototype.inspect);ere.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?v8:ire;t.generateKey?Pt.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Pt.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});fie(Pt);kie(Pt);Fie(Pt);Kie(Pt);class y8 extends Pt{constructor(e){const n=wn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new ye("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new ye('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class $C extends Pt{constructor(e){const n=wn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new ye("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new ye('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class b8 extends Pt{constructor(e){const n=wn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ye("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class w8 extends Pt{constructor(e){const n=wn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ye("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new ye('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class x8 extends Pt{constructor(e){const n=wn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ye("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new ye('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function zd(t){t.from=function(e,n){const i=wn({},e.options,n),r=new t(i);return r.import(e),r}}zd(Pt);zd(y8);zd($C);zd(b8);zd(w8);zd(x8);Pt.Graph=Pt;Pt.DirectedGraph=y8;Pt.UndirectedGraph=$C;Pt.MultiGraph=b8;Pt.MultiDirectedGraph=w8;Pt.MultiUndirectedGraph=x8;Pt.InvalidArgumentsGraphError=ye;Pt.NotFoundGraphError=ue;Pt.UsageGraphError=je;var rre=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},S8=cb,sre=S8.ARRAY_BUFFER_SUPPORT,ore=S8.SYMBOL_SUPPORT,are=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||sre&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(ore&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},k8=lb,lre=are;function pn(){this.clear()}pn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};pn.prototype.enqueue=function(t){return this.items.push(t),++this.size};pn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};pn.prototype.peek=function(){if(this.size)return this.items[this.offset]};pn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};pn.prototype.toArray=function(){return this.items.slice(this.offset)};pn.prototype.values=function(){var t=this.items,e=this.offset;return new k8(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};pn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new k8(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(pn.prototype[Symbol.iterator]=pn.prototype.values);pn.prototype.toString=function(){return this.toArray().join(",")};pn.prototype.toJSON=function(){return this.toArray()};pn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:pn,enumerable:!1}),t};typeof Symbol<"u"&&(pn.prototype[Symbol.for("nodejs.util.inspect.custom")]=pn.prototype.inspect);pn.from=function(t){var e=new pn;return lre(t,function(n){e.enqueue(n)}),e};pn.of=function(){return pn.from(arguments)};var cre=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},_8=rre,ure=cre;function dre(t,e,n){if(!_8(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,p,m,g,v,y=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],p=0,g=c.length;p<g;p++)for(u=c[p],d=r(u),m=0,v=d.length;m<v;m++)if(f=d[m],f in s||(a.push(f),s[f]=u),f in o){y=!0;break e}}else for(c=l,l=[],p=0,g=c.length;p<g;p++)for(u=c[p],d=i(u),m=0,v=d.length;m<v;m++)if(f=d[m],f in o||(l.push(f),o[f]=u),f in s){y=!0;break e}if(!y)return null;for(var b=[];f;)b.unshift(f),f=s[f];for(f=o[b[b.length-1]];f;)b.push(f),f=o[f];return b.length?b:null}function C8(t,e,n){if(!_8(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!i.has(c)&&(i.add(c),ure(u,e[t](c)),r[c]=s);s++,o=u}return r}C8.bind(null,"outboundNeighbors");C8.bind(null,"neighbors");var fre=dre;const X=new $C({allowSelfLoops:!1});X.addNode("MBR",{position:[620,250]});X.addNode("AL",{position:[455,45]});X.addNode("BL",{position:[455,85]});X.addNode("CL",{position:[455,125]});X.addNode("DL",{position:[455,165]});X.addNode("id",{position:[451,205]});X.addNode("SP",{position:[451,309]});X.addNode("IP",{position:[451,349]});X.addNode("ri",{position:[451,388]});X.addNode("MAR",{position:[698,349]});X.addNode("result",{position:[272,115]});X.addNode("ALUresult",{position:[370,115]});X.addNode("FLAGS",{position:[250,225]});X.addNode("IR",{position:[205,272]});X.addNode("left",{position:[130,85]});X.addNode("right",{position:[125,145]});X.addNode("rmbr",{position:[250,390]});X.addNode("bleft1",{position:[550,16]});X.addNode("bleft2",{position:[90,16]});X.addNode("bleft3",{position:[90,85]});X.addNode("AL join",{position:[425,45]});X.addNode("BL join",{position:[425,85]});X.addNode("CL join",{position:[425,125]});X.addNode("DL join",{position:[425,165]});X.addNode("id join",{position:[421,205]});X.addNode("data mbr join",{position:[421,250]});X.addNode("SP join",{position:[421,309]});X.addNode("IP join",{position:[421,349]});X.addNode("ri join",{position:[421,388]});X.addNode("MAR join1",{position:[550,388]});X.addNode("MAR join2",{position:[550,349]});X.addNode("addresses mbr join",{position:[421,250]});X.addNode("result mbr join",{position:[370,250]});X.addNode("FLAGS mbr join",{position:[250,250]});X.addNode("IR mbr join",{position:[205,250]});X.addNode("left join",{position:[30,85]});X.addNode("right join",{position:[90,145]});X.addNode("operands mbr join",{position:[90,250]});X.addNode("outr mbr join",{position:[550,250]});X.addNode("mbr reg join",{position:[421,250]});X.addNode("AL out",{position:[465,45]});X.addNode("BL out",{position:[465,85]});X.addNode("CL out",{position:[465,125]});X.addNode("DL out",{position:[465,165]});X.addNode("id out",{position:[460,205]});X.addNode("SP out",{position:[510,309]});X.addNode("IP out",{position:[510,349]});X.addNode("AL out join",{position:[550,45]});X.addNode("BL out join",{position:[550,85]});X.addNode("CL out join",{position:[550,125]});X.addNode("DL out join",{position:[550,165]});X.addNode("id out join",{position:[550,205]});X.addNode("SP out join",{position:[550,309]});X.addNode("IP out join",{position:[550,349]});X.addNode("ri out join",{position:[550,388]});X.addUndirectedEdge("AL","AL out");X.addUndirectedEdge("BL","BL out");X.addUndirectedEdge("CL","CL out");X.addUndirectedEdge("DL","DL out");X.addUndirectedEdge("id","id out");X.addUndirectedEdge("IP","IP out");X.addUndirectedEdge("SP","SP out");X.addUndirectedEdge("AL out","AL out join");X.addUndirectedEdge("BL out","BL out join");X.addUndirectedEdge("CL out","CL out join");X.addUndirectedEdge("DL out","DL out join");X.addUndirectedEdge("id out","id out join");X.addUndirectedEdge("AL out join","outr mbr join");X.addUndirectedEdge("BL out join","outr mbr join");X.addUndirectedEdge("CL out join","outr mbr join");X.addUndirectedEdge("DL out join","outr mbr join");X.addUndirectedEdge("id out join","outr mbr join");X.addUndirectedEdge("AL out join","bleft1");X.addUndirectedEdge("BL out join","bleft1");X.addUndirectedEdge("CL out join","bleft1");X.addUndirectedEdge("DL out join","bleft1");X.addUndirectedEdge("id out join","bleft1");X.addUndirectedEdge("bleft1","bleft2");X.addUndirectedEdge("bleft2","bleft3");X.addUndirectedEdge("bleft3","left");X.addUndirectedEdge("IP out join","outr mbr join");X.addUndirectedEdge("ri out join","outr mbr join");X.addUndirectedEdge("SP out join","outr mbr join");X.addUndirectedEdge("SP out join","MAR join2");X.addUndirectedEdge("outr mbr join","mbr reg join");X.addUndirectedEdge("MBR","outr mbr join");X.addUndirectedEdge("mbr reg join","AL join");X.addUndirectedEdge("mbr reg join","BL join");X.addUndirectedEdge("mbr reg join","CL join");X.addUndirectedEdge("mbr reg join","DL join");X.addUndirectedEdge("mbr reg join","id join");X.addUndirectedEdge("outr mbr join","operands mbr join");X.addUndirectedEdge("AL join","AL");X.addUndirectedEdge("BL join","BL");X.addUndirectedEdge("CL join","CL");X.addUndirectedEdge("DL join","DL");X.addUndirectedEdge("id join","data mbr join");X.addUndirectedEdge("MBR","data mbr join");X.addUndirectedEdge("IP","IP join");X.addUndirectedEdge("SP","SP join");X.addUndirectedEdge("ri","ri join");X.addUndirectedEdge("MAR join1","ri");X.addUndirectedEdge("MAR join2","MAR join1");X.addUndirectedEdge("MAR","MAR join2");X.addUndirectedEdge("IP join","SP join");X.addUndirectedEdge("SP join","ri join");X.addUndirectedEdge("IP join","addresses mbr join");X.addUndirectedEdge("addresses mbr join","data mbr join");X.addUndirectedEdge("result","ALUresult");X.addUndirectedEdge("ALUresult","result mbr join");X.addUndirectedEdge("result mbr join","addresses mbr join");X.addUndirectedEdge("FLAGS","FLAGS mbr join");X.addUndirectedEdge("FLAGS mbr join","result mbr join");X.addUndirectedEdge("IR","IR mbr join");X.addUndirectedEdge("IR mbr join","FLAGS mbr join");X.addUndirectedEdge("left","left join");X.addUndirectedEdge("right","right join");X.addUndirectedEdge("left join","right join");X.addUndirectedEdge("right join","operands mbr join");function hre(t,e,n,i){const r=f=>f.replace(/\.(l|h)$/,""),s=r(t),o=r(e);if(console.log("from:",t,"normalized:",s),console.log("to:",e,"normalized:",o),!X.hasNode(s))return console.warn(`Nodo origen '${s}' no existe en el grafo`),"";if(!X.hasNode(o))return console.warn(`Nodo destino '${o}' no existe en el grafo`),"";const a=(f,p)=>p==="left"?[f,"bleft1","bleft2","bleft3","left",`${f} out`,`${f} out join`,"outr mbr join","mbr reg join",`${p} join`,p]:[f,`${f} out`,`${f} out join`,"outr mbr join","mbr reg join",`${p} join`,p];let l=[];const c=["AL","BL","CL","DL","id"];if(s==="MBR"&&o==="left")l=["MBR","outr mbr join","bleft1","bleft2","bleft3","left"];else if(s==="MBR"&&o==="ri")l=["MBR","outr mbr join","SP out join","MAR join2","MAR"];else if(s==="MBR"&&c.includes(o))l=["MBR","mbr reg join",`${o} join`,o];else if(c.includes(s)&&c.includes(o))l=a(s,o);else if(s==="IP"&&o==="id")l=["IP out","IP out join","outr mbr join","mbr reg join","id join","id"];else if(s==="id"&&o==="ri")l=["id out","id out join","outr mbr join","MAR join2","MAR"];else if(s==="BL"&&o==="ri")l=["BL out","BL out join","outr mbr join","MAR join2","MAR"];else if(s==="id"&&o==="MBR")l=["id out","id out join","outr mbr join","MBR"];else if(s==="id"&&o==="IP"&&n==="RET")l=["MBR","mbr reg join","IP join","IP"];else try{l=fre(X,s,o)||[]}catch(f){return console.warn(`Error calculando ruta de ${s} a ${o}:`,f),""}if(s==="ri"&&o==="IP"&&(l=["MBR","mbr reg join","IP join","IP"]),s==="ri"&&o==="IP"&&n==="CALL"&&(l=["ri","ri out join","outr mbr join","mbr reg join","IP join","IP"]),s==="MBR"&&o==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(s==="MBR"&&o==="ri"&&n==="CALL"&&(l=["MBR","mbr reg join","ri join","ri"]),s==="MBR"&&o==="ri"&&(n==="MOV"||n==="INT")&&i==="mem<-imd"&&(l=["MBR","mbr reg join","ri join","ri"]),s==="IP"&&o==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 250 H 620";if(s==="MBR"&&o==="ri"&&i==="mem<-imd"&&(n==="ADD"||n==="SUB")&&(l=["MBR","mbr reg join","ri join","ri"]),l.length===0)return console.warn(`No se encontró ruta de ${s} a ${o}`),"";const u=X.getNodeAttribute(l[0],"position");let d=`M ${u[0]} ${u[1]}`;for(let f=1;f<l.length;f++){const[p,m]=X.getNodeAttribute(l[f],"position");d+=` L ${p} ${m}`}return d}function pre({showSP:t,showid:e,showri:n}){const{path:i,...r}=mt("cpu.internalBus.data");return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 370 V 250","M 250 225 V 250","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 430 349 H 421","V 250","M 451 349 H 421",t?"M 451 309 H 421":"M 451 309",n?"M 470 388 H 421 V 300":"","M 455 45 H 425","V 250","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"","M 550 45 H 465","M 550 85 H 465","M 550 125 H 465","M 550 165 H 465",e?"M 550 205 H 460":"",n?"M 550 388 H 480":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220"].join(" ")}),h.jsx(an.path,{d:i,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r})]})}const lM=(t,e,n,i)=>{try{const r=hre(t,e,n,i);return r?Ge([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}):Promise.resolve()}catch(r){return console.warn("Error en drawDataPath:",r),Promise.resolve()}},cM=()=>Ge({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});let $l="",v1="",y1=!1,cg=!1,ug=0;async function mre(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await Ge([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),z.set(FL,t.operation),await Promise.all([Ge({key:"cpu.alu.operation.backgroundColor",to:Kt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Ge({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([Ge({key:"cpu.alu.operation.backgroundColor",to:Kt.stone[800]},{duration:1,easing:"easeOutQuart"}),Ge([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([nr("cpu.result"),nr("cpu.FLAGS")]),z.set(qe.FLAGS,t.flags),z.set(qe.result,t.result),await Promise.all([Ar("cpu.result"),Ar("cpu.FLAGS")]),await Ge([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{z.set(tr,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await Ge([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{$l=t.instruction.name,v1=t.instruction.willUse.ri?"mem<-imd":"",y1=!!(t.instruction.willUse.ri&&$l==="MOV"),cg=!!(t.instruction.willUse.ri&&($l==="ADD"||$l==="SUB"||$l==="INT")),ug=0,h6(t.instruction.position.start),z.set(tr,{phase:"fetching",metadata:t.instruction}),await Ge([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{z.set(tr,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await Ge([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Ge([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Ge([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{z.set(tr,{phase:"stopped",error:t.error}),Ic(t.error);return}case"cpu:halt":case"cpu:int.0":{z.set(tr,{phase:"stopped"}),Ic();return}case"cpu:int.3":{Pn();return}case"cpu:int.6":{z.set(tr,{phase:"int6"});return}case"cpu:int.7":{z.set(tr,{phase:"int7"});return}case"cpu:inta.off":{await ii("bus.inta");return}case"cpu:inta.on":{await Ui("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await Ui(`bus.${e}`,10);return}case"cpu:iom.on":{await Ui("bus.iom",15);return}case"cpu:mar.set":{ug++,console.log("countersetMAR",ug),ug===4&&cg&&(y1=!0,cg=!1),await Ge([{key:"cpu.internalBus.address.path",from:Dne(t.register,y1,cg)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await nr("cpu.MAR",Kt.blue[500]),z.set(jL,z.get(qe[t.register])),await Promise.all([Ar("cpu.MAR"),Ge({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const e=t.register.replace(/\.(l|h)$/,"");await lM("MBR",e,$l,v1),z.set(qe[t.register],z.get(Zh)),e==="IR"?await y0(`cpu.${e}`):(await nr(`cpu.${e}`),await Ar(`cpu.${e}`)),await cM();return}case"cpu:mbr.set":{const e=t.register.replace(/\.(l|h)$/,"");await nr("cpu.MBR"),await lM(e,"MBR",$l,v1),await nr("cpu.MBR"),z.set(Zh,z.get(qe[t.register])),await Promise.all([Ar("cpu.MBR"),cM()]);return}case"cpu:register.copy":{await nr(`cpu.${t.dest}`),z.set(qe[t.dest],z.get(qe[t.src])),await Ar(`cpu.${t.dest}`);return}case"cpu:register.update":{const[e]=HS(t.register),n=e==="ri"?"cpu.ri":`cpu.${e}`;e==="IP"?await Promise.all([y0(n),new Promise(i=>{window.dispatchEvent(new CustomEvent("ip-register-update")),i()})]):await y0(n),z.set(qe[t.register],t.value);return}default:return t}}async function gre(t){switch(t.type){case"f10:press":await Ui("bus.int0",2),await ii("bus.int0");return;default:return t.type}}const FC=de(F.zero(8)),BC=de(F.zero(8));function vre(t){t.io.handshake&&(z.set(FC,F.fromUnsigned(t.io.handshake.DATA,8)),z.set(BC,F.fromUnsigned(t.io.handshake.STATE,8)))}async function yre(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await bp(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await nr(`handshake.${t.register}`),t.register){case"DATA":{z.set(FC,t.value);break}case"STATE":{z.set(BC,t.value);break}default:return t.register}await Ar(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await ii("bus.int2");return}case"handshake:int.on":{await Ui("bus.int2",10);return}default:return t}}async function bre(t){switch(t.type){case"keyboard:listen-key":{z.set(ln,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{z.sub(ln,()=>{const n=z.get(ln);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const zC=de(F.zero(8));function wre(t){t.io.leds!==null&&z.set(zC,F.fromUnsigned(t.io.leds,8))}async function xre(t){switch(t.type){case"leds:update":{await Ui("bus.pio->leds",2),z.set(zC,t.state),await ii("bus.pio->leds");return}default:return t.type}}function Sre(t){return t==="memory-to-mbr"?"M 800 249 L 629 249":"M 629 249 L 800 249"}const uM=t=>{try{const e=Sre(t);return e?Ge([{key:"bus.data.path",from:e},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}):Promise.resolve()}catch(e){return console.warn("Error en drawExternalDataPath:",e),Promise.resolve()}},dM=()=>Ge({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function kre(){return"M 659 349 H 800"}const fM=()=>{try{const t=kre();return Ge([{key:"bus.address.path",from:t},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawExternalAddressPath:",t),Promise.resolve()}},hM=()=>Ge({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),_re=()=>{try{return Ge([{key:"bus.rd.path",from:"M 380 420 H 800"},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawRDControlPath:",t),Promise.resolve()}},Cre=()=>{try{return Ge([{key:"bus.wr.path",from:"M 380 440 H 800"},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawWRControlPath:",t),Promise.resolve()}},pM=()=>Ge({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),mM=()=>Ge({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function Ere(t){switch(t.type){case"memory:read":{await fM(),Pne(),await _re(),Mne();return}case"memory:read.ok":{z.set(Qh,Se.from(t.address)),await Ge({key:"memory.operating-cell.color",to:Kt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await uM("memory-to-mbr"),z.set(Zh,t.value),await y0("cpu.MBR"),await Promise.all([Ge({key:"memory.operating-cell.color",to:Kt.white},{duration:1,easing:"easeOutQuart"}),dM(),hM(),pM(),mM()]);return}case"memory:write":{await fM(),Tne(),await Cre(),Rne();return}case"memory:write.ok":{z.set(Qh,Se.from(t.address)),await nr("cpu.MBR"),await uM("mbr-to-memory"),await Ge({key:"memory.operating-cell.color",to:Kt.mantis[400]},{duration:1,easing:"easeOutQuart"}),z.set(gv,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([Ar("cpu.MBR"),Ge({key:"memory.operating-cell.color",to:Kt.white},{duration:1,easing:"easeOutQuart"}),dM(),hM(),pM(),mM()]);return}case"memory:read.error":case"memory:write.error":{Ic(t.error);return}case"memory:write.warning":{Pi({title:"Advertencia de Memoria",description:`${t.warning}`,variant:"info"});return}default:return t}}const UC=de(F.fromUnsigned(255,8)),VC=de(F.fromUnsigned(0,8)),HC=de(F.fromUnsigned(0,8)),$v=[de(F.zero(8)),de(F.zero(8)),de(F.zero(8)),de(F.zero(8)),de(F.zero(8)),de(F.zero(8)),de(F.zero(8)),de(F.zero(8))];function Are(t){if(t.io.pic){z.set(UC,F.fromUnsigned(t.io.pic.IMR,8)),z.set(VC,F.fromUnsigned(t.io.pic.IRR,8)),z.set(HC,F.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<$v.length;e++)z.set($v[e],F.fromUnsigned(t.io.pic.lines[e],8))}}async function Nre(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await bp(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await nr(`pic.${t.register}`),t.register){case"IMR":{z.set(UC,t.value);break}case"IRR":{z.set(VC,t.value);break}case"ISR":{z.set(HC,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));z.set($v[e],t.value);break}default:return t}await Ar(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await ii("bus.intr");return}case"pic:intr.on":{await Ui("bus.intr",10);return}case"pic:int.send":{await bp(t.number);return}default:return t}}const WC=de(F.zero(8)),GC=de(F.zero(8)),KC=de(F.zero(8)),qC=de(F.zero(8));function Pre(t){t.io.pio&&(z.set(WC,F.fromUnsigned(t.io.pio.PA,8)),z.set(GC,F.fromUnsigned(t.io.pio.PB,8)),z.set(KC,F.fromUnsigned(t.io.pio.CA,8)),z.set(qC,F.fromUnsigned(t.io.pio.CB,8)))}async function Mre(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await bp(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await nr(`pio.${t.register}`),t.register){case"PA":{z.set(WC,t.value);break}case"PB":{z.set(GC,t.value);break}case"CA":{z.set(KC,t.value);break}case"CB":{z.set(qC,t.value);break}default:return t.register}await Ar(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const Fv=de([]),Bv=de("");function Tre(t){t.io.printer&&(z.set(Fv,t.io.printer.buffer.map(e=>F.fromUnsigned(e,8))),z.set(Bv,t.io.printer.paper))}async function Rre(t){switch(t.type){case"printer:buffer.add":{z.set(Fv,e=>[...e,t.char]);return}case"printer:buffer.pop":{z.set(Fv,e=>e.slice(1));return}case"printer:busy.off":{await ii("bus.printer.busy");return}case"printer:busy.on":{await Ui("bus.printer.busy",15);return}case"printer:data.read":{await Ui("bus.printer.data",15),await ii("bus.printer.data");return}case"printer:paper.print":{z.set(Bv,e=>e+t.char);return}case"printer:paper.replace":{z.set(Bv,"");return}case"printer:strobe.off":{await ii("bus.printer.strobe");return}case"printer:strobe.on":{await Ui("bus.printer.strobe",15);return}default:return t}}const YC=de("");function Ore(t){"screen"in t.io&&t.io.screen!==null&&z.set(YC,t.io.screen)}async function Ire(t){switch(t.type){case"screen:send-char":{z.set(YC,t.output);return}default:return t.type}}const db=de(F.zero(8));function Dre(t){t.io.switches!==null&&z.set(db,F.fromUnsigned(t.io.switches,8))}async function Lre(t){switch(t.type){case"switches:toggle":{z.set(db,e=>e.withBit(t.index,!e.bit(t.index))),await Ui("bus.switches->pio",2),await ii("bus.switches->pio");return}default:return t}}const zv=de(F.zero(8)),XC=de(F.zero(8));function jre(t){t.io.timer&&(z.set(zv,F.fromUnsigned(t.io.timer.CONT,8)),z.set(XC,F.fromUnsigned(t.io.timer.COMP,8)))}async function $re(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await bp(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await nr(`timer.${t.register}`),t.register){case"CONT":{z.set(zv,t.value);break}case"COMP":{z.set(XC,t.value);break}default:return t.register}await Ar(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await ii("bus.int1");return}case"timer:int.on":{await Ui("bus.int1",10);return}case"timer:tick":{z.set(zv,t.cont),await Ui("bus.int1",2),await ii("bus.int1");return}default:return t}}const V2=new Set;async function E8(t){Bre(t);const[e]=t.type.split(":",2);switch(V2.add(t.type),e){case"bus":{await One(t);break}case"clock":{await Ine(t);break}case"cpu":{await mre(t);break}case"f10":{await gre(t);break}case"handshake":{await yre(t);break}case"keyboard":{await bre(t);break}case"leds":{await xre(t);break}case"memory":{await Ere(t);break}case"pic":{await Nre(t);break}case"pio":{await Mre(t);break}case"printer":{await Rre(t);break}case"screen":{await Ire(t);break}case"switches":{await Lre(t);break}case"timer":{await $re(t);break}default:return e}V2.delete(t.type)}function gM(...t){for(const e of t)if(V2.has(e))return!0;return!1}const Fre={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function Bre(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${Fre[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof F?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Se?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof hr?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const cn=new aJ,ln=de({type:"stopped"});function zre(t){const e=t.translate(Tn().language);Pi({title:e,variant:"error"})}function Ic(t){if(t&&(zre(t),t.code==="no-instruction")){z.set(ln,{type:"paused"});return}h6(null),oee(!1),z.set(ln,{type:"stopped",error:t}),z.set(tr,{phase:"stopped",error:t}),X6()}function Pn(){z.set(ln,{type:"paused"}),Cne()}function Ure(){Pi({title:Zy(Tn().language,"messages.assemble-error"),variant:"error"})}function eu(){Pi({title:Zy(Tn().language,"messages.invalid-action"),variant:"error"})}function vM(t,e=!1){dJ(t,e),pJ(t,e),vre(t),Are(t),Pre(t),jre(t),wre(t),Tre(t),Ore(t),Dre(t),gn=0,pc=0,z.set(Ac,gn),z.set(Gy,pc),z.set(ht,""),e&&z.set(mv,[])}let me=null,Fl=0,et=0,Bl="",ao=!0,b1=!1,En=!1,gn=0,pc=0,zl="",yM="",bM="",yf=!1,dg=!1,fg="",wM="";async function Ql(t){try{for(;;){const e=z.get(ln);if(z.get(Cv)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),z.set(Cv,!1),Ic();break}if(e.type==="stopped"){Fl=0,et=0,Bl="";break}if(e.type==="paused"){await new Promise(s=>{const o=z.sub(ln,()=>{o(),s()})});continue}const i=t.next();if(i.done)break;if(i.value&&typeof i.value<"u")await E8(i.value);else continue;if(i.value.type==="cpu:cycle.start"&&(me=i.value.instruction.name,b1=!!i.value.instruction.willUse.id,En=!!i.value.instruction.willUse.ri,z.set(uJ,En),yf=!1,dg=!1,fg=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"||i.value.type==="cpu:halt"){Fl=0,et=0,ao=!0,Bl="",pc++,console.log(`Instrucciones: ${pc}`),z.set(Gy,pc),i.value.type==="cpu:halt"?(gn++,z.set(Ac,gn),z.set(ht,"Ejecución: Detenido")):(e.until==="cycle-change"||e.until==="end-of-instruction")&&Pn();continue}else i.value.type==="cpu:int.6"?z.set(ht,"Interrupción: Rutina leer caracter del teclado"):i.value.type==="cpu:int.7"&&(z.set(ht,"Interrupción: Rutina mostrar por pantalla"),e.until==="cycle-change"&&Pn());if(Fl<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(Fl=3,et=3,z.set(ht,"Ejecución: MAR ← SP")):(z.set(ht,"Captación: MAR ← IP"),et++),e.until==="cycle-change"&&Pn(),Fl++,gn++):i.value.type==="cpu:register.update"?(z.set(ht,"Captación: MBR ← read(Memoria[MAR]); IP ← IP + 1"),e.until==="cycle-change"&&Pn(),et++,Fl++,gn++):i.value.type==="cpu:mbr.get"&&(z.set(ht,"Captación: IR ← MBR"),e.until==="cycle-change"&&Pn(),Fl++,gn++);else if(i.value.type==="cpu:rd.on"&&et>1?Bl="Ejecución: MBR ← read(Memoria[MAR])":i.value.type==="cpu:wr.on"?Bl="Ejecución: write(Memoria[MAR]) ← MBR":i.value.type==="pio:write.ok"&&(z.set(ht,"Ejecución: write(PIO[MAR]) ← MBR"),et++,gn++),i.value.type==="cpu:mar.set"){const s=i.value.register,o=s==="ri"?"MBR":s;let a=!1,l=!1;En&&et===5&&(me==="ADD"||me==="SUB")&&(a=!0),En&&et===9&&(a=!0),En&&et===2&&(me==="ADD"||me==="SUB")&&(l=!0),console.log("executeStageCounter:",et),console.log("mbridirmar:",yf),console.log("resultmbrimar:",dg),console.log("displayMessageresultmbr:",fg),console.log("shouldDisplayMessage:",ao),(ao||s==="SP")&&(dg?z.set(ht,fg):a?z.set(ht,`Ejecución: MAR ← ${s}`):l?z.set(ht,"Ejecución: ri ← MBR; MAR ← MBR"):et===2&&En&&me==="MOV"?z.set(ht,"Ejecución: ri ← MBR; MAR ← IP"):et===4&&En&&me==="MOV"?z.set(ht,`Ejecución: MAR ← ${s}`):yf?z.set(ht,"Ejecución: id ← MBR; MAR ← IP"):et===2&&En&&me==="INT"?z.set(ht,"Ejecución: ri ← MBR; MAR ← SP"):z.set(ht,`Ejecución: MAR ← ${o}`)),e.until==="cycle-change"&&Pn(),et++,gn++}else if(i.value.type==="cpu:register.update"){const s=i.value.register;let o="";ao=!0;let a=!0;s==="SP"?(En&&et===4&&me==="INT"&&(a=!1,ao=!1),me==="PUSH"&&(o="Ejecución: SP = SP - 1"),(me==="RET"||me==="IRET")&&(o="Ejecución: SP = SP + 1"),et===3&&me==="POP"&&(o=wM+"; SP = SP + 1")):s==="FLAGS"?(o="Ejecución: IF = 0",En&&et===5&&me==="INT"&&(o="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1; IF = 0")):s==="DL"&&me==="INT"?o="Interrupción: AL ← ASCII":s==="right.l"&&me==="INT"?o="Interrupción: SUB AL, 1":s==="right"&&me==="INT"?o="Interrupción: ADD BL, 1":s==="ri.l"&&me==="INT"?(o="Interrupción: MAR ← (video)",ao=!1):En&&et===3&&me==="MOV"?(o="Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1; MAR ← ri",a=!1,ao=!1):et===4&&me==="CALL"?a=!1:o=s==="IP"?"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1":`Ejecución: MBR ← ${s}`,En&&et===8&&me==="INT"&&(o="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),et===2&&me==="CALL"&&(o="Ejecución: ri ← MBR; SP ← SP - 1"),et===4&&me==="CALL"&&(o="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),console.log("displayMessage:",o),console.log("currentInstructionName:",me),console.log("currentInstructionModeri:",En),console.log("executeStageCounter:",et),console.log("pause:",a),et++,me!=="DEC"&&me!=="INC"&&me!=="NOT"&&me!=="NEG"&&!(me==="INT"&&et===5)&&(z.set(ht,o),gn++),o!=="Interrupción: MAR ← (video)"&&e.until==="cycle-change"&&me!=="DEC"&&me!=="INC"&&me!=="NOT"&&me!=="NEG"&&a&&Pn()}else if(i.value.type==="cpu:alu.execute")me==="CMP"&&(z.set(ht,`Ejecución: ${yM} ${me} ${zl} ; write(FLAGS)`),gn++,e.until==="cycle-change"&&Pn());else if(i.value.type==="cpu:mbr.get"){const s=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register;(String(s)==="right.l"||String(s)==="left.l")&&(zl="MBR"),(En&&et===3&&(me==="ADD"||me==="SUB"||me==="CMP")||et===3&&me==="POP")&&(yf=!0),me==="POP"&&et===3&&(wM=`Ejecución: ${s} ← MBR`),yf||String(s)!=="ri.l"&&String(s)!=="right.l"&&String(s)!=="left.l"&&(z.set(ht,`Ejecución: ${s} ← MBR`),gn++,e.until==="cycle-change"&&Pn())}else if(i.value.type==="cpu:register.copy"){const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");let a="";me==="DEC"||me==="INC"||me==="NOT"||me==="NEG"?a=s==="result"?`${me} ${zl}`:s:(a=s==="result"?`${o} ${me} ${zl}`:s,bM=`${s} ${me} ${zl}; write(FLAGS)`),me==="CMP"&&String(o)==="right"&&(zl=s),me==="CMP"&&String(o)==="left"&&(yM=s);let l=`Ejecución: ${o} ← ${a}`;(me==="ADD"||me==="SUB"||me==="CMP")&&(l+="; write(FLAGS)"),s==="ri"&&o==="IP"?(l="Ejecución: IP ← MBR",me==="CALL"&&(l="Ejecución: IP ← ri"),z.set(ht,l),e.until==="cycle-change"&&Pn()):o==="left"&&me==="INT"?l="ADD BL, 1":s==="result"&&me==="INT"?e.until==="cycle-change"&&Pn():s==="IP"&&o==="id"?(l="Ejecución: id ← IP",z.set(ht,l),e.until==="cycle-change"&&Pn()):s==="id"&&o==="ri"?(l="Ejecución: MAR ← id",ao=!1,z.set(ht,l)):s==="MBR"&&o==="ri"?(l="Ejecución: MAR ← MBR",z.set(ht,l)):s==="id"&&o==="IP"?(l="Ejecución: IP ← MBR",z.set(ht,l),e.until==="cycle-change"&&Pn()):s==="BL"&&o==="ri"||s==="BX"&&o==="ri"?(l="Ejecución: MAR ← BL",z.set(ht,l),ao=!1,et++):String(s)==="right.l"&&(zl=s),(o!=="result"&&o!=="left"&&o!=="right"&&s!=="result"&&s!=="left"&&s!=="right"||s==="result"&&o!=="MBR")&&(z.set(ht,l),gn++)}else if(i.value.type==="bus:reset"&&et>1&&(me==="MOV"||me==="ADD"||me==="SUB"||me==="CMP"||me==="CALL"||me==="INT"||me==="PUSH"||me==="POP"||me==="IN"||me==="RET")){me==="RET"&&(Bl="Ejecución: MBR ← read(Memoria[MAR])"),me==="IN"&&(Bl="Ejecución: MBR ← read(PIO[MAR])");let s=!1;(En&&(et===4||et===8)&&me==="INT"||En&&et===3&&me==="MOV"||b1&&et===4&&(me==="CALL"||me==="ADD"||me==="SUB"||me==="CMP"))&&(s=!0),console.log("executeStageCounter:",et),s||(z.set(ht,Bl),gn++,e.until==="cycle-change"&&Pn())}else if(i.value.type==="cpu:mbr.set"){const s=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register==="result.l"?bM:i.value.register;En&&et===5&&(me==="ADD"||me==="SUB")?(dg=!0,fg=`Ejecución: MBR ← ${s} ; MAR ← ri`):(z.set(ht,`Ejecución: MBR ← ${s}`),e.until==="cycle-change"&&Pn(),et++,gn++)}}else z.set(ht,"");console.log(`Ciclos ejecutados: ${gn}`),z.set(Ac,gn);const r=new CustomEvent("instructionChange",{detail:{instruction:me,modeid:b1,moderi:En}});window.dispatchEvent(r),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until:i.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction")&&Pn()}t.return()}catch(e){const n=qt.from(e);Ic(n)}}async function Vre(...t){const e=t[0],n=z.get(ln);switch(e){case"cpu.run":{if(n.type==="running")return eu();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;gn=0,pc=0,z.set(Ac,gn),z.set(Gy,pc),z.set(mv,[]);const r=window.codemirror.state.doc.toString(),s=ML(r);if(!s.success)return Ure();const o=s.instructions.map(w=>w.instruction),a=o.some(w=>["CALL","RET","INT","IRET","POP","PUSH"].includes(w));z.set(nC,a);const l=o.includes("INT");z.set(WS,l);const c=s.instructions.some(w=>w.instruction==="INT"?w.operands.some(k=>k.type==="number-expression"&&typeof k.value.value=="number"?k.value.value===6||k.value.value===7:!1):!1),u=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>k.type==="number-expression"&&typeof k.value.value=="number"?k.value.value===48||k.value.value===50:!1):!1),d=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value>=32&&k.value.value<=43;try{if(k.value&&typeof k.value.resolve=="function"){const C=k.value.resolve();if(typeof C=="number")return C>=32&&C<=43}}catch(C){console.warn("No se pudo resolver operando PIC:",C)}}return!1}):!1),f=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value===64||k.value.value===65;try{if(k.value&&typeof k.value.resolve=="function"){const C=k.value.resolve();if(typeof C=="number")return C===64||C===65}}catch(C){console.warn("No se pudo resolver operando Handshake:",C)}}return!1}):!1),p=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value===16||k.value.value===17;try{if(k.value&&typeof k.value.resolve=="function"){const C=k.value.resolve();if(typeof C=="number")return C===16||C===17}}catch(C){console.warn("No se pudo resolver operando Timer:",C)}}return!1}):!1),m=Tn();z.set(Wr,w=>({...w,devices:{...w.devices,keyboardAndScreen:c,pio:u?"switches-and-leds":f?"printer":w.devices.pio,handshake:f?"printer":w.devices.handshake,pic:d||w.devices.pic,"switches-and-leds":u}})),z.set($L,c);const g=l||d||f||p||c;z.set(WS,g),console.log("Detectado - PIC:",d,"Handshake:",f,"Timer:",p,"INT:",l),console.log("Habilitando vector de interrupciones:",g),cn.loadProgram({program:s,data:m.dataOnLoad,devices:{keyboardAndScreen:Tn().devices.keyboardAndScreen??!1,pic:Tn().devices.pic??!1,pio:Tn().devices.pio??null,handshake:Tn().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const v=s.instructions.filter(w=>w.type==="instruction").flatMap(w=>{const k=w.operands.map(_=>{if(_.type==="register")return _.value;if(_.type==="number-expression"){const N=_.value;if(N.isNumberLiteral())return N.value.toString(16)+"h";if(N.isLabel())return N.value}else{if(_.type==="indirect-address")return"[BL]";if(_.type==="direct-address"){const N=_.value;if(N.isNumberLiteral())return N.value.toString(16)+"h"}}return""}).join(", "),C=`${w.instruction} ${k}`.trim(),E=[{address:w.start.value,name:C,length:w.length.toString().trim()}];if(w.operands.some(_=>_.type==="number-expression"||_.type==="direct-address")){const _=w.start.value+1,N=w.operands.filter((M,R)=>w.length===3?R===0&&M.type==="number-expression":M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const R=M.value;if(R.isNumberLiteral())return R.value.toString(16)+"h";if(R.isLabel())return R.value}else if(M.type==="direct-address"){const R=M.value;if(R.isNumberLiteral())return R.value.toString(16)+"h"}return""}).join(", ");E.push({address:_,name:N,length:""})}if(w.length===3){const _=w.start.value+2,N=w.operands.filter(M=>M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const R=M.value;if(R.isNumberLiteral())return R.value.toString(16)+"h"}return""}).join(" ");E.push({address:_,name:N,length:""})}return E}),y=s.data.filter(w=>w.type==="data-directive").flatMap(w=>{const k=w.start.value;return w.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,_)=>({address:k+_,label:_===0&&w.label||null,value:E}))});console.log("Direcciones de las instrucciones:",v),console.log("Direcciones de los datos:",y),z.set(BL,v),z.set(zL,y.map(w=>({...w,length:""}))),vM(cn.getComputerState());const b=["Start CPU",{until:i,devices:Tn().devices,language:Tn().language,animations:Tn().animations?"yes":"no"}];x6.capture(...b),z.set(ln,{type:"running",until:i,waitingForInput:!1}),Ql(cn.startCPU()),Hre(),Wre()}else z.set(ln,{type:"running",until:i,waitingForInput:!1}),Ene();return}case"cpu.stop":{const i=t[1];i?(Ic(),vM(cn.getComputerState(),i)):Pn();return}case"f10.press":{if(!cn.devices.f10.connected()||n.type!=="running")return eu();if(gM("f10:press"))return;Ql(cn.devices.f10.press());return}case"switch.toggle":{if(!cn.devices.switches.connected())return eu();if(gM("switches:toggle"))return;const i=t[1];n.type==="running"?Ql(cn.devices.switches.toggle(i)):z.set(db,r=>r.withBit(i,!r.bit(i)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return eu();cn.devices.keyboard.readChar(F.fromChar(t[1])),z.set(ln,{...n,waitingForInput:!1});return}case"screen.clean":{if(!cn.devices.screen.connected())return eu();Ql(cn.devices.screen.clear());return}case"printer.clean":{if(!cn.devices.printer.connected())return eu();Ql(cn.devices.printer.clear());return}default:return e}}async function Hre(){if(cn.devices.clock.connected())for(;z.get(ln).type!=="stopped";){const t=Tn().clockSpeed;await Ge({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),Ql(cn.devices.clock.tick())}}async function Wre(){if(cn.devices.printer.connected()){for(;z.get(ln).type!=="stopped";){const t=Tn().printerSpeed;await Ge([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Ge({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await Ql(cn.devices.printer.print())}if(z.get(ln).type==="stopped"&&cn.devices.printer.hasPending())for(;z.get(ln).type!=="stopped"||cn.devices.printer.hasPending();){const t=Tn().printerSpeed;await Ge([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Ge({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=cn.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await E8(n.value),n=e.next()}}}function _n(){const t=Ze(ln),e=b6(),n=x.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:Vre,devices:n}}function Gre({className:t}){const e=Mt(),{status:n,dispatch:i}=_n(),r=x.useCallback(()=>{n.type!=="running"&&i("cpu.run","cycle-change")},[n.type,i]);Ao("F7",d=>{d.preventDefault(),r()},void 0,[r]);const s=x.useCallback(()=>{n.type!=="running"&&i("cpu.run","end-of-instruction")},[n.type,i]);Ao("F8",d=>{d.preventDefault(),s()},void 0,[s]);const o=x.useCallback(()=>{n.type!=="running"&&i("cpu.run","infinity")},[n.type,i]);Ao("F4",d=>{d.preventDefault(),o()},void 0,[o]);const a=x.useCallback(()=>{n.type==="running"&&i("cpu.stop",!1)},[n.type,i]),l=x.useCallback(()=>{n.type!=="running"&&i("cpu.stop",!0)},[n.type,i]);Ao("F9",d=>{d.preventDefault(),l()},void 0,[l]),Ao(" ",d=>{const f=d.target;f.tagName==="INPUT"||f.tagName==="TEXTAREA"||f.contentEditable==="true"||(d.preventDefault(),n.type==="running"&&a())},{event:"keydown"},[n.type,a]);const[c,u]=x.useState(!1);return x.useEffect(()=>{const d=()=>{u(window.innerWidth<=600||window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches)};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),h.jsxs("div",{"data-testid":"controls-container",className:ee("flex items-center justify-center gap-4 rounded-xl border border-stone-700 bg-stone-900/80 px-3 py-1 shadow-lg",t),children:[h.jsxs("button",{"data-testid":"cycle-button",disabled:n.type==="running",onClick:r,title:e("control.action.run.cycle-change"),className:"group relative flex flex-col items-center rounded-lg px-1.5 py-0.5 transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx($e,{icon:bd,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),!c&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),!c&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.cycle-change")})]}),h.jsxs("button",{"data-testid":"new-button",disabled:n.type==="running",onClick:s,title:e("control.action.run.end-of-instruction"),className:"group relative flex flex-col items-center rounded-lg px-1.5 py-0.5 transition hover:bg-blue-600/20 focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-50",children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx($e,{icon:Y_,size:"lg",className:"text-blue-400 transition group-hover:scale-110"}),!c&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),!c&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.end-of-instruction")})]}),h.jsxs("button",{"data-testid":"open-button",disabled:n.type==="running",onClick:o,title:e("control.action.run.infinity"),className:"group relative flex flex-col items-center rounded-lg px-1.5 py-0.5 transition hover:bg-orange-600/20 focus-visible:ring-2 focus-visible:ring-orange-400 disabled:opacity-50",children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx($e,{icon:zY,size:"lg",className:"text-orange-400 transition group-hover:scale-110"}),!c&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),!c&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.infinity")})]}),n.type==="running"?h.jsxs("button",{"data-testid":"save-button",onClick:a,title:e("control.action.pause"),className:"group relative flex flex-col items-center rounded-lg px-1.5 py-0.5 transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400",children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx($e,{icon:zy,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),!c&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),!c&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"assemble-button",onClick:l,disabled:n.type==="stopped",title:e("control.action.reset"),className:"group relative flex flex-col items-center rounded-lg px-1.5 py-0.5 transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx($e,{icon:hL,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),!c&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),!c&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.reset")})]})]})}const Kre=()=>{const[t,e]=x.useState([]),[n,i]=x.useState(!1);x.useEffect(()=>{const c=localStorage.getItem("vonsim8-notifications");if(c)try{const d=JSON.parse(c);if(Array.isArray(d)){const f=d.filter(p=>p&&typeof p=="object"&&"id"in p&&"type"in p&&"title"in p&&"message"in p&&"timestamp"in p&&"read"in p).map(p=>({id:String(p.id),type:p.type,title:String(p.title),message:String(p.message),timestamp:new Date(p.timestamp),read:!!p.read}));e(f)}}catch{e([])}if(!localStorage.getItem("vonsim8-welcome-notification")){const d={id:"welcome",type:"info",title:"¡Bienvenido a VonSim8!",message:"Gracias por usar nuestro simulador. Aquí encontrarás notificaciones importantes sobre el funcionamiento de la aplicación.",timestamp:new Date,read:!1};e(f=>[d,...f]),localStorage.setItem("vonsim8-welcome-notification","true")}},[]),x.useEffect(()=>{localStorage.setItem("vonsim8-notifications",JSON.stringify(t))},[t]);const r=x.useCallback(c=>{const u={...c,id:Date.now().toString(),timestamp:new Date,read:!1};e(d=>[u,...d])},[]),s=x.useCallback(c=>{e(u=>u.map(d=>d.id===c?{...d,read:!0}:d))},[]),o=x.useCallback(()=>{e(c=>c.map(u=>({...u,read:!0})))},[]),a=x.useCallback(c=>{e(u=>u.filter(d=>d.id!==c))},[]),l=x.useCallback(()=>{e([])},[]);return{notifications:t,isOpen:n,setIsOpen:i,addNotification:r,markAsRead:s,markAllAsRead:o,deleteNotification:a,clearAll:l}},qre=t=>x.useMemo(()=>{const e=t.length,n=t.filter(r=>!r.read).length,i=t.reduce((r,s)=>(r[s.type]=(r[s.type]||0)+1,r),{});return{total:e,unread:n,byType:i}},[t]),A8=x.memo(({type:t})=>{const e=x.useMemo(()=>{switch(t){case"info":return{icon:o3,className:"text-blue-400"};case"success":return{icon:bL,className:"text-green-400"};case"warning":return{icon:VS,className:"text-yellow-400"};case"error":return{icon:VS,className:"text-red-400"};default:return{icon:o3,className:"text-blue-400"}}},[t]);return h.jsx($e,{icon:e.icon,className:ee("size-4",e.className)})});A8.displayName="NotificationIcon";const H2=x.memo(({notification:t,onMarkAsRead:e,onDelete:n})=>{const i=x.useCallback(r=>{const o=new Date().getTime()-r.getTime(),a=Math.floor(o/6e4),l=Math.floor(o/36e5),c=Math.floor(o/864e5);return c>0?`${c}d`:l>0?`${l}h`:a>0?`${a}m`:"Ahora"},[]);return h.jsx("div",{className:ee("rounded-lg border p-3 transition-colors",t.read?"border-stone-600 bg-stone-800":"border-mantis-500 bg-stone-800/80"),children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(A8,{type:t.type}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsx("h4",{className:"font-medium text-white",children:t.title}),h.jsx("button",{onClick:()=>n(t.id),className:"ml-2 rounded p-1 text-stone-400 hover:text-white transition-colors",children:h.jsx($e,{icon:Uy,size:"sm"})})]}),h.jsx("p",{className:"mt-1 text-sm text-stone-300",children:t.message}),h.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-500",children:i(t.timestamp)}),!t.read&&h.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-mantis-400 hover:text-mantis-300 transition-colors",children:"Marcar como leída"})]})]})]})})});H2.displayName="NotificationItem";const N8=x.memo(()=>{const{notifications:t,isOpen:e,setIsOpen:n,markAsRead:i,markAllAsRead:r,deleteNotification:s,clearAll:o}=Kre(),{total:a,unread:l}=qre(t),c=x.useCallback(()=>{n(f=>!f)},[n]),u=x.useMemo(()=>t.filter(f=>!f.read),[t]),d=x.useMemo(()=>t.filter(f=>f.read),[t]);return e?h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx($e,{icon:a3,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]}),h.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Notificaciones (",a,")"]}),h.jsxs("div",{className:"flex gap-2",children:[l>0&&h.jsx(kt,{variant:"ghost",size:"sm",onClick:r,className:"text-xs text-stone-400 hover:text-white",children:"Marcar todas"}),a>0&&h.jsx(kt,{variant:"ghost",size:"sm",onClick:o,className:"text-xs text-red-400 hover:text-red-300",children:"Limpiar"})]})]}),h.jsx("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:t.length===0?h.jsx("p",{className:"text-center text-sm text-stone-500",children:"No hay notificaciones"}):h.jsxs(h.Fragment,{children:[u.length>0&&h.jsx("div",{className:"space-y-2",children:u.map(f=>h.jsx(H2,{notification:f,onMarkAsRead:i,onDelete:s},f.id))}),d.length>0&&u.length>0&&h.jsx("hr",{className:"border-stone-600"}),d.length>0&&h.jsx("div",{className:"space-y-2",children:d.map(f=>h.jsx(H2,{notification:f,onMarkAsRead:i,onDelete:s},f.id))})]})})]})]}):h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx($e,{icon:a3,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]})});N8.displayName="NotificationCenter";function Uv(t,[e,n]){return Math.min(n,Math.max(e,t))}function Yre(t,e=globalThis==null?void 0:globalThis.document){const n=Vi(t);x.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var Xre="DismissableLayer",W2="dismissableLayer.update",Jre="dismissableLayer.pointerDownOutside",Zre="dismissableLayer.focusOutside",xM,P8=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Xp=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=x.useContext(P8),[u,d]=x.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=x.useState({}),m=ot(e,_=>d(_)),g=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(v),b=u?g.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,k=b>=y,C=ese(_=>{const N=_.target,M=[...c.branches].some(R=>R.contains(N));!k||M||(r==null||r(_),o==null||o(_),_.defaultPrevented||a==null||a())},f),E=tse(_=>{const N=_.target;[...c.branches].some(R=>R.contains(N))||(s==null||s(_),o==null||o(_),_.defaultPrevented||a==null||a())},f);return Yre(_=>{b===c.layers.size-1&&(i==null||i(_),!_.defaultPrevented&&a&&(_.preventDefault(),a()))},f),x.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(xM=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),SM(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=xM)}},[u,f,n,c]),x.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),SM())},[u,c]),x.useEffect(()=>{const _=()=>p({});return document.addEventListener(W2,_),()=>document.removeEventListener(W2,_)},[]),h.jsx(ze.div,{...l,ref:m,style:{pointerEvents:w?k?"auto":"none":void 0,...t.style},onFocusCapture:ve(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ve(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ve(t.onPointerDownCapture,C.onPointerDownCapture)})});Xp.displayName=Xre;var Qre="DismissableLayerBranch",M8=x.forwardRef((t,e)=>{const n=x.useContext(P8),i=x.useRef(null),r=ot(e,i);return x.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(ze.div,{...t,ref:r})});M8.displayName=Qre;function ese(t,e=globalThis==null?void 0:globalThis.document){const n=Vi(t),i=x.useRef(!1),r=x.useRef(()=>{});return x.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){T8(Jre,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function tse(t,e=globalThis==null?void 0:globalThis.document){const n=Vi(t),i=x.useRef(!1);return x.useEffect(()=>{const r=s=>{s.target&&!i.current&&T8(Zre,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function SM(){const t=new CustomEvent(W2);document.dispatchEvent(t)}function T8(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?O_(r,s):r.dispatchEvent(s)}var nse=Xp,ise=M8,w1=0;function JC(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??kM()),document.body.insertAdjacentElement("beforeend",t[1]??kM()),w1++,()=>{w1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),w1--}},[])}function kM(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var x1="focusScope.autoFocusOnMount",S1="focusScope.autoFocusOnUnmount",_M={bubbles:!1,cancelable:!0},rse="FocusScope",fb=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=x.useState(null),c=Vi(r),u=Vi(s),d=x.useRef(null),f=ot(e,g=>l(g)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(i){let g=function(w){if(p.paused||!a)return;const k=w.target;a.contains(k)?d.current=k:la(d.current,{select:!0})},v=function(w){if(p.paused||!a)return;const k=w.relatedTarget;k!==null&&(a.contains(k)||la(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const C of w)C.removedNodes.length>0&&la(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const b=new MutationObserver(y);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),b.disconnect()}}},[i,a,p.paused]),x.useEffect(()=>{if(a){EM.add(p);const g=document.activeElement;if(!a.contains(g)){const y=new CustomEvent(x1,_M);a.addEventListener(x1,c),a.dispatchEvent(y),y.defaultPrevented||(sse(use(R8(a)),{select:!0}),document.activeElement===g&&la(a))}return()=>{a.removeEventListener(x1,c),setTimeout(()=>{const y=new CustomEvent(S1,_M);a.addEventListener(S1,u),a.dispatchEvent(y),y.defaultPrevented||la(g??document.body,{select:!0}),a.removeEventListener(S1,u),EM.remove(p)},0)}}},[a,c,u,p]);const m=x.useCallback(g=>{if(!n&&!i||p.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(v&&y){const b=g.currentTarget,[w,k]=ose(b);w&&k?!g.shiftKey&&y===k?(g.preventDefault(),n&&la(w,{select:!0})):g.shiftKey&&y===w&&(g.preventDefault(),n&&la(k,{select:!0})):y===b&&g.preventDefault()}},[n,i,p.paused]);return h.jsx(ze.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});fb.displayName=rse;function sse(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(la(i,{select:e}),document.activeElement!==n)return}function ose(t){const e=R8(t),n=CM(e,t),i=CM(e.reverse(),t);return[n,i]}function R8(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function CM(t,e){for(const n of t)if(!ase(n,{upTo:e}))return n}function ase(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function lse(t){return t instanceof HTMLInputElement&&"select"in t}function la(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&lse(t)&&e&&t.select()}}var EM=cse();function cse(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=AM(t,e),t.unshift(e)},remove(e){var n;t=AM(t,e),(n=t[0])==null||n.resume()}}}function AM(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function use(t){return t.filter(e=>e.tagName!=="A")}const dse=["top","right","bottom","left"],hl=Math.min,ir=Math.max,Vv=Math.round,hg=Math.floor,Zs=t=>({x:t,y:t}),fse={left:"right",right:"left",bottom:"top",top:"bottom"},hse={start:"end",end:"start"};function G2(t,e,n){return ir(t,hl(e,n))}function Ho(t,e){return typeof t=="function"?t(e):t}function Wo(t){return t.split("-")[0]}function Ud(t){return t.split("-")[1]}function ZC(t){return t==="x"?"y":"x"}function QC(t){return t==="y"?"height":"width"}const pse=new Set(["top","bottom"]);function Vs(t){return pse.has(Wo(t))?"y":"x"}function eE(t){return ZC(Vs(t))}function mse(t,e,n){n===void 0&&(n=!1);const i=Ud(t),r=eE(t),s=QC(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Hv(o)),[o,Hv(o)]}function gse(t){const e=Hv(t);return[K2(t),e,K2(e)]}function K2(t){return t.replace(/start|end/g,e=>hse[e])}const NM=["left","right"],PM=["right","left"],vse=["top","bottom"],yse=["bottom","top"];function bse(t,e,n){switch(t){case"top":case"bottom":return n?e?PM:NM:e?NM:PM;case"left":case"right":return e?vse:yse;default:return[]}}function wse(t,e,n,i){const r=Ud(t);let s=bse(Wo(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(K2)))),s}function Hv(t){return t.replace(/left|right|bottom|top/g,e=>fse[e])}function xse(t){return{top:0,right:0,bottom:0,left:0,...t}}function O8(t){return typeof t!="number"?xse(t):{top:t,right:t,bottom:t,left:t}}function Wv(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function MM(t,e,n){let{reference:i,floating:r}=t;const s=Vs(e),o=eE(e),a=QC(o),l=Wo(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(Ud(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const Sse=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=MM(c,i,l),f=i,p={},m=0;for(let g=0;g<a.length;g++){const{name:v,fn:y}=a[g],{x:b,y:w,data:k,reset:C}=await y({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=b??u,d=w??d,p={...p,[v]:{...p[v],...k}},C&&m<=50&&(m++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(c=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):C.rects),{x:u,y:d}=MM(c,f,l)),g=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:p}};async function wp(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Ho(e,t),m=O8(p),v=a[f?d==="floating"?"reference":"floating":d],y=Wv(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),b=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},C=Wv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:l}):b);return{top:(y.top-C.top+m.top)/k.y,bottom:(C.bottom-y.bottom+m.bottom)/k.y,left:(y.left-C.left+m.left)/k.x,right:(C.right-y.right+m.right)/k.x}}const kse=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Ho(t,e)||{};if(c==null)return{};const d=O8(u),f={x:n,y:i},p=eE(r),m=QC(p),g=await o.getDimensions(c),v=p==="y",y=v?"top":"left",b=v?"bottom":"right",w=v?"clientHeight":"clientWidth",k=s.reference[m]+s.reference[p]-f[p]-s.floating[m],C=f[p]-s.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let _=E?E[w]:0;(!_||!await(o.isElement==null?void 0:o.isElement(E)))&&(_=a.floating[w]||s.floating[m]);const N=k/2-C/2,M=_/2-g[m]/2-1,R=hl(d[y],M),I=hl(d[b],M),D=R,K=_-g[m]-I,B=_/2-g[m]/2+N,W=G2(D,B,K),Y=!l.arrow&&Ud(r)!=null&&B!==W&&s.reference[m]/2-(B<D?R:I)-g[m]/2<0,te=Y?B<D?B-D:B-K:0;return{[p]:f[p]+te,data:{[p]:W,centerOffset:B-W-te,...Y&&{alignmentOffset:te}},reset:Y}}}),_se=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...v}=Ho(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Wo(r),b=Vs(a),w=Wo(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=f||(w||!g?[Hv(a)]:gse(a)),E=m!=="none";!f&&E&&C.push(...wse(a,g,m,k));const _=[a,...C],N=await wp(e,v),M=[];let R=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&M.push(N[y]),d){const B=mse(r,o,k);M.push(N[B[0]],N[B[1]])}if(R=[...R,{placement:r,overflows:M}],!M.every(B=>B<=0)){var I,D;const B=(((I=s.flip)==null?void 0:I.index)||0)+1,W=_[B];if(W&&(!(d==="alignment"?b!==Vs(W):!1)||R.every(V=>V.overflows[0]>0&&Vs(V.placement)===b)))return{data:{index:B,overflows:R},reset:{placement:W}};let Y=(D=R.filter(te=>te.overflows[0]<=0).sort((te,V)=>te.overflows[1]-V.overflows[1])[0])==null?void 0:D.placement;if(!Y)switch(p){case"bestFit":{var K;const te=(K=R.filter(V=>{if(E){const $=Vs(V.placement);return $===b||$==="y"}return!0}).map(V=>[V.placement,V.overflows.filter($=>$>0).reduce(($,ie)=>$+ie,0)]).sort((V,$)=>V[1]-$[1])[0])==null?void 0:K[0];te&&(Y=te);break}case"initialPlacement":Y=a;break}if(r!==Y)return{reset:{placement:Y}}}return{}}}};function TM(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function RM(t){return dse.some(e=>t[e]>=0)}const Cse=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=Ho(t,e);switch(i){case"referenceHidden":{const s=await wp(e,{...r,elementContext:"reference"}),o=TM(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:RM(o)}}}case"escaped":{const s=await wp(e,{...r,altBoundary:!0}),o=TM(s,n.floating);return{data:{escapedOffsets:o,escaped:RM(o)}}}default:return{}}}}},I8=new Set(["left","top"]);async function Ese(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=Wo(n),a=Ud(n),l=Vs(n)==="y",c=I8.has(o)?-1:1,u=s&&l?-1:1,d=Ho(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const Ase=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await Ese(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Nse=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:b}=v;return{x:y,y:b}}},...l}=Ho(t,e),c={x:n,y:i},u=await wp(e,l),d=Vs(Wo(r)),f=ZC(d);let p=c[f],m=c[d];if(s){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=p+u[v],w=p-u[y];p=G2(b,p,w)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=m+u[v],w=m-u[y];m=G2(b,m,w)}const g=a.fn({...e,[f]:p,[d]:m});return{...g,data:{x:g.x-n,y:g.y-i,enabled:{[f]:s,[d]:o}}}}}},Pse=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ho(t,e),u={x:n,y:i},d=Vs(r),f=ZC(d);let p=u[f],m=u[d];const g=Ho(a,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=f==="y"?"height":"width",k=s.reference[f]-s.floating[w]+v.mainAxis,C=s.reference[f]+s.reference[w]-v.mainAxis;p<k?p=k:p>C&&(p=C)}if(c){var y,b;const w=f==="y"?"width":"height",k=I8.has(Wo(r)),C=s.reference[d]-s.floating[w]+(k&&((y=o.offset)==null?void 0:y[d])||0)+(k?0:v.crossAxis),E=s.reference[d]+s.reference[w]+(k?0:((b=o.offset)==null?void 0:b[d])||0)-(k?v.crossAxis:0);m<C?m=C:m>E&&(m=E)}return{[f]:p,[d]:m}}}},Mse=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ho(t,e),u=await wp(e,c),d=Wo(r),f=Ud(r),p=Vs(r)==="y",{width:m,height:g}=s.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,v=f==="end"?"top":"bottom");const b=g-u.top-u.bottom,w=m-u.left-u.right,k=hl(g-u[v],b),C=hl(m-u[y],w),E=!e.middlewareData.shift;let _=k,N=C;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=w),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(_=b),E&&!f){const R=ir(u.left,0),I=ir(u.right,0),D=ir(u.top,0),K=ir(u.bottom,0);p?N=m-2*(R!==0||I!==0?R+I:ir(u.left,u.right)):_=g-2*(D!==0||K!==0?D+K:ir(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:_});const M=await o.getDimensions(a.floating);return m!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function hb(){return typeof window<"u"}function Vd(t){return D8(t)?(t.nodeName||"").toLowerCase():"#document"}function dr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function so(t){var e;return(e=(D8(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function D8(t){return hb()?t instanceof Node||t instanceof dr(t).Node:!1}function ps(t){return hb()?t instanceof Element||t instanceof dr(t).Element:!1}function io(t){return hb()?t instanceof HTMLElement||t instanceof dr(t).HTMLElement:!1}function OM(t){return!hb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof dr(t).ShadowRoot}const Tse=new Set(["inline","contents"]);function Jp(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=ms(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!Tse.has(r)}const Rse=new Set(["table","td","th"]);function Ose(t){return Rse.has(Vd(t))}const Ise=[":popover-open",":modal"];function pb(t){return Ise.some(e=>{try{return t.matches(e)}catch{return!1}})}const Dse=["transform","translate","scale","rotate","perspective"],Lse=["transform","translate","scale","rotate","perspective","filter"],jse=["paint","layout","strict","content"];function tE(t){const e=nE(),n=ps(t)?ms(t):t;return Dse.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Lse.some(i=>(n.willChange||"").includes(i))||jse.some(i=>(n.contain||"").includes(i))}function $se(t){let e=pl(t);for(;io(e)&&!Md(e);){if(tE(e))return e;if(pb(e))return null;e=pl(e)}return null}function nE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Fse=new Set(["html","body","#document"]);function Md(t){return Fse.has(Vd(t))}function ms(t){return dr(t).getComputedStyle(t)}function mb(t){return ps(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function pl(t){if(Vd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||OM(t)&&t.host||so(t);return OM(e)?e.host:e}function L8(t){const e=pl(t);return Md(e)?t.ownerDocument?t.ownerDocument.body:t.body:io(e)&&Jp(e)?e:L8(e)}function xp(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=L8(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=dr(r);if(s){const a=q2(o);return e.concat(o,o.visualViewport||[],Jp(r)?r:[],a&&n?xp(a):[])}return e.concat(r,xp(r,[],n))}function q2(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function j8(t){const e=ms(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=io(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=Vv(n)!==s||Vv(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function iE(t){return ps(t)?t:t.contextElement}function qu(t){const e=iE(t);if(!io(e))return Zs(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=j8(e);let o=(s?Vv(n.width):n.width)/i,a=(s?Vv(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Bse=Zs(0);function $8(t){const e=dr(t);return!nE()||!e.visualViewport?Bse:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function zse(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==dr(t)?!1:e}function Dc(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=iE(t);let o=Zs(1);e&&(i?ps(i)&&(o=qu(i)):o=qu(t));const a=zse(s,n,i)?$8(s):Zs(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=dr(s),p=i&&ps(i)?dr(i):i;let m=f,g=q2(m);for(;g&&i&&p!==m;){const v=qu(g),y=g.getBoundingClientRect(),b=ms(g),w=y.left+(g.clientLeft+parseFloat(b.paddingLeft))*v.x,k=y.top+(g.clientTop+parseFloat(b.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=w,c+=k,m=dr(g),g=q2(m)}}return Wv({width:u,height:d,x:l,y:c})}function rE(t,e){const n=mb(t).scrollLeft;return e?e.left+n:Dc(so(t)).left+n}function F8(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:rE(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function Use(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=so(i),a=e?pb(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Zs(1);const u=Zs(0),d=io(i);if((d||!d&&!s)&&((Vd(i)!=="body"||Jp(o))&&(l=mb(i)),io(i))){const p=Dc(i);c=qu(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const f=o&&!d&&!s?F8(o,l,!0):Zs(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Vse(t){return Array.from(t.getClientRects())}function Hse(t){const e=so(t),n=mb(t),i=t.ownerDocument.body,r=ir(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=ir(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+rE(t);const a=-n.scrollTop;return ms(i).direction==="rtl"&&(o+=ir(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Wse(t,e){const n=dr(t),i=so(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=nE();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}const Gse=new Set(["absolute","fixed"]);function Kse(t,e){const n=Dc(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=io(t)?qu(t):Zs(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function IM(t,e,n){let i;if(e==="viewport")i=Wse(t,n);else if(e==="document")i=Hse(so(t));else if(ps(e))i=Kse(e,n);else{const r=$8(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Wv(i)}function B8(t,e){const n=pl(t);return n===e||!ps(n)||Md(n)?!1:ms(n).position==="fixed"||B8(n,e)}function qse(t,e){const n=e.get(t);if(n)return n;let i=xp(t,[],!1).filter(a=>ps(a)&&Vd(a)!=="body"),r=null;const s=ms(t).position==="fixed";let o=s?pl(t):t;for(;ps(o)&&!Md(o);){const a=ms(o),l=tE(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&Gse.has(r.position)||Jp(o)&&!l&&B8(t,o))?i=i.filter(u=>u!==o):r=a,o=pl(o)}return e.set(t,i),i}function Yse(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?pb(e)?[]:qse(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=IM(e,u,r);return c.top=ir(d.top,c.top),c.right=hl(d.right,c.right),c.bottom=hl(d.bottom,c.bottom),c.left=ir(d.left,c.left),c},IM(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Xse(t){const{width:e,height:n}=j8(t);return{width:e,height:n}}function Jse(t,e,n){const i=io(e),r=so(e),s=n==="fixed",o=Dc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Zs(0);function c(){l.x=rE(r)}if(i||!i&&!s)if((Vd(e)!=="body"||Jp(r))&&(a=mb(e)),i){const p=Dc(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=r&&!i&&!s?F8(r,a):Zs(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function k1(t){return ms(t).position==="static"}function DM(t,e){if(!io(t)||ms(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return so(t)===n&&(n=n.ownerDocument.body),n}function z8(t,e){const n=dr(t);if(pb(t))return n;if(!io(t)){let r=pl(t);for(;r&&!Md(r);){if(ps(r)&&!k1(r))return r;r=pl(r)}return n}let i=DM(t,e);for(;i&&Ose(i)&&k1(i);)i=DM(i,e);return i&&Md(i)&&k1(i)&&!tE(i)?n:i||$se(t)||n}const Zse=async function(t){const e=this.getOffsetParent||z8,n=this.getDimensions,i=await n(t.floating);return{reference:Jse(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Qse(t){return ms(t).direction==="rtl"}const eoe={convertOffsetParentRelativeRectToViewportRelativeRect:Use,getDocumentElement:so,getClippingRect:Yse,getOffsetParent:z8,getElementRects:Zse,getClientRects:Vse,getDimensions:Xse,getScale:qu,isElement:ps,isRTL:Qse};function U8(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function toe(t,e){let n=null,i;const r=so(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||e(),!f||!p)return;const m=hg(d),g=hg(r.clientWidth-(u+f)),v=hg(r.clientHeight-(d+p)),y=hg(u),w={rootMargin:-m+"px "+-g+"px "+-v+"px "+-y+"px",threshold:ir(0,hl(1,l))||1};let k=!0;function C(E){const _=E[0].intersectionRatio;if(_!==l){if(!k)return o();_?o(!1,_):i=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!U8(c,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(C,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(C,w)}n.observe(t)}return o(!0),s}function noe(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=iE(t),u=r||s?[...c?xp(c):[],...xp(e)]:[];u.forEach(y=>{r&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?toe(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[b]=y;b&&b.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let m,g=l?Dc(t):null;l&&v();function v(){const y=Dc(t);g&&!U8(g,y)&&n(),g=y,m=requestAnimationFrame(v)}return n(),()=>{var y;u.forEach(b=>{r&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const ioe=Ase,roe=Nse,soe=_se,ooe=Mse,aoe=Cse,LM=kse,loe=Pse,coe=(t,e,n)=>{const i=new Map,r={platform:eoe,...n},s={...r.platform,_c:i};return Sse(t,e,{...r,platform:s})};var uoe=typeof document<"u",doe=function(){},w0=uoe?x.useLayoutEffect:doe;function Gv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Gv(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!Gv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function V8(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function jM(t,e){const n=V8(t);return Math.round(e*n)/n}function _1(t){const e=x.useRef(t);return w0(()=>{e.current=t}),e}function foe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=x.useState(i);Gv(f,i)||p(i);const[m,g]=x.useState(null),[v,y]=x.useState(null),b=x.useCallback(V=>{V!==E.current&&(E.current=V,g(V))},[]),w=x.useCallback(V=>{V!==_.current&&(_.current=V,y(V))},[]),k=s||m,C=o||v,E=x.useRef(null),_=x.useRef(null),N=x.useRef(u),M=l!=null,R=_1(l),I=_1(r),D=_1(c),K=x.useCallback(()=>{if(!E.current||!_.current)return;const V={placement:e,strategy:n,middleware:f};I.current&&(V.platform=I.current),coe(E.current,_.current,V).then($=>{const ie={...$,isPositioned:D.current!==!1};B.current&&!Gv(N.current,ie)&&(N.current=ie,xl.flushSync(()=>{d(ie)}))})},[f,e,n,I,D]);w0(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(V=>({...V,isPositioned:!1})))},[c]);const B=x.useRef(!1);w0(()=>(B.current=!0,()=>{B.current=!1}),[]),w0(()=>{if(k&&(E.current=k),C&&(_.current=C),k&&C){if(R.current)return R.current(k,C,K);K()}},[k,C,K,R,M]);const W=x.useMemo(()=>({reference:E,floating:_,setReference:b,setFloating:w}),[b,w]),Y=x.useMemo(()=>({reference:k,floating:C}),[k,C]),te=x.useMemo(()=>{const V={position:n,left:0,top:0};if(!Y.floating)return V;const $=jM(Y.floating,u.x),ie=jM(Y.floating,u.y);return a?{...V,transform:"translate("+$+"px, "+ie+"px)",...V8(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:ie}},[n,a,Y.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:K,refs:W,elements:Y,floatingStyles:te}),[u,K,W,Y,te])}const hoe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?LM({element:i.current,padding:r}).fn(n):{}:i?LM({element:i,padding:r}).fn(n):{}}}},poe=(t,e)=>({...ioe(t),options:[t,e]}),moe=(t,e)=>({...roe(t),options:[t,e]}),goe=(t,e)=>({...loe(t),options:[t,e]}),voe=(t,e)=>({...soe(t),options:[t,e]}),yoe=(t,e)=>({...ooe(t),options:[t,e]}),boe=(t,e)=>({...aoe(t),options:[t,e]}),woe=(t,e)=>({...hoe(t),options:[t,e]});var xoe="Arrow",H8=x.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return h.jsx(ze.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});H8.displayName=xoe;var Soe=H8;function sE(t){const[e,n]=x.useState(void 0);return Kn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var oE="Popper",[W8,Hd]=gs(oE),[koe,G8]=W8(oE),K8=t=>{const{__scopePopper:e,children:n}=t,[i,r]=x.useState(null);return h.jsx(koe,{scope:e,anchor:i,onAnchorChange:r,children:n})};K8.displayName=oE;var q8="PopperAnchor",Y8=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=G8(q8,n),o=x.useRef(null),a=ot(e,o);return x.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:h.jsx(ze.div,{...r,ref:a})});Y8.displayName=q8;var aE="PopperContent",[_oe,Coe]=W8(aE),X8=x.forwardRef((t,e)=>{var S,P,O,T,q,H;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=t,v=G8(aE,n),[y,b]=x.useState(null),w=ot(e,ne=>b(ne)),[k,C]=x.useState(null),E=sE(k),_=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,M=i+(s!=="center"?"-"+s:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},I=Array.isArray(c)?c:[c],D=I.length>0,K={padding:R,boundary:I.filter(Aoe),altBoundary:D},{refs:B,floatingStyles:W,placement:Y,isPositioned:te,middlewareData:V}=foe({strategy:"fixed",placement:M,whileElementsMounted:(...ne)=>noe(...ne,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[poe({mainAxis:r+N,alignmentAxis:o}),l&&moe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?goe():void 0,...K}),l&&voe({...K}),yoe({...K,apply:({elements:ne,rects:J,availableWidth:Pe,availableHeight:Le})=>{const{width:Fe,height:De}=J.reference,We=ne.floating.style;We.setProperty("--radix-popper-available-width",`${Pe}px`),We.setProperty("--radix-popper-available-height",`${Le}px`),We.setProperty("--radix-popper-anchor-width",`${Fe}px`),We.setProperty("--radix-popper-anchor-height",`${De}px`)}}),k&&woe({element:k,padding:a}),Noe({arrowWidth:_,arrowHeight:N}),f&&boe({strategy:"referenceHidden",...K})]}),[$,ie]=Q8(Y),ke=Vi(m);Kn(()=>{te&&(ke==null||ke())},[te,ke]);const Z=(S=V.arrow)==null?void 0:S.x,le=(P=V.arrow)==null?void 0:P.y,j=((O=V.arrow)==null?void 0:O.centerOffset)!==0,[L,U]=x.useState();return Kn(()=>{y&&U(window.getComputedStyle(y).zIndex)},[y]),h.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:te?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:L,"--radix-popper-transform-origin":[(T=V.transformOrigin)==null?void 0:T.x,(q=V.transformOrigin)==null?void 0:q.y].join(" "),...((H=V.hide)==null?void 0:H.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(_oe,{scope:n,placedSide:$,onArrowChange:C,arrowX:Z,arrowY:le,shouldHideArrow:j,children:h.jsx(ze.div,{"data-side":$,"data-align":ie,...g,ref:w,style:{...g.style,animation:te?void 0:"none"}})})})});X8.displayName=aE;var J8="PopperArrow",Eoe={top:"bottom",right:"left",bottom:"top",left:"right"},Z8=x.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=Coe(J8,i),o=Eoe[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(Soe,{...r,ref:n,style:{...r.style,display:"block"}})})});Z8.displayName=J8;function Aoe(t){return t!==null}var Noe=t=>({name:"transformOrigin",options:t,fn(e){var v,y,b;const{placement:n,rects:i,middlewareData:r}=e,o=((v=r.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=Q8(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=r.arrow)==null?void 0:y.x)??0)+a/2,p=(((b=r.arrow)==null?void 0:b.y)??0)+l/2;let m="",g="";return c==="bottom"?(m=o?d:`${f}px`,g=`${-l}px`):c==="top"?(m=o?d:`${f}px`,g=`${i.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=o?d:`${p}px`):c==="left"&&(m=`${i.floating.width+l}px`,g=o?d:`${p}px`),{data:{x:m,y:g}}}});function Q8(t){const[e,n="center"]=t.split("-");return[e,n]}var lE=K8,gb=Y8,cE=X8,uE=Z8,Poe="Portal",Zp=x.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=x.useState(!1);Kn(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?DW.createPortal(h.jsx(ze.div,{...i,ref:e}),o):null});Zp.displayName=Poe;function dE(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var e$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Moe="VisuallyHidden",fE=x.forwardRef((t,e)=>h.jsx(ze.span,{...t,ref:e,style:{...e$,...t.style}}));fE.displayName=Moe;var Toe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},tu=new WeakMap,pg=new WeakMap,mg={},C1=0,t$=function(t){return t&&(t.host||t$(t.parentNode))},Roe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=t$(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Ooe=function(t,e,n,i){var r=Roe(e,Array.isArray(t)?t:[t]);mg[n]||(mg[n]=new WeakMap);var s=mg[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),m=p!==null&&p!=="false",g=(tu.get(f)||0)+1,v=(s.get(f)||0)+1;tu.set(f,g),s.set(f,v),o.push(f),g===1&&m&&pg.set(f,!0),v===1&&f.setAttribute(n,"true"),m||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),C1++,function(){o.forEach(function(d){var f=tu.get(d)-1,p=s.get(d)-1;tu.set(d,f),s.set(d,p),f||(pg.has(d)||d.removeAttribute(i),pg.delete(d)),p||d.removeAttribute(n)}),C1--,C1||(tu=new WeakMap,tu=new WeakMap,pg=new WeakMap,mg={})}},n$=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=Toe(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),Ooe(i,r,n,"aria-hidden")):function(){return null}},x0="right-scroll-bar-position",S0="width-before-scroll-bar",Ioe="with-scroll-bars-hidden",Doe="--removed-body-scroll-bar-size";function E1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Loe(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var joe=typeof window<"u"?x.useLayoutEffect:x.useEffect,$M=new WeakMap;function $oe(t,e){var n=Loe(null,function(i){return t.forEach(function(r){return E1(r,i)})});return joe(function(){var i=$M.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||E1(a,null)}),s.forEach(function(a){r.has(a)||E1(a,o)})}$M.set(n,t)},[t]),n}function Foe(t){return t}function Boe(t,e){e===void 0&&(e=Foe);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function zoe(t){t===void 0&&(t={});var e=Boe(null);return e.options=Ds({async:!0,ssr:!1},t),e}var i$=function(t){var e=t.sideCar,n=CD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return x.createElement(i,Ds({},n))};i$.isSideCarExport=!0;function Uoe(t,e){return t.useMedium(e),i$}var r$=zoe(),A1=function(){},vb=x.forwardRef(function(t,e){var n=x.useRef(null),i=x.useState({onScrollCapture:A1,onWheelCapture:A1,onTouchMoveCapture:A1}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noRelative,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,y=t.as,b=y===void 0?"div":y,w=t.gapMode,k=CD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=f,E=$oe([n,e]),_=Ds(Ds({},k),r);return x.createElement(x.Fragment,null,u&&x.createElement(C,{sideCar:r$,removeScrollBar:c,shards:d,noRelative:p,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:w}),o?x.cloneElement(x.Children.only(a),Ds(Ds({},_),{ref:E})):x.createElement(b,Ds({},_,{className:l,ref:E}),a))});vb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vb.classNames={fullWidth:S0,zeroRight:x0};var Voe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Hoe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Voe();return e&&t.setAttribute("nonce",e),t}function Woe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Goe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Koe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Hoe())&&(Woe(e,n),Goe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},qoe=function(){var t=Koe();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},s$=function(){var t=qoe(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},Yoe={left:0,top:0,right:0,gap:0},N1=function(t){return parseInt(t||"",10)||0},Xoe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[N1(n),N1(i),N1(r)]},Joe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Yoe;var e=Xoe(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},Zoe=s$(),Yu="data-scroll-locked",Qoe=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Ioe,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Yu,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(x0,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(S0,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(x0," .").concat(x0,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(S0," .").concat(S0,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Yu,`] {
    `).concat(Doe,": ").concat(a,`px;
  }
`)},FM=function(){var t=parseInt(document.body.getAttribute(Yu)||"0",10);return isFinite(t)?t:0},eae=function(){x.useEffect(function(){return document.body.setAttribute(Yu,(FM()+1).toString()),function(){var t=FM()-1;t<=0?document.body.removeAttribute(Yu):document.body.setAttribute(Yu,t.toString())}},[])},tae=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;eae();var s=x.useMemo(function(){return Joe(r)},[r]);return x.createElement(Zoe,{styles:Qoe(s,!e,r,n?"":"!important")})},Y2=!1;if(typeof window<"u")try{var gg=Object.defineProperty({},"passive",{get:function(){return Y2=!0,!0}});window.addEventListener("test",gg,gg),window.removeEventListener("test",gg,gg)}catch{Y2=!1}var nu=Y2?{passive:!1}:!1,nae=function(t){return t.tagName==="TEXTAREA"},o$=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!nae(t)&&n[e]==="visible")},iae=function(t){return o$(t,"overflowY")},rae=function(t){return o$(t,"overflowX")},BM=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=a$(t,i);if(r){var s=l$(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},sae=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},oae=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},a$=function(t,e){return t==="v"?iae(e):rae(e)},l$=function(t,e){return t==="v"?sae(e):oae(e)},aae=function(t,e){return t==="h"&&e==="rtl"?-1:1},lae=function(t,e,n,i,r){var s=aae(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var p=l$(t,a),m=p[0],g=p[1],v=p[2],y=g-v-s*m;(m||y)&&a$(t,a)&&(d+=y,f+=m);var b=a.parentNode;a=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},vg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},zM=function(t){return[t.deltaX,t.deltaY]},UM=function(t){return t&&"current"in t?t.current:t},cae=function(t,e){return t[0]===e[0]&&t[1]===e[1]},uae=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},dae=0,iu=[];function fae(t){var e=x.useRef([]),n=x.useRef([0,0]),i=x.useRef(),r=x.useState(dae++)[0],s=x.useState(s$)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var g=UG([t.lockRef.current],(t.shards||[]).map(UM),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var y=vg(g),b=n.current,w="deltaX"in g?g.deltaX:b[0]-y[0],k="deltaY"in g?g.deltaY:b[1]-y[1],C,E=g.target,_=Math.abs(w)>Math.abs(k)?"h":"v";if("touches"in g&&_==="h"&&E.type==="range")return!1;var N=BM(_,E);if(!N)return!0;if(N?C=_:(C=_==="v"?"h":"v",N=BM(_,E)),!N)return!1;if(!i.current&&"changedTouches"in g&&(w||k)&&(i.current=C),!C)return!0;var M=i.current||C;return lae(M,v,g,M==="h"?w:k)},[]),l=x.useCallback(function(g){var v=g;if(!(!iu.length||iu[iu.length-1]!==s)){var y="deltaY"in v?zM(v):vg(v),b=e.current.filter(function(C){return C.name===v.type&&(C.target===v.target||v.target===C.shadowParent)&&cae(C.delta,y)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(UM).filter(Boolean).filter(function(C){return C.contains(v.target)}),k=w.length>0?a(v,w[0]):!o.current.noIsolation;k&&v.cancelable&&v.preventDefault()}}},[]),c=x.useCallback(function(g,v,y,b){var w={name:g,delta:v,target:y,should:b,shadowParent:hae(y)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(k){return k!==w})},1)},[]),u=x.useCallback(function(g){n.current=vg(g),i.current=void 0},[]),d=x.useCallback(function(g){c(g.type,zM(g),g.target,a(g,t.lockRef.current))},[]),f=x.useCallback(function(g){c(g.type,vg(g),g.target,a(g,t.lockRef.current))},[]);x.useEffect(function(){return iu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,nu),document.addEventListener("touchmove",l,nu),document.addEventListener("touchstart",u,nu),function(){iu=iu.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,nu),document.removeEventListener("touchmove",l,nu),document.removeEventListener("touchstart",u,nu)}},[]);var p=t.removeScrollBar,m=t.inert;return x.createElement(x.Fragment,null,m?x.createElement(s,{styles:uae(r)}):null,p?x.createElement(tae,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function hae(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const pae=Uoe(r$,fae);var yb=x.forwardRef(function(t,e){return x.createElement(vb,Ds({},t,{ref:e,sideCar:pae}))});yb.classNames=vb.classNames;var mae=[" ","Enter","ArrowUp","ArrowDown"],gae=[" ","Enter"],Lc="Select",[bb,wb,vae]=Ip(Lc),[Wd,Sge]=gs(Lc,[vae,Hd]),xb=Hd(),[yae,_l]=Wd(Lc),[bae,wae]=Wd(Lc),c$=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:m}=t,g=xb(e),[v,y]=x.useState(null),[b,w]=x.useState(null),[k,C]=x.useState(!1),E=Dp(c),[_,N]=Fo({prop:i,defaultProp:r??!1,onChange:s,caller:Lc}),[M,R]=Fo({prop:o,defaultProp:a,onChange:l,caller:Lc}),I=x.useRef(null),D=v?m||!!v.closest("form"):!0,[K,B]=x.useState(new Set),W=Array.from(K).map(Y=>Y.props.value).join(";");return h.jsx(lE,{...g,children:h.jsxs(yae,{required:p,scope:e,trigger:v,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:k,onValueNodeHasChildrenChange:C,contentId:tl(),value:M,onValueChange:R,open:_,onOpenChange:N,dir:E,triggerPointerDownPosRef:I,disabled:f,children:[h.jsx(bb.Provider,{scope:e,children:h.jsx(bae,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(Y=>{B(te=>new Set(te).add(Y))},[]),onNativeOptionRemove:x.useCallback(Y=>{B(te=>{const V=new Set(te);return V.delete(Y),V})},[]),children:n})}),D?h.jsxs(N$,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:M,onChange:Y=>R(Y.target.value),disabled:f,form:m,children:[M===void 0?h.jsx("option",{value:""}):null,Array.from(K)]},W):null]})})};c$.displayName=Lc;var u$="SelectTrigger",d$=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=xb(n),o=_l(u$,n),a=o.disabled||i,l=ot(e,o.onTriggerChange),c=wb(n),u=x.useRef("touch"),[d,f,p]=M$(g=>{const v=c().filter(w=>!w.disabled),y=v.find(w=>w.value===o.value),b=T$(v,g,y);b!==void 0&&o.onValueChange(b.value)}),m=g=>{a||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return h.jsx(gb,{asChild:!0,...s,children:h.jsx(ze.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":P$(o.value)?"":void 0,...r,ref:l,onClick:ve(r.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&m(g)}),onPointerDown:ve(r.onPointerDown,g=>{u.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:ve(r.onKeyDown,g=>{const v=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(v&&g.key===" ")&&mae.includes(g.key)&&(m(),g.preventDefault())})})})});d$.displayName=u$;var f$="SelectValue",h$=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=_l(f$,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=ot(e,l.onValueNodeChange);return Kn(()=>{c(u)},[c,u]),h.jsx(ze.span,{...a,ref:d,style:{pointerEvents:"none"},children:P$(l.value)?h.jsx(h.Fragment,{children:o}):s})});h$.displayName=f$;var xae="SelectIcon",p$=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return h.jsx(ze.span,{"aria-hidden":!0,...r,ref:e,children:i||"▼"})});p$.displayName=xae;var Sae="SelectPortal",m$=t=>h.jsx(Zp,{asChild:!0,...t});m$.displayName=Sae;var jc="SelectContent",g$=x.forwardRef((t,e)=>{const n=_l(jc,t.__scopeSelect),[i,r]=x.useState();if(Kn(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?xl.createPortal(h.jsx(v$,{scope:t.__scopeSelect,children:h.jsx(bb.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(y$,{...t,ref:e})});g$.displayName=jc;var qr=10,[v$,Cl]=Wd(jc),kae="SelectContentImpl",_ae=gd("SelectContent.RemoveScroll"),y$=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:v,...y}=t,b=_l(jc,n),[w,k]=x.useState(null),[C,E]=x.useState(null),_=ot(e,S=>k(S)),[N,M]=x.useState(null),[R,I]=x.useState(null),D=wb(n),[K,B]=x.useState(!1),W=x.useRef(!1);x.useEffect(()=>{if(w)return n$(w)},[w]),JC();const Y=x.useCallback(S=>{const[P,...O]=D().map(H=>H.ref.current),[T]=O.slice(-1),q=document.activeElement;for(const H of S)if(H===q||(H==null||H.scrollIntoView({block:"nearest"}),H===P&&C&&(C.scrollTop=0),H===T&&C&&(C.scrollTop=C.scrollHeight),H==null||H.focus(),document.activeElement!==q))return},[D,C]),te=x.useCallback(()=>Y([N,w]),[Y,N,w]);x.useEffect(()=>{K&&te()},[K,te]);const{onOpenChange:V,triggerPointerDownPosRef:$}=b;x.useEffect(()=>{if(w){let S={x:0,y:0};const P=T=>{var q,H;S={x:Math.abs(Math.round(T.pageX)-(((q=$.current)==null?void 0:q.x)??0)),y:Math.abs(Math.round(T.pageY)-(((H=$.current)==null?void 0:H.y)??0))}},O=T=>{S.x<=10&&S.y<=10?T.preventDefault():w.contains(T.target)||V(!1),document.removeEventListener("pointermove",P),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",O,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",O,{capture:!0})}}},[w,V,$]),x.useEffect(()=>{const S=()=>V(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[V]);const[ie,ke]=M$(S=>{const P=D().filter(q=>!q.disabled),O=P.find(q=>q.ref.current===document.activeElement),T=T$(P,S,O);T&&setTimeout(()=>T.ref.current.focus())}),Z=x.useCallback((S,P,O)=>{const T=!W.current&&!O;(b.value!==void 0&&b.value===P||T)&&(M(S),T&&(W.current=!0))},[b.value]),le=x.useCallback(()=>w==null?void 0:w.focus(),[w]),j=x.useCallback((S,P,O)=>{const T=!W.current&&!O;(b.value!==void 0&&b.value===P||T)&&I(S)},[b.value]),L=i==="popper"?X2:b$,U=L===X2?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:v}:{};return h.jsx(v$,{scope:n,content:w,viewport:C,onViewportChange:E,itemRefCallback:Z,selectedItem:N,onItemLeave:le,itemTextRefCallback:j,focusSelectedItem:te,selectedItemText:R,position:i,isPositioned:K,searchRef:ie,children:h.jsx(yb,{as:_ae,allowPinchZoom:!0,children:h.jsx(fb,{asChild:!0,trapped:b.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:ve(r,S=>{var P;(P=b.trigger)==null||P.focus({preventScroll:!0}),S.preventDefault()}),children:h.jsx(Xp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:h.jsx(L,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:S=>S.preventDefault(),...y,...U,onPlaced:()=>B(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ve(y.onKeyDown,S=>{const P=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!P&&S.key.length===1&&ke(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let T=D().filter(q=>!q.disabled).map(q=>q.ref.current);if(["ArrowUp","End"].includes(S.key)&&(T=T.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const q=S.target,H=T.indexOf(q);T=T.slice(H+1)}setTimeout(()=>Y(T)),S.preventDefault()}})})})})})})});y$.displayName=kae;var Cae="SelectItemAlignedPosition",b$=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=_l(jc,n),o=Cl(jc,n),[a,l]=x.useState(null),[c,u]=x.useState(null),d=ot(e,_=>u(_)),f=wb(n),p=x.useRef(!1),m=x.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:y,focusSelectedItem:b}=o,w=x.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&g&&v&&y){const _=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),M=s.valueNode.getBoundingClientRect(),R=y.getBoundingClientRect();if(s.dir!=="rtl"){const q=R.left-N.left,H=M.left-q,ne=_.left-H,J=_.width+ne,Pe=Math.max(J,N.width),Le=window.innerWidth-qr,Fe=Uv(H,[qr,Math.max(qr,Le-Pe)]);a.style.minWidth=J+"px",a.style.left=Fe+"px"}else{const q=N.right-R.right,H=window.innerWidth-M.right-q,ne=window.innerWidth-_.right-H,J=_.width+ne,Pe=Math.max(J,N.width),Le=window.innerWidth-qr,Fe=Uv(H,[qr,Math.max(qr,Le-Pe)]);a.style.minWidth=J+"px",a.style.right=Fe+"px"}const I=f(),D=window.innerHeight-qr*2,K=g.scrollHeight,B=window.getComputedStyle(c),W=parseInt(B.borderTopWidth,10),Y=parseInt(B.paddingTop,10),te=parseInt(B.borderBottomWidth,10),V=parseInt(B.paddingBottom,10),$=W+Y+K+V+te,ie=Math.min(v.offsetHeight*5,$),ke=window.getComputedStyle(g),Z=parseInt(ke.paddingTop,10),le=parseInt(ke.paddingBottom,10),j=_.top+_.height/2-qr,L=D-j,U=v.offsetHeight/2,S=v.offsetTop+U,P=W+Y+S,O=$-P;if(P<=j){const q=I.length>0&&v===I[I.length-1].ref.current;a.style.bottom="0px";const H=c.clientHeight-g.offsetTop-g.offsetHeight,ne=Math.max(L,U+(q?le:0)+H+te),J=P+ne;a.style.height=J+"px"}else{const q=I.length>0&&v===I[0].ref.current;a.style.top="0px";const ne=Math.max(j,W+g.offsetTop+(q?Z:0)+U)+O;a.style.height=ne+"px",g.scrollTop=P-j+g.offsetTop}a.style.margin=`${qr}px 0`,a.style.minHeight=ie+"px",a.style.maxHeight=D+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,c,g,v,y,s.dir,i]);Kn(()=>w(),[w]);const[k,C]=x.useState();Kn(()=>{c&&C(window.getComputedStyle(c).zIndex)},[c]);const E=x.useCallback(_=>{_&&m.current===!0&&(w(),b==null||b(),m.current=!1)},[w,b]);return h.jsx(Aae,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:h.jsx(ze.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});b$.displayName=Cae;var Eae="SelectPopperPosition",X2=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=qr,...s}=t,o=xb(n);return h.jsx(cE,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});X2.displayName=Eae;var[Aae,hE]=Wd(jc,{}),J2="SelectViewport",w$=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=Cl(J2,n),o=hE(J2,n),a=ot(e,s.onViewportChange),l=x.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),h.jsx(bb.Slot,{scope:n,children:h.jsx(ze.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ve(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const m=window.innerHeight-qr*2,g=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),y=Math.max(g,v);if(y<m){const b=y+p,w=Math.min(m,b),k=b-w;d.style.height=w+"px",d.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});w$.displayName=J2;var x$="SelectGroup",[Nae,Pae]=Wd(x$),Mae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=tl();return h.jsx(Nae,{scope:n,id:r,children:h.jsx(ze.div,{role:"group","aria-labelledby":r,...i,ref:e})})});Mae.displayName=x$;var S$="SelectLabel",Tae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Pae(S$,n);return h.jsx(ze.div,{id:r.id,...i,ref:e})});Tae.displayName=S$;var Kv="SelectItem",[Rae,k$]=Wd(Kv),_$=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=_l(Kv,n),l=Cl(Kv,n),c=a.value===i,[u,d]=x.useState(s??""),[f,p]=x.useState(!1),m=ot(e,b=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,b,i,r)}),g=tl(),v=x.useRef("touch"),y=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(Rae,{scope:n,value:i,disabled:r,textId:g,isSelected:c,onItemTextChange:x.useCallback(b=>{d(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:h.jsx(bb.ItemSlot,{scope:n,value:i,disabled:r,textValue:u,children:h.jsx(ze.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:m,onFocus:ve(o.onFocus,()=>p(!0)),onBlur:ve(o.onBlur,()=>p(!1)),onClick:ve(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:ve(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:ve(o.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:ve(o.onPointerMove,b=>{var w;v.current=b.pointerType,r?(w=l.onItemLeave)==null||w.call(l):v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ve(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:ve(o.onKeyDown,b=>{var k;((k=l.searchRef)==null?void 0:k.current)!==""&&b.key===" "||(gae.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});_$.displayName=Kv;var Gf="SelectItemText",C$=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=_l(Gf,n),a=Cl(Gf,n),l=k$(Gf,n),c=wae(Gf,n),[u,d]=x.useState(null),f=ot(e,y=>d(y),l.onItemTextChange,y=>{var b;return(b=a.itemTextRefCallback)==null?void 0:b.call(a,y,l.value,l.disabled)}),p=u==null?void 0:u.textContent,m=x.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=c;return Kn(()=>(g(m),()=>v(m)),[g,v,m]),h.jsxs(h.Fragment,{children:[h.jsx(ze.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?xl.createPortal(s.children,o.valueNode):null]})});C$.displayName=Gf;var E$="SelectItemIndicator",Oae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return k$(E$,n).isSelected?h.jsx(ze.span,{"aria-hidden":!0,...i,ref:e}):null});Oae.displayName=E$;var Z2="SelectScrollUpButton",Iae=x.forwardRef((t,e)=>{const n=Cl(Z2,t.__scopeSelect),i=hE(Z2,t.__scopeSelect),[r,s]=x.useState(!1),o=ot(e,i.onScrollButtonChange);return Kn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(A$,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});Iae.displayName=Z2;var Q2="SelectScrollDownButton",Dae=x.forwardRef((t,e)=>{const n=Cl(Q2,t.__scopeSelect),i=hE(Q2,t.__scopeSelect),[r,s]=x.useState(!1),o=ot(e,i.onScrollButtonChange);return Kn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(A$,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});Dae.displayName=Q2;var A$=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=Cl("SelectScrollButton",n),o=x.useRef(null),a=wb(n),l=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),Kn(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(ze.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ve(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:ve(r.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:ve(r.onPointerLeave,()=>{l()})})}),Lae="SelectSeparator",jae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return h.jsx(ze.div,{"aria-hidden":!0,...i,ref:e})});jae.displayName=Lae;var ek="SelectArrow",$ae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=xb(n),s=_l(ek,n),o=Cl(ek,n);return s.open&&o.position==="popper"?h.jsx(uE,{...r,...i,ref:e}):null});$ae.displayName=ek;var Fae="SelectBubbleInput",N$=x.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=x.useRef(null),s=ot(i,r),o=dE(e);return x.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(ze.select,{...n,style:{...e$,...n.style},ref:s,defaultValue:e})});N$.displayName=Fae;function P$(t){return t===""||t===void 0}function M$(t){const e=Vi(t),n=x.useRef(""),i=x.useRef(0),r=x.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=x.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function T$(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Bae(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Bae(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var zae=c$,R$=d$,Uae=h$,Vae=p$,Hae=m$,O$=g$,Wae=w$,I$=_$,Gae=C$;const yg=zae,bg=Uae,Kf=x.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(R$,{ref:i,className:ee("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,h.jsx(Vae,{asChild:!0,children:h.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));Kf.displayName=R$.displayName;const qf=x.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>h.jsx(Hae,{children:h.jsx(O$,{ref:r,className:ee("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:h.jsx(Wae,{className:"p-1",children:e})})}));qf.displayName=O$.displayName;const Kl=x.forwardRef(({className:t,children:e,...n},i)=>h.jsx(I$,{ref:i,className:ee("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:h.jsx(Gae,{children:e})}));Kl.displayName=I$.displayName;var D$=["PageUp","PageDown"],L$=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],j$={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Gd="Slider",[tk,Kae,qae]=Ip(Gd),[$$,kge]=gs(Gd,[qae]),[Yae,Sb]=$$(Gd),F$=x.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:m,...g}=t,v=x.useRef(new Set),y=x.useRef(0),w=o==="horizontal"?Xae:Jae,[k=[],C]=Fo({prop:u,defaultProp:c,onChange:I=>{var K;(K=[...v.current][y.current])==null||K.focus(),d(I)}}),E=x.useRef(k);function _(I){const D=nle(k,I);R(I,D)}function N(I){R(I,y.current)}function M(){const I=E.current[y.current];k[y.current]!==I&&f(k)}function R(I,D,{commit:K}={commit:!1}){const B=ole(s),W=ale(Math.round((I-i)/s)*s+i,B),Y=Uv(W,[i,r]);C((te=[])=>{const V=ele(te,Y,D);if(sle(V,l*s)){y.current=V.indexOf(Y);const $=String(V)!==String(te);return $&&K&&f(V),$?V:te}else return te})}return h.jsx(Yae,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:y,thumbs:v.current,values:k,orientation:o,form:m,children:h.jsx(tk.Provider,{scope:t.__scopeSlider,children:h.jsx(tk.Slot,{scope:t.__scopeSlider,children:h.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...g,ref:e,onPointerDown:ve(g.onPointerDown,()=>{a||(E.current=k)}),min:i,max:r,inverted:p,onSlideStart:a?void 0:_,onSlideMove:a?void 0:N,onSlideEnd:a?void 0:M,onHomeKeyDown:()=>!a&&R(i,0,{commit:!0}),onEndKeyDown:()=>!a&&R(r,k.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:D})=>{if(!a){const W=D$.includes(I.key)||I.shiftKey&&L$.includes(I.key)?10:1,Y=y.current,te=k[Y],V=s*W*D;R(te+V,Y,{commit:!0})}}})})})})});F$.displayName=Gd;var[B$,z$]=$$(Gd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Xae=x.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=x.useState(null),p=ot(e,w=>f(w)),m=x.useRef(void 0),g=Dp(r),v=g==="ltr",y=v&&!s||!v&&s;function b(w){const k=m.current||d.getBoundingClientRect(),C=[0,k.width],_=pE(C,y?[n,i]:[i,n]);return m.current=k,_(w-k.left)}return h.jsx(B$,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:h.jsx(U$,{dir:g,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const k=b(w.clientX);o==null||o(k)},onSlideMove:w=>{const k=b(w.clientX);a==null||a(k)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:w=>{const C=j$[y?"from-left":"from-right"].includes(w.key);c==null||c({event:w,direction:C?-1:1})}})})}),Jae=x.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=x.useRef(null),d=ot(e,u),f=x.useRef(void 0),p=!r;function m(g){const v=f.current||u.current.getBoundingClientRect(),y=[0,v.height],w=pE(y,p?[i,n]:[n,i]);return f.current=v,w(g-v.top)}return h.jsx(B$,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:h.jsx(U$,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const v=m(g.clientY);s==null||s(v)},onSlideMove:g=>{const v=m(g.clientY);o==null||o(v)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:g=>{const y=j$[p?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:y?-1:1})}})})}),U$=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Sb(Gd,n);return h.jsx(ze.span,{...c,ref:e,onKeyDown:ve(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):D$.concat(L$).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ve(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():i(d)}),onPointerMove:ve(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:ve(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),V$="SliderTrack",H$=x.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Sb(V$,n);return h.jsx(ze.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});H$.displayName=V$;var nk="SliderRange",W$=x.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Sb(nk,n),s=z$(nk,n),o=x.useRef(null),a=ot(e,o),l=r.values.length,c=r.values.map(f=>q$(f,r.min,r.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(ze.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});W$.displayName=nk;var ik="SliderThumb",G$=x.forwardRef((t,e)=>{const n=Kae(t.__scopeSlider),[i,r]=x.useState(null),s=ot(e,a=>r(a)),o=x.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return h.jsx(Zae,{...t,ref:s,index:o})}),Zae=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=Sb(ik,n),a=z$(ik,n),[l,c]=x.useState(null),u=ot(e,b=>c(b)),d=l?o.form||!!l.closest("form"):!0,f=sE(l),p=o.values[i],m=p===void 0?0:q$(p,o.min,o.max),g=tle(i,o.values.length),v=f==null?void 0:f[a.size],y=v?ile(v,m,a.direction):0;return x.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${m}% + ${y}px)`},children:[h.jsx(tk.ItemSlot,{scope:t.__scopeSlider,children:h.jsx(ze.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:ve(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&h.jsx(K$,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},i)]})});G$.displayName=ik;var Qae="RadioBubbleInput",K$=x.forwardRef(({__scopeSlider:t,value:e,...n},i)=>{const r=x.useRef(null),s=ot(r,i),o=dE(e);return x.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(ze.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});K$.displayName=Qae;function ele(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function q$(t,e,n){const s=100/(n-e)*(t-e);return Uv(s,[0,100])}function tle(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function nle(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function ile(t,e,n){const i=t/2,s=pE([0,50],[0,i]);return(i-s(e)*n)*n}function rle(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function sle(t,e){if(e>0){const n=rle(t);return Math.min(...n)>=e}return!0}function pE(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function ole(t){return(String(t).split(".")[1]||"").length}function ale(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var Y$=F$,lle=H$,cle=W$,ule=G$;const ql=x.forwardRef(({className:t,...e},n)=>h.jsxs(Y$,{ref:n,className:ee("relative flex touch-none select-none items-center",t),...e,children:[h.jsx(lle,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:h.jsx(cle,{className:"absolute h-full bg-mantis-400"})}),h.jsx(ule,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ql.displayName=Y$.displayName;var kb="Switch",[dle,_ge]=gs(kb),[fle,hle]=dle(kb),X$=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,p]=x.useState(null),m=ot(e,w=>p(w)),g=x.useRef(!1),v=f?u||!!f.closest("form"):!0,[y,b]=Fo({prop:r,defaultProp:s??!1,onChange:c,caller:kb});return h.jsxs(fle,{scope:n,checked:y,disabled:a,children:[h.jsx(ze.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":eF(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:m,onClick:ve(t.onClick,w=>{b(k=>!k),v&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),v&&h.jsx(Q$,{control:f,bubbles:!g.current,name:i,value:l,checked:y,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});X$.displayName=kb;var J$="SwitchThumb",Z$=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=hle(J$,n);return h.jsx(ze.span,{"data-state":eF(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});Z$.displayName=J$;var ple="SwitchBubbleInput",Q$=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:i=!0,...r},s)=>{const o=x.useRef(null),a=ot(o,s),l=dE(n),c=sE(e);return x.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const m=new Event("click",{bubbles:i});p.call(u,n),u.dispatchEvent(m)}},[l,n,i]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Q$.displayName=ple;function eF(t){return t?"checked":"unchecked"}var tF=X$,mle=Z$;const fa=x.forwardRef(({className:t,...e},n)=>h.jsx(tF,{className:ee("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:h.jsx(mle,{className:ee("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));fa.displayName=tF.displayName;const _b=de(!1);function nF({className:t}){const e=Mt(),[n,i]=Jy(),{status:r}=_n();return h.jsxs("div",{className:ee("overflow-auto scrollbar-stone-700",t),children:[h.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[h.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),h.jsxs(ai,{children:[h.jsxs(li,{children:[h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),h.jsx(bf,{children:e("settings.animations.description")})]}),h.jsx(fa,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&X6()}})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),h.jsx(ql,{className:"w-44",...P1({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsx(ci,{children:e("settings.instructionCycle.label")})}),h.jsx(fa,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsx(ci,{children:e("settings.statsCPU.label")})}),h.jsx(fa,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(ai,{children:h.jsxs(li,{children:[h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),h.jsx(bf,{children:e("settings.devices.description")})]})}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsx(ci,{children:e("settings.devices.keyboard-and-screen")})}),h.jsx(fa,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),h.jsxs(ai,{children:[h.jsxs(li,{children:[h.jsx(ci,{children:e("settings.devices.pic.label")}),h.jsx(bf,{children:e("settings.devices.pic.description")})]}),h.jsx(fa,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--clock] size-6"}),e("settings.speeds.clockSpeed")]})}),h.jsx(ql,{className:"w-44",...P1({value:n.clockSpeed,onValueChange:s=>i(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsx(ci,{children:e("settings.devices.pio.label")})}),h.jsxs(yg,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[h.jsx(Kf,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(bg,{})}),h.jsx(qf,{children:Fee.map(s=>h.jsx(Kl,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsx(ci,{children:e("settings.devices.handshake.label")})}),h.jsxs(yg,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[h.jsx(Kf,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(bg,{})}),h.jsx(qf,{children:Bee.map(s=>h.jsx(Kl,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),h.jsx(ql,{className:"w-44",...P1({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(ai,{children:[h.jsxs(li,{children:[h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),h.jsx(bf,{children:e("settings.flags.description")})]}),h.jsxs(yg,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[h.jsx(Kf,{className:"w-32",children:h.jsx(bg,{})}),h.jsxs(qf,{children:[h.jsx(Kl,{value:"CF_ZF",children:"C Z"}),h.jsx(Kl,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--languages] size-6"}),e("settings.language.label")]})}),h.jsxs(yg,{value:n.language,onValueChange:s=>i(o=>({...o,language:s})),children:[h.jsx(Kf,{className:"w-32",children:h.jsx(bg,{})}),h.jsxs(qf,{children:[h.jsx(Kl,{value:"en",children:h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx("span",{className:"icon-[circle-flags--uk] size-4"})," English"]})}),h.jsx(Kl,{value:"es",children:h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx("span",{className:"icon-[circle-flags--ar] size-4"})," Español"]})})]})]})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-6"}),e("settings.editorFontSize.label")]})}),h.jsxs("div",{className:"flex items-center rounded-lg border border-stone-600 bg-stone-900",children:[h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize<=8,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize-1})),title:e("settings.editorFontSize.decrease"),children:h.jsx("span",{className:"icon-[lucide--minus] size-4"})}),h.jsx("span",{className:"w-8 text-center text-sm font-normal",children:n.editorFontSize}),h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize>=64,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize+1})),title:e("settings.editorFontSize.increase"),children:h.jsx("span",{className:"icon-[lucide--plus] size-4"})})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(ai,{children:[h.jsxs(li,{children:[h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),h.jsxs(bf,{children:[e("settings.filters.description"),h.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:cu.filterBightness,filterContrast:cu.filterContrast,filterInvert:cu.filterInvert,filterSaturation:cu.filterSaturation})),children:e("settings.filters.revert")})]})]}),h.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[h.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),h.jsx(ql,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),h.jsx(ql,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),h.jsx(fa,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),h.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),h.jsx(ql,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{className:"flex justify-end p-4",children:h.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...cu,language:s.language,devices:s.devices})),children:[h.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function ai({children:t}){return h.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function li({children:t}){return h.jsx("div",{className:"grow",children:t})}function ci({children:t}){return h.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function bf({children:t}){return h.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function P1({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}const iF=x.memo(({currentPhase:t="idle",className:e})=>{const[n,i]=x.useState("idle"),[r,s]=x.useState(!1),o=Ze(tr);x.useEffect(()=>{if(t!=="idle"){i(t);const l=setTimeout(()=>i("idle"),1e3);return()=>clearTimeout(l)}},[t]),o&&"metadata"in o&&o.metadata&&(`${o.metadata.name}`,o.metadata.operands.length&&""+o.metadata.operands.join(", "));const a=[{id:"fetch",label:"Fetch",icon:"📥",description:"Leer instrucción",color:"bg-blue-500",details:{title:"Fase Fetch",description:"La CPU lee la instrucción desde la dirección apuntada por el IP",steps:["IP apunta a la dirección de memoria","MAR recibe la dirección del IP","Se lee el contenido de memoria","MBR almacena la instrucción","IP se incrementa automáticamente"],registers:["IP","MAR","MBR"]}},{id:"decode",label:"Decode",icon:"🔍",description:"Interpretar instrucción",color:"bg-yellow-500",details:{title:"Fase Decode",description:"La CPU interpreta el código de operación y determina la operación a realizar",steps:["IR recibe el código de operación del MBR","Se analiza el opcode","Se identifican los operandos","Se determina el modo de direccionamiento","Se preparan los operandos para la ejecución"],registers:["IR","MBR"]}},{id:"execute",label:"Execute",icon:"⚡",description:"Ejecutar operación",color:"bg-green-500",details:{title:"Fase Execute",description:"La CPU ejecuta la operación especificada y actualiza registros y flags",steps:["ALU recibe los operandos","Se ejecuta la operación aritmética/lógica","Se actualiza el registro destino (AL, BL, CL, DL)","Se actualizan las flags según el resultado","Se completa el ciclo de instrucción"],registers:["ALU","AL/BL/CL/DL","Flags"]}}];return h.jsxs("div",{className:ee("flex flex-col gap-2 p-2 rounded-lg bg-stone-900/95 border-2 border-mantis-400/50 shadow-lg backdrop-blur-sm","min-w-[280px] max-w-[320px]",e),children:[h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400 uppercase tracking-wide",children:"Ciclo CPU"}),h.jsx("button",{onClick:()=>s(!r),className:ee("text-xs px-2 py-1 rounded transition-colors",r?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:text-mantis-400 hover:bg-mantis-400/10"),children:r?"−":"+"})]})}),h.jsx("div",{className:"flex items-center justify-center gap-2",children:a.map((l,c)=>h.jsxs("div",{className:"flex items-center",children:[h.jsxs("div",{className:ee("flex flex-col items-center gap-1 px-2 py-1 rounded transition-all duration-300 cursor-pointer","border border-transparent hover:border-mantis-400/30",t===l.id&&"border-mantis-400 bg-mantis-400/20 shadow-lg",n===l.id&&"animate-pulse"),onClick:()=>{if(r){const u=l.details;alert(`${u.title}

${u.description}

Pasos:
${u.steps.map((d,f)=>`${f+1}. ${d}`).join(`
`)}

Registros involucrados: ${u.registers.join(", ")}`)}},children:[h.jsx("div",{className:ee("text-lg transition-transform duration-300",t===l.id&&"scale-110"),children:l.icon}),h.jsx("span",{className:ee("text-xs font-bold transition-colors uppercase tracking-wide",t===l.id?"text-mantis-400":"text-stone-400"),children:l.label}),h.jsx("span",{className:"text-[9px] text-stone-500 text-center max-w-16 leading-tight",children:l.description})]}),c<a.length-1&&h.jsx("div",{className:"text-stone-500 mx-1",children:"→"})]},l.id))}),r&&h.jsx("div",{className:"mt-2 p-2 bg-stone-800/80 rounded border border-stone-600",children:h.jsxs("div",{className:"text-xs text-stone-300",children:[h.jsx("div",{className:"font-bold mb-1 text-mantis-400",children:"Estado actual:"}),t==="fetch"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),h.jsx("span",{children:"Leyendo instrucción desde memoria"})]}),t==="decode"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),h.jsx("span",{children:"Interpretando código de operación"})]}),t==="execute"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),h.jsx("span",{children:"Ejecutando operación en ALU"})]}),t==="idle"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 bg-stone-400 rounded-full"}),h.jsx("span",{children:"CPU en espera de instrucciones"})]})]})}),h.jsx("div",{className:"text-[8px] text-stone-500 text-center",children:"Haz clic en las fases para ver detalles"})]})});iF.displayName="ExecutionPhases";const gle=x.memo(({steps:t,onStepChange:e,onComplete:n,className:i})=>{const[r,s]=x.useState(0),[o,a]=x.useState(!1),[l,c]=x.useState(2e3),u=t[r],d=r===0,f=r===t.length-1,p=x.useCallback(b=>{const w=Math.max(0,Math.min(b,t.length-1));s(w),e==null||e(w)},[t.length,e]),m=x.useCallback(()=>{f?(a(!1),n==null||n()):p(r+1)},[r,f,p,n]),g=x.useCallback(()=>{d||p(r-1)},[r,d,p]),v=x.useCallback(()=>{p(0),a(!1)},[p]),y=x.useCallback(()=>{a(!o)},[o]);return x.useCallback(()=>{if(o&&!f){const b=setTimeout(m,l);return()=>clearTimeout(b)}},[o,f,m,l]),o&&!f&&setTimeout(m,l),h.jsxs("div",{className:ee("bg-stone-900 border border-stone-600 rounded-lg p-4",i),children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:"Modo Paso a Paso"}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("span",{className:"text-sm text-stone-400",children:["Paso ",r+1," de ",t.length]})})]}),h.jsx(iF,{currentPhase:u==null?void 0:u.phase,className:"mb-4"}),h.jsxs("div",{className:"bg-stone-800 rounded-lg p-4 mb-4",children:[h.jsx("div",{className:"flex items-center gap-2 mb-2",children:h.jsx("span",{className:"text-sm font-medium text-mantis-400",children:u==null?void 0:u.title})}),h.jsx("p",{className:"text-sm text-stone-300 mb-3",children:u==null?void 0:u.description}),(u==null?void 0:u.instruction)&&h.jsxs("div",{className:"bg-stone-700 rounded p-2 mb-3",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Instrucción:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:u.instruction})]}),(u==null?void 0:u.registers)&&h.jsx("div",{className:"grid grid-cols-2 gap-4 mb-3",children:h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Registros:"}),h.jsx("div",{className:"space-y-1 mt-1",children:Object.entries(u.registers).map(([b,w])=>h.jsxs("div",{className:"flex justify-between text-xs",children:[h.jsxs("span",{className:"text-stone-300",children:[b,":"]}),h.jsx("span",{className:"font-mono text-mantis-400",children:w})]},b))})]})}),(u==null?void 0:u.memory)&&h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Memoria:"}),h.jsx("div",{className:"grid grid-cols-4 gap-1 mt-1",children:Object.entries(u.memory).map(([b,w])=>h.jsxs("div",{className:"text-xs text-center",children:[h.jsx("div",{className:"text-stone-500",children:b}),h.jsx("div",{className:"font-mono text-mantis-400",children:w})]},b))})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(kt,{variant:"outline",size:"sm",onClick:v,disabled:d&&!o,className:"flex items-center gap-1",children:[h.jsx($e,{icon:hL}),"Reiniciar"]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(kt,{variant:"outline",size:"sm",onClick:g,disabled:d,className:"flex items-center gap-1",children:[h.jsx($e,{icon:mL}),"Anterior"]}),h.jsxs(kt,{variant:o?"secondary":"default",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx($e,{icon:o?zy:bd}),o?"Pausar":"Reproducir"]}),h.jsxs(kt,{variant:"outline",size:"sm",onClick:m,disabled:f,className:"flex items-center gap-1",children:["Siguiente",h.jsx($e,{icon:Y_})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Velocidad:"}),h.jsxs("select",{value:l,onChange:b=>c(Number(b.target.value)),className:"bg-stone-800 border border-stone-600 rounded px-2 py-1 text-xs",children:[h.jsx("option",{value:1e3,children:"Rápida"}),h.jsx("option",{value:2e3,children:"Normal"}),h.jsx("option",{value:4e3,children:"Lenta"})]})]})]}),h.jsx("div",{className:"mt-4",children:h.jsx("div",{className:"w-full bg-stone-700 rounded-full h-2",children:h.jsx("div",{className:"bg-mantis-500 h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/t.length*100}%`}})})})]})});gle.displayName="StepByStepMode";const vle=x.memo(({from:t,to:e,data:n,duration:i=2e3,className:r,onComplete:s})=>{const[o,a]=x.useState(!1),[l,c]=x.useState(0);return x.useEffect(()=>{a(!0),c(0);const u=Date.now(),d=()=>{const f=Date.now()-u,p=Math.min(f/i,1);c(p),p<1?requestAnimationFrame(d):setTimeout(()=>{a(!1),s==null||s()},500)};requestAnimationFrame(d)},[t,e,n,i,s]),o?h.jsxs("div",{className:ee("absolute inset-0 pointer-events-none",r),children:[h.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"dataFlowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${t} L ${e}`,stroke:"url(#dataFlowGradient)",strokeWidth:"3",strokeDasharray:"10,5",strokeDashoffset:20-l*20,fill:"none",className:"animate-pulse"})]}),h.jsxs("div",{className:ee("absolute px-2 py-1 bg-mantis-500 text-white text-xs font-mono rounded","border border-mantis-400 shadow-lg","transition-all duration-300 ease-out"),style:{left:`${l*100}%`,transform:"translateX(-50%)",top:"50%",marginTop:"-12px"},children:[n,h.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-mantis-500"})]})]}):null});vle.displayName="DataFlowAnimation";const VM=[{id:"first_program",type:"programs_written",title:"Primer Programa",description:"Escribe tu primer programa en ensamblador",icon:fc,requirement:1,current:0,unlocked:!1,points:10},{id:"instruction_master",type:"instructions_executed",title:"Maestro de Instrucciones",description:"Ejecuta 100 instrucciones",icon:CY,requirement:100,current:0,unlocked:!1,points:25},{id:"memory_explorer",type:"concept_mastered",title:"Explorador de Memoria",description:"Comprende el funcionamiento de la memoria RAM",icon:HY,requirement:1,current:0,unlocked:!1,points:15},{id:"cpu_architect",type:"concept_mastered",title:"Arquitecto de CPU",description:"Domina los conceptos de arquitectura de CPU",icon:BY,requirement:1,current:0,unlocked:!1,points:30},{id:"persistent_learner",type:"time_spent",title:"Estudiante Persistente",description:"Pasa 30 minutos aprendiendo",icon:Bp,requirement:30,current:0,unlocked:!1,points:20}],HM=[{id:"beginner",name:"Principiante",description:"Conceptos básicos de programación y arquitectura",concepts:["register","memory","instruction"],requiredPoints:0,unlocked:!0,completed:!1},{id:"intermediate",name:"Intermedio",description:"Operaciones aritméticas y lógicas",concepts:["alu","bus","program-counter"],requiredPoints:50,unlocked:!1,completed:!1},{id:"advanced",name:"Avanzado",description:"Interrupciones y programación compleja",concepts:["flags","stack","interrupts"],requiredPoints:100,unlocked:!1,completed:!1}],rF=x.memo(({className:t,isVisible:e=!1,onClose:n})=>{const[i,r]=x.useState(VM),[s,o]=x.useState(HM),[a,l]=x.useState(0),[c,u]=x.useState(0);x.useEffect(()=>{const v=localStorage.getItem("vonsim8-educational-progress");if(v)try{const y=JSON.parse(v);r(y.achievements||VM),o(y.levels||HM),l(y.totalPoints||0),u(y.sessionTime||0)}catch{}},[]);const d=x.useCallback(()=>{const v={achievements:i,levels:s,totalPoints:a,sessionTime:c,lastSaved:Date.now()};localStorage.setItem("vonsim8-educational-progress",JSON.stringify(v))},[i,s,a,c]),f=x.useCallback((v,y)=>{r(b=>{const w=b.map(C=>{if(C.type===v){const E=Math.min(C.current+y,C.requirement),_=C.unlocked,N=E>=C.requirement;return!_&&N&&p(C),{...C,current:E,unlocked:N}}return C}),k=w.filter(C=>C.unlocked).reduce((C,E)=>C+E.points,0);return l(k),o(C=>C.map(E=>({...E,unlocked:k>=E.requiredPoints}))),w})},[]),p=v=>{const y=document.createElement("div");y.className=ee("fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg border-2","bg-mantis-500 text-white animate-slide-in-right"),y.innerHTML=`
      <div class="flex items-center gap-3">
        <FontAwesomeIcon icon="${v.icon}" class="text-2xl" />
        <div>
          <div class="font-bold">¡Logro Desbloqueado!</div>
          <div class="text-sm">${v.title}</div>
        </div>
      </div>
    `,document.body.appendChild(y),setTimeout(()=>{y.remove()},3e3)};if(x.useEffect(()=>{const v=y=>{const{type:b,value:w=1}=y.detail;f(b,w)};return window.addEventListener("educational-progress",v),()=>window.removeEventListener("educational-progress",v)},[f]),x.useEffect(()=>{const v=setInterval(()=>{u(y=>{const b=y+1;return b%60===0&&f("time_spent",1),b})},1e3);return()=>clearInterval(v)},[f]),x.useEffect(()=>{const v=setInterval(d,3e4);return()=>clearInterval(v)},[d]),!e)return null;const m=i.filter(v=>v.unlocked),g=s.filter(v=>v.unlocked);return h.jsxs("div",{className:ee("fixed bottom-20 right-4 z-50 w-96 h-80 bg-stone-900 border border-stone-600 rounded-lg shadow-xl",t),children:[h.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-stone-600",children:[h.jsxs("h3",{className:"text-sm font-semibold text-mantis-400 flex items-center gap-2",children:[h.jsx($e,{icon:vL}),"Progreso Educativo"]}),h.jsx(kt,{variant:"ghost",size:"sm",onClick:n,className:"text-xs text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"h-64 overflow-y-auto p-3 space-y-3",children:[h.jsxs("div",{className:"text-center p-3 bg-stone-800 rounded-lg",children:[h.jsx("div",{className:"text-2xl font-bold text-mantis-400",children:a}),h.jsx("div",{className:"text-xs text-stone-400",children:"Puntos Totales"})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"text-sm font-medium text-stone-300 mb-1 flex items-center gap-2",children:[h.jsx($e,{icon:Bp}),"Niveles de Aprendizaje"]}),h.jsx("div",{className:"space-y-1",children:s.map(v=>h.jsxs("div",{className:ee("p-2 rounded border text-xs",v.unlocked?"bg-mantis-400/10 border-mantis-400 text-mantis-400":"bg-stone-800 border-stone-600 text-stone-500"),children:[h.jsx("div",{className:"font-medium",children:v.name}),h.jsx("div",{className:"text-stone-400",children:v.description}),!v.unlocked&&h.jsxs("div",{className:"text-stone-500 mt-1",children:["Requiere ",v.requiredPoints," puntos"]})]},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"text-sm font-medium text-stone-300 mb-1 flex items-center gap-2",children:[h.jsx($e,{icon:_Y}),"Logros (",m.length,"/",i.length,")"]}),h.jsx("div",{className:"space-y-1",children:i.map(v=>h.jsx("div",{className:ee("p-2 rounded border text-xs",v.unlocked?"bg-mantis-400/10 border-mantis-400":"bg-stone-800 border-stone-600"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx($e,{icon:v.icon,className:v.unlocked?"text-mantis-400":"text-stone-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:ee("font-medium",v.unlocked?"text-mantis-400":"text-stone-400"),children:v.title}),h.jsx("div",{className:"text-stone-500",children:v.description}),h.jsxs("div",{className:"mt-1",children:[h.jsx("div",{className:"w-full bg-stone-700 rounded-full h-1",children:h.jsx("div",{className:"bg-mantis-400 h-1 rounded-full transition-all duration-300",style:{width:`${v.current/v.requirement*100}%`}})}),h.jsxs("div",{className:"text-stone-500 mt-1",children:[v.current,"/",v.requirement]})]})]})]})},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"text-sm font-medium text-stone-300 mb-1 flex items-center gap-2",children:[h.jsx($e,{icon:PY}),"Estadísticas"]}),h.jsxs("div",{className:"text-xs text-stone-400",children:[h.jsxs("div",{children:["Tiempo de sesión: ",Math.floor(c/60),"m ",c%60,"s"]}),h.jsxs("div",{children:["Niveles completados: ",g.length,"/",s.length]})]})]})]})]})});rF.displayName="EducationalProgress";const yle=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Aprende cómo funciona una CPU y sus componentes principales",difficulty:"beginner",concepts:["register","alu","program-counter"],estimatedTime:10,steps:[{id:"intro",title:"Introducción a la CPU",description:"¿Qué es una CPU y para qué sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos.",type:"explanation",completed:!1},{id:"registers",title:"Registros de la CPU",description:"Los registros son memoria rápida dentro de la CPU",content:"Los registros almacenan datos temporalmente durante la ejecución. Son más rápidos que la RAM pero tienen menos capacidad.",type:"explanation",target:"cpu-component",completed:!1},{id:"alu-exercise",title:"Ejercicio: ALU",description:"Practica con la Unidad Aritmético-Lógica",content:"La ALU realiza operaciones matemáticas y lógicas. Observa cómo cambian los valores en los registros AL, BL, CL, DL.",type:"exercise",exercise:{question:"¿Qué operación realiza la ALU cuando ejecutas ADD AL, 5?",options:["Suma 5 al registro AL","Resta 5 del registro AL","Multiplica AL por 5","Divide AL entre 5"],correctAnswer:0,explanation:"ADD AL, 5 suma el valor 5 al contenido actual del registro AL."},completed:!1},{id:"program-counter",title:"Contador de Programa",description:"El IP indica la siguiente instrucción a ejecutar",content:"El Program Counter (IP) se incrementa automáticamente después de cada instrucción.",type:"explanation",target:"cpu-component",completed:!1}]},{id:"memory-basics",title:"Memoria RAM",description:"Comprende cómo funciona la memoria principal",difficulty:"beginner",concepts:["memory","bus"],estimatedTime:8,steps:[{id:"memory-intro",title:"¿Qué es la Memoria RAM?",description:"La memoria de acceso aleatorio",content:"La RAM almacena programas y datos temporalmente. Cada ubicación tiene una dirección única.",type:"explanation",target:"memory-component",completed:!1},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria",content:"La CPU usa el bus de direcciones para especificar qué celda de memoria acceder.",type:"explanation",completed:!1},{id:"memory-quiz",title:"Quiz: Direccionamiento",description:"Pon a prueba tu conocimiento",content:"Responde correctamente para continuar.",type:"quiz",exercise:{question:"¿Cuántas direcciones de memoria tiene VonSim8?",options:["128 bytes","256 bytes","512 bytes","1024 bytes"],correctAnswer:1,explanation:"VonSim8 tiene 256 bytes de memoria (direcciones 00-FF en hexadecimal)."},completed:!1}]},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Fetch, Decode, Execute",difficulty:"intermediate",concepts:["instruction","program-counter"],estimatedTime:15,steps:[{id:"cycle-intro",title:"El Ciclo de Instrucción",description:"Las tres fases principales",content:"Cada instrucción pasa por tres fases: Fetch (leer), Decode (interpretar), Execute (ejecutar).",type:"explanation",completed:!1},{id:"fetch-phase",title:"Fase Fetch",description:"Leer la instrucción de memoria",content:"La CPU lee la instrucción desde la dirección apuntada por el IP.",type:"explanation",completed:!1},{id:"decode-phase",title:"Fase Decode",description:"Interpretar la instrucción",content:"La CPU determina qué operación realizar y qué operandos usar.",type:"explanation",completed:!1},{id:"execute-phase",title:"Fase Execute",description:"Ejecutar la operación",content:"La CPU realiza la operación especificada por la instrucción.",type:"explanation",completed:!1},{id:"cycle-exercise",title:"Ejercicio: Observar el Ciclo",description:"Ejecuta una instrucción paso a paso",content:'Usa el botón "Por Ciclo" para ver cada fase del ciclo de instrucción.',type:"exercise",exercise:{question:"¿En qué orden ocurren las fases del ciclo de instrucción?",options:["Execute, Decode, Fetch","Fetch, Execute, Decode","Fetch, Decode, Execute","Decode, Fetch, Execute"],correctAnswer:2,explanation:"El orden correcto es Fetch (leer), Decode (interpretar), Execute (ejecutar)."},completed:!1}]}],sF=x.memo(({tutorial:t,onComplete:e,onClose:n,className:i})=>{var K,B;const[r,s]=x.useState(0),[o,a]=x.useState(t.steps),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,p]=x.useState(""),[m,g]=x.useState(null),v=o[r],y=r===0,b=r===o.length-1,k=o.filter(W=>W.completed).length/o.length*100;x.useEffect(()=>{if(l&&v.type==="explanation"){const W=setTimeout(()=>{b?c(!1):C()},5e3);return()=>clearTimeout(W)}},[l,r,b]);const C=x.useCallback(()=>{b?N():(s(W=>W+1),g(null),p(""))},[b]),E=x.useCallback(()=>{y||(s(W=>W-1),g(null),p(""))},[y]),_=x.useCallback(()=>{a(W=>W.map((Y,te)=>te===r?{...Y,completed:!0}:Y))},[r]),N=x.useCallback(()=>{e==null||e(t.id)},[t.id,e]),M=x.useCallback(()=>{if(!v.exercise)return;const W=f===v.exercise.correctAnswer.toString();g({correct:W,message:W?"¡Correcto!":`Incorrecto. ${v.exercise.explanation}`}),W&&(_(),setTimeout(()=>{C()},2e3))},[v,f,_,C]),R=x.useCallback(()=>{c(!l)},[l]),I=W=>{switch(W){case"beginner":return"text-blue-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-purple-400";default:return"text-stone-400"}},D=W=>{switch(W){case"beginner":return fc;case"intermediate":return Bp;case"advanced":return gL;default:return fc}};return h.jsx("div",{className:ee("fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",i),children:h.jsxs("div",{className:"bg-stone-900 border border-stone-600 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-stone-600",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:t.title}),h.jsx(kt,{variant:"ghost",size:"sm",onClick:n,className:"text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx($e,{icon:D(t.difficulty),className:I(t.difficulty)}),h.jsx("span",{className:I(t.difficulty),children:t.difficulty==="beginner"?"Básico":t.difficulty==="intermediate"?"Intermedio":"Avanzado"})]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:[t.estimatedTime," min"]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:["Paso ",r+1," de ",o.length]})]}),h.jsx("div",{className:"mt-3 w-full bg-stone-700 rounded-full h-2",children:h.jsx("div",{className:"bg-mantis-500 h-2 rounded-full transition-all duration-300",style:{width:`${k}%`}})})]}),h.jsxs("div",{className:"p-4 overflow-y-auto max-h-96",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"text-md font-medium text-white mb-2",children:v.title}),h.jsx("p",{className:"text-stone-300 text-sm mb-3",children:v.description}),h.jsx("div",{className:"text-stone-400 text-sm leading-relaxed",children:v.content})]}),v.type==="exercise"||v.type==="quiz"?h.jsxs("div",{className:"bg-stone-800 rounded-lg p-4 border border-stone-600",children:[h.jsx("h4",{className:"font-medium text-white mb-3",children:(K=v.exercise)==null?void 0:K.question}),(B=v.exercise)!=null&&B.options?h.jsx("div",{className:"space-y-2",children:v.exercise.options.map((W,Y)=>h.jsxs("label",{className:ee("flex items-center gap-3 p-3 rounded border cursor-pointer transition-colors",f===Y.toString()?"bg-mantis-400/20 border-mantis-400":"bg-stone-700 border-stone-600 hover:bg-stone-600"),children:[h.jsx("input",{type:"radio",name:"answer",value:Y,checked:f===Y.toString(),onChange:te=>p(te.target.value),className:"text-mantis-400"}),h.jsx("span",{className:"text-stone-300",children:W})]},Y))}):h.jsx("input",{type:"text",value:f,onChange:W=>p(W.target.value),placeholder:"Escribe tu respuesta...",className:"w-full p-2 bg-stone-700 border border-stone-600 rounded text-white"}),m&&h.jsx("div",{className:ee("mt-3 p-3 rounded border",m.correct?"bg-green-400/20 border-green-400 text-green-400":"bg-red-400/20 border-red-400 text-red-400"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx($e,{icon:m.correct?bL:Uy}),m.message]})}),v.hints&&v.hints.length>0&&h.jsxs("div",{className:"mt-3",children:[h.jsxs(kt,{variant:"ghost",size:"sm",onClick:()=>d(!u),className:"text-mantis-400 hover:text-mantis-300",children:[h.jsx($e,{icon:fc,className:"mr-2"}),u?"Ocultar":"Mostrar"," Pistas"]}),u&&h.jsx("div",{className:"mt-2 p-3 bg-stone-700 rounded border border-stone-600",children:h.jsx("ul",{className:"text-sm text-stone-300 space-y-1",children:v.hints.map((W,Y)=>h.jsxs("li",{children:["• ",W]},Y))})})]})]}):null]}),h.jsx("div",{className:"p-4 border-t border-stone-600",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(kt,{variant:"outline",size:"sm",onClick:E,disabled:y,className:"flex items-center gap-1",children:[h.jsx($e,{icon:mL}),"Anterior"]}),v.type==="explanation"&&h.jsxs(kt,{variant:"outline",size:"sm",onClick:R,className:"flex items-center gap-1",children:[h.jsx($e,{icon:l?zy:bd}),l?"Pausar":"Reproducir"]})]}),h.jsx("div",{className:"flex items-center gap-2",children:v.type==="exercise"||v.type==="quiz"?h.jsx(kt,{size:"sm",onClick:M,disabled:!f,className:"bg-mantis-600 hover:bg-mantis-700",children:"Verificar Respuesta"}):h.jsxs(kt,{size:"sm",onClick:C,className:"bg-mantis-600 hover:bg-mantis-700 flex items-center gap-1",children:[b?"Completar Tutorial":"Siguiente",!b&&h.jsx($e,{icon:Y_})]})})]})})]})})});sF.displayName="InteractiveTutorial";const ble={"fetch-decode-execute":{title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción",steps:[{id:"fetch",title:"Fase Fetch",description:"La CPU lee la instrucción desde memoria",duration:2e3,animation:{type:"flow",targets:["IP","MAR","MBR"],data:{from:"IP",to:"MBR",value:"A1"}}},{id:"decode",title:"Fase Decode",description:"La CPU interpreta la instrucción",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{instruction:"MOV AL, 5"}}},{id:"execute",title:"Fase Execute",description:"La CPU ejecuta la operación",duration:2e3,animation:{type:"transform",targets:["AL"],data:{newValue:"05"}}}]},"memory-access":{title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM",steps:[{id:"address-setup",title:"Configurar Dirección",description:"La CPU coloca la dirección en el MAR",duration:1500,animation:{type:"highlight",targets:["MAR"],data:{address:"A0"}}},{id:"memory-read",title:"Lectura de Memoria",description:"El contenido se transfiere al MBR",duration:1500,animation:{type:"flow",targets:["memory-cell-A0","MBR"],data:{from:"memory",to:"MBR",value:"42"}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se mueven al registro destino",duration:1500,animation:{type:"flow",targets:["MBR","AL"],data:{from:"MBR",to:"AL",value:"42"}}}]},"register-transfer":{title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU",steps:[{id:"source-read",title:"Leer Registro Origen",description:"El valor se lee del registro origen",duration:1e3,animation:{type:"highlight",targets:["AL"],data:{value:"25"}}},{id:"bus-transfer",title:"Transferencia por Bus",description:"Los datos viajan por el bus interno",duration:1500,animation:{type:"flow",targets:["AL","BL"],data:{from:"AL",to:"BL",value:"25"}}},{id:"destination-write",title:"Escribir Registro Destino",description:"El valor se almacena en el registro destino",duration:1e3,animation:{type:"transform",targets:["BL"],data:{newValue:"25"}}}]},"alu-operation":{title:"Operación ALU",description:"Proceso de operación aritmética o lógica",steps:[{id:"operand-load",title:"Cargar Operandos",description:"Los operandos se cargan en la ALU",duration:1500,animation:{type:"highlight",targets:["AL","BL"],data:{operand1:"10",operand2:"05"}}},{id:"operation-execute",title:"Ejecutar Operación",description:"La ALU realiza la operación",duration:2e3,animation:{type:"sequence",targets:["ALU"],data:{operation:"ADD",result:"15"}}},{id:"result-store",title:"Almacenar Resultado",description:"El resultado se guarda en el registro destino",duration:1500,animation:{type:"transform",targets:["AL"],data:{newValue:"15"}}}]},"bus-communication":{title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus",steps:[{id:"bus-request",title:"Solicitud de Bus",description:"Un componente solicita acceso al bus",duration:1e3,animation:{type:"highlight",targets:["CPU"],data:{requesting:!0}}},{id:"bus-grant",title:"Concesión de Bus",description:"El bus se concede al componente solicitante",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{granted:!0}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se transfieren por el bus",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{data:"A1B2",direction:"CPU-to-Memory"}}},{id:"bus-release",title:"Liberación de Bus",description:"El bus se libera para otros componentes",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{released:!0}}}]}},oF=x.memo(({concept:t,onClose:e,className:n})=>{const[i,r]=x.useState(0),[s,o]=x.useState(!1),[a,l]=x.useState(!1),[c,u]=x.useState(!1),d=ble[t],f=d.steps[i],p=i===0,m=i===d.steps.length-1;x.useEffect(()=>{if(s){const C=setTimeout(()=>{m?o(!1):r(E=>E+1)},f.duration);return()=>clearTimeout(C)}},[s,i,m,f.duration]);const g=x.useCallback(()=>{m||r(C=>C+1)},[m]),v=x.useCallback(()=>{p||r(C=>C-1)},[p]),y=x.useCallback(()=>{r(0),o(!1)},[]),b=x.useCallback(()=>{o(!s)},[s]),w=x.useCallback(()=>{l(!a)},[a]),k=()=>{const{type:C,targets:E,data:_}=f.animation;switch(C){case"highlight":return h.jsxs("div",{className:"relative",children:[E.map((N,M)=>h.jsx("div",{className:"absolute inset-0 border-2 border-mantis-400 bg-mantis-400/20 rounded animate-pulse",style:{animationDelay:`${M*200}ms`}},M)),_&&h.jsx("div",{className:"absolute top-2 right-2 bg-mantis-500 text-white px-2 py-1 rounded text-xs",children:Object.entries(_).map(([N,M])=>h.jsxs("div",{children:[N,": ",String(M)]},N))})]});case"flow":return h.jsxs("div",{className:"relative",children:[h.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${"from"in _&&_.from||"0,0"} L ${"to"in _&&_.to||"100,100"}`,stroke:"url(#flowGradient)",strokeWidth:"3",strokeDasharray:"10,5",className:"animate-pulse"})]}),"value"in _&&_.value&&h.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:h.jsx("div",{className:"bg-mantis-500 text-white px-2 py-1 rounded text-xs font-mono",children:_.value})})]});case"transform":return h.jsxs("div",{className:"relative",children:[E.map((N,M)=>h.jsx("div",{className:"absolute inset-0 bg-mantis-400/30 rounded animate-ping",style:{animationDelay:`${M*300}ms`}},M)),"newValue"in _&&_.newValue&&h.jsxs("div",{className:"absolute top-2 left-2 bg-mantis-500 text-white px-2 py-1 rounded text-xs font-mono",children:["Nuevo: ",_.newValue]})]});case"sequence":return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"bg-mantis-500 text-white px-4 py-2 rounded-lg text-sm font-mono",children:"operation"in _&&_.operation?_.operation:"Operación"})}),"result"in _&&_.result&&h.jsxs("div",{className:"absolute bottom-2 right-2 bg-green-500 text-white px-2 py-1 rounded text-xs font-mono",children:["= ",_.result]})]});default:return null}};return h.jsx("div",{className:ee("fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",a&&"p-0",n),children:h.jsxs("div",{className:ee("bg-stone-900 border border-stone-600 rounded-lg shadow-xl",a?"w-full h-full":"max-w-4xl w-full max-h-[90vh]"),children:[h.jsxs("div",{className:"p-4 border-b border-stone-600",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:d.title}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(kt,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"text-stone-400 hover:text-mantis-400",children:h.jsx($e,{icon:pL})}),h.jsx(kt,{variant:"ghost",size:"sm",onClick:w,className:"text-stone-400 hover:text-mantis-400",children:h.jsx($e,{icon:a?SY:DY})}),h.jsx(kt,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"×"})]})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-400",children:[h.jsxs("span",{children:["Paso ",i+1," de ",d.steps.length]}),h.jsx("span",{children:"•"}),h.jsxs("span",{children:[f.duration/1e3,"s"]})]}),h.jsx("div",{className:"mt-3 w-full bg-stone-700 rounded-full h-2",children:h.jsx("div",{className:"bg-mantis-500 h-2 rounded-full transition-all duration-300",style:{width:`${(i+1)/d.steps.length*100}%`}})})]}),h.jsxs("div",{className:"p-4 flex-1",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"text-md font-medium text-white mb-2",children:f.title}),h.jsx("p",{className:"text-stone-300 text-sm",children:f.description})]}),h.jsxs("div",{className:"relative bg-stone-800 rounded-lg border border-stone-600 h-64 overflow-hidden",children:[k(),c&&h.jsxs("div",{className:"absolute top-2 left-2 bg-stone-900/90 border border-stone-600 rounded p-3 max-w-xs",children:[h.jsx("h4",{className:"font-medium text-mantis-400 mb-2",children:"Información"}),h.jsx("p",{className:"text-xs text-stone-300",children:d.description}),h.jsxs("div",{className:"mt-2 text-xs text-stone-400",children:[h.jsxs("div",{children:["Tipo de animación: ",f.animation.type]}),h.jsxs("div",{children:["Elementos: ",f.animation.targets.join(", ")]})]})]})]})]}),h.jsx("div",{className:"p-4 border-t border-stone-600",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(kt,{variant:"outline",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx($e,{icon:EY}),"Reiniciar"]}),h.jsx(kt,{variant:"outline",size:"sm",onClick:v,disabled:p,className:"flex items-center gap-1",children:"Anterior"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(kt,{variant:"outline",size:"sm",onClick:b,className:"flex items-center gap-1",children:[h.jsx($e,{icon:s?zy:bd}),s?"Pausar":"Reproducir"]}),h.jsx(kt,{variant:"outline",size:"sm",onClick:g,disabled:m,className:"flex items-center gap-1",children:"Siguiente"})]})]})})]})})});oF.displayName="ConceptVisualizer";const aF=x.memo(({className:t,isOpen:e=!1,onClose:n,onShowProgress:i})=>{const[r,s]=x.useState(!1),[o,a]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,p]=x.useState(null),[m,g]=x.useState(null),v=_=>{console.log("Tutorial seleccionado:",_),p(_),c(!0)},y=_=>{g(_),d(!0)},b=_=>{c(!1),p(null)},w=()=>{d(!1),g(null)},k=[{id:"progress",title:"Progreso Educativo",description:"Ver logros y estadísticas de aprendizaje",icon:vL,color:"text-yellow-400",action:()=>i==null?void 0:i()},{id:"tutorials",title:"Tutoriales Interactivos",description:"Aprende paso a paso con ejercicios",icon:UY,color:"text-blue-400",action:()=>s(!r)},{id:"visualizations",title:"Visualizaciones",description:"Ver conceptos en acción",icon:Fw,color:"text-green-400",action:()=>a(!o)},{id:"concepts",title:"Conceptos Educativos",description:"Explorar tooltips informativos",icon:fc,color:"text-purple-400",action:()=>{alert("Haz hover sobre los elementos de la interfaz para ver explicaciones educativas. Los tooltips se adaptan a tu nivel de conocimiento."),n==null||n()}}],C=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Conceptos básicos de CPU y registros",difficulty:"Básico",duration:"10 min"},{id:"memory-basics",title:"Memoria RAM",description:"Funcionamiento de la memoria principal",difficulty:"Básico",duration:"8 min"},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Fases fetch-decode-execute",difficulty:"Intermedio",duration:"15 min"}],E=[{id:"fetch-decode-execute",title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción"},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM"},{id:"register-transfer",title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU"},{id:"alu-operation",title:"Operación ALU",description:"Proceso de operación aritmética o lógica"},{id:"bus-communication",title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus"}];return h.jsxs(h.Fragment,{children:[e&&h.jsx("div",{className:"fixed bottom-12 left-1/2 transform -translate-x-1/2 z-50",children:h.jsxs("div",{className:"bg-stone-900 border border-stone-600 rounded-lg shadow-xl p-4 min-w-80",children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-mantis-400 mb-1",children:"Centro de Aprendizaje"}),h.jsx("p",{className:"text-sm text-stone-400",children:"Explora herramientas educativas interactivas"})]}),h.jsx("div",{className:"space-y-2",children:k.map(_=>h.jsx("div",{children:_.id==="tutorials"?h.jsxs("div",{children:[h.jsxs("button",{onClick:_.action,className:ee("w-full text-left p-3 rounded-lg border border-stone-600 hover:bg-stone-800","transition-all duration-200 flex items-center gap-3"),children:[h.jsx($e,{icon:_.icon,className:ee("text-lg",_.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:_.title}),h.jsx("div",{className:"text-sm text-stone-400",children:_.description})]}),h.jsx($e,{icon:bd,className:ee("text-stone-400 text-sm",r&&"text-blue-400")})]}),r&&h.jsx("div",{className:"mt-2 ml-8 space-y-1",children:C.map(N=>h.jsx("button",{onClick:()=>v(N.id),className:"w-full text-left p-2 rounded border border-stone-700 hover:bg-stone-800 transition-colors",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:N.title}),h.jsx("div",{className:"text-xs text-stone-400",children:N.description})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-xs text-blue-400",children:N.difficulty}),h.jsx("div",{className:"text-xs text-stone-500",children:N.duration})]})]})},N.id))})]}):_.id==="visualizations"?h.jsxs("div",{children:[h.jsxs("button",{onClick:_.action,className:ee("w-full text-left p-3 rounded-lg border border-stone-600 hover:bg-stone-800","transition-all duration-200 flex items-center gap-3"),children:[h.jsx($e,{icon:_.icon,className:ee("text-lg",_.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:_.title}),h.jsx("div",{className:"text-sm text-stone-400",children:_.description})]}),h.jsx($e,{icon:Fw,className:ee("text-stone-400 text-sm",o&&"text-green-400")})]}),o&&h.jsx("div",{className:"mt-2 ml-8 space-y-1",children:E.map(N=>h.jsx("button",{onClick:()=>y(N.id),className:"w-full text-left p-2 rounded border border-stone-700 hover:bg-stone-800 transition-colors",children:h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:N.title}),h.jsx("div",{className:"text-xs text-stone-400",children:N.description})]})},N.id))})]}):h.jsxs("button",{onClick:_.action,className:ee("w-full text-left p-3 rounded-lg border border-stone-600 hover:bg-stone-800","transition-all duration-200 flex items-center gap-3"),children:[h.jsx($e,{icon:_.icon,className:ee("text-lg",_.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:_.title}),h.jsx("div",{className:"text-sm text-stone-400",children:_.description})]})]})},_.id))}),h.jsx("div",{className:"mt-4 pt-3 border-t border-stone-600",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsx("span",{children:"Herramientas educativas"}),h.jsx("span",{children:"VonSim8"})]})})]})}),l&&f&&(()=>{const _=yle.find(N=>N.id===f);return console.log("Tutorial encontrado:",_),_?h.jsx(sF,{tutorial:_,onComplete:b,onClose:()=>{console.log("Cerrando tutorial"),c(!1),p(null)}}):(console.error("Tutorial no encontrado:",f),null)})(),u&&m&&h.jsx(oF,{concept:m,onClose:w})]})});aF.displayName="EducationalMenu";const wle=()=>({handleShowTour:x.useCallback(()=>{window.startWelcomeTour?window.startWelcomeTour():(localStorage.removeItem("vonsim8-tour-completed"),window.location.reload())},[])}),lF=x.memo(({status:t})=>{const e=x.useMemo(()=>t.type==="running"?"Ejecutando":"Detenido",[t.type]),n=x.useMemo(()=>t.type==="running"?"bg-green-600":"bg-stone-600",[t.type]);return h.jsx("div",{className:"flex items-center gap-2 text-xs",children:h.jsxs("div",{className:ee("flex items-center gap-1.5 rounded-full px-2 py-1 text-white font-medium",n,t.type==="running"&&"animate-pulse-glow"),children:[h.jsx("div",{className:ee("size-2 rounded-full",t.type==="running"?"bg-green-300":"bg-stone-300")}),e]})})});lF.displayName="SimulationStatus";const cF=x.memo(({onShowTour:t,onToggleSettings:e,settingsOpen:n,onToggleEducational:i,educationalOpen:r})=>{const s=Mt();return h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(N8,{}),h.jsx(hc,{content:"Centro de aprendizaje",position:"bottom",children:h.jsx(i0,{icon:h.jsx($e,{icon:Bp,className:"size-4"}),onClick:i,variant:r?"secondary":"ghost",size:"md","aria-label":"Centro de aprendizaje",className:ee("hover-lift",r&&"animate-pulse-glow"),"data-testid":"educational-button"})}),h.jsx(hc,{content:"Mostrar tour de bienvenida",position:"bottom",children:h.jsx(i0,{icon:h.jsx($e,{icon:TY,className:"size-4"}),onClick:t,variant:"ghost",size:"md","aria-label":"Mostrar tour de bienvenida",className:"hover-lift"})}),h.jsx(hc,{content:s("settings.title"),position:"bottom",children:h.jsx(i0,{icon:h.jsx("span",{className:"icon-[lucide--settings] block size-5"}),onClick:e,variant:n?"secondary":"ghost",size:"md","aria-label":s("settings.title"),className:ee("hover-lift",n&&"animate-pulse-glow"),"data-testid":"settings-button"})})]})});cF.displayName="ActionButtons";const uF=x.memo(()=>{const[t,e]=jp(_b),[n,i]=x.useState(!1),[r,s]=x.useState(!1),{status:o}=_n(),{handleShowTour:a}=wle(),l=x.useCallback(()=>{e(f=>!f)},[e]),c=x.useCallback(()=>{i(f=>!f)},[]),u=x.useCallback(()=>{s(f=>!f)},[]),d=x.useMemo(()=>h.jsxs("div",{className:"flex select-none items-center justify-center hover-scale",children:[h.jsx("img",{src:"/VonSim8/favicon.svg",className:"mr-2 size-8",style:{filter:"none",opacity:1},draggable:!1,alt:"VonSim8 Logo"}),h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("h1",{className:"text-lg font-bold max-sm:hidden",children:["Von",h.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]}),h.jsx("span",{className:"text-xs text-stone-400 max-sm:hidden",children:"Simulador de 8 bits"})]})]}),[]);return h.jsxs(h.Fragment,{children:[h.jsx("header",{className:"relative p-2 text-sm text-white bg-black","data-testid":"header",children:h.jsxs("div",{className:"grid grid-cols-3 items-center",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[d,h.jsx(lF,{status:o})]}),h.jsx("div",{className:"flex justify-center",children:h.jsx(Gre,{})}),h.jsx("div",{className:"flex justify-end",children:h.jsx(cF,{onShowTour:a,onToggleSettings:l,settingsOpen:t,onToggleEducational:c,educationalOpen:n})})]})}),n&&h.jsx(aF,{isOpen:n,onClose:()=>i(!1),onShowProgress:u}),r&&h.jsx(rF,{isVisible:r,onClose:()=>s(!1)})]})});uF.displayName="Header";const xle=[{key:"F7",description:"Ejecutar un ciclo",category:"Simulación"},{key:"F8",description:"Ejecutar una instrucción completa",category:"Simulación"},{key:"F4",description:"Ejecución infinita",category:"Simulación"},{key:"F9",description:"Resetear simulación",category:"Simulación"},{key:"Espacio",description:"Pausar/Reanudar (cuando está ejecutando)",category:"Simulación"},{key:"Ctrl+S",description:"Guardar archivo",category:"Editor"},{key:"Ctrl+O",description:"Abrir archivo",category:"Editor"},{key:"Ctrl+N",description:"Nuevo archivo",category:"Editor"},{key:"Ctrl+Z",description:"Deshacer",category:"Editor"},{key:"Ctrl+Y",description:"Rehacer",category:"Editor"},{key:"Ctrl+F",description:"Buscar",category:"Editor"},{key:"Ctrl+H",description:"Reemplazar",category:"Editor"},{key:"Tab",description:"Indentar",category:"Editor"},{key:"Shift+Tab",description:"Desindentar",category:"Editor"},{key:"F1",description:"Mostrar atajos de teclado",category:"Navegación"},{key:"F2",description:"Abrir configuración",category:"Navegación"},{key:"F3",description:"Buscar en el código",category:"Navegación"},{key:"F5",description:"Actualizar página",category:"Navegación"},{key:"F6",description:"Cambiar foco al editor",category:"Navegación"},{key:"Escape",description:"Cerrar diálogos",category:"Interfaz"},{key:"Ctrl+Shift+P",description:"Paleta de comandos",category:"Interfaz"},{key:"Ctrl+B",description:"Mostrar/ocultar barra lateral",category:"Interfaz"},{key:"Ctrl+J",description:"Mostrar/ocultar terminal",category:"Interfaz"},{key:"Ctrl++",description:"Zoom in",category:"Vista"},{key:"Ctrl+-",description:"Zoom out",category:"Vista"},{key:"Ctrl+0",description:"Resetear zoom",category:"Vista"},{key:"Ctrl+Shift+Z",description:"Zoom a la selección",category:"Vista"},{key:"F12",description:"Herramientas de desarrollador",category:"Desarrollo"},{key:"Ctrl+Shift+I",description:"Inspeccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+C",description:"Seleccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+J",description:"Consola",category:"Desarrollo"},{key:"Ctrl+Shift+M",description:"Vista móvil",category:"Desarrollo"}],Sle=()=>{const[t,e]=x.useState(!1),n=x.useCallback(()=>{e(!0)},[]),i=x.useCallback(()=>{e(!1)},[]);return x.useEffect(()=>{const r=s=>{s.key==="F1"&&(s.preventDefault(),n())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n]),{isOpen:t,openModal:n,closeModal:i}},kle=()=>x.useMemo(()=>{const t=xle.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return Object.entries(t).sort(([e],[n])=>e.localeCompare(n))},[]),dF=x.memo(({shortcut:t})=>h.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-stone-800 p-3 hover:bg-stone-700 transition-colors",children:[h.jsx("span",{className:"text-sm text-stone-300",children:t.description}),h.jsx("kbd",{className:"rounded bg-stone-700 px-2 py-1 text-xs font-mono text-white border border-stone-600",children:t.key})]}));dF.displayName="ShortcutItem";const fF=x.memo(({category:t,shortcuts:e})=>h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"text-lg font-semibold text-mantis-400 border-b border-stone-600 pb-2",children:t}),h.jsx("div",{className:"space-y-2",children:e.map((n,i)=>h.jsx(dF,{shortcut:n},`${t}-${i}`))})]}));fF.displayName="ShortcutCategory";const hF=x.memo(()=>{const{isOpen:t,closeModal:e}=Sle(),n=kle(),i=x.useCallback(s=>{s.target===s.currentTarget&&e()},[e]),r=x.useCallback(s=>{s.key==="Escape"&&e()},[e]);return x.useEffect(()=>{if(t)return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,r]),t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:i,children:h.jsxs("div",{className:"w-full max-w-4xl max-h-[80vh] rounded-lg border border-stone-600 bg-stone-900 shadow-xl overflow-hidden",children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"icon-[lucide--keyboard] size-6 text-mantis-400"}),h.jsx("h2",{className:"text-xl font-semibold text-white",children:"Atajos de Teclado"})]}),h.jsx("button",{onClick:e,className:"rounded p-2 text-stone-400 hover:text-white transition-colors",children:h.jsx($e,{icon:Uy,size:"lg"})})]}),h.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(80vh-80px)]",children:h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(([s,o])=>h.jsx(fF,{category:s,shortcuts:o},s))})}),h.jsx("div",{className:"border-t border-stone-600 p-4 bg-stone-800",children:h.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-400",children:[h.jsxs("span",{children:["Presiona ",h.jsx("kbd",{className:"rounded bg-stone-700 px-1 py-0.5 text-xs font-mono border border-stone-600",children:"F1"})," para abrir este diálogo"]}),h.jsx(kt,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"Cerrar"})]})})]})}):null});hF.displayName="KeyboardShortcuts";de(!1);const wh=[{id:"welcome",target:"app-container",title:"¡Bienvenido a VonSim8!",content:"Te acompañaré en un recorrido por las funciones principales de la plataforma. VonSim8 es un simulador de computadora de 8 bits que te permite programar en lenguaje ensamblador y ver cómo funciona internamente una computadora.",icon:kY,position:"top"},{id:"header",target:"header",title:"Barra de Navegación",content:"Aquí encontrarás el logo, el estado de la simulación, los controles principales y acceso a notificaciones, tour de ayuda y configuración.",icon:"icon-[lucide--navigation]",position:"bottom"},{id:"controls",target:"controls-container",title:"Controles de Simulación",content:"Controla la simulación: F7 (ejecutar ciclo), F8 (ejecutar instrucción), F4 (ejecución infinita), F9 (resetear). También puedes usar los botones visuales.",icon:"icon-[lucide--cpu]",position:"bottom"},{id:"editor-buttons",target:"panel-editor",title:"Editor de Código",content:"Aquí es donde escribirás tu código ensamblador. El editor tiene resaltado de sintaxis, autocompletado y validación en tiempo real. Usa los botones de arriba para crear, abrir, guardar y ensamblar tu programa.",icon:"icon-[lucide--file-terminal]",position:"right"},{id:"computer-view",target:"panel-computer",title:"Simulador de Computadora",content:"Aquí verás la computadora virtual con CPU, memoria RAM, registros, ALU, buses de datos y control, y todos los periféricos como pantalla, teclado, LEDs y switches.",icon:"icon-[lucide--monitor]",position:"left"},{id:"cpu-architecture",target:"cpu-component",title:"Arquitectura CPU",content:"Observa cómo la CPU ejecuta instrucciones paso a paso: fetch, decode, execute. Ve los valores en los registros, el contador de programa y el estado de las banderas.",icon:"icon-[lucide--microchip]",position:"left"},{id:"memory-ram",target:"memory-component",title:"Memoria RAM",content:"Explora la memoria RAM de 256 bytes. Ve cómo se almacenan datos e instrucciones, y cómo la CPU accede a diferentes direcciones de memoria. Cada celda muestra su dirección y valor en hexadecimal.",icon:"icon-[lucide--database]",position:"left"},{id:"settings-button",target:"settings-button",title:"Botón de Configuración",content:"Haz clic en este engranaje para acceder a las configuraciones avanzadas. Aquí podrás ajustar la velocidad de simulación, cambiar el tema visual, seleccionar el idioma y personalizar atajos de teclado.",icon:"icon-[lucide--settings]",position:"bottom"},{id:"settings-panel",target:"panel-settings",title:"Panel de Configuración",content:"En este panel encontrarás todas las opciones de configuración organizadas por categorías: simulación, interfaz, idioma y atajos de teclado. Los cambios se aplican automáticamente.",icon:"icon-[lucide--settings]",position:"left"},{id:"footer",target:"footer-links",title:"Recursos y Soporte",content:"Encuentra documentación completa, código fuente en GitHub, reporta bugs y accede a recursos de aprendizaje para dominar la programación en ensamblador.",icon:"icon-[lucide--help-circle]",position:"top"},{id:"final",target:"cycle-button",title:"¡Listo para Programar!",content:"Ya conoces las funciones principales de VonSim8. Comienza escribiendo código en el editor, ejecuta la simulación paso a paso con el botón 'Por Ciclo' y observa cómo funciona tu programa en la computadora virtual. ¡Disfruta programando!",icon:"icon-[lucide--rocket]",position:"bottom"}],_le=()=>{const[t,e]=x.useState(0),[n,i]=x.useState(!1),[r,s]=x.useState(!0),[,o]=jp(_b),a=x.useMemo(()=>t===wh.length-1,[t]),l=x.useMemo(()=>t===0,[t]),c=x.useCallback(()=>{i(!1),localStorage.setItem("vonsim8-tour-completed","true")},[]),u=x.useCallback(()=>{e(m=>Math.min(m+1,wh.length-1))},[]),d=x.useCallback(()=>{e(m=>Math.max(m-1,0))},[]),f=x.useCallback(()=>{c()},[c]),p=x.useCallback(()=>{i(!0),e(0)},[]);return x.useEffect(()=>{},[]),x.useEffect(()=>{const m=wh[t],g=document.querySelector(`[data-testid="${m.target}"]`);s(!!g),m.id==="settings-button"?o(!0):m.id!=="settings-panel"&&m.id!=="settings-button"&&o(!1)},[t,o]),{currentStep:t,isVisible:n,isLastStep:a,isFirstStep:l,handleNext:u,handlePrev:d,handleSkip:f,completeTour:c,startTour:p,targetFound:r}},Cle=t=>x.useMemo(()=>{const e=document.querySelector(`[data-testid="${t.target}"]`);if(!e)return null;const n=e.getBoundingClientRect(),i=window.innerWidth,r=window.innerHeight;if(t.id==="welcome"&&t.position==="top")return{positionStyles:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},highlightStyles:{top:0,left:0,width:"100vw",height:"100vh"}};if(t.id==="footer"){let m=n.top-200-60,g=n.right+20;const v="translateX(0)";m<40&&(m=40),m+200>r-100&&(m=Math.max(40,r/2-200/2)),g+320>i&&(g=i-320-20);const y={top:m,left:g,transform:v},b={top:n.top-2,left:n.left-2,width:n.width+4,height:n.height+4};return{positionStyles:y,highlightStyles:b}}let s,o,a;switch(t.position){case"top":s=n.top-20,o=n.left+n.width/2,a="translateX(-50%)";break;case"bottom":s=n.bottom+20,o=n.left+n.width/2,a="translateX(-50%)";break;case"left":s=n.top+n.height/2,o=n.left-20,a="translateY(-50%)";break;case"right":s=n.top+n.height/2,o=n.right+20,a="translateY(-50%)";break}const l=320,c=200;o+l/2>i?o=i-l/2-20:o-l/2<0&&(o=l/2+20),s+c>r?s=r-c-20:s<0&&(s=20);const u={top:s,left:o,transform:a},d={top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16};return{positionStyles:u,highlightStyles:d}},[t]),pF=x.memo(({current:t,total:e})=>h.jsx("div",{className:"mb-2 w-full h-2 bg-stone-700 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-mantis-500 transition-all duration-300",style:{width:`${(t+1)/e*100}%`}})}));pF.displayName="ProgressBar";const mF=x.memo(({step:t,currentStep:e,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:l,targetFound:c})=>{const u=Cle(t),d=x.useRef(null);x.useEffect(()=>{var g;(g=d.current)==null||g.focus()},[e]);const f="animate-fade-in";if(!c||!u)return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:h.jsxs("div",{className:"rounded-lg bg-stone-900 p-8 text-center shadow-2xl border-2 border-mantis-400 max-w-sm",children:[h.jsx($e,{icon:VS,className:"mb-4 text-4xl text-yellow-400"}),h.jsx("h3",{className:"mb-2 text-lg font-semibold text-mantis-400",children:"Elemento no encontrado"}),h.jsx("p",{className:"mb-4 text-stone-300",children:"No se pudo encontrar el elemento de la interfaz para este paso del tour."}),h.jsx(kt,{onClick:o,className:"bg-mantis-600 hover:bg-mantis-700",children:"Saltar tour"})]})});const{positionStyles:p,highlightStyles:m}=u;return h.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",children:h.jsxs("div",{className:"relative size-full",children:[h.jsx("div",{className:"absolute rounded-lg border-2 border-mantis-400 bg-transparent shadow-2xl transition-all duration-300",style:m}),h.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true",className:`absolute max-w-sm rounded-lg bg-stone-900 p-6 text-white shadow-xl border border-mantis-400 focus:outline-none ${f}`,style:p,children:[h.jsx(pF,{current:e,total:l}),h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.icon&&(typeof t.icon=="string"?h.jsx("span",{className:`${t.icon} text-2xl text-mantis-400`}):h.jsx($e,{icon:t.icon,className:"text-2xl text-mantis-400"})),h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:t.title})]}),h.jsx("p",{className:"mb-4 text-sm text-stone-300",children:t.content}),h.jsxs("div",{className:"flex items-center justify-between mt-4 gap-2",children:[h.jsx(kt,{variant:"ghost",size:"sm",onClick:o,className:"text-stone-400 hover:text-white","aria-label":"Saltar tour",children:"Saltar"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(kt,{variant:"outline",size:"sm",onClick:s,disabled:i,className:"flex items-center gap-1","aria-label":"Anterior",children:[h.jsx($e,{icon:jY}),"Anterior"]}),n?h.jsxs(kt,{size:"sm",onClick:a,className:"bg-mantis-600 hover:bg-mantis-700 flex items-center gap-1","aria-label":"Finalizar",children:["Finalizar",h.jsx($e,{icon:NY})]}):h.jsxs(kt,{size:"sm",onClick:r,className:"bg-mantis-600 hover:bg-mantis-700 flex items-center gap-1","aria-label":"Siguiente",children:["Siguiente",h.jsx($e,{icon:$Y})]})]})]}),h.jsxs("div",{className:"mt-2 text-xs text-stone-500 text-right",children:["Paso ",e+1," de ",l]}),h.jsx("button",{onClick:o,className:"absolute top-2 right-2 rounded p-1 text-stone-400 hover:text-white focus:outline-none","aria-label":"Cerrar",children:h.jsx($e,{icon:Uy,size:"sm"})})]})]})})});mF.displayName="TourTooltip";const gF=x.memo(()=>{const{currentStep:t,isVisible:e,isLastStep:n,isFirstStep:i,handleNext:r,handlePrev:s,handleSkip:o,completeTour:a,startTour:l,targetFound:c}=_le();x.useEffect(()=>(window.startWelcomeTour=l,()=>{delete window.startWelcomeTour}),[l]);const u=x.useMemo(()=>wh[t],[t]);return x.useEffect(()=>{if(!e)return;const d=f=>{f.key==="Escape"&&o(),f.key==="ArrowRight"&&r(),f.key==="ArrowLeft"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,o,r,s]),!e||!u?null:h.jsx(mF,{step:u,currentStep:t,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:wh.length,targetFound:c})});gF.displayName="WelcomeTour";var Mr=function(t,e){return Number(t.toFixed(e))},Ele=function(t,e){return e},zt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},Ale=function(t){return-Math.cos(t*Math.PI)/2+.5},Nle=function(t){return t},Ple=function(t){return t*t},Mle=function(t){return t*(2-t)},Tle=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},Rle=function(t){return t*t*t},Ole=function(t){return--t*t*t+1},Ile=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},Dle=function(t){return t*t*t*t},Lle=function(t){return 1- --t*t*t*t},jle=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},$le=function(t){return t*t*t*t*t},Fle=function(t){return 1+--t*t*t*t*t},Ble=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},vF={easeOut:Ale,linear:Nle,easeInQuad:Ple,easeOutQuad:Mle,easeInOutQuad:Tle,easeInCubic:Rle,easeOutCubic:Ole,easeInOutCubic:Ile,easeInQuart:Dle,easeOutQuart:Lle,easeInOutQuart:jle,easeInQuint:$le,easeOutQuint:Fle,easeInOutQuint:Ble},yF=function(t){typeof t=="number"&&cancelAnimationFrame(t)},is=function(t){t.mounted&&(yF(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function bF(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;is(t),t.animation=function(){if(!t.mounted)return yF(t.animation);var o=new Date().getTime()-r,a=o/n,l=vF[e],c=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function zle(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function El(t,e,n,i){var r=zle(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):bF(t,i,n,function(p){var m=a+u*p,g=l+d*p,v=c+f*p;s(m,g,v)})}}function Ule(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=i-a,u=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var Vle=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,c=t-e-a,u=a,d=i-r-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},mE=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=Ule(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=Vle(o,l,c,a,u,d,!!r);return f},rk=function(t,e,n,i){return i?t<e?Mr(e,2):t>n?Mr(n,2):Mr(t,2):Mr(t,2)},mc=function(t,e){var n=mE(t,e);return t.bounds=n,n};function Qp(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=r,f=s);var p=rk(t,a-d,c+d,i),m=rk(e,l-f,u+f,i);return{x:p,y:m}}function Cb(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,p=Qp(d,f,r,s,0,0,null);return p}function em(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var WM=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var c=Eb(s,n);return!c},GM=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},Hle=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},Wle=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function Gle(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,p=u.maxPositionY,m=u.minPositionY,g=n>d||n<f,v=i>p||i<m,y=n>d?c.offsetWidth:t.setup.minPositionX||0,b=i>p?c.offsetHeight:t.setup.minPositionY||0,w=Cb(t,y,b,r,t.bounds,a||l),k=w.x,C=w.y;return{scale:r,positionX:g?k:n,positionY:v?C:i}}}function wF(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=Qp(e,n,a,s,i,r,o),p=f.x,m=f.y;t.setTransformState(c,p,m)}}var Kle=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,c=r.positionY;if(!i)return{x:l,y:c};var u=e-i.x,d=n-i.y,f=o?l:u,p=a?c:d;return{x:f,y:p}},ml=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},qle=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},Yle=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!i)};function Xle(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function KM(t,e,n,i,r,s,o,a,l,c){if(r){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return i?e:rk(t,s,o,r)}function Jle(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function Zle(t,e){var n=qle(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var c=Jle(o,a),u=e.x-i.x,d=e.y-i.y,f=u/c,p=d/c,m=l-r,g=u*u+d*d,v=Math.sqrt(g)/m;t.velocity={velocityX:f,velocityY:p,total:v}}t.lastMousePosition=e,t.velocityTime=l}}function Qle(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=Yle(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,p=i.limitToBounds,m=i.alignmentAnimation,g=i.zoomAnimation,v=i.panning,y=v.lockAxisY,b=v.lockAxisX,w=g.animationType,k=m.sizeX,C=m.sizeY,E=m.velocityAlignmentTime,_=E,N=Xle(t,l),M=Math.max(N,_),R=ml(t,k),I=ml(t,C),D=R*r.offsetWidth/100,K=I*r.offsetHeight/100,B=c+D,W=u-D,Y=d+K,te=f-K,V=t.transformState,$=new Date().getTime();bF(t,w,M,function(ie){var ke=t.transformState,Z=ke.scale,le=ke.positionX,j=ke.positionY,L=new Date().getTime()-$,U=L/_,S=vF[m.animationType],P=1-S(Math.min(1,U)),O=1-ie,T=le+o*O,q=j+a*O,H=KM(T,V.positionX,le,b,p,u,c,W,B,P),ne=KM(q,V.positionY,j,y,p,f,d,te,Y,P);(le!==T||j!==q)&&t.setTransformState(Z,H,ne)})}}function qM(t,e){var n=t.transformState.scale;is(t),mc(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?Wle(t,e):Hle(t,e)}function gE(t,e){var n=t.transformState.scale,i=t.setup,r=i.minScale,s=i.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,c=s.animationTime,u=s.animationType,d=o||n<r||!a&&!l;if(!d){var f=Gle(t);f&&El(t,f,e??c,u)}}function YM(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=Kle(t,e,n),c=l.x,u=l.y,d=ml(t,o),f=ml(t,a);Zle(t,{x:c,y:u}),wF(t,c,u,d,f)}}function ece(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?Qle(t):gE(t)}}function vE(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=em(Mr(e,2),s,o,0,!1),c=mc(t,l),u=Cb(t,n,i,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function xF(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||i>=o;if((i>=1||a)&&gE(t),!(f||!r||!t.mounted)){var p=e||r.offsetWidth/2,m=n||r.offsetHeight/2,g=vE(t,o,p,m);g&&El(t,g,u,d)}}var Xa=function(){return Xa=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xa.apply(this,arguments)};function XM(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var wg={scale:1,positionX:0,positionY:0},wf={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},sk={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},SF=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:wg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:wg.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:wg.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:wg.positionY}},JM=function(t){var e=Xa({},wf);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof wf[n]<"u";if(r&&i){var s=Object.prototype.toString.call(wf[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=Xa(Xa({},wf[n]),t[n]):a?e[n]=XM(XM([],wf[n],!0),t[n]):e[n]=t[n]}}),e},kF=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=c?i*Math.exp(e*n):i+e*n,f=em(Mr(d,3),a,o,u,!1);return f};function _F(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,p=(d/2-c)/a,m=kF(t,e,n),g=vE(t,m,f,p);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");El(t,g,i,r)}function CF(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=SF(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=mE(t,a.scale),p=Qp(a.positionX,a.positionY,f,o,0,0,s),m={scale:a.scale,positionX:p.x,positionY:p.y};c===a.scale&&u===a.positionX&&d===a.positionY||(i==null||i(),El(t,m,e,n))}}function tce(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function nce(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!i||!r)return s;var u=i.getBoundingClientRect(),d=e.getBoundingClientRect(),f=tce(e,i,r,s),p=f.x,m=f.y,g=d.width/s.scale,v=d.height/s.scale,y=i.offsetWidth/g,b=i.offsetHeight/v,w=em(n||Math.min(y,b),l,c,0,!1),k=(u.width-g*w)/2,C=(u.height-v*w)/2,E=(u.left-p)*w+k,_=(u.top-m)*w+C,N=mE(t,w),M=Qp(E,_,N,a,0,0,i),R=M.x,I=M.y;return{positionX:R,positionY:I,scale:w}}var ice=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),_F(t,1,e,n,i)}},rce=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),_F(t,-1,e,n,i)}},sce=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var p={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?c:i};El(t,p,r,s)}}},oce=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),CF(t,e,n)}},ace=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=EF(e||r.scale,s,o);El(t,a,n,i)}}},lce=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),is(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=nce(t,o,n);El(t,a,i,r)}}},ok=function(t){return{instance:t,zoomIn:ice(t),zoomOut:rce(t),setTransform:sce(t),resetTransform:oce(t),centerView:ace(t),zoomToElement:lce(t)}},cce=function(t){return{instance:t,state:t.transformState}},Tt=function(t){var e={};return Object.assign(e,cce(t)),Object.assign(e,ok(t)),e},M1=!1;function T1(){try{var t={get passive(){return M1=!0,!1}};return t}catch{return M1=!1,M1}}var xg=".".concat(sk.wrapperClass),Eb=function(t,e){return e.some(function(n){return t.matches("".concat(xg," ").concat(n,", ").concat(xg," .").concat(n,", ").concat(xg," ").concat(n," *, ").concat(xg," .").concat(n," *"))})},ak=function(t){t&&clearTimeout(t)},uce=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},EF=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function dce(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var fce=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!i&&c;if(!u||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Eb(c,o);return!d},hce=function(t){return t?t.deltaY<0?1:-1:0};function pce(t,e){var n=hce(t),i=Ele(e,n);return i}function AF(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var mce=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,p=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var m=s+e*n,g=i?!1:!p,v=em(Mr(m,3),c,l,f,g&&!d);return v},gce=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},vce=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=Eb(o,r);return!l},yce=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},bce=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Mr(r[0].clientX-i.left,5),o=Mr(r[0].clientY-i.top,5),a=Mr(r[1].clientX-i.left,5),l=Mr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},NF=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},wce=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,c=a.size,u=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,f=d*n;return em(Mr(f,2),o,s,c,!u&&!l)},xce=160,Sce=100,kce=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(is(t),zt(Tt(t),e,i),zt(Tt(t),e,r))},_ce=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,p=o.disablePadding,m=o.smooth,g=d.size,v=d.disabled,y=f.step,b=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=pce(e,null),k=m?b*Math.abs(e.deltaY):y,C=mce(t,w,k,!e.ctrlKey);if(l!==C){var E=mc(t,C),_=AF(e,s,l),N=v||g===0||u||p,M=c&&N,R=Cb(t,_.x,_.y,C,E,M),I=R.x,D=R.y;t.previousWheelEvent=e,t.setTransformState(C,I,D),zt(Tt(t),e,i),zt(Tt(t),e,r)}},Cce=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;ak(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(xF(t,e.x,e.y),t.wheelAnimationTimer=null)},Sce);var s=gce(t,e);s&&(ak(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,zt(Tt(t),e,i),zt(Tt(t),e,r))},xce))},PF=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},Ece=function(t,e){var n=NF(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=PF(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,is(t)},Ace=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,f=c.size;if(!(i===null||!n)){var p=bce(e,s,n);if(!(!Number.isFinite(p.x)||!Number.isFinite(p.y))){var m=NF(e),g=wce(t,m),v=PF(e),y=v.x-(t.pinchLastCenterX||0),b=v.y-(t.pinchLastCenterY||0);if(!(g===s&&y===0&&b===0)){t.pinchLastCenterX=v.x,t.pinchLastCenterY=v.y;var w=mc(t,g),k=d||f===0||l,C=a&&k,E=Cb(t,p.x,p.y,g,w,C),_=E.x,N=E.y;t.pinchMidpoint=p,t.lastDistance=m;var M=u.sizeX,R=u.sizeY,I=ml(t,M),D=ml(t,R),K=_+y,B=N+b,W=Qp(K,B,w,a,I,D,r),Y=W.x,te=W.y;t.setTransformState(g,Y,te)}}}},Nce=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,xF(t,e==null?void 0:e.x,e==null?void 0:e.y)},MF=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;ak(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,zt(Tt(t),e,n)},i)},Pce=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;zt(Tt(t),e,i),CF(t,o,a,function(){return zt(Tt(t),e,r)}),MF(t,e)};function Mce(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function Tce(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,p=u.step,m=u.animationTime,g=u.animationType;if(!d&&!i){if(f==="reset")return Pce(t,e);if(!s)return console.error("No ContentComponent found");var v=Mce(f,t.transformState.scale),y=kF(t,v,p);if(o!==y){zt(Tt(t),e,l);var b=AF(e,s,o),w=vE(t,y,b.x,b.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");zt(Tt(t),e,c),El(t,w,m,g),MF(t,e)}}}var Rce=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=r==null?void 0:r.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=Eb(l,a);return!d},Oce=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,mc(n,n.transformState.scale),n.setup=JM(i)},this.initializeWindowEvents=function(){var i,r,s=T1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=T1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),is(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=T1();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i,r){var s=!1,o=n.setup.centerOnInit,a=function(l,c){for(var u=0,d=l;u<d.length;u++){var f=d[u];if(f.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(Tt(n))}),n.observer=new ResizeObserver(function(l){if(a(l,i)||a(l,r))if(o&&!s){var c=r.offsetWidth,u=r.offsetHeight;(c>0||u>0)&&(s=!0,n.setCenter())}else is(n),mc(n,n.transformState.scale),gE(n,0)}),n.observer.observe(i),n.observer.observe(r)},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=fce(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(kce(n,i),_ce(n,i),Cce(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-i.deltaX,f=u-i.deltaY,p=a.lockAxisX?c:d,m=a.lockAxisY?u:f,g=n.setup.alignmentAnimation,v=g.sizeX,y=g.sizeY,b=ml(n,v),w=ml(n,y);p===c&&m===u||wF(n,p,m,b,w)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=WM(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),is(n),qM(n,i),zt(Tt(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=GM(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),YM(n,i.clientX,i.clientY),zt(Tt(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(ece(n),zt(Tt(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=vce(n,i);l&&(Ece(n,i),is(n),zt(Tt(n),i,o),zt(Tt(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=yce(n);l&&(i.preventDefault(),i.stopPropagation(),Ace(n,i),zt(Tt(n),i,o),zt(Tt(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(Nce(n),zt(Tt(n),i,s),zt(Tt(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=WM(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&i.touches.length===1;if(!a){n.lastTouch=+new Date,is(n);var l=i.touches,c=l.length===1,u=l.length===2;c&&(is(n),qM(n,i),zt(Tt(n),i,s)),u&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=GM(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];YM(n,a.clientX,a.clientY),zt(Tt(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=Rce(n,i);s&&Tce(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=Tt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),zt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=EF(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):uce(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return Tt(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,mc(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(i,r),n.initializeWindowEvents(),n.isInitialized=!0;var s=Tt(n);zt(s,void 0,n.props.onInit)},this.props=e,this.setup=JM(this.props),this.transformState=SF(this.props)}return t}(),yE=Dt.createContext(null),Ice=function(t,e){return typeof t=="function"?t(e):t},Dce=Dt.forwardRef(function(t,e){var n=x.useRef(new Oce(t)).current,i=Ice(t.children,ok(n));return x.useImperativeHandle(e,function(){return ok(n)},[n]),x.useEffect(function(){n.update(t)},[n,t]),Dt.createElement(yE.Provider,{value:n},i)});Dt.forwardRef(function(t,e){var n=x.useRef(null),i=x.useContext(yE);return x.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),Dt.createElement("div",Xa({},t,{ref:dce([n,e])}))});function Lce(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var jce=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,ZM={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Lce(jce);var $ce=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=x.useContext(yE),p=f.init,m=f.cleanupWindowEvents,g=x.useRef(null),v=x.useRef(null);return x.useEffect(function(){var y=g.current,b=v.current;return y!==null&&b!==null&&p&&(p==null||p(y,b)),function(){m==null||m()}},[]),Dt.createElement("div",Xa({},c,{ref:g,className:"".concat(sk.wrapperClass," ").concat(ZM.wrapper," ").concat(i),style:o}),Dt.createElement("div",Xa({},d,{ref:v,className:"".concat(sk.contentClass," ").concat(ZM.content," ").concat(s),style:a}),e))};function Fce({wrapperRef:t}){const e=Mt();return h.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function Bce(){const t=Mt(),e=Ze(ht),n=Ze(mv),i=Ze(ln),r=Ze(Cv),[s]=Jy(),o=x.useRef(null),a=(l,c)=>{const[u,...d]=l.split(":"),f=d.join(":").trim();return{cycle:c,stage:u.trim(),action:f}};return x.useEffect(()=>{if(e){const l=z.get(Ac),c=a(e,l);z.set(mv,u=>[...u,c])}},[e]),x.useEffect(()=>{i.type==="running"&&r&&Pi({title:"El programa ha sido modificado",description:"La ejecución se reiniciará desde el principio para aplicar los cambios.",variant:"info"})},[i,r]),x.useEffect(()=>{const l=o.current;l&&(l.scrollTop=l.scrollHeight)},[n]),s.showInstructionCycle?h.jsxs("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block h-min w-full cursor-move rounded-br-lg rounded-tl-lg border-b border-stone-600 bg-purple-500 px-2 py-1 text-lg text-white",children:t("computer.cpu.instruction-cycle")}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{ref:o,className:"flex max-h-[300px] w-full flex-col overflow-y-auto p-2",children:n.map((l,c)=>{const u=c===0||n[c-1].stage!==l.stage;return h.jsxs("div",{children:[u&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:`mb-2 ${l.stage==="Captación"?"font-serif text-lg text-blue-400":l.stage==="Ejecución"?"font-sans text-lg text-green-400":l.stage==="Interrupción"?"font-mono text-lg text-red-400":"text-sm font-bold text-white"}`,children:["Etapa: ",l.stage]}),l.stage!=="Interrupción"&&h.jsxs("div",{className:"mb-2 flex font-serif text-sm font-bold text-white",children:[h.jsx("div",{className:"w-1/4 text-center",children:"Ciclo"}),h.jsx("div",{className:"w-3/4 text-left",children:"Acción"})]})]}),l.stage==="Interrupción"?h.jsx("div",{className:"mb-1 text-sm text-white",children:l.action}):h.jsxs("div",{className:"mb-1 flex text-sm text-white",children:[h.jsx("div",{className:"w-1/4 text-center",children:l.cycle}),h.jsx("div",{className:"w-3/4 text-left",children:l.action})]})]},c)})})]}):null}function zce(){const t=Mt(),{devices:e}=_n();return e.hasIOBus?h.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function Uce(){const{devices:t}=_n(),e=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),n=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),i="M 750 545 H 800",{path:r,strokeDashoffset:s,opacity:o}=mt("bus.rd"),{path:a,strokeDashoffset:l,opacity:c}=mt("bus.wr");return h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:e}),h.jsx(an.path,{d:r,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:s,opacity:o}}),h.jsx(an.text,{x:"590",y:"410",className:"pointer-events-none fill-red-500 font-mono text-xs font-bold",textAnchor:"middle",style:{opacity:o},children:"Read"}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:n}),h.jsx(an.path,{d:a,className:"fill-none stroke-blue-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:l,opacity:c}}),h.jsx(an.text,{x:"590",y:"455",className:"pointer-events-none fill-blue-500 font-mono text-xs font-bold",textAnchor:"middle",style:{opacity:c},children:"Write"}),t.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(An,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:i}),h.jsx(an.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:i,style:mt("bus.mem")})]}),t.pic&&h.jsx(An,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&h.jsx(An,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&h.jsx(An,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&h.jsx(An,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&h.jsxs(h.Fragment,{children:[h.jsx(An,{springs:"bus.intr",d:"M 110 700 V 470"}),h.jsx(An,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&h.jsx(An,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&h.jsx(An,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&h.jsx(An,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio==="switches-and-leds"&&h.jsxs(h.Fragment,{children:[h.jsx(An,{springs:"bus.switches->pio",d:"M 1300 758 H 1120"}),h.jsx(An,{springs:"bus.pio->leds",d:"M 1120 868 H 1300"})]}),t.pio==="printer"&&h.jsxs(h.Fragment,{children:[h.jsx(An,{springs:"bus.printer.strobe",d:"M 1120 770 H 1225 V 992 H 1300"}),h.jsx(An,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 782 H 1120"}),h.jsx(An,{springs:"bus.printer.data",d:"M 1120 850 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&h.jsxs(h.Fragment,{children:[h.jsx(An,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),h.jsx(An,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),h.jsx(An,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]})]})}function An({d:t,springs:e}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),h.jsx(an.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:mt(e)})]})}function Vce(){const t=Mt(),{devices:e}=_n();return h.jsxs(h.Fragment,{children:[h.jsx(Wi,{className:"left-[384px] top-[403px]",children:"rd"}),h.jsx(Wi,{className:"left-[384px] top-[423px]",children:"wr"}),e.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(Wi,{className:"left-[384px] top-[443px]",children:"io/m"}),h.jsx(Wi,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")})]}),e.pic&&h.jsx(Wi,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),e.timer&&h.jsx(Wi,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&h.jsx(Wi,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&h.jsx(Wi,{className:"left-[675px] top-[573px]",children:t("computer.chip-select.handshake")}),e.pic&&h.jsxs(h.Fragment,{children:[h.jsx(Wi,{className:"left-[75px] top-[478px]",children:"intr"}),h.jsx(Wi,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&h.jsxs(h.Fragment,{children:[h.jsx(Wi,{className:"left-[1310px] top-[983px]",children:"strobe"}),h.jsx(Wi,{className:"left-[1310px] top-[998px]",children:"busy"}),h.jsx(Wi,{className:"left-[1310px] top-[1053px]",children:"data"})]})]})}function Wi({className:t,children:e}){return h.jsx("span",{className:ee("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function Hce(){const{devices:t}=_n(),e=["M 659 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 629 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:i,strokeDashoffset:r,opacity:s}=mt("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=mt("bus.address");return h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] size-full",children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:n}),h.jsx(an.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[12px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:e}),h.jsx(an.path,{d:o,className:"fill-none stroke-blue-400 stroke-[12px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function Wce(){return h.jsxs(h.Fragment,{children:[h.jsx(Hce,{}),h.jsx(Uce,{}),h.jsx(Vce,{}),h.jsx(zce,{})]})}function Gce(){const{devices:t}=_n();if(!t.clock)return null;const e=mt("clock.angle");return h.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:h.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx(an.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}var Ab="Popover",[TF,Cge]=gs(Ab,[Hd]),tm=Hd(),[Kce,Al]=TF(Ab),RF=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=tm(e),l=x.useRef(null),[c,u]=x.useState(!1),[d,f]=Fo({prop:i,defaultProp:r??!1,onChange:s,caller:Ab});return h.jsx(lE,{...a,children:h.jsx(Kce,{scope:e,contentId:tl(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:x.useCallback(()=>u(!0),[]),onCustomAnchorRemove:x.useCallback(()=>u(!1),[]),modal:o,children:n})})};RF.displayName=Ab;var OF="PopoverAnchor",qce=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Al(OF,n),s=tm(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return x.useEffect(()=>(o(),()=>a()),[o,a]),h.jsx(gb,{...s,...i,ref:e})});qce.displayName=OF;var IF="PopoverTrigger",DF=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Al(IF,n),s=tm(n),o=ot(e,r.triggerRef),a=h.jsx(ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":BF(r.open),...i,ref:o,onClick:ve(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:h.jsx(gb,{asChild:!0,...s,children:a})});DF.displayName=IF;var bE="PopoverPortal",[Yce,Xce]=TF(bE,{forceMount:void 0}),LF=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Al(bE,e);return h.jsx(Yce,{scope:e,forceMount:n,children:h.jsx(Ko,{present:n||s.open,children:h.jsx(Zp,{asChild:!0,container:r,children:i})})})};LF.displayName=bE;var Td="PopoverContent",jF=x.forwardRef((t,e)=>{const n=Xce(Td,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Al(Td,t.__scopePopover);return h.jsx(Ko,{present:i||s.open,children:s.modal?h.jsx(Zce,{...r,ref:e}):h.jsx(Qce,{...r,ref:e})})});jF.displayName=Td;var Jce=gd("PopoverContent.RemoveScroll"),Zce=x.forwardRef((t,e)=>{const n=Al(Td,t.__scopePopover),i=x.useRef(null),r=ot(e,i),s=x.useRef(!1);return x.useEffect(()=>{const o=i.current;if(o)return n$(o)},[]),h.jsx(yb,{as:Jce,allowPinchZoom:!0,children:h.jsx($F,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ve(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Qce=x.forwardRef((t,e)=>{const n=Al(Td,t.__scopePopover),i=x.useRef(!1),r=x.useRef(!1);return h.jsx($F,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),$F=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=Al(Td,n),p=tm(n);return JC(),h.jsx(fb,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:h.jsx(Xp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(cE,{"data-state":BF(f.open),role:"dialog",id:f.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),FF="PopoverClose",eue=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Al(FF,n);return h.jsx(ze.button,{type:"button",...i,ref:e,onClick:ve(t.onClick,()=>r.onOpenChange(!1))})});eue.displayName=FF;var tue="PopoverArrow",nue=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=tm(n);return h.jsx(uE,{...r,...i,ref:e})});nue.displayName=tue;function BF(t){return t?"open":"closed"}var iue=RF,rue=DF,sue=LF,zF=jF;const UF=iue,VF=rue,wE=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>h.jsx(sue,{children:h.jsx(zF,{ref:r,align:e,sideOffset:n,className:ee("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));wE.displayName=zF.displayName;const oue={register:{beginner:"Un registro es como una caja pequeña donde la CPU guarda datos temporalmente. Es muy rápido de acceder.",intermediate:"Los registros son memoria de acceso rápido dentro de la CPU. Son más rápidos que la RAM pero tienen menos capacidad.",advanced:"Registros de propósito general (AL, BL, CL, DL) para operaciones aritméticas. Cada uno puede almacenar 8 bits."},memory:{beginner:"La memoria RAM es como un gran almacén donde se guardan programas y datos. Cada ubicación tiene una dirección única.",intermediate:"Memoria de acceso aleatorio (RAM) de 256 bytes. La CPU puede leer y escribir en cualquier dirección.",advanced:"Memoria principal de 256 bytes con direccionamiento de 8 bits (00-FF). Organizada en celdas de 8 bits cada una."},alu:{beginner:'La ALU (Unidad Aritmético-Lógica) es el "cerebro matemático" de la CPU. Realiza sumas, restas y comparaciones.',intermediate:"Arithmetic Logic Unit procesa operaciones matemáticas y lógicas. Recibe operandos y devuelve resultados.",advanced:"ALU de 8 bits que ejecuta operaciones: ADD, SUB, AND, OR, XOR, NOT, CMP. Incluye flags de estado (Z, N, C)."},bus:{beginner:'Los buses son como "carreteras" por donde viajan los datos entre los componentes de la computadora.',intermediate:"Buses de datos y control conectan CPU, memoria y periféricos. El bus de datos transporta información.",advanced:"Bus de datos de 8 bits bidireccional, bus de direcciones de 8 bits, y líneas de control para sincronización."},instruction:{beginner:"Una instrucción es un comando que le dice a la CPU qué operación realizar, como sumar dos números.",intermediate:"Cada instrucción tiene un código de operación (opcode) y operandos. La CPU las ejecuta secuencialmente.",advanced:"Formato de instrucción: opcode (1 byte) + operandos. Ejemplos: MOV, ADD, JMP, CALL. Ciclo fetch-decode-execute."},"program-counter":{beginner:"El contador de programa (IP) indica qué instrucción ejecutar a continuación. Se incrementa automáticamente.",intermediate:"Program Counter (IP) contiene la dirección de la siguiente instrucción. Se actualiza en cada ciclo.",advanced:"Instruction Pointer (IP) de 8 bits. Incrementa en 1-2 bytes según el tamaño de la instrucción actual."},flags:{beginner:"Las banderas son indicadores que muestran el resultado de operaciones, como si el resultado fue cero.",intermediate:"Flags de estado: Zero (Z), Negative (N), Carry (C). Se actualizan automáticamente en operaciones.",advanced:"Flags de 1 bit: Z (resultado cero), N (resultado negativo), C (acarreo/overflow). Controlan saltos condicionales."},stack:{beginner:"La pila es como una pila de platos. Solo puedes agregar o quitar del tope. Útil para guardar direcciones de retorno.",intermediate:"Stack Pointer (SP) apunta al tope de la pila. PUSH agrega datos, POP los retira. LIFO (Last In, First Out).",advanced:"Pila de 256 bytes con SP de 8 bits. PUSH decrementa SP, POP lo incrementa. Usada para CALL/RET y variables locales."},interrupt:{beginner:"Una interrupción es como un timbre que interrumpe lo que está haciendo la CPU para atender algo urgente.",intermediate:"Las interrupciones permiten que dispositivos externos notifiquen a la CPU eventos importantes.",advanced:"Sistema de interrupciones con PIC (Programmable Interrupt Controller). IRET retorna de la rutina de interrupción."},peripheral:{beginner:"Los periféricos son dispositivos externos como teclado, pantalla y LEDs que se conectan a la computadora.",intermediate:"Periféricos se comunican con la CPU a través de puertos de entrada/salida (I/O).",advanced:"Sistema de I/O con PIO (Programmable I/O) y módulos específicos para cada periférico."},assembly:{beginner:"El lenguaje ensamblador es un lenguaje de programación que usa palabras en lugar de números para las instrucciones.",intermediate:"Cada instrucción de ensamblador se traduce a código de máquina. El ensamblador hace esta traducción.",advanced:"Sintaxis: etiqueta, mnemónico, operandos, comentarios. Directivas como ORG, DB, DW para datos."},addressing:{beginner:"El direccionamiento es cómo la CPU encuentra los datos que necesita en la memoria.",intermediate:"Modos de direccionamiento: inmediato, directo, indirecto. Cada uno accede a datos de forma diferente.",advanced:"Direccionamiento inmediato (valor en instrucción), directo (dirección en instrucción), indirecto (dirección en registro)."}},aue={beginner:fc,intermediate:Bp,advanced:gL},QM={beginner:"text-blue-400",intermediate:"text-yellow-400",advanced:"text-purple-400"},HF=x.memo(({concept:t,level:e="beginner",children:n,className:i})=>{const[r,s]=x.useState(e),o=oue[t];if(!o)return console.warn(`No educational content found for concept: ${t}`),h.jsx(h.Fragment,{children:n});const a=o[r],l=aue[r],c=h.jsxs("div",{className:"max-w-xs p-3",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx($e,{icon:l,className:ee("text-sm",QM[r])}),h.jsxs("span",{className:ee("text-sm font-medium",QM[r]),children:["Nivel ",r==="beginner"?"Básico":r==="intermediate"?"Intermedio":"Avanzado"]})]}),h.jsx("p",{className:"text-sm text-stone-300 mb-3",children:a}),h.jsx("div",{className:"flex gap-1",children:["beginner","intermediate","advanced"].map(u=>h.jsx("button",{onClick:d=>{d.stopPropagation(),s(u)},className:ee("px-2 py-1 text-xs rounded transition-colors",r===u?"bg-mantis-600 text-white":"bg-stone-700 text-stone-400 hover:bg-stone-600"),children:u==="beginner"?"B":u==="intermediate"?"I":"A"},u))})]});return h.jsx(hc,{content:c,position:"top",children:h.jsxs("span",{className:ee("inline-flex items-center gap-1 cursor-help",i),children:[n,h.jsx($e,{icon:fc,className:"text-xs text-mantis-400 opacity-70 hover:opacity-100 transition-opacity"})]})})});HF.displayName="EducationalTooltip";function lr({name:t,valueAtom:e,springs:n,emphasis:i=!1,className:r}){const s=Mt(),o=Ze(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,u=["AL","BL","CL","DL"].includes(t),d=t==="IP",f=t==="SP",p=t==="MBR",m=t==="MAR",g=t==="IR",v=["id","ri"].includes(t),y=c==="FLAGS";return h.jsxs(UF,{children:[h.jsx(VF,{asChild:!0,children:h.jsxs(an.button,{title:c!=="left"&&c!=="right"?`Registro ${c}`:c,className:ee("flex cursor-pointer items-center font-mono leading-none transition-opacity",u||d||f||p||m||g||v?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":y?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",u?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":f?"border-yellow-400 bg-stone-800 text-yellow-300":p||m||g?"border-indigo-400 bg-stone-800 text-indigo-300":v?"border-cyan-400 bg-stone-800 text-cyan-300":y?"":i?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:c==="left"||c==="right"?{backgroundColor:"transparent"}:mt(n),children:[u||d||f||p||m||g||v?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:ee("pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[8px] font-bold",u?"text-mantis-400":d?"text-red-400":f?"text-yellow-400":v?"text-cyan-400":"text-indigo-400"),children:c}),h.jsx("span",{className:"mt-2 font-mono text-base font-bold",children:a.toString("hex")})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:ee("mr-2 font-extrabold tracking-wide",u&&"text-mantis-300 drop-shadow",y&&"text-yellow-200",v&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),h.jsx("span",{className:ee("rounded px-1 py-0.5 font-light",u?"border border-mantis-400 bg-stone-950 text-mantis-300":y?"border border-yellow-400 bg-yellow-950 text-yellow-200":v?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),y&&h.jsxs("span",{className:"ml-2 flex gap-1",children:[h.jsx("span",{className:ee("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),h.jsx("span",{className:ee("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),h.jsxs(wE,{className:"w-60",children:[h.jsx("div",{className:"px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"font-medium text-white",children:c!=="left"&&c!=="right"?`Registro ${c}`:c}),c!=="left"&&c!=="right"&&h.jsx(HF,{concept:"register",level:"beginner",children:h.jsx("span",{className:"text-xs text-mantis-400",children:"💡"})})]})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(b=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${b}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(b)})]},b))})]})]})}function lue(){const t=Ze(qe.FLAGS),e=Ze(FL),[n,i]=x.useState(!1),r=Ze($L),[s]=Jy();x.useEffect(()=>{const d=p=>{i(p==="ADD"||p==="SUB"||p==="CMP"||p==="AND"||p==="OR"||p==="XOR"||p==="NOT"||p==="NEG"||p==="DEC"||p==="INC")},f=p=>{d(p.detail.instruction)};return window.addEventListener("instructionChange",f),()=>{window.removeEventListener("instructionChange",f)}},[]);const o=t.bit(1),a=t.bit(0),l=t.bit(3),c=t.bit(4),u=t.bit(2);return h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[h.jsx(an.path,{className:"fill-none stroke-mantis-400 stroke-bus drop-shadow-[0_0_4px_rgba(60,180,120,0.4)]",strokeLinejoin:"round",d:"M 120 85 H 220",pathLength:1,strokeDasharray:1,style:mt("cpu.alu.operands")}),h.jsx(an.path,{className:"fill-none stroke-mantis-400 stroke-bus drop-shadow-[0_0_4px_rgba(60,180,120,0.4)]",strokeLinejoin:"round",d:"M 120 145 H 220",pathLength:1,strokeDasharray:1,style:mt("cpu.alu.operands")}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#374151"}),h.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),h.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),h.jsx("filter",{id:"aluShadow",children:h.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),h.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),h.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),h.jsx(an.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:mt("cpu.alu.cog").rot.to(d=>`rotate(${d*60}deg)`)}}),n&&h.jsx(an.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:mt("cpu.alu.operation"),children:e}),h.jsxs(an.div,{className:ee("absolute flex min-h-[30px] w-min min-w-[38px] items-center gap-0.5 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 px-0.5 py-1 font-bold text-stone-200 shadow-lg ring-1 ring-stone-300",s.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px]":"left-[230px] top-[190px]"),style:mt("cpu.FLAGS"),children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"FLAGS"}),h.jsxs("div",{className:"mt-2 flex items-center gap-0.5",children:[r&&h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",c?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),s.flagsVisibility==="SF_OF_CF_ZF"&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",l?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",u?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",o?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",a?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function cue(){const t=Mt();Ze(Ac);const[e,n]=x.useState(!1);_n();const i=Ze(tr);Ze(ht),x.useMemo(()=>{if(!("metadata"in i)||i.metadata.operands.length===0)return"";if(i.phase==="fetching-operands"){let l=" __";for(let c=1;c<i.metadata.operands.length;c++)l+=", __";return l}else return" "+i.metadata.operands.join(", ")},[i]);const r=()=>{if(!i)return"CPU detenida";switch(i.phase){case"fetching":return"Leyendo instrucción";case"fetching-operands":return"Obteniendo operandos";case"executing":return"Ejecutando operación";case"writeback":return"Escribiendo resultado";case"interrupt":return"Procesando interrupción";case"int6":case"int7":return"Rutina de interrupción";case"stopped":return i.error?`Error: ${i.error.message}`:"CPU detenida";default:return"Estado desconocido"}},s=()=>{if(!i)return"⏹️";switch(i.phase){case"fetching":return"📥";case"fetching-operands":return"🔍";case"executing":return"⚡";case"writeback":return"💾";case"interrupt":return"🚨";case"int6":case"int7":return"🔄";case"stopped":return i.error?"❌":"⏹️";default:return"❓"}},o=()=>{if(!i)return"text-stone-400";switch(i.phase){case"fetching":return"text-blue-400";case"fetching-operands":return"text-yellow-400";case"executing":return"text-green-400";case"writeback":return"text-purple-400";case"interrupt":return"text-red-400";case"int6":case"int7":return"text-orange-400";case"stopped":return i.error?"text-red-400":"text-stone-400";default:return"text-stone-400"}},a=()=>i?i.phase==="fetching"?"fetch":i.phase==="fetching-operands"||i.phase==="executing"||i.phase==="writeback"?"execute":"idle":"idle";return h.jsxs(h.Fragment,{children:[h.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:h.jsx(an.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 310 V 320",pathLength:1,strokeDasharray:1,style:mt("cpu.decoder.path")})}),h.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:t("computer.cpu.control-unit")})}),h.jsxs("div",{className:"absolute bottom-[17px] left-[30px] flex w-[350px] h-[160px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[h.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-3 py-0.5",children:[h.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),h.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:h.jsx(an.div,{className:"h-full bg-mantis-400",style:{width:mt("cpu.decoder.progress.progress").to(l=>`${l*100}%`),opacity:mt("cpu.decoder.progress.opacity")}})})]}),h.jsxs("div",{className:"w-full flex-1 p-0.5",children:[h.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400 uppercase tracking-wide w-16 whitespace-nowrap",children:"Ciclo CPU"}),h.jsx("button",{onClick:()=>n(!e),className:ee("text-xs px-1 py-0.5 rounded transition-colors",e?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:text-mantis-400 hover:bg-mantis-400/10"),children:e?"−":"+"})]}),h.jsxs("div",{className:"flex items-center gap-1 p-0.5 bg-stone-900/80 rounded border border-stone-600 mb-0.5",children:[h.jsx("div",{className:ee("text-sm",o()),children:s()}),h.jsxs("div",{className:"flex-1 min-w-0 text-center",children:[h.jsx("div",{className:ee("text-xs font-semibold",o()),children:r()}),i&&"metadata"in i&&i.metadata&&h.jsxs("div",{className:"text-xs text-stone-400 truncate",children:[h.jsx("span",{className:"font-mono text-mantis-300",children:i.metadata.name}),i.metadata.operands.length>0&&h.jsxs("span",{className:"text-white",children:[" ",i.metadata.operands.join(", ")]})]})]})]}),e&&h.jsx("div",{className:"space-y-0.5",children:h.jsxs("div",{className:"p-0.5 bg-stone-900/80 rounded border border-stone-600",children:[h.jsx("div",{className:"text-xs font-bold text-mantis-400 mb-1",children:"Fases:"}),h.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-stone-300",children:[h.jsx("div",{className:ee("px-1 py-0.5 rounded",a()==="fetch"?"bg-blue-500/20 text-blue-400":"text-stone-500"),children:"📥 Busqueda"}),h.jsx("span",{className:"text-stone-500",children:"→"}),h.jsx("div",{className:ee("px-1 py-0.5 rounded",a()==="execute"?"bg-green-500/20 text-green-400":"text-stone-500"),children:"⚡ Ejecución"})]})]})})]})]})]})}function uue(){const[t,e]=x.useState(!1),[n,i]=x.useState(0);return x.useEffect(()=>{const r=()=>{e(!0),i(s=>s+1),setTimeout(()=>{e(!1)},3e3)};return window.addEventListener("ip-register-update",r),()=>{window.removeEventListener("ip-register-update",r)}},[]),t?h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-30px);
          }
          70% {
            opacity: 1;
            transform: translateY(-30px);
          }
          100% {
            opacity: 0;
            transform: translateY(-50px);
          }
        }
      `}),h.jsx("div",{className:ee("pointer-events-none absolute left-[425px] top-[342px]","font-mono text-lg font-bold"),style:{color:"#ff6347",animation:"slideUpAndFade 3s ease-out forwards"},children:"+1"},n)]}):null}function due(){const t=Mt(),e=Ze(nC);Ze(tr);const[n,i]=x.useState(!1),[r,s]=x.useState(!1),[o,a]=x.useState(!1);return x.useEffect(()=>{const l=(u,d,f)=>{a(u==="ADD"||u==="SUB"||u==="CMP"||u==="AND"||u==="OR"||u==="XOR"||u==="NOT"||u==="NEG"||u==="DEC"||u==="INC"),i(!!(u==="IRET"||d)),s(!!f)},c=u=>{const d=u;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]),h.jsxs("div",{"data-testid":"cpu-component",className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),h.jsx(Lne,{showSP:e,showri:r}),h.jsx(pre,{showSP:e,showid:n,showri:r}),o&&h.jsxs(h.Fragment,{children:[h.jsx(Gi,{name:"left",className:ee("left-[96px] top-[49px]","border-transparent","bg-transparent")}),h.jsx(Gi,{name:"right",className:ee("left-[96px] top-[150px]","border-transparent","bg-transparent")})]}),h.jsx(lue,{}),h.jsx(Gi,{name:"AL",emphasis:!0,className:"left-[450px] top-[30px]"}),h.jsx(Gi,{name:"BL",emphasis:!0,className:"left-[450px] top-[70px]"}),h.jsx(Gi,{name:"CL",emphasis:!0,className:"left-[450px] top-[110px]"}),h.jsx(Gi,{name:"DL",emphasis:!0,className:"left-[450px] top-[150px]"}),n&&h.jsx(Gi,{name:"id",className:ee("left-[450px] top-[190px]","border-cyan-400")}),h.jsx(Gi,{name:"MBR",className:ee("right-[-11px] top-[233px]","border-indigo-400")}),h.jsx(Gi,{name:"IR",className:ee("left-[185px] top-[270px]","border-indigo-400")}),h.jsx(cue,{}),e&&h.jsx(Gi,{name:"SP",emphasis:!0,className:ee("left-[450px] top-[292px]","border-yellow-400")}),h.jsx(Gi,{name:"IP",emphasis:!0,className:ee("left-[450px] top-[332px]","border-red-color")}),r&&h.jsx(Gi,{name:"ri",emphasis:!0,className:ee("left-[470px] top-[372px]","border-cyan-400")}),h.jsx(Gi,{name:"MAR",className:ee("right-[-11px] top-[333px]","border-indigo-400")}),h.jsx(uue,{})]})}function Gi({name:t,emphasis:e,className:n}){const i=r=>`cpu.${r}`;return h.jsx(lr,{name:t,valueAtom:qe[t],springs:i(t),emphasis:e,className:ee("absolute",n)})}function fue(){const t=Mt(),e=Ze(Ac),n=Ze(Gy),[i]=Jy();return i.showStatsCPU?h.jsxs("div",{className:"absolute left-[120px] top-[-120px] z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block h-min w-full cursor-move rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-blue-500 px-2 py-1 text-lg text-white",children:t("computer.cpu.stats")}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{className:"flex w-full flex-col items-start p-2",children:h.jsxs("div",{className:"pl-1 text-left text-sm text-white",children:[h.jsxs("div",{className:"mb-1",children:["Total de ciclos: ",e]}),h.jsxs("div",{children:["Recuento de instrucciones: ",n]})]})})]}):null}const hue="_pushable_1q0ek_2",pue="_front_1q0ek_15",mue="_shadow_1q0ek_20",gue="_edge_1q0ek_52",Sg={pushable:hue,front:pue,shadow:mue,edge:gue};function vue(){const t=Mt(),{status:e,dispatch:n,devices:i}=_n();return Ao("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?h.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:h.jsxs("button",{className:Sg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[h.jsx("div",{className:Sg.shadow}),h.jsx("div",{className:Sg.edge}),h.jsx("span",{className:Sg.front,children:t("computer.f10")})]})}):null}function yue(){const t=Mt(),{devices:e}=_n();return e.handshake?h.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),h.jsx(lr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:BC,springs:"handshake.STATE",className:"mx-auto my-4"}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(lr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:FC,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var WF={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(x)})(jz,function(n){return function(){var i={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(j,L){for(var U in L)l.o(L,U)&&!l.o(j,U)&&Object.defineProperty(j,U,{enumerable:!0,get:L[U]})},o:function(j,L){return Object.prototype.hasOwnProperty.call(j,L)},r:function(j){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}},c={};function u(j){return function(L){if(Array.isArray(L))return f(L)}(j)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(j)||d(j)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(j,L){if(j){if(typeof j=="string")return f(j,L);var U={}.toString.call(j).slice(8,-1);return U==="Object"&&j.constructor&&(U=j.constructor.name),U==="Map"||U==="Set"?Array.from(j):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?f(j,L):void 0}}function f(j,L){(L==null||L>j.length)&&(L=j.length);for(var U=0,S=Array(L);U<L;U++)S[U]=j[U];return S}function p(j){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},p(j)}function m(j,L){for(var U=0;U<L.length;U++){var S=L[U];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,v(S.key),S)}}function g(j,L,U){return(L=v(L))in j?Object.defineProperty(j,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):j[L]=U,j}function v(j){var L=function(U,S){if(p(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var O=P.call(U,S);if(p(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(U)}(j,"string");return p(L)=="symbol"?L:L+""}l.r(c),l.d(c,{SimpleKeyboard:function(){return Z},default:function(){return le}});var y=function(){return j=function S(P){var O=P.getOptions,T=P.getCaretPosition,q=P.getCaretPositionEnd,H=P.dispatch;(function(ne,J){if(!(ne instanceof J))throw new TypeError("Cannot call a class as a function")})(this,S),g(this,"getOptions",void 0),g(this,"getCaretPosition",void 0),g(this,"getCaretPositionEnd",void 0),g(this,"dispatch",void 0),g(this,"maxLengthReached",void 0),g(this,"isStandardButton",function(ne){return ne&&!(ne[0]==="{"&&ne[ne.length-1]==="}")}),this.getOptions=O,this.getCaretPosition=T,this.getCaretPositionEnd=q,this.dispatch=H,S.bindMethods(S,this)},L=[{key:"getButtonType",value:function(S){return S.includes("{")&&S.includes("}")&&S!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(S){var P=this.getButtonType(S),O=S.replace("{","").replace("}",""),T="";return P!=="standardBtn"&&(T=" hg-button-".concat(O)),"hg-".concat(P).concat(T)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(S,P){return(P=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),P):P||this.getDefaultDiplay())[S]||S}},{key:"getUpdatedInput",value:function(S,P,O){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:O,q=arguments.length>4&&arguments[4]!==void 0&&arguments[4],H=this.getOptions(),ne=[O,T,q],J=P;return(S==="{bksp}"||S==="{backspace}")&&J.length>0?J=this.removeAt.apply(this,[J].concat(ne)):(S==="{delete}"||S==="{forwarddelete}")&&J.length>0?J=this.removeForwardsAt.apply(this,[J].concat(ne)):S==="{space}"?J=this.addStringAt.apply(this,[J," "].concat(ne)):S!=="{tab}"||typeof H.tabCharOnTab=="boolean"&&H.tabCharOnTab===!1?S!=="{enter}"&&S!=="{numpadenter}"||!H.newLineOnEnter?S.includes("numpad")&&Number.isInteger(Number(S[S.length-2]))?J=this.addStringAt.apply(this,[J,S[S.length-2]].concat(ne)):S==="{numpaddivide}"?J=this.addStringAt.apply(this,[J,"/"].concat(ne)):S==="{numpadmultiply}"?J=this.addStringAt.apply(this,[J,"*"].concat(ne)):S==="{numpadsubtract}"?J=this.addStringAt.apply(this,[J,"-"].concat(ne)):S==="{numpadadd}"?J=this.addStringAt.apply(this,[J,"+"].concat(ne)):S==="{numpaddecimal}"?J=this.addStringAt.apply(this,[J,"."].concat(ne)):S==="{"||S==="}"?J=this.addStringAt.apply(this,[J,S].concat(ne)):S.includes("{")||S.includes("}")||(J=this.addStringAt.apply(this,[J,S].concat(ne))):J=this.addStringAt.apply(this,[J,`
`].concat(ne)):J=this.addStringAt.apply(this,[J,"	"].concat(ne)),H.debug&&console.log("Input will be: "+J),J}},{key:"updateCaretPos",value:function(S){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this.updateCaretPosAction(S,P);this.dispatch(function(T){T.setCaretPosition(O)})}},{key:"updateCaretPosAction",value:function(S){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this.getOptions(),T=this.getCaretPosition();return T!=null&&(P?T>0&&(T-=S):T+=S),O.debug&&console.log("Caret at:",T),T}},{key:"addStringAt",value:function(S,P){var O,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S.length,H=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return T||T===0?(O=[S.slice(0,T),P,S.slice(q)].join(""),this.isMaxLengthReached()||H&&this.updateCaretPos(P.length)):O=S+P,O}},{key:"removeAt",value:function(S){var P,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,q=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(O===0&&T===0)return S;if(O===T){var H=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;O&&O>=0?S.substring(O-2,O).match(H)?(P=S.substr(0,O-2)+S.substr(O),q&&this.updateCaretPos(2,!0)):(P=S.substr(0,O-1)+S.substr(O),q&&this.updateCaretPos(1,!0)):S.slice(-2).match(H)?(P=S.slice(0,-2),q&&this.updateCaretPos(2,!0)):(P=S.slice(0,-1),q&&this.updateCaretPos(1,!0))}else P=S.slice(0,O)+S.slice(T),q&&this.dispatch(function(ne){ne.setCaretPosition(O)});return P}},{key:"removeForwardsAt",value:function(S){var P,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,q=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return S!=null&&S.length&&O!==null?(O===T?P=S.substring(O,O+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?S.substr(0,O)+S.substr(O+2):S.substr(0,O)+S.substr(O+1):(P=S.slice(0,O)+S.slice(T),q&&this.dispatch(function(H){H.setCaretPosition(O)})),P):S}},{key:"handleMaxLength",value:function(S,P){var O=this.getOptions(),T=O.maxLength,q=S[O.inputName||"default"],H=P.length-1>=T;if(P.length<=q.length)return!1;if(Number.isInteger(T))return O.debug&&console.log("maxLength (num) reached:",H),H?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(p(T)==="object"){var ne=P.length-1>=T[O.inputName||"default"];return O.debug&&console.log("maxLength (obj) reached:",ne),ne?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(S){return S?S.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(P,O){return O.length?P+O[0].toUpperCase()+O.slice(1):P}):""}},{key:"chunkArray",value:function(S,P){return u(Array(Math.ceil(S.length/P))).map(function(O,T){return S.slice(P*T,P+P*T)})}},{key:"escapeRegex",value:function(S){return S.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(S,P){var O=S,T=P.indexOf("‫");return T<S&&T!=-1&&O--,P.indexOf("‬")<S&&T!=-1&&O--,O<0?0:O}},{key:"isConstructor",value:function(S){try{Reflect.construct(String,[],S)}catch{return!1}return!0}}],U=[{key:"bindMethods",value:function(S,P){var O,T=function(H,ne){var J=typeof Symbol<"u"&&H[Symbol.iterator]||H["@@iterator"];if(!J){if(Array.isArray(H)||(J=d(H))||ne){J&&(H=J);var Pe=0,Le=function(){};return{s:Le,n:function(){return Pe>=H.length?{done:!0}:{done:!1,value:H[Pe++]}},e:function(pe){throw pe},f:Le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fe,De=!0,We=!1;return{s:function(){J=J.call(H)},n:function(){var pe=J.next();return De=pe.done,pe},e:function(pe){We=!0,Fe=pe},f:function(){try{De||J.return==null||J.return()}finally{if(We)throw Fe}}}}(Object.getOwnPropertyNames(S.prototype));try{for(T.s();!(O=T.n()).done;){var q=O.value;q==="constructor"||q==="bindMethods"||(P[q]=P[q].bind(P))}}catch(H){T.e(H)}finally{T.f()}}}],L&&m(j.prototype,L),U&&m(j,U),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,U}();g(y,"noop",function(){});var b=y;function w(j){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},w(j)}function k(j,L){for(var U=0;U<L.length;U++){var S=L[U];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,E(S.key),S)}}function C(j,L,U){return(L=E(L))in j?Object.defineProperty(j,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):j[L]=U,j}function E(j){var L=function(U,S){if(w(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var O=P.call(U,S);if(w(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(U)}(j,"string");return w(L)=="symbol"?L:L+""}var _=function(){return j=function S(P){var O=this,T=P.dispatch,q=P.getOptions;(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,S),C(this,"getOptions",void 0),C(this,"dispatch",void 0),C(this,"isModifierKey",function(H){return H.altKey||H.ctrlKey||H.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(H.code||H.key||O.keyCodeToKey(H==null?void 0:H.keyCode))}),this.dispatch=T,this.getOptions=q,b.bindMethods(S,this)},L=[{key:"handleHighlightKeyDown",value:function(S){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var O=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(T){var q,H,ne=T.getButtonElement(O),J=T.getButtonElement("{".concat(O,"}"));if(ne)q=ne,H=O;else{if(!J)return;q=J,H="{".concat(O,"}")}var Pe,Le,Fe,De,We=function(bt){bt.style.background=P.physicalKeyboardHighlightBgColor||"#dadce4",bt.style.color=P.physicalKeyboardHighlightTextColor||"black"};if(q)if(Array.isArray(q)){if(q.forEach(function(bt){return We(bt)}),P.physicalKeyboardHighlightPress)if(P.physicalKeyboardHighlightPressUsePointerEvents)(Pe=q[0])===null||Pe===void 0||(Le=Pe.onpointerdown)===null||Le===void 0||Le.call(Pe,S);else if(P.physicalKeyboardHighlightPressUseClick){var pe;(pe=q[0])===null||pe===void 0||pe.click()}else T.handleButtonClicked(H,S)}else We(q),P.physicalKeyboardHighlightPress&&(P.physicalKeyboardHighlightPressUsePointerEvents?(Fe=q)===null||Fe===void 0||(De=Fe.onpointerdown)===null||De===void 0||De.call(Fe,S):P.physicalKeyboardHighlightPressUseClick?q.click():T.handleButtonClicked(H,S))})}},{key:"handleHighlightKeyUp",value:function(S){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var O=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(T){var q,H,ne,J=T.getButtonElement(O)||T.getButtonElement("{".concat(O,"}")),Pe=function(Le){Le.removeAttribute&&Le.removeAttribute("style")};J&&(Array.isArray(J)?(J.forEach(function(Le){return Pe(Le)}),P.physicalKeyboardHighlightPressUsePointerEvents&&((q=J[0])===null||q===void 0||(H=q.onpointerup)===null||H===void 0||H.call(q,S))):(Pe(J),P.physicalKeyboardHighlightPressUsePointerEvents&&(J==null||(ne=J.onpointerup)===null||ne===void 0||ne.call(J,S))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var P,O="",T=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(O=T!=null&&T.includes("Numpad")||T!=null&&T.includes("Shift")||T!=null&&T.includes("Space")||T!=null&&T.includes("Backspace")||T!=null&&T.includes("Control")||T!=null&&T.includes("Alt")||T!=null&&T.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?(P=O)===null||P===void 0?void 0:P.toLowerCase():O}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}],L&&k(j.prototype,L),U&&k(j,U),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,U}();function N(j){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},N(j)}function M(j,L){for(var U=0;U<L.length;U++){var S=L[U];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,I(S.key),S)}}function R(j,L,U){return(L=I(L))in j?Object.defineProperty(j,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):j[L]=U,j}function I(j){var L=function(U,S){if(N(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var O=P.call(U,S);if(N(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(U)}(j,"string");return N(L)=="symbol"?L:L+""}var D=function(){return j=function S(P){var O=P.utilities,T=P.options;(function(q,H){if(!(q instanceof H))throw new TypeError("Cannot call a class as a function")})(this,S),R(this,"utilities",void 0),R(this,"options",void 0),R(this,"candidateBoxElement",void 0),R(this,"pageIndex",0),R(this,"pageSize",void 0),this.utilities=O,this.options=T,b.bindMethods(S,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},L=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var P=this,O=S.candidateValue,T=S.targetElement,q=S.onSelect;if(O&&O.length){var H=this.utilities.chunkArray(O.split(" "),this.pageSize);this.renderPage({candidateListPages:H,targetElement:T,pageIndex:this.pageIndex,nbPages:H.length,onItemSelected:function(ne,J){q(ne,J),P.destroy()}})}}},{key:"renderPage",value:function(S){var P,O=this,T=S.candidateListPages,q=S.targetElement,H=S.pageIndex,ne=S.nbPages,J=S.onItemSelected;(P=this.candidateBoxElement)===null||P===void 0||P.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Pe=document.createElement("ul");Pe.className="hg-candidate-box-list",T[H].forEach(function(mn){var Tl,ys=document.createElement("li"),Zo=function(){var Qo=new(O.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(Qo,"target",{value:ys}),Qo};ys.className="hg-candidate-box-list-item",ys.innerHTML=((Tl=O.options.display)===null||Tl===void 0?void 0:Tl[mn])||mn,O.options.useTouchEvents?ys.ontouchstart=function(Qo){return J(mn,Qo||Zo())}:ys.onclick=function(){var Qo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zo();return J(mn,Qo)},Pe.appendChild(ys)});var Le=H>0,Fe=document.createElement("div");Fe.classList.add("hg-candidate-box-prev"),Le&&Fe.classList.add("hg-candidate-box-btn-active");var De=function(){Le&&O.renderPage({candidateListPages:T,targetElement:q,pageIndex:H-1,nbPages:ne,onItemSelected:J})};this.options.useTouchEvents?Fe.ontouchstart=De:Fe.onclick=De,this.candidateBoxElement.appendChild(Fe),this.candidateBoxElement.appendChild(Pe);var We=H<ne-1,pe=document.createElement("div");pe.classList.add("hg-candidate-box-next"),We&&pe.classList.add("hg-candidate-box-btn-active");var bt=function(){We&&O.renderPage({candidateListPages:T,targetElement:q,pageIndex:H+1,nbPages:ne,onItemSelected:J})};this.options.useTouchEvents?pe.ontouchstart=bt:pe.onclick=bt,this.candidateBoxElement.appendChild(pe),q.prepend(this.candidateBoxElement)}}],L&&M(j.prototype,L),U&&M(j,U),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,U}(),K=D;function B(j){return function(L){if(Array.isArray(L))return W(L)}(j)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(j)||function(L,U){if(L){if(typeof L=="string")return W(L,U);var S={}.toString.call(L).slice(8,-1);return S==="Object"&&L.constructor&&(S=L.constructor.name),S==="Map"||S==="Set"?Array.from(L):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?W(L,U):void 0}}(j)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function W(j,L){(L==null||L>j.length)&&(L=j.length);for(var U=0,S=Array(L);U<L;U++)S[U]=j[U];return S}function Y(j){return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},Y(j)}function te(j,L){var U=Object.keys(j);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(j);L&&(S=S.filter(function(P){return Object.getOwnPropertyDescriptor(j,P).enumerable})),U.push.apply(U,S)}return U}function V(j,L){for(var U=0;U<L.length;U++){var S=L[U];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,ie(S.key),S)}}function $(j,L,U){return(L=ie(L))in j?Object.defineProperty(j,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):j[L]=U,j}function ie(j){var L=function(U,S){if(Y(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var O=P.call(U,S);if(Y(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(U)}(j,"string");return Y(L)=="symbol"?L:L+""}var ke=function(){return j=function S(P,O){var T=this;if(function(De,We){if(!(De instanceof We))throw new TypeError("Cannot call a class as a function")}(this,S),$(this,"input",void 0),$(this,"options",void 0),$(this,"utilities",void 0),$(this,"caretPosition",void 0),$(this,"caretPositionEnd",void 0),$(this,"keyboardDOM",void 0),$(this,"keyboardPluginClasses",void 0),$(this,"keyboardDOMClass",void 0),$(this,"buttonElements",void 0),$(this,"currentInstanceName",void 0),$(this,"allKeyboardInstances",void 0),$(this,"keyboardInstanceNames",void 0),$(this,"isFirstKeyboardInstance",void 0),$(this,"physicalKeyboard",void 0),$(this,"modules",void 0),$(this,"activeButtonClass",void 0),$(this,"holdInteractionTimeout",void 0),$(this,"holdTimeout",void 0),$(this,"isMouseHold",void 0),$(this,"initialized",void 0),$(this,"candidateBox",void 0),$(this,"keyboardRowsDOM",void 0),$(this,"defaultName","default"),$(this,"activeInputElement",null),$(this,"handleParams",function(De,We){var pe,bt,mn;if(typeof De=="string")pe=De.split(".").join(""),bt=document.querySelector(".".concat(pe)),mn=We;else if(De instanceof HTMLDivElement){if(!De.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");pe=De.className.split(" ")[0],bt=De,mn=We}else pe="simple-keyboard",bt=document.querySelector(".".concat(pe)),mn=De;return{keyboardDOMClass:pe,keyboardDOM:bt,options:mn}}),$(this,"getOptions",function(){return T.options}),$(this,"getCaretPosition",function(){return T.caretPosition}),$(this,"getCaretPositionEnd",function(){return T.caretPositionEnd}),$(this,"registerModule",function(De,We){T.modules[De]||(T.modules[De]={}),We(T.modules[De])}),$(this,"getKeyboardClassString",function(){for(var De=arguments.length,We=new Array(De),pe=0;pe<De;pe++)We[pe]=arguments[pe];return[T.keyboardDOMClass].concat(We).filter(function(bt){return!!bt}).join(" ")}),typeof window<"u"){var q=this.handleParams(P,O),H=q.keyboardDOMClass,ne=q.keyboardDOM,J=q.options,Pe=J===void 0?{}:J;this.utilities=new b({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ne,this.options=function(De){for(var We=1;We<arguments.length;We++){var pe=arguments[We]!=null?arguments[We]:{};We%2?te(Object(pe),!0).forEach(function(bt){$(De,bt,pe[bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(pe)):te(Object(pe)).forEach(function(bt){Object.defineProperty(De,bt,Object.getOwnPropertyDescriptor(pe,bt))})}return De}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Pe),this.keyboardPluginClasses="",b.bindMethods(S,this);var Le=this.options.inputName,Fe=Le===void 0?this.defaultName:Le;if(this.input={},this.input[Fe]="",this.keyboardDOMClass=H,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new _({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new K({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(H,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},L=[{key:"setCaretPosition",value:function(S){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=P}},{key:"getInputCandidates",value:function(S){var P=this,O=this.options,T=O.layoutCandidates,q=O.layoutCandidatesCaseSensitiveMatch;if(!T||Y(T)!=="object")return{};var H=Object.keys(T).filter(function(Pe){var Le=S.substring(0,P.getCaretPositionEnd()||0)||S,Fe=new RegExp("".concat(P.utilities.escapeRegex(Pe),"$"),q?"g":"gi");return!!B(Le.matchAll(Fe)).length});if(H.length>1){var ne=H.sort(function(Pe,Le){return Le.length-Pe.length})[0];return{candidateKey:ne,candidateValue:T[ne]}}if(H.length){var J=H[0];return{candidateKey:J,candidateValue:T[J]}}return{}}},{key:"showCandidatesBox",value:function(S,P,O){var T=this;this.candidateBox&&this.candidateBox.show({candidateValue:P,targetElement:O,onSelect:function(q,H){var ne=T.options,J=ne.layoutCandidatesCaseSensitiveMatch,Pe=ne.disableCandidateNormalization,Le=ne.enableLayoutCandidatesKeyPress,Fe=q;Pe||(Fe=q.normalize("NFD")),typeof T.options.beforeInputUpdate=="function"&&T.options.beforeInputUpdate(T);var De=T.getInput(T.options.inputName,!0),We=T.getCaretPositionEnd()||0,pe=De.substring(0,We||0)||De,bt=new RegExp("".concat(T.utilities.escapeRegex(S),"$"),J?"g":"gi"),mn=pe.replace(bt,Fe),Tl=De.replace(pe,mn),ys=mn.length-pe.length,Zo=(We||De.length)+ys;Zo<0&&(Zo=0),T.setInput(Tl,T.options.inputName,!0),T.setCaretPosition(Zo),Le&&typeof T.options.onKeyPress=="function"&&T.options.onKeyPress(q,H),typeof T.options.onChange=="function"&&T.options.onChange(T.getInput(T.options.inputName,!0),H),typeof T.options.onChangeAll=="function"&&T.options.onChangeAll(T.getAllInputs(),H)}})}},{key:"handleButtonClicked",value:function(S,P){var O=this.options,T=O.inputName,q=T===void 0?this.defaultName:T,H=O.debug;if(S!=="{//}"){this.input[q]||(this.input[q]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ne=this.utilities.getUpdatedInput(S,this.input[q],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[q]&&this.input[q]===ne&&this.caretPosition===0&&this.caretPositionEnd===ne.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,P);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,P),this.input[q]!==ne&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ne))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ne))return;var J=this.utilities.getUpdatedInput(S,this.input[q],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(J,this.options.inputName,!0),H&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),P==null?void 0:P.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),P),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),P),P!=null&&P.target&&this.options.enableLayoutCandidates){var Pe,Le=this.getInputCandidates(ne),Fe=Le.candidateKey,De=Le.candidateValue;Fe&&De?this.showCandidatesBox(Fe,De,this.keyboardDOM):(Pe=this.candidateBox)===null||Pe===void 0||Pe.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),H&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function(P){P.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,P){var O=this;P&&(this.options.preventMouseDownDefault&&P.preventDefault(),this.options.stopMouseDownPropagation&&P.stopPropagation(),P.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(O.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(O.options.debug&&console.log("Button held:",S),O.handleButtonHold(S)),clearTimeout(O.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,P){var O=this;P&&(this.options.preventMouseUpDefault&&P.preventDefault&&P.preventDefault(),this.options.stopMouseUpPropagation&&P.stopPropagation&&P.stopPropagation(),!(P.target===this.keyboardDOM||P.target&&this.keyboardDOM.contains(P.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(P.target===this.candidateBox.candidateBoxElement||P.target&&this.candidateBox.candidateBoxElement.contains(P.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(T){T.classList.remove(O.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,P)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var P=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){P.getMouseHold()?(P.handleButtonClicked(S),P.handleButtonHold(S)):clearTimeout(P.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function(P){P.replaceInput(S.input),P.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,P=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!P&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[S].replace("‫","").replace("‬","")+"‬":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,P={};return Object.keys(this.input).forEach(function(O){P[O]=S.getInput(O,!0)}),P}},{key:"setInput",value:function(S){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,O=arguments.length>2?arguments[2]:void 0;this.input[P]=S,!O&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=this.changedOptions(S);this.options=Object.assign(this.options,S),P.length&&(this.options.debug&&console.log("changedOptions",P),this.onSetOptions(P),this.render())}},{key:"changedOptions",value:function(S){var P=this;return Object.keys(S).filter(function(O){return JSON.stringify(S[O])!==JSON.stringify(P.options[O])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new K({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(P){S(window.SimpleKeyboardInstances[P],P)})}},{key:"addButtonTheme",value:function(S,P){var O=this;P&&S&&(S.split(" ").forEach(function(T){P.split(" ").forEach(function(q){O.options.buttonTheme||(O.options.buttonTheme=[]);var H=!1;O.options.buttonTheme.map(function(ne){if(ne!=null&&ne.class.split(" ").includes(q)){H=!0;var J=ne.buttons.split(" ");J.includes(T)||(H=!0,J.push(T),ne.buttons=J.join(" "))}return ne}),H||O.options.buttonTheme.push({class:q,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,P){var O=this;if(!S&&!P)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function(T){var q;(q=O.options)===null||q===void 0||(q=q.buttonTheme)===null||q===void 0||q.map(function(H,ne){if(H&&P&&P.includes(H.class)||!P){var J,Pe,Le=(J=H)===null||J===void 0?void 0:J.buttons.split(" ").filter(function(Fe){return Fe!==T});H&&Le!=null&&Le.length?H.buttons=Le.join(" "):((Pe=O.options.buttonTheme)===null||Pe===void 0||Pe.splice(ne,1),H=null)}return H})}),this.render())}},{key:"getButtonElement",value:function(S){var P,O=this.buttonElements[S];return O&&(P=O.length>1?O:O[0]),P}},{key:"inputPatternIsValid",value:function(S){var P,O=this.options.inputPattern;if((P=O instanceof RegExp?O:O[this.options.inputName||this.defaultName])&&S){var T=P.test(S);return this.options.debug&&console.log('inputPattern ("'.concat(P,'"): ').concat(T?"passed":"did not pass!")),T}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,P=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,P),document.addEventListener("keydown",this.handleKeyDown,P),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var P,O=this;S.target.tagName&&(P=S.target.tagName.toLowerCase()),this.dispatch(function(T){var q=S.target===T.keyboardDOM||S.target&&T.keyboardDOM.contains(S.target);if(O.options.syncInstanceInputs&&Array.isArray(S.path)&&(q=S.path.some(function(J){var Pe;return J==null||(Pe=J.hasAttribute)===null||Pe===void 0?void 0:Pe.call(J,"data-skInstance")})),(P==="textarea"||P==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!T.options.disableCaretPositioning){var H=S.target.selectionStart,ne=S.target.selectionEnd;T.options.rtl&&(H=T.utilities.getRtlOffset(H,T.getInput()),ne=T.utilities.getRtlOffset(ne,T.getInput())),T.setCaretPosition(H,ne),T.activeInputElement=S.target,T.options.debug&&console.log("Caret at: ",T.getCaretPosition(),T.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat(T.keyboardDOMClass,")"),S==null?void 0:S.type)}else!T.options.disableCaretPositioning&&q||(S==null?void 0:S.type)==="selectionchange"||(T.setCaretPosition(null),T.activeInputElement=null,T.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var P=this;S&&Object.keys(this.buttonElements).forEach(function(O){return P.buttonElements[O].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,P=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,P),document.removeEventListener("keydown",this.handleKeyDown,P),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(O){O&&(O.onpointerdown=null,O.onpointerup=null,O.onpointercancel=null,O.ontouchstart=null,O.ontouchend=null,O.ontouchcancel=null,O.onclick=null,O.onmousedown=null,O.onmouseup=null,O.remove(),O=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var P=this.options.buttonTheme,O=[];return Array.isArray(P)&&P.forEach(function(T){if(T&&T.class&&typeof T.class=="string"&&T.buttons&&typeof T.buttons=="string"){var q=T.class.split(" ");T.buttons.split(" ").includes(S)&&(O=[].concat(B(O),B(q)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',T)}),O}},{key:"setDOMButtonAttributes",value:function(S,P){var O=this.options.buttonAttributes;Array.isArray(O)&&O.forEach(function(T){T.attribute&&typeof T.attribute=="string"&&T.value&&typeof T.value=="string"&&T.buttons&&typeof T.buttons=="string"?T.buttons.split(" ").includes(S)&&P(T.attribute,T.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',T)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){var P;if((P=S.target.classList)!==null&&P!==void 0&&P.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(P){var O=S.utilities.isConstructor(P)?new P(S):P(S);O.init&&O.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,P){return!!this.modules[S]&&this.modules[S][P]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,P,O,T){var q=this,H=Array.from(S.children),ne=0;return H.length&&O.forEach(function(J,Pe){var Le=T[Pe];if(!(Le&&Le>J))return!1;var Fe=J-ne,De=Le-ne,We=document.createElement("div");We.className+="hg-button-container";var pe="".concat(q.options.layoutName,"-r").concat(P,"c").concat(Pe);We.setAttribute("data-skUID",pe);var bt=H.splice(Fe,De-Fe+1);ne+=De-Fe,bt.forEach(function(mn){return We.appendChild(mn)}),H.splice(Fe,0,We),S.innerHTML="",H.forEach(function(mn){return S.appendChild(mn)}),q.options.debug&&console.log("rowDOMContainer",bt,Fe,De,ne+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var P="hg-layout-".concat(this.options.layoutName),O=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},T=this.options.useTouchEvents||!1,q=T?"hg-touch-events":"",H=this.options.useMouseEvents||!1,ne=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,P,this.keyboardPluginClasses,q),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",O[this.options.layoutName||this.defaultName].forEach(function(J,Pe){var Le=J.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&(Le=Le.filter(function(pe){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(pe)}));var Fe=document.createElement("div");Fe.className+="hg-row";var De=[],We=[];Le.forEach(function(pe,bt){var mn,Tl=!ne&&typeof pe=="string"&&pe.length>1&&pe.indexOf("[")===0,ys=!ne&&typeof pe=="string"&&pe.length>1&&pe.indexOf("]")===pe.length-1;Tl&&(De.push(bt),pe=pe.replace(/\[/g,"")),ys&&(We.push(bt),pe=pe.replace(/\]/g,""));var Zo=S.utilities.getButtonClass(pe),Qo=S.utilities.getButtonDisplayName(pe,S.options.display,S.options.mergeDisplay),Tz=S.options.useButtonTag?"button":"div",In=document.createElement(Tz);In.className+="hg-button ".concat(Zo),(mn=In.classList).add.apply(mn,B(S.getButtonThemeClasses(pe))),S.setDOMButtonAttributes(pe,function(Zt,Oz){In.setAttribute(Zt,Oz)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||T||H?T?(In.ontouchstart=function(Zt){S.handleButtonClicked(pe,Zt),S.handleButtonMouseDown(pe,Zt)},In.ontouchend=function(Zt){S.handleButtonMouseUp(pe,Zt)},In.ontouchcancel=function(Zt){S.handleButtonMouseUp(pe,Zt)}):(In.onclick=function(Zt){S.setMouseHold(!1),typeof S.options.onKeyReleased=="function"||S.options.useMouseEvents&&S.options.clickOnMouseDown||S.handleButtonClicked(pe,Zt)},In.onmousedown=function(Zt){(typeof S.options.onKeyReleased=="function"||S.options.useMouseEvents&&S.options.clickOnMouseDown)&&!S.isMouseHold&&S.handleButtonClicked(pe,Zt),S.handleButtonMouseDown(pe,Zt)},In.onmouseup=function(Zt){S.handleButtonMouseUp(pe,Zt)}):(In.onpointerdown=function(Zt){S.handleButtonClicked(pe,Zt),S.handleButtonMouseDown(pe,Zt)},In.onpointerup=function(Zt){S.handleButtonMouseUp(pe,Zt)},In.onpointercancel=function(Zt){S.handleButtonMouseUp(pe,Zt)}),In.setAttribute("data-skBtn",pe);var Rz="".concat(S.options.layoutName,"-r").concat(Pe,"b").concat(bt);In.setAttribute("data-skBtnUID",Rz);var QE=document.createElement("span");QE.innerHTML=Qo,In.appendChild(QE),S.buttonElements[pe]||(S.buttonElements[pe]=[]),S.buttonElements[pe].push(In),Fe.appendChild(In)}),Fe=S.parseRowDOMContainers(Fe,Pe,De,We),S.keyboardRowsDOM.appendChild(Fe)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||T||H?T?(document.ontouchend=function(J){return S.handleButtonMouseUp(void 0,J)},document.ontouchcancel=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.ontouchstart=function(J){return S.handleKeyboardContainerMouseDown(J)}):T||(document.onmouseup=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.onmousedown=function(J){return S.handleKeyboardContainerMouseDown(J)}):(document.onpointerup=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.onpointerdown=function(J){return S.handleKeyboardContainerMouseDown(J)}),this.onInit())}}],L&&V(j.prototype,L),U&&V(j,U),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,U}(),Z=ke,le=Z;return c}()}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return g},default:function(){return v}});var a=s(442);function l(y){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},l(y)}function c(y,b){var w=Object.keys(y);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(y);b&&(k=k.filter(function(C){return Object.getOwnPropertyDescriptor(y,C).enumerable})),w.push.apply(w,k)}return w}function u(y){for(var b=1;b<arguments.length;b++){var w=arguments[b]!=null?arguments[b]:{};b%2?c(Object(w),!0).forEach(function(k){d(y,k,w[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(w)):c(Object(w)).forEach(function(k){Object.defineProperty(y,k,Object.getOwnPropertyDescriptor(w,k))})}return y}function d(y,b,w){return(b=function(k){var C=function(E,_){if(l(E)!="object"||!E)return E;var N=E[Symbol.toPrimitive];if(N!==void 0){var M=N.call(E,_);if(l(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(E)}(k,"string");return l(C)=="symbol"?C:C+""}(b))in y?Object.defineProperty(y,b,{value:w,enumerable:!0,configurable:!0,writable:!0}):y[b]=w,y}var f=function(y){return u(u({},y),{},{keyboardRef:null})},p=s(651),m=s.n(p),g=function(y){var b=y.baseClass||"react-simple-keyboard",w=a.useRef(null),k=a.useRef(null),C=a.useRef(null),E=a.useRef(y);return a.useEffect(function(){return function(){C.current&&C.current.destroy(),w.current=!1}},[]),a.useEffect(function(){var _=function(D){return u(u({},D),{},{theme:"simple-keyboard ".concat(D.theme||"hg-theme-default")})}(y);if(!w.current){w.current=!0,_.debug&&console.log("ReactSimpleKeyboard: Init");var N=k.current,M=".".concat(b);C.current=new(m())(N||M,_),_.keyboardRef&&_.keyboardRef(C.current)}var R=function(D,K){var B=f(K),W=f(D);return Object.keys(B).filter(function(Y){return B[Y]!==W[Y]})}(E.current,_);if(R.length){var I=C.current;E.current=_,I==null||I.setOptions(_),_.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",R)}},[w,b,E,y]),a.createElement("div",{className:b,ref:k})},v=g}(),o}()})})(WF);var bue=WF.exports;const wue=Fc(bue),xue={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},Sue={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},eT="Á É Í Ó Ú á é í ó ú ́",tT="Ü ü ̈";function kue(){const t=xC(),e=Mt(),{status:n,dispatch:i,devices:r}=_n(),[s,o]=x.useState("none"),[a,l]=x.useState(!1),[c,u]=x.useState(!1),d=x.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=x.useCallback(p=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",p)},[n,i,r.keyboard]);return r.keyboard?h.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),h.jsx(wue,{theme:ee("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:xue,display:Sue[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:eT},{class:"hg-diaeresisDeadKeyButton",buttons:tT}],disableButtonHold:!0,onKeyPress:p=>{if(p==="{shiftleft}"||p==="{shiftright}"){o(m=>m==="none"?"once":"none");return}if(p==="{lock}"){o(m=>m==="none"?"lock":"none");return}if(t==="es"){if(a){eT.includes(p)&&(l(!1),s==="once"&&o("none"),f(p));return}else if(p==="́"){l(!0);return}if(c){tT.includes(p)&&(u(!1),s==="once"&&o("none"),f(p));return}else if(p==="̈"){u(!0);return}}s==="once"&&o("none"),f(p==="{bksp}"?"\b":p==="{enter}"?`
`:p==="{tab}"?"	":p==="{space}"?" ":p)}})]}):null}function _ue(){const t=Mt(),{devices:e}=_n(),n=Ze(zC).toArray();return e.leds?h.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),h.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>h.jsxs("div",{className:"flex w-7 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:r}),h.jsx("div",{className:ee("relative size-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:h.jsx("div",{className:ee("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})})]},r))})]}):null}function Cue(){const t=Mt(),e=Ze(hJ),n=Ze(qe.IP),i=Ze(BL),r=Ze(zL),s=Ze(qe.SP),o=Ze(nC),a=Ze(WS),l=b6(),c=a||l.pic||l.handshake!==null,u=()=>{const d=[];for(let f=0;f<256;f+=16){const p=e.slice(f,f+16);d.push(p)}return d};return h.jsxs("div",{className:"absolute left-[800px] top-0 z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20","data-testid":"memory-component",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),h.jsx("div",{className:"m-4 overflow-x-auto",children:h.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{}),Array.from({length:16}).map((d,f)=>h.jsx("th",{className:ee("size-10 border border-gray-500 bg-mantis-500",f%4===0&&f!==0?"border-l-4 border-mantis-600":""),children:f.toString(16).toUpperCase()},f))]})}),h.jsx("tbody",{children:u().map((d,f)=>h.jsxs("tr",{className:f%4===0&&f!==0?"border-t-4 border-mantis-600":"",children:[h.jsx("th",{className:"size-10 border border-gray-500 bg-mantis-500",children:f.toString(16).toUpperCase()}),d.map((p,m)=>{var g,v,y;return h.jsx("td",{className:ee("size-10 border border-gray-500 p-0 transition-shadow duration-200",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:h.jsx(Eue,{address:p.address,value:p.value,isIP:p.address.valueOf()===n.valueOf(),isSP:o&&p.address.valueOf()===s.valueOf(),isStackData:o&&p.address.valueOf()>s.valueOf(),isProgramAddress:!!i.find(b=>b.address===p.address.value),isDataAddress:!!r.find(b=>b.address===p.address.value),isInterruptVector:c&&p.address.valueOf()>=0&&p.address.valueOf()<=7,label:((g=i.find(b=>b.address===p.address.value))==null?void 0:g.name)||((v=r.find(b=>b.address===p.address.value))==null?void 0:v.label)||null,length:((y=i.find(b=>b.address===p.address.value))==null?void 0:y.length)??null})},m)})]},f))})]})})]})}function Eue({address:t,value:e,isIP:n,isSP:i,isStackData:r,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:c}){const u=Mt(),d=Ze(Qh),[f,p]=x.useState(!1),m=x.useRef(e);x.useEffect(()=>{m.current!==e&&(p(!0),setTimeout(()=>p(!1),300),m.current=e)},[e]);const g=u("computer.memory.cell",t);return h.jsxs(UF,{children:[h.jsx(VF,{asChild:!0,children:h.jsxs(an.div,{title:g,className:ee("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":i?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!i&&!r?"border-l-4 border-purple-500":"",s&&!i&&!r&&!a?"border-l-4 border-blue-500":"",o&&!i&&!r&&!s&&!a?"border-l-4 border-green-500":"",r&&!i?"border-l-4 border-yellow-500":"",i?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",f&&"animate-pulse"),style:t.value===d.value?mt("memory.operating-cell"):void 0,children:[a&&!i&&!r&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupción",style:{lineHeight:1},children:"⚡"}),s&&!i&&!r&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instrucción",style:{lineHeight:1},children:"📘"}),o&&!i&&!r&&!s&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:"📦"}),r&&!i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:"📚"}),i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:"📍"}),h.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:"▲"}),i&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:"▲"})]})}),h.jsxs(wE,{className:"w-60",children:[h.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[g," ",l?h.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",c!==null&&c!==""&&h.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",c]})]}):""]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(v=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:u(`generics.byte-representation.${v}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(v)})]},v))})]})]})}function Aue(){const t=Mt(),{devices:e}=_n();return e.pic?h.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),h.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[h.jsx(lr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:UC,springs:"pic.IMR",emphasis:!0}),h.jsx(lr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:VC,springs:"pic.IRR",emphasis:!0}),h.jsx(lr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:HC,springs:"pic.ISR",emphasis:!0})]})]}),h.jsx("hr",{className:"mb-2 border-stone-600"}),h.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:$v.map((n,i)=>h.jsx(lr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function Nue(){const t=Mt(),{devices:e}=_n();return e.pio?h.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(lr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:WC,springs:"pio.PA"}),h.jsx(lr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:KC,springs:"pio.CA"})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(lr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:GC,springs:"pio.PB"}),h.jsx(lr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:qC,springs:"pio.CB"})]})]}):null}const Pue="_printer_fbkny_2",Mue="_shadow_fbkny_6",Tue="_sides_fbkny_11",Rue="_front_fbkny_22",Oue="_trailContainer_fbkny_27",Iue="_trail_fbkny_27",Due="_paper_fbkny_33",Ul={printer:Pue,shadow:Mue,sides:Tue,front:Rue,trailContainer:Oue,trail:Iue,paper:Due},Lue=Array.from({length:5},(t,e)=>e);function jue(){const t=Mt(),{devices:e}=_n(),n=Ze(Fv),i=Ze(Bv);return e.printer?h.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:h.jsxs("div",{className:Ul.printer,title:t("computer.printer.name"),children:[h.jsx("div",{className:Ul.shadow}),h.jsx("div",{className:Ul.sides}),h.jsxs("div",{className:Ul.front,children:[h.jsx("div",{className:Ul.trailContainer,children:h.jsx("div",{className:Ul.trail,children:h.jsx("pre",{className:Ul.paper,children:i})})}),h.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:Lue.map(r=>{const s=n[r]?AL(n[r].unsigned):null;return h.jsx("span",{className:ee("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),h.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:h.jsx(an.div,{className:"h-full bg-mantis-400",style:{width:mt("printer.printing.progress").to(r=>`${r*100}%`),opacity:mt("printer.printing.opacity")}})})]})]})}):null}const $ue="_container_6nvz7_2",Fue="_text_6nvz7_22",nT={container:$ue,text:Fue};function Bue(){const t=Mt(),{devices:e}=_n(),n=Ze(YC);return e.screen?h.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),h.jsx("div",{className:nT.container,children:h.jsx("pre",{className:nT.text,children:n})})]}):null}function zue(){const t=Mt(),{dispatch:e,devices:n}=_n(),i=Ze(db).toArray();return n.switches?h.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),h.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((r,s)=>h.jsxs("div",{className:"flex w-8 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),h.jsx(fa,{checked:r,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function Uue(){const t=Mt(),{devices:e}=_n();return e.timer?h.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),h.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[h.jsx(lr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:zv,springs:"timer.CONT"}),h.jsx(lr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:XC,springs:"timer.COMP"})]})]}):null}function GF(){const t=x.useRef(null);return x.useEffect(()=>{Nne()},[]),h.jsx("div",{className:"relative size-full",children:h.jsxs(Dce,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[h.jsx($ce,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:h.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[h.jsx(Wce,{}),h.jsx(fue,{}),h.jsx(due,{}),h.jsx(Bce,{}),h.jsx(Cue,{}),h.jsx(yue,{}),h.jsx(Aue,{}),h.jsx(Nue,{}),h.jsx(Uue,{}),h.jsx(Gce,{}),h.jsx(vue,{}),h.jsx(kue,{}),h.jsx(_ue,{}),h.jsx(jue,{}),h.jsx(zue,{}),h.jsx(Bue,{})]})}),h.jsx(Fce,{wrapperRef:t})]})})}const Vue=1024;let Hue=0;class R1{constructor(e,n){this.from=e,this.to=n}}class ct{constructor(e={}){this.id=Hue++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Hi.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}ct.closedBy=new ct({deserialize:t=>t.split(" ")});ct.openedBy=new ct({deserialize:t=>t.split(" ")});ct.group=new ct({deserialize:t=>t.split(" ")});ct.isolate=new ct({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});ct.contextHash=new ct({perNode:!0});ct.lookAhead=new ct({perNode:!0});ct.mounted=new ct({perNode:!0});class qv{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[ct.mounted.id]}}const Wue=Object.create(null);class Hi{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):Wue,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Hi(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(ct.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(ct.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Hi.none=new Hi("",Object.create(null),0,8);class xE{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Hi(i.name,r,i.id,i.flags):i)}return new xE(n)}}const kg=new WeakMap,iT=new WeakMap;var Bn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Bn||(Bn={}));class Yt{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=qv.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new ck(this.topNode,e)}cursorAt(e,n=0,i=0){let r=kg.get(this)||this.topNode,s=new ck(r);return s.moveTo(e,n),kg.set(this,s._tree),s}get topNode(){return new $r(this,0,0,null)}resolve(e,n=0){let i=Sp(kg.get(this)||this.topNode,e,n,!1);return kg.set(this,i),i}resolveInner(e,n=0){let i=Sp(iT.get(this)||this.topNode,e,n,!0);return iT.set(this,i),i}resolveStack(e,n=0){return que(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&Bn.IncludeAnonymous)>0;for(let l=this.cursor(o|Bn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:_E(Hi.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new Yt(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new Yt(Hi.none,n,i,r)))}static build(e){return Yue(e)}}Yt.empty=new Yt(Hi.none,[],[],0);class SE{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new SE(this.buffer,this.index)}}class gl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Hi.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(KF(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let c=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,c)}return new gl(s,o,this.set)}}function KF(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Sp(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof $r&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Bn.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof $r&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class qF{cursor(e=0){return new ck(this,e)}getChild(e,n=null,i=null){let r=rT(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return rT(this,e,n,i)}resolve(e,n=0){return Sp(this,e,n,!1)}resolveInner(e,n=0){return Sp(this,e,n,!0)}matchContext(e){return lk(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class $r extends qF{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(KF(r,i,d,d+u.length)){if(u instanceof gl){if(s&Bn.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,i-d,r);if(f>-1)return new Da(new Gue(o,u,e,d),null,f)}else if(s&Bn.IncludeAnonymous||!u.type.isAnonymous||kE(u)){let f;if(!(s&Bn.IgnoreMounts)&&(f=qv.get(u))&&!f.overlay)return new $r(f.tree,d,e,o);let p=new $r(u,d,e,o);return s&Bn.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&Bn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Bn.IgnoreOverlays)&&(r=qv.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new $r(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function rT(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function lk(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class Gue{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class Da extends qF{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new Da(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Bn.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Da(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Da(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Da(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new Yt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function YF(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof $r&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new Kue(r,n)}class Kue{constructor(e,n){this.heads=e,this.node=n}get next(){return YF(this.heads)}}function que(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof $r?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=qv.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new $r(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Sp(a,e,n,!1))}}return r?YF(r):i}class ck{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof $r)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof $r?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Bn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Bn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Bn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Bn.IncludeAnonymous||a instanceof gl||!a.type.isAnonymous||kE(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new Da(this.buffer,n,this.stack[r]);return this.bufferNode=new Da(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return lk(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return lk(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function kE(t){return t.children.some(e=>e instanceof gl||!e.type.isAnonymous||kE(e))}function Yue(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=Vue,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new SE(n,n.length):n,l=i.types,c=0,u=0;function d(C,E,_,N,M,R){let{id:I,start:D,end:K,size:B}=a,W=u,Y=c;for(;B<0;)if(a.next(),B==-1){let ke=s[I];_.push(ke),N.push(D-C);return}else if(B==-3){c=I;return}else if(B==-4){u=I;return}else throw new RangeError(`Unrecognized record size: ${B}`);let te=l[I],V,$,ie=D-C;if(K-D<=r&&($=v(a.pos-E,M))){let ke=new Uint16Array($.size-$.skip),Z=a.pos-$.size,le=ke.length;for(;a.pos>Z;)le=y($.start,ke,le);V=new gl(ke,K-$.start,i),ie=$.start-C}else{let ke=a.pos-B;a.next();let Z=[],le=[],j=I>=o?I:-1,L=0,U=K;for(;a.pos>ke;)j>=0&&a.id==j&&a.size>=0?(a.end<=U-r&&(m(Z,le,D,L,a.end,U,j,W,Y),L=Z.length,U=a.end),a.next()):R>2500?f(D,ke,Z,le):d(D,ke,Z,le,j,R+1);if(j>=0&&L>0&&L<Z.length&&m(Z,le,D,L,D,U,j,W,Y),Z.reverse(),le.reverse(),j>-1&&L>0){let S=p(te,Y);V=_E(te,Z,le,0,Z.length,0,K-D,S,S)}else V=g(te,Z,le,K-D,W-K,Y)}_.push(V),N.push(ie)}function f(C,E,_,N){let M=[],R=0,I=-1;for(;a.pos>E;){let{id:D,start:K,end:B,size:W}=a;if(W>4)a.next();else{if(I>-1&&K<I)break;I<0&&(I=B-r),M.push(D,K,B),R++,a.next()}}if(R){let D=new Uint16Array(R*4),K=M[M.length-2];for(let B=M.length-3,W=0;B>=0;B-=3)D[W++]=M[B],D[W++]=M[B+1]-K,D[W++]=M[B+2]-K,D[W++]=W;_.push(new gl(D,M[2]-K,i)),N.push(K-C)}}function p(C,E){return(_,N,M)=>{let R=0,I=_.length-1,D,K;if(I>=0&&(D=_[I])instanceof Yt){if(!I&&D.type==C&&D.length==M)return D;(K=D.prop(ct.lookAhead))&&(R=N[I]+D.length+K)}return g(C,_,N,M,R,E)}}function m(C,E,_,N,M,R,I,D,K){let B=[],W=[];for(;C.length>N;)B.push(C.pop()),W.push(E.pop()+_-M);C.push(g(i.types[I],B,W,R-M,D-R,K)),E.push(M-_)}function g(C,E,_,N,M,R,I){if(R){let D=[ct.contextHash,R];I=I?[D].concat(I):[D]}if(M>25){let D=[ct.lookAhead,M];I=I?[D].concat(I):[D]}return new Yt(C,E,_,N,I)}function v(C,E){let _=a.fork(),N=0,M=0,R=0,I=_.end-r,D={size:0,start:0,skip:0};e:for(let K=_.pos-C;_.pos>K;){let B=_.size;if(_.id==E&&B>=0){D.size=N,D.start=M,D.skip=R,R+=4,N+=4,_.next();continue}let W=_.pos-B;if(B<0||W<K||_.start<I)break;let Y=_.id>=o?4:0,te=_.start;for(_.next();_.pos>W;){if(_.size<0)if(_.size==-3)Y+=4;else break e;else _.id>=o&&(Y+=4);_.next()}M=te,N+=B,R+=Y}return(E<0||N==C)&&(D.size=N,D.start=M,D.skip=R),D.size>4?D:void 0}function y(C,E,_){let{id:N,start:M,end:R,size:I}=a;if(a.next(),I>=0&&N<o){let D=_;if(I>4){let K=a.pos-(I-4);for(;a.pos>K;)_=y(C,E,_)}E[--_]=D,E[--_]=R-C,E[--_]=M-C,E[--_]=N}else I==-3?c=N:I==-4&&(u=N);return _}let b=[],w=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,b,w,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:b.length?w[0]+b[0].length:0;return new Yt(l[t.topID],b.reverse(),w.reverse(),k)}const sT=new WeakMap;function k0(t,e){if(!t.isAnonymous||e instanceof gl||e.type!=t)return 1;let n=sT.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof Yt)){n=1;break}n+=k0(t,i)}sT.set(e,n)}return n}function _E(t,e,n,i,r,s,o,a,l){let c=0;for(let m=i;m<r;m++)c+=k0(t,e[m]);let u=Math.ceil(c*1.5/8),d=[],f=[];function p(m,g,v,y,b){for(let w=v;w<y;){let k=w,C=g[w],E=k0(t,m[w]);for(w++;w<y;w++){let _=k0(t,m[w]);if(E+_>=u)break;E+=_}if(w==k+1){if(E>u){let _=m[k];p(_.children,_.positions,0,_.children.length,g[k]+b);continue}d.push(m[k])}else{let _=g[w-1]+m[w-1].length-C;d.push(_E(t,m,g,k,w,C,_,null,l))}f.push(C+b-s)}}return p(e,n,i,r,0),(a||l)(d,f,o)}class gc{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new gc(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let p=Math.max(f.from,l)-c,m=Math.min(f.to,d)-c;f=p>=m?null:new gc(p,m,f.tree,f.offset+c,a>0,!!u)}if(f&&r.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class XF{startParse(e,n,i){return typeof e=="string"&&(e=new Xue(e)),i=i?i.length?i.map(r=>new R1(r.from,r.to)):[new R1(0,0)]:[new R1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class Xue{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new ct({perNode:!0});let Jue=0;class xn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=Jue++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof xn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new xn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new Yv(e);return i=>i.modified.indexOf(n)>-1?i:Yv.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let Zue=0;class Yv{constructor(e){this.name=e,this.instances=[],this.id=Zue++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&Que(n,a.modified));if(i)return i;let r=[],s=new xn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=ede(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(Yv.get(a,l));return s}}function Que(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function ede(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function tde(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==r.length)break;let p=r[d++];if(d==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new Xv(i,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return JF.add(e)}const JF=new ct;class Xv{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Xv.empty=new Xv([],2,null);function ZF(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function nde(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function ide(t,e,n,i=0,r=t.length){let s=new rde(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class rde{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,u=sde(e)||Xv.empty,d=nde(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(ct.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),m=this.highlighters.filter(v=>!v.scope||v.scope(f.tree.type)),g=e.firstChild();for(let v=0,y=a;;v++){let b=v<f.overlay.length?f.overlay[v]:null,w=b?b.from+a:l,k=Math.max(n,y),C=Math.min(i,w);if(k<C&&g)for(;e.from<C&&(this.highlightRange(e,k,C,r,s),this.startSpan(Math.min(C,e.to),c),!(e.to>=w||!e.nextSibling())););if(!b||w>i)break;y=b.to+a,y>n&&(this.highlightRange(p.cursor(),Math.max(n,b.from+a),Math.min(i,y),"",m),this.startSpan(Math.min(i,y),c))}g&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function sde(t){let e=t.type.prop(JF);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const he=xn.define,_g=he(),ha=he(),oT=he(ha),aT=he(ha),pa=he(),Cg=he(pa),O1=he(pa),_s=he(),Vl=he(_s),xs=he(),Ss=he(),uk=he(),xf=he(uk),Eg=he(),Be={comment:_g,lineComment:he(_g),blockComment:he(_g),docComment:he(_g),name:ha,variableName:he(ha),typeName:oT,tagName:he(oT),propertyName:aT,attributeName:he(aT),className:he(ha),labelName:he(ha),namespace:he(ha),macroName:he(ha),literal:pa,string:Cg,docString:he(Cg),character:he(Cg),attributeValue:he(Cg),number:O1,integer:he(O1),float:he(O1),bool:he(pa),regexp:he(pa),escape:he(pa),color:he(pa),url:he(pa),keyword:xs,self:he(xs),null:he(xs),atom:he(xs),unit:he(xs),modifier:he(xs),operatorKeyword:he(xs),controlKeyword:he(xs),definitionKeyword:he(xs),moduleKeyword:he(xs),operator:Ss,derefOperator:he(Ss),arithmeticOperator:he(Ss),logicOperator:he(Ss),bitwiseOperator:he(Ss),compareOperator:he(Ss),updateOperator:he(Ss),definitionOperator:he(Ss),typeOperator:he(Ss),controlOperator:he(Ss),punctuation:uk,separator:he(uk),bracket:xf,angleBracket:he(xf),squareBracket:he(xf),paren:he(xf),brace:he(xf),content:_s,heading:Vl,heading1:he(Vl),heading2:he(Vl),heading3:he(Vl),heading4:he(Vl),heading5:he(Vl),heading6:he(Vl),contentSeparator:he(_s),list:he(_s),quote:he(_s),emphasis:he(_s),strong:he(_s),link:he(_s),monospace:he(_s),strikethrough:he(_s),inserted:he(),deleted:he(),changed:he(),invalid:he(),meta:Eg,documentMeta:he(Eg),annotation:he(Eg),processingInstruction:he(Eg),definition:xn.defineModifier("definition"),constant:xn.defineModifier("constant"),function:xn.defineModifier("function"),standard:xn.defineModifier("standard"),local:xn.defineModifier("local"),special:xn.defineModifier("special")};for(let t in Be){let e=Be[t];e instanceof xn&&(e.name=t)}ZF([{tag:Be.link,class:"tok-link"},{tag:Be.heading,class:"tok-heading"},{tag:Be.emphasis,class:"tok-emphasis"},{tag:Be.strong,class:"tok-strong"},{tag:Be.keyword,class:"tok-keyword"},{tag:Be.atom,class:"tok-atom"},{tag:Be.bool,class:"tok-bool"},{tag:Be.url,class:"tok-url"},{tag:Be.labelName,class:"tok-labelName"},{tag:Be.inserted,class:"tok-inserted"},{tag:Be.deleted,class:"tok-deleted"},{tag:Be.literal,class:"tok-literal"},{tag:Be.string,class:"tok-string"},{tag:Be.number,class:"tok-number"},{tag:[Be.regexp,Be.escape,Be.special(Be.string)],class:"tok-string2"},{tag:Be.variableName,class:"tok-variableName"},{tag:Be.local(Be.variableName),class:"tok-variableName tok-local"},{tag:Be.definition(Be.variableName),class:"tok-variableName tok-definition"},{tag:Be.special(Be.variableName),class:"tok-variableName2"},{tag:Be.definition(Be.propertyName),class:"tok-propertyName tok-definition"},{tag:Be.typeName,class:"tok-typeName"},{tag:Be.namespace,class:"tok-namespace"},{tag:Be.className,class:"tok-className"},{tag:Be.macroName,class:"tok-macroName"},{tag:Be.propertyName,class:"tok-propertyName"},{tag:Be.operator,class:"tok-operator"},{tag:Be.comment,class:"tok-comment"},{tag:Be.meta,class:"tok-meta"},{tag:Be.invalid,class:"tok-invalid"},{tag:Be.punctuation,class:"tok-punctuation"}]);var I1;const Ru=new ct;function ode(t){return Ee.define({combine:t?e=>e.concat(t):void 0})}const ade=new ct;class os{constructor(e,n,i=[],r=""){this.data=e,this.name=r,at.prototype.hasOwnProperty("tree")||Object.defineProperty(at.prototype,"tree",{get(){return ro(this)}}),this.parser=n,this.extension=[Id.of(this),at.languageData.of((s,o,a)=>{let l=lT(s,o,a),c=l.type.prop(Ru);if(!c)return[];let u=s.facet(c),d=l.type.prop(ade);if(d){let f=l.resolve(o-l.from,a);for(let p of d)if(p.test(f,s)){let m=s.facet(p.facet);return p.type=="replace"?m:m.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return lT(e,n,i).type.prop(Ru)==this.data}findRegions(e){let n=e.facet(Id);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Ru)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(ct.mounted);if(a){if(a.tree.prop(Ru)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof Yt&&r(c,s.positions[l]+o)}};return r(ro(e),0),i}get allowsNesting(){return!0}}os.setState=Je.define();function lT(t,e,n){let i=t.facet(Id),r=ro(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Bn.ExcludeBuffers))s.type.isTop&&(r=s);return r}function ro(t){let e=t.field(os.state,!1);return e?e.tree:Yt.empty}class lde{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Sf=null;class Rd{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Rd(e,n,[],Yt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new lde(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Yt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(gc.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(gc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Sf;Sf=this;try{return e()}finally{Sf=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=cT(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),i=gc.applyChanges(i,l),r=Yt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new Rd(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=cT(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends XF{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Sf;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Yt(Hi.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Sf}}function cT(t,e,n){return gc.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Od{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Od(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Rd.create(e.facet(Id).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Od(i)}}os.state=xi.define({create:Od.init,update(t,e){for(let n of e.effects)if(n.is(os.setState))return n.value;return e.startState.facet(Id)!=e.state.facet(Id)?Od.init(e.state):t.apply(e)}});let QF=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(QF=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const D1=typeof navigator<"u"&&(!((I1=navigator.scheduling)===null||I1===void 0)&&I1.isInputPending)?()=>navigator.scheduling.isInputPending():null,cde=qn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(os.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(os.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=QF(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(os.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!D1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>D1&&D1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:os.setState.of(new Od(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>ar(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Id=Ee.define({combine(t){return t.length?t[0]:null},enables:t=>[os.state,cde,Te.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class ude{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const dde=Ee.define(),CE=Ee.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function $c(t){let e=t.facet(CE);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function dk(t,e){let n="",i=t.tabSize,r=t.facet(CE)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function fde(t,e){t instanceof at&&(t=new EE(t));for(let i of t.state.facet(dde)){let r=i(t,e);if(r!==void 0)return r}let n=ro(t.state);return n.length>=e?hde(t,n,e):null}class EE{constructor(e,n={}){this.state=e,this.options=n,this.unit=$c(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Vp(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const eB=new ct;function hde(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return tB(i,t,n)}function tB(t,e,n){for(let i=t;i;i=i.next){let r=mde(i.node);if(r)return r(AE.create(e,n,i))}return 0}function pde(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function mde(t){let e=t.type.prop(eB);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(ct.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>bde(o,!0,1,void 0,s&&!pde(o)?r.from:void 0)}return t.parent==null?gde:null}function gde(){return 0}class AE extends EE{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new AE(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(vde(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return tB(this.context.next,this.base,this.pos)}}function vde(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function yde(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function bde(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=yde(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const wde=Ee.define(),xde=new ct;function Sde(t,e,n){let i=ro(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(xde);if(l&&(a.to<i.length-50||i.length==t.doc.length||!kde(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function kde(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function nB(t,e,n){for(let i of t.facet(wde)){let r=i(t,e,n);if(r)return r}return Sde(t,e,n)}function iB(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const NE=Je.define({map:iB}),Nb=Je.define({map:iB});function rB(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const nm=xi.define({create(){return nt.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=uT(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(NE)&&!_de(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(lB),r=i?nt.replace({widget:new Tde(i(e.state,n.value))}):dT;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(Nb)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=uT(t,e.selection.main.head)),t},provide:t=>Te.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(dT.range(i,r))}return nt.set(e,!0)}});function uT(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function sB(t,e,n){var i;let r=null;return(i=t.field(nm,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function _de(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function oB(t,e){return t.field(nm,!1)?e:e.concat(Je.appendConfig.of(Mde()))}const Cde=t=>{for(let e of rB(t)){let n=nB(t.state,e.from,e.to);if(n)return t.dispatch({effects:oB(t.state,[NE.of(n),aB(t,n)])}),!0}return!1},Ede=t=>{if(!t.state.field(nm,!1))return!1;let e=[];for(let n of rB(t)){let i=sB(t.state,n.from,n.to);i&&e.push(Nb.of(i),aB(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function aB(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Te.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const Ade=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=nB(e,r.from,r.to);s&&n.push(NE.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:oB(t.state,n)}),!!n.length},Nde=t=>{let e=t.state.field(nm,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(Nb.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},Pde={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},lB=Ee.define({combine(t){return Sl(t,Pde)}});function Mde(t){return[nm,Rde]}function cB(t,e){let{state:n}=t,i=n.facet(lB),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=sB(t.state,a.from,a.to);l&&t.dispatch({effects:Nb.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const dT=nt.replace({widget:new class extends kl{toDOM(t){return cB(t,null)}}});class Tde extends kl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return cB(e,this.value)}}const Rde=Te.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Pb{constructor(e,n){this.specs=e;let i;function r(a){let l=ol.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof os?a=>a.prop(Ru)==o.data:o?a=>a==o:void 0,this.style=ZF(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new ol(i):null,this.themeType=n.themeType}static define(e,n){return new Pb(e,n||{})}}const fk=Ee.define(),Ode=Ee.define({combine(t){return t.length?[t[0]]:null}});function L1(t){let e=t.facet(fk);return e.length?e:t.facet(Ode)}function Ide(t,e){let n=[Lde],i;return t instanceof Pb&&(t.module&&n.push(Te.styleModule.of(t.module)),i=t.themeType),i?n.push(fk.computeN([Te.darkTheme],r=>r.facet(Te.darkTheme)==(i=="dark")?[t]:[])):n.push(fk.of(t)),n}class Dde{constructor(e){this.markCache=Object.create(null),this.tree=ro(e.state),this.decorations=this.buildDeco(e,L1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=ro(e.state),i=L1(e.state),r=i!=L1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return nt.none;let i=new sl;for(let{from:r,to:s}of e.visibleRanges)ide(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=nt.mark({class:l})))},r,s);return i.finish()}}const Lde=zp.high(qn.fromClass(Dde,{decorations:t=>t.decorations})),jde=1e4,$de="()[]{}",Fde=new ct;function hk(t,e,n){let i=t.prop(e<0?ct.openedBy:ct.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function pk(t){let e=t.type.prop(Fde);return e?e(t.node):t}function Ag(t,e,n,i={}){let r=i.maxScanDistance||jde,s=i.brackets||$de,o=ro(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=hk(l.type,n,s);if(c&&l.from<l.to){let u=pk(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return Bde(t,e,n,l,u,c,s)}}return zde(t,e,n,o,a.type,r,s)}function Bde(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=pk(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(hk(u.type,n,o))c++;else if(hk(u.type,-n,o)){if(c==0){let d=pk(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function zde(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let p=u.value;n<0&&(f+=p.length);let m=e+f*n;for(let g=n>0?0:p.length-1,v=n>0?p.length:-1;g!=v;g+=n){let y=o.indexOf(p[g]);if(!(y<0||i.resolveInner(m+g,1).type!=r))if(y%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:m+g,to:m+g+1},matched:y>>1==l>>1};d--}}n>0&&(f+=p.length)}return u.done?{start:c,matched:!1}:null}function fT(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class uB{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=fT(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:fT(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function Ude(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||Vde,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||TE,mergeTokens:t.mergeTokens!==!1}}function Vde(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const hT=new WeakMap;class PE extends os{constructor(e){let n=ode(e.languageData),i=Ude(e),r,s=new class extends XF{createParse(o,a,l){return new Wde(r,o,a,l)}};super(n,s,[],e.name),this.topNode=qde(n,this),r=this,this.streamParser=i,this.stateAfter=new ct({perNode:!0}),this.tokenTable=e.tokenTable?new pB(i.tokenTable):Kde}static define(e){return new PE(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=hT.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=ME(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=i?i(l.from):-1,d=new uB(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-l.from;)fB(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&hT.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function ME(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof Yt&&l<r&&ME(t,a,l,i,r);if(c)return c}return null}function dB(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof Yt){if(!(l=dB(t,a,n-o,i-o,r)))break;return r?new Yt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function Hde(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&ME(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=i&&(c=dB(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(r?$c(r):4),tree:Yt.empty}}class Wde{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Rd.get(),o=r[0].from,{state:a,tree:l}=Hde(e,i,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState($c(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Rd.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new uB(n,e?e.state.tabSize:4,e?$c(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=fB(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Yt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Gde,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Yt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Yt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function fB(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const TE=Object.create(null),kp=[Hi.none],Gde=new xE(kp),pT=[],mT=Object.create(null),hB=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])hB[t]=mB(TE,e);class pB{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),hB)}resolve(e){return e?this.table[e]||(this.table[e]=mB(this.extra,e)):0}}const Kde=new pB(TE);function j1(t,e){pT.indexOf(t)>-1||(pT.push(t),console.warn(e))}function mB(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Be[c];u?typeof u=="function"?l.length?l=l.map(u):j1(c,`Modifier ${c} used at start of tag`):l.length?j1(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:j1(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=mT[r];if(s)return s.id;let o=mT[r]=Hi.define({id:kp.length,name:i,props:[tde({[i]:n})]});return kp.push(o),o.id}function qde(t,e){let n=Hi.define({id:kp.length,name:"Document",props:[Ru.add(()=>t),eB.add(()=>i=>e.getIndent(i))],top:!0});return kp.push(n),n}Ft.RTL,Ft.LTR;const Yde=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=RE(t.state,n.from);return i.line?Xde(t):i.block?efe(t):!1};function im(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const Xde=im(OE,0),Jde=im(OE,1),Zde=im(OE,2),Qde=im(gB,0),efe=im((t,e)=>gB(t,e,nfe(e)),0);function RE(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const kf=50;function tfe(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-kf,i),o=t.sliceDoc(r,r+kf),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*kf?u=d=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+kf),d=t.sliceDoc(r-kf,r));let f=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,m=d.length-p-n.length;return u.slice(f,f+e.length)==e&&d.slice(m,m+n.length)==n?{open:{pos:i+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:r-p-n.length,margin:/\s/.test(d.charAt(m-1))?1:0}}:null}function nfe(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function gB(t,e,n=e.selection.ranges){let i=n.map(s=>RE(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>tfe(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function OE(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,c=RE(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>r&&(s==o||o>d.from)){r=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,m=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),i.push({line:d,comment:m,token:c,indent:f,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const mk=Xo.define(),ife=Xo.define(),rfe=Ee.define(),vB=Ee.define({combine(t){return Sl(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),yB=xi.define({create(){return Hs.empty},update(t,e){let n=e.state.facet(vB),i=e.annotation(mk);if(i){let l=$i.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=Jv(u,u.length,n.minDepth,l):u=xB(u,e.startState.selection),new Hs(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(ife);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(kn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=$i.fromTransaction(e),o=e.annotation(kn.time),a=e.annotation(kn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Hs(t.done.map($i.fromJSON),t.undone.map($i.fromJSON))}});function sfe(t={}){return[yB,vB.of(t),Te.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?bB:e.inputType=="historyRedo"?gk:null;return i?(e.preventDefault(),i(n)):!1}})]}function IE(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(yB,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const bB=IE(0,!1),gk=IE(1,!1),ofe=IE(0,!0);class $i{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new $i(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new $i(e.changes&&bn.fromJSON(e.changes),[],e.mapped&&Xs.fromJSON(e.mapped),e.startSelection&&re.fromJSON(e.startSelection),e.selectionsAfter.map(re.fromJSON))}static fromTransaction(e,n){let i=Tr;for(let r of e.startState.facet(rfe)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new $i(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Tr)}static selection(e){return new $i(void 0,Tr,void 0,void 0,e)}}function Jv(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function afe(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function lfe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function wB(t,e){return t.length?e.length?t.concat(e):t:e}const Tr=[],cfe=200;function xB(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-cfe));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Jv(t,t.length-1,1e9,n.setSelAfter(i)))}else return[$i.selection([e])]}function ufe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function $1(t,e){if(!t.length)return t;let n=t.length,i=Tr;for(;n;){let r=dfe(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[$i.selection(i)]:Tr}function dfe(t,e,n){let i=wB(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Tr,n);if(!t.changes)return $i.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new $i(r,Je.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const ffe=/^(input\.type|delete)($|\.)/;class Hs{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Hs(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||ffe.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,afe(a.changes,e.changes))||i=="input.type.compose")?o=Jv(o,o.length-1,r.minDepth,new $i(e.changes.compose(a.changes),wB(Je.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Tr)):o=Jv(o,o.length,r.minDepth,e),new Hs(o,Tr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Tr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&lfe(s[s.length-1],e)?this:new Hs(xB(this.done,e),this.undone,n,i)}addMapping(e){return new Hs($1(this.done,e),$1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:mk.of({side:e,rest:ufe(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?Tr:r.slice(0,r.length-1);return s.mapped&&(a=$1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:mk.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Hs.empty=new Hs(Tr,Tr);function rm(t,e){return re.create(t.ranges.map(e),t.mainIndex)}function Nl(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Vc({state:t,dispatch:e},n){let i=rm(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Nl(t,i)),!0)}function Mb(t,e){return re.cursor(e?t.to:t.from)}function SB(t,e){return Vc(t,n=>n.empty?t.moveByChar(n,e):Mb(n,e))}function Pl(t){return t.textDirectionAt(t.state.selection.main.head)==Ft.LTR}const gT=t=>SB(t,!Pl(t)),vT=t=>SB(t,Pl(t));function kB(t,e){return Vc(t,n=>n.empty?t.moveByGroup(n,e):Mb(n,e))}const hfe=t=>kB(t,!Pl(t)),pfe=t=>kB(t,Pl(t));function _B(t,e){return Vc(t,n=>{if(!n.empty)return Mb(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const yT=t=>_B(t,!1),bT=t=>_B(t,!0);function CB(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Te.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function EB(t,e){let n=CB(t),{state:i}=t,r=rm(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):Mb(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Te.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Nl(i,r),{effects:s}),!0}const F1=t=>EB(t,!1),B1=t=>EB(t,!0);function Tb(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=re.cursor(i.from+s))}return r}const wT=t=>Vc(t,e=>Tb(t,e,!0)),xT=t=>Vc(t,e=>Tb(t,e,!1)),mfe=t=>Vc(t,e=>re.cursor(t.lineBlockAt(e.head).from,1)),gfe=t=>Vc(t,e=>re.cursor(t.lineBlockAt(e.head).to,-1));function vfe(t,e,n){let i=!1,r=rm(t.selection,s=>{let o=Ag(t,s.head,-1)||Ag(t,s.head,1)||s.head>0&&Ag(t,s.head-1,1)||s.head<t.doc.length&&Ag(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return re.cursor(a)});return i?(e(Nl(t,r)),!0):!1}const yfe=({state:t,dispatch:e})=>vfe(t,e);function Ml(t,e){let n=rm(t.state.selection,i=>{let r=e(i);return re.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Nl(t.state,n)),!0)}function AB(t,e){return Ml(t,n=>t.moveByChar(n,e))}const ST=t=>AB(t,!Pl(t)),kT=t=>AB(t,Pl(t));function NB(t,e){return Ml(t,n=>t.moveByGroup(n,e))}const bfe=t=>NB(t,!Pl(t)),wfe=t=>NB(t,Pl(t));function PB(t,e){return Ml(t,n=>t.moveVertically(n,e))}const _T=t=>PB(t,!1),CT=t=>PB(t,!0);function MB(t,e){return Ml(t,n=>t.moveVertically(n,e,CB(t).height))}const ET=t=>MB(t,!1),AT=t=>MB(t,!0),NT=t=>Ml(t,e=>Tb(t,e,!0)),PT=t=>Ml(t,e=>Tb(t,e,!1)),xfe=t=>Ml(t,e=>re.cursor(t.lineBlockAt(e.head).from)),Sfe=t=>Ml(t,e=>re.cursor(t.lineBlockAt(e.head).to)),MT=({state:t,dispatch:e})=>(e(Nl(t,{anchor:0})),!0),TT=({state:t,dispatch:e})=>(e(Nl(t,{anchor:t.doc.length})),!0),RT=({state:t,dispatch:e})=>(e(Nl(t,{anchor:t.selection.main.anchor,head:0})),!0),OT=({state:t,dispatch:e})=>(e(Nl(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),kfe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),_fe=({state:t,dispatch:e})=>{let n=Ob(t).map(({from:i,to:r})=>re.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:re.create(n),userEvent:"select"})),!0};function Rb(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Ng(t,l,!1)):l>o&&(n="delete.forward",l=Ng(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Ng(t,o,!1),a=Ng(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:re.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Te.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Ng(t,e,n){if(t instanceof Te)for(let i of t.state.facet(Te.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const TB=(t,e,n)=>Rb(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let c=Vp(a,s.tabSize),u=c%$c(s)||$c(s);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)r--;l=r}else l=Vn(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=Vn(o.text,l-o.from,!1,!1)+o.from);return l}),z1=t=>TB(t,!1,!0),IT=t=>TB(t,!0,!1),RB=(t,e)=>Rb(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=Vn(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),DT=t=>RB(t,!1),Cfe=t=>RB(t,!0),LT=t=>Rb(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Efe=t=>Rb(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),Afe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ut.of(["",""])},range:re.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Nfe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Vn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:Vn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:re.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ob(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function OB(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of Ob(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(re.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(re.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:re.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Pfe=({state:t,dispatch:e})=>OB(t,e,!1),Mfe=({state:t,dispatch:e})=>OB(t,e,!0);function IB(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of Ob(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Tfe=({state:t,dispatch:e})=>IB(t,e,!1),Rfe=({state:t,dispatch:e})=>IB(t,e,!0),Ofe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Ob(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=rm(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Ife(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=ro(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(ct.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const jT=Dfe(!1);function Dfe(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&Ife(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new EE(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=fde(c,s);for(u==null&&(u=Vp(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",dk(e,u)];return l&&d.push(dk(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:ut.of(d)},range:re.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function DB(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:re.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const vk=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(DB(t,(n,i)=>{i.push({from:n.from,insert:t.facet(CE)})}),{userEvent:"input.indent"})),!0),$T=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(DB(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Vp(r,t.tabSize),o=0,a=dk(t,Math.max(0,s-$c(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),FT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class _p{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(FT(a)):FT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Cr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=iC(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=No(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(_p.prototype[Symbol.iterator]=function(){return this});const LB={from:-1,to:-1,match:/.*/.exec("")},DE="gm"+(/x/.unicode==null?"":"u");class jB{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=LB,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new $B(e,n,i,r,s);this.re=new RegExp(n,DE+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Zv(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Zv(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const U1=new WeakMap;class Xu{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=U1.get(e);if(!r||r.from>=i||r.to<=n){let a=new Xu(n,e.sliceString(n,i));return U1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),U1.set(e,new Xu(o,s)),new Xu(n,s.slice(n-o,i-o))}}class $B{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=LB,this.matchPos=Zv(e,r),this.re=new RegExp(n,DE+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Xu.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Zv(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Xu.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(jB.prototype[Symbol.iterator]=$B.prototype[Symbol.iterator]=function(){return this});function Lfe(t){try{return new RegExp(t,DE),!0}catch{return!1}}function Zv(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function yk(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Et("input",{class:"cm-textfield",name:"line",value:e}),i=Et("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:xh.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Et("label",t.state.phrase("Go to line"),": ",n)," ",Et("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Et("button",{name:"close",onclick:()=>{t.dispatch({effects:xh.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,p=c?+c:a.number;if(c&&d){let v=p/100;l&&(v=v*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*v)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let m=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),g=re.cursor(m.from+Math.max(0,Math.min(f,m.length)));t.dispatch({effects:[xh.of(!1),Te.scrollIntoView(g.from,{y:"center"})],selection:g}),t.focus()}return{dom:i}}const xh=Je.define(),BT=xi.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(xh)&&(t=n.value);return t},provide:t=>lp.from(t,e=>e?yk:null)}),jfe=t=>{let e=ap(t,yk);if(!e){let n=[xh.of(!0)];t.state.field(BT,!1)==null&&n.push(Je.appendConfig.of([BT,$fe])),t.dispatch({effects:n}),e=ap(t,yk)}return e&&e.dom.querySelector("input").select(),!0},$fe=Te.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Ffe=({state:t,dispatch:e})=>{let{selection:n}=t,i=re.create(n.ranges.map(r=>t.wordAt(r.head)||re.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Bfe(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new _p(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new _p(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const zfe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Ffe({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Bfe(t,i);return r?(e(t.update({selection:t.selection.addRange(re.range(r.from,r.to),!1),effects:Te.scrollIntoView(r.to)})),!0):!1},Kd=Ee.define({combine(t){return Sl(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Xfe(e),scrollToMatch:e=>Te.scrollIntoView(e)})}});class FB{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Lfe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Wfe(this):new Vfe(this)}getCursor(e,n=0,i){let r=e.doc?e:at.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?du(this,r,n,i):uu(this,r,n,i)}}class BB{constructor(e){this.spec=e}}function uu(t,e,n,i){return new _p(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?Ufe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Ufe(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(Qv(r,n-s))!=Hn.Word||e(ey(r,n-s))!=Hn.Word)&&(e(ey(r,i-s))!=Hn.Word||e(Qv(r,i-s))!=Hn.Word))}class Vfe extends BB{constructor(e){super(e)}nextMatch(e,n,i){let r=uu(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=uu(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=uu(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=uu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=uu(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function du(t,e,n,i){return new jB(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Hfe(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function Qv(t,e){return t.slice(Vn(t,e,!1),e)}function ey(t,e){return t.slice(e,Vn(t,e))}function Hfe(t){return(e,n,i)=>!i[0].length||(t(Qv(i.input,i.index))!=Hn.Word||t(ey(i.input,i.index))!=Hn.Word)&&(t(ey(i.input,i.index+i[0].length))!=Hn.Word||t(Qv(i.input,i.index+i[0].length))!=Hn.Word)}class Wfe extends BB{nextMatch(e,n,i){let r=du(this.spec,e,i,e.doc.length).next();return r.done&&(r=du(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=du(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=du(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=du(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Cp=Je.define(),LE=Je.define(),Ja=xi.define({create(t){return new V1(bk(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Cp)?t=new V1(n.value.create(),t.panel):n.is(LE)&&(t=new V1(t.query,n.value?jE:null));return t},provide:t=>lp.from(t,e=>e.panel)});class V1{constructor(e,n){this.query=e,this.panel=n}}const Gfe=nt.mark({class:"cm-searchMatch"}),Kfe=nt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),qfe=qn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Ja))}update(t){let e=t.state.field(Ja);(e!=t.startState.field(Ja)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return nt.none;let{view:n}=this,i=new sl;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);i.add(c,u,d?Kfe:Gfe)})}return i.finish()}},{decorations:t=>t.decorations});function sm(t){return e=>{let n=e.state.field(Ja,!1);return n&&n.query.spec.valid?t(e,n):WB(e)}}const zT=sm((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=re.single(i.from,i.to),s=t.state.facet(Kd);return t.dispatch({selection:r,effects:[$E(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),HB(t),!0}),UT=sm((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=re.single(r.from,r.to),o=t.state.facet(Kd);return t.dispatch({selection:s,effects:[$E(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),HB(t),!0}),zB=sm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:re.create(n.map(i=>re.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Yfe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new _p(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(re.range(a.value.from,a.value.to))}return e(t.update({selection:re.create(s,o),userEvent:"select.search.matches"})),!0},VT=sm((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==i&&o.to==r&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Te.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let d=t.state.changes(a);return o&&(l=re.single(o.from,o.to).map(d),u.push($E(t,o)),u.push(n.facet(Kd).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),UB=sm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Te.announce.of(i),userEvent:"input.replace.all"}),!0});function jE(t){return t.state.facet(Kd).createPanel(t)}function bk(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Kd);return new FB({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function VB(t){let e=ap(t,jE);return e&&e.dom.querySelector("[main-field]")}function HB(t){let e=VB(t);e&&e==t.root.activeElement&&e.select()}const WB=t=>{let e=t.state.field(Ja,!1);if(e&&e.panel){let n=VB(t);if(n&&n!=t.root.activeElement){let i=bk(t.state,e.query.spec);i.valid&&t.dispatch({effects:Cp.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[LE.of(!0),e?Cp.of(bk(t.state,e.query.spec)):Je.appendConfig.of(Zfe)]});return!0},GB=t=>{let e=t.state.field(Ja,!1);if(!e||!e.panel)return!1;let n=ap(t,jE);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:LE.of(!1)}),!0};class Xfe{constructor(e){this.view=e;let n=this.query=e.state.field(Ja).query.spec;this.commit=this.commit.bind(this),this.searchField=Et("input",{value:n.search,placeholder:Ki(e,"Find"),"aria-label":Ki(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Et("input",{value:n.replace,placeholder:Ki(e,"Replace"),"aria-label":Ki(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Et("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Et("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Et("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Et("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Et("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>zT(e),[Ki(e,"next")]),i("prev",()=>UT(e),[Ki(e,"previous")]),i("select",()=>zB(e),[Ki(e,"all")]),Et("label",null,[this.caseField,Ki(e,"match case")]),Et("label",null,[this.reField,Ki(e,"regexp")]),Et("label",null,[this.wordField,Ki(e,"by word")]),...e.state.readOnly?[]:[Et("br"),this.replaceField,i("replace",()=>VT(e),[Ki(e,"replace")]),i("replaceAll",()=>UB(e),[Ki(e,"replace all")])],Et("button",{name:"close",onclick:()=>GB(e),"aria-label":Ki(e,"close"),type:"button"},["×"])])}commit(){let e=new FB({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Cp.of(e)}))}keydown(e){pQ(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?UT:zT)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),VT(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Cp)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Kd).top}}function Ki(t,e){return t.state.phrase(e)}const Pg=30,Mg=/[\s\.,:;?!]/;function $E(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Pg),o=Math.min(r,n+Pg),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Pg;l++)if(!Mg.test(a[l+1])&&Mg.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Pg;l--)if(!Mg.test(a[l-1])&&Mg.test(a[l])){a=a.slice(0,l);break}}return Te.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const Jfe=Te.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Zfe=[Ja,zp.low(qfe),Jfe];class Qfe{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=ro(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(KB(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function HT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function ehe(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=HT(e)+HT(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function the(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:ehe(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class WT{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Sh(t){return t.selection.main.from}function KB(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const qB=Xo.define();function nhe(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:re.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const GT=new WeakMap;function ihe(t){if(!Array.isArray(t))return t;let e=GT.get(t);return e||GT.set(t,e=the(t)),e}const YB=Je.define(),FE=Je.define();class rhe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Cr(e,n),r=No(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(Cr(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let b=Cr(e,0),w=No(b),k=w==e.length?0:-100;if(b!=n[0])if(b==i[0])k+=-200;else return null;return this.ret(k,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let b=0,w=Math.min(e.length,200);b<w&&c<l;){let k=Cr(e,b);(k==n[c]||k==i[c])&&(r[c++]=b),b+=No(k)}if(c<l)return null}let u=0,d=0,f=!1,p=0,m=-1,g=-1,v=/[a-z]/.test(e),y=!0;for(let b=0,w=Math.min(e.length,200),k=0;b<w&&d<l;){let C=Cr(e,b);a<0&&(u<l&&C==n[u]&&(s[u++]=b),p<l&&(C==n[p]||C==i[p]?(p==0&&(m=b),g=b+1,p++):p=0));let E,_=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(E=iC(C))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!b||_==1&&v||k==0&&_!=0)&&(n[d]==C||i[d]==C&&(f=!0)?o[d++]=b:o.length&&(y=!1)),k=_,b+=No(C)}return d==l&&o[0]==0&&y?this.result(-100+(f?-200:0),o,e):p==l&&m==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[m,g]):d==l?this.result(-100+(f?-200:0)+-700+(y?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?No(Cr(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class she{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const $s=Ee.define({combine(t){return Sl(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:ohe,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>KT(e(i),n(i)),optionClass:(e,n)=>i=>KT(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function KT(t,e){return t?e?t+" "+e:t:e}function ohe(t,e,n,i,r,s){let o=t.textDirection==Ft.RTL,a=o,l=!1,c="top",u,d,f=e.left-r.left,p=r.right-e.right,m=i.right-i.left,g=i.bottom-i.top;if(a&&f<Math.min(m,p)?a=!1:!a&&p<Math.min(m,f)&&(a=!0),m<=(a?f:p))u=Math.max(r.top,Math.min(n.top,r.bottom-g))-e.top,d=Math.min(400,a?f:p);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let b=r.bottom-e.bottom;b>=g||b>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let v=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/v}px; max-width: ${d/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function ahe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function H1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class lhe{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet($s);this.optionContent=ahe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=H1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet($s).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:FE.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=H1(s.length,o,e.state.facet($s).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=H1(n.options.length,n.selected,this.view.state.facet($s).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>ar(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&uhe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet($s).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>i.from||i.from==0))if(s=f,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let p=r.appendChild(document.createElement("completion-section"));p.textContent=f}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let p=f(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function che(t,e){return n=>new lhe(n,t,e)}function uhe(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function qT(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function dhe(t,e){let n=[],i=null,r=c=>{n.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let d=typeof u=="string"?u:u.name;i.some(f=>f.name==d)||i.push(typeof u=="string"?{name:d}:u)}},s=e.facet($s);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)r(new WT(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),f,p=s.filterStrict?new she(d):new rhe(d);for(let m of c.result.options)if(f=p.match(m.label)){let g=m.displayLabel?u?u(m,f.matched):[]:f.matched;r(new WT(m,c.source,g,f.score+(m.boost||0)))}}}if(i){let c=Object.create(null),u=0,d=(f,p)=>{var m,g;return((m=f.rank)!==null&&m!==void 0?m:1e9)-((g=p.rank)!==null&&g!==void 0?g:1e9)||(f.name<p.name?-1:1)};for(let f of i.sort(d))u-=1e5,c[f.name]=u;for(let f of n){let{section:p}=f.completion;p&&(f.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):qT(c.completion)>qT(a)&&(o[o.length-1]=c),a=c.completion}return o}class Ou{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Ou(this.options,YT(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(c=>c.isPending))return r.setDisabled();let a=dhe(e,n);if(!a.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let l=n.facet($s).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new Ou(a,YT(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:yhe,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Ou(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Ou(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class ty{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new ty(mhe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet($s),s=(i.override||n.languageDataAt("autocomplete",Sh(n)).map(ihe)).map(l=>(this.active.find(u=>u.source==l)||new as(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(XB));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!fhe(s,this.active)||a?o=Ou.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new as(l.source,0):l));for(let l of e.effects)l.is(JB)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new ty(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?hhe:phe}}function fhe(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const hhe={"aria-autocomplete":"list"},phe={};function YT(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const mhe=[];function ghe(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(qB);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class as{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=ghe(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new as(r.source,0)),i&4&&r.state==0&&(r=new as(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(YB))r=new as(r.source,1,s.value);else if(s.is(FE))r=new as(r.source,0);else if(s.is(XB))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Sh(e.state))}}class kh extends as{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Sh(e.state);if(a>o||!r||n&2&&(Sh(e.startState)==this.from||a<this.limit))return new as(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return vhe(r.validFor,e.state,s,o)?new kh(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new Qfe(e.state,a,!1)))?new kh(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:Sh(e.state)):new as(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new kh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new as(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function vhe(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):KB(t,!0).test(r)}const XB=Je.define({map(t,e){return t.map(n=>n.map(e))}}),JB=Je.define(),qd=xi.define({create(){return ty.start()},update(t,e){return t.update(e)},provide:t=>[yC.from(t,e=>e.tooltip),Te.contentAttributes.from(t,e=>e.attrs)]});function ZB(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(qd).active.find(r=>r.source==e.source);return i instanceof kh?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},nhe(t.state,n,i.from,i.to)),{annotations:qB.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const yhe=che(qd,ZB);function Tg(t,e="option"){return n=>{let i=n.state.field(qd,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet($s).interactionDelay)return!1;let r=1,s;e=="page"&&(s=GQ(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:JB.of(a)}),!0}}const XT=t=>{let e=t.state.field(qd,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet($s).interactionDelay?!1:ZB(t,e.open.options[e.open.selected])},bhe=t=>t.state.field(qd,!1)?(t.dispatch({effects:YB.of(!0)}),!0):!1,whe=t=>{let e=t.state.field(qd,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:FE.of(null)}),!0)},QB={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},e9=new class extends Nc{};e9.startSide=1;e9.endSide=-1;const W1="()[]{}<>«»»«［］｛｝";function xhe(t){for(let e=0;e<W1.length;e+=2)if(W1.charCodeAt(e)==t)return W1.charAt(e+1);return iC(t<128?t:t+1)}function She(t,e){return t.languageDataAt("closeBrackets",e)[0]||QB}const khe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=She(t,t.selection.main.head).brackets||QB.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=Che(t.doc,o.head);for(let l of i)if(l==a&&_he(t.doc,o.head)==xhe(Cr(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:re.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function _he(t,e){let n=t.sliceString(e,e+2);return n.slice(0,No(Cr(n,0)))}function Che(t,e){let n=t.sliceString(e-2,e);return No(Cr(n,0))==n.length?n:n.slice(1)}class JT{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class ec{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=i.facet(Ws).markerFilter;r&&(e=r(e,i));let s=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new sl,a=[],l=0;for(let u=0;;){let d=u==s.length?null:s[u];if(!d&&!a.length)break;let f,p;for(a.length?(f=l,p=a.reduce((g,v)=>Math.min(g,v.to),d&&d.from>f?d.from:1e8)):(f=d.from,p=d.to,a.push(d),u++);u<s.length;){let g=s[u];if(g.from==f&&(g.to>g.from||g.to==f))a.push(g),u++,p=Math.min(g.to,p);else{p=Math.min(g.from,p);break}}let m=Bhe(a);if(a.some(g=>g.from==g.to||g.from==g.to-1&&i.doc.lineAt(g.from).to==g.from))o.add(f,f,nt.widget({widget:new Lhe(m),diagnostics:a.slice()}));else{let g=a.reduce((v,y)=>y.markClass?v+" "+y.markClass:v,"");o.add(f,p,nt.mark({class:"cm-lintRange cm-lintRange-"+m+g,diagnostics:a.slice(),inclusiveEnd:a.some(v=>v.to>p)}))}l=p;for(let g=0;g<a.length;g++)a[g].to<=l&&a.splice(g--,1)}let c=o.finish();return new ec(c,n,Dd(c))}}function Dd(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new JT(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new JT(i.from,s,i.diagnostic)}}),i}function Ehe(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(Ws).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(BE))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function t9(t,e){return t.field(cr,!1)?e:e.concat(Je.appendConfig.of(s9))}function Ahe(t,e){return{effects:t9(t,[BE.of(e)])}}const BE=Je.define(),zE=Je.define(),n9=Je.define(),cr=xi.define({create(){return new ec(nt.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=Dd(n,t.selected.diagnostic,s)||Dd(n,null,s)}!n.size&&r&&e.state.facet(Ws).autoPanel&&(r=null),t=new ec(n,r,i)}for(let n of e.effects)if(n.is(BE)){let i=e.state.facet(Ws).autoPanel?n.value.length?Ep.open:null:t.panel;t=ec.init(n.value,i,e.state)}else n.is(zE)?t=new ec(t.diagnostics,n.value?Ep.open:null,t.selected):n.is(n9)&&(t=new ec(t.diagnostics,t.panel,n.value));return t},provide:t=>[lp.from(t,e=>e.panel),Te.decorations.from(t,e=>e.diagnostics)]}),Nhe=nt.mark({class:"cm-lintRange cm-lintRange-active"});function Phe(t,e,n){let{diagnostics:i}=t.state.field(cr),r,s=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return r=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(Ws).tooltipFilter;return r&&a&&(r=a(r,t.state)),r?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Mhe(t,r)}}}:null}function Mhe(t,e){return Et("ul",{class:"cm-tooltip-lint"},e.map(n=>r9(t,n,!1)))}const The=t=>{let e=t.state.field(cr,!1);(!e||!e.panel)&&t.dispatch({effects:t9(t.state,[zE.of(!0)])});let n=ap(t,Ep.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},ZT=t=>{let e=t.state.field(cr,!1);return!e||!e.panel?!1:(t.dispatch({effects:zE.of(!1)}),!0)},Rhe=t=>{let e=t.state.field(cr,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Ohe=qn.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Ws);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Ws);n.length&&Ihe(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(Ahe(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{ar(this.view.state,i)})}}update(t){let e=t.state.facet(Ws);(t.docChanged||e!=t.startState.facet(Ws)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Ihe(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):r=setTimeout(()=>e(i),200)},n)}const Ws=Ee.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Sl(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Dhe(t,e={}){return[Ws.of({source:t,config:e}),Ohe,s9]}function i9(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function r9(t,e,n){var i;let r=n?i9(e.actions):[];return Et("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Et("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let p=Dd(t.state.field(cr).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,d=u<0?c:[c.slice(0,u),Et("u",c.slice(u,u+1)),c.slice(u+1)];return Et("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Et("div",{class:"cm-diagnosticSource"},e.source))}class Lhe extends kl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Et("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class QT{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=r9(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ep{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)ZT(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=i9(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=Dd(this.view.state.field(cr).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Et("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Et("div",{class:"cm-panel-lint"},this.list,Et("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ZT(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(cr).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(cr),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,f;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(f=new QT(this.view,u),this.items.splice(i,0,f),r=!0):(f=this.items[d],d>i&&(this.items.splice(i,d-i),r=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new QT(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(cr),i=Dd(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:n9.of(i)})}static open(e){return new Ep(e)}}function jhe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Rg(t){return jhe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const $he=Te.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Rg("#d11")},".cm-lintRange-warning":{backgroundImage:Rg("orange")},".cm-lintRange-info":{backgroundImage:Rg("#999")},".cm-lintRange-hint":{backgroundImage:Rg("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Fhe(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function Bhe(t){let e="hint",n=1;for(let i of t){let r=Fhe(i.severity);r>n&&(n=r,e=i.severity)}return e}const s9=[cr,Te.decorations.compute([cr],t=>{let{selected:e,panel:n}=t.field(cr);return!e||!n||e.from==e.to?nt.none:nt.set([Nhe.range(e.from,e.to)])}),WQ(Phe,{hideOn:Ehe}),$he],o9=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},zhe=o9("up"),Uhe=o9("down"),Vhe=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(re.range(s,s)):e=re.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},Hhe=[{key:"Ctrl-Space",run:bhe},{key:"Escape",run:whe},{key:"ArrowDown",run:Tg(!0)},{key:"ArrowUp",run:Tg(!1)},{key:"PageDown",run:Tg(!0,"page")},{key:"PageUp",run:Tg(!1,"page")},{key:"Enter",run:XT},{key:"Tab",run:XT},{key:"Mod-f",run:WB,scope:"editor search-panel"},{key:"Escape",run:GB,scope:"editor search-panel"},{key:"Alt-Enter",run:zB,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:UB,scope:"editor search-panel"},{key:"Ctrl-g",run:jfe},{key:"Mod-d",run:zfe,preventDefault:!0},{key:"Shift-Mod-l",run:Yfe},{key:"Enter",run:jT,shift:jT},{key:"ArrowLeft",run:gT,shift:ST,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:hfe,shift:bfe},{key:"ArrowRight",run:vT,shift:kT,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:pfe,shift:wfe},{key:"ArrowUp",run:yT,shift:_T,preventDefault:!0},{key:"ArrowDown",run:bT,shift:CT,preventDefault:!0},{key:"Home",run:xT,shift:PT},{mac:"Cmd-ArrowLeft",run:xT,shift:PT},{key:"Mod-Home",run:MT,shift:RT},{mac:"Cmd-ArrowUp",run:MT,shift:RT},{key:"PageUp",run:F1,shift:ET},{mac:"Ctrl-ArrowUp",run:F1,shift:ET},{key:"PageDown",run:B1,shift:AT},{mac:"Ctrl-ArrowDown",run:B1,shift:AT},{key:"End",run:wT,shift:NT},{mac:"Cmd-ArrowRight",run:wT,shift:NT},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:zhe,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Uhe,preventDefault:!0},{key:"Shift-Alt-i",run:Vhe},{key:"Mod-End",run:TT,shift:OT},{mac:"Cmd-ArrowDown",run:TT,shift:OT},{key:"Mod-a",run:kfe},{key:"Backspace",run:khe},{key:"Backspace",run:z1,shift:z1},{key:"Delete",run:IT},{key:"Mod-Backspace",mac:"Alt-Backspace",run:DT},{key:"Mod-Delete",mac:"Alt-Delete",run:Cfe},{mac:"Mod-Backspace",run:Efe},{mac:"Mod-Delete",run:LT},{mac:"Ctrl-b",run:gT,shift:ST,preventDefault:!0},{mac:"Ctrl-f",run:vT,shift:kT},{mac:"Ctrl-p",run:yT,shift:_T},{mac:"Ctrl-n",run:bT,shift:CT},{mac:"Ctrl-a",run:mfe,shift:xfe},{mac:"Ctrl-e",run:gfe,shift:Sfe},{mac:"Ctrl-d",run:IT},{mac:"Ctrl-h",run:z1},{mac:"Ctrl-k",run:LT},{mac:"Ctrl-Alt-h",run:DT},{mac:"Ctrl-o",run:Afe},{mac:"Ctrl-t",run:Nfe},{mac:"Ctrl-v",run:B1},{mac:"Alt-v",run:F1},{key:"Shift-Mod-k",run:Ofe},{key:"Alt-ArrowDown",run:Mfe},{key:"Alt-ArrowUp",run:Pfe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Rfe},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Tfe},{key:"Mod-l",run:_fe,preventDefault:!0},{key:"Shift-Mod-\\",run:yfe},{key:"Tab",run:vk,shift:$T,preventDefault:!0},{key:"Mod-[",run:$T},{key:"Mod-]",run:vk},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Cde},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Ede},{key:"Mod-k Mod-0",run:Ade},{key:"Mod-k Mod-j",run:Nde},{key:"Mod-k Mod-c",run:Jde},{key:"Mod-k Mod-u",run:Zde},{key:"Mod-/",run:Yde},{key:"Shift-Alt-a",run:Qde},{key:"Mod-z",run:bB,preventDefault:!0},{key:"Mod-y",run:gk,preventDefault:!0},{key:"Mod-Shift-z",run:gk,preventDefault:!0},{key:"Mod-u",run:ofe,preventDefault:!0},{key:"Mod-Shift-m",run:The},{key:"F8",run:Rhe}];var Whe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ru=new WeakMap,Og=new WeakMap,Ig={},G1=0,a9=function(t){return t&&(t.host||a9(t.parentNode))},Ghe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=a9(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Khe=function(t,e,n,i){var r=Ghe(e,Array.isArray(t)?t:[t]);Ig[n]||(Ig[n]=new WeakMap);var s=Ig[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),m=p!==null&&p!=="false",g=(ru.get(f)||0)+1,v=(s.get(f)||0)+1;ru.set(f,g),s.set(f,v),o.push(f),g===1&&m&&Og.set(f,!0),v===1&&f.setAttribute(n,"true"),m||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),G1++,function(){o.forEach(function(d){var f=ru.get(d)-1,p=s.get(d)-1;ru.set(d,f),s.set(d,p),f||(Og.has(d)||d.removeAttribute(i),Og.delete(d)),p||d.removeAttribute(n)}),G1--,G1||(ru=new WeakMap,ru=new WeakMap,Og=new WeakMap,Ig={})}},qhe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=Whe(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),Khe(i,r,n,"aria-hidden")):function(){return null}},wk=["Enter"," "],Yhe=["ArrowDown","PageUp","Home"],l9=["ArrowUp","PageDown","End"],Xhe=[...Yhe,...l9],Jhe={ltr:[...wk,"ArrowRight"],rtl:[...wk,"ArrowLeft"]},Zhe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},om="Menu",[Ap,Qhe,epe]=Ip(om),[Hc,c9]=gs(om,[epe,Hd,Ry]),Ib=Hd(),u9=Ry(),[tpe,Wc]=Hc(om),[npe,am]=Hc(om),d9=t=>{const{__scopeMenu:e,open:n=!1,children:i,dir:r,onOpenChange:s,modal:o=!0}=t,a=Ib(e),[l,c]=x.useState(null),u=x.useRef(!1),d=Vi(s),f=Dp(r);return x.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),h.jsx(lE,{...a,children:h.jsx(tpe,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:h.jsx(npe,{scope:e,onClose:x.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o,children:i})})})};d9.displayName=om;var ipe="MenuAnchor",UE=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=Ib(n);return h.jsx(gb,{...r,...i,ref:e})});UE.displayName=ipe;var VE="MenuPortal",[rpe,f9]=Hc(VE,{forceMount:void 0}),h9=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=Wc(VE,e);return h.jsx(rpe,{scope:e,forceMount:n,children:h.jsx(Ko,{present:n||s.open,children:h.jsx(Zp,{asChild:!0,container:r,children:i})})})};h9.displayName=VE;var Fr="MenuContent",[spe,HE]=Hc(Fr),p9=x.forwardRef((t,e)=>{const n=f9(Fr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Wc(Fr,t.__scopeMenu),o=am(Fr,t.__scopeMenu);return h.jsx(Ap.Provider,{scope:t.__scopeMenu,children:h.jsx(Ko,{present:i||s.open,children:h.jsx(Ap.Slot,{scope:t.__scopeMenu,children:o.modal?h.jsx(ope,{...r,ref:e}):h.jsx(ape,{...r,ref:e})})})})}),ope=x.forwardRef((t,e)=>{const n=Wc(Fr,t.__scopeMenu),i=x.useRef(null),r=ot(e,i);return x.useEffect(()=>{const s=i.current;if(s)return qhe(s)},[]),h.jsx(WE,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ve(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ape=x.forwardRef((t,e)=>{const n=Wc(Fr,t.__scopeMenu);return h.jsx(WE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),lpe=gd("MenuContent.ScrollLock"),WE=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:m,...g}=t,v=Wc(Fr,n),y=am(Fr,n),b=Ib(n),w=u9(n),k=Qhe(n),[C,E]=x.useState(null),_=x.useRef(null),N=ot(e,_,v.onContentChange),M=x.useRef(0),R=x.useRef(""),I=x.useRef(0),D=x.useRef(null),K=x.useRef("right"),B=x.useRef(0),W=m?yb:x.Fragment,Y=m?{as:lpe,allowPinchZoom:!0}:void 0,te=$=>{var S,P;const ie=R.current+$,ke=k().filter(O=>!O.disabled),Z=document.activeElement,le=(S=ke.find(O=>O.ref.current===Z))==null?void 0:S.textValue,j=ke.map(O=>O.textValue),L=wpe(j,ie,le),U=(P=ke.find(O=>O.textValue===L))==null?void 0:P.ref.current;(function O(T){R.current=T,window.clearTimeout(M.current),T!==""&&(M.current=window.setTimeout(()=>O(""),1e3))})(ie),U&&setTimeout(()=>U.focus())};x.useEffect(()=>()=>window.clearTimeout(M.current),[]),JC();const V=x.useCallback($=>{var ke,Z;return K.current===((ke=D.current)==null?void 0:ke.side)&&Spe($,(Z=D.current)==null?void 0:Z.area)},[]);return h.jsx(spe,{scope:n,searchRef:R,onItemEnter:x.useCallback($=>{V($)&&$.preventDefault()},[V]),onItemLeave:x.useCallback($=>{var ie;V($)||((ie=_.current)==null||ie.focus(),E(null))},[V]),onTriggerLeave:x.useCallback($=>{V($)&&$.preventDefault()},[V]),pointerGraceTimerRef:I,onPointerGraceIntentChange:x.useCallback($=>{D.current=$},[]),children:h.jsx(W,{...Y,children:h.jsx(fb,{asChild:!0,trapped:r,onMountAutoFocus:ve(s,$=>{var ie;$.preventDefault(),(ie=_.current)==null||ie.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(Xp,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(G5,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:i,currentTabStopId:C,onCurrentTabStopIdChange:E,onEntryFocus:ve(l,$=>{y.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(cE,{role:"menu","aria-orientation":"vertical","data-state":M9(v.open),"data-radix-menu-content":"",dir:y.dir,...b,...g,ref:N,style:{outline:"none",...g.style},onKeyDown:ve(g.onKeyDown,$=>{const ke=$.target.closest("[data-radix-menu-content]")===$.currentTarget,Z=$.ctrlKey||$.altKey||$.metaKey,le=$.key.length===1;ke&&($.key==="Tab"&&$.preventDefault(),!Z&&le&&te($.key));const j=_.current;if($.target!==j||!Xhe.includes($.key))return;$.preventDefault();const U=k().filter(S=>!S.disabled).map(S=>S.ref.current);l9.includes($.key)&&U.reverse(),ype(U)}),onBlur:ve(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(M.current),R.current="")}),onPointerMove:ve(t.onPointerMove,Np($=>{const ie=$.target,ke=B.current!==$.clientX;if($.currentTarget.contains(ie)&&ke){const Z=$.clientX>B.current?"right":"left";K.current=Z,B.current=$.clientX}}))})})})})})})});p9.displayName=Fr;var cpe="MenuGroup",GE=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(ze.div,{role:"group",...i,ref:e})});GE.displayName=cpe;var upe="MenuLabel",m9=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(ze.div,{...i,ref:e})});m9.displayName=upe;var ny="MenuItem",eR="menu.itemSelect",Db=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=x.useRef(null),o=am(ny,t.__scopeMenu),a=HE(ny,t.__scopeMenu),l=ot(e,s),c=x.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(eR,{bubbles:!0,cancelable:!0});d.addEventListener(eR,p=>i==null?void 0:i(p),{once:!0}),O_(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return h.jsx(g9,{...r,ref:l,disabled:n,onClick:ve(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:ve(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:ve(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||wk.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Db.displayName=ny;var g9=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=HE(ny,n),a=u9(n),l=x.useRef(null),c=ot(e,l),[u,d]=x.useState(!1),[f,p]=x.useState("");return x.useEffect(()=>{const m=l.current;m&&p((m.textContent??"").trim())},[s.children]),h.jsx(Ap.ItemSlot,{scope:n,disabled:i,textValue:r??f,children:h.jsx(K5,{asChild:!0,...a,focusable:!i,children:h.jsx(ze.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:c,onPointerMove:ve(t.onPointerMove,Np(m=>{i?o.onItemLeave(m):(o.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ve(t.onPointerLeave,Np(m=>o.onItemLeave(m))),onFocus:ve(t.onFocus,()=>d(!0)),onBlur:ve(t.onBlur,()=>d(!1))})})})}),dpe="MenuCheckboxItem",v9=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return h.jsx(S9,{scope:t.__scopeMenu,checked:n,children:h.jsx(Db,{role:"menuitemcheckbox","aria-checked":iy(n)?"mixed":n,...r,ref:e,"data-state":qE(n),onSelect:ve(r.onSelect,()=>i==null?void 0:i(iy(n)?!0:!n),{checkForDefaultPrevented:!1})})})});v9.displayName=dpe;var y9="MenuRadioGroup",[fpe,hpe]=Hc(y9,{value:void 0,onValueChange:()=>{}}),b9=x.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=Vi(i);return h.jsx(fpe,{scope:t.__scopeMenu,value:n,onValueChange:s,children:h.jsx(GE,{...r,ref:e})})});b9.displayName=y9;var w9="MenuRadioItem",x9=x.forwardRef((t,e)=>{const{value:n,...i}=t,r=hpe(w9,t.__scopeMenu),s=n===r.value;return h.jsx(S9,{scope:t.__scopeMenu,checked:s,children:h.jsx(Db,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":qE(s),onSelect:ve(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});x9.displayName=w9;var KE="MenuItemIndicator",[S9,ppe]=Hc(KE,{checked:!1}),k9=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=ppe(KE,n);return h.jsx(Ko,{present:i||iy(s.checked)||s.checked===!0,children:h.jsx(ze.span,{...r,ref:e,"data-state":qE(s.checked)})})});k9.displayName=KE;var mpe="MenuSeparator",_9=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(ze.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});_9.displayName=mpe;var gpe="MenuArrow",C9=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=Ib(n);return h.jsx(uE,{...r,...i,ref:e})});C9.displayName=gpe;var vpe="MenuSub",[Age,E9]=Hc(vpe),Yf="MenuSubTrigger",A9=x.forwardRef((t,e)=>{const n=Wc(Yf,t.__scopeMenu),i=am(Yf,t.__scopeMenu),r=E9(Yf,t.__scopeMenu),s=HE(Yf,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(UE,{asChild:!0,...c,children:h.jsx(g9,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":M9(n.open),...t,ref:Ty(e,r.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ve(t.onPointerMove,Np(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ve(t.onPointerLeave,Np(d=>{var p,m;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const g=(m=n.content)==null?void 0:m.dataset.side,v=g==="right",y=v?-5:5,b=f[v?"left":"right"],w=f[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:b,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x:b,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ve(t.onKeyDown,d=>{var p;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||Jhe[i.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});A9.displayName=Yf;var N9="MenuSubContent",P9=x.forwardRef((t,e)=>{const n=f9(Fr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Wc(Fr,t.__scopeMenu),o=am(Fr,t.__scopeMenu),a=E9(N9,t.__scopeMenu),l=x.useRef(null),c=ot(e,l);return h.jsx(Ap.Provider,{scope:t.__scopeMenu,children:h.jsx(Ko,{present:i||s.open,children:h.jsx(Ap.Slot,{scope:t.__scopeMenu,children:h.jsx(WE,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ve(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ve(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ve(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=Zhe[o.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});P9.displayName=N9;function M9(t){return t?"open":"closed"}function iy(t){return t==="indeterminate"}function qE(t){return iy(t)?"indeterminate":t?"checked":"unchecked"}function ype(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function bpe(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function wpe(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=bpe(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function xpe(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>i!=f>i&&n<(d-c)*(i-u)/(f-u)+c&&(r=!r)}return r}function Spe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return xpe(n,e)}function Np(t){return e=>e.pointerType==="mouse"?t(e):void 0}var kpe=d9,_pe=UE,Cpe=h9,Epe=p9,Ape=GE,Npe=m9,Ppe=Db,Mpe=v9,Tpe=b9,Rpe=x9,Ope=k9,Ipe=_9,Dpe=C9,Lpe=A9,jpe=P9,Lb="DropdownMenu",[$pe,Nge]=gs(Lb,[c9]),Si=c9(),[Fpe,T9]=$pe(Lb),R9=t=>{const{__scopeDropdownMenu:e,children:n,dir:i,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=Si(e),c=x.useRef(null),[u,d]=Fo({prop:r,defaultProp:s??!1,onChange:o,caller:Lb});return h.jsx(Fpe,{scope:e,triggerId:tl(),triggerRef:c,contentId:tl(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),modal:a,children:h.jsx(kpe,{...l,open:u,onOpenChange:d,dir:i,modal:a,children:n})})};R9.displayName=Lb;var O9="DropdownMenuTrigger",I9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=T9(O9,n),o=Si(n);return h.jsx(_pe,{asChild:!0,...o,children:h.jsx(ze.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:Ty(e,s.triggerRef),onPointerDown:ve(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ve(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});I9.displayName=O9;var Bpe="DropdownMenuPortal",D9=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Si(e);return h.jsx(Cpe,{...i,...n})};D9.displayName=Bpe;var L9="DropdownMenuContent",j9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=T9(L9,n),s=Si(n),o=x.useRef(!1);return h.jsx(Epe,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:ve(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ve(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});j9.displayName=L9;var zpe="DropdownMenuGroup",Upe=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return h.jsx(Ape,{...r,...i,ref:e})});Upe.displayName=zpe;var Vpe="DropdownMenuLabel",$9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return h.jsx(Npe,{...r,...i,ref:e})});$9.displayName=Vpe;var Hpe="DropdownMenuItem",F9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return h.jsx(Ppe,{...r,...i,ref:e})});F9.displayName=Hpe;var Wpe="DropdownMenuCheckboxItem",B9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return h.jsx(Mpe,{...r,...i,ref:e})});B9.displayName=Wpe;var Gpe="DropdownMenuRadioGroup",Kpe=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return h.jsx(Tpe,{...r,...i,ref:e})});Kpe.displayName=Gpe;var qpe="DropdownMenuRadioItem",z9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return h.jsx(Rpe,{...r,...i,ref:e})});z9.displayName=qpe;var Ype="DropdownMenuItemIndicator",U9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return h.jsx(Ope,{...r,...i,ref:e})});U9.displayName=Ype;var Xpe="DropdownMenuSeparator",V9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return h.jsx(Ipe,{...r,...i,ref:e})});V9.displayName=Xpe;var Jpe="DropdownMenuArrow",Zpe=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return h.jsx(Dpe,{...r,...i,ref:e})});Zpe.displayName=Jpe;var Qpe="DropdownMenuSubTrigger",H9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return h.jsx(Lpe,{...r,...i,ref:e})});H9.displayName=Qpe;var eme="DropdownMenuSubContent",W9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return h.jsx(jpe,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});W9.displayName=eme;var tme=R9,nme=I9,ime=D9,G9=j9,K9=$9,q9=F9,Y9=B9,X9=z9,J9=U9,Z9=V9,Q9=H9,ez=W9;const rme=tme,sme=nme,ome=x.forwardRef(({className:t,inset:e,children:n,...i},r)=>h.jsxs(Q9,{ref:r,className:ee("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,h.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));ome.displayName=Q9.displayName;const ame=x.forwardRef(({className:t,...e},n)=>h.jsx(ez,{ref:n,className:ee("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));ame.displayName=ez.displayName;const tz=x.forwardRef(({className:t,sideOffset:e=4,...n},i)=>h.jsx(ime,{children:h.jsx(G9,{ref:i,sideOffset:e,className:ee("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));tz.displayName=G9.displayName;const Xf=x.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(q9,{ref:i,className:ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Xf.displayName=q9.displayName;const lme=x.forwardRef(({className:t,children:e,checked:n,...i},r)=>h.jsxs(Y9,{ref:r,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(J9,{children:h.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));lme.displayName=Y9.displayName;const cme=x.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(X9,{ref:i,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(J9,{children:h.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));cme.displayName=X9.displayName;const ume=x.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(K9,{ref:i,className:ee("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));ume.displayName=K9.displayName;const dme=x.forwardRef(({className:t,...e},n)=>h.jsx(Z9,{ref:n,className:ee("-mx-1 my-1 h-px bg-stone-600",t),...e}));dme.displayName=Z9.displayName;const YE=m6("vonsim-program",Zy(Tn().language,"editor.example"),void 0,{getOnInit:!0}),fme=()=>{const t=z.get(YE);return typeof t=="string"?t:""},hme=qn.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(z.set(YE,this.view.state.doc.toString()),z.set(Cv,!0))}}),_f="showSaveFilePicker"in window,tR=de(null),nR=de(t=>t(tR),(t,e,n)=>{e(tR,n)}),nz=de(""),pme=de(t=>t(nz)!==t(YE));function mme(){const t=Mt();function e(){}const n=Ze(nR),i=xS(nR),r=Ze(pme),s=xS(nz),o=n&&r,a=x.useCallback(async()=>{if(!_f){Pi({title:t("editor.files.unsupported"),variant:"error"});return}if(!(o&&!confirm(t("editor.files.unsaved"))))try{const[f]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});await f.requestPermission({mode:"readwrite"})==="granted"&&i(f);const g=await(await f.getFile()).text();s(g),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:g}})}catch(f){console.error(f),Pi({title:t("editor.files.open-error"),variant:"error"})}},[t,o,i,s]);Ao(f=>f.ctrlKey&&f.key==="o",f=>{f.preventDefault(),a()},void 0,[a]);const l=x.useCallback(async f=>{var m,g;if(f.stopPropagation(),f.preventDefault(),!_f){Pi({title:t("editor.files.unsupported"),variant:"error"});return}const p=(g=(m=f.dataTransfer)==null?void 0:m.items)==null?void 0:g[0];if(!(!p||p.kind!=="file")&&!(o&&!confirm(t("editor.files.unsaved"))))try{const v=await p.getAsFileSystemHandle();if(!v)throw new Error("File handle not found");await v.requestPermission({mode:"readwrite"})==="granted"&&i(v);const w=await(await v.getFile()).text();s(w),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:w}})}catch(v){console.error(v),Pi({title:t("editor.files.open-error"),variant:"error"})}},[i,s,t,o]);e0("drop",l,window),e0("dragover",f=>{f.preventDefault(),f.stopPropagation()},window);const c=x.useCallback(async()=>{if(!_f){Pi({title:t("editor.files.unsupported"),variant:"error"});return}if(o)try{const f=window.codemirror.state.doc.toString(),p=await n.createWritable({keepExistingData:!1});await p.write(f),await p.close(),s(f)}catch(f){console.error(f),Pi({title:t("editor.files.save-error"),variant:"error"})}},[t,o,n,s]),u=x.useCallback(async()=>{const f=window.codemirror.state.doc.toString(),p=(n==null?void 0:n.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(_f)try{const m=await window.showSaveFilePicker({suggestedName:p,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]}),g=await m.requestPermission({mode:"readwrite"});if(g!=="granted")throw new Error(`Permission denied: ${g}`);i(m);const v=await m.createWritable({keepExistingData:!1});await v.write(f),await v.close(),s(f)}catch(m){console.error(m),Pi({title:t("editor.files.save-error"),variant:"error"})}else{const m=new Blob([f],{type:"text/plain"}),g=URL.createObjectURL(m),v=document.createElement("a");v.style.display="none",v.href=g,v.download=p,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(g)}},[t,n,i,s]);Ao(f=>f.ctrlKey&&f.key==="s",f=>{f.preventDefault(),_f&&(n?c():u())},void 0,[n,c,u]),Ao(f=>f.ctrlKey&&f.shiftKey&&f.key==="S",f=>{f.preventDefault(),u()},void 0,[u]);const d=x.useCallback(f=>{o&&(f.preventDefault(),f.returnValue=t("editor.files.unsaved"))},[t,o]);return e0("beforeunload",d,window),h.jsxs(rme,{children:[h.jsx(sme,{asChild:!0,children:h.jsxs("button",{className:ee("flex items-center transition-colors hover:text-white",n&&"text-white"),"data-testid":"new-button",children:[n?n.name:t("editor.files.no-file"),o&&h.jsx("span",{className:"ml-1 size-2 rounded-full bg-current"})]})}),h.jsxs(tz,{className:"w-64",align:"start",children:[h.jsxs(Xf,{onClick:a,"data-testid":"open-button",children:[h.jsx("span",{className:"icon-[lucide--file-search-2] mr-2 size-4"}),t("editor.files.open"),h.jsx("div",{className:"grow"}),h.jsx("kbd",{className:"text-stone-600",children:"Ctrl+O"})]}),h.jsxs(Xf,{disabled:!o,onClick:c,"data-testid":"save-button",children:[h.jsx("span",{className:"icon-[lucide--save] mr-2 size-4"}),t("editor.files.save"),h.jsx("div",{className:"grow"}),h.jsx("kbd",{className:"text-stone-600",children:"Ctrl+S"})]}),h.jsxs(Xf,{onClick:u,"data-testid":"save-as-button",children:[h.jsx("span",{className:"icon-[lucide--save-all] mr-2 size-4"}),t("editor.files.save-as"),h.jsx("div",{className:"grow"}),h.jsx("kbd",{className:"text-stone-600",children:"Ctrl+Shift+S"})]}),h.jsxs(Xf,{onClick:e,"data-testid":"assemble-button",children:[h.jsx("span",{className:"icon-[lucide--hammer] mr-2 size-4"}),"Ensamblar"]})]})]})}const xk=de(0);function gme(){const t=Mt(),e=Ze(xk);return h.jsxs("div",{className:"flex items-center justify-between border-t border-stone-600 bg-stone-800 px-3 font-sans text-xs tracking-wider text-stone-400",children:[h.jsx(mme,{}),h.jsx("span",{className:ee(e>0&&"font-semibold text-red-400"),children:t("editor.lintSummary",e)})]})}const _i={character:Be.character,comment:Be.comment,"data-directive":xn.define(),identifier:Be.variableName,instruction:xn.define(),label:Be.labelName,number:Be.number,operator:Be.operator,offset:xn.define(),"ptr-size":xn.define(),punctuation:Be.punctuation,register:xn.define(),special:xn.define(),string:Be.string,unassigned:xn.define()},vme=PE.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":Q_.includes(e)?"data-directive":eC.includes(e)?"instruction":hv.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:_i}),yme=Ide(Pb.define([{tag:_i.character,class:"text-orange-300"},{tag:_i.comment,class:"text-stone-500 italic"},{tag:_i["data-directive"],class:"text-rose-400/80"},{tag:_i.instruction,class:"text-mantis-400"},{tag:_i.number,class:"text-cyan-300/60"},{tag:_i.operator,class:"text-rose-300"},{tag:_i.offset,class:"text-rose-400/80 italic"},{tag:_i["ptr-size"],class:"text-rose-400/80 italic"},{tag:_i.punctuation,class:"text-stone-600"},{tag:_i.register,class:"text-emerald-400/80"},{tag:_i.special,class:"text-yellow-300/80"},{tag:_i.string,class:"text-orange-300"},{tag:_i.unassigned,class:"text-rose-400/80"}])),bme=Dhe(t=>{const e=t.state.doc.toString(),n=ML(e);if(n.success)return z.set(xk,0),[];const i=n,r=Tn().language,s=i.errors.map(o=>{var c,u;const a=((c=o.position)==null?void 0:c.start)??0,l=((u=o.position)==null?void 0:u.end)??e.length;return{message:o.translate(r),severity:"error",from:a,to:l}});return z.set(xk,s.length),s},{delay:200});function wme(){return new ude(vme,[yme,bme])}function iz({className:t}){const[e,n]=x.useState(),i=Hee(),r=x.useCallback(s=>{s&&n(s)},[]);return x.useEffect(()=>{if(e)return window.codemirror=new Te({state:at.create({doc:fme()||"",extensions:[at.tabSize.of(2),f6.of(at.readOnly.of(!1)),hme,nee(),aee,see(),PQ(),sfe(),wQ(),Te.domEventHandlers({drop:s=>s.preventDefault()}),at.allowMultipleSelections.of(!0),DQ(),i6.of([{key:"Escape",run:s=>(s.dispatch({selection:re.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?vk(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...Hhe]),wme()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),h.jsxs("div",{className:ee("flex flex-col",t),children:[h.jsx("div",{ref:r,className:"grow overflow-auto font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),h.jsx(gme,{})]})}const rz=x.memo(()=>{const t=xC(),e=Kee(),n=YG("(max-width: 640px)"),i=Mt(),r=x.useMemo(()=>({filter:e}),[e]),{updateServiceWorker:s}=eK({onNeedRefresh(){Pi({title:i("update.update-available"),action:h.jsx("button",{onClick:()=>s(!0),className:"text-xs bg-mantis-500 hover:bg-mantis-600 text-white px-2 py-1 rounded transition-colors",children:i("update.reload")}),duration:1/0})}});return h.jsxs("div",{"data-testid":"app-container",className:"flex h-screen w-screen flex-col bg-black text-white",lang:t,style:r,children:[h.jsx(uF,{"data-testid":"header"}),n?h.jsx(oz,{}):h.jsx(sz,{}),h.jsx(_L,{"data-testid":"footer"}),h.jsx(gF,{}),h.jsx(hF,{})]})});rz.displayName="App";const sz=x.memo(()=>{const[t]=jp(_b);return h.jsxs(_D,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[h.jsx(Qg,{id:"panel-editor",order:1,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-black","data-testid":"panel-editor",children:h.jsx(iz,{className:"size-full"})}),h.jsx(kS,{className:"w-2"}),h.jsx(Qg,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600","data-testid":"panel-computer",children:h.jsx(GF,{})}),t&&h.jsxs(h.Fragment,{children:[h.jsx(kS,{className:"w-2"}),h.jsx(Qg,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800","data-testid":"panel-settings",children:h.jsx(nF,{className:"size-full"})})]})]})});sz.displayName="DesktopLayout";const oz=x.memo(()=>{const t=Mt(),[e,n]=x.useState("editor"),[i,r]=jp(_b),s=Ze(tr),o=x.useMemo(()=>"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),a=x.useMemo(()=>i?"settings":e,[i,e]),l=x.useCallback(u=>{i&&r(!1),n(u)},[i,r]),c=x.useMemo(()=>{switch(a){case"editor":return"Editor";case"computer":return"Computadora";case"settings":return"Configuración";default:return""}},[a]);return h.jsx(Y5,{value:a,onValueChange:l,asChild:!0,children:h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-500",children:"Pestaña:"}),h.jsx("span",{className:"text-sm font-medium text-white",children:c})]}),a==="computer"&&h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-stone-500",children:"Instrucción actual:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:o||h.jsx("span",{className:"italic text-stone-400",children:"Sin instrucción"})})]})]})}),h.jsx(Zg,{value:"editor",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-black data-[state=inactive]:hidden","data-testid":"panel-editor",children:h.jsx(iz,{className:"size-full"})})}),h.jsx(Zg,{value:"computer",asChild:!0,children:h.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-computer",children:h.jsx(GF,{})})}),h.jsx(Zg,{value:"settings",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-settings",children:h.jsx(nF,{className:"size-full"})})}),h.jsx("div",{className:"border-t border-stone-700 bg-stone-900 p-2",children:h.jsxs(J5,{className:"grid grid-cols-3 gap-2",children:[h.jsxs(Jg,{value:"editor",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--file-terminal] mb-1 size-5"}),t("control.tabs.editor")]}),h.jsxs(Jg,{value:"computer",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--computer] mb-1 size-5"}),t("control.tabs.computer")]}),h.jsxs(Jg,{value:"settings",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--settings] mb-1 size-5"}),"Configuración"]})]})})]})})});oz.displayName="MobileLayout";var XE="ToastProvider",[JE,xme,Sme]=Ip("Toast"),[az,Pge]=gs("Toast",[Sme]),[kme,jb]=az(XE),lz=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=x.useState(null),[c,u]=x.useState(0),d=x.useRef(!1),f=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${XE}\`. Expected non-empty \`string\`.`),h.jsx(JE.Provider,{scope:e,children:h.jsx(kme,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:x.useCallback(()=>u(p=>p+1),[]),onToastRemove:x.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};lz.displayName=XE;var cz="ToastViewport",_me=["F8"],Sk="toast.viewportPause",kk="toast.viewportResume",uz=x.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=_me,label:r="Notifications ({hotkey})",...s}=t,o=jb(cz,n),a=xme(n),l=x.useRef(null),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=ot(e,d,o.onViewportChange),p=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;x.useEffect(()=>{const v=y=>{var w;i.length!==0&&i.every(k=>y[k]||y.code===k)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[i]),x.useEffect(()=>{const v=l.current,y=d.current;if(m&&v&&y){const b=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(Sk);y.dispatchEvent(E),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(kk);y.dispatchEvent(E),o.isClosePausedRef.current=!1}},k=E=>{!v.contains(E.relatedTarget)&&w()},C=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",b),v.addEventListener("focusout",k),v.addEventListener("pointermove",b),v.addEventListener("pointerleave",C),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",b),v.removeEventListener("focusout",k),v.removeEventListener("pointermove",b),v.removeEventListener("pointerleave",C),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[m,o.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:v})=>{const b=a().map(w=>{const k=w.ref.current,C=[k,...jme(k)];return v==="forwards"?C:C.reverse()});return(v==="forwards"?b.reverse():b).flat()},[a]);return x.useEffect(()=>{const v=d.current;if(v){const y=b=>{var C,E,_;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const N=document.activeElement,M=b.shiftKey;if(b.target===v&&M){(C=c.current)==null||C.focus();return}const D=g({tabbingDirection:M?"backwards":"forwards"}),K=D.findIndex(B=>B===N);K1(D.slice(K+1))?b.preventDefault():M?(E=c.current)==null||E.focus():(_=u.current)==null||_.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[a,g]),h.jsxs(ise,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&h.jsx(_k,{ref:c,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});K1(v)}}),h.jsx(JE.Slot,{scope:n,children:h.jsx(ze.ol,{tabIndex:-1,...s,ref:f})}),m&&h.jsx(_k,{ref:u,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});K1(v)}})]})});uz.displayName=cz;var dz="ToastFocusProxy",_k=x.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=jb(dz,n);return h.jsx(fE,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});_k.displayName=dz;var lm="Toast",Cme="toast.swipeStart",Eme="toast.swipeMove",Ame="toast.swipeCancel",Nme="toast.swipeEnd",fz=x.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a,l]=Fo({prop:i,defaultProp:r??!0,onChange:s,caller:lm});return h.jsx(Ko,{present:n||a,children:h.jsx(Tme,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Vi(t.onPause),onResume:Vi(t.onResume),onSwipeStart:ve(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ve(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ve(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ve(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});fz.displayName=lm;var[Pme,Mme]=az(lm,{onClose(){}}),Tme=x.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...m}=t,g=jb(lm,n),[v,y]=x.useState(null),b=ot(e,B=>y(B)),w=x.useRef(null),k=x.useRef(null),C=r||g.duration,E=x.useRef(0),_=x.useRef(C),N=x.useRef(0),{onToastAdd:M,onToastRemove:R}=g,I=Vi(()=>{var W;(v==null?void 0:v.contains(document.activeElement))&&((W=g.viewport)==null||W.focus()),o()}),D=x.useCallback(B=>{!B||B===1/0||(window.clearTimeout(N.current),E.current=new Date().getTime(),N.current=window.setTimeout(I,B))},[I]);x.useEffect(()=>{const B=g.viewport;if(B){const W=()=>{D(_.current),c==null||c()},Y=()=>{const te=new Date().getTime()-E.current;_.current=_.current-te,window.clearTimeout(N.current),l==null||l()};return B.addEventListener(Sk,Y),B.addEventListener(kk,W),()=>{B.removeEventListener(Sk,Y),B.removeEventListener(kk,W)}}},[g.viewport,C,l,c,D]),x.useEffect(()=>{s&&!g.isClosePausedRef.current&&D(C)},[s,C,g.isClosePausedRef,D]),x.useEffect(()=>(M(),()=>R()),[M,R]);const K=x.useMemo(()=>v?bz(v):null,[v]);return g.viewport?h.jsxs(h.Fragment,{children:[K&&h.jsx(Rme,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:K}),h.jsx(Pme,{scope:n,onClose:I,children:xl.createPortal(h.jsx(JE.ItemSlot,{scope:n,children:h.jsx(nse,{asChild:!0,onEscapeKeyDown:ve(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||I(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(ze.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ve(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:ve(t.onPointerDown,B=>{B.button===0&&(w.current={x:B.clientX,y:B.clientY})}),onPointerMove:ve(t.onPointerMove,B=>{if(!w.current)return;const W=B.clientX-w.current.x,Y=B.clientY-w.current.y,te=!!k.current,V=["left","right"].includes(g.swipeDirection),$=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ie=V?$(0,W):0,ke=V?0:$(0,Y),Z=B.pointerType==="touch"?10:2,le={x:ie,y:ke},j={originalEvent:B,delta:le};te?(k.current=le,Dg(Eme,d,j,{discrete:!1})):iR(le,g.swipeDirection,Z)?(k.current=le,Dg(Cme,u,j,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(W)>Z||Math.abs(Y)>Z)&&(w.current=null)}),onPointerUp:ve(t.onPointerUp,B=>{const W=k.current,Y=B.target;if(Y.hasPointerCapture(B.pointerId)&&Y.releasePointerCapture(B.pointerId),k.current=null,w.current=null,W){const te=B.currentTarget,V={originalEvent:B,delta:W};iR(W,g.swipeDirection,g.swipeThreshold)?Dg(Nme,p,V,{discrete:!0}):Dg(Ame,f,V,{discrete:!0}),te.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Rme=t=>{const{__scopeToast:e,children:n,...i}=t,r=jb(lm,e),[s,o]=x.useState(!1),[a,l]=x.useState(!1);return Dme(()=>o(!0)),x.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(Zp,{asChild:!0,children:h.jsx(fE,{...i,children:s&&h.jsxs(h.Fragment,{children:[r.label," ",n]})})})},Ome="ToastTitle",hz=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(ze.div,{...i,ref:e})});hz.displayName=Ome;var Ime="ToastDescription",pz=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(ze.div,{...i,ref:e})});pz.displayName=Ime;var mz="ToastAction",gz=x.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?h.jsx(yz,{altText:n,asChild:!0,children:h.jsx(ZE,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${mz}\`. Expected non-empty \`string\`.`),null)});gz.displayName=mz;var vz="ToastClose",ZE=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=Mme(vz,n);return h.jsx(yz,{asChild:!0,children:h.jsx(ze.button,{type:"button",...i,ref:e,onClick:ve(t.onClick,r.onClose)})})});ZE.displayName=vz;var yz=x.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return h.jsx(ze.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function bz(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),Lme(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...bz(i))}}),e}function Dg(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?O_(r,s):r.dispatchEvent(s)}var iR=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function Dme(t=()=>{}){const e=Vi(t);Kn(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function Lme(t){return t.nodeType===t.ELEMENT_NODE}function jme(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function K1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var $me=lz,wz=uz,xz=fz,Sz=hz,kz=pz,_z=gz,Cz=ZE;const Fme=$me,Ez=x.forwardRef(({className:t,...e},n)=>h.jsx(wz,{ref:n,className:ee("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));Ez.displayName=wz.displayName;const Az=x.forwardRef(({className:t,variant:e="default",...n},i)=>h.jsx(xz,{ref:i,"data-variant":e,className:ee("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));Az.displayName=xz.displayName;const Bme=x.forwardRef(({className:t,...e},n)=>h.jsx(_z,{ref:n,className:ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));Bme.displayName=_z.displayName;const Nz=x.forwardRef(({className:t,...e},n)=>h.jsx(Cz,{ref:n,className:ee("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:h.jsx("span",{className:"block size-4",children:"✕"})}));Nz.displayName=Cz.displayName;const Pz=x.forwardRef(({className:t,...e},n)=>h.jsx(Sz,{ref:n,className:ee("text-sm font-semibold",t),...e}));Pz.displayName=Sz.displayName;const Mz=x.forwardRef(({className:t,...e},n)=>h.jsx(kz,{ref:n,className:ee("text-sm opacity-90",t),...e}));Mz.displayName=kz.displayName;function zme(){const{toastList:t}=rte();return h.jsxs(Fme,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>h.jsxs(Az,{...o,variant:s,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(Pz,{children:n}),i&&h.jsx(Mz,{children:i})]}),r,h.jsx(Nz,{})]},e)),h.jsx(Ez,{})]})}window.codemirror=null;const Ume=B5(document.getElementById("root"));Ume.render(h.jsx(x.StrictMode,{children:h.jsxs(AV,{client:x6,children:[h.jsx(lJ,{children:h.jsx(rz,{})}),h.jsx(zme,{})]})}));
