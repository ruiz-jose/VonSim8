var N8=Object.defineProperty;var OA=t=>{throw TypeError(t)};var M8=(t,e,n)=>e in t?N8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>M8(t,typeof e!="symbol"?e+"":e,n),Cw=(t,e,n)=>e.has(t)||OA("Cannot "+n);var A=(t,e,n)=>(Cw(t,e,"read from private field"),n?n.call(t):e.get(t)),Ie=(t,e,n)=>e.has(t)?OA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Q=(t,e,n,i)=>(Cw(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),wt=(t,e,n)=>(Cw(t,e,"access private method"),n);function O8(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var I8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $u(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var QM={exports:{}},n0={},eO={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op=Symbol.for("react.element"),D8=Symbol.for("react.portal"),L8=Symbol.for("react.fragment"),j8=Symbol.for("react.strict_mode"),F8=Symbol.for("react.profiler"),$8=Symbol.for("react.provider"),B8=Symbol.for("react.context"),z8=Symbol.for("react.forward_ref"),U8=Symbol.for("react.suspense"),H8=Symbol.for("react.memo"),V8=Symbol.for("react.lazy"),IA=Symbol.iterator;function W8(t){return t===null||typeof t!="object"?null:(t=IA&&t[IA]||t["@@iterator"],typeof t=="function"?t:null)}var tO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nO=Object.assign,iO={};function jd(t,e,n){this.props=t,this.context=e,this.refs=iO,this.updater=n||tO}jd.prototype.isReactComponent={};jd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rO(){}rO.prototype=jd.prototype;function ik(t,e,n){this.props=t,this.context=e,this.refs=iO,this.updater=n||tO}var rk=ik.prototype=new rO;rk.constructor=ik;nO(rk,jd.prototype);rk.isPureReactComponent=!0;var DA=Array.isArray,sO=Object.prototype.hasOwnProperty,sk={current:null},oO={key:!0,ref:!0,__self:!0,__source:!0};function aO(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)sO.call(e,i)&&!oO.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Op,type:t,key:s,ref:o,props:r,_owner:sk.current}}function G8(t,e){return{$$typeof:Op,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ok(t){return typeof t=="object"&&t!==null&&t.$$typeof===Op}function K8(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LA=/\/+/g;function Ew(t,e){return typeof t=="object"&&t!==null&&t.key!=null?K8(""+t.key):e.toString(36)}function Mg(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Op:case D8:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Ew(o,0):i,DA(r)?(n="",t!=null&&(n=t.replace(LA,"$&/")+"/"),Mg(r,e,n,"",function(u){return u})):r!=null&&(ok(r)&&(r=G8(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(LA,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",DA(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Ew(s,a);o+=Mg(s,e,n,l,r)}else if(l=W8(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Ew(s,a++),o+=Mg(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function pm(t,e,n){if(t==null)return t;var i=[],r=0;return Mg(t,i,"","",function(s){return e.call(n,s,r++)}),i}function X8(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vi={current:null},Og={transition:null},q8={ReactCurrentDispatcher:vi,ReactCurrentBatchConfig:Og,ReactCurrentOwner:sk};function lO(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:pm,forEach:function(t,e,n){pm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return pm(t,function(){e++}),e},toArray:function(t){return pm(t,function(e){return e})||[]},only:function(t){if(!ok(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nt.Component=jd;nt.Fragment=L8;nt.Profiler=F8;nt.PureComponent=ik;nt.StrictMode=j8;nt.Suspense=U8;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q8;nt.act=lO;nt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=nO({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=sk.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)sO.call(e,l)&&!oO.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Op,type:t.type,key:r,ref:s,props:i,_owner:o}};nt.createContext=function(t){return t={$$typeof:B8,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$8,_context:t},t.Consumer=t};nt.createElement=aO;nt.createFactory=function(t){var e=aO.bind(null,t);return e.type=t,e};nt.createRef=function(){return{current:null}};nt.forwardRef=function(t){return{$$typeof:z8,render:t}};nt.isValidElement=ok;nt.lazy=function(t){return{$$typeof:V8,_payload:{_status:-1,_result:t},_init:X8}};nt.memo=function(t,e){return{$$typeof:H8,type:t,compare:e===void 0?null:e}};nt.startTransition=function(t){var e=Og.transition;Og.transition={};try{t()}finally{Og.transition=e}};nt.unstable_act=lO;nt.useCallback=function(t,e){return vi.current.useCallback(t,e)};nt.useContext=function(t){return vi.current.useContext(t)};nt.useDebugValue=function(){};nt.useDeferredValue=function(t){return vi.current.useDeferredValue(t)};nt.useEffect=function(t,e){return vi.current.useEffect(t,e)};nt.useId=function(){return vi.current.useId()};nt.useImperativeHandle=function(t,e,n){return vi.current.useImperativeHandle(t,e,n)};nt.useInsertionEffect=function(t,e){return vi.current.useInsertionEffect(t,e)};nt.useLayoutEffect=function(t,e){return vi.current.useLayoutEffect(t,e)};nt.useMemo=function(t,e){return vi.current.useMemo(t,e)};nt.useReducer=function(t,e,n){return vi.current.useReducer(t,e,n)};nt.useRef=function(t){return vi.current.useRef(t)};nt.useState=function(t){return vi.current.useState(t)};nt.useSyncExternalStore=function(t,e,n){return vi.current.useSyncExternalStore(t,e,n)};nt.useTransition=function(){return vi.current.useTransition()};nt.version="18.3.1";eO.exports=nt;var x=eO.exports;const sn=$u(x),ak=O8({__proto__:null,default:sn},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y8=x,Z8=Symbol.for("react.element"),J8=Symbol.for("react.fragment"),Q8=Object.prototype.hasOwnProperty,e6=Y8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t6={key:!0,ref:!0,__self:!0,__source:!0};function uO(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Q8.call(e,i)&&!t6.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Z8,type:t,key:s,ref:o,props:r,_owner:e6.current}}n0.Fragment=J8;n0.jsx=uO;n0.jsxs=uO;QM.exports=n0;var m=QM.exports,U=typeof window<"u"?window:void 0,Oi=typeof globalThis<"u"?globalThis:U,cO=Array.prototype,jA=cO.forEach,FA=cO.indexOf,Qi=Oi==null?void 0:Oi.navigator,ke=Oi==null?void 0:Oi.document,Ai=Oi==null?void 0:Oi.location,N1=Oi==null?void 0:Oi.fetch,M1=Oi!=null&&Oi.XMLHttpRequest&&"withCredentials"in new Oi.XMLHttpRequest?Oi.XMLHttpRequest:void 0,$A=Oi==null?void 0:Oi.AbortController,kn=Qi==null?void 0:Qi.userAgent,Ke=U??{},oa={DEBUG:!1,LIB_VERSION:"1.190.2"},gv={},i0=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function Oc(t,e,n){if(Jt(t)){if(jA&&t.forEach===jA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===gv)return}}}function _t(t,e,n){if(!Pt(t)){if(Jt(t))return Oc(t,e,n);if(a6(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===gv)return}else for(var r in t)if(fO.call(t,r)&&e.call(n,t[r],r)===gv)return}}var ci=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Oc(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t};function tt(t,e){return t.indexOf(e)!==-1}function Ig(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var BA=function(t){try{return t()}catch{return}},n6=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){J.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),J.critical(r)}}},vv=function(t){var e={};return _t(t,function(n,i){Zn(n)&&n.length>0&&(e[i]=n)}),e},O1=function(t){return t.replace(/^\$/,"")};function i6(t,e){return n=t,i=s=>Zn(s)&&!yl(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),Jt(o)?(l=[],Oc(o,u=>{l.push(s(u))})):(l={},_t(o,(u,c)=>{r.has(u)||(l[c]=s(u,c))})),l);var l}(n);var n,i,r}var r6=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),yl(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},Po=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,i,r,s){if(e)if(e.addEventListener&&!r)e.addEventListener(n,i,!!s);else{var o="on"+n,a=e[o];e[o]=function(l,u,c){return function(d){if(d=d||t(U==null?void 0:U.event)){var h,f=!0;Ar(c)&&(h=c(d));var p=u.call(l,d);return h!==!1&&p!==!1||(f=!1),f}}}(e,i,a)}else J.error("No valid element provided to register_event")}}();function dO(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}var ns,Aw="$copy_autocapture",s6=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];(function(t){t.GZipJS="gzip-js",t.Base64="base64"})(ns||(ns={}));var o6=Array.isArray,hO=Object.prototype,fO=hO.hasOwnProperty,r0=hO.toString,Jt=o6||function(t){return r0.call(t)==="[object Array]"},Ar=t=>typeof t=="function",on=t=>t===Object(t)&&!Jt(t),cc=t=>{if(on(t)){for(var e in t)if(fO.call(t,e))return!1;return!0}return!1},Oe=t=>t===void 0,Zn=t=>r0.call(t)=="[object String]",zA=t=>Zn(t)&&t.trim().length===0,yl=t=>t===null,Pt=t=>Oe(t)||yl(t),Zi=t=>r0.call(t)=="[object Number]",eu=t=>r0.call(t)==="[object Boolean]",a6=t=>t instanceof FormData,l6=t=>tt(s6,t),UA="[PostHog.js]",J={_log:function(t){if(U&&(oa.DEBUG||Ke.POSTHOG_DEBUG)&&!Oe(U.console)&&U.console){for(var e=("__rrweb_original__"in U.console[t])?U.console[t].__rrweb_original__:U.console[t],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e(UA,...i)}},info:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];J._log("log",...e)},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];J._log("warn",...e)},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];J._log("error",...e)},critical:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];console.error(UA,...e)},uninitializedWarning:t=>{J.error("You must initialize PostHog before calling ".concat(t))}},HA=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return J.warn("".concat(e," was requested but loading of external scripts is disabled.")),n("Loading of external scripts is disabled");var i=()=>{if(!ke)return n("document not found");var r=ke.createElement("script");r.type="text/javascript",r.crossOrigin="anonymous",r.src=e,r.onload=a=>n(void 0,a),r.onerror=a=>n(a);var s,o=ke.querySelectorAll("body > script");o.length>0?(s=o[0].parentNode)===null||s===void 0||s.insertBefore(r,o[0]):ke.body.appendChild(r)};ke!=null&&ke.body?i():ke==null||ke.addEventListener("DOMContentLoaded",i)};function VA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VA(Object(n),!0).forEach(function(i){ye(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VA(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pO(t,e){if(t==null)return{};var n,i,r=function(o,a){if(o==null)return{};var l,u,c={},d=Object.keys(o);for(u=0;u<d.length;u++)l=d[u],a.indexOf(l)>=0||(c[l]=o[l]);return c}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}Ke.__PosthogExtensions__=Ke.__PosthogExtensions__||{},Ke.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/".concat(e,".js")+"?v=".concat(t.version);if(e==="toolbar"){var r=3e5,s=Math.floor(Date.now()/r)*r;i="".concat(i,"&t=").concat(s)}var o=t.requestRouter.endpointFor("assets",i);HA(t,o,n)},Ke.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);HA(t,i,n)};var mO="$people_distinct_id",_h="__alias",kh="__timers",WA="$autocapture_disabled_server_side",I1="$heatmaps_enabled_server_side",GA="$exception_capture_enabled_server_side",KA="$web_vitals_enabled_server_side",gO="$dead_clicks_enabled_server_side",XA="$web_vitals_allowed_metrics",D1="$session_recording_enabled_server_side",qA="$console_log_recording_enabled_server_side",YA="$session_recording_network_payload_capture",ZA="$session_recording_canvas_recording",JA="$replay_sample_rate",QA="$replay_minimum_duration",yv="$sesid",Ch="$session_is_sampled",Pw="$session_recording_url_trigger_activated_session",Tw="$session_recording_event_trigger_activated_session",dc="$enabled_feature_flags",L1="$early_access_features",hc="$stored_person_properties",aa="$stored_group_properties",j1="$surveys",mm="$surveys_activated",wv="$flag_call_reported",uo="$user_state",F1="$client_session_props",$1="$capture_rate_limit",B1="$initial_campaign_params",z1="$initial_referrer_info",U1="$initial_person_info",bv="$epp",vO="__POSTHOG_TOOLBAR__",u6=[mO,_h,"__cmpns",kh,D1,I1,yv,dc,uo,L1,aa,hc,j1,wv,F1,$1,B1,z1,bv],Rw="$active_feature_flags",gm="$override_feature_flags",eP="$feature_flag_payloads",tP=t=>{var e={};for(var[n,i]of Ig(t||{}))i&&(e[n]=i);return e};let c6=class{constructor(e){this.instance=e,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}getFlags(){return Object.keys(this.getFlagVariants())}getFlagVariants(){var e=this.instance.get_property(dc),n=this.instance.get_property(gm);if(!n)return e||{};for(var i=ci({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this._override_warning||(J.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this._override_warning=!0),i}getFlagPayloads(){return this.instance.get_property(eP)||{}}reloadFeatureFlags(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.reloadFeatureFlagsInAction=e}resetRequestQueue(){this.reloadFeatureFlagsQueued=!1}_startReloadTimer(){this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(()=>{!this.reloadFeatureFlagsInAction&&this.reloadFeatureFlagsQueued&&(this.reloadFeatureFlagsQueued=!1,this._reloadFeatureFlagsRequest())},5)}_reloadFeatureFlagsRequest(){if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var e=this.instance.config.token,n=this.instance.get_property(hc),i=this.instance.get_property(aa),r={token:e,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:n,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:r,compression:this.instance.config.disable_compression?void 0:ns.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:s=>{var o;this.setReloadingPaused(!1);var a=!0;s.statusCode===200&&(this.$anon_distinct_id=void 0,a=!1),this.receivedFeatureFlags((o=s.json)!==null&&o!==void 0?o:{},a),this._startReloadTimer()}})}}getFeatureFlag(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var i,r=this.getFlagVariants()[e],s="".concat(r),o=this.instance.get_property(wv)||{};return(n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(s))&&(Jt(o[e])?o[e].push(s):o[e]=[s],(i=this.instance.persistence)===null||i===void 0||i.register({[wv]:o}),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:r})),r}J.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}isFeatureEnabled(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);J.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads();(function(s,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=s.featureFlags,c=s.featureFlagPayloads;if(u)if(Jt(u)){var d={};if(u)for(var h=0;h<u.length;h++)d[u[h]]=!0;o&&o.register({[Rw]:u,[dc]:d})}else{var f=u,p=c;s.errorsWhileComputingFlags&&(f=le(le({},a),f),p=le(le({},l),p)),o&&o.register({[Rw]:Object.keys(tP(f)),[dc]:f||{},[eP]:p||{}})}})(e,this.instance.persistence,i,r),this._fireFeatureFlagsCallbacks(n)}}override(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return J.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=n,e===!1)this.instance.persistence.unregister(gm);else if(Jt(e)){for(var i={},r=0;r<e.length;r++)i[e[r]]=!0;this.instance.persistence.register({[gm]:i})}else this.instance.persistence.register({[gm]:e})}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var{flags:n,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r={["$feature_enrollment/".concat(e)]:n};this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:n,$set:r}),this.setPersonPropertiesForFlags(r,!1);var s=le(le({},this.getFlagVariants()),{},{[e]:n});(i=this.instance.persistence)===null||i===void 0||i.register({[Rw]:Object.keys(tP(s)),[dc]:s}),this._fireFeatureFlagsCallbacks()}getEarlyAccessFeatures(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.instance.get_property(L1);if(i&&!n)return e(i);this.instance._send_request({transport:"XHR",url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:r=>{var s;if(r.json){var o=r.json.earlyAccessFeatures;return(s=this.instance.persistence)===null||s===void 0||s.register({[L1]:o}),e(o)}}})}_prepareFeatureFlagsForCallbacks(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}_fireFeatureFlagsCallbacks(e){var{flags:n,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this.instance.get_property(hc)||{};this.instance.register({[hc]:le(le({},i),e)}),n&&this.instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this.instance.unregister(hc)}setGroupPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this.instance.get_property(aa)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=le(le({},i[r]),e[r]),delete e[r]}),this.instance.register({[aa]:le(le({},i),e)}),n&&this.instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this.instance.get_property(aa)||{};this.instance.register({[aa]:le(le({},n),{},{[e]:{}})})}else this.instance.unregister(aa)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return Zi(t)&&isFinite(t)&&Math.floor(t)===t});var nP="0123456789abcdef";let d6=class H1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new H1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+nP.charAt(this.bytes[n]>>>4)+nP.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new H1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},h6=class{constructor(){ye(this,"timestamp",0),ye(this,"counter",0),ye(this,"random",new f6)}generate(){var e=this.generateOrAbort();if(Oe(e)){this.timestamp=0;var n=this.generateOrAbort();if(Oe(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return d6.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}};var iP,yO=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};U&&!Oe(U.crypto)&&crypto.getRandomValues&&(yO=t=>crypto.getRandomValues(t));let f6=class{constructor(){ye(this,"buffer",new Uint32Array(8)),ye(this,"cursor",1/0)}nextUint32(){return this.cursor>=this.buffer.length&&(yO(this.buffer),this.cursor=0),this.buffer[this.cursor++]}};var Ca=()=>p6().toString(),p6=()=>(iP||(iP=new h6)).generate(),m6="Thu, 01 Jan 1970 00:00:00 GMT",Yd="",g6=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function v6(t,e){if(e){var n=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ke;if(Yd)return Yd;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Ca(),u=new RegExp("(^|;)\\s*"+l+"=1");!Yd&&a--;){var c=o.slice(a).join("."),d=l+"=1;domain=."+c;s.cookie=d,u.test(s.cookie)&&(s.cookie=d+";expires="+m6,Yd=c)}return Yd}(t);if(!n){var i=(r=>{var s=r.match(g6);return s?s[0]:""})(t);i!==n&&J.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var Mo={is_supported:()=>!!ke,error:function(t){J.error("cookieStore error: "+t)},get:function(t){if(ke){try{for(var e=t+"=",n=ke.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},parse:function(t){var e;try{e=JSON.parse(Mo.get(t))||{}}catch{}return e},set:function(t,e,n,i,r){if(ke)try{var s="",o="",a=v6(ke.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var u=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return u.length>3686.4&&J.warn("cookieStore warning: large cookie, len="+u.length),ke.cookie=u,u}catch{return}},remove:function(t,e){try{Mo.set(t,"",-1,e)}catch{return}}},Nw=null,dn={is_supported:function(){if(!yl(Nw))return Nw;var t=!0;if(Oe(U))t=!1;else try{var e="__mplssupport__";dn.set(e,"xyz"),dn.get(e)!=='"xyz"'&&(t=!1),dn.remove(e)}catch{t=!1}return t||J.error("localStorage unsupported; falling back to cookie store"),Nw=t,t},error:function(t){J.error("localStorage error: "+t)},get:function(t){try{return U==null?void 0:U.localStorage.getItem(t)}catch(e){dn.error(e)}return null},parse:function(t){try{return JSON.parse(dn.get(t))||{}}catch{}return null},set:function(t,e){try{U==null||U.localStorage.setItem(t,JSON.stringify(e))}catch(n){dn.error(n)}},remove:function(t){try{U==null||U.localStorage.removeItem(t)}catch(e){dn.error(e)}}},y6=["distinct_id",yv,Ch,bv,U1],vm=le(le({},dn),{},{parse:function(t){try{var e={};try{e=Mo.parse(t)||{}}catch{}var n=ci(e,JSON.parse(dn.get(t)||"{}"));return dn.set(t,n),n}catch{}return null},set:function(t,e,n,i,r,s){try{dn.set(t,e,void 0,void 0,s);var o={};y6.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&Mo.set(t,o,n,i,r,s)}catch(a){dn.error(a)}},remove:function(t,e){try{U==null||U.localStorage.removeItem(t),Mo.remove(t,e)}catch(n){dn.error(n)}}}),ym={},w6={is_supported:function(){return!0},error:function(t){J.error("memoryStorage error: "+t)},get:function(t){return ym[t]||null},parse:function(t){return ym[t]||null},set:function(t,e){ym[t]=e},remove:function(t){delete ym[t]}},Il=null,In={is_supported:function(){if(!yl(Il))return Il;if(Il=!0,Oe(U))Il=!1;else try{var t="__support__";In.set(t,"xyz"),In.get(t)!=='"xyz"'&&(Il=!1),In.remove(t)}catch{Il=!1}return Il},error:function(t){J.error("sessionStorage error: ",t)},get:function(t){try{return U==null?void 0:U.sessionStorage.getItem(t)}catch(e){In.error(e)}return null},parse:function(t){try{return JSON.parse(In.get(t))||null}catch{}return null},set:function(t,e){try{U==null||U.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){In.error(n)}},remove:function(t){try{U==null||U.sessionStorage.removeItem(t)}catch(e){In.error(e)}}},b6=["localhost","127.0.0.1"],Ic=t=>{var e=ke==null?void 0:ke.createElement("a");return Oe(e)?null:(e.href=t,e)},ad=function(t,e){return!!function(n){try{new RegExp(n)}catch{return!1}return!0}(e)&&new RegExp(e).test(t)},x6=function(t){var e,n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",r=[];return _t(t,function(s,o){Oe(s)||Oe(o)||o==="undefined"||(e=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),n=encodeURIComponent(o),r[r.length]=n+"="+e)}),r.join(i)},xv=function(t,e){for(var n,i=((t.split("#")[0]||"").split("?")[1]||"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!Jt(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{J.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Sv=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},Nr="Mobile",_v="iOS",Us="Android",vf="Tablet",wO=Us+" "+vf,bO="iPad",xO="Apple",SO=xO+" Watch",yf="Safari",ld="BlackBerry",_O="Samsung",kO=_O+"Browser",CO=_O+" Internet",$a="Chrome",S6=$a+" OS",EO=$a+" "+_v,lk="Internet Explorer",AO=lk+" "+Nr,uk="Opera",_6=uk+" Mini",ck="Edge",PO="Microsoft "+ck,Dc="Firefox",TO=Dc+" "+_v,wf="Nintendo",bf="PlayStation",Lc="Xbox",RO=Us+" "+Nr,NO=Nr+" "+yf,Eh="Windows",V1=Eh+" Phone",rP="Nokia",W1="Ouya",MO="Generic",k6=MO+" "+Nr.toLowerCase(),OO=MO+" "+vf.toLowerCase(),G1="Konqueror",oi="(\\d+(\\.\\d+)?)",Mw=new RegExp("Version/"+oi),C6=new RegExp(Lc,"i"),E6=new RegExp(bf+" \\w+","i"),A6=new RegExp(wf+" \\w+","i"),dk=new RegExp(ld+"|PlayBook|BB10","i"),P6={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},T6=(t,e)=>e&&tt(e,xO)||function(n){return tt(n,yf)&&!tt(n,$a)&&!tt(n,Us)}(t),sP=function(t,e){return e=e||"",tt(t," OPR/")&&tt(t,"Mini")?_6:tt(t," OPR/")?uk:dk.test(t)?ld:tt(t,"IE"+Nr)||tt(t,"WPDesktop")?AO:tt(t,kO)?CO:tt(t,ck)||tt(t,"Edg/")?PO:tt(t,"FBIOS")?"Facebook "+Nr:tt(t,"UCWEB")||tt(t,"UCBrowser")?"UC Browser":tt(t,"CriOS")?EO:tt(t,"CrMo")?$a:tt(t,Us)&&tt(t,yf)?RO:tt(t,$a)?$a:tt(t,"FxiOS")?TO:tt(t.toLowerCase(),G1.toLowerCase())?G1:T6(t,e)?tt(t,Nr)?NO:yf:tt(t,Dc)?Dc:tt(t,"MSIE")||tt(t,"Trident/")?lk:tt(t,"Gecko")?Dc:""},R6={[AO]:[new RegExp("rv:"+oi)],[PO]:[new RegExp(ck+"?\\/"+oi)],[$a]:[new RegExp("("+$a+"|CrMo)\\/"+oi)],[EO]:[new RegExp("CriOS\\/"+oi)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+oi)],[yf]:[Mw],[NO]:[Mw],[uk]:[new RegExp("(Opera|OPR)\\/"+oi)],[Dc]:[new RegExp(Dc+"\\/"+oi)],[TO]:[new RegExp("FxiOS\\/"+oi)],[G1]:[new RegExp("Konqueror[:/]?"+oi,"i")],[ld]:[new RegExp(ld+" "+oi),Mw],[RO]:[new RegExp("android\\s"+oi,"i")],[CO]:[new RegExp(kO+"\\/"+oi)],[lk]:[new RegExp("(rv:|MSIE )"+oi)],Mozilla:[new RegExp("rv:"+oi)]},oP=[[new RegExp(Lc+"; "+Lc+" (.*?)[);]","i"),t=>[Lc,t&&t[1]||""]],[new RegExp(wf,"i"),[wf,""]],[new RegExp(bf,"i"),[bf,""]],[dk,[ld,""]],[new RegExp(Eh,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[V1,""];if(new RegExp(Nr).test(e)&&!/IEMobile\b/.test(e))return[Eh+" "+Nr,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=P6[i]||"";return/arm/i.test(e)&&(r="RT"),[Eh,r]}return[Eh,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[_v,e.join(".")]}return[_v,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=Oe(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Us+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Us+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Us,e.join(".")]}return[Us,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[S6,""]],[/Linux|debian/i,["Linux",""]]],aP=function(t){return A6.test(t)?wf:E6.test(t)?bf:C6.test(t)?Lc:new RegExp(W1,"i").test(t)?W1:new RegExp("("+V1+"|WPDesktop)","i").test(t)?V1:/iPad/.test(t)?bO:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?SO:dk.test(t)?ld:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(rP,"i").test(t)?rP:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Nr).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Us:wO:Us:new RegExp("(pda|"+Nr+")","i").test(t)?k6:new RegExp(vf,"i").test(t)&&!new RegExp(vf+" pc","i").test(t)?OO:""},wm="https?://(.*)",N6=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"],tn={campaignParams:function(t){return ke?this._campaignParamsFromUrl(ke.URL,t):{}},_campaignParamsFromUrl:function(t,e){var n=N6.concat(e||[]),i={};return _t(n,function(r){var s=xv(t,r);i[r]=s||null}),i},_searchEngine:function(t){return t?t.search(wm+"google.([^/?]*)")===0?"google":t.search(wm+"bing.com")===0?"bing":t.search(wm+"yahoo.com")===0?"yahoo":t.search(wm+"duckduckgo.com")===0?"duckduckgo":null:null},_searchInfoFromReferrer:function(t){var e=tn._searchEngine(t),n=e!="yahoo"?"q":"p",i={};if(!yl(e)){i.$search_engine=e;var r=ke?xv(ke.referrer,n):"";r.length&&(i.ph_keyword=r)}return i},searchInfo:function(){var t=ke==null?void 0:ke.referrer;return t?this._searchInfoFromReferrer(t):{}},browser:sP,browserVersion:function(t,e){var n=sP(t,e),i=R6[n];if(Oe(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(t){for(var e=0;e<oP.length;e++){var[n,i]=oP[e],r=n.exec(t),s=r&&(Ar(i)?i(r,t):i);if(s)return s}return["",""]},device:aP,deviceType:function(t){var e=aP(t);return e===bO||e===wO||e==="Kobo"||e==="Kindle Fire"||e===OO?vf:e===wf||e===Lc||e===bf||e===W1?"Console":e===SO?"Wearable":e?Nr:"Desktop"},referrer:function(){return(ke==null?void 0:ke.referrer)||"$direct"},referringDomain:function(){var t;return ke!=null&&ke.referrer&&((t=Ic(ke.referrer))===null||t===void 0?void 0:t.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer().substring(0,1e3),u:Ai==null?void 0:Ai.href.substring(0,1e3)}},initialPersonPropsFromInfo:function(t){var e,{r:n,u:i}=t,r={$initial_referrer:n,$initial_referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=Ic(n))===null||e===void 0?void 0:e.host};if(i){r.$initial_current_url=i;var s=Ic(i);r.$initial_host=s==null?void 0:s.host,r.$initial_pathname=s==null?void 0:s.pathname,_t(this._campaignParamsFromUrl(i),function(o,a){r["$initial_"+O1(a)]=o})}return n&&_t(this._searchInfoFromReferrer(n),function(o,a){r["$initial_"+O1(a)]=o}),r},timezone:function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}},properties:function(){if(!kn)return{};var[t,e]=tn.os(kn);return ci(vv({$os:t,$os_version:e,$browser:tn.browser(kn,navigator.vendor),$device:tn.device(kn),$device_type:tn.deviceType(kn),$timezone:tn.timezone()}),{$current_url:Ai==null?void 0:Ai.href,$host:Ai==null?void 0:Ai.host,$pathname:Ai==null?void 0:Ai.pathname,$raw_user_agent:kn.length>1e3?kn.substring(0,997)+"...":kn,$browser_version:tn.browserVersion(kn,navigator.vendor),$browser_language:tn.browserLanguage(),$screen_height:U==null?void 0:U.screen.height,$screen_width:U==null?void 0:U.screen.width,$viewport_height:U==null?void 0:U.innerHeight,$viewport_width:U==null?void 0:U.innerWidth,$lib:"web",$lib_version:oa.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})},people_properties:function(){if(!kn)return{};var[t,e]=tn.os(kn);return ci(vv({$os:t,$os_version:e,$browser:tn.browser(kn,navigator.vendor)}),{$browser_version:tn.browserVersion(kn,navigator.vendor)})}},M6=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];let Ow=class{constructor(e){this.config=e,this.props={},this.campaign_params_saved=!1,this.name=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.storage=this.buildStorage(e),this.load(),e.debug&&J.info("Persistence loaded",e.persistence,le({},this.props)),this.update_config(e,e),this.save()}buildStorage(e){M6.indexOf(e.persistence.toLowerCase())===-1&&(J.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&dn.is_supported()?dn:n==="localstorage+cookie"&&vm.is_supported()?vm:n==="sessionstorage"&&In.is_supported()?In:n==="memory"?w6:n==="cookie"?Mo:vm.is_supported()?vm:Mo}properties(){var e={};return _t(this.props,function(n,i){if(i===dc&&on(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/".concat(r[s])]=n[r[s]];else a=i,l=!1,(yl(o=u6)?l:FA&&o.indexOf===FA?o.indexOf(a)!=-1:(_t(o,function(u){if(l||(l=u===a))return gv}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=ci({},e))}}save(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}remove(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(on(e)){Oe(n)&&(n="None"),this.expire_days=Oe(i)?this.default_expiry:i;var r=!1;if(_t(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(on(e)){this.expire_days=Oe(n)?this.default_expiry:n;var i=!1;if(_t(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.campaign_params_saved){var e=tn.campaignParams(this.config.custom_campaign_params);cc(vv(e))||this.register(e),this.campaign_params_saved=!0}}update_search_keyword(){this.register(tn.searchInfo())}update_referrer_info(){this.register_once(tn.referrerInfo(),void 0)}set_initial_person_info(){this.props[B1]||this.props[z1]||this.register_once({[U1]:tn.initialPersonInfo()},void 0)}get_referrer_info(){return vv({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}get_initial_props(){var e={};_t([z1,B1],r=>{var s=this.props[r];s&&_t(s,function(o,a){e["$initial_"+O1(a)]=o})});var n=this.props[U1];if(n){var i=tn.initialPersonPropsFromInfo(n);ci(e,i)}return e}safe_merge(e){return _t(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.buildStorage(e),r=this.props;this.clear(),this.storage=i,this.props=r,this.save()}}set_disabled(e){this.disabled=e,this.disabled?this.remove():this.save()}set_cross_subdomain(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}get_cross_subdomain(){return!!this.cross_subdomain}set_secure(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[kh]||{};i[e]=n,this.props[kh]=i,this.save()}remove_event_timer(e){var n=(this.props[kh]||{})[e];return Oe(n)||(delete this.props[kh][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}};function kv(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(on(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))===null||e===void 0?void 0:e.length)||0}function K1(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66060288e-1;if(t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[K1({size:kv(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),K1({size:kv(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var co=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(co||{}),Xr=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Xr||{});function lP(t){var e;return t.id===vO||!((e=t.closest)===null||e===void 0||!e.call(t,".toolbar-global-fade-container"))}function s0(t){return!!t&&t.nodeType===1}function Ba(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function IO(t){return!!t&&t.nodeType===3}function DO(t){return!!t&&t.nodeType===11}function hk(t){return t?i0(t).split(/\s+/):[]}function uP(t){var e=U==null?void 0:U.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function Cv(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return hk(e)}function LO(t){return Pt(t)?null:i0(t).split(/(\s+)/).filter(e=>ud(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function o0(t){var e="";return q1(t)&&!$O(t)&&t.childNodes&&t.childNodes.length&&_t(t.childNodes,function(n){var i;IO(n)&&n.textContent&&(e+=(i=LO(n.textContent))!==null&&i!==void 0?i:"")}),i0(e)}function jO(t){return Oe(t.target)?t.srcElement||null:(e=t.target)!==null&&e!==void 0&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var X1=["a","button","form","input","select","textarea","label"];function FO(t){var e=t.parentNode;return!(!e||!s0(e))&&e}function O6(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(!U||!t||Ba(t,"html")||!s0(t)||n!=null&&n.url_allowlist&&!uP(n.url_allowlist)||n!=null&&n.url_ignorelist&&uP(n.url_ignorelist))return!1;if(n!=null&&n.dom_event_allowlist){var s=n.dom_event_allowlist;if(s&&!s.some(f=>e.type===f))return!1}for(var o=!1,a=[t],l=!0,u=t;u.parentNode&&!Ba(u,"body");)if(DO(u.parentNode))a.push(u.parentNode.host),u=u.parentNode.host;else{if(!(l=FO(u)))break;if(i||X1.indexOf(l.tagName.toLowerCase())>-1)o=!0;else{var c=U.getComputedStyle(l);c&&c.getPropertyValue("cursor")==="pointer"&&(o=!0)}a.push(l),u=l}if(!function(f,p){var g=p==null?void 0:p.element_allowlist;if(Oe(g))return!0;var b=function(w){if(g.some(_=>w.tagName.toLowerCase()===_))return{v:!0}};for(var v of f){var y=b(v);if(typeof y=="object")return y.v}return!1}(a,n)||!function(f,p){var g=p==null?void 0:p.css_selector_allowlist;if(Oe(g))return!0;var b=function(w){if(g.some(_=>w.matches(_)))return{v:!0}};for(var v of f){var y=b(v);if(typeof y=="object")return y.v}return!1}(a,n))return!1;var d=U.getComputedStyle(t);if(d&&d.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var h=t.tagName.toLowerCase();switch(h){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return o?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(X1.indexOf(h)>-1||t.getAttribute("contenteditable")==="true")}}function q1(t){for(var e=t;e.parentNode&&!Ba(e,"body");e=e.parentNode){var n=Cv(e);if(tt(n,"ph-sensitive")||tt(n,"ph-no-capture"))return!1}if(tt(Cv(t),"ph-include"))return!0;var i=t.type||"";if(Zn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(Zn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function $O(t){return!!(Ba(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||Ba(t,"select")||Ba(t,"textarea")||t.getAttribute("contenteditable")==="true")}var BO="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",I6=new RegExp("^(?:".concat(BO,")$")),D6=new RegExp(BO),zO="\\d{3}-?\\d{2}-?\\d{4}",L6=new RegExp("^(".concat(zO,")$")),j6=new RegExp("(".concat(zO,")"));function ud(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return!(Pt(t)||Zn(t)&&(t=i0(t),(e?I6:D6).test((t||"").replace(/[- ]/g,""))||(e?L6:j6).test(t)))}function UO(t){var e=o0(t);return ud(e="".concat(e," ").concat(HO(t)).trim())?e:""}function HO(t){var e="";return t&&t.childNodes&&t.childNodes.length&&_t(t.childNodes,function(n){var i;if(n&&((i=n.tagName)===null||i===void 0?void 0:i.toLowerCase())==="span")try{var r=o0(n);e="".concat(e," ").concat(r).trim(),n.childNodes&&n.childNodes.length&&(e="".concat(e," ").concat(HO(n)).trim())}catch(s){J.error(s)}}),e}function F6(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+=".".concat(a.replace(/"/g,""));var l=le(le(le(le({},i.text?{text:i.text}:{}),{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{}),i.attr_id?{attr_id:i.attr_id}:{}),i.attributes),u={};return Ig(l).sort((c,d)=>{var[h]=c,[f]=d;return h.localeCompare(f)}).forEach(c=>{var[d,h]=c;return u[cP(d.toString())]=cP(h.toString())}),o+=":",o+=Ig(l).map(c=>{var[d,h]=c;return"".concat(d,'="').concat(h,'"')}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)===null||i===void 0?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)===null||r===void 0?void 0:r.slice(0,2048),attr_class:$6(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Ig(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function cP(t){return t.replace(/"|\\"/g,'\\"')}function $6(t){var e=t.attr__class;return e?Jt(e)?e:hk(e):void 0}var Y1="[SessionRecording]",Z1="redacted",bm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io"]},B6=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],z6=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],U6=["/s/","/e/","/i/"];function dP(t,e,n,i){if(Pt(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return Zn(r)&&(r=parseInt(r)),r>n?Y1+" ".concat(i," body too large to record (").concat(r," bytes)"):t}function hP(t,e){if(Pt(t))return t;var n=t;return ud(n,!1)||(n=Y1+" "+e+" body "+Z1),_t(z6,i=>{var r,s;(r=n)!==null&&r!==void 0&&r.length&&((s=n)===null||s===void 0?void 0:s.indexOf(i))!==-1&&(n=Y1+" "+e+" body "+Z1+" as might contain: "+i)}),n}var H6=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:bm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...bm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...bm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,u=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),h=>(h!=null&&h.requestBody&&(h.requestBody=dP(h.requestBody,h.requestHeaders,r,"Request")),h!=null&&h.responseBody&&(h.responseBody=dP(h.responseBody,h.responseHeaders,r,"Response")),h)),c=h=>{return u(((g,b)=>{var v,y=Ic(g.name),w=b.indexOf("http")===0?(v=Ic(b))===null||v===void 0?void 0:v.pathname:b;w==="/"&&(w="");var _=y==null?void 0:y.pathname.replace(w||"","");if(!(y&&_&&U6.some(k=>_.indexOf(k)===0)))return g})((p=(f=h).requestHeaders,Pt(p)||_t(Object.keys(p??{}),g=>{B6.includes(g.toLowerCase())&&(p[g]=Z1)}),f),t.api_host));var f,p},d=Ar(t.session_recording.maskNetworkRequestFn);return d&&Ar(t.session_recording.maskCapturedNetworkRequestFn)&&J.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=h=>{var f=t.session_recording.maskNetworkRequestFn({url:h.name});return le(le({},h),{},{name:f==null?void 0:f.url})}),s.maskRequestFn=Ar(t.session_recording.maskCapturedNetworkRequestFn)?h=>{var f,p,g,b=c(h);return b&&(f=(p=(g=t.session_recording).maskCapturedNetworkRequestFn)===null||p===void 0?void 0:p.call(g,b))!==null&&f!==void 0?f:void 0}:h=>function(f){if(!Oe(f))return f.requestBody=hP(f.requestBody,"Request"),f.responseBody=hP(f.responseBody,"Response"),f}(c(h)),le(le(le({},bm),s),{},{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};function To(t,e,n,i){return e>n&&(J.warn("min cannot be greater than max."),e=n),Zi(t)?t>n?(i&&J.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&J.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&J.warn(i+" must be a number. Defaulting to max value:"+n),n)}class V6{constructor(e){var n,i,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ye(this,"bucketSize",100),ye(this,"refillRate",10),ye(this,"mutationBuckets",{}),ye(this,"loggedTracker",{}),ye(this,"refillBuckets",()=>{Object.keys(this.mutationBuckets).forEach(s=>{this.mutationBuckets[s]=this.mutationBuckets[s]+this.refillRate,this.mutationBuckets[s]>=this.bucketSize&&delete this.mutationBuckets[s]})}),ye(this,"getNodeOrRelevantParent",s=>{var o=this.rrweb.mirror.getNode(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this.rrweb.mirror.getId(a),a]}return[s,o]}),ye(this,"numberOfChanges",s=>{var o,a,l,u,c,d,h,f;return((o=(a=s.removes)===null||a===void 0?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(u=s.attributes)===null||u===void 0?void 0:u.length)!==null&&l!==void 0?l:0)+((c=(d=s.texts)===null||d===void 0?void 0:d.length)!==null&&c!==void 0?c:0)+((h=(f=s.adds)===null||f===void 0?void 0:f.length)!==null&&h!==void 0?h:0)}),ye(this,"throttleMutations",s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.numberOfChanges(o);o.attributes&&(o.attributes=o.attributes.filter(u=>{var c,d,h,[f,p]=this.getNodeOrRelevantParent(u.id);return this.mutationBuckets[f]===0?!1:(this.mutationBuckets[f]=(c=this.mutationBuckets[f])!==null&&c!==void 0?c:this.bucketSize,this.mutationBuckets[f]=Math.max(this.mutationBuckets[f]-1,0),this.mutationBuckets[f]===0&&(this.loggedTracker[f]||(this.loggedTracker[f]=!0,(d=(h=this.options).onBlockedNode)===null||d===void 0||d.call(h,f,p))),u)}));var l=this.numberOfChanges(o);return l!==0||a===l?s:void 0}),this.rrweb=e,this.options=r,this.refillRate=To((n=this.options.refillRate)!==null&&n!==void 0?n:this.refillRate,0,100,"mutation throttling refill rate"),this.bucketSize=To((i=this.options.bucketSize)!==null&&i!==void 0?i:this.bucketSize,0,100,"mutation throttling bucket size"),setInterval(()=>{this.refillBuckets()},1e3)}}var Mr=Uint8Array,Ii=Uint16Array,cd=Uint32Array,fk=new Mr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pk=new Mr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fP=new Mr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),VO=function(t,e){for(var n=new Ii(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new cd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},WO=VO(fk,2),W6=WO[0],J1=WO[1];W6[28]=258,J1[258]=28;for(var pP=VO(pk,0)[1],GO=new Ii(32768),Ot=0;Ot<32768;++Ot){var Dl=(43690&Ot)>>>1|(21845&Ot)<<1;Dl=(61680&(Dl=(52428&Dl)>>>2|(13107&Dl)<<2))>>>4|(3855&Dl)<<4,GO[Ot]=((65280&Dl)>>>8|(255&Dl)<<8)>>>1}var Wh=function(t,e,n){for(var i=t.length,r=0,s=new Ii(e);r<i;++r)++s[t[r]-1];var o,a=new Ii(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new Ii(i),r=0;r<i;++r)o[r]=GO[a[t[r]-1]++]>>>15-t[r];return o},vu=new Mr(288);for(Ot=0;Ot<144;++Ot)vu[Ot]=8;for(Ot=144;Ot<256;++Ot)vu[Ot]=9;for(Ot=256;Ot<280;++Ot)vu[Ot]=7;for(Ot=280;Ot<288;++Ot)vu[Ot]=8;var Ev=new Mr(32);for(Ot=0;Ot<32;++Ot)Ev[Ot]=5;var G6=Wh(vu,9),K6=Wh(Ev,5),KO=function(t){return(t/8>>0)+(7&t&&1)},XO=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Ii?Ii:t instanceof cd?cd:Mr)(n-e);return i.set(t.subarray(e,n)),i},oo=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},Zd=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},Iw=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Mr(0),0];if(r==1){var o=new Mr(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(k,C){return k.f-C.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=r-1;)a=n[n[u].f<n[d].f?u++:d++],l=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var h=s[0].s;for(i=1;i<r;++i)s[i].s>h&&(h=s[i].s);var f=new Ii(h+1),p=Q1(n[c-1],f,0);if(p>e){i=0;var g=0,b=p-e,v=1<<b;for(s.sort(function(k,C){return f[C.s]-f[k.s]||k.f-C.f});i<r;++i){var y=s[i].s;if(!(f[y]>e))break;g+=v-(1<<p-f[y]),f[y]=e}for(g>>>=b;g>0;){var w=s[i].s;f[w]<e?g-=1<<e-f[w]++-1:++i}for(;i>=0&&g;--i){var _=s[i].s;f[_]==e&&(--f[_],++g)}p=e}return[new Mr(f),p]},Q1=function(t,e,n){return t.s==-1?Math.max(Q1(t.l,e,n+1),Q1(t.r,e,n+1)):e[t.s]=n},mP=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ii(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},Jd=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},ex=function(t,e,n){var i=n.length,r=KO(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},gP=function(t,e,n,i,r,s,o,a,l,u,c){oo(e,c++,n),++r[256];for(var d=Iw(r,15),h=d[0],f=d[1],p=Iw(s,15),g=p[0],b=p[1],v=mP(h),y=v[0],w=v[1],_=mP(g),k=_[0],C=_[1],E=new Ii(19),P=0;P<y.length;++P)E[31&y[P]]++;for(P=0;P<k.length;++P)E[31&k[P]]++;for(var N=Iw(E,7),D=N[0],L=N[1],$=19;$>4&&!D[fP[$-1]];--$);var G,z,X,ee,he=u+5<<3,V=Jd(r,vu)+Jd(s,Ev)+o,F=Jd(r,h)+Jd(s,g)+o+14+3*$+Jd(E,D)+(2*E[16]+3*E[17]+7*E[18]);if(he<=V&&he<=F)return ex(e,c,t.subarray(l,l+u));if(oo(e,c,1+(F<V)),c+=2,F<V){G=Wh(h,f),z=h,X=Wh(g,b),ee=g;var ne=Wh(D,L);for(oo(e,c,w-257),oo(e,c+5,C-1),oo(e,c+10,$-4),c+=14,P=0;P<$;++P)oo(e,c+3*P,D[fP[P]]);c+=3*$;for(var Se=[y,k],Z=0;Z<2;++Z){var ue=Se[Z];for(P=0;P<ue.length;++P){var I=31&ue[P];oo(e,c,ne[I]),c+=D[I],I>15&&(oo(e,c,ue[P]>>>5&127),c+=ue[P]>>>12)}}}else G=G6,z=vu,X=K6,ee=Ev;for(P=0;P<a;++P)if(i[P]>255){I=i[P]>>>18&31,Zd(e,c,G[I+257]),c+=z[I+257],I>7&&(oo(e,c,i[P]>>>23&31),c+=fk[I]);var O=31&i[P];Zd(e,c,X[O]),c+=ee[O],O>3&&(Zd(e,c,i[P]>>>5&8191),c+=pk[O])}else Zd(e,c,G[i[P]]),c+=z[i[P]];return Zd(e,c,G[256]),c+z[256]},X6=new cd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),q6=function(){for(var t=new cd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),Y6=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=q6[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},Z6=function(t,e,n,i,r){return function(s,o,a,l,u,c){var d=s.length,h=new Mr(l+d+5*(1+Math.floor(d/7e3))+u),f=h.subarray(l,h.length-u),p=0;if(!o||d<8)for(var g=0;g<=d;g+=65535){var b=g+65535;b<d?p=ex(f,p,s.subarray(g,b)):(f[g]=c,p=ex(f,p,s.subarray(g,d)))}else{for(var v=X6[o-1],y=v>>>13,w=8191&v,_=(1<<a)-1,k=new Ii(32768),C=new Ii(_+1),E=Math.ceil(a/3),P=2*E,N=function(Fe){return(s[Fe]^s[Fe+1]<<E^s[Fe+2]<<P)&_},D=new cd(25e3),L=new Ii(288),$=new Ii(32),G=0,z=0,X=(g=0,0),ee=0,he=0;g<d;++g){var V=N(g),F=32767&g,ne=C[V];if(k[F]=ne,C[V]=F,ee<=g){var Se=d-g;if((G>7e3||X>24576)&&Se>423){p=gP(s,f,0,D,L,$,z,X,he,g-he,p),X=G=z=0,he=g;for(var Z=0;Z<286;++Z)L[Z]=0;for(Z=0;Z<30;++Z)$[Z]=0}var ue=2,I=0,O=w,B=F-ne&32767;if(Se>2&&V==N(g-B))for(var S=Math.min(y,Se)-1,T=Math.min(32767,g),M=Math.min(258,Se);B<=T&&--O&&F!=ne;){if(s[g+ue]==s[g+ue-B]){for(var R=0;R<M&&s[g+R]==s[g+R-B];++R);if(R>ue){if(ue=R,I=B,R>S)break;var K=Math.min(B,R-2),W=0;for(Z=0;Z<K;++Z){var te=g-B+Z+32768&32767,q=te-k[te]+32768&32767;q>W&&(W=q,ne=te)}}}B+=(F=ne)-(ne=k[F])+32768&32767}if(I){D[X++]=268435456|J1[ue]<<18|pP[I];var Te=31&J1[ue],Le=31&pP[I];z+=fk[Te]+pk[Le],++L[257+Te],++$[Le],ee=g+ue,++G}else D[X++]=s[g],++L[s[g]]}}p=gP(s,f,c,D,L,$,z,X,he,g-he,p)}return XO(h,0,l+KO(p)+u)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!r)},tx=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},J6=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&tx(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},Q6=function(t){return 10+(t.filename&&t.filename.length+1||0)};function qO(t,e){e===void 0&&(e={});var n=Y6(),i=t.length;n.p(t);var r=Z6(t,e,Q6(e),8),s=r.length;return J6(r,e),tx(r,s-8,n.d()),tx(r,s-4,i),r}function YO(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Mr(t.length+(t.length>>>1)),r=0,s=function(u){i[r++]=u},o=0;o<n;++o){if(r+5>i.length){var a=new Mr(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return XO(i,0,r)}var eU=3e5,tU=[Xr.MouseMove,Xr.MouseInteraction,Xr.Scroll,Xr.ViewportResize,Xr.Input,Xr.TouchMove,Xr.MediaInteraction,Xr.Drag],vP=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1}),Tn="[SessionRecording]";function Ll(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];s<128||n?i+=String.fromCharCode(s):s<224?i+=String.fromCharCode((31&s)<<6|63&e[r++]):s<240?i+=String.fromCharCode((15&s)<<12|(63&e[r++])<<6|63&e[r++]):(s=((15&s)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,i+=String.fromCharCode(55296|s>>10,56320|1023&s))}return i}(qO(YO(JSON.stringify(t))),!0)}function yP(t){return t.type===co.Custom&&t.data.tag==="sessionIdle"}function wP(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class nU{get sessionIdleThresholdMilliseconds(){return this.instance.config.session_recording.session_idle_threshold_ms||3e5}get rrwebRecord(){var e,n;return Ke==null||(e=Ke.__PosthogExtensions__)===null||e===void 0||(n=e.rrweb)===null||n===void 0?void 0:n.record}get started(){return this._captureStarted}get sessionManager(){if(!this.instance.sessionManager)throw new Error(Tn+" must be started with a valid sessionManager.");return this.instance.sessionManager}get fullSnapshotIntervalMillis(){var e,n;return this.triggerStatus==="trigger_pending"?6e4:(e=(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:eU}get isSampled(){var e=this.instance.get_property(Ch);return eu(e)?e:null}get sessionDuration(){var e,n,i=(e=this.buffer)===null||e===void 0?void 0:e.data[((n=this.buffer)===null||n===void 0?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get isRecordingEnabled(){var e=!!this.instance.get_property(D1),n=!this.instance.config.disable_session_recording;return U&&e&&n}get isConsoleLogCaptureEnabled(){var e=!!this.instance.get_property(qA),n=this.instance.config.enable_recording_console_log;return n??e}get canvasRecording(){var e,n,i,r,s,o,a=this.instance.config.session_recording.captureCanvas,l=this.instance.get_property(ZA),u=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,c=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:0,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:0;return{enabled:u,fps:To(c,0,12,"canvas recording fps"),quality:To(d,0,1,"canvas recording quality")}}get networkPayloadCapture(){var e,n,i=this.instance.get_property(YA),r={recordHeaders:(e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recordHeaders,recordBody:(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=on(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,l=!!(eu(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get sampleRate(){var e=this.instance.get_property(JA);return Zi(e)?e:null}get minimumDuration(){var e=this.instance.get_property(QA);return Zi(e)?e:null}get status(){return this.receivedDecide?this.isRecordingEnabled?Pt(this._linkedFlag)||this._linkedFlagSeen?this.triggerStatus==="trigger_pending"?"buffering":this._urlBlocked?"paused":eu(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}get urlTriggerStatus(){var e;return this._urlTriggers.length===0?"trigger_disabled":((e=this.instance)===null||e===void 0?void 0:e.get_property(Pw))===this.sessionId?"trigger_activated":"trigger_pending"}get eventTriggerStatus(){var e;return this._eventTriggers.length===0?"trigger_disabled":((e=this.instance)===null||e===void 0?void 0:e.get_property(Tw))===this.sessionId?"trigger_activated":"trigger_pending"}get triggerStatus(){var e=this.eventTriggerStatus==="trigger_activated"||this.urlTriggerStatus==="trigger_activated",n=this.eventTriggerStatus==="trigger_pending"||this.urlTriggerStatus==="trigger_pending";return e?"trigger_activated":n?"trigger_pending":"trigger_disabled"}constructor(e){if(ye(this,"queuedRRWebEvents",[]),ye(this,"isIdle",!1),ye(this,"_linkedFlagSeen",!1),ye(this,"_lastActivityTimestamp",Date.now()),ye(this,"_linkedFlag",null),ye(this,"_removePageViewCaptureHook",void 0),ye(this,"_onSessionIdListener",void 0),ye(this,"_persistDecideOnSessionListener",void 0),ye(this,"_samplingSessionListener",void 0),ye(this,"_urlTriggers",[]),ye(this,"_urlBlocklist",[]),ye(this,"_urlBlocked",!1),ye(this,"_eventTriggers",[]),ye(this,"_removeEventTriggerCaptureHook",void 0),ye(this,"_forceAllowLocalhostNetworkCapture",!1),ye(this,"_onBeforeUnload",()=>{this._flushBuffer()}),ye(this,"_onOffline",()=>{this._tryAddCustomEvent("browser offline",{})}),ye(this,"_onOnline",()=>{this._tryAddCustomEvent("browser online",{})}),ye(this,"_onVisibilityChange",()=>{if(ke!=null&&ke.visibilityState){var r="window "+ke.visibilityState;this._tryAddCustomEvent(r,{})}}),this.instance=e,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw J.error(Tn+" started without valid sessionManager"),new Error(Tn+" started without valid sessionManager. This is a bug.");var{sessionId:n,windowId:i}=this.sessionManager.checkAndGetSessionAndWindowId();this.sessionId=n,this.windowId=i,this.buffer=this.clearBuffer(),this.sessionIdleThresholdMilliseconds>=this.sessionManager.sessionTimeoutMs&&J.warn(Tn+" session_idle_threshold_ms (".concat(this.sessionIdleThresholdMilliseconds,") is greater than the session timeout (").concat(this.sessionManager.sessionTimeoutMs,"). Session will never be detected as idle"))}startIfEnabledOrStop(e){this.isRecordingEnabled?(this._startCapture(e),U==null||U.addEventListener("beforeunload",this._onBeforeUnload),U==null||U.addEventListener("offline",this._onOffline),U==null||U.addEventListener("online",this._onOnline),U==null||U.addEventListener("visibilitychange",this._onVisibilityChange),this._setupSampling(),this._addEventTriggerListener(),Pt(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this.instance._addCaptureHook(n=>{try{if(n==="$pageview"){var i=U?this._maskUrl(U.location.href):"";if(!i)return;this._tryAddCustomEvent("$pageview",{href:i})}}catch(r){J.error("Could not add $pageview to rrweb session",r)}})),this._onSessionIdListener||(this._onSessionIdListener=this.sessionManager.onSessionId((n,i,r)=>{var s,o,a,l;r&&(this._tryAddCustomEvent("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this.instance)===null||s===void 0||(o=s.persistence)===null||o===void 0||o.unregister(Tw),(a=this.instance)===null||a===void 0||(l=a.persistence)===null||l===void 0||l.unregister(Pw))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,U==null||U.removeEventListener("beforeunload",this._onBeforeUnload),U==null||U.removeEventListener("offline",this._onOffline),U==null||U.removeEventListener("online",this._onOnline),U==null||U.removeEventListener("visibilitychange",this._onVisibilityChange),this.clearBuffer(),clearInterval(this._fullSnapshotTimer),(e=this._removePageViewCaptureHook)===null||e===void 0||e.call(this),this._removePageViewCaptureHook=void 0,(n=this._removeEventTriggerCaptureHook)===null||n===void 0||n.call(this),this._removeEventTriggerCaptureHook=void 0,(i=this._onSessionIdListener)===null||i===void 0||i.call(this),this._onSessionIdListener=void 0,(r=this._samplingSessionListener)===null||r===void 0||r.call(this),this._samplingSessionListener=void 0,J.info(Tn+" stopped"))}makeSamplingDecision(e){var n,i=this.sessionId!==e,r=this.sampleRate;if(Zi(r)){var s,o=this.isSampled,a=i||!eu(o);a?s=Math.random()<r:s=o,a&&(s?this._reportStarted("sampled"):J.warn(Tn+" Sample rate (".concat(r,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:r,isSampled:s})),(n=this.instance.persistence)===null||n===void 0||n.register({[Ch]:s})}else{var l;(l=this.instance.persistence)===null||l===void 0||l.register({[Ch]:null})}}afterDecideResponse(e){var n,i,r,s,o,a;if(this._persistDecideResponse(e),this._linkedFlag=((n=e.sessionRecording)===null||n===void 0?void 0:n.linkedFlag)||null,(i=e.sessionRecording)!==null&&i!==void 0&&i.endpoint&&(this._endpoint=(a=e.sessionRecording)===null||a===void 0?void 0:a.endpoint),this._setupSampling(),!Pt(this._linkedFlag)&&!this._linkedFlagSeen){var l=Zn(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,u=Zn(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((c,d)=>{var h=on(d)&&l in d,f=u?d[l]===u:h;f&&this._reportStarted("linked_flag_matched",{linkedFlag:l,linkedVariant:u}),this._linkedFlagSeen=f})}(r=e.sessionRecording)!==null&&r!==void 0&&r.urlTriggers&&(this._urlTriggers=e.sessionRecording.urlTriggers),(s=e.sessionRecording)!==null&&s!==void 0&&s.urlBlocklist&&(this._urlBlocklist=e.sessionRecording.urlBlocklist),(o=e.sessionRecording)!==null&&o!==void 0&&o.eventTriggers&&(this._eventTriggers=e.sessionRecording.eventTriggers),this.receivedDecide=!0,this.startIfEnabledOrStop()}_setupSampling(){Zi(this.sampleRate)&&Pt(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId(e=>{this.makeSamplingDecision(e)}))}_persistDecideResponse(e){if(this.instance.persistence){var n,i=this.instance.persistence,r=()=>{var s,o,a,l,u,c,d,h=(s=e.sessionRecording)===null||s===void 0?void 0:s.sampleRate,f=Pt(h)?null:parseFloat(h),p=(o=e.sessionRecording)===null||o===void 0?void 0:o.minimumDurationMilliseconds;i.register({[D1]:!!e.sessionRecording,[qA]:(a=e.sessionRecording)===null||a===void 0?void 0:a.consoleLogRecordingEnabled,[YA]:le({capturePerformance:e.capturePerformance},(l=e.sessionRecording)===null||l===void 0?void 0:l.networkPayloadCapture),[ZA]:{enabled:(u=e.sessionRecording)===null||u===void 0?void 0:u.recordCanvas,fps:(c=e.sessionRecording)===null||c===void 0?void 0:c.canvasFps,quality:(d=e.sessionRecording)===null||d===void 0?void 0:d.canvasQuality},[JA]:f,[QA]:Oe(p)?null:p})};r(),(n=this._persistDecideOnSessionListener)===null||n===void 0||n.call(this),this._persistDecideOnSessionListener=this.sessionManager.onSessionId(r)}}log(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log";(n=this.instance.sessionRecording)===null||n===void 0||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:i,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}_startCapture(e){if(!Oe(Object.assign)&&!Oe(Array.from)&&!(this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut())){var n,i;this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():(n=Ke.__PosthogExtensions__)===null||n===void 0||(i=n.loadExternalDependency)===null||i===void 0||i.call(n,this.instance,"recorder",r=>{if(r)return J.error(Tn+" could not load recorder",r);this._onScriptLoaded()}),J.info(Tn+" starting"),this.status==="active"&&this._reportStarted(e||"recording_initialized")}}isInteractiveEvent(e){var n;return e.type===3&&tU.indexOf((n=e.data)===null||n===void 0?void 0:n.source)!==-1}_updateWindowAndSessionIds(e){var n=this.isInteractiveEvent(e);n||this.isIdle||e.timestamp-this._lastActivityTimestamp>this.sessionIdleThresholdMilliseconds&&(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this.sessionIdleThresholdMilliseconds,bufferLength:this.buffer.data.length,bufferSize:this.buffer.size}),this._flushBuffer());var i=!1;if(n&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)),!this.isIdle){var{windowId:r,sessionId:s}=this.sessionManager.checkAndGetSessionAndWindowId(!n,e.timestamp),o=this.sessionId!==s,a=this.windowId!==r;this.windowId=r,this.sessionId=s,o||a?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this._scheduleFullSnapshot()}}_tryRRWebMethod(e){try{return e.rrwebMethod(),!0}catch(n){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):J.warn(Tn+" could not emit queued rrweb event.",n,e),!1}}_tryAddCustomEvent(e,n){return this._tryRRWebMethod(vP(()=>this.rrwebRecord.addCustomEvent(e,n)))}_tryTakeFullSnapshot(){return this._tryRRWebMethod(vP(()=>this.rrwebRecord.takeFullSnapshot()))}_onScriptLoaded(){var e,n={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},i=this.instance.config.session_recording;for(var[r,s]of Object.entries(i||{}))r in n&&(r==="maskInputOptions"?n.maskInputOptions=le({password:!0},s):n[r]=s);if(this.canvasRecording&&this.canvasRecording.enabled&&(n.recordCanvas=!0,n.sampling={canvas:this.canvasRecording.fps},n.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=(e=this.mutationRateLimiter)!==null&&e!==void 0?e:new V6(this.rrwebRecord,{refillRate:this.instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this.instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(a,l)=>{var u="Too many mutations on node '".concat(a,"'. Rate limiting. This could be due to SVG animations or something similar");J.info(u,{node:l}),this.log(Tn+" "+u,"warn")}});var o=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(le({emit:a=>{this.onRRwebEmit(a)},plugins:o},n)),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:n,activePlugins:o.map(a=>a==null?void 0:a.name)}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else J.error(Tn+"onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}_scheduleFullSnapshot(){if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!this.isIdle){var e=this.fullSnapshotIntervalMillis;e&&(this._fullSnapshotTimer=setInterval(()=>{this._tryTakeFullSnapshot()},e))}}_gatherRRWebPlugins(){var e,n,i,r,s=[],o=(e=Ke.__PosthogExtensions__)===null||e===void 0||(n=e.rrwebPlugins)===null||n===void 0?void 0:n.getRecordConsolePlugin;o&&this.isConsoleLogCaptureEnabled&&s.push(o());var a=(i=Ke.__PosthogExtensions__)===null||i===void 0||(r=i.rrwebPlugins)===null||r===void 0?void 0:r.getRecordNetworkPlugin;return this.networkPayloadCapture&&Ar(a)&&(!b6.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?s.push(a(H6(this.instance.config,this.networkPayloadCapture))):J.info(Tn+" NetworkCapture not started because we are on localhost.")),s}onRRwebEmit(e){var n;if(this._processQueuedEvents(),e&&on(e)){if(e.type===co.Meta){var i=this._maskUrl(e.data.href);if(this._lastHref=i,!i)return;e.data.href=i}else this._pageViewFallBack();if(this._checkUrlTriggerConditions(),this.status!=="paused"||function(d){return d.type===co.Custom&&d.data.tag==="recording paused"}(e)){e.type===co.FullSnapshot&&this._scheduleFullSnapshot(),e.type===co.FullSnapshot&&this.triggerStatus==="trigger_pending"&&this.clearBuffer();var r=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(r){var s=function(d){var h=d;if(h&&on(h)&&h.type===6&&on(h.data)&&h.data.plugin==="rrweb/console@1"){h.data.payload.payload.length>10&&(h.data.payload.payload=h.data.payload.payload.slice(0,10),h.data.payload.payload.push("...[truncated]"));for(var f=[],p=0;p<h.data.payload.payload.length;p++)h.data.payload.payload[p]&&h.data.payload.payload[p].length>2e3?f.push(h.data.payload.payload[p].slice(0,2e3)+"...[truncated]"):f.push(h.data.payload.payload[p]);return h.data.payload.payload=f,d}return d}(r);if(this._updateWindowAndSessionIds(s),!this.isIdle||yP(s)){if(yP(s)){var o=s.data.payload;if(o){var a=o.lastActivityTimestamp,l=o.threshold;s.timestamp=a+l}}var u=(n=this.instance.config.session_recording.compress_events)===null||n===void 0||n?function(d){if(kv(d)<1024)return d;try{if(d.type===co.FullSnapshot)return le(le({},d),{},{data:Ll(d.data),cv:"2024-10"});if(d.type===co.IncrementalSnapshot&&d.data.source===Xr.Mutation)return le(le({},d),{},{cv:"2024-10",data:le(le({},d.data),{},{texts:Ll(d.data.texts),attributes:Ll(d.data.attributes),removes:Ll(d.data.removes),adds:Ll(d.data.adds)})});if(d.type===co.IncrementalSnapshot&&d.data.source===Xr.StyleSheetRule)return le(le({},d),{},{cv:"2024-10",data:le(le({},d.data),{},{adds:Ll(d.data.adds),removes:Ll(d.data.removes)})})}catch(h){J.error(Tn+" could not compress event - will use uncompressed event",h)}return d}(s):s,c={$snapshot_bytes:kv(u),$snapshot_data:u,$session_id:this.sessionId,$window_id:this.windowId};this.status!=="disabled"?this._captureSnapshotBuffered(c):this.clearBuffer()}}}}}_pageViewFallBack(){if(!this.instance.config.capture_pageview&&U){var e=this._maskUrl(U.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}_processQueuedEvents(){if(this.queuedRRWebEvents.length){var e=[...this.queuedRRWebEvents];this.queuedRRWebEvents=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this._tryRRWebMethod(n)})}}_maskUrl(e){var n=this.instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))===null||i===void 0?void 0:i.url}return e}clearBuffer(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}_flushBuffer(){this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var e=this.minimumDuration,n=this.sessionDuration,i=Zi(n)&&n>=0,r=Zi(e)&&i&&n<e;return this.status==="buffering"||r?(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3),this.buffer):(this.buffer.data.length>0&&K1(this.buffer).forEach(s=>{this._captureSnapshot({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId})}),this.clearBuffer())}_captureSnapshotBuffered(e){var n,i=2+(((n=this.buffer)===null||n===void 0?void 0:n.data.length)||0);!this.isIdle&&(this.buffer.size+e.$snapshot_bytes+i>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3))}_captureSnapshot(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}_checkUrlTriggerConditions(){if(U!==void 0&&U.location.href){var e=U.location.href,n=this.status==="paused",i=wP(e,this._urlBlocklist);i&&!n?this._pauseRecording():!i&&n&&this._resumeRecording(),wP(e,this._urlTriggers)&&this._activateTrigger("url")}}_activateTrigger(e){var n,i;this.triggerStatus==="trigger_pending"&&((n=this.instance)===null||n===void 0||(i=n.persistence)===null||i===void 0||i.register({[e==="url"?Pw:Tw]:this.sessionId}),this._flushBuffer(),this._reportStarted(e+"_trigger_matched"))}_pauseRecording(){var e,n;this.status!=="paused"&&(this._urlBlocked=!0,ke==null||(e=ke.body)===null||e===void 0||(n=e.classList)===null||n===void 0||n.add("ph-no-capture"),clearInterval(this._fullSnapshotTimer),setTimeout(()=>{this._flushBuffer()},100),J.info(Tn+" recording paused due to URL blocker"),this._tryAddCustomEvent("recording paused",{reason:"url blocker"}))}_resumeRecording(){var e,n;this.status==="paused"&&(this._urlBlocked=!1,ke==null||(e=ke.body)===null||e===void 0||(n=e.classList)===null||n===void 0||n.remove("ph-no-capture"),this._tryTakeFullSnapshot(),this._scheduleFullSnapshot(),this._tryAddCustomEvent("recording resumed",{reason:"left blocked url"}),J.info(Tn+" recording resumed"))}_addEventTriggerListener(){this._eventTriggers.length!==0&&Pt(this._removeEventTriggerCaptureHook)&&(this._removeEventTriggerCaptureHook=this.instance.on("eventCaptured",e=>{try{this._eventTriggers.includes(e.event)&&this._activateTrigger("event")}catch(n){J.error(Tn+"Could not activate event trigger",n)}}))}overrideLinkedFlag(){this._linkedFlagSeen=!0,this._reportStarted("linked_flag_overridden")}overrideSampling(){var e;(e=this.instance.persistence)===null||e===void 0||e.register({[Ch]:!0}),this._reportStarted("sampling_overridden")}overrideTrigger(e){this._activateTrigger(e)}_reportStarted(e,n){this.instance.register_for_session({$session_recording_start_reason:e}),J.info(Tn+" "+e.replace("_"," "),n),tt(["recording_initialized","session_id_changed"],e)||this._tryAddCustomEvent(e,n)}}class iU{constructor(e){this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}call(){var e={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(hc),group_properties:this.instance.get_property(aa),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:e,compression:this.instance.config.disable_compression?void 0:ns.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:n=>this.parseDecideResponse(n.json)})}parseDecideResponse(e){this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer();var n=!e;if(this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(e??{},n),!n)return ke&&ke.body?void this.instance._afterDecideResponse(e):(J.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.parseDecideResponse(e)},500));J.error("Failed to fetch feature flags from PostHog.")}}var ho,rU=U!=null&&U.location?Sv(U.location.hash,"__posthog")||Sv(location.hash,"state"):null,bP="_postHogToolbarParams";(function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"})(ho||(ho={}));class sU{constructor(e){this.instance=e}setToolbarState(e){Ke.ph_toolbar_state=e}getToolbarState(){var e;return(e=Ke.ph_toolbar_state)!==null&&e!==void 0?e:ho.UNINITIALIZED}maybeLoadToolbar(){var e,n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!U||!ke)return!1;i=(e=i)!==null&&e!==void 0?e:U.location,s=(n=s)!==null&&n!==void 0?n:U.history;try{if(!r){try{U.localStorage.setItem("test","test"),U.localStorage.removeItem("test")}catch{return!1}r=U==null?void 0:U.localStorage}var o,a=rU||Sv(i.hash,"__posthog")||Sv(i.hash,"state"),l=a?BA(()=>JSON.parse(atob(decodeURIComponent(a))))||BA(()=>JSON.parse(decodeURIComponent(a))):null;return l&&l.action==="ph_authorize"?((o=l).source="url",o&&Object.keys(o).length>0&&(l.desiredHash?i.hash=l.desiredHash:s?s.replaceState(s.state,"",i.pathname+i.search):i.hash="")):((o=JSON.parse(r.getItem(bP)||"{}")).source="localstorage",delete o.userIntent),!(!o.token||this.instance.config.token!==o.token)&&(this.loadToolbar(o),!0)}catch{return!1}}_callLoadToolbar(e){(Ke.ph_load_toolbar||Ke.ph_load_editor)(e,this.instance)}loadToolbar(e){var n=!(ke==null||!ke.getElementById(vO));if(!U||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=le(le({token:this.instance.config.token},e),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(U.localStorage.setItem(bP,JSON.stringify(le(le({},r),{},{source:void 0}))),this.getToolbarState()===ho.LOADED)this._callLoadToolbar(r);else if(this.getToolbarState()===ho.UNINITIALIZED){var s,o;this.setToolbarState(ho.LOADING),(s=Ke.__PosthogExtensions__)===null||s===void 0||(o=s.loadExternalDependency)===null||o===void 0||o.call(s,this.instance,"toolbar",a=>{if(a)return J.error("Failed to load toolbar",a),void this.setToolbarState(ho.UNINITIALIZED);this.setToolbarState(ho.LOADED),this._callLoadToolbar(r)}),Po(U,"turbolinks:load",()=>{this.setToolbarState(ho.UNINITIALIZED),this.loadToolbar(r)})}return!0}_loadEditor(e){return this.loadToolbar(e)}maybeLoadEditor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return this.maybeLoadToolbar(e,n,i)}}class oU{constructor(e){ye(this,"isPaused",!0),ye(this,"queue",[]),ye(this,"flushTimeoutMs",3e3),this.sendRequest=e}enqueue(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}unload(){this.clearFlushTimeout();var e=this.queue.length>0?this.formatQueue():{},n=Object.values(e),i=[...n.filter(r=>r.url.indexOf("/e")===0),...n.filter(r=>r.url.indexOf("/e")!==0)];i.map(r=>{this.sendRequest(le(le({},r),{},{transport:"sendBeacon"}))})}enable(){this.isPaused=!1,this.setFlushTimeout()}setFlushTimeout(){var e=this;this.isPaused||(this.flushTimeout=setTimeout(()=>{if(this.clearFlushTimeout(),this.queue.length>0){var n=this.formatQueue(),i=function(s){var o=n[s],a=new Date().getTime();o.data&&Jt(o.data)&&_t(o.data,l=>{l.offset=Math.abs(l.timestamp-a),delete l.timestamp}),e.sendRequest(o)};for(var r in n)i(r)}},this.flushTimeoutMs))}clearFlushTimeout(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}formatQueue(){var e={};return _t(this.queue,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;Oe(e[s])&&(e[s]=le(le({},r),{},{data:[]})),(i=e[s].data)===null||i===void 0||i.push(r.data)}),this.queue=[],e}}var aU=!!M1||!!N1,xP="text/plain",Av=(t,e)=>{var[n,i]=t.split("?"),r=le({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=x6(r);return s=s?(i?i+"&":"")+s:i,"".concat(n,"?").concat(s)},Dw=t=>{var{data:e,compression:n}=t;if(e){if(n===ns.GZipJS){var i=qO(YO(JSON.stringify(e)),{mtime:0}),r=new Blob([i],{type:xP});return{contentType:xP,body:r,estimatedSize:r.size}}if(n===ns.Base64){var s=function(l){var u,c,d,h,f,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=0,b=0,v="",y=[];if(!l)return l;l=r6(l);do u=(f=l.charCodeAt(g++)<<16|l.charCodeAt(g++)<<8|l.charCodeAt(g++))>>18&63,c=f>>12&63,d=f>>6&63,h=63&f,y[b++]=p.charAt(u)+p.charAt(c)+p.charAt(d)+p.charAt(h);while(g<l.length);switch(v=y.join(""),l.length%3){case 1:v=v.slice(0,-2)+"==";break;case 2:v=v.slice(0,-1)+"="}return v}(JSON.stringify(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:JSON.stringify(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=JSON.stringify(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Gh=[];M1&&Gh.push({transport:"XHR",method:t=>{var e,n=new M1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=Dw(t))!==null&&e!==void 0?e:{};_t(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s,o={statusCode:n.status,text:n.responseText};if(n.status===200)try{o.json=JSON.parse(n.responseText)}catch{}(s=t.callback)===null||s===void 0||s.call(t,o)}},n.send(r)}}),N1&&Gh.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=Dw(t))!==null&&e!==void 0?e:{},o=new Headers;_t(t.headers,function(c,d){o.append(d,c)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if($A){var u=new $A;l={signal:u.signal,timeout:setTimeout(()=>u.abort(),t.timeout)}}N1(a,{method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)===null||n===void 0?void 0:n.signal}).then(c=>c.text().then(d=>{var h,f={statusCode:c.status,text:d};if(c.status===200)try{f.json=JSON.parse(d)}catch(p){J.error(p)}(h=t.callback)===null||h===void 0||h.call(t,f)})).catch(c=>{var d;J.error(c),(d=t.callback)===null||d===void 0||d.call(t,{statusCode:0,text:c})}).finally(()=>l?clearTimeout(l.timeout):null)}}),Qi!=null&&Qi.sendBeacon&&Gh.push({transport:"sendBeacon",method:t=>{var e=Av(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=Dw(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;Qi.sendBeacon(e,s)}catch{}}});var lU=["retriesPerformedSoFar"];class uU{constructor(e){ye(this,"isPolling",!1),ye(this,"pollIntervalMs",3e3),ye(this,"queue",[]),this.instance=e,this.queue=[],this.areWeOnline=!0,!Oe(U)&&"onLine"in U.navigator&&(this.areWeOnline=U.navigator.onLine,U.addEventListener("online",()=>{this.areWeOnline=!0,this.flush()}),U.addEventListener("offline",()=>{this.areWeOnline=!1}))}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=pO(e,lU);Zi(n)&&n>0&&(i.url=Av(i.url,{retry_count:n})),this.instance._send_request(le(le({},i),{},{callback:r=>{var s;r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.enqueue(le({retriesPerformedSoFar:n},i)):(s=i.callback)===null||s===void 0||s.call(i,r)}}))}enqueue(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,u=Math.min(18e5,a),c=(Math.random()-.5)*(u-l);return Math.ceil(u+c)}(n),r=Date.now()+i;this.queue.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in ".concat(i);navigator.onLine||(s+=" (Browser is offline)"),J.warn(s),this.isPolling||(this.isPolling=!0,this.poll())}poll(){this.poller&&clearTimeout(this.poller),this.poller=setTimeout(()=>{this.areWeOnline&&this.queue.length>0&&this.flush(),this.poll()},this.pollIntervalMs)}flush(){var e=Date.now(),n=[],i=this.queue.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.queue=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.poller&&(clearTimeout(this.poller),this.poller=void 0),this.queue))try{this.instance._send_request(le(le({},e),{},{transport:"sendBeacon"}))}catch(n){J.error(n)}this.queue=[]}}var tu;class cU{constructor(e,n,i,r){var s;ye(this,"_sessionIdChangedHandlers",[]),this.config=e,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=i||Ca,this._windowIdGenerator=r||Ca;var o=e.persistence_name||e.token,a=e.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*To(a,60,1800,"session_idle_timeout_seconds"),this._window_id_storage_key="ph_"+o+"_window_id",this._primary_window_exists_storage_key="ph_"+o+"_primary_window_exists",this._canUseSessionStorage()){var l=In.parse(this._window_id_storage_key),u=In.parse(this._primary_window_exists_storage_key);l&&!u?this._windowId=l:In.remove(this._window_id_storage_key),In.set(this._primary_window_exists_storage_key,!0)}if((s=this.config.bootstrap)!==null&&s!==void 0&&s.sessionID)try{var c=(d=>{var h=d.replace(/-/g,"");if(h.length!==32)throw new Error("Not a valid UUID");if(h[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(h.substring(0,12),16)})(this.config.bootstrap.sessionID);this._setSessionId(this.config.bootstrap.sessionID,new Date().getTime(),c)}catch(d){J.error("Invalid sessionID in bootstrap",d)}this._listenToReloadWindow()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return Oe(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),()=>{this._sessionIdChangedHandlers=this._sessionIdChangedHandlers.filter(n=>n!==e)}}_canUseSessionStorage(){return this.config.persistence!=="memory"&&!this.persistence.disabled&&In.is_supported()}_setWindowId(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&In.set(this._window_id_storage_key,e))}_getWindowId(){return this._windowId?this._windowId:this._canUseSessionStorage()?In.parse(this._window_id_storage_key):null}_setSessionId(e,n,i){e===this._sessionId&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this._sessionId=e,this.persistence.register({[yv]:[n,e,i]}))}_getSessionId(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[yv];return Jt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this._setSessionId(null,null,null)}_listenToReloadWindow(){U==null||U.addEventListener("beforeunload",()=>{this._canUseSessionStorage()&&In.remove(this._primary_window_exists_storage_key)})}checkAndGetSessionAndWindowId(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:null)||new Date().getTime(),[i,r,s]=this._getSessionId(),o=this._getWindowId(),a=Zi(s)&&s>0&&Math.abs(n-s)>864e5,l=!1,u=!r,c=!e&&Math.abs(n-i)>this.sessionTimeoutMs;u||c||a?(r=this._sessionIdGenerator(),o=this._windowIdGenerator(),J.info("[SessionId] new session ID generated",{sessionId:r,windowId:o,changeReason:{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}}),s=n,l=!0):o||(o=this._windowIdGenerator(),l=!0);var d=i===0||!e||a?n:i,h=s===0?new Date().getTime():s;return this._setWindowId(o),this._setSessionId(r,d,h),l&&this._sessionIdChangedHandlers.forEach(f=>f(r,o,l?{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}:void 0)),{sessionId:r,windowId:o,sessionStartTimestamp:h,changeReason:l?{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}:void 0,lastActivityTimestamp:i}}}(function(t){t.US="us",t.EU="eu",t.CUSTOM="custom"})(tu||(tu={}));var SP="i.posthog.com";class dU{constructor(e){ye(this,"_regionCache",{}),this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)===null||e===void 0?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace(".".concat(SP),".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=tu.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=tu.EU:this._regionCache[this.apiHost]=tu.CUSTOM),this._regionCache[this.apiHost]}endpointFor(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(n&&(n=n[0]==="/"?n:"/".concat(n)),e==="ui")return this.uiHost+n;if(this.region===tu.CUSTOM)return this.apiHost+n;var i=SP+n;switch(e){case"assets":return"https://".concat(this.region,"-assets.").concat(i);case"api":return"https://".concat(this.region,".").concat(i)}}}var ZO="posthog-js";function JO(t){var{organization:e,projectId:n,prefix:i,severityAllowList:r=["error"]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return s=>{var o,a,l,u,c;if(!(r==="*"||r.includes(s.level))||!t.__loaded)return s;s.tags||(s.tags={});var d=t.requestRouter.endpointFor("ui","/project/".concat(t.config.token,"/person/").concat(t.get_distinct_id()));s.tags["PostHog Person URL"]=d,t.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var h=((o=s.exception)===null||o===void 0?void 0:o.values)||[];h.map(p=>{p.stacktrace&&(p.stacktrace.type="raw")});var f={$exception_message:((a=h[0])===null||a===void 0?void 0:a.value)||s.message,$exception_type:(l=h[0])===null||l===void 0?void 0:l.type,$exception_personURL:d,$exception_level:s.level,$exception_list:h,$sentry_event_id:s.event_id,$sentry_exception:s.exception,$sentry_exception_message:((u=h[0])===null||u===void 0?void 0:u.value)||s.message,$sentry_exception_type:(c=h[0])===null||c===void 0?void 0:c.type,$sentry_tags:s.tags};return e&&n&&(f.$sentry_url=(i||"https://sentry.io/organizations/")+e+"/issues/?project="+n+"&query="+s.event_id),t.exceptions.sendExceptionEvent(f),s}}class hU{constructor(e,n,i,r,s){this.name=ZO,this.setupOnce=function(o){o(JO(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var _P,Pv,Gr;function fU(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var u=()=>l.anonymousId()||Ca();i.config.get_device_id=u,l.id()&&(i.register({distinct_id:l.id(),$device_id:u()}),i.persistence.set_property(uo,"identified")),r()},a=s.user();"then"in a&&Ar(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||J.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{var a;if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(J.info("Segment integration does not have a userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(J.info("Segment integration has a userId set, identifying with PostHog"),i.identify(s.event.userId));var l=i._calculate_event_properties(o,(a=s.event.properties)!==null&&a!==void 0?a:{},new Date);return s.event.properties=Object.assign({},l,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}class pU{constructor(e){this._instance=e}doPageView(e){var n,i=this._previousPageViewProperties(e);return this._currentPath=(n=U==null?void 0:U.location.pathname)!==null&&n!==void 0?n:"",this._instance.scrollManager.resetContext(),this._prevPageviewTimestamp=e,i}doPageLeave(e){return this._previousPageViewProperties(e)}_previousPageViewProperties(e){var n=this._currentPath,i=this._prevPageviewTimestamp,r=this._instance.scrollManager.getContext();if(!i)return{};var s={};if(r){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:u,lastContentY:c,maxContentY:d}=r;Oe(o)||Oe(a)||Oe(l)||Oe(u)||Oe(c)||Oe(d)||(o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),u=Math.ceil(u),c=Math.ceil(c),d=Math.ceil(d),s={$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:o<=1?1:To(a/o,0,1),$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:o<=1?1:To(l/o,0,1),$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:u<=1?1:To(c/u,0,1),$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:u<=1?1:To(d/u,0,1)})}return n&&(s.$prev_pageview_pathname=n),i&&(s.$prev_pageview_duration=(e.getTime()-i.getTime())/1e3),s}}(function(t){t.Popover="popover",t.API="api",t.Widget="widget"})(_P||(_P={})),function(t){t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link"}(Pv||(Pv={})),function(t){t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question"}(Gr||(Gr={}));class QO{constructor(){ye(this,"events",{}),this.events={}}on(e,n){return this.events[e]||(this.events[e]=[]),this.events[e].push(n),()=>{this.events[e]=this.events[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.events[e]||[])i(n);for(var r of this.events["*"]||[])r(e,n)}}class Gl{constructor(e){ye(this,"_debugEventEmitter",new QO),ye(this,"checkStep",(n,i)=>this.checkStepEvent(n,i)&&this.checkStepUrl(n,i)&&this.checkStepElement(n,i)),ye(this,"checkStepEvent",(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event)),this.instance=e,this.actionEvents=new Set,this.actionRegistry=new Set}init(){var e;if(!Oe((e=this.instance)===null||e===void 0?void 0:e._addCaptureHook)){var n;(n=this.instance)===null||n===void 0||n._addCaptureHook((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!Oe((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)&&(e.forEach(o=>{var a,l;(a=this.actionRegistry)===null||a===void 0||a.add(o),(l=o.steps)===null||l===void 0||l.forEach(u=>{var c;(c=this.actionEvents)===null||c===void 0||c.add((u==null?void 0:u.event)||"")})}),(i=this.instance)!==null&&i!==void 0&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)===null||a===void 0||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this.instance)===null||r===void 0||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.actionEvents.has(e)||this.actionEvents.has(n==null?void 0:n.event))&&this.actionRegistry&&((i=this.actionRegistry)===null||i===void 0?void 0:i.size)>0&&this.actionRegistry.forEach(r=>{this.checkAction(n,r)&&this._debugEventEmitter.emit("actionCaptured",r.name)})}_addActionHook(e){this.onAction("actionCaptured",n=>e(n))}checkAction(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.checkStep(e,i))return!0;return!1}onAction(e,n){return this._debugEventEmitter.on(e,n)}checkStepUrl(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)===null||i===void 0?void 0:i.$current_url;if(!r||typeof r!="string"||!Gl.matchString(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static matchString(e,n,i){switch(i){case"regex":return!!U&&ad(e,n);case"exact":return n===e;case"contains":var r=Gl.escapeStringRegexp(n).replace(/_/g,".").replace(/%/g,".*");return ad(e,r);default:return!1}}static escapeStringRegexp(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}checkStepElement(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.getElementsList(e).some(s=>!(n!=null&&n.href&&!Gl.matchString(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!Gl.matchString(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!Gl.matchString(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)===null||i===void 0?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}getElementsList(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}class xf{constructor(e){this.instance=e,this.eventToSurveys=new Map,this.actionToSurveys=new Map}register(e){var n;Oe((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)||(this.setupEventBasedSurveys(e),this.setupActionBasedSurveys(e))}setupActionBasedSurveys(e){var n=e.filter(i=>{var r,s,o,a;return((r=i.conditions)===null||r===void 0?void 0:r.actions)&&((s=i.conditions)===null||s===void 0||(o=s.actions)===null||o===void 0||(a=o.values)===null||a===void 0?void 0:a.length)>0});n.length!==0&&(this.actionMatcher==null&&(this.actionMatcher=new Gl(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l,u,c,d,h,f;i.conditions&&(r=i.conditions)!==null&&r!==void 0&&r.actions&&(s=i.conditions)!==null&&s!==void 0&&(o=s.actions)!==null&&o!==void 0&&o.values&&((a=i.conditions)===null||a===void 0||(l=a.actions)===null||l===void 0||(u=l.values)===null||u===void 0?void 0:u.length)>0&&((c=this.actionMatcher)===null||c===void 0||c.register(i.conditions.actions.values),(d=i.conditions)===null||d===void 0||(h=d.actions)===null||h===void 0||(f=h.values)===null||f===void 0||f.forEach(p=>{if(p&&p.name){var g=this.actionToSurveys.get(p.name);g&&g.push(i.id),this.actionToSurveys.set(p.name,g||[i.id])}}))}))}setupEventBasedSurveys(e){var n;e.filter(i=>{var r,s,o,a;return((r=i.conditions)===null||r===void 0?void 0:r.events)&&((s=i.conditions)===null||s===void 0||(o=s.events)===null||o===void 0||(a=o.values)===null||a===void 0?void 0:a.length)>0}).length!==0&&((n=this.instance)===null||n===void 0||n._addCaptureHook((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r,s,o;(r=i.conditions)===null||r===void 0||(s=r.events)===null||s===void 0||(o=s.values)===null||o===void 0||o.forEach(a=>{if(a&&a.name){var l=this.eventToSurveys.get(a.name);l&&l.push(i.id),this.eventToSurveys.set(a.name,l||[i.id])}})}))}onEvent(e,n){var i,r,s=((i=this.instance)===null||i===void 0||(r=i.persistence)===null||r===void 0?void 0:r.props[mm])||[];if(xf.SURVEY_SHOWN_EVENT_NAME==e&&n&&s.length>0){var o,a=n==null||(o=n.properties)===null||o===void 0?void 0:o.$survey_id;if(a){var l=s.indexOf(a);l>=0&&(s.splice(l,1),this._updateActivatedSurveys(s))}}else this.eventToSurveys.has(e)&&this._updateActivatedSurveys(s.concat(this.eventToSurveys.get(e)||[]))}onAction(e){var n,i,r=((n=this.instance)===null||n===void 0||(i=n.persistence)===null||i===void 0?void 0:i.props[mm])||[];this.actionToSurveys.has(e)&&this._updateActivatedSurveys(r.concat(this.actionToSurveys.get(e)||[]))}_updateActivatedSurveys(e){var n,i;(n=this.instance)===null||n===void 0||(i=n.persistence)===null||i===void 0||i.register({[mm]:[...new Set(e)]})}getSurveys(){var e,n,i=(e=this.instance)===null||e===void 0||(n=e.persistence)===null||n===void 0?void 0:n.props[mm];return i||[]}getEventToSurveys(){return this.eventToSurveys}_getActionMatcher(){return this.actionMatcher}}ye(xf,"SURVEY_SHOWN_EVENT_NAME","survey shown");var eI,Yt,tI,Kl,kP,nI,nx,iI,ix={},rI=[],mU=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,mk=Array.isArray;function Ea(t,e){for(var n in e)t[n]=e[n];return t}function sI(t){var e=t.parentNode;e&&e.removeChild(t)}function Lw(t,e,n,i,r){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++tI,__i:-1,__u:0};return r==null&&Yt.vnode!=null&&Yt.vnode(s),s}function gk(t){return t.children}function Dg(t,e){this.props=t,this.context=e}function dd(t,e){if(e==null)return t.__?dd(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?dd(t):null}function oI(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return oI(t)}}function rx(t){(!t.__d&&(t.__d=!0)&&Kl.push(t)&&!Tv.__r++||kP!==Yt.debounceRendering)&&((kP=Yt.debounceRendering)||nI)(Tv)}function Tv(){var t,e,n,i,r,s,o,a,l;for(Kl.sort(nx);t=Kl.shift();)t.__d&&(e=Kl.length,i=void 0,s=(r=(n=t).__v).__e,a=[],l=[],(o=n.__P)&&((i=Ea({},r)).__v=r.__v+1,Yt.vnode&&Yt.vnode(i),uI(o,i,r,n.__n,o.ownerSVGElement!==void 0,32&r.__u?[s]:null,a,s??dd(r),!!(32&r.__u),l),i.__.__k[i.__i]=i,yU(a,i,l),i.__e!=s&&oI(i)),Kl.length>e&&Kl.sort(nx));Tv.__r=0}function aI(t,e,n,i,r,s,o,a,l,u,c){var d,h,f,p,g,b=i&&i.__k||rI,v=e.length;for(n.__d=l,gU(n,e,b),l=n.__d,d=0;d<v;d++)(f=n.__k[d])!=null&&typeof f!="boolean"&&typeof f!="function"&&(h=f.__i===-1?ix:b[f.__i]||ix,f.__i=d,uI(t,f,h,r,s,o,a,l,u,c),p=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&vk(h.ref,null,f),c.push(f.ref,f.__c||p,f)),g==null&&p!=null&&(g=p),65536&f.__u||h.__k===f.__k?l=lI(f,l,t):typeof f.type=="function"&&f.__d!==void 0?l=f.__d:p&&(l=p.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=l,n.__e=g}function gU(t,e,n){var i,r,s,o,a,l=e.length,u=n.length,c=u,d=0;for(t.__k=[],i=0;i<l;i++)(r=t.__k[i]=(r=e[i])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?Lw(null,r,null,null,r):mk(r)?Lw(gk,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?Lw(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=t,r.__b=t.__b+1,a=vU(r,n,o=i+d,c),r.__i=a,s=null,a!==-1&&(c--,(s=n[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&d--,typeof r.type!="function"&&(r.__u|=65536)):a!==o&&(a===o+1?d++:a>o?c>l-o?d+=a-o:d--:d=a<o&&a==o-1?a-o:0,a!==i+d&&(r.__u|=65536))):(s=n[i])&&s.key==null&&s.__e&&(s.__e==t.__d&&(t.__d=dd(s)),sx(s,s,!1),n[i]=null,c--);if(c)for(i=0;i<u;i++)(s=n[i])!=null&&!(131072&s.__u)&&(s.__e==t.__d&&(t.__d=dd(s)),sx(s,s))}function lI(t,e,n){var i,r;if(typeof t.type=="function"){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,e=lI(i[r],e,n));return e}return t.__e!=e&&(n.insertBefore(t.__e,e||null),e=t.__e),e&&e.nextSibling}function vU(t,e,n,i){var r=t.key,s=t.type,o=n-1,a=n+1,l=e[n];if(l===null||l&&r==l.key&&s===l.type)return n;if(i>(l!=null&&!(131072&l.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((l=e[o])&&!(131072&l.__u)&&r==l.key&&s===l.type)return o;o--}if(a<e.length){if((l=e[a])&&!(131072&l.__u)&&r==l.key&&s===l.type)return a;a++}}return-1}function CP(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||mU.test(e)?n:n+"px"}function xm(t,e,n,i,r){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||CP(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||CP(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i?n.u=i.u:(n.u=Date.now(),t.addEventListener(e,s?AP:EP,s)):t.removeEventListener(e,s?AP:EP,s);else{if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,n))}}function EP(t){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(Yt.event?Yt.event(t):t)}function AP(t){return this.l[t.type+!0](Yt.event?Yt.event(t):t)}function uI(t,e,n,i,r,s,o,a,l,u){var c,d,h,f,p,g,b,v,y,w,_,k,C,E,P,N=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),s=[a=e.__e=n.__e]),(c=Yt.__b)&&c(e);e:if(typeof N=="function")try{if(v=e.props,y=(c=N.contextType)&&i[c.__c],w=c?y?y.props.value:c.__:i,n.__c?b=(d=e.__c=n.__c).__=d.__E:("prototype"in N&&N.prototype.render?e.__c=d=new N(v,w):(e.__c=d=new Dg(v,w),d.constructor=N,d.render=bU),y&&y.sub(d),d.props=v,d.state||(d.state={}),d.context=w,d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),N.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Ea({},d.__s)),Ea(d.__s,N.getDerivedStateFromProps(v,d.__s))),f=d.props,p=d.state,d.__v=e,h)N.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(N.getDerivedStateFromProps==null&&v!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,w),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,w)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(D){D&&(D.__=e)}),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,w),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,p,g)})}if(d.context=w,d.props=v,d.__P=t,d.__e=!1,k=Yt.__r,C=0,"prototype"in N&&N.prototype.render){for(d.state=d.__s,d.__d=!1,k&&k(e),c=d.render(d.props,d.state,d.context),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[]}else do d.__d=!1,k&&k(e),c=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++C<25);d.state=d.__s,d.getChildContext!=null&&(i=Ea(Ea({},i),d.getChildContext())),h||d.getSnapshotBeforeUpdate==null||(g=d.getSnapshotBeforeUpdate(f,p)),aI(t,mk(P=c!=null&&c.type===gk&&c.key==null?c.props.children:c)?P:[P],e,n,i,r,s,o,a,l,u),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),b&&(d.__E=d.__=null)}catch(D){e.__v=null,l||s!=null?(e.__e=a,e.__u|=l?160:32,s[s.indexOf(a)]=null):(e.__e=n.__e,e.__k=n.__k),Yt.__e(D,e,n)}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=wU(n.__e,e,n,i,r,s,o,l,u);(c=Yt.diffed)&&c(e)}function yU(t,e,n){e.__d=void 0;for(var i=0;i<n.length;i++)vk(n[i],n[++i],n[++i]);Yt.__c&&Yt.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(s){s.call(r)})}catch(s){Yt.__e(s,r.__v)}})}function wU(t,e,n,i,r,s,o,a,l){var u,c,d,h,f,p,g,b=n.props,v=e.props,y=e.type;if(y==="svg"&&(r=!0),s!=null){for(u=0;u<s.length;u++)if((f=s[u])&&"setAttribute"in f==!!y&&(y?f.localName===y:f.nodeType===3)){t=f,s[u]=null;break}}if(t==null){if(y===null)return document.createTextNode(v);t=r?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,v.is&&v),s=null,a=!1}if(y===null)b===v||a&&t.data===v||(t.data=v);else{if(s=s&&eI.call(t.childNodes),b=n.props||ix,!a&&s!=null)for(b={},u=0;u<t.attributes.length;u++)b[(f=t.attributes[u]).name]=f.value;for(u in b)f=b[u],u=="children"||(u=="dangerouslySetInnerHTML"?d=f:u==="key"||u in v||xm(t,u,null,f,r));for(u in v)f=v[u],u=="children"?h=f:u=="dangerouslySetInnerHTML"?c=f:u=="value"?p=f:u=="checked"?g=f:u==="key"||a&&typeof f!="function"||b[u]===f||xm(t,u,f,b[u],r);if(c)a||d&&(c.__html===d.__html||c.__html===t.innerHTML)||(t.innerHTML=c.__html),e.__k=[];else if(d&&(t.innerHTML=""),aI(t,mk(h)?h:[h],e,n,i,r&&y!=="foreignObject",s,o,s?s[0]:n.__k&&dd(n,0),a,l),s!=null)for(u=s.length;u--;)s[u]!=null&&sI(s[u]);a||(u="value",p!==void 0&&(p!==t[u]||y==="progress"&&!p||y==="option"&&p!==b[u])&&xm(t,u,p,b[u],!1),u="checked",g!==void 0&&g!==t[u]&&xm(t,u,g,b[u],!1))}return t}function vk(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){Yt.__e(i,n)}}function sx(t,e,n){var i,r;if(Yt.unmount&&Yt.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||vk(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){Yt.__e(s,e)}i.base=i.__P=null,t.__c=void 0}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&sx(i[r],e,n||typeof t.type!="function");n||t.__e==null||sI(t.__e),t.__=t.__e=t.__d=void 0}function bU(t,e,n){return this.constructor(t,n)}eI=rI.slice,Yt={__e:function(t,e,n,i){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),o=r.__d),o)return r.__E=r}catch(a){t=a}throw t}},tI=0,Dg.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ea({},this.state),typeof t=="function"&&(t=t(Ea({},n),this.props)),t&&Ea(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),rx(this))},Dg.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),rx(this))},Dg.prototype.render=gk,Kl=[],nI=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,nx=function(t,e){return t.__v.__b-e.__v.__b},Tv.__r=0,iI=0;(function(t,e){var n={__c:e="__cC"+iI++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,s;return this.getChildContext||(r=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&r.some(function(a){a.__e=!0,rx(a)})},this.sub=function(o){r.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){r.splice(r.indexOf(o),1),a&&a.call(o)}}),i.children}};n.Provider.__=n.Consumer.contextType=n})({isPreviewMode:!1,previewPageIndex:0,handleCloseSurveyPopup:()=>{},isPopup:!0});var Qd="[Surveys]",xU={icontains:t=>!!U&&U.location.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:t=>!!U&&U.location.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:t=>!!U&&ad(U.location.href,t),not_regex:t=>!!U&&!ad(U.location.href,t),exact:t=>(U==null?void 0:U.location.href)===t,is_not:t=>(U==null?void 0:U.location.href)!==t};class SU{constructor(e){this.instance=e,this._surveyEventReceiver=null}afterDecideResponse(e){this._decideServerResponse=!!e.surveys,this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");var e=(()=>{for(var n=[],i=0;i<localStorage.length;i++){var r=localStorage.key(i);r!=null&&r.startsWith("seenSurvey_")&&n.push(r)}return n})();e.forEach(n=>localStorage.removeItem(n))}loadIfEnabled(){var e,n,i,r=Ke==null||(e=Ke.__PosthogExtensions__)===null||e===void 0?void 0:e.generateSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||r||(this._surveyEventReceiver==null&&(this._surveyEventReceiver=new xf(this.instance)),(n=Ke.__PosthogExtensions__)===null||n===void 0||(i=n.loadExternalDependency)===null||i===void 0||i.call(n,this.instance,"surveys",s=>{var o,a;if(s)return J.error(Qd,"Could not load surveys script",s);this._surveyManager=(o=Ke.__PosthogExtensions__)===null||o===void 0||(a=o.generateSurveys)===null||a===void 0?void 0:a.call(o,this.instance)}))}getSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.instance.config.disable_surveys)return e([]);this._surveyEventReceiver==null&&(this._surveyEventReceiver=new xf(this.instance));var i=this.instance.get_property(j1);if(i&&!n)return e(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:r=>{var s;if(r.statusCode!==200||!r.json)return e([]);var o,a=r.json.surveys||[],l=a.filter(u=>{var c,d,h,f,p,g,b,v,y,w,_,k;return((c=u.conditions)===null||c===void 0?void 0:c.events)&&((d=u.conditions)===null||d===void 0||(h=d.events)===null||h===void 0?void 0:h.values)&&((f=u.conditions)===null||f===void 0||(p=f.events)===null||p===void 0||(g=p.values)===null||g===void 0?void 0:g.length)>0||((b=u.conditions)===null||b===void 0?void 0:b.actions)&&((v=u.conditions)===null||v===void 0||(y=v.actions)===null||y===void 0?void 0:y.values)&&((w=u.conditions)===null||w===void 0||(_=w.actions)===null||_===void 0||(k=_.values)===null||k===void 0?void 0:k.length)>0});return l.length>0&&((o=this._surveyEventReceiver)===null||o===void 0||o.register(l)),(s=this.instance.persistence)===null||s===void 0||s.register({[j1]:a}),e(a)}})}getActiveMatchingSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.getSurveys(i=>{var r,s=i.filter(l=>!(!l.start_date||l.end_date)).filter(l=>{var u,c,d,h;if(!l.conditions)return!0;var f=(u=l.conditions)===null||u===void 0||!u.url||xU[(c=(d=l.conditions)===null||d===void 0?void 0:d.urlMatchType)!==null&&c!==void 0?c:"icontains"](l.conditions.url),p=(h=l.conditions)===null||h===void 0||!h.selector||(ke==null?void 0:ke.querySelector(l.conditions.selector));return f&&p}),o=(r=this._surveyEventReceiver)===null||r===void 0?void 0:r.getSurveys(),a=s.filter(l=>{var u,c,d,h,f,p,g,b,v,y,w;if(!(l.linked_flag_key||l.targeting_flag_key||l.internal_targeting_flag_key||(u=l.feature_flag_keys)!==null&&u!==void 0&&u.length))return!0;var _=!l.linked_flag_key||this.instance.featureFlags.isFeatureEnabled(l.linked_flag_key),k=!l.targeting_flag_key||this.instance.featureFlags.isFeatureEnabled(l.targeting_flag_key),C=((c=l.conditions)===null||c===void 0?void 0:c.events)&&((d=l.conditions)===null||d===void 0||(h=d.events)===null||h===void 0?void 0:h.values)&&((f=l.conditions)===null||f===void 0||(p=f.events)===null||p===void 0?void 0:p.values.length)>0,E=((g=l.conditions)===null||g===void 0?void 0:g.actions)&&((b=l.conditions)===null||b===void 0||(v=b.actions)===null||v===void 0?void 0:v.values)&&((y=l.conditions)===null||y===void 0||(w=y.actions)===null||w===void 0?void 0:w.values.length)>0,P=!C&&!E||(o==null?void 0:o.includes(l.id)),N=this._canActivateRepeatedly(l),D=!(l.internal_targeting_flag_key&&!N)||this.instance.featureFlags.isFeatureEnabled(l.internal_targeting_flag_key),L=this.checkFlags(l);return _&&k&&D&&P&&L});return e(a)},n)}checkFlags(e){var n;return(n=e.feature_flag_keys)===null||n===void 0||!n.length||e.feature_flag_keys.every(i=>{var{key:r,value:s}=i;return!r||!s||this.instance.featureFlags.isFeatureEnabled(s)})}getNextSurveyStep(e,n,i){var r,s=e.questions[n],o=n+1;if((r=s.branching)===null||r===void 0||!r.type)return n===e.questions.length-1?Gr.End:o;if(s.branching.type===Gr.End)return Gr.End;if(s.branching.type===Gr.SpecificQuestion){if(Number.isInteger(s.branching.index))return s.branching.index}else if(s.branching.type===Gr.ResponseBased){if(s.type===Pv.SingleChoice){var a,l,u=s.choices.indexOf("".concat(i));if((a=s.branching)!==null&&a!==void 0&&(l=a.responseValues)!==null&&l!==void 0&&l.hasOwnProperty(u)){var c=s.branching.responseValues[u];return Number.isInteger(c)?c:c===Gr.End?Gr.End:o}}else if(s.type===Pv.Rating){var d,h;if(typeof i!="number"||!Number.isInteger(i))throw new Error("The response type must be an integer");var f=function(g,b){if(b===3){if(g<1||g>3)throw new Error("The response must be in range 1-3");return g===1?"negative":g===2?"neutral":"positive"}if(b===5){if(g<1||g>5)throw new Error("The response must be in range 1-5");return g<=2?"negative":g===3?"neutral":"positive"}if(b===7){if(g<1||g>7)throw new Error("The response must be in range 1-7");return g<=3?"negative":g===4?"neutral":"positive"}if(b===10){if(g<0||g>10)throw new Error("The response must be in range 0-10");return g<=6?"detractors":g<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(i,s.scale);if((d=s.branching)!==null&&d!==void 0&&(h=d.responseValues)!==null&&h!==void 0&&h.hasOwnProperty(f)){var p=s.branching.responseValues[f];return Number.isInteger(p)?p:p===Gr.End?Gr.End:o}}return o}return J.warn(Qd,"Falling back to next question index due to unexpected branching type"),o}_canActivateRepeatedly(e){var n;return Pt((n=Ke.__PosthogExtensions__)===null||n===void 0?void 0:n.canActivateRepeatedly)?(J.warn(Qd,"canActivateRepeatedly is not defined, must init before calling"),!1):Ke.__PosthogExtensions__.canActivateRepeatedly(e)}canRenderSurvey(e){Pt(this._surveyManager)?J.warn(Qd,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(n=>{var i=n.filter(r=>r.id===e)[0];this._surveyManager.canRenderSurvey(i)})}renderSurvey(e,n){Pt(this._surveyManager)?J.warn(Qd,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(i=>{var r=i.filter(s=>s.id===e)[0];this._surveyManager.renderSurvey(r,ke==null?void 0:ke.querySelector(n))})}}class _U{constructor(e){var n,i;ye(this,"serverLimits",{}),ye(this,"lastEventRateLimited",!1),ye(this,"checkForLimiting",r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{J.info("[RateLimiter] ".concat(o||"events"," is quota limited.")),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void J.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(o==null?void 0:o.message,'"'),{text:s})}}),this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)===null||n===void 0?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)===null||i===void 0?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(){var e,n,i,r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],s=new Date().getTime(),o=(e=(n=this.instance.persistence)===null||n===void 0?void 0:n.get_property($1))!==null&&e!==void 0?e:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||r||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||r||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(i=this.instance.persistence)===null||i===void 0||i.set_property($1,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}var kU=()=>le({initialPathName:(Ai==null?void 0:Ai.pathname)||"",referringDomain:tn.referringDomain()},tn.campaignParams());class CU{constructor(e,n,i){ye(this,"_onSessionIdCallback",r=>{var s=this._getStoredProps();if(!s||s.sessionId!==r){var o={sessionId:r,props:this._sessionSourceParamGenerator()};this._persistence.register({[F1]:o})}}),this._sessionIdManager=e,this._persistence=n,this._sessionSourceParamGenerator=i||kU,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}_getStoredProps(){return this._persistence.props[F1]}getSessionProps(){var e,n=(e=this._getStoredProps())===null||e===void 0?void 0:e.props;return n?{$client_session_initial_referring_host:n.referringDomain,$client_session_initial_pathname:n.initialPathName,$client_session_initial_utm_source:n.utm_source,$client_session_initial_utm_campaign:n.utm_campaign,$client_session_initial_utm_medium:n.utm_medium,$client_session_initial_utm_content:n.utm_content,$client_session_initial_utm_term:n.utm_term}:{}}}var EU=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],PP=function(t,e){if(!t)return!1;var n=t.toLowerCase();return EU.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},cI=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&PP(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>PP(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver};class dI{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}}var Sm="[Dead Clicks]",AU=()=>!0,PU=t=>{var e,n=!((e=t.instance.persistence)===null||e===void 0||!e.get_property(gO)),i=t.instance.config.capture_dead_clicks;return eu(i)?i:n};class hI{get lazyLoadedDeadClicksAutocapture(){return this._lazyLoadedDeadClicksAutocapture}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}afterDecideResponse(e){this.instance.persistence&&this.instance.persistence.register({[gO]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.loadScript(()=>{this.start()})}loadScript(e){var n,i,r;(n=Ke.__PosthogExtensions__)!==null&&n!==void 0&&n.initDeadClicksAutocapture&&e(),(i=Ke.__PosthogExtensions__)===null||i===void 0||(r=i.loadExternalDependency)===null||r===void 0||r.call(i,this.instance,"dead-clicks-autocapture",s=>{s?J.error(Sm+" failed to load script",s):e()})}start(){var e;if(ke){if(!this._lazyLoadedDeadClicksAutocapture&&(e=Ke.__PosthogExtensions__)!==null&&e!==void 0&&e.initDeadClicksAutocapture){var n=on(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this._lazyLoadedDeadClicksAutocapture=Ke.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this._lazyLoadedDeadClicksAutocapture.start(ke),J.info("".concat(Sm," starting..."))}}else J.error(Sm+" `document` not found. Cannot start.")}stop(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,J.info("".concat(Sm," stopping...")))}}class TU{constructor(e){var n;ye(this,"rageclicks",new dI),ye(this,"_enabledServerSide",!1),ye(this,"_initialized",!1),ye(this,"_flushInterval",null),this.instance=e,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[I1]),U==null||U.addEventListener("beforeunload",()=>{this.flush()})}get flushIntervalMilliseconds(){var e=5e3;return on(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return Oe(this.instance.config.capture_heatmaps)?Oe(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this._initialized)return;J.info("[heatmaps] starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this._flushInterval)!==null&&e!==void 0?e:void 0),(n=this.deadClicksCapture)===null||n===void 0||n.stop(),this.getAndClearBuffer()}}afterDecideResponse(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[I1]:n}),this._enabledServerSide=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.buffer;return this.buffer=void 0,e}_onDeadClick(e){this._onClick(e.originalEvent,"deadclick")}_setupListeners(){U&&ke&&(Po(ke,"click",e=>this._onClick(e||(U==null?void 0:U.event)),!1,!0),Po(ke,"mousemove",e=>this._onMouseMove(e||(U==null?void 0:U.event)),!1,!0),this.deadClicksCapture=new hI(this.instance,AU,this._onDeadClick.bind(this)),this.deadClicksCapture.startIfEnabled(),this._initialized=!0)}_getProperties(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,u){for(var c=a;c&&s0(c)&&!Ba(c,"body");){if(c===u)return!1;if(tt(l,U==null?void 0:U.getComputedStyle(c).position))return!0;c=FO(c)}return!1}(jO(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}_onClick(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"click";if(!lP(e.target)){var r=this._getProperties(e,i);(n=this.rageclicks)!==null&&n!==void 0&&n.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._capture(le(le({},r),{},{type:"rageclick"})),this._capture(r)}}_onMouseMove(e){lP(e.target)||(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout(()=>{this._capture(this._getProperties(e,"mousemove"))},500))}_capture(e){if(U){var n=U.location.href;this.buffer=this.buffer||{},this.buffer[n]||(this.buffer[n]=[]),this.buffer[n].push(e)}}flush(){this.buffer&&!cc(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class RU{constructor(e){ye(this,"_updateScrollData",()=>{var n,i,r,s;this.context||(this.context={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,u=a+((o==null?void 0:o.clientHeight)||0),c=(o==null?void 0:o.scrollHeight)||0;this.context.lastScrollY=Math.ceil(a),this.context.maxScrollY=Math.max(a,(n=this.context.maxScrollY)!==null&&n!==void 0?n:0),this.context.maxScrollHeight=Math.max(l,(i=this.context.maxScrollHeight)!==null&&i!==void 0?i:0),this.context.lastContentY=u,this.context.maxContentY=Math.max(u,(r=this.context.maxContentY)!==null&&r!==void 0?r:0),this.context.maxContentHeight=Math.max(c,(s=this.context.maxContentHeight)!==null&&s!==void 0?s:0)}),this.instance=e}getContext(){return this.context}resetContext(){var e=this.context;return setTimeout(this._updateScrollData,0),e}startMeasuringScrollPosition(){U==null||U.addEventListener("scroll",this._updateScrollData,!0),U==null||U.addEventListener("scrollend",this._updateScrollData,!0),U==null||U.addEventListener("resize",this._updateScrollData)}scrollElement(){if(!this.instance.config.scroll_root_selector)return U==null?void 0:U.document.documentElement;var e=Jt(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector];for(var n of e){var i=U==null?void 0:U.document.querySelector(n);if(i)return i}}scrollY(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return U&&(U.scrollY||U.pageYOffset||U.document.documentElement.scrollTop)||0}scrollX(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return U&&(U.scrollX||U.pageXOffset||U.document.documentElement.scrollLeft)||0}}function jw(t,e){return e.length>t?e.slice(0,t)+"...":e}function NU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!s0(e));return e}function MU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};X1.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=jw(1024,UO(t)):s.$el_text=jw(1024,o0(t)));var o=Cv(t);o.length>0&&(s.classes=o.filter(function(c){return c!==""})),_t(t.attributes,function(c){var d;if((!$O(t)||["name","id","class","aria-label"].indexOf(c.name)!==-1)&&(i==null||!i.includes(c.name))&&!e&&ud(c.value)&&(d=c.name,!Zn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var h=c.value;c.name==="class"&&(h=hk(h).join(" ")),s["attr__"+c.name]=jw(1024,h)}});for(var a=1,l=1,u=t;u=NU(u);)a++,u.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function OU(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,u=[t],c=t;c.parentNode&&!Ba(c,"body");)DO(c.parentNode)?(u.push(c.parentNode.host),c=c.parentNode.host):(u.push(c.parentNode),c=c.parentNode);var d,h=[],f={},p=!1,g=!1;if(_t(u,_=>{var k=q1(_);_.tagName.toLowerCase()==="a"&&(p=_.getAttribute("href"),p=k&&p&&ud(p)&&p),tt(Cv(_),"ph-no-capture")&&(g=!0),h.push(MU(_,s,o,a));var C=function(E){if(!q1(E))return{};var P={};return _t(E.attributes,function(N){if(N.name&&N.name.indexOf("data-ph-capture-attribute")===0){var D=N.name.replace("data-ph-capture-attribute-",""),L=N.value;D&&L&&ud(L)&&(P[D]=L)}}),P}(_);ci(f,C)}),g)return{props:{},explicitNoCapture:g};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?h[0].$el_text=UO(t):h[0].$el_text=o0(t)),p){var b,v;h[0].attr__href=p;var y=(b=Ic(p))===null||b===void 0?void 0:b.host,w=U==null||(v=U.location)===null||v===void 0?void 0:v.host;y&&w&&y!==w&&(d=p)}return{props:ci({$event_type:r.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:F6(h)},(n=h[0])!==null&&n!==void 0&&n.$el_text?{$el_text:(i=h[0])===null||i===void 0?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},f)}}class IU{constructor(e){ye(this,"_initialized",!1),ye(this,"_isDisabledServerSide",null),ye(this,"rageclicks",new dI),ye(this,"_elementsChainAsString",!1),this.instance=e,this._elementSelectors=null}get config(){var e,n,i=on(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)===null||e===void 0?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)===null||n===void 0?void 0:n.map(r=>new RegExp(r)),i}_addDomEventHandlers(){if(this.isBrowserSupported()){if(U&&ke){var e=i=>{i=i||(U==null?void 0:U.event);try{this._captureEvent(i)}catch(r){J.error("Failed to capture event",r)}},n=i=>{i=i||(U==null?void 0:U.event),this._captureEvent(i,Aw)};Po(ke,"submit",e,!1,!0),Po(ke,"change",e,!1,!0),Po(ke,"click",e,!1,!0),this.config.capture_copied_text&&(Po(ke,"copy",n,!1,!0),Po(ke,"cut",n,!1,!0))}}else J.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}afterDecideResponse(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[WA]:!!e.autocapture_opt_out}),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this._elementSelectors=e}getElementSelectors(e){var n,i=[];return(n=this._elementSelectors)===null||n===void 0||n.forEach(r=>{var s=ke==null?void 0:ke.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)===null||e===void 0?void 0:e.props[WA],r=this._isDisabledServerSide;if(yl(r)&&!eu(i)&&!this.instance.config.advanced_disable_decide)return!1;var s=(n=this._isDisabledServerSide)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}_captureEvent(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"$autocapture";if(this.isEnabled){var i,r=jO(e);IO(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!==null&&i!==void 0&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._captureEvent(e,"$rageclick");var s=n===Aw;if(r&&O6(r,e,this.config,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=OU(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===Aw){var u,c=LO(U==null||(u=U.getSelection())===null||u===void 0?void 0:u.toString()),d=e.type||"clipboard";if(!c)return!1;o.$selected_content=c,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Ar(ke==null?void 0:ke.querySelectorAll)}}class DU{constructor(e){ye(this,"_restoreXHRPatch",void 0),ye(this,"_restoreFetchPatch",void 0),ye(this,"_startCapturing",()=>{var n,i,r,s;Oe(this._restoreXHRPatch)&&((n=Ke.__PosthogExtensions__)===null||n===void 0||(i=n.tracingHeadersPatchFns)===null||i===void 0||i._patchXHR(this.instance.sessionManager)),Oe(this._restoreFetchPatch)&&((r=Ke.__PosthogExtensions__)===null||r===void 0||(s=r.tracingHeadersPatchFns)===null||s===void 0||s._patchFetch(this.instance.sessionManager))}),this.instance=e}_loadScript(e){var n,i,r;(n=Ke.__PosthogExtensions__)!==null&&n!==void 0&&n.tracingHeadersPatchFns&&e(),(i=Ke.__PosthogExtensions__)===null||i===void 0||(r=i.loadExternalDependency)===null||r===void 0||r.call(i,this.instance,"tracing-headers",s=>{if(s)return J.error("[TRACING-HEADERS] failed to load script",s);e()})}startIfEnabledOrStop(){var e,n;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):((e=this._restoreXHRPatch)===null||e===void 0||e.call(this),(n=this._restoreFetchPatch)===null||n===void 0||n.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}var la;(function(t){t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED"})(la||(la={}));class LU{constructor(e){this.instance=e}get config(){return this.instance.config}get consent(){return this.getDnt()?la.DENIED:this.storedConsent}isOptedOut(){return this.consent===la.DENIED||this.consent===la.PENDING&&this.config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.storage.set(this.storageKey,e?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}reset(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}get storageKey(){var{token:e,opt_out_capturing_cookie_prefix:n}=this.instance.config;return(n||"__ph_opt_in_out_")+e}get storedConsent(){var e=this.storage.get(this.storageKey);return e==="1"?la.GRANTED:e==="0"?la.DENIED:la.PENDING}get storage(){if(!this._storage){var e=this.config.opt_out_capturing_persistence_type;this._storage=e==="localStorage"?dn:Mo;var n=e==="localStorage"?Mo:dn;n.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut(n.get(this.storageKey)==="1"),n.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}getDnt(){return!!this.config.respect_dnt&&!!dO([Qi==null?void 0:Qi.doNotTrack,Qi==null?void 0:Qi.msDoNotTrack,Ke.doNotTrack],e=>tt([!0,1,"1","yes"],e))}}var _m="[Exception Autocapture]";class jU{constructor(e){var n;ye(this,"originalOnUnhandledRejectionHandler",void 0),ye(this,"startCapturing",()=>{var i,r,s,o;if(U&&this.isEnabled&&!this.hasHandlers&&!this.isCapturing){var a=(i=Ke.__PosthogExtensions__)===null||i===void 0||(r=i.errorWrappingFunctions)===null||r===void 0?void 0:r.wrapOnError,l=(s=Ke.__PosthogExtensions__)===null||s===void 0||(o=s.errorWrappingFunctions)===null||o===void 0?void 0:o.wrapUnhandledRejection;if(a&&l)try{this.unwrapOnError=a(this.captureException.bind(this)),this.unwrapUnhandledRejection=l(this.captureException.bind(this))}catch(u){J.error(_m+" failed to start",u),this.stopCapturing()}else J.error(_m+" failed to load error wrapping functions - cannot start")}}),this.instance=e,this.remoteEnabled=!((n=this.instance.persistence)===null||n===void 0||!n.props[GA]),this.startIfEnabled()}get isEnabled(){var e;return(e=this.remoteEnabled)!==null&&e!==void 0&&e}get isCapturing(){var e;return!(U==null||(e=U.onerror)===null||e===void 0||!e.__POSTHOG_INSTRUMENTED__)}get hasHandlers(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}startIfEnabled(){this.isEnabled&&!this.isCapturing&&(J.info(_m+" enabled, starting..."),this.loadScript(this.startCapturing))}loadScript(e){var n,i;this.hasHandlers&&e(),(n=Ke.__PosthogExtensions__)===null||n===void 0||(i=n.loadExternalDependency)===null||i===void 0||i.call(n,this.instance,"exception-autocapture",r=>{if(r)return J.error(_m+" failed to load script",r);e()})}stopCapturing(){var e,n;(e=this.unwrapOnError)===null||e===void 0||e.call(this),(n=this.unwrapUnhandledRejection)===null||n===void 0||n.call(this)}afterDecideResponse(e){var n=e.autocaptureExceptions;this.remoteEnabled=!!n||!1,this.instance.persistence&&this.instance.persistence.register({[GA]:this.remoteEnabled}),this.startIfEnabled()}captureException(e){var n=this.instance.requestRouter.endpointFor("ui");e.$exception_personURL="".concat(n,"/project/").concat(this.instance.config.token,"/person/").concat(this.instance.get_distinct_id()),this.instance.exceptions.sendExceptionEvent(e)}}var TP=9e5,jl="[Web Vitals]";class FU{constructor(e){var n;ye(this,"_enabledServerSide",!1),ye(this,"_initialized",!1),ye(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),ye(this,"_flushToCapture",()=>{clearTimeout(this._delayedFlushTimer),this.buffer.metrics.length!==0&&(this.instance.capture("$web_vitals",this.buffer.metrics.reduce((i,r)=>le(le({},i),{},{["$web_vitals_".concat(r.name,"_event")]:le({},r),["$web_vitals_".concat(r.name,"_value")]:r.value}),{})),this.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})}),ye(this,"_addToBuffer",i=>{var r,s=(r=this.instance.sessionManager)===null||r===void 0?void 0:r.checkAndGetSessionAndWindowId(!0);if(Oe(s))J.error(jl+"Could not read session ID. Dropping metrics!");else{this.buffer=this.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this._currentURL();Oe(o)||(Pt(i==null?void 0:i.name)||Pt(i==null?void 0:i.value)?J.error(jl+"Invalid metric received",i):this._maxAllowedValue&&i.value>=this._maxAllowedValue?J.error(jl+"Ignoring metric with value >= "+this._maxAllowedValue,i):(this.buffer.url!==o&&(this._flushToCapture(),this._delayedFlushTimer=setTimeout(this._flushToCapture,this.flushToCaptureTimeoutMs)),Oe(this.buffer.url)&&(this.buffer.url=o),this.buffer.firstMetricTimestamp=Oe(this.buffer.firstMetricTimestamp)?Date.now():this.buffer.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.buffer.metrics.push(le(le({},i),{},{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.buffer.metrics.length===this.allowedMetrics.length&&this._flushToCapture()))}}),ye(this,"_startCapturing",()=>{var i,r,s,o,a=Ke.__PosthogExtensions__;Oe(a)||Oe(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this._addToBuffer.bind(this)),this._initialized=!0):J.error(jl+"web vitals callbacks not loaded - not starting")}),this.instance=e,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[KA]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=on(this.instance.config.capture_performance)?(e=this.instance.config.capture_performance)===null||e===void 0?void 0:e.web_vitals_allowed_metrics:void 0;return Oe(i)?((n=this.instance.persistence)===null||n===void 0?void 0:n.props[XA])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(on(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get _maxAllowedValue(){var e=on(this.instance.config.capture_performance)&&Zi(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:TP;return 0<e&&e<=6e4?TP:e}get isEnabled(){var e=on(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return eu(e)?e:this._enabledServerSide}startIfEnabled(){this.isEnabled&&!this._initialized&&(J.info(jl+" enabled, starting..."),this.loadScript(this._startCapturing))}afterDecideResponse(e){var n=on(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=on(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this.instance.persistence&&(this.instance.persistence.register({[KA]:n}),this.instance.persistence.register({[XA]:i})),this._enabledServerSide=n,this.startIfEnabled()}loadScript(e){var n,i,r;(n=Ke.__PosthogExtensions__)!==null&&n!==void 0&&n.postHogWebVitalsCallbacks&&e(),(i=Ke.__PosthogExtensions__)===null||i===void 0||(r=i.loadExternalDependency)===null||r===void 0||r.call(i,this.instance,"web-vitals",s=>{s?J.error(jl+" failed to load script",s):e()})}_currentURL(){var e=U?U.location.href:void 0;return e||J.error(jl+"Could not determine current URL"),e}}var $U={icontains:(t,e)=>!!U&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!U&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!U&&ad(e.href,t),not_regex:(t,e)=>!!U&&!ad(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};class Sn{constructor(e){var n=this;ye(this,"getWebExperimentsAndEvaluateDisplayLogic",function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];n.getWebExperiments(r=>{Sn.logInfo("retrieved web experiments from the server"),n._flagToExperiments=new Map,r.forEach(s=>{if(s.feature_flag_key&&n._featureFlags&&n._featureFlags[s.feature_flag_key]){var o;n._flagToExperiments&&(Sn.logInfo("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n._flagToExperiments)===null||o===void 0||o.set(s.feature_flag_key,s));var a=n._featureFlags[s.feature_flag_key];a&&s.variants[a]&&n.applyTransforms(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var u=s.variants[l];Sn.matchesTestVariant(u)&&n.applyTransforms(s.name,l,u.transforms)}})},i)}),this.instance=e,this.instance.onFeatureFlags&&this.instance.onFeatureFlags(i=>{this.applyFeatureFlagChanges(i)}),this._flagToExperiments=new Map}applyFeatureFlagChanges(e){Pt(this._flagToExperiments)||this.instance.config.disable_web_experiments||(Sn.logInfo("applying feature flags",e),e.forEach(n=>{var i;if(this._flagToExperiments&&(i=this._flagToExperiments)!==null&&i!==void 0&&i.has(n)){var r,s=this.instance.getFeatureFlag(n),o=(r=this._flagToExperiments)===null||r===void 0?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.applyTransforms(o.name,s,o.variants[s].transforms)}}))}afterDecideResponse(e){this._is_bot()?Sn.logInfo("Refusing to render web experiment since the viewer is a likely bot"):(this._featureFlags=e.featureFlags,this.loadIfEnabled(),this.previewWebExperiment())}previewWebExperiment(){var e=Sn.getWindowLocation();if(e!=null&&e.search){var n=xv(e==null?void 0:e.search,"__experiment_id"),i=xv(e==null?void 0:e.search,"__experiment_variant");n&&i&&(Sn.logInfo("previewing web experiments ".concat(n," && ").concat(i)),this.getWebExperiments(r=>{this.showPreviewWebExperiment(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this.instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this.instance.config.disable_web_experiments&&!i)return e([]);var r=this.instance.get_property("$web_experiments");if(r&&!n)return e(r);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/web_experiments/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}showPreviewWebExperiment(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(Sn.logInfo("Previewing web experiment [".concat(r[0].name,"] with variant [").concat(n,"]")),this.applyTransforms(r[0].name,n,r[0].variants[n].transforms,!0))}static matchesTestVariant(e){return!Pt(e.conditions)&&Sn.matchUrlConditions(e)&&Sn.matchUTMConditions(e)}static matchUrlConditions(e){var n;if(Pt(e.conditions)||Pt((n=e.conditions)===null||n===void 0?void 0:n.url))return!0;var i,r,s,o=Sn.getWindowLocation();return!!o&&((i=e.conditions)===null||i===void 0||!i.url||$U[(r=(s=e.conditions)===null||s===void 0?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return U==null?void 0:U.location}static matchUTMConditions(e){var n;if(Pt(e.conditions)||Pt((n=e.conditions)===null||n===void 0?void 0:n.utm))return!0;var i=tn.campaignParams();if(i.utm_source){var r,s,o,a,l,u,c,d,h,f,p,g,b,v,y,w,_=(r=e.conditions)===null||r===void 0||(s=r.utm)===null||s===void 0||!s.utm_campaign||((o=e.conditions)===null||o===void 0||(a=o.utm)===null||a===void 0?void 0:a.utm_campaign)==i.utm_campaign,k=(l=e.conditions)===null||l===void 0||(u=l.utm)===null||u===void 0||!u.utm_source||((c=e.conditions)===null||c===void 0||(d=c.utm)===null||d===void 0?void 0:d.utm_source)==i.utm_source,C=(h=e.conditions)===null||h===void 0||(f=h.utm)===null||f===void 0||!f.utm_medium||((p=e.conditions)===null||p===void 0||(g=p.utm)===null||g===void 0?void 0:g.utm_medium)==i.utm_medium,E=(b=e.conditions)===null||b===void 0||(v=b.utm)===null||v===void 0||!v.utm_term||((y=e.conditions)===null||y===void 0||(w=y.utm)===null||w===void 0?void 0:w.utm_term)==i.utm_term;return _&&C&&E&&k}return!1}static logInfo(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];J.info("[WebExperiments] ".concat(e),i)}applyTransforms(e,n,i,r){var s;this._is_bot()?Sn.logInfo("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(o=>{if(o.selector){var a;Sn.logInfo("applying transform of variant ".concat(n," for experiment ").concat(e," "),o);var l,u=0,c=(a=document)===null||a===void 0?void 0:a.querySelectorAll(o.selector);c==null||c.forEach(d=>{var h=d;u+=1,o.attributes&&o.attributes.forEach(f=>{switch(f.name){case"text":h.innerText=f.value;break;case"html":h.innerHTML=f.value;break;case"cssClass":h.className=f.value;break;default:h.setAttribute(f.name,f.value)}}),o.text&&(h.innerText=o.text),o.html&&(h.parentElement?h.parentElement.innerHTML=o.html:h.innerHTML=o.html),o.css&&h.setAttribute("style",o.css)}),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_variant:n,$web_experiment_preview:r,$web_experiment_document_url:(l=Sn.getWindowLocation())===null||l===void 0?void 0:l.href,$web_experiment_elements_modified:u})}}):(Sn.logInfo("Control variants leave the page unmodified."),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_preview:r,$web_experiment_variant:n,$web_experiment_document_url:(s=Sn.getWindowLocation())===null||s===void 0?void 0:s.href,$web_experiment_elements_modified:0}))}_is_bot(){return Qi&&this.instance?cI(Qi,this.instance.config.custom_blocked_useragents):void 0}}class BU{constructor(e){this.instance=e}sendExceptionEvent(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var zU=["$set_once","$set"];class UU{constructor(e){this.instance=e,this.enabled=!!this.instance.config.opt_in_site_apps&&!this.instance.config.advanced_disable_decide,this.missedInvocations=[],this.loaded=!1,this.appsLoading=new Set}eventCollector(e,n){if(this.enabled&&!this.loaded&&n){var i=this.globalsForEvent(n);this.missedInvocations.push(i),this.missedInvocations.length>1e3&&(this.missedInvocations=this.missedInvocations.slice(10))}}init(){var e;(e=this.instance)===null||e===void 0||e._addCaptureHook(this.eventCollector.bind(this))}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var u={},c=this.instance.get_property("$groups")||[],d=this.instance.get_property("$stored_group_properties")||{};for(var[h,f]of Object.entries(d))u[h]={id:c[h],type:h,properties:f};var{$set_once:p,$set:g}=e;return{event:le(le({},pO(e,zU)),{},{properties:le(le(le({},e.properties),g?{$set:le(le({},(n=(i=e.properties)===null||i===void 0?void 0:i.$set)!==null&&n!==void 0?n:{}),g)}:{}),p?{$set_once:le(le({},(r=(s=e.properties)===null||s===void 0?void 0:s.$set_once)!==null&&r!==void 0?r:{}),p)}:{}),elements_chain:(o=(a=e.properties)===null||a===void 0?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)===null||l===void 0?void 0:l.distinct_id}),person:{properties:this.instance.get_property("$stored_person_properties")},groups:u}}afterDecideResponse(e){var n=this;Jt(e==null?void 0:e.siteApps)&&e.siteApps.length>0?this.enabled&&this.instance.config.opt_in_site_apps?function(){var i=()=>{n.appsLoading.size===0&&(n.loaded=!0,n.missedInvocations=[])},r=function(a,l){var u,c;n.appsLoading.add(a),Ke["__$$ph_site_app_".concat(a,"_posthog")]=n.instance,Ke["__$$ph_site_app_".concat(a,"_missed_invocations")]=()=>n.missedInvocations,Ke["__$$ph_site_app_".concat(a,"_callback")]=()=>{n.appsLoading.delete(a),i()},(u=Ke.__PosthogExtensions__)===null||u===void 0||(c=u.loadSiteApp)===null||c===void 0||c.call(u,n.instance,l,d=>{if(d)return n.appsLoading.delete(a),i(),J.error("Error while initializing PostHog app with config id ".concat(a),d)})};for(var{id:s,url:o}of e.siteApps)r(s,o)}():e.siteApps.length>0?(J.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.'),this.loaded=!0):this.loaded=!0:(this.loaded=!0,this.enabled=!1)}}var Kh={},ox=()=>{},ic="posthog",fI=!aU&&(kn==null?void 0:kn.indexOf("MSIE"))===-1&&(kn==null?void 0:kn.indexOf("Mozilla"))===-1,RP=()=>{var t,e,n;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(e=ke==null?void 0:ke.location,n=e==null?void 0:e.hostname,!!Zn(n)&&n.split(".").slice(-2).join(".")!=="herokuapp.com"),persistence:"localStorage+cookie",persistence_name:"",loaded:ox,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:Ai&&Zn(Ai==null?void 0:Ai.search)&&Ai.search.indexOf("__posthog_debug=true")!==-1||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:(U==null||(t=U.location)===null||t===void 0?void 0:t.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:i=>{var r="Bad HTTP status: "+i.statusCode+" "+i.text;J.error(r)},get_device_id:i=>i,_onCapture:ox,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",__add_tracing_headers:!1,before_send:void 0}},NP=t=>{var e={};Oe(t.process_person)||(e.person_profiles=t.process_person),Oe(t.xhr_headers)||(e.request_headers=t.xhr_headers),Oe(t.cookie_name)||(e.persistence_name=t.cookie_name),Oe(t.disable_cookie)||(e.disable_persistence=t.disable_cookie);var n=ci({},e,t);return Jt(t.property_blacklist)&&(Oe(t.property_denylist)?n.property_denylist=t.property_blacklist:Jt(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:J.error("Invalid value for property_denylist config: "+t.property_denylist)),n};class HU{constructor(){ye(this,"__forceAllowLocalhost",!1)}get _forceAllowLocalhost(){return this.__forceAllowLocalhost}set _forceAllowLocalhost(e){J.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class a0{constructor(){ye(this,"webPerformance",new HU),ye(this,"version",oa.LIB_VERSION),ye(this,"_internalEventEmitter",new QO),this.config=RP(),this.decideEndpointWasHit=!1,this.SentryIntegration=hU,this.sentryIntegration=e=>function(n,i){var r=JO(n,i);return{name:ZO,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._initialPersonProfilesConfig=null,this.featureFlags=new c6(this),this.toolbar=new sU(this),this.scrollManager=new RU(this),this.pageViewManager=new pU(this),this.surveys=new SU(this),this.experiments=new Sn(this),this.exceptions=new BU(this),this.rateLimiter=new _U(this),this.requestRouter=new dU(this),this.consent=new LU(this),this.people={set:(e,n,i)=>{var r=Zn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=Zn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>J.info('send "'.concat(e==null?void 0:e.event,'"'),e))}init(e,n,i){if(i&&i!==ic){var r,s=(r=Kh[i])!==null&&r!==void 0?r:new a0;return s._init(e,n,i),Kh[i]=s,Kh[ic][i]=s,s}return this._init(e,n,i)}_init(e){var n,i,r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(Oe(e)||zA(e))return J.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return J.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],s.person_profiles&&(this._initialPersonProfilesConfig=s.person_profiles),this.set_config(ci({},RP(),NP(s),{name:o,token:e})),this.config.on_xhr_error&&J.error("[posthog] on_xhr_error is deprecated. Use on_request_error instead"),this.compression=s.disable_compression?void 0:ns.GZipJS,this.persistence=new Ow(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Ow(le(le({},this.config),{},{persistence:"sessionStorage"}));var a=le({},this.persistence.props),l=le({},this.sessionPersistence.props);if(this._requestQueue=new oU(y=>this._send_retriable_request(y)),this._retryQueue=new uU(this),this.__request_queue=[],this.sessionManager=new cU(this.config,this.persistence),this.sessionPropsManager=new CU(this.sessionManager,this.persistence),new DU(this).startIfEnabledOrStop(),this.siteApps=new UU(this),(n=this.siteApps)===null||n===void 0||n.init(),this.sessionRecording=new nU(this),this.sessionRecording.startIfEnabledOrStop(),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new IU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new TU(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new FU(this),this.exceptionObserver=new jU(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new hI(this,PU),this.deadClicksAutocapture.startIfEnabled(),oa.DEBUG=oa.DEBUG||this.config.debug,oa.DEBUG&&J.info("Starting in debug mode",{this:this,config:s,thisC:le({},this.config),p:a,s:l}),this._sync_opt_out_with_persistence(),((i=s.bootstrap)===null||i===void 0?void 0:i.distinctID)!==void 0){var u,c,d=this.config.get_device_id(Ca()),h=(u=s.bootstrap)!==null&&u!==void 0&&u.isIdentifiedID?d:s.bootstrap.distinctID;this.persistence.set_property(uo,(c=s.bootstrap)!==null&&c!==void 0&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:s.bootstrap.distinctID,$device_id:h})}if(this._hasBootstrappedFeatureFlags()){var f,p,g=Object.keys(((f=s.bootstrap)===null||f===void 0?void 0:f.featureFlags)||{}).filter(y=>{var w,_;return!((w=s.bootstrap)===null||w===void 0||(_=w.featureFlags)===null||_===void 0||!_[y])}).reduce((y,w)=>{var _,k;return y[w]=((_=s.bootstrap)===null||_===void 0||(k=_.featureFlags)===null||k===void 0?void 0:k[w])||!1,y},{}),b=Object.keys(((p=s.bootstrap)===null||p===void 0?void 0:p.featureFlagPayloads)||{}).filter(y=>g[y]).reduce((y,w)=>{var _,k,C,E;return(_=s.bootstrap)!==null&&_!==void 0&&(k=_.featureFlagPayloads)!==null&&k!==void 0&&k[w]&&(y[w]=(C=s.bootstrap)===null||C===void 0||(E=C.featureFlagPayloads)===null||E===void 0?void 0:E[w]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:b})}if(!this.get_distinct_id()){var v=this.config.get_device_id(Ca());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(uo,"anonymous")}return U==null||(r=U.addEventListener)===null||r===void 0||r.call(U,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),s.segment?fU(this,()=>this._loaded()):this._loaded(),Ar(this.config._onCapture)&&this.config._onCapture!==ox&&(J.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this}_afterDecideResponse(e){var n,i,r,s,o,a,l,u,c,d;this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=tt(e.supportedCompression,ns.GZipJS)?ns.GZipJS:tt(e.supportedCompression,ns.Base64)?ns.Base64:void 0),(n=e.analytics)!==null&&n!==void 0&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:e.defaultIdentifiedOnly?"identified_only":"always"}),(i=this.siteApps)===null||i===void 0||i.afterDecideResponse(e),(r=this.sessionRecording)===null||r===void 0||r.afterDecideResponse(e),(s=this.autocapture)===null||s===void 0||s.afterDecideResponse(e),(o=this.heatmaps)===null||o===void 0||o.afterDecideResponse(e),(a=this.experiments)===null||a===void 0||a.afterDecideResponse(e),(l=this.surveys)===null||l===void 0||l.afterDecideResponse(e),(u=this.webVitalsAutocapture)===null||u===void 0||u.afterDecideResponse(e),(c=this.exceptionObserver)===null||c===void 0||c.afterDecideResponse(e),(d=this.deadClicksAutocapture)===null||d===void 0||d.afterDecideResponse(e)}_loaded(){var e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(n){J.critical("`loaded` function failed",n)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this._captureInitialPageview()},1),e||(new iU(this).call(),this.featureFlags.resetRequestQueue())}_start_queue_if_opted_in(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this._requestQueue)===null||e===void 0||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||Oc(this.__request_queue,e=>this._send_retriable_request(e)),this.__request_queue=[],this._start_queue_if_opted_in()}_handle_unload(){var e,n;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),(e=this._requestQueue)===null||e===void 0||e.unload(),(n=this._retryQueue)===null||n===void 0||n.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(fI?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Av(e.url,{ip:this.config.ip?1:0}),e.headers=le({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,(n=>{var i,r,s,o=le({},n);o.timeout=o.timeout||6e4,o.url=Av(o.url,{_:new Date().getTime().toString(),ver:oa.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"XHR",l=(r=(s=dO(Gh,u=>u.transport===a))===null||s===void 0?void 0:s.method)!==null&&r!==void 0?r:Gh[0].method;if(!l)throw new Error("No available transport method");l(o)})(le(le({},e),{},{callback:n=>{var i,r,s;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(s=this.config).on_request_error)===null||r===void 0||r.call(s,n)),(i=e.callback)===null||i===void 0||i.call(e,n)}}))))}_send_retriable_request(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}_execute_array(e){var n,i=[],r=[],s=[];Oc(e,a=>{a&&(n=a[0],Jt(n)?s.push(a):Ar(a)?a.call(this):Jt(a)&&n==="alias"?i.push(a):Jt(a)&&n.indexOf("capture")!==-1&&Ar(this[n])?s.push(a):r.push(a))});var o=function(a,l){Oc(a,function(u){if(Jt(u[0])){var c=l;_t(u,function(d){c=c[d[0]].apply(c,d.slice(1))})}else this[u[0]].apply(this,u.slice(1))},l)};o(i,this),o(r,this),o(s,this)}_hasBootstrappedFeatureFlags(){var e,n;return((e=this.config.bootstrap)===null||e===void 0?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)===null||n===void 0?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(!this.consent.isOptedOut())if(!Oe(e)&&Zn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.store_google||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l={uuid:Ca(),event:e,properties:this._calculate_event_properties(e,n||{},a)};s&&(l.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(l.$set=i==null?void 0:i.$set);var u=this._calculate_set_once_properties(i==null?void 0:i.$set_once);u&&(l.$set_once=u),(l=i6(l,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,Oe(i==null?void 0:i.timestamp)||(l.properties.$event_time_override_provided=!0,l.properties.$event_time_override_system_time=o);var c=le(le({},l.properties.$set),l.$set);if(cc(c)||this.setPersonPropertiesForFlags(c),!Pt(this.config.before_send)){var d=this._runBeforeSend(l);if(!d)return;l=d}this._internalEventEmitter.emit("eventCaptured",l);var h={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:l,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this._send_retriable_request(h):this._requestQueue.enqueue(h),l}J.critical("This capture call is ignored due to client rate limiting.")}}else J.error("No event name provided to posthog.capture")}else J.uninitializedWarning("posthog.capture")}_addCaptureHook(e){return this.on("eventCaptured",n=>e(n.event,n))}_calculate_event_properties(e,n,i){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var r=this.persistence.remove_event_timer(e),s=le({},n);if(s.token=this.config.token,e==="$snapshot"){var o=le(le({},this.persistence.properties()),this.sessionPersistence.properties());return s.distinct_id=o.distinct_id,(!Zn(s.distinct_id)&&!Zi(s.distinct_id)||zA(s.distinct_id))&&J.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var a=tn.properties();if(this.sessionManager){var{sessionId:l,windowId:u}=this.sessionManager.checkAndGetSessionAndWindowId();s.$session_id=l,s.$window_id=u}if(this.requestRouter.region===tu.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&(e==="$pageview"||e==="$pageleave"||e==="$autocapture")){var c=this.sessionPropsManager.getSessionProps();s=ci(s,c)}if(!this.config.disable_scroll_properties){var d={};e==="$pageview"?d=this.pageViewManager.doPageView(i):e==="$pageleave"&&(d=this.pageViewManager.doPageLeave(i)),s=ci(s,d)}if(e==="$pageview"&&ke&&(s.title=ke.title),!Oe(r)){var h=i.getTime()-r;s.$duration=parseFloat((h/1e3).toFixed(3))}kn&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=ci({},a,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),Jt(this.config.property_denylist)?_t(this.config.property_denylist,function(g){delete s[g]}):J.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var f=this.config.sanitize_properties;f&&(s=f(s,e));var p=this._hasPersonProcessing();return s.$process_person_profile=p,p&&this._requirePersonProcessing("_calculate_event_properties"),s}_calculate_set_once_properties(e){if(!this.persistence||!this._hasPersonProcessing())return e;var n=ci({},this.persistence.get_initial_props(),e||{}),i=this.config.sanitize_properties;return i&&(n=i(n,"$set_once")),cc(n)?void 0:n}register(e,n){var i;(i=this.persistence)===null||i===void 0||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)===null||r===void 0||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.register(e)}unregister(e){var n;(n=this.persistence)===null||n===void 0||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.unregister(e)}_register_single(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,n)}on(e,n){return this._internalEventEmitter.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)===null||i===void 0?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){this.surveys.canRenderSurvey(e)}getNextSurveyStep(e,n,i){return this.surveys.getNextSurveyStep(e,n,i)}identify(e,n,i){if(!this.__loaded||!this.persistence)return J.uninitializedWarning("posthog.identify");if(Zi(e)&&(e=e.toString(),J.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))J.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(_h)&&(this.unregister(_h),this.register({distinct_id:e}));var o=(this.persistence.get_property(uo)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(uo,"identified"),this.setPersonPropertiesForFlags(n||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(wv))}}else J.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){(e||n)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:n||{}}))}group(e,n,i){if(e&&n){if(this._requirePersonProcessing("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:le(le({},r),{},{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else J.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setPersonPropertiesForFlags")&&this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s,o;if(J.info("reset"),!this.__loaded)return J.uninitializedWarning("posthog.reset");var a=this.get_property("$device_id");this.consent.reset(),(n=this.persistence)===null||n===void 0||n.clear(),(i=this.sessionPersistence)===null||i===void 0||i.clear(),(r=this.surveys)===null||r===void 0||r.reset(),(s=this.persistence)===null||s===void 0||s.set_property(uo,"anonymous"),(o=this.sessionManager)===null||o===void 0||o.resetSessionId();var l=this.config.get_device_id(Ca());this.register_once({distinct_id:l,$device_id:e?l:a},"")}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)===null||n===void 0?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(n));if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;var a=Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0);r+="?t=".concat(a)}return r}alias(e,n){return e===this.get_property(mO)?(J.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(Oe(n)&&(n=this.get_distinct_id()),e!==n?(this._register_single(_h,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(J.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o=le({},this.config);on(e)&&(ci(this.config,NP(e)),(n=this.persistence)===null||n===void 0||n.update_config(this.config,o),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Ow(le(le({},this.config),{},{persistence:"sessionStorage"})),dn.is_supported()&&dn.get("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(oa.DEBUG=!0,J.info("set_config",{config:e,oldConfig:o,newConfig:le({},this.config)})),(i=this.sessionRecording)===null||i===void 0||i.startIfEnabledOrStop(),(r=this.autocapture)===null||r===void 0||r.startIfEnabled(),(s=this.heatmaps)===null||s===void 0||s.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)===null||r===void 0||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)===null||s===void 0||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)===null||o===void 0||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)===null||a===void 0||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)===null||l===void 0||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)===null||e===void 0||!e.started)}captureException(e,n){var i,r=new Error("PostHog syntheticException"),s=Ar((i=Ke.__PosthogExtensions__)===null||i===void 0?void 0:i.parseErrorAsProperties)?Ke.__PosthogExtensions__.parseErrorAsProperties([e.message,void 0,void 0,void 0,e],{syntheticException:r}):le({$exception_level:"error",$exception_list:[{type:e.name,value:e.message,mechanism:{handled:!0,synthetic:!1}}]},n);this.exceptions.sendExceptionEvent(s)}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)===null||n===void 0?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)===null||n===void 0?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:ic;return n!==ic&&(n=ic+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)===null||e===void 0?void 0:e.get_property(uo))==="identified"||((n=this.sessionPersistence)===null||n===void 0?void 0:n.get_property(uo))==="identified"}_hasPersonProcessing(){var e,n,i,r;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&cc(this.getGroups())&&((e=this.persistence)===null||e===void 0||(n=e.props)===null||n===void 0||!n[_h])&&((i=this.persistence)===null||i===void 0||(r=i.props)===null||r===void 0||!r[bv]))}_shouldCapturePageleave(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&this.config.capture_pageview}createPersonProfile(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}_requirePersonProcessing(e){return this.config.person_profiles==="never"?(J.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(bv,!0),!0)}_sync_opt_out_with_persistence(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)===null||e===void 0?void 0:e.disabled)!==a&&((i=this.persistence)===null||i===void 0||i.set_disabled(a)),((n=this.sessionPersistence)===null||n===void 0?void 0:n.disabled)!==a&&((r=this.sessionPersistence)===null||r===void 0||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(Oe(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}opt_out_capturing(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._sync_opt_out_with_persistence()}_is_bot(){return Qi?cI(Qi,this.config.custom_blocked_useragents):void 0}_captureInitialPageview(){ke&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:ke.title},{send_instantly:!0}))}debug(e){e===!1?(U==null||U.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(U==null||U.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}_runBeforeSend(e){if(Pt(this.config.before_send))return e;var n=Jt(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),Pt(i)){var s="Event '".concat(e.event,"' was rejected in beforeSend function");return l6(e.event)?J.warn("".concat(s,". This can cause unexpected behavior.")):J.info(s),null}i.properties&&!cc(i.properties)||J.warn("Event '".concat(e.event,"' has no properties after beforeSend function, this is likely an error."))}return i}}(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=n6(t.prototype[e[n]])})(a0,["identify"]);var MP,jc=(MP=Kh[ic]=new a0,function(){function t(){t.done||(t.done=!0,fI=!1,_t(Kh,function(e){e._dom_loaded()}))}ke!=null&&ke.addEventListener&&(ke.readyState==="complete"?t():ke.addEventListener("DOMContentLoaded",t,!1)),U&&Po(U,"load",t,!0)}(),MP),VU=x.createContext({client:jc});function WU(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=x.useMemo(function(){return n&&i&&console.warn("[PostHog.js] You have provided both a client and an apiKey to PostHogProvider. The apiKey will be ignored in favour of the client."),n&&r&&console.warn("[PostHog.js] You have provided both a client and options to PostHogProvider. The options will be ignored in favour of the client."),n||(i&&(jc.__loaded&&console.warn("[PostHog.js] was already loaded elsewhere. This may cause issues."),jc.init(i,r)),jc)},[n,i]);return sn.createElement(VU.Provider,{value:{client:s}},e)}var ax={},pI={exports:{}},ur={},mI={exports:{}},gI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,F){var ne=V.length;V.push(F);e:for(;0<ne;){var Se=ne-1>>>1,Z=V[Se];if(0<r(Z,F))V[Se]=F,V[ne]=Z,ne=Se;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var F=V[0],ne=V.pop();if(ne!==F){V[0]=ne;e:for(var Se=0,Z=V.length,ue=Z>>>1;Se<ue;){var I=2*(Se+1)-1,O=V[I],B=I+1,S=V[B];if(0>r(O,ne))B<Z&&0>r(S,O)?(V[Se]=S,V[B]=ne,Se=B):(V[Se]=O,V[I]=ne,Se=I);else if(B<Z&&0>r(S,ne))V[Se]=S,V[B]=ne,Se=B;else break e}}return F}function r(V,F){var ne=V.sortIndex-F.sortIndex;return ne!==0?ne:V.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var F=n(u);F!==null;){if(F.callback===null)i(u);else if(F.startTime<=V)i(u),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(u)}}function _(V){if(g=!1,w(V),!p)if(n(l)!==null)p=!0,ee(k);else{var F=n(u);F!==null&&he(_,F.startTime-V)}}function k(V,F){p=!1,g&&(g=!1,v(P),P=-1),f=!0;var ne=h;try{for(w(F),d=n(l);d!==null&&(!(d.expirationTime>F)||V&&!L());){var Se=d.callback;if(typeof Se=="function"){d.callback=null,h=d.priorityLevel;var Z=Se(d.expirationTime<=F);F=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),w(F)}else i(l);d=n(l)}if(d!==null)var ue=!0;else{var I=n(u);I!==null&&he(_,I.startTime-F),ue=!1}return ue}finally{d=null,h=ne,f=!1}}var C=!1,E=null,P=-1,N=5,D=-1;function L(){return!(t.unstable_now()-D<N)}function $(){if(E!==null){var V=t.unstable_now();D=V;var F=!0;try{F=E(!0,V)}finally{F?G():(C=!1,E=null)}}else C=!1}var G;if(typeof y=="function")G=function(){y($)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,X=z.port2;z.port1.onmessage=$,G=function(){X.postMessage(null)}}else G=function(){b($,0)};function ee(V){E=V,C||(C=!0,G())}function he(V,F){P=b(function(){V(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,ee(k))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var ne=h;h=F;try{return V()}finally{h=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,F){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ne=h;h=V;try{return F()}finally{h=ne}},t.unstable_scheduleCallback=function(V,F,ne){var Se=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Se+ne:Se):ne=Se,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ne+Z,V={id:c++,callback:F,priorityLevel:V,startTime:ne,expirationTime:Z,sortIndex:-1},ne>Se?(V.sortIndex=ne,e(u,V),n(l)===null&&V===n(u)&&(g?(v(P),P=-1):g=!0,he(_,ne-Se))):(V.sortIndex=Z,e(l,V),p||f||(p=!0,ee(k))),V},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(V){var F=h;return function(){var ne=h;h=F;try{return V.apply(this,arguments)}finally{h=ne}}}})(gI);mI.exports=gI;var GU=mI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KU=x,ar=GU;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vI=new Set,Sf={};function Bu(t,e){hd(t,e),hd(t+"Capture",e)}function hd(t,e){for(Sf[t]=e,t=0;t<e.length;t++)vI.add(e[t])}var Lo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lx=Object.prototype.hasOwnProperty,XU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OP={},IP={};function qU(t){return lx.call(IP,t)?!0:lx.call(OP,t)?!1:XU.test(t)?IP[t]=!0:(OP[t]=!0,!1)}function YU(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ZU(t,e,n,i){if(e===null||typeof e>"u"||YU(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yi(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hn[t]=new yi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hn[e]=new yi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hn[t]=new yi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hn[t]=new yi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hn[t]=new yi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hn[t]=new yi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hn[t]=new yi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hn[t]=new yi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hn[t]=new yi(t,5,!1,t.toLowerCase(),null,!1,!1)});var yk=/[\-:]([a-z])/g;function wk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yk,wk);Hn[e]=new yi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yk,wk);Hn[e]=new yi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yk,wk);Hn[e]=new yi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hn[t]=new yi(t,1,!1,t.toLowerCase(),null,!1,!1)});Hn.xlinkHref=new yi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hn[t]=new yi(t,1,!1,t.toLowerCase(),null,!0,!0)});function bk(t,e,n,i){var r=Hn.hasOwnProperty(e)?Hn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZU(e,n,r,i)&&(n=null),i||r===null?qU(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Ko=KU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,km=Symbol.for("react.element"),fc=Symbol.for("react.portal"),pc=Symbol.for("react.fragment"),xk=Symbol.for("react.strict_mode"),ux=Symbol.for("react.profiler"),yI=Symbol.for("react.provider"),wI=Symbol.for("react.context"),Sk=Symbol.for("react.forward_ref"),cx=Symbol.for("react.suspense"),dx=Symbol.for("react.suspense_list"),_k=Symbol.for("react.memo"),ua=Symbol.for("react.lazy"),bI=Symbol.for("react.offscreen"),DP=Symbol.iterator;function eh(t){return t===null||typeof t!="object"?null:(t=DP&&t[DP]||t["@@iterator"],typeof t=="function"?t:null)}var Kt=Object.assign,Fw;function Ah(t){if(Fw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fw=e&&e[1]||""}return`
`+Fw+t}var $w=!1;function Bw(t,e){if(!t||$w)return"";$w=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{$w=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ah(t):""}function JU(t){switch(t.tag){case 5:return Ah(t.type);case 16:return Ah("Lazy");case 13:return Ah("Suspense");case 19:return Ah("SuspenseList");case 0:case 2:case 15:return t=Bw(t.type,!1),t;case 11:return t=Bw(t.type.render,!1),t;case 1:return t=Bw(t.type,!0),t;default:return""}}function hx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pc:return"Fragment";case fc:return"Portal";case ux:return"Profiler";case xk:return"StrictMode";case cx:return"Suspense";case dx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wI:return(t.displayName||"Context")+".Consumer";case yI:return(t._context.displayName||"Context")+".Provider";case Sk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _k:return e=t.displayName||null,e!==null?e:hx(t.type)||"Memo";case ua:e=t._payload,t=t._init;try{return hx(t(e))}catch{}}return null}function QU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hx(e);case 8:return e===xk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ja(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function e9(t){var e=xI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cm(t){t._valueTracker||(t._valueTracker=e9(t))}function SI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=xI(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Rv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fx(t,e){var n=e.checked;return Kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function LP(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ja(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _I(t,e){e=e.checked,e!=null&&bk(t,"checked",e,!1)}function px(t,e){_I(t,e);var n=Ja(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mx(t,e.type,n):e.hasOwnProperty("defaultValue")&&mx(t,e.type,Ja(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mx(t,e,n){(e!=="number"||Rv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ph=Array.isArray;function Fc(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ja(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function gx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function FP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(Ph(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ja(n)}}function kI(t,e){var n=Ja(e.value),i=Ja(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function $P(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Em,EI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Em=Em||document.createElement("div"),Em.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Em.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _f(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},t9=["Webkit","ms","Moz","O"];Object.keys(Xh).forEach(function(t){t9.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xh[e]=Xh[t]})});function AI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xh.hasOwnProperty(t)&&Xh[t]?(""+e).trim():e+"px"}function PI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=AI(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var n9=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yx(t,e){if(e){if(n9[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function wx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bx=null;function kk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xx=null,$c=null,Bc=null;function BP(t){if(t=Lp(t)){if(typeof xx!="function")throw Error(se(280));var e=t.stateNode;e&&(e=h0(e),xx(t.stateNode,t.type,e))}}function TI(t){$c?Bc?Bc.push(t):Bc=[t]:$c=t}function RI(){if($c){var t=$c,e=Bc;if(Bc=$c=null,BP(t),e)for(t=0;t<e.length;t++)BP(e[t])}}function NI(t,e){return t(e)}function MI(){}var zw=!1;function OI(t,e,n){if(zw)return t(e,n);zw=!0;try{return NI(t,e,n)}finally{zw=!1,($c!==null||Bc!==null)&&(MI(),RI())}}function kf(t,e){var n=t.stateNode;if(n===null)return null;var i=h0(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var Sx=!1;if(Lo)try{var th={};Object.defineProperty(th,"passive",{get:function(){Sx=!0}}),window.addEventListener("test",th,th),window.removeEventListener("test",th,th)}catch{Sx=!1}function i9(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var qh=!1,Nv=null,Mv=!1,_x=null,r9={onError:function(t){qh=!0,Nv=t}};function s9(t,e,n,i,r,s,o,a,l){qh=!1,Nv=null,i9.apply(r9,arguments)}function o9(t,e,n,i,r,s,o,a,l){if(s9.apply(this,arguments),qh){if(qh){var u=Nv;qh=!1,Nv=null}else throw Error(se(198));Mv||(Mv=!0,_x=u)}}function zu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function II(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zP(t){if(zu(t)!==t)throw Error(se(188))}function a9(t){var e=t.alternate;if(!e){if(e=zu(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return zP(r),t;if(s===i)return zP(r),e;s=s.sibling}throw Error(se(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(se(189))}}if(n.alternate!==i)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function DI(t){return t=a9(t),t!==null?LI(t):null}function LI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LI(t);if(e!==null)return e;t=t.sibling}return null}var jI=ar.unstable_scheduleCallback,UP=ar.unstable_cancelCallback,l9=ar.unstable_shouldYield,u9=ar.unstable_requestPaint,Qt=ar.unstable_now,c9=ar.unstable_getCurrentPriorityLevel,Ck=ar.unstable_ImmediatePriority,FI=ar.unstable_UserBlockingPriority,Ov=ar.unstable_NormalPriority,d9=ar.unstable_LowPriority,$I=ar.unstable_IdlePriority,l0=null,Ks=null;function h9(t){if(Ks&&typeof Ks.onCommitFiberRoot=="function")try{Ks.onCommitFiberRoot(l0,t,void 0,(t.current.flags&128)===128)}catch{}}var us=Math.clz32?Math.clz32:m9,f9=Math.log,p9=Math.LN2;function m9(t){return t>>>=0,t===0?32:31-(f9(t)/p9|0)|0}var Am=64,Pm=4194304;function Th(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Iv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Th(a):(s&=o,s!==0&&(i=Th(s)))}else o=n&~r,o!==0?i=Th(o):s!==0&&(i=Th(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-us(e),r=1<<n,i|=t[n],e&=~r;return i}function g9(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v9(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-us(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=g9(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function kx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BI(){var t=Am;return Am<<=1,!(Am&4194240)&&(Am=64),t}function Uw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ip(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-us(e),t[e]=n}function y9(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-us(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Ek(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-us(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var gt=0;function zI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UI,Ak,HI,VI,WI,Cx=!1,Tm=[],za=null,Ua=null,Ha=null,Cf=new Map,Ef=new Map,ga=[],w9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HP(t,e){switch(t){case"focusin":case"focusout":za=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":Cf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ef.delete(e.pointerId)}}function nh(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Lp(e),e!==null&&Ak(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function b9(t,e,n,i,r){switch(e){case"focusin":return za=nh(za,t,e,n,i,r),!0;case"dragenter":return Ua=nh(Ua,t,e,n,i,r),!0;case"mouseover":return Ha=nh(Ha,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Cf.set(s,nh(Cf.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ef.set(s,nh(Ef.get(s)||null,t,e,n,i,r)),!0}return!1}function GI(t){var e=nu(t.target);if(e!==null){var n=zu(e);if(n!==null){if(e=n.tag,e===13){if(e=II(n),e!==null){t.blockedOn=e,WI(t.priority,function(){HI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ex(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);bx=i,n.target.dispatchEvent(i),bx=null}else return e=Lp(n),e!==null&&Ak(e),t.blockedOn=n,!1;e.shift()}return!0}function VP(t,e,n){Lg(t)&&n.delete(e)}function x9(){Cx=!1,za!==null&&Lg(za)&&(za=null),Ua!==null&&Lg(Ua)&&(Ua=null),Ha!==null&&Lg(Ha)&&(Ha=null),Cf.forEach(VP),Ef.forEach(VP)}function ih(t,e){t.blockedOn===e&&(t.blockedOn=null,Cx||(Cx=!0,ar.unstable_scheduleCallback(ar.unstable_NormalPriority,x9)))}function Af(t){function e(r){return ih(r,t)}if(0<Tm.length){ih(Tm[0],t);for(var n=1;n<Tm.length;n++){var i=Tm[n];i.blockedOn===t&&(i.blockedOn=null)}}for(za!==null&&ih(za,t),Ua!==null&&ih(Ua,t),Ha!==null&&ih(Ha,t),Cf.forEach(e),Ef.forEach(e),n=0;n<ga.length;n++)i=ga[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ga.length&&(n=ga[0],n.blockedOn===null);)GI(n),n.blockedOn===null&&ga.shift()}var zc=Ko.ReactCurrentBatchConfig,Dv=!0;function S9(t,e,n,i){var r=gt,s=zc.transition;zc.transition=null;try{gt=1,Pk(t,e,n,i)}finally{gt=r,zc.transition=s}}function _9(t,e,n,i){var r=gt,s=zc.transition;zc.transition=null;try{gt=4,Pk(t,e,n,i)}finally{gt=r,zc.transition=s}}function Pk(t,e,n,i){if(Dv){var r=Ex(t,e,n,i);if(r===null)Jw(t,e,i,Lv,n),HP(t,i);else if(b9(r,t,e,n,i))i.stopPropagation();else if(HP(t,i),e&4&&-1<w9.indexOf(t)){for(;r!==null;){var s=Lp(r);if(s!==null&&UI(s),s=Ex(t,e,n,i),s===null&&Jw(t,e,i,Lv,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Jw(t,e,i,null,n)}}var Lv=null;function Ex(t,e,n,i){if(Lv=null,t=kk(i),t=nu(t),t!==null)if(e=zu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=II(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Lv=t,null}function KI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c9()){case Ck:return 1;case FI:return 4;case Ov:case d9:return 16;case $I:return 536870912;default:return 16}default:return 16}}var Aa=null,Tk=null,jg=null;function XI(){if(jg)return jg;var t,e=Tk,n=e.length,i,r="value"in Aa?Aa.value:Aa.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return jg=r.slice(t,1<i?1-i:void 0)}function Fg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rm(){return!0}function WP(){return!1}function cr(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rm:WP,this.isPropagationStopped=WP,this}return Kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rm)},persist:function(){},isPersistent:Rm}),e}var Fd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rk=cr(Fd),Dp=Kt({},Fd,{view:0,detail:0}),k9=cr(Dp),Hw,Vw,rh,u0=Kt({},Dp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rh&&(rh&&t.type==="mousemove"?(Hw=t.screenX-rh.screenX,Vw=t.screenY-rh.screenY):Vw=Hw=0,rh=t),Hw)},movementY:function(t){return"movementY"in t?t.movementY:Vw}}),GP=cr(u0),C9=Kt({},u0,{dataTransfer:0}),E9=cr(C9),A9=Kt({},Dp,{relatedTarget:0}),Ww=cr(A9),P9=Kt({},Fd,{animationName:0,elapsedTime:0,pseudoElement:0}),T9=cr(P9),R9=Kt({},Fd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),N9=cr(R9),M9=Kt({},Fd,{data:0}),KP=cr(M9),O9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=D9[t])?!!e[t]:!1}function Nk(){return L9}var j9=Kt({},Dp,{key:function(t){if(t.key){var e=O9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?I9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nk,charCode:function(t){return t.type==="keypress"?Fg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),F9=cr(j9),$9=Kt({},u0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),XP=cr($9),B9=Kt({},Dp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nk}),z9=cr(B9),U9=Kt({},Fd,{propertyName:0,elapsedTime:0,pseudoElement:0}),H9=cr(U9),V9=Kt({},u0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),W9=cr(V9),G9=[9,13,27,32],Mk=Lo&&"CompositionEvent"in window,Yh=null;Lo&&"documentMode"in document&&(Yh=document.documentMode);var K9=Lo&&"TextEvent"in window&&!Yh,qI=Lo&&(!Mk||Yh&&8<Yh&&11>=Yh),qP=" ",YP=!1;function YI(t,e){switch(t){case"keyup":return G9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mc=!1;function X9(t,e){switch(t){case"compositionend":return ZI(e);case"keypress":return e.which!==32?null:(YP=!0,qP);case"textInput":return t=e.data,t===qP&&YP?null:t;default:return null}}function q9(t,e){if(mc)return t==="compositionend"||!Mk&&YI(t,e)?(t=XI(),jg=Tk=Aa=null,mc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qI&&e.locale!=="ko"?null:e.data;default:return null}}var Y9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ZP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Y9[t.type]:e==="textarea"}function JI(t,e,n,i){TI(i),e=jv(e,"onChange"),0<e.length&&(n=new Rk("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Zh=null,Pf=null;function Z9(t){uD(t,0)}function c0(t){var e=yc(t);if(SI(e))return t}function J9(t,e){if(t==="change")return e}var QI=!1;if(Lo){var Gw;if(Lo){var Kw="oninput"in document;if(!Kw){var JP=document.createElement("div");JP.setAttribute("oninput","return;"),Kw=typeof JP.oninput=="function"}Gw=Kw}else Gw=!1;QI=Gw&&(!document.documentMode||9<document.documentMode)}function QP(){Zh&&(Zh.detachEvent("onpropertychange",eD),Pf=Zh=null)}function eD(t){if(t.propertyName==="value"&&c0(Pf)){var e=[];JI(e,Pf,t,kk(t)),OI(Z9,e)}}function Q9(t,e,n){t==="focusin"?(QP(),Zh=e,Pf=n,Zh.attachEvent("onpropertychange",eD)):t==="focusout"&&QP()}function eH(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return c0(Pf)}function tH(t,e){if(t==="click")return c0(e)}function nH(t,e){if(t==="input"||t==="change")return c0(e)}function iH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hs=typeof Object.is=="function"?Object.is:iH;function Tf(t,e){if(hs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!lx.call(e,r)||!hs(t[r],e[r]))return!1}return!0}function e2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function t2(t,e){var n=e2(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=e2(n)}}function tD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nD(){for(var t=window,e=Rv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rv(t.document)}return e}function Ok(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rH(t){var e=nD(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tD(n.ownerDocument.documentElement,n)){if(i!==null&&Ok(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=t2(n,s);var o=t2(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sH=Lo&&"documentMode"in document&&11>=document.documentMode,gc=null,Ax=null,Jh=null,Px=!1;function n2(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Px||gc==null||gc!==Rv(i)||(i=gc,"selectionStart"in i&&Ok(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Jh&&Tf(Jh,i)||(Jh=i,i=jv(Ax,"onSelect"),0<i.length&&(e=new Rk("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=gc)))}function Nm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vc={animationend:Nm("Animation","AnimationEnd"),animationiteration:Nm("Animation","AnimationIteration"),animationstart:Nm("Animation","AnimationStart"),transitionend:Nm("Transition","TransitionEnd")},Xw={},iD={};Lo&&(iD=document.createElement("div").style,"AnimationEvent"in window||(delete vc.animationend.animation,delete vc.animationiteration.animation,delete vc.animationstart.animation),"TransitionEvent"in window||delete vc.transitionend.transition);function d0(t){if(Xw[t])return Xw[t];if(!vc[t])return t;var e=vc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iD)return Xw[t]=e[n];return t}var rD=d0("animationend"),sD=d0("animationiteration"),oD=d0("animationstart"),aD=d0("transitionend"),lD=new Map,i2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wl(t,e){lD.set(t,e),Bu(e,[t])}for(var qw=0;qw<i2.length;qw++){var Yw=i2[qw],oH=Yw.toLowerCase(),aH=Yw[0].toUpperCase()+Yw.slice(1);wl(oH,"on"+aH)}wl(rD,"onAnimationEnd");wl(sD,"onAnimationIteration");wl(oD,"onAnimationStart");wl("dblclick","onDoubleClick");wl("focusin","onFocus");wl("focusout","onBlur");wl(aD,"onTransitionEnd");hd("onMouseEnter",["mouseout","mouseover"]);hd("onMouseLeave",["mouseout","mouseover"]);hd("onPointerEnter",["pointerout","pointerover"]);hd("onPointerLeave",["pointerout","pointerover"]);Bu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rh));function r2(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,o9(i,e,void 0,t),t.currentTarget=null}function uD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;r2(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;r2(r,a,u),s=l}}}if(Mv)throw t=_x,Mv=!1,_x=null,t}function Nt(t,e){var n=e[Ox];n===void 0&&(n=e[Ox]=new Set);var i=t+"__bubble";n.has(i)||(cD(e,t,2,!1),n.add(i))}function Zw(t,e,n){var i=0;e&&(i|=4),cD(n,t,i,e)}var Mm="_reactListening"+Math.random().toString(36).slice(2);function Rf(t){if(!t[Mm]){t[Mm]=!0,vI.forEach(function(n){n!=="selectionchange"&&(lH.has(n)||Zw(n,!1,t),Zw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mm]||(e[Mm]=!0,Zw("selectionchange",!1,e))}}function cD(t,e,n,i){switch(KI(e)){case 1:var r=S9;break;case 4:r=_9;break;default:r=Pk}n=r.bind(null,e,n,t),r=void 0,!Sx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Jw(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=nu(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}OI(function(){var u=s,c=kk(n),d=[];e:{var h=lD.get(t);if(h!==void 0){var f=Rk,p=t;switch(t){case"keypress":if(Fg(n)===0)break e;case"keydown":case"keyup":f=F9;break;case"focusin":p="focus",f=Ww;break;case"focusout":p="blur",f=Ww;break;case"beforeblur":case"afterblur":f=Ww;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=GP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=E9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=z9;break;case rD:case sD:case oD:f=T9;break;case aD:f=H9;break;case"scroll":f=k9;break;case"wheel":f=W9;break;case"copy":case"cut":case"paste":f=N9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=XP}var g=(e&4)!==0,b=!g&&t==="scroll",v=g?h!==null?h+"Capture":null:h;g=[];for(var y=u,w;y!==null;){w=y;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,v!==null&&(_=kf(y,v),_!=null&&g.push(Nf(y,_,w)))),b)break;y=y.return}0<g.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==bx&&(p=n.relatedTarget||n.fromElement)&&(nu(p)||p[jo]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?nu(p):null,p!==null&&(b=zu(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=GP,_="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=XP,_="onPointerLeave",v="onPointerEnter",y="pointer"),b=f==null?h:yc(f),w=p==null?h:yc(p),h=new g(_,y+"leave",f,n,c),h.target=b,h.relatedTarget=w,_=null,nu(c)===u&&(g=new g(v,y+"enter",p,n,c),g.target=w,g.relatedTarget=b,_=g),b=_,f&&p)t:{for(g=f,v=p,y=0,w=g;w;w=Gu(w))y++;for(w=0,_=v;_;_=Gu(_))w++;for(;0<y-w;)g=Gu(g),y--;for(;0<w-y;)v=Gu(v),w--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=Gu(g),v=Gu(v)}g=null}else g=null;f!==null&&s2(d,h,f,g,!1),p!==null&&b!==null&&s2(d,b,p,g,!0)}}e:{if(h=u?yc(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var k=J9;else if(ZP(h))if(QI)k=nH;else{k=eH;var C=Q9}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=tH);if(k&&(k=k(t,u))){JI(d,k,n,c);break e}C&&C(t,h,u),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&mx(h,"number",h.value)}switch(C=u?yc(u):window,t){case"focusin":(ZP(C)||C.contentEditable==="true")&&(gc=C,Ax=u,Jh=null);break;case"focusout":Jh=Ax=gc=null;break;case"mousedown":Px=!0;break;case"contextmenu":case"mouseup":case"dragend":Px=!1,n2(d,n,c);break;case"selectionchange":if(sH)break;case"keydown":case"keyup":n2(d,n,c)}var E;if(Mk)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else mc?YI(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(qI&&n.locale!=="ko"&&(mc||P!=="onCompositionStart"?P==="onCompositionEnd"&&mc&&(E=XI()):(Aa=c,Tk="value"in Aa?Aa.value:Aa.textContent,mc=!0)),C=jv(u,P),0<C.length&&(P=new KP(P,t,null,n,c),d.push({event:P,listeners:C}),E?P.data=E:(E=ZI(n),E!==null&&(P.data=E)))),(E=K9?X9(t,n):q9(t,n))&&(u=jv(u,"onBeforeInput"),0<u.length&&(c=new KP("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=E))}uD(d,e)})}function Nf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=kf(t,n),s!=null&&i.unshift(Nf(t,s,r)),s=kf(t,e),s!=null&&i.push(Nf(t,s,r))),t=t.return}return i}function Gu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function s2(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=kf(n,s),l!=null&&o.unshift(Nf(n,l,a))):r||(l=kf(n,s),l!=null&&o.push(Nf(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uH=/\r\n?/g,cH=/\u0000|\uFFFD/g;function o2(t){return(typeof t=="string"?t:""+t).replace(uH,`
`).replace(cH,"")}function Om(t,e,n){if(e=o2(e),o2(t)!==e&&n)throw Error(se(425))}function Fv(){}var Tx=null,Rx=null;function Nx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mx=typeof setTimeout=="function"?setTimeout:void 0,dH=typeof clearTimeout=="function"?clearTimeout:void 0,a2=typeof Promise=="function"?Promise:void 0,hH=typeof queueMicrotask=="function"?queueMicrotask:typeof a2<"u"?function(t){return a2.resolve(null).then(t).catch(fH)}:Mx;function fH(t){setTimeout(function(){throw t})}function Qw(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Af(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Af(e)}function Va(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function l2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $d=Math.random().toString(36).slice(2),Ls="__reactFiber$"+$d,Mf="__reactProps$"+$d,jo="__reactContainer$"+$d,Ox="__reactEvents$"+$d,pH="__reactListeners$"+$d,mH="__reactHandles$"+$d;function nu(t){var e=t[Ls];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jo]||n[Ls]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=l2(t);t!==null;){if(n=t[Ls])return n;t=l2(t)}return e}t=n,n=t.parentNode}return null}function Lp(t){return t=t[Ls]||t[jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function h0(t){return t[Mf]||null}var Ix=[],wc=-1;function bl(t){return{current:t}}function It(t){0>wc||(t.current=Ix[wc],Ix[wc]=null,wc--)}function Tt(t,e){wc++,Ix[wc]=t.current,t.current=e}var Qa={},Jn=bl(Qa),ji=bl(!1),yu=Qa;function fd(t,e){var n=t.type.contextTypes;if(!n)return Qa;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Fi(t){return t=t.childContextTypes,t!=null}function $v(){It(ji),It(Jn)}function u2(t,e,n){if(Jn.current!==Qa)throw Error(se(168));Tt(Jn,e),Tt(ji,n)}function dD(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(se(108,QU(t)||"Unknown",r));return Kt({},n,i)}function Bv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qa,yu=Jn.current,Tt(Jn,t),Tt(ji,ji.current),!0}function c2(t,e,n){var i=t.stateNode;if(!i)throw Error(se(169));n?(t=dD(t,e,yu),i.__reactInternalMemoizedMergedChildContext=t,It(ji),It(Jn),Tt(Jn,t)):It(ji),Tt(ji,n)}var mo=null,f0=!1,eb=!1;function hD(t){mo===null?mo=[t]:mo.push(t)}function gH(t){f0=!0,hD(t)}function xl(){if(!eb&&mo!==null){eb=!0;var t=0,e=gt;try{var n=mo;for(gt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}mo=null,f0=!1}catch(r){throw mo!==null&&(mo=mo.slice(t+1)),jI(Ck,xl),r}finally{gt=e,eb=!1}}return null}var bc=[],xc=0,zv=null,Uv=0,Sr=[],_r=0,wu=null,Ro=1,No="";function Ul(t,e){bc[xc++]=Uv,bc[xc++]=zv,zv=t,Uv=e}function fD(t,e,n){Sr[_r++]=Ro,Sr[_r++]=No,Sr[_r++]=wu,wu=t;var i=Ro;t=No;var r=32-us(i)-1;i&=~(1<<r),n+=1;var s=32-us(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ro=1<<32-us(e)+r|n<<r|i,No=s+t}else Ro=1<<s|n<<r|i,No=t}function Ik(t){t.return!==null&&(Ul(t,1),fD(t,1,0))}function Dk(t){for(;t===zv;)zv=bc[--xc],bc[xc]=null,Uv=bc[--xc],bc[xc]=null;for(;t===wu;)wu=Sr[--_r],Sr[_r]=null,No=Sr[--_r],Sr[_r]=null,Ro=Sr[--_r],Sr[_r]=null}var rr=null,er=null,zt=!1,es=null;function pD(t,e){var n=Pr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function d2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rr=t,er=Va(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rr=t,er=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wu!==null?{id:Ro,overflow:No}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rr=t,er=null,!0):!1;default:return!1}}function Dx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lx(t){if(zt){var e=er;if(e){var n=e;if(!d2(t,e)){if(Dx(t))throw Error(se(418));e=Va(n.nextSibling);var i=rr;e&&d2(t,e)?pD(i,n):(t.flags=t.flags&-4097|2,zt=!1,rr=t)}}else{if(Dx(t))throw Error(se(418));t.flags=t.flags&-4097|2,zt=!1,rr=t}}}function h2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rr=t}function Im(t){if(t!==rr)return!1;if(!zt)return h2(t),zt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nx(t.type,t.memoizedProps)),e&&(e=er)){if(Dx(t))throw mD(),Error(se(418));for(;e;)pD(t,e),e=Va(e.nextSibling)}if(h2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){er=Va(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}er=null}}else er=rr?Va(t.stateNode.nextSibling):null;return!0}function mD(){for(var t=er;t;)t=Va(t.nextSibling)}function pd(){er=rr=null,zt=!1}function Lk(t){es===null?es=[t]:es.push(t)}var vH=Ko.ReactCurrentBatchConfig;function sh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var i=n.stateNode}if(!i)throw Error(se(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function Dm(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function f2(t){var e=t._init;return e(t._payload)}function gD(t){function e(v,y){if(t){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=Xa(v,y),v.index=0,v.sibling=null,v}function s(v,y,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,w,_){return y===null||y.tag!==6?(y=ab(w,v.mode,_),y.return=v,y):(y=r(y,w),y.return=v,y)}function l(v,y,w,_){var k=w.type;return k===pc?c(v,y,w.props.children,_,w.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ua&&f2(k)===y.type)?(_=r(y,w.props),_.ref=sh(v,y,w),_.return=v,_):(_=Wg(w.type,w.key,w.props,null,v.mode,_),_.ref=sh(v,y,w),_.return=v,_)}function u(v,y,w,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=lb(w,v.mode,_),y.return=v,y):(y=r(y,w.children||[]),y.return=v,y)}function c(v,y,w,_,k){return y===null||y.tag!==7?(y=du(w,v.mode,_,k),y.return=v,y):(y=r(y,w),y.return=v,y)}function d(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ab(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case km:return w=Wg(y.type,y.key,y.props,null,v.mode,w),w.ref=sh(v,null,y),w.return=v,w;case fc:return y=lb(y,v.mode,w),y.return=v,y;case ua:var _=y._init;return d(v,_(y._payload),w)}if(Ph(y)||eh(y))return y=du(y,v.mode,w,null),y.return=v,y;Dm(v,y)}return null}function h(v,y,w,_){var k=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:a(v,y,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case km:return w.key===k?l(v,y,w,_):null;case fc:return w.key===k?u(v,y,w,_):null;case ua:return k=w._init,h(v,y,k(w._payload),_)}if(Ph(w)||eh(w))return k!==null?null:c(v,y,w,_,null);Dm(v,w)}return null}function f(v,y,w,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(w)||null,a(y,v,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case km:return v=v.get(_.key===null?w:_.key)||null,l(y,v,_,k);case fc:return v=v.get(_.key===null?w:_.key)||null,u(y,v,_,k);case ua:var C=_._init;return f(v,y,w,C(_._payload),k)}if(Ph(_)||eh(_))return v=v.get(w)||null,c(y,v,_,k,null);Dm(y,_)}return null}function p(v,y,w,_){for(var k=null,C=null,E=y,P=y=0,N=null;E!==null&&P<w.length;P++){E.index>P?(N=E,E=null):N=E.sibling;var D=h(v,E,w[P],_);if(D===null){E===null&&(E=N);break}t&&E&&D.alternate===null&&e(v,E),y=s(D,y,P),C===null?k=D:C.sibling=D,C=D,E=N}if(P===w.length)return n(v,E),zt&&Ul(v,P),k;if(E===null){for(;P<w.length;P++)E=d(v,w[P],_),E!==null&&(y=s(E,y,P),C===null?k=E:C.sibling=E,C=E);return zt&&Ul(v,P),k}for(E=i(v,E);P<w.length;P++)N=f(E,v,P,w[P],_),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?P:N.key),y=s(N,y,P),C===null?k=N:C.sibling=N,C=N);return t&&E.forEach(function(L){return e(v,L)}),zt&&Ul(v,P),k}function g(v,y,w,_){var k=eh(w);if(typeof k!="function")throw Error(se(150));if(w=k.call(w),w==null)throw Error(se(151));for(var C=k=null,E=y,P=y=0,N=null,D=w.next();E!==null&&!D.done;P++,D=w.next()){E.index>P?(N=E,E=null):N=E.sibling;var L=h(v,E,D.value,_);if(L===null){E===null&&(E=N);break}t&&E&&L.alternate===null&&e(v,E),y=s(L,y,P),C===null?k=L:C.sibling=L,C=L,E=N}if(D.done)return n(v,E),zt&&Ul(v,P),k;if(E===null){for(;!D.done;P++,D=w.next())D=d(v,D.value,_),D!==null&&(y=s(D,y,P),C===null?k=D:C.sibling=D,C=D);return zt&&Ul(v,P),k}for(E=i(v,E);!D.done;P++,D=w.next())D=f(E,v,P,D.value,_),D!==null&&(t&&D.alternate!==null&&E.delete(D.key===null?P:D.key),y=s(D,y,P),C===null?k=D:C.sibling=D,C=D);return t&&E.forEach(function($){return e(v,$)}),zt&&Ul(v,P),k}function b(v,y,w,_){if(typeof w=="object"&&w!==null&&w.type===pc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case km:e:{for(var k=w.key,C=y;C!==null;){if(C.key===k){if(k=w.type,k===pc){if(C.tag===7){n(v,C.sibling),y=r(C,w.props.children),y.return=v,v=y;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ua&&f2(k)===C.type){n(v,C.sibling),y=r(C,w.props),y.ref=sh(v,C,w),y.return=v,v=y;break e}n(v,C);break}else e(v,C);C=C.sibling}w.type===pc?(y=du(w.props.children,v.mode,_,w.key),y.return=v,v=y):(_=Wg(w.type,w.key,w.props,null,v.mode,_),_.ref=sh(v,y,w),_.return=v,v=_)}return o(v);case fc:e:{for(C=w.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=r(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=lb(w,v.mode,_),y.return=v,v=y}return o(v);case ua:return C=w._init,b(v,y,C(w._payload),_)}if(Ph(w))return p(v,y,w,_);if(eh(w))return g(v,y,w,_);Dm(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=r(y,w),y.return=v,v=y):(n(v,y),y=ab(w,v.mode,_),y.return=v,v=y),o(v)):n(v,y)}return b}var md=gD(!0),vD=gD(!1),Hv=bl(null),Vv=null,Sc=null,jk=null;function Fk(){jk=Sc=Vv=null}function $k(t){var e=Hv.current;It(Hv),t._currentValue=e}function jx(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Uc(t,e){Vv=t,jk=Sc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Di=!0),t.firstContext=null)}function $r(t){var e=t._currentValue;if(jk!==t)if(t={context:t,memoizedValue:e,next:null},Sc===null){if(Vv===null)throw Error(se(308));Sc=t,Vv.dependencies={lanes:0,firstContext:t}}else Sc=Sc.next=t;return e}var iu=null;function Bk(t){iu===null?iu=[t]:iu.push(t)}function yD(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Bk(e)):(n.next=r.next,r.next=n),e.interleaved=n,Fo(t,i)}function Fo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ca=!1;function zk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Oo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wa(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,dt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Fo(t,n)}return r=i.interleaved,r===null?(e.next=e,Bk(i)):(e.next=r.next,r.next=e),i.interleaved=e,Fo(t,n)}function $g(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ek(t,n)}}function p2(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wv(t,e,n,i){var r=t.updateQueue;ca=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Kt({},d,h);break e;case 2:ca=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);xu|=o,t.lanes=o,t.memoizedState=d}}function m2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(se(191,r));r.call(i)}}}var jp={},Xs=bl(jp),Of=bl(jp),If=bl(jp);function ru(t){if(t===jp)throw Error(se(174));return t}function Uk(t,e){switch(Tt(If,e),Tt(Of,t),Tt(Xs,jp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vx(e,t)}It(Xs),Tt(Xs,e)}function gd(){It(Xs),It(Of),It(If)}function bD(t){ru(If.current);var e=ru(Xs.current),n=vx(e,t.type);e!==n&&(Tt(Of,t),Tt(Xs,n))}function Hk(t){Of.current===t&&(It(Xs),It(Of))}var Vt=bl(0);function Gv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tb=[];function Vk(){for(var t=0;t<tb.length;t++)tb[t]._workInProgressVersionPrimary=null;tb.length=0}var Bg=Ko.ReactCurrentDispatcher,nb=Ko.ReactCurrentBatchConfig,bu=0,Gt=null,cn=null,Cn=null,Kv=!1,Qh=!1,Df=0,yH=0;function Wn(){throw Error(se(321))}function Wk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hs(t[n],e[n]))return!1;return!0}function Gk(t,e,n,i,r,s){if(bu=s,Gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bg.current=t===null||t.memoizedState===null?SH:_H,t=n(i,r),Qh){s=0;do{if(Qh=!1,Df=0,25<=s)throw Error(se(301));s+=1,Cn=cn=null,e.updateQueue=null,Bg.current=kH,t=n(i,r)}while(Qh)}if(Bg.current=Xv,e=cn!==null&&cn.next!==null,bu=0,Cn=cn=Gt=null,Kv=!1,e)throw Error(se(300));return t}function Kk(){var t=Df!==0;return Df=0,t}function As(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?Gt.memoizedState=Cn=t:Cn=Cn.next=t,Cn}function Br(){if(cn===null){var t=Gt.alternate;t=t!==null?t.memoizedState:null}else t=cn.next;var e=Cn===null?Gt.memoizedState:Cn.next;if(e!==null)Cn=e,cn=t;else{if(t===null)throw Error(se(310));cn=t,t={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},Cn===null?Gt.memoizedState=Cn=t:Cn=Cn.next=t}return Cn}function Lf(t,e){return typeof e=="function"?e(t):e}function ib(t){var e=Br(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var i=cn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((bu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Gt.lanes|=c,xu|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,hs(i,e.memoizedState)||(Di=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Gt.lanes|=s,xu|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rb(t){var e=Br(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);hs(s,e.memoizedState)||(Di=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function xD(){}function SD(t,e){var n=Gt,i=Br(),r=e(),s=!hs(i.memoizedState,r);if(s&&(i.memoizedState=r,Di=!0),i=i.queue,Xk(CD.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Cn!==null&&Cn.memoizedState.tag&1){if(n.flags|=2048,jf(9,kD.bind(null,n,i,r,e),void 0,null),En===null)throw Error(se(349));bu&30||_D(n,e,r)}return r}function _D(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kD(t,e,n,i){e.value=n,e.getSnapshot=i,ED(e)&&AD(t)}function CD(t,e,n){return n(function(){ED(e)&&AD(t)})}function ED(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hs(t,n)}catch{return!0}}function AD(t){var e=Fo(t,1);e!==null&&cs(e,t,1,-1)}function g2(t){var e=As();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lf,lastRenderedState:t},e.queue=t,t=t.dispatch=xH.bind(null,Gt,t),[e.memoizedState,t]}function jf(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function PD(){return Br().memoizedState}function zg(t,e,n,i){var r=As();Gt.flags|=t,r.memoizedState=jf(1|e,n,void 0,i===void 0?null:i)}function p0(t,e,n,i){var r=Br();i=i===void 0?null:i;var s=void 0;if(cn!==null){var o=cn.memoizedState;if(s=o.destroy,i!==null&&Wk(i,o.deps)){r.memoizedState=jf(e,n,s,i);return}}Gt.flags|=t,r.memoizedState=jf(1|e,n,s,i)}function v2(t,e){return zg(8390656,8,t,e)}function Xk(t,e){return p0(2048,8,t,e)}function TD(t,e){return p0(4,2,t,e)}function RD(t,e){return p0(4,4,t,e)}function ND(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function MD(t,e,n){return n=n!=null?n.concat([t]):null,p0(4,4,ND.bind(null,e,t),n)}function qk(){}function OD(t,e){var n=Br();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Wk(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function ID(t,e){var n=Br();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Wk(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function DD(t,e,n){return bu&21?(hs(n,e)||(n=BI(),Gt.lanes|=n,xu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Di=!0),t.memoizedState=n)}function wH(t,e){var n=gt;gt=n!==0&&4>n?n:4,t(!0);var i=nb.transition;nb.transition={};try{t(!1),e()}finally{gt=n,nb.transition=i}}function LD(){return Br().memoizedState}function bH(t,e,n){var i=Ka(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},jD(t))FD(e,n);else if(n=yD(t,e,n,i),n!==null){var r=fi();cs(n,t,i,r),$D(n,e,i)}}function xH(t,e,n){var i=Ka(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(jD(t))FD(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,hs(a,o)){var l=e.interleaved;l===null?(r.next=r,Bk(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=yD(t,e,r,i),n!==null&&(r=fi(),cs(n,t,i,r),$D(n,e,i))}}function jD(t){var e=t.alternate;return t===Gt||e!==null&&e===Gt}function FD(t,e){Qh=Kv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $D(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ek(t,n)}}var Xv={readContext:$r,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},SH={readContext:$r,useCallback:function(t,e){return As().memoizedState=[t,e===void 0?null:e],t},useContext:$r,useEffect:v2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zg(4194308,4,ND.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zg(4194308,4,t,e)},useInsertionEffect:function(t,e){return zg(4,2,t,e)},useMemo:function(t,e){var n=As();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=As();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=bH.bind(null,Gt,t),[i.memoizedState,t]},useRef:function(t){var e=As();return t={current:t},e.memoizedState=t},useState:g2,useDebugValue:qk,useDeferredValue:function(t){return As().memoizedState=t},useTransition:function(){var t=g2(!1),e=t[0];return t=wH.bind(null,t[1]),As().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Gt,r=As();if(zt){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),En===null)throw Error(se(349));bu&30||_D(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,v2(CD.bind(null,i,s,t),[t]),i.flags|=2048,jf(9,kD.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=As(),e=En.identifierPrefix;if(zt){var n=No,i=Ro;n=(i&~(1<<32-us(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Df++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yH++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_H={readContext:$r,useCallback:OD,useContext:$r,useEffect:Xk,useImperativeHandle:MD,useInsertionEffect:TD,useLayoutEffect:RD,useMemo:ID,useReducer:ib,useRef:PD,useState:function(){return ib(Lf)},useDebugValue:qk,useDeferredValue:function(t){var e=Br();return DD(e,cn.memoizedState,t)},useTransition:function(){var t=ib(Lf)[0],e=Br().memoizedState;return[t,e]},useMutableSource:xD,useSyncExternalStore:SD,useId:LD,unstable_isNewReconciler:!1},kH={readContext:$r,useCallback:OD,useContext:$r,useEffect:Xk,useImperativeHandle:MD,useInsertionEffect:TD,useLayoutEffect:RD,useMemo:ID,useReducer:rb,useRef:PD,useState:function(){return rb(Lf)},useDebugValue:qk,useDeferredValue:function(t){var e=Br();return cn===null?e.memoizedState=t:DD(e,cn.memoizedState,t)},useTransition:function(){var t=rb(Lf)[0],e=Br().memoizedState;return[t,e]},useMutableSource:xD,useSyncExternalStore:SD,useId:LD,unstable_isNewReconciler:!1};function qr(t,e){if(t&&t.defaultProps){e=Kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fx(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var m0={isMounted:function(t){return(t=t._reactInternals)?zu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=fi(),r=Ka(t),s=Oo(i,r);s.payload=e,n!=null&&(s.callback=n),e=Wa(t,s,r),e!==null&&(cs(e,t,r,i),$g(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=fi(),r=Ka(t),s=Oo(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Wa(t,s,r),e!==null&&(cs(e,t,r,i),$g(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fi(),i=Ka(t),r=Oo(n,i);r.tag=2,e!=null&&(r.callback=e),e=Wa(t,r,i),e!==null&&(cs(e,t,i,n),$g(e,t,i))}};function y2(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Tf(n,i)||!Tf(r,s):!0}function BD(t,e,n){var i=!1,r=Qa,s=e.contextType;return typeof s=="object"&&s!==null?s=$r(s):(r=Fi(e)?yu:Jn.current,i=e.contextTypes,s=(i=i!=null)?fd(t,r):Qa),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=m0,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function w2(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&m0.enqueueReplaceState(e,e.state,null)}function $x(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},zk(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=$r(s):(s=Fi(e)?yu:Jn.current,r.context=fd(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Fx(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&m0.enqueueReplaceState(r,r.state,null),Wv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function vd(t,e){try{var n="",i=e;do n+=JU(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function sb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var CH=typeof WeakMap=="function"?WeakMap:Map;function zD(t,e,n){n=Oo(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Yv||(Yv=!0,Yx=i),Bx(t,e)},n}function UD(t,e,n){n=Oo(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Bx(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Bx(t,e),typeof i!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function b2(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new CH;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=$H.bind(null,t,e,n),e.then(t,t))}function x2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function S2(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Oo(-1,1),e.tag=2,Wa(n,e,1))),n.lanes|=1),t)}var EH=Ko.ReactCurrentOwner,Di=!1;function ui(t,e,n,i){e.child=t===null?vD(e,null,n,i):md(e,t.child,n,i)}function _2(t,e,n,i,r){n=n.render;var s=e.ref;return Uc(e,r),i=Gk(t,e,n,i,s,r),n=Kk(),t!==null&&!Di?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$o(t,e,r)):(zt&&n&&Ik(e),e.flags|=1,ui(t,e,i,r),e.child)}function k2(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!iC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,HD(t,e,s,i,r)):(t=Wg(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Tf,n(o,i)&&t.ref===e.ref)return $o(t,e,r)}return e.flags|=1,t=Xa(s,i),t.ref=e.ref,t.return=e,e.child=t}function HD(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Tf(s,i)&&t.ref===e.ref)if(Di=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Di=!0);else return e.lanes=t.lanes,$o(t,e,r)}return zx(t,e,n,i,r)}function VD(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(kc,Ki),Ki|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tt(kc,Ki),Ki|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Tt(kc,Ki),Ki|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Tt(kc,Ki),Ki|=i;return ui(t,e,r,n),e.child}function WD(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zx(t,e,n,i,r){var s=Fi(n)?yu:Jn.current;return s=fd(e,s),Uc(e,r),n=Gk(t,e,n,i,s,r),i=Kk(),t!==null&&!Di?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$o(t,e,r)):(zt&&i&&Ik(e),e.flags|=1,ui(t,e,n,r),e.child)}function C2(t,e,n,i,r){if(Fi(n)){var s=!0;Bv(e)}else s=!1;if(Uc(e,r),e.stateNode===null)Ug(t,e),BD(e,n,i),$x(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=$r(u):(u=Fi(n)?yu:Jn.current,u=fd(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&w2(e,o,i,u),ca=!1;var h=e.memoizedState;o.state=h,Wv(e,i,o,r),l=e.memoizedState,a!==i||h!==l||ji.current||ca?(typeof c=="function"&&(Fx(e,n,c,i),l=e.memoizedState),(a=ca||y2(e,n,a,i,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,wD(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:qr(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$r(l):(l=Fi(n)?yu:Jn.current,l=fd(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&w2(e,o,i,l),ca=!1,h=e.memoizedState,o.state=h,Wv(e,i,o,r);var p=e.memoizedState;a!==d||h!==p||ji.current||ca?(typeof f=="function"&&(Fx(e,n,f,i),p=e.memoizedState),(u=ca||y2(e,n,u,i,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return Ux(t,e,n,i,s,r)}function Ux(t,e,n,i,r,s){WD(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&c2(e,n,!1),$o(t,e,s);i=e.stateNode,EH.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=md(e,t.child,null,s),e.child=md(e,null,a,s)):ui(t,e,a,s),e.memoizedState=i.state,r&&c2(e,n,!0),e.child}function GD(t){var e=t.stateNode;e.pendingContext?u2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&u2(t,e.context,!1),Uk(t,e.containerInfo)}function E2(t,e,n,i,r){return pd(),Lk(r),e.flags|=256,ui(t,e,n,i),e.child}var Hx={dehydrated:null,treeContext:null,retryLane:0};function Vx(t){return{baseLanes:t,cachePool:null,transitions:null}}function KD(t,e,n){var i=e.pendingProps,r=Vt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Tt(Vt,r&1),t===null)return Lx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=y0(o,i,0,null),t=du(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Vx(n),e.memoizedState=Hx,t):Yk(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return AH(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Xa(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Xa(a,s):(s=du(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Vx(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Hx,i}return s=t.child,t=s.sibling,i=Xa(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Yk(t,e){return e=y0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lm(t,e,n,i){return i!==null&&Lk(i),md(e,t.child,null,n),t=Yk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AH(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=sb(Error(se(422))),Lm(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=y0({mode:"visible",children:i.children},r,0,null),s=du(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&md(e,t.child,null,o),e.child.memoizedState=Vx(o),e.memoizedState=Hx,s);if(!(e.mode&1))return Lm(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(se(419)),i=sb(s,i,void 0),Lm(t,e,o,i)}if(a=(o&t.childLanes)!==0,Di||a){if(i=En,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Fo(t,r),cs(i,t,r,-1))}return nC(),i=sb(Error(se(421))),Lm(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=BH.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,er=Va(r.nextSibling),rr=e,zt=!0,es=null,t!==null&&(Sr[_r++]=Ro,Sr[_r++]=No,Sr[_r++]=wu,Ro=t.id,No=t.overflow,wu=e),e=Yk(e,i.children),e.flags|=4096,e)}function A2(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),jx(t.return,e,n)}function ob(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function XD(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(ui(t,e,i.children,n),i=Vt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&A2(t,n,e);else if(t.tag===19)A2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Tt(Vt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Gv(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ob(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Gv(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ob(e,!0,n,null,s);break;case"together":ob(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ug(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $o(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=Xa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function PH(t,e,n){switch(e.tag){case 3:GD(e),pd();break;case 5:bD(e);break;case 1:Fi(e.type)&&Bv(e);break;case 4:Uk(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Tt(Hv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Tt(Vt,Vt.current&1),e.flags|=128,null):n&e.child.childLanes?KD(t,e,n):(Tt(Vt,Vt.current&1),t=$o(t,e,n),t!==null?t.sibling:null);Tt(Vt,Vt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return XD(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tt(Vt,Vt.current),i)break;return null;case 22:case 23:return e.lanes=0,VD(t,e,n)}return $o(t,e,n)}var qD,Wx,YD,ZD;qD=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wx=function(){};YD=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ru(Xs.current);var s=null;switch(n){case"input":r=fx(t,r),i=fx(t,i),s=[];break;case"select":r=Kt({},r,{value:void 0}),i=Kt({},i,{value:void 0}),s=[];break;case"textarea":r=gx(t,r),i=gx(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Fv)}yx(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sf.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Sf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Nt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};ZD=function(t,e,n,i){n!==i&&(e.flags|=4)};function oh(t,e){if(!zt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Gn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function TH(t,e,n){var i=e.pendingProps;switch(Dk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(e),null;case 1:return Fi(e.type)&&$v(),Gn(e),null;case 3:return i=e.stateNode,gd(),It(ji),It(Jn),Vk(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Im(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,es!==null&&(Qx(es),es=null))),Wx(t,e),Gn(e),null;case 5:Hk(e);var r=ru(If.current);if(n=e.type,t!==null&&e.stateNode!=null)YD(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(se(166));return Gn(e),null}if(t=ru(Xs.current),Im(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Ls]=e,i[Mf]=s,t=(e.mode&1)!==0,n){case"dialog":Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":case"embed":Nt("load",i);break;case"video":case"audio":for(r=0;r<Rh.length;r++)Nt(Rh[r],i);break;case"source":Nt("error",i);break;case"img":case"image":case"link":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"input":LP(i,s),Nt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Nt("invalid",i);break;case"textarea":FP(i,s),Nt("invalid",i)}yx(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Om(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Om(i.textContent,a,t),r=["children",""+a]):Sf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Nt("scroll",i)}switch(n){case"input":Cm(i),jP(i,s,!0);break;case"textarea":Cm(i),$P(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Fv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Ls]=e,t[Mf]=i,qD(t,e,!1,!1),e.stateNode=t;e:{switch(o=wx(n,i),n){case"dialog":Nt("cancel",t),Nt("close",t),r=i;break;case"iframe":case"object":case"embed":Nt("load",t),r=i;break;case"video":case"audio":for(r=0;r<Rh.length;r++)Nt(Rh[r],t);r=i;break;case"source":Nt("error",t),r=i;break;case"img":case"image":case"link":Nt("error",t),Nt("load",t),r=i;break;case"details":Nt("toggle",t),r=i;break;case"input":LP(t,i),r=fx(t,i),Nt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Kt({},i,{value:void 0}),Nt("invalid",t);break;case"textarea":FP(t,i),r=gx(t,i),Nt("invalid",t);break;default:r=i}yx(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?PI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&EI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_f(t,l):typeof l=="number"&&_f(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Nt("scroll",t):l!=null&&bk(t,s,l,o))}switch(n){case"input":Cm(t),jP(t,i,!1);break;case"textarea":Cm(t),$P(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ja(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Fc(t,!!i.multiple,s,!1):i.defaultValue!=null&&Fc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Fv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gn(e),null;case 6:if(t&&e.stateNode!=null)ZD(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(se(166));if(n=ru(If.current),ru(Xs.current),Im(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ls]=e,(s=i.nodeValue!==n)&&(t=rr,t!==null))switch(t.tag){case 3:Om(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Om(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ls]=e,e.stateNode=i}return Gn(e),null;case 13:if(It(Vt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(zt&&er!==null&&e.mode&1&&!(e.flags&128))mD(),pd(),e.flags|=98560,s=!1;else if(s=Im(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(se(317));s[Ls]=e}else pd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gn(e),s=!1}else es!==null&&(Qx(es),es=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Vt.current&1?vn===0&&(vn=3):nC())),e.updateQueue!==null&&(e.flags|=4),Gn(e),null);case 4:return gd(),Wx(t,e),t===null&&Rf(e.stateNode.containerInfo),Gn(e),null;case 10:return $k(e.type._context),Gn(e),null;case 17:return Fi(e.type)&&$v(),Gn(e),null;case 19:if(It(Vt),s=e.memoizedState,s===null)return Gn(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)oh(s,!1);else{if(vn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gv(t),o!==null){for(e.flags|=128,oh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tt(Vt,Vt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qt()>yd&&(e.flags|=128,i=!0,oh(s,!1),e.lanes=4194304)}else{if(!i)if(t=Gv(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),oh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!zt)return Gn(e),null}else 2*Qt()-s.renderingStartTime>yd&&n!==1073741824&&(e.flags|=128,i=!0,oh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qt(),e.sibling=null,n=Vt.current,Tt(Vt,i?n&1|2:n&1),e):(Gn(e),null);case 22:case 23:return tC(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ki&1073741824&&(Gn(e),e.subtreeFlags&6&&(e.flags|=8192)):Gn(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function RH(t,e){switch(Dk(e),e.tag){case 1:return Fi(e.type)&&$v(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gd(),It(ji),It(Jn),Vk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hk(e),null;case 13:if(It(Vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));pd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return It(Vt),null;case 4:return gd(),null;case 10:return $k(e.type._context),null;case 22:case 23:return tC(),null;case 24:return null;default:return null}}var jm=!1,qn=!1,NH=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function _c(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){qt(t,e,i)}else n.current=null}function Gx(t,e,n){try{n()}catch(i){qt(t,e,i)}}var P2=!1;function MH(t,e){if(Tx=Dv,t=nD(),Ok(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(a=o),h===s&&++c===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rx={focusedElem:t,selectionRange:n},Dv=!1,Ae=e;Ae!==null;)if(e=Ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ae=t;else for(;Ae!==null;){e=Ae;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,b=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:qr(e.type,g),b);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(_){qt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}return p=P2,P2=!1,p}function ef(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Gx(e,n,s)}r=r.next}while(r!==i)}}function g0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Kx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JD(t){var e=t.alternate;e!==null&&(t.alternate=null,JD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ls],delete e[Mf],delete e[Ox],delete e[pH],delete e[mH])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QD(t){return t.tag===5||t.tag===3||t.tag===4}function T2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xx(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fv));else if(i!==4&&(t=t.child,t!==null))for(Xx(t,e,n),t=t.sibling;t!==null;)Xx(t,e,n),t=t.sibling}function qx(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(qx(t,e,n),t=t.sibling;t!==null;)qx(t,e,n),t=t.sibling}var Mn=null,Qr=!1;function ta(t,e,n){for(n=n.child;n!==null;)eL(t,e,n),n=n.sibling}function eL(t,e,n){if(Ks&&typeof Ks.onCommitFiberUnmount=="function")try{Ks.onCommitFiberUnmount(l0,n)}catch{}switch(n.tag){case 5:qn||_c(n,e);case 6:var i=Mn,r=Qr;Mn=null,ta(t,e,n),Mn=i,Qr=r,Mn!==null&&(Qr?(t=Mn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mn.removeChild(n.stateNode));break;case 18:Mn!==null&&(Qr?(t=Mn,n=n.stateNode,t.nodeType===8?Qw(t.parentNode,n):t.nodeType===1&&Qw(t,n),Af(t)):Qw(Mn,n.stateNode));break;case 4:i=Mn,r=Qr,Mn=n.stateNode.containerInfo,Qr=!0,ta(t,e,n),Mn=i,Qr=r;break;case 0:case 11:case 14:case 15:if(!qn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Gx(n,e,o),r=r.next}while(r!==i)}ta(t,e,n);break;case 1:if(!qn&&(_c(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){qt(n,e,a)}ta(t,e,n);break;case 21:ta(t,e,n);break;case 22:n.mode&1?(qn=(i=qn)||n.memoizedState!==null,ta(t,e,n),qn=i):ta(t,e,n);break;default:ta(t,e,n)}}function R2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new NH),e.forEach(function(i){var r=zH.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Vr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mn=a.stateNode,Qr=!1;break e;case 3:Mn=a.stateNode.containerInfo,Qr=!0;break e;case 4:Mn=a.stateNode.containerInfo,Qr=!0;break e}a=a.return}if(Mn===null)throw Error(se(160));eL(s,o,r),Mn=null,Qr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){qt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tL(e,t),e=e.sibling}function tL(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vr(e,t),xs(t),i&4){try{ef(3,t,t.return),g0(3,t)}catch(g){qt(t,t.return,g)}try{ef(5,t,t.return)}catch(g){qt(t,t.return,g)}}break;case 1:Vr(e,t),xs(t),i&512&&n!==null&&_c(n,n.return);break;case 5:if(Vr(e,t),xs(t),i&512&&n!==null&&_c(n,n.return),t.flags&32){var r=t.stateNode;try{_f(r,"")}catch(g){qt(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&_I(r,s),wx(a,o);var u=wx(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?PI(r,d):c==="dangerouslySetInnerHTML"?EI(r,d):c==="children"?_f(r,d):bk(r,c,d,u)}switch(a){case"input":px(r,s);break;case"textarea":kI(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Fc(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Fc(r,!!s.multiple,s.defaultValue,!0):Fc(r,!!s.multiple,s.multiple?[]:"",!1))}r[Mf]=s}catch(g){qt(t,t.return,g)}}break;case 6:if(Vr(e,t),xs(t),i&4){if(t.stateNode===null)throw Error(se(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){qt(t,t.return,g)}}break;case 3:if(Vr(e,t),xs(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Af(e.containerInfo)}catch(g){qt(t,t.return,g)}break;case 4:Vr(e,t),xs(t);break;case 13:Vr(e,t),xs(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Qk=Qt())),i&4&&R2(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(qn=(u=qn)||c,Vr(e,t),qn=u):Vr(e,t),xs(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Ae=t,c=t.child;c!==null;){for(d=Ae=c;Ae!==null;){switch(h=Ae,f=h.child,h.tag){case 0:case 11:case 14:case 15:ef(4,h,h.return);break;case 1:_c(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){qt(i,n,g)}}break;case 5:_c(h,h.return);break;case 22:if(h.memoizedState!==null){M2(d);continue}}f!==null?(f.return=h,Ae=f):M2(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=AI("display",o))}catch(g){qt(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){qt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Vr(e,t),xs(t),i&4&&R2(t);break;case 21:break;default:Vr(e,t),xs(t)}}function xs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(QD(n)){var i=n;break e}n=n.return}throw Error(se(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(_f(r,""),i.flags&=-33);var s=T2(t);qx(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=T2(t);Xx(t,a,o);break;default:throw Error(se(161))}}catch(l){qt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function OH(t,e,n){Ae=t,nL(t)}function nL(t,e,n){for(var i=(t.mode&1)!==0;Ae!==null;){var r=Ae,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||jm;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||qn;a=jm;var u=qn;if(jm=o,(qn=l)&&!u)for(Ae=r;Ae!==null;)o=Ae,l=o.child,o.tag===22&&o.memoizedState!==null?O2(r):l!==null?(l.return=o,Ae=l):O2(r);for(;s!==null;)Ae=s,nL(s),s=s.sibling;Ae=r,jm=a,qn=u}N2(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ae=s):N2(t)}}function N2(t){for(;Ae!==null;){var e=Ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qn||g0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!qn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:qr(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&m2(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}m2(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Af(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}qn||e.flags&512&&Kx(e)}catch(h){qt(e,e.return,h)}}if(e===t){Ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function M2(t){for(;Ae!==null;){var e=Ae;if(e===t){Ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function O2(t){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{g0(4,e)}catch(l){qt(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){qt(e,r,l)}}var s=e.return;try{Kx(e)}catch(l){qt(e,s,l)}break;case 5:var o=e.return;try{Kx(e)}catch(l){qt(e,o,l)}}}catch(l){qt(e,e.return,l)}if(e===t){Ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ae=a;break}Ae=e.return}}var IH=Math.ceil,qv=Ko.ReactCurrentDispatcher,Zk=Ko.ReactCurrentOwner,Or=Ko.ReactCurrentBatchConfig,dt=0,En=null,an=null,Un=0,Ki=0,kc=bl(0),vn=0,Ff=null,xu=0,v0=0,Jk=0,tf=null,Ti=null,Qk=0,yd=1/0,fo=null,Yv=!1,Yx=null,Ga=null,Fm=!1,Pa=null,Zv=0,nf=0,Zx=null,Hg=-1,Vg=0;function fi(){return dt&6?Qt():Hg!==-1?Hg:Hg=Qt()}function Ka(t){return t.mode&1?dt&2&&Un!==0?Un&-Un:vH.transition!==null?(Vg===0&&(Vg=BI()),Vg):(t=gt,t!==0||(t=window.event,t=t===void 0?16:KI(t.type)),t):1}function cs(t,e,n,i){if(50<nf)throw nf=0,Zx=null,Error(se(185));Ip(t,n,i),(!(dt&2)||t!==En)&&(t===En&&(!(dt&2)&&(v0|=n),vn===4&&va(t,Un)),$i(t,i),n===1&&dt===0&&!(e.mode&1)&&(yd=Qt()+500,f0&&xl()))}function $i(t,e){var n=t.callbackNode;v9(t,e);var i=Iv(t,t===En?Un:0);if(i===0)n!==null&&UP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&UP(n),e===1)t.tag===0?gH(I2.bind(null,t)):hD(I2.bind(null,t)),hH(function(){!(dt&6)&&xl()}),n=null;else{switch(zI(i)){case 1:n=Ck;break;case 4:n=FI;break;case 16:n=Ov;break;case 536870912:n=$I;break;default:n=Ov}n=cL(n,iL.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iL(t,e){if(Hg=-1,Vg=0,dt&6)throw Error(se(327));var n=t.callbackNode;if(Hc()&&t.callbackNode!==n)return null;var i=Iv(t,t===En?Un:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Jv(t,i);else{e=i;var r=dt;dt|=2;var s=sL();(En!==t||Un!==e)&&(fo=null,yd=Qt()+500,cu(t,e));do try{jH();break}catch(a){rL(t,a)}while(!0);Fk(),qv.current=s,dt=r,an!==null?e=0:(En=null,Un=0,e=vn)}if(e!==0){if(e===2&&(r=kx(t),r!==0&&(i=r,e=Jx(t,r))),e===1)throw n=Ff,cu(t,0),va(t,i),$i(t,Qt()),n;if(e===6)va(t,i);else{if(r=t.current.alternate,!(i&30)&&!DH(r)&&(e=Jv(t,i),e===2&&(s=kx(t),s!==0&&(i=s,e=Jx(t,s))),e===1))throw n=Ff,cu(t,0),va(t,i),$i(t,Qt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(se(345));case 2:Hl(t,Ti,fo);break;case 3:if(va(t,i),(i&130023424)===i&&(e=Qk+500-Qt(),10<e)){if(Iv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){fi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Mx(Hl.bind(null,t,Ti,fo),e);break}Hl(t,Ti,fo);break;case 4:if(va(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-us(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Qt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*IH(i/1960))-i,10<i){t.timeoutHandle=Mx(Hl.bind(null,t,Ti,fo),i);break}Hl(t,Ti,fo);break;case 5:Hl(t,Ti,fo);break;default:throw Error(se(329))}}}return $i(t,Qt()),t.callbackNode===n?iL.bind(null,t):null}function Jx(t,e){var n=tf;return t.current.memoizedState.isDehydrated&&(cu(t,e).flags|=256),t=Jv(t,e),t!==2&&(e=Ti,Ti=n,e!==null&&Qx(e)),t}function Qx(t){Ti===null?Ti=t:Ti.push.apply(Ti,t)}function DH(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!hs(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function va(t,e){for(e&=~Jk,e&=~v0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-us(e),i=1<<n;t[n]=-1,e&=~i}}function I2(t){if(dt&6)throw Error(se(327));Hc();var e=Iv(t,0);if(!(e&1))return $i(t,Qt()),null;var n=Jv(t,e);if(t.tag!==0&&n===2){var i=kx(t);i!==0&&(e=i,n=Jx(t,i))}if(n===1)throw n=Ff,cu(t,0),va(t,e),$i(t,Qt()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hl(t,Ti,fo),$i(t,Qt()),null}function eC(t,e){var n=dt;dt|=1;try{return t(e)}finally{dt=n,dt===0&&(yd=Qt()+500,f0&&xl())}}function Su(t){Pa!==null&&Pa.tag===0&&!(dt&6)&&Hc();var e=dt;dt|=1;var n=Or.transition,i=gt;try{if(Or.transition=null,gt=1,t)return t()}finally{gt=i,Or.transition=n,dt=e,!(dt&6)&&xl()}}function tC(){Ki=kc.current,It(kc)}function cu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dH(n)),an!==null)for(n=an.return;n!==null;){var i=n;switch(Dk(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&$v();break;case 3:gd(),It(ji),It(Jn),Vk();break;case 5:Hk(i);break;case 4:gd();break;case 13:It(Vt);break;case 19:It(Vt);break;case 10:$k(i.type._context);break;case 22:case 23:tC()}n=n.return}if(En=t,an=t=Xa(t.current,null),Un=Ki=e,vn=0,Ff=null,Jk=v0=xu=0,Ti=tf=null,iu!==null){for(e=0;e<iu.length;e++)if(n=iu[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}iu=null}return t}function rL(t,e){do{var n=an;try{if(Fk(),Bg.current=Xv,Kv){for(var i=Gt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Kv=!1}if(bu=0,Cn=cn=Gt=null,Qh=!1,Df=0,Zk.current=null,n===null||n.return===null){vn=1,Ff=e,an=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Un,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=x2(o);if(f!==null){f.flags&=-257,S2(f,o,a,s,e),f.mode&1&&b2(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){b2(s,u,e),nC();break e}l=Error(se(426))}}else if(zt&&a.mode&1){var b=x2(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),S2(b,o,a,s,e),Lk(vd(l,a));break e}}s=l=vd(l,a),vn!==4&&(vn=2),tf===null?tf=[s]:tf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=zD(s,l,e);p2(s,v);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ga===null||!Ga.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=UD(s,a,e);p2(s,_);break e}}s=s.return}while(s!==null)}aL(n)}catch(k){e=k,an===n&&n!==null&&(an=n=n.return);continue}break}while(!0)}function sL(){var t=qv.current;return qv.current=Xv,t===null?Xv:t}function nC(){(vn===0||vn===3||vn===2)&&(vn=4),En===null||!(xu&268435455)&&!(v0&268435455)||va(En,Un)}function Jv(t,e){var n=dt;dt|=2;var i=sL();(En!==t||Un!==e)&&(fo=null,cu(t,e));do try{LH();break}catch(r){rL(t,r)}while(!0);if(Fk(),dt=n,qv.current=i,an!==null)throw Error(se(261));return En=null,Un=0,vn}function LH(){for(;an!==null;)oL(an)}function jH(){for(;an!==null&&!l9();)oL(an)}function oL(t){var e=uL(t.alternate,t,Ki);t.memoizedProps=t.pendingProps,e===null?aL(t):an=e,Zk.current=null}function aL(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RH(n,e),n!==null){n.flags&=32767,an=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vn=6,an=null;return}}else if(n=TH(n,e,Ki),n!==null){an=n;return}if(e=e.sibling,e!==null){an=e;return}an=e=t}while(e!==null);vn===0&&(vn=5)}function Hl(t,e,n){var i=gt,r=Or.transition;try{Or.transition=null,gt=1,FH(t,e,n,i)}finally{Or.transition=r,gt=i}return null}function FH(t,e,n,i){do Hc();while(Pa!==null);if(dt&6)throw Error(se(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(y9(t,s),t===En&&(an=En=null,Un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fm||(Fm=!0,cL(Ov,function(){return Hc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Or.transition,Or.transition=null;var o=gt;gt=1;var a=dt;dt|=4,Zk.current=null,MH(t,n),tL(n,t),rH(Rx),Dv=!!Tx,Rx=Tx=null,t.current=n,OH(n),u9(),dt=a,gt=o,Or.transition=s}else t.current=n;if(Fm&&(Fm=!1,Pa=t,Zv=r),s=t.pendingLanes,s===0&&(Ga=null),h9(n.stateNode),$i(t,Qt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Yv)throw Yv=!1,t=Yx,Yx=null,t;return Zv&1&&t.tag!==0&&Hc(),s=t.pendingLanes,s&1?t===Zx?nf++:(nf=0,Zx=t):nf=0,xl(),null}function Hc(){if(Pa!==null){var t=zI(Zv),e=Or.transition,n=gt;try{if(Or.transition=null,gt=16>t?16:t,Pa===null)var i=!1;else{if(t=Pa,Pa=null,Zv=0,dt&6)throw Error(se(331));var r=dt;for(dt|=4,Ae=t.current;Ae!==null;){var s=Ae,o=s.child;if(Ae.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Ae=u;Ae!==null;){var c=Ae;switch(c.tag){case 0:case 11:case 15:ef(8,c,s)}var d=c.child;if(d!==null)d.return=c,Ae=d;else for(;Ae!==null;){c=Ae;var h=c.sibling,f=c.return;if(JD(c),c===u){Ae=null;break}if(h!==null){h.return=f,Ae=h;break}Ae=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}Ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ae=o;else e:for(;Ae!==null;){if(s=Ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ef(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ae=v;break e}Ae=s.return}}var y=t.current;for(Ae=y;Ae!==null;){o=Ae;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ae=w;else e:for(o=y;Ae!==null;){if(a=Ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:g0(9,a)}}catch(k){qt(a,a.return,k)}if(a===o){Ae=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Ae=_;break e}Ae=a.return}}if(dt=r,xl(),Ks&&typeof Ks.onPostCommitFiberRoot=="function")try{Ks.onPostCommitFiberRoot(l0,t)}catch{}i=!0}return i}finally{gt=n,Or.transition=e}}return!1}function D2(t,e,n){e=vd(n,e),e=zD(t,e,1),t=Wa(t,e,1),e=fi(),t!==null&&(Ip(t,1,e),$i(t,e))}function qt(t,e,n){if(t.tag===3)D2(t,t,n);else for(;e!==null;){if(e.tag===3){D2(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ga===null||!Ga.has(i))){t=vd(n,t),t=UD(e,t,1),e=Wa(e,t,1),t=fi(),e!==null&&(Ip(e,1,t),$i(e,t));break}}e=e.return}}function $H(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=fi(),t.pingedLanes|=t.suspendedLanes&n,En===t&&(Un&n)===n&&(vn===4||vn===3&&(Un&130023424)===Un&&500>Qt()-Qk?cu(t,0):Jk|=n),$i(t,e)}function lL(t,e){e===0&&(t.mode&1?(e=Pm,Pm<<=1,!(Pm&130023424)&&(Pm=4194304)):e=1);var n=fi();t=Fo(t,e),t!==null&&(Ip(t,e,n),$i(t,n))}function BH(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lL(t,n)}function zH(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(se(314))}i!==null&&i.delete(e),lL(t,n)}var uL;uL=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ji.current)Di=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Di=!1,PH(t,e,n);Di=!!(t.flags&131072)}else Di=!1,zt&&e.flags&1048576&&fD(e,Uv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ug(t,e),t=e.pendingProps;var r=fd(e,Jn.current);Uc(e,n),r=Gk(null,e,i,t,r,n);var s=Kk();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fi(i)?(s=!0,Bv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,zk(e),r.updater=m0,e.stateNode=r,r._reactInternals=e,$x(e,i,t,n),e=Ux(null,e,i,!0,s,n)):(e.tag=0,zt&&s&&Ik(e),ui(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ug(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=HH(i),t=qr(i,t),r){case 0:e=zx(null,e,i,t,n);break e;case 1:e=C2(null,e,i,t,n);break e;case 11:e=_2(null,e,i,t,n);break e;case 14:e=k2(null,e,i,qr(i.type,t),n);break e}throw Error(se(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qr(i,r),zx(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qr(i,r),C2(t,e,i,r,n);case 3:e:{if(GD(e),t===null)throw Error(se(387));i=e.pendingProps,s=e.memoizedState,r=s.element,wD(t,e),Wv(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=vd(Error(se(423)),e),e=E2(t,e,i,n,r);break e}else if(i!==r){r=vd(Error(se(424)),e),e=E2(t,e,i,n,r);break e}else for(er=Va(e.stateNode.containerInfo.firstChild),rr=e,zt=!0,es=null,n=vD(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pd(),i===r){e=$o(t,e,n);break e}ui(t,e,i,n)}e=e.child}return e;case 5:return bD(e),t===null&&Lx(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Nx(i,r)?o=null:s!==null&&Nx(i,s)&&(e.flags|=32),WD(t,e),ui(t,e,o,n),e.child;case 6:return t===null&&Lx(e),null;case 13:return KD(t,e,n);case 4:return Uk(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=md(e,null,i,n):ui(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qr(i,r),_2(t,e,i,r,n);case 7:return ui(t,e,e.pendingProps,n),e.child;case 8:return ui(t,e,e.pendingProps.children,n),e.child;case 12:return ui(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Tt(Hv,i._currentValue),i._currentValue=o,s!==null)if(hs(s.value,o)){if(s.children===r.children&&!ji.current){e=$o(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Oo(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),jx(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jx(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ui(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Uc(e,n),r=$r(r),i=i(r),e.flags|=1,ui(t,e,i,n),e.child;case 14:return i=e.type,r=qr(i,e.pendingProps),r=qr(i.type,r),k2(t,e,i,r,n);case 15:return HD(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qr(i,r),Ug(t,e),e.tag=1,Fi(i)?(t=!0,Bv(e)):t=!1,Uc(e,n),BD(e,i,r),$x(e,i,r,n),Ux(null,e,i,!0,t,n);case 19:return XD(t,e,n);case 22:return VD(t,e,n)}throw Error(se(156,e.tag))};function cL(t,e){return jI(t,e)}function UH(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(t,e,n,i){return new UH(t,e,n,i)}function iC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HH(t){if(typeof t=="function")return iC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sk)return 11;if(t===_k)return 14}return 2}function Xa(t,e){var n=t.alternate;return n===null?(n=Pr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wg(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")iC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pc:return du(n.children,r,s,e);case xk:o=8,r|=8;break;case ux:return t=Pr(12,n,e,r|2),t.elementType=ux,t.lanes=s,t;case cx:return t=Pr(13,n,e,r),t.elementType=cx,t.lanes=s,t;case dx:return t=Pr(19,n,e,r),t.elementType=dx,t.lanes=s,t;case bI:return y0(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yI:o=10;break e;case wI:o=9;break e;case Sk:o=11;break e;case _k:o=14;break e;case ua:o=16,i=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Pr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function du(t,e,n,i){return t=Pr(7,t,i,e),t.lanes=n,t}function y0(t,e,n,i){return t=Pr(22,t,i,e),t.elementType=bI,t.lanes=n,t.stateNode={isHidden:!1},t}function ab(t,e,n){return t=Pr(6,t,null,e),t.lanes=n,t}function lb(t,e,n){return e=Pr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VH(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uw(0),this.expirationTimes=Uw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uw(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function rC(t,e,n,i,r,s,o,a,l){return t=new VH(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zk(s),t}function WH(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fc,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function dL(t){if(!t)return Qa;t=t._reactInternals;e:{if(zu(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(Fi(n))return dD(t,n,e)}return e}function hL(t,e,n,i,r,s,o,a,l){return t=rC(n,i,!0,t,r,s,o,a,l),t.context=dL(null),n=t.current,i=fi(),r=Ka(n),s=Oo(i,r),s.callback=e??null,Wa(n,s,r),t.current.lanes=r,Ip(t,r,i),$i(t,i),t}function w0(t,e,n,i){var r=e.current,s=fi(),o=Ka(r);return n=dL(n),e.context===null?e.context=n:e.pendingContext=n,e=Oo(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Wa(r,e,o),t!==null&&(cs(t,r,o,s),$g(t,r,o)),o}function Qv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function L2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sC(t,e){L2(t,e),(t=t.alternate)&&L2(t,e)}function GH(){return null}var fL=typeof reportError=="function"?reportError:function(t){console.error(t)};function oC(t){this._internalRoot=t}b0.prototype.render=oC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));w0(t,e,null,null)};b0.prototype.unmount=oC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Su(function(){w0(null,t,null,null)}),e[jo]=null}};function b0(t){this._internalRoot=t}b0.prototype.unstable_scheduleHydration=function(t){if(t){var e=VI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ga.length&&e!==0&&e<ga[n].priority;n++);ga.splice(n,0,t),n===0&&GI(t)}};function aC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function x0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function j2(){}function KH(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Qv(o);s.call(u)}}var o=hL(e,i,t,0,null,!1,!1,"",j2);return t._reactRootContainer=o,t[jo]=o.current,Rf(t.nodeType===8?t.parentNode:t),Su(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Qv(l);a.call(u)}}var l=rC(t,0,!1,null,null,!1,!1,"",j2);return t._reactRootContainer=l,t[jo]=l.current,Rf(t.nodeType===8?t.parentNode:t),Su(function(){w0(e,l,n,i)}),l}function S0(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Qv(o);a.call(l)}}w0(e,o,t,r)}else o=KH(n,e,t,r,i);return Qv(o)}UI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Th(e.pendingLanes);n!==0&&(Ek(e,n|1),$i(e,Qt()),!(dt&6)&&(yd=Qt()+500,xl()))}break;case 13:Su(function(){var i=Fo(t,1);if(i!==null){var r=fi();cs(i,t,1,r)}}),sC(t,1)}};Ak=function(t){if(t.tag===13){var e=Fo(t,134217728);if(e!==null){var n=fi();cs(e,t,134217728,n)}sC(t,134217728)}};HI=function(t){if(t.tag===13){var e=Ka(t),n=Fo(t,e);if(n!==null){var i=fi();cs(n,t,e,i)}sC(t,e)}};VI=function(){return gt};WI=function(t,e){var n=gt;try{return gt=t,e()}finally{gt=n}};xx=function(t,e,n){switch(e){case"input":if(px(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=h0(i);if(!r)throw Error(se(90));SI(i),px(i,r)}}}break;case"textarea":kI(t,n);break;case"select":e=n.value,e!=null&&Fc(t,!!n.multiple,e,!1)}};NI=eC;MI=Su;var XH={usingClientEntryPoint:!1,Events:[Lp,yc,h0,TI,RI,eC]},ah={findFiberByHostInstance:nu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qH={bundleType:ah.bundleType,version:ah.version,rendererPackageName:ah.rendererPackageName,rendererConfig:ah.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ko.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DI(t),t===null?null:t.stateNode},findFiberByHostInstance:ah.findFiberByHostInstance||GH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$m.isDisabled&&$m.supportsFiber)try{l0=$m.inject(qH),Ks=$m}catch{}}ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XH;ur.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aC(e))throw Error(se(200));return WH(t,e,null,n)};ur.createRoot=function(t,e){if(!aC(t))throw Error(se(299));var n=!1,i="",r=fL;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=rC(t,1,!1,null,null,n,!1,i,r),t[jo]=e.current,Rf(t.nodeType===8?t.parentNode:t),new oC(e)};ur.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=DI(e),t=t===null?null:t.stateNode,t};ur.flushSync=function(t){return Su(t)};ur.hydrate=function(t,e,n){if(!x0(e))throw Error(se(200));return S0(null,t,e,!0,n)};ur.hydrateRoot=function(t,e,n){if(!aC(t))throw Error(se(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=fL;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hL(e,null,t,1,n??null,r,!1,s,o),t[jo]=e.current,Rf(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new b0(e)};ur.render=function(t,e,n){if(!x0(e))throw Error(se(200));return S0(null,t,e,!1,n)};ur.unmountComponentAtNode=function(t){if(!x0(t))throw Error(se(40));return t._reactRootContainer?(Su(function(){S0(null,null,t,!1,function(){t._reactRootContainer=null,t[jo]=null})}),!0):!1};ur.unstable_batchedUpdates=eC;ur.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!x0(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return S0(t,e,n,!1,i)};ur.version="18.3.1-next-f1338f8080-20240426";function pL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pL)}catch(t){console.error(t)}}pL(),pI.exports=ur;var Sl=pI.exports;const YH=$u(Sl);var F2=Sl;ax.createRoot=F2.createRoot,ax.hydrateRoot=F2.hydrateRoot;function ge(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function _l(t,e=[]){let n=[];function i(s,o){const a=x.createContext(o),l=n.length;n=[...n,o];const u=d=>{var v;const{scope:h,children:f,...p}=d,g=((v=h==null?void 0:h[t])==null?void 0:v[l])||a,b=x.useMemo(()=>p,Object.values(p));return m.jsx(g.Provider,{value:b,children:f})};u.displayName=s+"Provider";function c(d,h){var g;const f=((g=h==null?void 0:h[t])==null?void 0:g[l])||a,p=x.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,c]}const r=()=>{const s=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,ZH(r,...e)]}function ZH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function lC(t,e=[]){let n=[];function i(s,o){const a=x.createContext(o),l=n.length;n=[...n,o];function u(d){const{scope:h,children:f,...p}=d,g=(h==null?void 0:h[t][l])||a,b=x.useMemo(()=>p,Object.values(p));return m.jsx(g.Provider,{value:b,children:f})}function c(d,h){const f=(h==null?void 0:h[t][l])||a,p=x.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const r=()=>{const s=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,JH(r,...e)]}function JH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function QH(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function _0(...t){return e=>t.forEach(n=>QH(n,e))}function ct(...t){return x.useCallback(_0(...t),t)}var _u=x.forwardRef((t,e)=>{const{children:n,...i}=t,r=x.Children.toArray(n),s=r.find(tV);if(s){const o=s.props.children,a=r.map(l=>l===s?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:l);return m.jsx(eS,{...i,ref:e,children:x.isValidElement(o)?x.cloneElement(o,void 0,a):null})}return m.jsx(eS,{...i,ref:e,children:n})});_u.displayName="Slot";var eS=x.forwardRef((t,e)=>{const{children:n,...i}=t;if(x.isValidElement(n)){const r=iV(n);return x.cloneElement(n,{...nV(i,n.props),ref:e?_0(e,r):r})}return x.Children.count(n)>1?x.Children.only(null):null});eS.displayName="SlotClone";var eV=({children:t})=>m.jsx(m.Fragment,{children:t});function tV(t){return x.isValidElement(t)&&t.type===eV}function nV(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function iV(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Fp(t){const e=t+"CollectionProvider",[n,i]=lC(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:g}=f,b=sn.useRef(null),v=sn.useRef(new Map).current;return m.jsx(r,{scope:p,itemMap:v,collectionRef:b,children:g})};o.displayName=e;const a=t+"CollectionSlot",l=sn.forwardRef((f,p)=>{const{scope:g,children:b}=f,v=s(a,g),y=ct(p,v.collectionRef);return m.jsx(_u,{ref:y,children:b})});l.displayName=a;const u=t+"CollectionItemSlot",c="data-radix-collection-item",d=sn.forwardRef((f,p)=>{const{scope:g,children:b,...v}=f,y=sn.useRef(null),w=ct(p,y),_=s(u,g);return sn.useEffect(()=>(_.itemMap.set(y,{ref:y,...v}),()=>void _.itemMap.delete(y))),m.jsx(_u,{[c]:"",ref:w,children:b})});d.displayName=u;function h(f){const p=s(t+"CollectionConsumer",f);return sn.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const v=Array.from(b.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((_,k)=>v.indexOf(_.ref.current)-v.indexOf(k.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,i]}var Qn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},rV=ak.useId||(()=>{}),sV=0;function el(t){const[e,n]=x.useState(rV());return Qn(()=>{n(i=>i??String(sV++))},[t]),e?`radix-${e}`:""}var oV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],He=oV.reduce((t,e)=>{const n=x.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?_u:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(a,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function uC(t,e){t&&Sl.flushSync(()=>t.dispatchEvent(e))}function ei(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}function Bo({prop:t,defaultProp:e,onChange:n=()=>{}}){const[i,r]=aV({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:i,a=ei(n),l=x.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else r(u)},[s,t,r,a]);return[o,l]}function aV({defaultProp:t,onChange:e}){const n=x.useState(t),[i]=n,r=x.useRef(i),s=ei(e);return x.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}var lV=x.createContext(void 0);function $p(t){const e=x.useContext(lV);return t||e||"ltr"}var ub="rovingFocusGroup.onEntryFocus",uV={bubbles:!1,cancelable:!0},k0="RovingFocusGroup",[tS,mL,cV]=Fp(k0),[dV,C0]=lC(k0,[cV]),[hV,fV]=dV(k0),gL=x.forwardRef((t,e)=>m.jsx(tS.Provider,{scope:t.__scopeRovingFocusGroup,children:m.jsx(tS.Slot,{scope:t.__scopeRovingFocusGroup,children:m.jsx(pV,{...t,ref:e})})}));gL.displayName=k0;var pV=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:c=!1,...d}=t,h=x.useRef(null),f=ct(e,h),p=$p(s),[g=null,b]=Bo({prop:o,defaultProp:a,onChange:l}),[v,y]=x.useState(!1),w=ei(u),_=mL(n),k=x.useRef(!1),[C,E]=x.useState(0);return x.useEffect(()=>{const P=h.current;if(P)return P.addEventListener(ub,w),()=>P.removeEventListener(ub,w)},[w]),m.jsx(hV,{scope:n,orientation:i,dir:p,loop:r,currentTabStopId:g,onItemFocus:x.useCallback(P=>b(P),[b]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>E(P=>P+1),[]),onFocusableItemRemove:x.useCallback(()=>E(P=>P-1),[]),children:m.jsx(He.div,{tabIndex:v||C===0?-1:0,"data-orientation":i,...d,ref:f,style:{outline:"none",...t.style},onMouseDown:ge(t.onMouseDown,()=>{k.current=!0}),onFocus:ge(t.onFocus,P=>{const N=!k.current;if(P.target===P.currentTarget&&N&&!v){const D=new CustomEvent(ub,uV);if(P.currentTarget.dispatchEvent(D),!D.defaultPrevented){const L=_().filter(ee=>ee.focusable),$=L.find(ee=>ee.active),G=L.find(ee=>ee.id===g),X=[$,G,...L].filter(Boolean).map(ee=>ee.ref.current);wL(X,c)}}k.current=!1}),onBlur:ge(t.onBlur,()=>y(!1))})})}),vL="RovingFocusGroupItem",yL=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,...o}=t,a=el(),l=s||a,u=fV(vL,n),c=u.currentTabStopId===l,d=mL(n),{onFocusableItemAdd:h,onFocusableItemRemove:f}=u;return x.useEffect(()=>{if(i)return h(),()=>f()},[i,h,f]),m.jsx(tS.ItemSlot,{scope:n,id:l,focusable:i,active:r,children:m.jsx(He.span,{tabIndex:c?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ge(t.onMouseDown,p=>{i?u.onItemFocus(l):p.preventDefault()}),onFocus:ge(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:ge(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=vV(p,u.orientation,u.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let v=d().filter(y=>y.focusable).map(y=>y.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const y=v.indexOf(p.currentTarget);v=u.loop?yV(v,y+1):v.slice(y+1)}setTimeout(()=>wL(v))}})})})});yL.displayName=vL;var mV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function gV(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function vV(t,e,n){const i=gV(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return mV[i]}function wL(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function yV(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var bL=gL,xL=yL;function wV(t,e){return x.useReducer((n,i)=>e[n][i]??n,t)}var Xo=t=>{const{present:e,children:n}=t,i=bV(e),r=typeof n=="function"?n({present:i.isPresent}):x.Children.only(n),s=ct(i.ref,xV(r));return typeof n=="function"||i.isPresent?x.cloneElement(r,{ref:s}):null};Xo.displayName="Presence";function bV(t){const[e,n]=x.useState(),i=x.useRef({}),r=x.useRef(t),s=x.useRef("none"),o=t?"mounted":"unmounted",[a,l]=wV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=Bm(i.current);s.current=a==="mounted"?u:"none"},[a]),Qn(()=>{const u=i.current,c=r.current;if(c!==t){const h=s.current,f=Bm(u);t?l("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&h!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),Qn(()=>{if(e){let u;const c=e.ownerDocument.defaultView??window,d=f=>{const g=Bm(i.current).includes(f.animationName);if(f.target===e&&g&&(l("ANIMATION_END"),!r.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},h=f=>{f.target===e&&(s.current=Bm(i.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{c.clearTimeout(u),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(u=>{u&&(i.current=getComputedStyle(u)),n(u)},[])}}function Bm(t){return(t==null?void 0:t.animationName)||"none"}function xV(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var cC="Tabs",[SV,She]=_l(cC,[C0]),SL=C0(),[_V,dC]=SV(cC),_L=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=t,c=$p(a),[d,h]=Bo({prop:i,onChange:r,defaultProp:s});return m.jsx(_V,{scope:n,baseId:el(),value:d,onValueChange:h,orientation:o,dir:c,activationMode:l,children:m.jsx(He.div,{dir:c,"data-orientation":o,...u,ref:e})})});_L.displayName=cC;var kL="TabsList",CL=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=dC(kL,n),o=SL(n);return m.jsx(bL,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:m.jsx(He.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});CL.displayName=kL;var EL="TabsTrigger",nS=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=dC(EL,n),a=SL(n),l=PL(o.baseId,i),u=TL(o.baseId,i),c=i===o.value;return m.jsx(xL,{asChild:!0,...a,focusable:!r,active:c,children:m.jsx(He.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":u,"data-state":c?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:ge(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:ge(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:ge(t.onFocus,()=>{const d=o.activationMode!=="manual";!c&&!r&&d&&o.onValueChange(i)})})})});nS.displayName=EL;var AL="TabsContent",Gg=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=dC(AL,n),l=PL(a.baseId,i),u=TL(a.baseId,i),c=i===a.value,d=x.useRef(c);return x.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),m.jsx(Xo,{present:r||c,children:({present:h})=>m.jsx(He.div,{"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});Gg.displayName=AL;function PL(t,e){return`${t}-trigger-${e}`}function TL(t,e){return`${t}-content-${e}`}const kr={BASE_URL:"/VonSim8/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};let kV=0;function ve(t,e){const n=`atom${++kV}`,i={toString(){return(kr?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=CV,i.write=EV),e&&(i.write=e),i}function CV(t){return t(this)}function EV(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const $2=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,cb=t=>"init"in t,db=t=>!!t.write,ey=new WeakMap,iS=t=>{var e;return rS(t)&&!((e=ey.get(t))!=null&&e[1])},AV=(t,e)=>{const n=ey.get(t);if(n)n[1]=!0,n[0].forEach(i=>i(e));else if((kr?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},PV=t=>{if(ey.has(t))return;const e=[new Set,!1];ey.set(t,e);const n=()=>{e[1]=!0};t.then(n,n),t.onCancel=i=>{e[0].add(i)}},rS=t=>typeof(t==null?void 0:t.then)=="function",B2=t=>"v"in t||"e"in t,zm=t=>{if("e"in t)throw t.e;if((kr?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},RL=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},z2=(t,e,n,i,r)=>{var s;if((kr?"production":void 0)!=="production"&&i===e)throw new Error("[Bug] atom cannot depend on itself");n.d.set(i,r.n),iS(n.v)&&RL(e,n.v,r),(s=r.m)==null||s.t.add(e),t&&TV(t,i,e)},Ku=()=>[new Map,new Map,new Set],hb=(t,e,n)=>{t[0].has(e)||t[0].set(e,new Set),t[1].set(e,n)},TV=(t,e,n)=>{const i=t[0].get(e);i&&i.add(n)},RV=(t,e)=>t[0].get(e),U2=(t,e)=>{t[2].add(e)},na=t=>{let e,n=!1;const i=r=>{try{r()}catch(s){n||(e=s,n=!0)}};for(;t[1].size||t[2].size;){t[0].clear();const r=new Set(t[1].values());t[1].clear();const s=new Set(t[2]);t[2].clear(),r.forEach(o=>{var a;return(a=o.m)==null?void 0:a.l.forEach(i)}),s.forEach(i)}if(n)throw e},NL=(...[t,e,n,i])=>{let r;(kr?"production":void 0)!=="production"&&(r=new Set);const s=(w,_,k)=>{const C="v"in _,E=_.v,P=iS(_.v)?_.v:null;if(rS(k)){PV(k);for(const N of _.d.keys())RL(w,k,t(N));_.v=k,delete _.e}else _.v=k,delete _.e;(!C||!Object.is(E,_.v))&&(++_.n,P&&AV(P,k))},o=(w,_,k)=>{var C;const E=t(_);if(B2(E)&&(E.m&&!(k!=null&&k.has(_))||Array.from(E.d).every(([G,z])=>o(w,G,k).n===z)))return E;E.d.clear();let P=!0;const N=G=>{if($2(_,G)){const X=t(G);if(!B2(X))if(cb(G))s(G,X,G.init);else throw new Error("no atom init");return zm(X)}const z=o(w,G,k);try{return zm(z)}finally{if(P)z2(w,_,E,G,z);else{const X=Ku();z2(X,_,E,G,z),f(X,_,E),na(X)}}};let D,L;const $={get signal(){return D||(D=new AbortController),D.signal},get setSelf(){return(kr?"production":void 0)!=="production"&&!db(_)&&console.warn("setSelf function cannot be used with read-only atom"),!L&&db(_)&&(L=(...G)=>{if((kr?"production":void 0)!=="production"&&P&&console.warn("setSelf function cannot be called in sync"),!P)return h(_,...G)}),L}};try{const G=e(_,N,$);if(s(_,E,G),rS(G)){(C=G.onCancel)==null||C.call(G,()=>D==null?void 0:D.abort());const z=()=>{if(E.m){const X=Ku();f(X,_,E),na(X)}};G.then(z,z)}return E}catch(G){return delete E.v,E.e=G,++E.n,E}finally{P=!1}},a=w=>zm(o(void 0,w)),l=(w,_,k)=>{var C,E;const P=new Map;for(const N of((C=k.m)==null?void 0:C.t)||[])P.set(N,t(N));for(const N of k.p)P.set(N,t(N));return(E=RV(w,_))==null||E.forEach(N=>{P.set(N,t(N))}),P};function u(w,_,k){const C=[],E=new Set,P=new Set,N=[[_,k]];for(;N.length>0;){const[D,L]=N[N.length-1];if(P.has(D)){N.pop();continue}if(E.has(D)){C.push([D,L,L.n]),P.add(D),N.pop();continue}E.add(D);for(const[$,G]of l(w,D,L))D!==$&&!E.has($)&&N.push([$,G])}return[C,P]}const c=(w,_,k)=>{const[C,E]=u(w,_,k),P=new Set([_]);for(let N=C.length-1;N>=0;--N){const[D,L,$]=C[N];let G=!1;for(const z of L.d.keys())if(z!==D&&P.has(z)){G=!0;break}G&&(o(w,D,E),f(w,D,L),$!==L.n&&(hb(w,D,L),P.add(D))),E.delete(D)}},d=(w,_,...k)=>{let C=!0;const E=N=>zm(o(w,N)),P=(N,...D)=>{const L=t(N);try{if($2(_,N)){if(!cb(N))throw new Error("atom not writable");const $=L.n,G=D[0];s(N,L,G),f(w,N,L),$!==L.n&&(hb(w,N,L),c(w,N,L));return}else return d(w,N,...D)}finally{C||na(w)}};try{return n(_,E,P,...k)}finally{C=!1}},h=(w,..._)=>{const k=Ku();try{return d(k,w,..._)}finally{na(k)}},f=(w,_,k)=>{if(k.m&&!iS(k.v)){for(const C of k.d.keys())k.m.d.has(C)||(p(w,C,t(C)).t.add(_),k.m.d.add(C));for(const C of k.m.d||[])if(!k.d.has(C)){k.m.d.delete(C);const E=g(w,C,t(C));E==null||E.t.delete(_)}}},p=(w,_,k)=>{if(!k.m){o(w,_);for(const C of k.d.keys())p(w,C,t(C)).t.add(_);if(k.m={l:new Set,d:new Set(k.d.keys()),t:new Set},(kr?"production":void 0)!=="production"&&r.add(_),db(_)){const C=k.m;let E;const P=(N,D)=>{let L=!0;E=(...$)=>{try{return d(N,_,...$)}finally{L||na(N)}};try{return D()}finally{L=!1}};U2(w,()=>{const N=P(w,()=>i(_,(...D)=>E(...D)));N&&(C.u=D=>P(D,N))})}}return k.m},g=(w,_,k)=>{if(k.m&&!k.m.l.size&&!Array.from(k.m.t).some(C=>{var E;return(E=t(C).m)==null?void 0:E.d.has(_)})){const C=k.m.u;C&&U2(w,()=>C(w)),delete k.m,(kr?"production":void 0)!=="production"&&r.delete(_);for(const E of k.d.keys()){const P=g(w,E,t(E));P==null||P.t.delete(_)}return}return k.m},y={get:a,set:h,sub:(w,_)=>{const k=Ku(),C=t(w),P=p(k,w,C).l;return P.add(_),na(k),()=>{P.delete(_);const N=Ku();g(N,w,C),na(N)}},unstable_derive:w=>NL(...w(t,e,n,i))};return(kr?"production":void 0)!=="production"&&Object.assign(y,{dev4_get_internal_weak_map:()=>({get:_=>{const k=t(_);if(k.n!==0)return k}}),dev4_get_mounted_atoms:()=>r,dev4_restore_atoms:_=>{const k=Ku();for(const[C,E]of _)if(cb(C)){const P=t(C),N=P.n;s(C,P,E),f(k,C,P),N!==P.n&&(hb(k,C,P),c(k,C,P))}na(k)}}),y},hC=()=>{const t=new WeakMap;return NL(n=>{if((kr?"production":void 0)!=="production"&&!n)throw new Error("Atom is undefined or null");let i=t.get(n);return i||(i={d:new Map,p:new Set,n:0},t.set(n,i)),i},(n,...i)=>n.read(...i),(n,...i)=>n.write(...i),(n,...i)=>{var r;return(r=n.onMount)==null?void 0:r.call(n,...i)})};let lh;const NV=()=>(lh||(lh=hC(),(kr?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=lh),globalThis.__JOTAI_DEFAULT_STORE__!==lh&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),lh),ML={BASE_URL:"/VonSim8/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},OL=x.createContext(void 0),IL=t=>x.useContext(OL)||NV(),MV=({children:t,store:e})=>{const n=x.useRef();return!e&&!n.current&&(n.current=hC()),x.createElement(OL.Provider,{value:e||n.current},t)},DL=t=>typeof(t==null?void 0:t.then)=="function",OV=t=>{t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e})},IV=sn.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(OV(t),t)}),fb=new WeakMap,DV=t=>{let e=fb.get(t);return e||(e=new Promise((n,i)=>{let r=t;const s=l=>u=>{r===l&&n(u)},o=l=>u=>{r===l&&i(u)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(u=>{if((ML?"production":void 0)!=="production"&&u===l)throw new Error("[Bug] p is not updated even after cancelation");DL(u)?(fb.set(u,e),r=u,u.then(s(u),o(u)),a(u)):n(u)})};t.then(s(t),o(t)),a(t)}),fb.set(t,e)),e};function lt(t,e){const n=IL(),[[i,r,s],o]=x.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let a=i;if((r!==n||s!==t)&&(o(),a=n.get(t)),x.useEffect(()=>{const u=n.sub(t,()=>{o()});return o(),u},[n,t,void 0]),x.useDebugValue(a),DL(a)){const u=DV(a);return IV(u)}return a}function LL(t,e){const n=IL();return x.useCallback((...r)=>{if((ML?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function Bp(t,e){return[lt(t),LL(t)]}const{createElement:wd,createContext:LV,createRef:_he,forwardRef:jL,useCallback:xi,useContext:FL,useEffect:hu,useImperativeHandle:$L,useLayoutEffect:jV,useMemo:FV,useRef:qi,useState:ty}=ak,H2=ak.useId,E0=LV(null);E0.displayName="PanelGroupContext";const $f=jV,$V=typeof H2=="function"?H2:()=>null;let BV=0;function fC(t=null){const e=$V(),n=qi(t||e||null);return n.current===null&&(n.current=""+BV++),t??n.current}function BL({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:u,onExpand:c,onResize:d,order:h,style:f,tagName:p="div",...g}){const b=FL(E0);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:y,getPanelSize:w,getPanelStyle:_,groupId:k,isPanelCollapsed:C,reevaluatePanelConstraints:E,registerPanel:P,resizePanel:N,unregisterPanel:D}=b,L=fC(o),$=qi({callbacks:{onCollapse:u,onExpand:c,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:L,idIsFromProps:o!==void 0,order:h});qi({didLogMissingDefaultSizeWarning:!1}),$f(()=>{const{callbacks:z,constraints:X}=$.current,ee={...X};$.current.id=L,$.current.idIsFromProps=o!==void 0,$.current.order=h,z.onCollapse=u,z.onExpand=c,z.onResize=d,X.collapsedSize=n,X.collapsible=i,X.defaultSize=r,X.maxSize=a,X.minSize=l,(ee.collapsedSize!==X.collapsedSize||ee.collapsible!==X.collapsible||ee.maxSize!==X.maxSize||ee.minSize!==X.minSize)&&E($.current,ee)}),$f(()=>{const z=$.current;return P(z),()=>{D(z)}},[h,L,P,D]),$L(s,()=>({collapse:()=>{v($.current)},expand:()=>{y($.current)},getId(){return L},getSize(){return w($.current)},isCollapsed(){return C($.current)},isExpanded(){return!C($.current)},resize:z=>{N($.current,z)}}),[v,y,w,C,L,N]);const G=_($.current,r);return wd(p,{...g,children:t,className:e,style:{...G,...f},"data-panel":"","data-panel-id":L,"data-panel-group-id":k,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const Kg=jL((t,e)=>wd(BL,{...t,forwardedRef:e}));BL.displayName="Panel";Kg.displayName="forwardRef(Panel)";function Ge(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const zL=10;function Bf(t,e,n=zL){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function Gi(t,e,n){return Bf(t,e,n)===0}function Cc({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];Ge(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(Bf(n,a)<0)if(s){const l=(r+a)/2;Bf(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(zL)),n}function Nh({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(Gi(t,0))return e;const s=[...e],[o,a]=i;Ge(o!=null),Ge(a!=null);let l=0;if(r==="keyboard"){{const c=t<0?a:o,d=n[c];if(Ge(d),d.collapsible){const h=e[c];Ge(h!=null);const f=n[c];Ge(f);const{collapsedSize:p=0,minSize:g=0}=f;if(Gi(h,p)){const b=g-h;Bf(b,Math.abs(t))>0&&(t=t<0?0-b:b)}}}{const c=t<0?o:a,d=n[c];Ge(d);const{collapsible:h}=d;if(h){const f=e[c];Ge(f!=null);const p=n[c];Ge(p);const{collapsedSize:g=0,minSize:b=0}=p;if(Gi(f,b)){const v=f-g;Bf(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}}{const c=t<0?1:-1;let d=t<0?a:o,h=0;for(;;){const p=e[d];Ge(p!=null);const b=Cc({panelConstraints:n,panelIndex:d,size:100})-p;if(h+=b,d+=c,d<0||d>=n.length)break}const f=Math.min(Math.abs(t),Math.abs(h));t=t<0?0-f:f}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const h=Math.abs(t)-Math.abs(l),f=e[d];Ge(f!=null);const p=f-h,g=Cc({panelConstraints:n,panelIndex:d,size:p});if(!Gi(f,g)&&(l+=f-g,s[d]=g,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(Gi(l,0))return e;{const c=t<0?a:o,d=e[c];Ge(d!=null);const h=d+l,f=Cc({panelConstraints:n,panelIndex:c,size:h});if(s[c]=f,!Gi(f,h)){let p=h-f,b=t<0?a:o;for(;b>=0&&b<n.length;){const v=s[b];Ge(v!=null);const y=v+p,w=Cc({panelConstraints:n,panelIndex:b,size:y});if(Gi(v,w)||(p-=w-v,s[b]=w),Gi(p,0))break;t>0?b--:b++}}}const u=s.reduce((c,d)=>d+c,0);return Gi(u,100)?s:e}function zV({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];Ge(a!=null),e.forEach((d,h)=>{const{constraints:f}=d,{maxSize:p=100,minSize:g=0}=f;h===a?(i=g,r=p):(s+=g,o+=p)});const l=Math.min(r,100-s),u=Math.max(i,100-o),c=t[a];return{valueMax:l,valueMin:u,valueNow:c}}function zf(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function UL(t,e,n=document){const r=zf(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function HL(t,e,n){const i=UL(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function VL(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function A0(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function UV(t,e,n,i=document){var r,s,o,a;const l=A0(e,i),u=zf(t,i),c=l?u.indexOf(l):-1,d=(r=(s=n[c])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,h=(o=(a=n[c+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,h]}function HV({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){qi({didWarnAboutMissingResizeHandle:!1}),$f(()=>{if(!s)return;const a=zf(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:u,valueMin:c,valueNow:d}=zV({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),h=a[l];if(h!=null){const f=r[l];Ge(f),h.setAttribute("aria-controls",f.id),h.setAttribute("aria-valuemax",""+Math.round(u)),h.setAttribute("aria-valuemin",""+Math.round(c)),h.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,u)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),hu(()=>{if(!s)return;const a=e.current;Ge(a);const{panelDataArray:l}=a,u=VL(n,s);Ge(u!=null,`No group found for id "${n}"`);const c=zf(n,s);Ge(c);const d=c.map(h=>{const f=h.getAttribute("data-panel-resize-handle-id");Ge(f);const[p,g]=UV(n,f,l,s);if(p==null||g==null)return()=>{};const b=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const y=l.findIndex(w=>w.id===p);if(y>=0){const w=l[y];Ge(w);const _=i[y],{collapsedSize:k=0,collapsible:C,minSize:E=0}=w.constraints;if(_!=null&&C){const P=Nh({delta:Gi(_,k)?E-k:k-_,layout:i,panelConstraints:l.map(N=>N.constraints),pivotIndices:HL(n,f,s),trigger:"keyboard"});i!==P&&o(P)}}break}}};return h.addEventListener("keydown",b),()=>{h.removeEventListener("keydown",b)}});return()=>{d.forEach(h=>h())}},[s,t,e,n,i,r,o])}function V2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function WL(t){return t.type==="keydown"}function GL(t){return t.type.startsWith("mouse")}function KL(t){return t.type.startsWith("touch")}function XL(t,e){const n=t==="horizontal";if(GL(e))return n?e.clientX:e.clientY;if(KL(e)){const i=e.touches[0];return Ge(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function VV(t,e,n,i,r){const s=n==="horizontal",o=A0(e,r);Ge(o);const a=o.getAttribute("data-panel-group-id");Ge(a);let{initialCursorPosition:l}=i;const u=XL(n,t),c=VL(a,r);Ge(c);const d=c.getBoundingClientRect(),h=s?d.width:d.height;return(u-l)/h*100}function WV(t,e,n,i,r,s){if(WL(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:VV(t,e,n,i,s)}function GV({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];Ge(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];Ge(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,u=r/l;i++,e[s]=u,r-=u}return e}function Xu(t,e,n){e.forEach((i,r)=>{const s=t[r];Ge(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:u=0,collapsible:c}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:h,onExpand:f,onResize:p}=o;p&&p(i,d),c&&(h||f)&&(f&&(d==null||d===u)&&i!==u&&f(),h&&(d==null||d!==u)&&i===u&&h())}})}function Um(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function KV({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let sS=null,su=null;function qL(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function XV(){su!==null&&(document.head.removeChild(su),sS=null,su=null)}function pb(t){if(sS===t)return;sS=t;const e=qL(t);su===null&&(su=document.createElement("style"),document.head.appendChild(su)),su.innerHTML=`*{cursor: ${e}!important;}`}function qV(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function W2(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function YL(t){return`react-resizable-panels:${t}`}function ZL(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function JL(t,e){try{const n=YL(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function YV(t,e,n){var i,r;const s=(i=JL(t,n))!==null&&i!==void 0?i:{},o=ZL(e);return(r=s[o])!==null&&r!==void 0?r:null}function ZV(t,e,n,i,r){var s;const o=YL(t),a=ZL(e),l=(s=JL(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(u){console.error(u)}}function G2({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Gi(i,100))for(let s=0;s<e.length;s++){const o=n[s];Ge(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];Ge(o!=null);const a=Cc({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!Gi(r,0))for(let s=0;s<e.length;s++){const o=n[s];Ge(o!=null);const a=o+r,l=Cc({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,Gi(r,0)))break}return n}const JV=100,Mh={getItem:t=>(W2(Mh),Mh.getItem(t)),setItem:(t,e)=>{W2(Mh),Mh.setItem(t,e)}},K2={};function QL({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=Mh,style:u,tagName:c="div",...d}){const h=fC(s),f=qi(null),[p,g]=ty(null),[b,v]=ty([]),y=qi({}),w=qi(new Map),_=qi(0),k=qi({autoSaveId:t,direction:i,dragState:p,id:h,keyboardResizeBy:a,onLayout:o,storage:l}),C=qi({layout:b,panelDataArray:[],panelDataArrayChanged:!1});qi({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),$L(r,()=>({getId:()=>k.current.id,getLayout:()=>{const{layout:Z}=C.current;return Z},setLayout:Z=>{const{onLayout:ue}=k.current,{layout:I,panelDataArray:O}=C.current,B=G2({layout:Z,panelConstraints:O.map(S=>S.constraints)});V2(I,B)||(v(B),C.current.layout=B,ue&&ue(B),Xu(O,B,y.current))}}),[]),$f(()=>{k.current.autoSaveId=t,k.current.direction=i,k.current.dragState=p,k.current.id=h,k.current.onLayout=o,k.current.storage=l}),HV({committedValuesRef:k,eagerValuesRef:C,groupId:h,layout:b,panelDataArray:C.current.panelDataArray,setLayout:v,panelGroupElement:f.current}),hu(()=>{const{panelDataArray:Z}=C.current;if(t){if(b.length===0||b.length!==Z.length)return;let ue=K2[t];ue==null&&(ue=qV(ZV,JV),K2[t]=ue);const I=[...Z],O=new Map(w.current);ue(t,I,O,b,l)}},[t,b,l]),hu(()=>{});const E=xi(Z=>{const{onLayout:ue}=k.current,{layout:I,panelDataArray:O}=C.current;if(Z.constraints.collapsible){const B=O.map(R=>R.constraints),{collapsedSize:S=0,panelSize:T,pivotIndices:M}=Fl(O,Z,I);if(Ge(T!=null),T!==S){w.current.set(Z.id,T);const K=rc(O,Z)===O.length-1?T-S:S-T,W=Nh({delta:K,layout:I,panelConstraints:B,pivotIndices:M,trigger:"imperative-api"});Um(I,W)||(v(W),C.current.layout=W,ue&&ue(W),Xu(O,W,y.current))}}},[]),P=xi(Z=>{const{onLayout:ue}=k.current,{layout:I,panelDataArray:O}=C.current;if(Z.constraints.collapsible){const B=O.map(K=>K.constraints),{collapsedSize:S=0,panelSize:T,minSize:M=0,pivotIndices:R}=Fl(O,Z,I);if(T===S){const K=w.current.get(Z.id),W=K!=null&&K>=M?K:M,q=rc(O,Z)===O.length-1?T-W:W-T,Te=Nh({delta:q,layout:I,panelConstraints:B,pivotIndices:R,trigger:"imperative-api"});Um(I,Te)||(v(Te),C.current.layout=Te,ue&&ue(Te),Xu(O,Te,y.current))}}},[]),N=xi(Z=>{const{layout:ue,panelDataArray:I}=C.current,{panelSize:O}=Fl(I,Z,ue);return Ge(O!=null),O},[]),D=xi((Z,ue)=>{const{panelDataArray:I}=C.current,O=rc(I,Z);return KV({defaultSize:ue,dragState:p,layout:b,panelData:I,panelIndex:O})},[p,b]),L=xi(Z=>{const{layout:ue,panelDataArray:I}=C.current,{collapsedSize:O=0,collapsible:B,panelSize:S}=Fl(I,Z,ue);return B===!0&&S===O},[]),$=xi(Z=>{const{layout:ue,panelDataArray:I}=C.current,{collapsedSize:O=0,collapsible:B,panelSize:S}=Fl(I,Z,ue);return Ge(S!=null),!B||S>O},[]),G=xi(Z=>{const{panelDataArray:ue}=C.current;ue.push(Z),ue.sort((I,O)=>{const B=I.order,S=O.order;return B==null&&S==null?0:B==null?-1:S==null?1:B-S}),C.current.panelDataArrayChanged=!0},[]);$f(()=>{if(C.current.panelDataArrayChanged){C.current.panelDataArrayChanged=!1;const{autoSaveId:Z,onLayout:ue,storage:I}=k.current,{layout:O,panelDataArray:B}=C.current;let S=null;if(Z){const M=YV(Z,B,I);M&&(w.current=new Map(Object.entries(M.expandToSizes)),S=M.layout)}S==null&&(S=GV({panelDataArray:B}));const T=G2({layout:S,panelConstraints:B.map(M=>M.constraints)});V2(O,T)||(v(T),C.current.layout=T,ue&&ue(T),Xu(B,T,y.current))}});const z=xi(Z=>function(I){I.preventDefault();const O=f.current;if(!O)return()=>null;const{direction:B,dragState:S,id:T,keyboardResizeBy:M,onLayout:R}=k.current,{layout:K,panelDataArray:W}=C.current,{initialLayout:te}=S??{},q=HL(T,Z,O);let Te=WV(I,Z,B,S,M,O);if(Te===0)return;const Le=B==="horizontal";document.dir==="rtl"&&Le&&(Te=-Te);const Fe=W.map(me=>me.constraints),De=Nh({delta:Te,layout:te??K,panelConstraints:Fe,pivotIndices:q,trigger:WL(I)?"keyboard":"mouse-or-touch"}),Ve=!Um(K,De);(GL(I)||KL(I))&&_.current!=Te&&(_.current=Te,pb(Ve?Le?"horizontal":"vertical":Le?Te<0?"horizontal-min":"horizontal-max":Te<0?"vertical-min":"vertical-max")),Ve&&(v(De),C.current.layout=De,R&&R(De),Xu(W,De,y.current))},[]),X=xi((Z,ue)=>{const{onLayout:I}=k.current,{layout:O,panelDataArray:B}=C.current,S=B.map(te=>te.constraints),{panelSize:T,pivotIndices:M}=Fl(B,Z,O);Ge(T!=null);const K=rc(B,Z)===B.length-1?T-ue:ue-T,W=Nh({delta:K,layout:O,panelConstraints:S,pivotIndices:M,trigger:"imperative-api"});Um(O,W)||(v(W),C.current.layout=W,I&&I(W),Xu(B,W,y.current))},[]),ee=xi((Z,ue)=>{const{layout:I,panelDataArray:O}=C.current,{collapsedSize:B=0,collapsible:S}=ue,{collapsedSize:T=0,collapsible:M,maxSize:R=100,minSize:K=0}=Z.constraints,{panelSize:W}=Fl(O,Z,I);Ge(W!=null),S&&M&&W===B?B!==T&&X(Z,T):W<K?X(Z,K):W>R&&X(Z,R)},[X]),he=xi((Z,ue)=>{const{direction:I}=k.current,{layout:O}=C.current;if(!f.current)return;const B=A0(Z,f.current);Ge(B);const S=XL(I,ue);g({dragHandleId:Z,dragHandleRect:B.getBoundingClientRect(),initialCursorPosition:S,initialLayout:O})},[]),V=xi(()=>{XV(),g(null)},[]),F=xi(Z=>{const{panelDataArray:ue}=C.current,I=rc(ue,Z);I>=0&&(ue.splice(I,1),delete y.current[Z.id],C.current.panelDataArrayChanged=!0)},[]),ne=FV(()=>({collapsePanel:E,direction:i,dragState:p,expandPanel:P,getPanelSize:N,getPanelStyle:D,groupId:h,isPanelCollapsed:L,isPanelExpanded:$,reevaluatePanelConstraints:ee,registerPanel:G,registerResizeHandle:z,resizePanel:X,startDragging:he,stopDragging:V,unregisterPanel:F,panelGroupElement:f.current}),[E,p,i,P,N,D,h,L,$,ee,G,z,X,he,V,F]),Se={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return wd(E0.Provider,{value:ne},wd(c,{...d,children:e,className:n,style:{...Se,...u},ref:f,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":h}))}const ej=jL((t,e)=>wd(QL,{...t,forwardedRef:e}));QL.displayName="PanelGroup";ej.displayName="forwardRef(PanelGroup)";function rc(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Fl(t,e,n){const i=rc(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function QV({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){hu(()=>{if(t||n==null||i==null)return;const r=A0(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");Ge(a);const l=zf(a,i),u=UL(a,e,i);Ge(u!==null);const c=o.shiftKey?u>0?u-1:l.length-1:u+1<l.length?u+1:0;l[c].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function oS({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const u=qi(null),c=qi({onDragging:r});hu(()=>{c.current.onDragging=r});const d=FL(E0);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:h,dragState:f,groupId:p,registerResizeHandle:g,startDragging:b,stopDragging:v,panelGroupElement:y}=d,w=fC(i),_=(f==null?void 0:f.dragHandleId)===w,[k,C]=ty(!1),[E,P]=ty(null),N=xi(()=>{const L=u.current;Ge(L),L.blur(),v();const{onDragging:$}=c.current;$&&$(!1)},[v]);hu(()=>{if(n)P(null);else{const L=g(w);P(()=>L)}},[n,w,g]),hu(()=>{if(n||E==null||!_)return;const L=X=>{E(X)},$=X=>{E(X)},G=u.current;Ge(G);const z=G.ownerDocument;return z.body.addEventListener("contextmenu",N),z.body.addEventListener("mousemove",L),z.body.addEventListener("touchmove",L),z.body.addEventListener("mouseleave",$),window.addEventListener("mouseup",N),window.addEventListener("touchend",N),()=>{z.body.removeEventListener("contextmenu",N),z.body.removeEventListener("mousemove",L),z.body.removeEventListener("touchmove",L),z.body.removeEventListener("mouseleave",$),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N)}},[h,n,_,E,N]),QV({disabled:n,handleId:w,resizeHandler:E,panelGroupElement:y});const D={cursor:qL(h),touchAction:"none",userSelect:"none"};return wd(a,{...l,children:t,className:e,onBlur:()=>C(!1),onFocus:()=>C(!0),onMouseDown:L=>{b(w,L.nativeEvent);const $=c.current;Ge($);const{onDragging:G}=$;G&&G(!0)},onMouseUp:N,onTouchCancel:N,onTouchEnd:N,onTouchStart:L=>{b(w,L.nativeEvent);const $=c.current;Ge($);const{onDragging:G}=$;G&&G(!0)},ref:u,role:"separator",style:{...D,...s},tabIndex:o,"data-panel-group-direction":h,"data-panel-group-id":p,"data-resize-handle":"","data-resize-handle-active":_?"pointer":k?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w})}oS.displayName="PanelResizeHandle";var js=function(){return js=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},js.apply(this,arguments)};function tj(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function e7(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var t7=function(){};function n7(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function i7(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var nj=typeof window<"u",r7=nj?window:null,X2=function(t){return!!t.addEventListener},q2=function(t){return!!t.on},Xg=function(t,e,n,i){n===void 0&&(n=r7),x.useEffect(function(){if(e&&n)return X2(n)?n7(n,t,e,i):q2(n)&&n.on(t,e,i),function(){X2(n)?i7(n,t,e,i):q2(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},s7=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},fu=function(t,e,n,i){e===void 0&&(e=t7),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=x.useMemo(function(){var u=s7(t),c=function(d){if(u(d))return e(d)};return c},i);Xg(s,l,o,a)},o7=function(t,e){return nj?window.matchMedia(t).matches:!1},a7=function(t,e){var n=x.useState(o7(t)),i=n[0],r=n[1];return x.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};const l7="modulepreload",u7=function(t){return"/VonSim8/"+t},Y2={},c7=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=u7(l),l in Y2)return;Y2[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":l7,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function d7(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l,u;const c=async(h=!0)=>{await l,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){if(a=await c7(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(h=>{o==null||o(h)}),!a)return;u=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let h=!1;const f=()=>{h=!0,a==null||a.addEventListener("controlling",p=>{p.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",p=>{typeof p.isUpdate>"u"?typeof p.isExternal<"u"?p.isExternal?f():!h&&(i==null||i()):p.isExternal?window.location.reload():!h&&(i==null||i()):p.isUpdate||i==null||i()}),a.addEventListener("waiting",f),a.addEventListener("externalwaiting",f)}a.register({immediate:e}).then(h=>{s?s("/VonSim8/sw.js",h):r==null||r(h)}).catch(h=>{o==null||o(h)})}}return l=d(),c}function h7(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=x.useState(!1),[u,c]=x.useState(!1),[d]=x.useState(()=>d7({immediate:e,onOfflineReady(){c(!0),i==null||i()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[u,c],updateServiceWorker:d}}class ht{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=bd(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Fs.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=bd(this,e,n);let i=[];return this.decompose(e,n,i,0),Fs.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new rf(this),s=new rf(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new rf(this,e)}iterRange(e,n=this.length){return new ij(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new rj(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ht.empty:e.length<=32?new Zt(e):Fs.from(Zt.split(e,[]))}}class Zt extends ht{constructor(e,n=f7(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new p7(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new Zt(Z2(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=qg(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Zt(a,o.length+s.length));else{let l=a.length>>1;i.push(new Zt(a.slice(0,l)),new Zt(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof Zt))return super.replace(e,n,i);[e,n]=bd(this,e,n);let r=qg(this.text,qg(i.text,Z2(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new Zt(r,s):Fs.from(Zt.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=bd(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new Zt(i,r)),i=[],r=-1);return r>-1&&n.push(new Zt(i,r)),n}}class Fs extends ht{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?i.push(a):a.decompose(e-o,n-o,i,u)}o=l+1}}replace(e,n,i){if([e,n]=bd(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[r]=l,new Fs(c,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=bd(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Fs))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],u=e.children[s];if(l!=u)return i+l.scanIdentical(u,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new Zt(f,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof Fs)for(let g of f.children)d(g);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof Zt&&l&&(p=c[c.length-1])instanceof Zt&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new Zt(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>r&&h(),l+=f.lines,u+=f.length+1,c.push(f))}function h(){l!=0&&(a.push(c.length==1?c[0]:Fs.from(c,u)),u=-1,l=c.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new Fs(a,n)}}ht.empty=new Zt([""],0);function f7(t){let e=-1;for(let n of t)e+=n.length+1;return e}function qg(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function Z2(t,e,n){return qg(t,[""],e,n)}class rf{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Zt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Zt?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Zt){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Zt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class ij{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new rf(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class rj{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ht.prototype[Symbol.iterator]=function(){return this.iter()},rf.prototype[Symbol.iterator]=ij.prototype[Symbol.iterator]=rj.prototype[Symbol.iterator]=function(){return this});class p7{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function bd(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}let Vc="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Vc.length;t++)Vc[t]+=Vc[t-1];function m7(t){for(let e=1;e<Vc.length;e+=2)if(Vc[e]>t)return Vc[e-1]<=t;return!1}function J2(t){return t>=127462&&t<=127487}const Q2=8205;function Bn(t,e,n=!0,i=!0){return(n?sj:g7)(t,e,i)}function sj(t,e,n){if(e==t.length)return e;e&&oj(t.charCodeAt(e))&&aj(t.charCodeAt(e-1))&&e--;let i=di(t,e);for(e+=is(i);e<t.length;){let r=di(t,e);if(i==Q2||r==Q2||n&&m7(r))e+=is(r),i=r;else if(J2(r)){let s=0,o=e-2;for(;o>=0&&J2(di(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function g7(t,e,n){for(;e>0;){let i=sj(t,e-2,n);if(i<e)return i;e--}return 0}function oj(t){return t>=56320&&t<57344}function aj(t){return t>=55296&&t<56320}function di(t,e){let n=t.charCodeAt(e);if(!aj(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return oj(i)?(n-55296<<10)+(i-56320)+65536:n}function pC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function is(t){return t<65536?1:2}const aS=/\r\n?|\n/;var Ni=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Ni||(Ni={}));class qs{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){lS(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new qs(e)}composeDesc(e){return this.empty?e:e.empty?this:lj(this,e)}mapDesc(e,n=!1){return e.empty?this:uS(this,e,n)}mapPos(e,n=-1,i=Ni.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=r+a;if(l<0){if(u>e)return s+(e-r);s+=a}else{if(i!=Ni.Simple&&u>=e&&(i==Ni.TrackDel&&r<e&&u>e||i==Ni.TrackBefore&&r<e||i==Ni.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new qs(e)}static create(e){return new qs(e)}}class hn extends qs{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return lS(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return uS(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(ht.empty);i.push(o?e.slice(s,s+o):ht.empty)}s+=o}return new hn(n,i)}compose(e){return this.empty?e:e.empty?this:lj(this,e,!0)}map(e,n=!1){return e.empty?this:uS(this,e,n,!0)}iterChanges(e,n=!1){lS(this,e,n)}get desc(){return qs.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Uf(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);Xn(r,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Xn(n,c,d),d>0&&Ta(i,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);Xn(n,c,-1),Xn(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new hn(n,i),filtered:qs.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!r.length)return;o<n&&Xn(r,n-o,-1);let d=new hn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof hn){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?ht.of(f.split(i||aS)):f:ht.empty,g=p.length;if(d==h&&g==0)return;d<o&&l(),d>o&&Xn(r,d-o,-1),Xn(r,h-d,g),Ta(s,r,p),o=h}}return u(e),l(!a),a}static empty(e){return new hn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(ht.empty);i[r]=ht.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new hn(n,i)}static createSet(e,n){return new hn(e,n)}}function Xn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Ta(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(ht.empty);t.push(n)}}function lS(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let u=r,c=s,d=ht.empty;for(;u+=a,c+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,u,s,c,d),r=u,s=c}}}function uS(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Uf(t),a=new Uf(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);Xn(r,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(Xn(r,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(Xn(r,0,o.ins),s&&Ta(s,r,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let d=Math.min(c,a.len);u+=d,c-=d,a.forward(d)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;Xn(r,u,l<o.i?o.ins:0),s&&l<o.i&&Ta(s,r,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?hn.createSet(r,s):qs.create(r);throw new Error("Mismatched change set lengths")}}function lj(t,e,n=!1){let i=[],r=n?[]:null,s=new Uf(t),o=new Uf(e);for(let a=!1;;){if(s.done&&o.done)return r?hn.createSet(i,r):qs.create(i);if(s.ins==0)Xn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)Xn(i,0,o.ins,a),r&&Ta(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Xn(i,l,c,a),r&&c&&Ta(r,i,o.text)}else o.ins==-1?(Xn(i,s.off?0:s.len,l,a),r&&Ta(r,i,s.textBit(l))):(Xn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Ta(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>u),s.forward2(l),o.forward(l)}}}}class Uf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?ht.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?ht.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ou{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new ou(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return ie.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return ie.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(e.anchor,e.head)}static create(e,n,i){return new ou(e,n,i)}}class ie{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:ie.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(e,n=!0){return ie.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,ie.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(e.ranges.map(n=>ou.fromJSON(n)),e.main)}static single(e,n=e){return new ie([ie.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return ie.normalized(e.slice(),n);i=s.to}return new ie(e,n)}static cursor(e,n=0,i,r){return ou.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?ou.create(n,e,48|s):ou.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?ie.range(l,a):ie.range(a,l))}}return new ie(e,n)}}function uj(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let mC=0;class Ee{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=mC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ee(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:gC),!!e.static,e.enables)}of(e){return new Yg([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Yg(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Yg(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function gC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class Yg{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=mC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||cS(d,c)){let f=i(d);if(a?!eT(f,d.values[o],r):!r(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let g=iy(h,p);if(this.dependencies.every(b=>b instanceof Ee?h.facet(b)===d.facet(b):b instanceof wi?h.field(b,!1)==d.field(b,!1):!0)||(a?eT(f=i(d),g,r):r(f=i(d),g)))return d.values[o]=g,0}else f=i(d);return d.values[o]=f,1}}}}function eT(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function cS(t,e){let n=!1;for(let i of e)sf(t,i)&1&&(n=!0);return n}function v7(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<i.length;c++){let d=iy(l,i[c]);if(r[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(l){for(let u of i)sf(l,u);return l.values[o]=a(l),1},update(l,u){if(!cS(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=cS(l,i),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&gC(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const tT=Ee.define({static:!0});class wi{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new wi(mC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(tT).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,tT.of({field:this,create:e})]}get extension(){return this}}const Xl={lowest:4,low:3,default:2,high:1,highest:0};function uh(t){return e=>new cj(e,t)}const zp={highest:uh(Xl.highest),high:uh(Xl.high),default:uh(Xl.default),low:uh(Xl.low),lowest:uh(Xl.lowest)};class cj{constructor(e,n){this.inner=e,this.prec=n}}class Up{of(e){return new dS(this,e)}reconfigure(e){return Up.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class dS{constructor(e,n){this.compartment=e,this.inner=n}}class ny{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of y7(e,n,o))h instanceof wi?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],u=[];for(let h of r)a[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],p=f[0].facet,g=c&&c[h]||[];if(f.every(b=>b.type==0))if(a[p.id]=l.length<<1|1,gC(g,f))l.push(i.facet(p));else{let b=p.combine(f.map(v=>v.value));l.push(i&&p.compare(b,i.facet(p))?i.facet(p):b)}else{for(let b of f)b.type==0?(a[b.id]=l.length<<1|1,l.push(b.value)):(a[b.id]=u.length<<1,u.push(v=>b.dynamicSlot(v)));a[p.id]=u.length<<1,u.push(b=>v7(b,p,f))}}let d=u.map(h=>h(a));return new ny(e,o,d,a,l,s)}}function y7(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let u=i[l].indexOf(o);u>-1&&i[l].splice(u,1),o instanceof dS&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof dS){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof cj)s(o.inner,o.prec);else if(o instanceof wi)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Yg)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Xl.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,Xl.default),i.reduce((o,a)=>o.concat(a))}function sf(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function iy(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const dj=Ee.define(),hS=Ee.define({combine:t=>t.some(e=>e),static:!0}),hj=Ee.define({combine:t=>t.length?t[0]:void 0,static:!0}),fj=Ee.define(),pj=Ee.define(),mj=Ee.define(),gj=Ee.define({combine:t=>t.length?t[0]:!1});class qo{constructor(e,n){this.type=e,this.value=n}static define(){return new w7}}class w7{of(e){return new qo(this,e)}}class b7{constructor(e){this.map=e}of(e){return new Ze(this,e)}}class Ze{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Ze(this.type,n)}is(e){return this.type==e}static define(e={}){return new b7(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}Ze.reconfigure=Ze.define();Ze.appendConfig=Ze.define();class yn{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&uj(i,n.newLength),s.some(a=>a.type==yn.time)||(this.annotations=s.concat(yn.time.of(Date.now())))}static create(e,n,i,r,s,o){return new yn(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(yn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}yn.time=qo.define();yn.userEvent=qo.define();yn.addToHistory=qo.define();yn.remote=qo.define();function x7(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function vj(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=hn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:Ze.mapEffects(t.effects,r).concat(Ze.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function fS(t,e,n){let i=e.selection,r=Wc(e.annotations);return e.userEvent&&(r=r.concat(yn.userEvent.of(e.userEvent))),{changes:e.changes instanceof hn?e.changes:hn.of(e.changes||[],n,t.facet(hj)),selection:i&&(i instanceof ie?i:ie.single(i.anchor,i.head)),effects:Wc(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function yj(t,e,n){let i=fS(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=vj(i,fS(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=yn.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return _7(n?S7(r):r)}function S7(t){let e=t.startState,n=!0;for(let r of e.facet(fj)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:x7(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=hn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=yn.create(e,r,t.selection&&t.selection.map(s),Ze.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(pj);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof yn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof yn?t=s[0]:t=yj(e,Wc(s),!1)}return t}function _7(t){let e=t.startState,n=e.facet(mj),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=vj(i,fS(e,s,t.changes.newLength),!0))}return i==t?t:yn.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const k7=[];function Wc(t){return t==null?k7:Array.isArray(t)?t:[t]}var zn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(zn||(zn={}));const C7=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let pS;try{pS=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function E7(t){if(pS)return pS.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||C7.test(n)))return!0}return!1}function A7(t){return e=>{if(!/\S/.test(e))return zn.Space;if(E7(e))return zn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return zn.Word;return zn.Other}}class it{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)sf(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return sf(this,i),iy(this,i)}update(...e){return yj(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(Up.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,u)=>r.set(u,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(Ze.reconfigure)?(n=null,i=a.value):a.is(Ze.appendConfig)&&(n=null,i=Wc(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=ny.resolve(i,r,this),s=new it(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(hS)?e.newSelection:e.newSelection.asSingle();new it(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:ie.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=Wc(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(r);for(let h=0;h<a;h++)s[h]=s[h].map(c);let d=r.mapDesc(u,!0);s.push(l.range.map(d)),r=r.compose(c),o=Ze.mapEffects(o,c).concat(Ze.mapEffects(Wc(l.effects),d))}return{changes:r,selection:ie.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof hn?e:hn.of(e,this.doc.length,this.facet(it.lineSeparator))}toText(e){return ht.of(e.split(this.facet(it.lineSeparator)||aS))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(sf(this,n),iy(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof wi&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return it.create({doc:e.doc,selection:ie.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=ny.resolve(e.extensions||[],new Map),i=e.doc instanceof ht?e.doc:ht.of((e.doc||"").split(n.staticFacet(it.lineSeparator)||aS)),r=e.selection?e.selection instanceof ie?e.selection:ie.single(e.selection.anchor,e.selection.head):ie.single(0);return uj(r,i.length),n.staticFacet(hS)||(r=r.asSingle()),new it(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(it.tabSize)}get lineBreak(){return this.facet(it.lineSeparator)||`
`}get readOnly(){return this.facet(gj)}phrase(e,...n){for(let i of this.facet(it.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(dj))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return A7(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=Bn(n,o,!1);if(s(n.slice(l,o))!=zn.Word)break;o=l}for(;a<r;){let l=Bn(n,a);if(s(n.slice(a,l))!=zn.Word)break;a=l}return o==a?null:ie.range(o+i,a+i)}}it.allowMultipleSelections=hS;it.tabSize=Ee.define({combine:t=>t.length?t[0]:4});it.lineSeparator=hj;it.readOnly=gj;it.phrases=Ee.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});it.languageData=dj;it.changeFilter=fj;it.transactionFilter=pj;it.transactionExtender=mj;Up.reconfigure=Ze.define();function kl(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class ku{eq(e){return this==e}range(e,n=e){return mS.create(e,n,this)}}ku.prototype.startSide=ku.prototype.endSide=0;ku.prototype.point=!1;ku.prototype.mapMode=Ni.TrackDel;let mS=class wj{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new wj(e,n,i)}};function gS(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class vC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,d=this.to[l]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(a=Math.max(a,f-h)),i.push(u),r.push(h-o),s.push(f-o))}return{mapped:i.length?new vC(r,s,i,a):null,pos:o}}}class pt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new pt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(gS)),this.isEmpty)return n.length?pt.of(n):this;let a=new bj(this,null,-1).goto(0),l=0,u=[],c=new Cu;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];c.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(mS.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?pt.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:d}=l.map(a,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new pt(i,n,s||pt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Hf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Hf.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=nT(o,a,i),u=new ch(o,l,s),c=new ch(a,l,s);i.iterGaps((d,h,f)=>iT(u,d,c,h,f,r)),i.empty&&i.length==0&&iT(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=nT(s,o),l=new ch(s,a,0).goto(i),u=new ch(o,a,0).goto(i);for(;;){if(l.to!=u.to||!vS(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>r)return!0;l.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new ch(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);r.point(a,u,o.point,c,d,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(r.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new Cu;for(let r of e instanceof mS?[e]:n?P7(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return pt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=pt.empty;r=r.nextLayer)n=new pt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}pt.empty=new pt([],[],null,-1);function P7(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(gS(e,i)>0)return t.slice().sort(gS);e=i}return t}pt.empty.nextLayer=pt.empty;class Cu{finishChunk(e){this.chunks.push(new vC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Cu)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(pt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=pt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function nT(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class bj{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Hf{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new bj(o,n,i,s));return r.length==1?r[0]:new Hf(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)mb(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)mb(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),mb(this.heap,0)}}}function mb(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class ch{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Hf.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Hm(this.active,e),Hm(this.activeTo,e),Hm(this.activeRank,e),this.minActive=rT(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;Vm(this.active,n,i),Vm(this.activeTo,n,r),Vm(this.activeRank,n,s),e&&Vm(e,n,this.cursor.from),this.minActive=rT(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Hm(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function iT(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&vS(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!vS(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),c>o)break;a=c,u<=0&&t.next(),u>=0&&n.next()}}function vS(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Hm(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Vm(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function rT(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Hp(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Bn(t,r));return i}function T7(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Bn(t,r)}return i===!0?-1:t.length}const yS="ͼ",sT=typeof Symbol>"u"?"__"+yS:Symbol.for(yS),wS=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),oT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class tl{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(g=>o.map(b=>g.replace(/&/,b))).reduce((g,b)=>g.concat(b)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=oT[sT]||1;return oT[sT]=e+1,yS+e.toString(36)}static mount(e,n,i){let r=e[wS],s=i&&i.nonce;r?s&&r.setNonce(s):r=new R7(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let aT=new Map;class R7{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=aT.get(i);if(s)return e[wS]=s;this.sheet=new r.CSSStyleSheet,aT.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[wS]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let u=0;u<a.rules.length;u++)i.insertRule(a.rules[u],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var nl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Vf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},N7=typeof navigator<"u"&&/Mac/.test(navigator.platform),M7=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Dn=0;Dn<10;Dn++)nl[48+Dn]=nl[96+Dn]=String(Dn);for(var Dn=1;Dn<=24;Dn++)nl[Dn+111]="F"+Dn;for(var Dn=65;Dn<=90;Dn++)nl[Dn]=String.fromCharCode(Dn+32),Vf[Dn]=String.fromCharCode(Dn);for(var gb in nl)Vf.hasOwnProperty(gb)||(Vf[gb]=nl[gb]);function O7(t){var e=N7&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||M7&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Vf:nl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Wf(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function bS(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Zg(t,e){if(!e.anchorNode)return!1;try{return bS(t,e.anchorNode)}catch{return!1}}function Gf(t){return t.nodeType==3?Au(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function of(t,e,n,i){return n?lT(t,e,n,i,-1)||lT(t,e,n,i,1):!1}function Eu(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function ry(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function lT(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Qs(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Eu(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?Qs(t):0}else return!1}}function Qs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function P0(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function I7(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function xj(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function D7(t,e,n,i,r,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==l.body,p=1,g=1;if(f)h=I7(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:p,scaleY:g}=xj(c,y)),h={left:y.left,right:y.left+c.clientWidth*p,top:y.top,bottom:y.top+c.clientHeight*g}}let b=0,v=0;if(r=="nearest")e.top<h.top?(v=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+v&&(v=e.bottom-h.bottom+v+o)):e.bottom>h.bottom&&(v=e.bottom-h.bottom+o,n<0&&e.top-v<h.top&&(v=-(h.top+v-e.top+o)));else{let y=e.bottom-e.top,w=h.bottom-h.top;v=(r=="center"&&y<=w?e.top+y/2-w/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-w+o)-h.top}if(i=="nearest"?e.left<h.left?(b=-(h.left-e.left+s),n>0&&e.right>h.right+b&&(b=e.right-h.right+b+s)):e.right>h.right&&(b=e.right-h.right+s,n<0&&e.left<h.left+b&&(b=-(h.left+b-e.left+s))):b=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,b||v)if(f)u.scrollBy(b,v);else{let y=0,w=0;if(v){let _=c.scrollTop;c.scrollTop+=v/g,w=(c.scrollTop-_)*g}if(b){let _=c.scrollLeft;c.scrollLeft+=b/p,y=(c.scrollLeft-_)*p}e={left:e.left-y,top:e.top-w,right:e.right-y,bottom:e.bottom-w},y&&Math.abs(y-b)<1&&(i="nearest"),w&&Math.abs(w-v)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function L7(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class j7{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?Qs(n):0),i,Math.min(e.focusOffset,i?Qs(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let qu=null;function Sj(t){if(t.setActive)return t.setActive();if(qu)return t.focus(qu);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(qu==null?{get preventScroll(){return qu={preventScroll:!0},!0}}:void 0),!qu){qu=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let uT;function Au(t,e,n=e){let i=uT||(uT=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Gc(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function F7(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function _j(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function $7(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,Qs(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=Qs(n))}else{if(n==t)return!0;i=Eu(n),n=n.parentNode}}function kj(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Cj(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=Qs(n)}else if(n.parentNode&&!ry(n))i=Eu(n),n=n.parentNode;else return null}}function Ej(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!ry(n))i=Eu(n)+1,n=n.parentNode;else return null}}class Yn{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Yn(e.parentNode,Eu(e),n)}static after(e,n){return new Yn(e.parentNode,Eu(e)+1,n)}}const yC=[];class Ct{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Ct.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=cT(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=cT(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=Qs(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ct.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,u=i,c=i;l<this.children.length;l++){let d=this.children[l],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&r==-1&&(r=l,s=u),u>n&&d.dom.parentNode==this.dom){o=l,a=c;break}c=h,u=h+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=yC){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Aj(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ct.prototype.breakAfter=0;function cT(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Aj{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function Pj(t,e,n,i,r,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!h&&s.length<2&&c.merge(n,r,s.length?d:null,n==0,a,l))){if(i<u.length){let f=u[i];f&&(r<f.length||f.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,l)?s[s.length-1]=f:((r||f.children.length&&!f.children[0].length)&&f.merge(0,r,null,!1,0,l),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function Tj(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,Pj(t,u,c,a,l,i,0,r,s)}let Ri=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},xS=typeof document<"u"?document:{documentElement:{style:{}}};const SS=/Edge\/(\d+)/.exec(Ri.userAgent),Rj=/MSIE \d/.test(Ri.userAgent),_S=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ri.userAgent),T0=!!(Rj||_S||SS),dT=!T0&&/gecko\/(\d+)/i.test(Ri.userAgent),vb=!T0&&/Chrome\/(\d+)/.exec(Ri.userAgent),hT="webkitFontSmoothing"in xS.documentElement.style,Nj=!T0&&/Apple Computer/.test(Ri.vendor),fT=Nj&&(/Mobile\/\w+/.test(Ri.userAgent)||Ri.maxTouchPoints>2);var Ce={mac:fT||/Mac/.test(Ri.platform),windows:/Win/.test(Ri.platform),linux:/Linux|X11/.test(Ri.platform),ie:T0,ie_version:Rj?xS.documentMode||6:_S?+_S[1]:SS?+SS[1]:0,gecko:dT,gecko_version:dT?+(/Firefox\/(\d+)/.exec(Ri.userAgent)||[0,0])[1]:0,chrome:!!vb,chrome_version:vb?+vb[1]:0,ios:fT,android:/Android\b/.test(Ri.userAgent),webkit:hT,safari:Nj,webkit_version:hT?+(/\bAppleWebKit\/(\d+)/.exec(Ri.userAgent)||[0,0])[1]:0,tabSize:xS.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const B7=256;class fs extends Ct{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof fs)||this.length-(n-e)+i.length>B7||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new fs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Yn(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return z7(this.dom,e,n)}}class zo extends Ct{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(_j(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof zo&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(Tj(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new zo(this.mark,n,o)}domAtPos(e){return Mj(this,e)}coordsAt(e,n){return Ij(this,e,n)}}function z7(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?Ce.chrome||Ce.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Au(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Ce.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?P0(l,o<0):l||null}class Ra extends Ct{static create(e,n,i){return new Ra(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Ra.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Ra)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Ra&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ht.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):ht.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Yn.before(this.dom):Yn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return P0(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class xd extends Ct{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof xd&&e.side==this.side}split(){return new xd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Yn.before(this.dom):Yn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ht.empty}get isHidden(){return!0}}fs.prototype.children=Ra.prototype.children=xd.prototype.children=yC;function Mj(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Yn(n,0)}function Oj(t,e,n){let i,{children:r}=t;n>0&&e instanceof zo&&r.length&&(i=r[r.length-1])instanceof zo&&i.mark.eq(e.mark)?Oj(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function Ij(t,e,n){let i=null,r=-1,s=null,o=-1;function a(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?a(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(i=f,r=c-h)),h=p}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):U7(t)}function U7(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Gf(e);return n[n.length-1]||null}function kS(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const pT=Object.create(null);function sy(t,e,n){if(t==e)return!0;t||(t=pT),e||(e=pT);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function CS(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function H7(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Cl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var pi=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(pi||(pi={}));class Je extends ku{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Vp(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new il(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=Dj(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new il(e,i,r,n,e.widget||null,!0)}static line(e){return new Wp(e)}static set(e,n=!1){return pt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Je.none=pt.empty;class Vp extends Je{constructor(e){let{start:n,end:i}=Dj(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof Vp&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&sy(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Vp.prototype.point=!1;class Wp extends Je{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Wp&&this.spec.class==e.spec.class&&sy(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Wp.prototype.mapMode=Ni.TrackBefore;Wp.prototype.point=!0;class il extends Je{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Ni.TrackBefore:Ni.TrackAfter:Ni.TrackDel}get type(){return this.startSide!=this.endSide?pi.WidgetRange:this.startSide<=0?pi.WidgetBefore:pi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof il&&V7(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}il.prototype.point=!0;function Dj(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function V7(t,e){return t==e||!!(t&&e&&t.compare(e))}function ES(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class rn extends Ct{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof rn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Tj(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new rn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){sy(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){Oj(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=kS(n,this.attrs||{})),i&&(this.attrs=kS({class:i},this.attrs||{}))}domAtPos(e){return Mj(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(_j(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(CS(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Ct.get(r)instanceof zo;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Ct.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ce.ios||!this.children.some(s=>s instanceof fs))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof fs)||/[^ -~]/.test(i.text))return null;let r=Gf(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=Ij(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof rn&&this.children.length==0&&e.children.length==0&&sy(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof rn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class Io extends Ct{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof Io)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Yn.before(this.dom):Yn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Io(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return yC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ht.empty}domBoundsAround(){return null}become(e){return e instanceof Io&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof AS?null:P0(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class AS extends Cl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class af{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Io&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new rn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Wm(new xd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Io)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Wm(new fs(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof il){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof il)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Io(i.widget||Sd.block,a,i));else{let l=Ra.create(i.widget||Sd.inline,a,a?0:i.startSide),u=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(d.append(Wm(new xd(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(Wm(l,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new af(e,n,i,s);return o.openEnd=pt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Wm(t,e){for(let n of e)t=new zo(n,[t],t.length);return t}class Sd extends Cl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Sd.inline=new Sd("span");Sd.block=new Sd("div");var Dt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Dt||(Dt={}));const Pu=Dt.LTR,wC=Dt.RTL;function Lj(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const W7=Lj("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),G7=Lj("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),PS=Object.create(null),Ss=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);PS[e]=n,PS[n]=-e}function jj(t){return t<=247?W7[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?G7[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const K7=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Na{get dir(){return this.level%2?wC:Pu}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Fj(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Fj(i.inner,r.inner))return!1}return!0}const St=[];function X7(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let u=o,c=l,d=l;u<a;u++){let h=jj(t.charCodeAt(u));h==512?h=c:h==8&&d==4&&(h=16),St[u]=h==4?2:h,h&7&&(d=h),c=h}for(let u=o,c=l,d=l;u<a;u++){let h=St[u];if(h==128)u<a-1&&c==St[u+1]&&c&24?h=St[u]=c:St[u]=256;else if(h==64){let f=u+1;for(;f<a&&St[f]==64;)f++;let p=u&&c==8||f<n&&St[f]==8?d==1?1:8:256;for(let g=u;g<f;g++)St[g]=p;u=f-1}else h==8&&d==1&&(St[u]=1);c=h,h&7&&(d=h)}}}function q7(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let u=o?i[o-1].to:e,c=o<i.length?i[o].from:n;for(let d=u,h,f,p;d<c;d++)if(f=PS[h=t.charCodeAt(d)])if(f<0){for(let g=a-3;g>=0;g-=3)if(Ss[g+1]==-f){let b=Ss[g+2],v=b&2?r:b&4?b&1?s:r:0;v&&(St[d]=St[Ss[g]]=v),a=g;break}}else{if(Ss.length==189)break;Ss[a++]=d,Ss[a++]=h,Ss[a++]=l}else if((p=St[d])==2||p==1){let g=p==r;l=g?0:1;for(let b=a-3;b>=0;b-=3){let v=Ss[b+2];if(v&2)break;if(g)Ss[b+2]|=2;else{if(v&4)break;Ss[b+2]|=4}}}}}function Y7(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let u=St[l];if(u==256){let c=l+1;for(;;)if(c==a){if(r==n.length)break;c=n[r++].to,a=r<n.length?n[r].from:e}else if(St[c]==256)c++;else break;let d=s==1,h=(c<e?St[c]:i)==1,f=d==h?d?1:2:i;for(let p=c,g=r,b=g?n[g-1].to:t;p>l;)p==b&&(p=n[--g].from,b=g?n[g-1].to:t),St[--p]=f;l=c}else s=u,l++}}}function TS(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,u=0;l<n;){let c=!0,d=!1;if(u==s.length||l<s[u].from){let g=St[l];g!=a&&(c=!1,d=g==16)}let h=!c&&a==1?[]:null,f=c?i:i+1,p=l;e:for(;;)if(u<s.length&&p==s[u].from){if(d)break e;let g=s[u];if(!c)for(let b=g.to,v=u+1;;){if(b==n)break e;if(v<s.length&&s[v].from==b)b=s[v++].to;else{if(St[b]==a)break e;break}}if(u++,h)h.push(g);else{g.from>l&&o.push(new Na(l,g.from,f));let b=g.direction==Pu!=!(f%2);RS(t,b?i+1:i,r,g.inner,g.from,g.to,o),l=g.to}p=g.to}else{if(p==n||(c?St[p]!=a:St[p]==a))break;p++}h?TS(t,l,p,i+1,r,h,o):l<p&&o.push(new Na(l,p,f)),l=p}else for(let l=n,u=s.length;l>e;){let c=!0,d=!1;if(!u||l>s[u-1].to){let g=St[l-1];g!=a&&(c=!1,d=g==16)}let h=!c&&a==1?[]:null,f=c?i:i+1,p=l;e:for(;;)if(u&&p==s[u-1].to){if(d)break e;let g=s[--u];if(!c)for(let b=g.from,v=u;;){if(b==e)break e;if(v&&s[v-1].to==b)b=s[--v].from;else{if(St[b-1]==a)break e;break}}if(h)h.push(g);else{g.to<l&&o.push(new Na(g.to,l,f));let b=g.direction==Pu!=!(f%2);RS(t,b?i+1:i,r,g.inner,g.from,g.to,o),l=g.from}p=g.from}else{if(p==e||(c?St[p-1]!=a:St[p-1]==a))break;p--}h?TS(t,p,l,i+1,r,h,o):p<l&&o.push(new Na(p,l,f)),l=p}}function RS(t,e,n,i,r,s,o){let a=e%2?2:1;X7(t,r,s,i,a),q7(t,r,s,i,a),Y7(r,s,i,a),TS(t,r,s,e,n,i,o)}function Z7(t,e,n){if(!t)return[new Na(0,0,e==wC?1:0)];if(e==Pu&&!n.length&&!K7.test(t))return $j(t.length);if(n.length)for(;t.length>St.length;)St[St.length]=256;let i=[],r=e==Pu?0:1;return RS(t,r,r,n,0,t.length,i),i}function $j(t){return[new Na(0,t,0)]}let Bj="";function J7(t,e,n,i,r){var s;let o=i.head-t.from,a=Na.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],u=l.side(r,n);if(o==u){let h=a+=r?1:-1;if(h<0||h>=e.length)return null;l=e[a=h],o=l.side(!r,n),u=l.side(r,n)}let c=Bn(t.text,o,l.forward(r,n));(c<l.from||c>l.to)&&(c=u),Bj=t.text.slice(Math.min(o,c),Math.max(o,c));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&c==u&&d.level+(r?0:1)<l.level?ie.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):ie.cursor(c+t.from,l.forward(r,n)?-1:1,l.level)}function Q7(t,e,n){for(let i=e;i<n;i++){let r=jj(t.charCodeAt(i));if(r==1)return Pu;if(r==2||r==4)return wC}return Pu}const zj=Ee.define(),Uj=Ee.define(),Hj=Ee.define(),Vj=Ee.define(),NS=Ee.define(),Wj=Ee.define(),Gj=Ee.define(),bC=Ee.define(),xC=Ee.define(),Kj=Ee.define({combine:t=>t.some(e=>e)}),Xj=Ee.define({combine:t=>t.some(e=>e)}),qj=Ee.define();class Kc{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Kc(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Kc(ie.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Gm=Ze.define({map:(t,e)=>t.map(e)}),Yj=Ze.define();function tr(t,e,n){let i=t.facet(Vj);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const ya=Ee.define({combine:t=>t.length?t[0]:!0});let eW=0;const Oh=Ee.define();class Vn{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.extension=s(this)}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new Vn(eW++,e,i,r,a=>{let l=[Oh.of(a)];return o&&l.push(Kf.of(u=>{let c=u.plugin(a);return c?o(c):Je.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Vn.define(i=>new e(i),n)}}class yb{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(tr(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){tr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){tr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Zj=Ee.define(),SC=Ee.define(),Kf=Ee.define(),Jj=Ee.define(),_C=Ee.define(),Qj=Ee.define();function mT(t,e){let n=t.state.facet(Qj);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return pt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let u=s-e.from,c=o-e.from,d=r;for(let h=a.length-1;h>=0;h--,l--){let f=a[h].spec.bidiIsolate,p;if(f==null&&(f=Q7(e.text,u,c)),l>0&&d.length&&(p=d[d.length-1]).to==u&&p.direction==f)p.to=c,d=p.inner;else{let g={from:u,to:c,direction:f,inner:[]};d.push(g),d=g.inner}}}}),r}const eF=Ee.define();function kC(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(eF)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Ih=Ee.define();class Ir{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Ir(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(a,d),p=Math.min(c,h);if(f<=p&&new Ir(f+u,p+u,f,p).addToSet(i),h>c)break;s+=2}if(!l)return i;new Ir(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class oy{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=hn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Ir(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new oy(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class gT extends Ct{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Je.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new rn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ir(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!aW(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?nW(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;i=new Ir(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ce.ie||Ce.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=sW(o,a,e.changes);return i=Ir.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ce.chrome||Ce.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Io&&o.widget instanceof AS&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:d}=a,h,f,p,g;if(i&&i.range.fromB<d&&i.range.toB>c){let _=af.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),k=af.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=_.breakAtStart,p=_.openStart,g=k.openEnd;let C=this.compositionView(i);k.breakAtStart?C.breakAfter=1:k.content.length&&C.merge(C.length,C.length,k.content[0],!1,k.openStart,0)&&(C.breakAfter=k.content[0].breakAfter,k.content.shift()),_.content.length&&C.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd)&&_.content.pop(),h=_.content.concat(C).concat(k.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:g}=af.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:b,off:v}=s.findPos(u,1),{i:y,off:w}=s.findPos(l,-1);Pj(this,y,w,b,v,h,f,p,g)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(Yj)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new fs(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new zo(r,[n],n.length);let i=new rn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Ct.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&Zg(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ce.gecko&&a.empty&&!this.hasComposition&&tW(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new Yn(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!of(l.node,l.offset,c.anchorNode,c.anchorOffset)||!of(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{Ce.android&&Ce.chrome&&this.dom.contains(c.focusNode)&&oW(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Wf(this.view.root);if(d)if(a.empty){if(Ce.gecko){let h=iW(l.node,l.offset);if(h&&h!=3){let f=(h==1?Cj:Ej)(l.node,l.offset);f&&(l=new Yn(f.node,f.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Yn(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Yn(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&of(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Wf(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=rn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Ct.get(n.childNodes[r]);s instanceof rn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Ct.get(n.childNodes[r]);s instanceof rn&&(i=s.domAtPos(s.length))}return i?new Yn(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Ct.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof rn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof rn&&!(i instanceof rn&&n>=0)))i=a,r=u;else if(i&&u==e&&l==e&&a instanceof Io&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=u}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof rn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof fs))return null;let s=Bn(r.text,i);if(s==i)return null;let o=Au(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Dt.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>r)break;if(u>=i){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,g=p?Gf(p):[];if(g.length){let b=g[g.length-1],v=l?b.right-f.left:f.right-b.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Dt.RTL:Dt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof rn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Gf(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new Aj(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(Je.replace({widget:new AS(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Je.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Kf).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(Jj).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(pt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(qj))try{if(u(this.view,e.range,e))return!0}catch(c){tr(this.view.state,c,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=kC(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;D7(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Dt.LTR)}}function tW(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function tF(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=Cj(n.focusNode,n.focusOffset),r=Ej(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=Ct.get(r.node);if(!a||a instanceof fs&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=Ct.get(i.node);!l||l instanceof fs&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function nW(t,e,n){let i=tF(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,u=new Ir(l.mapPos(s),l.mapPos(o),s,o),c=[];for(let d=r.parentNode;;d=d.parentNode){let h=Ct.get(d);if(h instanceof zo)c.push({node:d,deco:h.mark});else{if(h instanceof rn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:u,text:r,marks:c,line:d};if(d!=t.contentDOM)c.push({node:d,deco:new Vp({inclusive:!0,attributes:H7(d),tagName:d.tagName.toLowerCase()})});else return null}}}function iW(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let rW=class{constructor(){this.changes=[]}compareRange(e,n){ES(e,n,this.changes)}comparePoint(e,n){ES(e,n,this.changes)}};function sW(t,e,n){let i=new rW;return pt.compare(t,e,n,i),i.changes}function oW(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function aW(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function lW(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return ie.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Bn(r.text,s,!1):a=Bn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let u=Bn(r.text,o,!1);if(i(r.text.slice(u,o))!=l)break;o=u}for(;a<r.length;){let u=Bn(r.text,a);if(i(r.text.slice(a,u))!=l)break;a=u}return ie.range(o+r.from,a+r.from)}function uW(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function cW(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function wb(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function vT(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function yT(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function MS(t,e,n){let i,r,s,o,a=!1,l,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let g=Gf(p);for(let b=0;b<g.length;b++){let v=g[b];r&&wb(r,v)&&(v=vT(yT(v,r.bottom),r.top));let y=uW(e,v),w=cW(n,v);if(y==0&&w==0)return p.nodeType==3?wT(p,e,n):MS(p,e,n);if(!i||o>w||o==w&&s>y){i=p,r=v,s=y,o=w;let _=w?n<v.top?-1:1:y?e<v.left?-1:1:0;a=!_||(_>0?b<g.length-1:b>0)}y==0?n>v.bottom&&(!c||c.bottom<v.bottom)?(l=p,c=v):n<v.top&&(!d||d.top>v.top)&&(u=p,d=v):c&&wb(c,v)?c=yT(c,v.bottom):d&&wb(d,v)&&(d=vT(d,v.top))}}if(c&&c.bottom>=n?(i=l,r=c):d&&d.top<=n&&(i=u,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return wT(i,h,n);if(a&&i.contentEditable!="false")return MS(i,h,n);let f=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:f}}function wT(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Au(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((Ce.chrome||Ce.gecko)&&Au(t,a).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};r=a+(f?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function nF(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-a;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let _=t.viewState.heightOracle.textHeight/2,k=!1;l=t.elementAtHeight(h),l.type!=pi.Text;)for(;h=i>0?l.bottom+_:l.top-_,!(h>=0&&h<=u);){if(k)return n?null:0;k=!0,i=-i}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:bT(t,o,l,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:bT(t,o,l,c,d);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,b=g.elementFromPoint(c,d);b&&!t.contentDOM.contains(b)&&(b=null),b||(c=Math.max(o.left+1,Math.min(o.right-1,c)),b=g.elementFromPoint(c,d),b&&!t.contentDOM.contains(b)&&(b=null));let v,y=-1;if(b&&((r=t.docView.nearest(b))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let _=p.caretPositionFromPoint(c,d);_&&({offsetNode:v,offset:y}=_)}else if(p.caretRangeFromPoint){let _=p.caretRangeFromPoint(c,d);_&&({startContainer:v,startOffset:y}=_,(!t.contentDOM.contains(v)||Ce.safari&&dW(v,y,c)||Ce.chrome&&hW(v,y,c))&&(v=void 0))}v&&(y=Math.min(Qs(v),y))}if(!v||!t.docView.dom.contains(v)){let _=rn.find(t.docView,f);if(!_)return h>l.top+l.height/2?l.to:l.from;({node:v,offset:y}=MS(_.dom,c,d))}let w=t.docView.nearest(v);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let _=w.dom.getBoundingClientRect();return e.y<_.top||e.y<=_.bottom&&e.x<=(_.left+_.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(v,y)+w.posAtStart}function bT(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+T7(o,s,t.state.tabSize)}function dW(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Au(t,i-1,i).getBoundingClientRect().left>n}function hW(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Au(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function OS(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==pi.Text))return i}return n}function fW(t,e,n,i){let r=OS(t,e.head),s=!i||r.type!=pi.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==Dt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ie.cursor(l,n?-1:1)}return ie.cursor(n?r.to:r.from,n?-1:1)}function xT(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let u=J7(r,s,o,a,n),c=Bj;if(!u){if(r.number==(n?t.state.doc.lines:1))return a;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=t.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return u;l=i(c)}a=u}}function pW(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==zn.Space&&(r=o),r==o}}function mW(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return ie.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r,e.assoc||-1),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-f.from))),a=(s<0?f.top:f.bottom)+c}let d=l.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*s,g=nF(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?g<r:g>r)){let b=t.docView.coordsForChar(g),v=!b||p<b.top?-1:1;return ie.cursor(g,v,void 0,o)}}}function Jg(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function bb(t,e,n){let i=Jg(t.state.facet(_C).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:ie.cursor(i,i<n.from?1:-1)}const Dh="￿";class gW{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(it.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Dh}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=Ct.get(r),l=Ct.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:ry(r))||ry(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Ct.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(vW(e,i.node,i.offset)?n:0))}}function vW(t,e,n){for(;;){if(!e||n<Qs(e))return!1;if(e==t)return!0;n=Eu(e)+1,e=e.parentNode}}class ST{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class yW{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:xW(e),l=new gW(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=SW(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!bS(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!bS(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((Ce.ios||Ce.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let d=Math.min(l,u),h=Math.max(l,u),f=c.from-d,p=c.to-h;(f==0||f==1||d==0)&&(p==0||p==-1||h==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=ie.single(u,l)}}}function iF(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,u=null;(s===8||Ce.android&&e.text.length<a-o)&&(l=r.to,u="end");let c=bW(t.state.doc.sliceString(o,a,Dh),e.text,l-o,u);c&&(Ce.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Dh+Dh&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:ht.of(e.text.slice(c.from,c.toB).split(Dh))})}else i&&(!t.hasFocus&&t.state.facet(ya)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(Ce.mac||Ce.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=ie.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ht.of([" "])}):Ce.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=ie.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ht.of([" "])}),n)return CC(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function CC(t,e,n,i=-1){if(Ce.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(Ce.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Gc(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Gc(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Gc(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=wW(t,e,n));return t.state.facet(Wj).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function wW(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=t.state.sliceDoc(e.from,e.to),c,d=n&&tF(t,n.main.head);if(d){let p=e.insert.length-(e.to-e.from);c={from:d.from,to:d.to-p}}else c=t.state.doc.lineAt(s.head);let h=s.to-e.to,f=s.to-s.from;i=r.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:a,range:l||p.map(a)};let g=p.to-h,b=g-u.length;if(p.to-p.from!=f||t.state.sliceDoc(b,g)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let v=r.changes({from:b,to:g,insert:e.insert}),y=p.to-s.to;return{changes:v,range:l?ie.range(Math.max(0,l.anchor+y),Math.max(0,l.head+y)):p.map(v)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function bW(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function xW(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new ST(n,i)),(r!=n||s!=i)&&e.push(new ST(r,s))),e}function SW(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?ie.single(n+e,i+e):null}class _W{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ce.safari&&e.contentDOM.addEventListener("input",()=>null),Ce.gecko&&$W(e.contentDOM.ownerDocument)}handleEvent(e){!NW(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=kW(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&sF.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ce.android&&Ce.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ce.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=rF.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||CW.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Gc(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ce.safari&&!Ce.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function _T(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){tr(n.state,r)}}}function kW(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let o=r.domEventHandlers[s];o&&n(s).handlers.push(_T(i.value,o))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let o=r.domEventObservers[s];o&&n(s).observers.push(_T(i.value,o))}}for(let i in ps)n(i).handlers.push(ps[i]);for(let i in zr)n(i).observers.push(zr[i]);return e}const rF=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],CW="dthko",sF=[16,17,18,20,91,92,224,225],Km=6;function Xm(t){return Math.max(0,t)*.7+8}function EW(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class AW{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=L7(e.contentDOM),this.atoms=e.state.facet(_C).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(it.allowMultipleSelections)&&PW(e,n),this.dragging=RW(e,n)&&lF(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&EW(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=kC(this.view);e.clientX-l.left<=r+Km?n=-Xm(r-e.clientX):e.clientX+l.right>=o-Km&&(n=Xm(e.clientX-o)),e.clientY-l.top<=s+Km?i=-Xm(s-e.clientY):e.clientY+l.bottom>=a-Km&&(i=Xm(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=Jg(this.atoms,r.from,0);o!=r.from&&(s=ie.cursor(o,-1))}else{let o=Jg(this.atoms,r.from,-1),a=Jg(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=ie.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?ie.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function PW(t,e){let n=t.state.facet(zj);return n.length?n[0](e):Ce.mac?e.metaKey:e.ctrlKey}function TW(t,e){let n=t.state.facet(Uj);return n.length?n[0](e):Ce.mac?!e.altKey:!e.ctrlKey}function RW(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Wf(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function NW(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Ct.get(n))&&i.ignoreEvent(e))return!1;return!0}const ps=Object.create(null),zr=Object.create(null),oF=Ce.ie&&Ce.ie_version<15||Ce.ios&&Ce.webkit_version<604;function MW(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),aF(t,n.value)},50)}function R0(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function aF(t,e){e=R0(t.state,bC,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(IS!=null&&n.selection.ranges.every(l=>l.empty)&&IS==s.toString()){let l=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:ie.cursor(u.from+d.length)}})}else o?i=n.changeByRange(l=>{let u=s.line(r++);return{changes:{from:l.from,to:l.to,insert:u.text},range:ie.cursor(l.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}zr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};ps.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);zr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};zr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ps.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(Hj))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=DW(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new AW(t,e,n,i)),i&&t.observer.ignore(()=>{Sj(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function kT(t,e,n,i){if(i==1)return ie.cursor(e,n);if(i==2)return lW(t.state,e,n);{let r=rn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,ie.range(o,a)}}let CT=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function OW(t,e,n,i){let r=rn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&CT(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&CT(n,i,a)?1:o&&o.bottom>=i?-1:1}function ET(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:OW(t,n,e.clientX,e.clientY)}}const IW=Ce.ie&&Ce.ie_version<=11;let AT=null,PT=0,TT=0;function lF(t){if(!IW)return t.detail;let e=AT,n=TT;return AT=t,TT=Date.now(),PT=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(PT+1)%3:1}function DW(t,e){let n=ET(t,e),i=lF(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=ET(t,s),u,c=kT(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=kT(t,n.pos,n.bias,i),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?ie.range(h,f):ie.range(f,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&i==1&&r.ranges.length>1&&(u=LW(r,l.pos))?u:a?r.addRange(c):ie.create([c])}}}function LW(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ie.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}ps.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=ie.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",R0(t.state,xC,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ps.dragend=t=>(t.inputState.draggedContent=null,!1);function RT(t,e,n,i){if(n=R0(t.state,bC,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&TW(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}ps.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&RT(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return RT(t,e,i,!0),!0}return!1};ps.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=oF?null:e.clipboardData;return n?(aF(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(MW(t),!1)};function jW(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function FW(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:R0(t,xC,e.join(t.lineBreak)),ranges:n,linewise:i}}let IS=null;ps.copy=ps.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=FW(t.state);if(!n&&!r)return!1;IS=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=oF?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(jW(t,n),!1)};const uF=qo.define();function cF(t,e){let n=[];for(let i of t.facet(Gj)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:uF.of(!0)}):null}function dF(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=cF(t.state,e);n?t.dispatch(n):t.update([])}},10)}zr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),dF(t)};zr.blur=t=>{t.observer.clearSelectionRange(),dF(t)};zr.compositionstart=zr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};zr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ce.chrome&&Ce.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};zr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ps.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),u=t.posAtDOM(a.endContainer,a.endOffset);return CC(t,{from:l,to:u,insert:t.state.toText(s)},null),!0}}let r;if(Ce.chrome&&Ce.android&&(r=rF.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ce.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ce.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>zr.compositionend(t,e),20),!1};const NT=new Set;function $W(t){NT.has(t)||(NT.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const MT=["pre-wrap","normal","pre-line","break-spaces"];let _d=!1;function OT(){_d=!1}class BW{constructor(e){this.lineWrapping=e,this.doc=ht.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return MT.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=MT.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class zW{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class $s{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?pi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof il?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new $s(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Mt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Mt||(Mt={}));const Qg=.001;class mi{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Qg&&(_d=!0),this.height=e)}replace(e,n,i){return mi.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:d}=r[a],h=s.lineAt(l,Mt.ByPosNoHeight,i.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,Mt.ByPosNoHeight,i,0,0);for(d+=f.to-u,u=f.to;a>0&&h.from<=r[a-1].toA;)l=r[a-1].fromA,c=r[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,Mt.ByPosNoHeight,i,0,0));c+=h.from-l,l=h.from;let p=EC.build(i.setDoc(o),e,c,d);s=ay(s,s.replace(l,u,p))}return s.updateHeight(i,0)}static empty(){return new Xi(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new UW(mi.of(e.slice(0,n)),o,mi.of(e.slice(i)))}}function ay(t,e){return t==e?t:(t.constructor!=e.constructor&&(_d=!0),e)}mi.prototype.size=1;class hF extends mi{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new $s(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Xi extends hF{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new $s(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Xi||r instanceof On&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof On?r=new Xi(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):mi.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class On extends mi{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=n.doc.lineAt(u),d=a+c.length*l,h=Math.max(i,e-d/2);return new $s(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:c,length:d}=n.doc.line(s+u);return new $s(c,d,i+a*u,a,0)}}lineAt(e,n,i,r,s){if(n==Mt.ByHeight)return this.blockAt(e,i,r,s);if(n==Mt.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new $s(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=a+u.length*l,d=u.number-o,h=r+a*d+l*(u.from-s-d);return new $s(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(i,s);for(let c=e,d=r;c<=n;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-a;d+=l*p+u*(e-s-p)}let f=l+u*h.length;o(new $s(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof On?i[i.length-1]=new On(s.length+r):i.push(null,new On(r-1))}if(e>0){let s=i[0];s instanceof On?i[0]=new On(e+s.length):i.unshift(new On(e-1),null)}return mi.of(i)}decomposeLeft(e,n){n.push(new On(e-1),null)}decomposeRight(e,n){n.push(null,new On(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new On(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=Qg&&(l=-2);let h=new Xi(c,d);h.outdated=!1,o.push(h),a+=c+1}a<=s&&o.push(null,new On(s-a).updateHeight(e,a));let u=mi.of(o);return(l<0||Math.abs(u.height-this.height)>=Qg||Math.abs(l-this.heightMetrics(e,n).perLine)>=Qg)&&(_d=!0),ay(this,u)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class UW extends mi{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==Mt.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==Mt.ByPosNoHeight?Mt.ByPosNoHeight:Mt.ByPos;return l?u.join(this.right.lineAt(a,c,i,o,a)):this.left.lineAt(a,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let u=this.lineAt(l,Mt.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&IT(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),IT(s,a)}return mi.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?mi.of(this.break?[e,null,n]:[e,n]):(this.left=ay(this.left,e),this.right=ay(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function IT(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof On&&(i=t[e+1])instanceof On&&t.splice(e-1,3,new On(n.length+1+i.length))}const HW=5;class EC{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Xi?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Xi(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new hF(o,r,i)):(o||s||r>=HW)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Xi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new On(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Xi)return e;let n=new Xi(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Xi)&&!this.isCovered?this.nodes.push(new Xi(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Xi&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new EC(i,e);return pt.spans(n,i,r,s,0),s.finish(i)}}function VW(t,e,n){let i=new WW;return pt.compare(t,e,n,i,0),i.changes}class WW{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&ES(e,n,this.changes,5)}}function GW(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=Math.min(u==t.parentNode?r.innerHeight:l,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function KW(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class xb{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return Je.replace({widget:new XW(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class XW extends Cl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class DT{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=LT,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Dt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(SC).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new BW(n),this.stateDeco=e.facet(Kf).filter(i=>typeof i!="function"),this.heightMap=mi.empty().applyChanges(this.stateDeco,ht.empty,this.heightOracle.setDoc(e.doc),[new Ir(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Je.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new qm(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?LT:new AC(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Lh(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Kf).filter(c=>typeof c!="function");let r=e.changedRanges,s=Ir.extendWithRanges(r,VW(i,this.stateDeco,e?e.changes:hn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);OT(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||_d)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Xj)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Dt.RTL:Dt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0;if(a.width&&a.height){let{scaleX:_,scaleY:k}=xj(n,a);(_>.005&&Math.abs(this.scaleX-_)>.005||k>.005&&Math.abs(this.scaleY-k)>.005)&&(this.scaleX=_,this.scaleY=k,u|=8,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=kj(e.scrollDOM);let p=(this.printing?KW:GW)(n,this.paddingTop),g=p.top-this.pixelViewport.top,b=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=a.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let _=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(_)&&(o=!0),o||r.lineWrapping&&Math.abs(y-this.contentDOMWidth)>r.charWidth){let{lineHeight:k,charWidth:C,textHeight:E}=e.docView.measureTextSize();o=k>0&&r.refresh(s,k,C,E,y/C,_),o&&(e.docView.minWidth=0,u|=8)}g>0&&b>0?c=Math.max(g,b):g<0&&b<0&&(c=Math.min(g,b)),OT();for(let k of this.viewports){let C=k.from==this.viewport.from?_:e.docView.measureVisibleLineHeights(k);this.heightMap=(o?mi.empty().applyChanges(this.stateDeco,ht.empty,this.heightOracle,[new Ir(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new zW(k.from,C))}_d&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new qm(r.lineAt(o-i*1e3,Mt.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,Mt.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,Mt.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=d.top:h=d.bottom-c,l=new qm(r.lineAt(h-1e3/2,Mt.ByHeight,s,0,0).from,r.lineAt(h+c+1e3/2,Mt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new qm(this.heightMap.lineAt(i,Mt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Mt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Mt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Mt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new xb(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Dt.LTR&&!i)return[];let a=[],l=(c,d,h,f)=>{if(d-c<s)return;let p=this.state.selection.main,g=[p.from];p.empty||g.push(p.to);for(let v of g)if(v>c&&v<d){l(c,v-10,h,f),l(v+10,d,h,f);return}let b=YW(e,v=>v.from>=h.from&&v.to<=h.to&&Math.abs(v.from-c)<s&&Math.abs(v.to-d)<s&&!g.some(y=>v.from<y&&v.to>y));if(!b){if(d<h.to&&n&&i&&n.visibleRanges.some(w=>w.from<=d&&w.to>=d)){let w=n.moveToLineBoundary(ie.cursor(d),!1,!0).head;w>c&&(d=w)}let v=this.gapSize(h,c,d,f),y=i||v<2e6?v:2e6;b=new xb(c,d,v,y)}a.push(b)},u=c=>{if(c.length<o||c.type!=pi.Text)return;let d=qW(c.from,c.to,this.stateDeco);if(d.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,f,p;if(i){let g=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,b,v;if(h!=null){let y=Zm(d,h),w=((this.visibleBottom-this.visibleTop)/2+g)/c.height;b=y-w,v=y+w}else b=(this.visibleTop-c.top-g)/c.height,v=(this.visibleBottom-c.top+g)/c.height;f=Ym(d,b),p=Ym(d,v)}else{let g=d.total*this.heightOracle.charWidth,b=r*this.heightOracle.charWidth,v=0;if(g>2e6)for(let C of e)C.from>=c.from&&C.from<c.to&&C.size!=C.displaySize&&C.from*this.heightOracle.charWidth+v<this.pixelViewport.left&&(v=C.size-C.displaySize);let y=this.pixelViewport.left+v,w=this.pixelViewport.right+v,_,k;if(h!=null){let C=Zm(d,h),E=((w-y)/2+b)/g;_=C-E,k=C+E}else _=(y-b)/g,k=(w+b)/g;f=Ym(d,_),p=Ym(d,k)}f>c.from&&l(c.from,f,c,d),p<c.to&&l(p,c.to,c,d)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return a}gapSize(e,n,i,r){let s=Zm(r,i)-Zm(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){xb.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Je.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];pt.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Lh(this.heightMap.lineAt(e,Mt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Lh(this.heightMap.lineAt(this.scaler.fromDOM(e),Mt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Lh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let qm=class{constructor(e,n){this.from=e,this.to=n}};function qW(t,e,n){let i=[],r=t,s=0;return pt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Ym({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function Zm(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function YW(t,e){for(let n of t)if(e(n))return n}const LT={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class AC{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let u=n.lineAt(a,Mt.ByPos,e,0,0).top,c=n.lineAt(l,Mt.ByPos,e,0,0).bottom;return r+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof AC?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function Lh(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new $s(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Lh(r,e)):t._content)}const Jm=Ee.define({combine:t=>t.join(" ")}),DS=Ee.define({combine:t=>t.indexOf(!0)>-1}),LS=tl.newName(),fF=tl.newName(),pF=tl.newName(),mF={"&light":"."+fF,"&dark":"."+pF};function jS(t,e,n){return new tl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const ZW=jS("."+LS,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},mF),JW={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Sb=Ce.ie&&Ce.ie_version<=11;class QW{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new j7,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(Ce.ie&&Ce.ie_version<=11||Ce.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Ce.chrome&&Ce.chrome_version<126)&&(this.editContext=new tG(e),e.state.facet(ya)&&(e.contentDOM.editContext=this.editContext.editContext)),Sb&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(ya)?i.root.activeElement!=this.dom:!Zg(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ce.ie&&Ce.ie_version<=11||Ce.android&&Ce.chrome)&&!i.state.selection.main.empty&&r.focusNode&&of(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Wf(e.root);if(!n)return!1;let i=Ce.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&eG(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=Zg(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&$7(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,JW),Sb&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Sb&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Gc(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Zg(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new yW(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=iF(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=jT(n,e.previousSibling||e.target.previousSibling,-1),r=jT(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(ya)!=e.state.facet(ya)&&(e.view.contentDOM.editContext=e.state.facet(ya)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function jT(t,e,n){for(;e;){let i=Ct.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function FT(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return of(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function eG(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return FT(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?FT(t,n):null}class tG{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:r}=e.state.selection.main,s=this.toEditorPos(i.updateRangeStart),o=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:s,drifted:!1});let a={from:s,to:o,insert:ht.of(i.text.split(`
`))};a.from==this.from&&r<this.from?a.from=r:a.to==this.to&&r>this.to&&(a.to=r),!(a.from==a.to&&!a.insert.length)&&(this.pendingContextChange=a,e.state.readOnly||CC(e,a,ie.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(Je.mark({attributes:{style:l}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:Yj.of(Je.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Wf(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,u)=>{if(i)return;let c=u.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(u)){r=this.pendingContextChange=null,n+=c,this.to+=c;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=c}n+=c}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e){let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Re{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||F7(e.parent)||document,this.viewState=new DT(e.state||it.create(e)),e.scrollTo&&e.scrollTo.is(Gm)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Oh).map(r=>new yb(r));for(let r of this.plugins)r.update(this);this.observer=new QW(this),this.inputState=new _W(this),this.inputState.ensureHandlers(this.plugins),this.docView=new gT(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof yn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(uF))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=cF(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(it.phrases)!=this.state.facet(it.phrases))return this.setState(s);r=oy.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new Kc(f.empty?f:ie.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(Gm)&&(d=f.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=ly.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Ih)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Jm)!=r.state.facet(Jm)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let h of this.state.facet(NS))try{h(r)}catch(f){tr(this.state,f,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!iF(this,c)&&u.force&&Gc(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new DT(e),this.plugins=e.facet(Oh).map(i=>new yb(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new gT(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Oh),i=e.state.facet(Oh);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new yb(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){tr(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(kj(i))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return tr(this.state,p),$T}}),d=oy.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let f=0;f<u.length;f++)if(c[f]!=$T)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){tr(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=r+p,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(NS))a(n)}get themeClasses(){return LS+" "+(this.state.facet(DS)?pF:fF)+" "+this.state.facet(Jm)}updateAttrs(){let e=BT(this,Zj,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ya)?"true":"false",class:"cm-content",style:`${Ce.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),BT(this,SC,n);let i=this.observer.ignore(()=>{let r=CS(this.contentDOM,this.contentAttrs,n),s=CS(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Re.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Ih);let e=this.state.facet(Re.cspNonce);tl.mount(this.root,this.styleModules.concat(ZW).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return bb(this,e,xT(this,e,n,i))}moveByGroup(e,n){return bb(this,e,xT(this,e,n,i=>pW(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return ie.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return fW(this,e,n,i)}moveVertically(e,n,i){return bb(this,e,mW(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),nF(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Na.find(s,e-r.from,-1,n)];return P0(i,o.dir==Dt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Kj)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>nG)return $j(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||Fj(s.isolates,i=mT(this,e))))return s.order;i||(i=mT(this,e));let r=Z7(e.text,n,i);return this.bidiCache.push(new ly(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ce.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Sj(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Gm.of(new Kc(typeof e=="number"?ie.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Gm.of(new Kc(ie.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Vn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Vn.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=tl.newName(),r=[Jm.of(i),Ih.of(jS(`.${i}`,e))];return n&&n.dark&&r.push(DS.of(!0)),r}static baseTheme(e){return zp.lowest(Ih.of(jS("."+LS,e,mF)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Ct.get(i)||Ct.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Re.styleModule=Ih;Re.inputHandler=Wj;Re.clipboardInputFilter=bC;Re.clipboardOutputFilter=xC;Re.scrollHandler=qj;Re.focusChangeEffect=Gj;Re.perLineTextDirection=Kj;Re.exceptionSink=Vj;Re.updateListener=NS;Re.editable=ya;Re.mouseSelectionStyle=Hj;Re.dragMovesSelection=Uj;Re.clickAddsSelectionRange=zj;Re.decorations=Kf;Re.outerDecorations=Jj;Re.atomicRanges=_C;Re.bidiIsolatedRanges=Qj;Re.scrollMargins=eF;Re.darkTheme=DS;Re.cspNonce=Ee.define({combine:t=>t.length?t[0]:""});Re.contentAttributes=SC;Re.editorAttributes=Zj;Re.lineWrapping=Re.contentAttributes.of({class:"cm-lineWrapping"});Re.announce=Ze.define();const nG=4096,$T={};class ly{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Dt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new ly(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function BT(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&kS(o,n)}return n}const iG=Ce.mac?"mac":Ce.windows?"win":Ce.linux?"linux":"key";function rG(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Qm(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const sG=zp.default(Re.domEventHandlers({keydown(t,e){return yF(vF(e.state),t,e,"editor")}})),gF=Ee.define({enables:sG}),zT=new WeakMap;function vF(t){let e=t.facet(gF),n=zT.get(e);return n||zT.set(e,n=lG(e.reduce((i,r)=>i.concat(r),[]))),n}function oG(t,e,n){return yF(vF(t.state),e,t,n)}let wa=null;const aG=4e3;function lG(t,e=iG){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(v=>rG(v,e));for(let v=1;v<p.length;v++){let y=p.slice(0,v).join(" ");r(y,!0),f[y]||(f[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let _=wa={view:w,prefix:y,scope:o};return setTimeout(()=>{wa==_&&(wa=null)},aG),!0}]})}let g=p.join(" ");r(g,!1);let b=f[g]||(f[g]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&b.run.push(l),u&&(b.preventDefault=!0),c&&(b.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let h in c)c[h].run.push(f=>d(f,FS))}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let FS=null;function yF(t,e,n,i){FS=e;let r=O7(e),s=di(r,0),o=is(s)==r.length&&r!=" ",a="",l=!1,u=!1,c=!1;wa&&wa.view==n&&wa.scope==i&&(a=wa.prefix+" ",sF.indexOf(e.keyCode)<0&&(u=!0,wa=null));let d=new Set,h=b=>{if(b){for(let v of b.run)if(!d.has(v)&&(d.add(v),v(n)))return b.stopPropagation&&(c=!0),!0;b.preventDefault&&(b.stopPropagation&&(c=!0),u=!0)}return!1},f=t[i],p,g;return f&&(h(f[a+Qm(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ce.windows&&e.ctrlKey&&e.altKey)&&(p=nl[e.keyCode])&&p!=r?(h(f[a+Qm(p,e,!0)])||e.shiftKey&&(g=Vf[e.keyCode])!=r&&g!=p&&h(f[a+Qm(g,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+Qm(r,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),FS=null,l}class Gp{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=wF(e);return[new Gp(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return uG(e,n,i)}}function wF(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Dt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function UT(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function uG(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Dt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=wF(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=a.right-(c?parseInt(c.paddingRight):0),f=OS(t,i),p=OS(t,r),g=f.type==pi.Text?f:null,b=p.type==pi.Text?p:null;if(g&&(t.lineWrapping||f.widgetLineBreaks)&&(g=UT(t,i,1,g)),b&&(t.lineWrapping||p.widgetLineBreaks)&&(b=UT(t,r,-1,b)),g&&b&&g.from==b.from&&g.to==b.to)return y(w(n.from,n.to,g));{let k=g?w(n.from,null,g):_(f,!1),C=b?w(null,n.to,b):_(p,!0),E=[];return(g||f).to<(b||p).from-(g&&b?1:0)||f.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<C.top?E.push(v(d,k.bottom,h,C.top)):k.bottom<C.top&&t.elementAtHeight((k.bottom+C.top)/2).type==pi.Text&&(k.bottom=C.top=(k.bottom+C.top)/2),y(k).concat(E).concat(y(C))}function v(k,C,E,P){return new Gp(e,k-l.left,C-l.top-.01,E-k,P-C+.01)}function y({top:k,bottom:C,horizontal:E}){let P=[];for(let N=0;N<E.length;N+=2)P.push(v(E[N],k,E[N+1],C));return P}function w(k,C,E){let P=1e9,N=-1e9,D=[];function L(z,X,ee,he,V){let F=t.coordsAtPos(z,z==E.to?-2:2),ne=t.coordsAtPos(ee,ee==E.from?2:-2);!F||!ne||(P=Math.min(F.top,ne.top,P),N=Math.max(F.bottom,ne.bottom,N),V==Dt.LTR?D.push(s&&X?d:F.left,s&&he?h:ne.right):D.push(!s&&he?d:ne.left,!s&&X?h:F.right))}let $=k??E.from,G=C??E.to;for(let z of t.visibleRanges)if(z.to>$&&z.from<G)for(let X=Math.max(z.from,$),ee=Math.min(z.to,G);;){let he=t.state.doc.lineAt(X);for(let V of t.bidiSpans(he)){let F=V.from+he.from,ne=V.to+he.from;if(F>=ee)break;ne>X&&L(Math.max(F,X),k==null&&F<=$,Math.min(ne,ee),C==null&&ne>=G,V.dir)}if(X=he.to+1,X>=ee)break}return D.length==0&&L($,k==null,G,C==null,t.textDirection),{top:P,bottom:N,horizontal:D}}function _(k,C){let E=a.top+(C?k.top:k.bottom);return{top:E,bottom:E,horizontal:[]}}}function cG(t,e){return t.constructor==e.constructor&&t.eq(e)}class dG{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(ev)!=e.state.facet(ev)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(ev);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!cG(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const ev=Ee.define();function bF(t){return[Vn.define(e=>new dG(e,t)),ev.of(t)]}const xF=!Ce.ios,Xf=Ee.define({combine(t){return kl(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function hG(t={}){return[Xf.of(t),fG,pG,mG,Xj.of(!0)]}function SF(t){return t.startState.facet(Xf)!=t.state.facet(Xf)}const fG=bF({above:!0,markers(t){let{state:e}=t,n=e.facet(Xf),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||xF:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:ie.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Gp.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=SF(t);return n&&HT(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){HT(e.state,t)},class:"cm-cursorLayer"});function HT(t,e){e.style.animationDuration=t.facet(Xf).cursorBlinkRate+"ms"}const pG=bF({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Gp.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||SF(t)},class:"cm-selectionLayer"}),$S={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};xF&&($S[".cm-line"].caretColor=$S[".cm-content"].caretColor="transparent !important");const mG=zp.highest(Re.theme($S));function VT(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function gG(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class vG{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,u,c)=>r(c,u,u+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,u,c)=>{let d=i(a,l,u);d&&c(u,u+a[0].length,d)};else if(i)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Cu,i=n.add.bind(n);for(let{from:r,to:s}of gG(e,this.maxLength))VT(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){d=a;break}}let h=[],f,p=(g,b,v)=>h.push(v.range(g,b));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,p);else VT(e.state.doc,this.regexp,c,d,(g,b)=>this.addMatch(b,e,g,p));n=n.update({filterFrom:c,filterTo:d,filter:(g,b)=>g<c||b>d,add:h})}}return n}}const BS=/x/.unicode!=null?"gu":"g",yG=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,BS),wG={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _b=null;function bG(){var t;if(_b==null&&typeof document<"u"&&document.body){let e=document.body.style;_b=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return _b||!1}const tv=Ee.define({combine(t){let e=kl(t,{render:null,specialChars:yG,addSpecialChars:null});return(e.replaceTabs=!bG())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,BS)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,BS)),e}});function xG(t={}){return[tv.of(t),SG()]}let WT=null;function SG(){return WT||(WT=Vn.fromClass(class{constructor(t){this.view=t,this.decorations=Je.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(tv)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new vG({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=di(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=Hp(o.text,a,i-o.from);return Je.replace({widget:new EG((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Je.replace({widget:new CG(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(tv);t.startState.facet(tv)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const _G="•";function kG(t){return t>=32?_G:t==10?"␤":String.fromCharCode(9216+t)}class CG extends Cl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=kG(this.code),i=e.state.phrase("Control character")+" "+(wG[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class EG extends Cl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function AG(){return TG}const PG=Je.line({class:"cm-activeLine"}),TG=Vn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(PG.range(r.from)),e=r.from)}return Je.set(n)}},{decorations:t=>t.decorations}),dh="-10000px";class _F{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let u=s[l],c=-1;if(u){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==u.create&&(c=d)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),a&&(a[l]=!!u.above);else{let d=o[l]=this.tooltipViews[c];a&&(a[l]=n[c]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,u)=>n[u]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function RG(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const kb=Ee.define({combine:t=>{var e,n,i;return{position:Ce.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||RG}}}),GT=new WeakMap,PC=Vn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(kb);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new _F(t,TC,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(kb);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=dh,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ce.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==dh&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=kC(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(kb).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:c}=u,d=t.pos[a],h=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){c.style.top=dh;continue}let f=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,g=h.right-h.left,b=(e=GT.get(u))!==null&&e!==void 0?e:h.bottom-h.top,v=u.offset||MG,y=this.view.textDirection==Dt.LTR,w=h.width>i.right-i.left?y?i.left:i.right-h.width:y?Math.max(i.left,Math.min(d.left-(f?14:0)+v.x,i.right-g)):Math.min(Math.max(i.left,d.left-g+(f?14:0)-v.x),i.right-g),_=this.above[a];!l.strictSide&&(_?d.top-b-p-v.y<i.top:d.bottom+b+p+v.y>i.bottom)&&_==i.bottom-d.bottom>d.top-i.top&&(_=this.above[a]=!_);let k=(_?d.top-i.top:i.bottom-d.bottom)-p;if(k<b&&u.resize!==!1){if(k<this.view.defaultLineHeight){c.style.top=dh;continue}GT.set(u,b),c.style.height=(b=k)/s+"px"}else c.style.height&&(c.style.height="");let C=_?d.top-b-p-v.y:d.bottom+p+v.y,E=w+g;if(u.overlap!==!0)for(let P of o)P.left<E&&P.right>w&&P.top<C+b&&P.bottom>C&&(C=_?P.top-b-2-p:P.bottom+p+2);if(this.position=="absolute"?(c.style.top=(C-t.parent.top)/s+"px",c.style.left=(w-t.parent.left)/r+"px"):(c.style.top=C/s+"px",c.style.left=w/r+"px"),f){let P=d.left+(y?v.x:-v.x)-(w+14-7);f.style.left=P/r+"px"}u.overlap!==!0&&o.push({left:w,top:C,right:E,bottom:C+b}),c.classList.toggle("cm-tooltip-above",_),c.classList.toggle("cm-tooltip-below",!_),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=dh}},{eventObservers:{scroll(){this.maybeMeasure()}}}),NG=Re.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),MG={x:0,y:0},TC=Ee.define({enables:[PC,NG]}),uy=Ee.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class N0{static create(e){return new N0(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new _F(e,uy,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const OG=TC.compute([uy],t=>{let e=t.facet(uy);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:N0.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class IG{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Ra)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(c=>c.from<=r&&c.to>=r),u=l&&l.dir==Dt.RTL?-1:1;s=n.x<a.left?-u:u}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>tr(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(PC),n=e?e.manager.tooltips.findIndex(i=>i.create==N0.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!DG(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!LG(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const eg=4;function DG(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-eg&&e.clientX<=i+eg&&e.clientY>=r-eg&&e.clientY<=s+eg}function LG(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function jG(t,e={}){let n=Ze.define(),i=wi.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,Ni.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),a);u.pos=l,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is($G)&&(r=[]);return r},provide:r=>uy.from(r)});return{active:i,extension:[i,Vn.define(r=>new IG(r,t,i,n,e.hoverTime||300)),OG]}}function FG(t,e){let n=t.plugin(PC);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const $G=Ze.define(),KT=Ee.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function qf(t,e){let n=t.plugin(kF),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const kF=Vn.fromClass(class{constructor(t){this.input=t.state.facet(Yf),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(KT);this.top=new tg(t,!0,e.topContainer),this.bottom=new tg(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(KT);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new tg(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new tg(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Yf);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class tg{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=XT(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=XT(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function XT(t){let e=t.nextSibling;return t.remove(),e}const Yf=Ee.define({enables:kF});class rl extends ku{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}rl.prototype.elementClass="";rl.prototype.toDOM=void 0;rl.prototype.mapMode=Ni.TrackBefore;rl.prototype.startSide=rl.prototype.endSide=-1;rl.prototype.point=!0;const nv=Ee.define(),BG=Ee.define(),iv=Ee.define(),qT=Ee.define({combine:t=>t.some(e=>e)});function zG(t){return[UG]}const UG=Vn.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(iv).map(e=>new ZT(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(qT),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(qT)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=pt.iter(this.view.state.facet(nv),this.view.viewport.from),i=[],r=this.gutters.map(s=>new HG(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==pi.Text&&o){zS(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==pi.Text){zS(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(iv),n=t.state.facet(iv),i=t.docChanged||t.heightChanged||t.viewportChanged||!pt.eq(t.startState.facet(nv),t.state.facet(nv),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new ZT(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Dt.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function YT(t){return Array.isArray(t)?t:[t]}function zS(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class HG{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=pt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new CF(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];zS(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(BG)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class ZT{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=YT(n.markers(e)),n.initialSpacer&&(this.spacer=new CF(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=YT(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!pt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class CF{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),VG(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function VG(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const WG=Ee.define(),GG=Ee.define(),Ec=Ee.define({combine(t){return kl(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return i}})}});class Cb extends rl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Eb(t,e){return t.state.facet(Ec).formatNumber(e,t.state)}const KG=iv.compute([Ec],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(WG)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Cb(Eb(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(GG)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Ec)!=e.state.facet(Ec),initialSpacer(e){return new Cb(Eb(e,JT(e.state.doc.lines)))},updateSpacer(e,n){let i=Eb(n.view,JT(n.view.state.doc.lines));return i==e.number?e:new Cb(i)},domEventHandlers:t.facet(Ec).domEventHandlers}));function XG(t={}){return[Ec.of(t),zG(),KG]}function JT(t){let e=9;for(;e<t;)e=e*10+9;return e}const qG=new class extends rl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},YG=nv.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(qG.range(r)))}return pt.of(e)});function ZG(){return YG}function EF(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=EF(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function $e(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=EF(t))&&(i&&(i+=" "),i+=e);return i}const RC={BASE_URL:"/VonSim8/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},JG=Symbol((RC?"production":void 0)!=="production"?"RESET":""),QG=t=>typeof(t==null?void 0:t.then)=="function";function eK(t=()=>{try{return window.localStorage}catch(n){(RC?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,u)=>{var c,d;const h=p=>{if(p=p||"",i!==p){try{r=JSON.parse(p,e==null?void 0:e.reviver)}catch{return u}i=p}return r},f=(d=(c=t())==null?void 0:c.getItem(l))!=null?d:null;return QG(f)?f.then(h):h(f)},setItem:(l,u)=>{var c;return(c=t())==null?void 0:c.setItem(l,JSON.stringify(u,void 0))},removeItem:l=>{var u;return(u=t())==null?void 0:u.removeItem(l)}},o=l=>(u,c,d)=>l(u,h=>{let f;try{f=JSON.parse(h||"")}catch{f=d}c(f)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,u)=>{if(!(t()instanceof window.Storage))return()=>{};const c=d=>{d.storageArea===t()&&d.key===l&&u(d.newValue)};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}}),a&&(s.subscribe=o(a)),s}const tK=eK();function AF(t,e,n=tK,i){const r=i==null?void 0:i.getOnInit,s=ve(r?n.getItem(t,e):e);return(RC?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},ve(a=>a(s),(a,l,u)=>{const c=typeof u=="function"?u(a(s)):u;return c===JG?(l(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(l(s,d),n.setItem(t,d))):(l(s,c),n.setItem(t,c))})}function nK(t,e=globalThis==null?void 0:globalThis.document){const n=ei(t);x.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var iK="DismissableLayer",US="dismissableLayer.update",rK="dismissableLayer.pointerDownOutside",sK="dismissableLayer.focusOutside",QT,PF=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Kp=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,u=x.useContext(PF),[c,d]=x.useState(null),h=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=x.useState({}),p=ct(e,E=>d(E)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(b),y=c?g.indexOf(c):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,_=y>=v,k=aK(E=>{const P=E.target,N=[...u.branches].some(D=>D.contains(P));!_||N||(r==null||r(E),o==null||o(E),E.defaultPrevented||a==null||a())},h),C=lK(E=>{const P=E.target;[...u.branches].some(D=>D.contains(P))||(s==null||s(E),o==null||o(E),E.defaultPrevented||a==null||a())},h);return nK(E=>{y===u.layers.size-1&&(i==null||i(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},h),x.useEffect(()=>{if(c)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(QT=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),eR(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=QT)}},[c,h,n,u]),x.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),eR())},[c,u]),x.useEffect(()=>{const E=()=>f({});return document.addEventListener(US,E),()=>document.removeEventListener(US,E)},[]),m.jsx(He.div,{...l,ref:p,style:{pointerEvents:w?_?"auto":"none":void 0,...t.style},onFocusCapture:ge(t.onFocusCapture,C.onFocusCapture),onBlurCapture:ge(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ge(t.onPointerDownCapture,k.onPointerDownCapture)})});Kp.displayName=iK;var oK="DismissableLayerBranch",TF=x.forwardRef((t,e)=>{const n=x.useContext(PF),i=x.useRef(null),r=ct(e,i);return x.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),m.jsx(He.div,{...t,ref:r})});TF.displayName=oK;function aK(t,e=globalThis==null?void 0:globalThis.document){const n=ei(t),i=x.useRef(!1),r=x.useRef(()=>{});return x.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){RF(rK,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function lK(t,e=globalThis==null?void 0:globalThis.document){const n=ei(t),i=x.useRef(!1);return x.useEffect(()=>{const r=s=>{s.target&&!i.current&&RF(sK,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function eR(){const t=new CustomEvent(US);document.dispatchEvent(t)}function RF(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?uC(r,s):r.dispatchEvent(s)}var uK=Kp,cK=TF,Ab=0;function NC(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??tR()),document.body.insertAdjacentElement("beforeend",t[1]??tR()),Ab++,()=>{Ab===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ab--}},[])}function tR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Pb="focusScope.autoFocusOnMount",Tb="focusScope.autoFocusOnUnmount",nR={bubbles:!1,cancelable:!0},dK="FocusScope",M0=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=x.useState(null),u=ei(r),c=ei(s),d=x.useRef(null),h=ct(e,g=>l(g)),f=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(i){let g=function(w){if(f.paused||!a)return;const _=w.target;a.contains(_)?d.current=_:sa(d.current,{select:!0})},b=function(w){if(f.paused||!a)return;const _=w.relatedTarget;_!==null&&(a.contains(_)||sa(d.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&sa(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const y=new MutationObserver(v);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),y.disconnect()}}},[i,a,f.paused]),x.useEffect(()=>{if(a){rR.add(f);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(Pb,nR);a.addEventListener(Pb,u),a.dispatchEvent(v),v.defaultPrevented||(hK(vK(NF(a)),{select:!0}),document.activeElement===g&&sa(a))}return()=>{a.removeEventListener(Pb,u),setTimeout(()=>{const v=new CustomEvent(Tb,nR);a.addEventListener(Tb,c),a.dispatchEvent(v),v.defaultPrevented||sa(g??document.body,{select:!0}),a.removeEventListener(Tb,c),rR.remove(f)},0)}}},[a,u,c,f]);const p=x.useCallback(g=>{if(!n&&!i||f.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(b&&v){const y=g.currentTarget,[w,_]=fK(y);w&&_?!g.shiftKey&&v===_?(g.preventDefault(),n&&sa(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),n&&sa(_,{select:!0})):v===y&&g.preventDefault()}},[n,i,f.paused]);return m.jsx(He.div,{tabIndex:-1,...o,ref:h,onKeyDown:p})});M0.displayName=dK;function hK(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(sa(i,{select:e}),document.activeElement!==n)return}function fK(t){const e=NF(t),n=iR(e,t),i=iR(e.reverse(),t);return[n,i]}function NF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function iR(t,e){for(const n of t)if(!pK(n,{upTo:e}))return n}function pK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function mK(t){return t instanceof HTMLInputElement&&"select"in t}function sa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&mK(t)&&e&&t.select()}}var rR=gK();function gK(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=sR(t,e),t.unshift(e)},remove(e){var n;t=sR(t,e),(n=t[0])==null||n.resume()}}}function sR(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function vK(t){return t.filter(e=>e.tagName!=="A")}const yK=["top","right","bottom","left"],sl=Math.min,Ji=Math.max,cy=Math.round,ng=Math.floor,Ys=t=>({x:t,y:t}),wK={left:"right",right:"left",bottom:"top",top:"bottom"},bK={start:"end",end:"start"};function HS(t,e,n){return Ji(t,sl(e,n))}function Uo(t,e){return typeof t=="function"?t(e):t}function Ho(t){return t.split("-")[0]}function Bd(t){return t.split("-")[1]}function MC(t){return t==="x"?"y":"x"}function OC(t){return t==="y"?"height":"width"}function ol(t){return["top","bottom"].includes(Ho(t))?"y":"x"}function IC(t){return MC(ol(t))}function xK(t,e,n){n===void 0&&(n=!1);const i=Bd(t),r=IC(t),s=OC(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=dy(o)),[o,dy(o)]}function SK(t){const e=dy(t);return[VS(t),e,VS(e)]}function VS(t){return t.replace(/start|end/g,e=>bK[e])}function _K(t,e,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?r:i:e?i:r;case"left":case"right":return e?s:o;default:return[]}}function kK(t,e,n,i){const r=Bd(t);let s=_K(Ho(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(VS)))),s}function dy(t){return t.replace(/left|right|bottom|top/g,e=>wK[e])}function CK(t){return{top:0,right:0,bottom:0,left:0,...t}}function MF(t){return typeof t!="number"?CK(t):{top:t,right:t,bottom:t,left:t}}function hy(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function oR(t,e,n){let{reference:i,floating:r}=t;const s=ol(e),o=IC(e),a=OC(o),l=Ho(e),u=s==="y",c=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,h=i[a]/2-r[a]/2;let f;switch(l){case"top":f={x:c,y:i.y-r.height};break;case"bottom":f={x:c,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:d};break;case"left":f={x:i.x-r.width,y:d};break;default:f={x:i.x,y:i.y}}switch(Bd(e)){case"start":f[o]-=h*(n&&u?-1:1);break;case"end":f[o]+=h*(n&&u?-1:1);break}return f}const EK=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=oR(u,i,l),h=i,f={},p=0;for(let g=0;g<a.length;g++){const{name:b,fn:v}=a[g],{x:y,y:w,data:_,reset:k}=await v({x:c,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=y??c,d=w??d,f={...f,[b]:{...f[b],..._}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):k.rects),{x:c,y:d}=oR(u,h,l)),g=-1)}return{x:c,y:d,placement:h,strategy:r,middlewareData:f}};async function Zf(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Uo(e,t),p=MF(f),b=a[h?d==="floating"?"reference":"floating":d],v=hy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),y=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},k=hy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:w,strategy:l}):y);return{top:(v.top-k.top+p.top)/_.y,bottom:(k.bottom-v.bottom+p.bottom)/_.y,left:(v.left-k.left+p.left)/_.x,right:(k.right-v.right+p.right)/_.x}}const AK=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=Uo(t,e)||{};if(u==null)return{};const d=MF(c),h={x:n,y:i},f=IC(r),p=OC(f),g=await o.getDimensions(u),b=f==="y",v=b?"top":"left",y=b?"bottom":"right",w=b?"clientHeight":"clientWidth",_=s.reference[p]+s.reference[f]-h[f]-s.floating[p],k=h[f]-s.reference[f],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=C?C[w]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=a.floating[w]||s.floating[p]);const P=_/2-k/2,N=E/2-g[p]/2-1,D=sl(d[v],N),L=sl(d[y],N),$=D,G=E-g[p]-L,z=E/2-g[p]/2+P,X=HS($,z,G),ee=!l.arrow&&Bd(r)!=null&&z!==X&&s.reference[p]/2-(z<$?D:L)-g[p]/2<0,he=ee?z<$?z-$:z-G:0;return{[f]:h[f]+he,data:{[f]:X,centerOffset:z-X-he,...ee&&{alignmentOffset:he}},reset:ee}}}),PK=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...b}=Uo(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Ho(r),y=ol(a),w=Ho(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=h||(w||!g?[dy(a)]:SK(a)),C=p!=="none";!h&&C&&k.push(...kK(a,g,p,_));const E=[a,...k],P=await Zf(e,b),N=[];let D=((i=s.flip)==null?void 0:i.overflows)||[];if(c&&N.push(P[v]),d){const z=xK(r,o,_);N.push(P[z[0]],P[z[1]])}if(D=[...D,{placement:r,overflows:N}],!N.every(z=>z<=0)){var L,$;const z=(((L=s.flip)==null?void 0:L.index)||0)+1,X=E[z];if(X)return{data:{index:z,overflows:D},reset:{placement:X}};let ee=($=D.filter(he=>he.overflows[0]<=0).sort((he,V)=>he.overflows[1]-V.overflows[1])[0])==null?void 0:$.placement;if(!ee)switch(f){case"bestFit":{var G;const he=(G=D.filter(V=>{if(C){const F=ol(V.placement);return F===y||F==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(F=>F>0).reduce((F,ne)=>F+ne,0)]).sort((V,F)=>V[1]-F[1])[0])==null?void 0:G[0];he&&(ee=he);break}case"initialPlacement":ee=a;break}if(r!==ee)return{reset:{placement:ee}}}return{}}}};function aR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function lR(t){return yK.some(e=>t[e]>=0)}const TK=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=Uo(t,e);switch(i){case"referenceHidden":{const s=await Zf(e,{...r,elementContext:"reference"}),o=aR(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:lR(o)}}}case"escaped":{const s=await Zf(e,{...r,altBoundary:!0}),o=aR(s,n.floating);return{data:{escapedOffsets:o,escaped:lR(o)}}}default:return{}}}}};async function RK(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=Ho(n),a=Bd(n),l=ol(n)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,d=Uo(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*c,y:h*u}:{x:h*u,y:f*c}}const NK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await RK(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},MK=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:v,y}=b;return{x:v,y}}},...l}=Uo(t,e),u={x:n,y:i},c=await Zf(e,l),d=ol(Ho(r)),h=MC(d);let f=u[h],p=u[d];if(s){const b=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=f+c[b],w=f-c[v];f=HS(y,f,w)}if(o){const b=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=p+c[b],w=p-c[v];p=HS(y,p,w)}const g=a.fn({...e,[h]:f,[d]:p});return{...g,data:{x:g.x-n,y:g.y-i,enabled:{[h]:s,[d]:o}}}}}},OK=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Uo(t,e),c={x:n,y:i},d=ol(r),h=MC(d);let f=c[h],p=c[d];const g=Uo(a,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=h==="y"?"height":"width",_=s.reference[h]-s.floating[w]+b.mainAxis,k=s.reference[h]+s.reference[w]-b.mainAxis;f<_?f=_:f>k&&(f=k)}if(u){var v,y;const w=h==="y"?"width":"height",_=["top","left"].includes(Ho(r)),k=s.reference[d]-s.floating[w]+(_&&((v=o.offset)==null?void 0:v[d])||0)+(_?0:b.crossAxis),C=s.reference[d]+s.reference[w]+(_?0:((y=o.offset)==null?void 0:y[d])||0)-(_?b.crossAxis:0);p<k?p=k:p>C&&(p=C)}return{[h]:f,[d]:p}}}},IK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=Uo(t,e),c=await Zf(e,u),d=Ho(r),h=Bd(r),f=ol(r)==="y",{width:p,height:g}=s.floating;let b,v;d==="top"||d==="bottom"?(b=d,v=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,b=h==="end"?"top":"bottom");const y=g-c.top-c.bottom,w=p-c.left-c.right,_=sl(g-c[b],y),k=sl(p-c[v],w),C=!e.middlewareData.shift;let E=_,P=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=w),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(E=y),C&&!h){const D=Ji(c.left,0),L=Ji(c.right,0),$=Ji(c.top,0),G=Ji(c.bottom,0);f?P=p-2*(D!==0||L!==0?D+L:Ji(c.left,c.right)):E=g-2*($!==0||G!==0?$+G:Ji(c.top,c.bottom))}await l({...e,availableWidth:P,availableHeight:E});const N=await o.getDimensions(a.floating);return p!==N.width||g!==N.height?{reset:{rects:!0}}:{}}}};function O0(){return typeof window<"u"}function zd(t){return OF(t)?(t.nodeName||"").toLowerCase():"#document"}function sr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function so(t){var e;return(e=(OF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function OF(t){return O0()?t instanceof Node||t instanceof sr(t).Node:!1}function ms(t){return O0()?t instanceof Element||t instanceof sr(t).Element:!1}function eo(t){return O0()?t instanceof HTMLElement||t instanceof sr(t).HTMLElement:!1}function uR(t){return!O0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof sr(t).ShadowRoot}function Xp(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=gs(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function DK(t){return["table","td","th"].includes(zd(t))}function I0(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function DC(t){const e=LC(),n=ms(t)?gs(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function LK(t){let e=al(t);for(;eo(e)&&!kd(e);){if(DC(e))return e;if(I0(e))return null;e=al(e)}return null}function LC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function kd(t){return["html","body","#document"].includes(zd(t))}function gs(t){return sr(t).getComputedStyle(t)}function D0(t){return ms(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function al(t){if(zd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||uR(t)&&t.host||so(t);return uR(e)?e.host:e}function IF(t){const e=al(t);return kd(e)?t.ownerDocument?t.ownerDocument.body:t.body:eo(e)&&Xp(e)?e:IF(e)}function Jf(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=IF(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=sr(r);if(s){const a=WS(o);return e.concat(o,o.visualViewport||[],Xp(r)?r:[],a&&n?Jf(a):[])}return e.concat(r,Jf(r,[],n))}function WS(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function DF(t){const e=gs(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=eo(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=cy(n)!==s||cy(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function jC(t){return ms(t)?t:t.contextElement}function Xc(t){const e=jC(t);if(!eo(e))return Ys(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=DF(e);let o=(s?cy(n.width):n.width)/i,a=(s?cy(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const jK=Ys(0);function LF(t){const e=sr(t);return!LC()||!e.visualViewport?jK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function FK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==sr(t)?!1:e}function Tu(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=jC(t);let o=Ys(1);e&&(i?ms(i)&&(o=Xc(i)):o=Xc(t));const a=FK(s,n,i)?LF(s):Ys(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,c=r.width/o.x,d=r.height/o.y;if(s){const h=sr(s),f=i&&ms(i)?sr(i):i;let p=h,g=WS(p);for(;g&&i&&f!==p;){const b=Xc(g),v=g.getBoundingClientRect(),y=gs(g),w=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*b.x,_=v.top+(g.clientTop+parseFloat(y.paddingTop))*b.y;l*=b.x,u*=b.y,c*=b.x,d*=b.y,l+=w,u+=_,p=sr(g),g=WS(p)}}return hy({width:c,height:d,x:l,y:u})}function FC(t,e){const n=D0(t).scrollLeft;return e?e.left+n:Tu(so(t)).left+n}function jF(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:FC(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function $K(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=so(i),a=e?I0(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Ys(1);const c=Ys(0),d=eo(i);if((d||!d&&!s)&&((zd(i)!=="body"||Xp(o))&&(l=D0(i)),eo(i))){const f=Tu(i);u=Xc(i),c.x=f.x+i.clientLeft,c.y=f.y+i.clientTop}const h=o&&!d&&!s?jF(o,l,!0):Ys(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:n.y*u.y-l.scrollTop*u.y+c.y+h.y}}function BK(t){return Array.from(t.getClientRects())}function zK(t){const e=so(t),n=D0(t),i=t.ownerDocument.body,r=Ji(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Ji(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+FC(t);const a=-n.scrollTop;return gs(i).direction==="rtl"&&(o+=Ji(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function UK(t,e){const n=sr(t),i=so(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const u=LC();(!u||u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function HK(t,e){const n=Tu(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=eo(t)?Xc(t):Ys(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,u=i*s.y;return{width:o,height:a,x:l,y:u}}function cR(t,e,n){let i;if(e==="viewport")i=UK(t,n);else if(e==="document")i=zK(so(t));else if(ms(e))i=HK(e,n);else{const r=LF(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return hy(i)}function FF(t,e){const n=al(t);return n===e||!ms(n)||kd(n)?!1:gs(n).position==="fixed"||FF(n,e)}function VK(t,e){const n=e.get(t);if(n)return n;let i=Jf(t,[],!1).filter(a=>ms(a)&&zd(a)!=="body"),r=null;const s=gs(t).position==="fixed";let o=s?al(t):t;for(;ms(o)&&!kd(o);){const a=gs(o),l=DC(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Xp(o)&&!l&&FF(t,o))?i=i.filter(c=>c!==o):r=a,o=al(o)}return e.set(t,i),i}function WK(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?I0(e)?[]:VK(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((u,c)=>{const d=cR(e,c,r);return u.top=Ji(d.top,u.top),u.right=sl(d.right,u.right),u.bottom=sl(d.bottom,u.bottom),u.left=Ji(d.left,u.left),u},cR(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function GK(t){const{width:e,height:n}=DF(t);return{width:e,height:n}}function KK(t,e,n){const i=eo(e),r=so(e),s=n==="fixed",o=Tu(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ys(0);if(i||!i&&!s)if((zd(e)!=="body"||Xp(r))&&(a=D0(e)),i){const h=Tu(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else r&&(l.x=FC(r));const u=r&&!i&&!s?jF(r,a):Ys(0),c=o.left+a.scrollLeft-l.x-u.x,d=o.top+a.scrollTop-l.y-u.y;return{x:c,y:d,width:o.width,height:o.height}}function Rb(t){return gs(t).position==="static"}function dR(t,e){if(!eo(t)||gs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return so(t)===n&&(n=n.ownerDocument.body),n}function $F(t,e){const n=sr(t);if(I0(t))return n;if(!eo(t)){let r=al(t);for(;r&&!kd(r);){if(ms(r)&&!Rb(r))return r;r=al(r)}return n}let i=dR(t,e);for(;i&&DK(i)&&Rb(i);)i=dR(i,e);return i&&kd(i)&&Rb(i)&&!DC(i)?n:i||LK(t)||n}const XK=async function(t){const e=this.getOffsetParent||$F,n=this.getDimensions,i=await n(t.floating);return{reference:KK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function qK(t){return gs(t).direction==="rtl"}const YK={convertOffsetParentRelativeRectToViewportRelativeRect:$K,getDocumentElement:so,getClippingRect:WK,getOffsetParent:$F,getElementRects:XK,getClientRects:BK,getDimensions:GK,getScale:Xc,isElement:ms,isRTL:qK};function ZK(t,e){let n=null,i;const r=so(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:d,height:h}=t.getBoundingClientRect();if(a||e(),!d||!h)return;const f=ng(c),p=ng(r.clientWidth-(u+d)),g=ng(r.clientHeight-(c+h)),b=ng(u),y={rootMargin:-f+"px "+-p+"px "+-g+"px "+-b+"px",threshold:Ji(0,sl(1,l))||1};let w=!0;function _(k){const C=k[0].intersectionRatio;if(C!==l){if(!w)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(_,{...y,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,y)}n.observe(t)}return o(!0),s}function JK(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=jC(t),c=r||s?[...u?Jf(u):[],...Jf(e)]:[];c.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=u&&a?ZK(u,n):null;let h=-1,f=null;o&&(f=new ResizeObserver(v=>{let[y]=v;y&&y.target===u&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),n()}),u&&!l&&f.observe(u),f.observe(e));let p,g=l?Tu(t):null;l&&b();function b(){const v=Tu(t);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,p=requestAnimationFrame(b)}return n(),()=>{var v;c.forEach(y=>{r&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),d==null||d(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const QK=NK,eX=MK,tX=PK,nX=IK,iX=TK,hR=AK,rX=OK,sX=(t,e,n)=>{const i=new Map,r={platform:YK,...n},s={...r.platform,_c:i};return EK(t,e,{...r,platform:s})};var rv=typeof document<"u"?x.useLayoutEffect:x.useEffect;function fy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!fy(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!fy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function BF(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function fR(t,e){const n=BF(t);return Math.round(e*n)/n}function Nb(t){const e=x.useRef(t);return rv(()=>{e.current=t}),e}function oX(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=x.useState(i);fy(h,i)||f(i);const[p,g]=x.useState(null),[b,v]=x.useState(null),y=x.useCallback(V=>{V!==C.current&&(C.current=V,g(V))},[]),w=x.useCallback(V=>{V!==E.current&&(E.current=V,v(V))},[]),_=s||p,k=o||b,C=x.useRef(null),E=x.useRef(null),P=x.useRef(c),N=l!=null,D=Nb(l),L=Nb(r),$=Nb(u),G=x.useCallback(()=>{if(!C.current||!E.current)return;const V={placement:e,strategy:n,middleware:h};L.current&&(V.platform=L.current),sX(C.current,E.current,V).then(F=>{const ne={...F,isPositioned:$.current!==!1};z.current&&!fy(P.current,ne)&&(P.current=ne,Sl.flushSync(()=>{d(ne)}))})},[h,e,n,L,$]);rv(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,d(V=>({...V,isPositioned:!1})))},[u]);const z=x.useRef(!1);rv(()=>(z.current=!0,()=>{z.current=!1}),[]),rv(()=>{if(_&&(C.current=_),k&&(E.current=k),_&&k){if(D.current)return D.current(_,k,G);G()}},[_,k,G,D,N]);const X=x.useMemo(()=>({reference:C,floating:E,setReference:y,setFloating:w}),[y,w]),ee=x.useMemo(()=>({reference:_,floating:k}),[_,k]),he=x.useMemo(()=>{const V={position:n,left:0,top:0};if(!ee.floating)return V;const F=fR(ee.floating,c.x),ne=fR(ee.floating,c.y);return a?{...V,transform:"translate("+F+"px, "+ne+"px)",...BF(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:ne}},[n,a,ee.floating,c.x,c.y]);return x.useMemo(()=>({...c,update:G,refs:X,elements:ee,floatingStyles:he}),[c,G,X,ee,he])}const aX=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?hR({element:i.current,padding:r}).fn(n):{}:i?hR({element:i,padding:r}).fn(n):{}}}},lX=(t,e)=>({...QK(t),options:[t,e]}),uX=(t,e)=>({...eX(t),options:[t,e]}),cX=(t,e)=>({...rX(t),options:[t,e]}),dX=(t,e)=>({...tX(t),options:[t,e]}),hX=(t,e)=>({...nX(t),options:[t,e]}),fX=(t,e)=>({...iX(t),options:[t,e]}),pX=(t,e)=>({...aX(t),options:[t,e]});var mX="Arrow",zF=x.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return m.jsx(He.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});zF.displayName=mX;var gX=zF;function $C(t){const[e,n]=x.useState(void 0);return Qn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var BC="Popper",[UF,Ud]=lC(BC),[vX,HF]=UF(BC),VF=t=>{const{__scopePopper:e,children:n}=t,[i,r]=x.useState(null);return m.jsx(vX,{scope:e,anchor:i,onAnchorChange:r,children:n})};VF.displayName=BC;var WF="PopperAnchor",GF=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=HF(WF,n),o=x.useRef(null),a=ct(e,o);return x.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:m.jsx(He.div,{...r,ref:a})});GF.displayName=WF;var zC="PopperContent",[yX,wX]=UF(zC),KF=x.forwardRef((t,e)=>{var S,T,M,R,K,W;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:p,...g}=t,b=HF(zC,n),[v,y]=x.useState(null),w=ct(e,te=>y(te)),[_,k]=x.useState(null),C=$C(_),E=(C==null?void 0:C.width)??0,P=(C==null?void 0:C.height)??0,N=i+(s!=="center"?"-"+s:""),D=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},L=Array.isArray(u)?u:[u],$=L.length>0,G={padding:D,boundary:L.filter(xX),altBoundary:$},{refs:z,floatingStyles:X,placement:ee,isPositioned:he,middlewareData:V}=oX({strategy:"fixed",placement:N,whileElementsMounted:(...te)=>JK(...te,{animationFrame:f==="always"}),elements:{reference:b.anchor},middleware:[lX({mainAxis:r+P,alignmentAxis:o}),l&&uX({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?cX():void 0,...G}),l&&dX({...G}),hX({...G,apply:({elements:te,rects:q,availableWidth:Te,availableHeight:Le})=>{const{width:Fe,height:De}=q.reference,Ve=te.floating.style;Ve.setProperty("--radix-popper-available-width",`${Te}px`),Ve.setProperty("--radix-popper-available-height",`${Le}px`),Ve.setProperty("--radix-popper-anchor-width",`${Fe}px`),Ve.setProperty("--radix-popper-anchor-height",`${De}px`)}}),_&&pX({element:_,padding:a}),SX({arrowWidth:E,arrowHeight:P}),h&&fX({strategy:"referenceHidden",...G})]}),[F,ne]=YF(ee),Se=ei(p);Qn(()=>{he&&(Se==null||Se())},[he,Se]);const Z=(S=V.arrow)==null?void 0:S.x,ue=(T=V.arrow)==null?void 0:T.y,I=((M=V.arrow)==null?void 0:M.centerOffset)!==0,[O,B]=x.useState();return Qn(()=>{v&&B(window.getComputedStyle(v).zIndex)},[v]),m.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:he?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:O,"--radix-popper-transform-origin":[(R=V.transformOrigin)==null?void 0:R.x,(K=V.transformOrigin)==null?void 0:K.y].join(" "),...((W=V.hide)==null?void 0:W.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx(yX,{scope:n,placedSide:F,onArrowChange:k,arrowX:Z,arrowY:ue,shouldHideArrow:I,children:m.jsx(He.div,{"data-side":F,"data-align":ne,...g,ref:w,style:{...g.style,animation:he?void 0:"none"}})})})});KF.displayName=zC;var XF="PopperArrow",bX={top:"bottom",right:"left",bottom:"top",left:"right"},qF=x.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=wX(XF,i),o=bX[s.placedSide];return m.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:m.jsx(gX,{...r,ref:n,style:{...r.style,display:"block"}})})});qF.displayName=XF;function xX(t){return t!==null}var SX=t=>({name:"transformOrigin",options:t,fn(e){var b,v,y;const{placement:n,rects:i,middlewareData:r}=e,o=((b=r.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,c]=YF(n),d={start:"0%",center:"50%",end:"100%"}[c],h=(((v=r.arrow)==null?void 0:v.x)??0)+a/2,f=(((y=r.arrow)==null?void 0:y.y)??0)+l/2;let p="",g="";return u==="bottom"?(p=o?d:`${h}px`,g=`${-l}px`):u==="top"?(p=o?d:`${h}px`,g=`${i.floating.height+l}px`):u==="right"?(p=`${-l}px`,g=o?d:`${f}px`):u==="left"&&(p=`${i.floating.width+l}px`,g=o?d:`${f}px`),{data:{x:p,y:g}}}});function YF(t){const[e,n="center"]=t.split("-");return[e,n]}var UC=VF,L0=GF,HC=KF,VC=qF,_X="Portal",qp=x.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=x.useState(!1);Qn(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?YH.createPortal(m.jsx(He.div,{...i,ref:e}),o):null});qp.displayName=_X;var kX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Yu=new WeakMap,ig=new WeakMap,rg={},Mb=0,ZF=function(t){return t&&(t.host||ZF(t.parentNode))},CX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=ZF(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},EX=function(t,e,n,i){var r=CX(e,Array.isArray(t)?t:[t]);rg[n]||(rg[n]=new WeakMap);var s=rg[n],o=[],a=new Set,l=new Set(r),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};r.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))c(h);else try{var f=h.getAttribute(i),p=f!==null&&f!=="false",g=(Yu.get(h)||0)+1,b=(s.get(h)||0)+1;Yu.set(h,g),s.set(h,b),o.push(h),g===1&&p&&ig.set(h,!0),b===1&&h.setAttribute(n,"true"),p||h.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return c(e),a.clear(),Mb++,function(){o.forEach(function(d){var h=Yu.get(d)-1,f=s.get(d)-1;Yu.set(d,h),s.set(d,f),h||(ig.has(d)||d.removeAttribute(i),ig.delete(d)),f||d.removeAttribute(n)}),Mb--,Mb||(Yu=new WeakMap,Yu=new WeakMap,ig=new WeakMap,rg={})}},WC=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=kX(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),EX(i,r,n,"aria-hidden")):function(){return null}},sv="right-scroll-bar-position",ov="width-before-scroll-bar",AX="with-scroll-bars-hidden",PX="--removed-body-scroll-bar-size";function Ob(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function TX(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var RX=typeof window<"u"?x.useLayoutEffect:x.useEffect,pR=new WeakMap;function NX(t,e){var n=TX(null,function(i){return t.forEach(function(r){return Ob(r,i)})});return RX(function(){var i=pR.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||Ob(a,null)}),s.forEach(function(a){r.has(a)||Ob(a,o)})}pR.set(n,t)},[t]),n}function MX(t){return t}function OX(t,e){e===void 0&&(e=MX);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return r}function IX(t){t===void 0&&(t={});var e=OX(null);return e.options=js({async:!0,ssr:!1},t),e}var JF=function(t){var e=t.sideCar,n=tj(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return x.createElement(i,js({},n))};JF.isSideCarExport=!0;function DX(t,e){return t.useMedium(e),JF}var QF=IX(),Ib=function(){},j0=x.forwardRef(function(t,e){var n=x.useRef(null),i=x.useState({onScrollCapture:Ib,onWheelCapture:Ib,onTouchMoveCapture:Ib}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,g=t.allowPinchZoom,b=t.as,v=b===void 0?"div":b,y=t.gapMode,w=tj(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,k=NX([n,e]),C=js(js({},w),r);return x.createElement(x.Fragment,null,c&&x.createElement(_,{sideCar:QF,removeScrollBar:u,shards:d,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:y}),o?x.cloneElement(x.Children.only(a),js(js({},C),{ref:k})):x.createElement(v,js({},C,{className:l,ref:k}),a))});j0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};j0.classNames={fullWidth:ov,zeroRight:sv};var LX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=LX();return e&&t.setAttribute("nonce",e),t}function FX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function $X(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var BX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=jX())&&(FX(e,n),$X(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},zX=function(){var t=BX();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},e$=function(){var t=zX(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},UX={left:0,top:0,right:0,gap:0},Db=function(t){return parseInt(t||"",10)||0},HX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Db(n),Db(i),Db(r)]},VX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return UX;var e=HX(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},WX=e$(),qc="data-scroll-locked",GX=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(AX,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(qc,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sv,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(ov,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(sv," .").concat(sv,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(ov," .").concat(ov,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(qc,`] {
    `).concat(PX,": ").concat(a,`px;
  }
`)},mR=function(){var t=parseInt(document.body.getAttribute(qc)||"0",10);return isFinite(t)?t:0},KX=function(){x.useEffect(function(){return document.body.setAttribute(qc,(mR()+1).toString()),function(){var t=mR()-1;t<=0?document.body.removeAttribute(qc):document.body.setAttribute(qc,t.toString())}},[])},XX=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;KX();var s=x.useMemo(function(){return VX(r)},[r]);return x.createElement(WX,{styles:GX(s,!e,r,n?"":"!important")})},GS=!1;if(typeof window<"u")try{var sg=Object.defineProperty({},"passive",{get:function(){return GS=!0,!0}});window.addEventListener("test",sg,sg),window.removeEventListener("test",sg,sg)}catch{GS=!1}var Zu=GS?{passive:!1}:!1,qX=function(t){return t.tagName==="TEXTAREA"},t$=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!qX(t)&&n[e]==="visible")},YX=function(t){return t$(t,"overflowY")},ZX=function(t){return t$(t,"overflowX")},gR=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=n$(t,i);if(r){var s=i$(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},JX=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},QX=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},n$=function(t,e){return t==="v"?YX(e):ZX(e)},i$=function(t,e){return t==="v"?JX(e):QX(e)},eq=function(t,e){return t==="h"&&e==="rtl"?-1:1},tq=function(t,e,n,i,r){var s=eq(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),u=!1,c=o>0,d=0,h=0;do{var f=i$(t,a),p=f[0],g=f[1],b=f[2],v=g-b-s*p;(p||v)&&n$(t,a)&&(d+=v,h+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&(Math.abs(d)<1||!r)||!c&&(Math.abs(h)<1||!r))&&(u=!0),u},og=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},vR=function(t){return[t.deltaX,t.deltaY]},yR=function(t){return t&&"current"in t?t.current:t},nq=function(t,e){return t[0]===e[0]&&t[1]===e[1]},iq=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},rq=0,Ju=[];function sq(t){var e=x.useRef([]),n=x.useRef([0,0]),i=x.useRef(),r=x.useState(rq++)[0],s=x.useState(e$)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var g=e7([t.lockRef.current],(t.shards||[]).map(yR),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=og(g),y=n.current,w="deltaX"in g?g.deltaX:y[0]-v[0],_="deltaY"in g?g.deltaY:y[1]-v[1],k,C=g.target,E=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in g&&E==="h"&&C.type==="range")return!1;var P=gR(E,C);if(!P)return!0;if(P?k=E:(k=E==="v"?"h":"v",P=gR(E,C)),!P)return!1;if(!i.current&&"changedTouches"in g&&(w||_)&&(i.current=k),!k)return!0;var N=i.current||k;return tq(N,b,g,N==="h"?w:_,!0)},[]),l=x.useCallback(function(g){var b=g;if(!(!Ju.length||Ju[Ju.length-1]!==s)){var v="deltaY"in b?vR(b):og(b),y=e.current.filter(function(k){return k.name===b.type&&(k.target===b.target||b.target===k.shadowParent)&&nq(k.delta,v)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(yR).filter(Boolean).filter(function(k){return k.contains(b.target)}),_=w.length>0?a(b,w[0]):!o.current.noIsolation;_&&b.cancelable&&b.preventDefault()}}},[]),u=x.useCallback(function(g,b,v,y){var w={name:g,delta:b,target:v,should:y,shadowParent:oq(v)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(_){return _!==w})},1)},[]),c=x.useCallback(function(g){n.current=og(g),i.current=void 0},[]),d=x.useCallback(function(g){u(g.type,vR(g),g.target,a(g,t.lockRef.current))},[]),h=x.useCallback(function(g){u(g.type,og(g),g.target,a(g,t.lockRef.current))},[]);x.useEffect(function(){return Ju.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Zu),document.addEventListener("touchmove",l,Zu),document.addEventListener("touchstart",c,Zu),function(){Ju=Ju.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,Zu),document.removeEventListener("touchmove",l,Zu),document.removeEventListener("touchstart",c,Zu)}},[]);var f=t.removeScrollBar,p=t.inert;return x.createElement(x.Fragment,null,p?x.createElement(s,{styles:iq(r)}):null,f?x.createElement(XX,{gapMode:t.gapMode}):null)}function oq(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const aq=DX(QF,sq);var F0=x.forwardRef(function(t,e){return x.createElement(j0,js({},t,{ref:e,sideCar:aq}))});F0.classNames=j0.classNames;var KS=["Enter"," "],lq=["ArrowDown","PageUp","Home"],r$=["ArrowUp","PageDown","End"],uq=[...lq,...r$],cq={ltr:[...KS,"ArrowRight"],rtl:[...KS,"ArrowLeft"]},dq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Yp="Menu",[Qf,hq,fq]=Fp(Yp),[Uu,s$]=_l(Yp,[fq,Ud,C0]),$0=Ud(),o$=C0(),[pq,Hu]=Uu(Yp),[mq,Zp]=Uu(Yp),a$=t=>{const{__scopeMenu:e,open:n=!1,children:i,dir:r,onOpenChange:s,modal:o=!0}=t,a=$0(e),[l,u]=x.useState(null),c=x.useRef(!1),d=ei(s),h=$p(r);return x.useEffect(()=>{const f=()=>{c.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>c.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),m.jsx(UC,{...a,children:m.jsx(pq,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:u,children:m.jsx(mq,{scope:e,onClose:x.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:c,dir:h,modal:o,children:i})})})};a$.displayName=Yp;var gq="MenuAnchor",GC=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=$0(n);return m.jsx(L0,{...r,...i,ref:e})});GC.displayName=gq;var KC="MenuPortal",[vq,l$]=Uu(KC,{forceMount:void 0}),u$=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=Hu(KC,e);return m.jsx(vq,{scope:e,forceMount:n,children:m.jsx(Xo,{present:n||s.open,children:m.jsx(qp,{asChild:!0,container:r,children:i})})})};u$.displayName=KC;var Dr="MenuContent",[yq,XC]=Uu(Dr),c$=x.forwardRef((t,e)=>{const n=l$(Dr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Hu(Dr,t.__scopeMenu),o=Zp(Dr,t.__scopeMenu);return m.jsx(Qf.Provider,{scope:t.__scopeMenu,children:m.jsx(Xo,{present:i||s.open,children:m.jsx(Qf.Slot,{scope:t.__scopeMenu,children:o.modal?m.jsx(wq,{...r,ref:e}):m.jsx(bq,{...r,ref:e})})})})}),wq=x.forwardRef((t,e)=>{const n=Hu(Dr,t.__scopeMenu),i=x.useRef(null),r=ct(e,i);return x.useEffect(()=>{const s=i.current;if(s)return WC(s)},[]),m.jsx(qC,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ge(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),bq=x.forwardRef((t,e)=>{const n=Hu(Dr,t.__scopeMenu);return m.jsx(qC,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),qC=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:p,...g}=t,b=Hu(Dr,n),v=Zp(Dr,n),y=$0(n),w=o$(n),_=hq(n),[k,C]=x.useState(null),E=x.useRef(null),P=ct(e,E,b.onContentChange),N=x.useRef(0),D=x.useRef(""),L=x.useRef(0),$=x.useRef(null),G=x.useRef("right"),z=x.useRef(0),X=p?F0:x.Fragment,ee=p?{as:_u,allowPinchZoom:!0}:void 0,he=F=>{var S,T;const ne=D.current+F,Se=_().filter(M=>!M.disabled),Z=document.activeElement,ue=(S=Se.find(M=>M.ref.current===Z))==null?void 0:S.textValue,I=Se.map(M=>M.textValue),O=Mq(I,ne,ue),B=(T=Se.find(M=>M.textValue===O))==null?void 0:T.ref.current;(function M(R){D.current=R,window.clearTimeout(N.current),R!==""&&(N.current=window.setTimeout(()=>M(""),1e3))})(ne),B&&setTimeout(()=>B.focus())};x.useEffect(()=>()=>window.clearTimeout(N.current),[]),NC();const V=x.useCallback(F=>{var Se,Z;return G.current===((Se=$.current)==null?void 0:Se.side)&&Iq(F,(Z=$.current)==null?void 0:Z.area)},[]);return m.jsx(yq,{scope:n,searchRef:D,onItemEnter:x.useCallback(F=>{V(F)&&F.preventDefault()},[V]),onItemLeave:x.useCallback(F=>{var ne;V(F)||((ne=E.current)==null||ne.focus(),C(null))},[V]),onTriggerLeave:x.useCallback(F=>{V(F)&&F.preventDefault()},[V]),pointerGraceTimerRef:L,onPointerGraceIntentChange:x.useCallback(F=>{$.current=F},[]),children:m.jsx(X,{...ee,children:m.jsx(M0,{asChild:!0,trapped:r,onMountAutoFocus:ge(s,F=>{var ne;F.preventDefault(),(ne=E.current)==null||ne.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:m.jsx(Kp,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,children:m.jsx(bL,{asChild:!0,...w,dir:v.dir,orientation:"vertical",loop:i,currentTabStopId:k,onCurrentTabStopIdChange:C,onEntryFocus:ge(l,F=>{v.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:m.jsx(HC,{role:"menu","aria-orientation":"vertical","data-state":E$(b.open),"data-radix-menu-content":"",dir:v.dir,...y,...g,ref:P,style:{outline:"none",...g.style},onKeyDown:ge(g.onKeyDown,F=>{const Se=F.target.closest("[data-radix-menu-content]")===F.currentTarget,Z=F.ctrlKey||F.altKey||F.metaKey,ue=F.key.length===1;Se&&(F.key==="Tab"&&F.preventDefault(),!Z&&ue&&he(F.key));const I=E.current;if(F.target!==I||!uq.includes(F.key))return;F.preventDefault();const B=_().filter(S=>!S.disabled).map(S=>S.ref.current);r$.includes(F.key)&&B.reverse(),Rq(B)}),onBlur:ge(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(N.current),D.current="")}),onPointerMove:ge(t.onPointerMove,ep(F=>{const ne=F.target,Se=z.current!==F.clientX;if(F.currentTarget.contains(ne)&&Se){const Z=F.clientX>z.current?"right":"left";G.current=Z,z.current=F.clientX}}))})})})})})})});c$.displayName=Dr;var xq="MenuGroup",YC=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return m.jsx(He.div,{role:"group",...i,ref:e})});YC.displayName=xq;var Sq="MenuLabel",d$=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return m.jsx(He.div,{...i,ref:e})});d$.displayName=Sq;var py="MenuItem",wR="menu.itemSelect",B0=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=x.useRef(null),o=Zp(py,t.__scopeMenu),a=XC(py,t.__scopeMenu),l=ct(e,s),u=x.useRef(!1),c=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(wR,{bubbles:!0,cancelable:!0});d.addEventListener(wR,f=>i==null?void 0:i(f),{once:!0}),uC(d,h),h.defaultPrevented?u.current=!1:o.onClose()}};return m.jsx(h$,{...r,ref:l,disabled:n,onClick:ge(t.onClick,c),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),u.current=!0},onPointerUp:ge(t.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:ge(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||KS.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});B0.displayName=py;var h$=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=XC(py,n),a=o$(n),l=x.useRef(null),u=ct(e,l),[c,d]=x.useState(!1),[h,f]=x.useState("");return x.useEffect(()=>{const p=l.current;p&&f((p.textContent??"").trim())},[s.children]),m.jsx(Qf.ItemSlot,{scope:n,disabled:i,textValue:r??h,children:m.jsx(xL,{asChild:!0,...a,focusable:!i,children:m.jsx(He.div,{role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:u,onPointerMove:ge(t.onPointerMove,ep(p=>{i?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ge(t.onPointerLeave,ep(p=>o.onItemLeave(p))),onFocus:ge(t.onFocus,()=>d(!0)),onBlur:ge(t.onBlur,()=>d(!1))})})})}),_q="MenuCheckboxItem",f$=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return m.jsx(y$,{scope:t.__scopeMenu,checked:n,children:m.jsx(B0,{role:"menuitemcheckbox","aria-checked":my(n)?"mixed":n,...r,ref:e,"data-state":JC(n),onSelect:ge(r.onSelect,()=>i==null?void 0:i(my(n)?!0:!n),{checkForDefaultPrevented:!1})})})});f$.displayName=_q;var p$="MenuRadioGroup",[kq,Cq]=Uu(p$,{value:void 0,onValueChange:()=>{}}),m$=x.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=ei(i);return m.jsx(kq,{scope:t.__scopeMenu,value:n,onValueChange:s,children:m.jsx(YC,{...r,ref:e})})});m$.displayName=p$;var g$="MenuRadioItem",v$=x.forwardRef((t,e)=>{const{value:n,...i}=t,r=Cq(g$,t.__scopeMenu),s=n===r.value;return m.jsx(y$,{scope:t.__scopeMenu,checked:s,children:m.jsx(B0,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":JC(s),onSelect:ge(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});v$.displayName=g$;var ZC="MenuItemIndicator",[y$,Eq]=Uu(ZC,{checked:!1}),w$=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=Eq(ZC,n);return m.jsx(Xo,{present:i||my(s.checked)||s.checked===!0,children:m.jsx(He.span,{...r,ref:e,"data-state":JC(s.checked)})})});w$.displayName=ZC;var Aq="MenuSeparator",b$=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return m.jsx(He.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});b$.displayName=Aq;var Pq="MenuArrow",x$=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=$0(n);return m.jsx(VC,{...r,...i,ref:e})});x$.displayName=Pq;var Tq="MenuSub",[Ehe,S$]=Uu(Tq),jh="MenuSubTrigger",_$=x.forwardRef((t,e)=>{const n=Hu(jh,t.__scopeMenu),i=Zp(jh,t.__scopeMenu),r=S$(jh,t.__scopeMenu),s=XC(jh,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,u={__scopeMenu:t.__scopeMenu},c=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>c,[c]),x.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),m.jsx(GC,{asChild:!0,...u,children:m.jsx(h$,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":E$(n.open),...t,ref:_0(e,r.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ge(t.onPointerMove,ep(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),c()},100))})),onPointerLeave:ge(t.onPointerLeave,ep(d=>{var f,p;c();const h=(f=n.content)==null?void 0:f.getBoundingClientRect();if(h){const g=(p=n.content)==null?void 0:p.dataset.side,b=g==="right",v=b?-5:5,y=h[b?"left":"right"],w=h[b?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:y,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:y,y:h.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ge(t.onKeyDown,d=>{var f;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||cq[i.dir].includes(d.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),d.preventDefault())})})})});_$.displayName=jh;var k$="MenuSubContent",C$=x.forwardRef((t,e)=>{const n=l$(Dr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Hu(Dr,t.__scopeMenu),o=Zp(Dr,t.__scopeMenu),a=S$(k$,t.__scopeMenu),l=x.useRef(null),u=ct(e,l);return m.jsx(Qf.Provider,{scope:t.__scopeMenu,children:m.jsx(Xo,{present:i||s.open,children:m.jsx(Qf.Slot,{scope:t.__scopeMenu,children:m.jsx(qC,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:c=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),c.preventDefault()},onCloseAutoFocus:c=>c.preventDefault(),onFocusOutside:ge(t.onFocusOutside,c=>{c.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ge(t.onEscapeKeyDown,c=>{o.onClose(),c.preventDefault()}),onKeyDown:ge(t.onKeyDown,c=>{var f;const d=c.currentTarget.contains(c.target),h=dq[o.dir].includes(c.key);d&&h&&(s.onOpenChange(!1),(f=a.trigger)==null||f.focus(),c.preventDefault())})})})})})});C$.displayName=k$;function E$(t){return t?"open":"closed"}function my(t){return t==="indeterminate"}function JC(t){return my(t)?"indeterminate":t?"checked":"unchecked"}function Rq(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Nq(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function Mq(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Nq(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Oq(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,c=e[o].y;l>i!=c>i&&n<(u-a)*(i-l)/(c-l)+a&&(r=!r)}return r}function Iq(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Oq(n,e)}function ep(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Dq=a$,Lq=GC,jq=u$,Fq=c$,$q=YC,Bq=d$,zq=B0,Uq=f$,Hq=m$,Vq=v$,Wq=w$,Gq=b$,Kq=x$,Xq=_$,qq=C$,QC="DropdownMenu",[Yq,Ahe]=_l(QC,[s$]),bi=s$(),[Zq,A$]=Yq(QC),P$=t=>{const{__scopeDropdownMenu:e,children:n,dir:i,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=bi(e),u=x.useRef(null),[c=!1,d]=Bo({prop:r,defaultProp:s,onChange:o});return m.jsx(Zq,{scope:e,triggerId:el(),triggerRef:u,contentId:el(),open:c,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(h=>!h),[d]),modal:a,children:m.jsx(Dq,{...l,open:c,onOpenChange:d,dir:i,modal:a,children:n})})};P$.displayName=QC;var T$="DropdownMenuTrigger",R$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=A$(T$,n),o=bi(n);return m.jsx(Lq,{asChild:!0,...o,children:m.jsx(He.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:_0(e,s.triggerRef),onPointerDown:ge(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ge(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});R$.displayName=T$;var Jq="DropdownMenuPortal",N$=t=>{const{__scopeDropdownMenu:e,...n}=t,i=bi(e);return m.jsx(jq,{...i,...n})};N$.displayName=Jq;var M$="DropdownMenuContent",O$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=A$(M$,n),s=bi(n),o=x.useRef(!1);return m.jsx(Fq,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:ge(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ge(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,c=l.button===2||u;(!r.modal||c)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});O$.displayName=M$;var Qq="DropdownMenuGroup",eY=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=bi(n);return m.jsx($q,{...r,...i,ref:e})});eY.displayName=Qq;var tY="DropdownMenuLabel",I$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=bi(n);return m.jsx(Bq,{...r,...i,ref:e})});I$.displayName=tY;var nY="DropdownMenuItem",D$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=bi(n);return m.jsx(zq,{...r,...i,ref:e})});D$.displayName=nY;var iY="DropdownMenuCheckboxItem",L$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=bi(n);return m.jsx(Uq,{...r,...i,ref:e})});L$.displayName=iY;var rY="DropdownMenuRadioGroup",sY=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=bi(n);return m.jsx(Hq,{...r,...i,ref:e})});sY.displayName=rY;var oY="DropdownMenuRadioItem",j$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=bi(n);return m.jsx(Vq,{...r,...i,ref:e})});j$.displayName=oY;var aY="DropdownMenuItemIndicator",F$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=bi(n);return m.jsx(Wq,{...r,...i,ref:e})});F$.displayName=aY;var lY="DropdownMenuSeparator",$$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=bi(n);return m.jsx(Gq,{...r,...i,ref:e})});$$.displayName=lY;var uY="DropdownMenuArrow",cY=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=bi(n);return m.jsx(Kq,{...r,...i,ref:e})});cY.displayName=uY;var dY="DropdownMenuSubTrigger",B$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=bi(n);return m.jsx(Xq,{...r,...i,ref:e})});B$.displayName=dY;var hY="DropdownMenuSubContent",z$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=bi(n);return m.jsx(qq,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});z$.displayName=hY;var fY=P$,pY=R$,mY=N$,U$=O$,H$=I$,V$=D$,W$=L$,G$=j$,K$=F$,X$=$$,q$=B$,Y$=z$;const gY=fY,vY=pY,yY=x.forwardRef(({className:t,inset:e,children:n,...i},r)=>m.jsxs(q$,{ref:r,className:$e("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,m.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block h-4 w-4"})]}));yY.displayName=q$.displayName;const wY=x.forwardRef(({className:t,...e},n)=>m.jsx(Y$,{ref:n,className:$e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));wY.displayName=Y$.displayName;const Z$=x.forwardRef(({className:t,sideOffset:e=4,...n},i)=>m.jsx(mY,{children:m.jsx(U$,{ref:i,sideOffset:e,className:$e("z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));Z$.displayName=U$.displayName;const av=x.forwardRef(({className:t,inset:e,...n},i)=>m.jsx(V$,{ref:i,className:$e("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));av.displayName=V$.displayName;const bY=x.forwardRef(({className:t,children:e,checked:n,...i},r)=>m.jsxs(W$,{ref:r,className:$e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(K$,{children:m.jsx("span",{className:"icon-[lucide--check] h-4 w-4"})})}),e]}));bY.displayName=W$.displayName;const xY=x.forwardRef(({className:t,children:e,...n},i)=>m.jsxs(G$,{ref:i,className:$e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(K$,{children:m.jsx("span",{className:"icon-[lucide--circle-dot] block h-4 w-4"})})}),e]}));xY.displayName=G$.displayName;const SY=x.forwardRef(({className:t,inset:e,...n},i)=>m.jsx(H$,{ref:i,className:$e("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));SY.displayName=H$.displayName;const _Y=x.forwardRef(({className:t,...e},n)=>m.jsx(X$,{ref:n,className:$e("-mx-1 my-1 h-px bg-stone-600",t),...e}));_Y.displayName=X$.displayName;function J$(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const Q$=["en","es"];function eE(t){return function(n,i,...r){const s=J$(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const H=hC();function kY(t){return m.jsx(MV,{store:H,children:t.children})}var at;(function(t){t.assertEqual=r=>r;function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(at||(at={}));var XS;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(XS||(XS={}));const _e=at.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ba=t=>{switch(typeof t){case"undefined":return _e.undefined;case"string":return _e.string;case"number":return isNaN(t)?_e.nan:_e.number;case"boolean":return _e.boolean;case"function":return _e.function;case"bigint":return _e.bigint;case"symbol":return _e.symbol;case"object":return Array.isArray(t)?_e.array:t===null?_e.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?_e.promise:typeof Map<"u"&&t instanceof Map?_e.map:typeof Set<"u"&&t instanceof Set?_e.set:typeof Date<"u"&&t instanceof Date?_e.date:_e.object;default:return _e.unknown}},oe=at.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),CY=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class or extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return r(this),i}static assert(e){if(!(e instanceof or))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,at.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}or.create=t=>new or(t);const Cd=(t,e)=>{let n;switch(t.code){case oe.invalid_type:t.received===_e.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case oe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,at.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:n=`Unrecognized key(s) in object: ${at.joinValues(t.keys,", ")}`;break;case oe.invalid_union:n="Invalid input";break;case oe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${at.joinValues(t.options)}`;break;case oe.invalid_enum_value:n=`Invalid enum value. Expected ${at.joinValues(t.options)}, received '${t.received}'`;break;case oe.invalid_arguments:n="Invalid function arguments";break;case oe.invalid_return_type:n="Invalid function return type";break;case oe.invalid_date:n="Invalid date";break;case oe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:at.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case oe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case oe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case oe.custom:n="Invalid input";break;case oe.invalid_intersection_types:n="Intersection results could not be merged";break;case oe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case oe.not_finite:n="Number must be finite";break;default:n=e.defaultError,at.assertNever(t)}return{message:n}};let e3=Cd;function EY(t){e3=t}function gy(){return e3}const vy=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}},AY=[];function we(t,e){const n=gy(),i=vy({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Cd?void 0:Cd].filter(r=>!!r)});t.common.issues.push(i)}class ti{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Ue;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return ti.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Ue;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Ue=Object.freeze({status:"aborted"}),Ac=t=>({status:"dirty",value:t}),gi=t=>({status:"valid",value:t}),qS=t=>t.status==="aborted",YS=t=>t.status==="dirty",tp=t=>t.status==="valid",np=t=>typeof Promise<"u"&&t instanceof Promise;function yy(t,e,n,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function t3(t,e,n,i,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Me;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Me||(Me={}));var Fh,$h;class to{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const bR=(t,e)=>{if(tp(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new or(t.common.issues);return this._error=n,this._error}}};function Xe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{var l,u;const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:(l=c??i)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(u=c??n)!==null&&u!==void 0?u:a.defaultError}},description:r}}class Qe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ba(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ba(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ti,ctx:{common:e.parent.common,data:e.data,parsedType:ba(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(np(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const r={common:{issues:[],async:(i=n==null?void 0:n.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ba(e)},s=this._parseSync({data:e,path:r.path,parent:r});return bR(r,s)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ba(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(np(r)?r:Promise.resolve(r));return bR(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:oe.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new vs({schema:this,typeName:Be.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Zs.create(this,this._def)}nullable(){return dl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ds.create(this,this._def)}promise(){return Ad.create(this,this._def)}or(e){return op.create([this,e],this._def)}and(e){return ap.create(this,e,this._def)}transform(e){return new vs({...Xe(this._def),schema:this,typeName:Be.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new hp({...Xe(this._def),innerType:this,defaultValue:n,typeName:Be.ZodDefault})}brand(){return new tE({typeName:Be.ZodBranded,type:this,...Xe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new fp({...Xe(this._def),innerType:this,catchValue:n,typeName:Be.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Jp.create(this,e)}readonly(){return pp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const PY=/^c[^\s-]{8,}$/i,TY=/^[0-9a-z]+$/,RY=/^[0-9A-HJKMNP-TV-Z]{26}$/,NY=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,MY=/^[a-z0-9_-]{21}$/i,OY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,IY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,DY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Lb;const LY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,jY=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,FY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,n3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$Y=new RegExp(`^${n3}$`);function i3(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function BY(t){return new RegExp(`^${i3(t)}$`)}function r3(t){let e=`${n3}T${i3(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function zY(t,e){return!!((e==="v4"||!e)&&LY.test(t)||(e==="v6"||!e)&&jY.test(t))}class ss extends Qe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==_e.string){const s=this._getOrReturnCtx(e);return we(s,{code:oe.invalid_type,expected:_e.string,received:s.parsedType}),Ue}const i=new ti;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:oe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:oe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?we(r,{code:oe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&we(r,{code:oe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")IY.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"email",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")Lb||(Lb=new RegExp(DY,"u")),Lb.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"emoji",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")NY.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"uuid",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")MY.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"nanoid",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")PY.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cuid",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")TY.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cuid2",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")RY.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"ulid",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),we(r,{validation:"url",code:oe.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"regex",code:oe.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),we(r,{code:oe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),we(r,{code:oe.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),we(r,{code:oe.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?r3(s).test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:oe.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?$Y.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:oe.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?BY(s).test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:oe.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?OY.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"duration",code:oe.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?zY(e.data,s.version)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"ip",code:oe.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?FY.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"base64",code:oe.invalid_string,message:s.message}),i.dirty()):at.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:oe.invalid_string,...Me.errToObj(i)})}_addCheck(e){return new ss({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Me.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Me.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Me.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Me.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Me.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Me.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Me.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Me.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Me.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Me.errToObj(e)})}datetime(e){var n,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(i=e==null?void 0:e.local)!==null&&i!==void 0?i:!1,...Me.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Me.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Me.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Me.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Me.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Me.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Me.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Me.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Me.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Me.errToObj(n)})}nonempty(e){return this.min(1,Me.errToObj(e))}trim(){return new ss({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ss({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ss({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ss.create=t=>{var e;return new ss({checks:[],typeName:Be.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Xe(t)})};function UY(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=parseInt(t.toFixed(r).replace(".","")),o=parseInt(e.toFixed(r).replace(".",""));return s%o/Math.pow(10,r)}class ll extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==_e.number){const s=this._getOrReturnCtx(e);return we(s,{code:oe.invalid_type,expected:_e.number,received:s.parsedType}),Ue}let i;const r=new ti;for(const s of this._def.checks)s.kind==="int"?at.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{code:oe.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:oe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:oe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?UY(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),we(i,{code:oe.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{code:oe.not_finite,message:s.message}),r.dirty()):at.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Me.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Me.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Me.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Me.toString(n))}setLimit(e,n,i,r){return new ll({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Me.toString(r)}]})}_addCheck(e){return new ll({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Me.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Me.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Me.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Me.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Me.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&at.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ll.create=t=>new ll({checks:[],typeName:Be.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Xe(t)});class ul extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==_e.bigint){const s=this._getOrReturnCtx(e);return we(s,{code:oe.invalid_type,expected:_e.bigint,received:s.parsedType}),Ue}let i;const r=new ti;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:oe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:oe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),we(i,{code:oe.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):at.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Me.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Me.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Me.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Me.toString(n))}setLimit(e,n,i,r){return new ul({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Me.toString(r)}]})}_addCheck(e){return new ul({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ul.create=t=>{var e;return new ul({checks:[],typeName:Be.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Xe(t)})};class ip extends Qe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==_e.boolean){const i=this._getOrReturnCtx(e);return we(i,{code:oe.invalid_type,expected:_e.boolean,received:i.parsedType}),Ue}return gi(e.data)}}ip.create=t=>new ip({typeName:Be.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Xe(t)});class Ru extends Qe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==_e.date){const s=this._getOrReturnCtx(e);return we(s,{code:oe.invalid_type,expected:_e.date,received:s.parsedType}),Ue}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return we(s,{code:oe.invalid_date}),Ue}const i=new ti;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:oe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:oe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):at.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ru({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Me.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Me.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ru.create=t=>new Ru({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Be.ZodDate,...Xe(t)});class wy extends Qe{_parse(e){if(this._getType(e)!==_e.symbol){const i=this._getOrReturnCtx(e);return we(i,{code:oe.invalid_type,expected:_e.symbol,received:i.parsedType}),Ue}return gi(e.data)}}wy.create=t=>new wy({typeName:Be.ZodSymbol,...Xe(t)});class rp extends Qe{_parse(e){if(this._getType(e)!==_e.undefined){const i=this._getOrReturnCtx(e);return we(i,{code:oe.invalid_type,expected:_e.undefined,received:i.parsedType}),Ue}return gi(e.data)}}rp.create=t=>new rp({typeName:Be.ZodUndefined,...Xe(t)});class sp extends Qe{_parse(e){if(this._getType(e)!==_e.null){const i=this._getOrReturnCtx(e);return we(i,{code:oe.invalid_type,expected:_e.null,received:i.parsedType}),Ue}return gi(e.data)}}sp.create=t=>new sp({typeName:Be.ZodNull,...Xe(t)});class Ed extends Qe{constructor(){super(...arguments),this._any=!0}_parse(e){return gi(e.data)}}Ed.create=t=>new Ed({typeName:Be.ZodAny,...Xe(t)});class pu extends Qe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return gi(e.data)}}pu.create=t=>new pu({typeName:Be.ZodUnknown,...Xe(t)});class Vo extends Qe{_parse(e){const n=this._getOrReturnCtx(e);return we(n,{code:oe.invalid_type,expected:_e.never,received:n.parsedType}),Ue}}Vo.create=t=>new Vo({typeName:Be.ZodNever,...Xe(t)});class by extends Qe{_parse(e){if(this._getType(e)!==_e.undefined){const i=this._getOrReturnCtx(e);return we(i,{code:oe.invalid_type,expected:_e.void,received:i.parsedType}),Ue}return gi(e.data)}}by.create=t=>new by({typeName:Be.ZodVoid,...Xe(t)});class ds extends Qe{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==_e.array)return we(n,{code:oe.invalid_type,expected:_e.array,received:n.parsedType}),Ue;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(we(n,{code:o?oe.too_big:oe.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(we(n,{code:oe.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(we(n,{code:oe.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new to(n,o,n.path,a)))).then(o=>ti.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new to(n,o,n.path,a)));return ti.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new ds({...this._def,minLength:{value:e,message:Me.toString(n)}})}max(e,n){return new ds({...this._def,maxLength:{value:e,message:Me.toString(n)}})}length(e,n){return new ds({...this._def,exactLength:{value:e,message:Me.toString(n)}})}nonempty(e){return this.min(1,e)}}ds.create=(t,e)=>new ds({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Be.ZodArray,...Xe(e)});function sc(t){if(t instanceof Ht){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=Zs.create(sc(i))}return new Ht({...t._def,shape:()=>e})}else return t instanceof ds?new ds({...t._def,type:sc(t.element)}):t instanceof Zs?Zs.create(sc(t.unwrap())):t instanceof dl?dl.create(sc(t.unwrap())):t instanceof no?no.create(t.items.map(e=>sc(e))):t}class Ht extends Qe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=at.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==_e.object){const u=this._getOrReturnCtx(e);return we(u,{code:oe.invalid_type,expected:_e.object,received:u.parsedType}),Ue}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Vo&&this._def.unknownKeys==="strip"))for(const u in r.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new to(r,d,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof Vo){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(u==="strict")a.length>0&&(we(r,{code:oe.unrecognized_keys,keys:a}),i.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new to(r,d,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key,h=await c.value;u.push({key:d,value:h,alwaysSet:c.alwaysSet})}return u}).then(u=>ti.mergeObjectSync(i,u)):ti.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Me.errToObj,new Ht({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var r,s,o,a;const l=(o=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,n,i).message)!==null&&o!==void 0?o:i.defaultError;return n.code==="unrecognized_keys"?{message:(a=Me.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Ht({...this._def,unknownKeys:"strip"})}passthrough(){return new Ht({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ht({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ht({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Be.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ht({...this._def,catchall:e})}pick(e){const n={};return at.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new Ht({...this._def,shape:()=>n})}omit(e){const n={};return at.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new Ht({...this._def,shape:()=>n})}deepPartial(){return sc(this)}partial(e){const n={};return at.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}),new Ht({...this._def,shape:()=>n})}required(e){const n={};return at.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof Zs;)s=s._def.innerType;n[i]=s}}),new Ht({...this._def,shape:()=>n})}keyof(){return s3(at.objectKeys(this.shape))}}Ht.create=(t,e)=>new Ht({shape:()=>t,unknownKeys:"strip",catchall:Vo.create(),typeName:Be.ZodObject,...Xe(e)});Ht.strictCreate=(t,e)=>new Ht({shape:()=>t,unknownKeys:"strict",catchall:Vo.create(),typeName:Be.ZodObject,...Xe(e)});Ht.lazycreate=(t,e)=>new Ht({shape:t,unknownKeys:"strip",catchall:Vo.create(),typeName:Be.ZodObject,...Xe(e)});class op extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new or(a.ctx.common.issues));return we(n,{code:oe.invalid_union,unionErrors:o}),Ue}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new or(l));return we(n,{code:oe.invalid_union,unionErrors:a}),Ue}}get options(){return this._def.options}}op.create=(t,e)=>new op({options:t,typeName:Be.ZodUnion,...Xe(e)});const lo=t=>t instanceof up?lo(t.schema):t instanceof vs?lo(t.innerType()):t instanceof cp?[t.value]:t instanceof cl?t.options:t instanceof dp?at.objectValues(t.enum):t instanceof hp?lo(t._def.innerType):t instanceof rp?[void 0]:t instanceof sp?[null]:t instanceof Zs?[void 0,...lo(t.unwrap())]:t instanceof dl?[null,...lo(t.unwrap())]:t instanceof tE||t instanceof pp?lo(t.unwrap()):t instanceof fp?lo(t._def.innerType):[];class z0 extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==_e.object)return we(n,{code:oe.invalid_type,expected:_e.object,received:n.parsedType}),Ue;const i=this.discriminator,r=n.data[i],s=this.optionsMap.get(r);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(we(n,{code:oe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const r=new Map;for(const s of n){const o=lo(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,s)}}return new z0({typeName:Be.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:r,...Xe(i)})}}function ZS(t,e){const n=ba(t),i=ba(e);if(t===e)return{valid:!0,data:t};if(n===_e.object&&i===_e.object){const r=at.objectKeys(e),s=at.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=ZS(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===_e.array&&i===_e.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=ZS(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===_e.date&&i===_e.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ap extends Qe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(qS(s)||qS(o))return Ue;const a=ZS(s.value,o.value);return a.valid?((YS(s)||YS(o))&&n.dirty(),{status:n.value,value:a.data}):(we(i,{code:oe.invalid_intersection_types}),Ue)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}ap.create=(t,e,n)=>new ap({left:t,right:e,typeName:Be.ZodIntersection,...Xe(n)});class no extends Qe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==_e.array)return we(i,{code:oe.invalid_type,expected:_e.array,received:i.parsedType}),Ue;if(i.data.length<this._def.items.length)return we(i,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ue;!this._def.rest&&i.data.length>this._def.items.length&&(we(i,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new to(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>ti.mergeArray(n,o)):ti.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new no({...this._def,rest:e})}}no.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new no({items:t,typeName:Be.ZodTuple,rest:null,...Xe(e)})};class lp extends Qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==_e.object)return we(i,{code:oe.invalid_type,expected:_e.object,received:i.parsedType}),Ue;const r=[],s=this._def.keyType,o=this._def.valueType;for(const a in i.data)r.push({key:s._parse(new to(i,a,i.path,a)),value:o._parse(new to(i,i.data[a],i.path,a)),alwaysSet:a in i.data});return i.common.async?ti.mergeObjectAsync(n,r):ti.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof Qe?new lp({keyType:e,valueType:n,typeName:Be.ZodRecord,...Xe(i)}):new lp({keyType:ss.create(),valueType:e,typeName:Be.ZodRecord,...Xe(n)})}}class xy extends Qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==_e.map)return we(i,{code:oe.invalid_type,expected:_e.map,received:i.parsedType}),Ue;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],u)=>({key:r._parse(new to(i,a,i.path,[u,"key"])),value:s._parse(new to(i,l,i.path,[u,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Ue;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Ue;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}xy.create=(t,e,n)=>new xy({valueType:e,keyType:t,typeName:Be.ZodMap,...Xe(n)});class Nu extends Qe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==_e.set)return we(i,{code:oe.invalid_type,expected:_e.set,received:i.parsedType}),Ue;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(we(i,{code:oe.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(we(i,{code:oe.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Ue;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...i.data.values()].map((l,u)=>s._parse(new to(i,l,i.path,u)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Nu({...this._def,minSize:{value:e,message:Me.toString(n)}})}max(e,n){return new Nu({...this._def,maxSize:{value:e,message:Me.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Nu.create=(t,e)=>new Nu({valueType:t,minSize:null,maxSize:null,typeName:Be.ZodSet,...Xe(e)});class Yc extends Qe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==_e.function)return we(n,{code:oe.invalid_type,expected:_e.function,received:n.parsedType}),Ue;function i(a,l){return vy({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,gy(),Cd].filter(u=>!!u),issueData:{code:oe.invalid_arguments,argumentsError:l}})}function r(a,l){return vy({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,gy(),Cd].filter(u=>!!u),issueData:{code:oe.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Ad){const a=this;return gi(async function(...l){const u=new or([]),c=await a._def.args.parseAsync(l,s).catch(f=>{throw u.addIssue(i(l,f)),u}),d=await Reflect.apply(o,this,c);return await a._def.returns._def.type.parseAsync(d,s).catch(f=>{throw u.addIssue(r(d,f)),u})})}else{const a=this;return gi(function(...l){const u=a._def.args.safeParse(l,s);if(!u.success)throw new or([i(l,u.error)]);const c=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(c,s);if(!d.success)throw new or([r(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Yc({...this._def,args:no.create(e).rest(pu.create())})}returns(e){return new Yc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new Yc({args:e||no.create([]).rest(pu.create()),returns:n||pu.create(),typeName:Be.ZodFunction,...Xe(i)})}}class up extends Qe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}up.create=(t,e)=>new up({getter:t,typeName:Be.ZodLazy,...Xe(e)});class cp extends Qe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return we(n,{received:n.data,code:oe.invalid_literal,expected:this._def.value}),Ue}return{status:"valid",value:e.data}}get value(){return this._def.value}}cp.create=(t,e)=>new cp({value:t,typeName:Be.ZodLiteral,...Xe(e)});function s3(t,e){return new cl({values:t,typeName:Be.ZodEnum,...Xe(e)})}class cl extends Qe{constructor(){super(...arguments),Fh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return we(n,{expected:at.joinValues(i),received:n.parsedType,code:oe.invalid_type}),Ue}if(yy(this,Fh)||t3(this,Fh,new Set(this._def.values)),!yy(this,Fh).has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return we(n,{received:n.data,code:oe.invalid_enum_value,options:i}),Ue}return gi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return cl.create(e,{...this._def,...n})}exclude(e,n=this._def){return cl.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Fh=new WeakMap;cl.create=s3;class dp extends Qe{constructor(){super(...arguments),$h.set(this,void 0)}_parse(e){const n=at.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==_e.string&&i.parsedType!==_e.number){const r=at.objectValues(n);return we(i,{expected:at.joinValues(r),received:i.parsedType,code:oe.invalid_type}),Ue}if(yy(this,$h)||t3(this,$h,new Set(at.getValidEnumValues(this._def.values))),!yy(this,$h).has(e.data)){const r=at.objectValues(n);return we(i,{received:i.data,code:oe.invalid_enum_value,options:r}),Ue}return gi(e.data)}get enum(){return this._def.values}}$h=new WeakMap;dp.create=(t,e)=>new dp({values:t,typeName:Be.ZodNativeEnum,...Xe(e)});class Ad extends Qe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==_e.promise&&n.common.async===!1)return we(n,{code:oe.invalid_type,expected:_e.promise,received:n.parsedType}),Ue;const i=n.parsedType===_e.promise?n.data:Promise.resolve(n.data);return gi(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ad.create=(t,e)=>new Ad({type:t,typeName:Be.ZodPromise,...Xe(e)});class vs extends Qe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Be.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{we(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ue;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?Ue:l.status==="dirty"||n.value==="dirty"?Ac(l.value):l});{if(n.value==="aborted")return Ue;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?Ue:a.status==="dirty"||n.value==="dirty"?Ac(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Ue:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Ue:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!tp(o))return o;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>tp(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);at.assertNever(r)}}vs.create=(t,e,n)=>new vs({schema:t,typeName:Be.ZodEffects,effect:e,...Xe(n)});vs.createWithPreprocess=(t,e,n)=>new vs({schema:e,effect:{type:"preprocess",transform:t},typeName:Be.ZodEffects,...Xe(n)});class Zs extends Qe{_parse(e){return this._getType(e)===_e.undefined?gi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Zs.create=(t,e)=>new Zs({innerType:t,typeName:Be.ZodOptional,...Xe(e)});class dl extends Qe{_parse(e){return this._getType(e)===_e.null?gi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}dl.create=(t,e)=>new dl({innerType:t,typeName:Be.ZodNullable,...Xe(e)});class hp extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===_e.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}hp.create=(t,e)=>new hp({innerType:t,typeName:Be.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Xe(e)});class fp extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return np(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new or(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new or(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}fp.create=(t,e)=>new fp({innerType:t,typeName:Be.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Xe(e)});class Sy extends Qe{_parse(e){if(this._getType(e)!==_e.nan){const i=this._getOrReturnCtx(e);return we(i,{code:oe.invalid_type,expected:_e.nan,received:i.parsedType}),Ue}return{status:"valid",value:e.data}}}Sy.create=t=>new Sy({typeName:Be.ZodNaN,...Xe(t)});const HY=Symbol("zod_brand");class tE extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class Jp extends Qe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Ue:s.status==="dirty"?(n.dirty(),Ac(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Ue:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new Jp({in:e,out:n,typeName:Be.ZodPipeline})}}class pp extends Qe{_parse(e){const n=this._def.innerType._parse(e),i=r=>(tp(r)&&(r.value=Object.freeze(r.value)),r);return np(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}pp.create=(t,e)=>new pp({innerType:t,typeName:Be.ZodReadonly,...Xe(e)});function o3(t,e={},n){return t?Ed.create().superRefine((i,r)=>{var s,o;if(!t(i)){const a=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;r.addIssue({code:"custom",...u,fatal:l})}}):Ed.create()}const VY={object:Ht.lazycreate};var Be;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Be||(Be={}));const WY=(t,e={message:`Input not instance of ${t.name}`})=>o3(n=>n instanceof t,e),a3=ss.create,l3=ll.create,GY=Sy.create,KY=ul.create,u3=ip.create,XY=Ru.create,qY=wy.create,YY=rp.create,ZY=sp.create,JY=Ed.create,QY=pu.create,eZ=Vo.create,tZ=by.create,nZ=ds.create,iZ=Ht.create,rZ=Ht.strictCreate,sZ=op.create,oZ=z0.create,aZ=ap.create,lZ=no.create,uZ=lp.create,cZ=xy.create,dZ=Nu.create,hZ=Yc.create,fZ=up.create,pZ=cp.create,mZ=cl.create,gZ=dp.create,vZ=Ad.create,xR=vs.create,yZ=Zs.create,wZ=dl.create,bZ=vs.createWithPreprocess,xZ=Jp.create,SZ=()=>a3().optional(),_Z=()=>l3().optional(),kZ=()=>u3().optional(),CZ={string:t=>ss.create({...t,coerce:!0}),number:t=>ll.create({...t,coerce:!0}),boolean:t=>ip.create({...t,coerce:!0}),bigint:t=>ul.create({...t,coerce:!0}),date:t=>Ru.create({...t,coerce:!0})},EZ=Ue;var en=Object.freeze({__proto__:null,defaultErrorMap:Cd,setErrorMap:EY,getErrorMap:gy,makeIssue:vy,EMPTY_PATH:AY,addIssueToContext:we,ParseStatus:ti,INVALID:Ue,DIRTY:Ac,OK:gi,isAborted:qS,isDirty:YS,isValid:tp,isAsync:np,get util(){return at},get objectUtil(){return XS},ZodParsedType:_e,getParsedType:ba,ZodType:Qe,datetimeRegex:r3,ZodString:ss,ZodNumber:ll,ZodBigInt:ul,ZodBoolean:ip,ZodDate:Ru,ZodSymbol:wy,ZodUndefined:rp,ZodNull:sp,ZodAny:Ed,ZodUnknown:pu,ZodNever:Vo,ZodVoid:by,ZodArray:ds,ZodObject:Ht,ZodUnion:op,ZodDiscriminatedUnion:z0,ZodIntersection:ap,ZodTuple:no,ZodRecord:lp,ZodMap:xy,ZodSet:Nu,ZodFunction:Yc,ZodLazy:up,ZodLiteral:cp,ZodEnum:cl,ZodNativeEnum:dp,ZodPromise:Ad,ZodEffects:vs,ZodTransformer:vs,ZodOptional:Zs,ZodNullable:dl,ZodDefault:hp,ZodCatch:fp,ZodNaN:Sy,BRAND:HY,ZodBranded:tE,ZodPipeline:Jp,ZodReadonly:pp,custom:o3,Schema:Qe,ZodSchema:Qe,late:VY,get ZodFirstPartyTypeKind(){return Be},coerce:CZ,any:JY,array:nZ,bigint:KY,boolean:u3,date:XY,discriminatedUnion:oZ,effect:xR,enum:mZ,function:hZ,instanceof:WY,intersection:aZ,lazy:fZ,literal:pZ,map:cZ,nan:GY,nativeEnum:gZ,never:eZ,null:ZY,nullable:wZ,number:l3,object:iZ,oboolean:kZ,onumber:_Z,optional:yZ,ostring:SZ,pipeline:xZ,preprocess:bZ,promise:vZ,record:uZ,set:dZ,strictObject:rZ,string:a3,symbol:qY,transformer:xR,tuple:lZ,undefined:YY,union:sZ,unknown:QY,void:tZ,NEVER:EZ,ZodIssueCode:oe,quotelessJson:CY,ZodError:or});const AZ=["randomize","clean","unchanged"],PZ=["switches-and-leds","printer","null"],TZ=["printer","null"],JS=en.object({showInstructionCycle:en.boolean().catch(!1),showStatsCPU:en.boolean().catch(!1),language:en.enum(Q$).catch(RZ),editorFontSize:en.number().int().min(8).max(64).catch(14),dataOnLoad:en.enum(AZ).catch("clean"),devices:en.object({keyboardAndScreen:en.boolean(),pic:en.boolean(),pio:en.enum(["switches-and-leds","printer"]).nullable(),handshake:en.enum(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:en.boolean().catch(!0),executionUnit:en.number().min(1).max(500).catch(150),clockSpeed:en.number().min(100).max(3e3).catch(1e3),printerSpeed:en.number().min(500).max(2e4).catch(5e3),flagsVisibility:en.enum(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:en.number().min(0).catch(1),filterContrast:en.number().min(0).catch(1),filterInvert:en.boolean().catch(!1),filterSaturation:en.number().min(0).catch(1)}),oc=JS.parse({});function RZ(){const t=navigator.language.toLowerCase();for(const e of Q$)if(t.startsWith(e))return e;return"en"}const Hr=AF("vonsim-settings",oc,{getItem(t,e){try{const n=localStorage.getItem(t);return JS.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=JS.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),Mi=()=>H.get(Hr),Qp=()=>Bp(Hr);ve(t=>t(Hr).showInstructionCycle);ve(t=>t(Hr).showStatsCPU);const NZ=ve(t=>t(Hr).language),nE=()=>lt(NZ);ve(t=>t(Hr).flagsVisibility);const MZ=ve(t=>t(Hr).editorFontSize),OZ=()=>lt(MZ);ve(t=>t(Hr).dataOnLoad);const IZ=ve(t=>t(Hr).devices),DZ=()=>lt(IZ);ve(t=>{const e=t(Hr);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const LZ=ve(t=>{const e=t(Hr);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),jZ=()=>lt(LZ);function mp(t){const e=t.charCodeAt(0);return j.fitsUnsigned(e,8)?e:null}function iE(t){return j.fitsUnsigned(t,8)?String.fromCharCode(t):null}function c3(t){return FZ.at(t)??null}const FZ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","SHY","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ"];var $t,Ut;const st=class st{constructor(e,n){Ie(this,$t);Ie(this,Ut);Q(this,$t,e|0),Q(this,Ut,n)}get size(){return A(this,Ut)}is8bits(){return A(this,Ut)===8}is16bits(){return A(this,Ut)===16}get unsigned(){return A(this,$t)}get signed(){return A(this,$t)<=st.maxSignedValue(A(this,Ut))?A(this,$t):A(this,$t)-(st.maxValue(A(this,Ut))+1)}get low(){return this.is8bits()?this:st.fromUnsigned(A(this,$t)&st.maxValue(8),8)}get high(){return this.is8bits()?new st(0,8):st.fromUnsigned(A(this,$t)>>8&st.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return st.fromUnsigned(A(this,$t)&~st.maxValue(8)|e.unsigned,A(this,Ut))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return st.fromUnsigned(A(this,$t)&st.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Ut))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Ut)}`);return(A(this,$t)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Ut))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Ut)}`);return n?st.fromUnsigned(A(this,$t)|1<<e,A(this,Ut)):st.fromUnsigned(A(this,$t)&~(1<<e),A(this,Ut))}add(e){return e=Number(e),st.fromUnsigned(A(this,$t)+e,A(this,Ut))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,$t)===A(e,$t)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Ut));for(let n=0;n<A(this,Ut);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,$t).toString(16).padStart(A(this,Ut)/4,"0").toUpperCase();case"bin":return A(this,$t).toString(2).padStart(A(this,Ut),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Ut)===8?iE(A(this,$t))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,Ut)===8?c3(A(this,$t))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,$t)}valueOf(){return A(this,$t)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=st.minSignedValue(n)&&e<=st.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=st.minValue()&&e<=st.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=st.minSignedValue(n)&&e<=st.maxSignedValue(n)}static fromUnsigned(e,n){if(!st.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new st(e,n)}static fromSigned(e,n){if(!st.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new st(e+st.maxValue(n)+1,n):new st(e,n)}static fromNumber(e,n){return e<0?st.fromSigned(e,n):st.fromUnsigned(e,n)}static fromChar(e){const n=mp(e)??-1;return st.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*st.maxValue(e));return new st(n,e)}static zero(e){return new st(0,e)}};$t=new WeakMap,Ut=new WeakMap;let j=st;var go;const pa=class pa{constructor(e){Ie(this,go);Q(this,go,e)}get value(){return A(this,go).unsigned}get byte(){return A(this,go)}toString(e=!1){let n=A(this,go).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,go).toJSON()}valueOf(){return A(this,go).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=pa.MIN_ADDRESS&&e<=pa.MAX_ADDRESS}static from(e){if(e=Number(e),!pa.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=j.fromUnsigned(e,16);return new pa(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};go=new WeakMap,fe(pa,"MIN_ADDRESS",0),fe(pa,"MAX_ADDRESS",255);let Pe=pa;var vo;const ma=class ma{constructor(e){Ie(this,vo);Q(this,vo,e)}get value(){return A(this,vo).unsigned}get byte(){return A(this,vo)}toString(e=!0){let n=A(this,vo).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,vo).toJSON()}valueOf(){return A(this,vo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=ma.MIN_ADDRESS&&e<=ma.MAX_ADDRESS}static from(e){if(e=Number(e),!ma.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=j.fromUnsigned(e,8);return new ma(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};vo=new WeakMap,fe(ma,"MIN_ADDRESS",0),fe(ma,"MAX_ADDRESS",127);let lr=ma;function SR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function _R(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SR(Object(n),!0).forEach(function(i){$Z(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $Z(t,e,n){return e=BZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BZ(t){var e=zZ(t,"string");return typeof e=="symbol"?e:String(e)}function zZ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const _y=d3({});function d3(t){return e.withOptions=n=>d3(_R(_R({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n)}=t;let o="";for(let u=0;u<r.length;u++){let c=r[u];s&&(c=c.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),o+=c,u<i.length&&(o+=i[u])}const a=o.split(`
`);let l=null;for(const u of a){const c=u.match(/^(\s+)\S+/);if(c){const d=c[1].length;l?l=Math.min(l,d):l=d}}if(l!==null){const u=l;o=a.map(c=>c[0]===" "||c[0]==="	"?c.slice(u):c).join(`
`)}return o=o.trim(),s&&(o=o.replace(/\\n/g,`
`)),o}}const UZ=Pe.from(Pe.MAX_ADDRESS).toString(),HZ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${lr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:_y`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"One cycle","end-of-instruction":"One instruction",infinity:"Until stop"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${Pe.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${UZ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Disabling animations, you get faster execution.","Only affects animations affected by the simulation speed (like the CPU).","Other animations (like the clock and the printer) will run at their own speed.","Be careful! Very high simulation speeds without animations can saturate the processor."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>_y`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"bdd3a96"}](https://github.com/vonsim/vonsim/commit/${"bdd3a96"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},VZ=Pe.from(Pe.MAX_ADDRESS).toString(),WZ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${lr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"¡Hay una nueva versión disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la “FileSystem API”","no-file":"No hay ningún archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, ¿desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:_y`
      ; ¡Bienvenido a VonSim 8!
      ; Este es un ejemplo de código que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Un ciclo","end-of-instruction":"Una instrucción",infinity:"Hasta el final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadísticas CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Captación instrucción...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${Pe.format(t)}`,"fix-address":"Fijar dirección","unfix-address":"Desfijar dirección","address-must-be-integer":"El valor de inicio debe ser un número entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${VZ}.`,"address-increment":"Incrementar dirección (Page Up)","address-decrement":"Decrementar dirección (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",instructionCycle:{label:"Ciclo de Instrucción"},statsCPU:{label:"Estadísticas CPU"},flags:{label:"Banderas",description:"Selecciona qué banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamaño de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"También agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Inhabilitando las animaciones, se obtiene ejecución más rápida.","Solo afecta a las animaciones afectadas por la velocidad de simulación (como la CPU).","Otras animaciones (como el reloj y la impresora) se ejecutarán a su propia velocidad.","¡Cuidado! Velocidades de simulación muy altas sin animaciones puede saturar el procesador."].join(" ")},speeds:{executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"},filters:{label:"Filtros",description:"Filtros aplicados a la página. Útil cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturación"},reset:"Restablecer configuración"},footer:{documentation:"Documentación",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>_y`
        <!-- Por favor, describa el problema que está teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Información extra (POR FAVOR, NO BORRAR)</summary>

          **Versión**: [${"bdd3a96"}](https://github.com/ruiz-jose/VonSim8/commit/${"bdd3a96"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuración

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},U0=eE({en:HZ,es:WZ});function vt(){const t=nE();return x.useCallback((e,...n)=>U0(t,e,...n),[t])}const GZ=1,kR=5e3,Ps=new Map,lf=[];function KZ(){let t=0;for(const e of Ps.keys())e>t&&(t=e);return t+1}function XZ(){let t=1/0;for(const e of Ps.keys())e<t&&(t=e);return t}function Ma(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??kR,s=Number.isFinite(r)?setTimeout(()=>Ma({type:"DISMISS_TOAST",toastId:n}),r):null;Ps.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Ma({type:"DISMISS_TOAST",toastId:n})}}}),Ps.size>GZ&&Ma({type:"DISMISS_TOAST",toastId:XZ()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=Ps.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??kR,o=Number.isFinite(s)?setTimeout(()=>Ma({type:"DISMISS_TOAST",toastId:n}),s):null;Ps.set(n,{...r,...i,timeout:o})}else Ps.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=Ps.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),Ps.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&lf.length>0){const n=Array.from(Ps.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of lf)i(n)}}function Yi(t){const e=KZ(),n=r=>Ma({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>Ma({type:"DISMISS_TOAST",toastId:e});return Ma({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function qZ(){const[t,e]=x.useState([]);return x.useEffect(()=>(lf.push(e),()=>{const n=lf.indexOf(e);n>-1&&lf.splice(n,1)}),[]),{toastList:t,toast:Yi,dismiss:n=>Ma({type:"DISMISS_TOAST",toastId:n})}}const ky=ve(!1),H0=AF("vonsim-program",U0(Mi().language,"editor.example"),void 0,{getOnInit:!0}),YZ=()=>lt(H0),ZZ=()=>H.get(H0),JZ=Vn.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(H.set(H0,this.view.state.doc.toString()),H.set(ky,!0))}}),hh="showSaveFilePicker"in window,QZ=ve(null),h3=ve(""),eJ=ve(t=>t(h3)!==t(H0));function tJ(){const t=vt(),[e,n]=Bp(QZ),i=lt(eJ),r=LL(h3),s=e&&i,o=x.useCallback(async()=>{if(!hh){Yi({title:t("editor.files.unsupported"),variant:"error"});return}if(!(s&&!confirm(t("editor.files.unsaved"))))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});await d.requestPermission({mode:"readwrite"})==="granted"&&n(d);const p=await(await d.getFile()).text();r(p),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:p}})}catch(d){console.error(d),Yi({title:t("editor.files.open-error"),variant:"error"})}},[t,s,n,r]);fu(d=>d.ctrlKey&&d.key==="o",d=>{d.preventDefault(),o()},void 0,[o]);const a=x.useCallback(async d=>{var f,p;if(d.stopPropagation(),d.preventDefault(),!hh){Yi({title:t("editor.files.unsupported"),variant:"error"});return}const h=(p=(f=d.dataTransfer)==null?void 0:f.items)==null?void 0:p[0];if(!(!h||h.kind!=="file")&&!(s&&!confirm(t("editor.files.unsaved"))))try{const g=await h.getAsFileSystemHandle();if(!g)throw new Error("File handle not found");await g.requestPermission({mode:"readwrite"})==="granted"&&n(g);const y=await(await g.getFile()).text();r(y),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:y}})}catch(g){console.error(g),Yi({title:t("editor.files.open-error"),variant:"error"})}},[n,r,t,s]);Xg("drop",a,window),Xg("dragover",d=>{d.preventDefault(),d.stopPropagation()},window);const l=x.useCallback(async()=>{if(!hh){Yi({title:t("editor.files.unsupported"),variant:"error"});return}if(s)try{const d=window.codemirror.state.doc.toString(),h=await e.createWritable({keepExistingData:!1});await h.write(d),await h.close(),r(d)}catch(d){console.error(d),Yi({title:t("editor.files.save-error"),variant:"error"})}},[t,s,e,r]),u=x.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),h=(e==null?void 0:e.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(hh)try{const f=await window.showSaveFilePicker({suggestedName:h,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]}),p=await f.requestPermission({mode:"readwrite"});if(p!=="granted")throw new Error(`Permission denied: ${p}`);n(f);const g=await f.createWritable({keepExistingData:!1});await g.write(d),await g.close(),r(d)}catch(f){console.error(f),Yi({title:t("editor.files.save-error"),variant:"error"})}else{const f=new Blob([d],{type:"text/plain"}),p=URL.createObjectURL(f),g=document.createElement("a");g.style.display="none",g.href=p,g.download=h,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(p)}},[t,e,n,r]);fu(d=>d.ctrlKey&&d.key==="s",d=>{d.preventDefault(),hh&&(e?l():u())},void 0,[e,l,u]),fu(d=>d.ctrlKey&&d.shiftKey&&d.key==="S",d=>{d.preventDefault(),u()},void 0,[u]);const c=x.useCallback(d=>{s&&(d.preventDefault(),d.returnValue=t("editor.files.unsaved"))},[t,s]);return Xg("beforeunload",c,window),m.jsxs(gY,{children:[m.jsx(vY,{asChild:!0,children:m.jsxs("button",{className:$e("flex items-center transition-colors hover:text-white",e&&"text-white"),children:[e?e.name:t("editor.files.no-file"),s&&m.jsx("span",{className:"ml-1 h-2 w-2 rounded-full bg-current"})]})}),m.jsxs(Z$,{className:"w-64",align:"start",children:[m.jsxs(av,{onClick:o,children:[m.jsx("span",{className:"icon-[lucide--file-search-2] mr-2 h-4 w-4"}),t("editor.files.open"),m.jsx("div",{className:"grow"}),m.jsx("kbd",{className:"text-stone-600",children:"Ctrl+O"})]}),m.jsxs(av,{disabled:!s,onClick:l,children:[m.jsx("span",{className:"icon-[lucide--save] mr-2 h-4 w-4"}),t("editor.files.save"),m.jsx("div",{className:"grow"}),m.jsx("kbd",{className:"text-stone-600",children:"Ctrl+S"})]}),m.jsxs(av,{onClick:u,children:[m.jsx("span",{className:"icon-[lucide--save-all] mr-2 h-4 w-4"}),t("editor.files.save-as"),m.jsx("div",{className:"grow"}),m.jsx("kbd",{className:"text-stone-600",children:"Ctrl+Shift+S"})]})]})]})}function nJ(){const t=vt(),e=iJ();return m.jsxs("footer",{className:"px-2 py-1 text-center text-xs tracking-wider text-stone-500",children:[m.jsx("a",{href:"/VonSim8/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),m.jsx("span",{className:"px-2",children:"·"}),m.jsx("a",{href:"https://github.com/ruiz-jose/VonSim8",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),m.jsx("span",{className:"px-2",children:"·"}),m.jsx("a",{href:e,className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.issue.report")}),m.jsx("span",{className:"px-2 max-sm:hidden",children:"·"}),m.jsx("br",{className:"sm:hidden"}),m.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:["© Copyright 2017-",new Date().getFullYear()," — ",t("footer.copyright")]})]})}function iJ(){const t=vt(),[e]=Qp(),n=YZ();return"https://github.com/ruiz-jose/VonSim8/issues/new?body="+encodeURIComponent(t("footer.issue.body",e,n))}/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const rJ={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},sJ=rJ,oJ={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},aJ={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},lJ=aJ,uJ={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},cJ={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function dJ(t,e,n){return(e=fJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function re(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CR(Object(n),!0).forEach(function(i){dJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function hJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fJ(t){var e=hJ(t,"string");return typeof e=="symbol"?e:e+""}const ER=()=>{};let rE={},f3={},p3=null,m3={mark:ER,measure:ER};try{typeof window<"u"&&(rE=window),typeof document<"u"&&(f3=document),typeof MutationObserver<"u"&&(p3=MutationObserver),typeof performance<"u"&&(m3=performance)}catch{}const{userAgent:AR=""}=rE.navigator||{},hl=rE,Lt=f3,PR=p3,ag=m3;hl.document;const Yo=!!Lt.documentElement&&!!Lt.head&&typeof Lt.addEventListener=="function"&&typeof Lt.createElement=="function",g3=~AR.indexOf("MSIE")||~AR.indexOf("Trident/");var pJ=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,mJ=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,v3={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},gJ={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},y3=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],ni="classic",V0="duotone",vJ="sharp",yJ="sharp-duotone",w3=[ni,V0,vJ,yJ],wJ={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},bJ={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},xJ=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),SJ={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},_J=["fak","fa-kit","fakd","fa-kit-duotone"],TR={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},kJ=["kit"],CJ={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},EJ=["fak","fakd"],AJ={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},RR={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},lg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},PJ=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],TJ=["fak","fa-kit","fakd","fa-kit-duotone"],RJ={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},NJ={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},MJ={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},QS={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},OJ=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],e_=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...PJ,...OJ],IJ=["solid","regular","light","thin","duotone","brands"],b3=[1,2,3,4,5,6,7,8,9,10],DJ=b3.concat([11,12,13,14,15,16,17,18,19,20]),LJ=[...Object.keys(MJ),...IJ,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",lg.GROUP,lg.SWAP_OPACITY,lg.PRIMARY,lg.SECONDARY].concat(b3.map(t=>"".concat(t,"x"))).concat(DJ.map(t=>"w-".concat(t))),jJ={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Wo="___FONT_AWESOME___",t_=16,x3="fa",S3="svg-inline--fa",Mu="data-fa-i2svg",n_="data-fa-pseudo-element",FJ="data-fa-pseudo-element-pending",sE="data-prefix",oE="data-icon",NR="fontawesome-i2svg",$J="async",BJ=["HTML","HEAD","STYLE","SCRIPT"],_3=(()=>{try{return!0}catch{return!1}})();function em(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[ni]}})}const k3=re({},v3);k3[ni]=re(re(re(re({},{"fa-duotone":"duotone"}),v3[ni]),TR.kit),TR["kit-duotone"]);const zJ=em(k3),i_=re({},SJ);i_[ni]=re(re(re(re({},{duotone:"fad"}),i_[ni]),RR.kit),RR["kit-duotone"]);const MR=em(i_),r_=re({},QS);r_[ni]=re(re({},r_[ni]),AJ.kit);const aE=em(r_),s_=re({},NJ);s_[ni]=re(re({},s_[ni]),CJ.kit);em(s_);const UJ=pJ,C3="fa-layers-text",HJ=mJ,VJ=re({},wJ);em(VJ);const WJ=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],jb=gJ,GJ=[...kJ,...LJ],uf=hl.FontAwesomeConfig||{};function KJ(t){var e=Lt.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function XJ(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Lt&&typeof Lt.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=XJ(KJ(n));r!=null&&(uf[i]=r)});const E3={styleDefault:"solid",familyDefault:ni,cssPrefix:x3,replacementClass:S3,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};uf.familyPrefix&&(uf.cssPrefix=uf.familyPrefix);const Pd=re(re({},E3),uf);Pd.autoReplaceSvg||(Pd.observeMutations=!1);const Ne={};Object.keys(E3).forEach(t=>{Object.defineProperty(Ne,t,{enumerable:!0,set:function(e){Pd[t]=e,cf.forEach(n=>n(Ne))},get:function(){return Pd[t]}})});Object.defineProperty(Ne,"familyPrefix",{enumerable:!0,set:function(t){Pd.cssPrefix=t,cf.forEach(e=>e(Ne))},get:function(){return Pd.cssPrefix}});hl.FontAwesomeConfig=Ne;const cf=[];function qJ(t){return cf.push(t),()=>{cf.splice(cf.indexOf(t),1)}}const ia=t_,Hs={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function YJ(t){if(!t||!Yo)return;const e=Lt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Lt.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Lt.head.insertBefore(e,i),t}const ZJ="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function gp(){let t=12,e="";for(;t-- >0;)e+=ZJ[Math.random()*62|0];return e}function Hd(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function lE(t){return t.classList?Hd(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function A3(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function JJ(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(A3(t[n]),'" '),"").trim()}function W0(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function uE(t){return t.size!==Hs.size||t.x!==Hs.x||t.y!==Hs.y||t.rotate!==Hs.rotate||t.flipX||t.flipY}function QJ(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},u={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:u}}function eQ(t){let{transform:e,width:n=t_,height:i=t_,startCentered:r=!1}=t,s="";return r&&g3?s+="translate(".concat(e.x/ia-n/2,"em, ").concat(e.y/ia-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/ia,"em), calc(-50% + ").concat(e.y/ia,"em)) "):s+="translate(".concat(e.x/ia,"em, ").concat(e.y/ia,"em) "),s+="scale(".concat(e.size/ia*(e.flipX?-1:1),", ").concat(e.size/ia*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var tQ=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function P3(){const t=x3,e=S3,n=Ne.cssPrefix,i=Ne.replacementClass;let r=tQ;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let OR=!1;function Fb(){Ne.autoAddCss&&!OR&&(YJ(P3()),OR=!0)}var nQ={mixout(){return{dom:{css:P3,insertCss:Fb}}},hooks(){return{beforeDOMElementCreation(){Fb()},beforeI2svg(){Fb()}}}};const Go=hl||{};Go[Wo]||(Go[Wo]={});Go[Wo].styles||(Go[Wo].styles={});Go[Wo].hooks||(Go[Wo].hooks={});Go[Wo].shims||(Go[Wo].shims=[]);var Vs=Go[Wo];const T3=[],R3=function(){Lt.removeEventListener("DOMContentLoaded",R3),Cy=1,T3.map(t=>t())};let Cy=!1;Yo&&(Cy=(Lt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Lt.readyState),Cy||Lt.addEventListener("DOMContentLoaded",R3));function iQ(t){Yo&&(Cy?setTimeout(t,0):T3.push(t))}function tm(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?A3(t):"<".concat(e," ").concat(JJ(n),">").concat(i.map(tm).join(""),"</").concat(e,">")}function IR(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var $b=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,u,c;for(i===void 0?(l=1,c=e[s[0]]):(l=0,c=i);l<o;l++)u=s[l],c=a(c,e[u],u,e);return c};function rQ(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function o_(t){const e=rQ(t);return e.length===1?e[0].toString(16):null}function sQ(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function DR(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function a_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=DR(e);typeof Vs.hooks.addPack=="function"&&!i?Vs.hooks.addPack(t,DR(e)):Vs.styles[t]=re(re({},Vs.styles[t]||{}),r),t==="fas"&&a_("fa",e)}const{styles:vp,shims:oQ}=Vs,N3=Object.keys(aE),aQ=N3.reduce((t,e)=>(t[e]=Object.keys(aE[e]),t),{});let cE=null,M3={},O3={},I3={},D3={},L3={};function lQ(t){return~GJ.indexOf(t)}function uQ(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!lQ(r)?r:null}const j3=()=>{const t=i=>$b(vp,(r,s,o)=>(r[o]=$b(s,i,{}),r),{});M3=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),O3=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),L3=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in vp||Ne.autoFetchSvg,n=$b(oQ,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});I3=n.names,D3=n.unicodes,cE=G0(Ne.styleDefault,{family:Ne.familyDefault})};qJ(t=>{cE=G0(t.styleDefault,{family:Ne.familyDefault})});j3();function dE(t,e){return(M3[t]||{})[e]}function cQ(t,e){return(O3[t]||{})[e]}function au(t,e){return(L3[t]||{})[e]}function F3(t){return I3[t]||{prefix:null,iconName:null}}function dQ(t){const e=D3[t],n=dE("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function fl(){return cE}const $3=()=>({prefix:null,iconName:null,rest:[]});function hQ(t){let e=ni;const n=N3.reduce((i,r)=>(i[r]="".concat(Ne.cssPrefix,"-").concat(r),i),{});return w3.forEach(i=>{(t.includes(n[i])||t.some(r=>aQ[i].includes(r)))&&(e=i)}),e}function G0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=ni}=e,i=zJ[n][t];if(n===V0&&!t)return"fad";const r=MR[n][t]||MR[n][i],s=t in Vs.styles?t:null;return r||s||null}function fQ(t){let e=[],n=null;return t.forEach(i=>{const r=uQ(Ne.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function LR(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function K0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=e_.concat(TJ),s=LR(t.filter(d=>r.includes(d))),o=LR(t.filter(d=>!e_.includes(d))),a=s.filter(d=>(i=d,!y3.includes(d))),[l=null]=a,u=hQ(s),c=re(re({},fQ(o)),{},{prefix:G0(l,{family:u})});return re(re(re({},c),vQ({values:t,family:u,styles:vp,config:Ne,canonical:c,givenPrefix:i})),pQ(n,i,c))}function pQ(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?F3(r):{},o=au(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!vp.far&&vp.fas&&!Ne.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const mQ=w3.filter(t=>t!==ni||t!==V0),gQ=Object.keys(QS).filter(t=>t!==ni).map(t=>Object.keys(QS[t])).flat();function vQ(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===V0,l=e.includes("fa-duotone")||e.includes("fad"),u=o.familyDefault==="duotone",c=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||u||c)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&mQ.includes(n)&&(Object.keys(s).find(h=>gQ.includes(h))||o.autoFetchSvg)){const h=xJ.get(n).defaultShortPrefixId;i.prefix=h,i.iconName=au(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=fl()||"fas"),i}class yQ{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=re(re({},this.definitions[s]||{}),r[s]),a_(s,r[s]);const o=aE[ni][s];o&&a_(o,r[s]),j3()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(u=>{typeof u=="string"&&(e[s][u]=a)}),e[s][o]=a}),e}}let jR=[],Pc={};const Zc={},wQ=Object.keys(Zc);function bQ(t,e){let{mixoutsTo:n}=e;return jR=t,Pc={},Object.keys(Zc).forEach(i=>{wQ.indexOf(i)===-1&&delete Zc[i]}),jR.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{Pc[o]||(Pc[o]=[]),Pc[o].push(s[o])})}i.provides&&i.provides(Zc)}),n}function l_(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Pc[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function Ou(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Pc[t]||[]).forEach(s=>{s.apply(null,n)})}function pl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Zc[t]?Zc[t].apply(null,e):void 0}function u_(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||fl();if(e)return e=au(n,e)||e,IR(B3.definitions,n,e)||IR(Vs.styles,n,e)}const B3=new yQ,xQ=()=>{Ne.autoReplaceSvg=!1,Ne.observeMutations=!1,Ou("noAuto")},SQ={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Yo?(Ou("beforeI2svg",t),pl("pseudoElements2svg",t),pl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Ne.autoReplaceSvg===!1&&(Ne.autoReplaceSvg=!0),Ne.observeMutations=!0,iQ(()=>{kQ({autoReplaceSvgRoot:e}),Ou("watch",t)})}},_Q={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:au(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=G0(t[0]);return{prefix:n,iconName:au(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Ne.cssPrefix,"-"))>-1||t.match(UJ))){const e=K0(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||fl(),iconName:au(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=fl();return{prefix:e,iconName:au(e,t)||t}}}},dr={noAuto:xQ,config:Ne,dom:SQ,parse:_Q,library:B3,findIconDefinition:u_,toHtml:tm},kQ=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Lt}=t;(Object.keys(Vs.styles).length>0||Ne.autoFetchSvg)&&Yo&&Ne.autoReplaceSvg&&dr.dom.i2svg({node:e})};function X0(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>tm(n))}}),Object.defineProperty(t,"node",{get:function(){if(!Yo)return;const n=Lt.createElement("div");return n.innerHTML=t.html,n.children}}),t}function CQ(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(uE(o)&&n.found&&!i.found){const{width:a,height:l}=n,u={x:a/l/2,y:.5};r.style=W0(re(re({},s),{},{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function EQ(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Ne.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:re(re({},r),{},{id:o}),children:i}]}]}function hE(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:u,extra:c,watchable:d=!1}=t,{width:h,height:f}=n.found?n:e,p=EJ.includes(i),g=[Ne.replacementClass,r?"".concat(Ne.cssPrefix,"-").concat(r):""].filter(k=>c.classes.indexOf(k)===-1).filter(k=>k!==""||!!k).concat(c.classes).join(" ");let b={children:[],attributes:re(re({},c.attributes),{},{"data-prefix":i,"data-icon":r,class:g,role:c.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(f)})};const v=p&&!~c.classes.indexOf("fa-fw")?{width:"".concat(h/f*16*.0625,"em")}:{};d&&(b.attributes[Mu]=""),a&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(u||gp())},children:[a]}),delete b.attributes.title);const y=re(re({},b),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:re(re({},v),c.styles)}),{children:w,attributes:_}=n.found&&e.found?pl("generateAbstractMask",y)||{children:[],attributes:{}}:pl("generateAbstractIcon",y)||{children:[],attributes:{}};return y.children=w,y.attributes=_,o?EQ(y):CQ(y)}function FR(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=re(re(re({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Mu]="");const u=re({},o.styles);uE(r)&&(u.transform=eQ({transform:r,startCentered:!0,width:n,height:i}),u["-webkit-transform"]=u.transform);const c=W0(u);c.length>0&&(l.style=c);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function AQ(t){const{content:e,title:n,extra:i}=t,r=re(re(re({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=W0(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:Bb}=Vs;function c_(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(Ne.cssPrefix,"-").concat(jb.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ne.cssPrefix,"-").concat(jb.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Ne.cssPrefix,"-").concat(jb.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const PQ={found:!1,width:512,height:512};function TQ(t,e){!_3&&!Ne.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function d_(t,e){let n=e;return e==="fa"&&Ne.styleDefault!==null&&(e=fl()),new Promise((i,r)=>{if(n==="fa"){const s=F3(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Bb[e]&&Bb[e][t]){const s=Bb[e][t];return i(c_(s))}TQ(t,e),i(re(re({},PQ),{},{icon:Ne.showMissingIcons&&t?pl("missingIconAbstract")||{}:{}}))})}const $R=()=>{},h_=Ne.measurePerformance&&ag&&ag.mark&&ag.measure?ag:{mark:$R,measure:$R},Bh='FA "6.7.1"',RQ=t=>(h_.mark("".concat(Bh," ").concat(t," begins")),()=>z3(t)),z3=t=>{h_.mark("".concat(Bh," ").concat(t," ends")),h_.measure("".concat(Bh," ").concat(t),"".concat(Bh," ").concat(t," begins"),"".concat(Bh," ").concat(t," ends"))};var fE={begin:RQ,end:z3};const lv=()=>{};function BR(t){return typeof(t.getAttribute?t.getAttribute(Mu):null)=="string"}function NQ(t){const e=t.getAttribute?t.getAttribute(sE):null,n=t.getAttribute?t.getAttribute(oE):null;return e&&n}function MQ(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Ne.replacementClass)}function OQ(){return Ne.autoReplaceSvg===!0?uv.replace:uv[Ne.autoReplaceSvg]||uv.replace}function IQ(t){return Lt.createElementNS("http://www.w3.org/2000/svg",t)}function DQ(t){return Lt.createElement(t)}function U3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?IQ:DQ}=e;if(typeof t=="string")return Lt.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(U3(s,{ceFn:n}))}),i}function LQ(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const uv={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(U3(n),e)}),e.getAttribute(Mu)===null&&Ne.keepOriginalSource){let n=Lt.createComment(LQ(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~lE(e).indexOf(Ne.replacementClass))return uv.replace(t);const i=new RegExp("".concat(Ne.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Ne.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>tm(s)).join(`
`);e.setAttribute(Mu,""),e.innerHTML=r}};function zR(t){t()}function H3(t,e){const n=typeof e=="function"?e:lv;if(t.length===0)n();else{let i=zR;Ne.mutateApproach===$J&&(i=hl.requestAnimationFrame||zR),i(()=>{const r=OQ(),s=fE.begin("mutate");t.map(r),s(),n()})}}let pE=!1;function V3(){pE=!0}function f_(){pE=!1}let Ey=null;function UR(t){if(!PR||!Ne.observeMutations)return;const{treeCallback:e=lv,nodeCallback:n=lv,pseudoElementsCallback:i=lv,observeMutationsRoot:r=Lt}=t;Ey=new PR(s=>{if(pE)return;const o=fl();Hd(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!BR(a.addedNodes[0])&&(Ne.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Ne.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&BR(a.target)&&~WJ.indexOf(a.attributeName))if(a.attributeName==="class"&&NQ(a.target)){const{prefix:l,iconName:u}=K0(lE(a.target));a.target.setAttribute(sE,l||o),u&&a.target.setAttribute(oE,u)}else MQ(a.target)&&n(a.target)})}),Yo&&Ey.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function jQ(){Ey&&Ey.disconnect()}function FQ(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function $Q(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=K0(lE(t));return r.prefix||(r.prefix=fl()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=cQ(r.prefix,t.innerText)||dE(r.prefix,o_(t.innerText))),!r.iconName&&Ne.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function BQ(t){const e=Hd(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Ne.autoA11y&&(n?e["aria-labelledby"]="".concat(Ne.replacementClass,"-title-").concat(i||gp()):(e["aria-hidden"]="true",e.focusable="false")),e}function zQ(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Hs,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function HR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=$Q(t),s=BQ(t),o=l_("parseNodeAttributes",{},t);let a=e.styleParser?FQ(t):[];return re({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:Hs,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:UQ}=Vs;function W3(t){const e=Ne.autoReplaceSvg==="nest"?HR(t,{styleParser:!1}):HR(t);return~e.extra.classes.indexOf(C3)?pl("generateLayersText",t,e):pl("generateSvgReplacementMutation",t,e)}function HQ(){return[..._J,...e_]}function VR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Yo)return Promise.resolve();const n=Lt.documentElement.classList,i=c=>n.add("".concat(NR,"-").concat(c)),r=c=>n.remove("".concat(NR,"-").concat(c)),s=Ne.autoFetchSvg?HQ():y3.concat(Object.keys(UQ));s.includes("fa")||s.push("fa");const o=[".".concat(C3,":not([").concat(Mu,"])")].concat(s.map(c=>".".concat(c,":not([").concat(Mu,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=Hd(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=fE.begin("onTree"),u=a.reduce((c,d)=>{try{const h=W3(d);h&&c.push(h)}catch(h){_3||h.name==="MissingIcon"&&console.error(h)}return c},[]);return new Promise((c,d)=>{Promise.all(u).then(h=>{H3(h,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),c()})}).catch(h=>{l(),d(h)})})}function VQ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;W3(t).then(n=>{n&&H3([n],e)})}function WQ(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:u_(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:u_(r||{})),t(i,re(re({},n),{},{mask:r}))}}const GQ=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Hs,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:u={},styles:c={}}=e;if(!t)return;const{prefix:d,iconName:h,icon:f}=t;return X0(re({type:"icon"},t),()=>(Ou("beforeDOMElementCreation",{iconDefinition:t,params:e}),Ne.autoA11y&&(o?u["aria-labelledby"]="".concat(Ne.replacementClass,"-title-").concat(a||gp()):(u["aria-hidden"]="true",u.focusable="false")),hE({icons:{main:c_(f),mask:r?c_(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:h,transform:re(re({},Hs),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:u,styles:c,classes:l}})))};var KQ={mixout(){return{icon:WQ(GQ)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=VR,t.nodeCallback=VQ,t}}},provides(t){t.i2svg=function(e){const{node:n=Lt,callback:i=()=>{}}=e;return VR(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:u,maskId:c,extra:d}=n;return new Promise((h,f)=>{Promise.all([d_(i,o),u.iconName?d_(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(p=>{let[g,b]=p;h([e,hE({icons:{main:g,mask:b},prefix:o,iconName:i,transform:a,symbol:l,maskId:c,title:r,titleId:s,extra:d,watchable:!0})])}).catch(f)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=W0(o);a.length>0&&(i.style=a);let l;return uE(s)&&(l=pl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},XQ={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return X0({type:"layer"},()=>{Ou("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(Ne.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},qQ={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return X0({type:"counter",content:t},()=>(Ou("beforeDOMElementCreation",{content:t,params:e}),AQ({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(Ne.cssPrefix,"-layers-counter"),...i]}})))}}}},YQ={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Hs,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return X0({type:"text",content:t},()=>(Ou("beforeDOMElementCreation",{content:t,params:e}),FR({content:t,transform:re(re({},Hs),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(Ne.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(g3){const l=parseInt(getComputedStyle(e).fontSize,10),u=e.getBoundingClientRect();o=u.width/l,a=u.height/l}return Ne.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,FR({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const ZQ=new RegExp('"',"ug"),WR=[1105920,1112319],GR=re(re(re(re({},{FontAwesome:{normal:"fas",400:"fas"}}),bJ),jJ),RJ),p_=Object.keys(GR).reduce((t,e)=>(t[e.toLowerCase()]=GR[e],t),{}),JQ=Object.keys(p_).reduce((t,e)=>{const n=p_[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function QQ(t){const e=t.replace(ZQ,""),n=sQ(e,0),i=n>=WR[0]&&n<=WR[1],r=e.length===2?e[0]===e[1]:!1;return{value:o_(r?e[0]:e),isSecondary:i||r}}function eee(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(p_[n]||{})[r]||JQ[n]}function KR(t,e){const n="".concat(FJ).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=Hd(t.children).filter(h=>h.getAttribute(n_)===e)[0],a=hl.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),u=l.match(HJ),c=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!u)return t.removeChild(o),i();if(u&&d!=="none"&&d!==""){const h=a.getPropertyValue("content");let f=eee(l,c);const{value:p,isSecondary:g}=QQ(h),b=u[0].startsWith("FontAwesome");let v=dE(f,p),y=v;if(b){const w=dQ(p);w.iconName&&w.prefix&&(v=w.iconName,f=w.prefix)}if(v&&!g&&(!o||o.getAttribute(sE)!==f||o.getAttribute(oE)!==y)){t.setAttribute(n,y),o&&t.removeChild(o);const w=zQ(),{extra:_}=w;_.attributes[n_]=e,d_(v,f).then(k=>{const C=hE(re(re({},w),{},{icons:{main:k,mask:$3()},prefix:f,iconName:y,extra:_,watchable:!0})),E=Lt.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(E,t.firstChild):t.appendChild(E),E.outerHTML=C.map(P=>tm(P)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function tee(t){return Promise.all([KR(t,"::before"),KR(t,"::after")])}function nee(t){return t.parentNode!==document.head&&!~BJ.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(n_)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function XR(t){if(Yo)return new Promise((e,n)=>{const i=Hd(t.querySelectorAll("*")).filter(nee).map(tee),r=fE.begin("searchPseudoElements");V3(),Promise.all(i).then(()=>{r(),f_(),e()}).catch(()=>{r(),f_(),n()})})}var iee={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=XR,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Lt}=e;Ne.searchPseudoElements&&XR(n)}}};let qR=!1;var ree={mixout(){return{dom:{unwatch(){V3(),qR=!0}}}},hooks(){return{bootstrap(){UR(l_("mutationObserverCallbacks",{}))},noAuto(){jQ()},watch(t){const{observeMutationsRoot:e}=t;qR?f_():UR(l_("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const YR=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var see={mixout(){return{parse:{transform:t=>YR(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=YR(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),c={transform:"".concat(a," ").concat(l," ").concat(u)},d={transform:"translate(".concat(s/2*-1," -256)")},h={outer:o,inner:c,path:d};return{tag:"g",attributes:re({},h.outer),children:[{tag:"g",attributes:re({},h.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:re(re({},n.icon.attributes),h.path)}]}]}}}};const zb={x:0,y:0,width:"100%",height:"100%"};function ZR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function oee(t){return t.tag==="g"?t.children:[t]}var aee={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?K0(n.split(" ").map(r=>r.trim())):$3();return i.prefix||(i.prefix=fl()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:u}=r,{width:c,icon:d}=s,h=QJ({transform:a,containerWidth:c,iconWidth:l}),f={tag:"rect",attributes:re(re({},zb),{},{fill:"white"})},p=u.children?{children:u.children.map(ZR)}:{},g={tag:"g",attributes:re({},h.inner),children:[ZR(re({tag:u.tag,attributes:re(re({},u.attributes),h.path)},p))]},b={tag:"g",attributes:re({},h.outer),children:[g]},v="mask-".concat(o||gp()),y="clip-".concat(o||gp()),w={tag:"mask",attributes:re(re({},zb),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,b]},_={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:oee(d)},w]};return n.push(_,{tag:"rect",attributes:re({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},zb)}),{children:n,attributes:i}}}},lee={provides(t){let e=!1;hl.matchMedia&&(e=hl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:re(re({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=re(re({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:re(re({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:re(re({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:re(re({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:re(re({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:re(re({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:re(re({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:re(re({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},uee={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},cee=[nQ,KQ,XQ,qQ,YQ,iee,ree,see,aee,lee,uee];bQ(cee,{mixoutsTo:dr});dr.noAuto;dr.config;dr.library;dr.dom;const m_=dr.parse;dr.findIconDefinition;dr.toHtml;const dee=dr.icon;dr.layer;dr.text;dr.counter;var G3={exports:{}},hee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",fee=hee,pee=fee;function K3(){}function X3(){}X3.resetWarningCache=K3;var mee=function(){function t(i,r,s,o,a,l){if(l!==pee){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:X3,resetWarningCache:K3};return n.PropTypes=n,n};G3.exports=mee();var gee=G3.exports;const et=$u(gee);function JR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ds(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JR(Object(n),!0).forEach(function(i){Tc(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ay(t){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(t)}function Tc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vee(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function yee(t,e){if(t==null)return{};var n=vee(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function g_(t){return wee(t)||bee(t)||xee(t)||See()}function wee(t){if(Array.isArray(t))return v_(t)}function bee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xee(t,e){if(t){if(typeof t=="string")return v_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v_(t,e)}}function v_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function See(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ee(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,u=t.spinPulse,c=t.spinReverse,d=t.pulse,h=t.fixedWidth,f=t.inverse,p=t.border,g=t.listItem,b=t.flip,v=t.size,y=t.rotation,w=t.pull,_=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":c,"fa-spin-pulse":u,"fa-pulse":d,"fa-fw":h,"fa-inverse":f,"fa-border":p,"fa-li":g,"fa-flip":b===!0,"fa-flip-horizontal":b==="horizontal"||b==="both","fa-flip-vertical":b==="vertical"||b==="both"},Tc(e,"fa-".concat(v),typeof v<"u"&&v!==null),Tc(e,"fa-rotate-".concat(y),typeof y<"u"&&y!==null&&y!==0),Tc(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),Tc(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(_).map(function(k){return _[k]?k:null}).filter(function(k){return k})}function kee(t){return t=t-0,t===t}function q3(t){return kee(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var Cee=["style"];function Eee(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Aee(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=q3(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[Eee(r)]=s:e[r]=s,e},{})}function Y3(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return Y3(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,u){var c=e.attributes[u];switch(u){case"class":l.attrs.className=c,delete e.attributes.class;break;case"style":l.attrs.style=Aee(c);break;default:u.indexOf("aria-")===0||u.indexOf("data-")===0?l.attrs[u.toLowerCase()]=c:l.attrs[q3(u)]=c}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=yee(n,Cee);return r.attrs.style=Ds(Ds({},r.attrs.style),o),t.apply(void 0,[e.tag,Ds(Ds({},r.attrs),a)].concat(g_(i)))}var Z3=!1;try{Z3=!0}catch{}function Pee(){if(!Z3&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function QR(t){if(t&&Ay(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(m_.icon)return m_.icon(t);if(t===null)return null;if(t&&Ay(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function Ub(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Tc({},t,e):{}}var eN={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Rc=sn.forwardRef(function(t,e){var n=Ds(Ds({},eN),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,u=n.maskId,c=QR(i),d=Ub("classes",[].concat(g_(_ee(n)),g_((o||"").split(" ")))),h=Ub("transform",typeof n.transform=="string"?m_.transform(n.transform):n.transform),f=Ub("mask",QR(r)),p=dee(c,Ds(Ds(Ds(Ds({},d),h),f),{},{symbol:s,title:a,titleId:l,maskId:u}));if(!p)return Pee("Could not find icon",c),null;var g=p.abstract,b={ref:e};return Object.keys(n).forEach(function(v){eN.hasOwnProperty(v)||(b[v]=n[v])}),Tee(g[0],b)});Rc.displayName="FontAwesomeIcon";Rc.propTypes={beat:et.bool,border:et.bool,beatFade:et.bool,bounce:et.bool,className:et.string,fade:et.bool,flash:et.bool,mask:et.oneOfType([et.object,et.array,et.string]),maskId:et.string,fixedWidth:et.bool,inverse:et.bool,flip:et.oneOf([!0,!1,"horizontal","vertical","both"]),icon:et.oneOfType([et.object,et.array,et.string]),listItem:et.bool,pull:et.oneOf(["right","left"]),pulse:et.bool,rotation:et.oneOf([0,90,180,270]),shake:et.bool,size:et.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:et.bool,spinPulse:et.bool,spinReverse:et.bool,symbol:et.oneOfType([et.bool,et.string]),title:et.string,titleId:et.string,transform:et.oneOfType([et.string,et.object]),swapOpacity:et.bool};var Tee=Y3.bind(null,sn.createElement);function yp(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class fn{constructor(e,n){fe(this,"start");fe(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new fn(i,r)}toJSON(){return this.range}}const tN=Pe.from(Pe.MAX_ADDRESS).toString(),Ree=lr.from(lr.MAX_ADDRESS).toString(),Nee={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Pe.format(t)} is out of range (max memory address: ${tN}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`This instruction would be placed in address ${Pe.format(t)}, which is outside the memory range (max memory address: ${tN}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${Ree}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},nN=Pe.from(Pe.MAX_ADDRESS).toString(),Mee=lr.from(lr.MAX_ADDRESS).toString(),Oee={"address-has-code":t=>`La dirección de memoria ${Pe.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${Pe.format(t)} está fuera de rango (dirección máxima de memoria: ${nN}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vacío. El programa debe tener, al menos, una instrucción END.","end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${Pe.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${nN}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${Mee}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${Pe.format(t)}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instrucción sería colocada en la dirección ${Pe.format(t)}, la cual ya está reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carácter solo puede contener un carácter.","empty-character":"Los carácter no puede estar vacío.","invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-character":"Carácter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},Iee=eE({en:Nee,es:Oee});class ae extends Error{constructor(n,...i){super();fe(this,"code");fe(this,"context");fe(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof fn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return Iee(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof ae?n:new ae("unexpected-error",n)}}const mE=[[0,j.fromUnsigned(160,8)],[3,j.fromUnsigned(176,8)],[6,j.fromUnsigned(192,8)],[7,j.fromUnsigned(208,8)]],iN=new Set(...mE.map(([t])=>[t,t+1,t+2,t+3]));var xa,td;class Dee{constructor(){fe(this,"codeMemory",new Set);fe(this,"labels",new Map);fe(this,"hasORG",!1);Ie(this,xa,!1);Ie(this,td,!1)}loadStatements(e){if(A(this,xa))throw new Error("Tried to load statements twice");Q(this,xa,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new ae("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Pe.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Pe.from(0)})}return n}computeAddresses(e){if(A(this,td))throw new Error("Tried to compute addresses twice");Q(this,td,!0),this.codeMemory.clear();const n=new Set,i=e.some(c=>c.isInstruction()&&c.instruction==="INT");if(this.hasORG=e.some(c=>c.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new ae("missing-org").at(e[0].position);let r=i||this.hasORG?32:0,s=null,o=r;const a=[],l=[],u=[];for(const c of e)c.isInstruction()?a.push(c):c.isOriginChange()?l.push(c):c.isDataDirective()&&u.push(c);if(this.hasORG){const c=[];return yp(e,d=>{if(d.isEnd()||d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){r=d.newAddress;return}const h=r;if(h===null)throw new ae("missing-org").at(d);const f=d.length;for(let g=0;g<f;g++){if(!Pe.inRange(h+g))throw new ae("instruction-out-of-range",h+g).at(d);const b=Pe.from(h+g);if(n.has(b.value))throw new ae("occupied-address",b).at(d);if(i&&iN.has(b.value))throw new ae("reserved-address",b).at(d);n.add(b.value),d.isInstruction()&&this.codeMemory.add(b.value)}const p=Pe.from(h);d.setStart(p),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:p}),(d.isDataDirective()||d.isInstruction())&&(r+=f,o=Math.max(o,r))},ae.from),c}else return yp([...a,...l,...u],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const g=d.newAddress;g<32?s=g:r=g;return}let h;if(d.isDataDirective())s===null&&(s=o),h=s;else if(d.isInstruction())h=r;else throw new ae("missing-org").at(d);const f=d.length;for(let g=0;g<f;g++){if(!Pe.inRange(h+g))throw new ae("instruction-out-of-range",h+g).at(d);const b=Pe.from(h+g);if(n.has(b.value))throw new ae("occupied-address",b).at(d);if(i&&iN.has(b.value))throw new ae("reserved-address",b).at(d);n.add(b.value),d.isInstruction()&&this.codeMemory.add(b.value)}const p=Pe.from(h);if(d.setStart(p),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:p}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=f}else d.isInstruction()&&(r+=f,o=Math.max(o,r))},ae.from)}labelExists(e){if(!A(this,xa))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,xa))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,xa))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,td))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Pe&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}xa=new WeakMap,td=new WeakMap;const Lee=["AL","BL","CL","DL","AH","BH","CH","DH"],J3=["AX","BX","CX","DX","SP"],Py=[...Lee,...J3],gE=["DB","DW","EQU"],vE=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],jee=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...Py,...vE,...gE];class Fee{constructor(e,n,i){fe(this,"type");fe(this,"lexeme");fe(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class $ee{constructor(e){fe(this,"scanned",!1);fe(this,"tokens",[]);fe(this,"position",new fn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new fn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new ae("lexer.unterminated-character").at(this.position);if(mp(this.peek())===null)throw new ae("lexer.only-ascii").at(new fn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new ae("lexer.empty-character").at(this.position);if(n>=2)throw new ae("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new ae("lexer.unterminated-string").at(this.position);if(mp(this.peek())===null)throw new ae("lexer.only-ascii").at(new fn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new ae("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new ae("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();jee.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new ae("lexer.unexpected-character",e).at(this.position)}return this.position=new fn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new Fee(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new fn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Ln{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}fe(Ln,"numberLiteral",(...e)=>new Bee(...e)),fe(Ln,"label",(...e)=>new zee(...e)),fe(Ln,"unaryOperation",(...e)=>new Uee(...e)),fe(Ln,"binaryOperation",(...e)=>new Hee(...e));class Bee extends Ln{constructor(n,i){super(i);fe(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class zee extends Ln{constructor(n,i,r){super(r);fe(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new ae("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new ae("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new ae("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class Uee extends Ln{constructor(n,i,r){super(r);fe(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class Hee extends Ln{constructor(n,i,r,s){super(s);fe(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class q0{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var yo;class Q3 extends q0{constructor(n,i,r){super(r);fe(this,"type","data-directive");fe(this,"label");fe(this,"values");Ie(this,yo,null);this.values=n,this.label=i}get start(){if(A(this,yo)===null)throw new Error("Start not set");return A(this,yo)}setStart(n){if(A(this,yo)!==null)throw new Error("Start already set");Q(this,yo,n)}toJSON(){return{...super.toJSON(),...A(this,yo)?{start:A(this,yo).toJSON()}:{},directive:this.directive,label:this.label}}}yo=new WeakMap;var lu,Sa,nd;class Vee extends Q3{constructor(n,i,r){super(n,i,r);fe(this,"directive","EQU");Ie(this,lu,"not-processed");Ie(this,Sa,null);Ie(this,nd,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,nd)??((n=A(this,Sa))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,Sa))throw new Error("Constant already validated");if(!this.label)throw new ae("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new ae("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new ae("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new ae("cannot-be-unassinged","EQU").at(n);Q(this,Sa,n.value)}evaluateExpressions(n){if(!A(this,Sa))throw new Error("Constant not validated");if(A(this,lu)==="processed")return A(this,nd);if(A(this,lu)==="processing")throw new ae("circular-reference").at(this.position);Q(this,lu,"processed");const i=A(this,Sa).evaluate(n);return Q(this,lu,"processed"),Q(this,nd,i),i}evaluate(n){return this.evaluateExpressions(n)}}lu=new WeakMap,Sa=new WeakMap,nd=new WeakMap;const zh=Symbol("unassigned");var _i,Yr;class Wee extends Q3{constructor(n,i,r,s){super(i,r,s);fe(this,"size");Ie(this,_i,null);Ie(this,Yr,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,_i))throw new Error("Data directive not validated");return A(this,_i).length*(this.size/8)}getValues(){if(!A(this,Yr))throw new Error("Data directive not evaluated");return A(this,Yr)}toJSON(){return{...super.toJSON(),values:(A(this,Yr)??A(this,_i)??this.values).map(n=>n===zh?"?":n.toJSON())}}validate(){if(A(this,_i))throw new Error("Data directive already validated");Q(this,_i,[]);for(const n of this.values)if(n.isUnassigned())A(this,_i).push(zh);else if(n.isString()){if(this.directive!=="DB")throw new ae("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=mp(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new fn(n.position.start+r,n.position.start+r+1),a=Ln.numberLiteral(s,o);A(this,_i).push(a)}}else A(this,_i).push(n.value);if(A(this,_i).length===0)throw new ae("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,_i))throw new Error("Data directive not validated");if(A(this,Yr))throw new Error("Data directive already evaluated");Q(this,Yr,[]);const i=yp(A(this,_i),r=>{if(r===zh)A(this,Yr).push(zh);else{const s=r.evaluate(n);if(!j.fits(s,this.size))throw new ae("value-out-of-range",s,this.size).at(this);const o=j.fromNumber(s,this.size);A(this,Yr).push(o)}},ae.from);return i.length>0&&Q(this,Yr,null),i}}_i=new WeakMap,Yr=new WeakMap;class yE{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class Gee extends yE{constructor(n,i){super(i);fe(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class Kee extends yE{constructor(n){super(n);fe(this,"type","unassigned")}}class Xee extends yE{constructor(n){super(n.position);fe(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function qee(t,e,n){const i=fn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new Wee(t.type,e,n,i);case"EQU":return new Vee(e,n,i)}}class Hb extends q0{constructor(n){super(n);fe(this,"type","end")}}function ql(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var wo;class Vu extends q0{constructor(n,i,r){super(r);fe(this,"type","instruction");fe(this,"label");fe(this,"operands");Ie(this,wo,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,wo)===null)throw new Error("Start not set");return A(this,wo)}setStart(n){if(A(this,wo)!==null)throw new Error("Start already set");Q(this,wo,n)}toJSON(){return{...super.toJSON(),...A(this,wo)?{start:A(this,wo).toJSON()}:{},instruction:this.instruction,label:this.label}}}wo=new WeakMap;var Kn,gr;class Yee extends Vu{constructor(n,i,r,s){super(i,r,s);Ie(this,Kn,null);Ie(this,gr,null);this.instruction=n}get length(){if(!A(this,Kn))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,Kn);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,gr))throw new Error("Instruction not evaluated");return A(this,gr)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(ql(r)&3)<<2,o[0]|=(ql(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(ql(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(ql(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(ql(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,gr)??A(this,Kn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Kn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ae("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new ae("size-mismatch",r.size,i.size).at(this);Q(this,Kn,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new ae("size-mismatch",r.size,i.size).at(this);Q(this,Kn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new ae("size-mismatch",r.size,i.size).at(this);Q(this,Kn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new ae("size-mismatch",s.size,i.size).at(this);Q(this,Kn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}Q(this,Kn,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new ae("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new ae("size-mismatch",s,r.size).at(this);Q(this,Kn,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new ae("double-memory-access").at(this);s==="auto"&&(s=8),Q(this,Kn,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new ae("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,Kn))throw new Error("Instruction not validated");if(A(this,gr))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,Kn),a=l=>{const u=l.evaluate(n);if(!Pe.inRange(u))throw new ae("address-out-of-range",u).at(l);const c=Pe.from(u);if(n.addressIsReserved(c))throw new ae("address-has-code",c).at(l);return c};switch(i){case"reg<-reg":{Q(this,gr,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{Q(this,gr,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!j.fits(l,r))throw new ae("value-out-of-range",l,r).at(o);const u=j.fromNumber(l,r);Q(this,gr,{mode:i,size:r,out:s,src:u});return}case"mem<-reg":{Q(this,gr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!j.fits(l,r))throw new ae("value-out-of-range",l,r).at(o);const u=j.fromNumber(l,r);Q(this,gr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:u});return}default:return i}}}Kn=new WeakMap,gr=new WeakMap;var Ns,bo;class Zee extends Vu{constructor(n,i,r,s){super(i,r,s);Ie(this,Ns,null);Ie(this,bo,null);fe(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,bo))throw new Error("Instruction not evaluated");return A(this,bo)}toJSON(){return{...super.toJSON(),...A(this,bo)?{value:A(this,bo).toJSON()}:A(this,Ns)?{initialValue:A(this,Ns).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Ns))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new ae("expects-immediate").at(n);Q(this,Ns,n.value)}evaluateExpressions(n){if(!A(this,Ns))throw new Error("Instruction not validated");if(A(this,bo))throw new Error("Instruction aready evaluated");const i=A(this,Ns).evaluate(n);if(!j.fitsUnsigned(i,8))throw new ae("invalid-interrupt",i).at(A(this,Ns));Q(this,bo,j.fromUnsigned(i,8))}}Ns=new WeakMap,bo=new WeakMap;var Zr,xo,HM;let Jee=(HM=class extends Vu{constructor(n,i,r,s){super(i,r,s);Ie(this,Zr,null);Ie(this,xo,null);this.instruction=n}get length(){if(!A(this,Zr))throw new Error("Instruction not validated");return A(this,Zr).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,xo)===null)throw new Error("Operation not set");return A(this,xo)}toJSON(){return{...super.toJSON(),...A(this,xo)??A(this,Zr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Zr))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ae("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new ae("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new ae("expects-dx").at(i);Q(this,Zr,{port:"variable",size:r});return}if(i.isNumberExpression()){Q(this,Zr,{port:"fixed",size:r,address:i.value});return}throw new ae("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,Zr))throw new Error("Instruction not validated");if(A(this,xo))throw new Error("Instruction aready evaluated");const i=A(this,Zr);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!lr.inRange(r))throw new ae("io-address-out-of-range",r).at(this);const s=lr.from(r);Q(this,xo,{port:"fixed",size:i.size,address:s})}else Q(this,xo,{port:"variable",size:i.size})}},Zr=new WeakMap,xo=new WeakMap,HM);var So,_o,VM;let Qee=(VM=class extends Vu{constructor(n,i,r,s){super(i,r,s);Ie(this,So,null);Ie(this,_o,null);fe(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,_o)===null)throw new Error("Instruction not evaluated");return A(this,_o)}toJSON(){return{...super.toJSON(),...A(this,_o)?{address:A(this,_o).toJSON()}:A(this,So)?{jumpTo:A(this,So)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,So))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel())throw new ae("expects-label").at(i);const r=i.value.value,s=n.getLabelType(r);if(!s)throw new ae("label-not-found",r).at(i);if(s!=="instruction")throw new ae("label-should-be-an-instruction",r).at(i);Q(this,So,r)}evaluateExpressions(n){if(!A(this,So))throw new Error("Instruction not validated");if(A(this,_o))throw new Error("Instruction aready evaluated");const i=n.getLabelValue(A(this,So));if(!Pe.inRange(i))throw new ae("address-out-of-range",i).at(this);Q(this,_o,Pe.from(i))}},So=new WeakMap,_o=new WeakMap,VM);var Ms,WM;let ete=(WM=class extends Vu{constructor(n,i,r,s){super(i,r,s);Ie(this,Ms,null);fe(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=ql(this.register),new Uint8Array([i])}get register(){if(!A(this,Ms))throw new Error("Instruction not evaluated");return A(this,Ms)}toJSON(){return{...super.toJSON(),...A(this,Ms)?{register:A(this,Ms)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Ms))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new ae("expects-word-register").at(n);Q(this,Ms,n.value)}evaluateExpressions(){if(!A(this,Ms))throw new Error("Instruction not validated")}},Ms=new WeakMap,WM);var Vi,Os;class tte extends Vu{constructor(n,i,r,s){super(i,r,s);Ie(this,Vi,null);Ie(this,Os,null);this.instruction=n}get length(){if(!A(this,Vi))throw new Error("Instruction not validated");const{mode:n}=A(this,Vi);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=ql(this.operation.reg);break}case"mem-direct":{n[1]=192;const r=this.operation.address.byte;n.push(r.low.unsigned),n.push(r.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Os))throw new Error("Instruction not evaluated");return A(this,Os)}toJSON(){return{...super.toJSON(),...A(this,Os)??A(this,Vi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Vi))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){Q(this,Vi,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new ae("unknown-size").at(i);Q(this,Vi,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new ae("unknown-size").at(i);Q(this,Vi,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){Q(this,Vi,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new ae("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,Vi))throw new Error("Instruction not validated");if(A(this,Os))throw new Error("Instruction aready evaluated");const i=A(this,Vi);switch(i.mode){case"reg":{Q(this,Os,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Pe.inRange(r))throw new ae("address-out-of-range",r).at(i.address);const s=Pe.from(r);if(n.addressIsReserved(s))throw new ae("address-has-code",s).at(i.address);Q(this,Os,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{Q(this,Os,{mode:"mem-indirect",size:i.size});return}default:return i}}}Vi=new WeakMap,Os=new WeakMap;var id;class nte extends Vu{constructor(n,i,r,s){super(i,r,s);Ie(this,id,!1);fe(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,id))throw new Error("Instruction already validated");if(this.operands.length>0)throw new ae("expects-no-operands").at(this);Q(this,id,!0)}evaluateExpressions(){if(!A(this,id))throw new Error("Instruction not validated")}}id=new WeakMap;class Y0{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class ite extends Y0{constructor(n){super(n.position);fe(this,"type","register");fe(this,"value");this.value=n.type}get size(){return J3.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class rte extends Y0{constructor(n,i){super(i);fe(this,"type","indirect-address");fe(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class ste extends Y0{constructor(n,i,r){super(r);fe(this,"type","direct-address");fe(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class Ty extends Y0{constructor(n){super(n.position);fe(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return Ty.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new ae("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:Ln.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=Ty.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:Ln.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function rN(t,e,n){const i=fn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new nte(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new Yee(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new tte(t.type,e,n,i);case"PUSH":case"POP":return new ete(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new Qee(t.type,e,n,i);case"IN":case"OUT":return new Jee(t.type,e,n,i);case"INT":return new Zee(t.type,e,n,i)}}class ote extends q0{constructor(n,i){super(i);fe(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let ate=class{constructor(e){fe(this,"tokens");fe(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new ae("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new ae("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new ote(i,fn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new ae("end-must-be-the-last-statement").at(e);return new Hb(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new Hb(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new Hb(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...gE);if(e&&!n)throw new ae("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),qee(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new Gee(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new Kee(e.position)}return new Xee(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...vE);if(e&&!n){const s=this.peek();throw new ae("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return rN(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),rN(n,r,i)}instructionOperand(){if(this.match(...Py)){const n=this.previous();return new ite(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new ae("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Py)){this.consume("BL",new ae("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new ae("parser.expected-literal-after-literal","]","BL"));return new rte(e==null?void 0:e.type,fn.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new ae("parser.expected-literal-after-expression","]"));return new ste(i,e==null?void 0:e.type,fn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new ae("parser.expected-literal-after-literal","[","PTR");return new Ty(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new ae("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new ae("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Ln.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=mp(i.lexeme.slice(1,-1));return Ln.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new ae("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new ae("parser.expected-label-after-offset").at(this.peek());if(!n)throw new ae("parser.expected-argument").at(this.peek());return Ln.label(n.lexeme.toUpperCase(),e!==null,fn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new ae("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Ln.unaryOperation(e.type==="PLUS"?"+":"-",n,fn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Ln.binaryOperation(e,"*",n,fn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Ln.binaryOperation(e,n.type==="PLUS"?"+":"-",i,fn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function e5(t){try{const n=new $ee(t).scanTokens(),r=new ate(n).parse();if(!r.at(-1))throw new ae("empty-program");let o=[];const a=new Dee;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=yp(r,c=>{c.isOriginChange()||c.isEnd()||c.validate(a)},ae.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],u=[];return o=yp(r,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(a);else{const d=c.evaluateExpressions(a);return l.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(a),u.push(c))},ae.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:u,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[ae.from(e)]}}}class ws{constructor(e){fe(this,"computer");this.computer=e.computer}}const lte=t=>Pe.format(t).slice(-2),ute=lte(Pe.MAX_ADDRESS),cte={"address-has-instruction":t=>`Memory address ${Pe.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${Pe.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${Pe.format(t)} is out of range (max memory address: ${ute}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${lr.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${Pe.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},dte=Pe.from(Pe.MAX_ADDRESS).toString(),hte={"address-has-instruction":t=>`La dirección de memoria ${Pe.format(t)} tiene una instrucción, y no se puede escribir.`,"address-is-reserved":t=>`La dirección de memoria ${Pe.format(t)} está reservada, y no se puede escribir.`,"address-out-of-range":t=>`La dirección de memoria ${Pe.format(t)} está fuera de rango (dirección máxima de memoria: ${dte}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontró ningún módulo conectado a la dirección de memoria E/S ${lr.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${Pe.format(t)} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},fte=eE({en:cte,es:hte});class jt extends Error{constructor(n,...i){super();fe(this,"code");fe(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return fte(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof jt?n:new jt("unexpected-error",n)}}class Zo{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new jt("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var Jy,t5;class pte extends Zo{constructor(){super(...arguments);Ie(this,Jy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:wt(this,Jy,t5).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;u=j.fromSigned(d,r),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>j.maxValue(r)?(c.CF=!0,u=j.fromUnsigned(h-j.maxValue(r)-1,r)):(c.CF=!1,u=j.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed>=0&&u.signed<0||a.signed<0&&l.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(c.CF=!0,u=j.fromUnsigned(h+j.maxValue(r)+1,r)):(c.CF=!1,u=j.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed<0&&u.signed<0||a.signed<0&&l.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Jy=new WeakSet,t5=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var Qy,n5;class mte extends Zo{constructor(){super(...arguments);Ie(this,Qy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:wt(this,Qy,n5).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=j.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=j.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===j.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",j.fromSigned(1,16));const o=i.unsigned+1;o>j.maxValue(this.operation.size)?(s.CF=!0,r=j.fromUnsigned(o-j.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=j.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",j.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=j.fromUnsigned(o+j.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=j.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Qy=new WeakSet,n5=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class gte extends Zo{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"id.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var e0,i5;class vte extends Zo{constructor(){super(...arguments);Ie(this,e0)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:wt(this,e0,i5).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new jt("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new jt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new jt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}e0=new WeakSet,i5=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class yte extends Zo{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:this.name==="CALL",ri:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(yield*e.cpu.copyByteRegister("IP.l","id.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l"),!(yield*e.cpu.pushToStack("id.l")))return!1}else yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class wte extends Zo{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function Yl(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function bte(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var t0,r5;class xte extends Zo{constructor(){super(...arguments);Ie(this,t0)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:wt(this,t0,r5).call(this),willUse:{id:i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?this.operation.mode==="mem<-imd"?yield*super.consumeInstruction(n,"id.l"):yield*super.consumeInstruction(n,"ri.l"):this.operation.mode==="mem<-reg"&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"id.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=bte(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"?yield*n.cpu.copyByteRegister("id.l","ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}t0=new WeakSet,r5=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class Ste extends Zo{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class _te extends Zo{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function kte(t){switch(t.instruction){case"MOV":return new xte(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new pte(t);case"NOT":case"NEG":case"INC":case"DEC":return new mte(t);case"IN":case"OUT":return new vte(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new _te(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new yte(t);case"RET":case"IRET":return new Ste(t);case"INT":return new gte(t);case"CLI":case"STI":case"NOP":case"HLT":return new wte(t)}}function Cte(t){for(const[e,n]of mE)if(n.unsigned===t.unsigned)return e;return null}function*Ete(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 3:{yield{type:"cpu:int.3"};break}case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new jt("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new jt("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new jt("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",j.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new jt("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",j.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",j.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===j.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var rd,We,vr,ki,nn,ac,mr,GM;let Ate=(GM=class extends ws{constructor(n){super(n);Ie(this,nn);Ie(this,rd);Ie(this,We);Ie(this,vr);Ie(this,ki);n.data==="unchanged"?(Q(this,We,A(n.previous.cpu,We)),Q(this,vr,A(n.previous.cpu,vr)),Q(this,ki,A(n.previous.cpu,ki))):(Q(this,We,{AX:j.zero(16),BX:j.zero(16),CX:j.zero(16),DX:j.zero(16),SP:j.zero(16),IP:j.zero(16),IR:j.zero(8),ri:j.zero(16),id:j.zero(16),left:j.zero(16),right:j.zero(16),result:j.zero(16),FLAGS:j.zero(16)}),Q(this,vr,j.zero(16)),Q(this,ki,j.zero(8))),A(this,We).SP=j.fromUnsigned(Pe.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1,s=i||r?32:0;A(this,We).IP=j.fromUnsigned(s,16),A(this,We).ri=j.fromUnsigned(0,16),A(this,We).id=j.fromUnsigned(0,16),wt(this,nn,mr).call(this,"IF",!0),Q(this,rd,new Map);for(const o of n.program.instructions){const a=kte(o);A(this,rd).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,We).IP,r=Cte(i);if(r!==null){if(!(yield*Ete(this.computer,r)))return}else{const s=A(this,rd).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new jt("no-instruction",A(this,We).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",j.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){return!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l")))||(yield*this.copyByteRegister("id.l","ri.l"),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("IP.l"),!0)}toJSON(){return{...Object.entries(A(this,We)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,vr).toJSON(),MBR:A(this,ki).toJSON()}}getRegister(n){const[i,r]=Yl(n);return r==="low"?A(this,We)[i].low:r==="high"?A(this,We)[i].high:A(this,We)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);wt(this,nn,ac).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);wt(this,nn,ac).call(this,i,r.withHigh(j.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,wt(this,nn,ac).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,wt(this,nn,ac).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,We).FLAGS.bit(1);case"ZF":return A(this,We).FLAGS.bit(0);case"SF":return A(this,We).FLAGS.bit(3);case"IF":return A(this,We).FLAGS.bit(4);case"OF":return A(this,We).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&wt(this,nn,mr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&wt(this,nn,mr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&wt(this,nn,mr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&wt(this,nn,mr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&wt(this,nn,mr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,We).FLAGS}}*aluExecute(n,i,r){A(this,We).result=i.is8bits()?A(this,We).result.withLow(i):i,typeof r.CF=="boolean"&&wt(this,nn,mr).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&wt(this,nn,mr).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&wt(this,nn,mr).call(this,"SF",r.SF),typeof r.IF=="boolean"&&wt(this,nn,mr).call(this,"IF",r.IF),typeof r.OF=="boolean"&&wt(this,nn,mr).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,We).result,flags:A(this,We).FLAGS}}*setMAR(n){const i=this.getRegister(n);Q(this,vr,i.withHigh(j.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){wt(this,nn,ac).call(this,n,A(this,ki)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);Q(this,ki,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,vr));return i?(Q(this,ki,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,vr),A(this,ki)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,vr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(Q(this,ki,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,vr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,ki))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return Q(this,ki,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return Pe.inRange(i.unsigned-1)?Pe.inRange(i.unsigned-1)?(yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?(i=i.add(-1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new jt("stack-overflow")},!1):(yield{type:"cpu:error",error:new jt("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return Pe.inRange(i)?(i=i.add(1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),!0):!1):(yield{type:"cpu:error",error:new jt("stack-underflow")},!1)}},rd=new WeakMap,We=new WeakMap,vr=new WeakMap,ki=new WeakMap,nn=new WeakSet,ac=function(n,i){const[r,s]=Yl(n);if(s===null){if(A(this,We)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,We)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,We)[r]=A(this,We)[r].withLow(i):A(this,We)[r]=A(this,We)[r].withHigh(i)}},mr=function(n,i){switch(n){case"CF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(1,i);return;case"ZF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(0,i);return;case"SF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(3,i);return;case"IF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(4,i);return;case"OF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},GM);var ja,yr,ko,_a;let s5=(ja=class extends ws{constructor(n){super(n);Ie(this,yr);Ie(this,ko);Ie(this,_a,!1);n.data==="unchanged"&&n.previous.io.printer?(Q(this,yr,A(n.previous.io.printer,yr)),Q(this,ko,A(n.previous.io.printer,ko)),Q(this,_a,A(n.previous.io.printer,_a))):(Q(this,yr,[]),Q(this,ko,""),Q(this,_a,!1))}get busy(){return A(this,yr).length>=ja.BUFFER_SIZE}*setStrobe(n){const i=A(this,_a);if(i===n)return;if(Q(this,_a,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,yr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){Q(this,ko,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,yr).length===0)return;const[n,...i]=A(this,yr);if(Q(this,yr,i),yield{type:"printer:buffer.pop",char:n},i.length===ja.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=iE(n.unsigned);Q(this,ko,A(this,ko)+r),yield{type:"printer:paper.print",char:r}}}toJSON(){return{paper:A(this,ko),buffer:[...A(this,yr).map(n=>n.unsigned)]}}},yr=new WeakMap,ko=new WeakMap,_a=new WeakMap,fe(ja,"BUFFER_SIZE",5),ja);class Z0 extends ws{}let o5=class extends Z0{constructor(n){super(n);fe(this,"PA");fe(this,"PB");fe(this,"CA");fe(this,"CB");fe(this,"leds",null);fe(this,"printer",null);fe(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=j.random(8),this.PB=j.random(8),this.CA=j.random(8),this.CB=j.random(8)):(this.PA=j.zero(8),this.PB=j.zero(8),this.CA=j.zero(8),this.CB=j.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class sN extends o5{constructor(n){super(n);fe(this,"printer");this.PA=this.PA.withBit(1,!1);const i=this;this.printer=new class extends s5{*readData(){const r=i.readData();return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updatePort("A")}}(n)}readData(){const n=this.PB.unsigned&~this.CB.unsigned;return j.fromUnsigned(n,8)}*updatePort(n){if(n==="B")return;let i=this.PA.unsigned;const r=this.CA.unsigned,s=this.printer.busy;i=i&~r,this.line("A",0)==="input"&&s&&(i|=1),i!==this.PA.unsigned&&(this.PA=j.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var Co,KM;let Pte=(KM=class extends ws{constructor(n){super(n);Ie(this,Co);n.data==="unchanged"&&n.previous.io.leds?Q(this,Co,A(n.previous.io.leds,Co)):n.data==="randomize"?Q(this,Co,j.random(8)):Q(this,Co,j.zero(8))}get state(){return A(this,Co)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,Co).toJSON()}},Co=new WeakMap,KM);var wr,XM;let Tte=(XM=class extends ws{constructor(n){super(n);Ie(this,wr);n.data==="unchanged"&&n.previous.io.switches?Q(this,wr,A(n.previous.io.switches,wr)):n.data==="randomize"?Q(this,wr,j.random(8)):Q(this,wr,j.zero(8))}get state(){return A(this,wr)}*toggle(n){Q(this,wr,A(this,wr).withBit(n,!A(this,wr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,wr).toJSON()}},wr=new WeakMap,XM);class Rte extends o5{constructor(n){super(n);fe(this,"leds");fe(this,"switches");const i=this;this.leds=new class extends Pte{}(n),this.switches=new class extends Tte{*toggle(r){yield*super.toggle(r),yield*i.updatePort("A")}}(n)}*updatePort(n){if(n==="A"){const i=this.switches.state.unsigned;let r=this.PA.unsigned;const s=this.CA.unsigned;r=i&s|r&~s,r!==this.PA.unsigned&&(this.PA=j.fromUnsigned(r,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let i=this.PB.unsigned;const r=this.CB.unsigned;i=i&~r,yield*this.leds.update(j.fromUnsigned(i,8))}}}let Nte=class extends ws{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},Mte=class extends ws{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var sd,qM;let Ote=(qM=class extends ws{constructor(){super(...arguments);Ie(this,sd,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,sd);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},Q(this,sd,null),n}setLastCharRead(n){Q(this,sd,n)}toJSON(){return null}},sd=new WeakMap,qM);var Wi,YM;let Ite=(YM=class extends ws{constructor(n){super(n);Ie(this,Wi);n.data==="unchanged"&&n.previous.io.screen?Q(this,Wi,A(n.previous.io.screen,Wi)):Q(this,Wi,"")}clear(){return this.sendChar(j.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:Q(this,Wi,A(this,Wi).slice(0,-1));break;case 10:Q(this,Wi,A(this,Wi)+`
`);break;case 12:Q(this,Wi,"");break;default:Q(this,Wi,A(this,Wi)+iE(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,Wi)}}toJSON(){return A(this,Wi)}},Wi=new WeakMap,YM);var Eo,ai,ZM;let Dte=(ZM=class extends Z0{constructor(n){super(n);Ie(this,Eo);Ie(this,ai);fe(this,"printer");n.data==="randomize"?Q(this,Eo,j.random(8)):Q(this,Eo,j.zero(8)),Q(this,ai,j.zero(8));const i=this;this.printer=new class extends s5{*readData(){const r=A(i,Eo);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,ai).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,Eo);else if(n==="STATE")i=A(this,ai);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")Q(this,Eo,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),Q(this,ai,i),yield{type:"handshake:register.update",register:n,value:i},A(this,ai).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),Q(this,ai,A(this,ai).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,ai)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){Q(this,ai,A(this,ai).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,ai)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Eo).toJSON(),STATE:A(this,ai).toJSON()}}},Eo=new WeakMap,ai=new WeakMap,ZM);var rs,Ao,Ci,li,Jr,Js,cv,dv;let Lte=(rs=class extends Z0{constructor(n){super(n);Ie(this,Js);Ie(this,Ao);Ie(this,Ci);Ie(this,li);Ie(this,Jr);Q(this,Ao,j.fromUnsigned(255,8)),Q(this,Ci,j.fromUnsigned(0,8)),Q(this,li,j.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?Q(this,Jr,A(n.previous.io.pic,Jr)):n.data==="randomize"?Q(this,Jr,new Array(rs.LINES).fill(j.zero(8)).map(()=>j.random(8))):Q(this,Jr,new Array(rs.LINES).fill(j.zero(8)))}chipSelect(n){const r=4+rs.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=j.zero(8);else if(n==="IMR")i=A(this,Ao);else if(n==="IRR")i=A(this,Ci);else if(n==="ISR")i=A(this,li);else{const r=Number(n.slice(3));i=A(this,Jr)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,li).isZero()||(yield{type:"pic:intr.off"},Q(this,li,j.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,li)},yield*wt(this,Js,dv).call(this));else if(n==="IMR")Q(this,Ao,i),yield{type:"pic:register.update",register:"IMR",value:A(this,Ao)},yield*wt(this,Js,dv).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,Jr)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=rs.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Ci).bit(n)||(Q(this,Ci,A(this,Ci).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ci)},yield*wt(this,Js,dv).call(this))}isINTRActive(){return A(this,li).isZero()&&wt(this,Js,cv).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,li).isZero())throw new Error("INTR line is active but ISR is not zero");const n=wt(this,Js,cv).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");Q(this,li,A(this,li).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,li)},Q(this,Ci,A(this,Ci).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ci)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,Jr)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,Ao).toJSON(),IRR:A(this,Ci).toJSON(),ISR:A(this,li).toJSON(),lines:A(this,Jr).map(n=>n.toJSON())}}},Ao=new WeakMap,Ci=new WeakMap,li=new WeakMap,Jr=new WeakMap,Js=new WeakSet,cv=function(){for(let n=0;n<rs.LINES;n++)if(A(this,Ci).bit(n)&&!A(this,Ao).bit(n))return n;return null},dv=function*(){A(this,li).isZero()&&wt(this,Js,cv).call(this)!==null&&(yield{type:"pic:intr.on"})},fe(rs,"LINES",8),rs);var Is,ka,JM;let jte=(JM=class extends Z0{constructor(n){super(n);Ie(this,Is);Ie(this,ka);Q(this,Is,j.zero(8)),Q(this,ka,j.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Is);else if(n==="COMP")i=A(this,ka);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")Q(this,Is,i);else if(n==="COMP")Q(this,ka,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Is).unsigned===j.maxValue(8)?j.zero(8):A(this,Is).add(1);Q(this,Is,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,ka).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Is).toJSON(),COMP:A(this,ka).toJSON()}}},Is=new WeakMap,ka=new WeakMap,JM);class Fte extends ws{constructor(n){super(n);fe(this,"clock",null);fe(this,"f10",null);fe(this,"keyboard",null);fe(this,"screen",null);fe(this,"handshake",null);fe(this,"pic",null);fe(this,"pio",null);fe(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new Ote(n),this.screen=new Ite(n)),n.devices.pic&&(this.clock=new Nte(n),this.f10=new Mte(n),this.timer=new jte(n),this.pic=new Lte(n)),this.pio=n.devices.pio==="switches-and-leds"?new Rte(n):n.devices.pio==="printer"?new sN(n):null,n.devices.handshake){if(this.pio instanceof sN)throw new jt("io-printer-conflict");this.handshake=new Dte(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,u,c;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(u=this.pio)==null?void 0:u.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(c=this.timer)==null?void 0:c.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new jt("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new jt("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new jt("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,u,c,d,h;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((u=this.handshake)==null?void 0:u.toJSON())??null,pic:((c=this.pic)==null?void 0:c.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((h=this.timer)==null?void 0:h.toJSON())??null}}}var Fa,Ei,od,uu;let $te=(Fa=class extends ws{constructor(n){super(n);Ie(this,Ei);Ie(this,od);Ie(this,uu);n.data==="unchanged"?Q(this,Ei,A(n.previous.memory,Ei)):n.data==="randomize"?Q(this,Ei,new Uint8Array(Fa.SIZE).map(()=>j.random(8).unsigned)):Q(this,Ei,new Uint8Array(Fa.SIZE).fill(0));const i=n.program.instructions.some(r=>r.instruction==="INT");if(Q(this,uu,new Set),i)for(const[r,s]of mE){const o=r;if(A(this,Ei)[o]=s.unsigned,A(this,uu).add(o),r===6){const a=[208,216,100,18,1,193,193,216,96,212,65,225],l=s.unsigned;for(let u=0;u<a.length;u++)A(this,Ei)[l+u]=a[u],A(this,uu).add(l+u)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==zh&&A(this,Ei).set(o.toUint8Array(),s),s+=r.size/8}Q(this,od,new Set);for(const r of n.program.instructions){A(this,Ei).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,od).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Pe.inRange(n))return yield{type:"memory:read.error",error:new jt("address-out-of-range",n)},null;const i=j.fromUnsigned(A(this,Ei).at(n),8);return yield{type:"memory:read.ok",address:Pe.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Pe.inRange(n)?A(this,od).has(n)?(yield{type:"memory:write.error",error:new jt("address-has-instruction",n)},!1):A(this,uu).has(n)?(yield{type:"memory:write.error",error:new jt("address-is-reserved",n)},!1):(A(this,Ei).set([i.unsigned],n),yield{type:"memory:write.ok",address:Pe.from(n),value:i},!0):(yield{type:"memory:write.error",error:new jt("address-out-of-range",n)},!1)}toJSON(){return[...A(this,Ei)]}},Ei=new WeakMap,od=new WeakMap,uu=new WeakMap,fe(Fa,"SIZE",Pe.MAX_ADDRESS+1),Fa);class oN{constructor(e){fe(this,"cpu");fe(this,"memory");fe(this,"io");const n={computer:this,...e};this.cpu=new Ate(n),this.memory=new $te(n),this.io=new Fte(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var ft;class Bte{constructor(){Ie(this,ft,new oN({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){Q(this,ft,new oN({...e,previous:A(this,ft)}))}getComputerState(){var e;return((e=A(this,ft))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,ft))throw new jt("no-program");return A(this,ft).cpu.run()}get devices(){if(!A(this,ft))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,ft).io.clock!==null,tick:()=>{if(A(this,ft).io.clock)return A(this,ft).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,ft).io,press:()=>{if(A(this,ft).io.f10)return A(this,ft).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,ft).io,readChar:e=>{if(A(this,ft).io.keyboard)return A(this,ft).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,ft).io},printer:{connected:()=>A(this,ft).io.printer!==null,clear:()=>{if(A(this,ft).io.printer)return A(this,ft).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,ft).io.printer)return A(this,ft).io.printer.print();console.warn("No printer connected to the computer!")}},screen:{connected:()=>"screen"in A(this,ft).io,clear:()=>{if(A(this,ft).io.screen)return A(this,ft).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,ft).io,toggle:e=>{if(A(this,ft).io.switches)return A(this,ft).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}ft=new WeakMap;const a5=ve([]),l5=ve([]),Ry=ve(new Array(Pe.MAX_ADDRESS+1).fill(j.zero(8))),wp=ve(Pe.from(32)),zte=ve(null),ug=256,Ute=ve(t=>{const e=t(zte)??t(wp);let n=e.value-e.value%ug,i=n+ug-1;i>Pe.MAX_ADDRESS&&(i=Pe.MAX_ADDRESS,n=i-ug+1);const r=t(Ry),s=[];for(let o=0;o<ug;o++)s.push({address:Pe.from(n+o),value:r[n+o]});return s});function Hte(t,e=!1){e?H.set(Ry,new Array(Pe.MAX_ADDRESS+1).fill(j.zero(8))):H.set(Ry,t.memory.map(n=>j.fromUnsigned(n,8))),H.set(wp,Pe.from(32))}const u5=new Up;function Vte(t){window.codemirror&&window.codemirror.dispatch({effects:u5.reconfigure(it.readOnly.of(t))})}const y_=Ze.define(),Wte=wi.define({create(){return Je.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(y_)&&(n=Je.none,i.value!==null&&(n=n.update({add:[Gte.range(i.value)]})));return n},provide:t=>Re.decorations.from(t)}),Gte=Je.line({class:"!bg-mantis-400/10"});function c5(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:y_.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:y_.of(e)})}}const d5=jc.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||jc,Vb=ve(j.zero(16)),Wb=ve(j.zero(16)),Gb=ve(j.zero(16)),Kb=ve(j.zero(16)),Xb=ve(j.zero(16)),qb=ve(j.zero(16)),Kte=ve(j.zero(8)),Yb=ve(j.zero(16)),Zb=ve(j.zero(16)),Jb=ve(j.zero(16)),Qb=ve(j.zero(16)),e1=ve(j.zero(16)),t1=ve(j.zero(16)),h5=ve(j.zero(16)),Ny=ve(j.zero(8)),Ft=ve(null),Iu=ve(0),f5=ve(!1),J0=ve(0),My=ve([]),p5=ve(!1);ve(!0);ve(!0);const hr=t=>ve(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),fr=t=>ve(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),qe={AX:Vb,AL:hr(Vb),AH:fr(Vb),BX:Wb,BL:hr(Wb),BH:fr(Wb),CX:Gb,CL:hr(Gb),CH:fr(Gb),DX:Kb,DL:hr(Kb),DH:fr(Kb),SP:Xb,"SP.l":hr(Xb),"SP.h":fr(Xb),IP:qb,"IP.l":hr(qb),"IP.h":fr(qb),IR:Kte,ri:Yb,"ri.l":hr(Yb),"ri.h":fr(Yb),id:Zb,"id.l":hr(Zb),"id.h":fr(Zb),left:Jb,"left.l":hr(Jb),"left.h":fr(Jb),right:Qb,"right.l":hr(Qb),"right.h":fr(Qb),result:e1,"result.l":hr(e1),"result.h":fr(e1),FLAGS:t1,"FLAGS.l":hr(t1),"FLAGS.h":fr(t1),MAR:h5,MBR:Ny},Ts=ve({phase:"stopped"}),m5=ve("ADD");function Xte(t,e=!1){e?(H.set(qe.AX,j.zero(16)),H.set(qe.BX,j.zero(16)),H.set(qe.CX,j.zero(16)),H.set(qe.DX,j.zero(16)),H.set(qe.SP,j.zero(16)),H.set(qe.IP,j.zero(16)),H.set(qe.IR,j.zero(8)),H.set(qe.ri,j.zero(16)),H.set(qe.id,j.zero(16)),H.set(qe.left,j.zero(16)),H.set(qe.right,j.zero(16)),H.set(qe.result,j.zero(16)),H.set(qe.FLAGS,j.zero(16)),H.set(qe.MAR,j.zero(16)),H.set(qe.MBR,j.zero(8))):(H.set(qe.AX,j.fromUnsigned(t.cpu.AX,16)),H.set(qe.BX,j.fromUnsigned(t.cpu.BX,16)),H.set(qe.CX,j.fromUnsigned(t.cpu.CX,16)),H.set(qe.DX,j.fromUnsigned(t.cpu.DX,16)),H.set(qe.SP,j.fromUnsigned(t.cpu.SP,16)),H.set(qe.IP,j.fromUnsigned(t.cpu.IP,16)),H.set(qe.IR,j.fromUnsigned(t.cpu.IR,8)),H.set(qe.ri,j.fromUnsigned(t.cpu.ri,16)),H.set(qe.id,j.fromUnsigned(t.cpu.id,16)),H.set(qe.left,j.fromUnsigned(t.cpu.left,16)),H.set(qe.right,j.fromUnsigned(t.cpu.right,16)),H.set(qe.result,j.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,H.set(qe.FLAGS,j.fromUnsigned(t.cpu.FLAGS,16)),H.set(qe.MAR,j.fromUnsigned(t.cpu.MAR,16)),H.set(qe.MBR,j.fromUnsigned(t.cpu.MBR,8))),H.set(Ts,{phase:"stopped"})}var wE=im(),Ye=t=>nm(t,wE),bE=im();Ye.write=t=>nm(t,bE);var Q0=im();Ye.onStart=t=>nm(t,Q0);var xE=im();Ye.onFrame=t=>nm(t,xE);var SE=im();Ye.onFinish=t=>nm(t,SE);var Jc=[];Ye.setTimeout=(t,e)=>{const n=Ye.now()+e,i=()=>{const s=Jc.findIndex(o=>o.cancel==i);~s&&Jc.splice(s,1),Ia-=~s?1:0},r={time:n,handler:t,cancel:i};return Jc.splice(g5(n),0,r),Ia+=1,v5(),r};var g5=t=>~(~Jc.findIndex(e=>e.time>t)||~Jc.length);Ye.cancel=t=>{Q0.delete(t),xE.delete(t),SE.delete(t),wE.delete(t),bE.delete(t)};Ye.sync=t=>{w_=!0,Ye.batchedUpdates(t),w_=!1};Ye.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Ye.onStart(n)}return i.handler=t,i.cancel=()=>{Q0.delete(n),e=null},i};var _E=typeof window<"u"?window.requestAnimationFrame:()=>{};Ye.use=t=>_E=t;Ye.now=typeof performance<"u"?()=>performance.now():Date.now;Ye.batchedUpdates=t=>t();Ye.catch=console.error;Ye.frameLoop="always";Ye.advance=()=>{Ye.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):w5()};var Oa=-1,Ia=0,w_=!1;function nm(t,e){w_?(e.delete(t),t(0)):(e.add(t),v5())}function v5(){Oa<0&&(Oa=0,Ye.frameLoop!=="demand"&&_E(y5))}function qte(){Oa=-1}function y5(){~Oa&&(_E(y5),Ye.batchedUpdates(w5))}function w5(){const t=Oa;Oa=Ye.now();const e=g5(Oa);if(e&&(b5(Jc.splice(0,e),n=>n.handler()),Ia-=e),!Ia){qte();return}Q0.flush(),wE.flush(t?Math.min(64,Oa-t):16.667),xE.flush(),bE.flush(),SE.flush()}function im(){let t=new Set,e=t;return{add(n){Ia+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Ia-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Ia-=e.size,b5(e,i=>i(n)&&t.add(i)),Ia+=t.size,e=t)}}}function b5(t,e){t.forEach(n=>{try{e(n)}catch(i){Ye.catch(i)}})}var Yte=Object.defineProperty,Zte=(t,e)=>{for(var n in e)Yte(t,n,{get:e[n],enumerable:!0})},ys={};Zte(ys,{assign:()=>ene,colors:()=>qa,createStringInterpolator:()=>CE,skipAnimation:()=>_5,to:()=>S5,willAdvance:()=>EE});function Jte(){}var Qte=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),xe={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function po(t,e){if(xe.arr(t)){if(!xe.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Fn=(t,e)=>t.forEach(e);function ml(t,e,n){if(xe.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Da=t=>xe.und(t)?[]:xe.arr(t)?t:[t];function x5(t,e){if(t.size){const n=Array.from(t);t.clear(),Fn(n,e)}}var cg=(t,...e)=>x5(t,n=>n(...e)),kE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),CE,S5,qa=null,_5=!1,EE=Jte,ene=t=>{t.to&&(S5=t.to),t.now&&(Ye.now=t.now),t.colors!==void 0&&(qa=t.colors),t.skipAnimation!=null&&(_5=t.skipAnimation),t.createStringInterpolator&&(CE=t.createStringInterpolator),t.requestAnimationFrame&&Ye.use(t.requestAnimationFrame),t.batchedUpdates&&(Ye.batchedUpdates=t.batchedUpdates),t.willAdvance&&(EE=t.willAdvance),t.frameLoop&&(Ye.frameLoop=t.frameLoop)},df=new Set,Er=[],n1=[],Oy=0,ew={get idle(){return!df.size&&!Er.length},start(t){Oy>t.priority?(df.add(t),Ye.onStart(tne)):(k5(t),Ye(b_))},advance:b_,sort(t){if(Oy)Ye.onFrame(()=>ew.sort(t));else{const e=Er.indexOf(t);~e&&(Er.splice(e,1),C5(t))}},clear(){Er=[],df.clear()}};function tne(){df.forEach(k5),df.clear(),Ye(b_)}function k5(t){Er.includes(t)||C5(t)}function C5(t){Er.splice(nne(Er,e=>e.priority>t.priority),0,t)}function b_(t){const e=n1;for(let n=0;n<Er.length;n++){const i=Er[n];Oy=i.priority,i.idle||(EE(i),i.advance(t),i.idle||e.push(i))}return Oy=0,n1=Er,n1.length=0,Er=e,Er.length>0}function nne(t,e){const n=t.findIndex(e);return n<0?t.length:n}var ine=(t,e,n)=>Math.min(Math.max(n,t),e),rne={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},os="[-+]?\\d*\\.?\\d+",Iy=os+"%";function tw(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var sne=new RegExp("rgb"+tw(os,os,os)),one=new RegExp("rgba"+tw(os,os,os,os)),ane=new RegExp("hsl"+tw(os,Iy,Iy)),lne=new RegExp("hsla"+tw(os,Iy,Iy,os)),une=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,cne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,dne=/^#([0-9a-fA-F]{6})$/,hne=/^#([0-9a-fA-F]{8})$/;function fne(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=dne.exec(t))?parseInt(e[1]+"ff",16)>>>0:qa&&qa[t]!==void 0?qa[t]:(e=sne.exec(t))?(Qu(e[1])<<24|Qu(e[2])<<16|Qu(e[3])<<8|255)>>>0:(e=one.exec(t))?(Qu(e[1])<<24|Qu(e[2])<<16|Qu(e[3])<<8|uN(e[4]))>>>0:(e=une.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=hne.exec(t))?parseInt(e[1],16)>>>0:(e=cne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=ane.exec(t))?(aN(lN(e[1]),dg(e[2]),dg(e[3]))|255)>>>0:(e=lne.exec(t))?(aN(lN(e[1]),dg(e[2]),dg(e[3]))|uN(e[4]))>>>0:null}function i1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function aN(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=i1(r,i,t+1/3),o=i1(r,i,t),a=i1(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Qu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function lN(t){return(parseFloat(t)%360+360)%360/360}function uN(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function dg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function cN(t){let e=fne(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var bp=(t,e,n)=>{if(xe.fun(t))return t;if(xe.arr(t))return bp({range:t,output:e,extrapolate:n});if(xe.str(t.output[0]))return CE(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const c=mne(u,s);return pne(u,s[c],s[c+1],r[c],r[c+1],l,o,a,i.map)}};function pne(t,e,n,i,r,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function mne(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var gne=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return ine(0,1,r/t)},Dy=1.70158,hg=Dy*1.525,dN=Dy+1,hN=2*Math.PI/3,fN=2*Math.PI/4.5,fg=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,E5={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>dN*t*t*t-Dy*t*t,easeOutBack:t=>1+dN*Math.pow(t-1,3)+Dy*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((hg+1)*2*t-hg)/2:(Math.pow(2*t-2,2)*((hg+1)*(t*2-2)+hg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*hN),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*hN)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*fN))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*fN)/2+1,easeInBounce:t=>1-fg(1-t),easeOutBounce:fg,easeInOutBounce:t=>t<.5?(1-fg(1-2*t))/2:(1+fg(2*t-1))/2,steps:gne},xp=Symbol.for("FluidValue.get"),Td=Symbol.for("FluidValue.observers"),Cr=t=>!!(t&&t[xp]),Pi=t=>t&&t[xp]?t[xp]():t,pN=t=>t[Td]||null;function vne(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Sp(t,e){const n=t[Td];n&&n.forEach(i=>{vne(i,e)})}var A5=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");yne(this,t)}},yne=(t,e)=>P5(t,xp,e);function nw(t,e){if(t[xp]){let n=t[Td];n||P5(t,Td,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function _p(t,e){const n=t[Td];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Td]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var P5=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),hv=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,wne=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,mN=new RegExp(`(${hv.source})(%|[a-z]+)`,"i"),bne=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,iw=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,T5=t=>{const[e,n]=xne(t);if(!e||kE())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&iw.test(n))return T5(n);if(n)return n}return t},xne=t=>{const e=iw.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},r1,Sne=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,R5=t=>{r1||(r1=qa?new RegExp(`(${Object.keys(qa).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Pi(s).replace(iw,T5).replace(wne,cN).replace(r1,cN)),n=e.map(s=>s.match(hv).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>bp({...t,output:s}));return s=>{var l;const o=!mN.test(e[0])&&((l=e.find(u=>mN.test(u)))==null?void 0:l.replace(hv,""));let a=0;return e[0].replace(hv,()=>`${r[a++](s)}${o||""}`).replace(bne,Sne)}},N5="react-spring: ",M5=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${N5}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},_ne=M5(console.warn);function kne(){_ne(`${N5}The "interpolate" function is deprecated in v9 (use "to" instead)`)}M5(console.warn);function rw(t){return xe.str(t)&&(t[0]=="#"||/\d/.test(t)||!kE()&&iw.test(t)||t in(qa||{}))}var O5=kE()?x.useEffect:x.useLayoutEffect,Cne=()=>{const t=x.useRef(!1);return O5(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Ene(){const t=x.useState()[1],e=Cne();return()=>{e.current&&t(Math.random())}}function Ane(t,e){const[n]=x.useState(()=>({inputs:e,result:t()})),i=x.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Pne(e,s.inputs)||(s={inputs:e,result:t()}):s=n,x.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Pne(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var Tne=t=>x.useEffect(t,Rne),Rne=[],kp=Symbol.for("Animated:node"),Nne=t=>!!t&&t[kp]===t,Rs=t=>t&&t[kp],AE=(t,e)=>Qte(t,kp,e),sw=t=>t&&t[kp]&&t[kp].getPayload(),I5=class{constructor(){AE(this,this)}getPayload(){return this.payload||[]}},rm=class extends I5{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,xe.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new rm(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return xe.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,xe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Cp=class extends rm{constructor(t){super(0),this._string=null,this._toString=bp({output:[t,t]})}static create(t){return new Cp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(xe.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=bp({output:[this.getValue(),t]})),this._value=0,super.reset()}},Ly={dependencies:null},ow=class extends I5{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return ml(this.source,(n,i)=>{Nne(n)?e[i]=n.getValue(t):Cr(n)?e[i]=Pi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Fn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return ml(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Ly.dependencies&&Cr(t)&&Ly.dependencies.add(t);const e=sw(t);e&&Fn(e,n=>this.add(n))}},D5=class extends ow{constructor(t){super(t)}static create(t){return new D5(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(Mne)),!0)}};function Mne(t){return(rw(t)?Cp:rm).create(t)}function x_(t){const e=Rs(t);return e?e.constructor:xe.arr(t)?D5:rw(t)?Cp:rm}var gN=(t,e)=>{const n=!xe.fun(t)||t.prototype&&t.prototype.isReactComponent;return x.forwardRef((i,r)=>{const s=x.useRef(null),o=n&&x.useCallback(p=>{s.current=Dne(r,p)},[r]),[a,l]=Ine(i,e),u=Ene(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&u()},d=new One(c,l),h=x.useRef();O5(()=>(h.current=d,Fn(l,p=>nw(p,d)),()=>{h.current&&(Fn(h.current.deps,p=>_p(p,h.current)),Ye.cancel(h.current.update))})),x.useEffect(c,[]),Tne(()=>()=>{const p=h.current;Fn(p.deps,g=>_p(g,p))});const f=e.getComponentProps(a.getValue());return x.createElement(t,{...f,ref:o})})},One=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ye.write(this.update)}};function Ine(t,e){const n=new Set;return Ly.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new ow(t),Ly.dependencies=null,[t,n]}function Dne(t,e){return t&&(xe.fun(t)?t(e):t.current=e),e}var vN=Symbol.for("AnimatedComponent"),Lne=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new ow(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=yN(o)||"Anonymous";return xe.str(o)?o=s[o]||(s[o]=gN(o,r)):o=o[vN]||(o[vN]=gN(o,r)),o.displayName=`Animated(${a})`,o};return ml(t,(o,a)=>{xe.arr(t)&&(a=yN(o)),s[a]=s(o)}),{animated:s}},yN=t=>xe.str(t)?t:t&&xe.str(t.displayName)?t.displayName:xe.fun(t)&&t.name||null;function Zl(t,...e){return xe.fun(t)?t(...e):t}var hf=(t,e)=>t===!0||!!(e&&t&&(xe.fun(t)?t(e):Da(t).includes(e))),L5=(t,e)=>xe.obj(t)?e&&t[e]:t,jne=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Fne=t=>t,j5=(t,e=Fne)=>{let n=$ne;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);xe.und(s)||(i[r]=s)}return i},$ne=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Bne={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function zne(t){const e={};let n=0;if(ml(t,(i,r)=>{Bne[r]||(e[r]=i,n++)}),n)return e}function F5(t){const e=zne(t);if(e){const n={to:e};return ml(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Ep(t){return t=Pi(t),xe.arr(t)?t.map(Ep):rw(t)?ys.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function S_(t){return xe.fun(t)||xe.arr(t)&&xe.obj(t[0])}var Une={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},__={...Une.default,mass:1,damping:1,easing:E5.linear,clamp:!1},Hne=class{constructor(){this.velocity=0,Object.assign(this,__)}};function Vne(t,e,n){n&&(n={...n},wN(n,e),e={...n,...e}),wN(t,e),Object.assign(t,e);for(const o in __)t[o]==null&&(t[o]=__[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return xe.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function wN(t,e){if(!xe.und(e.decay))t.duration=void 0;else{const n=!xe.und(e.tension)||!xe.und(e.friction);(n||!xe.und(e.frequency)||!xe.und(e.damping)||!xe.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var bN=[],Wne=class{constructor(){this.changed=!1,this.values=bN,this.toValues=null,this.fromValues=bN,this.config=new Hne,this.immediate=!1}};function Gne(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,c=hf(n.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{xe.und(n.pause)||(r.paused=hf(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||hf(p,e)),l=Zl(n.delay||0,e),p?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),l=u.time-Ye.now()}function h(){l>0&&!ys.skipAnimation?(r.delayed=!0,u=Ye.setTimeout(f,l),r.pauseQueue.add(d),r.timeouts.add(u)):f()}function f(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){a(p)}}})}var Kne=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?ff(t.get()):e.every(n=>n.noop)?$5(t.get()):ts(t.get(),e.every(n=>n.finished)),$5=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),ts=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),ff=t=>({value:t,cancelled:!0,finished:!1});function Xne(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=j5(e,(b,v)=>v==="onRest"?void 0:b);let c,d;const h=new Promise((b,v)=>(c=b,d=v)),f=b=>{const v=r<=(n.cancelId||0)&&ff(i)||r!==n.asyncId&&ts(i,!1);if(v)throw b.result=v,d(b),b},p=(b,v)=>{const y=new xN,w=new SN;return(async()=>{if(ys.skipAnimation)throw k_(n),w.result=ts(i,!1),d(w),w;f(y);const _=xe.obj(b)?{...b}:{...v,to:b};_.parentId=r,ml(u,(C,E)=>{xe.und(_[E])&&(_[E]=C)});const k=await i.start(_);return f(y),n.paused&&await new Promise(C=>{n.resumeQueue.add(C)}),k})()};let g;if(ys.skipAnimation)return k_(n),ts(i,!1);try{let b;xe.arr(t)?b=(async v=>{for(const y of v)await p(y)})(t):b=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([b.then(c),h]),g=ts(i.get(),!0,!1)}catch(b){if(b instanceof xN)g=b.result;else if(b instanceof SN)g=b.result;else throw b}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return xe.fun(o)&&Ye.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function k_(t,e){x5(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var xN=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SN=class extends Error{constructor(){super("SkipAnimationSignal")}},C_=t=>t instanceof PE,qne=1,PE=class extends A5{constructor(){super(...arguments),this.id=qne++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Rs(this);return t&&t.getValue()}to(...t){return ys.to(this,t)}interpolate(...t){return kne(),ys.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Sp(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||ew.sort(this),Sp(this,{type:"priority",parent:this,priority:t})}},Du=Symbol.for("SpringPhase"),B5=1,E_=2,A_=4,s1=t=>(t[Du]&B5)>0,ra=t=>(t[Du]&E_)>0,fh=t=>(t[Du]&A_)>0,_N=(t,e)=>e?t[Du]|=E_|B5:t[Du]&=~E_,kN=(t,e)=>e?t[Du]|=A_:t[Du]&=~A_,bt=class extends PE{constructor(t,e){if(super(),this.animation=new Wne,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!xe.und(t)||!xe.und(e)){const n=xe.obj(t)?{...t}:{...e,from:t};xe.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(ra(this)||this._state.asyncTo)||fh(this)}get goal(){return Pi(this.animation.to)}get velocity(){const t=Rs(this);return t instanceof rm?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return s1(this)}get isAnimating(){return ra(this)}get isPaused(){return fh(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=sw(i.to);!o&&Cr(i.to)&&(r=Da(Pi(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==Cp?1:o?o[c].lastPosition:r[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const g=i.fromValues[c],b=u.v0!=null?u.v0:u.v0=xe.arr(s.velocity)?s.velocity[c]:s.velocity;let v;const y=s.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(xe.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,_=Math.exp(-(1-w)*p);f=g+b/(1-w)*(1-_),h=Math.abs(u.lastPosition-f)<=y,v=b*_}else{v=u.lastVelocity==null?b:u.lastVelocity;const w=s.restVelocity||y/10,_=s.clamp?0:s.bounce,k=!xe.und(_),C=g==d?u.v0>0:g<d;let E,P=!1;const N=1,D=Math.ceil(t/N);for(let L=0;L<D&&(E=Math.abs(v)>w,!(!E&&(h=Math.abs(d-f)<=y,h)));++L){k&&(P=f==d||f>d==C,P&&(v=-v*_,f=d));const $=-s.tension*1e-6*(f-d),G=-s.friction*.001*v,z=($+G)/s.mass;v=v+z*N,f=f+v*N}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),f=g+s.easing(w)*(d-g),v=(f-u.lastPosition)/t,h=w==1}u.lastVelocity=v,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const a=Rs(this),l=a.getValue();if(e){const u=Pi(i.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ye.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ra(this)){const{to:t,config:e}=this.animation;Ye.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return xe.und(t)?(n=this.queue||[],this.queue=[]):n=[xe.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>Kne(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),k_(this._state,t&&this._lastCallId),Ye.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=xe.obj(n)?n[e]:n,(n==null||S_(n))&&(n=void 0),i=xe.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return s1(this)||(t.reverse&&([n,i]=[i,n]),i=Pi(i),xe.und(i)?Rs(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,j5(t,(o,a)=>/^on/.test(a)?L5(o,n):o)),EN(this,t,"onProps"),mh(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return Gne(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{fh(this)||(kN(this,!0),cg(s.pauseQueue),mh(this,"onPause",ts(this,ph(this,this.animation.to)),this))},resume:()=>{fh(this)&&(kN(this,!1),ra(this)&&this._resume(),cg(s.resumeQueue),mh(this,"onResume",ts(this,ph(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=Yne(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(ff(this));const i=!xe.und(t.to),r=!xe.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(ff(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;r&&!i&&(!e.default||xe.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!po(d,u);h&&(a.from=d),d=Pi(d);const f=!po(c,l);f&&this._focus(c);const p=S_(e.to),{config:g}=a,{decay:b,velocity:v}=g;(i||r)&&(g.velocity=0),e.config&&!p&&Vne(g,Zl(e.config,s),e.config!==o.config?Zl(o.config,s):void 0);let y=Rs(this);if(!y||xe.und(c))return n(ts(this,!0));const w=xe.und(e.reset)?r&&!e.default:!xe.und(d)&&hf(e.reset,s),_=w?d:this.get(),k=Ep(c),C=xe.num(k)||xe.arr(k)||rw(k),E=!p&&(!C||hf(o.immediate||e.immediate,s));if(f){const L=x_(c);if(L!==y.constructor)if(E)y=this._set(k);else throw Error(`Cannot animate between ${y.constructor.name} and ${L.name}, as the "to" prop suggests`)}const P=y.constructor;let N=Cr(c),D=!1;if(!N){const L=w||!s1(this)&&h;(f||L)&&(D=po(Ep(_),k),N=!D),(!po(a.immediate,E)&&!E||!po(g.decay,b)||!po(g.velocity,v))&&(N=!0)}if(D&&ra(this)&&(a.changed&&!w?N=!0:N||this._stop(l)),!p&&((N||Cr(l))&&(a.values=y.getPayload(),a.toValues=Cr(c)?null:P==Cp?[1]:Da(k)),a.immediate!=E&&(a.immediate=E,!E&&!w&&this._set(l)),N)){const{onRest:L}=a;Fn(Jne,G=>EN(this,e,G));const $=ts(this,ph(this,l));cg(this._pendingCalls,$),this._pendingCalls.add(n),a.changed&&Ye.batchedUpdates(()=>{var G;a.changed=!w,L==null||L($,this),w?Zl(o.onRest,$):(G=a.onStart)==null||G.call(a,$,this)})}w&&this._set(_),p?n(Xne(e.to,e,this._state,this)):N?this._start():ra(this)&&!f?this._pendingCalls.add(n):n($5(_))}_focus(t){const e=this.animation;t!==e.to&&(pN(this)&&this._detach(),e.to=t,pN(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Cr(e)&&(nw(e,this),C_(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Cr(t)&&_p(t,this)}_set(t,e=!0){const n=Pi(t);if(!xe.und(n)){const i=Rs(this);if(!i||!po(n,i.getValue())){const r=x_(n);!i||i.constructor!=r?AE(this,r.create(n)):i.setValue(n),i&&Ye.batchedUpdates(()=>{this._onChange(n,e)})}}return Rs(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,mh(this,"onStart",ts(this,ph(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Zl(this.animation.onChange,t,this)),Zl(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Rs(this).reset(Pi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),ra(this)||(_N(this,!0),fh(this)||this._resume())}_resume(){ys.skipAnimation?this.finish():ew.start(this)}_stop(t,e){if(ra(this)){_N(this,!1);const n=this.animation;Fn(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Sp(this,{type:"idle",parent:this});const i=e?ff(this.get()):ts(this.get(),ph(this,t??n.to));cg(this._pendingCalls,i),n.changed&&(n.changed=!1,mh(this,"onRest",i,this))}}};function ph(t,e){const n=Ep(e),i=Ep(t.get());return po(i,n)}function Yne(t,e=t.loop,n=t.to){const i=Zl(e);if(i){const r=i!==!0&&F5(i),s=(r||t).reverse,o=!r||r.reset;return Zne({...t,loop:e,default:!1,pause:void 0,to:!s||S_(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function Zne(t){const{to:e,from:n}=t=F5(t),i=new Set;return xe.obj(e)&&CN(e,i),xe.obj(n)&&CN(n,i),t.keys=i.size?Array.from(i):null,t}function CN(t,e){ml(t,(n,i)=>n!=null&&e.add(i))}var Jne=["onStart","onRest","onChange","onPause","onResume"];function EN(t,e,n){t.animation[n]=e[n]!==jne(e,n)?L5(e[n],t.key):void 0}function mh(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var TE=({children:t,...e})=>{const n=x.useContext(jy),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=Ane(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=jy;return x.createElement(s,{value:e},t)},jy=Qne(TE,{});TE.Provider=jy.Provider;TE.Consumer=jy.Consumer;function Qne(t,e){return Object.assign(t,x.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var eie=class extends PE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=bp(...e);const n=this._get(),i=x_(n);AE(this,i.create(n))}advance(t){const e=this._get(),n=this.get();po(e,n)||(Rs(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&AN(this._active)&&o1(this)}_get(){const t=xe.arr(this.source)?this.source.map(Pi):Da(Pi(this.source));return this.calc(...t)}_start(){this.idle&&!AN(this._active)&&(this.idle=!1,Fn(sw(this),t=>{t.done=!1}),ys.skipAnimation?(Ye.batchedUpdates(()=>this.advance()),o1(this)):ew.start(this))}_attach(){let t=1;Fn(Da(this.source),e=>{Cr(e)&&nw(e,this),C_(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Fn(Da(this.source),t=>{Cr(t)&&_p(t,this)}),this._active.clear(),o1(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Da(this.source).reduce((e,n)=>Math.max(e,(C_(n)?n.priority:0)+1),0))}};function tie(t){return t.idle!==!1}function AN(t){return!t.size||Array.from(t).every(tie)}function o1(t){t.idle||(t.idle=!0,Fn(sw(t),e=>{e.done=!0}),Sp(t,{type:"idle",parent:t}))}ys.assign({createStringInterpolator:R5,to:(t,e)=>new eie(t,e)});var z5=/^--/;function nie(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!z5.test(t)&&!(pf.hasOwnProperty(t)&&pf[t])?e+"px":(""+e).trim()}var PN={};function iie(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...u}=e,c=Object.values(u),d=Object.keys(u).map(h=>n||t.hasAttribute(h)?h:PN[h]||(PN[h]=h.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));s!==void 0&&(t.textContent=s);for(const h in r)if(r.hasOwnProperty(h)){const f=nie(h,r[h]);z5.test(h)?t.style.setProperty(h,f):t.style[h]=f}d.forEach((h,f)=>{t.setAttribute(h,c[f])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var pf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rie=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),sie=["Webkit","Ms","Moz","O"];pf=Object.keys(pf).reduce((t,e)=>(sie.forEach(n=>t[rie(n,e)]=t[e]),t),pf);var oie=/^(matrix|translate|scale|rotate|skew)/,aie=/^(translate)/,lie=/^(rotate|skew)/,a1=(t,e)=>xe.num(t)&&t!==0?t+e:t,fv=(t,e)=>xe.arr(t)?t.every(n=>fv(n,e)):xe.num(t)?t===e:parseFloat(t)===e,uie=class extends ow{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>a1(a,"px")).join(",")})`,fv(o,0)])),ml(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(oie.test(a)){if(delete i[a],xe.und(o))return;const l=aie.test(a)?"px":lie.test(a)?"deg":"";r.push(Da(o)),s.push(a==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${a1(h,l)})`,fv(h,0)]:u=>[`${a}(${u.map(c=>a1(c,l)).join(",")})`,fv(u,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new cie(r,s)),super(i)}},cie=class extends A5{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Fn(this.inputs,(n,i)=>{const r=Pi(n[0]),[s,o]=this.transforms[i](xe.arr(r)?r:n.map(Pi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Fn(this.inputs,e=>Fn(e,n=>Cr(n)&&nw(n,this)))}observerRemoved(t){t==0&&Fn(this.inputs,e=>Fn(e,n=>Cr(n)&&_p(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Sp(this,t)}},die=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];ys.assign({batchedUpdates:Sl.unstable_batchedUpdates,createStringInterpolator:R5,colors:rne});var hie=Lne(die,{applyAnimatedValues:iie,createAnimatedStyle:t=>new uie(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),gn=hie.animated;const kt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},rt=(t=kt.stone[800])=>({backgroundColor:new bt(t),opacity:new bt(1)}),bn=()=>({strokeDashoffset:new bt(1),opacity:new bt(1)}),RE={bus:{address:{stroke:new bt(kt.stone[700])},data:{stroke:new bt(kt.stone[700])},rd:{stroke:new bt(kt.stone[700])},wr:{stroke:new bt(kt.stone[700])},iom:bn(),mem:{stroke:new bt(kt.red[500])},handshake:bn(),pic:bn(),pio:bn(),timer:bn(),intr:bn(),inta:bn(),int0:bn(),int1:bn(),int2:bn(),"switches->pio":bn(),"pio->leds":bn(),printer:{data:bn(),strobe:bn(),busy:bn()}},clock:{angle:new bt(0)},cpu:{internalBus:{address:{strokeDashoffset:new bt(1),opacity:new bt(1),path:new bt("")},data:{strokeDashoffset:new bt(1),opacity:new bt(1),path:new bt("")}},alu:{operands:bn(),results:bn(),cog:{rot:new bt(0)},operation:{backgroundColor:new bt(kt.stone[800])}},decoder:{path:bn(),progress:{progress:new bt(0),opacity:new bt(1)}},AX:rt(),BX:rt(),CX:rt(),DX:rt(),SP:rt(),IP:rt(),IR:rt(),ri:{...rt(),opacity:new bt(0)},id:{...rt(),opacity:new bt(0)},left:rt(),right:rt(),result:rt(),FLAGS:rt(),MAR:rt(),MBR:rt()},handshake:{DATA:rt(),STATE:rt()},memory:{"operating-cell":{color:new bt(kt.white)}},pic:{IMR:rt(),IRR:rt(),ISR:rt(),INT0:rt(),INT1:rt(),INT2:rt(),INT3:rt(),INT4:rt(),INT5:rt(),INT6:rt(),INT7:rt()},pio:{PA:rt(),PB:rt(),CA:rt(),CB:rt()},printer:{printing:{progress:new bt(0),opacity:new bt(1)}},timer:{CONT:rt(),COMP:rt()}};function Rt(t){return J$(RE,t)}function U5(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof bt?e[n]=i.get():e[n]=U5(i)}return e}const fie=U5(RE);function H5(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof bt?i.set(e[n]):H5(t[n],e[n])}}const pie=()=>H5(RE,fie),Ap=new Set;async function ot(t,e){const n=H.get(wn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=H.sub(wn,()=>{H.get(wn).type!=="paused"&&(o(),s())})}),await ot(t,e);const i=Mi();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:e.duration*i.executionUnit,easing:E5[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;const l=Rt(s);if(a===void 0)return l.set(o);{Ap.add(s);const u=await Rt(s).start({from:o,to:a,config:r});return Ap.delete(s),u}}))}const mie=()=>Ap.forEach(t=>Rt(t).pause()),gie=()=>Ap.forEach(t=>Rt(t).resume());function V5(){Ap.forEach(t=>{const e=Rt(t);e.stop(!0),e.isPaused&&e.resume()}),setTimeout(()=>pie(),10)}async function br(t,e=kt.mantis[400]){return await ot({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function xr(t){return await ot({key:`${t}.backgroundColor`,to:kt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function Rd(t){await ot({key:"bus.data.stroke",to:kt.mantis[400]},{duration:5,easing:"easeOutSine"}),await br("cpu.MBR"),H.set(Ny,t),await xr("cpu.MBR")}async function Lr(t,e){return await ot([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function hi(t){return await ot({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function vie(t){switch(t.type){case"bus:io.selected":{await Promise.all([ot({key:"bus.mem.stroke",to:kt.stone[700]},{duration:1,easing:"easeInSine"}),Lr(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Lu(t.error);return}case"bus:reset":{await Promise.all([ot([{key:"bus.address.stroke",to:kt.stone[700]},{key:"bus.data.stroke",to:kt.stone[700]},{key:"bus.rd.stroke",to:kt.stone[700]},{key:"bus.wr.stroke",to:kt.stone[700]}],{duration:1,easing:"easeInSine"}),ot({key:"bus.mem.stroke",to:kt.red[500]},{duration:1,easing:"easeOutSine"}),hi("bus.iom"),hi("bus.handshake"),hi("bus.pio"),hi("bus.pic"),hi("bus.timer")]);return}default:return t}}async function yie(t){switch(t.type){case"clock:tick":return;default:return t.type}}function wie(t){switch(t){case"SP":return"M 451 309 H 550 V 349 H 698";case"IP":return"M 451 349 H 698";case"ri":return"";default:throw new Error(`Invalid register ${t}`)}}function bie({showSP:t}){const{path:e,...n}=Rt("cpu.internalBus.address"),[i]=x.useState(!1),r=[t?"M 451 309 H 550 V 250":"","M 451 349 H 550 V 250","M 451 349 H 698"];return m.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[r.map((s,o)=>m.jsx("path",{className:`fill-none stroke-bus ${i&&s==="M 444 388 H 575 V 349"?"stroke-mantis-400":"stroke-stone-700"}`,strokeLinejoin:"round",d:s},o)),m.jsx(gn.path,{d:e,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:n})]})}var NE={exports:{}},Qc=typeof Reflect=="object"?Reflect:null,TN=Qc&&typeof Qc.apply=="function"?Qc.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},pv;Qc&&typeof Qc.ownKeys=="function"?pv=Qc.ownKeys:Object.getOwnPropertySymbols?pv=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:pv=function(e){return Object.getOwnPropertyNames(e)};function xie(t){console&&console.warn&&console.warn(t)}var W5=Number.isNaN||function(e){return e!==e};function yt(){yt.init.call(this)}NE.exports=yt;NE.exports.once=Cie;yt.EventEmitter=yt;yt.prototype._events=void 0;yt.prototype._eventsCount=0;yt.prototype._maxListeners=void 0;var RN=10;function aw(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(yt,"defaultMaxListeners",{enumerable:!0,get:function(){return RN},set:function(t){if(typeof t!="number"||t<0||W5(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");RN=t}});yt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};yt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||W5(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function G5(t){return t._maxListeners===void 0?yt.defaultMaxListeners:t._maxListeners}yt.prototype.getMaxListeners=function(){return G5(this)};yt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")TN(l,this,n);else for(var u=l.length,c=Z5(l,u),i=0;i<u;++i)TN(c[i],this,n);return!0};function K5(t,e,n,i){var r,s,o;if(aw(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=G5(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,xie(a)}return t}yt.prototype.addListener=function(e,n){return K5(this,e,n,!1)};yt.prototype.on=yt.prototype.addListener;yt.prototype.prependListener=function(e,n){return K5(this,e,n,!0)};function Sie(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function X5(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=Sie.bind(i);return r.listener=n,i.wrapFn=r,r}yt.prototype.once=function(e,n){return aw(n),this.on(e,X5(this,e,n)),this};yt.prototype.prependOnceListener=function(e,n){return aw(n),this.prependListener(e,X5(this,e,n)),this};yt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(aw(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():_ie(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};yt.prototype.off=yt.prototype.removeListener;yt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function q5(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?kie(r):Z5(r,r.length)}yt.prototype.listeners=function(e){return q5(this,e,!0)};yt.prototype.rawListeners=function(e){return q5(this,e,!1)};yt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Y5.call(t,e)};yt.prototype.listenerCount=Y5;function Y5(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}yt.prototype.eventNames=function(){return this._eventsCount>0?pv(this._events):[]};function Z5(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function _ie(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function kie(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Cie(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}J5(t,e,s,{once:!0}),e!=="error"&&Eie(t,r,{once:!0})})}function Eie(t,e,n){typeof t.on=="function"&&J5(t,"error",e,n)}function J5(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Aie=NE.exports;function io(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(io.prototype[Symbol.iterator]=function(){return this});io.of=function(){var t=arguments,e=t.length,n=0;return new io(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};io.empty=function(){var t=new io(function(){return{done:!0}});return t};io.fromSequence=function(t){var e=0,n=t.length;return new io(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};io.is=function(t){return t instanceof io?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var lw=io;const Ur=$u(lw);var uw={};uw.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";uw.SYMBOL_SUPPORT=typeof Symbol<"u";var Pie=lw,Q5=uw,Tie=Q5.ARRAY_BUFFER_SUPPORT,Rie=Q5.SYMBOL_SUPPORT;function Nie(t){return typeof t=="string"||Array.isArray(t)||Tie&&ArrayBuffer.isView(t)?Pie.fromSequence(t):typeof t!="object"||t===null?null:Rie&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var e4=function(e){var n=Nie(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Mie=e4,Oie=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=Mie(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const t4=$u(Oie);var Iie=lw,Die=e4,Lie=function(){var e=arguments,n=null,i=-1;return new Iie(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=Die(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Do=$u(Lie);function jie(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let pn=jie;typeof Object.assign=="function"&&(pn=Object.assign);function jr(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function $n(t){return typeof t=="object"&&t!==null}function n4(t){let e;for(e in t)return!1;return!0}function pr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Wr(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function NN(t){return!(!$n(t)||t.attributes&&!Array.isArray(t.attributes))}function Fie(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class ME extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class be extends ME{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,be.prototype.constructor)}}class ce extends ME{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ce.prototype.constructor)}}class je extends ME{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,je.prototype.constructor)}}function i4(t,e){this.key=t,this.attributes=e,this.clear()}i4.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function r4(t,e){this.key=t,this.attributes=e,this.clear()}r4.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function s4(t,e){this.key=t,this.attributes=e,this.clear()}s4.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Vd(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}Vd.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};Vd.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};Vd.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};Vd.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const o4=0,a4=1,$ie=2,l4=3;function Jo(t,e,n,i,r,s,o){let a,l,u,c;if(i=""+i,n===o4){if(a=t._nodes.get(i),!a)throw new ce(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,c=s}else if(n===l4){if(r=""+r,l=t._edges.get(r),!l)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(i===d)a=l.target;else if(i===h)a=l.source;else throw new ce(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=s,c=o}else{if(l=t._edges.get(i),!l)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===a4?a=l.source:a=l.target,u=r,c=s}return[a,u,c]}function Bie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Jo(this,e,n,i,r,s);return o.attributes[a]}}function zie(t,e,n){t.prototype[e]=function(i,r){const[s]=Jo(this,e,n,i,r);return s.attributes}}function Uie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Jo(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function Hie(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=Jo(this,e,n,i,r,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Vie(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=Jo(this,e,n,i,r,s,o);if(typeof u!="function")throw new be(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Wie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Jo(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Gie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Jo(this,e,n,i,r,s);if(!$n(a))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Kie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Jo(this,e,n,i,r,s);if(!$n(a))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return pn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function Xie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Jo(this,e,n,i,r,s);if(typeof a!="function")throw new be(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const qie=[{name:t=>`get${t}Attribute`,attacher:Bie},{name:t=>`get${t}Attributes`,attacher:zie},{name:t=>`has${t}Attribute`,attacher:Uie},{name:t=>`set${t}Attribute`,attacher:Hie},{name:t=>`update${t}Attribute`,attacher:Vie},{name:t=>`remove${t}Attribute`,attacher:Wie},{name:t=>`replace${t}Attributes`,attacher:Gie},{name:t=>`merge${t}Attributes`,attacher:Kie},{name:t=>`update${t}Attributes`,attacher:Xie}];function Yie(t){qie.forEach(function({name:e,attacher:n}){n(t,e("Node"),o4),n(t,e("Source"),a4),n(t,e("Target"),$ie),n(t,e("Opposite"),l4)})}function Zie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function Jie(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=jr(this,s,o,n),!r)throw new ce(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function Qie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function ere(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=jr(this,a,l,n),!o)throw new ce(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function tre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=jr(this,a,l,n),!o)throw new ce(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new be(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function nre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function ire(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!$n(r))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function rre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!$n(r))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return pn(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function sre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new be(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const ore=[{name:t=>`get${t}Attribute`,attacher:Zie},{name:t=>`get${t}Attributes`,attacher:Jie},{name:t=>`has${t}Attribute`,attacher:Qie},{name:t=>`set${t}Attribute`,attacher:ere},{name:t=>`update${t}Attribute`,attacher:tre},{name:t=>`remove${t}Attribute`,attacher:nre},{name:t=>`replace${t}Attributes`,attacher:ire},{name:t=>`merge${t}Attributes`,attacher:rre},{name:t=>`update${t}Attributes`,attacher:sre}];function are(t){ore.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const lre=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function ure(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function cre(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function l1(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Ur(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function dre(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function hre(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function u1(t,e){let n=t[e];return n.next!==void 0?new Ur(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Ur.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function fre(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):t4(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function u4(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=a;if(l=i(c,d,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return c}}function pre(t,e){if(t.size===0)return Ur.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Ur(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function OE(t,e,n,i,r,s){const o=e?cre:ure;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function mre(t,e,n,i){const r=[];return OE(!1,t,e,n,i,function(s){r.push(s)}),r}function gre(t,e,n){let i=Ur.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Do(i,l1(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Do(i,l1(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Do(i,l1(n.undirected))),i}function IE(t,e,n,i,r,s,o){const a=n?hre:dre;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function vre(t,e,n,i,r){const s=[];return IE(!1,t,e,n,i,r,function(o){s.push(o)}),s}function yre(t,e,n,i){let r=Ur.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Do(r,u1(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Do(r,u1(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Do(r,u1(n.undirected,i))),r}function wre(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return fre(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ce(`Graph.${n}: could not find the "${s}" node in the graph.`);return mre(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ce(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ce(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return vre(i,this.multi,r,a,o)}throw new be(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function bre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,u4(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new ce(`Graph.${s}: could not find the "${u}" node in the graph.`);return OE(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new ce(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new ce(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return IE(!1,i,this.multi,r,h,c,d)}throw new be(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,g,b,v,y,w,_)=>{d[f++]=c(p,g,b,v,y,w,_)})}else d=[],u.push((h,f,p,g,b,v,y)=>{d.push(c(h,f,p,g,b,v,y))});return this[s].apply(this,u),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,g,b,v,y)=>{c(h,f,p,g,b,v,y)&&d.push(h)}),this[s].apply(this,u),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new be(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new be(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,g,b,v,y,w)=>{h=c(h,f,p,g,b,v,y,w)}),this[s].apply(this,u),h}}function xre(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=l,u4(!0,this,i,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new ce(`Graph.${s}: could not find the "${l}" node in the graph.`);return OE(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new ce(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new ce(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return IE(!0,i,this.multi,r,d,u,c)}throw new be(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,g,b,v)=>u(d,h,f,p,g,b,v)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,g,b,v)=>!u(d,h,f,p,g,b,v)),!this[s].apply(this,l)}}function Sre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Ur.empty();if(!arguments.length)return pre(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ce(`Graph.${s}: could not find the "${o}" node in the graph.`);return gre(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ce(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ce(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return yre(i,r,l,a)}throw new be(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function _re(t){lre.forEach(e=>{wre(t,e),bre(t,e),xre(t,e),Sre(t,e)})}const kre=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function cw(){this.A=null,this.B=null}cw.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};cw.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function gh(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const c=r(u.key,u.attributes);if(t&&c)return u.key}}function DE(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return gh(t,null,i,i.undirected,r);if(typeof n=="string")return gh(t,null,i,i[n],r)}const s=new cw;let o;if(e!=="undirected"){if(n!=="out"){if(o=gh(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=gh(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=gh(t,s,i,i.undirected,r),t&&o))return o}function Cre(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return DE(!1,t,e,n,function(r){i.push(r)}),i}function vh(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Ur(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],u=l.source,c=l.target;if(a=u===e?c:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function Ere(t,e,n){if(t!=="mixed"){if(t==="undirected")return vh(null,n,n.undirected);if(typeof e=="string")return vh(null,n,n[e])}let i=Ur.empty();const r=new cw;return t!=="undirected"&&(e!=="out"&&(i=Do(i,vh(r,n,n.in))),e!=="in"&&(i=Do(i,vh(r,n,n.out)))),t!=="directed"&&(i=Do(i,vh(r,n,n.undirected))),i}function Are(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ce(`Graph.${n}: could not find the "${s}" node in the graph.`);return Cre(i==="mixed"?this.type:i,r,o)}}function Pre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new ce(`Graph.${s}: could not find the "${u}" node in the graph.`);DE(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,d){if(arguments.length<3)throw new be(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function Tre(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new ce(`Graph.${o}: could not find the "${u}" node in the graph.`);return DE(!0,i==="mixed"?this.type:i,r,d,c)};const a="some"+s;t.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;t.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function Rre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Ur.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ce(`Graph.${s}: could not find the "${o}" node in the graph.`);return Ere(i==="mixed"?this.type:i,r,a)}}function Nre(t){kre.forEach(e=>{Are(t,e),Pre(t,e),Tre(t,e),Rre(t,e)})}function pg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,u,c,d,h;for(;a=s.next(),a.done!==!0;){let f=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do h=d.target,f=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do h=d.target,h.key!==u&&(h=d.source),f=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!f&&r(l.key,null,l.attributes,null,null,null,null)}}function Mre(t,e){const n={key:t};return n4(e.attributes)||(n.attributes=pn({},e.attributes)),n}function Ore(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return n4(n.attributes)||(i.attributes=pn({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function Ire(t){if(!$n(t))throw new be('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new be("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!$n(t.attributes)||t.attributes===null))throw new be("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Dre(t){if(!$n(t))throw new be('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new be("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new be("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!$n(t.attributes)||t.attributes===null))throw new be("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new be("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Lre=Fie(),jre=new Set(["directed","undirected","mixed"]),MN=new Set(["domain","_events","_eventsCount","_maxListeners"]),Fre=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],$re={allowSelfLoops:!0,multi:!1,type:"mixed"};function Bre(t,e,n){if(n&&!$n(n))throw new be(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new je(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function ON(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function c4(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new je(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new je(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!$n(a))throw new be(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new je(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),u=t._nodes.get(o);if(!l)throw new ce(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new ce(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new je(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new je(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Vd(i,r,l,u,a);t._edges.set(r,d);const h=s===o;return i?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,c.key=r,t.emit("edgeAdded",c),r}function zre(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new je(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new je(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new be(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!$n(a))throw new be(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&s===o)throw new je(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new je(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const y=[f.key,!1,!1,!1];if(l?!u:!a)return y;if(l){const w=f.attributes;f.attributes=u(w),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else pn(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return y}a=a||{},l&&u&&(a=u(a));const p={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new je(`Graph.${e}: the "${r}" edge already exists in the graph.`);let g=!1,b=!1;c||(c=ON(t,s,{}),g=!0,s===o&&(d=c,b=!0)),d||(d=ON(t,o,{}),b=!0),h=new Vd(i,r,c,d,a),t._edges.set(r,h);const v=s===o;return i?(c.undirectedDegree++,d.undirectedDegree++,v&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,v&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,g,b]}function ec(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Et extends Aie.EventEmitter{constructor(e){if(super(),e=pn({},$re,e),typeof e.multi!="boolean")throw new be(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!jre.has(e.type))throw new be(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new be(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?i4:e.type==="directed"?r4:s4;pr(this,"NodeDataClass",n);const i="geid_"+Lre()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};pr(this,"_attributes",{}),pr(this,"_nodes",new Map),pr(this,"_edges",new Map),pr(this,"_directedSize",0),pr(this,"_undirectedSize",0),pr(this,"_directedSelfLoopCount",0),pr(this,"_undirectedSelfLoopCount",0),pr(this,"_edgeKeyGenerator",s),pr(this,"_options",e),MN.forEach(o=>pr(this,o,this[o])),Wr(this,"order",()=>this._nodes.size),Wr(this,"size",()=>this._edges.size),Wr(this,"directedSize",()=>this._directedSize),Wr(this,"undirectedSize",()=>this._undirectedSize),Wr(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Wr(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Wr(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Wr(this,"multi",this._options.multi),Wr(this,"type",this._options.type),Wr(this,"allowSelfLoops",this._options.allowSelfLoops),Wr(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new be(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new be(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new be(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new je("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ce(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new je("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ce(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new je("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new ce(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new ce(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new ce(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Bre(this,e,n).key}mergeNode(e,n){if(n&&!$n(n))throw new be(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(pn(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new be(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do ec(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do ec(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do ec(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=jr(this,i,r,this.type),!n)throw new ce(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ce(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return ec(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new je("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new je("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=jr(this,e,n,"directed");if(!i)throw new ce(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return ec(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new je("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new je("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=jr(this,e,n,"undirected");if(!i)throw new ce(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return ec(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new be("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!$n(e))throw new be("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!$n(e))throw new be("Graph.mergeAttributes: provided attributes are not a plain object.");return pn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new be("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new be("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!NN(n))throw new be("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new be("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!NN(n))throw new be("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new be("Graph.forEachAdjacencyEntry: expecting a callback.");pg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new be("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");pg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new be("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");pg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new be("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");pg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):t4(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new be("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new be("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new be("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new be("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new be("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new be("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new be("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new be("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Ur(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=Mre(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=Ore(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Et)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):p?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!$n(e))throw new be("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!$n(e.attributes))throw new be("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new be("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],Ire(o);const{key:l,attributes:u}=o;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new be("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],Dre(a);const{source:u,target:c,attributes:d,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new Et(pn({},this._options,e));return n.replaceAttributes(pn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=pn({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new je(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new je("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new je("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,c4(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,pn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!MN.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,pr(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Et.prototype[Symbol.for("nodejs.util.inspect.custom")]=Et.prototype.inspect);Fre.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?c4:zre;t.generateKey?Et.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Et.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});Yie(Et);are(Et);_re(Et);Nre(Et);class d4 extends Et{constructor(e){const n=pn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new be("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new be('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class LE extends Et{constructor(e){const n=pn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new be("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new be('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class h4 extends Et{constructor(e){const n=pn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new be("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class f4 extends Et{constructor(e){const n=pn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new be("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new be('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class p4 extends Et{constructor(e){const n=pn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new be("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new be('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Wd(t){t.from=function(e,n){const i=pn({},e.options,n),r=new t(i);return r.import(e),r}}Wd(Et);Wd(d4);Wd(LE);Wd(h4);Wd(f4);Wd(p4);Et.Graph=Et;Et.DirectedGraph=d4;Et.UndirectedGraph=LE;Et.MultiGraph=h4;Et.MultiDirectedGraph=f4;Et.MultiUndirectedGraph=p4;Et.InvalidArgumentsGraphError=be;Et.NotFoundGraphError=ce;Et.UsageGraphError=je;var Ure=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},m4=uw,Hre=m4.ARRAY_BUFFER_SUPPORT,Vre=m4.SYMBOL_SUPPORT,Wre=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Hre&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(Vre&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},g4=lw,Gre=Wre;function ln(){this.clear()}ln.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};ln.prototype.enqueue=function(t){return this.items.push(t),++this.size};ln.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};ln.prototype.peek=function(){if(this.size)return this.items[this.offset]};ln.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};ln.prototype.toArray=function(){return this.items.slice(this.offset)};ln.prototype.values=function(){var t=this.items,e=this.offset;return new g4(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};ln.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new g4(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(ln.prototype[Symbol.iterator]=ln.prototype.values);ln.prototype.toString=function(){return this.toArray().join(",")};ln.prototype.toJSON=function(){return this.toArray()};ln.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:ln,enumerable:!1}),t};typeof Symbol<"u"&&(ln.prototype[Symbol.for("nodejs.util.inspect.custom")]=ln.prototype.inspect);ln.from=function(t){var e=new ln;return Gre(t,function(n){e.enqueue(n)}),e};ln.of=function(){return ln.from(arguments)};var Kre=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},v4=Ure,Xre=Kre;function qre(t,e,n){if(!v4(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],u,c,d,h,f,p,g,b,v=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(u=a,a=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=r(c),p=0,b=d.length;p<b;p++)if(h=d[p],h in s||(a.push(h),s[h]=c),h in o){v=!0;break e}}else for(u=l,l=[],f=0,g=u.length;f<g;f++)for(c=u[f],d=i(c),p=0,b=d.length;p<b;p++)if(h=d[p],h in o||(l.push(h),o[h]=c),h in s){v=!0;break e}if(!v)return null;for(var y=[];h;)y.unshift(h),h=s[h];for(h=o[y[y.length-1]];h;)y.push(h),h=o[h];return y.length?y:null}function y4(t,e,n){if(!v4(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,u;o.length!==0;){var c=[];for(a=0,l=o.length;a<l;a++)u=o[a],!i.has(u)&&(i.add(u),Xre(c,e[t](u)),r[u]=s);s++,o=c}return r}y4.bind(null,"outboundNeighbors");y4.bind(null,"neighbors");var Yre=qre;const Y=new LE({allowSelfLoops:!1});Y.addNode("MBR",{position:[620,250]});Y.addNode("AX",{position:[451,45]});Y.addNode("BX",{position:[451,85]});Y.addNode("CX",{position:[451,125]});Y.addNode("DX",{position:[451,165]});Y.addNode("id",{position:[451,205]});Y.addNode("SP",{position:[451,309]});Y.addNode("IP",{position:[451,349]});Y.addNode("ri",{position:[451,388]});Y.addNode("MAR",{position:[698,349]});Y.addNode("result",{position:[272,115]});Y.addNode("ALUresult",{position:[370,115]});Y.addNode("FLAGS",{position:[250,225]});Y.addNode("IR",{position:[205,272]});Y.addNode("left",{position:[130,85]});Y.addNode("right",{position:[125,145]});Y.addNode("rmbr",{position:[250,390]});Y.addNode("bleft1",{position:[550,16]});Y.addNode("bleft2",{position:[90,16]});Y.addNode("bleft3",{position:[90,85]});Y.addNode("AX join",{position:[421,45]});Y.addNode("BX join",{position:[421,85]});Y.addNode("CX join",{position:[421,125]});Y.addNode("DX join",{position:[421,165]});Y.addNode("id join",{position:[421,205]});Y.addNode("data mbr join",{position:[421,250]});Y.addNode("SP join",{position:[421,309]});Y.addNode("IP join",{position:[421,349]});Y.addNode("ri join",{position:[421,388]});Y.addNode("MAR join1",{position:[550,388]});Y.addNode("MAR join2",{position:[550,349]});Y.addNode("addresses mbr join",{position:[421,250]});Y.addNode("result mbr join",{position:[370,250]});Y.addNode("FLAGS mbr join",{position:[250,250]});Y.addNode("IR mbr join",{position:[205,250]});Y.addNode("left join",{position:[30,85]});Y.addNode("right join",{position:[90,145]});Y.addNode("operands mbr join",{position:[90,250]});Y.addNode("outr mbr join",{position:[550,250]});Y.addNode("mbr reg join",{position:[421,250]});Y.addNode("AX out",{position:[510,45]});Y.addNode("BX out",{position:[510,85]});Y.addNode("CX out",{position:[510,125]});Y.addNode("DX out",{position:[510,165]});Y.addNode("id out",{position:[510,205]});Y.addNode("SP out",{position:[510,309]});Y.addNode("IP out",{position:[510,349]});Y.addNode("AX out join",{position:[550,45]});Y.addNode("BX out join",{position:[550,85]});Y.addNode("CX out join",{position:[550,125]});Y.addNode("DX out join",{position:[550,165]});Y.addNode("id out join",{position:[550,205]});Y.addNode("SP out join",{position:[550,309]});Y.addNode("IP out join",{position:[550,349]});Y.addUndirectedEdge("AX","AX out");Y.addUndirectedEdge("BX","BX out");Y.addUndirectedEdge("CX","CX out");Y.addUndirectedEdge("DX","DX out");Y.addUndirectedEdge("id","id out");Y.addUndirectedEdge("IP","IP out");Y.addUndirectedEdge("SP","SP out");Y.addUndirectedEdge("AX out","AX out join");Y.addUndirectedEdge("BX out","BX out join");Y.addUndirectedEdge("CX out","CX out join");Y.addUndirectedEdge("DX out","DX out join");Y.addUndirectedEdge("id out","id out join");Y.addUndirectedEdge("AX out join","outr mbr join");Y.addUndirectedEdge("BX out join","outr mbr join");Y.addUndirectedEdge("CX out join","outr mbr join");Y.addUndirectedEdge("DX out join","outr mbr join");Y.addUndirectedEdge("id out join","outr mbr join");Y.addUndirectedEdge("AX out join","bleft1");Y.addUndirectedEdge("BX out join","bleft1");Y.addUndirectedEdge("CX out join","bleft1");Y.addUndirectedEdge("DX out join","bleft1");Y.addUndirectedEdge("id out join","bleft1");Y.addUndirectedEdge("bleft1","bleft2");Y.addUndirectedEdge("bleft2","bleft3");Y.addUndirectedEdge("bleft3","left");Y.addUndirectedEdge("IP out join","outr mbr join");Y.addUndirectedEdge("SP out join","outr mbr join");Y.addUndirectedEdge("SP out join","MAR join2");Y.addUndirectedEdge("outr mbr join","mbr reg join");Y.addUndirectedEdge("MBR","outr mbr join");Y.addUndirectedEdge("mbr reg join","AX join");Y.addUndirectedEdge("mbr reg join","BX join");Y.addUndirectedEdge("mbr reg join","CX join");Y.addUndirectedEdge("mbr reg join","DX join");Y.addUndirectedEdge("mbr reg join","id join");Y.addUndirectedEdge("outr mbr join","operands mbr join");Y.addUndirectedEdge("AX join","AX");Y.addUndirectedEdge("BX join","BX");Y.addUndirectedEdge("CX join","CX");Y.addUndirectedEdge("DX join","DX");Y.addUndirectedEdge("id join","data mbr join");Y.addUndirectedEdge("MBR","data mbr join");Y.addUndirectedEdge("IP","IP join");Y.addUndirectedEdge("SP","SP join");Y.addUndirectedEdge("ri","ri join");Y.addUndirectedEdge("MAR join1","ri");Y.addUndirectedEdge("MAR join2","MAR join1");Y.addUndirectedEdge("MAR","MAR join2");Y.addUndirectedEdge("IP join","SP join");Y.addUndirectedEdge("SP join","ri join");Y.addUndirectedEdge("IP join","addresses mbr join");Y.addUndirectedEdge("addresses mbr join","data mbr join");Y.addUndirectedEdge("result","ALUresult");Y.addUndirectedEdge("ALUresult","result mbr join");Y.addUndirectedEdge("result mbr join","addresses mbr join");Y.addUndirectedEdge("FLAGS","FLAGS mbr join");Y.addUndirectedEdge("FLAGS mbr join","result mbr join");Y.addUndirectedEdge("IR","IR mbr join");Y.addUndirectedEdge("IR mbr join","FLAGS mbr join");Y.addUndirectedEdge("left","left join");Y.addUndirectedEdge("right","right join");Y.addUndirectedEdge("left join","right join");Y.addUndirectedEdge("right join","operands mbr join");function Zre(t,e,n,i){console.log("from:",t),console.log("to:",e);const r=(u,c)=>c==="left"?[u,"bleft1","bleft2","bleft3","left",`${u} out`,`${u} out join`,"outr mbr join","mbr reg join",`${c} join`,c]:[u,`${u} out`,`${u} out join`,"outr mbr join","mbr reg join",`${c} join`,c];let s=[];const o=["AX","BX","CX","DX","id"];if(t==="MBR"&&e==="ri"?s=["MBR","outr mbr join","SP out join","MAR join2","MAR"]:t==="MBR"&&o.includes(e)?s=["MBR","mbr reg join",`${e} join`,e]:o.includes(t)&&o.includes(e)?s=r(t,e):t==="IP"&&e==="id"?s=["IP out","IP out join","outr mbr join","mbr reg join","id join","id"]:t==="id"&&e==="ri"?s=["id out","id out join","outr mbr join","MAR join2","MAR"]:t==="BX"&&e==="ri"?s=["BX out","BX out join","outr mbr join","MAR join2","MAR"]:t==="id"&&e==="MBR"?s=["id out","id out join","outr mbr join","MBR"]:t==="id"&&e==="IP"&&n==="RET"?s=["MBR","mbr reg join","IP join","IP"]:s=Yre(Y,t,e)||[],t==="ri"&&e==="IP"&&(s=["MBR","mbr reg join","IP join","IP"]),t==="MBR"&&e==="ri"&&["JMP","JZ","JC","CALL"].includes(n??""))return"";if(s.length===0)throw new Error(`No path from ${t} to ${e}`);const a=Y.getNodeAttribute(s[0],"position");console.log("start:",a);let l=`M ${a[0]} ${a[1]}`;for(let u=1;u<s.length;u++){const[c,d]=Y.getNodeAttribute(s[u],"position");l+=` L ${c} ${d}`}return l}function Jre({showSP:t,showid:e}){const{path:n,...i}=Rt("cpu.internalBus.data");return m.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[m.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 370 V 250","M 250 225 V 250","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 430 349 H 421","V 250","M 451 349 H 421",t?"M 451 309 H 421":"M 451 309","M 451 45 H 421","V 250","M 451 85 H 421","M 451 125 H 421","M 451 165 H 421",e?"M 451 205 H 421":"","M 550 45 H 520","M 550 85 H 510","M 550 125 H 510","M 550 165 H 510",e?"M 550 205 H 510":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220"].join(" ")}),m.jsx(gn.path,{d:n,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}const c1=(t,e,n,i)=>{const r=Zre(t,e,n);return ot([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},d1=()=>ot({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});let mg="";async function Qre(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await ot([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),H.set(m5,t.operation),await Promise.all([ot({key:"cpu.alu.operation.backgroundColor",to:kt.mantis[400]},{duration:1,easing:"easeOutQuart"}),ot({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([ot({key:"cpu.alu.operation.backgroundColor",to:kt.stone[800]},{duration:1,easing:"easeOutQuart"}),ot([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([br("cpu.result"),br("cpu.FLAGS")]),H.set(qe.FLAGS,t.flags),H.set(qe.result,t.result),await Promise.all([xr("cpu.result"),xr("cpu.FLAGS")]),await ot([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{H.set(Ts,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await ot([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{mg=t.instruction.name,t.instruction.willUse.id,c5(t.instruction.position.start),H.set(Ts,{phase:"fetching",metadata:t.instruction}),await ot([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?.4:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{H.set(Ts,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await ot([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await ot([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await ot([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{H.set(Ts,{phase:"stopped",error:t.error}),Lu(t.error);return}case"cpu:halt":case"cpu:int.0":{H.set(Ts,{phase:"stopped"}),Lu();return}case"cpu:int.3":{Rn();return}case"cpu:int.6":{H.set(Ts,{phase:"int6"});return}case"cpu:int.7":{H.set(Ts,{phase:"int7"});return}case"cpu:inta.off":{await hi("bus.inta");return}case"cpu:inta.on":{await Lr("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await ot({key:"bus.address.stroke",to:kt.blue[500]},{duration:5,easing:"easeInOutSine"}),await ot({key:`bus.${e}.stroke`,to:kt.red[500]},{duration:5,easing:"easeOutSine"}),await ot({key:"bus.data.stroke",to:kt.mantis[400]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await Lr("bus.iom",15);return}case"cpu:mar.set":{await ot([{key:"cpu.internalBus.address.path",from:wie(t.register)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await br("cpu.MAR",kt.blue[500]),H.set(h5,H.get(qe[t.register])),await Promise.all([xr("cpu.MAR"),ot({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=Yl(t.register);await c1("MBR",e,mg),await br(`cpu.${e}`),H.set(qe[t.register],H.get(Ny)),await Promise.all([xr(`cpu.${e}`),d1()]);return}case"cpu:mbr.set":{const[e]=Yl(t.register);await c1(e,"MBR",mg),await br("cpu.MBR"),H.set(Ny,H.get(qe[t.register])),await Promise.all([xr("cpu.MBR"),d1()]);return}case"cpu:register.copy":{const[e]=Yl(t.src),[n]=Yl(t.dest);e!==n&&await c1(e,n,mg),await br(`cpu.${n}`),H.set(qe[t.dest],H.get(qe[t.src])),await Promise.all([xr(`cpu.${n}`),e!==n&&d1()]);return}case"cpu:register.update":{const[e]=Yl(t.register);await br(`cpu.${e}`),H.set(qe[t.register],t.value),await xr(`cpu.${e}`);return}default:return t}}async function ese(t){switch(t.type){case"f10:press":await Lr("bus.int0",2),await hi("bus.int0");return;default:return t.type}}const jE=ve(j.zero(8)),FE=ve(j.zero(8));function tse(t){t.io.handshake&&(H.set(jE,j.fromUnsigned(t.io.handshake.DATA,8)),H.set(FE,j.fromUnsigned(t.io.handshake.STATE,8)))}async function nse(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await Rd(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await br(`handshake.${t.register}`),t.register){case"DATA":{H.set(jE,t.value);break}case"STATE":{H.set(FE,t.value);break}default:return t.register}await xr(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await hi("bus.int2");return}case"handshake:int.on":{await Lr("bus.int2",10);return}default:return t}}async function ise(t){switch(t.type){case"keyboard:listen-key":{H.set(wn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{H.sub(wn,()=>{const n=H.get(wn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const $E=ve(j.zero(8));function rse(t){t.io.leds!==null&&H.set($E,j.fromUnsigned(t.io.leds,8))}async function sse(t){switch(t.type){case"leds:update":{await Lr("bus.pio->leds",2),H.set($E,t.state),await hi("bus.pio->leds");return}default:return t.type}}async function ose(t){switch(t.type){case"memory:read":return;case"memory:read.ok":{H.set(wp,Pe.from(t.address)),await ot({key:"memory.operating-cell.color",to:kt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await Rd(t.value),await ot({key:"memory.operating-cell.color",to:kt.white},{duration:1,easing:"easeOutQuart"});return}case"memory:write":return;case"memory:write.ok":{H.set(wp,Pe.from(t.address)),await ot({key:"memory.operating-cell.color",to:kt.mantis[400]},{duration:1,easing:"easeOutQuart"}),H.set(Ry,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await ot({key:"memory.operating-cell.color",to:kt.white},{duration:1,easing:"easeOutQuart"});return}case"memory:read.error":case"memory:write.error":{Lu(t.error);return}default:return t}}const BE=ve(j.fromUnsigned(255,8)),zE=ve(j.fromUnsigned(0,8)),UE=ve(j.fromUnsigned(0,8)),Fy=[ve(j.zero(8)),ve(j.zero(8)),ve(j.zero(8)),ve(j.zero(8)),ve(j.zero(8)),ve(j.zero(8)),ve(j.zero(8)),ve(j.zero(8))];function ase(t){if(t.io.pic){H.set(BE,j.fromUnsigned(t.io.pic.IMR,8)),H.set(zE,j.fromUnsigned(t.io.pic.IRR,8)),H.set(UE,j.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<Fy.length;e++)H.set(Fy[e],j.fromUnsigned(t.io.pic.lines[e],8))}}async function lse(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await Rd(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await br(`pic.${t.register}`),t.register){case"IMR":{H.set(BE,t.value);break}case"IRR":{H.set(zE,t.value);break}case"ISR":{H.set(UE,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));H.set(Fy[e],t.value);break}default:return t}await xr(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await hi("bus.intr");return}case"pic:intr.on":{await Lr("bus.intr",10);return}case"pic:int.send":{await Rd(t.number);return}default:return t}}const HE=ve(j.zero(8)),VE=ve(j.zero(8)),WE=ve(j.zero(8)),GE=ve(j.zero(8));function use(t){t.io.pio&&(H.set(HE,j.fromUnsigned(t.io.pio.PA,8)),H.set(VE,j.fromUnsigned(t.io.pio.PB,8)),H.set(WE,j.fromUnsigned(t.io.pio.CA,8)),H.set(GE,j.fromUnsigned(t.io.pio.CB,8)))}async function cse(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await Rd(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await br(`pio.${t.register}`),t.register){case"PA":{H.set(HE,t.value);break}case"PB":{H.set(VE,t.value);break}case"CA":{H.set(WE,t.value);break}case"CB":{H.set(GE,t.value);break}default:return t.register}await xr(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const $y=ve([]),By=ve("");function dse(t){t.io.printer&&(H.set($y,t.io.printer.buffer.map(e=>j.fromUnsigned(e,8))),H.set(By,t.io.printer.paper))}async function hse(t){switch(t.type){case"printer:buffer.add":{H.set($y,e=>[...e,t.char]);return}case"printer:buffer.pop":{H.set($y,e=>e.slice(1));return}case"printer:busy.off":{await hi("bus.printer.busy");return}case"printer:busy.on":{await Lr("bus.printer.busy",15);return}case"printer:data.read":{await Lr("bus.printer.data",15),await hi("bus.printer.data");return}case"printer:paper.print":{H.set(By,e=>e+t.char);return}case"printer:paper.replace":{H.set(By,"");return}case"printer:strobe.off":{await hi("bus.printer.strobe");return}case"printer:strobe.on":{await Lr("bus.printer.strobe",15);return}default:return t}}const KE=ve("");function fse(t){"screen"in t.io&&t.io.screen!==null&&H.set(KE,t.io.screen)}async function pse(t){switch(t.type){case"screen:send-char":{H.set(KE,t.output);return}default:return t.type}}const XE=ve(j.zero(8));function mse(t){t.io.switches!==null&&H.set(XE,j.fromUnsigned(t.io.switches,8))}async function gse(t){switch(t.type){case"switches:toggle":{H.set(XE,e=>e.withBit(t.index,!e.bit(t.index))),await Lr("bus.switches->pio",2),await hi("bus.switches->pio");return}default:return t.type}}const qE=ve(j.zero(8)),YE=ve(j.zero(8));function vse(t){t.io.timer&&(H.set(qE,j.fromUnsigned(t.io.timer.CONT,8)),H.set(YE,j.fromUnsigned(t.io.timer.COMP,8)))}async function yse(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await Rd(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await br(`timer.${t.register}`),t.register){case"CONT":{H.set(qE,t.value);break}case"COMP":{H.set(YE,t.value);break}default:return t.register}await xr(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await hi("bus.int1");return}case"timer:int.on":{await Lr("bus.int1",10);return}default:return t}}const P_=new Set;async function wse(t){xse(t);const[e]=t.type.split(":",2);switch(P_.add(t.type),e){case"bus":{await vie(t);break}case"clock":{await yie(t);break}case"cpu":{await Qre(t);break}case"f10":{await ese(t);break}case"handshake":{await nse(t);break}case"keyboard":{await ise(t);break}case"leds":{await sse(t);break}case"memory":{await ose(t);break}case"pic":{await lse(t);break}case"pio":{await cse(t);break}case"printer":{await hse(t);break}case"screen":{await pse(t);break}case"switches":{await gse(t);break}case"timer":{await yse(t);break}default:return e}P_.delete(t.type)}function IN(...t){for(const e of t)if(P_.has(e))return!0;return!1}const bse={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function xse(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${bse[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof j?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Pe?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof lr?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}ve(!1);const Nn=new Bte,wn=ve({type:"stopped"});function Sse(t){const e=t.translate(Mi().language);Yi({title:e,variant:"error"})}function Lu(t){if(t&&(Sse(t),t.code==="no-instruction")){H.set(wn,{type:"paused"});return}c5(null),Vte(!1),H.set(wn,{type:"stopped",error:t}),H.set(Ts,{phase:"stopped",error:t}),V5()}function Rn(){H.set(wn,{type:"paused"}),mie()}function _se(){Yi({title:U0(Mi().language,"messages.assemble-error"),variant:"error"})}function tc(){Yi({title:U0(Mi().language,"messages.invalid-action"),variant:"error"})}function DN(t,e=!1){Xte(t,e),Hte(t,e),tse(t),ase(t),use(t),vse(t),rse(t),dse(t),fse(t),mse(t),_n=0,mu=0,H.set(Iu,_n),H.set(J0,mu),H.set(Ft,""),e&&H.set(My,[])}let ze=null,$l=0,_s=0,ao="",nc=!0,_n=0,mu=0,h1="";async function Jl(t){try{for(;;){const e=H.get(wn),n=Mi();if(H.get(ky)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),H.set(ky,!1),Lu();break}if(e.type==="stopped"){$l=0,_s=0,ao="";break}if(e.type==="paused"){await new Promise(o=>{const a=H.sub(wn,()=>{a(),o()})});continue}const r=t.next();if(r.done)break;if(await wse(r.value),r.value.type==="cpu:cycle.start"&&(ze=r.value.instruction.name),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(r.value.type==="cpu:cycle.end"||r.value.type==="cpu:halt"){$l=0,_s=0,nc=!0,ao="",mu++,console.log(`Instrucciones: ${mu}`),H.set(J0,mu),r.value.type==="cpu:halt"?(_n++,H.set(Iu,_n),H.set(Ft,"Ejecución: Detenido")):(e.until==="cycle-change"||e.until==="end-of-instruction")&&Rn();continue}else r.value.type==="cpu:int.6"?H.set(Ft,"Interrupción: Rutina leer caracter del teclado"):r.value.type==="cpu:int.7"&&(H.set(Ft,"Rutina mostrar por pantalla"),e.until==="cycle-change"&&Rn());if($l<3)r.value.type==="cpu:mar.set"?(r.value.register==="SP"?($l=3,_s=3,H.set(Ft,"Ejecución: MAR ← SP")):H.set(Ft,"Captación: MAR ← IP"),e.until==="cycle-change"&&Rn(),$l++,_n++):r.value.type==="cpu:register.update"?(H.set(Ft,"Captación: MBR ← read(Memoria[MAR]); IP ← IP + 1"),e.until==="cycle-change"&&Rn(),$l++,_n++):r.value.type==="cpu:mbr.get"&&(H.set(Ft,"Captación: IR ← MBR"),e.until==="cycle-change"&&Rn(),$l++,_n++);else if(r.value.type==="cpu:rd.on"&&_s>1?ao="Ejecución: MBR ← read(Memoria[MAR])":r.value.type==="cpu:wr.on"?ao="Ejecución: write(Memoria[MAR]) ← MBR":r.value.type==="pio:write.ok"&&(H.set(Ft,"Ejecución: write(PIO[MAR]) ← MBR"),_s++,_n++),r.value.type==="cpu:mar.set"){const o=r.value.register,a=o==="ri"?"MBR":o;(nc||o==="SP")&&H.set(Ft,`Ejecución: MAR ← ${a}`),e.until==="cycle-change"&&Rn(),_s++,o!=="ri"&&_n++}else if(r.value.type==="cpu:register.update"){const o=r.value.register;let a="";nc=!0,o==="SP"?(ze==="RET"||ze==="IRET"||ze==="POP")&&(a="Ejecución: SP = SP + 1"):o==="FLAGS"?a="Ejecución: IF = 0":o==="DL"&&ze==="INT"?a="Interrupción: AL ← ASCII":o==="right.l"&&ze==="INT"?a="Interrupción: SUB AL, 1":o==="right"&&ze==="INT"?a="Interrupción: ADD BL, 1":o==="ri.l"&&ze==="INT"?(a="Interrupción: MAR ← (video)",nc=!1):a=o==="IP"?"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1":`Ejecución: MBR ← ${o}`,a!=="Interrupción: MAR ← (video)"&&e.until==="cycle-change"&&ze!=="CALL"&&ze!=="PUSH"&&ze!=="DEC"&&ze!=="INC"&&ze!=="NOT"&&ze!=="NEG"&&Rn(),_s++,ze!=="CALL"&&ze!=="PUSH"&&ze!=="DEC"&&ze!=="INC"&&ze!=="NOT"&&ze!=="NEG"&&!(ze==="INT"&&o==="SP")&&(H.set(Ft,a),_n++)}else if(r.value.type==="cpu:mbr.get"){const o=r.value.register==="id.l"?"id":r.value.register==="IP.l"?"IP":r.value.register==="FLAGS.l"?"FLAGS":r.value.register;String(o)!=="ri.l"&&(H.set(Ft,`Ejecución: ${o} ← MBR`),_n++,(String(o)==="id"||String(o)==="DL"&&ze==="INT")&&e.until==="cycle-change"&&Rn())}else if(r.value.type==="cpu:register.copy"){const o=r.value.src.replace(/\.l$/,""),a=r.value.dest.replace(/\.l$/,"");let l="";ze==="DEC"||ze==="INC"||ze==="NOT"||ze==="NEG"?l=o==="result"?`${ze} ${h1}`:o:l=o==="result"?`${a} ${ze} ${h1}`:o;let u=`Ejecución: ${a} ← ${l}`;u+="; write(FLAGS)",o==="ri"&&a==="IP"?(u="Ejecución: IP ← MBR",H.set(Ft,u),e.until==="cycle-change"&&Rn()):a==="left"&&ze==="INT"?u="ADD BL, 1":o==="result"&&ze==="INT"?e.until==="cycle-change"&&Rn():o==="IP"&&a==="id"?(u="Ejecución: id ← IP",H.set(Ft,u),e.until==="cycle-change"&&Rn()):o==="id"&&a==="ri"?(u="Ejecución: MAR ← id",nc=!1,H.set(Ft,u)):o==="MBR"&&a==="ri"?(u="Ejecución: MAR ← MBR",H.set(Ft,u)):o==="id"&&a==="IP"?(u="Ejecución: IP ← MBR",H.set(Ft,u),e.until==="cycle-change"&&Rn()):o==="BL"&&a==="ri"||o==="BX"&&a==="ri"?(u="Ejecución: MAR ← BL",H.set(Ft,u),nc=!1,_s++):h1=o,(a!=="result"&&a!=="left"&&a!=="right"&&o!=="result"&&o!=="left"&&o!=="right"||o==="result"&&a!=="MBR")&&(H.set(Ft,u),_n++)}else if(r.value.type==="bus:reset"&&_s>1&&(ze==="MOV"||ze==="ADD"||ze==="SUB"||ze==="CMP"||ze==="CALL"||ze==="INT"||ze==="PUSH"||ze==="IN"||ze==="RET"))(ze==="CALL"||ze==="INT"||ze==="PUSH")&&(ao+="; SP = SP - 1"),ze==="RET"&&(ao="Ejecución: MBR ← read(Memoria[MAR])"),ze==="IN"&&(ao="Ejecución: MBR ← read(PIO[MAR])"),H.set(Ft,ao),_n++,(ze==="RET"||ze==="IN"||ze==="INT"&&ao==="Ejecución: MBR ← read(Memoria[MAR]); SP = SP - 1")&&e.until==="cycle-change"&&Rn();else if(r.value.type==="cpu:mbr.set"){const o=r.value.register==="id.l"?"id":r.value.register==="FLAGS.l"?"FLAGS":r.value.register==="IP.l"?"IP":r.value.register;H.set(Ft,`Ejecución: MBR ← ${o}`),e.until==="cycle-change"&&Rn(),_s++,_n++}}else H.set(Ft,"");console.log(`Ciclos ejecutados: ${_n}`),H.set(Iu,_n);const s=new CustomEvent("instructionChange",{detail:{instruction:ze}});window.dispatchEvent(s),r.value.type==="cpu:cycle.update"||r.value.type==="cpu:cycle.interrupt"?e.until==="cycle-change"||n.animations||await new Promise(o=>setTimeout(o,n.executionUnit)):r.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction"?Rn():n.animations||await new Promise(o=>setTimeout(o,n.executionUnit)))}t.return()}catch(e){const n=jt.from(e);Lu(n)}}async function kse(...t){const e=t[0],n=H.get(wn);switch(e){case"cpu.run":{if(n.type==="running")return tc();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;_n=0,mu=0,H.set(Iu,_n),H.set(J0,mu),H.set(My,[]);const r=window.codemirror.state.doc.toString(),s=e5(r);if(!s.success)return _se();const a=s.instructions.map(h=>h.instruction).some(h=>["CALL","RET","INT","IRET","POP","PUSH"].includes(h));H.set(f5,a);const l=s.instructions.some(h=>h.instruction==="INT"?h.operands.some(f=>f.type==="number-expression"&&typeof f.value.value=="number"?f.value.value===6||f.value.value===7:!1):!1);H.set(Hr,h=>({...h,devices:{...h.devices,keyboardAndScreen:l}})),H.set(p5,l),Nn.loadProgram({program:s,data:Mi().dataOnLoad,devices:Mi().devices,hasORG:s.hasORG}),console.log("result:",s);const u=s.instructions.filter(h=>h.type==="instruction").flatMap(h=>{const f=h.operands.map(b=>{if(b.type==="register")return b.value;if(b.type==="number-expression"){const v=b.value;if(v.isNumberLiteral())return v.value.toString(16)+"h";if(v.isLabel())return v.value}else{if(b.type==="indirect-address")return"[BL]";if(b.type==="direct-address"){const v=b.value;if(v.isNumberLiteral())return v.value.toString(16)+"h"}}return""}).join(", "),p=`${h.instruction} ${f}`.trim(),g=[{address:h.start.value,name:p}];if(h.operands.some(b=>b.type==="number-expression"||b.type==="direct-address")){const b=h.start.value+1,v=h.operands.filter(y=>y.type==="number-expression").map(y=>{if(y.type==="number-expression"){const w=y.value;if(w.isNumberLiteral())return w.value.toString(16)+"h";if(w.isLabel())return w.value}else if(y.type==="direct-address"){const w=y.value;if(w.isNumberLiteral())return w.value.toString(16)+"h"}return""}).join(", ");g.push({address:b,name:v})}return g}),c=s.data.filter(h=>h.type==="data-directive").map(h=>({address:h.start.value,label:h.label||null}));console.log("Direcciones de las instrucciones:",u),console.log("Direcciones de los datos:",c),H.set(a5,u),H.set(l5,c),DN(Nn.getComputerState());const d=["Start CPU",{until:i,devices:Mi().devices,language:Mi().language,animations:Mi().animations?"yes":"no"}];d5.capture(...d),H.set(wn,{type:"running",until:i,waitingForInput:!1}),Jl(Nn.startCPU()),Cse(),Ese()}else H.set(wn,{type:"running",until:i,waitingForInput:!1}),gie();return}case"cpu.stop":{const i=t[1];i?(Lu(),DN(Nn.getComputerState(),i)):Rn();return}case"f10.press":{if(!Nn.devices.f10.connected()||n.type!=="running")return tc();if(IN("f10:press"))return;Jl(Nn.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!Nn.devices.switches.connected())return tc();if(IN("switches:toggle"))return;const i=t[1];Jl(Nn.devices.switches.toggle(i));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return tc();Nn.devices.keyboard.readChar(j.fromChar(t[1])),H.set(wn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!Nn.devices.screen.connected())return tc();Jl(Nn.devices.screen.clear());return}case"printer.clean":{if(!Nn.devices.printer.connected())return tc();Jl(Nn.devices.printer.clear());return}default:return e}}async function Cse(){if(Nn.devices.clock.connected())for(;H.get(wn).type!=="stopped";){const t=Mi().clockSpeed;await ot({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),Jl(Nn.devices.clock.tick())}}async function Ese(){if(Nn.devices.printer.connected())for(;H.get(wn).type!=="stopped";){const t=Mi().printerSpeed;await ot([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await ot({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),Jl(Nn.devices.printer.print())}}function An(){const t=lt(wn),e=DZ(),n=x.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:kse,devices:n}}function Ase({className:t}){const e=vt(),{status:n,dispatch:i}=An(),r=x.useCallback(()=>{n.type!=="running"&&i("cpu.run","cycle-change")},[n.type,i]);fu("F7",l=>{l.preventDefault(),r()},void 0,[r]);const s=x.useCallback(()=>{n.type!=="running"&&i("cpu.run","end-of-instruction")},[n.type,i]);fu("F8",l=>{l.preventDefault(),s()},void 0,[s]);const o=x.useCallback(()=>{n.type!=="running"&&i("cpu.run","infinity")},[n.type,i]);fu("F4",l=>{l.preventDefault(),o()},void 0,[o]);const a=x.useCallback(()=>{n.type==="running"?i("cpu.stop",!1):i("cpu.stop",!0)},[n.type,i]);return m.jsxs("div",{className:$e("flex items-center justify-center gap-4",t),children:[m.jsxs("button",{disabled:n.type==="running",onClick:r,className:"bg-mantis-500 inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[m.jsx(Rc,{icon:uJ,className:"md:mr-2"}),m.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.run.cycle-change")}),m.jsx("kbd",{className:"ml-2 hidden text-stone-600 md:inline",children:"F7"})]}),m.jsxs("button",{disabled:n.type==="running",onClick:s,className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-blue-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[m.jsx(Rc,{icon:sJ,className:"md:mr-2"}),m.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.run.end-of-instruction")}),m.jsx("kbd",{className:"ml-2 hidden text-stone-600 md:inline",children:"F8"})]}),m.jsxs("button",{disabled:n.type==="running",onClick:o,className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-orange-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[m.jsx(Rc,{icon:cJ,className:"md:mr-2"}),m.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.run.infinity")}),m.jsx("kbd",{className:"ml-2 hidden text-stone-600 md:inline",children:"F4"})]}),m.jsxs("button",{disabled:n.type==="stopped",onClick:a,className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-red-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[m.jsx(Rc,{icon:n.type==="running"?oJ:lJ,className:"md:mr-2"}),m.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e(n.type==="running"?"control.action.pause":"control.action.reset")})]})]})}function zy(t,[e,n]){return Math.min(n,Math.max(e,t))}function ZE(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Pse="VisuallyHidden",dw=x.forwardRef((t,e)=>m.jsx(He.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));dw.displayName=Pse;var Tse=[" ","Enter","ArrowUp","ArrowDown"],Rse=[" ","Enter"],sm="Select",[hw,fw,Nse]=Fp(sm),[Gd,Uhe]=_l(sm,[Nse,Ud]),pw=Ud(),[Mse,El]=Gd(sm),[Ose,Ise]=Gd(sm),w4=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:f,form:p}=t,g=pw(e),[b,v]=x.useState(null),[y,w]=x.useState(null),[_,k]=x.useState(!1),C=$p(u),[E=!1,P]=Bo({prop:i,defaultProp:r,onChange:s}),[N,D]=Bo({prop:o,defaultProp:a,onChange:l}),L=x.useRef(null),$=b?p||!!b.closest("form"):!0,[G,z]=x.useState(new Set),X=Array.from(G).map(ee=>ee.props.value).join(";");return m.jsx(UC,{...g,children:m.jsxs(Mse,{required:f,scope:e,trigger:b,onTriggerChange:v,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:k,contentId:el(),value:N,onValueChange:D,open:E,onOpenChange:P,dir:C,triggerPointerDownPosRef:L,disabled:h,children:[m.jsx(hw.Provider,{scope:e,children:m.jsx(Ose,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(ee=>{z(he=>new Set(he).add(ee))},[]),onNativeOptionRemove:x.useCallback(ee=>{z(he=>{const V=new Set(he);return V.delete(ee),V})},[]),children:n})}),$?m.jsxs($4,{"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:d,value:N,onChange:ee=>D(ee.target.value),disabled:h,form:p,children:[N===void 0?m.jsx("option",{value:""}):null,Array.from(G)]},X):null]})})};w4.displayName=sm;var b4="SelectTrigger",x4=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=pw(n),o=El(b4,n),a=o.disabled||i,l=ct(e,o.onTriggerChange),u=fw(n),c=x.useRef("touch"),[d,h,f]=B4(g=>{const b=u().filter(w=>!w.disabled),v=b.find(w=>w.value===o.value),y=z4(b,g,v);y!==void 0&&o.onValueChange(y.value)}),p=g=>{a||(o.onOpenChange(!0),f()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return m.jsx(L0,{asChild:!0,...s,children:m.jsx(He.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":F4(o.value)?"":void 0,...r,ref:l,onClick:ge(r.onClick,g=>{g.currentTarget.focus(),c.current!=="mouse"&&p(g)}),onPointerDown:ge(r.onPointerDown,g=>{c.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(p(g),g.preventDefault())}),onKeyDown:ge(r.onKeyDown,g=>{const b=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(b&&g.key===" ")&&Tse.includes(g.key)&&(p(),g.preventDefault())})})})});x4.displayName=b4;var S4="SelectValue",_4=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=El(S4,n),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=ct(e,l.onValueNodeChange);return Qn(()=>{u(c)},[u,c]),m.jsx(He.span,{...a,ref:d,style:{pointerEvents:"none"},children:F4(l.value)?m.jsx(m.Fragment,{children:o}):s})});_4.displayName=S4;var Dse="SelectIcon",k4=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return m.jsx(He.span,{"aria-hidden":!0,...r,ref:e,children:i||"▼"})});k4.displayName=Dse;var Lse="SelectPortal",C4=t=>m.jsx(qp,{asChild:!0,...t});C4.displayName=Lse;var ju="SelectContent",E4=x.forwardRef((t,e)=>{const n=El(ju,t.__scopeSelect),[i,r]=x.useState();if(Qn(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Sl.createPortal(m.jsx(A4,{scope:t.__scopeSelect,children:m.jsx(hw.Slot,{scope:t.__scopeSelect,children:m.jsx("div",{children:t.children})})}),s):null}return m.jsx(P4,{...t,ref:e})});E4.displayName=ju;var Kr=10,[A4,Al]=Gd(ju),jse="SelectContentImpl",P4=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:b,...v}=t,y=El(ju,n),[w,_]=x.useState(null),[k,C]=x.useState(null),E=ct(e,S=>_(S)),[P,N]=x.useState(null),[D,L]=x.useState(null),$=fw(n),[G,z]=x.useState(!1),X=x.useRef(!1);x.useEffect(()=>{if(w)return WC(w)},[w]),NC();const ee=x.useCallback(S=>{const[T,...M]=$().map(W=>W.ref.current),[R]=M.slice(-1),K=document.activeElement;for(const W of S)if(W===K||(W==null||W.scrollIntoView({block:"nearest"}),W===T&&k&&(k.scrollTop=0),W===R&&k&&(k.scrollTop=k.scrollHeight),W==null||W.focus(),document.activeElement!==K))return},[$,k]),he=x.useCallback(()=>ee([P,w]),[ee,P,w]);x.useEffect(()=>{G&&he()},[G,he]);const{onOpenChange:V,triggerPointerDownPosRef:F}=y;x.useEffect(()=>{if(w){let S={x:0,y:0};const T=R=>{var K,W;S={x:Math.abs(Math.round(R.pageX)-(((K=F.current)==null?void 0:K.x)??0)),y:Math.abs(Math.round(R.pageY)-(((W=F.current)==null?void 0:W.y)??0))}},M=R=>{S.x<=10&&S.y<=10?R.preventDefault():w.contains(R.target)||V(!1),document.removeEventListener("pointermove",T),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",M,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",M,{capture:!0})}}},[w,V,F]),x.useEffect(()=>{const S=()=>V(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[V]);const[ne,Se]=B4(S=>{const T=$().filter(K=>!K.disabled),M=T.find(K=>K.ref.current===document.activeElement),R=z4(T,S,M);R&&setTimeout(()=>R.ref.current.focus())}),Z=x.useCallback((S,T,M)=>{const R=!X.current&&!M;(y.value!==void 0&&y.value===T||R)&&(N(S),R&&(X.current=!0))},[y.value]),ue=x.useCallback(()=>w==null?void 0:w.focus(),[w]),I=x.useCallback((S,T,M)=>{const R=!X.current&&!M;(y.value!==void 0&&y.value===T||R)&&L(S)},[y.value]),O=i==="popper"?T_:T4,B=O===T_?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:b}:{};return m.jsx(A4,{scope:n,content:w,viewport:k,onViewportChange:C,itemRefCallback:Z,selectedItem:P,onItemLeave:ue,itemTextRefCallback:I,focusSelectedItem:he,selectedItemText:D,position:i,isPositioned:G,searchRef:ne,children:m.jsx(F0,{as:_u,allowPinchZoom:!0,children:m.jsx(M0,{asChild:!0,trapped:y.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:ge(r,S=>{var T;(T=y.trigger)==null||T.focus({preventScroll:!0}),S.preventDefault()}),children:m.jsx(Kp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:m.jsx(O,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:S=>S.preventDefault(),...v,...B,onPlaced:()=>z(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ge(v.onKeyDown,S=>{const T=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!T&&S.key.length===1&&Se(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let R=$().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(S.key)&&(R=R.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const K=S.target,W=R.indexOf(K);R=R.slice(W+1)}setTimeout(()=>ee(R)),S.preventDefault()}})})})})})})});P4.displayName=jse;var Fse="SelectItemAlignedPosition",T4=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=El(ju,n),o=Al(ju,n),[a,l]=x.useState(null),[u,c]=x.useState(null),d=ct(e,E=>c(E)),h=fw(n),f=x.useRef(!1),p=x.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:v,focusSelectedItem:y}=o,w=x.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&g&&b&&v){const E=s.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),D=v.getBoundingClientRect();if(s.dir!=="rtl"){const K=D.left-P.left,W=N.left-K,te=E.left-W,q=E.width+te,Te=Math.max(q,P.width),Le=window.innerWidth-Kr,Fe=zy(W,[Kr,Math.max(Kr,Le-Te)]);a.style.minWidth=q+"px",a.style.left=Fe+"px"}else{const K=P.right-D.right,W=window.innerWidth-N.right-K,te=window.innerWidth-E.right-W,q=E.width+te,Te=Math.max(q,P.width),Le=window.innerWidth-Kr,Fe=zy(W,[Kr,Math.max(Kr,Le-Te)]);a.style.minWidth=q+"px",a.style.right=Fe+"px"}const L=h(),$=window.innerHeight-Kr*2,G=g.scrollHeight,z=window.getComputedStyle(u),X=parseInt(z.borderTopWidth,10),ee=parseInt(z.paddingTop,10),he=parseInt(z.borderBottomWidth,10),V=parseInt(z.paddingBottom,10),F=X+ee+G+V+he,ne=Math.min(b.offsetHeight*5,F),Se=window.getComputedStyle(g),Z=parseInt(Se.paddingTop,10),ue=parseInt(Se.paddingBottom,10),I=E.top+E.height/2-Kr,O=$-I,B=b.offsetHeight/2,S=b.offsetTop+B,T=X+ee+S,M=F-T;if(T<=I){const K=L.length>0&&b===L[L.length-1].ref.current;a.style.bottom="0px";const W=u.clientHeight-g.offsetTop-g.offsetHeight,te=Math.max(O,B+(K?ue:0)+W+he),q=T+te;a.style.height=q+"px"}else{const K=L.length>0&&b===L[0].ref.current;a.style.top="0px";const te=Math.max(I,X+g.offsetTop+(K?Z:0)+B)+M;a.style.height=te+"px",g.scrollTop=T-I+g.offsetTop}a.style.margin=`${Kr}px 0`,a.style.minHeight=ne+"px",a.style.maxHeight=$+"px",i==null||i(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,u,g,b,v,s.dir,i]);Qn(()=>w(),[w]);const[_,k]=x.useState();Qn(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const C=x.useCallback(E=>{E&&p.current===!0&&(w(),y==null||y(),p.current=!1)},[w,y]);return m.jsx(Bse,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:C,children:m.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:m.jsx(He.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});T4.displayName=Fse;var $se="SelectPopperPosition",T_=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Kr,...s}=t,o=pw(n);return m.jsx(HC,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});T_.displayName=$se;var[Bse,JE]=Gd(ju,{}),R_="SelectViewport",R4=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=Al(R_,n),o=JE(R_,n),a=ct(e,s.onViewportChange),l=x.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),m.jsx(hw.Slot,{scope:n,children:m.jsx(He.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ge(r.onScroll,u=>{const c=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const f=Math.abs(l.current-c.scrollTop);if(f>0){const p=window.innerHeight-Kr*2,g=parseFloat(d.style.minHeight),b=parseFloat(d.style.height),v=Math.max(g,b);if(v<p){const y=v+f,w=Math.min(p,y),_=y-w;d.style.height=w+"px",d.style.bottom==="0px"&&(c.scrollTop=_>0?_:0,d.style.justifyContent="flex-end")}}}l.current=c.scrollTop})})})]})});R4.displayName=R_;var N4="SelectGroup",[zse,Use]=Gd(N4),Hse=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=el();return m.jsx(zse,{scope:n,id:r,children:m.jsx(He.div,{role:"group","aria-labelledby":r,...i,ref:e})})});Hse.displayName=N4;var M4="SelectLabel",Vse=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Use(M4,n);return m.jsx(He.div,{id:r.id,...i,ref:e})});Vse.displayName=M4;var Uy="SelectItem",[Wse,O4]=Gd(Uy),I4=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=El(Uy,n),l=Al(Uy,n),u=a.value===i,[c,d]=x.useState(s??""),[h,f]=x.useState(!1),p=ct(e,y=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,y,i,r)}),g=el(),b=x.useRef("touch"),v=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(Wse,{scope:n,value:i,disabled:r,textId:g,isSelected:u,onItemTextChange:x.useCallback(y=>{d(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:m.jsx(hw.ItemSlot,{scope:n,value:i,disabled:r,textValue:c,children:m.jsx(He.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:p,onFocus:ge(o.onFocus,()=>f(!0)),onBlur:ge(o.onBlur,()=>f(!1)),onClick:ge(o.onClick,()=>{b.current!=="mouse"&&v()}),onPointerUp:ge(o.onPointerUp,()=>{b.current==="mouse"&&v()}),onPointerDown:ge(o.onPointerDown,y=>{b.current=y.pointerType}),onPointerMove:ge(o.onPointerMove,y=>{var w;b.current=y.pointerType,r?(w=l.onItemLeave)==null||w.call(l):b.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(o.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:ge(o.onKeyDown,y=>{var _;((_=l.searchRef)==null?void 0:_.current)!==""&&y.key===" "||(Rse.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});I4.displayName=Uy;var Uh="SelectItemText",D4=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=El(Uh,n),a=Al(Uh,n),l=O4(Uh,n),u=Ise(Uh,n),[c,d]=x.useState(null),h=ct(e,v=>d(v),l.onItemTextChange,v=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,v,l.value,l.disabled)}),f=c==null?void 0:c.textContent,p=x.useMemo(()=>m.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=u;return Qn(()=>(g(p),()=>b(p)),[g,b,p]),m.jsxs(m.Fragment,{children:[m.jsx(He.span,{id:l.textId,...s,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Sl.createPortal(s.children,o.valueNode):null]})});D4.displayName=Uh;var L4="SelectItemIndicator",Gse=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return O4(L4,n).isSelected?m.jsx(He.span,{"aria-hidden":!0,...i,ref:e}):null});Gse.displayName=L4;var N_="SelectScrollUpButton",Kse=x.forwardRef((t,e)=>{const n=Al(N_,t.__scopeSelect),i=JE(N_,t.__scopeSelect),[r,s]=x.useState(!1),o=ct(e,i.onScrollButtonChange);return Qn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollTop>0;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?m.jsx(j4,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});Kse.displayName=N_;var M_="SelectScrollDownButton",Xse=x.forwardRef((t,e)=>{const n=Al(M_,t.__scopeSelect),i=JE(M_,t.__scopeSelect),[r,s]=x.useState(!1),o=ct(e,i.onScrollButtonChange);return Qn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,c=Math.ceil(l.scrollTop)<u;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?m.jsx(j4,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});Xse.displayName=M_;var j4=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=Al("SelectScrollButton",n),o=x.useRef(null),a=fw(n),l=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),Qn(()=>{var c;const u=a().find(d=>d.ref.current===document.activeElement);(c=u==null?void 0:u.ref.current)==null||c.scrollIntoView({block:"nearest"})},[a]),m.jsx(He.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ge(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:ge(r.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:ge(r.onPointerLeave,()=>{l()})})}),qse="SelectSeparator",Yse=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return m.jsx(He.div,{"aria-hidden":!0,...i,ref:e})});Yse.displayName=qse;var O_="SelectArrow",Zse=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=pw(n),s=El(O_,n),o=Al(O_,n);return s.open&&o.position==="popper"?m.jsx(VC,{...r,...i,ref:e}):null});Zse.displayName=O_;function F4(t){return t===""||t===void 0}var $4=x.forwardRef((t,e)=>{const{value:n,...i}=t,r=x.useRef(null),s=ct(e,r),o=ZE(n);return x.useEffect(()=>{const a=r.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&c){const d=new Event("change",{bubbles:!0});c.call(a,n),a.dispatchEvent(d)}},[o,n]),m.jsx(dw,{asChild:!0,children:m.jsx("select",{...i,ref:s,defaultValue:n})})});$4.displayName="BubbleSelect";function B4(t){const e=ei(t),n=x.useRef(""),i=x.useRef(0),r=x.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(i.current),u!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=x.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function z4(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Jse(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Jse(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Qse=w4,U4=x4,eoe=_4,toe=k4,noe=C4,H4=E4,ioe=R4,V4=I4,roe=D4;const gg=Qse,vg=eoe,Hh=x.forwardRef(({className:t,children:e,...n},i)=>m.jsxs(U4,{ref:i,className:$e("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,m.jsx(toe,{asChild:!0,children:m.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));Hh.displayName=U4.displayName;const Vh=x.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>m.jsx(noe,{children:m.jsx(H4,{ref:r,className:$e("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:m.jsx(ioe,{className:"p-1",children:e})})}));Vh.displayName=H4.displayName;const Vl=x.forwardRef(({className:t,children:e,...n},i)=>m.jsx(V4,{ref:i,className:$e("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:m.jsx(roe,{children:e})}));Vl.displayName=V4.displayName;var W4=["PageUp","PageDown"],G4=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],K4={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Kd="Slider",[I_,soe,ooe]=Fp(Kd),[X4,Hhe]=_l(Kd,[ooe]),[aoe,mw]=X4(Kd),q4=x.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[i],value:c,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,form:p,...g}=t,b=x.useRef(new Set),v=x.useRef(0),w=o==="horizontal"?loe:uoe,[_=[],k]=Bo({prop:c,defaultProp:u,onChange:L=>{var G;(G=[...b.current][v.current])==null||G.focus(),d(L)}}),C=x.useRef(_);function E(L){const $=poe(_,L);D(L,$)}function P(L){D(L,v.current)}function N(){const L=C.current[v.current];_[v.current]!==L&&h(_)}function D(L,$,{commit:G}={commit:!1}){const z=yoe(s),X=woe(Math.round((L-i)/s)*s+i,z),ee=zy(X,[i,r]);k((he=[])=>{const V=hoe(he,ee,$);if(voe(V,l*s)){v.current=V.indexOf(ee);const F=String(V)!==String(he);return F&&G&&h(V),F?V:he}else return he})}return m.jsx(aoe,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:v,thumbs:b.current,values:_,orientation:o,form:p,children:m.jsx(I_.Provider,{scope:t.__scopeSlider,children:m.jsx(I_.Slot,{scope:t.__scopeSlider,children:m.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...g,ref:e,onPointerDown:ge(g.onPointerDown,()=>{a||(C.current=_)}),min:i,max:r,inverted:f,onSlideStart:a?void 0:E,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:N,onHomeKeyDown:()=>!a&&D(i,0,{commit:!0}),onEndKeyDown:()=>!a&&D(r,_.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:$})=>{if(!a){const X=W4.includes(L.key)||L.shiftKey&&G4.includes(L.key)?10:1,ee=v.current,he=_[ee],V=s*X*$;D(he+V,ee,{commit:!0})}}})})})})});q4.displayName=Kd;var[Y4,Z4]=X4(Kd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),loe=x.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=t,[d,h]=x.useState(null),f=ct(e,w=>h(w)),p=x.useRef(),g=$p(r),b=g==="ltr",v=b&&!s||!b&&s;function y(w){const _=p.current||d.getBoundingClientRect(),k=[0,_.width],E=QE(k,v?[n,i]:[i,n]);return p.current=_,E(w-_.left)}return m.jsx(Y4,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:m.jsx(J4,{dir:g,"data-orientation":"horizontal",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const _=y(w.clientX);o==null||o(_)},onSlideMove:w=>{const _=y(w.clientX);a==null||a(_)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:w=>{const k=K4[v?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:k?-1:1})}})})}),uoe=x.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,c=x.useRef(null),d=ct(e,c),h=x.useRef(),f=!r;function p(g){const b=h.current||c.current.getBoundingClientRect(),v=[0,b.height],w=QE(v,f?[i,n]:[n,i]);return h.current=b,w(g-b.top)}return m.jsx(Y4,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:m.jsx(J4,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const b=p(g.clientY);s==null||s(b)},onSlideMove:g=>{const b=p(g.clientY);o==null||o(b)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:g=>{const v=K4[f?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:v?-1:1})}})})}),J4=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,c=mw(Kd,n);return m.jsx(He.span,{...u,ref:e,onKeyDown:ge(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):W4.concat(G4).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ge(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(h)?h.focus():i(d)}),onPointerMove:ge(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:ge(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})})}),Q4="SliderTrack",eB=x.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=mw(Q4,n);return m.jsx(He.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});eB.displayName=Q4;var D_="SliderRange",tB=x.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=mw(D_,n),s=Z4(D_,n),o=x.useRef(null),a=ct(e,o),l=r.values.length,u=r.values.map(h=>iB(h,r.min,r.max)),c=l>1?Math.min(...u):0,d=100-Math.max(...u);return m.jsx(He.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}})});tB.displayName=D_;var L_="SliderThumb",nB=x.forwardRef((t,e)=>{const n=soe(t.__scopeSlider),[i,r]=x.useState(null),s=ct(e,a=>r(a)),o=x.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return m.jsx(coe,{...t,ref:s,index:o})}),coe=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=mw(L_,n),a=Z4(L_,n),[l,u]=x.useState(null),c=ct(e,y=>u(y)),d=l?o.form||!!l.closest("form"):!0,h=$C(l),f=o.values[i],p=f===void 0?0:iB(f,o.min,o.max),g=foe(i,o.values.length),b=h==null?void 0:h[a.size],v=b?moe(b,p,a.direction):0;return x.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),m.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${p}% + ${v}px)`},children:[m.jsx(I_.ItemSlot,{scope:t.__scopeSlider,children:m.jsx(He.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:c,style:f===void 0?{display:"none"}:t.style,onFocus:ge(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&m.jsx(doe,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},i)]})});nB.displayName=L_;var doe=t=>{const{value:e,...n}=t,i=x.useRef(null),r=ZE(e);return x.useEffect(()=>{const s=i.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(r!==e&&l){const u=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(u)}},[r,e]),m.jsx("input",{style:{display:"none"},...n,ref:i,defaultValue:e})};function hoe(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function iB(t,e,n){const s=100/(n-e)*(t-e);return zy(s,[0,100])}function foe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function poe(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function moe(t,e,n){const i=t/2,s=QE([0,50],[0,i]);return(i-s(e)*n)*n}function goe(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function voe(t,e){if(e>0){const n=goe(t);return Math.min(...n)>=e}return!0}function QE(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function yoe(t){return(String(t).split(".")[1]||"").length}function woe(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var rB=q4,boe=eB,xoe=tB,Soe=nB;const Wl=x.forwardRef(({className:t,...e},n)=>m.jsxs(rB,{ref:n,className:$e("relative flex touch-none select-none items-center",t),...e,children:[m.jsx(boe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:m.jsx(xoe,{className:"absolute h-full bg-mantis-400"})}),m.jsx(Soe,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Wl.displayName=rB.displayName;var eA="Switch",[_oe,Vhe]=_l(eA),[koe,Coe]=_oe(eA),sB=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:u,form:c,...d}=t,[h,f]=x.useState(null),p=ct(e,w=>f(w)),g=x.useRef(!1),b=h?c||!!h.closest("form"):!0,[v=!1,y]=Bo({prop:r,defaultProp:s,onChange:u});return m.jsxs(koe,{scope:n,checked:v,disabled:a,children:[m.jsx(He.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":lB(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:p,onClick:ge(t.onClick,w=>{y(_=>!_),b&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),b&&m.jsx(Eoe,{control:h,bubbles:!g.current,name:i,value:l,checked:v,required:o,disabled:a,form:c,style:{transform:"translateX(-100%)"}})]})});sB.displayName=eA;var oB="SwitchThumb",aB=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=Coe(oB,n);return m.jsx(He.span,{"data-state":lB(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});aB.displayName=oB;var Eoe=t=>{const{control:e,checked:n,bubbles:i=!0,...r}=t,s=x.useRef(null),o=ZE(n),a=$C(e);return x.useEffect(()=>{const l=s.current,u=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&d){const h=new Event("click",{bubbles:i});d.call(l,n),l.dispatchEvent(h)}},[o,n,i]),m.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function lB(t){return t?"checked":"unchecked"}var uB=sB,Aoe=aB;const da=x.forwardRef(({className:t,...e},n)=>m.jsx(uB,{className:$e("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:m.jsx(Aoe,{className:$e("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));da.displayName=uB.displayName;const tA=ve(!1);function cB({className:t}){const e=vt(),[n,i]=Qp(),{status:r}=An();return m.jsxs("div",{className:$e("overflow-auto scrollbar-stone-700",t),children:[m.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[m.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),m.jsxs(ii,{children:[m.jsxs(ri,{children:[m.jsxs(si,{children:[m.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),m.jsx(yh,{children:e("settings.animations.description")})]}),m.jsx(da,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&V5()}})]}),m.jsxs(ii,{children:[m.jsx(ri,{children:m.jsxs(si,{children:[m.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),m.jsx(Wl,{className:"w-44",...f1({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsxs(ii,{children:[m.jsx(ri,{children:m.jsx(si,{children:e("settings.instructionCycle.label")})}),m.jsx(da,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),m.jsxs(ii,{children:[m.jsx(ri,{children:m.jsx(si,{children:e("settings.statsCPU.label")})}),m.jsx(da,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsx(ii,{children:m.jsxs(ri,{children:[m.jsxs(si,{children:[m.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),m.jsx(yh,{children:e("settings.devices.description")})]})}),m.jsxs(ii,{children:[m.jsx(ri,{children:m.jsx(si,{children:e("settings.devices.keyboard-and-screen")})}),m.jsx(da,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),m.jsxs(ii,{children:[m.jsxs(ri,{children:[m.jsx(si,{children:e("settings.devices.pic.label")}),m.jsx(yh,{children:e("settings.devices.pic.description")})]}),m.jsx(da,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),m.jsxs(ii,{children:[m.jsx(ri,{children:m.jsxs(si,{children:[m.jsx("span",{className:"icon-[lucide--clock] size-6"}),e("settings.speeds.clockSpeed")]})}),m.jsx(Wl,{className:"w-44",...f1({value:n.clockSpeed,onValueChange:s=>i(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),m.jsxs(ii,{children:[m.jsx(ri,{children:m.jsx(si,{children:e("settings.devices.pio.label")})}),m.jsxs(gg,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[m.jsx(Hh,{className:"w-52 min-w-[theme(width.52)]",children:m.jsx(vg,{})}),m.jsx(Vh,{children:PZ.map(s=>m.jsx(Vl,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),m.jsxs(ii,{children:[m.jsx(ri,{children:m.jsx(si,{children:e("settings.devices.handshake.label")})}),m.jsxs(gg,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[m.jsx(Hh,{className:"w-52 min-w-[theme(width.52)]",children:m.jsx(vg,{})}),m.jsx(Vh,{children:TZ.map(s=>m.jsx(Vl,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),m.jsxs(ii,{children:[m.jsx(ri,{children:m.jsxs(si,{children:[m.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),m.jsx(Wl,{className:"w-44",...f1({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsxs(ii,{children:[m.jsxs(ri,{children:[m.jsxs(si,{children:[m.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),m.jsx(yh,{children:e("settings.flags.description")})]}),m.jsxs(gg,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[m.jsx(Hh,{className:"w-32",children:m.jsx(vg,{})}),m.jsxs(Vh,{children:[m.jsx(Vl,{value:"CF_ZF",children:"C Z"}),m.jsx(Vl,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsxs(ii,{children:[m.jsx(ri,{children:m.jsxs(si,{children:[m.jsx("span",{className:"icon-[lucide--languages] size-6"}),e("settings.language.label")]})}),m.jsxs(gg,{value:n.language,onValueChange:s=>i(o=>({...o,language:s})),children:[m.jsx(Hh,{className:"w-32",children:m.jsx(vg,{})}),m.jsxs(Vh,{children:[m.jsx(Vl,{value:"en",children:m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx("span",{className:"icon-[circle-flags--uk] size-4"})," English"]})}),m.jsx(Vl,{value:"es",children:m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx("span",{className:"icon-[circle-flags--ar] size-4"})," Español"]})})]})]})]}),m.jsxs(ii,{children:[m.jsx(ri,{children:m.jsxs(si,{children:[m.jsx("span",{className:"icon-[lucide--pilcrow-square] size-6"}),e("settings.editorFontSize.label")]})}),m.jsxs("div",{className:"flex items-center rounded-lg border border-stone-600 bg-stone-900",children:[m.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize<=8,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize-1})),title:e("settings.editorFontSize.decrease"),children:m.jsx("span",{className:"icon-[lucide--minus] size-4"})}),m.jsx("span",{className:"w-8 text-center text-sm font-normal",children:n.editorFontSize}),m.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize>=64,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize+1})),title:e("settings.editorFontSize.increase"),children:m.jsx("span",{className:"icon-[lucide--plus] size-4"})})]})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsxs(ii,{children:[m.jsxs(ri,{children:[m.jsxs(si,{children:[m.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),m.jsxs(yh,{children:[e("settings.filters.description"),m.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:oc.filterBightness,filterContrast:oc.filterContrast,filterInvert:oc.filterInvert,filterSaturation:oc.filterSaturation})),children:e("settings.filters.revert")})]})]}),m.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[m.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),m.jsx(Wl,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),m.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),m.jsx(Wl,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),m.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),m.jsx(da,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),m.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),m.jsx(Wl,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsx("div",{className:"flex justify-end p-4",children:m.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...oc,language:s.language,devices:s.devices})),children:[m.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function ii({children:t}){return m.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function ri({children:t}){return m.jsx("div",{className:"grow",children:t})}function si({children:t}){return m.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function yh({children:t}){return m.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function f1({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}function Poe(){const t=vt(),[e,n]=Bp(tA);return m.jsxs("header",{className:"relative p-2 text-sm text-white",children:[m.jsx(Ase,{className:" absolute inset-0"}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex select-none items-center justify-center",children:[m.jsx("img",{src:"/VonSim8/favicon.svg",className:"mr-2 h-10 w-10"}),m.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",m.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]})]}),m.jsx("button",{className:$e("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:m.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})]})}var nA="ToastProvider",[iA,Toe,Roe]=Fp("Toast"),[dB,Whe]=_l("Toast",[Roe]),[Noe,gw]=dB(nA),hB=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=x.useState(null),[u,c]=x.useState(0),d=x.useRef(!1),h=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${nA}\`. Expected non-empty \`string\`.`),m.jsx(iA.Provider,{scope:e,children:m.jsx(Noe,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:x.useCallback(()=>c(f=>f+1),[]),onToastRemove:x.useCallback(()=>c(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};hB.displayName=nA;var fB="ToastViewport",Moe=["F8"],j_="toast.viewportPause",F_="toast.viewportResume",pB=x.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=Moe,label:r="Notifications ({hotkey})",...s}=t,o=gw(fB,n),a=Toe(n),l=x.useRef(null),u=x.useRef(null),c=x.useRef(null),d=x.useRef(null),h=ct(e,d,o.onViewportChange),f=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;x.useEffect(()=>{const b=v=>{var w;i.length!==0&&i.every(_=>v[_]||v.code===_)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[i]),x.useEffect(()=>{const b=l.current,v=d.current;if(p&&b&&v){const y=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(j_);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(F_);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},_=C=>{!b.contains(C.relatedTarget)&&w()},k=()=>{b.contains(document.activeElement)||w()};return b.addEventListener("focusin",y),b.addEventListener("focusout",_),b.addEventListener("pointermove",y),b.addEventListener("pointerleave",k),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{b.removeEventListener("focusin",y),b.removeEventListener("focusout",_),b.removeEventListener("pointermove",y),b.removeEventListener("pointerleave",k),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[p,o.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:b})=>{const y=a().map(w=>{const _=w.ref.current,k=[_,...Woe(_)];return b==="forwards"?k:k.reverse()});return(b==="forwards"?y.reverse():y).flat()},[a]);return x.useEffect(()=>{const b=d.current;if(b){const v=y=>{var k,C,E;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const P=document.activeElement,N=y.shiftKey;if(y.target===b&&N){(k=u.current)==null||k.focus();return}const $=g({tabbingDirection:N?"backwards":"forwards"}),G=$.findIndex(z=>z===P);p1($.slice(G+1))?y.preventDefault():N?(C=u.current)==null||C.focus():(E=c.current)==null||E.focus()}};return b.addEventListener("keydown",v),()=>b.removeEventListener("keydown",v)}},[a,g]),m.jsxs(cK,{ref:l,role:"region","aria-label":r.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&m.jsx($_,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});p1(b)}}),m.jsx(iA.Slot,{scope:n,children:m.jsx(He.ol,{tabIndex:-1,...s,ref:h})}),p&&m.jsx($_,{ref:c,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});p1(b)}})]})});pB.displayName=fB;var mB="ToastFocusProxy",$_=x.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=gw(mB,n);return m.jsx(dw,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&i()}})});$_.displayName=mB;var vw="Toast",Ooe="toast.swipeStart",Ioe="toast.swipeMove",Doe="toast.swipeCancel",Loe="toast.swipeEnd",gB=x.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a=!0,l]=Bo({prop:i,defaultProp:r,onChange:s});return m.jsx(Xo,{present:n||a,children:m.jsx($oe,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ei(t.onPause),onResume:ei(t.onResume),onSwipeStart:ge(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ge(t.onSwipeMove,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ge(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ge(t.onSwipeEnd,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});gB.displayName=vw;var[joe,Foe]=dB(vw,{onClose(){}}),$oe=x.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:f,...p}=t,g=gw(vw,n),[b,v]=x.useState(null),y=ct(e,z=>v(z)),w=x.useRef(null),_=x.useRef(null),k=r||g.duration,C=x.useRef(0),E=x.useRef(k),P=x.useRef(0),{onToastAdd:N,onToastRemove:D}=g,L=ei(()=>{var X;(b==null?void 0:b.contains(document.activeElement))&&((X=g.viewport)==null||X.focus()),o()}),$=x.useCallback(z=>{!z||z===1/0||(window.clearTimeout(P.current),C.current=new Date().getTime(),P.current=window.setTimeout(L,z))},[L]);x.useEffect(()=>{const z=g.viewport;if(z){const X=()=>{$(E.current),u==null||u()},ee=()=>{const he=new Date().getTime()-C.current;E.current=E.current-he,window.clearTimeout(P.current),l==null||l()};return z.addEventListener(j_,ee),z.addEventListener(F_,X),()=>{z.removeEventListener(j_,ee),z.removeEventListener(F_,X)}}},[g.viewport,k,l,u,$]),x.useEffect(()=>{s&&!g.isClosePausedRef.current&&$(k)},[s,k,g.isClosePausedRef,$]),x.useEffect(()=>(N(),()=>D()),[N,D]);const G=x.useMemo(()=>b?_B(b):null,[b]);return g.viewport?m.jsxs(m.Fragment,{children:[G&&m.jsx(Boe,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),m.jsx(joe,{scope:n,onClose:L,children:Sl.createPortal(m.jsx(iA.ItemSlot,{scope:n,children:m.jsx(uK,{asChild:!0,onEscapeKeyDown:ge(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||L(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(He.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...p,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ge(t.onKeyDown,z=>{z.key==="Escape"&&(a==null||a(z.nativeEvent),z.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:ge(t.onPointerDown,z=>{z.button===0&&(w.current={x:z.clientX,y:z.clientY})}),onPointerMove:ge(t.onPointerMove,z=>{if(!w.current)return;const X=z.clientX-w.current.x,ee=z.clientY-w.current.y,he=!!_.current,V=["left","right"].includes(g.swipeDirection),F=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ne=V?F(0,X):0,Se=V?0:F(0,ee),Z=z.pointerType==="touch"?10:2,ue={x:ne,y:Se},I={originalEvent:z,delta:ue};he?(_.current=ue,yg(Ioe,d,I,{discrete:!1})):LN(ue,g.swipeDirection,Z)?(_.current=ue,yg(Ooe,c,I,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(X)>Z||Math.abs(ee)>Z)&&(w.current=null)}),onPointerUp:ge(t.onPointerUp,z=>{const X=_.current,ee=z.target;if(ee.hasPointerCapture(z.pointerId)&&ee.releasePointerCapture(z.pointerId),_.current=null,w.current=null,X){const he=z.currentTarget,V={originalEvent:z,delta:X};LN(X,g.swipeDirection,g.swipeThreshold)?yg(Loe,f,V,{discrete:!0}):yg(Doe,h,V,{discrete:!0}),he.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Boe=t=>{const{__scopeToast:e,children:n,...i}=t,r=gw(vw,e),[s,o]=x.useState(!1),[a,l]=x.useState(!1);return Hoe(()=>o(!0)),x.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:m.jsx(qp,{asChild:!0,children:m.jsx(dw,{...i,children:s&&m.jsxs(m.Fragment,{children:[r.label," ",n]})})})},zoe="ToastTitle",vB=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return m.jsx(He.div,{...i,ref:e})});vB.displayName=zoe;var Uoe="ToastDescription",yB=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return m.jsx(He.div,{...i,ref:e})});yB.displayName=Uoe;var wB="ToastAction",bB=x.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?m.jsx(SB,{altText:n,asChild:!0,children:m.jsx(rA,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${wB}\`. Expected non-empty \`string\`.`),null)});bB.displayName=wB;var xB="ToastClose",rA=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=Foe(xB,n);return m.jsx(SB,{asChild:!0,children:m.jsx(He.button,{type:"button",...i,ref:e,onClick:ge(t.onClick,r.onClose)})})});rA.displayName=xB;var SB=x.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return m.jsx(He.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function _B(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),Voe(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(..._B(i))}}),e}function yg(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?uC(r,s):r.dispatchEvent(s)}var LN=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function Hoe(t=()=>{}){const e=ei(t);Qn(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function Voe(t){return t.nodeType===t.ELEMENT_NODE}function Woe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function p1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Goe=hB,kB=pB,CB=gB,EB=vB,AB=yB,PB=bB,TB=rA;const Koe=Goe,RB=x.forwardRef(({className:t,...e},n)=>m.jsx(kB,{ref:n,className:$e("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));RB.displayName=kB.displayName;const NB=x.forwardRef(({className:t,variant:e="default",...n},i)=>m.jsx(CB,{ref:i,"data-variant":e,className:$e("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-bottom-full data-[state=open]:slide-in-from-top-full",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"group bg-red-900 text-red-50",e==="info"&&"border border-green-500 border-stone-600 bg-stone-900 text-white",t),...n}));NB.displayName=CB.displayName;const MB=x.forwardRef(({className:t,...e},n)=>m.jsx(PB,{ref:n,className:$e("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));MB.displayName=PB.displayName;const OB=x.forwardRef(({className:t,...e},n)=>m.jsx(TB,{ref:n,className:$e("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-data-[variant=error]:text-red-300 group-data-[variant=error]:hover:text-red-50 group-data-[variant=error]:focus:ring-red-400 group-data-[variant=error]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:m.jsx("span",{className:"icon-[lucide--x] block h-4 w-4"})}));OB.displayName=TB.displayName;const IB=x.forwardRef(({className:t,...e},n)=>m.jsx(EB,{ref:n,className:$e("text-sm font-semibold",t),...e}));IB.displayName=EB.displayName;const DB=x.forwardRef(({className:t,...e},n)=>m.jsx(AB,{ref:n,className:$e("text-sm opacity-90",t),...e}));DB.displayName=AB.displayName;var Tr=function(t,e){return Number(t.toFixed(e))},Xoe=function(t,e){return e},Bt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},qoe=function(t){return-Math.cos(t*Math.PI)/2+.5},Yoe=function(t){return t},Zoe=function(t){return t*t},Joe=function(t){return t*(2-t)},Qoe=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},eae=function(t){return t*t*t},tae=function(t){return--t*t*t+1},nae=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},iae=function(t){return t*t*t*t},rae=function(t){return 1- --t*t*t*t},sae=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},oae=function(t){return t*t*t*t*t},aae=function(t){return 1+--t*t*t*t*t},lae=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},LB={easeOut:qoe,linear:Yoe,easeInQuad:Zoe,easeOutQuad:Joe,easeInOutQuad:Qoe,easeInCubic:eae,easeOutCubic:tae,easeInOutCubic:nae,easeInQuart:iae,easeOutQuart:rae,easeInOutQuart:sae,easeInQuint:oae,easeOutQuint:aae,easeInOutQuint:lae},jB=function(t){typeof t=="number"&&cancelAnimationFrame(t)},Bs=function(t){t.mounted&&(jB(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function FB(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;Bs(t),t.animation=function(){if(!t.mounted)return jB(t.animation);var o=new Date().getTime()-r,a=o/n,l=LB[e],u=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function uae(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Pl(t,e,n,i){var r=uae(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=e.scale-a,d=e.positionX-l,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):FB(t,i,n,function(f){var p=a+c*f,g=l+d*f,b=u+h*f;s(p,g,b)})}}function cae(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,u=i-a,c=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:c}}var dae=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,u=t-e-a,c=a,d=i-r-l,h=l;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},sA=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=cae(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=dae(o,l,u,a,c,d,!!r);return h},B_=function(t,e,n,i){return i?t<e?Tr(e,2):t>n?Tr(n,2):Tr(t,2):Tr(t,2)},Nd=function(t,e){var n=sA(t,e);return t.bounds=n,n};function om(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var f=B_(t,a-d,u+d,i),p=B_(e,l-h,c+h,i);return{x:f,y:p}}function yw(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:u};var d=l-e*c,h=u-n*c,f=om(d,h,r,s,0,0,null);return f}function am(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var jN=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(c){return c instanceof Element?r==null?void 0:r.contains(c):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var u=ww(s,n);return!u},FN=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},hae=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},fae=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function pae(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,g=n>d||n<h,b=i>f||i<p,v=n>d?u.offsetWidth:t.setup.minPositionX||0,y=i>f?u.offsetHeight:t.setup.minPositionY||0,w=yw(t,v,y,r,t.bounds,a||l),_=w.x,k=w.y;return{scale:r,positionX:g?_:n,positionY:b?k:i}}}function $B(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(!(o===null||a===null||e===c&&n===d)){var h=om(e,n,a,s,i,r,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var mae=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,u=r.positionY;if(!i)return{x:l,y:u};var c=e-i.x,d=n-i.y,h=o?l:c,f=a?u:d;return{x:h,y:f}},gl=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},gae=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},vae=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,u=!l||a>1||!s||e;return!(!u||!n||!i)};function yae(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function $N(t,e,n,i,r,s,o,a,l,u){if(r){if(e>o&&n>o){var c=o+(t-o)*u;return c>l?l:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<a?a:c>s?s:c}}return i?e:B_(t,s,o,r)}function wae(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function bae(t,e){var n=gae(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var u=wae(o,a),c=e.x-i.x,d=e.y-i.y,h=c/u,f=d/u,p=l-r,g=c*c+d*d,b=Math.sqrt(g)/p;t.velocity={velocityX:h,velocityY:f,total:b}}t.lastMousePosition=e,t.velocityTime=l}}function xae(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=vae(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=i.limitToBounds,p=i.alignmentAnimation,g=i.zoomAnimation,b=i.panning,v=b.lockAxisY,y=b.lockAxisX,w=g.animationType,_=p.sizeX,k=p.sizeY,C=p.velocityAlignmentTime,E=C,P=yae(t,l),N=Math.max(P,E),D=gl(t,_),L=gl(t,k),$=D*r.offsetWidth/100,G=L*r.offsetHeight/100,z=u+$,X=c-$,ee=d+G,he=h-G,V=t.transformState,F=new Date().getTime();FB(t,w,N,function(ne){var Se=t.transformState,Z=Se.scale,ue=Se.positionX,I=Se.positionY,O=new Date().getTime()-F,B=O/E,S=LB[p.animationType],T=1-S(Math.min(1,B)),M=1-ne,R=ue+o*M,K=I+a*M,W=$N(R,V.positionX,ue,y,f,c,u,X,z,T),te=$N(K,V.positionY,I,v,f,h,d,he,ee,T);(ue!==R||I!==K)&&t.setTransformState(Z,W,te)})}}function BN(t,e){var n=t.transformState.scale;Bs(t),Nd(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?fae(t,e):hae(t,e)}function BB(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,a=r.sizeY,l=r.animationTime,u=r.animationType,c=s||e<i||!o&&!a;if(!c){var d=pae(t);d&&Pl(t,d,l,u)}}function zN(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=mae(t,e,n),u=l.x,c=l.y,d=gl(t,o),h=gl(t,a);bae(t,{x:u,y:c}),$B(t,u,c,d,h)}}function Sae(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=a<u||l<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?xae(t):BB(t)}}function oA(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=am(Tr(e,2),s,o,0,!1),u=Nd(t,l),c=yw(t,n,i,l,u,a),d=c.x,h=c.y;return{scale:l,positionX:d,positionY:h}}function zB(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,u=l.disabled,c=l.animationTime,d=l.animationType,h=u||i>=o;if((i>=1||a)&&BB(t),!(h||!r||!t.mounted)){var f=e||r.offsetWidth/2,p=n||r.offsetHeight/2,g=oA(t,o,f,p);g&&Pl(t,g,c,d)}}var Ya=function(){return Ya=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ya.apply(this,arguments)};function UN(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var wg={previousScale:1,scale:1,positionX:0,positionY:0},wh={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},z_={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},UB=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:wg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:wg.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:wg.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:wg.positionY}},HN=function(t){var e=Ya({},wh);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof wh[n]<"u";if(r&&i){var s=Object.prototype.toString.call(wh[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=Ya(Ya({},wh[n]),t[n]):a?e[n]=UN(UN([],wh[n],!0),t[n]):e[n]=t[n]}}),e},HB=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,u=s.smooth,c=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*n):i+e*n,h=am(Tr(d,3),a,o,c,!1);return h};function VB(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-l)/a,f=(d/2-u)/a,p=HB(t,e,n),g=oA(t,p,h,f);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");Pl(t,g,i,r)}function WB(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=UB(t.props),l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(s){var h=sA(t,a.scale),f=om(a.positionX,a.positionY,h,o,0,0,s),p={scale:a.scale,positionX:f.x,positionY:f.y};u===a.scale&&c===a.positionX&&d===a.positionY||(i==null||i(),Pl(t,p,e,n))}}function _ae(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function kae(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,u=o.maxScale;if(!i||!r)return s;var c=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=_ae(e,i,r,s),f=h.x,p=h.y,g=d.width/s.scale,b=d.height/s.scale,v=i.offsetWidth/g,y=i.offsetHeight/b,w=am(n||Math.min(v,y),l,u,0,!1),_=(c.width-g*w)/2,k=(c.height-b*w)/2,C=(c.left-f)*w+_,E=(c.top-p)*w+k,P=sA(t,w),N=om(C,E,P,a,0,0,i),D=N.x,L=N.y;return{positionX:D,positionY:L,scale:w}}var Cae=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),VB(t,1,e,n,i)}},Eae=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),VB(t,-1,e,n,i)}},Aae=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?u:i};Pl(t,f,r,s)}}},Pae=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),WB(t,e,n)}},Tae=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=GB(e||r.scale,s,o);Pl(t,a,n,i)}}},Rae=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),Bs(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=kae(t,o,n);Pl(t,a,i,r)}}},U_=function(t){return{instance:t,zoomIn:Cae(t),zoomOut:Eae(t),setTransform:Aae(t),resetTransform:Pae(t),centerView:Tae(t),zoomToElement:Rae(t)}},Nae=function(t){return{instance:t,state:t.transformState}},xt=function(t){var e={};return Object.assign(e,Nae(t)),Object.assign(e,U_(t)),e},m1=!1;function g1(){try{var t={get passive(){return m1=!0,!1}};return t}catch{return m1=!1,m1}}var bg=".".concat(z_.wrapperClass),ww=function(t,e){return e.some(function(n){return t.matches("".concat(bg," ").concat(n,", ").concat(bg," .").concat(n,", ").concat(bg," ").concat(n," *, ").concat(bg," .").concat(n," *"))})},H_=function(t){t&&clearTimeout(t)},Mae=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},GB=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function Oae(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Iae=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,u=e.target,c=a&&!l&&!i&&u;if(!c||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=ww(u,o);return!d},Dae=function(t){return t?t.deltaY<0?1:-1:0};function Lae(t,e){var n=Dae(t),i=Xoe(e,n);return i}function KB(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var jae=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n,g=i?!1:!f,b=am(Tr(p,3),u,l,h,g&&!d);return b},Fae=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},$ae=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=ww(o,r);return!l},Bae=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},zae=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Tr(r[0].clientX-i.left,5),o=Tr(r[0].clientY-i.top,5),a=Tr(r[1].clientX-i.left,5),l=Tr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},XB=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},Uae=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,u=a.size,c=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return am(Tr(h,2),o,s,u,!c&&!l)},Hae=160,Vae=100,Wae=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(Bs(t),Bt(xt(t),e,i),Bt(xt(t),e,r))},Gae=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,g=d.size,b=d.disabled,v=h.step,y=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=Lae(e,null),_=p?y*Math.abs(e.deltaY):v,k=jae(t,w,_,!e.ctrlKey);if(l!==k){var C=Nd(t,k),E=KB(e,s,l),P=b||g===0||c||f,N=u&&P,D=yw(t,E.x,E.y,k,C,N),L=D.x,$=D.y;t.previousWheelEvent=e,t.setTransformState(k,L,$),Bt(xt(t),e,i),Bt(xt(t),e,r)}},Kae=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;H_(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(zB(t,e.x,e.y),t.wheelAnimationTimer=null)},Vae);var s=Fae(t,e);s&&(H_(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Bt(xt(t),e,i),Bt(xt(t),e,r))},Hae))},qB=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},Xae=function(t,e){var n=XB(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=qB(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,Bs(t)},qae=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,u=o.zoomAnimation,c=o.alignmentAnimation,d=u.disabled,h=u.size;if(!(i===null||!n)){var f=zae(e,s,n);if(!(!Number.isFinite(f.x)||!Number.isFinite(f.y))){var p=XB(e),g=Uae(t,p),b=qB(e),v=b.x-(t.pinchLastCenterX||0),y=b.y-(t.pinchLastCenterY||0);if(!(g===s&&v===0&&y===0)){t.pinchLastCenterX=b.x,t.pinchLastCenterY=b.y;var w=Nd(t,g),_=d||h===0||l,k=a&&_,C=yw(t,f.x,f.y,g,w,k),E=C.x,P=C.y;t.pinchMidpoint=f,t.lastDistance=p;var N=c.sizeX,D=c.sizeY,L=gl(t,N),$=gl(t,D),G=E+v,z=P+y,X=om(G,z,w,a,L,$,r),ee=X.x,he=X.y;t.setTransformState(g,ee,he)}}}},Yae=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,zB(t,e==null?void 0:e.x,e==null?void 0:e.y)},YB=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;H_(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Bt(xt(t),e,n)},i)},Zae=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Bt(xt(t),e,i),WB(t,o,a,function(){return Bt(xt(t),e,r)}),YB(t,e)};function Jae(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function Qae(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,u=a.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,g=c.animationType;if(!d&&!i){if(h==="reset")return Zae(t,e);if(!s)return console.error("No ContentComponent found");var b=Jae(h,t.transformState.scale),v=HB(t,b,f);if(o!==v){Bt(xt(t),e,l);var y=KB(e,s,o),w=oA(t,v,y.x,y.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");Bt(xt(t),e,u),Pl(t,w,p,g),YB(t,e)}}}var ele=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,u=r==null?void 0:r.contains(l),c=n&&l&&u&&!o;if(!c)return!1;var d=ww(l,a);return!d},tle=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,Nd(n,n.transformState.scale),n.setup=HN(i)},this.initializeWindowEvents=function(){var i,r,s=g1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=g1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),Bs(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=g1();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(xt(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s,o=i.offsetWidth,a=i.offsetHeight;(o>0||a>0)&&(n.onInitCallbacks.forEach(function(l){return l(xt(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect())}),setTimeout(function(){var s;(s=n.observer)===null||s===void 0||s.disconnect()},5e3),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=Iae(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(Wae(n,i),Gae(n,i),Kae(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,u=l.positionX,c=l.positionY,d=u-i.deltaX,h=c-i.deltaY,f=a.lockAxisX?u:d,p=a.lockAxisY?c:h,g=n.setup.alignmentAnimation,b=g.sizeX,v=g.sizeY,y=gl(n,b),w=gl(n,v);f===u&&p===c||$B(n,f,p,y,w)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=jN(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),Bs(n),BN(n,i),Bt(xt(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=FN(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),zN(n,i.clientX,i.clientY),Bt(xt(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(Sae(n),Bt(xt(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=$ae(n,i);l&&(Xae(n,i),Bs(n),Bt(xt(n),i,o),Bt(xt(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=Bae(n);l&&(i.preventDefault(),i.stopPropagation(),qae(n,i),Bt(xt(n),i,o),Bt(xt(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(Yae(n),Bt(xt(n),i,s),Bt(xt(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=jN(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(!a){n.lastTouch=+new Date,Bs(n);var l=i.touches,u=l.length===1,c=l.length===2;u&&(Bs(n),BN(n,i),Bt(xt(n),i,s)),c&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=FN(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];zN(n,a.clientX,a.clientY),Bt(xt(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=ele(n,i);s&&Qae(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=xt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Bt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=GB(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Mae(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return xt(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Nd(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=xt(n);Bt(s,void 0,n.props.onInit)},this.props=e,this.setup=HN(this.props),this.transformState=UB(this.props)}return t}(),aA=sn.createContext(null),nle=function(t,e){return typeof t=="function"?t(e):t},ile=sn.forwardRef(function(t,e){var n=x.useRef(new tle(t)).current,i=nle(t.children,U_(n));return x.useImperativeHandle(e,function(){return U_(n)},[n]),x.useEffect(function(){n.update(t)},[n,t]),sn.createElement(aA.Provider,{value:n},i)});sn.forwardRef(function(t,e){var n=x.useRef(null),i=x.useContext(aA);return x.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),sn.createElement("div",Ya({},t,{ref:Oae([n,e])}))});function rle(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var sle=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,VN={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};rle(sle);var ole=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,u=l===void 0?{}:l,c=t.contentProps,d=c===void 0?{}:c,h=x.useContext(aA),f=h.init,p=h.cleanupWindowEvents,g=x.useRef(null),b=x.useRef(null);return x.useEffect(function(){var v=g.current,y=b.current;return v!==null&&y!==null&&f&&(f==null||f(v,y)),function(){p==null||p()}},[]),sn.createElement("div",Ya({},u,{ref:g,className:"".concat(z_.wrapperClass," ").concat(VN.wrapper," ").concat(i),style:o}),sn.createElement("div",Ya({},d,{ref:b,className:"".concat(z_.contentClass," ").concat(VN.content," ").concat(s),style:a}),e))};function ale({wrapperRef:t}){const e=vt();return m.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[m.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:m.jsx("span",{className:"h-4 w-4",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),m.jsx("hr",{className:"border-stone-600"}),m.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:m.jsx("span",{className:"h-4 w-4",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function lle(){const t=vt(),{devices:e}=An();return e.hasIOBus?m.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:m.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function ule(){const{devices:t}=An(),e=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),n=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),i="M 750 545 H 800";return m.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[m.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),m.jsx(gn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:e,style:Rt("bus.rd")}),m.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),m.jsx(gn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:n,style:Rt("bus.wr")}),t.hasIOBus&&m.jsxs(m.Fragment,{children:[m.jsx(xn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),m.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:i}),m.jsx(gn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:i,style:Rt("bus.mem")})]}),t.pic&&m.jsx(xn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&m.jsx(xn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&m.jsx(xn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&m.jsx(xn,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&m.jsxs(m.Fragment,{children:[m.jsx(xn,{springs:"bus.intr",d:"M 110 700 V 470"}),m.jsx(xn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&m.jsx(xn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&m.jsx(xn,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&m.jsx(xn,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio==="switches-and-leds"&&m.jsxs(m.Fragment,{children:[m.jsx(xn,{springs:"bus.switches->pio",d:"M 1300 868 H 1120"}),m.jsx(xn,{springs:"bus.pio->leds",d:"M 1120 758 H 1300"})]}),t.pio==="printer"&&m.jsxs(m.Fragment,{children:[m.jsx(xn,{springs:"bus.printer.strobe",d:"M 1120 667 H 1225 V 992 H 1300"}),m.jsx(xn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 682 H 1120"}),m.jsx(xn,{springs:"bus.printer.data",d:"M 1120 737 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&m.jsxs(m.Fragment,{children:[m.jsx(xn,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),m.jsx(xn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),m.jsx(xn,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]})]})}function xn({d:t,springs:e}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),m.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),m.jsx(gn.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Rt(e)})]})}function cle(){const t=vt(),{devices:e}=An();return m.jsxs(m.Fragment,{children:[m.jsx(zi,{className:"left-[384px] top-[403px]",children:"rd"}),m.jsx(zi,{className:"left-[384px] top-[423px]",children:"wr"}),e.hasIOBus&&m.jsxs(m.Fragment,{children:[m.jsx(zi,{className:"left-[384px] top-[443px]",children:"io/m"}),m.jsx(zi,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")})]}),e.pic&&m.jsx(zi,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),e.timer&&m.jsx(zi,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&m.jsx(zi,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&m.jsx(zi,{className:"left-[675px] top-[573px]",children:t("computer.chip-select.handshake")}),e.pic&&m.jsxs(m.Fragment,{children:[m.jsx(zi,{className:"left-[75px] top-[478px]",children:"intr"}),m.jsx(zi,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&m.jsxs(m.Fragment,{children:[m.jsx(zi,{className:"left-[1310px] top-[983px]",children:"strobe"}),m.jsx(zi,{className:"left-[1310px] top-[998px]",children:"busy"}),m.jsx(zi,{className:"left-[1310px] top-[1053px]",children:"data"})]})]})}function zi({className:t,children:e}){return m.jsx("span",{className:$e("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function dle(){const{devices:t}=An(),e=["M 699 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 687 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" ");return m.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] size-full",children:[m.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),m.jsx(gn.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:n,style:Rt("bus.data")}),m.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),m.jsx(gn.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:Rt("bus.address")})]})}function hle(){return m.jsxs(m.Fragment,{children:[m.jsx(dle,{}),m.jsx(ule,{}),m.jsx(cle,{}),m.jsx(lle,{})]})}function fle(){const{devices:t}=An();if(!t.clock)return null;const e=Rt("clock.angle");return m.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:m.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx(gn.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}var lA="Popover",[ZB,Ghe]=_l(lA,[Ud]),lm=Ud(),[ple,Tl]=ZB(lA),JB=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=lm(e),l=x.useRef(null),[u,c]=x.useState(!1),[d=!1,h]=Bo({prop:i,defaultProp:r,onChange:s});return m.jsx(UC,{...a,children:m.jsx(ple,{scope:e,contentId:el(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(f=>!f),[h]),hasCustomAnchor:u,onCustomAnchorAdd:x.useCallback(()=>c(!0),[]),onCustomAnchorRemove:x.useCallback(()=>c(!1),[]),modal:o,children:n})})};JB.displayName=lA;var QB="PopoverAnchor",mle=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Tl(QB,n),s=lm(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return x.useEffect(()=>(o(),()=>a()),[o,a]),m.jsx(L0,{...s,...i,ref:e})});mle.displayName=QB;var ez="PopoverTrigger",tz=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Tl(ez,n),s=lm(n),o=ct(e,r.triggerRef),a=m.jsx(He.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":oz(r.open),...i,ref:o,onClick:ge(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:m.jsx(L0,{asChild:!0,...s,children:a})});tz.displayName=ez;var uA="PopoverPortal",[gle,vle]=ZB(uA,{forceMount:void 0}),nz=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Tl(uA,e);return m.jsx(gle,{scope:e,forceMount:n,children:m.jsx(Xo,{present:n||s.open,children:m.jsx(qp,{asChild:!0,container:r,children:i})})})};nz.displayName=uA;var Md="PopoverContent",iz=x.forwardRef((t,e)=>{const n=vle(Md,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Tl(Md,t.__scopePopover);return m.jsx(Xo,{present:i||s.open,children:s.modal?m.jsx(yle,{...r,ref:e}):m.jsx(wle,{...r,ref:e})})});iz.displayName=Md;var yle=x.forwardRef((t,e)=>{const n=Tl(Md,t.__scopePopover),i=x.useRef(null),r=ct(e,i),s=x.useRef(!1);return x.useEffect(()=>{const o=i.current;if(o)return WC(o)},[]),m.jsx(F0,{as:_u,allowPinchZoom:!0,children:m.jsx(rz,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ge(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,u=a.button===2||l;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ge(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),wle=x.forwardRef((t,e)=>{const n=Tl(Md,t.__scopePopover),i=x.useRef(!1),r=x.useRef(!1);return m.jsx(rz,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),rz=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:c,...d}=t,h=Tl(Md,n),f=lm(n);return NC(),m.jsx(M0,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:m.jsx(Kp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:m.jsx(HC,{"data-state":oz(h.open),role:"dialog",id:h.contentId,...f,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),sz="PopoverClose",ble=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Tl(sz,n);return m.jsx(He.button,{type:"button",...i,ref:e,onClick:ge(t.onClick,()=>r.onOpenChange(!1))})});ble.displayName=sz;var xle="PopoverArrow",Sle=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=lm(n);return m.jsx(VC,{...r,...i,ref:e})});Sle.displayName=xle;function oz(t){return t?"open":"closed"}var _le=JB,kle=tz,Cle=nz,az=iz;const lz=_le,uz=kle,cA=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>m.jsx(Cle,{children:m.jsx(az,{ref:r,align:e,sideOffset:n,className:$e("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));cA.displayName=az.displayName;function nr({name:t,title:e,valueAtom:n,springs:i,emphasis:r=!1,className:s}){const o=vt(),a=lt(n),l=a.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t;return m.jsxs(lz,{children:[m.jsx(uz,{asChild:!0,children:m.jsxs(gn.button,{title:c!=="left"&&c!=="right"?`Registro ${c}`:c,className:$e("flex w-min cursor-pointer items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",r?"border-mantis-400 text-lg":"border-stone-600 text-base",s),style:c==="left"||c==="right"?{backgroundColor:"transparent"}:Rt(i),children:[m.jsx("span",{className:"mr-2 font-bold",children:c}),m.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:l.toString("hex")})]})}),m.jsxs(cA,{className:"w-60",children:[m.jsx("p",{className:"px-4 py-2 font-medium text-white",children:c!=="left"&&c!=="right"?`Registro ${c}`:c}),m.jsx("hr",{className:"border-stone-600"}),m.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(d=>m.jsxs("li",{children:[m.jsx("b",{className:"font-medium",children:o(`generics.byte-representation.${d}`)}),":"," ",m.jsx("span",{className:"font-mono text-mantis-400",children:a.low.toString(d)})]},d))})]})]})}function Ele(){const t=lt(qe.FLAGS),e=lt(m5),[n,i]=x.useState(!1),r=lt(p5),[s]=Qp();x.useEffect(()=>{const d=f=>{i(f==="ADD"||f==="SUB"||f==="CMP"||f==="AND"||f==="OR"||f==="XOR"||f==="NOT"||f==="NEG"||f==="DEC"||f==="INC")},h=f=>{d(f.detail.instruction)};return window.addEventListener("instructionChange",h),()=>{window.removeEventListener("instructionChange",h)}},[]);const o=t.bit(1),a=t.bit(0),l=t.bit(3),u=t.bit(4),c=t.bit(2);return m.jsxs(m.Fragment,{children:[m.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[m.jsx(gn.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 120 85 H 220",pathLength:1,strokeDasharray:1,style:Rt("cpu.alu.operands")}),m.jsx(gn.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 120 145 H 220",pathLength:1,strokeDasharray:1,style:Rt("cpu.alu.operands")}),m.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),m.jsx(gn.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:Rt("cpu.alu.cog").rot.to(d=>`rotate(${d*60}deg)`)}}),n&&m.jsx(gn.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:Rt("cpu.alu.operation"),children:e}),m.jsxs(gn.div,{className:$e("absolute top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",s.flagsVisibility==="SF_OF_CF_ZF"?"left-[200px]":"left-[220px]"),style:Rt("cpu.FLAGS"),children:[r&&m.jsx("span",{className:$e("rounded p-1 font-light",u?"bg-mantis-400":"bg-stone-900"),children:"I"}),s.flagsVisibility==="SF_OF_CF_ZF"&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:$e("rounded p-1 font-light",l?"bg-mantis-400":"bg-stone-900"),children:"S"}),m.jsx("span",{className:$e("rounded p-1 font-light",c?"bg-mantis-400":"bg-stone-900"),children:"O"})]}),m.jsx("span",{className:$e("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"C"}),m.jsx("span",{className:$e("rounded p-1 font-light",a?"bg-mantis-400":"bg-stone-900"),children:"Z"})]})]})}function Ale(){const t=vt(),e=lt(Iu),{status:n}=An(),i=lt(Ts),r=lt(Ft),s=x.useMemo(()=>{if(!("metadata"in i)||i.metadata.operands.length===0)return"";if(i.phase==="fetching-operands"){let a=" __";for(let l=1;l<i.metadata.operands.length;l++)a+=", __";return a}else return" "+i.metadata.operands.join(", ")},[i]),o=x.useMemo(()=>n.type==="running"&&n.waitingForInput?"waiting-for-input":n.type==="stopped"?n.error?"stopped-error":"stopped":i.phase==="stopped"&&i.error?"stopped-error":i.phase,[n,i]);return m.jsxs(m.Fragment,{children:[m.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:m.jsx(gn.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:Rt("cpu.decoder.path")})}),m.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:m.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:t("computer.cpu.control-unit")})}),m.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[m.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[m.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),m.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:m.jsx(gn.div,{className:"h-full bg-mantis-400",style:{width:Rt("cpu.decoder.progress.progress").to(a=>`${a*100}%`),opacity:Rt("cpu.decoder.progress.opacity")}})})]}),m.jsx("span",{className:$e("mt-4 w-full rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",o==="stopped-error"?"bg-red-500":o==="waiting-for-input"?"bg-amber-600":o==="int6"||o==="int7"?"bg-blue-600":"bg-stone-900"),children:o==="int6"||o==="int7"?m.jsxs(m.Fragment,{children:[t(`computer.cpu.status.${o}`),m.jsx("div",{children:r})]}):o==="stopped-error"||o==="waiting-for-input"?m.jsx(m.Fragment,{children:t(`computer.cpu.status.${o}`)}):r?m.jsx("div",{children:r}):t(`computer.cpu.status.${o}`)}),m.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:m.jsx("p",{className:"text-center font-mono",children:!("metadata"in i)||i.phase==="fetching"||n.type==="stopped"?i.phase==="stopped"&&o!=="stopped-error"&&o==="stopped"&&e!==0?m.jsx("span",{className:"text-mantis-400",children:"HLT"}):m.jsx("span",{className:"italic text-stone-400",children:"???"}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"text-mantis-400",children:i.metadata.name}),m.jsx("span",{className:"text-white",children:s})]})})})]})]})}function Ple(){const t=vt(),e=lt(f5),[n,i]=x.useState(!1),[r,s]=x.useState(!1);return x.useEffect(()=>{const o=l=>{s(l==="ADD"||l==="SUB"||l==="CMP"||l==="AND"||l==="OR"||l==="XOR"||l==="NOT"||l==="NEG"||l==="DEC"||l==="INC"),i(l==="CALL"||l==="INT"||l==="IRET")},a=l=>{o(l.detail.instruction)};return window.addEventListener("instructionChange",a),()=>{window.removeEventListener("instructionChange",a)}},[]),m.jsxs("div",{className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),m.jsx(bie,{showSP:e}),m.jsx(Jre,{showSP:e,showid:n}),r&&m.jsxs(m.Fragment,{children:[m.jsx(Ui,{name:"left",className:$e("left-[96px] top-[49px]","border-transparent","bg-transparent")}),m.jsx(Ui,{name:"right",className:$e("left-[96px] top-[150px]","border-transparent","bg-transparent")})]}),m.jsx(Ele,{}),m.jsx(Ui,{name:"AX",emphasis:!0,className:"left-[450px] top-[30px]"}),m.jsx(Ui,{name:"BX",emphasis:!0,className:"left-[450px] top-[70px]"}),m.jsx(Ui,{name:"CX",emphasis:!0,className:"left-[450px] top-[110px]"}),m.jsx(Ui,{name:"DX",emphasis:!0,className:"left-[450px] top-[150px]"}),n&&m.jsx(Ui,{name:"id",className:$e("left-[450px] top-[190px]","border-red-color")}),m.jsx(Ui,{name:"MBR",className:$e("right-[-51px] top-[233px]","border-red-color")}),m.jsx(Ui,{name:"IR",className:$e("left-[171px] top-[270px]","border-red-color")}),m.jsx(Ale,{}),e&&m.jsx(Ui,{name:"SP",emphasis:!0,className:$e("left-[450px] top-[292px]","border-red-color")}),m.jsx(Ui,{name:"IP",emphasis:!0,className:$e("left-[450px] top-[332px]","border-red-color")}),m.jsx(Ui,{name:"ri",emphasis:!0,className:"left-[450px] top-[372px] opacity-0"}),m.jsx(Ui,{name:"MAR",className:$e("right-[-51px] top-[333px]","border-red-color")})]})}function Ui({name:t,emphasis:e,className:n}){return m.jsx(nr,{name:t,valueAtom:qe[t],springs:`cpu.${t}`,emphasis:e,className:$e("absolute",n)})}const Tle="_pushable_1q0ek_2",Rle="_front_1q0ek_15",Nle="_shadow_1q0ek_20",Mle="_edge_1q0ek_52",xg={pushable:Tle,front:Rle,shadow:Nle,edge:Mle};function Ole(){const t=vt(),{status:e,dispatch:n,devices:i}=An();return fu("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?m.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:m.jsxs("button",{className:xg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[m.jsx("div",{className:xg.shadow}),m.jsx("div",{className:xg.edge}),m.jsx("span",{className:xg.front,children:t("computer.f10")})]})}):null}function Ile(){const t=vt(),{devices:e}=An();return e.handshake?m.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),m.jsx(nr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:FE,springs:"handshake.STATE",className:"mx-auto my-4"}),m.jsx("hr",{className:"border-stone-600"}),m.jsx(nr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:jE,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var cz={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.23 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(x)})(I8,function(n){return function(){var i={651:function(a){a.exports=function(){var l={d:function(I,O){for(var B in O)l.o(O,B)&&!l.o(I,B)&&Object.defineProperty(I,B,{enumerable:!0,get:O[B]})},o:function(I,O){return Object.prototype.hasOwnProperty.call(I,O)},r:function(I){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})}},u={};function c(I){return function(O){if(Array.isArray(O))return h(O)}(I)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(I)||d(I)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(I,O){if(I){if(typeof I=="string")return h(I,O);var B={}.toString.call(I).slice(8,-1);return B==="Object"&&I.constructor&&(B=I.constructor.name),B==="Map"||B==="Set"?Array.from(I):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?h(I,O):void 0}}function h(I,O){(O==null||O>I.length)&&(O=I.length);for(var B=0,S=Array(O);B<O;B++)S[B]=I[B];return S}function f(I){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},f(I)}function p(I,O){for(var B=0;B<O.length;B++){var S=O[B];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(I,b(S.key),S)}}function g(I,O,B){return(O=b(O))in I?Object.defineProperty(I,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):I[O]=B,I}function b(I){var O=function(B,S){if(f(B)!="object"||!B)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var M=T.call(B,S||"default");if(f(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(B)}(I,"string");return f(O)=="symbol"?O:O+""}l.r(u),l.d(u,{SimpleKeyboard:function(){return Z},default:function(){return ue}});var v=function(){return I=function S(T){var M=T.getOptions,R=T.getCaretPosition,K=T.getCaretPositionEnd,W=T.dispatch;(function(te,q){if(!(te instanceof q))throw new TypeError("Cannot call a class as a function")})(this,S),g(this,"getOptions",void 0),g(this,"getCaretPosition",void 0),g(this,"getCaretPositionEnd",void 0),g(this,"dispatch",void 0),g(this,"maxLengthReached",void 0),g(this,"isStandardButton",function(te){return te&&!(te[0]==="{"&&te[te.length-1]==="}")}),this.getOptions=M,this.getCaretPosition=R,this.getCaretPositionEnd=K,this.dispatch=W,S.bindMethods(S,this)},O=[{key:"getButtonType",value:function(S){return S.includes("{")&&S.includes("}")&&S!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(S){var T=this.getButtonType(S),M=S.replace("{","").replace("}",""),R="";return T!=="standardBtn"&&(R=" hg-button-".concat(M)),"hg-".concat(T).concat(R)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(S,T){return(T=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),T):T||this.getDefaultDiplay())[S]||S}},{key:"getUpdatedInput",value:function(S,T,M){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:M,K=arguments.length>4&&arguments[4]!==void 0&&arguments[4],W=this.getOptions(),te=[M,R,K],q=T;return(S==="{bksp}"||S==="{backspace}")&&q.length>0?q=this.removeAt.apply(this,[q].concat(te)):(S==="{delete}"||S==="{forwarddelete}")&&q.length>0?q=this.removeForwardsAt.apply(this,[q].concat(te)):S==="{space}"?q=this.addStringAt.apply(this,[q," "].concat(te)):S!=="{tab}"||typeof W.tabCharOnTab=="boolean"&&W.tabCharOnTab===!1?S!=="{enter}"&&S!=="{numpadenter}"||!W.newLineOnEnter?S.includes("numpad")&&Number.isInteger(Number(S[S.length-2]))?q=this.addStringAt.apply(this,[q,S[S.length-2]].concat(te)):S==="{numpaddivide}"?q=this.addStringAt.apply(this,[q,"/"].concat(te)):S==="{numpadmultiply}"?q=this.addStringAt.apply(this,[q,"*"].concat(te)):S==="{numpadsubtract}"?q=this.addStringAt.apply(this,[q,"-"].concat(te)):S==="{numpadadd}"?q=this.addStringAt.apply(this,[q,"+"].concat(te)):S==="{numpaddecimal}"?q=this.addStringAt.apply(this,[q,"."].concat(te)):S==="{"||S==="}"?q=this.addStringAt.apply(this,[q,S].concat(te)):S.includes("{")||S.includes("}")||(q=this.addStringAt.apply(this,[q,S].concat(te))):q=this.addStringAt.apply(this,[q,`
`].concat(te)):q=this.addStringAt.apply(this,[q,"	"].concat(te)),W.debug&&console.log("Input will be: "+q),q}},{key:"updateCaretPos",value:function(S){var T=arguments.length>1&&arguments[1]!==void 0&&arguments[1],M=this.updateCaretPosAction(S,T);this.dispatch(function(R){R.setCaretPosition(M)})}},{key:"updateCaretPosAction",value:function(S){var T=arguments.length>1&&arguments[1]!==void 0&&arguments[1],M=this.getOptions(),R=this.getCaretPosition();return R!=null&&(T?R>0&&(R-=S):R+=S),M.debug&&console.log("Caret at:",R),R}},{key:"addStringAt",value:function(S,T){var M,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S.length,W=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return R||R===0?(M=[S.slice(0,R),T,S.slice(K)].join(""),this.isMaxLengthReached()||W&&this.updateCaretPos(T.length)):M=S+T,M}},{key:"removeAt",value:function(S){var T,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(M===0&&R===0)return S;if(M===R){var W=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;M&&M>=0?S.substring(M-2,M).match(W)?(T=S.substr(0,M-2)+S.substr(M),K&&this.updateCaretPos(2,!0)):(T=S.substr(0,M-1)+S.substr(M),K&&this.updateCaretPos(1,!0)):S.slice(-2).match(W)?(T=S.slice(0,-2),K&&this.updateCaretPos(2,!0)):(T=S.slice(0,-1),K&&this.updateCaretPos(1,!0))}else T=S.slice(0,M)+S.slice(R),K&&this.dispatch(function(te){te.setCaretPosition(M)});return T}},{key:"removeForwardsAt",value:function(S){var T,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return S!=null&&S.length&&M!==null?(M===R?T=S.substring(M,M+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?S.substr(0,M)+S.substr(M+2):S.substr(0,M)+S.substr(M+1):(T=S.slice(0,M)+S.slice(R),K&&this.dispatch(function(W){W.setCaretPosition(M)})),T):S}},{key:"handleMaxLength",value:function(S,T){var M=this.getOptions(),R=M.maxLength,K=S[M.inputName||"default"],W=T.length-1>=R;if(T.length<=K.length)return!1;if(Number.isInteger(R))return M.debug&&console.log("maxLength (num) reached:",W),W?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(f(R)==="object"){var te=T.length-1>=R[M.inputName||"default"];return M.debug&&console.log("maxLength (obj) reached:",te),te?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(S){return S?S.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(T,M){return M.length?T+M[0].toUpperCase()+M.slice(1):T}):""}},{key:"chunkArray",value:function(S,T){return c(Array(Math.ceil(S.length/T))).map(function(M,R){return S.slice(T*R,T+T*R)})}},{key:"escapeRegex",value:function(S){return S.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(S,T){var M=S,R=T.indexOf("‫");return R<S&&R!=-1&&M--,T.indexOf("‬")<S&&R!=-1&&M--,M<0?0:M}}],B=[{key:"bindMethods",value:function(S,T){var M,R=function(W,te){var q=typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(!q){if(Array.isArray(W)||(q=d(W))||te){q&&(W=q);var Te=0,Le=function(){};return{s:Le,n:function(){return Te>=W.length?{done:!0}:{done:!1,value:W[Te++]}},e:function(me){throw me},f:Le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fe,De=!0,Ve=!1;return{s:function(){q=q.call(W)},n:function(){var me=q.next();return De=me.done,me},e:function(me){Ve=!0,Fe=me},f:function(){try{De||q.return==null||q.return()}finally{if(Ve)throw Fe}}}}(Object.getOwnPropertyNames(S.prototype));try{for(R.s();!(M=R.n()).done;){var K=M.value;K==="constructor"||K==="bindMethods"||(T[K]=T[K].bind(T))}}catch(W){R.e(W)}finally{R.f()}}}],O&&p(I.prototype,O),B&&p(I,B),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,O,B}();g(v,"noop",function(){});var y=v;function w(I){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},w(I)}function _(I,O){for(var B=0;B<O.length;B++){var S=O[B];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(I,C(S.key),S)}}function k(I,O,B){return(O=C(O))in I?Object.defineProperty(I,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):I[O]=B,I}function C(I){var O=function(B,S){if(w(B)!="object"||!B)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var M=T.call(B,S);if(w(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(I,"string");return w(O)=="symbol"?O:O+""}var E=function(){return I=function S(T){var M=this,R=T.dispatch,K=T.getOptions;(function(W,te){if(!(W instanceof te))throw new TypeError("Cannot call a class as a function")})(this,S),k(this,"getOptions",void 0),k(this,"dispatch",void 0),k(this,"isModifierKey",function(W){return W.altKey||W.ctrlKey||W.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(W.code||W.key||M.keyCodeToKey(W==null?void 0:W.keyCode))}),this.dispatch=R,this.getOptions=K,y.bindMethods(S,this)},O=[{key:"handleHighlightKeyDown",value:function(S){var T=this.getOptions();T.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var M=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(R){var K,W,te=R.getButtonElement(M),q=R.getButtonElement("{".concat(M,"}"));if(te)K=te,W=M;else{if(!q)return;K=q,W="{".concat(M,"}")}var Te,Le,Fe,De,Ve=function(mt){mt.style.background=T.physicalKeyboardHighlightBgColor||"#dadce4",mt.style.color=T.physicalKeyboardHighlightTextColor||"black"};if(K)if(Array.isArray(K)){if(K.forEach(function(mt){return Ve(mt)}),T.physicalKeyboardHighlightPress)if(T.physicalKeyboardHighlightPressUsePointerEvents)(Te=K[0])===null||Te===void 0||(Le=Te.onpointerdown)===null||Le===void 0||Le.call(Te,S);else if(T.physicalKeyboardHighlightPressUseClick){var me;(me=K[0])===null||me===void 0||me.click()}else R.handleButtonClicked(W,S)}else Ve(K),T.physicalKeyboardHighlightPress&&(T.physicalKeyboardHighlightPressUsePointerEvents?(Fe=K)===null||Fe===void 0||(De=Fe.onpointerdown)===null||De===void 0||De.call(Fe,S):T.physicalKeyboardHighlightPressUseClick?K.click():R.handleButtonClicked(W,S))})}},{key:"handleHighlightKeyUp",value:function(S){var T=this.getOptions();T.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var M=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(R){var K,W,te,q=R.getButtonElement(M)||R.getButtonElement("{".concat(M,"}")),Te=function(Le){Le.removeAttribute&&Le.removeAttribute("style")};q&&(Array.isArray(q)?(q.forEach(function(Le){return Te(Le)}),T.physicalKeyboardHighlightPressUsePointerEvents&&((K=q[0])===null||K===void 0||(W=K.onpointerup)===null||W===void 0||W.call(K,S))):(Te(q),T.physicalKeyboardHighlightPressUsePointerEvents&&(q==null||(te=q.onpointerup)===null||te===void 0||te.call(q,S))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var T,M="",R=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(M=R!=null&&R.includes("Numpad")||R!=null&&R.includes("Shift")||R!=null&&R.includes("Space")||R!=null&&R.includes("Backspace")||R!=null&&R.includes("Control")||R!=null&&R.includes("Alt")||R!=null&&R.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?(T=M)===null||T===void 0?void 0:T.toLowerCase():M}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}],O&&_(I.prototype,O),B&&_(I,B),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,O,B}();function P(I){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},P(I)}function N(I,O){for(var B=0;B<O.length;B++){var S=O[B];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(I,L(S.key),S)}}function D(I,O,B){return(O=L(O))in I?Object.defineProperty(I,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):I[O]=B,I}function L(I){var O=function(B,S){if(P(B)!="object"||!B)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var M=T.call(B,S);if(P(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(I,"string");return P(O)=="symbol"?O:O+""}var $=function(){return I=function S(T){var M=T.utilities,R=T.options;(function(K,W){if(!(K instanceof W))throw new TypeError("Cannot call a class as a function")})(this,S),D(this,"utilities",void 0),D(this,"options",void 0),D(this,"candidateBoxElement",void 0),D(this,"pageIndex",0),D(this,"pageSize",void 0),this.utilities=M,this.options=R,y.bindMethods(S,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},O=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var T=this,M=S.candidateValue,R=S.targetElement,K=S.onSelect;if(M&&M.length){var W=this.utilities.chunkArray(M.split(" "),this.pageSize);this.renderPage({candidateListPages:W,targetElement:R,pageIndex:this.pageIndex,nbPages:W.length,onItemSelected:function(te,q){K(te,q),T.destroy()}})}}},{key:"renderPage",value:function(S){var T,M=this,R=S.candidateListPages,K=S.targetElement,W=S.pageIndex,te=S.nbPages,q=S.onItemSelected;(T=this.candidateBoxElement)===null||T===void 0||T.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Te=document.createElement("ul");Te.className="hg-candidate-box-list",R[W].forEach(function(un){var Ol,bs=document.createElement("li"),Qo=function(){var ea=new(M.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(ea,"target",{value:bs}),ea};bs.className="hg-candidate-box-list-item",bs.innerHTML=((Ol=M.options.display)===null||Ol===void 0?void 0:Ol[un])||un,M.options.useTouchEvents?bs.ontouchstart=function(ea){return q(un,ea||Qo())}:bs.onclick=function(){var ea=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qo();return q(un,ea)},Te.appendChild(bs)});var Le=W>0,Fe=document.createElement("div");Fe.classList.add("hg-candidate-box-prev"),Le&&Fe.classList.add("hg-candidate-box-btn-active");var De=function(){Le&&M.renderPage({candidateListPages:R,targetElement:K,pageIndex:W-1,nbPages:te,onItemSelected:q})};this.options.useTouchEvents?Fe.ontouchstart=De:Fe.onclick=De,this.candidateBoxElement.appendChild(Fe),this.candidateBoxElement.appendChild(Te);var Ve=W<te-1,me=document.createElement("div");me.classList.add("hg-candidate-box-next"),Ve&&me.classList.add("hg-candidate-box-btn-active");var mt=function(){Ve&&M.renderPage({candidateListPages:R,targetElement:K,pageIndex:W+1,nbPages:te,onItemSelected:q})};this.options.useTouchEvents?me.ontouchstart=mt:me.onclick=mt,this.candidateBoxElement.appendChild(me),K.prepend(this.candidateBoxElement)}}],O&&N(I.prototype,O),B&&N(I,B),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,O,B}(),G=$;function z(I){return function(O){if(Array.isArray(O))return X(O)}(I)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(I)||function(O,B){if(O){if(typeof O=="string")return X(O,B);var S={}.toString.call(O).slice(8,-1);return S==="Object"&&O.constructor&&(S=O.constructor.name),S==="Map"||S==="Set"?Array.from(O):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?X(O,B):void 0}}(I)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function X(I,O){(O==null||O>I.length)&&(O=I.length);for(var B=0,S=Array(O);B<O;B++)S[B]=I[B];return S}function ee(I){return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},ee(I)}function he(I,O){var B=Object.keys(I);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(I);O&&(S=S.filter(function(T){return Object.getOwnPropertyDescriptor(I,T).enumerable})),B.push.apply(B,S)}return B}function V(I,O){for(var B=0;B<O.length;B++){var S=O[B];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(I,ne(S.key),S)}}function F(I,O,B){return(O=ne(O))in I?Object.defineProperty(I,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):I[O]=B,I}function ne(I){var O=function(B,S){if(ee(B)!="object"||!B)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var M=T.call(B,S);if(ee(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(I,"string");return ee(O)=="symbol"?O:O+""}var Se=function(){return I=function S(T,M){var R=this;if(function(De,Ve){if(!(De instanceof Ve))throw new TypeError("Cannot call a class as a function")}(this,S),F(this,"input",void 0),F(this,"options",void 0),F(this,"utilities",void 0),F(this,"caretPosition",void 0),F(this,"caretPositionEnd",void 0),F(this,"keyboardDOM",void 0),F(this,"keyboardPluginClasses",void 0),F(this,"keyboardDOMClass",void 0),F(this,"buttonElements",void 0),F(this,"currentInstanceName",void 0),F(this,"allKeyboardInstances",void 0),F(this,"keyboardInstanceNames",void 0),F(this,"isFirstKeyboardInstance",void 0),F(this,"physicalKeyboard",void 0),F(this,"modules",void 0),F(this,"activeButtonClass",void 0),F(this,"holdInteractionTimeout",void 0),F(this,"holdTimeout",void 0),F(this,"isMouseHold",void 0),F(this,"initialized",void 0),F(this,"candidateBox",void 0),F(this,"keyboardRowsDOM",void 0),F(this,"defaultName","default"),F(this,"activeInputElement",null),F(this,"handleParams",function(De,Ve){var me,mt,un;if(typeof De=="string")me=De.split(".").join(""),mt=document.querySelector(".".concat(me)),un=Ve;else if(De instanceof HTMLDivElement){if(!De.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");me=De.className.split(" ")[0],mt=De,un=Ve}else me="simple-keyboard",mt=document.querySelector(".".concat(me)),un=De;return{keyboardDOMClass:me,keyboardDOM:mt,options:un}}),F(this,"getOptions",function(){return R.options}),F(this,"getCaretPosition",function(){return R.caretPosition}),F(this,"getCaretPositionEnd",function(){return R.caretPositionEnd}),F(this,"registerModule",function(De,Ve){R.modules[De]||(R.modules[De]={}),Ve(R.modules[De])}),F(this,"getKeyboardClassString",function(){for(var De=arguments.length,Ve=new Array(De),me=0;me<De;me++)Ve[me]=arguments[me];return[R.keyboardDOMClass].concat(Ve).filter(function(mt){return!!mt}).join(" ")}),typeof window<"u"){var K=this.handleParams(T,M),W=K.keyboardDOMClass,te=K.keyboardDOM,q=K.options,Te=q===void 0?{}:q;this.utilities=new y({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=te,this.options=function(De){for(var Ve=1;Ve<arguments.length;Ve++){var me=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?he(Object(me),!0).forEach(function(mt){F(De,mt,me[mt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(me)):he(Object(me)).forEach(function(mt){Object.defineProperty(De,mt,Object.getOwnPropertyDescriptor(me,mt))})}return De}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Te),this.keyboardPluginClasses="",y.bindMethods(S,this);var Le=this.options.inputName,Fe=Le===void 0?this.defaultName:Le;if(this.input={},this.input[Fe]="",this.keyboardDOMClass=W,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new E({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new G({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(W,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},O=[{key:"setCaretPosition",value:function(S){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=T}},{key:"getInputCandidates",value:function(S){var T=this,M=this.options,R=M.layoutCandidates,K=M.layoutCandidatesCaseSensitiveMatch;if(!R||ee(R)!=="object")return{};var W=Object.keys(R).filter(function(Te){var Le=S.substring(0,T.getCaretPositionEnd()||0)||S,Fe=new RegExp("".concat(T.utilities.escapeRegex(Te),"$"),K?"g":"gi");return!!z(Le.matchAll(Fe)).length});if(W.length>1){var te=W.sort(function(Te,Le){return Le.length-Te.length})[0];return{candidateKey:te,candidateValue:R[te]}}if(W.length){var q=W[0];return{candidateKey:q,candidateValue:R[q]}}return{}}},{key:"showCandidatesBox",value:function(S,T,M){var R=this;this.candidateBox&&this.candidateBox.show({candidateValue:T,targetElement:M,onSelect:function(K,W){var te=R.options,q=te.layoutCandidatesCaseSensitiveMatch,Te=te.disableCandidateNormalization,Le=te.enableLayoutCandidatesKeyPress,Fe=K;Te||(Fe=K.normalize("NFD")),typeof R.options.beforeInputUpdate=="function"&&R.options.beforeInputUpdate(R);var De=R.getInput(R.options.inputName,!0),Ve=R.getCaretPositionEnd()||0,me=De.substring(0,Ve||0)||De,mt=new RegExp("".concat(R.utilities.escapeRegex(S),"$"),q?"g":"gi"),un=me.replace(mt,Fe),Ol=De.replace(me,un),bs=un.length-me.length,Qo=(Ve||De.length)+bs;Qo<0&&(Qo=0),R.setInput(Ol,R.options.inputName,!0),R.setCaretPosition(Qo),Le&&typeof R.options.onKeyPress=="function"&&R.options.onKeyPress(K,W),typeof R.options.onChange=="function"&&R.options.onChange(R.getInput(R.options.inputName,!0),W),typeof R.options.onChangeAll=="function"&&R.options.onChangeAll(R.getAllInputs(),W)}})}},{key:"handleButtonClicked",value:function(S,T){var M=this.options,R=M.inputName,K=R===void 0?this.defaultName:R,W=M.debug;if(S!=="{//}"){this.input[K]||(this.input[K]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var te=this.utilities.getUpdatedInput(S,this.input[K],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[K]&&this.input[K]===te&&this.caretPosition===0&&this.caretPositionEnd===te.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,T);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,T),this.input[K]!==te&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(te))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,te))return;var q=this.utilities.getUpdatedInput(S,this.input[K],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(q,this.options.inputName,!0),W&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),T==null?void 0:T.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),T),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),T),T!=null&&T.target&&this.options.enableLayoutCandidates){var Te,Le=this.getInputCandidates(te),Fe=Le.candidateKey,De=Le.candidateValue;Fe&&De?this.showCandidatesBox(Fe,De,this.keyboardDOM):(Te=this.candidateBox)===null||Te===void 0||Te.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),W&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function(T){T.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,T){var M=this;T&&(this.options.preventMouseDownDefault&&T.preventDefault(),this.options.stopMouseDownPropagation&&T.stopPropagation(),T.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(M.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(M.options.debug&&console.log("Button held:",S),M.handleButtonHold(S)),clearTimeout(M.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,T){var M=this;T&&(this.options.preventMouseUpDefault&&T.preventDefault&&T.preventDefault(),this.options.stopMouseUpPropagation&&T.stopPropagation&&T.stopPropagation(),!(T.target===this.keyboardDOM||T.target&&this.keyboardDOM.contains(T.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(T.target===this.candidateBox.candidateBoxElement||T.target&&this.candidateBox.candidateBoxElement.contains(T.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(R){R.classList.remove(M.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,T)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var T=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){T.getMouseHold()?(T.handleButtonClicked(S),T.handleButtonHold(S)):clearTimeout(T.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function(T){T.replaceInput(S.input),T.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,T=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!T&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[S].replace("‫","").replace("‬","")+"‬":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,T={};return Object.keys(this.input).forEach(function(M){T[M]=S.getInput(M,!0)}),T}},{key:"setInput",value:function(S){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,M=arguments.length>2?arguments[2]:void 0;this.input[T]=S,!M&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=this.changedOptions(S);this.options=Object.assign(this.options,S),T.length&&(this.options.debug&&console.log("changedOptions",T),this.onSetOptions(T),this.render())}},{key:"changedOptions",value:function(S){var T=this;return Object.keys(S).filter(function(M){return JSON.stringify(S[M])!==JSON.stringify(T.options[M])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new G({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(T){S(window.SimpleKeyboardInstances[T],T)})}},{key:"addButtonTheme",value:function(S,T){var M=this;T&&S&&(S.split(" ").forEach(function(R){T.split(" ").forEach(function(K){M.options.buttonTheme||(M.options.buttonTheme=[]);var W=!1;M.options.buttonTheme.map(function(te){if(te!=null&&te.class.split(" ").includes(K)){W=!0;var q=te.buttons.split(" ");q.includes(R)||(W=!0,q.push(R),te.buttons=q.join(" "))}return te}),W||M.options.buttonTheme.push({class:K,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,T){var M=this;if(!S&&!T)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function(R){var K;(K=M.options)===null||K===void 0||(K=K.buttonTheme)===null||K===void 0||K.map(function(W,te){if(W&&T&&T.includes(W.class)||!T){var q,Te,Le=(q=W)===null||q===void 0?void 0:q.buttons.split(" ").filter(function(Fe){return Fe!==R});W&&Le!=null&&Le.length?W.buttons=Le.join(" "):((Te=M.options.buttonTheme)===null||Te===void 0||Te.splice(te,1),W=null)}return W})}),this.render())}},{key:"getButtonElement",value:function(S){var T,M=this.buttonElements[S];return M&&(T=M.length>1?M:M[0]),T}},{key:"inputPatternIsValid",value:function(S){var T,M=this.options.inputPattern;if((T=M instanceof RegExp?M:M[this.options.inputName||this.defaultName])&&S){var R=T.test(S);return this.options.debug&&console.log('inputPattern ("'.concat(T,'"): ').concat(R?"passed":"did not pass!")),R}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,T=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,T),document.addEventListener("keydown",this.handleKeyDown,T),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var T,M=this;S.target.tagName&&(T=S.target.tagName.toLowerCase()),this.dispatch(function(R){var K=S.target===R.keyboardDOM||S.target&&R.keyboardDOM.contains(S.target);if(M.options.syncInstanceInputs&&Array.isArray(S.path)&&(K=S.path.some(function(q){var Te;return q==null||(Te=q.hasAttribute)===null||Te===void 0?void 0:Te.call(q,"data-skInstance")})),(T==="textarea"||T==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!R.options.disableCaretPositioning){var W=S.target.selectionStart,te=S.target.selectionEnd;R.options.rtl&&(W=R.utilities.getRtlOffset(W,R.getInput()),te=R.utilities.getRtlOffset(te,R.getInput())),R.setCaretPosition(W,te),R.activeInputElement=S.target,R.options.debug&&console.log("Caret at: ",R.getCaretPosition(),R.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat(R.keyboardDOMClass,")"),S==null?void 0:S.type)}else!R.options.disableCaretPositioning&&K||(S==null?void 0:S.type)==="selectionchange"||(R.setCaretPosition(null),R.activeInputElement=null,R.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var T=this;S&&Object.keys(this.buttonElements).forEach(function(M){return T.buttonElements[M].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,T=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,T),document.removeEventListener("keydown",this.handleKeyDown,T),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(M){M&&(M.onpointerdown=null,M.onpointerup=null,M.onpointercancel=null,M.ontouchstart=null,M.ontouchend=null,M.ontouchcancel=null,M.onclick=null,M.onmousedown=null,M.onmouseup=null,M.remove(),M=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var T=this.options.buttonTheme,M=[];return Array.isArray(T)&&T.forEach(function(R){if(R&&R.class&&typeof R.class=="string"&&R.buttons&&typeof R.buttons=="string"){var K=R.class.split(" ");R.buttons.split(" ").includes(S)&&(M=[].concat(z(M),z(K)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',R)}),M}},{key:"setDOMButtonAttributes",value:function(S,T){var M=this.options.buttonAttributes;Array.isArray(M)&&M.forEach(function(R){R.attribute&&typeof R.attribute=="string"&&R.value&&typeof R.value=="string"&&R.buttons&&typeof R.buttons=="string"?R.buttons.split(" ").includes(S)&&T(R.attribute,R.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',R)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){if(S.target.classList.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(T){var M=new T(S);M.init&&M.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,T){return!!this.modules[S]&&this.modules[S][T]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,T,M,R){var K=this,W=Array.from(S.children),te=0;return W.length&&M.forEach(function(q,Te){var Le=R[Te];if(!(Le&&Le>q))return!1;var Fe=q-te,De=Le-te,Ve=document.createElement("div");Ve.className+="hg-button-container";var me="".concat(K.options.layoutName,"-r").concat(T,"c").concat(Te);Ve.setAttribute("data-skUID",me);var mt=W.splice(Fe,De-Fe+1);te=De-Fe,mt.forEach(function(un){return Ve.appendChild(un)}),W.splice(Fe,0,Ve),S.innerHTML="",W.forEach(function(un){return S.appendChild(un)}),K.options.debug&&console.log("rowDOMContainer",mt,Fe,De,te+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var T="hg-layout-".concat(this.options.layoutName),M=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},R=this.options.useTouchEvents||!1,K=R?"hg-touch-events":"",W=this.options.useMouseEvents||!1,te=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,T,this.keyboardPluginClasses,K),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",M[this.options.layoutName||this.defaultName].forEach(function(q,Te){var Le=q.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&(Le=Le.filter(function(me){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(me)}));var Fe=document.createElement("div");Fe.className+="hg-row";var De=[],Ve=[];Le.forEach(function(me,mt){var un,Ol=!te&&typeof me=="string"&&me.length>1&&me.indexOf("[")===0,bs=!te&&typeof me=="string"&&me.length>1&&me.indexOf("]")===me.length-1;Ol&&(De.push(mt),me=me.replace(/\[/g,"")),bs&&(Ve.push(mt),me=me.replace(/\]/g,""));var Qo=S.utilities.getButtonClass(me),ea=S.utilities.getButtonDisplayName(me,S.options.display,S.options.mergeDisplay),P8=S.options.useButtonTag?"button":"div",Pn=document.createElement(P8);Pn.className+="hg-button ".concat(Qo),(un=Pn.classList).add.apply(un,z(S.getButtonThemeClasses(me))),S.setDOMButtonAttributes(me,function(Xt,R8){Pn.setAttribute(Xt,R8)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||R||W?R?(Pn.ontouchstart=function(Xt){S.handleButtonClicked(me,Xt),S.handleButtonMouseDown(me,Xt)},Pn.ontouchend=function(Xt){S.handleButtonMouseUp(me,Xt)},Pn.ontouchcancel=function(Xt){S.handleButtonMouseUp(me,Xt)}):(Pn.onclick=function(Xt){S.setMouseHold(!1),typeof S.options.onKeyReleased!="function"&&S.handleButtonClicked(me,Xt)},Pn.onmousedown=function(Xt){typeof S.options.onKeyReleased!="function"||S.isMouseHold||S.handleButtonClicked(me,Xt),S.handleButtonMouseDown(me,Xt)},Pn.onmouseup=function(Xt){S.handleButtonMouseUp(me,Xt)}):(Pn.onpointerdown=function(Xt){S.handleButtonClicked(me,Xt),S.handleButtonMouseDown(me,Xt)},Pn.onpointerup=function(Xt){S.handleButtonMouseUp(me,Xt)},Pn.onpointercancel=function(Xt){S.handleButtonMouseUp(me,Xt)}),Pn.setAttribute("data-skBtn",me);var T8="".concat(S.options.layoutName,"-r").concat(Te,"b").concat(mt);Pn.setAttribute("data-skBtnUID",T8);var MA=document.createElement("span");MA.innerHTML=ea,Pn.appendChild(MA),S.buttonElements[me]||(S.buttonElements[me]=[]),S.buttonElements[me].push(Pn),Fe.appendChild(Pn)}),Fe=S.parseRowDOMContainers(Fe,Te,De,Ve),S.keyboardRowsDOM.appendChild(Fe)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||R||W?R?(document.ontouchend=function(q){return S.handleButtonMouseUp(void 0,q)},document.ontouchcancel=function(q){return S.handleButtonMouseUp(void 0,q)},this.keyboardDOM.ontouchstart=function(q){return S.handleKeyboardContainerMouseDown(q)}):R||(document.onmouseup=function(q){return S.handleButtonMouseUp(void 0,q)},this.keyboardDOM.onmousedown=function(q){return S.handleKeyboardContainerMouseDown(q)}):(document.onpointerup=function(q){return S.handleButtonMouseUp(void 0,q)},this.keyboardDOM.onpointerdown=function(q){return S.handleKeyboardContainerMouseDown(q)}),this.onInit())}}],O&&V(I.prototype,O),B&&V(I,B),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,O,B}(),Z=Se,ue=Z;return u}()},442:function(a){a.exports=n}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var u=r[a]={exports:{}};return i[a].call(u.exports,u,u.exports,s),u.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var u in l)s.o(l,u)&&!s.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return g},default:function(){return b}});var a=s(442);function l(v){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l(v)}function u(v,y){var w=Object.keys(v);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(v);y&&(_=_.filter(function(k){return Object.getOwnPropertyDescriptor(v,k).enumerable})),w.push.apply(w,_)}return w}function c(v){for(var y=1;y<arguments.length;y++){var w=arguments[y]!=null?arguments[y]:{};y%2?u(Object(w),!0).forEach(function(_){d(v,_,w[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(w)):u(Object(w)).forEach(function(_){Object.defineProperty(v,_,Object.getOwnPropertyDescriptor(w,_))})}return v}function d(v,y,w){return(y=function(_){var k=function(C,E){if(l(C)!="object"||!C)return C;var P=C[Symbol.toPrimitive];if(P!==void 0){var N=P.call(C,E||"default");if(l(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(C)}(_,"string");return l(k)=="symbol"?k:k+""}(y))in v?Object.defineProperty(v,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):v[y]=w,v}var h=function(v){return c(c({},v),{},{keyboardRef:null})},f=s(651),p=s.n(f),g=function(v){var y=v.baseClass||"react-simple-keyboard",w=a.useRef(null),_=a.useRef(null),k=a.useRef(null),C=a.useRef(v);return a.useEffect(function(){return function(){k.current&&k.current.destroy(),w.current=!1}},[]),a.useEffect(function(){var E=function($){return c(c({},$),{},{theme:"simple-keyboard ".concat($.theme||"hg-theme-default")})}(v);if(!w.current){w.current=!0,E.debug&&console.log("ReactSimpleKeyboard: Init");var P=_.current,N=".".concat(y);k.current=new(p())(P||N,E),E.keyboardRef&&E.keyboardRef(k.current)}var D=function($,G){var z=h(G),X=h($);return Object.keys(z).filter(function(ee){return z[ee]!==X[ee]})}(C.current,E);if(D.length){var L=k.current;C.current=E,L==null||L.setOptions(E),E.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",D)}},[w,y,C,v]),a.createElement("div",{className:y,ref:_})},b=g}(),o}()})})(cz);var Dle=cz.exports;const Lle=$u(Dle),jle={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},Fle={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},WN="Á É Í Ó Ú á é í ó ú ́",GN="Ü ü ̈";function $le(){const t=nE(),e=vt(),{status:n,dispatch:i,devices:r}=An(),[s,o]=x.useState("none"),[a,l]=x.useState(!1),[u,c]=x.useState(!1),d=x.useMemo(()=>[t,t==="es"&&(a&&"accent"||u&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,u]),h=x.useCallback(f=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",f)},[n,i,r.keyboard]);return r.keyboard?m.jsxs("div",{className:"absolute left-[1450px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),m.jsx(Lle,{theme:$e("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",u&&"hg-diaeresisDeadKey"),layoutName:d,layout:jle,display:Fle[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:WN},{class:"hg-diaeresisDeadKeyButton",buttons:GN}],disableButtonHold:!0,onKeyPress:f=>{if(f==="{shiftleft}"||f==="{shiftright}"){o(p=>p==="none"?"once":"none");return}if(f==="{lock}"){o(p=>p==="none"?"lock":"none");return}if(t==="es"){if(a){WN.includes(f)&&(l(!1),s==="once"&&o("none"),h(f));return}else if(f==="́"){l(!0);return}if(u){GN.includes(f)&&(c(!1),s==="once"&&o("none"),h(f));return}else if(f==="̈"){c(!0);return}}s==="once"&&o("none"),h(f==="{bksp}"?"\b":f==="{enter}"?`
`:f==="{tab}"?"	":f==="{space}"?" ":f)}})]}):null}function Ble(){const t=vt(),{devices:e}=An(),n=lt($E).toArray();return e.leds?m.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),m.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>m.jsx("div",{className:$e("relative h-7 w-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:m.jsx("div",{className:$e("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})},r))})]}):null}function zle(){const t=vt(),e=lt(Ute),n=lt(qe.IP),i=lt(a5),r=lt(l5),s=()=>{const o=[];for(let a=0;a<256;a+=16){const l=e.slice(a,a+16);o.push(l)}return o};return m.jsxs("div",{className:"absolute left-[800px] top-0 z-10 h-auto w-auto rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.memory.name")}),m.jsx("div",{className:"m-4 overflow-x-auto",children:m.jsxs("table",{className:"border-collapse w-auto mx-auto text-center font-mono",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{}),Array.from({length:16}).map((o,a)=>m.jsx("th",{className:"border border-gray-300 w-8 h-8 bg-mantis-500",children:a.toString(16).toUpperCase()},a))]})}),m.jsx("tbody",{children:s().map((o,a)=>m.jsxs("tr",{children:[m.jsx("th",{className:"border border-gray-300 w-8 h-8 bg-mantis-500",children:a.toString(16).toUpperCase()}),o.map((l,u)=>{var c,d;return m.jsx("td",{className:"border border-gray-300 w-8 h-8",children:m.jsx(Ule,{address:l.address,value:l.value,isIP:l.address.valueOf()===n.valueOf(),isProgramAddress:!!i.find(h=>h.address===l.address.value),isDataAddress:!!r.find(h=>h.address===l.address.value),label:((c=i.find(h=>h.address===l.address.value))==null?void 0:c.name)||((d=r.find(h=>h.address===l.address.value))==null?void 0:d.label)||null})},u)})]},a))})]})})]})}function Ule({address:t,value:e,isIP:n,isProgramAddress:i,isDataAddress:r,label:s}){const o=vt(),a=lt(wp),l=o("computer.memory.cell",t);return m.jsxs(lz,{children:[m.jsx(uz,{asChild:!0,children:m.jsx(gn.div,{title:l,className:`cursor-pointer border border-stone-600 w-8 h-8 flex items-center justify-center ${n?"bg-red-500":i?"bg-blue-500":r?"bg-teal-500":"bg-stone-800"} text-white`,style:t.value===a.value?Rt("memory.operating-cell"):void 0,children:e.toString("hex")})}),m.jsxs(cA,{className:"w-60",children:[m.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[" ",l," "," ",s?m.jsxs("span",{className:"text-mantis-400 font-bold",children:["(",s,")"]}):""]}),m.jsx("hr",{className:"border-stone-600"}),m.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(u=>m.jsxs("li",{children:[m.jsx("b",{className:"font-medium",children:o(`generics.byte-representation.${u}`)}),":"," ",m.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(u)})]},u))})]})]})}function Hle(){const t=vt(),{devices:e}=An();return e.pic?m.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsxs("div",{className:"flex items-start",children:[m.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),m.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[m.jsx(nr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:BE,springs:"pic.IMR",emphasis:!0}),m.jsx(nr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:zE,springs:"pic.IRR",emphasis:!0}),m.jsx(nr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:UE,springs:"pic.ISR",emphasis:!0})]})]}),m.jsx("hr",{className:"mb-2 border-stone-600"}),m.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:Fy.map((n,i)=>m.jsx(nr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function Vle(){const t=vt(),{devices:e}=An();return e.pio?m.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"mb-2 block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),m.jsx("hr",{className:"border-stone-600"}),m.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[m.jsx(nr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:HE,springs:"pio.PA"}),m.jsx(nr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:WE,springs:"pio.CA"})]}),m.jsx("hr",{className:"border-stone-600"}),m.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[m.jsx(nr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:VE,springs:"pio.PB"}),m.jsx(nr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:GE,springs:"pio.CB"})]})]}):null}const Wle="_printer_fbkny_2",Gle="_shadow_fbkny_6",Kle="_sides_fbkny_11",Xle="_front_fbkny_22",qle="_trailContainer_fbkny_27",Yle="_trail_fbkny_27",Zle="_paper_fbkny_33",Bl={printer:Wle,shadow:Gle,sides:Kle,front:Xle,trailContainer:qle,trail:Yle,paper:Zle},Jle=Array.from({length:5},(t,e)=>e);function Qle(){const t=vt(),{devices:e}=An(),n=lt($y),i=lt(By);return e.printer?m.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:m.jsxs("div",{className:Bl.printer,title:t("computer.printer.name"),children:[m.jsx("div",{className:Bl.shadow}),m.jsx("div",{className:Bl.sides}),m.jsxs("div",{className:Bl.front,children:[m.jsx("div",{className:Bl.trailContainer,children:m.jsx("div",{className:Bl.trail,children:m.jsx("pre",{className:Bl.paper,children:i})})}),m.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:Jle.map(r=>{const s=n[r]?c3(n[r].unsigned):null;return m.jsx("span",{className:$e("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),m.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:m.jsx(gn.div,{className:"h-full bg-mantis-400",style:{width:Rt("printer.printing.progress").to(r=>`${r*100}%`),opacity:Rt("printer.printing.opacity")}})})]})]})}):null}const eue="_container_6nvz7_2",tue="_text_6nvz7_22",KN={container:eue,text:tue};function nue(){const t=vt(),{devices:e}=An(),n=lt(KE);return e.screen?m.jsxs("div",{className:"absolute left-[1450px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),m.jsx("div",{className:KN.container,children:m.jsx("pre",{className:KN.text,children:n})})]}):null}function iue(){const t=vt(),{status:e,dispatch:n,devices:i}=An(),r=lt(XE).toArray();return i.switches?m.jsxs("div",{className:"absolute left-[1300px] top-[700px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),m.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:r.map((s,o)=>m.jsx("div",{className:"w-6",children:m.jsx(da,{checked:s,onCheckedChange:()=>n("switch.toggle",o),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800",disabled:e.type!=="running"})},o))})]}):null}function rue(){const t=vt(),{devices:e}=An();return e.timer?m.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[m.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),m.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[m.jsx(nr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:qE,springs:"timer.CONT"}),m.jsx(nr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:YE,springs:"timer.COMP"})]})]}):null}function dz(){const t=x.useRef(null);return m.jsx("div",{className:"relative h-full w-full",children:m.jsxs(ile,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[m.jsx(ole,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:m.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[m.jsx(hle,{}),m.jsx(Ple,{}),m.jsx(zle,{}),m.jsx(Ile,{}),m.jsx(Hle,{}),m.jsx(Vle,{}),m.jsx(rue,{}),m.jsx(fle,{}),m.jsx(Ole,{}),m.jsx($le,{}),m.jsx(Ble,{}),m.jsx(Qle,{}),m.jsx(iue,{}),m.jsx(nue,{})]})}),m.jsx(ale,{wrapperRef:t})]})})}function sue(){const t=vt(),e=lt(Iu),n=lt(J0),[i]=Qp(),[r,s]=x.useState({x:250,y:450}),[o,a]=x.useState(!1),[l,u]=x.useState({x:0,y:0}),c=f=>{a(!0),u({x:f.clientX-r.x,y:f.clientY-r.y})},d=f=>{o&&s({x:f.clientX-l.x,y:f.clientY-l.y})},h=()=>{a(!1)};return x.useEffect(()=>(o?(window.addEventListener("mousemove",d),window.addEventListener("mouseup",h)):(window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",h)),()=>{window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",h)}),[o]),i.showStatsCPU?m.jsxs("div",{className:"absolute z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",style:{left:`${r.x}px`,top:`${r.y}px`},children:[m.jsx("span",{className:"mb-2 block h-min w-full rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-blue-500 px-2 py-1 text-lg text-white cursor-move",onMouseDown:c,children:t("computer.cpu.stats")}),m.jsx("hr",{className:"border-stone-600"}),m.jsx("div",{className:"flex flex-col w-full items-start py-2 px-2",children:m.jsxs("div",{className:"text-white pl-1 text-sm text-left",children:[m.jsxs("div",{className:"mb-1",children:["Total de ciclos: ",e]}),m.jsxs("div",{children:["Recuento de instrucciones: ",n]})]})})]}):null}function oue(){const t=vt(),e=lt(Ft),n=lt(Iu),i=lt(My),r=lt(wn),s=lt(ky),[o]=Qp(),a=x.useRef(null),[l,u]=x.useState({x:250,y:80}),[c,d]=x.useState(!1),[h,f]=x.useState({x:0,y:0}),p=(y,w)=>{const[_,...k]=y.split(":"),C=k.join(":").trim();return{cycle:w,stage:_.trim(),action:C}};x.useEffect(()=>{if(e){const y=p(e,n);H.set(My,w=>[...w,y])}},[e]),x.useEffect(()=>{r.type==="running"&&s&&Yi({title:"El programa ha sido modificado",description:"La ejecución se reiniciará desde el principio para aplicar los cambios.",variant:"info"})},[r,s]),x.useEffect(()=>{const y=a.current;y&&(y.scrollTop=y.scrollHeight)},[i]);const g=y=>{d(!0),f({x:y.clientX-l.x,y:y.clientY-l.y})},b=y=>{c&&u({x:y.clientX-h.x,y:y.clientY-h.y})},v=()=>{d(!1)};return x.useEffect(()=>(c?(window.addEventListener("mousemove",b),window.addEventListener("mouseup",v)):(window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",v)),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",v)}),[c]),o.showInstructionCycle?m.jsxs("div",{className:"absolute z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",style:{left:`${l.x}px`,top:`${l.y}px`},children:[m.jsx("span",{className:"mb-2 block h-min w-full rounded-br-lg rounded-tl-lg border-b border-stone-600 bg-purple-500 px-2 py-1 text-lg text-white cursor-move",onMouseDown:g,children:t("computer.cpu.instruction-cycle")}),m.jsx("hr",{className:"border-stone-600"}),m.jsx("div",{ref:a,className:"flex flex-col w-full py-2 px-2 overflow-y-auto max-h-[300px]",children:i.map((y,w)=>{const _=w===0||i[w-1].stage!==y.stage;return m.jsxs("div",{children:[_&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:`mb-2 ${y.stage==="Captación"?"text-blue-400 text-lg font-serif":y.stage==="Ejecución"?"text-green-400 text-lg font-sans":y.stage==="Interrupción"?"text-red-400 text-lg font-mono":"text-white text-sm font-bold"}`,children:["Etapa: ",y.stage]}),y.stage!=="Interrupción"&&m.jsxs("div",{className:"flex text-white text-sm font-bold mb-2 font-serif",children:[m.jsx("div",{className:"w-1/4 text-center",children:"Ciclo"}),m.jsx("div",{className:"w-3/4 text-left",children:"Acción"})]})]}),y.stage==="Interrupción"?m.jsx("div",{className:"text-white text-sm mb-1",children:y.action}):m.jsxs("div",{className:"flex text-white text-sm mb-1",children:[m.jsx("div",{className:"w-1/4 text-center",children:y.cycle}),m.jsx("div",{className:"w-3/4 text-left",children:y.action})]})]},w)})})]}):null}const aue=1024;let lue=0;class v1{constructor(e,n){this.from=e,this.to=n}}class ut{constructor(e={}){this.id=lue++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Bi.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}ut.closedBy=new ut({deserialize:t=>t.split(" ")});ut.openedBy=new ut({deserialize:t=>t.split(" ")});ut.group=new ut({deserialize:t=>t.split(" ")});ut.isolate=new ut({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});ut.contextHash=new ut({perNode:!0});ut.lookAhead=new ut({perNode:!0});ut.mounted=new ut({perNode:!0});class Hy{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[ut.mounted.id]}}const uue=Object.create(null);class Bi{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):uue,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Bi(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(ut.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(ut.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Bi.none=new Bi("",Object.create(null),0,8);class dA{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Bi(i.name,r,i.id,i.flags):i)}return new dA(n)}}const Sg=new WeakMap,XN=new WeakMap;var jn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(jn||(jn={}));class Wt{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Hy.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new W_(this.topNode,e)}cursorAt(e,n=0,i=0){let r=Sg.get(this)||this.topNode,s=new W_(r);return s.moveTo(e,n),Sg.set(this,s._tree),s}get topNode(){return new Fr(this,0,0,null)}resolve(e,n=0){let i=Pp(Sg.get(this)||this.topNode,e,n,!1);return Sg.set(this,i),i}resolveInner(e,n=0){let i=Pp(XN.get(this)||this.topNode,e,n,!0);return XN.set(this,i),i}resolveStack(e,n=0){return hue(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&jn.IncludeAnonymous)>0;for(let l=this.cursor(o|jn.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:pA(Bi.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new Wt(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new Wt(Bi.none,n,i,r)))}static build(e){return fue(e)}}Wt.empty=new Wt(Bi.none,[],[],0);class hA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new hA(this.buffer,this.index)}}class vl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Bi.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(hz(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let u=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,u)}return new vl(s,o,this.set)}}function hz(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Pp(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Fr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:jn.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Fr&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class fz{cursor(e=0){return new W_(this,e)}getChild(e,n=null,i=null){let r=qN(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return qN(this,e,n,i)}resolve(e,n=0){return Pp(this,e,n,!1)}resolveInner(e,n=0){return Pp(this,e,n,!0)}matchContext(e){return V_(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class Fr extends fz{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if(hz(r,i,d,d+c.length)){if(c instanceof vl){if(s&jn.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,i-d,r);if(h>-1)return new La(new cue(o,c,e,d),null,h)}else if(s&jn.IncludeAnonymous||!c.type.isAnonymous||fA(c)){let h;if(!(s&jn.IgnoreMounts)&&(h=Hy.get(c))&&!h.overlay)return new Fr(h.tree,d,e,o);let f=new Fr(c,d,e,o);return s&jn.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&jn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&jn.IgnoreOverlays)&&(r=Hy.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Fr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function qN(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function V_(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class cue{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class La extends fz{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new La(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&jn.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new La(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new La(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new La(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new Wt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function pz(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof Fr&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new due(r,n)}class due{constructor(e,n){this.heads=e,this.node=n}get next(){return pz(this.heads)}}function hue(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof Fr?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=Hy.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Fr(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Pp(a,e,n,!1))}}return r?pz(r):i}class W_{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Fr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Fr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&jn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&jn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&jn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&jn.IncludeAnonymous||a instanceof vl||!a.type.isAnonymous||fA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new La(this.buffer,n,this.stack[r]);return this.bufferNode=new La(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return V_(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return V_(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function fA(t){return t.children.some(e=>e instanceof vl||!e.type.isAnonymous||fA(e))}function fue(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=aue,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new hA(n,n.length):n,l=i.types,u=0,c=0;function d(k,C,E,P,N,D){let{id:L,start:$,end:G,size:z}=a,X=c,ee=u;for(;z<0;)if(a.next(),z==-1){let Se=s[L];E.push(Se),P.push($-k);return}else if(z==-3){u=L;return}else if(z==-4){c=L;return}else throw new RangeError(`Unrecognized record size: ${z}`);let he=l[L],V,F,ne=$-k;if(G-$<=r&&(F=b(a.pos-C,N))){let Se=new Uint16Array(F.size-F.skip),Z=a.pos-F.size,ue=Se.length;for(;a.pos>Z;)ue=v(F.start,Se,ue);V=new vl(Se,G-F.start,i),ne=F.start-k}else{let Se=a.pos-z;a.next();let Z=[],ue=[],I=L>=o?L:-1,O=0,B=G;for(;a.pos>Se;)I>=0&&a.id==I&&a.size>=0?(a.end<=B-r&&(p(Z,ue,$,O,a.end,B,I,X,ee),O=Z.length,B=a.end),a.next()):D>2500?h($,Se,Z,ue):d($,Se,Z,ue,I,D+1);if(I>=0&&O>0&&O<Z.length&&p(Z,ue,$,O,$,B,I,X,ee),Z.reverse(),ue.reverse(),I>-1&&O>0){let S=f(he,ee);V=pA(he,Z,ue,0,Z.length,0,G-$,S,S)}else V=g(he,Z,ue,G-$,X-G,ee)}E.push(V),P.push(ne)}function h(k,C,E,P){let N=[],D=0,L=-1;for(;a.pos>C;){let{id:$,start:G,end:z,size:X}=a;if(X>4)a.next();else{if(L>-1&&G<L)break;L<0&&(L=z-r),N.push($,G,z),D++,a.next()}}if(D){let $=new Uint16Array(D*4),G=N[N.length-2];for(let z=N.length-3,X=0;z>=0;z-=3)$[X++]=N[z],$[X++]=N[z+1]-G,$[X++]=N[z+2]-G,$[X++]=X;E.push(new vl($,N[2]-G,i)),P.push(G-k)}}function f(k,C){return(E,P,N)=>{let D=0,L=E.length-1,$,G;if(L>=0&&($=E[L])instanceof Wt){if(!L&&$.type==k&&$.length==N)return $;(G=$.prop(ut.lookAhead))&&(D=P[L]+$.length+G)}return g(k,E,P,N,D,C)}}function p(k,C,E,P,N,D,L,$,G){let z=[],X=[];for(;k.length>P;)z.push(k.pop()),X.push(C.pop()+E-N);k.push(g(i.types[L],z,X,D-N,$-D,G)),C.push(N-E)}function g(k,C,E,P,N,D,L){if(D){let $=[ut.contextHash,D];L=L?[$].concat(L):[$]}if(N>25){let $=[ut.lookAhead,N];L=L?[$].concat(L):[$]}return new Wt(k,C,E,P,L)}function b(k,C){let E=a.fork(),P=0,N=0,D=0,L=E.end-r,$={size:0,start:0,skip:0};e:for(let G=E.pos-k;E.pos>G;){let z=E.size;if(E.id==C&&z>=0){$.size=P,$.start=N,$.skip=D,D+=4,P+=4,E.next();continue}let X=E.pos-z;if(z<0||X<G||E.start<L)break;let ee=E.id>=o?4:0,he=E.start;for(E.next();E.pos>X;){if(E.size<0)if(E.size==-3)ee+=4;else break e;else E.id>=o&&(ee+=4);E.next()}N=he,P+=z,D+=ee}return(C<0||P==k)&&($.size=P,$.start=N,$.skip=D),$.size>4?$:void 0}function v(k,C,E){let{id:P,start:N,end:D,size:L}=a;if(a.next(),L>=0&&P<o){let $=E;if(L>4){let G=a.pos-(L-4);for(;a.pos>G;)E=v(k,C,E)}C[--E]=$,C[--E]=D-k,C[--E]=N-k,C[--E]=P}else L==-3?u=P:L==-4&&(c=P);return E}let y=[],w=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,y,w,-1,0);let _=(e=t.length)!==null&&e!==void 0?e:y.length?w[0]+y[0].length:0;return new Wt(l[t.topID],y.reverse(),w.reverse(),_)}const YN=new WeakMap;function mv(t,e){if(!t.isAnonymous||e instanceof vl||e.type!=t)return 1;let n=YN.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof Wt)){n=1;break}n+=mv(t,i)}YN.set(e,n)}return n}function pA(t,e,n,i,r,s,o,a,l){let u=0;for(let p=i;p<r;p++)u+=mv(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,g,b,v,y){for(let w=b;w<v;){let _=w,k=g[w],C=mv(t,p[w]);for(w++;w<v;w++){let E=mv(t,p[w]);if(C+E>=c)break;C+=E}if(w==_+1){if(C>c){let E=p[_];f(E.children,E.positions,0,E.children.length,g[_]+y);continue}d.push(p[_])}else{let E=g[w-1]+p[w-1].length-k;d.push(pA(t,p,g,_,w,k,E,null,l))}h.push(k+y-s)}}return f(e,n,i,r,0),(a||l)(d,h,o)}class gu{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new gu(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,d=c?c.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||u){let f=Math.max(h.from,l)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new gu(f,p,h.tree,h.offset+u,a>0,!!c)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return r}}class mz{startParse(e,n,i){return typeof e=="string"&&(e=new pue(e)),i=i?i.length?i.map(r=>new v1(r.from,r.to)):[new v1(0,0)]:[new v1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class pue{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new ut({perNode:!0});let mue=0;class mn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=mue++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof mn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new mn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new Vy(e);return i=>i.modified.indexOf(n)>-1?i:Vy.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let gue=0;class Vy{constructor(e){this.name=e,this.instances=[],this.id=gue++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&vue(n,a.modified));if(i)return i;let r=[],s=new mn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=yue(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(Vy.get(a,l));return s}}function vue(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function yue(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function wue(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+r);let c=new Wy(i,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return gz.add(e)}const gz=new ut;class Wy{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Wy.empty=new Wy([],2,null);function vz(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function bue(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function xue(t,e,n,i=0,r=t.length){let s=new Sue(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class Sue{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=r,c=_ue(e)||Wy.empty,d=bue(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),u),c.opaque)return;let h=e.tree&&e.tree.prop(ut.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(b=>!b.scope||b.scope(h.tree.type)),g=e.firstChild();for(let b=0,v=a;;b++){let y=b<h.overlay.length?h.overlay[b]:null,w=y?y.from+a:l,_=Math.max(n,v),k=Math.min(i,w);if(_<k&&g)for(;e.from<k&&(this.highlightRange(e,_,k,r,s),this.startSpan(Math.min(k,e.to),u),!(e.to>=w||!e.nextSibling())););if(!y||w>i)break;v=y.to+a,v>n&&(this.highlightRange(f.cursor(),Math.max(n,y.from+a),Math.min(i,v),"",p),this.startSpan(Math.min(i,v),u))}g&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function _ue(t){let e=t.type.prop(gz);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const pe=mn.define,_g=pe(),ha=pe(),ZN=pe(ha),JN=pe(ha),fa=pe(),kg=pe(fa),y1=pe(fa),Es=pe(),zl=pe(Es),ks=pe(),Cs=pe(),G_=pe(),bh=pe(G_),Cg=pe(),de={comment:_g,lineComment:pe(_g),blockComment:pe(_g),docComment:pe(_g),name:ha,variableName:pe(ha),typeName:ZN,tagName:pe(ZN),propertyName:JN,attributeName:pe(JN),className:pe(ha),labelName:pe(ha),namespace:pe(ha),macroName:pe(ha),literal:fa,string:kg,docString:pe(kg),character:pe(kg),attributeValue:pe(kg),number:y1,integer:pe(y1),float:pe(y1),bool:pe(fa),regexp:pe(fa),escape:pe(fa),color:pe(fa),url:pe(fa),keyword:ks,self:pe(ks),null:pe(ks),atom:pe(ks),unit:pe(ks),modifier:pe(ks),operatorKeyword:pe(ks),controlKeyword:pe(ks),definitionKeyword:pe(ks),moduleKeyword:pe(ks),operator:Cs,derefOperator:pe(Cs),arithmeticOperator:pe(Cs),logicOperator:pe(Cs),bitwiseOperator:pe(Cs),compareOperator:pe(Cs),updateOperator:pe(Cs),definitionOperator:pe(Cs),typeOperator:pe(Cs),controlOperator:pe(Cs),punctuation:G_,separator:pe(G_),bracket:bh,angleBracket:pe(bh),squareBracket:pe(bh),paren:pe(bh),brace:pe(bh),content:Es,heading:zl,heading1:pe(zl),heading2:pe(zl),heading3:pe(zl),heading4:pe(zl),heading5:pe(zl),heading6:pe(zl),contentSeparator:pe(Es),list:pe(Es),quote:pe(Es),emphasis:pe(Es),strong:pe(Es),link:pe(Es),monospace:pe(Es),strikethrough:pe(Es),inserted:pe(),deleted:pe(),changed:pe(),invalid:pe(),meta:Cg,documentMeta:pe(Cg),annotation:pe(Cg),processingInstruction:pe(Cg),definition:mn.defineModifier("definition"),constant:mn.defineModifier("constant"),function:mn.defineModifier("function"),standard:mn.defineModifier("standard"),local:mn.defineModifier("local"),special:mn.defineModifier("special")};for(let t in de){let e=de[t];e instanceof mn&&(e.name=t)}vz([{tag:de.link,class:"tok-link"},{tag:de.heading,class:"tok-heading"},{tag:de.emphasis,class:"tok-emphasis"},{tag:de.strong,class:"tok-strong"},{tag:de.keyword,class:"tok-keyword"},{tag:de.atom,class:"tok-atom"},{tag:de.bool,class:"tok-bool"},{tag:de.url,class:"tok-url"},{tag:de.labelName,class:"tok-labelName"},{tag:de.inserted,class:"tok-inserted"},{tag:de.deleted,class:"tok-deleted"},{tag:de.literal,class:"tok-literal"},{tag:de.string,class:"tok-string"},{tag:de.number,class:"tok-number"},{tag:[de.regexp,de.escape,de.special(de.string)],class:"tok-string2"},{tag:de.variableName,class:"tok-variableName"},{tag:de.local(de.variableName),class:"tok-variableName tok-local"},{tag:de.definition(de.variableName),class:"tok-variableName tok-definition"},{tag:de.special(de.variableName),class:"tok-variableName2"},{tag:de.definition(de.propertyName),class:"tok-propertyName tok-definition"},{tag:de.typeName,class:"tok-typeName"},{tag:de.namespace,class:"tok-namespace"},{tag:de.className,class:"tok-className"},{tag:de.macroName,class:"tok-macroName"},{tag:de.propertyName,class:"tok-propertyName"},{tag:de.operator,class:"tok-operator"},{tag:de.comment,class:"tok-comment"},{tag:de.meta,class:"tok-meta"},{tag:de.invalid,class:"tok-invalid"},{tag:de.punctuation,class:"tok-punctuation"}]);var w1;const Nc=new ut;function kue(t){return Ee.define({combine:t?e=>e.concat(t):void 0})}const Cue=new ut;class as{constructor(e,n,i=[],r=""){this.data=e,this.name=r,it.prototype.hasOwnProperty("tree")||Object.defineProperty(it.prototype,"tree",{get(){return ro(this)}}),this.parser=n,this.extension=[Dd.of(this),it.languageData.of((s,o,a)=>{let l=QN(s,o,a),u=l.type.prop(Nc);if(!u)return[];let c=s.facet(u),d=l.type.prop(Cue);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return QN(e,n,i).type.prop(Nc)==this.data}findRegions(e){let n=e.facet(Dd);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Nc)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(ut.mounted);if(a){if(a.tree.prop(Nc)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof Wt&&r(u,s.positions[l]+o)}};return r(ro(e),0),i}get allowsNesting(){return!0}}as.setState=Ze.define();function QN(t,e,n){let i=t.facet(Dd),r=ro(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,jn.ExcludeBuffers))s.type.isTop&&(r=s);return r}function ro(t){let e=t.field(as.state,!1);return e?e.tree:Wt.empty}class Eue{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let xh=null;class Od{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Od(e,n,[],Wt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new Eue(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Wt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(gu.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(gu.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=xh;xh=this;try{return e()}finally{xh=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=eM(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,h)=>l.push({fromA:u,toA:c,fromB:d,toB:h})),i=gu.applyChanges(i,l),r=Wt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new Od(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=eM(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends mz{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=xh;if(l){for(let u of r)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Wt(Bi.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return xh}}function eM(t,e,n){return gu.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Id{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Id(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Od.create(e.facet(Dd).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Id(i)}}as.state=wi.define({create:Id.init,update(t,e){for(let n of e.effects)if(n.is(as.setState))return n.value;return e.startState.facet(Dd)!=e.state.facet(Dd)?Id.init(e.state):t.apply(e)}});let yz=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(yz=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const b1=typeof navigator<"u"&&(!((w1=navigator.scheduling)===null||w1===void 0)&&w1.isInputPending)?()=>navigator.scheduling.isInputPending():null,Aue=Vn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(as.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(as.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=yz(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(as.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!b1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>b1&&b1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:as.setState.of(new Id(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>tr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Dd=Ee.define({combine(t){return t.length?t[0]:null},enables:t=>[as.state,Aue,Re.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Pue{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const Tue=Ee.define(),mA=Ee.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Fu(t){let e=t.facet(mA);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function K_(t,e){let n="",i=t.tabSize,r=t.facet(mA)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function Rue(t,e){t instanceof it&&(t=new gA(t));for(let i of t.state.facet(Tue)){let r=i(t,e);if(r!==void 0)return r}let n=ro(t.state);return n.length>=e?Nue(t,n,e):null}class gA{constructor(e,n={}){this.state=e,this.options=n,this.unit=Fu(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Hp(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const wz=new ut;function Nue(t,e,n){let i=e.resolveStack(n),r=i.node.enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return bz(i,t,n)}function bz(t,e,n){for(let i=t;i;i=i.next){let r=Oue(i.node);if(r)return r(vA.create(e,n,i))}return 0}function Mue(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Oue(t){let e=t.type.prop(wz);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(ut.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>jue(o,!0,1,void 0,s&&!Mue(o)?r.from:void 0)}return t.parent==null?Iue:null}function Iue(){return 0}class vA extends gA{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new vA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Due(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return bz(this.context.next,this.base,this.pos)}}function Due(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Lue(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}a=l.to}}function jue(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r==t.pos+o,l=Lue(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Fue=Ee.define(),$ue=new ut;function Bue(t,e,n){let i=ro(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop($ue);if(l&&(a.to<i.length-50||i.length==t.doc.length||!zue(a))){let u=l(a,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function zue(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function xz(t,e,n){for(let i of t.facet(Fue)){let r=i(t,e,n);if(r)return r}return Bue(t,e,n)}function Sz(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const yA=Ze.define({map:Sz}),bw=Ze.define({map:Sz});function _z(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const um=wi.define({create(){return Je.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(yA)&&!Uue(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(Az),r=i?Je.replace({widget:new que(i(e.state,n.value))}):tM;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(bw)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>Re.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(tM.range(i,r))}return Je.set(e,!0)}});function kz(t,e,n){var i;let r=null;return(i=t.field(um,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function Uue(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function Cz(t,e){return t.field(um,!1)?e:e.concat(Ze.appendConfig.of(Xue()))}const Hue=t=>{for(let e of _z(t)){let n=xz(t.state,e.from,e.to);if(n)return t.dispatch({effects:Cz(t.state,[yA.of(n),Ez(t,n)])}),!0}return!1},Vue=t=>{if(!t.state.field(um,!1))return!1;let e=[];for(let n of _z(t)){let i=kz(t.state,n.from,n.to);i&&e.push(bw.of(i),Ez(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Ez(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Re.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const Wue=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=xz(e,r.from,r.to);s&&n.push(yA.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:Cz(t.state,n)}),!!n.length},Gue=t=>{let e=t.state.field(um,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(bw.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},Kue={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Az=Ee.define({combine(t){return kl(t,Kue)}});function Xue(t){return[um,Yue]}function Pz(t,e){let{state:n}=t,i=n.facet(Az),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=kz(t.state,a.from,a.to);l&&t.dispatch({effects:bw.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const tM=Je.replace({widget:new class extends Cl{toDOM(t){return Pz(t,null)}}});class que extends Cl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Pz(e,this.value)}}const Yue=Re.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class cm{constructor(e,n){this.specs=e;let i;function r(a){let l=tl.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof as?a=>a.prop(Nc)==o.data:o?a=>a==o:void 0,this.style=vz(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new tl(i):null,this.themeType=n.themeType}static define(e,n){return new cm(e,n||{})}}const X_=Ee.define(),Zue=Ee.define({combine(t){return t.length?[t[0]]:null}});function x1(t){let e=t.facet(X_);return e.length?e:t.facet(Zue)}function Jue(t,e){let n=[ece],i;return t instanceof cm&&(t.module&&n.push(Re.styleModule.of(t.module)),i=t.themeType),i?n.push(X_.computeN([Re.darkTheme],r=>r.facet(Re.darkTheme)==(i=="dark")?[t]:[])):n.push(X_.of(t)),n}class Que{constructor(e){this.markCache=Object.create(null),this.tree=ro(e.state),this.decorations=this.buildDeco(e,x1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=ro(e.state),i=x1(e.state),r=i!=x1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Je.none;let i=new Cu;for(let{from:r,to:s}of e.visibleRanges)xue(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=Je.mark({class:l})))},r,s);return i.finish()}}const ece=zp.high(Vn.fromClass(Que,{decorations:t=>t.decorations}));de.meta,de.link,de.heading,de.emphasis,de.strong,de.strikethrough,de.keyword,de.atom,de.bool,de.url,de.contentSeparator,de.labelName,de.literal,de.inserted,de.string,de.deleted,de.regexp,de.escape,de.string,de.variableName,de.variableName,de.typeName,de.namespace,de.className,de.variableName,de.macroName,de.propertyName,de.comment,de.invalid;const tce=1e4,nce="()[]{}",ice=new ut;function q_(t,e,n){let i=t.prop(e<0?ut.openedBy:ut.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Y_(t){let e=t.type.prop(ice);return e?e(t.node):t}function Eg(t,e,n,i={}){let r=i.maxScanDistance||tce,s=i.brackets||nce,o=ro(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=q_(l.type,n,s);if(u&&l.from<l.to){let c=Y_(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return rce(t,e,n,l,c,u,s)}}return sce(t,e,n,o,a.type,r,s)}function rce(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=Y_(c);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(q_(c.type,n,o))u++;else if(q_(c.type,-n,o)){if(u==0){let d=Y_(c);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function sce(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let g=n>0?0:f.length-1,b=n>0?f.length:-1;g!=b;g+=n){let v=o.indexOf(f[g]);if(!(v<0||i.resolveInner(p+g,1).type!=r))if(v%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+g,to:p+g+1},matched:v>>1==l>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function nM(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class Tz{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=nM(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:nM(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function oce(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||ace,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||xA}}function ace(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const iM=new WeakMap;class wA extends as{constructor(e){let n=kue(e.languageData),i=oce(e),r,s=new class extends mz{createParse(o,a,l){return new uce(r,o,a,l)}};super(n,s,[],e.name),this.topNode=hce(n,this),r=this,this.streamParser=i,this.stateAfter=new ut({perNode:!0}),this.tokenTable=e.tokenTable?new Oz(i.tokenTable):dce}static define(e){return new wA(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=iM.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=bA(this,e.node.tree,0,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=0),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),u=Math.min(e.pos,l.to);if(l.length){let c=i?i(l.from):-1,d=new Tz(l.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;d.pos<u-l.from;)Nz(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(u==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&iM.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function bA(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],u=a instanceof Wt&&l<r&&bA(t,a,l,i,r);if(u)return u}return null}function Rz(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof Wt){if(!(l=Rz(t,a,n-o,i-o,r)))break;return r?new Wt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function lce(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&bA(t,s.tree,0-s.offset,n,a),u;if(l&&l.pos<=i&&(u=Rz(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:u}}return{state:t.streamParser.startState(r?Fu(r):4),tree:Wt.empty}}class uce{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Od.get(),o=r[0].from,{state:a,tree:l}=lce(e,i,o,r[r.length-1].to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Fu(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Od.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new Tz(n,e?e.state.tabSize:4,e?Fu(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=Nz(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Wt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:cce,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Wt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Wt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Nz(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const xA=Object.create(null),Tp=[Bi.none],cce=new dA(Tp),rM=[],sM=Object.create(null),Mz=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Mz[t]=Iz(xA,e);class Oz{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Mz)}resolve(e){return e?this.table[e]||(this.table[e]=Iz(this.extra,e)):0}}const dce=new Oz(xA);function S1(t,e){rM.indexOf(t)>-1||(rM.push(t),console.warn(e))}function Iz(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let c=t[u]||de[u];c?typeof c=="function"?l.length?l=l.map(c):S1(u,`Modifier ${u} used at start of tag`):l.length?S1(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:S1(u,`Unknown highlighting tag ${u}`)}for(let u of l)n.push(u)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=sM[r];if(s)return s.id;let o=sM[r]=Bi.define({id:Tp.length,name:i,props:[wue({[i]:n})]});return Tp.push(o),o.id}function hce(t,e){let n=Bi.define({id:Tp.length,name:"Document",props:[Nc.add(()=>t),wz.add(()=>i=>e.getIndent(i))],top:!0});return Tp.push(n),n}Dt.RTL,Dt.LTR;const fce=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=SA(t.state,n.from);return i.line?pce(t):i.block?yce(t):!1};function dm(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const pce=dm(_A,0),mce=dm(_A,1),gce=dm(_A,2),vce=dm(Dz,0),yce=dm((t,e)=>Dz(t,e,bce(e)),0);function SA(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Sh=50;function wce(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Sh,i),o=t.sliceDoc(r,r+Sh),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let c,d;r-i<=2*Sh?c=d=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+Sh),d=t.sliceDoc(r-Sh,r));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function bce(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function Dz(t,e,n=e.selection.ranges){let i=n.map(s=>SA(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>wce(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function _A(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,u=SA(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:d}of i)(d||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const Z_=qo.define(),xce=qo.define(),Sce=Ee.define(),Lz=Ee.define({combine(t){return kl(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),jz=wi.define({create(){return Ws.empty},update(t,e){let n=e.state.facet(Lz),i=e.annotation(Z_);if(i){let l=Li.fromTransaction(e,i.selection),u=i.side,c=u==0?t.undone:t.done;return l?c=Gy(c,c.length,n.minDepth,l):c=Bz(c,e.startState.selection),new Ws(u==0?i.rest:c,u==0?c:i.rest)}let r=e.annotation(xce);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(yn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Li.fromTransaction(e),o=e.annotation(yn.time),a=e.annotation(yn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Ws(t.done.map(Li.fromJSON),t.undone.map(Li.fromJSON))}});function _ce(t={}){return[jz,Lz.of(t),Re.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?Fz:e.inputType=="historyRedo"?J_:null;return i?(e.preventDefault(),i(n)):!1}})]}function kA(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(jz,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const Fz=kA(0,!1),J_=kA(1,!1),kce=kA(0,!0);class Li{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Li(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Li(e.changes&&hn.fromJSON(e.changes),[],e.mapped&&qs.fromJSON(e.mapped),e.startSelection&&ie.fromJSON(e.startSelection),e.selectionsAfter.map(ie.fromJSON))}static fromTransaction(e,n){let i=Rr;for(let r of e.startState.facet(Sce)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Li(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Rr)}static selection(e){return new Li(void 0,Rr,void 0,void 0,e)}}function Gy(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function Cce(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(i=!0)}}),i}function Ece(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function $z(t,e){return t.length?e.length?t.concat(e):t:e}const Rr=[],Ace=200;function Bz(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Ace));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Gy(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Li.selection([e])]}function Pce(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function _1(t,e){if(!t.length)return t;let n=t.length,i=Rr;for(;n;){let r=Tce(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Li.selection(i)]:Rr}function Tce(t,e,n){let i=$z(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Rr,n);if(!t.changes)return Li.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Li(r,Ze.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const Rce=/^(input\.type|delete)($|\.)/;class Ws{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Ws(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||Rce.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,Cce(a.changes,e.changes))||i=="input.type.compose")?o=Gy(o,o.length-1,r.minDepth,new Li(e.changes.compose(a.changes),$z(Ze.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Rr)):o=Gy(o,o.length,r.minDepth,e),new Ws(o,Rr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Rr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Ece(s[s.length-1],e)?this:new Ws(Bz(this.done,e),this.undone,n,i)}addMapping(e){return new Ws(_1(this.done,e),_1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Z_.of({side:e,rest:Pce(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?Rr:r.slice(0,r.length-1);return s.mapped&&(a=_1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Z_.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Ws.empty=new Ws(Rr,Rr);function hm(t,e){return ie.create(t.ranges.map(e),t.mainIndex)}function Rl(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Wu({state:t,dispatch:e},n){let i=hm(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Rl(t,i)),!0)}function xw(t,e){return ie.cursor(e?t.to:t.from)}function zz(t,e){return Wu(t,n=>n.empty?t.moveByChar(n,e):xw(n,e))}function Nl(t){return t.textDirectionAt(t.state.selection.main.head)==Dt.LTR}const oM=t=>zz(t,!Nl(t)),aM=t=>zz(t,Nl(t));function Uz(t,e){return Wu(t,n=>n.empty?t.moveByGroup(n,e):xw(n,e))}const Nce=t=>Uz(t,!Nl(t)),Mce=t=>Uz(t,Nl(t));function Hz(t,e){return Wu(t,n=>{if(!n.empty)return xw(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const lM=t=>Hz(t,!1),uM=t=>Hz(t,!0);function Vz(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Re.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function Wz(t,e){let n=Vz(t),{state:i}=t,r=hm(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):xw(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Re.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Rl(i,r),{effects:s}),!0}const k1=t=>Wz(t,!1),C1=t=>Wz(t,!0);function Sw(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=ie.cursor(i.from+s))}return r}const cM=t=>Wu(t,e=>Sw(t,e,!0)),dM=t=>Wu(t,e=>Sw(t,e,!1)),Oce=t=>Wu(t,e=>ie.cursor(t.lineBlockAt(e.head).from,1)),Ice=t=>Wu(t,e=>ie.cursor(t.lineBlockAt(e.head).to,-1));function Dce(t,e,n){let i=!1,r=hm(t.selection,s=>{let o=Eg(t,s.head,-1)||Eg(t,s.head,1)||s.head>0&&Eg(t,s.head-1,1)||s.head<t.doc.length&&Eg(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return ie.cursor(a)});return i?(e(Rl(t,r)),!0):!1}const Lce=({state:t,dispatch:e})=>Dce(t,e);function Ml(t,e){let n=hm(t.state.selection,i=>{let r=e(i);return ie.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Rl(t.state,n)),!0)}function Gz(t,e){return Ml(t,n=>t.moveByChar(n,e))}const hM=t=>Gz(t,!Nl(t)),fM=t=>Gz(t,Nl(t));function Kz(t,e){return Ml(t,n=>t.moveByGroup(n,e))}const jce=t=>Kz(t,!Nl(t)),Fce=t=>Kz(t,Nl(t));function Xz(t,e){return Ml(t,n=>t.moveVertically(n,e))}const pM=t=>Xz(t,!1),mM=t=>Xz(t,!0);function qz(t,e){return Ml(t,n=>t.moveVertically(n,e,Vz(t).height))}const gM=t=>qz(t,!1),vM=t=>qz(t,!0),yM=t=>Ml(t,e=>Sw(t,e,!0)),wM=t=>Ml(t,e=>Sw(t,e,!1)),$ce=t=>Ml(t,e=>ie.cursor(t.lineBlockAt(e.head).from)),Bce=t=>Ml(t,e=>ie.cursor(t.lineBlockAt(e.head).to)),bM=({state:t,dispatch:e})=>(e(Rl(t,{anchor:0})),!0),xM=({state:t,dispatch:e})=>(e(Rl(t,{anchor:t.doc.length})),!0),SM=({state:t,dispatch:e})=>(e(Rl(t,{anchor:t.selection.main.anchor,head:0})),!0),_M=({state:t,dispatch:e})=>(e(Rl(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),zce=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Uce=({state:t,dispatch:e})=>{let n=kw(t).map(({from:i,to:r})=>ie.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:ie.create(n),userEvent:"select"})),!0};function _w(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Ag(t,l,!1)):l>o&&(n="delete.forward",l=Ag(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Ag(t,o,!1),a=Ag(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:ie.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Re.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Ag(t,e,n){if(t instanceof Re)for(let i of t.state.facet(Re.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const Yz=(t,e,n)=>_w(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let u=Hp(a,s.tabSize),c=u%Fu(s)||Fu(s);for(let d=0;d<c&&a[a.length-1-d]==" ";d++)r--;l=r}else l=Bn(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=Bn(o.text,l-o.from,!1,!1)+o.from);return l}),E1=t=>Yz(t,!1,!0),kM=t=>Yz(t,!0,!1),Zz=(t,e)=>_w(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=Bn(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||i!=n.head)&&(a=c),i=l}return i}),CM=t=>Zz(t,!1),Hce=t=>Zz(t,!0),EM=t=>_w(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Vce=t=>_w(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),Wce=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ht.of(["",""])},range:ie.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Gce=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Bn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:Bn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:ie.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function kw(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function Jz(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of kw(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(ie.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(ie.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:ie.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Kce=({state:t,dispatch:e})=>Jz(t,e,!1),Xce=({state:t,dispatch:e})=>Jz(t,e,!0);function Qz(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of kw(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const qce=({state:t,dispatch:e})=>Qz(t,e,!1),Yce=({state:t,dispatch:e})=>Qz(t,e,!0),Zce=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(kw(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=hm(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Jce(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=ro(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(ut.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const AM=Qce(!1);function Qce(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&Jce(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new gA(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=Rue(u,s);for(c==null&&(c=Hp(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",K_(e,c)];return l&&d.push(K_(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:ht.of(d)},range:ie.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function e8(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:ie.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const Q_=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(e8(t,(n,i)=>{i.push({from:n.from,insert:t.facet(mA)})}),{userEvent:"input.indent"})),!0),PM=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(e8(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Hp(r,t.tabSize),o=0,a=K_(t,Math.max(0,s-Fu(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function At(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)t8(t,arguments[e]);return t}function t8(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)t8(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const TM=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Rp{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(TM(a)):TM,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return di(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=pC(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=is(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Rp.prototype[Symbol.iterator]=function(){return this});const n8={from:-1,to:-1,match:/.*/.exec("")},CA="gm"+(/x/.unicode==null?"":"u");class i8{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=n8,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new r8(e,n,i,r,s);this.re=new RegExp(n,CA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Ky(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Ky(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const A1=new WeakMap;class ed{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=A1.get(e);if(!r||r.from>=i||r.to<=n){let a=new ed(n,e.sliceString(n,i));return A1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),A1.set(e,new ed(o,s)),new ed(n,s.slice(n-o,i-o))}}class r8{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=n8,this.matchPos=Ky(e,r),this.re=new RegExp(n,CA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=ed.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Ky(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ed.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(i8.prototype[Symbol.iterator]=r8.prototype[Symbol.iterator]=function(){return this});function ede(t){try{return new RegExp(t,CA),!0}catch{return!1}}function Ky(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function ek(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=At("input",{class:"cm-textfield",name:"line",value:e}),i=At("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Xy.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},At("label",t.state.phrase("Go to line"),": ",n)," ",At("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,u,c,d]=s,h=c?+c.slice(1):0,f=u?+u:a.number;if(u&&d){let b=f/100;l&&(b=b*(l=="-"?-1:1)+a.number/o.doc.lines),f=Math.round(o.doc.lines*b)}else u&&l&&(f=f*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,f))),g=ie.cursor(p.from+Math.max(0,Math.min(h,p.length)));t.dispatch({effects:[Xy.of(!1),Re.scrollIntoView(g.from,{y:"center"})],selection:g}),t.focus()}return{dom:i}}const Xy=Ze.define(),RM=wi.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Xy)&&(t=n.value);return t},provide:t=>Yf.from(t,e=>e?ek:null)}),tde=t=>{let e=qf(t,ek);if(!e){let n=[Xy.of(!0)];t.state.field(RM,!1)==null&&n.push(Ze.appendConfig.of([RM,nde])),t.dispatch({effects:n}),e=qf(t,ek)}return e&&e.dom.querySelector("input").select(),!0},nde=Re.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),ide=({state:t,dispatch:e})=>{let{selection:n}=t,i=ie.create(n.ranges.map(r=>t.wordAt(r.head)||ie.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function rde(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new Rp(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Rp(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const sde=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return ide({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=rde(t,i);return r?(e(t.update({selection:t.selection.addRange(ie.range(r.from,r.to),!1),effects:Re.scrollIntoView(r.to)})),!0):!1},Xd=Ee.define({combine(t){return kl(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new pde(e),scrollToMatch:e=>Re.scrollIntoView(e)})}});class s8{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||ede(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ude(this):new ade(this)}getCursor(e,n=0,i){let r=e.doc?e:it.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?uc(this,r,n,i):lc(this,r,n,i)}}class o8{constructor(e){this.spec=e}}function lc(t,e,n,i){return new Rp(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?ode(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function ode(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(qy(r,n-s))!=zn.Word||e(Yy(r,n-s))!=zn.Word)&&(e(Yy(r,i-s))!=zn.Word||e(qy(r,i-s))!=zn.Word))}class ade extends o8{constructor(e){super(e)}nextMatch(e,n,i){let r=lc(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=lc(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=lc(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=lc(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=lc(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function uc(t,e,n,i){return new i8(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?lde(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function qy(t,e){return t.slice(Bn(t,e,!1),e)}function Yy(t,e){return t.slice(e,Bn(t,e))}function lde(t){return(e,n,i)=>!i[0].length||(t(qy(i.input,i.index))!=zn.Word||t(Yy(i.input,i.index))!=zn.Word)&&(t(Yy(i.input,i.index+i[0].length))!=zn.Word||t(qy(i.input,i.index+i[0].length))!=zn.Word)}class ude extends o8{nextMatch(e,n,i){let r=uc(this.spec,e,i,e.doc.length).next();return r.done&&(r=uc(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=uc(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n)}matchAll(e,n){let i=uc(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=uc(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Np=Ze.define(),EA=Ze.define(),Za=wi.define({create(t){return new P1(tk(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Np)?t=new P1(n.value.create(),t.panel):n.is(EA)&&(t=new P1(t.query,n.value?AA:null));return t},provide:t=>Yf.from(t,e=>e.panel)});class P1{constructor(e,n){this.query=e,this.panel=n}}const cde=Je.mark({class:"cm-searchMatch"}),dde=Je.mark({class:"cm-searchMatch cm-searchMatch-selected"}),hde=Vn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Za))}update(t){let e=t.state.field(Za);(e!=t.startState.field(Za)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Je.none;let{view:n}=this,i=new Cu;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,d?dde:cde)})}return i.finish()}},{decorations:t=>t.decorations});function fm(t){return e=>{let n=e.state.field(Za,!1);return n&&n.query.spec.valid?t(e,n):d8(e)}}const NM=fm((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=ie.single(i.from,i.to),s=t.state.facet(Xd);return t.dispatch({selection:r,effects:[PA(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),c8(t),!0}),MM=fm((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=ie.single(r.from,r.to),o=t.state.facet(Xd);return t.dispatch({selection:s,effects:[PA(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),c8(t),!0}),a8=fm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:ie.create(n.map(i=>ie.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),fde=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new Rp(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(ie.range(a.value.from,a.value.to))}return e(t.update({selection:ie.create(s,o),userEvent:"select.search.matches"})),!0},OM=fm((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,u,c=[];if(o.from==i&&o.to==r&&(u=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(n,o.from,o.to),c.push(Re.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),o){let d=a.length==0||a[0].from>=s.to?0:s.to-s.from-u.length;l=ie.single(o.from-d,o.to-d),c.push(PA(t,o)),c.push(n.facet(Xd).scrollToMatch(l.main,t))}return t.dispatch({changes:a,selection:l,effects:c,userEvent:"input.replace"}),!0}),l8=fm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Re.announce.of(i),userEvent:"input.replace.all"}),!0});function AA(t){return t.state.facet(Xd).createPanel(t)}function tk(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(Xd);return new s8({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function u8(t){let e=qf(t,AA);return e&&e.dom.querySelector("[main-field]")}function c8(t){let e=u8(t);e&&e==t.root.activeElement&&e.select()}const d8=t=>{let e=t.state.field(Za,!1);if(e&&e.panel){let n=u8(t);if(n&&n!=t.root.activeElement){let i=tk(t.state,e.query.spec);i.valid&&t.dispatch({effects:Np.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[EA.of(!0),e?Np.of(tk(t.state,e.query.spec)):Ze.appendConfig.of(gde)]});return!0},h8=t=>{let e=t.state.field(Za,!1);if(!e||!e.panel)return!1;let n=qf(t,AA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:EA.of(!1)}),!0};class pde{constructor(e){this.view=e;let n=this.query=e.state.field(Za).query.spec;this.commit=this.commit.bind(this),this.searchField=At("input",{value:n.search,placeholder:Hi(e,"Find"),"aria-label":Hi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=At("input",{value:n.replace,placeholder:Hi(e,"Replace"),"aria-label":Hi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=At("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=At("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=At("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return At("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=At("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>NM(e),[Hi(e,"next")]),i("prev",()=>MM(e),[Hi(e,"previous")]),i("select",()=>a8(e),[Hi(e,"all")]),At("label",null,[this.caseField,Hi(e,"match case")]),At("label",null,[this.reField,Hi(e,"regexp")]),At("label",null,[this.wordField,Hi(e,"by word")]),...e.state.readOnly?[]:[At("br"),this.replaceField,i("replace",()=>OM(e),[Hi(e,"replace")]),i("replaceAll",()=>l8(e),[Hi(e,"replace all")])],At("button",{name:"close",onclick:()=>h8(e),"aria-label":Hi(e,"close"),type:"button"},["×"])])}commit(){let e=new s8({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Np.of(e)}))}keydown(e){oG(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?MM:NM)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),OM(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Np)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Xd).top}}function Hi(t,e){return t.state.phrase(e)}const Pg=30,Tg=/[\s\.,:;?!]/;function PA(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Pg),o=Math.min(r,n+Pg),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Pg;l++)if(!Tg.test(a[l+1])&&Tg.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Pg;l--)if(!Tg.test(a[l-1])&&Tg.test(a[l])){a=a.slice(0,l);break}}return Re.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const mde=Re.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),gde=[Za,zp.low(hde),mde];class vde{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=ro(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(f8(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function IM(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function yde(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=IM(e)+IM(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function wde(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:yde(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class DM{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function mf(t){return t.selection.main.from}function f8(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const p8=qo.define();function bde(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:ie.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const LM=new WeakMap;function xde(t){if(!Array.isArray(t))return t;let e=LM.get(t);return e||LM.set(t,e=wde(t)),e}const m8=Ze.define(),TA=Ze.define();class Sde{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=di(e,n),r=is(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(di(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let y=di(e,0),w=is(y),_=w==e.length?0:-100;if(y!=n[0])if(y==i[0])_+=-200;else return null;return this.ret(_,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let y=0,w=Math.min(e.length,200);y<w&&u<l;){let _=di(e,y);(_==n[u]||_==i[u])&&(r[u++]=y),y+=is(_)}if(u<l)return null}let c=0,d=0,h=!1,f=0,p=-1,g=-1,b=/[a-z]/.test(e),v=!0;for(let y=0,w=Math.min(e.length,200),_=0;y<w&&d<l;){let k=di(e,y);a<0&&(c<l&&k==n[c]&&(s[c++]=y),f<l&&(k==n[f]||k==i[f]?(f==0&&(p=y),g=y+1,f++):f=0));let C,E=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(C=pC(k))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(!y||E==1&&b||_==0&&E!=0)&&(n[d]==k||i[d]==k&&(h=!0)?o[d++]=y:o.length&&(v=!1)),_=E,y+=is(k)}return d==l&&o[0]==0&&v?this.result(-100+(h?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-900-e.length,[p,g]):d==l?this.result(-100+(h?-200:0)+-700+(v?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?is(di(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class _de{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const zs=Ee.define({combine(t){return kl(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:kde,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>jM(e(i),n(i)),optionClass:(e,n)=>i=>jM(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function jM(t,e){return t?e?t+" "+e:t:e}function kde(t,e,n,i,r,s){let o=t.textDirection==Dt.RTL,a=o,l=!1,u="top",c,d,h=e.left-r.left,f=r.right-e.right,p=i.right-i.left,g=i.bottom-i.top;if(a&&h<Math.min(p,f)?a=!1:!a&&f<Math.min(p,h)&&(a=!0),p<=(a?h:f))c=Math.max(r.top,Math.min(n.top,r.bottom-g))-e.top,d=Math.min(400,a?h:f);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let y=r.bottom-e.bottom;y>=g||y>e.top?c=n.bottom-e.top:(u="bottom",c=e.bottom-n.top)}let b=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${c/b}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function Cde(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let u=0;u<s.length;){let c=s[u++],d=s[u++];c>l&&o.appendChild(document.createTextNode(a.slice(l,c)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(a.slice(c,d))),h.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function T1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class Ede{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(zs);this.optionContent=Cde(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=T1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(n).open;for(let c=l.target,d;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(d=/-(\d+)$/.exec(c.id))&&+d[1]<u.length){this.applyCompletion(e,u[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(zs).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:TA.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=T1(s.length,o,e.state.facet(zs).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=T1(n.options.length,n.selected,this.view.state.facet(zs).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>tr(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&Pde(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(zs).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,this.view,l);f&&c.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Ade(t,e){return n=>new Ede(n,t,e)}function Pde(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function FM(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Tde(t,e){let n=[],i=null,r=u=>{n.push(u);let{section:c}=u.completion;if(c){i||(i=[]);let d=typeof c=="string"?c:c.name;i.some(h=>h.name==d)||i.push(typeof c=="string"?{name:d}:c)}},s=e.facet(zs);for(let u of t)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let d of u.result.options)r(new DM(d,u.source,c?c(d):[],1e9-n.length));else{let d=e.sliceDoc(u.from,u.to),h,f=s.filterStrict?new _de(d):new Sde(d);for(let p of u.result.options)if(h=f.match(p.label)){let g=p.displayLabel?c?c(p,h.matched):[]:h.matched;r(new DM(p,u.source,g,h.score+(p.boost||0)))}}}if(i){let u=Object.create(null),c=0,d=(h,f)=>{var p,g;return((p=h.rank)!==null&&p!==void 0?p:1e9)-((g=f.rank)!==null&&g!==void 0?g:1e9)||(h.name<f.name?-1:1)};for(let h of i.sort(d))c-=1e5,u[h.name]=c;for(let h of n){let{section:f}=h.completion;f&&(h.score+=u[typeof f=="string"?f:f.name])}}let o=[],a=null,l=s.compareCompletions;for(let u of n.sort((c,d)=>d.score-c.score||l(c.completion,d.completion))){let c=u.completion;!a||a.label!=c.label||a.detail!=c.detail||a.type!=null&&c.type!=null&&a.type!=c.type||a.apply!=c.apply||a.boost!=c.boost?o.push(u):FM(u.completion)>FM(a)&&(o[o.length-1]=u),a=u.completion}return o}class Mc{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Mc(this.options,$M(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(u=>u.isPending))return r.setDisabled();let a=Tde(e,n);if(!a.length)return r&&e.some(u=>u.isPending)?r.setDisabled():null;let l=n.facet(zs).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let u=r.options[r.selected].completion;for(let c=0;c<a.length;c++)if(a[c].completion==u){l=c;break}}return new Mc(a,$M(i,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:Lde,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Mc(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Mc(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Zy{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Zy(Ode,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(zs),s=(i.override||n.languageDataAt("autocomplete",mf(n)).map(xde)).map(l=>(this.active.find(c=>c.source==l)||new ls(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,u)=>l==this.active[u])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(g8));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Rde(s,this.active)||a?o=Mc.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new ls(l.source,0):l));for(let l of e.effects)l.is(v8)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Zy(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Nde:Mde}}function Rde(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const Nde={"aria-autocomplete":"list"},Mde={};function $M(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Ode=[];function Ide(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(p8);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class ls{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=Ide(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new ls(r.source,0)),i&4&&r.state==0&&(r=new ls(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(m8))r=new ls(r.source,1,s.value);else if(s.is(TA))r=new ls(r.source,0);else if(s.is(g8))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(mf(e.state))}}class gf extends ls{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=mf(e.state);if(a>o||!r||n&2&&(mf(e.startState)==this.from||a<this.limit))return new ls(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return Dde(r.validFor,e.state,s,o)?new gf(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new vde(e.state,a,!1)))?new gf(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:mf(e.state)):new ls(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new gf(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ls(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Dde(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):f8(t,!0).test(r)}const g8=Ze.define({map(t,e){return t.map(n=>n.map(e))}}),v8=Ze.define(),qd=wi.define({create(){return Zy.start()},update(t,e){return t.update(e)},provide:t=>[TC.from(t,e=>e.tooltip),Re.contentAttributes.from(t,e=>e.attrs)]});function y8(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(qd).active.find(r=>r.source==e.source);return i instanceof gf?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},bde(t.state,n,i.from,i.to)),{annotations:p8.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const Lde=Ade(qd,y8);function Rg(t,e="option"){return n=>{let i=n.state.field(qd,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(zs).interactionDelay)return!1;let r=1,s;e=="page"&&(s=FG(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:v8.of(a)}),!0}}const BM=t=>{let e=t.state.field(qd,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(zs).interactionDelay?!1:y8(t,e.open.options[e.open.selected])},jde=t=>t.state.field(qd,!1)?(t.dispatch({effects:m8.of(!0)}),!0):!1,Fde=t=>{let e=t.state.field(qd,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:TA.of(null)}),!0)},w8={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},b8=new class extends ku{};b8.startSide=1;b8.endSide=-1;const R1="()[]{}<>";function $de(t){for(let e=0;e<R1.length;e+=2)if(R1.charCodeAt(e)==t)return R1.charAt(e+1);return pC(t<128?t:t+1)}function Bde(t,e){return t.languageDataAt("closeBrackets",e)[0]||w8}const zde=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Bde(t,t.selection.main.head).brackets||w8.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=Hde(t.doc,o.head);for(let l of i)if(l==a&&Ude(t.doc,o.head)==$de(di(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:ie.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function Ude(t,e){let n=t.sliceString(e,e+2);return n.slice(0,is(di(n,0)))}function Hde(t,e){let n=t.sliceString(e-2,e);return is(di(n,0))==n.length?n:n.slice(1)}class Vde{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Ql{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(Gs).markerFilter;s&&(r=s(r,i));let o=Je.set(r.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?Je.widget({widget:new the(a),diagnostic:a}).range(a.from):Je.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new Ql(o,n,Ld(o))}}function Ld(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new Vde(r,s,o.diagnostic),!1}),i}function Wde(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(Gs).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(RA))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function x8(t,e){return t.field(ir,!1)?e:e.concat(Ze.appendConfig.of(C8))}function Gde(t,e){return{effects:x8(t,[RA.of(e)])}}const RA=Ze.define(),NA=Ze.define(),S8=Ze.define(),ir=wi.define({create(){return new Ql(Je.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=Ld(n,t.selected.diagnostic,s)||Ld(n,null,s)}!n.size&&r&&e.state.facet(Gs).autoPanel&&(r=null),t=new Ql(n,r,i)}for(let n of e.effects)if(n.is(RA)){let i=e.state.facet(Gs).autoPanel?n.value.length?Mp.open:null:t.panel;t=Ql.init(n.value,i,e.state)}else n.is(NA)?t=new Ql(t.diagnostics,n.value?Mp.open:null,t.selected):n.is(S8)&&(t=new Ql(t.diagnostics,t.panel,n.value));return t},provide:t=>[Yf.from(t,e=>e.panel),Re.decorations.from(t,e=>e.diagnostics)]}),Kde=Je.mark({class:"cm-lintRange cm-lintRange-active"});function Xde(t,e,n){let{diagnostics:i}=t.state.field(ir),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(r.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=t.state.facet(Gs).tooltipFilter;return a&&(r=a(r,t.state)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:qde(t,r)}}}:null}function qde(t,e){return At("ul",{class:"cm-tooltip-lint"},e.map(n=>k8(t,n,!1)))}const Yde=t=>{let e=t.state.field(ir,!1);(!e||!e.panel)&&t.dispatch({effects:x8(t.state,[NA.of(!0)])});let n=qf(t,Mp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},zM=t=>{let e=t.state.field(ir,!1);return!e||!e.panel?!1:(t.dispatch({effects:NA.of(!1)}),!0)},Zde=t=>{let e=t.state.field(ir,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Jde=Vn.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Gs);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Gs);n.length&&Qde(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(Gde(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{tr(this.view.state,i)})}}update(t){let e=t.state.facet(Gs);(t.docChanged||e!=t.startState.facet(Gs)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Qde(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):setTimeout(()=>e(i),200)},n)}const Gs=Ee.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},kl(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function ehe(t,e={}){return[Gs.of({source:t,config:e}),Jde,C8]}function _8(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function k8(t,e,n){var i;let r=n?_8(e.actions):[];return At("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},At("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let f=Ld(t.state.field(ir).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,d=c<0?u:[u.slice(0,c),At("u",u.slice(c,c+1)),u.slice(c+1)];return At("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&At("div",{class:"cm-diagnosticSource"},e.source))}class the extends Cl{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return At("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class UM{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=k8(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Mp{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)zM(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=_8(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=Ld(this.view.state.field(ir).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=At("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=At("div",{class:"cm-panel-lint"},this.list,At("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>zM(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(ir).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(ir),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){u=d;break}u<0?(c=new UM(this.view,l.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new UM(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{let l=a.height/this.list.offsetHeight;o.top<a.top?this.list.scrollTop-=(a.top-o.top)/l:o.bottom>a.bottom&&(this.list.scrollTop+=(o.bottom-a.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(ir),i=Ld(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:S8.of(i)})}static open(e){return new Mp(e)}}function nhe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Ng(t){return nhe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const ihe=Re.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ng("#d11")},".cm-lintRange-warning":{backgroundImage:Ng("orange")},".cm-lintRange-info":{backgroundImage:Ng("#999")},".cm-lintRange-hint":{backgroundImage:Ng("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),C8=[ir,Re.decorations.compute([ir],t=>{let{selected:e,panel:n}=t.field(ir);return!e||!n||e.from==e.to?Je.none:Je.set([Kde.range(e.from,e.to)])}),jG(Xde,{hideOn:Wde}),ihe],E8=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},rhe=E8("up"),she=E8("down"),ohe=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(ie.range(s,s)):e=ie.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},ahe=[{key:"Ctrl-Space",run:jde},{key:"Escape",run:Fde},{key:"ArrowDown",run:Rg(!0)},{key:"ArrowUp",run:Rg(!1)},{key:"PageDown",run:Rg(!0,"page")},{key:"PageUp",run:Rg(!1,"page")},{key:"Enter",run:BM},{key:"Tab",run:BM},{key:"Mod-f",run:d8,scope:"editor search-panel"},{key:"Escape",run:h8,scope:"editor search-panel"},{key:"Alt-Enter",run:a8,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:l8,scope:"editor search-panel"},{key:"Ctrl-g",run:tde},{key:"Mod-d",run:sde,preventDefault:!0},{key:"Shift-Mod-l",run:fde},{key:"Enter",run:AM,shift:AM},{key:"ArrowLeft",run:oM,shift:hM,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Nce,shift:jce},{key:"ArrowRight",run:aM,shift:fM,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Mce,shift:Fce},{key:"ArrowUp",run:lM,shift:pM,preventDefault:!0},{key:"ArrowDown",run:uM,shift:mM,preventDefault:!0},{key:"Home",run:dM,shift:wM},{mac:"Cmd-ArrowLeft",run:dM,shift:wM},{key:"Mod-Home",run:bM,shift:SM},{mac:"Cmd-ArrowUp",run:bM,shift:SM},{key:"PageUp",run:k1,shift:gM},{mac:"Ctrl-ArrowUp",run:k1,shift:gM},{key:"PageDown",run:C1,shift:vM},{mac:"Ctrl-ArrowDown",run:C1,shift:vM},{key:"End",run:cM,shift:yM},{mac:"Cmd-ArrowRight",run:cM,shift:yM},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:rhe,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:she,preventDefault:!0},{key:"Shift-Alt-i",run:ohe},{key:"Mod-End",run:xM,shift:_M},{mac:"Cmd-ArrowDown",run:xM,shift:_M},{key:"Mod-a",run:zce},{key:"Backspace",run:zde},{key:"Backspace",run:E1,shift:E1},{key:"Delete",run:kM},{key:"Mod-Backspace",mac:"Alt-Backspace",run:CM},{key:"Mod-Delete",mac:"Alt-Delete",run:Hce},{mac:"Mod-Backspace",run:Vce},{mac:"Mod-Delete",run:EM},{mac:"Ctrl-b",run:oM,shift:hM,preventDefault:!0},{mac:"Ctrl-f",run:aM,shift:fM},{mac:"Ctrl-p",run:lM,shift:pM},{mac:"Ctrl-n",run:uM,shift:mM},{mac:"Ctrl-a",run:Oce,shift:$ce},{mac:"Ctrl-e",run:Ice,shift:Bce},{mac:"Ctrl-d",run:kM},{mac:"Ctrl-h",run:E1},{mac:"Ctrl-k",run:EM},{mac:"Ctrl-Alt-h",run:CM},{mac:"Ctrl-o",run:Wce},{mac:"Ctrl-t",run:Gce},{mac:"Ctrl-v",run:C1},{mac:"Alt-v",run:k1},{key:"Shift-Mod-k",run:Zce},{key:"Alt-ArrowDown",run:Xce},{key:"Alt-ArrowUp",run:Kce},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Yce},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:qce},{key:"Mod-l",run:Uce,preventDefault:!0},{key:"Shift-Mod-\\",run:Lce},{key:"Tab",run:Q_,shift:PM,preventDefault:!0},{key:"Mod-[",run:PM},{key:"Mod-]",run:Q_},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Hue},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Vue},{key:"Mod-k Mod-0",run:Wue},{key:"Mod-k Mod-j",run:Gue},{key:"Mod-k Mod-c",run:mce},{key:"Mod-k Mod-u",run:gce},{key:"Mod-/",run:fce},{key:"Shift-Alt-a",run:vce},{key:"Mod-z",run:Fz,preventDefault:!0},{key:"Mod-y",run:J_,preventDefault:!0},{key:"Mod-Shift-z",run:J_,preventDefault:!0},{key:"Mod-u",run:kce,preventDefault:!0},{key:"Mod-Shift-m",run:Yde},{key:"F8",run:Zde}],nk=ve(0);function lhe(){const t=vt(),e=lt(nk);return m.jsxs("div",{className:"flex items-center justify-between border-t border-stone-600 bg-stone-800 px-3 font-sans text-xs tracking-wider text-stone-400",children:[m.jsx(tJ,{}),m.jsx("span",{className:$e(e>0&&"font-semibold text-red-400"),children:t("editor.lintSummary",e)})]})}const Si={character:de.character,comment:de.comment,"data-directive":mn.define(),identifier:de.variableName,instruction:mn.define(),label:de.labelName,number:de.number,operator:de.operator,offset:mn.define(),"ptr-size":mn.define(),punctuation:de.punctuation,register:mn.define(),special:mn.define(),string:de.string,unassigned:mn.define()},uhe=wA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":gE.includes(e)?"data-directive":vE.includes(e)?"instruction":Py.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Si}),che=Jue(cm.define([{tag:Si.character,class:"text-orange-300"},{tag:Si.comment,class:"text-stone-500 italic"},{tag:Si["data-directive"],class:"text-rose-400/80"},{tag:Si.instruction,class:"text-mantis-400"},{tag:Si.number,class:"text-cyan-300/60"},{tag:Si.operator,class:"text-rose-300"},{tag:Si.offset,class:"text-rose-400/80 italic"},{tag:Si["ptr-size"],class:"text-rose-400/80 italic"},{tag:Si.punctuation,class:"text-stone-600"},{tag:Si.register,class:"text-emerald-400/80"},{tag:Si.special,class:"text-yellow-300/80"},{tag:Si.string,class:"text-orange-300"},{tag:Si.unassigned,class:"text-rose-400/80"}])),dhe=ehe(t=>{const e=t.state.doc.toString(),n=e5(e);if(n.success)return H.set(nk,0),[];const i=Mi().language,r=n.errors.map(s=>{var l,u;const o=((l=s.position)==null?void 0:l.start)??0,a=((u=s.position)==null?void 0:u.end)??e.length;return{message:s.translate(i),severity:"error",from:o,to:a}});return H.set(nk,r.length),r},{delay:200});function hhe(){return new Pue(uhe,[che,dhe])}function A8({className:t}){const[e,n]=x.useState(),i=OZ(),r=x.useCallback(s=>{s&&n(s)},[]);return x.useEffect(()=>{if(e)return window.codemirror=new Re({state:it.create({doc:ZZ(),extensions:[it.tabSize.of(2),u5.of(it.readOnly.of(!1)),JZ,XG(),Wte,ZG(),xG(),_ce(),hG(),Re.domEventHandlers({drop:s=>s.preventDefault()}),it.allowMultipleSelections.of(!0),AG(),gF.of([{key:"Escape",run:s=>(s.dispatch({selection:ie.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?Q_(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...ahe]),hhe()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),m.jsxs("div",{className:$e("flex flex-col",t),children:[m.jsx("div",{ref:r,className:"grow overflow-auto font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),m.jsx(lhe,{})]})}function fhe(){const t=nE(),e=vt(),n=jZ(),i=a7("(max-width: 640px)"),{updateServiceWorker:r}=h7({onNeedRefresh(){Yi({title:e("update.update-available"),action:m.jsx(MB,{altText:e("update.reload"),onClick:()=>r(!0),children:e("update.reload")}),duration:1/0})}});return m.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",lang:t,style:{filter:n},children:[m.jsx(Poe,{}),i?m.jsx(mhe,{}):m.jsx(phe,{}),m.jsx(nJ,{})]})}function phe(){const[t]=Bp(tA);return m.jsxs(ej,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[m.jsx(Kg,{id:"panel-editor",order:1,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:m.jsx(A8,{className:"h-full w-full"})}),m.jsx(oS,{className:"w-2"}),m.jsxs(Kg,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:[m.jsx(sue,{})," ",m.jsx(oue,{})," ",m.jsx(dz,{})]}),t&&m.jsxs(m.Fragment,{children:[m.jsx(oS,{className:"w-2"}),m.jsx(Kg,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:m.jsx(cB,{className:"h-full w-full"})})]})]})}function mhe(){const t=vt(),[e,n]=x.useState("editor"),[i,r]=Bp(tA),s=i?"settings":e,o=a=>{i&&r(!1),n(a)};return m.jsx(_L,{value:s,onValueChange:o,asChild:!0,children:m.jsxs(m.Fragment,{children:[m.jsx(Gg,{value:"editor",asChild:!0,children:m.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:m.jsx(A8,{className:"h-full w-full"})})}),m.jsx(Gg,{value:"computer",asChild:!0,children:m.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:m.jsx(dz,{})})}),m.jsx(Gg,{value:"settings",asChild:!0,children:m.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:m.jsx(cB,{className:"h-full w-full"})})}),m.jsxs(CL,{className:"grid grid-cols-2 gap-2 p-2",children:[m.jsxs(nS,{value:"editor",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[m.jsx("span",{className:"icon-[lucide--file-terminal] mr-2 h-4 w-4"}),t("control.tabs.editor")]}),m.jsxs(nS,{value:"computer",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[m.jsx("span",{className:"icon-[lucide--computer] mr-2 h-4 w-4"}),t("control.tabs.computer")]})]})]})})}function ghe(){const{toastList:t}=qZ();return m.jsxs(Koe,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>m.jsxs(NB,{...o,variant:s,children:[m.jsxs("div",{className:"grid gap-1",children:[n&&m.jsx(IB,{children:n}),i&&m.jsx(DB,{children:i})]}),r,m.jsx(OB,{})]},e)),m.jsx(RB,{})]})}window.codemirror=null;ax.createRoot(document.getElementById("root")).render(m.jsx(sn.StrictMode,{children:m.jsxs(WU,{client:d5,children:[m.jsx(kY,{children:m.jsx(fhe,{})}),m.jsx(ghe,{})]})}));
